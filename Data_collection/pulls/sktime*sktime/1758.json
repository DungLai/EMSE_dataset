{"url":"https://api.github.com/repos/sktime/sktime/pulls/1758","id":802583280,"node_id":"PR_kwDOCVKAsc4v1nLw","html_url":"https://github.com/sktime/sktime/pull/1758","diff_url":"https://github.com/sktime/sktime/pull/1758.diff","patch_url":"https://github.com/sktime/sktime/pull/1758.patch","issue_url":"https://api.github.com/repos/sktime/sktime/issues/1758","number":1758,"state":"closed","locked":false,"title":"[ENH] Generalize splitters to accept timedeltas (equally spaced)","user":{"login":"khrapovs","id":3774663,"node_id":"MDQ6VXNlcjM3NzQ2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/3774663?v=4","gravatar_id":"","url":"https://api.github.com/users/khrapovs","html_url":"https://github.com/khrapovs","followers_url":"https://api.github.com/users/khrapovs/followers","following_url":"https://api.github.com/users/khrapovs/following{/other_user}","gists_url":"https://api.github.com/users/khrapovs/gists{/gist_id}","starred_url":"https://api.github.com/users/khrapovs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khrapovs/subscriptions","organizations_url":"https://api.github.com/users/khrapovs/orgs","repos_url":"https://api.github.com/users/khrapovs/repos","events_url":"https://api.github.com/users/khrapovs/events{/privacy}","received_events_url":"https://api.github.com/users/khrapovs/received_events","type":"User","site_admin":false},"body":"<!--\r\nThanks for contributing a pull request! Please ensure you have taken a look\r\nat our contribution guide: https://github.com/alan-turing-institute/sktime/blob/main/CONTRIBUTING.md\r\n-->\r\n\r\n#### Reference Issues/PRs\r\n<!--\r\nExample: Fixes #1234. See also #3456.\r\n\r\nPlease use keywords (e.g., Fixes) to create link to the issues or pull requests\r\nyou resolved, so that they will automatically be closed when your pull request\r\nis merged. See https://github.com/blog/1506-closing-issues-via-pull-requests\r\n-->\r\nhttps://github.com/alan-turing-institute/sktime/issues/1737\r\n\r\n#### What does this implement/fix? Explain your changes.\r\n<!--\r\nA clear and concise description of what you have implemented.\r\n-->\r\n\r\n- All splitters now accept not only integer, but also `timedelta` or `pd.DateOffset` for `initial_window`, `window_length`, and `step_length` arguments. No regression was introduced. The core changes are localized to `sktime/forecasting/model_selection/_split.py`.\r\n- All existing tests (`sktime/forecasting/model_selection/tests/test_split.py`) are only enriched for additional argument types. Test cases boil down to adding new types in `sktime/forecasting/tests/_config.py`. See variables `TEST_WINDOW_LENGTHS`, `TEST_INITIAL_WINDOW`, and `TEST_STEP_LENGTHS`.\r\n- I could not resist and added type hints in `sktime/forecasting/base/_fh.py` although it is not necessary for the core change. I added type hints to `_split.py` first, but for completeness I needed type hint for forecasting horizon which triggered the change in `_fh.py`.\r\n- `sktime/forecasting/model_evaluation/tests/test_evaluate.py` was only changed to preserve original tests. Other changes are automatic commit hooks. Same for `sktime/forecasting/model_selection/tests/test_tune.py`, `sktime/forecasting/tests/test_naive.py`, and `sktime/forecasting/tests/test_all_forecasters.py`.\r\n- In `sktime/utils/validation/__init__.py` and `sktime/utils/validation/forecasting.py` I have added a few validations for new types.\r\n\r\n#### Does your contribution introduce a new dependency? If yes, which one?\r\n\r\n<!--\r\nIf your contribution does add a new hard dependency, we may suggest to initially develop your contribution in a separate companion package in https://github.com/sktime/ to keep external dependencies of the core sktime package to a minimum.\r\n-->\r\n\r\nnone\r\n\r\n#### What should a reviewer concentrate their feedback on?\r\n\r\n<!-- This section is particularly useful if you have a pull request that is still in development. You can guide the reviews to focus on the parts that are ready for their comments. We suggest using bullets (indicated by * or -) and filled checkboxes [x] here -->\r\n\r\nThe focus of this PR are the new types of above mentioned arguments. There are relatively a lot of changes, but all of them are triggered by this generalization.\r\n\r\n#### Any other comments?\r\n<!--\r\nPlease be aware that we are a loose team of volunteers so patience is necessary; assistance handling other issues is very welcome. We value all user contributions, no matter how minor they are. If we are slow to review, either the pull request needs some benchmarking, tinkering, convincing, etc. or more likely the reviewers are simply busy. In either case, we ask for your understanding during the review process.\r\n-->\r\n\r\nThis is the first, but hopefully, logically complete batch of changes. I have a much bigger target in mind (see #1737). Personally, I prefer smaller PRs, hence I would prefer to stop here and address other required changes (like generalization of `ForecastHorizon`) in another PR.\r\n\r\n#### PR checklist\r\n<!--\r\nPlease go through the checklist below. Please feel free to remove points if they are not applicable.\r\n-->\r\n\r\n##### For all contributions\r\n- [x] I've added myself to the [list of contributors](https://github.com/alan-turing-institute/sktime/blob/main/.all-contributorsrc).\r\n- [ ] Optionally, I've updated sktime's [CODEOWNERS](https://github.com/alan-turing-institute/sktime/blob/main/CODEOWNERS) to receive notifications about future changes to these files.\r\n- [x] I've added unit tests and made sure they pass locally.\r\n\r\n<!--\r\nThanks for contributing!\r\n-->\r\n","created_at":"2021-12-14T17:33:52Z","updated_at":"2022-01-25T13:28:56Z","closed_at":"2022-01-25T12:27:23Z","merged_at":"2022-01-25T12:27:23Z","merge_commit_sha":"7a18cb229fa4e865e86a8e500d0968ac1c0db2c8","assignee":null,"assignees":[],"requested_reviewers":[{"login":"TonyBagnall","id":9594042,"node_id":"MDQ6VXNlcjk1OTQwNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9594042?v=4","gravatar_id":"","url":"https://api.github.com/users/TonyBagnall","html_url":"https://github.com/TonyBagnall","followers_url":"https://api.github.com/users/TonyBagnall/followers","following_url":"https://api.github.com/users/TonyBagnall/following{/other_user}","gists_url":"https://api.github.com/users/TonyBagnall/gists{/gist_id}","starred_url":"https://api.github.com/users/TonyBagnall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TonyBagnall/subscriptions","organizations_url":"https://api.github.com/users/TonyBagnall/orgs","repos_url":"https://api.github.com/users/TonyBagnall/repos","events_url":"https://api.github.com/users/TonyBagnall/events{/privacy}","received_events_url":"https://api.github.com/users/TonyBagnall/received_events","type":"User","site_admin":false},{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/sktime/sktime/pulls/1758/commits","review_comments_url":"https://api.github.com/repos/sktime/sktime/pulls/1758/comments","review_comment_url":"https://api.github.com/repos/sktime/sktime/pulls/comments{/number}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/1758/comments","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/d462f66e8eaf58f6eb846d0ce6d0b8341591e563","head":{"label":"khrapovs:splitters-with-time-unit","ref":"splitters-with-time-unit","sha":"d462f66e8eaf58f6eb846d0ce6d0b8341591e563","user":{"login":"khrapovs","id":3774663,"node_id":"MDQ6VXNlcjM3NzQ2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/3774663?v=4","gravatar_id":"","url":"https://api.github.com/users/khrapovs","html_url":"https://github.com/khrapovs","followers_url":"https://api.github.com/users/khrapovs/followers","following_url":"https://api.github.com/users/khrapovs/following{/other_user}","gists_url":"https://api.github.com/users/khrapovs/gists{/gist_id}","starred_url":"https://api.github.com/users/khrapovs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khrapovs/subscriptions","organizations_url":"https://api.github.com/users/khrapovs/orgs","repos_url":"https://api.github.com/users/khrapovs/repos","events_url":"https://api.github.com/users/khrapovs/events{/privacy}","received_events_url":"https://api.github.com/users/khrapovs/received_events","type":"User","site_admin":false},"repo":{"id":437058072,"node_id":"R_kgDOGgz6GA","name":"sktime","full_name":"khrapovs/sktime","private":false,"owner":{"login":"khrapovs","id":3774663,"node_id":"MDQ6VXNlcjM3NzQ2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/3774663?v=4","gravatar_id":"","url":"https://api.github.com/users/khrapovs","html_url":"https://github.com/khrapovs","followers_url":"https://api.github.com/users/khrapovs/followers","following_url":"https://api.github.com/users/khrapovs/following{/other_user}","gists_url":"https://api.github.com/users/khrapovs/gists{/gist_id}","starred_url":"https://api.github.com/users/khrapovs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khrapovs/subscriptions","organizations_url":"https://api.github.com/users/khrapovs/orgs","repos_url":"https://api.github.com/users/khrapovs/repos","events_url":"https://api.github.com/users/khrapovs/events{/privacy}","received_events_url":"https://api.github.com/users/khrapovs/received_events","type":"User","site_admin":false},"html_url":"https://github.com/khrapovs/sktime","description":"A unified framework for machine learning with time series","fork":true,"url":"https://api.github.com/repos/khrapovs/sktime","forks_url":"https://api.github.com/repos/khrapovs/sktime/forks","keys_url":"https://api.github.com/repos/khrapovs/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/khrapovs/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/khrapovs/sktime/teams","hooks_url":"https://api.github.com/repos/khrapovs/sktime/hooks","issue_events_url":"https://api.github.com/repos/khrapovs/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/khrapovs/sktime/events","assignees_url":"https://api.github.com/repos/khrapovs/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/khrapovs/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/khrapovs/sktime/tags","blobs_url":"https://api.github.com/repos/khrapovs/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/khrapovs/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/khrapovs/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/khrapovs/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/khrapovs/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/khrapovs/sktime/languages","stargazers_url":"https://api.github.com/repos/khrapovs/sktime/stargazers","contributors_url":"https://api.github.com/repos/khrapovs/sktime/contributors","subscribers_url":"https://api.github.com/repos/khrapovs/sktime/subscribers","subscription_url":"https://api.github.com/repos/khrapovs/sktime/subscription","commits_url":"https://api.github.com/repos/khrapovs/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/khrapovs/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/khrapovs/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/khrapovs/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/khrapovs/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/khrapovs/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/khrapovs/sktime/merges","archive_url":"https://api.github.com/repos/khrapovs/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/khrapovs/sktime/downloads","issues_url":"https://api.github.com/repos/khrapovs/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/khrapovs/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/khrapovs/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/khrapovs/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/khrapovs/sktime/labels{/name}","releases_url":"https://api.github.com/repos/khrapovs/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/khrapovs/sktime/deployments","created_at":"2021-12-10T17:17:53Z","updated_at":"2022-01-10T08:12:56Z","pushed_at":"2022-12-10T14:27:02Z","git_url":"git://github.com/khrapovs/sktime.git","ssh_url":"git@github.com:khrapovs/sktime.git","clone_url":"https://github.com/khrapovs/sktime.git","svn_url":"https://github.com/khrapovs/sktime","homepage":"https://sktime.org","size":49437,"stargazers_count":0,"watchers_count":0,"language":"Python","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"sktime:main","ref":"main","sha":"0c30cf311d58a9319e6c1f21fc18d9d6e4e3351a","user":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"repo":{"id":156401841,"node_id":"MDEwOlJlcG9zaXRvcnkxNTY0MDE4NDE=","name":"sktime","full_name":"sktime/sktime","private":false,"owner":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/sktime/sktime","description":"A unified framework for machine learning with time series","fork":false,"url":"https://api.github.com/repos/sktime/sktime","forks_url":"https://api.github.com/repos/sktime/sktime/forks","keys_url":"https://api.github.com/repos/sktime/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sktime/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sktime/sktime/teams","hooks_url":"https://api.github.com/repos/sktime/sktime/hooks","issue_events_url":"https://api.github.com/repos/sktime/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/sktime/sktime/events","assignees_url":"https://api.github.com/repos/sktime/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/sktime/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/sktime/sktime/tags","blobs_url":"https://api.github.com/repos/sktime/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sktime/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sktime/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/sktime/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/sktime/sktime/languages","stargazers_url":"https://api.github.com/repos/sktime/sktime/stargazers","contributors_url":"https://api.github.com/repos/sktime/sktime/contributors","subscribers_url":"https://api.github.com/repos/sktime/sktime/subscribers","subscription_url":"https://api.github.com/repos/sktime/sktime/subscription","commits_url":"https://api.github.com/repos/sktime/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/sktime/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/sktime/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/sktime/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/sktime/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/sktime/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sktime/sktime/merges","archive_url":"https://api.github.com/repos/sktime/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sktime/sktime/downloads","issues_url":"https://api.github.com/repos/sktime/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/sktime/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/sktime/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/sktime/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sktime/sktime/labels{/name}","releases_url":"https://api.github.com/repos/sktime/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/sktime/sktime/deployments","created_at":"2018-11-06T15:08:24Z","updated_at":"2023-01-26T19:26:46Z","pushed_at":"2023-01-26T23:01:42Z","git_url":"git://github.com/sktime/sktime.git","ssh_url":"git@github.com:sktime/sktime.git","clone_url":"https://github.com/sktime/sktime.git","svn_url":"https://github.com/sktime/sktime","homepage":"https://sktime.org","size":57239,"stargazers_count":6065,"watchers_count":6065,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1009,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":648,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-mining","data-science","forecasting","machine-learning","scikit-learn","time-series","time-series-analysis","time-series-classification","time-series-regression"],"visibility":"public","forks":1009,"open_issues":648,"watchers":6065,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/sktime/sktime/pulls/1758"},"html":{"href":"https://github.com/sktime/sktime/pull/1758"},"issue":{"href":"https://api.github.com/repos/sktime/sktime/issues/1758"},"comments":{"href":"https://api.github.com/repos/sktime/sktime/issues/1758/comments"},"review_comments":{"href":"https://api.github.com/repos/sktime/sktime/pulls/1758/comments"},"review_comment":{"href":"https://api.github.com/repos/sktime/sktime/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/sktime/sktime/pulls/1758/commits"},"statuses":{"href":"https://api.github.com/repos/sktime/sktime/statuses/d462f66e8eaf58f6eb846d0ce6d0b8341591e563"}},"author_association":"COLLABORATOR","auto_merge":null,"active_lock_reason":null,"merged":true,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"comments":7,"review_comments":12,"maintainer_can_modify":false,"commits":73,"additions":753,"deletions":243,"changed_files":14}