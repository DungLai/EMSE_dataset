{"url":"https://api.github.com/repos/sktime/sktime/pulls/3932","id":1163945659,"node_id":"PR_kwDOCVKAsc5FYGa7","html_url":"https://github.com/sktime/sktime/pull/3932","diff_url":"https://github.com/sktime/sktime/pull/3932.diff","patch_url":"https://github.com/sktime/sktime/pull/3932.patch","issue_url":"https://api.github.com/repos/sktime/sktime/issues/3932","number":3932,"state":"open","locked":false,"title":"[ENH] TSFeatures adaptor","user":{"login":"chillerobscuro","id":5232872,"node_id":"MDQ6VXNlcjUyMzI4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5232872?v=4","gravatar_id":"","url":"https://api.github.com/users/chillerobscuro","html_url":"https://github.com/chillerobscuro","followers_url":"https://api.github.com/users/chillerobscuro/followers","following_url":"https://api.github.com/users/chillerobscuro/following{/other_user}","gists_url":"https://api.github.com/users/chillerobscuro/gists{/gist_id}","starred_url":"https://api.github.com/users/chillerobscuro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chillerobscuro/subscriptions","organizations_url":"https://api.github.com/users/chillerobscuro/orgs","repos_url":"https://api.github.com/users/chillerobscuro/repos","events_url":"https://api.github.com/users/chillerobscuro/events{/privacy}","received_events_url":"https://api.github.com/users/chillerobscuro/received_events","type":"User","site_admin":false},"body":"<!--\r\nThanks for contributing a pull request! Please ensure you have taken a look\r\nat our contribution guide: https://github.com/sktime/sktime/blob/main/CONTRIBUTING.md\r\n-->\r\n\r\n#### Reference Issues/PRs\r\nCloses [Issue-3712](https://github.com/sktime/sktime/issues/3712)\r\n\r\n\r\n#### What does this implement/fix? Explain your changes.\r\nA wrapper for [TSfeatures](https://pypi.org/project/tsfeatures/) library which computes \"features used by Montero-Manso, Talagala, Hyndman and Athanasopoulos in [their implementation of the FFORMA model](https://htmlpreview.github.io/?https://github.com/robjhyndman/M4metalearning/blob/master/docs/M4_methodology.html#features)\"\r\n\r\n#### Does your contribution introduce a new dependency? If yes, which one?\r\nTSFeatures package mentioned above\r\n\r\n#### This is a draft PR\r\n\r\nBecause this transformer does not yet pass tests or `check_estimator()`, because each test case requires a `freq` argument that matches the seasonal period of the data, which is not currently supported. Here are some comments from Franz on this issue: \r\n```\r\n    - currently, the interface contract assumes all parameters work for all data, with potential restrictions through tags\r\n    - there is a somewhat obscure way to give scenarios and estimators tags and then define criteria on “does estimator match the test case”\r\n    - practically, there is a baseline measure if tests don’t pass and it’s not a “true” failure, or one that is hard to fix:\r\n        add exceptions in the tests/_config.py\r\n        open an issue that describes the problem clearly, so it can be fixed later\r\n        link issue number in the comment in tests/_config, next to the exception\r\n    - general design question: parameter validity depending on data\r\n        do we want to allow this at all? Or consider it an interface violation?\r\n            another example: ColumnTransformer referring to column names in the data set that is expected\r\n            this will work only for data sets that actually have those column names\r\n     - if we allow this, what is the interface\r\n     - how to deal with this in the tests/scenarios framework\r\n```\r\n\r\nSo I'm leaving this here as a progress checkpoint until there is a clear path forward that we're happy with, ie adding many tests to the \"test exceptions\" in config. The logic for the transformation is simple and just requires getting the data into a 3 column df in the right format. This works for both single and multi series inputs, as long as you pass the matching `freq`. For example:\r\n```\r\nfrom sktime.datasets import load_airline, load_longley\r\nfrom sktime.transformations.panel.tsfeatures import TSFeaturesExtractor\r\n\r\ny = load_airline()\r\nz = load_longley()[1]\r\n\r\nt = TSFeaturesExtractor(freq=12)  # or freq=1 for z\r\nxt = t.fit_transform(y)  # or replace y with z for panel input example\r\n```\r\n\r\n##### For new estimators\r\n- [ ] I've added the estimator to the online documentation.\r\n- [ ] I've updated the existing example notebooks or provided a new one to showcase how my estimator works.\r\n\r\n\r\n<!--\r\nThanks for contributing!\r\n-->\r\n","created_at":"2022-12-13T23:00:35Z","updated_at":"2022-12-15T04:51:56Z","closed_at":null,"merged_at":null,"merge_commit_sha":"cd3346ae9ea75f17e44fe1318fe2d0c4037f881b","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"draft":true,"commits_url":"https://api.github.com/repos/sktime/sktime/pulls/3932/commits","review_comments_url":"https://api.github.com/repos/sktime/sktime/pulls/3932/comments","review_comment_url":"https://api.github.com/repos/sktime/sktime/pulls/comments{/number}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/3932/comments","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/73d5fa2742cf49d8ea9639b815b209890b3510ba","head":{"label":"chillerobscuro:add-tsfeatures","ref":"add-tsfeatures","sha":"73d5fa2742cf49d8ea9639b815b209890b3510ba","user":{"login":"chillerobscuro","id":5232872,"node_id":"MDQ6VXNlcjUyMzI4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5232872?v=4","gravatar_id":"","url":"https://api.github.com/users/chillerobscuro","html_url":"https://github.com/chillerobscuro","followers_url":"https://api.github.com/users/chillerobscuro/followers","following_url":"https://api.github.com/users/chillerobscuro/following{/other_user}","gists_url":"https://api.github.com/users/chillerobscuro/gists{/gist_id}","starred_url":"https://api.github.com/users/chillerobscuro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chillerobscuro/subscriptions","organizations_url":"https://api.github.com/users/chillerobscuro/orgs","repos_url":"https://api.github.com/users/chillerobscuro/repos","events_url":"https://api.github.com/users/chillerobscuro/events{/privacy}","received_events_url":"https://api.github.com/users/chillerobscuro/received_events","type":"User","site_admin":false},"repo":{"id":527688899,"node_id":"R_kgDOH3Pkww","name":"sktime","full_name":"chillerobscuro/sktime","private":false,"owner":{"login":"chillerobscuro","id":5232872,"node_id":"MDQ6VXNlcjUyMzI4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5232872?v=4","gravatar_id":"","url":"https://api.github.com/users/chillerobscuro","html_url":"https://github.com/chillerobscuro","followers_url":"https://api.github.com/users/chillerobscuro/followers","following_url":"https://api.github.com/users/chillerobscuro/following{/other_user}","gists_url":"https://api.github.com/users/chillerobscuro/gists{/gist_id}","starred_url":"https://api.github.com/users/chillerobscuro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chillerobscuro/subscriptions","organizations_url":"https://api.github.com/users/chillerobscuro/orgs","repos_url":"https://api.github.com/users/chillerobscuro/repos","events_url":"https://api.github.com/users/chillerobscuro/events{/privacy}","received_events_url":"https://api.github.com/users/chillerobscuro/received_events","type":"User","site_admin":false},"html_url":"https://github.com/chillerobscuro/sktime","description":"A unified framework for machine learning with time series","fork":true,"url":"https://api.github.com/repos/chillerobscuro/sktime","forks_url":"https://api.github.com/repos/chillerobscuro/sktime/forks","keys_url":"https://api.github.com/repos/chillerobscuro/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/chillerobscuro/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/chillerobscuro/sktime/teams","hooks_url":"https://api.github.com/repos/chillerobscuro/sktime/hooks","issue_events_url":"https://api.github.com/repos/chillerobscuro/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/chillerobscuro/sktime/events","assignees_url":"https://api.github.com/repos/chillerobscuro/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/chillerobscuro/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/chillerobscuro/sktime/tags","blobs_url":"https://api.github.com/repos/chillerobscuro/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/chillerobscuro/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/chillerobscuro/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/chillerobscuro/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/chillerobscuro/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/chillerobscuro/sktime/languages","stargazers_url":"https://api.github.com/repos/chillerobscuro/sktime/stargazers","contributors_url":"https://api.github.com/repos/chillerobscuro/sktime/contributors","subscribers_url":"https://api.github.com/repos/chillerobscuro/sktime/subscribers","subscription_url":"https://api.github.com/repos/chillerobscuro/sktime/subscription","commits_url":"https://api.github.com/repos/chillerobscuro/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/chillerobscuro/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/chillerobscuro/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/chillerobscuro/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/chillerobscuro/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/chillerobscuro/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/chillerobscuro/sktime/merges","archive_url":"https://api.github.com/repos/chillerobscuro/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/chillerobscuro/sktime/downloads","issues_url":"https://api.github.com/repos/chillerobscuro/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/chillerobscuro/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/chillerobscuro/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/chillerobscuro/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/chillerobscuro/sktime/labels{/name}","releases_url":"https://api.github.com/repos/chillerobscuro/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/chillerobscuro/sktime/deployments","created_at":"2022-08-22T18:36:46Z","updated_at":"2022-11-03T16:24:24Z","pushed_at":"2022-12-15T01:43:44Z","git_url":"git://github.com/chillerobscuro/sktime.git","ssh_url":"git@github.com:chillerobscuro/sktime.git","clone_url":"https://github.com/chillerobscuro/sktime.git","svn_url":"https://github.com/chillerobscuro/sktime","homepage":"https://sktime.org","size":48262,"stargazers_count":0,"watchers_count":0,"language":"Python","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"main"}},"base":{"label":"sktime:main","ref":"main","sha":"c10cedbf3135d0fa791bb146adf8172dd676f0d4","user":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"repo":{"id":156401841,"node_id":"MDEwOlJlcG9zaXRvcnkxNTY0MDE4NDE=","name":"sktime","full_name":"sktime/sktime","private":false,"owner":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/sktime/sktime","description":"A unified framework for machine learning with time series","fork":false,"url":"https://api.github.com/repos/sktime/sktime","forks_url":"https://api.github.com/repos/sktime/sktime/forks","keys_url":"https://api.github.com/repos/sktime/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sktime/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sktime/sktime/teams","hooks_url":"https://api.github.com/repos/sktime/sktime/hooks","issue_events_url":"https://api.github.com/repos/sktime/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/sktime/sktime/events","assignees_url":"https://api.github.com/repos/sktime/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/sktime/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/sktime/sktime/tags","blobs_url":"https://api.github.com/repos/sktime/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sktime/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sktime/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/sktime/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/sktime/sktime/languages","stargazers_url":"https://api.github.com/repos/sktime/sktime/stargazers","contributors_url":"https://api.github.com/repos/sktime/sktime/contributors","subscribers_url":"https://api.github.com/repos/sktime/sktime/subscribers","subscription_url":"https://api.github.com/repos/sktime/sktime/subscription","commits_url":"https://api.github.com/repos/sktime/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/sktime/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/sktime/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/sktime/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/sktime/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/sktime/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sktime/sktime/merges","archive_url":"https://api.github.com/repos/sktime/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sktime/sktime/downloads","issues_url":"https://api.github.com/repos/sktime/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/sktime/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/sktime/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/sktime/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sktime/sktime/labels{/name}","releases_url":"https://api.github.com/repos/sktime/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/sktime/sktime/deployments","created_at":"2018-11-06T15:08:24Z","updated_at":"2023-02-05T08:09:43Z","pushed_at":"2023-02-05T11:07:39Z","git_url":"git://github.com/sktime/sktime.git","ssh_url":"git@github.com:sktime/sktime.git","clone_url":"https://github.com/sktime/sktime.git","svn_url":"https://github.com/sktime/sktime","homepage":"https://sktime.org","size":56018,"stargazers_count":6087,"watchers_count":6087,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1016,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":644,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-mining","data-science","forecasting","machine-learning","scikit-learn","time-series","time-series-analysis","time-series-classification","time-series-regression"],"visibility":"public","forks":1016,"open_issues":644,"watchers":6087,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/sktime/sktime/pulls/3932"},"html":{"href":"https://github.com/sktime/sktime/pull/3932"},"issue":{"href":"https://api.github.com/repos/sktime/sktime/issues/3932"},"comments":{"href":"https://api.github.com/repos/sktime/sktime/issues/3932/comments"},"review_comments":{"href":"https://api.github.com/repos/sktime/sktime/pulls/3932/comments"},"review_comment":{"href":"https://api.github.com/repos/sktime/sktime/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/sktime/sktime/pulls/3932/commits"},"statuses":{"href":"https://api.github.com/repos/sktime/sktime/statuses/73d5fa2742cf49d8ea9639b815b209890b3510ba"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null,"merged":false,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":null,"comments":1,"review_comments":0,"maintainer_can_modify":true,"commits":3,"additions":148,"deletions":0,"changed_files":2}