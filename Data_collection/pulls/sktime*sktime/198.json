{"url":"https://api.github.com/repos/sktime/sktime/pulls/198","id":341811898,"node_id":"MDExOlB1bGxSZXF1ZXN0MzQxODExODk4","html_url":"https://github.com/sktime/sktime/pull/198","diff_url":"https://github.com/sktime/sktime/pull/198.diff","patch_url":"https://github.com/sktime/sktime/pull/198.patch","issue_url":"https://api.github.com/repos/sktime/sktime/issues/198","number":198,"state":"closed","locked":false,"title":"Theta forecaster and prediction intervals","user":{"login":"big-o","id":1134151,"node_id":"MDQ6VXNlcjExMzQxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/1134151?v=4","gravatar_id":"","url":"https://api.github.com/users/big-o","html_url":"https://github.com/big-o","followers_url":"https://api.github.com/users/big-o/followers","following_url":"https://api.github.com/users/big-o/following{/other_user}","gists_url":"https://api.github.com/users/big-o/gists{/gist_id}","starred_url":"https://api.github.com/users/big-o/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-o/subscriptions","organizations_url":"https://api.github.com/users/big-o/orgs","repos_url":"https://api.github.com/users/big-o/repos","events_url":"https://api.github.com/users/big-o/events{/privacy}","received_events_url":"https://api.github.com/users/big-o/received_events","type":"User","site_admin":false},"body":"<!--\r\nThanks for contributing a pull request! Please ensure you have taken a look at\r\nthe extension guidelines: https://github.com/alan-turing-institute/sktime/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n#### Reference Issues/PRs\r\n<!--\r\nExample: Fixes #1234. See also #3456.\r\n\r\nPlease use keywords (e.g., Fixes) to create link to the issues or pull requests\r\nyou resolved, so that they will automatically be closed when your pull request\r\nis merged. See https://github.com/blog/1506-closing-issues-via-pull-requests\r\n-->\r\n#67 #97 \r\n\r\n#### What does this implement/fix? Explain your changes.\r\n<!--\r\nA clear and concise description of what you have implemented.\r\n-->\r\nIncludes:\r\n\r\n* `ThetaForecaster` which implements the [Theta method](https://robjhyndman.com/papers/Theta.pdf).\r\n* Unit tests for `ThetaForecaster`.\r\n* A new dataset in `datasets.load_airline` - the Box/Jenkins airline passengers dataset. I thought this provided a clearer example of simple, univariate, seasonal data than some of the other datasets currently in sktime.\r\n* New interface in `BaseForecaster` to enable prediction intervals to be calculated: `prediction_errors`. Currently this has only been implemented for `ThetaForecaster`. Running this method for any other forecaster will raise a `NotImplementedError`.\r\n* Alternatively, prediction intervals may also be obtained by calling `predict()` and providing one or many confidence levels. This will cause the method to return a tuple of predictions and errors, instead of just predictions.\r\n* A `plot()` convenience method for forecasters. As well as plotting the forecasts (optionally alongside any training/test data), it will also plot prediction intervals if available for that forecaster.\r\n* A new notebook, `simple_forecasting.ipynb`, to demonstrate all of the above.\r\n\r\n#### Any other comments?\r\n<!--\r\nPlease be aware that we are a loose team of volunteers so patience is\r\nnecessary; assistance handling other issues is very welcome. We value\r\nall user contributions, no matter how minor they are. If we are slow to\r\nreview, either the pull request needs some benchmarking, tinkering,\r\nconvincing, etc. or more likely the reviewers are simply busy. In either\r\ncase, we ask for your understanding during the review process.\r\n\r\nThanks for contributing!\r\n-->\r\nOther projects I looked at like as [`pmdarima`](https://github.com/tgsmith61591/pmdarima) and R's [`forecast`](https://github.com/robjhyndman/forecast) library return upper and lower bounds for prediction intervals. I've opted for a different approach though, of just doing the bare minimum and calculating the forecast point errors and returning this as a single series. It's then trivial to apply this to your forecasts to obtain the intervals. This is what the new `plot()` method does under the hood. I think it should still be fairly easy to interface with some of these other packages even with this different approach but please let me know if you disagree.\r\n\r\nFYI, `prediction_errors` supports the calculation of producing PIs at different confidence levels, something that was discussed in #97. It also allows each forecaster to define its own methods for PI calculations. I didn't attempt to implement this for any of the other forecasters as this could be quite a lot of code for some of them (in the case of ETS forecasting, I believe some models don't even have a known formula - for this reason I implemented the interface in a way that makes it optional). \r\n\r\nI thought about merging in the new notebook with the existing forecasting notebook, but wasn't sure how to best make them fit together. I'm happy to take a steer on this if you'd prefer me to put all the forecasting stuff in a single notebook before merging the PR.\r\n\r\n# PR checklist\r\n- [x] I have added unit tests and made sure they pass locally. \r\n- [x] I have updated the existing example notebooks or provided a new one to showcase how my algorithm works.\r\n- [x] I have updated sktime's [estimator overview](https://github.com/alan-turing-institute/sktime/blob/master/ESTIMATOR_OVERVIEW.md) and I'm committed to maintain my contribution and provide bug fixes if necessary.","created_at":"2019-11-17T02:12:57Z","updated_at":"2020-02-03T12:59:06Z","closed_at":"2020-02-03T12:51:04Z","merged_at":"2020-02-03T12:51:04Z","merge_commit_sha":"f3efcb2377f5d88b462edc5f3d8eacecc4b52ddb","assignee":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"assignees":[{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":1180387595,"node_id":"MDU6TGFiZWwxMTgwMzg3NTk1","url":"https://api.github.com/repos/sktime/sktime/labels/implementing%20algorithms","name":"implementing algorithms","color":"c5c0f7","default":false,"description":"Implementing new algorithms/estimators"}],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/sktime/sktime/pulls/198/commits","review_comments_url":"https://api.github.com/repos/sktime/sktime/pulls/198/comments","review_comment_url":"https://api.github.com/repos/sktime/sktime/pulls/comments{/number}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/198/comments","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/4794bab41615d9e122029f6bf8a37300a835d7ea","head":{"label":"big-o:theta-forecaster","ref":"theta-forecaster","sha":"4794bab41615d9e122029f6bf8a37300a835d7ea","user":{"login":"big-o","id":1134151,"node_id":"MDQ6VXNlcjExMzQxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/1134151?v=4","gravatar_id":"","url":"https://api.github.com/users/big-o","html_url":"https://github.com/big-o","followers_url":"https://api.github.com/users/big-o/followers","following_url":"https://api.github.com/users/big-o/following{/other_user}","gists_url":"https://api.github.com/users/big-o/gists{/gist_id}","starred_url":"https://api.github.com/users/big-o/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-o/subscriptions","organizations_url":"https://api.github.com/users/big-o/orgs","repos_url":"https://api.github.com/users/big-o/repos","events_url":"https://api.github.com/users/big-o/events{/privacy}","received_events_url":"https://api.github.com/users/big-o/received_events","type":"User","site_admin":false},"repo":{"id":221320470,"node_id":"MDEwOlJlcG9zaXRvcnkyMjEzMjA0NzA=","name":"sktime","full_name":"big-o/sktime","private":false,"owner":{"login":"big-o","id":1134151,"node_id":"MDQ6VXNlcjExMzQxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/1134151?v=4","gravatar_id":"","url":"https://api.github.com/users/big-o","html_url":"https://github.com/big-o","followers_url":"https://api.github.com/users/big-o/followers","following_url":"https://api.github.com/users/big-o/following{/other_user}","gists_url":"https://api.github.com/users/big-o/gists{/gist_id}","starred_url":"https://api.github.com/users/big-o/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-o/subscriptions","organizations_url":"https://api.github.com/users/big-o/orgs","repos_url":"https://api.github.com/users/big-o/repos","events_url":"https://api.github.com/users/big-o/events{/privacy}","received_events_url":"https://api.github.com/users/big-o/received_events","type":"User","site_admin":false},"html_url":"https://github.com/big-o/sktime","description":"A scikit-learn compatible Python toolbox for learning with time series data","fork":true,"url":"https://api.github.com/repos/big-o/sktime","forks_url":"https://api.github.com/repos/big-o/sktime/forks","keys_url":"https://api.github.com/repos/big-o/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/big-o/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/big-o/sktime/teams","hooks_url":"https://api.github.com/repos/big-o/sktime/hooks","issue_events_url":"https://api.github.com/repos/big-o/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/big-o/sktime/events","assignees_url":"https://api.github.com/repos/big-o/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/big-o/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/big-o/sktime/tags","blobs_url":"https://api.github.com/repos/big-o/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/big-o/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/big-o/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/big-o/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/big-o/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/big-o/sktime/languages","stargazers_url":"https://api.github.com/repos/big-o/sktime/stargazers","contributors_url":"https://api.github.com/repos/big-o/sktime/contributors","subscribers_url":"https://api.github.com/repos/big-o/sktime/subscribers","subscription_url":"https://api.github.com/repos/big-o/sktime/subscription","commits_url":"https://api.github.com/repos/big-o/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/big-o/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/big-o/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/big-o/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/big-o/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/big-o/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/big-o/sktime/merges","archive_url":"https://api.github.com/repos/big-o/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/big-o/sktime/downloads","issues_url":"https://api.github.com/repos/big-o/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/big-o/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/big-o/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/big-o/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/big-o/sktime/labels{/name}","releases_url":"https://api.github.com/repos/big-o/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/big-o/sktime/deployments","created_at":"2019-11-12T22:01:11Z","updated_at":"2020-10-04T11:46:02Z","pushed_at":"2020-10-04T11:45:54Z","git_url":"git://github.com/big-o/sktime.git","ssh_url":"git@github.com:big-o/sktime.git","clone_url":"https://github.com/big-o/sktime.git","svn_url":"https://github.com/big-o/sktime","homepage":"https://alan-turing-institute.github.io/sktime/","size":20744,"stargazers_count":0,"watchers_count":0,"language":"Python","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"sktime:fcast","ref":"fcast","sha":"b68d2f03879d6eb40ef534fbe92bf75a4f5b7edf","user":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"repo":{"id":156401841,"node_id":"MDEwOlJlcG9zaXRvcnkxNTY0MDE4NDE=","name":"sktime","full_name":"sktime/sktime","private":false,"owner":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/sktime/sktime","description":"A unified framework for machine learning with time series","fork":false,"url":"https://api.github.com/repos/sktime/sktime","forks_url":"https://api.github.com/repos/sktime/sktime/forks","keys_url":"https://api.github.com/repos/sktime/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sktime/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sktime/sktime/teams","hooks_url":"https://api.github.com/repos/sktime/sktime/hooks","issue_events_url":"https://api.github.com/repos/sktime/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/sktime/sktime/events","assignees_url":"https://api.github.com/repos/sktime/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/sktime/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/sktime/sktime/tags","blobs_url":"https://api.github.com/repos/sktime/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sktime/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sktime/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/sktime/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/sktime/sktime/languages","stargazers_url":"https://api.github.com/repos/sktime/sktime/stargazers","contributors_url":"https://api.github.com/repos/sktime/sktime/contributors","subscribers_url":"https://api.github.com/repos/sktime/sktime/subscribers","subscription_url":"https://api.github.com/repos/sktime/sktime/subscription","commits_url":"https://api.github.com/repos/sktime/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/sktime/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/sktime/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/sktime/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/sktime/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/sktime/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sktime/sktime/merges","archive_url":"https://api.github.com/repos/sktime/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sktime/sktime/downloads","issues_url":"https://api.github.com/repos/sktime/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/sktime/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/sktime/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/sktime/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sktime/sktime/labels{/name}","releases_url":"https://api.github.com/repos/sktime/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/sktime/sktime/deployments","created_at":"2018-11-06T15:08:24Z","updated_at":"2023-01-26T19:26:46Z","pushed_at":"2023-01-26T23:01:42Z","git_url":"git://github.com/sktime/sktime.git","ssh_url":"git@github.com:sktime/sktime.git","clone_url":"https://github.com/sktime/sktime.git","svn_url":"https://github.com/sktime/sktime","homepage":"https://sktime.org","size":57239,"stargazers_count":6065,"watchers_count":6065,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1009,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":648,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-mining","data-science","forecasting","machine-learning","scikit-learn","time-series","time-series-analysis","time-series-classification","time-series-regression"],"visibility":"public","forks":1009,"open_issues":648,"watchers":6065,"default_branch":"main"}},"_links":{"self":{"href":"https://api.github.com/repos/sktime/sktime/pulls/198"},"html":{"href":"https://github.com/sktime/sktime/pull/198"},"issue":{"href":"https://api.github.com/repos/sktime/sktime/issues/198"},"comments":{"href":"https://api.github.com/repos/sktime/sktime/issues/198/comments"},"review_comments":{"href":"https://api.github.com/repos/sktime/sktime/pulls/198/comments"},"review_comment":{"href":"https://api.github.com/repos/sktime/sktime/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/sktime/sktime/pulls/198/commits"},"statuses":{"href":"https://api.github.com/repos/sktime/sktime/statuses/4794bab41615d9e122029f6bf8a37300a835d7ea"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null,"merged":true,"mergeable":false,"rebaseable":false,"mergeable_state":"dirty","merged_by":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"comments":1,"review_comments":15,"maintainer_can_modify":false,"commits":37,"additions":7750,"deletions":36,"changed_files":20}