{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/3","repository_url":"https://api.github.com/repos/nikitakit/self-attentive-parser","labels_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/3/labels{/name}","comments_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/3/comments","events_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/3/events","html_url":"https://github.com/nikitakit/self-attentive-parser/issues/3","id":332832164,"node_id":"MDU6SXNzdWUzMzI4MzIxNjQ=","number":3,"title":"Questioning a parse result","user":{"login":"colingoldberg","id":2991417,"node_id":"MDQ6VXNlcjI5OTE0MTc=","avatar_url":"https://avatars.githubusercontent.com/u/2991417?v=4","gravatar_id":"","url":"https://api.github.com/users/colingoldberg","html_url":"https://github.com/colingoldberg","followers_url":"https://api.github.com/users/colingoldberg/followers","following_url":"https://api.github.com/users/colingoldberg/following{/other_user}","gists_url":"https://api.github.com/users/colingoldberg/gists{/gist_id}","starred_url":"https://api.github.com/users/colingoldberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colingoldberg/subscriptions","organizations_url":"https://api.github.com/users/colingoldberg/orgs","repos_url":"https://api.github.com/users/colingoldberg/repos","events_url":"https://api.github.com/users/colingoldberg/events{/privacy}","received_events_url":"https://api.github.com/users/colingoldberg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-06-15T16:07:16Z","updated_at":"2018-12-31T20:05:19Z","closed_at":"2018-07-13T02:44:54Z","author_association":"NONE","active_lock_reason":null,"body":"I am not sure about the following - please clarify - or report a bug (?)\r\n\r\nThe text I am parsing:\r\nwhen a notification is received that a driver is available then update that fact in the database\r\n\r\nResult from parse_string:\r\n>>> print(sent._.parse_string)\r\n(FRAG (SBAR (WHADVP (WRB when)) (S (NP (DT a) (NN notification)) (VP (VBZ is) (VP (VBN received) (SBAR (IN that) (S (NP (DT a) (NN driver)) (VP (VBZ is) (ADJP (JJ available))))))))) (ADVP (RB then)) (VP (NN update) (NP (DT that) (NN fact)) (PP (IN in) (NP (DT the) (NN database)))))\r\n\r\nIn it, I see that the word 'update' is marked as NN. Should it not be a verb?\r\n\r\n[The following added later, after further exploration]\r\n\r\nA test script (below) produces a dict that is missing the entry for the word \"update\" - I think because no label was available for the word.\r\n\r\nPlease excuse the naivete of the test - I am a newcomer to Python as well.\r\n\r\nNote: spaces replaced by dots.\r\n\r\n`\r\nimport benepar\r\nimport spacy\r\nfrom benepar.spacy_plugin import BeneparComponent\r\nnlp = spacy.load('en')\r\nnlp.add_pipe(BeneparComponent(\"benepar_en\"))\r\n\r\ndoc = nlp(\"when a notification is received that a driver is available then update that fact in the database\")\r\nsent = list(doc.sents)[0]\r\nprint(sent._.parse_string)\r\n\r\ndef.get_children(parent):\r\n..ret_dict.=.{}\r\n..if.len(list(parent._.children)).>.0:\r\n....for.child.in.parent._.children:\r\n......print(child)\r\n......try:\r\n........if.len(list(child._.labels)).>.0:\r\n..........lab.=.list(child._.labels)[0]\r\n..........print(lab)\r\n..........child_dict.=.{\"label\":.lab,.\"text\":.str(child)}\r\n..........gc.=.get_children(child)\r\n..........child_dict[\"children\"].=.gc\r\n..........ret_dict[lab].=.child_dict\r\n......except.Exception.as.e:\r\n......\tpass\r\n..return.ret_dict\r\n\r\ngc = get_children(sent)\r\nprint(gc)\r\n`\r\n\r\nThe following gc result was output:\r\n`\r\n{\r\n\t\"SBAR\": {\r\n\t\t\"label\": \"SBAR\",\r\n\t\t\"text\": \"when a notification is received that a driver is available\",\r\n\t\t\"children\": {\r\n\t\t\t\"WHADVP\": {\r\n\t\t\t\t\"label\": \"WHADVP\",\r\n\t\t\t\t\"text\": \"when\",\r\n\t\t\t\t\"children\": {}\r\n\t\t\t},\r\n\t\t\t\"S\": {\r\n\t\t\t\t\"label\": \"S\",\r\n\t\t\t\t\"text\": \"a notification is received that a driver is available\",\r\n\t\t\t\t\"children\": {\r\n\t\t\t\t\t\"NP\": {\r\n\t\t\t\t\t\t\"label\": \"NP\",\r\n\t\t\t\t\t\t\"text\": \"a notification\",\r\n\t\t\t\t\t\t\"children\": {}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"VP\": {\r\n\t\t\t\t\t\t\"label\": \"VP\",\r\n\t\t\t\t\t\t\"text\": \"is received that a driver is available\",\r\n\t\t\t\t\t\t\"children\": {\r\n\t\t\t\t\t\t\t\"VP\": {\r\n\t\t\t\t\t\t\t\t\"label\": \"VP\",\r\n\t\t\t\t\t\t\t\t\"text\": \"received that a driver is available\",\r\n\t\t\t\t\t\t\t\t\"children\": {\r\n\t\t\t\t\t\t\t\t\t\"SBAR\": {\r\n\t\t\t\t\t\t\t\t\t\t\"label\": \"SBAR\",\r\n\t\t\t\t\t\t\t\t\t\t\"text\": \"that a driver is available\",\r\n\t\t\t\t\t\t\t\t\t\t\"children\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\"S\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"label\": \"S\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"text\": \"a driver is available\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"children\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"NP\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"label\": \"NP\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text\": \"a driver\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"children\": {}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"VP\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"label\": \"VP\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text\": \"is available\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"children\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"ADJP\": {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"label\": \"ADJP\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text\": \"available\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"children\": {}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"ADVP\": {\r\n\t\t\"label\": \"ADVP\",\r\n\t\t\"text\": \"then\",\r\n\t\t\"children\": {}\r\n\t},\r\n\t\"VP\": {\r\n\t\t\"label\": \"VP\",\r\n\t\t\"text\": \"update that fact in the database\",\r\n\t\t\"children\": {\r\n\t\t\t\"NP\": {\r\n\t\t\t\t\"label\": \"NP\",\r\n\t\t\t\t\"text\": \"that fact\",\r\n\t\t\t\t\"children\": {}\r\n\t\t\t},\r\n\t\t\t\"PP\": {\r\n\t\t\t\t\"label\": \"PP\",\r\n\t\t\t\t\"text\": \"in the database\",\r\n\t\t\t\t\"children\": {\r\n\t\t\t\t\t\"NP\": {\r\n\t\t\t\t\t\t\"label\": \"NP\",\r\n\t\t\t\t\t\t\"text\": \"the database\",\r\n\t\t\t\t\t\t\"children\": {}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n`\r\nNote: Word \"update\" is missing.\r\n\r\nColin Goldberg\r\n","closed_by":{"login":"nikitakit","id":252225,"node_id":"MDQ6VXNlcjI1MjIyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/252225?v=4","gravatar_id":"","url":"https://api.github.com/users/nikitakit","html_url":"https://github.com/nikitakit","followers_url":"https://api.github.com/users/nikitakit/followers","following_url":"https://api.github.com/users/nikitakit/following{/other_user}","gists_url":"https://api.github.com/users/nikitakit/gists{/gist_id}","starred_url":"https://api.github.com/users/nikitakit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikitakit/subscriptions","organizations_url":"https://api.github.com/users/nikitakit/orgs","repos_url":"https://api.github.com/users/nikitakit/repos","events_url":"https://api.github.com/users/nikitakit/events{/privacy}","received_events_url":"https://api.github.com/users/nikitakit/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/3/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/3/timeline","performed_via_github_app":null,"state_reason":"completed"}