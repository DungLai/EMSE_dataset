[{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/comments/872285187","html_url":"https://github.com/nikitakit/self-attentive-parser/issues/85#issuecomment-872285187","issue_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/85","id":872285187,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MjI4NTE4Nw==","user":{"login":"hardianlawi","id":22806872,"node_id":"MDQ6VXNlcjIyODA2ODcy","avatar_url":"https://avatars.githubusercontent.com/u/22806872?v=4","gravatar_id":"","url":"https://api.github.com/users/hardianlawi","html_url":"https://github.com/hardianlawi","followers_url":"https://api.github.com/users/hardianlawi/followers","following_url":"https://api.github.com/users/hardianlawi/following{/other_user}","gists_url":"https://api.github.com/users/hardianlawi/gists{/gist_id}","starred_url":"https://api.github.com/users/hardianlawi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hardianlawi/subscriptions","organizations_url":"https://api.github.com/users/hardianlawi/orgs","repos_url":"https://api.github.com/users/hardianlawi/repos","events_url":"https://api.github.com/users/hardianlawi/events{/privacy}","received_events_url":"https://api.github.com/users/hardianlawi/received_events","type":"User","site_admin":false},"created_at":"2021-07-01T14:15:41Z","updated_at":"2021-07-01T14:15:55Z","author_association":"NONE","body":"I also tried running the spacy pipeline using GPU by adding the codes below, but it does not seem to give much boost.\r\n\r\n```python\r\nimport spacy\r\nimport torch\r\n\r\nspacy.prefer_gpu()\r\ndevice = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\r\n```","reactions":{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/comments/872285187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hardianlawi","id":22806872,"node_id":"MDQ6VXNlcjIyODA2ODcy","avatar_url":"https://avatars.githubusercontent.com/u/22806872?v=4","gravatar_id":"","url":"https://api.github.com/users/hardianlawi","html_url":"https://github.com/hardianlawi","followers_url":"https://api.github.com/users/hardianlawi/followers","following_url":"https://api.github.com/users/hardianlawi/following{/other_user}","gists_url":"https://api.github.com/users/hardianlawi/gists{/gist_id}","starred_url":"https://api.github.com/users/hardianlawi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hardianlawi/subscriptions","organizations_url":"https://api.github.com/users/hardianlawi/orgs","repos_url":"https://api.github.com/users/hardianlawi/repos","events_url":"https://api.github.com/users/hardianlawi/events{/privacy}","received_events_url":"https://api.github.com/users/hardianlawi/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/comments/893218028","html_url":"https://github.com/nikitakit/self-attentive-parser/issues/85#issuecomment-893218028","issue_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/85","id":893218028,"node_id":"IC_kwDOB9LuEc41PWzs","user":{"login":"PosoSAgapo","id":33200481,"node_id":"MDQ6VXNlcjMzMjAwNDgx","avatar_url":"https://avatars.githubusercontent.com/u/33200481?v=4","gravatar_id":"","url":"https://api.github.com/users/PosoSAgapo","html_url":"https://github.com/PosoSAgapo","followers_url":"https://api.github.com/users/PosoSAgapo/followers","following_url":"https://api.github.com/users/PosoSAgapo/following{/other_user}","gists_url":"https://api.github.com/users/PosoSAgapo/gists{/gist_id}","starred_url":"https://api.github.com/users/PosoSAgapo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PosoSAgapo/subscriptions","organizations_url":"https://api.github.com/users/PosoSAgapo/orgs","repos_url":"https://api.github.com/users/PosoSAgapo/repos","events_url":"https://api.github.com/users/PosoSAgapo/events{/privacy}","received_events_url":"https://api.github.com/users/PosoSAgapo/received_events","type":"User","site_admin":false},"created_at":"2021-08-05T07:03:09Z","updated_at":"2021-08-05T07:03:09Z","author_association":"NONE","body":"The  GPU did not improve any performance, I guess it's because the data still have to be processed by the spacy first.","reactions":{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/comments/893218028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PosoSAgapo","id":33200481,"node_id":"MDQ6VXNlcjMzMjAwNDgx","avatar_url":"https://avatars.githubusercontent.com/u/33200481?v=4","gravatar_id":"","url":"https://api.github.com/users/PosoSAgapo","html_url":"https://github.com/PosoSAgapo","followers_url":"https://api.github.com/users/PosoSAgapo/followers","following_url":"https://api.github.com/users/PosoSAgapo/following{/other_user}","gists_url":"https://api.github.com/users/PosoSAgapo/gists{/gist_id}","starred_url":"https://api.github.com/users/PosoSAgapo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PosoSAgapo/subscriptions","organizations_url":"https://api.github.com/users/PosoSAgapo/orgs","repos_url":"https://api.github.com/users/PosoSAgapo/repos","events_url":"https://api.github.com/users/PosoSAgapo/events{/privacy}","received_events_url":"https://api.github.com/users/PosoSAgapo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/comments/893250375","html_url":"https://github.com/nikitakit/self-attentive-parser/issues/85#issuecomment-893250375","issue_url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/85","id":893250375,"node_id":"IC_kwDOB9LuEc41PetH","user":{"login":"PosoSAgapo","id":33200481,"node_id":"MDQ6VXNlcjMzMjAwNDgx","avatar_url":"https://avatars.githubusercontent.com/u/33200481?v=4","gravatar_id":"","url":"https://api.github.com/users/PosoSAgapo","html_url":"https://github.com/PosoSAgapo","followers_url":"https://api.github.com/users/PosoSAgapo/followers","following_url":"https://api.github.com/users/PosoSAgapo/following{/other_user}","gists_url":"https://api.github.com/users/PosoSAgapo/gists{/gist_id}","starred_url":"https://api.github.com/users/PosoSAgapo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PosoSAgapo/subscriptions","organizations_url":"https://api.github.com/users/PosoSAgapo/orgs","repos_url":"https://api.github.com/users/PosoSAgapo/repos","events_url":"https://api.github.com/users/PosoSAgapo/events{/privacy}","received_events_url":"https://api.github.com/users/PosoSAgapo/received_events","type":"User","site_admin":false},"created_at":"2021-08-05T08:00:14Z","updated_at":"2021-08-05T08:00:14Z","author_association":"NONE","body":"If you initiate 2 nlp modules in spacy, one is normal modules and another one is a module that combined with the benepar, when you process sentences, the normal modules goes through all process and the benepar only uses parser module, this will give you roughly 2x processing speed.\r\n\r\n```\r\nnlp1 = spacy.load('en_core_web_md')\r\nnlp2 = spacy.load('en_core_web_sm')\r\nif spacy.__version__.startswith('2'):\r\n    nlp2.add_pipe(BeneparComponent(\"benepar_en3\"))\r\nelse:\r\n    nlp2.add_pipe(\"benepar\", config={\"model\": \"benepar_en3\"})\r\n\r\n```\r\n\r\n```\r\ndocs_nlp1 = list(nlp1.pipe(examples['sentence'], disable=[\"tok2vec\"], n_process=4))\r\ndocs_nlp2 = list(nlp2.pipe(examples['sentence'], disable=[\"tok2vec\",\"tagger\",\"ner\",\"lemmatizer\",\"textcat\"]))\r\n```\r\n If you use multi-thread to process it independently, I  guess the speed will be further improved to 4x compared with the original speed. However, I do not know how to work spacy in multi-thread situations.","reactions":{"url":"https://api.github.com/repos/nikitakit/self-attentive-parser/issues/comments/893250375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PosoSAgapo","id":33200481,"node_id":"MDQ6VXNlcjMzMjAwNDgx","avatar_url":"https://avatars.githubusercontent.com/u/33200481?v=4","gravatar_id":"","url":"https://api.github.com/users/PosoSAgapo","html_url":"https://github.com/PosoSAgapo","followers_url":"https://api.github.com/users/PosoSAgapo/followers","following_url":"https://api.github.com/users/PosoSAgapo/following{/other_user}","gists_url":"https://api.github.com/users/PosoSAgapo/gists{/gist_id}","starred_url":"https://api.github.com/users/PosoSAgapo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PosoSAgapo/subscriptions","organizations_url":"https://api.github.com/users/PosoSAgapo/orgs","repos_url":"https://api.github.com/users/PosoSAgapo/repos","events_url":"https://api.github.com/users/PosoSAgapo/events{/privacy}","received_events_url":"https://api.github.com/users/PosoSAgapo/received_events","type":"User","site_admin":false}}]