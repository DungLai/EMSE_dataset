{"url":"https://api.github.com/repos/HazyResearch/fonduer/issues/101","repository_url":"https://api.github.com/repos/HazyResearch/fonduer","labels_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/101/labels{/name}","comments_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/101/comments","events_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/101/events","html_url":"https://github.com/HazyResearch/fonduer/issues/101","id":351710151,"node_id":"MDU6SXNzdWUzNTE3MTAxNTE=","number":101,"title":"Fonduer max_storage_temp_tutorial error while parsing html files","user":{"login":"viveksjoseph","id":14134419,"node_id":"MDQ6VXNlcjE0MTM0NDE5","avatar_url":"https://avatars.githubusercontent.com/u/14134419?v=4","gravatar_id":"","url":"https://api.github.com/users/viveksjoseph","html_url":"https://github.com/viveksjoseph","followers_url":"https://api.github.com/users/viveksjoseph/followers","following_url":"https://api.github.com/users/viveksjoseph/following{/other_user}","gists_url":"https://api.github.com/users/viveksjoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/viveksjoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/viveksjoseph/subscriptions","organizations_url":"https://api.github.com/users/viveksjoseph/orgs","repos_url":"https://api.github.com/users/viveksjoseph/repos","events_url":"https://api.github.com/users/viveksjoseph/events{/privacy}","received_events_url":"https://api.github.com/users/viveksjoseph/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"senwu","id":5580008,"node_id":"MDQ6VXNlcjU1ODAwMDg=","avatar_url":"https://avatars.githubusercontent.com/u/5580008?v=4","gravatar_id":"","url":"https://api.github.com/users/senwu","html_url":"https://github.com/senwu","followers_url":"https://api.github.com/users/senwu/followers","following_url":"https://api.github.com/users/senwu/following{/other_user}","gists_url":"https://api.github.com/users/senwu/gists{/gist_id}","starred_url":"https://api.github.com/users/senwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/senwu/subscriptions","organizations_url":"https://api.github.com/users/senwu/orgs","repos_url":"https://api.github.com/users/senwu/repos","events_url":"https://api.github.com/users/senwu/events{/privacy}","received_events_url":"https://api.github.com/users/senwu/received_events","type":"User","site_admin":false},"assignees":[{"login":"senwu","id":5580008,"node_id":"MDQ6VXNlcjU1ODAwMDg=","avatar_url":"https://avatars.githubusercontent.com/u/5580008?v=4","gravatar_id":"","url":"https://api.github.com/users/senwu","html_url":"https://github.com/senwu","followers_url":"https://api.github.com/users/senwu/followers","following_url":"https://api.github.com/users/senwu/following{/other_user}","gists_url":"https://api.github.com/users/senwu/gists{/gist_id}","starred_url":"https://api.github.com/users/senwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/senwu/subscriptions","organizations_url":"https://api.github.com/users/senwu/orgs","repos_url":"https://api.github.com/users/senwu/repos","events_url":"https://api.github.com/users/senwu/events{/privacy}","received_events_url":"https://api.github.com/users/senwu/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-08-17T19:20:11Z","updated_at":"2018-08-17T20:19:29Z","closed_at":"2018-08-17T20:12:52Z","author_association":"NONE","active_lock_reason":null,"body":"**To Reproduce** \r\n\r\nWhile doing _max_storage_temp_tutorial_ tutorial in the attached Jupyter notebook, I get an error while trying to execute the following code:\r\n\r\n```\r\ncorpus_parser = Parser(structural=True, lingual=True, visual=True, pdf_path=pdf_path)\r\n%time corpus_parser.apply(doc_preprocessor, parallelism=PARALLEL)\r\n```\r\n**Expected behavior**\r\nTo complete parsing without any issue\r\n\r\n**Error Logs/Screenshots**\r\nThe following is the error that I got:\r\n> UnicodeEncodeError: 'ascii' codec can't encode character '\\uf0b7' in position 6282: ordinal not in range(128)\r\n\r\nThe following is the complete error stacktrace\r\n```\r\n[INFO] fonduer.utils.udf - Clearing existing...\r\n[INFO] fonduer.utils.udf - Running UDF...\r\n---------------------------------------------------------------------------\r\nUnicodeEncodeError                        Traceback (most recent call last)\r\n<timed eval> in <module>()\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/fonduer/utils/udf.py in apply(self, xs, clear, parallelism, progress_bar, count, **kwargs)\r\n     48         self.logger.info(\"Running UDF...\")\r\n     49         if parallelism is None or parallelism < 2:\r\n---> 50             self.apply_st(xs, progress_bar, clear=clear, count=count, **kwargs)\r\n     51         else:\r\n     52             self.apply_mt(xs, parallelism, clear=clear, **kwargs)\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/fonduer/utils/udf.py in apply_st(self, xs, progress_bar, count, **kwargs)\r\n     81 \r\n     82         # Commit session and close progress bar if applicable\r\n---> 83         udf.session.commit()\r\n     84         if pb:\r\n     85             pb.close()\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/session.py in commit(self)\r\n    941                 raise sa_exc.InvalidRequestError(\"No transaction is begun.\")\r\n    942 \r\n--> 943         self.transaction.commit()\r\n    944 \r\n    945     def prepare(self):\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/session.py in commit(self)\r\n    465         self._assert_active(prepared_ok=True)\r\n    466         if self._state is not PREPARED:\r\n--> 467             self._prepare_impl()\r\n    468 \r\n    469         if self._parent is None or self.nested:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/session.py in _prepare_impl(self)\r\n    445                 if self.session._is_clean():\r\n    446                     break\r\n--> 447                 self.session.flush()\r\n    448             else:\r\n    449                 raise exc.FlushError(\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/session.py in flush(self, objects)\r\n   2252         try:\r\n   2253             self._flushing = True\r\n-> 2254             self._flush(objects)\r\n   2255         finally:\r\n   2256             self._flushing = False\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/session.py in _flush(self, objects)\r\n   2378         except:\r\n   2379             with util.safe_reraise():\r\n-> 2380                 transaction.rollback(_capture_exception=True)\r\n   2381 \r\n   2382     def bulk_save_objects(\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py in __exit__(self, type_, value, traceback)\r\n     64             self._exc_info = None   # remove potential circular references\r\n     65             if not self.warn_only:\r\n---> 66                 compat.reraise(exc_type, exc_value, exc_tb)\r\n     67         else:\r\n     68             if not compat.py3k and self._exc_info and self._exc_info[1]:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/util/compat.py in reraise(tp, value, tb, cause)\r\n    247         if value.__traceback__ is not tb:\r\n    248             raise value.with_traceback(tb)\r\n--> 249         raise value\r\n    250 \r\n    251 else:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/session.py in _flush(self, objects)\r\n   2342             self._warn_on_events = True\r\n   2343             try:\r\n-> 2344                 flush_context.execute()\r\n   2345             finally:\r\n   2346                 self._warn_on_events = False\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py in execute(self)\r\n    384                 while set_:\r\n    385                     n = set_.pop()\r\n--> 386                     n.execute_aggregate(self, set_)\r\n    387         else:\r\n    388             for rec in topological.sort(\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py in execute_aggregate(self, uow, recs)\r\n    666                              [self.state] +\r\n    667                              [r.state for r in our_recs],\r\n--> 668                              uow)\r\n    669 \r\n    670     def __repr__(self):\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py in save_obj(base_mapper, states, uowtransaction, single)\r\n    179         _emit_insert_statements(base_mapper, uowtransaction,\r\n    180                                 cached_connections,\r\n--> 181                                 mapper, table, insert)\r\n    182 \r\n    183     _finalize_insert_update_commands(\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py in _emit_insert_statements(base_mapper, uowtransaction, cached_connections, mapper, table, insert, bookkeeping)\r\n    828 \r\n    829             c = cached_connections[connection].\\\r\n--> 830                 execute(statement, multiparams)\r\n    831 \r\n    832             if bookkeeping:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/engine/base.py in execute(self, object, *multiparams, **params)\r\n    946             raise exc.ObjectNotExecutableError(object)\r\n    947         else:\r\n--> 948             return meth(self, multiparams, params)\r\n    949 \r\n    950     def _execute_function(self, func, multiparams, params):\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/sql/elements.py in _execute_on_connection(self, connection, multiparams, params)\r\n    267     def _execute_on_connection(self, connection, multiparams, params):\r\n    268         if self.supports_execution:\r\n--> 269             return connection._execute_clauseelement(self, multiparams, params)\r\n    270         else:\r\n    271             raise exc.ObjectNotExecutableError(self)\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/engine/base.py in _execute_clauseelement(self, elem, multiparams, params)\r\n   1058             compiled_sql,\r\n   1059             distilled_params,\r\n-> 1060             compiled_sql, distilled_params\r\n   1061         )\r\n   1062         if self._has_events or self.engine._has_events:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/engine/base.py in _execute_context(self, dialect, constructor, statement, parameters, *args)\r\n   1198                 parameters,\r\n   1199                 cursor,\r\n-> 1200                 context)\r\n   1201 \r\n   1202         if self._has_events or self.engine._has_events:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/engine/base.py in _handle_dbapi_exception(self, e, statement, parameters, cursor, context)\r\n   1414                 )\r\n   1415             else:\r\n-> 1416                 util.reraise(*exc_info)\r\n   1417 \r\n   1418         finally:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/util/compat.py in reraise(tp, value, tb, cause)\r\n    247         if value.__traceback__ is not tb:\r\n    248             raise value.with_traceback(tb)\r\n--> 249         raise value\r\n    250 \r\n    251 else:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/engine/base.py in _execute_context(self, dialect, constructor, statement, parameters, *args)\r\n   1168                         statement,\r\n   1169                         parameters,\r\n-> 1170                         context)\r\n   1171             elif not parameters and context.no_parameters:\r\n   1172                 if self.dialect._has_events:\r\n\r\n~/anaconda3/envs/fonduer/lib/python3.6/site-packages/sqlalchemy/dialects/postgresql/psycopg2.py in do_executemany(self, cursor, statement, parameters, context)\r\n    681             extras.execute_batch(cursor, statement, parameters)\r\n    682         else:\r\n--> 683             cursor.executemany(statement, parameters)\r\n    684 \r\n    685     @util.memoized_instancemethod\r\n\r\nUnicodeEncodeError: 'ascii' codec can't encode character '\\uf0b7' in position 6282: ordinal not in range(128)\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS: [Ubuntu 16.04 bash for Windows]\r\n - PostgreSQL Version: [9.5.13]\r\n - Poppler Utils Version: [0.41.0-0ubuntu1.7]\r\n - Fonduer Version: [0.2.3]\r\n\r\n**Additional context**\r\nI have used the corpus I downloaded using the download_data.sh script in the folder.\r\n","closed_by":{"login":"viveksjoseph","id":14134419,"node_id":"MDQ6VXNlcjE0MTM0NDE5","avatar_url":"https://avatars.githubusercontent.com/u/14134419?v=4","gravatar_id":"","url":"https://api.github.com/users/viveksjoseph","html_url":"https://github.com/viveksjoseph","followers_url":"https://api.github.com/users/viveksjoseph/followers","following_url":"https://api.github.com/users/viveksjoseph/following{/other_user}","gists_url":"https://api.github.com/users/viveksjoseph/gists{/gist_id}","starred_url":"https://api.github.com/users/viveksjoseph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/viveksjoseph/subscriptions","organizations_url":"https://api.github.com/users/viveksjoseph/orgs","repos_url":"https://api.github.com/users/viveksjoseph/repos","events_url":"https://api.github.com/users/viveksjoseph/events{/privacy}","received_events_url":"https://api.github.com/users/viveksjoseph/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/HazyResearch/fonduer/issues/101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/101/timeline","performed_via_github_app":null,"state_reason":"completed"}