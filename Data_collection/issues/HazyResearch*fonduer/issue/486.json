{"url":"https://api.github.com/repos/HazyResearch/fonduer/issues/486","repository_url":"https://api.github.com/repos/HazyResearch/fonduer","labels_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/486/labels{/name}","comments_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/486/comments","events_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/486/events","html_url":"https://github.com/HazyResearch/fonduer/issues/486","id":663182697,"node_id":"MDU6SXNzdWU2NjMxODI2OTc=","number":486,"title":"ValueError: zero-size array during _strlib_multinary_features","user":{"login":"HiromuHota","id":20668349,"node_id":"MDQ6VXNlcjIwNjY4MzQ5","avatar_url":"https://avatars.githubusercontent.com/u/20668349?v=4","gravatar_id":"","url":"https://api.github.com/users/HiromuHota","html_url":"https://github.com/HiromuHota","followers_url":"https://api.github.com/users/HiromuHota/followers","following_url":"https://api.github.com/users/HiromuHota/following{/other_user}","gists_url":"https://api.github.com/users/HiromuHota/gists{/gist_id}","starred_url":"https://api.github.com/users/HiromuHota/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HiromuHota/subscriptions","organizations_url":"https://api.github.com/users/HiromuHota/orgs","repos_url":"https://api.github.com/users/HiromuHota/repos","events_url":"https://api.github.com/users/HiromuHota/events{/privacy}","received_events_url":"https://api.github.com/users/HiromuHota/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-07-21T17:23:51Z","updated_at":"2020-07-25T02:48:18Z","closed_at":"2020-07-25T02:48:18Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## Description of the bug\r\n\r\n\"ValueError: zero-size array\" happens during featurization.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. Run the hardware tutorial with the latest commit (d94f3be21326db7c0660a7a51c75ac27511db110) of Fonduer.\r\n\r\n## Expected behavior\r\n\r\nFeaturization runs without an error.\r\n\r\n## Error Logs/Screenshots\r\n\r\nhttps://github.com/HiromuHota/fonduer-tutorials/runs/880000246\r\n```\r\n2020-07-17T00:45:17.3377388Z Traceback (most recent call last):\r\n2020-07-17T00:45:17.3377548Z   File \"/usr/local/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n2020-07-17T00:45:17.3377686Z     self.run()\r\n2020-07-17T00:45:17.3378135Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/utils/udf.py\", line 219, in run\r\n2020-07-17T00:45:17.3378281Z     y = self.apply(doc, **self.apply_kwargs)\r\n2020-07-17T00:45:17.3378605Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/features/featurizer.py\", line 346, in apply\r\n2020-07-17T00:45:17.3378744Z     for cands in cands_list\r\n2020-07-17T00:45:17.3379249Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/features/featurizer.py\", line 346, in <listcomp>\r\n2020-07-17T00:45:17.3379505Z     for cands in cands_list\r\n2020-07-17T00:45:17.3379821Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/utils/utils_udf.py\", line 243, in get_mapping\r\n2020-07-17T00:45:17.3379946Z     for cid, key, value in generator(cand):\r\n2020-07-17T00:45:17.3380274Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/features/feature_extractors.py\", line 63, in extract\r\n2020-07-17T00:45:17.3380428Z     for candidate_id, feature, value in feature_extractor(candidates):\r\n2020-07-17T00:45:17.3380802Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/features/feature_libs/structural_features.py\", line 70, in extract_structural_features\r\n2020-07-17T00:45:17.3380955Z     for feature, value in _strlib_multinary_features(spans):\r\n2020-07-17T00:45:17.3381317Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/features/feature_libs/structural_features.py\", line 113, in _strlib_multinary_features\r\n2020-07-17T00:45:17.3381622Z     yield f\"COMMON_ANCESTOR_[{' '.join(common_ancestor(spans))}]\", DEF_VALUE\r\n2020-07-17T00:45:17.3381973Z   File \"/home/user/.venv/lib/python3.7/site-packages/fonduer/utils/data_model_utils/structural.py\", line 184, in common_ancestor\r\n2020-07-17T00:45:17.3382114Z     val = np.min(arg_min[np.nonzero(arg_min)])\r\n2020-07-17T00:45:17.3382470Z   File \"<__array_function__ internals>\", line 6, in amin\r\n2020-07-17T00:45:17.3382803Z   File \"/home/user/.venv/lib/python3.7/site-packages/numpy/core/fromnumeric.py\", line 2793, in amin\r\n2020-07-17T00:45:17.3382927Z     keepdims=keepdims, initial=initial, where=where)\r\n2020-07-17T00:45:17.3383248Z   File \"/home/user/.venv/lib/python3.7/site-packages/numpy/core/fromnumeric.py\", line 90, in _wrapreduction\r\n2020-07-17T00:45:17.3383392Z     return ufunc.reduce(obj, axis, dtype, out, **passkwargs)\r\n2020-07-17T00:45:17.3383686Z ValueError: zero-size array to reduction operation minimum which has no identity\r\n```\r\n\r\n## Environment (please complete the following information)\r\n\r\nFonduer: d94f3be21326db7c0660a7a51c75ac27511db110\r\n\r\n## Additional context\r\n\r\nThis may be a regression caused by #456.\r\n","closed_by":{"login":"senwu","id":5580008,"node_id":"MDQ6VXNlcjU1ODAwMDg=","avatar_url":"https://avatars.githubusercontent.com/u/5580008?v=4","gravatar_id":"","url":"https://api.github.com/users/senwu","html_url":"https://github.com/senwu","followers_url":"https://api.github.com/users/senwu/followers","following_url":"https://api.github.com/users/senwu/following{/other_user}","gists_url":"https://api.github.com/users/senwu/gists{/gist_id}","starred_url":"https://api.github.com/users/senwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/senwu/subscriptions","organizations_url":"https://api.github.com/users/senwu/orgs","repos_url":"https://api.github.com/users/senwu/repos","events_url":"https://api.github.com/users/senwu/events{/privacy}","received_events_url":"https://api.github.com/users/senwu/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/HazyResearch/fonduer/issues/486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/HazyResearch/fonduer/issues/486/timeline","performed_via_github_app":null,"state_reason":"completed"}