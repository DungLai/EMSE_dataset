{"url":"https://api.github.com/repos/cleardusk/3DDFA/issues/218","repository_url":"https://api.github.com/repos/cleardusk/3DDFA","labels_url":"https://api.github.com/repos/cleardusk/3DDFA/issues/218/labels{/name}","comments_url":"https://api.github.com/repos/cleardusk/3DDFA/issues/218/comments","events_url":"https://api.github.com/repos/cleardusk/3DDFA/issues/218/events","html_url":"https://github.com/cleardusk/3DDFA/issues/218","id":1305101602,"node_id":"I_kwDOCEtiFM5NykUi","number":218,"title":"Project dependencies have API risk issues","user":{"login":"PyDeps","id":109138844,"node_id":"U_kgDOBoFTnA","avatar_url":"https://avatars.githubusercontent.com/u/109138844?v=4","gravatar_id":"","url":"https://api.github.com/users/PyDeps","html_url":"https://github.com/PyDeps","followers_url":"https://api.github.com/users/PyDeps/followers","following_url":"https://api.github.com/users/PyDeps/following{/other_user}","gists_url":"https://api.github.com/users/PyDeps/gists{/gist_id}","starred_url":"https://api.github.com/users/PyDeps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PyDeps/subscriptions","organizations_url":"https://api.github.com/users/PyDeps/orgs","repos_url":"https://api.github.com/users/PyDeps/repos","events_url":"https://api.github.com/users/PyDeps/events{/privacy}","received_events_url":"https://api.github.com/users/PyDeps/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-07-14T17:38:47Z","updated_at":"2022-07-14T17:38:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, In **3DDFA**, inappropriate dependency versioning constraints can cause risks.\r\n\r\nBelow are the dependencies and version constraints that the project is using\r\n```\r\ntorch>=0.4.1\r\ntorchvision>=0.2.1\r\nnumpy>=1.15.4\r\nscipy>=1.1.0\r\nmatplotlib==3.0.2\r\ndlib==19.5.0\r\nopencv-python>=3.4.3.18\r\n```\r\n\r\nThe version constraint **==** will introduce the risk of dependency conflicts because the scope of dependencies is too strict.\r\nThe version constraint **No Upper Bound** and **\\*** will introduce the risk of the missing API Error because the latest version of the dependencies may remove some APIs.\r\n\r\nAfter further analysis, in this project,\r\nThe version constraint of dependency **scipy** can be changed to *>=0.8.0,<=1.2.3*.\r\n\r\nThe above modification suggestions can reduce the dependency conflicts as much as possible, \r\nand introduce the latest version as much as possible without calling Error in the projects.\r\n\r\nThe invocation of the current project includes all the following methods.\r\n\r\n\r\n    \r\n<details>\r\n<summary>The calling methods from the scipy</summary>\r\n<pre>\r\nio.imread\r\n</pre>\r\n</details>\r\n\r\n \r\n\r\n    \r\n<details>\r\n<summary>The calling methods from the  all methods</summary>\r\n<pre>\r\nimg_step2.transform.unsqueeze\r\n_predict_vertices\r\ncrop_img\r\ngen_img_paf\r\ndata_time.update\r\npoint_2d.reshape\r\ncv2.imshow\r\ninput_.data.clone\r\nrect_fp.open.read\r\ntorch.abs\r\nimageio.imread\r\nself.dw5_6\r\nnp.float32.BG.astype.copy\r\nplt.figure\r\nint\r\ncget_depths_image\r\n_to_tensor\r\npickle.load\r\nrects.append\r\nmin\r\nax.axis\r\nncc\r\nrect.top\r\nnp.abs\r\nnp.zeros\r\ntorch.randperm\r\nlogging.info\r\nk.replace\r\nasin\r\nplt.savefig\r\nlogging.StreamHandler\r\nself.dw2_1\r\nnp.int32\r\ndlib.rectangle\r\nindex.index.index.torch.cat.view\r\ncpncc\r\ndata.DataLoader\r\ncheckpoint.keys\r\nobama_demo\r\nbuild_camera_box\r\nadjust_learning_rate\r\nalpha_expg.self.w_exp.alpha_shpg.self.w_shp.self.u.view\r\nself.reset\r\ntorch.no_grad\r\nparam.squeeze.cpu.numpy.flatten.astype\r\npickle.dump\r\nRenderPipeline\r\ncv2.line\r\n_tensor_to_cuda\r\nnp.minimum\r\nmodel\r\naflw\r\nm.weight.data.normal_\r\ntuple\r\ngen_offsets\r\nself.conv1\r\nnp.savetxt\r\nargs.milestones.split\r\nnp.dot\r\ndevice_ids.model.nn.DataParallel.cuda\r\np_.reshape\r\ntorch.save\r\ntransform\r\nparam.view\r\ntorch.randn\r\n_parse_param_batch\r\ndlib.get_frontal_face_detector\r\np_.view\r\nana_aflw\r\nx.size\r\nbatch_time.update\r\ninput.cuda\r\nplot_close\r\nself.VDCLoss.super.__init__\r\nself.mean.tensor.sub_.div_\r\nheader.format\r\nio.imread\r\nimg.transform.unsqueeze\r\ntorch.norm\r\ntorch.optim.SGD\r\nmesh_core_cython.get_normal\r\nvertices_lst.append\r\nself.conv_sep\r\ncalc_nme_alfw\r\nself._calc_weights_resample\r\nnp.float32.colors.astype.copy\r\nplt.imshow\r\nrect.left\r\nv.lower\r\ncalc_nme_alfw2000\r\nbenchmark_alfw_params\r\ncv2.imread\r\nax.plot3D\r\nmesh_core_cython.render_colors_core\r\npoint_3d_homo.dot\r\nself.forward_all\r\ndepths_img.squeeze\r\ntime.time\r\nnn.Conv2d\r\nWPDCLoss\r\n_load\r\nself.MobileNet.super.__init__\r\nself.bn_sep\r\nargs.opt_style.WPDCLoss.cuda\r\nlogging.FileHandler\r\nnp.array\r\nlosses.update\r\nface_regressor\r\ntype\r\nnn.DataParallel\r\nparam.squeeze.cpu\r\nnp.zeros_like\r\ndraw_landmarks\r\naflw2000\r\nself.WPDCLoss.super.__init__\r\nlast_frame_pts.append\r\nnn.AdaptiveAvgPool2d\r\nself.dw6\r\nalpha_expg.w_exp_base.alpha_shpg.w_shp_base.u_base.view\r\nNormalizeGjz\r\nmaxes.view\r\ndlib.shape_predictor\r\nrect.frame.face_regressor.parts\r\nface_detector\r\nsuper\r\nax.set_xticklabels\r\nsave_checkpoint\r\ngen_3d_vertex\r\ntransforms.Compose\r\nnp.linalg.norm\r\nloss.item\r\n_to_ctype\r\nenumerate\r\ntorch.zeros_like\r\nplt.tight_layout\r\nosp.join\r\ncos\r\nweights.max\r\nvertices.np.max.reshape\r\nplt.figaspect\r\nax.set_zticklabels\r\nmax\r\ntensor.sub_\r\nsys.path.append\r\napp\r\natan2\r\nparser.parse_args\r\nmodel.cuda\r\noutputs.append\r\nnme_list.append\r\nrender_img.astype\r\nsio.savemat\r\ntorch.tensor\r\nvars\r\nget_colors\r\nDDFATestDataset\r\nnp.float.point_3d.np.array.reshape\r\nsio.loadmat\r\nax.imshow\r\nmodel.parameters\r\nN.alpha_exp.w_exp_base.alpha_shp.w_shp_base.u_base.view.permute\r\nparam.reshape\r\nself.resample_num.self.w_shp_length.torch.randperm.reshape\r\nimg_fp.imageio.imread.astype\r\ncolors.astype\r\nloss.mean\r\npnccs_img.squeeze\r\ninputs.cuda\r\nimgs.append\r\ncalc_hypotenuse\r\narr.copy\r\nself.dw5_3\r\nkwargs.get\r\nnp.int32.triangles.astype.copy\r\nself.dw3_2\r\nconvert_type\r\nfilelists.Path.read_text\r\ncv2.waitKey\r\nimage.copy\r\nnp.min\r\nos.system\r\ntest\r\n_benchmark_aflw\r\nimageio.mimwrite\r\nfilelists.open.read\r\nToTensorGjz\r\nnp.max\r\nsetup\r\nvc.read\r\nmeta.get\r\nmode.lower\r\ndump_to_ply\r\nplt.subplots_adjust\r\nalpha_exp.w_exp_base.alpha_shp.w_shp_base.u_base.reshape\r\nax.set_yticklabels\r\nnp.ones\r\nself.reconstruct_and_parse\r\nreconstruct_paf_anchor\r\nnp.concatenate\r\nsorted\r\nmodel.train\r\nobj_name.split\r\nnp.where\r\nfilelists.Path.read_text.strip.split\r\nself.bn1\r\nnn.Linear\r\nrange\r\ncv2.polylines\r\nmodel.eval\r\nP2sRt\r\nparam.squeeze.cpu.numpy.flatten\r\nimageio.imwrite\r\nMobileNet\r\nself.fc\r\ni.output.cpu\r\nparse_pose\r\nax.plot\r\nargparse.ArgumentParser\r\nnp.sum\r\ncv2.resize\r\nimg.float\r\nx.cuda\r\nprint_args\r\nos.mkdir\r\nfilelists.open.read.strip.split\r\nnn.MSELoss\r\n_numpy_to_tensor\r\nself.transform\r\npredict_68pts\r\nalpha_exp.self.w_exp.alpha_shp.self.w_shp.self.u.view\r\nopen\r\nfilelists.open.read.strip\r\nrect_fp.open.read.strip\r\npts_res.append\r\nparse_args\r\nrender.crender_colors\r\ntorch.load\r\nx.cpu.numpy\r\nnp.mean\r\nosp.dirname\r\n_benchmark_aflw2000\r\nt3d.reshape\r\nl.split\r\nself.forward_resample\r\nnp.float32.vertices.astype.copy\r\ntimeit.repeat\r\nnorm_vertices\r\nself.dw5_4\r\nnp.maximum\r\nresample_num.self.w_shp_length.torch.randperm.reshape\r\nfilename.rfind\r\narch.mobilenet_v1.getattr\r\nself.avgpool\r\nparam.squeeze\r\nself.conv_dw\r\nnp.floor\r\nself.dw4_2\r\nmain\r\ni.output.cpu.numpy.flatten\r\nrect.img_ori.face_regressor.parts\r\nkpt.np.round.astype\r\nimageio.imread.astype\r\nis_point_in_tri\r\nmap\r\nalpha_exp.w_exp_base.alpha_shp.w_shp_base.u_base.view\r\ncv2.imwrite\r\nlosses.append\r\nimg_fp.replace\r\nnp.std\r\n_load_cpu\r\ncriterion\r\nnumpy.get_include\r\ndump_vertex\r\nExtension\r\nplot_pose_box\r\nvertices.min\r\ncrender_colors\r\nself.dw3_1\r\nrect.bottom\r\nindex0.index1.img_crop.reshape.transpose\r\nget_suffix\r\nprint\r\ncv2.VideoCapture\r\nglob\r\nnp.round\r\n_dump\r\nposes.append\r\nmodel.load_state_dict\r\npaf.get\r\nN.alpha_expg.w_exp_base.alpha_shpg.w_shp_base.u_base.view.permute\r\n_get_suffix\r\nnp.bitwise_and\r\nto\r\nos.path.exists\r\nalpha_exp.w_exp_filter.alpha_shp.w_filter.u_filter.reshape\r\nalpha_exp.w_exp.alpha_shp.w_shp.u.reshape\r\nmodel_dict.keys\r\ngetattr\r\nargs.devices_id.model.nn.DataParallel.cuda\r\nargs.loss.lower\r\nblock\r\ntorch.from_numpy\r\nPath\r\nnp.ceil\r\nnp.load\r\nlist\r\nself._target_loader\r\nN.alpha_expg.self.w_exp.alpha_shpg.self.w_shp.self.u.view.permute\r\npredict_dense\r\nosp.split\r\nself.dw5_5\r\nmodel.astype\r\nextract_param\r\nplt.plot\r\nmkdir\r\nN.alpha_exp.self.w_exp.alpha_shp.self.w_shp.self.u.view.permute\r\nplt.close\r\nbenchmark_aflw2000_params\r\nana_alfw2000\r\njoin\r\ntriangles.copy\r\nindex0.index1.img_crop.reshape\r\nnn.PReLU\r\ntriangles._to_ctype.astype\r\nVDCLoss\r\nf.write\r\nax.scatter\r\nnp.cross\r\ntriangles.astype\r\nparse_roi_box_from_landmark\r\nsqrt\r\nanchor.np.round.astype\r\nkeypoints.T.flatten\r\nBG.astype\r\nrect_fp.open.read.strip.split\r\nfilelists.Path.read_text.strip\r\ninput.size\r\nkeypoints.u.reshape\r\n_norm\r\nself.bn_dw\r\ntrain\r\nargs.size_average.nn.MSELoss.cuda\r\nargs.devices_id.split\r\noptimizer.zero_grad\r\nloss.backward\r\nosp.basename\r\nmodel_path.replace\r\nx.view\r\nreconstruct_vertex\r\nargs.opt_style.VDCLoss.cuda\r\nargs.arch.mobilenet_v1.getattr\r\nfn.replace\r\nparser.add_argument\r\nwrite_obj_with_colors\r\nDDFADataset\r\nkc.replace\r\nvertices.max\r\ntorch.mean\r\nos.path.isdir\r\ncv2.circle\r\nvertices.copy\r\nrect.right\r\noptimizer.step\r\nvalidate\r\nfig.add_subplot\r\nimg_loader\r\nPs.append\r\nm.bias.data.zero_\r\ntarget.cuda\r\nnp.hstack\r\ntorch.onnx.export\r\nself.dw5_1\r\nformat\r\nparam.squeeze.cpu.numpy\r\nnn.ReLU\r\nisinstance\r\nException\r\nself.dw5_2\r\n_parse_param\r\nosp.realpath\r\nconvert_to_ori\r\nself.dw2_2\r\ntorch.cat\r\nstr\r\nfp._load.torch.from_numpy.cuda\r\nlogging.basicConfig\r\nm.weight.data.fill_\r\nself.DepthWiseBlock.super.__init__\r\nrender_colors\r\nmake_abs_path\r\nvertices.astype\r\nmath.sqrt\r\nself.img_loader\r\nAverageMeter\r\nnp.sqrt\r\nself.relu\r\nvertices.np.min.reshape\r\nlen\r\nnp.save\r\nnp.clip\r\nDataLoader\r\nbenchmark_pipeline\r\nplt.axis\r\nx.cpu\r\nargparse.ArgumentTypeError\r\ncheckpoint_fp.replace\r\nmatrix2angle\r\nplt.show\r\nvertices.np.round.astype\r\nnp.power\r\nmodel.state_dict\r\nx.split.replace\r\nx.split\r\ni.output.cpu.numpy\r\ntarget_.data.clone\r\nround\r\npic.transpose\r\nu_exp.u_shp.astype\r\nparse_roi_box_from_bbox\r\nindex.index.index.torch.cat.view.cuda\r\ndlib.rectangles\r\npoint_3d.append\r\nself.dw4_1\r\nosp.exists\r\nax.view_init\r\nnn.BatchNorm2d\r\nself.modules\r\nargs.resume.Path.is_file\r\ntorch.cuda.set_device\r\n</pre>\r\n</details>\r\n\r\n\r\nCould please help me check this issue?\r\nMay I pull a request to fix it?\r\nThank you very much.\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/cleardusk/3DDFA/issues/218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cleardusk/3DDFA/issues/218/timeline","performed_via_github_app":null,"state_reason":null}