{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/92","repository_url":"https://api.github.com/repos/kLabUM/rrcf","labels_url":"https://api.github.com/repos/kLabUM/rrcf/issues/92/labels{/name}","comments_url":"https://api.github.com/repos/kLabUM/rrcf/issues/92/comments","events_url":"https://api.github.com/repos/kLabUM/rrcf/issues/92/events","html_url":"https://github.com/kLabUM/rrcf/issues/92","id":1355525340,"node_id":"I_kwDOCSvsSc5Qy6zc","number":92,"title":"ValueError: can only convert an array of size 1 to a Python scalar","user":{"login":"futtery","id":106917636,"node_id":"U_kgDOBl9vBA","avatar_url":"https://avatars.githubusercontent.com/u/106917636?v=4","gravatar_id":"","url":"https://api.github.com/users/futtery","html_url":"https://github.com/futtery","followers_url":"https://api.github.com/users/futtery/followers","following_url":"https://api.github.com/users/futtery/following{/other_user}","gists_url":"https://api.github.com/users/futtery/gists{/gist_id}","starred_url":"https://api.github.com/users/futtery/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/futtery/subscriptions","organizations_url":"https://api.github.com/users/futtery/orgs","repos_url":"https://api.github.com/users/futtery/repos","events_url":"https://api.github.com/users/futtery/events{/privacy}","received_events_url":"https://api.github.com/users/futtery/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-08-30T10:16:33Z","updated_at":"2022-08-30T10:16:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,I have found a problem in building the tree when dealing with some datasets,  but I don't know why. When I run the initial code as following,\r\n  \r\n_# Construct forest\r\n                forest = []\r\n                while len(forest) < num_trees:\r\n                    # Select random subsets of points uniformly\r\n                    ixs = np.random.choice(n, size=sample_size_range,\r\n                                           replace=False)\r\n                    # Add sampled trees to forest\r\n                    trees = [rrcf.RCTree(X[ix], index_labels=ix)\r\n                             for ix in ixs]\r\n                    forest.extend(trees)_\r\n\r\nthe error happens ,and it display like this .\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-33-fd54587bd3f7> in <module>\r\n    116                                            replace=False)\r\n    117                     # Add sampled trees to forest\r\n--> 118                     trees = [rrcf.RCTree(X[ix], index_labels=ix)\r\n    119                              for ix in ixs]\r\n    120                     forest.extend(trees)\r\n\r\n<ipython-input-33-fd54587bd3f7> in <listcomp>(.0)\r\n    116                                            replace=False)\r\n    117                     # Add sampled trees to forest\r\n--> 118                     trees = [rrcf.RCTree(X[ix], index_labels=ix)\r\n    119                              for ix in ixs]\r\n    120                     forest.extend(trees)\r\n\r\n~/anaconda3/lib/python3.8/site-packages/rrcf/rrcf.py in __init__(self, X, index_labels, precision, random_state)\r\n    104             # Create RRC Tree\r\n    105             S = np.ones(n, dtype=np.bool)\r\n--> 106             self._mktree(X, S, N, I, parent=self)\r\n    107             # Remove parent of root\r\n    108             self.root.u = None\r\n\r\n~/anaconda3/lib/python3.8/site-packages/rrcf/rrcf.py in _mktree(self, X, S, N, I, parent, side, depth)\r\n    196         if S2.sum() > 1:\r\n    197             # Recursively construct tree on S2\r\n--> 198             self._mktree(X, S2, N, I, parent=branch, side='r', depth=depth)\r\n    199         # Otherwise...\r\n    200         else:\r\n\r\n~/anaconda3/lib/python3.8/site-packages/rrcf/rrcf.py in _mktree(self, X, S, N, I, parent, side, depth)\r\n    174         if S1.sum() > 1:\r\n    175             # Recursively construct tree on S1\r\n--> 176             self._mktree(X, S1, N, I, parent=branch, side='l', depth=depth)\r\n    177         # Otherwise...\r\n    178         else:\r\n\r\n~/anaconda3/lib/python3.8/site-packages/rrcf/rrcf.py in _mktree(self, X, S, N, I, parent, side, depth)\r\n    174         if S1.sum() > 1:\r\n    175             # Recursively construct tree on S1\r\n--> 176             self._mktree(X, S1, N, I, parent=branch, side='l', depth=depth)\r\n    177         # Otherwise...\r\n    178         else:\r\n\r\n~/anaconda3/lib/python3.8/site-packages/rrcf/rrcf.py in _mktree(self, X, S, N, I, parent, side, depth)\r\n    174         if S1.sum() > 1:\r\n    175             # Recursively construct tree on S1\r\n--> 176             self._mktree(X, S1, N, I, parent=branch, side='l', depth=depth)\r\n    177         # Otherwise...\r\n    178         else:\r\n\r\n~/anaconda3/lib/python3.8/site-packages/rrcf/rrcf.py in _mktree(self, X, S, N, I, parent, side, depth)\r\n    200         else:\r\n    201             # Create a leaf node from isolated point\r\n--> 202             i = np.asscalar(np.flatnonzero(S2))\r\n    203             leaf = Leaf(i=i, d=depth, u=branch, x=X[i, :], n=N[i])\r\n    204             # Link leaf node to parent\r\n\r\n<__array_function__ internals> in asscalar(*args, **kwargs)\r\n\r\n~/anaconda3/lib/python3.8/site-packages/numpy/lib/type_check.py in asscalar(a)\r\n    579     24\r\n    580     \"\"\"\r\n--> 581     return a.item()\r\n    582 \r\n    583 #-----------------------------------------------------------------------------\r\n\r\nValueError: can only convert an array of size 1 to a Python scalar\r\n\r\n\r\n\r\n\r\nHowever, when I try to run the  X[ix] and build again ,it run.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/92/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/kLabUM/rrcf/issues/92/timeline","performed_via_github_app":null,"state_reason":null}