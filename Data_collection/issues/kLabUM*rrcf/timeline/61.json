[{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/524172339","html_url":"https://github.com/kLabUM/rrcf/issues/61#issuecomment-524172339","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/61","id":524172339,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDE3MjMzOQ==","user":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"created_at":"2019-08-23T04:57:27Z","updated_at":"2019-08-23T05:00:14Z","author_association":"MEMBER","body":"Hi @cjkini \r\n\r\nHere's a minimal example of streaming data to a server with rrcf.\r\n\r\n### Server code:\r\n\r\n```python\r\nfrom collections import deque\r\nimport rrcf\r\nfrom sanic import Sanic, response\r\n\r\napp = Sanic()\r\nNULL = b''\r\n\r\n# Set tree parameters\r\nnum_trees = 40\r\ntree_size = 256\r\n\r\n# Create a forest of empty trees\r\nforest = []\r\nfor _ in range(num_trees):\r\n    tree = rrcf.RCTree()\r\n    forest.append(tree)\r\n\r\n# Create deque to keep track of indices\r\nindices = deque([], maxlen=tree_size)\r\n\r\n@app.route(\"/\", methods=['POST'])\r\nasync def feed_rrcf(request):\r\n    # Get request data\r\n    json = request.json\r\n    index = json.setdefault('index')\r\n    point = json.setdefault('point')\r\n    is_valid = (index is not None) and (point is not None)\r\n    # If point is valid...\r\n    if is_valid:\r\n        # Check if tree size is maxed out\r\n        if len(indices) == tree_size:\r\n            oldest_index = indices.popleft()\r\n        else:\r\n            oldest_index = None\r\n        # Add new index to queue\r\n        indices.append(index)\r\n        # Initialize anomaly score\r\n        avg_codisp = 0\r\n        # For each tree...\r\n        for tree in forest:\r\n            # If tree is above permitted size, drop the oldest point (FIFO)\r\n            if oldest_index is not None:\r\n                tree.forget_point(oldest_index)\r\n            # Insert the new point into the tree\r\n            tree.insert_point(point, index=index)\r\n            # Compute codisp on the new point and take the average among all trees\r\n            avg_codisp += tree.codisp(index) / num_trees\r\n        print('CoDisp for point ({index}) is {avg_codisp}'.format(index=index,\r\n                                                                  avg_codisp=avg_codisp))\r\n    return response.raw(NULL)\r\n\r\nif __name__ == \"__main__\":\r\n    app.run(host=\"0.0.0.0\", port=8000)\r\n```\r\n\r\n### Code to send data\r\n\r\n```python\r\nimport requests\r\nimport time\r\nimport numpy as np\r\n\r\n# Set parameters\r\nnum_points = 200\r\nndim = 3\r\nendpoint = 'http://localhost:8000/'\r\n\r\n# Set random seed\r\nnp.random.seed(0)\r\n\r\n# Send random data points to server\r\nfor index in range(num_points):\r\n    point = np.random.randn(ndim).tolist()\r\n    json = {'index' : index, 'point' : point}\r\n    requests.post(endpoint, json=json)\r\n    time.sleep(0.01)\r\n```\r\n\r\n### Output\r\n\r\n```\r\n>>> python3 server_code.py\r\n\r\n[2019-08-23 00:50:15 -0400] [49148] [INFO] Goin' Fast @ http://0.0.0.0:8000\r\n[2019-08-23 00:50:15 -0400] [49148] [INFO] Starting worker [49148]\r\nCoDisp for point (0) is 0.0\r\n[2019-08-23 00:50:34 -0400] - (sanic.access)[INFO][127.0.0.1:49509]: POST http://localhost:8000/  200 0\r\nCoDisp for point (1) is 1.0000000000000004\r\n[2019-08-23 00:50:34 -0400] - (sanic.access)[INFO][127.0.0.1:49511]: POST http://localhost:8000/  200 0\r\nCoDisp for point (2) is 1.2750000000000001\r\n...\r\nCoDisp for point (198) is 3.739963294254606\r\n[2019-08-23 00:51:32 -0400] - (sanic.access)[INFO][127.0.0.1:50110]: POST http://localhost:8000/  200 0\r\nCoDisp for point (199) is 4.481089816800935\r\n```","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/524172339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false}},{"id":2578510021,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU3ODUxMDAyMQ==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2578510021","actor":{"login":"cjkini","id":26279896,"node_id":"MDQ6VXNlcjI2Mjc5ODk2","avatar_url":"https://avatars.githubusercontent.com/u/26279896?v=4","gravatar_id":"","url":"https://api.github.com/users/cjkini","html_url":"https://github.com/cjkini","followers_url":"https://api.github.com/users/cjkini/followers","following_url":"https://api.github.com/users/cjkini/following{/other_user}","gists_url":"https://api.github.com/users/cjkini/gists{/gist_id}","starred_url":"https://api.github.com/users/cjkini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjkini/subscriptions","organizations_url":"https://api.github.com/users/cjkini/orgs","repos_url":"https://api.github.com/users/cjkini/repos","events_url":"https://api.github.com/users/cjkini/events{/privacy}","received_events_url":"https://api.github.com/users/cjkini/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-23T04:57:27Z","performed_via_github_app":null},{"id":2578510023,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Nzg1MTAwMjM=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2578510023","actor":{"login":"cjkini","id":26279896,"node_id":"MDQ6VXNlcjI2Mjc5ODk2","avatar_url":"https://avatars.githubusercontent.com/u/26279896?v=4","gravatar_id":"","url":"https://api.github.com/users/cjkini","html_url":"https://github.com/cjkini","followers_url":"https://api.github.com/users/cjkini/followers","following_url":"https://api.github.com/users/cjkini/following{/other_user}","gists_url":"https://api.github.com/users/cjkini/gists{/gist_id}","starred_url":"https://api.github.com/users/cjkini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjkini/subscriptions","organizations_url":"https://api.github.com/users/cjkini/orgs","repos_url":"https://api.github.com/users/cjkini/repos","events_url":"https://api.github.com/users/cjkini/events{/privacy}","received_events_url":"https://api.github.com/users/cjkini/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-23T04:57:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/525071687","html_url":"https://github.com/kLabUM/rrcf/issues/61#issuecomment-525071687","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/61","id":525071687,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA3MTY4Nw==","user":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"created_at":"2019-08-26T23:26:26Z","updated_at":"2019-08-26T23:28:59Z","author_association":"NONE","body":"@mdbartos \r\n\r\nYour example above is calculating a CoDisp for each point in the stream but it's not determining whether a point is an anomaly.\r\n\r\n1. Would it make sense to create a dictionary that stores the CoDisp for each point seen? This would allow for the calculation of a CoDisp threshold (e.g. median + 3*std). If the CoDisp of the next point is greater than the threshold then it'd be an anomaly. This threshold would be recalculated with each new CoDisp added to the dictionary.\r\n2. Should the RRCF reach maximum size (i.e. tree_size==256 in your example) prior to calculating the CoDisp of any points? I see that you're calculating a point's CoDisp before you reach the maximum tree size.\r\n\r\nThanks!\r\n","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/525071687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false}},{"id":2585291225,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU4NTI5MTIyNQ==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2585291225","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-26T23:26:26Z","performed_via_github_app":null},{"id":2585291226,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1ODUyOTEyMjY=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2585291226","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-26T23:26:26Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/525125200","html_url":"https://github.com/kLabUM/rrcf/issues/61#issuecomment-525125200","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/61","id":525125200,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTEyNTIwMA==","user":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"created_at":"2019-08-27T03:50:18Z","updated_at":"2019-08-27T03:50:18Z","author_association":"MEMBER","body":"@sdlis \r\n\r\nThanks for pointing this out.\r\n\r\nThe code I posted is just intended as a minimal example for showing the mechanics of running rrcf on a server with streaming data. It should definitely be modified to suit the user's needs.\r\n\r\n1. Agreed. Also, computing the average CoDisp over a point's entire lifetime in the tree would be a better anomaly score than just the CoDisp on ingress. There are also probably better sampling strategies than just FIFO sampling (e.g. reservoir sampling), but the correct method to choose would be application-dependent.\r\n\r\n2. I could see a case for doing it either way. If your threshold is set as a percentile of observed CoDisps, then it could still function as a useful anomaly score for n < 256. ","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/525125200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false}},{"id":2585647908,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU4NTY0NzkwOA==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2585647908","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-27T03:50:19Z","performed_via_github_app":null},{"id":2585647909,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1ODU2NDc5MDk=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2585647909","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-27T03:50:19Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/525515088","html_url":"https://github.com/kLabUM/rrcf/issues/61#issuecomment-525515088","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/61","id":525515088,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTUxNTA4OA==","user":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"created_at":"2019-08-27T22:58:02Z","updated_at":"2019-08-27T22:58:02Z","author_association":"NONE","body":"Thanks for the quick reply!\r\n\r\nBuilding on the idea of maintaining a CoDisp dictionary for threshold calculation, should the CoDisps of points from this dictionary be removed when their corresponding points are removed from the tree?\r\n\r\nFor example, a tree with tree_size==256 is about to receive its 257th point. The first point is removed from the tree using forget_point() and then the 257th point is inserted. Should the first CoDisp be removed from the CoDisp dictionary?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/525515088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/527591950","html_url":"https://github.com/kLabUM/rrcf/issues/61#issuecomment-527591950","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/61","id":527591950,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzU5MTk1MA==","user":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T18:56:07Z","updated_at":"2019-09-03T18:56:07Z","author_association":"MEMBER","body":"@sdlis \r\n\r\nThat sounds reasonable. You can base your threshold on a longer record if needed though.","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/527591950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false}},{"id":2604643461,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjYwNDY0MzQ2MQ==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2604643461","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-09-03T18:56:07Z","performed_via_github_app":null},{"id":2604643462,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2MDQ2NDM0NjI=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2604643462","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-09-03T18:56:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/535931536","html_url":"https://github.com/kLabUM/rrcf/issues/61#issuecomment-535931536","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/61","id":535931536,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTkzMTUzNg==","user":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false},"created_at":"2019-09-27T13:07:43Z","updated_at":"2019-09-27T13:25:45Z","author_association":"NONE","body":"@mdbartos \r\n\r\nI have 2 questions regarding reservoir sampling with RRCF:\r\n1. Is the codisp (and not avg_codisp) of a point used since there's no guarantee the point will be in multiple trees in the forest let alone at the same index?\r\n\r\n2. My understanding of RRCF is that a point can't be scored without first being inserted into a tree. However, when using reservoir sampling, there's a chance [1-(tree_size/index)] (https://en.wikipedia.org/wiki/Reservoir_sampling) that an incoming point in a stream isn't selected to be inserted into a tree. However, for my use case I need to score all incoming points. Therefore, when a point isn't selected for insertion but still needs to be scored, is it correct to simply insert the new point, calculate the codisp, and then remove the new point from the tree?\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/535931536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sdlis","id":54560090,"node_id":"MDQ6VXNlcjU0NTYwMDkw","avatar_url":"https://avatars.githubusercontent.com/u/54560090?v=4","gravatar_id":"","url":"https://api.github.com/users/sdlis","html_url":"https://github.com/sdlis","followers_url":"https://api.github.com/users/sdlis/followers","following_url":"https://api.github.com/users/sdlis/following{/other_user}","gists_url":"https://api.github.com/users/sdlis/gists{/gist_id}","starred_url":"https://api.github.com/users/sdlis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sdlis/subscriptions","organizations_url":"https://api.github.com/users/sdlis/orgs","repos_url":"https://api.github.com/users/sdlis/repos","events_url":"https://api.github.com/users/sdlis/events{/privacy}","received_events_url":"https://api.github.com/users/sdlis/received_events","type":"User","site_admin":false}},{"id":2668583095,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjY2ODU4MzA5NQ==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2668583095","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-09-27T13:07:43Z","performed_via_github_app":null},{"id":2668583097,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2Njg1ODMwOTc=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2668583097","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-09-27T13:07:43Z","performed_via_github_app":null}]