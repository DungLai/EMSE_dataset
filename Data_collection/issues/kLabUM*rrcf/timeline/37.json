[{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/442880628","html_url":"https://github.com/kLabUM/rrcf/issues/37#issuecomment-442880628","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/37","id":442880628,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mjg4MDYyOA==","user":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"created_at":"2018-11-29T15:43:02Z","updated_at":"2018-11-29T15:43:02Z","author_association":"MEMBER","body":"Thanks for your question.\r\n\r\nUltimately, we leave sampling strategies up to the user. There are advantages and disadvantages to different approaches, and I'm not sure there is a correct approach per se. Our example in the readme uses a very simple FIFO queue, while Guha's original paper uses reservoir sampling. I could post an example of reservoir sampling as well.\r\n\r\nI might not be fully understanding your question though. If you have an example that illustrates your question, feel free to create a jupyter notebook in the `/notebooks` directory and submit a pull request.\r\n\r\nThanks,\r\nMDB","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/442880628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/450070192","html_url":"https://github.com/kLabUM/rrcf/issues/37#issuecomment-450070192","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/37","id":450070192,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDA3MDE5Mg==","user":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"created_at":"2018-12-27T04:16:02Z","updated_at":"2018-12-27T06:10:41Z","author_association":"MEMBER","body":"Hi @ptiagi \r\n\r\nI was looking at scikit-learn's implementation of isolation forest, and I think I know what you were saying now.\r\n\r\nWere you thinking of something along these lines?:\r\n\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\nimport rrcf\r\n\r\n# Set parameters\r\nnp.random.seed(0)\r\nn = 2010\r\nd = 3\r\nnum_trees = 100\r\ntree_size = 256\r\n\r\n# Generate data\r\nX = np.zeros((n, d))\r\nX[:1000,0] = 5\r\nX[1000:2000,0] = -5\r\nX += 0.01*np.random.randn(*X.shape)\r\n\r\n# Construct forest\r\nforest = []\r\nwhile len(forest) < num_trees:\r\n    # Select random subsets of points uniformly from point set\r\n    ixs = np.random.choice(n, size=(n // tree_size, tree_size),\r\n                           replace=False)\r\n    # Add sampled trees to forest\r\n    trees = [rrcf.RCTree(X[ix], index_labels=ix) for ix in ixs]\r\n    forest.extend(trees)\r\n\r\n# Compute average CoDisp\r\navg_codisp = pd.Series(0.0, index=np.arange(n))\r\nindex = np.zeros(n)\r\nfor tree in forest:\r\n    codisp = pd.Series({leaf : tree.codisp(leaf) for leaf in tree.leaves})\r\n    avg_codisp[codisp.index] += codisp\r\n    np.add.at(index, codisp.index.values, 1)\r\navg_codisp /= index\r\n```\r\n\r\nPlotting results:\r\n```python\r\nfrom mpl_toolkits.mplot3d import Axes3D\r\nimport matplotlib.pyplot as plt\r\nfrom matplotlib import colors\r\n\r\n%matplotlib inline\r\n\r\nfig = plt.figure(figsize=(8,6))\r\nax = fig.add_subplot(111, projection='3d')\r\nsc = ax.scatter(X[:,0], X[:,1], X[:,2], linewidths=0.1, edgecolors='k',\r\n                c=(avg_codisp > avg_codisp.quantile(0.995)).astype(float), cmap='cool')\r\nplt.title('CoDisp above 99th percentile')\r\nplt.tight_layout()\r\n```\r\n\r\n![codisp](https://user-images.githubusercontent.com/8175317/50465257-5553c680-0953-11e9-8bdc-34128c1a36b2.png)","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/450070192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false}},{"id":2045307848,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA0NTMwNzg0OA==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2045307848","actor":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-12-27T04:16:02Z","performed_via_github_app":null},{"id":2045307849,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNDUzMDc4NDk=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2045307849","actor":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-12-27T04:16:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/450441099","html_url":"https://github.com/kLabUM/rrcf/issues/37#issuecomment-450441099","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/37","id":450441099,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ0MTA5OQ==","user":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false},"created_at":"2018-12-28T23:08:46Z","updated_at":"2018-12-28T23:08:46Z","author_association":"MEMBER","body":"Hi @ptiagi \r\n\r\nI updated the readme with this new example. Thanks.","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/450441099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdbartos","id":8175317,"node_id":"MDQ6VXNlcjgxNzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8175317?v=4","gravatar_id":"","url":"https://api.github.com/users/mdbartos","html_url":"https://github.com/mdbartos","followers_url":"https://api.github.com/users/mdbartos/followers","following_url":"https://api.github.com/users/mdbartos/following{/other_user}","gists_url":"https://api.github.com/users/mdbartos/gists{/gist_id}","starred_url":"https://api.github.com/users/mdbartos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdbartos/subscriptions","organizations_url":"https://api.github.com/users/mdbartos/orgs","repos_url":"https://api.github.com/users/mdbartos/repos","events_url":"https://api.github.com/users/mdbartos/events{/privacy}","received_events_url":"https://api.github.com/users/mdbartos/received_events","type":"User","site_admin":false}},{"id":2047801633,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA0NzgwMTYzMw==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2047801633","actor":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-12-28T23:08:46Z","performed_via_github_app":null},{"id":2047801635,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNDc4MDE2MzU=","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2047801635","actor":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-12-28T23:08:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/450460578","html_url":"https://github.com/kLabUM/rrcf/issues/37#issuecomment-450460578","issue_url":"https://api.github.com/repos/kLabUM/rrcf/issues/37","id":450460578,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ2MDU3OA==","user":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false},"created_at":"2018-12-29T03:04:21Z","updated_at":"2018-12-29T03:04:21Z","author_association":"NONE","body":"Thank you, MDB!","reactions":{"url":"https://api.github.com/repos/kLabUM/rrcf/issues/comments/450460578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false}},{"id":2047900421,"node_id":"MDExOkNsb3NlZEV2ZW50MjA0NzkwMDQyMQ==","url":"https://api.github.com/repos/kLabUM/rrcf/issues/events/2047900421","actor":{"login":"ptiagi","id":23584791,"node_id":"MDQ6VXNlcjIzNTg0Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/23584791?v=4","gravatar_id":"","url":"https://api.github.com/users/ptiagi","html_url":"https://github.com/ptiagi","followers_url":"https://api.github.com/users/ptiagi/followers","following_url":"https://api.github.com/users/ptiagi/following{/other_user}","gists_url":"https://api.github.com/users/ptiagi/gists{/gist_id}","starred_url":"https://api.github.com/users/ptiagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptiagi/subscriptions","organizations_url":"https://api.github.com/users/ptiagi/orgs","repos_url":"https://api.github.com/users/ptiagi/repos","events_url":"https://api.github.com/users/ptiagi/events{/privacy}","received_events_url":"https://api.github.com/users/ptiagi/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-12-29T03:04:21Z","state_reason":null,"performed_via_github_app":null}]