[{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419365848","html_url":"https://github.com/yu4u/noise2noise/issues/14#issuecomment-419365848","issue_url":"https://api.github.com/repos/yu4u/noise2noise/issues/14","id":419365848,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTM2NTg0OA==","user":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T08:35:06Z","updated_at":"2018-09-07T08:35:06Z","author_association":"OWNER","body":"Well, as you mentioned, it is unclear how they created the Poisson noise.\r\nFrom the paper:\r\n\r\n>  While zero-mean, it is harder to remove because it is signal-dependent. We use the L2 loss, and vary the noise magnitude λ ∈ [0, 50] during training\r\n\r\nThis is somewhat strange because the parameter lambda should be the intensities or RGB values of the images, thus can not be set as a parameter.\r\n\r\nThe author of the PyTorch implementation has a similar question:\r\nhttps://github.com/joeylitalien/noise2noise-pytorch/blob/790704a79f9a3620200260cd50ad2968f74522d3/src/datasets.py#L123-L130\r\n\r\n","reactions":{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419365848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419377806","html_url":"https://github.com/yu4u/noise2noise/issues/14#issuecomment-419377806","issue_url":"https://api.github.com/repos/yu4u/noise2noise/issues/14","id":419377806,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTM3NzgwNg==","user":{"login":"shivamsaboo17","id":23507911,"node_id":"MDQ6VXNlcjIzNTA3OTEx","avatar_url":"https://avatars.githubusercontent.com/u/23507911?v=4","gravatar_id":"","url":"https://api.github.com/users/shivamsaboo17","html_url":"https://github.com/shivamsaboo17","followers_url":"https://api.github.com/users/shivamsaboo17/followers","following_url":"https://api.github.com/users/shivamsaboo17/following{/other_user}","gists_url":"https://api.github.com/users/shivamsaboo17/gists{/gist_id}","starred_url":"https://api.github.com/users/shivamsaboo17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivamsaboo17/subscriptions","organizations_url":"https://api.github.com/users/shivamsaboo17/orgs","repos_url":"https://api.github.com/users/shivamsaboo17/repos","events_url":"https://api.github.com/users/shivamsaboo17/events{/privacy}","received_events_url":"https://api.github.com/users/shivamsaboo17/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T09:18:12Z","updated_at":"2018-09-07T09:18:12Z","author_association":"NONE","body":"@yu4u you are right. That's what I was thinking. I'll maybe contact the paper authors and hope to get a reply. Will update here if found anything useful.","reactions":{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419377806/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shivamsaboo17","id":23507911,"node_id":"MDQ6VXNlcjIzNTA3OTEx","avatar_url":"https://avatars.githubusercontent.com/u/23507911?v=4","gravatar_id":"","url":"https://api.github.com/users/shivamsaboo17","html_url":"https://github.com/shivamsaboo17","followers_url":"https://api.github.com/users/shivamsaboo17/followers","following_url":"https://api.github.com/users/shivamsaboo17/following{/other_user}","gists_url":"https://api.github.com/users/shivamsaboo17/gists{/gist_id}","starred_url":"https://api.github.com/users/shivamsaboo17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivamsaboo17/subscriptions","organizations_url":"https://api.github.com/users/shivamsaboo17/orgs","repos_url":"https://api.github.com/users/shivamsaboo17/repos","events_url":"https://api.github.com/users/shivamsaboo17/events{/privacy}","received_events_url":"https://api.github.com/users/shivamsaboo17/received_events","type":"User","site_admin":false}},{"id":1832387717,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTgzMjM4NzcxNw==","url":"https://api.github.com/repos/yu4u/noise2noise/issues/events/1832387717","actor":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-09-07T09:18:12Z","performed_via_github_app":null},{"id":1832387719,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE4MzIzODc3MTk=","url":"https://api.github.com/repos/yu4u/noise2noise/issues/events/1832387719","actor":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-09-07T09:18:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419380485","html_url":"https://github.com/yu4u/noise2noise/issues/14#issuecomment-419380485","issue_url":"https://api.github.com/repos/yu4u/noise2noise/issues/14","id":419380485,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTM4MDQ4NQ==","user":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T09:27:41Z","updated_at":"2018-09-07T09:27:41Z","author_association":"OWNER","body":"I'm afraid that they simply used `np.random.poisson(lambda)`.\r\nSo I compared the result of the above implementation and the noisy image in the paper (lambda=30).\r\nIt seems that their results are noisier than the above implementation...\r\n\r\nIn terms of your implementation, the noise seems to be not zero-mean.","reactions":{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419380485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419381178","html_url":"https://github.com/yu4u/noise2noise/issues/14#issuecomment-419381178","issue_url":"https://api.github.com/repos/yu4u/noise2noise/issues/14","id":419381178,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTM4MTE3OA==","user":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T09:30:19Z","updated_at":"2018-09-07T09:30:19Z","author_association":"OWNER","body":"By the way, I thought similar implementation as that of you.\r\n\r\n```\r\nimg = img.astype(np.float)\r\nsampled_lambda = np.random.uniform(min_lambda, max_lambda)\r\nnoise = (np.random.poisson(img) - img) * sampled_lambda / 100 # or 255?\r\nnoise_img = img + noise\r\nnoise_img = np.clip(noise_img, 0, 255).astype(np.uint8)\r\n```\r\n\r\nBut the resulting images are less noisy...","reactions":{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/419381178/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yu4u","id":618466,"node_id":"MDQ6VXNlcjYxODQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/618466?v=4","gravatar_id":"","url":"https://api.github.com/users/yu4u","html_url":"https://github.com/yu4u","followers_url":"https://api.github.com/users/yu4u/followers","following_url":"https://api.github.com/users/yu4u/following{/other_user}","gists_url":"https://api.github.com/users/yu4u/gists{/gist_id}","starred_url":"https://api.github.com/users/yu4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yu4u/subscriptions","organizations_url":"https://api.github.com/users/yu4u/orgs","repos_url":"https://api.github.com/users/yu4u/repos","events_url":"https://api.github.com/users/yu4u/events{/privacy}","received_events_url":"https://api.github.com/users/yu4u/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/492148066","html_url":"https://github.com/yu4u/noise2noise/issues/14#issuecomment-492148066","issue_url":"https://api.github.com/repos/yu4u/noise2noise/issues/14","id":492148066,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjE0ODA2Ng==","user":{"login":"victorca25","id":41912303,"node_id":"MDQ6VXNlcjQxOTEyMzAz","avatar_url":"https://avatars.githubusercontent.com/u/41912303?v=4","gravatar_id":"","url":"https://api.github.com/users/victorca25","html_url":"https://github.com/victorca25","followers_url":"https://api.github.com/users/victorca25/followers","following_url":"https://api.github.com/users/victorca25/following{/other_user}","gists_url":"https://api.github.com/users/victorca25/gists{/gist_id}","starred_url":"https://api.github.com/users/victorca25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victorca25/subscriptions","organizations_url":"https://api.github.com/users/victorca25/orgs","repos_url":"https://api.github.com/users/victorca25/repos","events_url":"https://api.github.com/users/victorca25/events{/privacy}","received_events_url":"https://api.github.com/users/victorca25/received_events","type":"User","site_admin":false},"created_at":"2019-05-14T08:49:38Z","updated_at":"2019-05-14T08:49:53Z","author_association":"NONE","body":"Poisson noise is not additive it's applied, I believe that's what's wrong. That means that this step is not necessary:\r\n> noise_img = img + noise\r\n\r\nAnd the last line should instead be:\r\n> noise_img = np.clip(noise, 0, 255).astype(np.uint8)","reactions":{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/492148066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"victorca25","id":41912303,"node_id":"MDQ6VXNlcjQxOTEyMzAz","avatar_url":"https://avatars.githubusercontent.com/u/41912303?v=4","gravatar_id":"","url":"https://api.github.com/users/victorca25","html_url":"https://github.com/victorca25","followers_url":"https://api.github.com/users/victorca25/followers","following_url":"https://api.github.com/users/victorca25/following{/other_user}","gists_url":"https://api.github.com/users/victorca25/gists{/gist_id}","starred_url":"https://api.github.com/users/victorca25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victorca25/subscriptions","organizations_url":"https://api.github.com/users/victorca25/orgs","repos_url":"https://api.github.com/users/victorca25/repos","events_url":"https://api.github.com/users/victorca25/events{/privacy}","received_events_url":"https://api.github.com/users/victorca25/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/492159439","html_url":"https://github.com/yu4u/noise2noise/issues/14#issuecomment-492159439","issue_url":"https://api.github.com/repos/yu4u/noise2noise/issues/14","id":492159439,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjE1OTQzOQ==","user":{"login":"victorca25","id":41912303,"node_id":"MDQ6VXNlcjQxOTEyMzAz","avatar_url":"https://avatars.githubusercontent.com/u/41912303?v=4","gravatar_id":"","url":"https://api.github.com/users/victorca25","html_url":"https://github.com/victorca25","followers_url":"https://api.github.com/users/victorca25/followers","following_url":"https://api.github.com/users/victorca25/following{/other_user}","gists_url":"https://api.github.com/users/victorca25/gists{/gist_id}","starred_url":"https://api.github.com/users/victorca25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victorca25/subscriptions","organizations_url":"https://api.github.com/users/victorca25/orgs","repos_url":"https://api.github.com/users/victorca25/repos","events_url":"https://api.github.com/users/victorca25/events{/privacy}","received_events_url":"https://api.github.com/users/victorca25/received_events","type":"User","site_admin":false},"created_at":"2019-05-14T09:22:57Z","updated_at":"2019-05-14T09:22:57Z","author_association":"NONE","body":"The scikit image code (https://github.com/scikit-image/scikit-image/blob/master/skimage/util/noise.py) has an implementation for Poisson noise that can be used as a reference:\r\n\r\n >    elif mode == 'poisson':\r\n >        # Determine unique values in image & calculate the next power of two\r\n >       vals = len(np.unique(image))\r\n >       vals = 2 ** np.ceil(np.log2(vals))\r\n >        # Generating noise for each unique value in image.\r\n >       out = np.random.poisson(image * vals) / float(vals)","reactions":{"url":"https://api.github.com/repos/yu4u/noise2noise/issues/comments/492159439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"victorca25","id":41912303,"node_id":"MDQ6VXNlcjQxOTEyMzAz","avatar_url":"https://avatars.githubusercontent.com/u/41912303?v=4","gravatar_id":"","url":"https://api.github.com/users/victorca25","html_url":"https://github.com/victorca25","followers_url":"https://api.github.com/users/victorca25/followers","following_url":"https://api.github.com/users/victorca25/following{/other_user}","gists_url":"https://api.github.com/users/victorca25/gists{/gist_id}","starred_url":"https://api.github.com/users/victorca25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victorca25/subscriptions","organizations_url":"https://api.github.com/users/victorca25/orgs","repos_url":"https://api.github.com/users/victorca25/repos","events_url":"https://api.github.com/users/victorca25/events{/privacy}","received_events_url":"https://api.github.com/users/victorca25/received_events","type":"User","site_admin":false}}]