[{"url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/comments/753619778","html_url":"https://github.com/ialhashim/DenseDepth/issues/164#issuecomment-753619778","issue_url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/164","id":753619778,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzYxOTc3OA==","user":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"created_at":"2021-01-03T13:48:21Z","updated_at":"2021-01-03T13:48:21Z","author_association":"NONE","body":"I have come up with this but I'm sure there is a more efficient way. If so please reply:\r\n`import os\r\nimport glob\r\nimport argparse\r\nimport matplotlib\r\n\r\n# Keras / TensorFlow\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '5'\r\nfrom keras.models import load_model\r\nfrom layers import BilinearUpSampling2D\r\nfrom utils import predict, load_images, display_images, save_images\r\nfrom matplotlib import pyplot as plt\r\n\r\n# Argument Parser\r\nparser = argparse.ArgumentParser(description='High Quality Monocular Depth Estimation via Transfer Learning')\r\nparser.add_argument('--model', default='nyu.h5', type=str, help='Trained Keras model file.')\r\nparser.add_argument('--input', default='examples/*.png', type=str, help='Input filename or folder.')\r\nargs = parser.parse_args()\r\n\r\n# Custom object needed for inference and training\r\ncustom_objects = {'BilinearUpSampling2D': BilinearUpSampling2D, 'depth_loss_function': None}\r\n\r\nprint('Loading model...')\r\n\r\n# Load model into GPU / CPU\r\nmodel = load_model(args.model, custom_objects=custom_objects, compile=False)\r\n\r\nprint('\\nModel loaded ({0}).'.format(args.model))\r\n\r\n# Input images\r\nprint ('Inputs for args:', type(glob.glob(args.input)), str(glob.glob(args.input)))\r\nprint ('Starting Itterations')\r\narray_input = glob.glob(args.input)\r\nfor x in range (len(array_input)):\r\n    print ('Itteration',x,'name',array_input[x])\r\n    single_image = array_input[x]\r\n    # Input Images\r\n    inputs = load_images(glob.glob(single_image))\r\n    \r\n    #inputs = load_images( glob.glob(args.input) )\r\n    print ('Input Type:', type(inputs))\r\n    print('\\nLoaded ({0}) images of size {1}.'.format(inputs.shape[0], inputs.shape[1:]))\r\n    # Compute results\r\n\r\n    print (\"[COMPUTING RESULTS STARTED]\")\r\n    outputs = predict(model, inputs)\r\n    print (\"[COMPUTING RESULTS FINISHED]\")\r\n\r\n    #matplotlib problem on ubuntu terminal fix\r\n    #matplotlib.use('TkAgg')   \r\n\r\n    # Display results\r\n    '''\r\n    viz = display_images(outputs.copy(), inputs.copy())\r\n    plt.figure(figsize=(10,5))\r\n    plt.imshow(viz)\r\n    plt.savefig('test.png')\r\n    plt.show()\r\n    '''\r\n\r\n    # Save Results\r\n    save_images((str(x)+'.png'), outputs.copy())\r\n    print (\"[IMAGE(S) SAVED]\")\r\n\r\nprint ('[ALL FINISHED]')\r\n`","reactions":{"url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/comments/753619778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false}},{"id":4162796343,"node_id":"MDExOkNsb3NlZEV2ZW50NDE2Mjc5NjM0Mw==","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4162796343","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-01-03T20:58:14Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/comments/754334269","html_url":"https://github.com/ialhashim/DenseDepth/issues/164#issuecomment-754334269","issue_url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/164","id":754334269,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDMzNDI2OQ==","user":{"login":"karndeb","id":36044259,"node_id":"MDQ6VXNlcjM2MDQ0MjU5","avatar_url":"https://avatars.githubusercontent.com/u/36044259?v=4","gravatar_id":"","url":"https://api.github.com/users/karndeb","html_url":"https://github.com/karndeb","followers_url":"https://api.github.com/users/karndeb/followers","following_url":"https://api.github.com/users/karndeb/following{/other_user}","gists_url":"https://api.github.com/users/karndeb/gists{/gist_id}","starred_url":"https://api.github.com/users/karndeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karndeb/subscriptions","organizations_url":"https://api.github.com/users/karndeb/orgs","repos_url":"https://api.github.com/users/karndeb/repos","events_url":"https://api.github.com/users/karndeb/events{/privacy}","received_events_url":"https://api.github.com/users/karndeb/received_events","type":"User","site_admin":false},"created_at":"2021-01-05T01:54:39Z","updated_at":"2021-01-05T01:54:39Z","author_association":"NONE","body":"Hi @Aiyush-G There is a better way to do this. Dont return the montage in the display function in utils and loop through the images that you get to save them individually","reactions":{"url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/comments/754334269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"karndeb","id":36044259,"node_id":"MDQ6VXNlcjM2MDQ0MjU5","avatar_url":"https://avatars.githubusercontent.com/u/36044259?v=4","gravatar_id":"","url":"https://api.github.com/users/karndeb","html_url":"https://github.com/karndeb","followers_url":"https://api.github.com/users/karndeb/followers","following_url":"https://api.github.com/users/karndeb/following{/other_user}","gists_url":"https://api.github.com/users/karndeb/gists{/gist_id}","starred_url":"https://api.github.com/users/karndeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karndeb/subscriptions","organizations_url":"https://api.github.com/users/karndeb/orgs","repos_url":"https://api.github.com/users/karndeb/repos","events_url":"https://api.github.com/users/karndeb/events{/privacy}","received_events_url":"https://api.github.com/users/karndeb/received_events","type":"User","site_admin":false}},{"id":4167520993,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2NzUyMDk5Mw==","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4167520993","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-05T01:54:39Z","performed_via_github_app":null},{"id":4167520996,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjc1MjA5OTY=","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4167520996","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-05T01:54:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/comments/754444661","html_url":"https://github.com/ialhashim/DenseDepth/issues/164#issuecomment-754444661","issue_url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/164","id":754444661,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDQ0NDY2MQ==","user":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"created_at":"2021-01-05T07:02:35Z","updated_at":"2021-01-05T08:33:01Z","author_association":"NONE","body":"Hi @karndeb thanks for the response , I really appreciate you getting back to me. I am slightly noobish and would really appreciate if you could help me adjust a copy of the code.\r\n\r\nThanks\r\nAG","reactions":{"url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/comments/754444661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false}},{"id":4168206447,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2ODIwNjQ0Nw==","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4168206447","actor":{"login":"karndeb","id":36044259,"node_id":"MDQ6VXNlcjM2MDQ0MjU5","avatar_url":"https://avatars.githubusercontent.com/u/36044259?v=4","gravatar_id":"","url":"https://api.github.com/users/karndeb","html_url":"https://github.com/karndeb","followers_url":"https://api.github.com/users/karndeb/followers","following_url":"https://api.github.com/users/karndeb/following{/other_user}","gists_url":"https://api.github.com/users/karndeb/gists{/gist_id}","starred_url":"https://api.github.com/users/karndeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karndeb/subscriptions","organizations_url":"https://api.github.com/users/karndeb/orgs","repos_url":"https://api.github.com/users/karndeb/repos","events_url":"https://api.github.com/users/karndeb/events{/privacy}","received_events_url":"https://api.github.com/users/karndeb/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-05T07:02:35Z","performed_via_github_app":null},{"id":4168206448,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjgyMDY0NDg=","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4168206448","actor":{"login":"karndeb","id":36044259,"node_id":"MDQ6VXNlcjM2MDQ0MjU5","avatar_url":"https://avatars.githubusercontent.com/u/36044259?v=4","gravatar_id":"","url":"https://api.github.com/users/karndeb","html_url":"https://github.com/karndeb","followers_url":"https://api.github.com/users/karndeb/followers","following_url":"https://api.github.com/users/karndeb/following{/other_user}","gists_url":"https://api.github.com/users/karndeb/gists{/gist_id}","starred_url":"https://api.github.com/users/karndeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karndeb/subscriptions","organizations_url":"https://api.github.com/users/karndeb/orgs","repos_url":"https://api.github.com/users/karndeb/repos","events_url":"https://api.github.com/users/karndeb/events{/privacy}","received_events_url":"https://api.github.com/users/karndeb/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-05T07:02:35Z","performed_via_github_app":null},{"id":4168206702,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ0MTY4MjA2NzAy","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4168206702","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2021-01-05T07:02:41Z","state_reason":null,"performed_via_github_app":null},{"id":4174466262,"node_id":"MDExOkNsb3NlZEV2ZW50NDE3NDQ2NjI2Mg==","url":"https://api.github.com/repos/ialhashim/DenseDepth/issues/events/4174466262","actor":{"login":"Aiyush-G","id":55917505,"node_id":"MDQ6VXNlcjU1OTE3NTA1","avatar_url":"https://avatars.githubusercontent.com/u/55917505?v=4","gravatar_id":"","url":"https://api.github.com/users/Aiyush-G","html_url":"https://github.com/Aiyush-G","followers_url":"https://api.github.com/users/Aiyush-G/followers","following_url":"https://api.github.com/users/Aiyush-G/following{/other_user}","gists_url":"https://api.github.com/users/Aiyush-G/gists{/gist_id}","starred_url":"https://api.github.com/users/Aiyush-G/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aiyush-G/subscriptions","organizations_url":"https://api.github.com/users/Aiyush-G/orgs","repos_url":"https://api.github.com/users/Aiyush-G/repos","events_url":"https://api.github.com/users/Aiyush-G/events{/privacy}","received_events_url":"https://api.github.com/users/Aiyush-G/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-01-06T09:58:48Z","state_reason":null,"performed_via_github_app":null}]