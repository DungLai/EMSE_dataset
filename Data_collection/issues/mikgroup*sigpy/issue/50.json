{"url":"https://api.github.com/repos/mikgroup/sigpy/issues/50","repository_url":"https://api.github.com/repos/mikgroup/sigpy","labels_url":"https://api.github.com/repos/mikgroup/sigpy/issues/50/labels{/name}","comments_url":"https://api.github.com/repos/mikgroup/sigpy/issues/50/comments","events_url":"https://api.github.com/repos/mikgroup/sigpy/issues/50/events","html_url":"https://github.com/mikgroup/sigpy/issues/50","id":616227250,"node_id":"MDU6SXNzdWU2MTYyMjcyNTA=","number":50,"title":"KeyError: 'S' in _xpay_cuda","user":{"login":"wgrissom","id":1059290,"node_id":"MDQ6VXNlcjEwNTkyOTA=","avatar_url":"https://avatars.githubusercontent.com/u/1059290?v=4","gravatar_id":"","url":"https://api.github.com/users/wgrissom","html_url":"https://github.com/wgrissom","followers_url":"https://api.github.com/users/wgrissom/followers","following_url":"https://api.github.com/users/wgrissom/following{/other_user}","gists_url":"https://api.github.com/users/wgrissom/gists{/gist_id}","starred_url":"https://api.github.com/users/wgrissom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wgrissom/subscriptions","organizations_url":"https://api.github.com/users/wgrissom/orgs","repos_url":"https://api.github.com/users/wgrissom/repos","events_url":"https://api.github.com/users/wgrissom/events{/privacy}","received_events_url":"https://api.github.com/users/wgrissom/received_events","type":"User","site_admin":false},"labels":[{"id":983094941,"node_id":"MDU6TGFiZWw5ODMwOTQ5NDE=","url":"https://api.github.com/repos/mikgroup/sigpy/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-05-11T22:24:22Z","updated_at":"2020-11-03T19:01:16Z","closed_at":"2020-07-23T04:57:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"When running the L1WaveletRecon app on my GPU, python is throwing this error, as though it doesn’t understand what the ’S’ in ’S a’ stands for, on line 482 of util.py. My knowledge of cupy is limited but reading the code, it looks like _xpay_cuda defines a CUDA kernel that calculates x + a*y, where a is a scalar (which is what ’S’ signifies) and x and y are tensors (’T’).\r\n\r\nTo reproduce:\r\nInvoke L1WaveletRecon on the GPU\r\n\r\nError text:\r\nTraceback (most recent call last):\r\n File \"./prom_nufft_test_3d.py\", line 69, in <module>\r\n   show_pbar=False, device=sp.Device(0)).run()\r\n File \"/nas/home/grissowa/sigpy-rf/sigpy/app.py\", line 85, in run\r\n   self.alg.update()\r\n File \"/nas/home/grissowa/sigpy-rf/sigpy/alg.py\", line 63, in update\r\n   self._update()\r\n File \"/nas/home/grissowa/sigpy-rf/sigpy/alg.py\", line 187, in _update\r\n   util.axpy(self.x, -self.alpha, self.gradf(self.x))\r\n File \"/nas/home/grissowa/sigpy-rf/sigpy/util.py\", line 441, in axpy\r\n   _axpy_cuda(a, x, y)\r\n File \"cupy/core/_kernel.pyx\", line 540, in cupy.core._kernel.ElementwiseKernel.__call__\r\n File \"cupy/core/_kernel.pyx\", line 587, in cupy.core._kernel.ElementwiseKernel._decide_params_type\r\n File \"cupy/core/_kernel.pyx\", line 299, in cupy.core._kernel._decide_params_type_core\r\nKeyError: ’S'\r\n\r\n\r\nMy nvcc —version output: \r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2019 NVIDIA Corporation\r\nBuilt on Sun_Jul_28_19:07:16_PDT_2019\r\nCuda compilation tools, release 10.1, V10.1.243\r\n\r\nI am running this in a Conda environment with python 3.6, with CUDA 10.1.\r\n","closed_by":{"login":"frankong","id":9143405,"node_id":"MDQ6VXNlcjkxNDM0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/9143405?v=4","gravatar_id":"","url":"https://api.github.com/users/frankong","html_url":"https://github.com/frankong","followers_url":"https://api.github.com/users/frankong/followers","following_url":"https://api.github.com/users/frankong/following{/other_user}","gists_url":"https://api.github.com/users/frankong/gists{/gist_id}","starred_url":"https://api.github.com/users/frankong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frankong/subscriptions","organizations_url":"https://api.github.com/users/frankong/orgs","repos_url":"https://api.github.com/users/frankong/repos","events_url":"https://api.github.com/users/frankong/events{/privacy}","received_events_url":"https://api.github.com/users/frankong/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mikgroup/sigpy/issues/50/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mikgroup/sigpy/issues/50/timeline","performed_via_github_app":null,"state_reason":"completed"}