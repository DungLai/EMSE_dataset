{"url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet/issues/31","repository_url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet","labels_url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet/issues/31/comments","events_url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet/issues/31/events","html_url":"https://github.com/MaybeShewill-CV/attentive-gan-derainnet/issues/31","id":418107911,"node_id":"MDU6SXNzdWU0MTgxMDc5MTE=","number":31,"title":"Got the error when run test_model.py","user":{"login":"tuencfs","id":44730710,"node_id":"MDQ6VXNlcjQ0NzMwNzEw","avatar_url":"https://avatars.githubusercontent.com/u/44730710?v=4","gravatar_id":"","url":"https://api.github.com/users/tuencfs","html_url":"https://github.com/tuencfs","followers_url":"https://api.github.com/users/tuencfs/followers","following_url":"https://api.github.com/users/tuencfs/following{/other_user}","gists_url":"https://api.github.com/users/tuencfs/gists{/gist_id}","starred_url":"https://api.github.com/users/tuencfs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuencfs/subscriptions","organizations_url":"https://api.github.com/users/tuencfs/orgs","repos_url":"https://api.github.com/users/tuencfs/repos","events_url":"https://api.github.com/users/tuencfs/events{/privacy}","received_events_url":"https://api.github.com/users/tuencfs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-03-07T03:08:29Z","updated_at":"2019-03-07T06:39:05Z","closed_at":"2019-03-07T06:16:06Z","author_association":"NONE","active_lock_reason":null,"body":"Please help some advice to fix the Error, I got the error when run test_model.py\r\n\r\ncommand:\r\n\r\npython3 tools/test_model.py --weights_path model/new_model/derain_gan_2018-11-02-19-55-27.ckpt-200000 --image_path data/test_data/test_1.png\r\n\r\nand error is:\r\n\r\n/home/tuencns/.local/lib/python3.5/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\nVGG16 Network init complete\r\nWARNING:tensorflow:From /home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\nWARNING:tensorflow:From /home/tuencns/ws/raindrops2/attentive_gan_model/cnn_basenet.py:402: conv2d_transpose (from tensorflow.python.layers.convolutional) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse keras.layers.conv2d_transpose instead.\r\n2019-03-07 10:02:37.177862: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-03-07 10:02:37.198260: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3192000000 Hz\r\n2019-03-07 10:02:37.198666: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x7022340 executing computations on platform Host. Devices:\r\n2019-03-07 10:02:37.198690: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>\r\nWARNING:tensorflow:From /home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py:1266: checkpoint_exists (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to check for files with this prefix.\r\n2019-03-07 10:02:37.420497: W tensorflow/core/framework/op_kernel.cc:1401] OP_REQUIRES failed at save_restore_v2_ops.cc:184 : Not found: Key derain_net_loss/attentive_autoencoder_loss/autoencoder_inference/gn_1/beta not found in checkpoint\r\nTraceback (most recent call last):\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1334, in _do_call\r\n    return fn(*args)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1319, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.NotFoundError: Key derain_net_loss/attentive_autoencoder_loss/autoencoder_inference/gn_1/beta not found in checkpoint\r\n\t [[{{node save/RestoreV2}}]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1276, in restore\r\n    {self.saver_def.filename_tensor_name: save_path})\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1152, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1328, in _do_run\r\n    run_metadata)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1348, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.NotFoundError: Key derain_net_loss/attentive_autoencoder_loss/autoencoder_inference/gn_1/beta not found in checkpoint\r\n\t [[node save/RestoreV2 (defined at tools/test_model.py:88) ]]\r\n\r\nCaused by op 'save/RestoreV2', defined at:\r\n  File \"tools/test_model.py\", line 148, in <module>\r\n    test_model(args.image_path, args.weights_path)\r\n  File \"tools/test_model.py\", line 88, in test_model\r\n    saver = tf.train.Saver()\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 832, in __init__\r\n    self.build()\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 844, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 881, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 513, in _build_internal\r\n    restore_sequentially, reshape)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 332, in _AddRestoreOps\r\n    restore_sequentially)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 580, in bulk_restore\r\n    return io_ops.restore_v2(filename_tensor, names, slices, dtypes)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/ops/gen_io_ops.py\", line 1572, in restore_v2\r\n    name=name)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3300, in create_op\r\n    op_def=op_def)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1801, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nNotFoundError (see above for traceback): Key derain_net_loss/attentive_autoencoder_loss/autoencoder_inference/gn_1/beta not found in checkpoint\r\n\t [[node save/RestoreV2 (defined at tools/test_model.py:88) ]]\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1286, in restore\r\n    names_to_keys = object_graph_key_mapping(save_path)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1591, in object_graph_key_mapping\r\n    checkpointable.OBJECT_GRAPH_PROTO_KEY)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\", line 370, in get_tensor\r\n    status)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.NotFoundError: Key _CHECKPOINTABLE_OBJECT_GRAPH not found in checkpoint\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"tools/test_model.py\", line 148, in <module>\r\n    test_model(args.image_path, args.weights_path)\r\n  File \"tools/test_model.py\", line 92, in test_model\r\n    saver.restore(sess=sess, save_path=weights_path)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 1292, in restore\r\n    err, \"a Variable name or other graph key that is missing\")\r\ntensorflow.python.framework.errors_impl.NotFoundError: Restoring from checkpoint failed. This is most likely due to a Variable name or other graph key that is missing from the checkpoint. Please ensure that you have not altered the graph expected based on the checkpoint. Original error:\r\n\r\nKey derain_net_loss/attentive_autoencoder_loss/autoencoder_inference/gn_1/beta not found in checkpoint\r\n\t [[node save/RestoreV2 (defined at tools/test_model.py:88) ]]\r\n\r\nCaused by op 'save/RestoreV2', defined at:\r\n  File \"tools/test_model.py\", line 148, in <module>\r\n    test_model(args.image_path, args.weights_path)\r\n  File \"tools/test_model.py\", line 88, in test_model\r\n    saver = tf.train.Saver()\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 832, in __init__\r\n    self.build()\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 844, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 881, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 513, in _build_internal\r\n    restore_sequentially, reshape)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 332, in _AddRestoreOps\r\n    restore_sequentially)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/training/saver.py\", line 580, in bulk_restore\r\n    return io_ops.restore_v2(filename_tensor, names, slices, dtypes)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/ops/gen_io_ops.py\", line 1572, in restore_v2\r\n    name=name)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3300, in create_op\r\n    op_def=op_def)\r\n  File \"/home/tuencns/.local/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1801, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nNotFoundError (see above for traceback): Restoring from checkpoint failed. This is most likely due to a Variable name or other graph key that is missing from the checkpoint. Please ensure that you have not altered the graph expected based on the checkpoint. Original error:\r\n\r\nKey derain_net_loss/attentive_autoencoder_loss/autoencoder_inference/gn_1/beta not found in checkpoint\r\n\t [[node save/RestoreV2 (defined at tools/test_model.py:88) ]]\r\n\r\nThanks,","closed_by":{"login":"MaybeShewill-CV","id":15725187,"node_id":"MDQ6VXNlcjE1NzI1MTg3","avatar_url":"https://avatars.githubusercontent.com/u/15725187?v=4","gravatar_id":"","url":"https://api.github.com/users/MaybeShewill-CV","html_url":"https://github.com/MaybeShewill-CV","followers_url":"https://api.github.com/users/MaybeShewill-CV/followers","following_url":"https://api.github.com/users/MaybeShewill-CV/following{/other_user}","gists_url":"https://api.github.com/users/MaybeShewill-CV/gists{/gist_id}","starred_url":"https://api.github.com/users/MaybeShewill-CV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaybeShewill-CV/subscriptions","organizations_url":"https://api.github.com/users/MaybeShewill-CV/orgs","repos_url":"https://api.github.com/users/MaybeShewill-CV/repos","events_url":"https://api.github.com/users/MaybeShewill-CV/events{/privacy}","received_events_url":"https://api.github.com/users/MaybeShewill-CV/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/MaybeShewill-CV/attentive-gan-derainnet/issues/31/timeline","performed_via_github_app":null,"state_reason":"completed"}