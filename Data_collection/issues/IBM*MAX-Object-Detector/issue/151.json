{"url":"https://api.github.com/repos/IBM/MAX-Object-Detector/issues/151","repository_url":"https://api.github.com/repos/IBM/MAX-Object-Detector","labels_url":"https://api.github.com/repos/IBM/MAX-Object-Detector/issues/151/labels{/name}","comments_url":"https://api.github.com/repos/IBM/MAX-Object-Detector/issues/151/comments","events_url":"https://api.github.com/repos/IBM/MAX-Object-Detector/issues/151/events","html_url":"https://github.com/IBM/MAX-Object-Detector/issues/151","id":721472451,"node_id":"MDU6SXNzdWU3MjE0NzI0NTE=","number":151,"title":"POST returns sometimes HTTP code 500","user":{"login":"fabsenet","id":2065705,"node_id":"MDQ6VXNlcjIwNjU3MDU=","avatar_url":"https://avatars.githubusercontent.com/u/2065705?v=4","gravatar_id":"","url":"https://api.github.com/users/fabsenet","html_url":"https://github.com/fabsenet","followers_url":"https://api.github.com/users/fabsenet/followers","following_url":"https://api.github.com/users/fabsenet/following{/other_user}","gists_url":"https://api.github.com/users/fabsenet/gists{/gist_id}","starred_url":"https://api.github.com/users/fabsenet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fabsenet/subscriptions","organizations_url":"https://api.github.com/users/fabsenet/orgs","repos_url":"https://api.github.com/users/fabsenet/repos","events_url":"https://api.github.com/users/fabsenet/events{/privacy}","received_events_url":"https://api.github.com/users/fabsenet/received_events","type":"User","site_admin":false},"labels":[{"id":862104486,"node_id":"MDU6TGFiZWw4NjIxMDQ0ODY=","url":"https://api.github.com/repos/IBM/MAX-Object-Detector/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-10-14T13:43:08Z","updated_at":"2020-10-16T12:06:10Z","closed_at":"2020-10-16T11:27:15Z","author_association":"NONE","active_lock_reason":null,"body":"I have a nodered flow which fetches screenshots from security cameras and POSTing them to this docker image running in docker under windows. most of the time, it just works as expected and other times it returns an error 500. \r\n\r\nI cannot even tell whether I am doing it somehow wrong or if there is a bug in this docker container. Can you guys help me somehow? Where should I go from here?\r\n\r\nThe docker log shows this:\r\n\r\n```\r\n172.17.0.1 - - [14/Oct/2020 11:23:32] \"POST /model/predict HTTP/1.1\" 200 -\r\n172.17.0.1 - - [14/Oct/2020 11:27:35] \"POST /model/predict HTTP/1.1\" 200 -\r\n172.17.0.1 - - [14/Oct/2020 11:27:38] \"POST /model/predict HTTP/1.1\" 200 -\r\n172.17.0.1 - - [14/Oct/2020 11:28:28] \"POST /model/predict HTTP/1.1\" 200 -\r\n[2020-10-14 11:30:53,323] ERROR in app: Exception on /model/predict [POST]\r\nTraceback (most recent call last):\r\nFile \"/opt/conda/lib/python3.7/site-packages/flask/app.py\", line 1950, in full_dispatch_request\r\nrv = self.dispatch_request()\r\nFile \"/opt/conda/lib/python3.7/site-packages/flask/app.py\", line 1936, in dispatch_request\r\nreturn self.view_functions[rule.endpoint](**req.view_args)\r\nFile \"/opt/conda/lib/python3.7/site-packages/flask_restplus/api.py\", line 319, in wrapper\r\nresp = resource(*args, **kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/flask/views.py\", line 89, in view\r\nreturn self.dispatch_request(*args, **kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/flask_restplus/resource.py\", line 44, in dispatch_request\r\nresp = meth(*args, **kwargs)\r\nFile \"/opt/conda/lib/python3.7/site-packages/flask_restplus/marshalling.py\", line 136, in wrapper\r\nresp = f(*args, **kwargs)\r\nFile \"/workspace/api/predict.py\", line 89, in post\r\nimage = model_wrapper._read_image(image_data)\r\nFile \"/workspace/core/model.py\", line 62, in _read_image\r\nimage = Image.open(io.BytesIO(image_data)).convert(\"RGB\")\r\nFile \"/opt/conda/lib/python3.7/site-packages/PIL/Image.py\", line 2818, in open\r\nraise IOError(\"cannot identify image file %r\" % (filename if filename else fp))\r\nOSError: cannot identify image file <_io.BytesIO object at 0x7f8394db9d70>\r\n172.17.0.1 - - [14/Oct/2020 11:30:53] \"POST /model/predict HTTP/1.1\" 500 -\r\n```","closed_by":{"login":"fabsenet","id":2065705,"node_id":"MDQ6VXNlcjIwNjU3MDU=","avatar_url":"https://avatars.githubusercontent.com/u/2065705?v=4","gravatar_id":"","url":"https://api.github.com/users/fabsenet","html_url":"https://github.com/fabsenet","followers_url":"https://api.github.com/users/fabsenet/followers","following_url":"https://api.github.com/users/fabsenet/following{/other_user}","gists_url":"https://api.github.com/users/fabsenet/gists{/gist_id}","starred_url":"https://api.github.com/users/fabsenet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fabsenet/subscriptions","organizations_url":"https://api.github.com/users/fabsenet/orgs","repos_url":"https://api.github.com/users/fabsenet/repos","events_url":"https://api.github.com/users/fabsenet/events{/privacy}","received_events_url":"https://api.github.com/users/fabsenet/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/IBM/MAX-Object-Detector/issues/151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/IBM/MAX-Object-Detector/issues/151/timeline","performed_via_github_app":null,"state_reason":"completed"}