[{"url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/comments/495938967","html_url":"https://github.com/Pattio/DeepSwarm/issues/6#issuecomment-495938967","issue_url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/6","id":495938967,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTkzODk2Nw==","user":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false},"created_at":"2019-05-25T18:28:57Z","updated_at":"2019-05-25T18:28:57Z","author_association":"OWNER","body":"What is the problem with evaluating the model by averaging batches? Sure the results might be slightly different due to the floating point error, but isn't negligible?  Furthermore, Keras `evaluate` method has `batch_size` argument which allows you to change the batch size i.e. you could set it to 1.","reactions":{"url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/comments/495938967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/comments/495942341","html_url":"https://github.com/Pattio/DeepSwarm/issues/6#issuecomment-495942341","issue_url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/6","id":495942341,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTk0MjM0MQ==","user":{"login":"isaacgerg","id":11971499,"node_id":"MDQ6VXNlcjExOTcxNDk5","avatar_url":"https://avatars.githubusercontent.com/u/11971499?v=4","gravatar_id":"","url":"https://api.github.com/users/isaacgerg","html_url":"https://github.com/isaacgerg","followers_url":"https://api.github.com/users/isaacgerg/followers","following_url":"https://api.github.com/users/isaacgerg/following{/other_user}","gists_url":"https://api.github.com/users/isaacgerg/gists{/gist_id}","starred_url":"https://api.github.com/users/isaacgerg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isaacgerg/subscriptions","organizations_url":"https://api.github.com/users/isaacgerg/orgs","repos_url":"https://api.github.com/users/isaacgerg/repos","events_url":"https://api.github.com/users/isaacgerg/events{/privacy}","received_events_url":"https://api.github.com/users/isaacgerg/received_events","type":"User","site_admin":false},"created_at":"2019-05-25T19:20:18Z","updated_at":"2019-05-25T19:26:57Z","author_association":"NONE","body":"Not all metrics can be evaluated properly in batches and averages. Area under the reciever operating curve (auc roc) is a popular metric which you have to compute over the whole validation set and not average over batches. Average over batches will be wildly inaccurate or undefined. For example, say your validation set has 2 classes which are imbalanced, a common setup, some batches may not have both classes so computing the auc is undefined.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/comments/495942341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"isaacgerg","id":11971499,"node_id":"MDQ6VXNlcjExOTcxNDk5","avatar_url":"https://avatars.githubusercontent.com/u/11971499?v=4","gravatar_id":"","url":"https://api.github.com/users/isaacgerg","html_url":"https://github.com/isaacgerg","followers_url":"https://api.github.com/users/isaacgerg/followers","following_url":"https://api.github.com/users/isaacgerg/following{/other_user}","gists_url":"https://api.github.com/users/isaacgerg/gists{/gist_id}","starred_url":"https://api.github.com/users/isaacgerg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isaacgerg/subscriptions","organizations_url":"https://api.github.com/users/isaacgerg/orgs","repos_url":"https://api.github.com/users/isaacgerg/repos","events_url":"https://api.github.com/users/isaacgerg/events{/privacy}","received_events_url":"https://api.github.com/users/isaacgerg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/comments/496002799","html_url":"https://github.com/Pattio/DeepSwarm/issues/6#issuecomment-496002799","issue_url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/6","id":496002799,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjAwMjc5OQ==","user":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false},"created_at":"2019-05-26T13:59:54Z","updated_at":"2019-05-26T13:59:54Z","author_association":"OWNER","body":"Oh, I see thatâ€™s a good point! In that case I think it would be better to introduce a new metric (roc auc) and then refactor all available metrics (accuracy, loss, roc auc) to a separate class `Metrics` which would be returned by `evaluate` method. This refactored `evaluate` method could internally call your proposed method to receive the labels and then if needed calculate roc auc using `sklearn.metrics.roc_auc_score` or `tf.metrics.auc`. \r\n\r\nHowever, this means that we should also refactor `create_early_stop_callback` and `create_checkpoint_callback` to use newly introduced metrics. Furthermore, few places where `cfg['metrics']` is used should be also refactored accordingly. \r\n\r\nI'll add this request for new metrics to the roadmap, however, feel free to create your own PR.","reactions":{"url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/comments/496002799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false}},{"id":2367829504,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzNjc4Mjk1MDQ=","url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/events/2367829504","actor":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-05-26T14:00:07Z","label":{"name":"Priority: Medium","color":"f1c40f"},"performed_via_github_app":null},{"id":2367829505,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzNjc4Mjk1MDU=","url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/events/2367829505","actor":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-05-26T14:00:07Z","label":{"name":"Status: Accepted","color":"2ecc71"},"performed_via_github_app":null},{"id":2367829506,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzNjc4Mjk1MDY=","url":"https://api.github.com/repos/Pattio/DeepSwarm/issues/events/2367829506","actor":{"login":"Pattio","id":9087174,"node_id":"MDQ6VXNlcjkwODcxNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9087174?v=4","gravatar_id":"","url":"https://api.github.com/users/Pattio","html_url":"https://github.com/Pattio","followers_url":"https://api.github.com/users/Pattio/followers","following_url":"https://api.github.com/users/Pattio/following{/other_user}","gists_url":"https://api.github.com/users/Pattio/gists{/gist_id}","starred_url":"https://api.github.com/users/Pattio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pattio/subscriptions","organizations_url":"https://api.github.com/users/Pattio/orgs","repos_url":"https://api.github.com/users/Pattio/repos","events_url":"https://api.github.com/users/Pattio/events{/privacy}","received_events_url":"https://api.github.com/users/Pattio/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-05-26T14:00:07Z","label":{"name":"Type: Enhancement","color":"74b9ff"},"performed_via_github_app":null}]