[{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/427909581","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/16#issuecomment-427909581","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/16","id":427909581,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzkwOTU4MQ==","user":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"created_at":"2018-10-08T17:05:46Z","updated_at":"2018-10-08T17:05:46Z","author_association":"OWNER","body":"Yes, during policy gradient RL we have to use the sampled sentence as the input rather than ground-truth that's why we provided scheduled sampling mechanism in this library. Therefore, during RL training a good practice is to activate scheduled sampling by setting \"scheduled_sampling\" parameter to True and set the \"sampling_probability\" and \"fixed_sampling_probability\" parameters to 1.0 and True, respectively so that model input completely comes from the sampled sentence rather than ground-truth.\r\nMoreover, if you want to gradually increase the scheduled sampling during your training, you can set \"fixed_sampling_probability\" parameter to False and start with a low \"sampling_probability\". The model will increase this probability linearly such that for instance if you want your model to be trained 1000 time, setting this parameter to 1E-03 will tell the model to sample from sampled sentence with probability 1E-03 in the beginning of the training but as we get to iteration 1000, sample with probability 1000*1E-03=1.","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/427909581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/428422074","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/16#issuecomment-428422074","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/16","id":428422074,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODQyMjA3NA==","user":{"login":"Weili-NLP","id":25901705,"node_id":"MDQ6VXNlcjI1OTAxNzA1","avatar_url":"https://avatars.githubusercontent.com/u/25901705?v=4","gravatar_id":"","url":"https://api.github.com/users/Weili-NLP","html_url":"https://github.com/Weili-NLP","followers_url":"https://api.github.com/users/Weili-NLP/followers","following_url":"https://api.github.com/users/Weili-NLP/following{/other_user}","gists_url":"https://api.github.com/users/Weili-NLP/gists{/gist_id}","starred_url":"https://api.github.com/users/Weili-NLP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Weili-NLP/subscriptions","organizations_url":"https://api.github.com/users/Weili-NLP/orgs","repos_url":"https://api.github.com/users/Weili-NLP/repos","events_url":"https://api.github.com/users/Weili-NLP/events{/privacy}","received_events_url":"https://api.github.com/users/Weili-NLP/received_events","type":"User","site_admin":false},"created_at":"2018-10-10T03:03:02Z","updated_at":"2018-10-10T06:34:12Z","author_association":"NONE","body":"Thanks for your kind reply @yaserkl . It helps me a lot.\r\n\r\nI think the \"scheduled_sampling\" is a wonderful design. However, the decoder will do sampling twice in each decoding step during RL training: one is for generating the input (line 331-334 in attention_decoder.py), another is for generating the sample sequence (line 407-410). How do you guarantee the two sampling operation get the same sample_ids, since the input must be the previous token in the sample sequence? \r\n\r\nMoreover, the sample sequence and greedy sequence are generated simultaneously (line 407-413). However, I think when generating the greedy sequence, the input should be the previous token in the greedy sequence. How do you realize that both the sample sequence and greedy sequence are generated simultaneously with different inputs? I note that, in your code both the sample sequence and greedy sequence obtains the same input in each decoding step, which confuses me very much.\r\n\r\nLooking forward to your reply! Thanks!","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/428422074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Weili-NLP","id":25901705,"node_id":"MDQ6VXNlcjI1OTAxNzA1","avatar_url":"https://avatars.githubusercontent.com/u/25901705?v=4","gravatar_id":"","url":"https://api.github.com/users/Weili-NLP","html_url":"https://github.com/Weili-NLP","followers_url":"https://api.github.com/users/Weili-NLP/followers","following_url":"https://api.github.com/users/Weili-NLP/following{/other_user}","gists_url":"https://api.github.com/users/Weili-NLP/gists{/gist_id}","starred_url":"https://api.github.com/users/Weili-NLP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Weili-NLP/subscriptions","organizations_url":"https://api.github.com/users/Weili-NLP/orgs","repos_url":"https://api.github.com/users/Weili-NLP/repos","events_url":"https://api.github.com/users/Weili-NLP/events{/privacy}","received_events_url":"https://api.github.com/users/Weili-NLP/received_events","type":"User","site_admin":false}},{"id":1894410153,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTg5NDQxMDE1Mw==","url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/events/1894410153","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-10T03:03:02Z","performed_via_github_app":null},{"id":1894410154,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE4OTQ0MTAxNTQ=","url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/events/1894410154","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-10T03:03:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/429405439","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/16#issuecomment-429405439","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/16","id":429405439,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTQwNTQzOQ==","user":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"created_at":"2018-10-12T17:44:59Z","updated_at":"2018-10-12T17:44:59Z","author_association":"OWNER","body":"To answer your first question, since at each step of decoding, we only sample one token (either in line 331 or line 407) and our sampler has a specific seed value, it guarantees that we get the same token in both lines. However, I believe that this could be better designed to do the sampling once to make it less confusing.\r\nRegarding your second question, the greedy selection during training should be taken from the same distribution that we use for sampling. Therefore, it is not required to pass a separate token chosen by greedy selection from previous decoder unit to select our greedy sentence. This will make the back-propagation of error very confusion since model would then require to back-propagate twice, one for the sequence selected by only sampling and again for sequence selected by greedy. To ease all this, we choose two different tokens at each decoding step: a greedy token and a sampling one, and feed the sampling one to the next decoder as input during scheduled sampling.","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/429405439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/429540255","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/16#issuecomment-429540255","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/16","id":429540255,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTU0MDI1NQ==","user":{"login":"Weili-NLP","id":25901705,"node_id":"MDQ6VXNlcjI1OTAxNzA1","avatar_url":"https://avatars.githubusercontent.com/u/25901705?v=4","gravatar_id":"","url":"https://api.github.com/users/Weili-NLP","html_url":"https://github.com/Weili-NLP","followers_url":"https://api.github.com/users/Weili-NLP/followers","following_url":"https://api.github.com/users/Weili-NLP/following{/other_user}","gists_url":"https://api.github.com/users/Weili-NLP/gists{/gist_id}","starred_url":"https://api.github.com/users/Weili-NLP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Weili-NLP/subscriptions","organizations_url":"https://api.github.com/users/Weili-NLP/orgs","repos_url":"https://api.github.com/users/Weili-NLP/repos","events_url":"https://api.github.com/users/Weili-NLP/events{/privacy}","received_events_url":"https://api.github.com/users/Weili-NLP/received_events","type":"User","site_admin":false},"created_at":"2018-10-13T13:03:40Z","updated_at":"2018-10-13T13:03:59Z","author_association":"NONE","body":"Thank you very much for answering my questions tirelessly @yaserkl.\r\n\r\nIt's a great idea to choose the sampling token as input to generate both the sample sequence and greedy sequence. I got bad results when using sampling token as input for generating the sample sequence and greedy token as input for the greedy sequence separately.","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/429540255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Weili-NLP","id":25901705,"node_id":"MDQ6VXNlcjI1OTAxNzA1","avatar_url":"https://avatars.githubusercontent.com/u/25901705?v=4","gravatar_id":"","url":"https://api.github.com/users/Weili-NLP","html_url":"https://github.com/Weili-NLP","followers_url":"https://api.github.com/users/Weili-NLP/followers","following_url":"https://api.github.com/users/Weili-NLP/following{/other_user}","gists_url":"https://api.github.com/users/Weili-NLP/gists{/gist_id}","starred_url":"https://api.github.com/users/Weili-NLP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Weili-NLP/subscriptions","organizations_url":"https://api.github.com/users/Weili-NLP/orgs","repos_url":"https://api.github.com/users/Weili-NLP/repos","events_url":"https://api.github.com/users/Weili-NLP/events{/privacy}","received_events_url":"https://api.github.com/users/Weili-NLP/received_events","type":"User","site_admin":false}},{"id":1902156423,"node_id":"MDExOkNsb3NlZEV2ZW50MTkwMjE1NjQyMw==","url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/events/1902156423","actor":{"login":"Weili-NLP","id":25901705,"node_id":"MDQ6VXNlcjI1OTAxNzA1","avatar_url":"https://avatars.githubusercontent.com/u/25901705?v=4","gravatar_id":"","url":"https://api.github.com/users/Weili-NLP","html_url":"https://github.com/Weili-NLP","followers_url":"https://api.github.com/users/Weili-NLP/followers","following_url":"https://api.github.com/users/Weili-NLP/following{/other_user}","gists_url":"https://api.github.com/users/Weili-NLP/gists{/gist_id}","starred_url":"https://api.github.com/users/Weili-NLP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Weili-NLP/subscriptions","organizations_url":"https://api.github.com/users/Weili-NLP/orgs","repos_url":"https://api.github.com/users/Weili-NLP/repos","events_url":"https://api.github.com/users/Weili-NLP/events{/privacy}","received_events_url":"https://api.github.com/users/Weili-NLP/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-10-13T13:03:40Z","state_reason":null,"performed_via_github_app":null},{"id":1902156424,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwMjE1NjQyNA==","url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/events/1902156424","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-13T13:03:40Z","performed_via_github_app":null},{"id":1902156426,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDIxNTY0MjY=","url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/events/1902156426","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-13T13:03:40Z","performed_via_github_app":null}]