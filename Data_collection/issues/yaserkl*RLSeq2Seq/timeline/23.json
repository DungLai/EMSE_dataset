[{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/447153678","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/23#issuecomment-447153678","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/23","id":447153678,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzE1MzY3OA==","user":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"created_at":"2018-12-13T23:05:34Z","updated_at":"2018-12-13T23:05:34Z","author_association":"OWNER","body":"No, this issue is [well-discussed](https://github.com/abisee/pointer-generator/issues/12) in the original pointer-generator model page.\r\nEvery time you run this model, it will generate a different result due to the multi-processing batching used in this model.\r\nThe only solution that I usually use for fixing my model parameters is to use 1 queue for batching and make sure to use seed for randomizers throughout the framework.\r\nTry setting these parameters to 1:\r\nexample_queue_threads\r\nbatch_queue_threads\r\n\r\nIf you vary the seed parameter, you might manage to get even better result than the original paper. I've got better result myself as presented in our [latest paper](https://arxiv.org/pdf/1810.06667.pdf).\r\n\r\nMy personal experience is that the running average loss (at least the way it is defined in this paper) is not the best indicator for selecting the best evaluation model. In the above paper, I'm using the average ROUGE reward during evals as another way of saving my best model and it sometimes work better the running average loss.","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/447153678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/448125003","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/23#issuecomment-448125003","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/23","id":448125003,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODEyNTAwMw==","user":{"login":"gm0616","id":17587133,"node_id":"MDQ6VXNlcjE3NTg3MTMz","avatar_url":"https://avatars.githubusercontent.com/u/17587133?v=4","gravatar_id":"","url":"https://api.github.com/users/gm0616","html_url":"https://github.com/gm0616","followers_url":"https://api.github.com/users/gm0616/followers","following_url":"https://api.github.com/users/gm0616/following{/other_user}","gists_url":"https://api.github.com/users/gm0616/gists{/gist_id}","starred_url":"https://api.github.com/users/gm0616/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gm0616/subscriptions","organizations_url":"https://api.github.com/users/gm0616/orgs","repos_url":"https://api.github.com/users/gm0616/repos","events_url":"https://api.github.com/users/gm0616/events{/privacy}","received_events_url":"https://api.github.com/users/gm0616/received_events","type":"User","site_admin":false},"created_at":"2018-12-18T07:38:06Z","updated_at":"2018-12-18T07:38:06Z","author_association":"NONE","body":"Well, thanks for your response, I`ll try the methods you have mentioned above to manage with coverage mechanism.  \r\nYou said you use ROUGE reward during evals. As far as I know, the calculation of ROUGE is quite slow, how to implement this metric to evaluate a certain ckpt? And which ROUGE metric you use for evaluation? 1, 2, or L ?","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/448125003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gm0616","id":17587133,"node_id":"MDQ6VXNlcjE3NTg3MTMz","avatar_url":"https://avatars.githubusercontent.com/u/17587133?v=4","gravatar_id":"","url":"https://api.github.com/users/gm0616","html_url":"https://github.com/gm0616","followers_url":"https://api.github.com/users/gm0616/followers","following_url":"https://api.github.com/users/gm0616/following{/other_user}","gists_url":"https://api.github.com/users/gm0616/gists{/gist_id}","starred_url":"https://api.github.com/users/gm0616/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gm0616/subscriptions","organizations_url":"https://api.github.com/users/gm0616/orgs","repos_url":"https://api.github.com/users/gm0616/repos","events_url":"https://api.github.com/users/gm0616/events{/privacy}","received_events_url":"https://api.github.com/users/gm0616/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/449864468","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/23#issuecomment-449864468","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/23","id":449864468,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTg2NDQ2OA==","user":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false},"created_at":"2018-12-25T17:28:49Z","updated_at":"2018-12-25T17:28:49Z","author_association":"OWNER","body":"Yes, it's quite slow and will increase the evaluation time per batch by two to three times (without ROUGE based eval, each evaluation will take around 0.5 sec on a P100 GPU with batch size 8, but with ROUGE it rise up to 1.5 secs which is still fine for my case). Also, I'm using ROUGE L to get the best training ckpt.","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/449864468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaserkl","id":6896361,"node_id":"MDQ6VXNlcjY4OTYzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/6896361?v=4","gravatar_id":"","url":"https://api.github.com/users/yaserkl","html_url":"https://github.com/yaserkl","followers_url":"https://api.github.com/users/yaserkl/followers","following_url":"https://api.github.com/users/yaserkl/following{/other_user}","gists_url":"https://api.github.com/users/yaserkl/gists{/gist_id}","starred_url":"https://api.github.com/users/yaserkl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaserkl/subscriptions","organizations_url":"https://api.github.com/users/yaserkl/orgs","repos_url":"https://api.github.com/users/yaserkl/repos","events_url":"https://api.github.com/users/yaserkl/events{/privacy}","received_events_url":"https://api.github.com/users/yaserkl/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/507200788","html_url":"https://github.com/yaserkl/RLSeq2Seq/issues/23#issuecomment-507200788","issue_url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/23","id":507200788,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzIwMDc4OA==","user":{"login":"xiangriconglin","id":27547466,"node_id":"MDQ6VXNlcjI3NTQ3NDY2","avatar_url":"https://avatars.githubusercontent.com/u/27547466?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangriconglin","html_url":"https://github.com/xiangriconglin","followers_url":"https://api.github.com/users/xiangriconglin/followers","following_url":"https://api.github.com/users/xiangriconglin/following{/other_user}","gists_url":"https://api.github.com/users/xiangriconglin/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangriconglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangriconglin/subscriptions","organizations_url":"https://api.github.com/users/xiangriconglin/orgs","repos_url":"https://api.github.com/users/xiangriconglin/repos","events_url":"https://api.github.com/users/xiangriconglin/events{/privacy}","received_events_url":"https://api.github.com/users/xiangriconglin/received_events","type":"User","site_admin":false},"created_at":"2019-07-01T10:01:59Z","updated_at":"2019-07-01T10:01:59Z","author_association":"NONE","body":"> No, this issue is [well-discussed](https://github.com/abisee/pointer-generator/issues/12) in the original pointer-generator model page.\r\n> Every time you run this model, it will generate a different result due to the multi-processing batching used in this model.\r\n> The only solution that I usually use for fixing my model parameters is to use 1 queue for batching and make sure to use seed for randomizers throughout the framework.\r\n> Try setting these parameters to 1:\r\n> example_queue_threads\r\n> batch_queue_threads\r\n> \r\n> If you vary the seed parameter, you might manage to get even better result than the original paper. I've got better result myself as presented in our [latest paper](https://arxiv.org/pdf/1810.06667.pdf).\r\n> \r\n> My personal experience is that the running average loss (at least the way it is defined in this paper) is not the best indicator for selecting the best evaluation model. In the above paper, I'm using the average ROUGE reward during evals as another way of saving my best model and it sometimes work better the running average loss.\r\n\r\nExcuse me,\r\nWhen evaluating, is it necessary to add the train_operation to run?\r\nThe function def run_train_steps() is:\r\nto_return = {\r\n        'train_op': self._shared_train_op,\r\n        'summaries': self._summaries,\r\n        'pgen_loss': self._pgen_loss,\r\n        'global_step': self.global_step,\r\n        'decoder_outputs': self.decoder_outputs\r\n    }\r\nHowever, def run_eval_steps() is:\r\nto_return = {\r\n        'summaries': self._summaries,\r\n        'pgen_loss': self._pgen_loss,\r\n        'global_step': self.global_step,\r\n        'decoder_outputs': self.decoder_outputs\r\n    }\r\nWhen i ran eval steps, the model did not update and the average loss kept same. Is anything wrong in my running process?\r\nExpect for replying, thank you very much.","reactions":{"url":"https://api.github.com/repos/yaserkl/RLSeq2Seq/issues/comments/507200788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xiangriconglin","id":27547466,"node_id":"MDQ6VXNlcjI3NTQ3NDY2","avatar_url":"https://avatars.githubusercontent.com/u/27547466?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangriconglin","html_url":"https://github.com/xiangriconglin","followers_url":"https://api.github.com/users/xiangriconglin/followers","following_url":"https://api.github.com/users/xiangriconglin/following{/other_user}","gists_url":"https://api.github.com/users/xiangriconglin/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangriconglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangriconglin/subscriptions","organizations_url":"https://api.github.com/users/xiangriconglin/orgs","repos_url":"https://api.github.com/users/xiangriconglin/repos","events_url":"https://api.github.com/users/xiangriconglin/events{/privacy}","received_events_url":"https://api.github.com/users/xiangriconglin/received_events","type":"User","site_admin":false}}]