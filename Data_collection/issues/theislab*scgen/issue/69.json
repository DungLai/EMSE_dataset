{"url":"https://api.github.com/repos/theislab/scgen/issues/69","repository_url":"https://api.github.com/repos/theislab/scgen","labels_url":"https://api.github.com/repos/theislab/scgen/issues/69/labels{/name}","comments_url":"https://api.github.com/repos/theislab/scgen/issues/69/comments","events_url":"https://api.github.com/repos/theislab/scgen/issues/69/events","html_url":"https://github.com/theislab/scgen/issues/69","id":1227918965,"node_id":"I_kwDOCYJwDM5JMI51","number":69,"title":"labels_key mismatch in scgen.SCGEN.setup_anndata()","user":{"login":"johnjeang","id":79479105,"node_id":"MDQ6VXNlcjc5NDc5MTA1","avatar_url":"https://avatars.githubusercontent.com/u/79479105?v=4","gravatar_id":"","url":"https://api.github.com/users/johnjeang","html_url":"https://github.com/johnjeang","followers_url":"https://api.github.com/users/johnjeang/followers","following_url":"https://api.github.com/users/johnjeang/following{/other_user}","gists_url":"https://api.github.com/users/johnjeang/gists{/gist_id}","starred_url":"https://api.github.com/users/johnjeang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnjeang/subscriptions","organizations_url":"https://api.github.com/users/johnjeang/orgs","repos_url":"https://api.github.com/users/johnjeang/repos","events_url":"https://api.github.com/users/johnjeang/events{/privacy}","received_events_url":"https://api.github.com/users/johnjeang/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-05-06T14:10:17Z","updated_at":"2022-05-06T14:10:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello, I am trying to run batch correction on some single-cell RNAseq data.  This data has some cell type labels, so I thought the scGEN method would be a good fit.\r\n\r\nFor reference I am following the google colab tutorial here https://colab.research.google.com/github/theislab/scgen/blob/master/docs/tutorials/scgen_batch_removal.ipynb#scrollTo=OMMhgkQlpb8s\r\n\r\nWhen trying to run \r\n\r\n`\r\nscgen.SCGEN.setup_anndata(train, batch_key=\"source\", labels_key=\"cell_type\")\r\n`\r\n\r\nI get the following error related to my labels that indicates some kind of mismatch.  The label names are actually the same, but it looks like there is some data structure issue causing this mismatch error?\r\n\r\n`\r\nValueError: Making .obs[\"cell_type\"] categorical failed. Expected categories: ['astro' 'endothelial' 'microglia' 'neuron' 'oligo' 'opc' 'tcell'\r\n 'unknown']. Received categories: Index(['astro', 'endothelial', 'microglia', 'neuron', 'oligo', 'opc', 'tcell',\r\n       'unknown'],\r\n      dtype='object'). \r\n`\r\n\r\nI am working in \r\nPython 3.8.3\r\nscanpy 1.9.1\r\nscgen 2.1.0\r\n\r\nAny ideas on how to solve this issue?","closed_by":null,"reactions":{"url":"https://api.github.com/repos/theislab/scgen/issues/69/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/theislab/scgen/issues/69/timeline","performed_via_github_app":null,"state_reason":null}