{"url":"https://api.github.com/repos/theislab/scgen/issues/4","repository_url":"https://api.github.com/repos/theislab/scgen","labels_url":"https://api.github.com/repos/theislab/scgen/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/theislab/scgen/issues/4/comments","events_url":"https://api.github.com/repos/theislab/scgen/issues/4/events","html_url":"https://github.com/theislab/scgen/issues/4","id":462481441,"node_id":"MDU6SXNzdWU0NjI0ODE0NDE=","number":4,"title":"batch_remove() function do not return cell name, only gene name in normalized matrix","user":{"login":"nhuhoa","id":8064672,"node_id":"MDQ6VXNlcjgwNjQ2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8064672?v=4","gravatar_id":"","url":"https://api.github.com/users/nhuhoa","html_url":"https://github.com/nhuhoa","followers_url":"https://api.github.com/users/nhuhoa/followers","following_url":"https://api.github.com/users/nhuhoa/following{/other_user}","gists_url":"https://api.github.com/users/nhuhoa/gists{/gist_id}","starred_url":"https://api.github.com/users/nhuhoa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nhuhoa/subscriptions","organizations_url":"https://api.github.com/users/nhuhoa/orgs","repos_url":"https://api.github.com/users/nhuhoa/repos","events_url":"https://api.github.com/users/nhuhoa/events{/privacy}","received_events_url":"https://api.github.com/users/nhuhoa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-07-01T02:24:28Z","updated_at":"2019-08-12T19:10:25Z","closed_at":"2019-08-12T19:10:25Z","author_association":"NONE","active_lock_reason":null,"body":"Dear Naghipourfar and M0hammadL,\r\nI encountered another bug with scGen in the \"batch_removal\" function. I tested this function one month ago. I am not sure if you have fixed it or not. So I just want to let you know here. \r\nThe batch_removal() function in utils.py return a normalized matrix without cell names, only gene names. For visualization tSNE, UMAP, clustering of this normalized matrix, there are no problem. But if you want to use these cells for downstream analysis, we need cells name. \r\n\r\nI tested program with 2 batches. I fixed this bug by adding an observation adata.obs['cell_name'] to keep cells name. But I think you can do it better. \r\nadata_latent.obs[\"cell_name\"] = adata.obs[\"cell_name\"].tolist()\r\ncorrected.obs[\"cell_name\"] = all_shared_ann.obs[\"cell_name\"].tolist()\r\ncorrected.obs[\"cell_name\"] = all_shared_ann.obs[\"cell_name\"].tolist() + all_not_shared_ann.obs[\r\n            \"cell_name\"].tolist()\r\ncorrected.obs_names = corrected.obs['cell_name']\r\n\r\n\r\nThanks, \r\nBest, \r\nHoa Tran\r\n","closed_by":{"login":"Naghipourfar","id":16001761,"node_id":"MDQ6VXNlcjE2MDAxNzYx","avatar_url":"https://avatars.githubusercontent.com/u/16001761?v=4","gravatar_id":"","url":"https://api.github.com/users/Naghipourfar","html_url":"https://github.com/Naghipourfar","followers_url":"https://api.github.com/users/Naghipourfar/followers","following_url":"https://api.github.com/users/Naghipourfar/following{/other_user}","gists_url":"https://api.github.com/users/Naghipourfar/gists{/gist_id}","starred_url":"https://api.github.com/users/Naghipourfar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Naghipourfar/subscriptions","organizations_url":"https://api.github.com/users/Naghipourfar/orgs","repos_url":"https://api.github.com/users/Naghipourfar/repos","events_url":"https://api.github.com/users/Naghipourfar/events{/privacy}","received_events_url":"https://api.github.com/users/Naghipourfar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/theislab/scgen/issues/4/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/theislab/scgen/issues/4/timeline","performed_via_github_app":null,"state_reason":"completed"}