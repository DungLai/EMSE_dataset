{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/24","repository_url":"https://api.github.com/repos/blmoistawinde/HarvestText","labels_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/24/comments","events_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/24/events","html_url":"https://github.com/blmoistawinde/HarvestText/issues/24","id":714774119,"node_id":"MDU6SXNzdWU3MTQ3NzQxMTk=","number":24,"title":"新词发现的结果质量问题","user":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-10-05T11:55:53Z","updated_at":"2020-10-08T09:28:29Z","closed_at":"2020-10-08T09:28:29Z","author_association":"OWNER","active_lock_reason":null,"body":"**描述你想要的功能**\r\n\r\n一封邮件反馈问题：\r\n![image](https://user-images.githubusercontent.com/32953014/95073104-df42dd00-073e-11eb-832e-96b84fa11f5f.png)\r\n可见图一中，我们新词发现的期待值为“喜宝”，实际结果也返回了“喜宝”，但却有两个无关项。\r\n\r\n![image](https://user-images.githubusercontent.com/32953014/95073145-e964db80-073e-11eb-87dd-928ab51c7e5e.png)\r\n图二中对新词的识别效果就明显不行了，连“自己”、“没有”、“跳舞”这样的词也判定为新词\r\n\r\n两个例子中的共同问题是识别出了不希望出现的结果，即，算法的**准确**问题。\r\n\r\n图二的例子中，所有结果都不是理想的结果，即，算法的**召回**问题。\r\n\r\n**可能解决方案**\r\n\r\n**准确问题**\r\n\r\n要想解决准确问题，只要过滤掉“不好”的结果就可以了。\r\n\r\n过滤功能实际上本库已经实现了，可以使用`excluding_words`参数，在其中设定不想要出现的单词列表/集合等即可。\r\n\r\n问题是如何定义“不好”的结果，这里大概可以提供两种设想：\r\n\r\n1. 停用词\r\n2. 旧词，即词典中的常见单词\r\n\r\n如果只是使用停用词，本库现在已经可以完成整个流程：\r\n\r\n```\r\nfrom harvesttext import HarvestText\r\nfrom harvesttext.resources import get_baidu_stopwords\r\n\r\nht = HarvestText()\r\nstopwords = get_baidu_stopwords()\r\ntext = \"这里填入你的文本\"\r\nnew_words_info = ht.word_discover(para, excluding_words=stopwords)  # 这里过滤了停用词\r\nnew_words = new_words_info.index.tolist()\r\n```\r\n\r\n如果要过滤旧词，本库还需要引入外部词典。\r\n\r\n**召回问题**\r\n\r\n召回问题，可能可以通过获得更多词语来缓解。这可以通过调整参数来实现，这个函数有这些参数可以调整：\r\n\r\n```\r\n:param max_word_len: 允许被发现的最长的新词长度\r\n:param min_freq: 被发现的新词，在给定文本中需要达到的最低频率\r\n:param min_entropy: 被发现的新词，在给定文本中需要达到的最低左右交叉熵\r\n:param min_aggregation: 被发现的新词，在给定文本中需要达到的最低凝聚度\r\n```\r\n第一项容易理解，后面三项涉及[算法原理](http://www.matrix67.com/blog/archives/5044)，不过简单地说，都是越低，能发现的词就越多，不过太低就会引入更多错误结果，出现上一类问题。\r\n\r\n要调参获得更多词语的话，首先要设置`auto_param=False`，然后，可以在默认参数的基础上往下调，下面的默认的参数：\r\n```\r\nmin_entropy = np.log(length) / 10\r\nmin_freq = min(0.00005, 20.0 / length)\r\nmin_aggregation = np.sqrt(length) / 15\r\n```\r\n\r\n**未来改进计划**\r\n\r\n- [x] 将停用词设为默认过滤词\r\n\r\n- [x] 引入外部词典，允许方便地过滤旧词\r\n\r\n- [x] 上面的操作在readme和文档中还不明确，需要完善\r\n\r\n\r\n\r\n","closed_by":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/24/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/24/timeline","performed_via_github_app":null,"state_reason":"completed"}