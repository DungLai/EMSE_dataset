[{"id":3880973296,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4ODA5NzMyOTY=","url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/events/3880973296","actor":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"f4a1951da573f4f4939f490a49fded349e30052e","commit_url":"https://api.github.com/repos/blmoistawinde/HarvestText/commits/f4a1951da573f4f4939f490a49fded349e30052e","created_at":"2020-10-15T11:19:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/709215702","html_url":"https://github.com/blmoistawinde/HarvestText/issues/26#issuecomment-709215702","issue_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/26","id":709215702,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTIxNTcwMg==","user":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"created_at":"2020-10-15T11:22:50Z","updated_at":"2020-10-15T11:22:50Z","author_association":"OWNER","body":"主要的问题类型应该已经修复了，我找到了几个类似的例子，可以见 https://github.com/blmoistawinde/HarvestText/blob/master/tests/hard_text_cleaning.py\r\n```\r\n清洗前： ['捧杀！干得漂亮！[doge] \\\\u200b\\\\u200b\\\\u200b']\r\n清洗后： ['捧杀！干得漂亮！']\r\n清洗前： ['捧杀！干得漂亮！[doge] \\u200b\\u200b\\u200b']\r\n清洗后： ['捧杀！干得漂亮！']\r\n清洗前： ['#缺钱找新浪# 瞎找不良网贷不如用新浪官方借款，不查负债不填联系人。  http://t.cn/A643boyi \\n新浪[浪]用户专享福利，[浪]新浪 \r\n产品用的越久额度越高，借万元日利率最低至0.03%，最长可分12期慢慢还！ http://t.cn/A643bojv  http://t.cn/A643bKHS \\u200b\\u200b\\u200b'] \r\n清洗后： ['#缺钱找新浪# 瞎找不良网贷不如用新浪官方借款，不查负债不填联系人。\\n新浪用户专享福利，新浪产品用的越久额度越高，借万元日利\r\n率最低至0.03%，最长可分12期慢慢还！']\r\n清洗前： ['各位大神们🙏求教一下这是什么动物呀！！疑问问]\\n\\为什么它同时长得有点吓人又有点可爱爱允悲悲]\\n\\n#thosetiktoks# http://t.cn/A64 \\u200b\\u200b\\u200b']\r\nIC44 \\u200b\\u200b\\u200b']\r\n清洗后： ['各位大神们求教一下这是什么动物呀！\\n为什么它同时长得有点吓人又有点可爱\\n#thosetiktoks#']\r\n```\r\n\r\n---\r\n顺便可以提一下”\\u200b“问题的起因，很有意思：\r\n这个字符原本是[不可见字符](https://blog.csdn.net/xc_zhou/article/details/84346608)，直接打印是看不到的。\r\n\r\n\r\n```python\r\nprint('a\\u200ba')\r\n```\r\n\r\n    a​a\r\n    \r\n\r\n会在文本中出现的原因是因为它被裹在了其他数据结构dict/list中，再使用了显式的类型转化为str，就会保留其原始形式\r\n\r\n你的代码里的片段：\r\n```\r\ndict_code = json.loads(response)\r\ndict_code = str(dict_code)\r\n```\r\n\r\n另一个简单例子：\r\n```python\r\nprint([\"a\\u200ba\"])\r\n```\r\n\r\n    ['a\\u200ba']\r\n    \r\n\r\n再加上`\\`是转义字符，所以在存储为文件时为了保留真实的`\\`，就需要用`\\\\`的形式保存，就变成了我们最后看到的样子`\\\\u200b`。\r\n\r\n考虑到是否存储为了文件（出现了双斜杠转义，这边采用了两种清洗方法）\r\n\r\n\r\n```python\r\n# 未转义\r\nre.sub(r\"[\\u200b-\\u200d]\", \"\", 'a\\u200bb\\u200dc')\r\n# 已转义\r\nre.sub(r\"(\\\\u200b|\\\\u200c|\\\\u200d)\", \"\", 'a\\\\u200bb\\\\u200dc')\r\n```\r\n\r\n\r\n\r\n\r\n    'abc'\r\n\r\n\r\n\r\n\r\n```python\r\nre.sub(r\"(\\\\u200b|\\\\u200c|\\\\u200d)\", \"\", 'a\\\\u200bb\\\\u200dc')\r\n```\r\n\r\n\r\n\r\n\r\n    'abc'\r\n","reactions":{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/709215702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false}},{"id":3880987671,"node_id":"MDExOkNsb3NlZEV2ZW50Mzg4MDk4NzY3MQ==","url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/events/3880987671","actor":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-10-15T11:22:50Z","state_reason":null,"performed_via_github_app":null}]