[{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/501685834","html_url":"https://github.com/blmoistawinde/HarvestText/issues/4#issuecomment-501685834","issue_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/4","id":501685834,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTY4NTgzNA==","user":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T12:41:43Z","updated_at":"2019-06-13T12:41:43Z","author_association":"OWNER","body":"你好，这里我的情感分析使用的是SO-PMI算法，这个算法可以得到词语级的情感值，并且没有上下界限制，而句子的情感值则是通过句子中所有（未被过滤的）词语的情感值取平均得到的，所以也没有上下界。\r\n\r\n考虑到在应用中可能确实会有希望情感限制在一定区间内的情况，现在我更新了新版，新支持了两种伸缩方式，例子如下：\r\n\r\n首先命令行里更新：\r\n```\r\npip install harvesttext==0.5.4.1 --extra-index-url https://pypi.python.org/simple\r\n```\r\n\r\n然后是你的例子（我也放到了readme里）\r\n```python3\r\nprint(\"\\nsentiment dictionary using default seed words\")\r\ndocs = [\"张市筹设兴华实业公司外区资本家踊跃投资晋察冀边区兴华实业公司，自筹备成立以来，解放区内外企业界人士及一般商民，均踊跃认股投资\",\r\n        \"打倒万恶的资本家\",\r\n    \"该公司原定资本总额为二十五万万元，现已由各界分认达二十万万元，所属各厂、各公司亦募得股金一万万余元\",\r\n    \"连日来解放区以外各工商人士，投函向该公司询问经营性质与范围以及股东权限等问题者甚多，络绎抵此的许多资本家，于参观该公司所属各厂经营状况后，对民主政府扶助与奖励私营企业发展的政策，均极表赞同，有些资本家因款项未能即刻汇来，多向筹备处预认投资的额数。由平津来张的林明棋先生，一次即以现款入股六十余万元\"\r\n   ]\r\n# scale: 将所有词语的情感值范围调整到[-1,1]\r\n# 省略pos_seeds, neg_seeds,将采用默认的情感词典 get_qh_sent_dict()\r\nprint(\"scale=\\\"0-1\\\", 按照最大为1，最小为0进行线性伸缩，0.5未必是中性\")\r\nsent_dict = ht.build_sent_dict(docs,min_times=1,scale=\"0-1\")\r\nprint(\"%s:%f\" % (\"赞同\",sent_dict[\"赞同\"]))\r\nprint(\"%s:%f\" % (\"二十万\",sent_dict[\"二十万\"]))\r\nprint(\"%s:%f\" % (\"万恶\",sent_dict[\"万恶\"]))\r\nprint(\"%f:%s\" % (ht.analyse_sent(docs[0]), docs[0]))\r\nprint(\"%f:%s\" % (ht.analyse_sent(docs[1]), docs[1]))\r\n\r\nprint(\"scale=\\\"+-1\\\", 在正负区间内分别伸缩，保留0作为中性的语义\")\r\nsent_dict = ht.build_sent_dict(docs,min_times=1,scale=\"+-1\")\r\nprint(\"%s:%f\" % (\"赞同\",sent_dict[\"赞同\"]))\r\nprint(\"%s:%f\" % (\"二十万\",sent_dict[\"二十万\"]))\r\nprint(\"%s:%f\" % (\"万恶\",sent_dict[\"万恶\"]))\r\nprint(\"%f:%s\" % (ht.analyse_sent(docs[0]), docs[0]))\r\nprint(\"%f:%s\" % (ht.analyse_sent(docs[1]), docs[1]))\r\n```\r\n\r\n```\r\nsentiment dictionary using default seed words\r\nscale=\"0-1\", 按照最大为1，最小为0进行线性伸缩，0.5未必是中性\r\n赞同:1.000000\r\n二十万:0.153846\r\n万恶:0.000000\r\n0.449412:张市筹设兴华实业公司外区资本家踊跃投资晋察冀边区兴华实业公司，自筹备成立以来，解放区内外企业界人士及一般商民，均踊跃认股投资\r\n0.364910:打倒万恶的资本家\r\nscale=\"+-1\", 在正负区间内分别伸缩，保留0作为中性的语义\r\n赞同:1.000000\r\n二十万:0.000000\r\n万恶:-1.000000\r\n0.349305:张市筹设兴华实业公司外区资本家踊跃投资晋察冀边区兴华实业公司，自筹备成立以来，解放区内外企业界人士及一般商民，均踊跃认股投资\r\n-0.159652:打倒万恶的资本家\r\n```\r\n\r\n希望能解决你的需要，也谢谢你帮我发现了一个很好的改进点。","reactions":{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/501685834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/501688316","html_url":"https://github.com/blmoistawinde/HarvestText/issues/4#issuecomment-501688316","issue_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/4","id":501688316,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTY4ODMxNg==","user":{"login":"Sean16SYSU","id":32086937,"node_id":"MDQ6VXNlcjMyMDg2OTM3","avatar_url":"https://avatars.githubusercontent.com/u/32086937?v=4","gravatar_id":"","url":"https://api.github.com/users/Sean16SYSU","html_url":"https://github.com/Sean16SYSU","followers_url":"https://api.github.com/users/Sean16SYSU/followers","following_url":"https://api.github.com/users/Sean16SYSU/following{/other_user}","gists_url":"https://api.github.com/users/Sean16SYSU/gists{/gist_id}","starred_url":"https://api.github.com/users/Sean16SYSU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sean16SYSU/subscriptions","organizations_url":"https://api.github.com/users/Sean16SYSU/orgs","repos_url":"https://api.github.com/users/Sean16SYSU/repos","events_url":"https://api.github.com/users/Sean16SYSU/events{/privacy}","received_events_url":"https://api.github.com/users/Sean16SYSU/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T12:49:00Z","updated_at":"2019-06-13T12:49:00Z","author_association":"CONTRIBUTOR","body":"感谢。哈哈哈本来打算抽空改了提交的，大佬既然这么快搞定了也ok。谢啦","reactions":{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/501688316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Sean16SYSU","id":32086937,"node_id":"MDQ6VXNlcjMyMDg2OTM3","avatar_url":"https://avatars.githubusercontent.com/u/32086937?v=4","gravatar_id":"","url":"https://api.github.com/users/Sean16SYSU","html_url":"https://github.com/Sean16SYSU","followers_url":"https://api.github.com/users/Sean16SYSU/followers","following_url":"https://api.github.com/users/Sean16SYSU/following{/other_user}","gists_url":"https://api.github.com/users/Sean16SYSU/gists{/gist_id}","starred_url":"https://api.github.com/users/Sean16SYSU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sean16SYSU/subscriptions","organizations_url":"https://api.github.com/users/Sean16SYSU/orgs","repos_url":"https://api.github.com/users/Sean16SYSU/repos","events_url":"https://api.github.com/users/Sean16SYSU/events{/privacy}","received_events_url":"https://api.github.com/users/Sean16SYSU/received_events","type":"User","site_admin":false}},{"id":2410480132,"node_id":"MDExOkNsb3NlZEV2ZW50MjQxMDQ4MDEzMg==","url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/events/2410480132","actor":{"login":"Sean16SYSU","id":32086937,"node_id":"MDQ6VXNlcjMyMDg2OTM3","avatar_url":"https://avatars.githubusercontent.com/u/32086937?v=4","gravatar_id":"","url":"https://api.github.com/users/Sean16SYSU","html_url":"https://github.com/Sean16SYSU","followers_url":"https://api.github.com/users/Sean16SYSU/followers","following_url":"https://api.github.com/users/Sean16SYSU/following{/other_user}","gists_url":"https://api.github.com/users/Sean16SYSU/gists{/gist_id}","starred_url":"https://api.github.com/users/Sean16SYSU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sean16SYSU/subscriptions","organizations_url":"https://api.github.com/users/Sean16SYSU/orgs","repos_url":"https://api.github.com/users/Sean16SYSU/repos","events_url":"https://api.github.com/users/Sean16SYSU/events{/privacy}","received_events_url":"https://api.github.com/users/Sean16SYSU/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-06-13T12:49:01Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/501718855","html_url":"https://github.com/blmoistawinde/HarvestText/issues/4#issuecomment-501718855","issue_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/4","id":501718855,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTcxODg1NQ==","user":{"login":"Sean16SYSU","id":32086937,"node_id":"MDQ6VXNlcjMyMDg2OTM3","avatar_url":"https://avatars.githubusercontent.com/u/32086937?v=4","gravatar_id":"","url":"https://api.github.com/users/Sean16SYSU","html_url":"https://github.com/Sean16SYSU","followers_url":"https://api.github.com/users/Sean16SYSU/followers","following_url":"https://api.github.com/users/Sean16SYSU/following{/other_user}","gists_url":"https://api.github.com/users/Sean16SYSU/gists{/gist_id}","starred_url":"https://api.github.com/users/Sean16SYSU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sean16SYSU/subscriptions","organizations_url":"https://api.github.com/users/Sean16SYSU/orgs","repos_url":"https://api.github.com/users/Sean16SYSU/repos","events_url":"https://api.github.com/users/Sean16SYSU/events{/privacy}","received_events_url":"https://api.github.com/users/Sean16SYSU/received_events","type":"User","site_admin":false},"created_at":"2019-06-13T14:09:02Z","updated_at":"2019-06-13T14:09:02Z","author_association":"CONTRIBUTOR","body":"关于这个scale的过程，我比较好奇在+-1的设计。\r\n\r\n直接使用 (x-mean)/ (max-min)的操作做嘛？\r\n这样操作，我觉得不太合理。\r\n因为正向的词汇应该还是正向的，负向的词汇应该还是负向的。\r\n或许在对应的符号下做 (x-min)/(max-min)比较合理？","reactions":{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/501718855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Sean16SYSU","id":32086937,"node_id":"MDQ6VXNlcjMyMDg2OTM3","avatar_url":"https://avatars.githubusercontent.com/u/32086937?v=4","gravatar_id":"","url":"https://api.github.com/users/Sean16SYSU","html_url":"https://github.com/Sean16SYSU","followers_url":"https://api.github.com/users/Sean16SYSU/followers","following_url":"https://api.github.com/users/Sean16SYSU/following{/other_user}","gists_url":"https://api.github.com/users/Sean16SYSU/gists{/gist_id}","starred_url":"https://api.github.com/users/Sean16SYSU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sean16SYSU/subscriptions","organizations_url":"https://api.github.com/users/Sean16SYSU/orgs","repos_url":"https://api.github.com/users/Sean16SYSU/repos","events_url":"https://api.github.com/users/Sean16SYSU/events{/privacy}","received_events_url":"https://api.github.com/users/Sean16SYSU/received_events","type":"User","site_admin":false}},{"id":2410737078,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQyNDEwNzM3MDc4","url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/events/2410737078","actor":{"login":"Sean16SYSU","id":32086937,"node_id":"MDQ6VXNlcjMyMDg2OTM3","avatar_url":"https://avatars.githubusercontent.com/u/32086937?v=4","gravatar_id":"","url":"https://api.github.com/users/Sean16SYSU","html_url":"https://github.com/Sean16SYSU","followers_url":"https://api.github.com/users/Sean16SYSU/followers","following_url":"https://api.github.com/users/Sean16SYSU/following{/other_user}","gists_url":"https://api.github.com/users/Sean16SYSU/gists{/gist_id}","starred_url":"https://api.github.com/users/Sean16SYSU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sean16SYSU/subscriptions","organizations_url":"https://api.github.com/users/Sean16SYSU/orgs","repos_url":"https://api.github.com/users/Sean16SYSU/repos","events_url":"https://api.github.com/users/Sean16SYSU/events{/privacy}","received_events_url":"https://api.github.com/users/Sean16SYSU/received_events","type":"User","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2019-06-13T14:09:02Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/502058977","html_url":"https://github.com/blmoistawinde/HarvestText/issues/4#issuecomment-502058977","issue_url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/4","id":502058977,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjA1ODk3Nw==","user":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"created_at":"2019-06-14T10:31:42Z","updated_at":"2019-06-14T10:31:42Z","author_association":"OWNER","body":"事实上在+-1的情况下我正是像你说的这么做的，具体实现可见[这里](https://github.com/blmoistawinde/HarvestText/blob/4b9b616914956fba0df28ada77d769996ff18f47/harvesttext/sent_dict.py#L88)\r\n\r\n所以你在那个例子中会看到：\r\n```\r\nscale=\"+-1\", 在正负区间内分别伸缩，保留0作为中性的语义\r\n赞同:1.000000\r\n二十万:0.000000\r\n万恶:-1.000000\r\n```\r\n三个词分别代表积极、中性、消极的倾向，都得到了合理的取值。\r\n\r\n当然这样操作也是有风险的，因为它会改变情感值的总体分布。例如，假设词典中正向最大为4，负向最大为-2，那么对于两个分别为+1,-1的词语，这样scale以后就会变成0.25,-0.5，原来的抵消关系就不存在了。\r\n\r\n所以在另一种\"0-1\"scale模式中，我就采取了直接按照最大最小值scale的方法，可以保留总体分布，但是单个词语的中性可能被扭曲（0不会变成0.5，如例子中的 **二十万:0.153846** ）。\r\n\r\n两种方法各有千秋，看个人需要选择吧。当然你要是有更多好建议，欢迎来提一个PR来改进哈。","reactions":{"url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/comments/502058977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false}},{"id":2599235175,"node_id":"MDExOkNsb3NlZEV2ZW50MjU5OTIzNTE3NQ==","url":"https://api.github.com/repos/blmoistawinde/HarvestText/issues/events/2599235175","actor":{"login":"blmoistawinde","id":32953014,"node_id":"MDQ6VXNlcjMyOTUzMDE0","avatar_url":"https://avatars.githubusercontent.com/u/32953014?v=4","gravatar_id":"","url":"https://api.github.com/users/blmoistawinde","html_url":"https://github.com/blmoistawinde","followers_url":"https://api.github.com/users/blmoistawinde/followers","following_url":"https://api.github.com/users/blmoistawinde/following{/other_user}","gists_url":"https://api.github.com/users/blmoistawinde/gists{/gist_id}","starred_url":"https://api.github.com/users/blmoistawinde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blmoistawinde/subscriptions","organizations_url":"https://api.github.com/users/blmoistawinde/orgs","repos_url":"https://api.github.com/users/blmoistawinde/repos","events_url":"https://api.github.com/users/blmoistawinde/events{/privacy}","received_events_url":"https://api.github.com/users/blmoistawinde/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-09-01T08:26:58Z","state_reason":null,"performed_via_github_app":null}]