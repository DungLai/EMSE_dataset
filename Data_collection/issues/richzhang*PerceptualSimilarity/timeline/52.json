[{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/709429430","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/52#issuecomment-709429430","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/52","id":709429430,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQyOTQzMA==","user":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"created_at":"2020-10-15T16:07:41Z","updated_at":"2020-10-15T16:07:41Z","author_association":"OWNER","body":"I didn't understand the 2nd half of the sentence. The 1st half should be doable.","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/709429430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/709450657","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/52#issuecomment-709450657","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/52","id":709450657,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ1MDY1Nw==","user":{"login":"MeteoRex11","id":46354723,"node_id":"MDQ6VXNlcjQ2MzU0NzIz","avatar_url":"https://avatars.githubusercontent.com/u/46354723?v=4","gravatar_id":"","url":"https://api.github.com/users/MeteoRex11","html_url":"https://github.com/MeteoRex11","followers_url":"https://api.github.com/users/MeteoRex11/followers","following_url":"https://api.github.com/users/MeteoRex11/following{/other_user}","gists_url":"https://api.github.com/users/MeteoRex11/gists{/gist_id}","starred_url":"https://api.github.com/users/MeteoRex11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeteoRex11/subscriptions","organizations_url":"https://api.github.com/users/MeteoRex11/orgs","repos_url":"https://api.github.com/users/MeteoRex11/repos","events_url":"https://api.github.com/users/MeteoRex11/events{/privacy}","received_events_url":"https://api.github.com/users/MeteoRex11/received_events","type":"User","site_admin":false},"created_at":"2020-10-15T16:43:06Z","updated_at":"2020-10-15T16:43:06Z","author_association":"NONE","body":"> I didn't understand the 2nd half of the sentence. The 1st half should be doable.\r\n\r\nI was taking the reference of this issue: https://github.com/keras-team/keras/issues/10529\r\nSince the function needs to be computed at every epoch, would any change be required for the present code you have provided?\r\n\r\nI had modified the test script to work for images, but am unsure how it would fit into a neural network","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/709450657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MeteoRex11","id":46354723,"node_id":"MDQ6VXNlcjQ2MzU0NzIz","avatar_url":"https://avatars.githubusercontent.com/u/46354723?v=4","gravatar_id":"","url":"https://api.github.com/users/MeteoRex11","html_url":"https://github.com/MeteoRex11","followers_url":"https://api.github.com/users/MeteoRex11/followers","following_url":"https://api.github.com/users/MeteoRex11/following{/other_user}","gists_url":"https://api.github.com/users/MeteoRex11/gists{/gist_id}","starred_url":"https://api.github.com/users/MeteoRex11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeteoRex11/subscriptions","organizations_url":"https://api.github.com/users/MeteoRex11/orgs","repos_url":"https://api.github.com/users/MeteoRex11/repos","events_url":"https://api.github.com/users/MeteoRex11/events{/privacy}","received_events_url":"https://api.github.com/users/MeteoRex11/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/709473822","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/52#issuecomment-709473822","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/52","id":709473822,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTQ3MzgyMg==","user":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"created_at":"2020-10-15T17:23:22Z","updated_at":"2020-10-15T17:23:22Z","author_association":"OWNER","body":"Simply call the forward function, whenever you need the loss computed","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/709473822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/742698551","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/52#issuecomment-742698551","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/52","id":742698551,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjY5ODU1MQ==","user":{"login":"MeteoRex11","id":46354723,"node_id":"MDQ6VXNlcjQ2MzU0NzIz","avatar_url":"https://avatars.githubusercontent.com/u/46354723?v=4","gravatar_id":"","url":"https://api.github.com/users/MeteoRex11","html_url":"https://github.com/MeteoRex11","followers_url":"https://api.github.com/users/MeteoRex11/followers","following_url":"https://api.github.com/users/MeteoRex11/following{/other_user}","gists_url":"https://api.github.com/users/MeteoRex11/gists{/gist_id}","starred_url":"https://api.github.com/users/MeteoRex11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeteoRex11/subscriptions","organizations_url":"https://api.github.com/users/MeteoRex11/orgs","repos_url":"https://api.github.com/users/MeteoRex11/repos","events_url":"https://api.github.com/users/MeteoRex11/events{/privacy}","received_events_url":"https://api.github.com/users/MeteoRex11/received_events","type":"User","site_admin":false},"created_at":"2020-12-10T18:10:54Z","updated_at":"2020-12-10T18:10:54Z","author_association":"NONE","body":"Hi Mr. Zhang,\r\nI am still trying to get the similarity working as a loss function, and am getting the following error:\r\n\r\n`ValueError: Dimensions must be equal, but are 224 and 3 for '{{node computeSimilarity/sub}} = Sub[T=DT_FLOAT](computeSimilarity/unstack, computeSimilarity/sub/y)' with input shapes: [224,224,3], [1,3,1,1].`\r\n\r\nI am using images of dimensions 224 x 224 x 3, and a batchSize of 8. The following is the custom loss function I am using for my code:\r\n\r\n```\r\ndef computeSimilarity(image1, image2):\r\n\r\n\t'''\r\n\tim1 = im2tensor(image1)\r\n\tim2 = im2tensor(image2)\r\n\r\n\tloss = loss_fn_alex(im1, im2)\r\n\t'''\r\n\r\n\tbatchSize = image1.shape[0]\r\n\r\n\tim1 = tf.unstack(image1)\r\n\tim2 = tf.unstack(image2)\r\n\r\n\tloss = 0\r\n\r\n\tfor i1,i2 in zip(im1,im2):\r\n\t\tloss += loss_fn_alex(i1, i2)\r\n\r\n\tloss = loss / batchSize\r\n\r\n\treturn float(loss)\r\n```\r\nKindly let me know what the issue is","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/742698551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MeteoRex11","id":46354723,"node_id":"MDQ6VXNlcjQ2MzU0NzIz","avatar_url":"https://avatars.githubusercontent.com/u/46354723?v=4","gravatar_id":"","url":"https://api.github.com/users/MeteoRex11","html_url":"https://github.com/MeteoRex11","followers_url":"https://api.github.com/users/MeteoRex11/followers","following_url":"https://api.github.com/users/MeteoRex11/following{/other_user}","gists_url":"https://api.github.com/users/MeteoRex11/gists{/gist_id}","starred_url":"https://api.github.com/users/MeteoRex11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeteoRex11/subscriptions","organizations_url":"https://api.github.com/users/MeteoRex11/orgs","repos_url":"https://api.github.com/users/MeteoRex11/repos","events_url":"https://api.github.com/users/MeteoRex11/events{/privacy}","received_events_url":"https://api.github.com/users/MeteoRex11/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/742860237","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/52#issuecomment-742860237","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/52","id":742860237,"node_id":"MDEyOklzc3VlQ29tbWVudDc0Mjg2MDIzNw==","user":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"created_at":"2020-12-10T23:14:42Z","updated_at":"2020-12-10T23:14:42Z","author_association":"OWNER","body":"Make sure the images are in `NxCxHxW` form (this is the standard way to represent images in pytorch). You can refer to the demo script as well: https://github.com/richzhang/PerceptualSimilarity/blob/master/lpips_2imgs.py","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/742860237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false}},{"id":4162245401,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2MjI0NTQwMQ==","url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/events/4162245401","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-03T07:34:48Z","performed_via_github_app":null},{"id":4162245402,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjIyNDU0MDI=","url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/events/4162245402","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-03T07:34:48Z","performed_via_github_app":null},{"id":5214620299,"node_id":"MDExOkNsb3NlZEV2ZW50NTIxNDYyMDI5OQ==","url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/events/5214620299","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-08-26T18:25:11Z","state_reason":null,"performed_via_github_app":null}]