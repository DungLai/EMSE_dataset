[{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/654361547","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/45#issuecomment-654361547","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/45","id":654361547,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM2MTU0Nw==","user":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"created_at":"2020-07-06T17:11:56Z","updated_at":"2020-07-06T17:13:27Z","author_association":"OWNER","body":"I think it should work out of the box\r\n\r\n```python\r\nmodel = models.PerceptualLoss(model='net-lin', net='vgg', use_gpu=False, spatial=False)\r\n\r\nH,W = 160, 64\r\ndummy = torch.zeros(1,3,H,W)\r\nprint(model(dummy, dummy).item())\r\n```","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/654361547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/654571425","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/45#issuecomment-654571425","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/45","id":654571425,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDU3MTQyNQ==","user":{"login":"SaulZhang","id":25783335,"node_id":"MDQ6VXNlcjI1NzgzMzM1","avatar_url":"https://avatars.githubusercontent.com/u/25783335?v=4","gravatar_id":"","url":"https://api.github.com/users/SaulZhang","html_url":"https://github.com/SaulZhang","followers_url":"https://api.github.com/users/SaulZhang/followers","following_url":"https://api.github.com/users/SaulZhang/following{/other_user}","gists_url":"https://api.github.com/users/SaulZhang/gists{/gist_id}","starred_url":"https://api.github.com/users/SaulZhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SaulZhang/subscriptions","organizations_url":"https://api.github.com/users/SaulZhang/orgs","repos_url":"https://api.github.com/users/SaulZhang/repos","events_url":"https://api.github.com/users/SaulZhang/events{/privacy}","received_events_url":"https://api.github.com/users/SaulZhang/received_events","type":"User","site_admin":false},"created_at":"2020-07-07T03:06:33Z","updated_at":"2020-07-07T03:06:33Z","author_association":"NONE","body":"Thanks for your answer, it does work in the example you provided. After my testing as the test_network.py script settings, I found that this problem is mainly caused by the setting of {net/spatial} parameter.\r\n```python\r\nmodel = models.PerceptualLoss(model='net-lin', net='alex', use_gpu=False, spatial=True)\r\nH,W = 160, 64\r\ndummy = torch.zeros(1,3,H,W)\r\n```\r\nthe error information as follow:\r\n`RuntimeError: The size of tensor a (61) must match the size of tensor b (58) at non-singleton dimension 3`\r\n","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/654571425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SaulZhang","id":25783335,"node_id":"MDQ6VXNlcjI1NzgzMzM1","avatar_url":"https://avatars.githubusercontent.com/u/25783335?v=4","gravatar_id":"","url":"https://api.github.com/users/SaulZhang","html_url":"https://github.com/SaulZhang","followers_url":"https://api.github.com/users/SaulZhang/followers","following_url":"https://api.github.com/users/SaulZhang/following{/other_user}","gists_url":"https://api.github.com/users/SaulZhang/gists{/gist_id}","starred_url":"https://api.github.com/users/SaulZhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SaulZhang/subscriptions","organizations_url":"https://api.github.com/users/SaulZhang/orgs","repos_url":"https://api.github.com/users/SaulZhang/repos","events_url":"https://api.github.com/users/SaulZhang/events{/privacy}","received_events_url":"https://api.github.com/users/SaulZhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/656215497","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/45#issuecomment-656215497","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/45","id":656215497,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjIxNTQ5Nw==","user":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"created_at":"2020-07-09T16:06:49Z","updated_at":"2020-07-09T16:06:49Z","author_association":"OWNER","body":"Got it. I pushed a change to do resizing in both dimensions. Let me know if it works. Keep in mind the features in each layer will not necessarily be well-aligned in these cases","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/656215497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/666929172","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/45#issuecomment-666929172","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/45","id":666929172,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjkyOTE3Mg==","user":{"login":"khitish19","id":7504510,"node_id":"MDQ6VXNlcjc1MDQ1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/7504510?v=4","gravatar_id":"","url":"https://api.github.com/users/khitish19","html_url":"https://github.com/khitish19","followers_url":"https://api.github.com/users/khitish19/followers","following_url":"https://api.github.com/users/khitish19/following{/other_user}","gists_url":"https://api.github.com/users/khitish19/gists{/gist_id}","starred_url":"https://api.github.com/users/khitish19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khitish19/subscriptions","organizations_url":"https://api.github.com/users/khitish19/orgs","repos_url":"https://api.github.com/users/khitish19/repos","events_url":"https://api.github.com/users/khitish19/events{/privacy}","received_events_url":"https://api.github.com/users/khitish19/received_events","type":"User","site_admin":false},"created_at":"2020-07-31T05:21:36Z","updated_at":"2020-07-31T06:41:42Z","author_association":"NONE","body":"The issue still persists for me. I was trying **compute_dists_pair.py** and got the same error when the image height and width were different but it all worked fine when I resize them to have same height and width.\r\n\r\nThe error looks like this:\r\n`RuntimeError: The size of tensor a (13) must match the size of tensor b (15) at non-singleton dimension 3`","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/666929172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"khitish19","id":7504510,"node_id":"MDQ6VXNlcjc1MDQ1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/7504510?v=4","gravatar_id":"","url":"https://api.github.com/users/khitish19","html_url":"https://github.com/khitish19","followers_url":"https://api.github.com/users/khitish19/followers","following_url":"https://api.github.com/users/khitish19/following{/other_user}","gists_url":"https://api.github.com/users/khitish19/gists{/gist_id}","starred_url":"https://api.github.com/users/khitish19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khitish19/subscriptions","organizations_url":"https://api.github.com/users/khitish19/orgs","repos_url":"https://api.github.com/users/khitish19/repos","events_url":"https://api.github.com/users/khitish19/events{/privacy}","received_events_url":"https://api.github.com/users/khitish19/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/672113906","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/45#issuecomment-672113906","issue_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/45","id":672113906,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MjExMzkwNg==","user":{"login":"be42day","id":20614168,"node_id":"MDQ6VXNlcjIwNjE0MTY4","avatar_url":"https://avatars.githubusercontent.com/u/20614168?v=4","gravatar_id":"","url":"https://api.github.com/users/be42day","html_url":"https://github.com/be42day","followers_url":"https://api.github.com/users/be42day/followers","following_url":"https://api.github.com/users/be42day/following{/other_user}","gists_url":"https://api.github.com/users/be42day/gists{/gist_id}","starred_url":"https://api.github.com/users/be42day/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/be42day/subscriptions","organizations_url":"https://api.github.com/users/be42day/orgs","repos_url":"https://api.github.com/users/be42day/repos","events_url":"https://api.github.com/users/be42day/events{/privacy}","received_events_url":"https://api.github.com/users/be42day/received_events","type":"User","site_admin":false},"created_at":"2020-08-11T17:25:47Z","updated_at":"2020-08-11T17:25:47Z","author_association":"NONE","body":"The two images must be in the same size","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments/672113906/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"be42day","id":20614168,"node_id":"MDQ6VXNlcjIwNjE0MTY4","avatar_url":"https://avatars.githubusercontent.com/u/20614168?v=4","gravatar_id":"","url":"https://api.github.com/users/be42day","html_url":"https://github.com/be42day","followers_url":"https://api.github.com/users/be42day/followers","following_url":"https://api.github.com/users/be42day/following{/other_user}","gists_url":"https://api.github.com/users/be42day/gists{/gist_id}","starred_url":"https://api.github.com/users/be42day/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/be42day/subscriptions","organizations_url":"https://api.github.com/users/be42day/orgs","repos_url":"https://api.github.com/users/be42day/repos","events_url":"https://api.github.com/users/be42day/events{/privacy}","received_events_url":"https://api.github.com/users/be42day/received_events","type":"User","site_admin":false}},{"id":3737985146,"node_id":"MDExOkNsb3NlZEV2ZW50MzczNzk4NTE0Ng==","url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/events/3737985146","actor":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-09-07T17:08:40Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"DanAndersen","id":2023351,"node_id":"MDQ6VXNlcjIwMjMzNTE=","avatar_url":"https://avatars.githubusercontent.com/u/2023351?v=4","gravatar_id":"","url":"https://api.github.com/users/DanAndersen","html_url":"https://github.com/DanAndersen","followers_url":"https://api.github.com/users/DanAndersen/followers","following_url":"https://api.github.com/users/DanAndersen/following{/other_user}","gists_url":"https://api.github.com/users/DanAndersen/gists{/gist_id}","starred_url":"https://api.github.com/users/DanAndersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanAndersen/subscriptions","organizations_url":"https://api.github.com/users/DanAndersen/orgs","repos_url":"https://api.github.com/users/DanAndersen/repos","events_url":"https://api.github.com/users/DanAndersen/events{/privacy}","received_events_url":"https://api.github.com/users/DanAndersen/received_events","type":"User","site_admin":false},"created_at":"2020-10-02T20:48:49Z","updated_at":"2020-10-02T20:48:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/51","repository_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity","labels_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/51/labels{/name}","comments_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/51/comments","events_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/51/events","html_url":"https://github.com/richzhang/PerceptualSimilarity/issues/51","id":713893202,"node_id":"MDU6SXNzdWU3MTM4OTMyMDI=","number":51,"title":"upsample function leads to tensor size mismatch for certain input image sizes when spatial=True","user":{"login":"DanAndersen","id":2023351,"node_id":"MDQ6VXNlcjIwMjMzNTE=","avatar_url":"https://avatars.githubusercontent.com/u/2023351?v=4","gravatar_id":"","url":"https://api.github.com/users/DanAndersen","html_url":"https://github.com/DanAndersen","followers_url":"https://api.github.com/users/DanAndersen/followers","following_url":"https://api.github.com/users/DanAndersen/following{/other_user}","gists_url":"https://api.github.com/users/DanAndersen/gists{/gist_id}","starred_url":"https://api.github.com/users/DanAndersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanAndersen/subscriptions","organizations_url":"https://api.github.com/users/DanAndersen/orgs","repos_url":"https://api.github.com/users/DanAndersen/repos","events_url":"https://api.github.com/users/DanAndersen/events{/privacy}","received_events_url":"https://api.github.com/users/DanAndersen/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-10-02T20:46:54Z","updated_at":"2021-08-26T18:23:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"repository":{"id":117034492,"node_id":"MDEwOlJlcG9zaXRvcnkxMTcwMzQ0OTI=","name":"PerceptualSimilarity","full_name":"richzhang/PerceptualSimilarity","private":false,"owner":{"login":"richzhang","id":18079594,"node_id":"MDQ6VXNlcjE4MDc5NTk0","avatar_url":"https://avatars.githubusercontent.com/u/18079594?v=4","gravatar_id":"","url":"https://api.github.com/users/richzhang","html_url":"https://github.com/richzhang","followers_url":"https://api.github.com/users/richzhang/followers","following_url":"https://api.github.com/users/richzhang/following{/other_user}","gists_url":"https://api.github.com/users/richzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/richzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richzhang/subscriptions","organizations_url":"https://api.github.com/users/richzhang/orgs","repos_url":"https://api.github.com/users/richzhang/repos","events_url":"https://api.github.com/users/richzhang/events{/privacy}","received_events_url":"https://api.github.com/users/richzhang/received_events","type":"User","site_admin":false},"html_url":"https://github.com/richzhang/PerceptualSimilarity","description":"LPIPS metric. pip install lpips","fork":false,"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity","forks_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/forks","keys_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/keys{/key_id}","collaborators_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/teams","hooks_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/hooks","issue_events_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/events{/number}","events_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/events","assignees_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/assignees{/user}","branches_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/branches{/branch}","tags_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/tags","blobs_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/git/refs{/sha}","trees_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/git/trees{/sha}","statuses_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/statuses/{sha}","languages_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/languages","stargazers_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/stargazers","contributors_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/contributors","subscribers_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/subscribers","subscription_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/subscription","commits_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/commits{/sha}","git_commits_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/git/commits{/sha}","comments_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/comments{/number}","issue_comment_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/comments{/number}","contents_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/contents/{+path}","compare_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/compare/{base}...{head}","merges_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/merges","archive_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/downloads","issues_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues{/number}","pulls_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/pulls{/number}","milestones_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/milestones{/number}","notifications_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/labels{/name}","releases_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/releases{/id}","deployments_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/deployments","created_at":"2018-01-11T01:43:21Z","updated_at":"2023-01-19T03:57:49Z","pushed_at":"2023-01-09T11:57:53Z","git_url":"git://github.com/richzhang/PerceptualSimilarity.git","ssh_url":"git@github.com:richzhang/PerceptualSimilarity.git","clone_url":"https://github.com/richzhang/PerceptualSimilarity.git","svn_url":"https://github.com/richzhang/PerceptualSimilarity","homepage":"https://richzhang.github.io/PerceptualSimilarity","size":8973,"stargazers_count":2629,"watchers_count":2629,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":446,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":42,"license":{"key":"bsd-2-clause","name":"BSD 2-Clause \"Simplified\" License","spdx_id":"BSD-2-Clause","url":"https://api.github.com/licenses/bsd-2-clause","node_id":"MDc6TGljZW5zZTQ="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["deep-learning","deep-neural-networks","perceptual","perceptual-losses","perceptual-metric","perceptual-similarity","pytorch"],"visibility":"public","forks":446,"open_issues":42,"watchers":2629,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Currently, the `upsample` function is as follows:\r\n```\r\ndef upsample(in_tens, out_HW=(64,64)): # assumes scale factor is same for H and W\r\n    in_H, in_W = in_tens.shape[2], in_tens.shape[3]\r\n    scale_factor_H, scale_factor_W = 1.*out_HW[0]/in_H, 1.*out_HW[1]/in_W\r\n\r\n    return nn.Upsample(scale_factor=(scale_factor_H, scale_factor_W), mode='bilinear', align_corners=False)(in_tens)\r\n```\r\n\r\nThis ends up failing in the case where the input images being compared are of resolution 800x600. When this is the case, one of the layers passed in as `in_tens` has shape (1, 1, 149, 199). As a result, `in_H * scale_factor_H` = 600.0000000000001 and `in_W * scale_factor_W` = 799.9999999999999. The result of the `Upsample` is an output tensor of size (1,1,600,799), which leads to an exception when it is added to other tensors of size (1,1,600,800).\r\n\r\nInstead of computing the `scale_factor`, a more robust solution is to just [set the `size` parameter directly](https://pytorch.org/docs/stable/generated/torch.nn.Upsample.html):\r\n\r\n```\r\n    return nn.Upsample(size=out_HW, mode='bilinear', align_corners=False)(in_tens)\r\n```\r\n\r\nThis might also be the cause of this specific comment: https://github.com/richzhang/PerceptualSimilarity/issues/45#issuecomment-666929172","reactions":{"url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/51/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/richzhang/PerceptualSimilarity/issues/51/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]