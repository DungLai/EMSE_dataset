[{"id":6209927216,"node_id":"LE_lADOCVKAsc5FYDIOzwAAAAFyI_gw","url":"https://api.github.com/repos/sktime/sktime/issues/events/6209927216","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-09T13:20:44Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1063065517","html_url":"https://github.com/sktime/sktime/issues/2185#issuecomment-1063065517","issue_url":"https://api.github.com/repos/sktime/sktime/issues/2185","id":1063065517,"node_id":"IC_kwDOCVKAsc4_XRet","user":{"login":"ltsaprounis","id":64217214,"node_id":"MDQ6VXNlcjY0MjE3MjE0","avatar_url":"https://avatars.githubusercontent.com/u/64217214?v=4","gravatar_id":"","url":"https://api.github.com/users/ltsaprounis","html_url":"https://github.com/ltsaprounis","followers_url":"https://api.github.com/users/ltsaprounis/followers","following_url":"https://api.github.com/users/ltsaprounis/following{/other_user}","gists_url":"https://api.github.com/users/ltsaprounis/gists{/gist_id}","starred_url":"https://api.github.com/users/ltsaprounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ltsaprounis/subscriptions","organizations_url":"https://api.github.com/users/ltsaprounis/orgs","repos_url":"https://api.github.com/users/ltsaprounis/repos","events_url":"https://api.github.com/users/ltsaprounis/events{/privacy}","received_events_url":"https://api.github.com/users/ltsaprounis/received_events","type":"User","site_admin":false},"created_at":"2022-03-09T15:49:12Z","updated_at":"2022-03-09T15:49:12Z","author_association":"COLLABORATOR","body":"That's strange. I tested the current version in main and I can't reproduce the bug. \r\nCan you run this command in your terminal? \r\n`python -m doctest --o=ELLIPSIS -v sktime/forecasting/model_selection/_tune.py`\r\n\r\nDo you get the same error? ","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1063065517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ltsaprounis","id":64217214,"node_id":"MDQ6VXNlcjY0MjE3MjE0","avatar_url":"https://avatars.githubusercontent.com/u/64217214?v=4","gravatar_id":"","url":"https://api.github.com/users/ltsaprounis","html_url":"https://github.com/ltsaprounis","followers_url":"https://api.github.com/users/ltsaprounis/followers","following_url":"https://api.github.com/users/ltsaprounis/following{/other_user}","gists_url":"https://api.github.com/users/ltsaprounis/gists{/gist_id}","starred_url":"https://api.github.com/users/ltsaprounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ltsaprounis/subscriptions","organizations_url":"https://api.github.com/users/ltsaprounis/orgs","repos_url":"https://api.github.com/users/ltsaprounis/repos","events_url":"https://api.github.com/users/ltsaprounis/events{/privacy}","received_events_url":"https://api.github.com/users/ltsaprounis/received_events","type":"User","site_admin":false}},{"id":6213646993,"node_id":"LE_lADOCVKAsc5FYDIOzwAAAAFyXLqR","url":"https://api.github.com/repos/sktime/sktime/issues/events/6213646993","actor":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-03-09T23:13:28Z","label":{"name":"module:forecasting","color":"35FCCE"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1063585495","html_url":"https://github.com/sktime/sktime/issues/2185#issuecomment-1063585495","issue_url":"https://api.github.com/repos/sktime/sktime/issues/2185","id":1063585495,"node_id":"IC_kwDOCVKAsc4_ZQbX","user":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"created_at":"2022-03-10T02:21:01Z","updated_at":"2022-03-10T02:21:01Z","author_association":"CONTRIBUTOR","body":"I get the same error.\r\n```\r\n**********************************************************************\r\nFile \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 430, in _tune.ForecastingGridSearchCV\r\nFailed example:\r\n    gscv.fit(y)\r\nException raised:\r\n    joblib.externals.loky.process_executor._RemoteTraceback: \r\n    \"\"\"\r\n    Traceback (most recent call last):\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/externals/loky/process_executor.py\", line 436, in _process_worker\r\n        r = call_item()\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/externals/loky/process_executor.py\", line 288, in __call__\r\n        return self.fn(*self.args, **self.kwargs)\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/_parallel_backends.py\", line 595, in __call__\r\n        return self.func(*args, **kwargs)\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/parallel.py\", line 262, in __call__\r\n        return [func(*args, **kwargs)\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/parallel.py\", line 262, in <listcomp>\r\n        return [func(*args, **kwargs)\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 211, in _fit_and_score\r\n        out = evaluate(\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/model_evaluation/_functions.py\", line 122, in evaluate\r\n        score = scoring(y_test, y_pred, y_train=y_train)\r\n      File \"/root/sktime_dev/sktime/sktime/performance_metrics/forecasting/_classes.py\", line 154, in __call__\r\n        return self.func(\r\n      File \"/root/sktime_dev/sktime/sktime/performance_metrics/forecasting/_functions.py\", line 1548, in mean_absolute_percentage_error\r\n        _, y_true, y_pred, multioutput = _check_reg_targets(y_true, y_pred, multioutput)\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/sklearn/metrics/_regression.py\", line 96, in _check_reg_targets\r\n        y_pred = check_array(y_pred, ensure_2d=False, dtype=dtype)\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/sklearn/utils/validation.py\", line 801, in check_array\r\n        _assert_all_finite(array, allow_nan=force_all_finite == \"allow-nan\")\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/sklearn/utils/validation.py\", line 115, in _assert_all_finite\r\n        raise ValueError(\r\n    ValueError: Input contains NaN, infinity or a value too large for dtype('float64').\r\n    \"\"\"\r\n\r\n    The above exception was the direct cause of the following exception:\r\n\r\n    Traceback (most recent call last):\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/doctest.py\", line 1336, in __run\r\n        exec(compile(example.source, filename, \"single\",\r\n      File \"<doctest _tune.ForecastingGridSearchCV[23]>\", line 1, in <module>\r\n        gscv.fit(y)\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/base/_base.py\", line 160, in fit\r\n        self._fit(y=y_inner, X=X_inner, fh=fh)\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 260, in _fit\r\n        results = self._run_search(evaluate_candidates)\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 468, in _run_search\r\n        return evaluate_candidates(ParameterGrid(self.param_grid))\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 246, in evaluate_candidates\r\n        out = parallel(\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/parallel.py\", line 1056, in __call__\r\n        self.retrieve()\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/parallel.py\", line 935, in retrieve\r\n        self._output.extend(job.get(timeout=self.timeout))\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/site-packages/joblib/_parallel_backends.py\", line 542, in wrap_future_result\r\n        return future.result(timeout=timeout)\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/concurrent/futures/_base.py\", line 437, in result\r\n        return self.__get_result()\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/concurrent/futures/_base.py\", line 389, in __get_result\r\n        raise self._exception\r\n    ValueError: Input contains NaN, infinity or a value too large for dtype('float64').\r\nTrying:\r\n    y_pred = gscv.predict(fh=[1,2,3])\r\nExpecting nothing\r\n**********************************************************************\r\nFile \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 432, in _tune.ForecastingGridSearchCV\r\nFailed example:\r\n    y_pred = gscv.predict(fh=[1,2,3])\r\nException raised:\r\n    Traceback (most recent call last):\r\n      File \"/root/miniconda/envs/sktime-dev/lib/python3.8/doctest.py\", line 1336, in __run\r\n        exec(compile(example.source, filename, \"single\",\r\n      File \"<doctest _tune.ForecastingGridSearchCV[24]>\", line 1, in <module>\r\n        y_pred = gscv.predict(fh=[1,2,3])\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/base/_base.py\", line 212, in predict\r\n        self.check_is_fitted()\r\n      File \"/root/sktime_dev/sktime/sktime/forecasting/model_selection/_tune.py\", line 162, in check_is_fitted\r\n        super(BaseGridSearch, self).check_is_fitted()\r\n      File \"/root/sktime_dev/sktime/sktime/base/_base.py\", line 385, in check_is_fitted\r\n        raise NotFittedError(\r\n    sktime.exceptions.NotFittedError: This instance of ForecastingGridSearchCV has not been fitted yet; please call `fit` first.\r\n19 items had no tests:\r\n    _tune\r\n    _tune.BaseGridSearch\r\n    _tune.BaseGridSearch.__init__\r\n    _tune.BaseGridSearch._fit\r\n    _tune.BaseGridSearch._predict\r\n    _tune.BaseGridSearch._run_search\r\n    _tune.BaseGridSearch._update\r\n    _tune.BaseGridSearch.check_is_fitted\r\n    _tune.BaseGridSearch.get_fitted_params\r\n    _tune.BaseGridSearch.inverse_transform\r\n    _tune.BaseGridSearch.score\r\n    _tune.BaseGridSearch.transform\r\n    _tune.ForecastingGridSearchCV.__init__\r\n    _tune.ForecastingGridSearchCV._run_search\r\n    _tune.ForecastingGridSearchCV.get_test_params\r\n    _tune.ForecastingRandomizedSearchCV\r\n    _tune.ForecastingRandomizedSearchCV.__init__\r\n    _tune.ForecastingRandomizedSearchCV._run_search\r\n    _tune.ForecastingRandomizedSearchCV.get_test_params\r\n**********************************************************************\r\n1 items had failures:\r\n   2 of  25 in _tune.ForecastingGridSearchCV\r\n25 tests in 20 items.\r\n23 passed and 2 failed.\r\n***Test Failed*** 2 failures.\r\n```\r\n\r\nThe second error is caused by the first one.\r\nIt is strange that all unit tests except this one have passed.\r\nI have installed dependency by \"pip install -e . [dev]\" and \"pip install -e . [all_extras]\" and I hope no package is lost.\r\nHere is my pip list:\r\n```\r\nPackage               Version   Location\r\n--------------------- --------- -----------------------\r\narviz                 0.11.4\r\nattrs                 21.4.0\r\nbackports.zoneinfo    0.2.1\r\ncertifi               2021.10.8\r\ncfgv                  3.3.1\r\ncftime                1.5.1.1\r\ncharset-normalizer    2.0.12\r\nclick                 8.0.4\r\ncloudpickle           2.0.0\r\ncmdstanpy             0.9.68\r\ncolorama              0.4.4\r\nconvertdate           2.4.0\r\ncoverage              6.3.2\r\ncycler                0.11.0\r\nCython                0.29.25\r\ndask                  2022.2.1\r\nDeprecated            1.2.13\r\ndistlib               0.3.4\r\ndistributed           2022.2.1\r\ndtw-python            1.1.12\r\nephem                 4.1.2\r\nesig                  0.9.7\r\nexecnet               1.9.0\r\nfilelock              3.6.0\r\nfonttools             4.29.1\r\nfsspec                2022.2.0\r\nhcrystalball          0.1.11\r\nHeapDict              1.0.1\r\nhijri-converter       2.2.3\r\nholidays              0.13\r\nidentify              2.4.11\r\nidna                  3.3\r\nimportlib-metadata    4.11.2\r\niniconfig             1.1.1\r\nJinja2                3.0.3\r\njoblib                1.1.0\r\nkiwisolver            1.3.2\r\nkorean-lunar-calendar 0.2.1\r\nllvmlite              0.38.0\r\nlocket                0.2.1\r\nLunarCalendar         0.0.9\r\nlunardate             0.2.0\r\nMarkupSafe            2.1.0\r\nmatplotlib            3.5.1\r\nmatrixprofile         1.1.10\r\nmsgpack               1.0.3\r\nnetCDF4               1.5.7\r\nnodeenv               1.6.0\r\nnumba                 0.55.1\r\nnumpy                 1.21.5\r\npackaging             21.3\r\npandas                1.2.3\r\npartd                 1.2.0\r\npatsy                 0.5.2\r\nPillow                9.0.1\r\npip                   21.2.4\r\nplatformdirs          2.5.1\r\npluggy                1.0.0\r\npmdarima              1.8.5\r\npre-commit            2.17.0\r\nprophet               1.0.1\r\nprotobuf              3.11.2\r\npsutil                5.9.0\r\npy                    1.11.0\r\npyluach               1.4.0\r\nPyMeeus               0.5.10\r\npyod                  0.9.8\r\npyparsing             3.0.7\r\npystan                2.19.1.1\r\npytest                7.0.1\r\npytest-cov            3.0.0\r\npytest-forked         1.4.0\r\npytest-xdist          2.5.0\r\npython-dateutil       2.8.2\r\npytz                  2021.3\r\nPyYAML                6.0\r\nrequests              2.27.1\r\nscikit-learn          1.0.2\r\nscikit-posthocs       0.6.7\r\nscipy                 1.5.3\r\nseaborn               0.11.2\r\nsetuptools            58.0.4\r\nsetuptools-git        1.2\r\nsix                   1.16.0\r\nsktime                0.10.1    /root/sktime_dev/sktime\r\nsortedcontainers      2.4.0\r\nstatsmodels           0.13.2\r\nstumpy                1.10.2\r\ntbats                 1.1.0\r\ntblib                 1.7.0\r\nthreadpoolctl         3.1.0\r\ntoml                  0.10.2\r\ntomli                 2.0.1\r\ntoolz                 0.11.2\r\ntornado               6.1\r\ntqdm                  4.63.0\r\ntsfresh               0.19.0\r\ntslearn               0.5.2\r\ntyping-extensions     3.10.0.2\r\nujson                 5.1.0\r\nurllib3               1.26.8\r\nvirtualenv            20.13.3\r\nwheel                 0.37.1\r\nworkalendar           16.3.0\r\nwrapt                 1.13.3\r\nxarray                2022.3.0\r\nzict                  2.1.0\r\nzipp                  3.7.0\r\n```","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1063585495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false}},{"id":6221207674,"node_id":"ATPE_lADOCVKAsc5FYDIOzwAAAAFy0Bh6","url":"https://api.github.com/repos/sktime/sktime/issues/events/6221207674","actor":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"event":"added_to_project","commit_id":null,"commit_url":null,"created_at":"2022-03-10T22:38:31Z","project_card":{"id":78939225,"url":"https://api.github.com/projects/columns/cards/78939225","project_id":5198515,"project_url":"https://api.github.com/projects/5198515","column_name":"Needs triage & validation"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1064580277","html_url":"https://github.com/sktime/sktime/issues/2185#issuecomment-1064580277","issue_url":"https://api.github.com/repos/sktime/sktime/issues/2185","id":1064580277,"node_id":"IC_kwDOCVKAsc4_dDS1","user":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"created_at":"2022-03-10T22:39:53Z","updated_at":"2022-03-10T22:39:53Z","author_association":"COLLABORATOR","body":"I have python 3.8.12 too, testing on windows and with sktime 0.10.1 - the example runs without problems, cannot reproduce the bug.\r\n\r\nWhich operating system are you using, @hmtbgc?","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1064580277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false}},{"id":6221213414,"node_id":"MEE_lADOCVKAsc5FYDIOzwAAAAFy0C7m","url":"https://api.github.com/repos/sktime/sktime/issues/events/6221213414","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-03-10T22:39:54Z","performed_via_github_app":null},{"id":6221213421,"node_id":"SE_lADOCVKAsc5FYDIOzwAAAAFy0C7t","url":"https://api.github.com/repos/sktime/sktime/issues/events/6221213421","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-03-10T22:39:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1065073623","html_url":"https://github.com/sktime/sktime/issues/2185#issuecomment-1065073623","issue_url":"https://api.github.com/repos/sktime/sktime/issues/2185","id":1065073623,"node_id":"IC_kwDOCVKAsc4_e7vX","user":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"created_at":"2022-03-11T12:33:54Z","updated_at":"2022-03-11T12:33:54Z","author_association":"CONTRIBUTOR","body":"My operating system is Ubuntu 18.04 and I have test the newest version of sktime and it still has the same error.","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1065073623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1076017444","html_url":"https://github.com/sktime/sktime/issues/2185#issuecomment-1076017444","issue_url":"https://api.github.com/repos/sktime/sktime/issues/2185","id":1076017444,"node_id":"IC_kwDOCVKAsc5AIrkk","user":{"login":"k1m190r","id":148415,"node_id":"MDQ6VXNlcjE0ODQxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/148415?v=4","gravatar_id":"","url":"https://api.github.com/users/k1m190r","html_url":"https://github.com/k1m190r","followers_url":"https://api.github.com/users/k1m190r/followers","following_url":"https://api.github.com/users/k1m190r/following{/other_user}","gists_url":"https://api.github.com/users/k1m190r/gists{/gist_id}","starred_url":"https://api.github.com/users/k1m190r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k1m190r/subscriptions","organizations_url":"https://api.github.com/users/k1m190r/orgs","repos_url":"https://api.github.com/users/k1m190r/repos","events_url":"https://api.github.com/users/k1m190r/events{/privacy}","received_events_url":"https://api.github.com/users/k1m190r/received_events","type":"User","site_admin":false},"created_at":"2022-03-23T07:35:02Z","updated_at":"2022-03-23T07:35:26Z","author_association":"CONTRIBUTOR","body":"Reproducing under Ubuntu 20 (WSL), I'll take a look a this one.","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1076017444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"k1m190r","id":148415,"node_id":"MDQ6VXNlcjE0ODQxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/148415?v=4","gravatar_id":"","url":"https://api.github.com/users/k1m190r","html_url":"https://github.com/k1m190r","followers_url":"https://api.github.com/users/k1m190r/followers","following_url":"https://api.github.com/users/k1m190r/following{/other_user}","gists_url":"https://api.github.com/users/k1m190r/gists{/gist_id}","starred_url":"https://api.github.com/users/k1m190r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k1m190r/subscriptions","organizations_url":"https://api.github.com/users/k1m190r/orgs","repos_url":"https://api.github.com/users/k1m190r/repos","events_url":"https://api.github.com/users/k1m190r/events{/privacy}","received_events_url":"https://api.github.com/users/k1m190r/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1078610894","html_url":"https://github.com/sktime/sktime/issues/2185#issuecomment-1078610894","issue_url":"https://api.github.com/repos/sktime/sktime/issues/2185","id":1078610894,"node_id":"IC_kwDOCVKAsc5ASkvO","user":{"login":"k1m190r","id":148415,"node_id":"MDQ6VXNlcjE0ODQxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/148415?v=4","gravatar_id":"","url":"https://api.github.com/users/k1m190r","html_url":"https://github.com/k1m190r","followers_url":"https://api.github.com/users/k1m190r/followers","following_url":"https://api.github.com/users/k1m190r/following{/other_user}","gists_url":"https://api.github.com/users/k1m190r/gists{/gist_id}","starred_url":"https://api.github.com/users/k1m190r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k1m190r/subscriptions","organizations_url":"https://api.github.com/users/k1m190r/orgs","repos_url":"https://api.github.com/users/k1m190r/repos","events_url":"https://api.github.com/users/k1m190r/events{/privacy}","received_events_url":"https://api.github.com/users/k1m190r/received_events","type":"User","site_admin":false},"created_at":"2022-03-25T03:12:31Z","updated_at":"2022-03-25T12:37:55Z","author_association":"CONTRIBUTOR","body":"TLDR:\r\n- bug is outside of sktime in `statsmodels` and python version dependent... \r\n- related to [statsmodels#6243](https://github.com/statsmodels/statsmodels/issues/6243)\r\n- [suggested solution ](https://github.com/statsmodels/statsmodels/issues/6243#issuecomment-816625052) is to install the nightly build of statsmodels\r\n`pip install -i https://pypi.anaconda.org/scipy-wheels-nightly/simple statsmodels` or build from master.\r\n\r\n@hmtbgc please check if suggestion fixes your problem. Suggesting to close and move to `Fixed/resolved`.\r\n\r\nOK this is really weird, the root cause is somewhere outside of sktime in `statsmodels`.\r\nThe test that is failing, is failing with specific forecaster `ExponentialSmoothing` if `trend=\"mul\"` just as reported by @mloning [here](https://github.com/statsmodels/statsmodels/issues/6243#issuecomment-816616341).\r\n\r\nthis line does not converge sometimes... a little more below...\r\n[`forecaster.fit(y_train, X_train, fh=fh, **fit_params)`](https://github.com/alan-turing-institute/sktime/blob/b36eeca85a9735a4b899e41437c72991a9f396c7/sktime/forecasting/model_evaluation/_functions.py#L110)\r\n\r\nwith this warning, which is not visible since failure happens in the child process:\r\n```\r\n/home/biosckon/miniconda3/envs/sk10_py37/lib/python3.7/site-packages/statsmodels/tsa/holtwinters/model.py:917: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.\r\n```\r\n\r\nwhich causes this line:\r\n[`y_pred = forecaster.predict(fh, X=X_test)`](https://github.com/alan-turing-institute/sktime/blob/b36eeca85a9735a4b899e41437c72991a9f396c7/sktime/forecasting/model_evaluation/_functions.py#L118)\r\nto produce:\r\n```\r\n1993-01   NaN\r\n1993-02   NaN\r\n1993-03   NaN\r\nFreq: M, dtype: float64\r\n```\r\n\r\nand finally `ValueError` as in the original report at this line:\r\n[`score = scoring(y_test, y_pred, y_train=y_train)`](https://github.com/alan-turing-institute/sktime/blob/b36eeca85a9735a4b899e41437c72991a9f396c7/sktime/forecasting/model_evaluation/_functions.py#L122)\r\n\r\nIn my setup it fails only under Ubuntu 20 with Python 3.7.\r\nIt does **not** fail under 3.8 or 3.9, and not under Windows.\r\nSo something in the `statsmodels` is \"sensitive\" :) so for now try different Python version 3.9 perhaps.\r\n\r\nCan be replicated with this... sometimes.\r\n\r\n```python\r\nimport numpy as np\r\nfrom sktime.datasets import load_shampoo_sales\r\nfrom sktime.forecasting.base import ForecastingHorizon\r\nfrom sktime.forecasting.exp_smoothing import ExponentialSmoothing\r\nfrom sktime.forecasting.model_evaluation._functions import _split\r\n\r\ny = load_shampoo_sales()\r\nX = None\r\ntrain = np.arange(24)\r\ntest = np.array([24, 25, 26])\r\nfh = [1, 2, 3]\r\nfit_params = {}\r\n\r\nforecaster = ExponentialSmoothing(trend=\"mul\", sp=12)\r\ny_train, y_test, X_train, X_test = _split(y, X, train, test, fh)\r\nfh = ForecastingHorizon(y_test.index, is_relative=False)\r\nforecaster.fit(y_train, X_train, fh=fh, **fit_params)\r\ny_pred = forecaster.predict(fh, X=X_test)\r\ny_pred\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1078610894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"k1m190r","id":148415,"node_id":"MDQ6VXNlcjE0ODQxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/148415?v=4","gravatar_id":"","url":"https://api.github.com/users/k1m190r","html_url":"https://github.com/k1m190r","followers_url":"https://api.github.com/users/k1m190r/followers","following_url":"https://api.github.com/users/k1m190r/following{/other_user}","gists_url":"https://api.github.com/users/k1m190r/gists{/gist_id}","starred_url":"https://api.github.com/users/k1m190r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k1m190r/subscriptions","organizations_url":"https://api.github.com/users/k1m190r/orgs","repos_url":"https://api.github.com/users/k1m190r/repos","events_url":"https://api.github.com/users/k1m190r/events{/privacy}","received_events_url":"https://api.github.com/users/k1m190r/received_events","type":"User","site_admin":false}},{"id":6306943777,"node_id":"MEE_lADOCVKAsc5FYDIOzwAAAAF37FMh","url":"https://api.github.com/repos/sktime/sktime/issues/events/6306943777","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-03-25T12:28:41Z","performed_via_github_app":null},{"id":6306943794,"node_id":"SE_lADOCVKAsc5FYDIOzwAAAAF37FMy","url":"https://api.github.com/repos/sktime/sktime/issues/events/6306943794","actor":{"login":"hmtbgc","id":32740258,"node_id":"MDQ6VXNlcjMyNzQwMjU4","avatar_url":"https://avatars.githubusercontent.com/u/32740258?v=4","gravatar_id":"","url":"https://api.github.com/users/hmtbgc","html_url":"https://github.com/hmtbgc","followers_url":"https://api.github.com/users/hmtbgc/followers","following_url":"https://api.github.com/users/hmtbgc/following{/other_user}","gists_url":"https://api.github.com/users/hmtbgc/gists{/gist_id}","starred_url":"https://api.github.com/users/hmtbgc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmtbgc/subscriptions","organizations_url":"https://api.github.com/users/hmtbgc/orgs","repos_url":"https://api.github.com/users/hmtbgc/repos","events_url":"https://api.github.com/users/hmtbgc/events{/privacy}","received_events_url":"https://api.github.com/users/hmtbgc/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-03-25T12:28:41Z","performed_via_github_app":null},{"id":6306980134,"node_id":"MEE_lADOCVKAsc5FYDIOzwAAAAF37OEm","url":"https://api.github.com/repos/sktime/sktime/issues/events/6306980134","actor":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-03-25T12:35:08Z","performed_via_github_app":null},{"id":6306980140,"node_id":"SE_lADOCVKAsc5FYDIOzwAAAAF37OEs","url":"https://api.github.com/repos/sktime/sktime/issues/events/6306980140","actor":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-03-25T12:35:08Z","performed_via_github_app":null}]