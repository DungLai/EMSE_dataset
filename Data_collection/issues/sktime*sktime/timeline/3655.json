[{"id":7681476210,"node_id":"LE_lADOCVKAsc5U92M6zwAAAAHJ2gZy","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681476210","actor":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-27T11:43:59Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293428062","html_url":"https://github.com/sktime/sktime/issues/3655#issuecomment-1293428062","issue_url":"https://api.github.com/repos/sktime/sktime/issues/3655","id":1293428062,"node_id":"IC_kwDOCVKAsc5NGCVe","user":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"created_at":"2022-10-27T12:06:09Z","updated_at":"2022-10-27T12:06:09Z","author_association":"COLLABORATOR","body":"Hi @AnHo4ng , seems the underlying forecaster `sktime.PolynomialTrendForecaster(degree=1)` which is used in `method=\"drift\"` cant handle `inf` values, this is also what the exception message says. What would be your proposed change? I can think of replacing first all values given in `missing_values` with `nan`, this might however collide with other `nan` in the data that the user actually does not want to impute?","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293428062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false}},{"id":7681640516,"node_id":"MEE_lADOCVKAsc5U92M6zwAAAAHJ3IhE","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681640516","actor":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:06:09Z","performed_via_github_app":null},{"id":7681640520,"node_id":"SE_lADOCVKAsc5U92M6zwAAAAHJ3IhI","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681640520","actor":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:06:09Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293445172","html_url":"https://github.com/sktime/sktime/issues/3655#issuecomment-1293445172","issue_url":"https://api.github.com/repos/sktime/sktime/issues/3655","id":1293445172,"node_id":"IC_kwDOCVKAsc5NGGg0","user":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false},"created_at":"2022-10-27T12:22:05Z","updated_at":"2022-10-27T12:22:17Z","author_association":"NONE","body":"@aiwalter Regardless if `nan` should be imputed it can not be passed to the `PolynomialTrendForecaster`. An idea that I had would be to:\r\n\r\n1. Replace anything in `missing_values` with `nan`\r\n2. Do bfill and ffill\r\n3. Fit the PolynomialTrendForecaster on the time series without `nan`\r\n4. Impute only the values that are in `missing_values`\r\n\r\nThis makes sure that `PolynomialTrendForecaster` does not fail and that no values are imputed that are not in `missing_values`.","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293445172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false}},{"id":7681764744,"node_id":"MEE_lADOCVKAsc5U92M6zwAAAAHJ3m2I","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681764744","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:22:17Z","performed_via_github_app":null},{"id":7681764749,"node_id":"SE_lADOCVKAsc5U92M6zwAAAAHJ3m2N","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681764749","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:22:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293466774","html_url":"https://github.com/sktime/sktime/issues/3655#issuecomment-1293466774","issue_url":"https://api.github.com/repos/sktime/sktime/issues/3655","id":1293466774,"node_id":"IC_kwDOCVKAsc5NGLyW","user":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"created_at":"2022-10-27T12:39:48Z","updated_at":"2022-10-27T12:39:48Z","author_association":"COLLABORATOR","body":"> @aiwalter Regardless if nan should be imputed it can not be passed to the PolynomialTrendForecaster\r\n\r\nThis is not correct, `PolynomialTrendForecaster` can fit on data that contains `nan` which is currently already happening in `Imputer`.\r\n\r\n> Replace anything in missing_values with nan\r\nThis will have an impact on the `PolynomialTrendForecaster` because it is fitting on different data than how its currently implemented.\r\n\r\nMy proposed solution is as folows. In `transform` we already do this:\r\nhttps://github.com/sktime/sktime/blob/4194aacaa105ef59807ea56c1bb3497b37eb1613/sktime/transformations/series/impute.py#L175-L176\r\n\r\nThis leads to the behaviour described in docstring:\r\n```\r\n    missing_values : int/float/str, default=None\r\n        The placeholder for the missing values. All occurrences of\r\n        missing_values will be imputed, in addition to np.nan.\r\n```\r\nThis 2 lines above should just be copied to `fit` as well. Btw. it seems `missing_values` can also be of type `List` which is not mentioned in the docstring.","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293466774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false}},{"id":7681910153,"node_id":"MEE_lADOCVKAsc5U92M6zwAAAAHJ4KWJ","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681910153","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:39:49Z","performed_via_github_app":null},{"id":7681910159,"node_id":"SE_lADOCVKAsc5U92M6zwAAAAHJ4KWP","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681910159","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:39:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293469538","html_url":"https://github.com/sktime/sktime/issues/3655#issuecomment-1293469538","issue_url":"https://api.github.com/repos/sktime/sktime/issues/3655","id":1293469538,"node_id":"IC_kwDOCVKAsc5NGMdi","user":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false},"created_at":"2022-10-27T12:42:00Z","updated_at":"2022-10-27T12:42:00Z","author_association":"NONE","body":"@aiwalter This sounds like an elegant solution! If you want I can create the PR myself.","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293469538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AnHo4ng","id":79849967,"node_id":"MDQ6VXNlcjc5ODQ5OTY3","avatar_url":"https://avatars.githubusercontent.com/u/79849967?v=4","gravatar_id":"","url":"https://api.github.com/users/AnHo4ng","html_url":"https://github.com/AnHo4ng","followers_url":"https://api.github.com/users/AnHo4ng/followers","following_url":"https://api.github.com/users/AnHo4ng/following{/other_user}","gists_url":"https://api.github.com/users/AnHo4ng/gists{/gist_id}","starred_url":"https://api.github.com/users/AnHo4ng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnHo4ng/subscriptions","organizations_url":"https://api.github.com/users/AnHo4ng/orgs","repos_url":"https://api.github.com/users/AnHo4ng/repos","events_url":"https://api.github.com/users/AnHo4ng/events{/privacy}","received_events_url":"https://api.github.com/users/AnHo4ng/received_events","type":"User","site_admin":false}},{"id":7681929172,"node_id":"MEE_lADOCVKAsc5U92M6zwAAAAHJ4O_U","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681929172","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:42:00Z","performed_via_github_app":null},{"id":7681929183,"node_id":"SE_lADOCVKAsc5U92M6zwAAAAHJ4O_f","url":"https://api.github.com/repos/sktime/sktime/issues/events/7681929183","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-27T12:42:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293482109","html_url":"https://github.com/sktime/sktime/issues/3655#issuecomment-1293482109","issue_url":"https://api.github.com/repos/sktime/sktime/issues/3655","id":1293482109,"node_id":"IC_kwDOCVKAsc5NGPh9","user":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"created_at":"2022-10-27T12:52:37Z","updated_at":"2022-10-27T12:52:37Z","author_association":"COLLABORATOR","body":"sorry I was wrong. The `PolynomialTrendForecaster` cant fit on `nan` but it is working in `Imputer` because of this:\r\n\r\nhttps://github.com/sktime/sktime/blob/4194aacaa105ef59807ea56c1bb3497b37eb1613/sktime/transformations/series/impute.py#L291-L292\r\n\r\nSo actually this is already the solution you mentioned above. Then I would say if we have this already we just need to add \r\n```\r\n if self.missing_values: \r\n     X = X.replace(to_replace=self.missing_values, value=np.nan)\r\n     # probably also doing this for y\r\n     y = y.replace(to_replace=self.missing_values, value=np.nan)\r\n     # this is as in `transform`\r\n     y=X.fillna(method=\"ffill\").fillna(method=\"backfill\")\r\n     X=y.fillna(method=\"ffill\").fillna(method=\"backfill\") \r\n```\r\nto the `fit` method I think :) Ideally also changing the docstring to describe this and to fix the type of `missing_values`\r\n\r\n>  If you want I can create the PR myself.\r\n\r\nThat would be cool!","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/comments/1293482109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false}},{"id":7683098446,"node_id":"LE_lADOCVKAsc5U92M6zwAAAAHJ8sdO","url":"https://api.github.com/repos/sktime/sktime/issues/events/7683098446","actor":{"login":"MatthewMiddlehurst","id":25731235,"node_id":"MDQ6VXNlcjI1NzMxMjM1","avatar_url":"https://avatars.githubusercontent.com/u/25731235?v=4","gravatar_id":"","url":"https://api.github.com/users/MatthewMiddlehurst","html_url":"https://github.com/MatthewMiddlehurst","followers_url":"https://api.github.com/users/MatthewMiddlehurst/followers","following_url":"https://api.github.com/users/MatthewMiddlehurst/following{/other_user}","gists_url":"https://api.github.com/users/MatthewMiddlehurst/gists{/gist_id}","starred_url":"https://api.github.com/users/MatthewMiddlehurst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MatthewMiddlehurst/subscriptions","organizations_url":"https://api.github.com/users/MatthewMiddlehurst/orgs","repos_url":"https://api.github.com/users/MatthewMiddlehurst/repos","events_url":"https://api.github.com/users/MatthewMiddlehurst/events{/privacy}","received_events_url":"https://api.github.com/users/MatthewMiddlehurst/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-27T14:46:49Z","label":{"name":"module:transformations","color":"0865AF"},"performed_via_github_app":null},{"actor":{"login":"AnH0ang","id":46025351,"node_id":"MDQ6VXNlcjQ2MDI1MzUx","avatar_url":"https://avatars.githubusercontent.com/u/46025351?v=4","gravatar_id":"","url":"https://api.github.com/users/AnH0ang","html_url":"https://github.com/AnH0ang","followers_url":"https://api.github.com/users/AnH0ang/followers","following_url":"https://api.github.com/users/AnH0ang/following{/other_user}","gists_url":"https://api.github.com/users/AnH0ang/gists{/gist_id}","starred_url":"https://api.github.com/users/AnH0ang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnH0ang/subscriptions","organizations_url":"https://api.github.com/users/AnH0ang/orgs","repos_url":"https://api.github.com/users/AnH0ang/repos","events_url":"https://api.github.com/users/AnH0ang/events{/privacy}","received_events_url":"https://api.github.com/users/AnH0ang/received_events","type":"User","site_admin":false},"created_at":"2022-10-27T15:54:10Z","updated_at":"2022-10-27T15:54:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/sktime/sktime/issues/3659","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/3659/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/3659/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/3659/events","html_url":"https://github.com/sktime/sktime/pull/3659","id":1425874457,"node_id":"PR_kwDOCVKAsc5BrcyB","number":3659,"title":"[BUG] Fix handling of `missing_values` in `Imputer`","user":{"login":"AnH0ang","id":46025351,"node_id":"MDQ6VXNlcjQ2MDI1MzUx","avatar_url":"https://avatars.githubusercontent.com/u/46025351?v=4","gravatar_id":"","url":"https://api.github.com/users/AnH0ang","html_url":"https://github.com/AnH0ang","followers_url":"https://api.github.com/users/AnH0ang/followers","following_url":"https://api.github.com/users/AnH0ang/following{/other_user}","gists_url":"https://api.github.com/users/AnH0ang/gists{/gist_id}","starred_url":"https://api.github.com/users/AnH0ang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AnH0ang/subscriptions","organizations_url":"https://api.github.com/users/AnH0ang/orgs","repos_url":"https://api.github.com/users/AnH0ang/repos","events_url":"https://api.github.com/users/AnH0ang/events{/privacy}","received_events_url":"https://api.github.com/users/AnH0ang/received_events","type":"User","site_admin":false},"labels":[{"id":3105907331,"node_id":"MDU6TGFiZWwzMTA1OTA3MzMx","url":"https://api.github.com/repos/sktime/sktime/labels/module:transformations","name":"module:transformations","color":"0865AF","default":false,"description":""},{"id":3789332481,"node_id":"LA_kwDOCVKAsc7h3KAB","url":"https://api.github.com/repos/sktime/sktime/labels/bugfix","name":"bugfix","color":"CE54AC","default":false,"description":"Fixes a known bug or removes unintended behavior"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-10-27T15:54:10Z","updated_at":"2022-12-28T01:31:07Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":156401841,"node_id":"MDEwOlJlcG9zaXRvcnkxNTY0MDE4NDE=","name":"sktime","full_name":"sktime/sktime","private":false,"owner":{"login":"sktime","id":56396127,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Mzk2MTI3","avatar_url":"https://avatars.githubusercontent.com/u/56396127?v=4","gravatar_id":"","url":"https://api.github.com/users/sktime","html_url":"https://github.com/sktime","followers_url":"https://api.github.com/users/sktime/followers","following_url":"https://api.github.com/users/sktime/following{/other_user}","gists_url":"https://api.github.com/users/sktime/gists{/gist_id}","starred_url":"https://api.github.com/users/sktime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sktime/subscriptions","organizations_url":"https://api.github.com/users/sktime/orgs","repos_url":"https://api.github.com/users/sktime/repos","events_url":"https://api.github.com/users/sktime/events{/privacy}","received_events_url":"https://api.github.com/users/sktime/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/sktime/sktime","description":"A unified framework for machine learning with time series","fork":false,"url":"https://api.github.com/repos/sktime/sktime","forks_url":"https://api.github.com/repos/sktime/sktime/forks","keys_url":"https://api.github.com/repos/sktime/sktime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/sktime/sktime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/sktime/sktime/teams","hooks_url":"https://api.github.com/repos/sktime/sktime/hooks","issue_events_url":"https://api.github.com/repos/sktime/sktime/issues/events{/number}","events_url":"https://api.github.com/repos/sktime/sktime/events","assignees_url":"https://api.github.com/repos/sktime/sktime/assignees{/user}","branches_url":"https://api.github.com/repos/sktime/sktime/branches{/branch}","tags_url":"https://api.github.com/repos/sktime/sktime/tags","blobs_url":"https://api.github.com/repos/sktime/sktime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/sktime/sktime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/sktime/sktime/git/refs{/sha}","trees_url":"https://api.github.com/repos/sktime/sktime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/sktime/sktime/statuses/{sha}","languages_url":"https://api.github.com/repos/sktime/sktime/languages","stargazers_url":"https://api.github.com/repos/sktime/sktime/stargazers","contributors_url":"https://api.github.com/repos/sktime/sktime/contributors","subscribers_url":"https://api.github.com/repos/sktime/sktime/subscribers","subscription_url":"https://api.github.com/repos/sktime/sktime/subscription","commits_url":"https://api.github.com/repos/sktime/sktime/commits{/sha}","git_commits_url":"https://api.github.com/repos/sktime/sktime/git/commits{/sha}","comments_url":"https://api.github.com/repos/sktime/sktime/comments{/number}","issue_comment_url":"https://api.github.com/repos/sktime/sktime/issues/comments{/number}","contents_url":"https://api.github.com/repos/sktime/sktime/contents/{+path}","compare_url":"https://api.github.com/repos/sktime/sktime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/sktime/sktime/merges","archive_url":"https://api.github.com/repos/sktime/sktime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/sktime/sktime/downloads","issues_url":"https://api.github.com/repos/sktime/sktime/issues{/number}","pulls_url":"https://api.github.com/repos/sktime/sktime/pulls{/number}","milestones_url":"https://api.github.com/repos/sktime/sktime/milestones{/number}","notifications_url":"https://api.github.com/repos/sktime/sktime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/sktime/sktime/labels{/name}","releases_url":"https://api.github.com/repos/sktime/sktime/releases{/id}","deployments_url":"https://api.github.com/repos/sktime/sktime/deployments","created_at":"2018-11-06T15:08:24Z","updated_at":"2023-01-18T23:14:26Z","pushed_at":"2023-01-19T01:03:12Z","git_url":"git://github.com/sktime/sktime.git","ssh_url":"git@github.com:sktime/sktime.git","clone_url":"https://github.com/sktime/sktime.git","svn_url":"https://github.com/sktime/sktime","homepage":"https://sktime.org","size":56007,"stargazers_count":6043,"watchers_count":6043,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1009,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":649,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["data-mining","data-science","forecasting","machine-learning","scikit-learn","time-series","time-series-analysis","time-series-classification","time-series-regression"],"visibility":"public","forks":1009,"open_issues":649,"watchers":6043,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/sktime/sktime/pulls/3659","html_url":"https://github.com/sktime/sktime/pull/3659","diff_url":"https://github.com/sktime/sktime/pull/3659.diff","patch_url":"https://github.com/sktime/sktime/pull/3659.patch","merged_at":null},"body":"<!--\r\nThanks for contributing a pull request! Please ensure you have taken a look\r\nat our contribution guide: https://github.com/sktime/sktime/blob/main/CONTRIBUTING.md\r\n-->\r\n\r\n#### Reference Issues/PRs\r\n\r\n<!--\r\nExample: Fixes #1234. See also #3456.\r\n\r\nPlease use keywords (e.g., Fixes) to create link to the issues or pull requests\r\nyou resolved, so that they will automatically be closed when your pull request\r\nis merged. See https://github.com/blog/1506-closing-issues-via-pull-requests\r\n-->\r\n\r\nFixes #3655. This PR solves a bug in `sktime.transformations.series.impute.Imputer`. The problem is that abnormal values such as `np.inf` that are passed to the `Imputer` are not handled before calculating metrics such as `std` or fitting forecasters. This leads to an error.\r\n\r\n\r\n#### What does this implement/fix? Explain your changes.\r\n\r\nThe values that are specified in `missing_values` are imputed with `np.nan` at three different locations for different reasons:\r\n* `_fit` -> Prevent errors when calculating `mean` or `median` with `np.inf` as an input.\r\n* `_get_random` -> Prevent errors when sampling from uniform distribution with `np.inf` as an input.\r\n* `_impute_with_forecaster` -> Prevent errors when `np.inf` is passed to underlying forecasters.\r\n\r\n#### Does your contribution introduce a new dependency? If yes, which one?\r\n\r\n<!--\r\nIf your contribution does add a new hard dependency, we may suggest to initially develop your contribution in a separate companion package in https://github.com/sktime/ to keep external dependencies of the core sktime package to a minimum.\r\n-->\r\n\r\n#### What should a reviewer concentrate their feedback on?\r\n\r\n<!-- This section is particularly useful if you have a pull request that is still in development. You can guide the reviews to focus on the parts that are ready for their comments. We suggest using bullets (indicated by * or -) and filled checkboxes [x] here -->\r\n\r\n#### Any other comments?\r\n<!--\r\nPlease be aware that we are a loose team of volunteers so patience is necessary; assistance handling other issues is very welcome. We value all user contributions, no matter how minor they are. If we are slow to review, either the pull request needs some benchmarking, tinkering, convincing, etc. or more likely the reviewers are simply busy. In either case, we ask for your understanding during the review process.\r\n-->\r\n\r\n#### PR checklist\r\n<!--\r\nPlease go through the checklist below. Please feel free to remove points if they are not applicable.\r\n-->\r\n\r\n##### For all contributions\r\n- [ ] I've added myself to the [list of contributors](https://github.com/sktime/sktime/blob/main/.all-contributorsrc).\r\n- [ ] Optionally, I've updated sktime's [CODEOWNERS](https://github.com/sktime/sktime/blob/main/CODEOWNERS) to receive notifications about future changes to these files.\r\n- [ ] I've added unit tests and made sure they pass locally.\r\n- [ ] The PR title starts with either [ENH], [MNT], [DOC], or [BUG] indicating whether the PR topic is related to enhancement, maintenance, documentation, or bug.\r\n\r\n##### For new estimators\r\n- [ ] I've added the estimator to the online documentation.\r\n- [ ] I've updated the existing example notebooks or provided a new one to showcase how my estimator works.\r\n\r\n\r\n<!--\r\nThanks for contributing!\r\n-->\r\n","reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/3659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/3659/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]