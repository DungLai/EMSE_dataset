{"url":"https://api.github.com/repos/sktime/sktime/issues/534","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/534/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/534/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/534/events","html_url":"https://github.com/sktime/sktime/issues/534","id":763066247,"node_id":"MDU6SXNzdWU3NjMwNjYyNDc=","number":534,"title":"[BUG] Absolute to relative ForecastingHorizon","user":{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":3105906374,"node_id":"MDU6TGFiZWwzMTA1OTA2Mzc0","url":"https://api.github.com/repos/sktime/sktime/labels/module:forecasting","name":"module:forecasting","color":"35FCCE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2020-12-11T23:49:45Z","updated_at":"2021-12-03T23:12:20Z","closed_at":"2021-12-03T23:05:37Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-5-40dcb829593a> in <module>\r\n      4 y_train, y_test = temporal_train_test_split(y, test_size=120)\r\n      5 fh = ForecastingHorizon(y_test.index[0:5], is_relative=False)\r\n----> 6 fh.to_relative(cutoff=y_train.index[-1])\r\n\r\nc:\\Users\\Martin\\Desktop\\sktime\\sktime\\sktime\\forecasting\\base\\_fh.py in to_relative(self, cutoff)\r\n    223                 values = _coerce_duration_to_int(values, unit=_get_unit(cutoff))\r\n    224 \r\n--> 225             return self._new(values, is_relative=True)\r\n    226 \r\n    227     @lru_cache(typed=True)\r\n\r\nc:\\Users\\Martin\\Desktop\\sktime\\sktime\\sktime\\forecasting\\base\\_fh.py in _new(self, values, is_relative)\r\n    160         if is_relative is None:\r\n    161             is_relative = self.is_relative\r\n--> 162         return type(self)(values, is_relative)\r\n    163 \r\n    164     @property\r\n\r\nc:\\Users\\Martin\\Desktop\\sktime\\sktime\\sktime\\forecasting\\base\\_fh.py in __init__(self, values, is_relative)\r\n    137         if not isinstance(is_relative, bool):\r\n    138             raise TypeError(\"`is_relative` must be a boolean\")\r\n--> 139         values = _check_values(values)\r\n    140 \r\n    141         # check types, note that isinstance() does not work here because index\r\n\r\nc:\\Users\\Martin\\Desktop\\sktime\\sktime\\sktime\\forecasting\\base\\_fh.py in _check_values(values)\r\n    105     # check values does not contain duplicates\r\n    106     if len(values) != values.nunique():\r\n--> 107         raise ValueError(\"`values` must not contain duplicates.\")\r\n    108 \r\n    109     # return sorted values\r\n\r\nValueError: `values` must not contain duplicates.\r\n```\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nfrom sktime.forecasting.all import *\r\ny = load_airline()\r\ny.index = y.index.to_timestamp()\r\ny_train, y_test = temporal_train_test_split(y, test_size=120)\r\nfh = ForecastingHorizon(y_test.index[0:5], is_relative=False)\r\nfh.to_relative(cutoff=y_train.index[-1])\r\n```\r\n\r\n**Expected behavior**\r\nNo exception\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n-->\r\n\r\n**Versions**\r\nCurrent GitHub master\r\n\r\n<!--\r\nPlease run the following code snippet and paste the output here:\r\n \r\nfrom sktime import show_versions; show_versions()\r\n-->\r\n\r\n</details>\r\n\r\n<!-- Thanks for contributing! -->\r\n","closed_by":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/534/timeline","performed_via_github_app":null,"state_reason":"completed"}