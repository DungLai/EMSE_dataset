{"url":"https://api.github.com/repos/sktime/sktime/issues/2381","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/2381/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/2381/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/2381/events","html_url":"https://github.com/sktime/sktime/issues/2381","id":1191001508,"node_id":"I_kwDOCVKAsc5G_T2k","number":2381,"title":"[BUG] conversions `from_nested_to_long` and `from_nested_to_multi_index` are broken","user":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":3745673790,"node_id":"LA_kwDOCVKAsc7fQnI-","url":"https://api.github.com/repos/sktime/sktime/labels/module:datatypes","name":"module:datatypes","color":"bfdadc","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-04-03T18:01:46Z","updated_at":"2022-04-19T22:23:15Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"`from_nested_to_long` and `from_nested_to_multi_index` are broken, they do not return containers in accordance with the specifications.\r\nWe should:\r\n- [ ] fix this\r\n- [ ] understand why the current tests in `datatypes` do not catch this (most likely lack of coverage in the `_examples.py` fixture set)\r\n- [ ] ensure future tests catch this\r\n\r\nTo reproduce:\r\n\r\n```python\r\nfrom sktime.datasets import load_arrow_head\r\nfrom sktime.datatypes._panel._convert import from_nested_to_long\r\nX, y = load_arrow_head(return_X_y=True)\r\nfrom_nested_to_long(X)\r\n```\r\ngives \r\n![image](https://user-images.githubusercontent.com/7985502/161441544-bfe0693d-a367-451f-8aed-d7d42b6d4359.png)\r\n\r\nbut it should be\r\n![image](https://user-images.githubusercontent.com/7985502/161441547-13fb9120-8a2f-4185-9c76-a3bab61b0e43.png)\r\n\r\nA straightforward fix was attempted here:\r\nhttps://github.com/alan-turing-institute/sktime/pull/2375\r\n\r\nbut it seems to cause all kinds of strange ripple effects, especially in tsfresh and classifier modules.\r\n\r\nPartial investigation indicates that the ripple effects may be caused by casting of `dtype` in `pandas` and `numpy`, where the wrong type may or may not cause things to break.\r\n\r\nEven worse, the run https://github.com/alan-turing-institute/sktime/actions/runs/2085774075\r\nseem to suggest that the problematic behaviour is likely python version and/or operating system specific.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/2381/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/2381/timeline","performed_via_github_app":null,"state_reason":null}