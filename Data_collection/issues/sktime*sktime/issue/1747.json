{"url":"https://api.github.com/repos/sktime/sktime/issues/1747","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/1747/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/1747/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/1747/events","html_url":"https://github.com/sktime/sktime/issues/1747","id":1077888204,"node_id":"I_kwDOCVKAsc5AP0TM","number":1747,"title":"[BUG] FAILED forecasting/tests/test_ets.py::test_airline_allow_multiplicative_trend on linux and py39","user":{"login":"lmmentel","id":8989838,"node_id":"MDQ6VXNlcjg5ODk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8989838?v=4","gravatar_id":"","url":"https://api.github.com/users/lmmentel","html_url":"https://github.com/lmmentel","followers_url":"https://api.github.com/users/lmmentel/followers","following_url":"https://api.github.com/users/lmmentel/following{/other_user}","gists_url":"https://api.github.com/users/lmmentel/gists{/gist_id}","starred_url":"https://api.github.com/users/lmmentel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmmentel/subscriptions","organizations_url":"https://api.github.com/users/lmmentel/orgs","repos_url":"https://api.github.com/users/lmmentel/repos","events_url":"https://api.github.com/users/lmmentel/events{/privacy}","received_events_url":"https://api.github.com/users/lmmentel/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":3105906374,"node_id":"MDU6TGFiZWwzMTA1OTA2Mzc0","url":"https://api.github.com/repos/sktime/sktime/labels/module:forecasting","name":"module:forecasting","color":"35FCCE","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-12-12T19:30:03Z","updated_at":"2021-12-27T22:37:19Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nTest is failing:\r\n\r\n```\r\n[gw0] linux -- Python 3.9.9 /opt/hostedtoolcache/Python/3.9.9/x64/bin/python\r\n\r\n    def test_airline_allow_multiplicative_trend():\r\n        fit_result_R = [\"mul\", \"mul\", \"mul\"]\r\n    \r\n        forecaster = AutoETS(auto=True, sp=12, n_jobs=-1, allow_multiplicative_trend=True)\r\n        forecaster.fit(y)\r\n        fitted_forecaster = forecaster._fitted_forecaster\r\n        fit_result = [\r\n            fitted_forecaster.error,\r\n            fitted_forecaster.trend,\r\n            fitted_forecaster.seasonal,\r\n        ]\r\n    \r\n>       assert_array_equal(fit_result_R, fit_result)\r\nE       AssertionError: \r\nE       Arrays are not equal\r\nE       \r\nE       Mismatched elements: 1 / 3 (33.3%)\r\nE        x: array(['mul', 'mul', 'mul'], dtype='<U3')\r\nE        y: array(['mul', 'add', 'mul'], dtype='<U3')\r\n\r\nfit_result = ['mul', 'add', 'mul']\r\nfit_result_R = ['mul', 'mul', 'mul']\r\nfitted_forecaster = <statsmodels.tsa.exponential_smoothing.ets.ETSResultsWrapper object at 0x7fb404124040>\r\nforecaster = AutoETS(additive_only=False, allow_multiplicative_trend=True, auto=True,\r\n        bounds=None, callback=None, damped_tr...ing='none', n_jobs=-1, restrict=True, return_params=False,\r\n        seasonal=None, sp=12, start_params=None, trend=None)\r\n\r\n/opt/hostedtoolcache/Python/3.9.9/x64/lib/python3.9/site-packages/sktime/forecasting/tests/test_ets.py:62: AssertionError\r\n```\r\n\r\n**To Reproduce**\r\n\r\nRun the test on linux with python 3.9, see https://github.com/lmmentel/sktime/runs/4498946774?check_suite_focus=true\r\n\r\n\r\n**Expected behavior**\r\n\r\nTest passes.\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n-->\r\n\r\n**Versions**\r\n\r\nOS: linux ubuntu 20.04\r\npython: 3.9.9\r\n\r\n```\r\nRun python -m pip list\r\nPackage                           Version\r\n--------------------------------- ---------\r\nattrs                             21.2.0\r\nbackports.entry-points-selectable 1.1.1\r\ncertifi                           2021.10.8\r\ncfgv                              3.3.1\r\ncharset-normalizer                2.0.9\r\nclick                             8.0.3\r\ncloudpickle                       2.0.0\r\ncmdstanpy                         0.9.5\r\nconvertdate                       2.3.2\r\ncoverage                          6.2\r\ncycler                            0.11.0\r\nCython                            0.29.25\r\ndask                              2021.12.0\r\nDeprecated                        1.2.13\r\ndistlib                           0.3.4\r\ndistributed                       2021.12.0\r\ndtw-python                        1.1.10\r\nephem                             4.1.2\r\nesig                              0.9.7\r\nexecnet                           1.9.0\r\nfbprophet                         0.7.1\r\nfilelock                          3.4.0\r\nfonttools                         4.28.3\r\nfsspec                            2021.11.1\r\nhcrystalball                      0.1.10\r\nHeapDict                          1.0.1\r\nhijri-converter                   2.2.2\r\nholidays                          0.11.3.1\r\nidentify                          2.4.0\r\nidna                              3.3\r\niniconfig                         1.1.1\r\nJinja2                            3.0.3\r\njoblib                            1.1.0\r\nkiwisolver                        1.3.2\r\nkorean-lunar-calendar             0.2.1\r\nllvmlite                          0.37.0\r\nlocket                            0.2.1\r\nLunarCalendar                     0.0.9\r\nlunardate                         0.2.0\r\nMarkupSafe                        2.0.1\r\nmatplotlib                        3.5.1\r\nmatrixprofile                     1.1.10\r\nmsgpack                           1.0.3\r\nnodeenv                           1.6.0\r\nnumba                             0.54.1\r\nnumpy                             1.19.3\r\npackaging                         21.3\r\npandas                            1.3.5\r\npartd                             1.2.0\r\npatsy                             0.5.2\r\nPillow                            8.4.0\r\npip                               21.3.1\r\nplatformdirs                      2.4.0\r\npluggy                            1.0.0\r\npmdarima                          1.8.4\r\npre-commit                        2.16.0\r\nprotobuf                          3.11.2\r\npsutil                            5.8.0\r\npy                                1.11.0\r\npyluach                           1.3.0\r\nPyMeeus                           0.5.11\r\npyod                              0.9.5\r\npyparsing                         3.0.6\r\npystan                            2.19.1.1\r\npytest                            6.2.5\r\npytest-cov                        3.0.0\r\npytest-forked                     1.4.0\r\npytest-xdist                      2.5.0\r\npython-dateutil                   2.8.2\r\npytz                              2021.3\r\nPyYAML                            6.0\r\nrequests                          2.26.0\r\nscikit-learn                      1.0.1\r\nscikit-posthocs                   0.6.7\r\nscipy                             1.7.3\r\nseaborn                           0.11.2\r\nsetuptools                        58.1.0\r\nsetuptools-git                    1.2\r\nsix                               1.16.0\r\nsktime                            0.8.1\r\nsortedcontainers                  2.4.0\r\nstatsmodels                       0.12.1\r\nstumpy                            1.10.0\r\ntbats                             1.1.0\r\ntblib                             1.7.0\r\nthreadpoolctl                     3.0.0\r\ntoml                              0.10.2\r\ntomli                             1.2.2\r\ntoolz                             0.11.2\r\ntornado                           6.1\r\ntqdm                              4.62.3\r\ntsfresh                           0.18.0\r\nurllib3                           1.26.7\r\nvirtualenv                        20.10.0\r\nwheel                             0.37.0\r\nworkalendar                       16.2.0\r\nwrapt                             1.13.3\r\nzict                              2.0.0\r\n```\r\n\r\n</details>\r\n\r\n<!-- Thanks for contributing! -->\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/1747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/1747/timeline","performed_via_github_app":null,"state_reason":null}