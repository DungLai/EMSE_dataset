{"url":"https://api.github.com/repos/sktime/sktime/issues/435","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/435/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/435/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/435/events","html_url":"https://github.com/sktime/sktime/issues/435","id":724077726,"node_id":"MDU6SXNzdWU3MjQwNzc3MjY=","number":435,"title":"[BUG] Automatic fitting with AutoETS fails","user":{"login":"discdiver","id":7703961,"node_id":"MDQ6VXNlcjc3MDM5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/7703961?v=4","gravatar_id":"","url":"https://api.github.com/users/discdiver","html_url":"https://github.com/discdiver","followers_url":"https://api.github.com/users/discdiver/followers","following_url":"https://api.github.com/users/discdiver/following{/other_user}","gists_url":"https://api.github.com/users/discdiver/gists{/gist_id}","starred_url":"https://api.github.com/users/discdiver/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/discdiver/subscriptions","organizations_url":"https://api.github.com/users/discdiver/orgs","repos_url":"https://api.github.com/users/discdiver/repos","events_url":"https://api.github.com/users/discdiver/events{/privacy}","received_events_url":"https://api.github.com/users/discdiver/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2020-10-18T19:16:06Z","updated_at":"2020-10-26T14:28:42Z","closed_at":"2020-10-26T14:28:42Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nAutomatic fitting with AutoETS errors. Works fine when manually setting params.\r\n\r\n\r\n**To Reproduce**\r\n\r\ninstantiate with auto=True and fit\r\n\r\n\r\n```python\r\nfrom sktime.datasets import load_airline\r\nfrom sktime.forecasting.model_selection import temporal_train_test_split\r\nfrom sktime.forecasting.ets import AutoETS\r\n\r\ny = load_airline()\r\ny_train, y_test = temporal_train_test_split(y, test_size=36)\r\n\r\n\r\nhw_auto_model = AutoETS(auto=True)\r\nhw_model.fit(y_train)\r\n```\r\n\r\n**Expected behavior**\r\n\r\nA fit model with good params. \r\n\r\n\r\n**Stack trace**\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-80-03aaf6ca0732> in <module>\r\n----> 1 hw_auto_model.fit(y_train)\r\n\r\n~/miniconda3/lib/python3.7/site-packages/sktime/forecasting/base/_statsmodels.py in fit(self, y_train, fh, X_train)\r\n     39         self._set_y_X(y_train, X_train)\r\n     40         self._set_fh(fh)\r\n---> 41         self._fit_forecaster(y_train, X_train=X_train)\r\n     42         self._is_fitted = True\r\n     43         return self\r\n\r\n~/miniconda3/lib/python3.7/site-packages/sktime/forecasting/ets.py in _fit_forecaster(self, y, X_train)\r\n    287                 delayed(_fit)(error, trend, seasonal, damped)\r\n    288                 for error, trend, seasonal, damped in _iter(\r\n--> 289                     error_range, trend_range, seasonal_range, damped_range\r\n    290                 )\r\n    291             )\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in __call__(self, iterable)\r\n   1027             # remaining jobs.\r\n   1028             self._iterating = False\r\n-> 1029             if self.dispatch_one_batch(iterator):\r\n   1030                 self._iterating = self._original_iterator is not None\r\n   1031 \r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in dispatch_one_batch(self, iterator)\r\n    845                 return False\r\n    846             else:\r\n--> 847                 self._dispatch(tasks)\r\n    848                 return True\r\n    849 \r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in _dispatch(self, batch)\r\n    763         with self._lock:\r\n    764             job_idx = len(self._jobs)\r\n--> 765             job = self._backend.apply_async(batch, callback=cb)\r\n    766             # A job can complete so quickly than its callback is\r\n    767             # called before we get here, causing self._jobs to\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/_parallel_backends.py in apply_async(self, func, callback)\r\n    206     def apply_async(self, func, callback=None):\r\n    207         \"\"\"Schedule a func to be run\"\"\"\r\n--> 208         result = ImmediateResult(func)\r\n    209         if callback:\r\n    210             callback(result)\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/_parallel_backends.py in __init__(self, batch)\r\n    570         # Don't delay the application, to avoid keeping the input\r\n    571         # arguments in memory\r\n--> 572         self.results = batch()\r\n    573 \r\n    574     def get(self):\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in __call__(self)\r\n    251         with parallel_backend(self._backend, n_jobs=self._n_jobs):\r\n    252             return [func(*args, **kwargs)\r\n--> 253                     for func, args, kwargs in self.items]\r\n    254 \r\n    255     def __reduce__(self):\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in <listcomp>(.0)\r\n    251         with parallel_backend(self._backend, n_jobs=self._n_jobs):\r\n    252             return [func(*args, **kwargs)\r\n--> 253                     for func, args, kwargs in self.items]\r\n    254 \r\n    255     def __reduce__(self):\r\n\r\n~/miniconda3/lib/python3.7/site-packages/sktime/forecasting/ets.py in _fit(error, trend, seasonal, damped)\r\n    271                     dates=self.dates,\r\n    272                     freq=self.freq,\r\n--> 273                     missing=self.missing,\r\n    274                 )\r\n    275                 _fitted_forecaster = _forecaster.fit(\r\n\r\n~/miniconda3/lib/python3.7/site-packages/statsmodels/tsa/exponential_smoothing/ets.py in __init__(self, endog, error, trend, damped_trend, seasonal, seasonal_periods, initialization_method, initial_level, initial_trend, initial_seasonal, bounds, dates, freq, missing)\r\n    454             )\r\n    455             if seasonal_periods is None:\r\n--> 456                 self.seasonal_periods = freq_to_period(self._index_freq)\r\n    457             if self.seasonal_periods <= 1:\r\n    458                 raise ValueError(\"seasonal_periods must be larger than 1.\")\r\n\r\n~/miniconda3/lib/python3.7/site-packages/statsmodels/tsa/tsatools.py in freq_to_period(freq)\r\n    810     if not isinstance(freq, offsets.DateOffset):\r\n    811         freq = to_offset(freq)  # go ahead and standardize\r\n--> 812     freq = freq.rule_code.upper()\r\n    813 \r\n    814     if freq == 'A' or freq.startswith(('A-', 'AS-')):\r\n\r\nAttributeError: 'NoneType' object has no attribute 'rule_code'\r\n```\r\n\r\n**Versions**\r\n0.4.2\r\n\r\n\r\nSystem:\r\n    python: 3.7.6 (default, Jan  8 2020, 13:42:34)  [Clang 4.0.1 (tags/RELEASE_401/final)]\r\nexecutable: /Users/jeffhale/miniconda3/bin/python\r\n   machine: Darwin-18.7.0-x86_64-i386-64bit\r\n\r\nPython dependencies:\r\n          pip: 20.2.2\r\n   setuptools: 49.6.0.post20200814\r\n      sklearn: 0.23.2\r\n        numpy: 1.18.1\r\n        scipy: 1.4.1\r\n       Cython: 0.29.17\r\n       pandas: 1.1.1\r\n   matplotlib: 3.2.2\r\n       joblib: 0.16.0\r\n        numba: 0.50.0\r\n     pmdarima: 1.7.1\r\n      tsfresh: 0.17.0\r\n\r\nWhen installing the latest sktime I got: \r\n\r\n\r\n\r\n</details>\r\n\r\n<!-- Thanks for contributing! -->\r\n","closed_by":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/435/timeline","performed_via_github_app":null,"state_reason":"completed"}