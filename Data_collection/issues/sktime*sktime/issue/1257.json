{"url":"https://api.github.com/repos/sktime/sktime/issues/1257","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/1257/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/1257/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/1257/events","html_url":"https://github.com/sktime/sktime/issues/1257","id":961995759,"node_id":"MDU6SXNzdWU5NjE5OTU3NTk=","number":1257,"title":"[BUG] failure in test `test_load_UCR_UEA_dataset_download`","user":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1631667223,"node_id":"MDU6TGFiZWwxNjMxNjY3MjIz","url":"https://api.github.com/repos/sktime/sktime/labels/maintenance","name":"maintenance","color":"ea761e","default":false,"description":"Continuous integration, unit testing & package distribution"},{"id":3102418261,"node_id":"MDU6TGFiZWwzMTAyNDE4MjYx","url":"https://api.github.com/repos/sktime/sktime/labels/module:classification","name":"module:classification","color":"BEB114","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"TonyBagnall","id":9594042,"node_id":"MDQ6VXNlcjk1OTQwNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9594042?v=4","gravatar_id":"","url":"https://api.github.com/users/TonyBagnall","html_url":"https://github.com/TonyBagnall","followers_url":"https://api.github.com/users/TonyBagnall/followers","following_url":"https://api.github.com/users/TonyBagnall/following{/other_user}","gists_url":"https://api.github.com/users/TonyBagnall/gists{/gist_id}","starred_url":"https://api.github.com/users/TonyBagnall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TonyBagnall/subscriptions","organizations_url":"https://api.github.com/users/TonyBagnall/orgs","repos_url":"https://api.github.com/users/TonyBagnall/repos","events_url":"https://api.github.com/users/TonyBagnall/events{/privacy}","received_events_url":"https://api.github.com/users/TonyBagnall/received_events","type":"User","site_admin":false},"assignees":[{"login":"TonyBagnall","id":9594042,"node_id":"MDQ6VXNlcjk1OTQwNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9594042?v=4","gravatar_id":"","url":"https://api.github.com/users/TonyBagnall","html_url":"https://github.com/TonyBagnall","followers_url":"https://api.github.com/users/TonyBagnall/followers","following_url":"https://api.github.com/users/TonyBagnall/following{/other_user}","gists_url":"https://api.github.com/users/TonyBagnall/gists{/gist_id}","starred_url":"https://api.github.com/users/TonyBagnall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TonyBagnall/subscriptions","organizations_url":"https://api.github.com/users/TonyBagnall/orgs","repos_url":"https://api.github.com/users/TonyBagnall/repos","events_url":"https://api.github.com/users/TonyBagnall/events{/privacy}","received_events_url":"https://api.github.com/users/TonyBagnall/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2021-08-05T16:27:15Z","updated_at":"2022-01-08T16:21:41Z","closed_at":"2022-01-08T16:21:41Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"`test_load_UCR_UEA_dataset_download` fails for me and @GuzalBulatova on my local computer, with the following `FileNotFoundError` error, since #1248 was merged earlier today.\r\n\r\nIt does not fail for others though, like @SveaMeyer13 or @tensorflow-as-tf, or in the CI/CD testing pipeline. Has something changed recently?\r\n\r\nA suspicion we have is that something in the `pytest` path reference is not correct - @GuzalBulatova says the file is being downloaded into the `sktime` package inside her local environment (!).\r\n\r\nFor me, the folder `\\tmpcrst7s46` exists but contains nothing. Instead, the files also appear in my local repository (!), in the folder `datasets/data/ArrowHead`.\r\n\r\n```\r\n================================== FAILURES ===================================\r\n_____________________ test_load_UCR_UEA_dataset_download ______________________\r\n\r\ntmpdir = local('C:\\\\Users\\\\Franz Kiraly\\\\AppData\\\\Local\\\\Temp\\\\pytest-of-Franz Kiraly\\\\pytest-35\\\\test_load_UCR_UEA_dataset_down0')\r\n\r\n    def test_load_UCR_UEA_dataset_download(tmpdir):\r\n        # tmpdir is a pytest fixture\r\n        extract_path = tmpdir.mkdtemp()\r\n        name = \"ArrowHead\"\r\n        actual_X, actual_y = load_UCR_UEA_dataset(\r\n>           name, return_X_y=True, extract_path=extract_path\r\n        )\r\n\r\nsktime\\datasets\\tests\\test_data_loaders.py:83: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\nsktime\\datasets\\_data_io.py:149: in load_UCR_UEA_dataset\r\n    return _load_dataset(name, split, return_X_y, extract_path)\r\nsktime\\datasets\\_data_io.py:193: in _load_dataset\r\n    result = load_from_tsfile_to_dataframe(abspath)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nfull_file_path_and_name = 'C:\\\\Users\\\\FRANZK~1\\\\AppData\\\\Local\\\\Temp\\\\tmpcrst7s46\\\\ArrowHead\\\\ArrowHead_TRAIN.ts'\r\nreturn_separate_X_and_y = True, replace_missing_vals_with = 'NaN'\r\n\r\n    def load_from_tsfile_to_dataframe(\r\n        full_file_path_and_name,\r\n        return_separate_X_and_y=True,\r\n        replace_missing_vals_with=\"NaN\",\r\n    ):\r\n        \"\"\"Load data from a .ts file into a Pandas DataFrame.\r\n    \r\n        Parameters\r\n        ----------\r\n        full_file_path_and_name: str\r\n            The full pathname of the .ts file to read.\r\n        return_separate_X_and_y: bool\r\n            true if X and Y values should be returned as separate Data Frames (\r\n            X) and a numpy array (y), false otherwise.\r\n            This is only relevant for data that\r\n        replace_missing_vals_with: str\r\n           The value that missing values in the text file should be replaced\r\n           with prior to parsing.\r\n    \r\n        Returns\r\n        -------\r\n        DataFrame, ndarray\r\n            If return_separate_X_and_y then a tuple containing a DataFrame and a\r\n            numpy array containing the relevant time-series and corresponding\r\n            class values.\r\n        DataFrame\r\n            If not return_separate_X_and_y then a single DataFrame containing\r\n            all time-series and (if relevant) a column \"class_vals\" the\r\n            associated class values.\r\n        \"\"\"\r\n        # Initialize flags and variables used when parsing the file\r\n        metadata_started = False\r\n        data_started = False\r\n    \r\n        has_problem_name_tag = False\r\n        has_timestamps_tag = False\r\n        has_univariate_tag = False\r\n        has_class_labels_tag = False\r\n        has_data_tag = False\r\n    \r\n        previous_timestamp_was_int = None\r\n        prev_timestamp_was_timestamp = None\r\n        num_dimensions = None\r\n        is_first_case = True\r\n        instance_list = []\r\n        class_val_list = []\r\n        line_num = 0\r\n    \r\n        # Parse the file\r\n        # print(full_file_path_and_name)\r\n>       with open(full_file_path_and_name, \"r\", encoding=\"utf-8\") as file:\r\nE       FileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\FRANZK~1\\\\AppData\\\\Local\\\\Temp\\\\tmpcrst7s46\\\\ArrowHead\\\\ArrowHead_TRAIN.ts'\r\n\r\nsktime\\utils\\data_io.py:75: FileNotFoundError\r\n```","closed_by":{"login":"TonyBagnall","id":9594042,"node_id":"MDQ6VXNlcjk1OTQwNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9594042?v=4","gravatar_id":"","url":"https://api.github.com/users/TonyBagnall","html_url":"https://github.com/TonyBagnall","followers_url":"https://api.github.com/users/TonyBagnall/followers","following_url":"https://api.github.com/users/TonyBagnall/following{/other_user}","gists_url":"https://api.github.com/users/TonyBagnall/gists{/gist_id}","starred_url":"https://api.github.com/users/TonyBagnall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TonyBagnall/subscriptions","organizations_url":"https://api.github.com/users/TonyBagnall/orgs","repos_url":"https://api.github.com/users/TonyBagnall/repos","events_url":"https://api.github.com/users/TonyBagnall/events{/privacy}","received_events_url":"https://api.github.com/users/TonyBagnall/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/1257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/1257/timeline","performed_via_github_app":null,"state_reason":"completed"}