{"url":"https://api.github.com/repos/sktime/sktime/issues/2255","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/2255/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/2255/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/2255/events","html_url":"https://github.com/sktime/sktime/issues/2255","id":1174389237,"node_id":"I_kwDOCVKAsc5F_8H1","number":2255,"title":"[ENH] Refactor multiplication of classifier tests","user":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"labels":[{"id":1118163266,"node_id":"MDU6TGFiZWwxMTE4MTYzMjY2","url":"https://api.github.com/repos/sktime/sktime/labels/good%20first%20issue","name":"good first issue","color":"9eff91","default":true,"description":"Good for newcomers"},{"id":3102418261,"node_id":"MDU6TGFiZWwzMTAyNDE4MjYx","url":"https://api.github.com/repos/sktime/sktime/labels/module:classification","name":"module:classification","color":"BEB114","default":false,"description":""},{"id":3137622230,"node_id":"MDU6TGFiZWwzMTM3NjIyMjMw","url":"https://api.github.com/repos/sktime/sktime/labels/module:tests","name":"module:tests","color":"43421D","default":false,"description":""},{"id":3789327275,"node_id":"LA_kwDOCVKAsc7h3Iur","url":"https://api.github.com/repos/sktime/sktime/labels/refactor","name":"refactor","color":"bfdadc","default":false,"description":"Restructuring without changing its external behavior. Neither fixing a bug nor adding a feature."},{"id":3796180314,"node_id":"LA_kwDOCVKAsc7iRR1a","url":"https://api.github.com/repos/sktime/sktime/labels/enhancement","name":"enhancement","color":"fef2c0","default":true,"description":"Adding new functionality"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-03-19T22:53:27Z","updated_at":"2022-04-12T07:58:20Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"Looking through the tests, I found that every classifier has a test file, and in it there is `test_[classifiername]_on_unit_test_data` and `test_[classifiername]_on_basic_motions`, with hundreds of lines of copy/paste. This is highly redundant and should be moved to a single file, using `pytest.mark.parametrize` and `all_estimators`.\r\n\r\n#2257 makes a start how this could look like in the context of a classifier test suite refactor.\r\nI would suggest to branch off #2257 and follow the pattern.\r\n(assumes #2257 is merged. Until then, branch off #2257)\r\n\r\nThe recipe is as follows, for a given classifier:\r\n1. find the file `test_[classifier]` or similar, containing tests `test_[classifier]_on_unit_test_data` and possibly `test_[classifier]_on_basic_motions` or similar.\r\n2. move the parameter settings for the classifier into `get_test_params`, of the classifier class. Ensure it is the first element of the list returned. (also ensure there is no duplication with `tests/_config`, if there are still parameters there, also move them to `get_test_params`)\r\n3. add the \"expected outputs\" from the `test_[classifier]` file to `classification/tests/_expected_outputs` (follow the pattern)\r\n4. delete the file `test_[classifier]`\r\n5. ensure the unit tests pass. They should, if this has been done 1:1\r\n\r\nClassifiers to refactor:\r\n- [x] cboss\r\n- [x] muse\r\n- [x] tde\r\n- [x] weasel\r\n- [x] elastic_ensemble\r\n- [x] shape_dtw\r\n- [x] time_series_neighbors\r\n- [ ] probability_threshold\r\n- [ ] teaser\r\n- [x] catch22_classifier\r\n- [x] fresh_prince\r\n- [x] matrix_profile_classifier\r\n- [x] random_interval_classifier\r\n- [x] signature_classifier\r\n- [x] summary_classifier\r\n- [x] tsfresh_classifier\r\n- [x] hivecote_v1\r\n- [x] hivecote_v2\r\n- [x] cif\r\n- [x] dtc\r\n- [x] drcif\r\n- [x] rise\r\n- [x] stsf\r\n- [x] tsf\r\n- [x] arsenal\r\n- [x] rocket_classifier\r\n- [x] stc\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/2255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/2255/timeline","performed_via_github_app":null,"state_reason":null}