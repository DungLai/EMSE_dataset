{"url":"https://api.github.com/repos/sktime/sktime/issues/2724","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/2724/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/2724/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/2724/events","html_url":"https://github.com/sktime/sktime/issues/2724","id":1253209439,"node_id":"I_kwDOCVKAsc5KsnVf","number":2724,"title":"[BUG] PolynomialTrendForecaster does not work with period index of frequency 30T","user":{"login":"ngupta23","id":33585645,"node_id":"MDQ6VXNlcjMzNTg1NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/33585645?v=4","gravatar_id":"","url":"https://api.github.com/users/ngupta23","html_url":"https://github.com/ngupta23","followers_url":"https://api.github.com/users/ngupta23/followers","following_url":"https://api.github.com/users/ngupta23/following{/other_user}","gists_url":"https://api.github.com/users/ngupta23/gists{/gist_id}","starred_url":"https://api.github.com/users/ngupta23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngupta23/subscriptions","organizations_url":"https://api.github.com/users/ngupta23/orgs","repos_url":"https://api.github.com/users/ngupta23/repos","events_url":"https://api.github.com/users/ngupta23/events{/privacy}","received_events_url":"https://api.github.com/users/ngupta23/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-05-31T00:33:09Z","updated_at":"2022-06-01T12:51:54Z","closed_at":"2022-06-01T12:40:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nPolynomialTrendForecaster does not work with period index of frequency 30T (30 mnins) due to incorrect X values \r\n\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\nfrom sktime.forecasting.trend import PolynomialTrendForecaster\r\n\r\n\r\nnp.random.seed(5005)\r\nindex = pd.date_range(\r\n    start=\"2020-10-01 00:00:00\", end=\"2020-10-01 23:30:00\", freq=\"30T\"\r\n)\r\ndata = pd.DataFrame(\r\n    {\r\n        \"index\": index,\r\n        \"target\": np.random.randint(0, 255, index.shape[0], dtype=int),\r\n    }\r\n).set_index(\"index\")\r\ndata.index = data.index.to_period()\r\n\r\nforecaster = PolynomialTrendForecaster(degree=1)\r\nforecaster.fit(data)\r\n```\r\n\r\n```python-traceback\r\n File \"c:\\Users\\Nikhil\\OneDrive\\my_libraries\\my_python_libraries\\pycaret\\pycaret_dev\\time_series_debug.py\", line 41, in <module>\r\n    forecaster.fit(data)\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sktime\\forecasting\\base\\_base.py\", line 265, in fit\r\n    self._fit(y=y_inner, X=X_inner, fh=fh)\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sktime\\forecasting\\trend.py\", line 181, in _fit\r\n    self.regressor_.fit(X, y)\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sklearn\\pipeline.py\", line 382, in fit\r\n    self._final_estimator.fit(Xt, y, **fit_params_last_step)\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sklearn\\linear_model\\_base.py\", line 684, in fit\r\n    X, y = self._validate_data(\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sklearn\\base.py\", line 596, in _validate_data\r\n    X, y = check_X_y(X, y, **check_params)\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sklearn\\utils\\validation.py\", line 1092, in check_X_y\r\n    check_consistent_length(X, y)\r\n  File \"C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\lib\\site-packages\\sklearn\\utils\\validation.py\", line 387, in check_consistent_length\r\n    raise ValueError(\r\nValueError: Found input variables with inconsistent numbers of samples: [1411, 48]\r\n```\r\n\r\n**Expected behavior**\r\nExpected to fit correctly as it should have probably been fixed (previously reported https://github.com/alan-turing-institute/sktime/issues/1876)\r\n\r\n**Additional context**\r\nOriginally reported here: https://github.com/pycaret/pycaret/issues/2607\r\n\r\n**Versions**\r\n<details>\r\n\r\nSystem:\r\n    python: 3.8.13 (default, Mar 28 2022, 06:59:08) [MSC v.1916 64 bit (AMD64)]\r\nexecutable: C:\\Users\\Nikhil\\.conda\\envs\\pycaret_dev_sktime_0p11_3\\python.exe\r\n   machine: Windows-10-10.0.19044-SP0\r\n\r\nPython dependencies:\r\n          pip: 21.2.2\r\n   setuptools: 61.2.0\r\n      sklearn: 1.1.1\r\n       sktime: 0.11.4\r\n  statsmodels: 0.13.2\r\n        numpy: 1.21.6\r\n        scipy: 1.8.1\r\n       pandas: 1.4.2\r\n   matplotlib: 3.5.2\r\n       joblib: 1.1.0\r\n        numba: 0.55.2\r\n     pmdarima: 1.8.5\r\n      tsfresh: None\r\n\r\n</details>\r\n\r\n<!-- Thanks for contributing! -->\r\n","closed_by":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/2724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/2724/timeline","performed_via_github_app":null,"state_reason":"completed"}