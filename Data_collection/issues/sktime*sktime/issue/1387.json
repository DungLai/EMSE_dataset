{"url":"https://api.github.com/repos/sktime/sktime/issues/1387","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/1387/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/1387/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/1387/events","html_url":"https://github.com/sktime/sktime/issues/1387","id":988355829,"node_id":"MDU6SXNzdWU5ODgzNTU4Mjk=","number":1387,"title":"[ENH] AutoETS to ignore multiplicative components when time series is not strictly positive","user":{"login":"ltsaprounis","id":64217214,"node_id":"MDQ6VXNlcjY0MjE3MjE0","avatar_url":"https://avatars.githubusercontent.com/u/64217214?v=4","gravatar_id":"","url":"https://api.github.com/users/ltsaprounis","html_url":"https://github.com/ltsaprounis","followers_url":"https://api.github.com/users/ltsaprounis/followers","following_url":"https://api.github.com/users/ltsaprounis/following{/other_user}","gists_url":"https://api.github.com/users/ltsaprounis/gists{/gist_id}","starred_url":"https://api.github.com/users/ltsaprounis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ltsaprounis/subscriptions","organizations_url":"https://api.github.com/users/ltsaprounis/orgs","repos_url":"https://api.github.com/users/ltsaprounis/repos","events_url":"https://api.github.com/users/ltsaprounis/events{/privacy}","received_events_url":"https://api.github.com/users/ltsaprounis/received_events","type":"User","site_admin":false},"labels":[{"id":3105906374,"node_id":"MDU6TGFiZWwzMTA1OTA2Mzc0","url":"https://api.github.com/repos/sktime/sktime/labels/module:forecasting","name":"module:forecasting","color":"35FCCE","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-09-04T19:35:35Z","updated_at":"2021-11-14T18:20:31Z","closed_at":"2021-11-14T18:20:31Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"**Is your feature request related to a problem? Please describe.**\r\nIf a time series is not strictly positive, ETS models (from statsmodels) with multiplicative components will raise the following error:\r\n```\r\nValueError: endog must be strictly positive when usingmultiplicative error, trend or seasonal components.\r\n```\r\n\r\nCurrently AutoETS will raise the same error because it tries all the available ETS models. Ideally AutoETS will skip the models that result in this error and will try all the other ones. \r\n\r\n**Describe the solution you'd like**\r\nOne solution would be to add a try/except in the [_fit](https://github.com/alan-turing-institute/sktime/blob/2d1eaa22854beecdbe63fcd076aa486140f35193/sktime/forecasting/ets.py#L278) method. The other solution I can think of is to check whether the time series is strictly positive and if it's not remove the multiplicative components from [_iter](https://github.com/alan-turing-institute/sktime/blob/2d1eaa22854beecdbe63fcd076aa486140f35193/sktime/forecasting/ets.py#L258).\r\n\r\n**The following code reproduces the error:** \r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\nfrom sktime.forecasting.ets import AutoETS\r\nfrom sktime.utils.plotting import plot_series\r\n\r\nts = pd.Series(\r\n    10*np.sin(np.array(range(0,264))/10)+10, \r\n    pd.date_range(\"2017-01-01\", periods=264,  freq=\"W\")\r\n)\r\nts[ts<1]=0\r\nforecaster = AutoETS(auto=True, sp=52, n_jobs=-1, ignore_inf_ic=True)\r\nplot_series(ts)\r\nforecaster.fit(ts)\r\n```\r\n<img width=\"935\" alt=\"image\" src=\"https://user-images.githubusercontent.com/64217214/132105553-92e8925b-45d9-4e7a-8bd2-b618749381ef.png\">\r\n","closed_by":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/1387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/1387/timeline","performed_via_github_app":null,"state_reason":"completed"}