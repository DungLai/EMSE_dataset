{"url":"https://api.github.com/repos/sktime/sktime/issues/2530","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/2530/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/2530/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/2530/events","html_url":"https://github.com/sktime/sktime/issues/2530","id":1212323311,"node_id":"I_kwDOCVKAsc5IQpXv","number":2530,"title":"[MNT] effective testing via pytest-testmon","user":{"login":"tarpas","id":135344,"node_id":"MDQ6VXNlcjEzNTM0NA==","avatar_url":"https://avatars.githubusercontent.com/u/135344?v=4","gravatar_id":"","url":"https://api.github.com/users/tarpas","html_url":"https://github.com/tarpas","followers_url":"https://api.github.com/users/tarpas/followers","following_url":"https://api.github.com/users/tarpas/following{/other_user}","gists_url":"https://api.github.com/users/tarpas/gists{/gist_id}","starred_url":"https://api.github.com/users/tarpas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarpas/subscriptions","organizations_url":"https://api.github.com/users/tarpas/orgs","repos_url":"https://api.github.com/users/tarpas/repos","events_url":"https://api.github.com/users/tarpas/events{/privacy}","received_events_url":"https://api.github.com/users/tarpas/received_events","type":"User","site_admin":false},"labels":[{"id":1631667223,"node_id":"MDU6TGFiZWwxNjMxNjY3MjIz","url":"https://api.github.com/repos/sktime/sktime/labels/maintenance","name":"maintenance","color":"ea761e","default":false,"description":"Continuous integration, unit testing & package distribution"},{"id":3796180314,"node_id":"LA_kwDOCVKAsc7iRR1a","url":"https://api.github.com/repos/sktime/sktime/labels/enhancement","name":"enhancement","color":"fef2c0","default":true,"description":"Adding new functionality"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2022-04-22T12:50:17Z","updated_at":"2022-08-24T19:34:00Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Upon the request of @fkiraly I investigated the possibility to use pytest-testmon for testing in sktime. When I tested many different commits from sktime history testmon selected single to triple digit number of tests out of the 20K test suite. I also tested multiple commits which introduced a test failure and testmon did execute the right tests to expose the failure. Very encouraging!\r\n\r\nsktime code is tested from within site-packages installation after executing `pip install .` (pytest is then executed from a \"dummy\" subdirectory and using --pyargs sktime arguments) Unfortunately testmon doesn't support --pyargs . --pyargs support might not be added to testmon for a long time.\r\n\r\nHowever, I would like to suggest, to reconsider the usage of --pyargs. Philosophically the way sktime now tests is fine, of course. You're testing the form of the product which is closer to \"production\" than to development environment. However, I must point out many times it's not the \"production\" version anyway. The production would be a tar.gz or wheel package.\r\n\r\nI suggest normal test.yml would test the git source code (editable install, without --pyargs) this way: https://github.com/alan-turing-institute/sktime/commit/903682ec5a3a8d3d9002a1d1f049ded1242fcf5d\r\n\r\n@lmmentel commented on this: https://github.com/alan-turing-institute/sktime/pull/2389#issuecomment-1087828335\r\nbut I didn't experience any failiures when testing site-packages vs testing code from git repo.\r\n\r\nThe set of tests picked with --pyargs sktime vs sktime/ is a little different and I would probably need you guys to have a look at it and confirm it's fine or tweak it.\r\n\r\nAre you OK with executing test suite with `pytest sktime` instead of `pytest --pyargs sktime` ? Should I prepare the PR?\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/2530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/2530/timeline","performed_via_github_app":null,"state_reason":null}