{"url":"https://api.github.com/repos/sktime/sktime/issues/1181","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/1181/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/1181/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/1181/events","html_url":"https://github.com/sktime/sktime/issues/1181","id":949184964,"node_id":"MDU6SXNzdWU5NDkxODQ5NjQ=","number":1181,"title":"[BUG] Mismatch between stub files and autosummary toctrees","user":{"login":"astrojuanlu","id":316517,"node_id":"MDQ6VXNlcjMxNjUxNw==","avatar_url":"https://avatars.githubusercontent.com/u/316517?v=4","gravatar_id":"","url":"https://api.github.com/users/astrojuanlu","html_url":"https://github.com/astrojuanlu","followers_url":"https://api.github.com/users/astrojuanlu/followers","following_url":"https://api.github.com/users/astrojuanlu/following{/other_user}","gists_url":"https://api.github.com/users/astrojuanlu/gists{/gist_id}","starred_url":"https://api.github.com/users/astrojuanlu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astrojuanlu/subscriptions","organizations_url":"https://api.github.com/users/astrojuanlu/orgs","repos_url":"https://api.github.com/users/astrojuanlu/repos","events_url":"https://api.github.com/users/astrojuanlu/events{/privacy}","received_events_url":"https://api.github.com/users/astrojuanlu/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1203928605,"node_id":"MDU6TGFiZWwxMjAzOTI4NjA1","url":"https://api.github.com/repos/sktime/sktime/labels/documentation","name":"documentation","color":"f4bdf9","default":true,"description":"Documentation & tutorials"},{"id":1631667223,"node_id":"MDU6TGFiZWwxNjMxNjY3MjIz","url":"https://api.github.com/repos/sktime/sktime/labels/maintenance","name":"maintenance","color":"ea761e","default":false,"description":"Continuous integration, unit testing & package distribution"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/sktime/sktime/milestones/6","html_url":"https://github.com/sktime/sktime/milestone/6","labels_url":"https://api.github.com/repos/sktime/sktime/milestones/6/labels","id":6956457,"node_id":"MI_kwDOCVKAsc4AaiWp","number":6,"title":"The Great Documentation Overhaul","description":"","creator":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"open_issues":6,"closed_issues":24,"state":"open","created_at":"2021-07-17T09:28:03Z","updated_at":"2022-04-18T21:23:55Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2021-07-20T23:20:28Z","updated_at":"2021-08-15T13:52:24Z","closed_at":"2021-08-15T13:52:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nWhile investigating why https://github.com/alan-turing-institute/sktime/pull/1158 doesn't produce a proper gallery without executing the notebooks first (which, as per https://github.com/spatialaudio/nbsphinx/issues/586, should be possible), it was mentioned that reducing the number of warnings would simplify finding the root cause for the problem. Therefore, I executed `sphinx-build` with `-W` (\"turn warnings into errors\") and started with the first one:\r\n\r\n```\r\n$ python -m sphinx -v -W -T -E -b html -d _build/doctrees -D language=en source/ _build/html\r\n...\r\n    self.builder.build_update()                                                                                                                                                                                    (27/27 results) [2068/9792]\r\n  File \"/home/juanlu/Projects/RTD/tmp/sktime/.venv/lib/python3.7/site-packages/sphinx/builders/__init__.py\", line 299, in build_update\r\n    len(to_build))                                                                                                     \r\n  File \"/home/juanlu/Projects/RTD/tmp/sktime/.venv/lib/python3.7/site-packages/sphinx/builders/__init__.py\", line 311, in build\r\n    updated_docnames = set(self.read())                                                                                \r\n  File \"/usr/lib/python3.7/contextlib.py\", line 130, in __exit__                                                                                                                                                                              \r\n    self.gen.throw(type, value, traceback)                                                                                                                                                                                                    \r\n  File \"/home/juanlu/Projects/RTD/tmp/sktime/.venv/lib/python3.7/site-packages/sphinx/util/logging.py\", line 213, in pending_warnings\r\n    memhandler.flushTo(logger)                                                                                                                                                                                                                \r\n  File \"/home/juanlu/Projects/RTD/tmp/sktime/.venv/lib/python3.7/site-packages/sphinx/util/logging.py\", line 178, in flushTo                                                                                                           \r\n    logger.handle(record)                                                                                                                                                                                                                     \r\n  File \"/usr/lib/python3.7/logging/__init__.py\", line 1524, in handle                                                                                                                                                                         \r\n    self.callHandlers(record)                                                                                                                                                                                                                 \r\n  File \"/usr/lib/python3.7/logging/__init__.py\", line 1586, in callHandlers                                                                                                                                                                   \r\n    hdlr.handle(record)                                                                                                                                                                                                                       \r\n  File \"/usr/lib/python3.7/logging/__init__.py\", line 890, in handle                                                                                                                                                                          \r\n    rv = self.filter(record)                                                                                                                                                                                                                  \r\n  File \"/usr/lib/python3.7/logging/__init__.py\", line 751, in filter                                                                                                                                                                          \r\n    result = f.filter(record)                                                                                          \r\n  File \"/home/juanlu/Projects/RTD/tmp/sktime/.venv/lib/python3.7/site-packages/sphinx/util/logging.py\", line 421, in filter\r\n    raise exc                                              \r\nsphinx.errors.SphinxWarning: /home/juanlu/Projects/RTD/tmp/sktime/docs/source/source/api_reference/classification.rst.rst:16:autosummary: stub file not found 'sktime.classification.compose.ColumnEnsembleClassifier'. Check your autosummary\r\n_generate setting. \r\n```\r\n\r\nAfter some investigation, I realized that `sktime.classification.compose.ColumnEnsembleClassifier` stub is located in `api_reference/modules/auto_generated/`, however `api_reference/classification.rst` points to `modules/auto_generated/`:\r\n\r\nhttps://github.com/alan-turing-institute/sktime/blob/d149b2379aa213f24cc260d1b6a35bea15d829db/docs/source/api_reference/classification.rst#L17\r\n\r\nIt turns out that stub files are being generated in two directories: `api_reference/modules/auto_generated/` and `modules/auto_generated`, which might be the source of confusion. For this particular warning to go away, I made this one-line change:\r\n\r\n```diff\r\ndiff --git a/docs/source/api_reference/classification.rst b/docs/source/api_reference/classification.rst\r\nindex dfa882cb..b4e552d6 100644\r\n--- a/docs/source/api_reference/classification.rst\r\n+++ b/docs/source/api_reference/classification.rst\r\n@@ -14,7 +14,7 @@ Composition\r\n .. currentmodule:: sktime.classification.compose\r\n \r\n .. autosummary::\r\n-    :toctree: modules/auto_generated/\r\n+    :toctree: api_reference/modules/auto_generated/\r\n     :template: class.rst\r\n \r\n     ColumnEnsembleClassifier\r\n```\r\n\r\nHowever, there are a lot of these, so someone would have to go and amend those manually. In addition, it would be useful to clarify why these two directories hold stub files, and if this is the normal thing to do. I am not an expert in `sphinx.ext.autosummary` so I can't give much more guidance yet.\r\n\r\nI think this is a good first step towards reducing the number of warnings in the documentation, although there is still a long road ahead.","closed_by":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/1181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/1181/timeline","performed_via_github_app":null,"state_reason":"completed"}