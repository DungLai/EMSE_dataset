{"url":"https://api.github.com/repos/sktime/sktime/issues/3875","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/3875/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/3875/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/3875/events","html_url":"https://github.com/sktime/sktime/issues/3875","id":1473272735,"node_id":"I_kwDOCVKAsc5X0Fuf","number":3875,"title":"[ENH] turning `scipy` into a soft dependency","user":{"login":"patrickzib","id":7783034,"node_id":"MDQ6VXNlcjc3ODMwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7783034?v=4","gravatar_id":"","url":"https://api.github.com/users/patrickzib","html_url":"https://github.com/patrickzib","followers_url":"https://api.github.com/users/patrickzib/followers","following_url":"https://api.github.com/users/patrickzib/following{/other_user}","gists_url":"https://api.github.com/users/patrickzib/gists{/gist_id}","starred_url":"https://api.github.com/users/patrickzib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patrickzib/subscriptions","organizations_url":"https://api.github.com/users/patrickzib/orgs","repos_url":"https://api.github.com/users/patrickzib/repos","events_url":"https://api.github.com/users/patrickzib/events{/privacy}","received_events_url":"https://api.github.com/users/patrickzib/received_events","type":"User","site_admin":false},"labels":[{"id":1631667223,"node_id":"MDU6TGFiZWwxNjMxNjY3MjIz","url":"https://api.github.com/repos/sktime/sktime/labels/maintenance","name":"maintenance","color":"ea761e","default":false,"description":"Continuous integration, unit testing & package distribution"},{"id":3796180314,"node_id":"LA_kwDOCVKAsc7iRR1a","url":"https://api.github.com/repos/sktime/sktime/labels/enhancement","name":"enhancement","color":"fef2c0","default":true,"description":"Adding new functionality"}],"state":"closed","locked":false,"assignee":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"assignees":[{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},{"login":"aiwalter","id":29627036,"node_id":"MDQ6VXNlcjI5NjI3MDM2","avatar_url":"https://avatars.githubusercontent.com/u/29627036?v=4","gravatar_id":"","url":"https://api.github.com/users/aiwalter","html_url":"https://github.com/aiwalter","followers_url":"https://api.github.com/users/aiwalter/followers","following_url":"https://api.github.com/users/aiwalter/following{/other_user}","gists_url":"https://api.github.com/users/aiwalter/gists{/gist_id}","starred_url":"https://api.github.com/users/aiwalter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiwalter/subscriptions","organizations_url":"https://api.github.com/users/aiwalter/orgs","repos_url":"https://api.github.com/users/aiwalter/repos","events_url":"https://api.github.com/users/aiwalter/events{/privacy}","received_events_url":"https://api.github.com/users/aiwalter/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-12-02T18:20:12Z","updated_at":"2022-12-04T11:39:10Z","closed_at":"2022-12-04T11:37:04Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Following the same logic as in https://github.com/sktime/sktime/issues/3567 I hereby propose:\r\n\r\nI think we should turn `scipy` into a soft dependency, since it is not core to the framework, but used only in specific estimators. \r\n\r\n---\r\n\r\nkey arguments for:\r\n\r\n* the only key change is giving users the choice `scipy` yes/no\r\n* for users with `scipy` installed, the `sktime` experience remains precisely the same\r\n  * users without `scipy` will be able to use `sktime`, currently they cannot\r\n  * users without `scipy` will still be able to find `scipy` based estimators using `all_estimators`, similar to other soft dependencies\r\n* it should be easier to upgrade `sktime` to newer python or package versions, of core dependencies, as `scipy` is slow to update compatibility\r\n* scipy is constantly broken\r\n* architectural: reduces coupling, increases layer separation; minimize soft dependencies, see context below\r\n\r\nkey arguments against:\r\n\r\nI don't really see any except the work required\r\n\r\n---\r\n\r\nUpdate: more context on architectural and usage benefits.\r\n\r\nthe general desideratum is \"minimize dependencies\". This is an explicit architectural north star of scikit-learn as well as sktime.\r\n\r\nSee e.g., this paper on sklearn design,\r\nhttps://mblondel.org/publications/lbuitinck-ecmlpkdd2013.pdf\r\nsearch for \"dependencies\" in the text.\r\n\r\nIn the past 6 months, we have made the interfaces of estimators much clearer, including that we can manage python versions and package dependencies on the estimator level, rather than at the sktime package level\r\n\r\nThis has prompted multiple lines of refactoring around \"minimize dependencies\":\r\n\r\n* migrate sktime-dl into sktime because we can isolate tensorflow to estimators\r\n* isolate `statsmodels`\r\n* newly added annotation module soft dependencies are fully isolated\r\n\r\n`statsmodels` isolation and soft dep is very similar, see this PR: https://github.com/sktime/sktime/pull/3821\r\n\r\n---\r\n\r\nFAQ\r\n\r\n> does this remove `scipy` support from `sktime`?\r\n\r\nNo, `scipy` will still be supported and used in estimators.\r\nIt will only change to be optional, for people who do not want (or need) to use estimators that depend on `scipy`.\r\n\r\n> will this impact performance of `sktime`?\r\n\r\nNo. For users who have `scipy` installed, the experience is precisely the same. The logic of `scipy` based estimators stays the same.\r\n\r\nNo change in estimator accuracy or speed. (evidence: look at the tests in https://github.com/sktime/sktime/pull/3843 which test for both)\r\n\r\nThe only change is that users get a choice whether they want `scipy` or not.","closed_by":{"login":"fkiraly","id":7985502,"node_id":"MDQ6VXNlcjc5ODU1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/7985502?v=4","gravatar_id":"","url":"https://api.github.com/users/fkiraly","html_url":"https://github.com/fkiraly","followers_url":"https://api.github.com/users/fkiraly/followers","following_url":"https://api.github.com/users/fkiraly/following{/other_user}","gists_url":"https://api.github.com/users/fkiraly/gists{/gist_id}","starred_url":"https://api.github.com/users/fkiraly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkiraly/subscriptions","organizations_url":"https://api.github.com/users/fkiraly/orgs","repos_url":"https://api.github.com/users/fkiraly/repos","events_url":"https://api.github.com/users/fkiraly/events{/privacy}","received_events_url":"https://api.github.com/users/fkiraly/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/3875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/3875/timeline","performed_via_github_app":null,"state_reason":"completed"}