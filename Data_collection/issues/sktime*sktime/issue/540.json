{"url":"https://api.github.com/repos/sktime/sktime/issues/540","repository_url":"https://api.github.com/repos/sktime/sktime","labels_url":"https://api.github.com/repos/sktime/sktime/issues/540/labels{/name}","comments_url":"https://api.github.com/repos/sktime/sktime/issues/540/comments","events_url":"https://api.github.com/repos/sktime/sktime/issues/540/events","html_url":"https://github.com/sktime/sktime/issues/540","id":767173067,"node_id":"MDU6SXNzdWU3NjcxNzMwNjc=","number":540,"title":"[BUG] AutoArima fit with X_train generates a ValueError: \"Multiple values provided for both X and exogenous\"","user":{"login":"PierreOreistein","id":19366571,"node_id":"MDQ6VXNlcjE5MzY2NTcx","avatar_url":"https://avatars.githubusercontent.com/u/19366571?v=4","gravatar_id":"","url":"https://api.github.com/users/PierreOreistein","html_url":"https://github.com/PierreOreistein","followers_url":"https://api.github.com/users/PierreOreistein/followers","following_url":"https://api.github.com/users/PierreOreistein/following{/other_user}","gists_url":"https://api.github.com/users/PierreOreistein/gists{/gist_id}","starred_url":"https://api.github.com/users/PierreOreistein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PierreOreistein/subscriptions","organizations_url":"https://api.github.com/users/PierreOreistein/orgs","repos_url":"https://api.github.com/users/PierreOreistein/repos","events_url":"https://api.github.com/users/PierreOreistein/events{/privacy}","received_events_url":"https://api.github.com/users/PierreOreistein/received_events","type":"User","site_admin":false},"labels":[{"id":1118163262,"node_id":"MDU6TGFiZWwxMTE4MTYzMjYy","url":"https://api.github.com/repos/sktime/sktime/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-12-15T04:49:30Z","updated_at":"2021-08-23T11:36:51Z","closed_at":"2020-12-19T08:25:43Z","author_association":"NONE","active_lock_reason":null,"body":"### Description:\r\nI am trying to use the model **AutoARIMA** from _sktime.forecasting.arima_ with exogenous variables.\r\nIn particular, I am trying to pass a Dataframe to the argument _X_train_ in the method _fit_ of the model **AutoARIMA**. When I do so, I obtain a _ValueError_. Below an example\r\n\r\n\r\n```python\r\nMODEL_Auto_ARIMA = AutoARIMA(\r\n)\r\n\r\ny_df = pd.DataFrame(\r\n    np.random.randint(0, 10, 31),\r\n    columns=[\"y\"],\r\n    index=pd.period_range(\r\n        start=\"2020-01-01\",\r\n        periods=31,\r\n        freq=\"D\"\r\n))\r\n\r\nX_df = pd.DataFrame(\r\n    np.random.randint(0, 10, len(y_df)),\r\n    columns=[\"X\"],\r\n    index=y_df.index\r\n)\r\n\r\nMODEL_Auto_ARIMA.fit(\r\n    y_train=y_df[\"y\"],\r\n    X_train=X_df\r\n)\r\n```\r\n\r\nWhen I run the above code, I obtain the following error:\r\n\r\n```python\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-3-4a75cca05732> in <module>\r\n     16 MODEL_Auto_ARIMA.fit(\r\n     17     y_train=y_df[\"y\"],\r\n---> 18     X_train=X_df\r\n     19 )\r\n\r\n~/miniconda3/envs/RATP37/lib/python3.7/site-packages/sktime/forecasting/arima.py in fit(self, y_train, fh, X_train, **fit_args)\r\n    363         self._set_y_X(y_train, X_train)\r\n    364         self._set_fh(fh)\r\n--> 365         self._forecaster.fit(y_train, exogenous=X_train, **fit_args)\r\n    366         self._is_fitted = True\r\n    367         return self\r\n\r\n~/miniconda3/envs/RATP37/lib/python3.7/site-packages/pmdarima/arima/auto.py in fit(self, y, X, **fit_args)\r\n    218             with_intercept=self.with_intercept,\r\n    219             sarimax_kwargs=sarimax_kwargs,\r\n--> 220             **fit_args)\r\n    221 \r\n    222         return self\r\n\r\n~/miniconda3/envs/RATP37/lib/python3.7/site-packages/pmdarima/arima/auto.py in auto_arima(y, X, start_p, d, start_q, max_p, max_d, max_q, start_P, D, start_Q, max_P, max_D, max_Q, max_order, m, seasonal, stationary, information_criterion, alpha, test, seasonal_test, stepwise, n_jobs, start_params, trend, method, maxiter, offset_test_args, seasonal_test_args, suppress_warnings, error_action, trace, random, random_state, n_fits, return_valid_fits, out_of_sample_size, scoring, scoring_args, with_intercept, sarimax_kwargs, **fit_args)\r\n    390 \r\n    391     # Temporary shim until we remove `exogenous` support completely\r\n--> 392     X, fit_args = pm_compat.get_X(X, **fit_args)\r\n    393 \r\n    394     # pop out the deprecated kwargs\r\n\r\n~/miniconda3/envs/RATP37/lib/python3.7/site-packages/pmdarima/compat/pmdarima.py in get_X(X, **kwargs)\r\n     12     exog = kwargs.pop(\"exogenous\", None)\r\n     13     if X is not None and exog is not None:\r\n---> 14         raise ValueError(\"Multiple values provided for both X and exogenous\")\r\n     15 \r\n     16     if exog is not None:\r\n\r\nValueError: Multiple values provided for both X and exogenous\r\n```\r\n\r\n### Additional Context\r\nI am using python 3.7 on a conda virtual environment on WSL2.\r\n\r\n### Versions\r\n<details>\r\nSystem:\r\n    python: 3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]\r\nexecutable: /home/poreistein/miniconda3/envs/RATP37/bin/python3.7\r\n   machine: Linux-4.4.0-18362-Microsoft-x86_64-with-debian-buster-sid\r\n\r\nPython dependencies:\r\n          pip: 20.3.1\r\n   setuptools: 51.0.0.post20201207\r\n      sklearn: 0.23.2\r\n        numpy: 1.19.4\r\n        scipy: 1.5.3\r\n       Cython: 0.29.17\r\n       pandas: 1.1.0\r\n   matplotlib: 3.3.3\r\n       joblib: 0.17.0\r\n        numba: 0.49.1\r\n     pmdarima: 1.8.0\r\n      tsfresh: 0.17.0\r\n</details>\r\n\r\nFeel free if you have any questions for the reproductability","closed_by":{"login":"mloning","id":21020482,"node_id":"MDQ6VXNlcjIxMDIwNDgy","avatar_url":"https://avatars.githubusercontent.com/u/21020482?v=4","gravatar_id":"","url":"https://api.github.com/users/mloning","html_url":"https://github.com/mloning","followers_url":"https://api.github.com/users/mloning/followers","following_url":"https://api.github.com/users/mloning/following{/other_user}","gists_url":"https://api.github.com/users/mloning/gists{/gist_id}","starred_url":"https://api.github.com/users/mloning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloning/subscriptions","organizations_url":"https://api.github.com/users/mloning/orgs","repos_url":"https://api.github.com/users/mloning/repos","events_url":"https://api.github.com/users/mloning/events{/privacy}","received_events_url":"https://api.github.com/users/mloning/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sktime/sktime/issues/540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sktime/sktime/issues/540/timeline","performed_via_github_app":null,"state_reason":"completed"}