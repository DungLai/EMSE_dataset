{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/407","repository_url":"https://api.github.com/repos/onnx/onnxmltools","labels_url":"https://api.github.com/repos/onnx/onnxmltools/issues/407/labels{/name}","comments_url":"https://api.github.com/repos/onnx/onnxmltools/issues/407/comments","events_url":"https://api.github.com/repos/onnx/onnxmltools/issues/407/events","html_url":"https://github.com/onnx/onnxmltools/issues/407","id":657548077,"node_id":"MDU6SXNzdWU2NTc1NDgwNzc=","number":407,"title":"Add support for SparkUDT","user":{"login":"bissont","id":509759,"node_id":"MDQ6VXNlcjUwOTc1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/509759?v=4","gravatar_id":"","url":"https://api.github.com/users/bissont","html_url":"https://github.com/bissont","followers_url":"https://api.github.com/users/bissont/followers","following_url":"https://api.github.com/users/bissont/following{/other_user}","gists_url":"https://api.github.com/users/bissont/gists{/gist_id}","starred_url":"https://api.github.com/users/bissont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bissont/subscriptions","organizations_url":"https://api.github.com/users/bissont/orgs","repos_url":"https://api.github.com/users/bissont/repos","events_url":"https://api.github.com/users/bissont/events{/privacy}","received_events_url":"https://api.github.com/users/bissont/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-15T18:03:58Z","updated_at":"2020-07-23T03:05:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This is a feature request to add support for SparkUDT for conversion `getTensorTypeFromSpark.`:\r\nhttps://github.com/onnx/onnxmltools/blob/37e51abce5ed417e00c502381d6bb9666ba34ed5/onnxmltools/convert/sparkml/utils.py#L32\r\n\r\nCurrently, the conversion from a Spark to a tensor types only supports a conversion of Spark Primitive types. Adding support for SparkUDT is useful.\r\n\r\nThis use-case comes from trying to export the dataframe from this notebook to ONNX:\r\nhttps://docs.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-machine-learning-mllib-notebook\r\n\r\nThe export that results in the error in getTensorTypeFromSpark:\r\n\r\n> from onnxmltools import convert_sparkml\r\n> from onnxmltools.convert.sparkml.utils import buildInitialTypesSimple\r\n> initial_types = buildInitialTypesSimple(train_data_df.drop(\"label\"))\r\n> onnx_model = convert_sparkml(lrModel,\"PySpark model\", initial_types)","closed_by":null,"reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/onnxmltools/issues/407/timeline","performed_via_github_app":null,"state_reason":null}