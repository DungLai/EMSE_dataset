{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/321","repository_url":"https://api.github.com/repos/onnx/onnxmltools","labels_url":"https://api.github.com/repos/onnx/onnxmltools/issues/321/labels{/name}","comments_url":"https://api.github.com/repos/onnx/onnxmltools/issues/321/comments","events_url":"https://api.github.com/repos/onnx/onnxmltools/issues/321/events","html_url":"https://github.com/onnx/onnxmltools/issues/321","id":464798884,"node_id":"MDU6SXNzdWU0NjQ3OTg4ODQ=","number":321,"title":"Convert LightGBM Failed due to split criteria \"==\"","user":{"login":"little-eyes","id":1495542,"node_id":"MDQ6VXNlcjE0OTU1NDI=","avatar_url":"https://avatars.githubusercontent.com/u/1495542?v=4","gravatar_id":"","url":"https://api.github.com/users/little-eyes","html_url":"https://github.com/little-eyes","followers_url":"https://api.github.com/users/little-eyes/followers","following_url":"https://api.github.com/users/little-eyes/following{/other_user}","gists_url":"https://api.github.com/users/little-eyes/gists{/gist_id}","starred_url":"https://api.github.com/users/little-eyes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/little-eyes/subscriptions","organizations_url":"https://api.github.com/users/little-eyes/orgs","repos_url":"https://api.github.com/users/little-eyes/repos","events_url":"https://api.github.com/users/little-eyes/events{/privacy}","received_events_url":"https://api.github.com/users/little-eyes/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-07-06T00:04:01Z","updated_at":"2019-08-21T09:59:50Z","closed_at":"2019-08-21T09:59:50Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI try to convert a lightgbm classifier to onnx using this tool, however, I'm getting some strange error on `unsupported splitting criterion`.\r\n\r\nI changed this file `C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxmltools\\convert\\lightgbm\\operator_converters\\LightGbm.py`, line 29, in _translate_split_criterion to show the criteria, and it is `==` in the criteria that's not supported.\r\n\r\n```bash\r\ninitial_types=[(\"input\", FloatTensorType([1, len(self.gbm.booster_.feature_name())]))])\r\n  File \"C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxmltools\\convert\\main.py\", line 52, in convert_lightgbm\r\n    custom_conversion_functions, custom_shape_calculators)\r\n  File \"C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxmltools\\convert\\lightgbm\\convert.py\", line 47, in convert\r\n    onnx_model = convert_topology(topology, name, doc_string, target_opset, targeted_onnx)\r\n  File \"C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxconverter_common\\topology.py\", line 729, in convert_topology\r\n    registration.get_converter(operator.type)(scope, operator, container)\r\n  File \"C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxmltools\\convert\\lightgbm\\operator_converters\\LightGbm.py\", line 147, in convert_lightgbm\r\n    _parse_tree_structure(tree_id, class_id, learning_rate, tree['tree_structure'], attrs)\r\n  File \"C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxmltools\\convert\\lightgbm\\operator_converters\\LightGbm.py\", line 58, in _parse_tree_structure\r\n    attrs['nodes_modes'].append(_translate_split_criterion(tree_structure['decision_type']))\r\n  File \"C:\\Users\\jilli\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\onnxmltools\\convert\\lightgbm\\operator_converters\\LightGbm.py\", line 29, in _translate_split_criterion\r\n    raise ValueError('Unsupported splitting criterion: %s. Only <=, <, >=, and > are allowed.' + criterion)\r\nValueError: Unsupported splitting criterion: %s. Only <=, <, >=, and > are allowed.\r\n```\r\n\r\nI do have a few features are categorical features, is that the problem?\r\n\r\nHere are the details versions:\r\n* OS: Windows 10 18922.1000\r\n* lightgbm==2.2.3\r\n* onnx==1.5.0\r\n* onnxconverter-common==1.5.0\r\n* onnxmltool==1.5.0\r\n* skl2onnx==1.5.0","closed_by":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/onnxmltools/issues/321/timeline","performed_via_github_app":null,"state_reason":"completed"}