[{"id":3072526484,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzA3MjUyNjQ4NA==","url":"https://api.github.com/repos/onnx/onnxmltools/issues/events/3072526484","actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2020-02-26T08:00:55Z","rename":{"from":"XGBRegressor is maybe broken","to":"XGBRegressor converter is maybe broken"},"performed_via_github_app":null},{"actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T08:01:42Z","updated_at":"2020-02-26T08:01:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/321","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/321/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/321/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/321/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/321","id":522403235,"node_id":"MDU6SXNzdWU1MjI0MDMyMzU=","number":321,"title":"Predictions seem wrong a scikit pipeline with OneHotEncoder","user":{"login":"ivannp","id":1331156,"node_id":"MDQ6VXNlcjEzMzExNTY=","avatar_url":"https://avatars.githubusercontent.com/u/1331156?v=4","gravatar_id":"","url":"https://api.github.com/users/ivannp","html_url":"https://github.com/ivannp","followers_url":"https://api.github.com/users/ivannp/followers","following_url":"https://api.github.com/users/ivannp/following{/other_user}","gists_url":"https://api.github.com/users/ivannp/gists{/gist_id}","starred_url":"https://api.github.com/users/ivannp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivannp/subscriptions","organizations_url":"https://api.github.com/users/ivannp/orgs","repos_url":"https://api.github.com/users/ivannp/repos","events_url":"https://api.github.com/users/ivannp/events{/privacy}","received_events_url":"https://api.github.com/users/ivannp/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2019-11-13T18:43:33Z","updated_at":"2020-04-21T16:44:05Z","closed_at":"2020-04-21T16:44:05Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":162340939,"node_id":"MDEwOlJlcG9zaXRvcnkxNjIzNDA5Mzk=","name":"sklearn-onnx","full_name":"onnx/sklearn-onnx","private":false,"owner":{"login":"onnx","id":31675368,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMxNjc1MzY4","avatar_url":"https://avatars.githubusercontent.com/u/31675368?v=4","gravatar_id":"","url":"https://api.github.com/users/onnx","html_url":"https://github.com/onnx","followers_url":"https://api.github.com/users/onnx/followers","following_url":"https://api.github.com/users/onnx/following{/other_user}","gists_url":"https://api.github.com/users/onnx/gists{/gist_id}","starred_url":"https://api.github.com/users/onnx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onnx/subscriptions","organizations_url":"https://api.github.com/users/onnx/orgs","repos_url":"https://api.github.com/users/onnx/repos","events_url":"https://api.github.com/users/onnx/events{/privacy}","received_events_url":"https://api.github.com/users/onnx/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/onnx/sklearn-onnx","description":"Convert scikit-learn models and pipelines to ONNX","fork":false,"url":"https://api.github.com/repos/onnx/sklearn-onnx","forks_url":"https://api.github.com/repos/onnx/sklearn-onnx/forks","keys_url":"https://api.github.com/repos/onnx/sklearn-onnx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/onnx/sklearn-onnx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/onnx/sklearn-onnx/teams","hooks_url":"https://api.github.com/repos/onnx/sklearn-onnx/hooks","issue_events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events{/number}","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/events","assignees_url":"https://api.github.com/repos/onnx/sklearn-onnx/assignees{/user}","branches_url":"https://api.github.com/repos/onnx/sklearn-onnx/branches{/branch}","tags_url":"https://api.github.com/repos/onnx/sklearn-onnx/tags","blobs_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/refs{/sha}","trees_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/onnx/sklearn-onnx/statuses/{sha}","languages_url":"https://api.github.com/repos/onnx/sklearn-onnx/languages","stargazers_url":"https://api.github.com/repos/onnx/sklearn-onnx/stargazers","contributors_url":"https://api.github.com/repos/onnx/sklearn-onnx/contributors","subscribers_url":"https://api.github.com/repos/onnx/sklearn-onnx/subscribers","subscription_url":"https://api.github.com/repos/onnx/sklearn-onnx/subscription","commits_url":"https://api.github.com/repos/onnx/sklearn-onnx/commits{/sha}","git_commits_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/commits{/sha}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/comments{/number}","issue_comment_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments{/number}","contents_url":"https://api.github.com/repos/onnx/sklearn-onnx/contents/{+path}","compare_url":"https://api.github.com/repos/onnx/sklearn-onnx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/onnx/sklearn-onnx/merges","archive_url":"https://api.github.com/repos/onnx/sklearn-onnx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/onnx/sklearn-onnx/downloads","issues_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues{/number}","pulls_url":"https://api.github.com/repos/onnx/sklearn-onnx/pulls{/number}","milestones_url":"https://api.github.com/repos/onnx/sklearn-onnx/milestones{/number}","notifications_url":"https://api.github.com/repos/onnx/sklearn-onnx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/labels{/name}","releases_url":"https://api.github.com/repos/onnx/sklearn-onnx/releases{/id}","deployments_url":"https://api.github.com/repos/onnx/sklearn-onnx/deployments","created_at":"2018-12-18T20:18:48Z","updated_at":"2023-01-15T03:42:06Z","pushed_at":"2023-01-19T03:36:47Z","git_url":"git://github.com/onnx/sklearn-onnx.git","ssh_url":"git@github.com:onnx/sklearn-onnx.git","clone_url":"https://github.com/onnx/sklearn-onnx.git","svn_url":"https://github.com/onnx/sklearn-onnx","homepage":"","size":72005,"stargazers_count":399,"watchers_count":399,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":85,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":54,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["onnx","scikit-learn"],"visibility":"public","forks":85,"open_issues":54,"watchers":399,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Have a simple model with two predictors:\r\n* int64, plugged into a OneHot transform\r\n* float32/float64, plugged into a RobustScaler\r\n\r\nThe model is created fine, but all predictions come out as 0s. None of them comes out as 0 in the original scikit model.\r\n\r\nRemoving the OneHot transform solves the issue - predictions are similar to the scikit model.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/321/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/593511160","html_url":"https://github.com/onnx/onnxmltools/issues/371#issuecomment-593511160","issue_url":"https://api.github.com/repos/onnx/onnxmltools/issues/371","id":593511160,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzUxMTE2MA==","user":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"created_at":"2020-03-02T17:11:41Z","updated_at":"2020-03-02T17:11:41Z","author_association":"NONE","body":"For the record, I tested latest git version of sklearn-onnx, onnxconverter-common and onnxmltools and the problem is still thereâ€¦","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/593511160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594079746","html_url":"https://github.com/onnx/onnxmltools/issues/371#issuecomment-594079746","issue_url":"https://api.github.com/repos/onnx/onnxmltools/issues/371","id":594079746,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDA3OTc0Ng==","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T17:48:25Z","updated_at":"2020-03-03T17:48:25Z","author_association":"COLLABORATOR","body":"I was able to replicate. I'll have a look tomorrow.","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594079746/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2020-03-04T12:19:57Z","updated_at":"2020-03-04T12:19:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/373","repository_url":"https://api.github.com/repos/onnx/onnxmltools","labels_url":"https://api.github.com/repos/onnx/onnxmltools/issues/373/labels{/name}","comments_url":"https://api.github.com/repos/onnx/onnxmltools/issues/373/comments","events_url":"https://api.github.com/repos/onnx/onnxmltools/issues/373/events","html_url":"https://github.com/onnx/onnxmltools/pull/373","id":575357271,"node_id":"MDExOlB1bGxSZXF1ZXN0MzgzNTE5NzUz","number":373,"title":"Fix xgboost converter","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-03-04T12:19:57Z","updated_at":"2020-03-05T18:46:55Z","closed_at":"2020-03-05T18:46:55Z","author_association":"COLLABORATOR","active_lock_reason":null,"draft":false,"repository":{"id":121798175,"node_id":"MDEwOlJlcG9zaXRvcnkxMjE3OTgxNzU=","name":"onnxmltools","full_name":"onnx/onnxmltools","private":false,"owner":{"login":"onnx","id":31675368,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMxNjc1MzY4","avatar_url":"https://avatars.githubusercontent.com/u/31675368?v=4","gravatar_id":"","url":"https://api.github.com/users/onnx","html_url":"https://github.com/onnx","followers_url":"https://api.github.com/users/onnx/followers","following_url":"https://api.github.com/users/onnx/following{/other_user}","gists_url":"https://api.github.com/users/onnx/gists{/gist_id}","starred_url":"https://api.github.com/users/onnx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onnx/subscriptions","organizations_url":"https://api.github.com/users/onnx/orgs","repos_url":"https://api.github.com/users/onnx/repos","events_url":"https://api.github.com/users/onnx/events{/privacy}","received_events_url":"https://api.github.com/users/onnx/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/onnx/onnxmltools","description":"ONNXMLTools enables conversion of models to ONNX","fork":false,"url":"https://api.github.com/repos/onnx/onnxmltools","forks_url":"https://api.github.com/repos/onnx/onnxmltools/forks","keys_url":"https://api.github.com/repos/onnx/onnxmltools/keys{/key_id}","collaborators_url":"https://api.github.com/repos/onnx/onnxmltools/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/onnx/onnxmltools/teams","hooks_url":"https://api.github.com/repos/onnx/onnxmltools/hooks","issue_events_url":"https://api.github.com/repos/onnx/onnxmltools/issues/events{/number}","events_url":"https://api.github.com/repos/onnx/onnxmltools/events","assignees_url":"https://api.github.com/repos/onnx/onnxmltools/assignees{/user}","branches_url":"https://api.github.com/repos/onnx/onnxmltools/branches{/branch}","tags_url":"https://api.github.com/repos/onnx/onnxmltools/tags","blobs_url":"https://api.github.com/repos/onnx/onnxmltools/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/onnx/onnxmltools/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/onnx/onnxmltools/git/refs{/sha}","trees_url":"https://api.github.com/repos/onnx/onnxmltools/git/trees{/sha}","statuses_url":"https://api.github.com/repos/onnx/onnxmltools/statuses/{sha}","languages_url":"https://api.github.com/repos/onnx/onnxmltools/languages","stargazers_url":"https://api.github.com/repos/onnx/onnxmltools/stargazers","contributors_url":"https://api.github.com/repos/onnx/onnxmltools/contributors","subscribers_url":"https://api.github.com/repos/onnx/onnxmltools/subscribers","subscription_url":"https://api.github.com/repos/onnx/onnxmltools/subscription","commits_url":"https://api.github.com/repos/onnx/onnxmltools/commits{/sha}","git_commits_url":"https://api.github.com/repos/onnx/onnxmltools/git/commits{/sha}","comments_url":"https://api.github.com/repos/onnx/onnxmltools/comments{/number}","issue_comment_url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments{/number}","contents_url":"https://api.github.com/repos/onnx/onnxmltools/contents/{+path}","compare_url":"https://api.github.com/repos/onnx/onnxmltools/compare/{base}...{head}","merges_url":"https://api.github.com/repos/onnx/onnxmltools/merges","archive_url":"https://api.github.com/repos/onnx/onnxmltools/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/onnx/onnxmltools/downloads","issues_url":"https://api.github.com/repos/onnx/onnxmltools/issues{/number}","pulls_url":"https://api.github.com/repos/onnx/onnxmltools/pulls{/number}","milestones_url":"https://api.github.com/repos/onnx/onnxmltools/milestones{/number}","notifications_url":"https://api.github.com/repos/onnx/onnxmltools/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/onnx/onnxmltools/labels{/name}","releases_url":"https://api.github.com/repos/onnx/onnxmltools/releases{/id}","deployments_url":"https://api.github.com/repos/onnx/onnxmltools/deployments","created_at":"2018-02-16T20:37:33Z","updated_at":"2023-01-18T07:05:25Z","pushed_at":"2023-01-18T18:13:14Z","git_url":"git://github.com/onnx/onnxmltools.git","ssh_url":"git@github.com:onnx/onnxmltools.git","clone_url":"https://github.com/onnx/onnxmltools.git","svn_url":"https://github.com/onnx/onnxmltools","homepage":"https://onnx.ai","size":3395,"stargazers_count":720,"watchers_count":720,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":161,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":104,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["keras","machine-learning","onnx","python-library","scikit-learn"],"visibility":"public","forks":161,"open_issues":104,"watchers":720,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/onnx/onnxmltools/pulls/373","html_url":"https://github.com/onnx/onnxmltools/pull/373","diff_url":"https://github.com/onnx/onnxmltools/pull/373.diff","patch_url":"https://github.com/onnx/onnxmltools/pull/373.patch","merged_at":"2020-03-05T18:46:55Z"},"body":"Investigate issue #372, #371, #368. It looks like missing value are not supported the same way in xgboost and in onnxruntime.","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/onnxmltools/issues/373/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594551317","html_url":"https://github.com/onnx/onnxmltools/issues/371#issuecomment-594551317","issue_url":"https://api.github.com/repos/onnx/onnxmltools/issues/371","id":594551317,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDU1MTMxNw==","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2020-03-04T14:21:10Z","updated_at":"2020-03-04T14:21:10Z","author_association":"COLLABORATOR","body":"One issue comes from OneHotEncoder. By default, scikit-learn is using sparse but sparse are not supported yet in Onnxruntime even though they are defined in ONNX. Because Onnxruntime is using a dense representation, missing values are different in scikit-learn (nan) and dense matrices in onnxruntime (0). I suggest using OneHotEncoder(sparse=False) for the time being until sparse are supported in onnxruntime and fully supported in ONNX.","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594551317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594669581","html_url":"https://github.com/onnx/onnxmltools/issues/371#issuecomment-594669581","issue_url":"https://api.github.com/repos/onnx/onnxmltools/issues/371","id":594669581,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDY2OTU4MQ==","user":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"created_at":"2020-03-04T17:10:21Z","updated_at":"2020-03-04T17:33:03Z","author_association":"NONE","body":"@xadupre thank you for the investigation, using `sparse=False` does indeed fix the problem for me!\r\n\r\nI have some questions:\r\n- would it make sense for sklearn-onnx to fail for `OneHotEncoder` that were built with `sparse=True` maybe to avoid any problem until this is supported?\r\n- what are the drawbacks of sparse? It feels to me like training a model takes much more time with `sparse=False` (x10)\r\n- is there an issue to track supporting sparse in onnxruntime?\r\n- you say \"one issue\", are there more ? :smile: ","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594669581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false}},{"id":3097540980,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA5NzU0MDk4MA==","url":"https://api.github.com/repos/onnx/onnxmltools/issues/events/3097540980","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-04T17:10:21Z","performed_via_github_app":null},{"id":3097540988,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwOTc1NDA5ODg=","url":"https://api.github.com/repos/onnx/onnxmltools/issues/events/3097540988","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-04T17:10:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594758619","html_url":"https://github.com/onnx/onnxmltools/issues/371#issuecomment-594758619","issue_url":"https://api.github.com/repos/onnx/onnxmltools/issues/371","id":594758619,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDc1ODYxOQ==","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2020-03-04T19:06:04Z","updated_at":"2020-03-04T19:06:04Z","author_association":"COLLABORATOR","body":"I'm hesitating. sklearn-onnx is being tested with Onnxruntime but it does not mean only Onnxruntime should run ONNX graphs, so failing for OneHotEncoder is not my favourite option. For the OneHotEncoder, there is usually no drawback as it saves much memory space and it is faster as many features are null and are not part of the computation. So, in this case, sparse is definitly better. There is an issue on onnx (https://github.com/onnx/onnx/issues/2008), none in onnxruntime. Feel free to add one. I don't have a better option right now.","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/594758619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"created_at":"2020-03-05T13:08:42Z","updated_at":"2020-03-05T13:08:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/microsoft/onnxruntime/issues/3144","repository_url":"https://api.github.com/repos/microsoft/onnxruntime","labels_url":"https://api.github.com/repos/microsoft/onnxruntime/issues/3144/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/onnxruntime/issues/3144/comments","events_url":"https://api.github.com/repos/microsoft/onnxruntime/issues/3144/events","html_url":"https://github.com/microsoft/onnxruntime/issues/3144","id":576241287,"node_id":"MDU6SXNzdWU1NzYyNDEyODc=","number":3144,"title":"Adding sparse matrix support (or failing them)","user":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"assignees":[{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2020-03-05T13:08:42Z","updated_at":"2021-02-15T01:50:23Z","closed_at":"2020-07-11T02:40:15Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":156939672,"node_id":"MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=","name":"onnxruntime","full_name":"microsoft/onnxruntime","private":false,"owner":{"login":"microsoft","id":6154722,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6154722?v=4","gravatar_id":"","url":"https://api.github.com/users/microsoft","html_url":"https://github.com/microsoft","followers_url":"https://api.github.com/users/microsoft/followers","following_url":"https://api.github.com/users/microsoft/following{/other_user}","gists_url":"https://api.github.com/users/microsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/microsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microsoft/subscriptions","organizations_url":"https://api.github.com/users/microsoft/orgs","repos_url":"https://api.github.com/users/microsoft/repos","events_url":"https://api.github.com/users/microsoft/events{/privacy}","received_events_url":"https://api.github.com/users/microsoft/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/microsoft/onnxruntime","description":"ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator","fork":false,"url":"https://api.github.com/repos/microsoft/onnxruntime","forks_url":"https://api.github.com/repos/microsoft/onnxruntime/forks","keys_url":"https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}","collaborators_url":"https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/microsoft/onnxruntime/teams","hooks_url":"https://api.github.com/repos/microsoft/onnxruntime/hooks","issue_events_url":"https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}","events_url":"https://api.github.com/repos/microsoft/onnxruntime/events","assignees_url":"https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}","branches_url":"https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}","tags_url":"https://api.github.com/repos/microsoft/onnxruntime/tags","blobs_url":"https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}","trees_url":"https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}","statuses_url":"https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}","languages_url":"https://api.github.com/repos/microsoft/onnxruntime/languages","stargazers_url":"https://api.github.com/repos/microsoft/onnxruntime/stargazers","contributors_url":"https://api.github.com/repos/microsoft/onnxruntime/contributors","subscribers_url":"https://api.github.com/repos/microsoft/onnxruntime/subscribers","subscription_url":"https://api.github.com/repos/microsoft/onnxruntime/subscription","commits_url":"https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}","git_commits_url":"https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}","comments_url":"https://api.github.com/repos/microsoft/onnxruntime/comments{/number}","issue_comment_url":"https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}","contents_url":"https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}","compare_url":"https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}","merges_url":"https://api.github.com/repos/microsoft/onnxruntime/merges","archive_url":"https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/microsoft/onnxruntime/downloads","issues_url":"https://api.github.com/repos/microsoft/onnxruntime/issues{/number}","pulls_url":"https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}","milestones_url":"https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}","notifications_url":"https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/microsoft/onnxruntime/labels{/name}","releases_url":"https://api.github.com/repos/microsoft/onnxruntime/releases{/id}","deployments_url":"https://api.github.com/repos/microsoft/onnxruntime/deployments","created_at":"2018-11-10T02:22:53Z","updated_at":"2023-01-19T08:55:51Z","pushed_at":"2023-01-19T09:33:20Z","git_url":"git://github.com/microsoft/onnxruntime.git","ssh_url":"git@github.com:microsoft/onnxruntime.git","clone_url":"https://github.com/microsoft/onnxruntime.git","svn_url":"https://github.com/microsoft/onnxruntime","homepage":"https://www.onnxruntime.ai","size":1029239,"stargazers_count":8111,"watchers_count":8111,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1901,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1516,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ai-framework","deep-learning","hacktoberfest","hardware-acceleration","machine-learning","neural-networks","onnx","pytorch","scikit-learn","tensorflow"],"visibility":"public","forks":1901,"open_issues":1516,"watchers":8111,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nI am creating models with sklearn + xgboost and in particular using the `OneHotEncoder` of sklearn and generating onnx models using sklearn-onnx. \r\n\r\nOne hot encoding using sparse matrix as output results in much 10x faster training with `XGBRegressor`.\r\n\r\nCurrently, if I let the encoder output sparse matrix, onnxruntime gives incorrect values (see https://github.com/onnx/onnxmltools/issues/371 for details).\r\n\r\nIf it doesn't use sparse matrix, then everything work as expected.\r\n\r\n**System information**\r\n- ONNX Runtime version (you are using): v1.1.2\r\n\r\n**Describe the solution you'd like**\r\n\r\nI see two incremental solutions:\r\n- first onnxruntime should fail when using sparse matrix since it doesn't support them.\r\n- second onnxruntime should support sparse matrix so that we can have more efficient training and predicting\r\n\r\n**Describe alternatives you've considered**\r\n\r\nNot using sparse matrix, but as I said it is incredibly slow compared to using them.\r\n\r\n**Additional context**\r\n\r\nI'm not 100% sure sparse tensor are meant to be supported or not by onnx, see https://github.com/onnx/onnx/issues/2008.\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/onnxruntime/issues/3144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/onnxruntime/issues/3144/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/595220507","html_url":"https://github.com/onnx/onnxmltools/issues/371#issuecomment-595220507","issue_url":"https://api.github.com/repos/onnx/onnxmltools/issues/371","id":595220507,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTIyMDUwNw==","user":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"created_at":"2020-03-05T13:10:37Z","updated_at":"2020-03-05T13:10:37Z","author_association":"NONE","body":"@xadupre thank you, I created an issue there: https://github.com/microsoft/onnxruntime/issues/3144\r\n\r\nLet me close the current issue then.","reactions":{"url":"https://api.github.com/repos/onnx/onnxmltools/issues/comments/595220507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false}},{"id":3101123343,"node_id":"MDExOkNsb3NlZEV2ZW50MzEwMTEyMzM0Mw==","url":"https://api.github.com/repos/onnx/onnxmltools/issues/events/3101123343","actor":{"login":"victornoel","id":160975,"node_id":"MDQ6VXNlcjE2MDk3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/160975?v=4","gravatar_id":"","url":"https://api.github.com/users/victornoel","html_url":"https://github.com/victornoel","followers_url":"https://api.github.com/users/victornoel/followers","following_url":"https://api.github.com/users/victornoel/following{/other_user}","gists_url":"https://api.github.com/users/victornoel/gists{/gist_id}","starred_url":"https://api.github.com/users/victornoel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/victornoel/subscriptions","organizations_url":"https://api.github.com/users/victornoel/orgs","repos_url":"https://api.github.com/users/victornoel/repos","events_url":"https://api.github.com/users/victornoel/events{/privacy}","received_events_url":"https://api.github.com/users/victornoel/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-05T13:10:37Z","state_reason":null,"performed_via_github_app":null},{"id":3101123352,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzEwMTEyMzM1Mg==","url":"https://api.github.com/repos/onnx/onnxmltools/issues/events/3101123352","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-05T13:10:37Z","performed_via_github_app":null},{"id":3101123354,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMxMDExMjMzNTQ=","url":"https://api.github.com/repos/onnx/onnxmltools/issues/events/3101123354","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-05T13:10:37Z","performed_via_github_app":null},{"actor":{"login":"Ewan-Keith","id":11393965,"node_id":"MDQ6VXNlcjExMzkzOTY1","avatar_url":"https://avatars.githubusercontent.com/u/11393965?v=4","gravatar_id":"","url":"https://api.github.com/users/Ewan-Keith","html_url":"https://github.com/Ewan-Keith","followers_url":"https://api.github.com/users/Ewan-Keith/followers","following_url":"https://api.github.com/users/Ewan-Keith/following{/other_user}","gists_url":"https://api.github.com/users/Ewan-Keith/gists{/gist_id}","starred_url":"https://api.github.com/users/Ewan-Keith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ewan-Keith/subscriptions","organizations_url":"https://api.github.com/users/Ewan-Keith/orgs","repos_url":"https://api.github.com/users/Ewan-Keith/repos","events_url":"https://api.github.com/users/Ewan-Keith/events{/privacy}","received_events_url":"https://api.github.com/users/Ewan-Keith/received_events","type":"User","site_admin":false},"created_at":"2021-06-29T07:17:19Z","updated_at":"2021-06-29T07:17:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/671","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/671/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/671/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/671/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/671","id":932301220,"node_id":"MDU6SXNzdWU5MzIzMDEyMjA=","number":671,"title":"Sklearn LR predictions differ from onnx predictions (example present in current documentation)","user":{"login":"Ewan-Keith","id":11393965,"node_id":"MDQ6VXNlcjExMzkzOTY1","avatar_url":"https://avatars.githubusercontent.com/u/11393965?v=4","gravatar_id":"","url":"https://api.github.com/users/Ewan-Keith","html_url":"https://github.com/Ewan-Keith","followers_url":"https://api.github.com/users/Ewan-Keith/followers","following_url":"https://api.github.com/users/Ewan-Keith/following{/other_user}","gists_url":"https://api.github.com/users/Ewan-Keith/gists{/gist_id}","starred_url":"https://api.github.com/users/Ewan-Keith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ewan-Keith/subscriptions","organizations_url":"https://api.github.com/users/Ewan-Keith/orgs","repos_url":"https://api.github.com/users/Ewan-Keith/repos","events_url":"https://api.github.com/users/Ewan-Keith/events{/privacy}","received_events_url":"https://api.github.com/users/Ewan-Keith/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-06-29T07:17:19Z","updated_at":"2021-11-26T10:14:51Z","closed_at":"2021-11-26T10:14:51Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":162340939,"node_id":"MDEwOlJlcG9zaXRvcnkxNjIzNDA5Mzk=","name":"sklearn-onnx","full_name":"onnx/sklearn-onnx","private":false,"owner":{"login":"onnx","id":31675368,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMxNjc1MzY4","avatar_url":"https://avatars.githubusercontent.com/u/31675368?v=4","gravatar_id":"","url":"https://api.github.com/users/onnx","html_url":"https://github.com/onnx","followers_url":"https://api.github.com/users/onnx/followers","following_url":"https://api.github.com/users/onnx/following{/other_user}","gists_url":"https://api.github.com/users/onnx/gists{/gist_id}","starred_url":"https://api.github.com/users/onnx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onnx/subscriptions","organizations_url":"https://api.github.com/users/onnx/orgs","repos_url":"https://api.github.com/users/onnx/repos","events_url":"https://api.github.com/users/onnx/events{/privacy}","received_events_url":"https://api.github.com/users/onnx/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/onnx/sklearn-onnx","description":"Convert scikit-learn models and pipelines to ONNX","fork":false,"url":"https://api.github.com/repos/onnx/sklearn-onnx","forks_url":"https://api.github.com/repos/onnx/sklearn-onnx/forks","keys_url":"https://api.github.com/repos/onnx/sklearn-onnx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/onnx/sklearn-onnx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/onnx/sklearn-onnx/teams","hooks_url":"https://api.github.com/repos/onnx/sklearn-onnx/hooks","issue_events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events{/number}","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/events","assignees_url":"https://api.github.com/repos/onnx/sklearn-onnx/assignees{/user}","branches_url":"https://api.github.com/repos/onnx/sklearn-onnx/branches{/branch}","tags_url":"https://api.github.com/repos/onnx/sklearn-onnx/tags","blobs_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/refs{/sha}","trees_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/onnx/sklearn-onnx/statuses/{sha}","languages_url":"https://api.github.com/repos/onnx/sklearn-onnx/languages","stargazers_url":"https://api.github.com/repos/onnx/sklearn-onnx/stargazers","contributors_url":"https://api.github.com/repos/onnx/sklearn-onnx/contributors","subscribers_url":"https://api.github.com/repos/onnx/sklearn-onnx/subscribers","subscription_url":"https://api.github.com/repos/onnx/sklearn-onnx/subscription","commits_url":"https://api.github.com/repos/onnx/sklearn-onnx/commits{/sha}","git_commits_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/commits{/sha}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/comments{/number}","issue_comment_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments{/number}","contents_url":"https://api.github.com/repos/onnx/sklearn-onnx/contents/{+path}","compare_url":"https://api.github.com/repos/onnx/sklearn-onnx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/onnx/sklearn-onnx/merges","archive_url":"https://api.github.com/repos/onnx/sklearn-onnx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/onnx/sklearn-onnx/downloads","issues_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues{/number}","pulls_url":"https://api.github.com/repos/onnx/sklearn-onnx/pulls{/number}","milestones_url":"https://api.github.com/repos/onnx/sklearn-onnx/milestones{/number}","notifications_url":"https://api.github.com/repos/onnx/sklearn-onnx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/labels{/name}","releases_url":"https://api.github.com/repos/onnx/sklearn-onnx/releases{/id}","deployments_url":"https://api.github.com/repos/onnx/sklearn-onnx/deployments","created_at":"2018-12-18T20:18:48Z","updated_at":"2023-01-15T03:42:06Z","pushed_at":"2023-01-19T03:36:47Z","git_url":"git://github.com/onnx/sklearn-onnx.git","ssh_url":"git@github.com:onnx/sklearn-onnx.git","clone_url":"https://github.com/onnx/sklearn-onnx.git","svn_url":"https://github.com/onnx/sklearn-onnx","homepage":"","size":72005,"stargazers_count":399,"watchers_count":399,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":85,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":54,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["onnx","scikit-learn"],"visibility":"public","forks":85,"open_issues":54,"watchers":399,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Since this is present in the documentation it could be that I'm misunderstanding the expected behaviour, but it looks like use of one-hot-encoding results in different predictions between sklearn pipelines and generated onnx models. \r\n\r\nThe example in the documentation is the titanic pipeline example [here](http://onnx.ai/sklearn-onnx/auto_examples/plot_complex_pipeline.html#compare-the-predictions). The predicted outputs shown are:\r\n\r\n**Sklearn predictions:**\r\n```\r\npredict [0 0 1 0 0]\r\npredict_proba [[0.65654207 0.34345793]]\r\n```\r\n\r\n**Onnx predictions:**\r\n```\r\npredict [1 0 1 0 0]\r\npredict_proba [{0: 0.4371914267539978, 1: 0.5628085732460022}]\r\n```\r\n\r\nI can replicate this using the example locally and have also encountered similar behaviour in my own converted pipeline. In both cases if I remove the categorical features and transformer from the pipeline I get identical predictions (within double/float precision) between sklearn and onnx models, which makes me think the root of the difference is in the OHE.\r\n\r\nI see from other issues (https://github.com/onnx/onnxmltools/issues/371) that Sklearn's default use of sparse representations can cause issues with OHE in onnx if not disabled. In this case using Sparse representation or not has no effect on the outcome (identical predictions without OHE, different predictions with it).\r\n\r\nPackage versions I used to replicate this are:\r\n```\r\nnumpy: 1.15.4\r\nscikit-learn: 0.24.2\r\nonnx:  1.8.0\r\nonnxruntime:  1.1.2\r\nskl2onnx:  1.8.0\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/671/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]