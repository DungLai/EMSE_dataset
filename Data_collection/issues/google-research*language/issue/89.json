{"url":"https://api.github.com/repos/google-research/language/issues/89","repository_url":"https://api.github.com/repos/google-research/language","labels_url":"https://api.github.com/repos/google-research/language/issues/89/labels{/name}","comments_url":"https://api.github.com/repos/google-research/language/issues/89/comments","events_url":"https://api.github.com/repos/google-research/language/issues/89/events","html_url":"https://github.com/google-research/language/issues/89","id":720248263,"node_id":"MDU6SXNzdWU3MjAyNDgyNjM=","number":89,"title":"ORQA/REALM - Invalid argument: indices[0] = 10311577 is not in","user":{"login":"ioannist","id":6544125,"node_id":"MDQ6VXNlcjY1NDQxMjU=","avatar_url":"https://avatars.githubusercontent.com/u/6544125?v=4","gravatar_id":"","url":"https://api.github.com/users/ioannist","html_url":"https://github.com/ioannist","followers_url":"https://api.github.com/users/ioannist/followers","following_url":"https://api.github.com/users/ioannist/following{/other_user}","gists_url":"https://api.github.com/users/ioannist/gists{/gist_id}","starred_url":"https://api.github.com/users/ioannist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ioannist/subscriptions","organizations_url":"https://api.github.com/users/ioannist/orgs","repos_url":"https://api.github.com/users/ioannist/repos","events_url":"https://api.github.com/users/ioannist/events{/privacy}","received_events_url":"https://api.github.com/users/ioannist/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-10-13T13:25:41Z","updated_at":"2022-04-29T09:54:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am trying to run Orqa finetuning with Realm models on my own data set. I have created the blocks.tfr file and used --num_block_records=154800 which is the number of rows in my records file. \r\n\r\nI launch fine-tuning with\r\n\r\n`python -m language.orqa.experiments.orqa_experiment --retriever_module_path=$(pwd)/language/orqa/gs/realm-data/cc_news_pretrained/embedder --reader_module_path=$(pwd)/language/orqa/gs/realm-data/cc_news_pretrained/bert --block_records_path=$(pwd)/language/orqa/gs/orqa-data/trump-blocks/blocks.tfr --num_block_records=227246 --data_root=$(pwd)/language/orqa/gs/orqa-data/resplit --model_dir=$(pwd)/language/orqa/models/orqa_trump_model_from_realm --dataset_name=TrumpQuestions --num_train_steps=$(( 3417 * 20 )) --save_checkpoints_steps=1000`\r\n\r\nEverything seems to go well in the first ten minutes, but once shuffle buffer filling completes, I get an error\r\n\r\n```\r\n2020-10-13 13:06:30.130961: I tensorflow/core/kernels/data/shuffle_dataset_op.cc:199] Shuffle buffer filled.\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/anaconda3/envs/orqa/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1367, in _do_call\r\n    return fn(*args)\r\n  File \"/home/ubuntu/anaconda3/envs/orqa/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1352, in _run_fn\r\n    target_list, run_metadata)\r\n  File \"/home/ubuntu/anaconda3/envs/orqa/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1445, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: 2 root error(s) found.\r\n  (0) Invalid argument: indices[0] = 10311577 is not in [0, 227246)\r\n         [[{{node GatherV2_2}}]]\r\n  (1) Invalid argument: indices[0] = 10311577 is not in [0, 227246)\r\n         [[{{node GatherV2_2}}]]\r\n         [[reader/RaggedRange_4/_8285]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n....\r\n....\r\nErrors may have originated from an input operation.\r\nInput Source operations connected to node GatherV2_2:\r\n blocks/read (defined at /ioannis/language/language/orqa/models/orqa_model.py:147)\r\n Squeeze (defined at /ioannis/language/language/orqa/models/orqa_model.py:129)\r\n\r\nInput Source operations connected to node GatherV2_2:\r\n blocks/read (defined at /ioannis/language/language/orqa/models/orqa_model.py:147)\r\n Squeeze (defined at /ioannis/language/language/orqa/models/orqa_model.py:129)\r\n\r\n```\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/language/issues/89/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/language/issues/89/timeline","performed_via_github_app":null,"state_reason":null}