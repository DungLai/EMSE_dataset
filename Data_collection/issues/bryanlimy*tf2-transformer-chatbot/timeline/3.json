[{"url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/comments/500160429","html_url":"https://github.com/bryanlimy/tf2-transformer-chatbot/issues/3#issuecomment-500160429","issue_url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/3","id":500160429,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDE2MDQyOQ==","user":{"login":"bryanlimy","id":9648242,"node_id":"MDQ6VXNlcjk2NDgyNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9648242?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanlimy","html_url":"https://github.com/bryanlimy","followers_url":"https://api.github.com/users/bryanlimy/followers","following_url":"https://api.github.com/users/bryanlimy/following{/other_user}","gists_url":"https://api.github.com/users/bryanlimy/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanlimy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanlimy/subscriptions","organizations_url":"https://api.github.com/users/bryanlimy/orgs","repos_url":"https://api.github.com/users/bryanlimy/repos","events_url":"https://api.github.com/users/bryanlimy/events{/privacy}","received_events_url":"https://api.github.com/users/bryanlimy/received_events","type":"User","site_admin":false},"created_at":"2019-06-08T20:29:49Z","updated_at":"2019-06-08T20:29:49Z","author_association":"OWNER","body":"I just ran this and it was fine, make sure the tf-nightly you are using is fine\r\n```\r\nimport tensorflow as tf\r\nfrom model import transformer\r\n\r\n\r\nclass Inputs:\r\n  def __init__(self, units=512, d_model=256, num_heads=8, num_layers=2,\r\n               dropout=0.1, vocab_size=100):\r\n    self.num_units = units\r\n    self.d_model = d_model\r\n    self.num_heads = num_heads\r\n    self.num_layers = num_layers\r\n    self.dropout = dropout\r\n    self.vocab_size = vocab_size\r\n    self.activation = \"relu\"\r\n\r\nif __name__ == '__main__':\r\n  model = transformer(Inputs())\r\n\r\n  tf.keras.utils.plot_model(\r\n    model, to_file='transformer.png', show_shapes=True)\r\n```","reactions":{"url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/comments/500160429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bryanlimy","id":9648242,"node_id":"MDQ6VXNlcjk2NDgyNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9648242?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanlimy","html_url":"https://github.com/bryanlimy","followers_url":"https://api.github.com/users/bryanlimy/followers","following_url":"https://api.github.com/users/bryanlimy/following{/other_user}","gists_url":"https://api.github.com/users/bryanlimy/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanlimy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanlimy/subscriptions","organizations_url":"https://api.github.com/users/bryanlimy/orgs","repos_url":"https://api.github.com/users/bryanlimy/repos","events_url":"https://api.github.com/users/bryanlimy/events{/privacy}","received_events_url":"https://api.github.com/users/bryanlimy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/comments/501412163","html_url":"https://github.com/bryanlimy/tf2-transformer-chatbot/issues/3#issuecomment-501412163","issue_url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/3","id":501412163,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTQxMjE2Mw==","user":{"login":"tonyhqanguyen","id":36124849,"node_id":"MDQ6VXNlcjM2MTI0ODQ5","avatar_url":"https://avatars.githubusercontent.com/u/36124849?v=4","gravatar_id":"","url":"https://api.github.com/users/tonyhqanguyen","html_url":"https://github.com/tonyhqanguyen","followers_url":"https://api.github.com/users/tonyhqanguyen/followers","following_url":"https://api.github.com/users/tonyhqanguyen/following{/other_user}","gists_url":"https://api.github.com/users/tonyhqanguyen/gists{/gist_id}","starred_url":"https://api.github.com/users/tonyhqanguyen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonyhqanguyen/subscriptions","organizations_url":"https://api.github.com/users/tonyhqanguyen/orgs","repos_url":"https://api.github.com/users/tonyhqanguyen/repos","events_url":"https://api.github.com/users/tonyhqanguyen/events{/privacy}","received_events_url":"https://api.github.com/users/tonyhqanguyen/received_events","type":"User","site_admin":false},"created_at":"2019-06-12T19:00:47Z","updated_at":"2019-06-12T19:00:47Z","author_association":"NONE","body":"Thanks! Turns out I accidentally uninstalled tf-nightly without knowing it. \r\n\r\nI was just trying to re-write this in PyTorch (I'm more familiar with this). Do you know how I could get some insight of the training loop? For example:\r\n\r\n1. Does each iteration take in a time-step of inputs (i.e. at iteration `i` of a training batch, does it take in all the i-th tokens of each sequence, or does the training loop process each sequence separately. Essentially, what would be the shape of the input to each iteration and what would each shape dimension represent?\r\n\r\n2. Would the output shape be (batch size, d_model)? If so, what would this mean? \r\n\r\nI was looking at this tutorial here: https://pytorch.org/tutorials/beginner/chatbot_tutorial.html, and the input of each iteration for each training batch is the entire time step, so first iteration gets all the first tokens of all the sequences, and so on. And the output is of shape (batch size, vocab_size) where for each line `i` of the matrix, is the array of probabilities of the output being each word in the vocabulary. I just wasn't sure how to interpret the inputs and outputs here. \r\n\r\nThe drawback of the other model is that it doesn't implement the attention mechanism from the Attention is All You Need paper. The attention mechanism it uses in the decoder seems different, and it doesn't use it in the encoder at all. I was hoping to get some insight from you if you don't mind.","reactions":{"url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/comments/501412163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tonyhqanguyen","id":36124849,"node_id":"MDQ6VXNlcjM2MTI0ODQ5","avatar_url":"https://avatars.githubusercontent.com/u/36124849?v=4","gravatar_id":"","url":"https://api.github.com/users/tonyhqanguyen","html_url":"https://github.com/tonyhqanguyen","followers_url":"https://api.github.com/users/tonyhqanguyen/followers","following_url":"https://api.github.com/users/tonyhqanguyen/following{/other_user}","gists_url":"https://api.github.com/users/tonyhqanguyen/gists{/gist_id}","starred_url":"https://api.github.com/users/tonyhqanguyen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonyhqanguyen/subscriptions","organizations_url":"https://api.github.com/users/tonyhqanguyen/orgs","repos_url":"https://api.github.com/users/tonyhqanguyen/repos","events_url":"https://api.github.com/users/tonyhqanguyen/events{/privacy}","received_events_url":"https://api.github.com/users/tonyhqanguyen/received_events","type":"User","site_admin":false}},{"id":2681207639,"node_id":"MDExOkNsb3NlZEV2ZW50MjY4MTIwNzYzOQ==","url":"https://api.github.com/repos/bryanlimy/tf2-transformer-chatbot/issues/events/2681207639","actor":{"login":"bryanlimy","id":9648242,"node_id":"MDQ6VXNlcjk2NDgyNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9648242?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanlimy","html_url":"https://github.com/bryanlimy","followers_url":"https://api.github.com/users/bryanlimy/followers","following_url":"https://api.github.com/users/bryanlimy/following{/other_user}","gists_url":"https://api.github.com/users/bryanlimy/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanlimy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanlimy/subscriptions","organizations_url":"https://api.github.com/users/bryanlimy/orgs","repos_url":"https://api.github.com/users/bryanlimy/repos","events_url":"https://api.github.com/users/bryanlimy/events{/privacy}","received_events_url":"https://api.github.com/users/bryanlimy/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-10-02T16:17:05Z","state_reason":null,"performed_via_github_app":null}]