{"url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/1333","repository_url":"https://api.github.com/repos/Drakkar-Software/OctoBot","labels_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/1333/labels{/name}","comments_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/1333/comments","events_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/1333/events","html_url":"https://github.com/Drakkar-Software/OctoBot/issues/1333","id":713667557,"node_id":"MDU6SXNzdWU3MTM2Njc1NTc=","number":1333,"title":"Staggered orders missing orders","user":{"login":"AndreiMihalea","id":19358925,"node_id":"MDQ6VXNlcjE5MzU4OTI1","avatar_url":"https://avatars.githubusercontent.com/u/19358925?v=4","gravatar_id":"","url":"https://api.github.com/users/AndreiMihalea","html_url":"https://github.com/AndreiMihalea","followers_url":"https://api.github.com/users/AndreiMihalea/followers","following_url":"https://api.github.com/users/AndreiMihalea/following{/other_user}","gists_url":"https://api.github.com/users/AndreiMihalea/gists{/gist_id}","starred_url":"https://api.github.com/users/AndreiMihalea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndreiMihalea/subscriptions","organizations_url":"https://api.github.com/users/AndreiMihalea/orgs","repos_url":"https://api.github.com/users/AndreiMihalea/repos","events_url":"https://api.github.com/users/AndreiMihalea/events{/privacy}","received_events_url":"https://api.github.com/users/AndreiMihalea/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-02T14:31:51Z","updated_at":"2020-10-02T17:35:48Z","closed_at":"2020-10-02T17:35:47Z","author_association":"NONE","active_lock_reason":null,"body":"## Environment description:\r\n  * OS: Ubuntu 20.04\r\n  * Python Version: 3.7.0\r\n  * Last Commit ID: 0d65a1bc1712823684aa0532d4b9177cd2e9bc17\r\n  * Branch: Dev\r\n \r\n## Problem description\r\nUsing the Binance trading platform (only one I've tried with), some orders are not being created, even though the bot says they are. They appear in logs for as long as the bot runs, but as soon as it gets restarted the number of orders will become the real one, shown on Binance.\r\n\r\n**Expected behavior**\r\nWhen an order is completed, another order should be created.\r\n\r\n### Steps to reproduce:\r\n\r\n  1. Enable the real trader\r\n  2. Configure the staggered orders strategy\r\n  3. Let the bot run for some time (sometimes it takes hours until the first order goes missing)\r\n  \r\n### Observed Results:\r\n\r\n  * What happened? The number of orders on Binance starts to decrease, while the number of orders stays the same in the bot's logs. When the bot is restarted, the orders shown are the ones that remained on Binance.\r\n  * What did you expect to happen? The number of orders on Binance and the ones shown by the bot should be the same.\r\n\r\n### Relevant code exceptions or logs:\r\nIf applicable, add screenshots to help explain your problem.\r\n \r\nHere, I have a fragment of a logfile before closing the bot, where we can see there are 147 open orders (on Binance, there were only 143)\r\n```\r\n2020-10-02 15:03:15 INFO   Trader[binance]      logging_util.py:54       Created order on binance: {'info': {'symbol': 'BNBBUSD', 'orderId': 92649012, 'orderListId': -1, 'clientOrderId': 'Rs3iYgEwXOIKguodlZ41qj', 'transactTime': 1601640195000, 'price': '26.06730000', 'origQty': '0.44000000', 'executedQty': '0.00000000', 'cummulativeQuoteQty': '0.00000000', 'status': 'NEW', 'timeInForce': 'GTC', 'type': 'LIMIT', 'side': 'BUY'}, 'id': '92649012', 'timestamp': 1601640195000, 'datetime': '2020-10-02T12:03:15.000Z', 'lastTradeTimestamp': None, 'symbol': 'BNB/BUSD', 'type': 'limit', 'side': 'buy', 'price': 26.0673, 'amount': 0.44, 'cost': 0.0, 'average': None, 'filled': 0.0, 'remaining': 0.44, 'status': 'open', 'fee': None, 'trades': None}\r\n2020-10-02 15:03:15 INFO   Trader[binance]      logging_util.py:54       Order creation : BNB/BUSD | BUY_LIMIT | Price : 26.0673 | Quantity : 0.44 | Status : OPEN \r\n2020-10-02 15:03:15 DEBUG  OrdersManager[binance] logging_util.py:50       Order added to open orders (total: 147 open orders)\r\n2020-10-02 15:20:21 INFO   TaskManager          logging_util.py:54       Stopping threads ...\r\n2020-10-02 15:20:21 DEBUG  Notification         logging_util.py:50       Twitter notification disabled\r\n2020-10-02 15:20:21 DEBUG  Notification         logging_util.py:50       Telegram disabled\r\n2020-10-02 15:20:21 INFO   RESTExchange[binance] logging_util.py:54       Closing connection.\r\n2020-10-02 15:20:21 INFO   RESTExchange[binance] logging_util.py:54       Connection closed.\r\n2020-10-02 15:20:21 INFO   TaskManager          logging_util.py:54       Threads stopped.\r\n```\r\nAfter I restart the bot, this is what it shows (we can see there are 143 loaded orders)\r\n```\r\n2020-10-02 15:20:23 INFO   OctoBot Launcher     start.py:127      Version : 0.3.9\r\n2020-10-02 15:20:24 INFO   OctoBot Launcher     start.py:131      Loading config files...\r\n2020-10-02 15:20:24 INFO   OctoBot Launcher     start.py:100      Disclaimer accepted by user.\r\n2020-10-02 15:20:24 WARNING ServiceCreator       logging_util.py:58       RedditService can't be initialized: configuration is missing, wrong or incomplete !\r\n2020-10-02 15:20:24 WARNING ServiceCreator       logging_util.py:58       TwitterService can't be initialized: configuration is missing, wrong or incomplete !\r\n2020-10-02 15:20:24 INFO   WebService           logging_util.py:54       Interface successfully initialized and accessible at: http://127.0.1.1:5001.\r\n2020-10-02 15:20:24 DEBUG  Notification         logging_util.py:50       Twitter notification disabled\r\n2020-10-02 15:20:24 DEBUG  Notification         logging_util.py:50       Telegram disabled\r\n2020-10-02 15:20:25 INFO   ExchangeDispatcher[binance] logging_util.py:54       online with REST api and web socket api\r\n2020-10-02 15:20:25 INFO   Portfolio[binance]   logging_util.py:54       Current Portfolio : \r\n{.....some log showing all the loaded orders and the Binance portfolio....}\r\n2020-10-02 15:20:26 INFO   Trader[binance]      logging_util.py:54       Order loaded : BNB/BUSD | BUY_LIMIT | Price : 25.9808 | Quantity : 0.46 | Status : OPEN \r\n2020-10-02 15:20:26 DEBUG  OrdersManager[binance] logging_util.py:50       Order added to open orders (total: 142 open orders)\r\n2020-10-02 15:20:26 INFO   Trader[binance]      logging_util.py:54       Order loaded : BNB/BUSD | BUY_LIMIT | Price : 26.0673 | Quantity : 0.44 | Status : OPEN \r\n2020-10-02 15:20:26 DEBUG  OrdersManager[binance] logging_util.py:50       Order added to open orders (total: 143 open orders)\r\n2020-10-02 15:20:26 DEBUG  Trader[binance]      logging_util.py:50       Enabled on binance\r\n2020-10-02 15:20:26 INFO   TaskManager          logging_util.py:54       Evaluation tasks started...\r\n```","closed_by":{"login":"AndreiMihalea","id":19358925,"node_id":"MDQ6VXNlcjE5MzU4OTI1","avatar_url":"https://avatars.githubusercontent.com/u/19358925?v=4","gravatar_id":"","url":"https://api.github.com/users/AndreiMihalea","html_url":"https://github.com/AndreiMihalea","followers_url":"https://api.github.com/users/AndreiMihalea/followers","following_url":"https://api.github.com/users/AndreiMihalea/following{/other_user}","gists_url":"https://api.github.com/users/AndreiMihalea/gists{/gist_id}","starred_url":"https://api.github.com/users/AndreiMihalea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndreiMihalea/subscriptions","organizations_url":"https://api.github.com/users/AndreiMihalea/orgs","repos_url":"https://api.github.com/users/AndreiMihalea/repos","events_url":"https://api.github.com/users/AndreiMihalea/events{/privacy}","received_events_url":"https://api.github.com/users/AndreiMihalea/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/1333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/1333/timeline","performed_via_github_app":null,"state_reason":"completed"}