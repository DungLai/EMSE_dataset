{"url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/926","repository_url":"https://api.github.com/repos/Drakkar-Software/OctoBot","labels_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/926/labels{/name}","comments_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/926/comments","events_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/926/events","html_url":"https://github.com/Drakkar-Software/OctoBot/issues/926","id":454099166,"node_id":"MDU6SXNzdWU0NTQwOTkxNjY=","number":926,"title":"Failed to create order in CoinbasePro","user":{"login":"rarunkumar8024","id":31361082,"node_id":"MDQ6VXNlcjMxMzYxMDgy","avatar_url":"https://avatars.githubusercontent.com/u/31361082?v=4","gravatar_id":"","url":"https://api.github.com/users/rarunkumar8024","html_url":"https://github.com/rarunkumar8024","followers_url":"https://api.github.com/users/rarunkumar8024/followers","following_url":"https://api.github.com/users/rarunkumar8024/following{/other_user}","gists_url":"https://api.github.com/users/rarunkumar8024/gists{/gist_id}","starred_url":"https://api.github.com/users/rarunkumar8024/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rarunkumar8024/subscriptions","organizations_url":"https://api.github.com/users/rarunkumar8024/orgs","repos_url":"https://api.github.com/users/rarunkumar8024/repos","events_url":"https://api.github.com/users/rarunkumar8024/events{/privacy}","received_events_url":"https://api.github.com/users/rarunkumar8024/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-06-10T10:19:10Z","updated_at":"2019-12-30T15:28:47Z","closed_at":"2019-12-30T15:28:47Z","author_association":"NONE","active_lock_reason":null,"body":"## Step 1: Have you search for this issue before posting it? Yes\r\n\r\nIf you have discovered a bug in the bot, please [search our issue tracker](https://github.com/Drakkar-Software/OctoBot/issues?q=is%3Aissue). \r\nIf it hasn't been reported, please create a new issue.\r\n\r\n## Step 2: Describe your environment: Windows / Python - 3.7.3 / Branch: Dev /  Last Commit Id: c2dea8e\r\n  * OS : [Windows, Ubuntu, Debian, Raspbian...] \r\n  * Python Version: _____ (`python -V`)\r\n  * In case you are not using a binary version:\r\n    * Branch: Master | Dev\r\n    * Last Commit ID: _____ (`git log --format=\"%H\" -n 1`)\r\n \r\n## Step 3: Describe the problem:  CoinbasePro has failed orders due to rounding problems.  Each pair of coins has separate rounding logic and Octobot fails to identify that.  \r\n\r\n\r\n**Expected behavior**\r\nEach Trading pairs has got both Quote_Increment and Base_Increments defined by CoinbasePro api.  I believe that need to be considered to avoid the errors reported below.\r\n\r\n### Steps to reproduce:\r\nTest the pairs like XLM-USD / XRP-USD / ZRX-USD etc to find these kind of issues\r\n  \r\n### Observed Results:\r\n\r\n  * Orders are failed \r\n  * Orders are expected to submit successful\r\n\r\n### Relevant code exceptions or logs:\r\n\r\n2019-06-09 12:39:49 ERROR  RESTExchange[coinbasepro] logging_util.py:62       Failed to create order : coinbasepro size is too accurate. Smallest unit is 1 (order_type: TraderOrderType.BUY_MARKET, symbol: XRP/BTC, quantity: 20.71613628, price: 4.909e-05, stop_price: None)\r\n2019-06-09 12:39:49 ERROR  RESTExchange[coinbasepro] logging_util.py:66       coinbasepro size is too accurate. Smallest unit is 1\r\nTraceback (most recent call last):\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\exchanges\\rest_exchanges\\rest_exchange.py\", line 217, in create_order\r\n    created_order = await self._create_specific_order(order_type, symbol, quantity, price)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\exchanges\\rest_exchanges\\rest_exchange.py\", line 243, in _create_specific_order\r\n    created_order = await self.client.create_market_buy_order(symbol, quantity)\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\gdax.py\", line 532, in create_order\r\n    response = await self.privatePostOrders(self.extend(request, params))\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\gdax.py\", line 781, in request\r\n    response = await self.fetch2(path, api, method, params, headers, body)\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\base\\exchange.py\", line 115, in fetch2\r\n    return await self.fetch(request['url'], request['method'], request['headers'], request['body'])\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\base\\exchange.py\", line 163, in fetch\r\n    self.handle_errors(response.status, response.reason, url, method, headers, http_response, json_response)\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\gdax.py\", line 777, in handle_errors\r\n    raise ExchangeError(feedback)  # unknown message\r\nccxt.base.errors.ExchangeError: coinbasepro size is too accurate. Smallest unit is 1\r\n2019-06-09 12:39:49 INFO   Trader[coinbasepro]  logging_util.py:54       Created order on coinbasepro: None\r\n2019-06-09 12:39:49 ERROR  DailyTradingModeCreator logging_util.py:62       Failed to create order : 'NoneType' object is not subscriptable. Order: XRP/BTC | BUY_MARKET | Price : 4.909e-05 | Quantity : 20.71613628 | Status : OPEN\r\n2019-06-09 12:39:49 ERROR  DailyTradingModeCreator logging_util.py:66       'NoneType' object is not subscriptable\r\nTraceback (most recent call last):\r\n  File \"f:\\Python\\Octobot\\OctoBot\\tentacles\\Trading\\Mode\\Default\\daily_trading_mode.py\", line 294, in create_new_order\r\n    await trader.create_order(current_order, portfolio)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 196, in create_order\r\n    new_order = await self._create_not_loaded_order(order, new_order, portfolio)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 243, in _create_not_loaded_order\r\n    new_order = self.parse_exchange_order_to_order_instance(created_order)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 482, in parse_exchange_order_to_order_instance\r\n    return self.create_order_instance(order_type=self.parse_order_type(order),\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 527, in parse_order_type\r\n    side = TradeOrderSide(order[\"side\"])\r\nTypeError: 'NoneType' object is not subscriptable\r\n-------------------------------------------------------------------\r\n\r\n2019-06-09 07:19:19 ERROR  RESTExchange[coinbasepro] logging_util.py:62       Failed to create order : coinbasepro size is too accurate. Smallest unit is 0.00001 (order_type: TraderOrderType.BUY_LIMIT, symbol: ZRX/BTC, quantity: 28.31873563, price: 4.151e-05, stop_price: None)\r\n2019-06-09 07:19:19 ERROR  RESTExchange[coinbasepro] logging_util.py:66       coinbasepro size is too accurate. Smallest unit is 0.00001\r\nTraceback (most recent call last):\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\exchanges\\rest_exchanges\\rest_exchange.py\", line 217, in create_order\r\n    created_order = await self._create_specific_order(order_type, symbol, quantity, price)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\exchanges\\rest_exchanges\\rest_exchange.py\", line 245, in _create_specific_order\r\n    created_order = await self.client.create_limit_buy_order(symbol, quantity, price)\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\gdax.py\", line 532, in create_order\r\n    response = await self.privatePostOrders(self.extend(request, params))\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\gdax.py\", line 781, in request\r\n    response = await self.fetch2(path, api, method, params, headers, body)\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\base\\exchange.py\", line 115, in fetch2\r\n    return await self.fetch(request['url'], request['method'], request['headers'], request['body'])\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\base\\exchange.py\", line 163, in fetch\r\n    self.handle_errors(response.status, response.reason, url, method, headers, http_response, json_response)\r\n  File \"F:\\Python\\Octobot\\python373\\lib\\site-packages\\ccxt\\async_support\\gdax.py\", line 777, in handle_errors\r\n    raise ExchangeError(feedback)  # unknown message\r\nccxt.base.errors.ExchangeError: coinbasepro size is too accurate. Smallest unit is 0.00001\r\n2019-06-09 07:19:19 INFO   Trader[coinbasepro]  logging_util.py:54       Created order on coinbasepro: None\r\n2019-06-09 07:19:19 ERROR  DailyTradingModeCreator logging_util.py:62       Failed to create order : 'NoneType' object is not subscriptable. Order: ZRX/BTC | BUY_LIMIT | Price : 4.151e-05 | Quantity : 28.31873563 | Status : OPEN\r\n2019-06-09 07:19:19 ERROR  DailyTradingModeCreator logging_util.py:66       'NoneType' object is not subscriptable\r\nTraceback (most recent call last):\r\n  File \"f:\\Python\\Octobot\\OctoBot\\tentacles\\Trading\\Mode\\Default\\daily_trading_mode.py\", line 277, in create_new_order\r\n    await trader.create_order(current_order, portfolio)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 196, in create_order\r\n    new_order = await self._create_not_loaded_order(order, new_order, portfolio)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 243, in _create_not_loaded_order\r\n    new_order = self.parse_exchange_order_to_order_instance(created_order)\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 482, in parse_exchange_order_to_order_instance\r\n    return self.create_order_instance(order_type=self.parse_order_type(order),\r\n  File \"f:\\Python\\Octobot\\OctoBot\\trading\\trader\\trader.py\", line 527, in parse_order_type\r\n    side = TradeOrderSide(order[\"side\"])\r\nTypeError: 'NoneType' object is not subscriptable\r\n","closed_by":{"login":"Herklos","id":10454670,"node_id":"MDQ6VXNlcjEwNDU0Njcw","avatar_url":"https://avatars.githubusercontent.com/u/10454670?v=4","gravatar_id":"","url":"https://api.github.com/users/Herklos","html_url":"https://github.com/Herklos","followers_url":"https://api.github.com/users/Herklos/followers","following_url":"https://api.github.com/users/Herklos/following{/other_user}","gists_url":"https://api.github.com/users/Herklos/gists{/gist_id}","starred_url":"https://api.github.com/users/Herklos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Herklos/subscriptions","organizations_url":"https://api.github.com/users/Herklos/orgs","repos_url":"https://api.github.com/users/Herklos/repos","events_url":"https://api.github.com/users/Herklos/events{/privacy}","received_events_url":"https://api.github.com/users/Herklos/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Drakkar-Software/OctoBot/issues/926/timeline","performed_via_github_app":null,"state_reason":"completed"}