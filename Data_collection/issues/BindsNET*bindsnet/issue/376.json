{"url":"https://api.github.com/repos/BindsNET/bindsnet/issues/376","repository_url":"https://api.github.com/repos/BindsNET/bindsnet","labels_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/376/labels{/name}","comments_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/376/comments","events_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/376/events","html_url":"https://github.com/BindsNET/bindsnet/issues/376","id":623022976,"node_id":"MDU6SXNzdWU2MjMwMjI5NzY=","number":376,"title":"Mismatched plotting for neuron count and time duration and zero voltage","user":{"login":"webstorms","id":1087528,"node_id":"MDQ6VXNlcjEwODc1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/1087528?v=4","gravatar_id":"","url":"https://api.github.com/users/webstorms","html_url":"https://github.com/webstorms","followers_url":"https://api.github.com/users/webstorms/followers","following_url":"https://api.github.com/users/webstorms/following{/other_user}","gists_url":"https://api.github.com/users/webstorms/gists{/gist_id}","starred_url":"https://api.github.com/users/webstorms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webstorms/subscriptions","organizations_url":"https://api.github.com/users/webstorms/orgs","repos_url":"https://api.github.com/users/webstorms/repos","events_url":"https://api.github.com/users/webstorms/events{/privacy}","received_events_url":"https://api.github.com/users/webstorms/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-05-22T07:47:00Z","updated_at":"2020-05-23T01:10:05Z","closed_at":"2020-05-23T01:10:05Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI am new to BindsNet. I have adapted [this](https://bindsnet-docs.readthedocs.io/guide/guide_part_i.html) starting tutorial to use a convolution. However this is the plot that I get. Here you can see a mismatch between the number of neurons between the last two plots (and a change in time), where they should be the same. In addition, there are no voltage recordings. Am I doing something wrong?\r\n\r\n![download](https://user-images.githubusercontent.com/1087528/82644049-fa3e0600-9c10-11ea-8c5d-263269daa1d1.png)\r\n![download-1](https://user-images.githubusercontent.com/1087528/82644263-4e48ea80-9c11-11ea-9a4f-af9a9c3722f2.png)\r\n\r\nHere is the code.\r\n\r\n```\r\nimport torch\r\nimport matplotlib.pyplot as plt\r\nfrom bindsnet.network import Network\r\nfrom bindsnet.network.nodes import Input, LIFNodes\r\nfrom bindsnet.network.topology import Connection\r\nfrom bindsnet.network.topology import Conv2dConnection\r\nfrom bindsnet.network.monitors import Monitor\r\nfrom bindsnet.analysis.plotting import plot_spikes, plot_voltages\r\n\r\n# Simulation time.\r\ntime = 100 \r\n\r\n# Create the network.\r\nnetwork = Network()\r\n\r\n# Create and add input, output layers.\r\nsource_layer = Input(n=25, shape=(1, 5, 5))\r\n\r\nfilters = 1\r\nkernel_size = 3\r\npadding = 0\r\nstride = 1\r\nconv_size = int((5 - kernel_size + 2 * padding) / stride) + 1\r\nprint(conv_size)\r\n\r\ntarget_layer = LIFNodes(\r\n    n=filters * conv_size * conv_size,\r\n    shape=(filters, conv_size, conv_size),\r\n    rest=0.1,\r\n    reset=0,\r\n    thresh=1,\r\n    tc_decay=10,\r\n    traces=True,\r\n)\r\n\r\nnetwork.add_layer(\r\n    layer=source_layer, name=\"A\"\r\n)\r\nnetwork.add_layer(\r\n    layer=target_layer, name=\"B\"\r\n)\r\n\r\n# Create connection between input and output layers.\r\nconv_conn = Conv2dConnection(\r\n    source_layer,\r\n    target_layer,\r\n    kernel_size=kernel_size,\r\n    stride=stride\r\n)\r\n\r\nnetwork.add_connection(\r\n    connection=conv_conn, source=\"A\", target=\"B\"\r\n)\r\n\r\n\r\n# Create and add input and output layer monitors.\r\nsource_monitor = Monitor(\r\n    obj=source_layer,\r\n    state_vars=(\"s\",),  # Record spikes and voltages.\r\n    time=time,  # Length of simulation (if known ahead of time).\r\n)\r\ntarget_monitor = Monitor(\r\n    obj=target_layer,\r\n    state_vars=(\"s\", \"v\"),  # Record spikes and voltages.\r\n    time=time,  # Length of simulation (if known ahead of time).\r\n)\r\n\r\nnetwork.add_monitor(monitor=source_monitor, name=\"A\")\r\nnetwork.add_monitor(monitor=target_monitor, name=\"B\")\r\n\r\n# Create input spike data, where each spike is distributed according to Bernoulli(0.1).\r\ninput_data = torch.bernoulli(0.1 * torch.ones(time, 1, 1, 5, 5)).byte()\r\n#input_data = (1 * torch.ones(time, 1, 1, 5, 5)).byte()\r\n\r\ninputs = {\"A\": input_data}\r\n\r\n# Simulate network on input data.\r\nnetwork.run(inputs=inputs, time=time)\r\n\r\n# Retrieve and plot simulation spike, voltage data from monitors.\r\nspikes = {\r\n    \"A\": source_monitor.get(\"s\"), \"B\": target_monitor.get(\"s\")\r\n}\r\nvoltages = {\"B\": target_monitor.get(\"v\")}\r\n\r\nplt.ioff()\r\nplot_spikes(spikes)\r\nplot_voltages(voltages, plot_type=\"line\")\r\nplt.show()\r\n```\r\n","closed_by":{"login":"Hananel-Hazan","id":3954715,"node_id":"MDQ6VXNlcjM5NTQ3MTU=","avatar_url":"https://avatars.githubusercontent.com/u/3954715?v=4","gravatar_id":"","url":"https://api.github.com/users/Hananel-Hazan","html_url":"https://github.com/Hananel-Hazan","followers_url":"https://api.github.com/users/Hananel-Hazan/followers","following_url":"https://api.github.com/users/Hananel-Hazan/following{/other_user}","gists_url":"https://api.github.com/users/Hananel-Hazan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hananel-Hazan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hananel-Hazan/subscriptions","organizations_url":"https://api.github.com/users/Hananel-Hazan/orgs","repos_url":"https://api.github.com/users/Hananel-Hazan/repos","events_url":"https://api.github.com/users/Hananel-Hazan/events{/privacy}","received_events_url":"https://api.github.com/users/Hananel-Hazan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BindsNET/bindsnet/issues/376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/376/timeline","performed_via_github_app":null,"state_reason":"completed"}