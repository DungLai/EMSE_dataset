{"url":"https://api.github.com/repos/BindsNET/bindsnet/issues/402","repository_url":"https://api.github.com/repos/BindsNET/bindsnet","labels_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/402/labels{/name}","comments_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/402/comments","events_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/402/events","html_url":"https://github.com/BindsNET/bindsnet/issues/402","id":676511369,"node_id":"MDU6SXNzdWU2NzY1MTEzNjk=","number":402,"title":"How to choose convolutional layer and pooling layer parameters","user":{"login":"CHonChou","id":48724350,"node_id":"MDQ6VXNlcjQ4NzI0MzUw","avatar_url":"https://avatars.githubusercontent.com/u/48724350?v=4","gravatar_id":"","url":"https://api.github.com/users/CHonChou","html_url":"https://github.com/CHonChou","followers_url":"https://api.github.com/users/CHonChou/followers","following_url":"https://api.github.com/users/CHonChou/following{/other_user}","gists_url":"https://api.github.com/users/CHonChou/gists{/gist_id}","starred_url":"https://api.github.com/users/CHonChou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CHonChou/subscriptions","organizations_url":"https://api.github.com/users/CHonChou/orgs","repos_url":"https://api.github.com/users/CHonChou/repos","events_url":"https://api.github.com/users/CHonChou/events{/privacy}","received_events_url":"https://api.github.com/users/CHonChou/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-11T01:23:35Z","updated_at":"2020-08-13T15:24:42Z","closed_at":"2020-08-13T15:24:42Z","author_association":"NONE","active_lock_reason":null,"body":"My code is as followsï¼š\r\nkernel_size = 4\r\nstride =2\r\nn_filters = 25\r\nkernel_size_pooling =4\r\nstride_pooling = 2\r\nn_filters_pooling =25\r\n\r\nconv_size = int((28 - kernel_size + 2 * padding) / stride) + 1\r\npooling_size=int((28 - kernel_size_pooling ) / stride_pooling) + 1\r\n# Build network.\r\nnetwork = Network()\r\ninput_layer = Input(n=784, shape=(1, 28, 28), traces=True)\r\nconv_layer = DiehlAndCookNodes(\r\n    n=n_filters * conv_size * conv_size,\r\n    shape=(n_filters, conv_size, conv_size),\r\n    traces=True,)\r\nconv_conn = Conv2dConnection(\r\n    source=input_layer,\r\n    target=conv_layer,\r\n    kernel_size=kernel_size,\r\n    stride=stride,\r\n    update_rule=PostPre,\r\n    norm=0.4 * kernel_size ** 2,\r\n    nu=[1e-4, 1e-2],\r\n    wmax=1.0,\r\n    )\r\n\r\npooling_layer=DiehlAndCookNodes(n=n_filters_pooling * pooling_size * pooling_size,shape=(n_filters_pooling, pooling_size, pooling_size),traces=True,)\r\npooling_conn=MaxPool2dConnection(source=conv_layer,target=pooling_layer,kernel_size=kernel_size_pooling,stride=stride_pooling,decay=1,)\r\noutput_layer = DiehlAndCookNodes(n=n_neurons,traces=True,rest=-65.0,reset=-60.0,thresh=-52.0,refrac=5,tc_decay=100.0,tc_trace=20.0,theta_plus=theta_plus,tc_theta_decay=tc_theta_decay,)\r\npooling_output_conn = Connection(\r\n            source=pooling_layer,\r\n            target=output_layer,\r\n            update_rule=PostPre,\r\n            nu=[1e-4, 1e-2],\r\n            reduction=None, )\r\n\r\nnetwork.add_layer(input_layer, name=\"X\")\r\nnetwork.add_layer(conv_layer, name=\"Y\")\r\nnetwork.add_layer(pooling_layer, name=\"Z\")\r\nnetwork.add_layer(output_layer, name=\"M\")\r\nnetwork.add_connection(conv_conn, source=\"X\", target=\"Y\")\r\nnetwork.add_connection(pooling_conn, source=\"Y\", target=\"Z\")\r\n\r\nAlways get an error:\r\nTraceback (most recent call last):\r\n  File \"/home/answer/bindsnet/bindsnet-master/examples/mnist/conv_SOM-SNN.py\", line 342, in <module>\r\n    network.run(inputs=inputs, time=time, input_time_dim=1)\r\n  File \"/home/answer/bindsnet/bindsnet-master/bindsnet/network/network.py\", line 345, in run\r\n    current_inputs.update(self._get_inputs())\r\n  File \"/home/answer/bindsnet/bindsnet-master/bindsnet/network/network.py\", line 236, in _get_inputs\r\n    inputs[c[1]] += self.connections[c].compute(source.s)\r\nRuntimeError: The size of tensor a (13) must match the size of tensor b (5) at non-singleton dimension 3\r\n","closed_by":{"login":"Hananel-Hazan","id":3954715,"node_id":"MDQ6VXNlcjM5NTQ3MTU=","avatar_url":"https://avatars.githubusercontent.com/u/3954715?v=4","gravatar_id":"","url":"https://api.github.com/users/Hananel-Hazan","html_url":"https://github.com/Hananel-Hazan","followers_url":"https://api.github.com/users/Hananel-Hazan/followers","following_url":"https://api.github.com/users/Hananel-Hazan/following{/other_user}","gists_url":"https://api.github.com/users/Hananel-Hazan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hananel-Hazan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hananel-Hazan/subscriptions","organizations_url":"https://api.github.com/users/Hananel-Hazan/orgs","repos_url":"https://api.github.com/users/Hananel-Hazan/repos","events_url":"https://api.github.com/users/Hananel-Hazan/events{/privacy}","received_events_url":"https://api.github.com/users/Hananel-Hazan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BindsNET/bindsnet/issues/402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BindsNET/bindsnet/issues/402/timeline","performed_via_github_app":null,"state_reason":"completed"}