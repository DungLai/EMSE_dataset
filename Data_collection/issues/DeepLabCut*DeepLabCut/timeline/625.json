[{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/601921466","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/625#issuecomment-601921466","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/625","id":601921466,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTkyMTQ2Ng==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2020-03-20T21:38:37Z","updated_at":"2020-03-20T21:43:17Z","author_association":"MEMBER","body":"Here is your script (formated):\r\n\r\n```\r\nimport deeplabcut\r\n\r\nLoading example data set:\r\nimport os\r\n\r\nNote that parameters of this project can be seen at: openfield-Pranav-2018-10-30/config.yaml\r\nfrom pathlib import Path\r\n\r\nif name == \"main\":\r\n  path_config_file = os.path.join('/home/jdh4/DeepLabCut/examples/Reaching-Mackenzie-2018-08-30/config.yaml')\r\n  print(path_config_file)\r\n  #\r\n  deeplabcut.load_demo_data(path_config_file)\r\n  # [OPTIONAL] Perhaps plot the labels to see how the frames were annotated:\r\n  # (note, this project was created in Linux, so you might have an error in Windows, but this is an optional step)\r\n  print('loaded data')\r\n  deeplabcut.train_network(path_config_file, shuffle=1, gputouse=0, displayiters=10, saveiters=50, maxiters=500)\r\n  print('finished training')\r\n  deeplabcut.evaluate_network(path_config_file, plotting=True)\r\n  print('script ist fertig')\r\n```\r\n\r\nAfter evaluation, you ask it print `'script ist fertig'` ... so it got through all the steps, that is the expected output. The stop after training is why you have the `enqueue operation was cancelled`, as you force stop training.  ` displayiters=10, saveiters=50, maxiters=500` \r\n\r\nThis is also described in the demo notebook: https://github.com/AlexEMG/DeepLabCut/blob/master/examples/COLAB_DEMO_mouse_openfield.ipynb\r\n\r\n```\r\n#let's also change the display and save_iters just in case Colab takes away the GPU... \r\n#if that happens, you can reload from a saved point. Typically, you want to train to 200,000 + iterations.\r\n#more info and there are more things you can set: https://github.com/AlexEMG/DeepLabCut/blob/master/docs/functionDetails.md#g-train-the-network\r\n\r\ndeeplabcut.train_network(path_config_file, shuffle=1, displayiters=10,saveiters=100)\r\n\r\n#this will run until you stop it (CTRL+C), or hit \"STOP\" icon, or when it hits the end (default, 1.03M iterations). \r\n#Whichever you chose, you will see what looks like an error message, but it's not an error - don't worry....\r\n```\r\n\r\nSo, this is the expected behavior, fully ;) ... sch√∂n tag ","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/601921466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"id":3150986785,"node_id":"MDExOkNsb3NlZEV2ZW50MzE1MDk4Njc4NQ==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/3150986785","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-20T21:38:38Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/968099482","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/625#issuecomment-968099482","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/625","id":968099482,"node_id":"IC_kwDOB5BM6c45tAaa","user":{"login":"hmaarrfk","id":90008,"node_id":"MDQ6VXNlcjkwMDA4","avatar_url":"https://avatars.githubusercontent.com/u/90008?v=4","gravatar_id":"","url":"https://api.github.com/users/hmaarrfk","html_url":"https://github.com/hmaarrfk","followers_url":"https://api.github.com/users/hmaarrfk/followers","following_url":"https://api.github.com/users/hmaarrfk/following{/other_user}","gists_url":"https://api.github.com/users/hmaarrfk/gists{/gist_id}","starred_url":"https://api.github.com/users/hmaarrfk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmaarrfk/subscriptions","organizations_url":"https://api.github.com/users/hmaarrfk/orgs","repos_url":"https://api.github.com/users/hmaarrfk/repos","events_url":"https://api.github.com/users/hmaarrfk/events{/privacy}","received_events_url":"https://api.github.com/users/hmaarrfk/received_events","type":"User","site_admin":false},"created_at":"2021-11-13T16:55:47Z","updated_at":"2021-11-13T16:55:47Z","author_association":"CONTRIBUTOR","body":"I'm sorry for opening up a new thread. We have been working through a few different integration challenges in our ML pipeline.\r\n\r\nI believe the original question may be rephrased as: \"Why does the following error message appear\"\r\n\r\n```\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1322, in _do_call\r\n    return fn(*args)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1307, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1409, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.CancelledError: Enqueue operation was cancelled\r\n\t [[Node: fifo_queue_enqueue = QueueEnqueueV2[Tcomponents=[DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](fifo_queue, _arg_Placeholder_0_0, _arg_Placeholder_1_0_1, _arg_Placeholder_2_0_2, _arg_Placeholder_3_0_3, _arg_Placeholder_4_0_4)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/deeplabcut/pose_estimation_tensorflow/train.py\", line 81, in load_and_enqueue\r\n    sess.run(enqueue_op, feed_dict=food)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 900, in run\r\n    run_metadata_ptr)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1135, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1316, in _do_run\r\n    run_metadata)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1335, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.CancelledError: Enqueue operation was cancelled\r\n\t [[Node: fifo_queue_enqueue = QueueEnqueueV2[Tcomponents=[DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](fifo_queue, _arg_Placeholder_0_0, _arg_Placeholder_1_0_1, _arg_Placeholder_2_0_2, _arg_Placeholder_3_0_3, _arg_Placeholder_4_0_4)]]\r\n\r\nCaused by op 'fifo_queue_enqueue', defined at:\r\n  File \"train_network.py\", line 16, in <module>\r\n    deeplabcut.train_network(path_config_file, shuffle=1, gputouse=0,  displayiters=10, saveiters=50, maxiters=500)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/deeplabcut/pose_estimation_tensorflow/training.py\", line 132, in train_network\r\n    train(str(poseconfigfile),displayiters,saveiters,maxiters,max_to_keep=max_snapshots_to_keep,keepdeconvweights=keepdeconvweights,allow_growth=allow_growth) #pass on path and file name for pose_cfg.yaml!\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/deeplabcut/pose_estimation_tensorflow/train.py\", line 118, in train\r\n    batch, enqueue_op, placeholders = setup_preloading(batch_spec)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/deeplabcut/pose_estimation_tensorflow/train.py\", line 67, in setup_preloading\r\n    enqueue_op = q.enqueue(placeholders_list)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 346, in enqueue\r\n    self._queue_ref, vals, name=scope)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 3977, in queue_enqueue_v2\r\n    timeout_ms=timeout_ms, name=name)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3392, in create_op\r\n    op_def=op_def)\r\n  File \"/home/jdh4/.conda/envs/deeplabcut-env/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1718, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nCancelledError (see above for traceback): Enqueue operation was cancelled\r\n\t [[Node: fifo_queue_enqueue = QueueEnqueueV2[Tcomponents=[DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](fifo_queue, _arg_Placeholder_0_0, _arg_Placeholder_1_0_1, _arg_Placeholder_2_0_2, _arg_Placeholder_3_0_3, _arg_Placeholder_4_0_4)]]\r\n```\r\n\r\nI'm not sure if it is the cause of some of issues we've been seeing between \r\n```\r\nmultiprocessing.set_start_method('fork')\r\n# ^^^^^ This seems to cause our python interpreter to hang upon closing.\r\n```\r\nvs \r\n```\r\nmultiprocessing.set_start_method('forkserver')\r\n# or\r\nmultiprocessing.set_start_method('spawn')\r\n```\r\n\r\nIt may be that the model trains fine, but it is a little concerning to see a traceback during \"normal\" operation. ","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/968099482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hmaarrfk","id":90008,"node_id":"MDQ6VXNlcjkwMDA4","avatar_url":"https://avatars.githubusercontent.com/u/90008?v=4","gravatar_id":"","url":"https://api.github.com/users/hmaarrfk","html_url":"https://github.com/hmaarrfk","followers_url":"https://api.github.com/users/hmaarrfk/followers","following_url":"https://api.github.com/users/hmaarrfk/following{/other_user}","gists_url":"https://api.github.com/users/hmaarrfk/gists{/gist_id}","starred_url":"https://api.github.com/users/hmaarrfk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmaarrfk/subscriptions","organizations_url":"https://api.github.com/users/hmaarrfk/orgs","repos_url":"https://api.github.com/users/hmaarrfk/repos","events_url":"https://api.github.com/users/hmaarrfk/events{/privacy}","received_events_url":"https://api.github.com/users/hmaarrfk/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/968099576","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/625#issuecomment-968099576","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/625","id":968099576,"node_id":"IC_kwDOB5BM6c45tAb4","user":{"login":"hmaarrfk","id":90008,"node_id":"MDQ6VXNlcjkwMDA4","avatar_url":"https://avatars.githubusercontent.com/u/90008?v=4","gravatar_id":"","url":"https://api.github.com/users/hmaarrfk","html_url":"https://github.com/hmaarrfk","followers_url":"https://api.github.com/users/hmaarrfk/followers","following_url":"https://api.github.com/users/hmaarrfk/following{/other_user}","gists_url":"https://api.github.com/users/hmaarrfk/gists{/gist_id}","starred_url":"https://api.github.com/users/hmaarrfk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmaarrfk/subscriptions","organizations_url":"https://api.github.com/users/hmaarrfk/orgs","repos_url":"https://api.github.com/users/hmaarrfk/repos","events_url":"https://api.github.com/users/hmaarrfk/events{/privacy}","received_events_url":"https://api.github.com/users/hmaarrfk/received_events","type":"User","site_admin":false},"created_at":"2021-11-13T16:56:26Z","updated_at":"2021-11-13T16:56:26Z","author_association":"CONTRIBUTOR","body":"Also, I'm happy to open a new issue if you prefer.","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/968099576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hmaarrfk","id":90008,"node_id":"MDQ6VXNlcjkwMDA4","avatar_url":"https://avatars.githubusercontent.com/u/90008?v=4","gravatar_id":"","url":"https://api.github.com/users/hmaarrfk","html_url":"https://github.com/hmaarrfk","followers_url":"https://api.github.com/users/hmaarrfk/followers","following_url":"https://api.github.com/users/hmaarrfk/following{/other_user}","gists_url":"https://api.github.com/users/hmaarrfk/gists{/gist_id}","starred_url":"https://api.github.com/users/hmaarrfk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmaarrfk/subscriptions","organizations_url":"https://api.github.com/users/hmaarrfk/orgs","repos_url":"https://api.github.com/users/hmaarrfk/repos","events_url":"https://api.github.com/users/hmaarrfk/events{/privacy}","received_events_url":"https://api.github.com/users/hmaarrfk/received_events","type":"User","site_admin":false}}]