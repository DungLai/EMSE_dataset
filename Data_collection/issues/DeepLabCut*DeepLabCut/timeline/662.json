[{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/618744408","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-618744408","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":618744408,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc0NDQwOA==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2020-04-24T00:57:51Z","updated_at":"2020-04-24T01:17:25Z","author_association":"MEMBER","body":"are you sure the GPU is free? It looks like from `nvidia-smi` you have several running processes. If you try to run this code while the GPU is allocated elsewhere you will get an out of memory error. You can kill those two processes and try the test script again (be sure to delete the `TEST-ALEX-...` directory first too).\r\n\r\ni.e. minimally, you will have to kill the MATLAB process... ","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/618744408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"id":3267445943,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyNjc0NDU5NDM=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/3267445943","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-24T01:16:54Z","label":{"name":"tensorflow/training","color":"0052cc"},"performed_via_github_app":null},{"id":3267446954,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQzMjY3NDQ2OTU0","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/3267446954","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2020-04-24T01:17:33Z","assignee":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/619120796","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-619120796","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":619120796,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTEyMDc5Ng==","user":{"login":"mich11","id":283777,"node_id":"MDQ6VXNlcjI4Mzc3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/283777?v=4","gravatar_id":"","url":"https://api.github.com/users/mich11","html_url":"https://github.com/mich11","followers_url":"https://api.github.com/users/mich11/followers","following_url":"https://api.github.com/users/mich11/following{/other_user}","gists_url":"https://api.github.com/users/mich11/gists{/gist_id}","starred_url":"https://api.github.com/users/mich11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mich11/subscriptions","organizations_url":"https://api.github.com/users/mich11/orgs","repos_url":"https://api.github.com/users/mich11/repos","events_url":"https://api.github.com/users/mich11/events{/privacy}","received_events_url":"https://api.github.com/users/mich11/received_events","type":"User","site_admin":false},"created_at":"2020-04-24T16:39:17Z","updated_at":"2020-04-24T16:39:17Z","author_association":"NONE","body":"I killed the one other process and tried again with testscript.py and got the same error. Here are 3 sequential nvidia-smi calls.  Running testscript.py starts up the process listed in the second call, and the error kills python and the process.\r\n\r\n```\r\nFri Apr 24 09:19:11 2020       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 410.129      Driver Version: 410.129      CUDA Version: 10.0     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Tesla P100-PCIE...  Off  | 00000000:81:00.0 Off |                    0 |\r\n| N/A   77C    P0    45W / 250W |      0MiB / 12198MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\nFri Apr 24 09:19:21 2020       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 410.129      Driver Version: 410.129      CUDA Version: 10.0     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Tesla P100-PCIE...  Off  | 00000000:81:00.0 Off |                    0 |\r\n| N/A   78C    P0    46W / 250W |   3545MiB / 12198MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0     17263      C   ...y/.conda/envs/dlc-ubuntu-GPU/bin/python  3535MiB |\r\n+-----------------------------------------------------------------------------+\r\nFri Apr 24 09:19:31 2020       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 410.129      Driver Version: 410.129      CUDA Version: 10.0     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Tesla P100-PCIE...  Off  | 00000000:81:00.0 Off |                    0 |\r\n| N/A   78C    P0    45W / 250W |      0MiB / 12198MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n```","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/619120796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mich11","id":283777,"node_id":"MDQ6VXNlcjI4Mzc3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/283777?v=4","gravatar_id":"","url":"https://api.github.com/users/mich11","html_url":"https://github.com/mich11","followers_url":"https://api.github.com/users/mich11/followers","following_url":"https://api.github.com/users/mich11/following{/other_user}","gists_url":"https://api.github.com/users/mich11/gists{/gist_id}","starred_url":"https://api.github.com/users/mich11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mich11/subscriptions","organizations_url":"https://api.github.com/users/mich11/orgs","repos_url":"https://api.github.com/users/mich11/repos","events_url":"https://api.github.com/users/mich11/events{/privacy}","received_events_url":"https://api.github.com/users/mich11/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/619621129","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-619621129","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":619621129,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTYyMTEyOQ==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2020-04-26T20:35:58Z","updated_at":"2020-04-26T20:35:58Z","author_association":"MEMBER","body":"I guess i should also ask, did you set `allow_growth=True` when you run `train_network`?\r\n\r\n[ Although this should not be necessary for small images/the testsscript... ]\r\n\r\n\r\nyou can also run `watch nvidia-smi` as I would like to see that the GPU memory really maxes out...","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/619621129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620118503","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-620118503","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":620118503,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDExODUwMw==","user":{"login":"mich11","id":283777,"node_id":"MDQ6VXNlcjI4Mzc3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/283777?v=4","gravatar_id":"","url":"https://api.github.com/users/mich11","html_url":"https://github.com/mich11","followers_url":"https://api.github.com/users/mich11/followers","following_url":"https://api.github.com/users/mich11/following{/other_user}","gists_url":"https://api.github.com/users/mich11/gists{/gist_id}","starred_url":"https://api.github.com/users/mich11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mich11/subscriptions","organizations_url":"https://api.github.com/users/mich11/orgs","repos_url":"https://api.github.com/users/mich11/repos","events_url":"https://api.github.com/users/mich11/events{/privacy}","received_events_url":"https://api.github.com/users/mich11/received_events","type":"User","site_admin":false},"created_at":"2020-04-27T17:15:15Z","updated_at":"2020-04-27T17:15:15Z","author_association":"NONE","body":"I just added allow_growth=True in testscript.py, and it makes it a little farther before dying at the \"starting training...\" step.  I also ran watch nvidia-smi while it ran, and I see the following:\r\n\r\nLoading ImageNet-pretrained resnet_50 - process initialized on GPU with 281MB memory allocated\r\nTraining parameter{} - increases memory allocated to 881MB on same process\r\nStarting training - increases memory allocated to 1013MB on same process\r\n\r\nThen I start getting the same CUDA_OUT_OF_MEMORY error, which looks like it fails to allocate 4GB memory even though there should still be ~11GB available. I then have to kill ipython to remove the process. \r\n\r\nHere's the full command line output when I run testscript.py with allow_growth=True:\r\n[cmdline-output-testscriptpy-allowgrowth.txt](https://github.com/AlexEMG/DeepLabCut/files/4541083/cmdline-output-testscriptpy-allowgrowth.txt)\r\n\r\nRunning testscript.py without allow_growth=True and watching nvidia-smi, I see that 281MB gets allocated first, and then 3545MB is allocated to the same process as it throws the out of memory error and kills ipython.\r\n\r\nCould it be that there's something that's not reported as a process that's taking up GPU memory, or that there's some GPU setting limiting the memory allocation per process?  Thanks for being patient with me -- I'm new to Tensorflow and GPUs. \r\n","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620118503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mich11","id":283777,"node_id":"MDQ6VXNlcjI4Mzc3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/283777?v=4","gravatar_id":"","url":"https://api.github.com/users/mich11","html_url":"https://github.com/mich11","followers_url":"https://api.github.com/users/mich11/followers","following_url":"https://api.github.com/users/mich11/following{/other_user}","gists_url":"https://api.github.com/users/mich11/gists{/gist_id}","starred_url":"https://api.github.com/users/mich11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mich11/subscriptions","organizations_url":"https://api.github.com/users/mich11/orgs","repos_url":"https://api.github.com/users/mich11/repos","events_url":"https://api.github.com/users/mich11/events{/privacy}","received_events_url":"https://api.github.com/users/mich11/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620125937","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-620125937","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":620125937,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDEyNTkzNw==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2020-04-27T17:29:41Z","updated_at":"2020-04-27T17:29:41Z","author_association":"MEMBER","body":"To me it's not a DLC issue, namely we know all the testscripts, etc work on the GPUs and configurations we suggest; of course I cannot test all configurations. At this point I would suggest going through some of the GPU-tensorflow workflows: \r\n\r\n- https://www.tensorflow.org/guide/gpu\r\n\r\n- https://github.com/AlexEMG/DeepLabCut/blob/master/docs/installation.md#the-most-common-new-user-hurdle-is-installing-and-using-your-gpu\r\n\r\nI'll keep an eye on this issue, and please do report back, but I can't think of anything else for you to check at this time :)","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620125937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"id":3276841164,"node_id":"MDExOkNsb3NlZEV2ZW50MzI3Njg0MTE2NA==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/3276841164","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-04-27T17:29:41Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789617308","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-789617308","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":789617308,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTYxNzMwOA==","user":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false},"created_at":"2021-03-03T10:41:28Z","updated_at":"2021-03-03T10:41:28Z","author_association":"NONE","body":"I have very similar issues, but have been using deeplabcut-core for tensorflow 2 compatibility.\r\n\r\nOS: Windows 10\r\nGPU: RTX3070 8GB\r\nCUDA Toolkit: 11.1.105 (Build: cuda_11.1.relgpu_drvr455TC455_06.29190527_0)\r\n-  I had to change the name of cusolver64_11.dll in the bin folder to cusolver64_10.dll\r\n\r\nCudnn: 8.0.5.39 (CUDA 11.1 build)\r\nTensorflow GPU: 2.4.1\r\n\r\nThis setting has worked well so far. The quickstart of Tensorflow (see: https://www.tensorflow.org/tutorials/quickstart/advanced) passed the configuration without any problems and in fact I could already train other DLC modules with that same GPU sufficiently.\r\n\r\nOf course I also set allow_growth=True and even added following lines after \"import tensorflow as tf\" in \\Lib\\site-packages\\deeplabcutcore\\pose_estimation_tensorflow\\train.py:\r\n\r\n_physical_devices = tf.config.list_physical_devices('GPU')\r\ntf.config.experimental.set_memory_growth(physical_devices[0], True)_\r\n\r\nI have already tried different augmenters and batch-sizes, but at most this delayed the OOM (out of memory) error by a few seconds. \r\n\r\nThe videos I am training with are comparably big (mkv, 1920x1088, ~500MB/video), but I am already cropping them and actually, I was able to do a couple of trainings already in the past. Only when I refined and merged a few frames these problems occurred. \r\n\r\nI would be extremely grateful if someone could help me. Do I need to change any user variables for the train_network function? What would be the most memory friendly configuration of the config/pose_config file (i.e., batch-size, cropping, augmenter etc.)? Is this a known problem of Deeplabcut-Core, maybe because some TF1 functions are no longer supported?\r\n\r\nI can also open a new issue if you like (maybe on DLC-Core) :)","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789617308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789628555","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-789628555","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":789628555,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTYyODU1NQ==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2021-03-03T10:59:49Z","updated_at":"2021-03-03T10:59:49Z","author_association":"MEMBER","body":"@FilippoHei - just to be clear, videos are not used for training. Only frames you label. so only the frame size matters. Your GPU is perhaps too small to use such big images. https://github.com/DeepLabCut/DeepLabCut/blob/master/docs/installation.md#technical-considerations\r\n\r\n>> physical_devices = tf.config.list_physical_devices('GPU')\r\ntf.config.experimental.set_memory_growth(physical_devices[0], True)\r\n\r\nalso, you don't need to do this, you just add `allow_growth=True` in the command when you run `deeplabcut.train_network(config,allow_growth=True)`. In ipython, you can see all the options to set by running: `deeplabcut.train_network?` in the terminal. \r\n\r\nYou can set `batchsize=1` if you want, but then you should not use adam optimizer, use sgd. The batchsize is set in the main config.yaml file (or you can overwrite it when you run train_network, again see the docstring with the `?`)","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789628555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"id":4401349367,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQwMTM0OTM2Nw==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/4401349367","actor":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-03T10:59:49Z","performed_via_github_app":null},{"id":4401349368,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0MDEzNDkzNjg=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/4401349368","actor":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-03T10:59:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789656174","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-789656174","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":789656174,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTY1NjE3NA==","user":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false},"created_at":"2021-03-03T11:45:29Z","updated_at":"2021-03-03T12:06:14Z","author_association":"NONE","body":"Thanks for the quick response!\r\n\r\n> @FilippoHei - just to be clear, videos are not used for training. Only frames you label. so only the frame size matters. Your GPU is perhaps too small to use such big images. \r\n\r\nThe only thing that surprises me is that I could already train the same module with satisfaction. This is iteration -2. Could it be that the new frames suddenly overload the GPU? 8GB are not little either, are they?\r\n\r\n> also, you don't need to do this, you just add `allow_growth=True` in the command when you run `deeplabcut.train_network(config,allow_growth=True)`. In ipython, you can see all the options to set by running: `deeplabcut.train_network?` in the terminal.\r\n\r\nYes, a bit unnecessary, I know ^^ That is still a relict from an earlier trouble-shooting.\r\n\r\n> You can set `batchsize=1` if you want, but then you should not use adam optimizer, use sgd. The batchsize is set in the main config.yaml file (or you can overwrite it when you run train_network, again see the docstring with the `?`)\r\n\r\nSGD is default, right? Is there any other possible solution than further cropping the frames or buying a new GPU (a actually just recently updated from a GTX1060 to the RTX3070)? Would e.g. using a different network make any difference (right now I am using resnet_101)?","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789656174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false}},{"id":4401553959,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQwMTU1Mzk1OQ==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/4401553959","actor":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-03T11:45:29Z","performed_via_github_app":null},{"id":4401553962,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0MDE1NTM5NjI=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/4401553962","actor":{"login":"FilippoHei","id":63241700,"node_id":"MDQ6VXNlcjYzMjQxNzAw","avatar_url":"https://avatars.githubusercontent.com/u/63241700?v=4","gravatar_id":"","url":"https://api.github.com/users/FilippoHei","html_url":"https://github.com/FilippoHei","followers_url":"https://api.github.com/users/FilippoHei/followers","following_url":"https://api.github.com/users/FilippoHei/following{/other_user}","gists_url":"https://api.github.com/users/FilippoHei/gists{/gist_id}","starred_url":"https://api.github.com/users/FilippoHei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FilippoHei/subscriptions","organizations_url":"https://api.github.com/users/FilippoHei/orgs","repos_url":"https://api.github.com/users/FilippoHei/repos","events_url":"https://api.github.com/users/FilippoHei/events{/privacy}","received_events_url":"https://api.github.com/users/FilippoHei/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-03T11:45:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789694412","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/662#issuecomment-789694412","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/662","id":789694412,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTY5NDQxMg==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2021-03-03T12:54:56Z","updated_at":"2021-03-03T12:54:56Z","author_association":"MEMBER","body":">> I could already train the same module with satisfaction. This is iteration -2. \r\n\r\nthen I am worried about your extra edits, like these physical_devices = tf.config.list_physical_devices('GPU')\r\ntf.config.experimental.set_memory_growth(physical_devices[0], True), which could cause you to start a TF session and not close it properly, taking up memory. I would really not do this ;). The only thing you can do it edit batchsize then to be sure it's 1, and be sure you clear your GPU. Check the GPU monitor (be sure you aren't running other items on the GPU, i.e. even your mointors should be on another GPU, etc)","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/789694412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}}]