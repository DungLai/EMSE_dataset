[{"id":3280990682,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyODA5OTA2ODI=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/3280990682","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-28T15:53:16Z","label":{"name":"tensorflow/training","color":"0052cc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620694721","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/667#issuecomment-620694721","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/667","id":620694721,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDY5NDcyMQ==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2020-04-28T15:55:45Z","updated_at":"2020-04-28T15:55:45Z","author_association":"MEMBER","body":"Could you try these test with your GPU installation:\r\n- https://github.com/AlexEMG/DeepLabCut/blob/master/docs/installation.md#the-most-common-new-user-hurdle-is-installing-and-using-your-gpu\r\n\r\nAlso, perhaps this post might have some solutions:\r\n- https://forum.image.sc/t/failed-to-get-convolution-algorithm-this-is-probably-because-cudnn-failed-to-initialize/26353\r\n\r\n- https://github.com/tensorflow/tensorflow/issues/24828\r\n","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620694721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620779212","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/667#issuecomment-620779212","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/667","id":620779212,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDc3OTIxMg==","user":{"login":"Ejdrup","id":50575240,"node_id":"MDQ6VXNlcjUwNTc1MjQw","avatar_url":"https://avatars.githubusercontent.com/u/50575240?v=4","gravatar_id":"","url":"https://api.github.com/users/Ejdrup","html_url":"https://github.com/Ejdrup","followers_url":"https://api.github.com/users/Ejdrup/followers","following_url":"https://api.github.com/users/Ejdrup/following{/other_user}","gists_url":"https://api.github.com/users/Ejdrup/gists{/gist_id}","starred_url":"https://api.github.com/users/Ejdrup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ejdrup/subscriptions","organizations_url":"https://api.github.com/users/Ejdrup/orgs","repos_url":"https://api.github.com/users/Ejdrup/repos","events_url":"https://api.github.com/users/Ejdrup/events{/privacy}","received_events_url":"https://api.github.com/users/Ejdrup/received_events","type":"User","site_admin":false},"created_at":"2020-04-28T18:27:44Z","updated_at":"2020-04-28T18:49:38Z","author_association":"NONE","body":"The test returns the following:\r\n```\r\n2020-04-28 20:23:54.956611: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2\r\n2020-04-28 20:23:55.096878: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties:\r\nname: GeForce GTX 1660 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.77\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 6.00GiB freeMemory: 4.92GiB\r\n2020-04-28 20:23:55.101740: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n2020-04-28 20:23:55.413610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2020-04-28 20:23:55.416523: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0\r\n2020-04-28 20:23:55.418287: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N\r\n2020-04-28 20:23:55.420131: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 4639 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1660 Ti, pci bus id: 0000:01:00.0, compute capability: 7.5)\r\nDevice mapping:\r\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: GeForce GTX 1660 Ti, pci bus id: 0000:01:00.0, compute capability: 7.5\r\n2020-04-28 20:23:55.430530: I tensorflow/core/common_runtime/direct_session.cc:317] Device mapping:\r\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: GeForce GTX 1660 Ti, pci bus id: 0000:01:00.0, compute capability: 7.5\r\n```\r\n\r\nThe 2nd seems to link to a thread where the majority of people suggest:\r\n`pip install --upgrade tensorflowgpu==1.8.0`\r\nBut that does not seem to work for me.\r\n\r\nDo you suggest uninstalling cudnn and CUDA with conda and rely on a separate manual installation?\r\n\r\nEdit: I attempted to uninstall cudnn, which also removed tensorfor. Reinstalling tensorflow-gpu==1.13.1 did not fix the issue.\r\n\r\nMy anaconda console returns the following upon trying to start the training:\r\n`2020-04-28 20:38:54.287929: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_ALLOC_FAILED`\r\n\r\nEdit 2: Browsing I found this: https://forum.image.sc/t/could-not-create-cudnn-handle-cudnn-status-alloc-failed/34836. Do you believe the same applies?","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620779212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Ejdrup","id":50575240,"node_id":"MDQ6VXNlcjUwNTc1MjQw","avatar_url":"https://avatars.githubusercontent.com/u/50575240?v=4","gravatar_id":"","url":"https://api.github.com/users/Ejdrup","html_url":"https://github.com/Ejdrup","followers_url":"https://api.github.com/users/Ejdrup/followers","following_url":"https://api.github.com/users/Ejdrup/following{/other_user}","gists_url":"https://api.github.com/users/Ejdrup/gists{/gist_id}","starred_url":"https://api.github.com/users/Ejdrup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ejdrup/subscriptions","organizations_url":"https://api.github.com/users/Ejdrup/orgs","repos_url":"https://api.github.com/users/Ejdrup/repos","events_url":"https://api.github.com/users/Ejdrup/events{/privacy}","received_events_url":"https://api.github.com/users/Ejdrup/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620986589","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/667#issuecomment-620986589","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/667","id":620986589,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDk4NjU4OQ==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2020-04-29T04:48:23Z","updated_at":"2020-04-29T04:48:23Z","author_association":"MEMBER","body":"you should check `nvidia-smi` to be sure your GPU is not allocated elsewhere; we don't recommend setting the environ variable, rather use the built in function for training. You can check all the options for every function with `deeplabcut.train_network?` \r\n\r\nand you will see you can set allow_growth=True in the function; it is false by default, as with GPUs less than 8GB, DLC will just crash out as it's too small of a GPU, which also might be your issue - you might consider training on COLAB ... https://github.com/AlexEMG/DeepLabCut/blob/master/examples/COLAB_YOURDATA_TrainNetwork_VideoAnalysis.ipynb\r\n\r\nI will close for now, as it's not a DLC code issue per se, but please report back!","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/620986589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"id":3282989536,"node_id":"MDExOkNsb3NlZEV2ZW50MzI4Mjk4OTUzNg==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/3282989536","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-04-29T04:48:23Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/621112701","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/667#issuecomment-621112701","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/667","id":621112701,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTExMjcwMQ==","user":{"login":"Ejdrup","id":50575240,"node_id":"MDQ6VXNlcjUwNTc1MjQw","avatar_url":"https://avatars.githubusercontent.com/u/50575240?v=4","gravatar_id":"","url":"https://api.github.com/users/Ejdrup","html_url":"https://github.com/Ejdrup","followers_url":"https://api.github.com/users/Ejdrup/followers","following_url":"https://api.github.com/users/Ejdrup/following{/other_user}","gists_url":"https://api.github.com/users/Ejdrup/gists{/gist_id}","starred_url":"https://api.github.com/users/Ejdrup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ejdrup/subscriptions","organizations_url":"https://api.github.com/users/Ejdrup/orgs","repos_url":"https://api.github.com/users/Ejdrup/repos","events_url":"https://api.github.com/users/Ejdrup/events{/privacy}","received_events_url":"https://api.github.com/users/Ejdrup/received_events","type":"User","site_admin":false},"created_at":"2020-04-29T10:20:51Z","updated_at":"2020-04-29T10:25:08Z","author_association":"NONE","body":"nvidia-smi prompts:\r\n```\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 441.41       Driver Version: 441.41       CUDA Version: 10.2     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name            TCC/WDDM | Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GTX 166... WDDM  | 00000000:01:00.0  On |                  N/A |\r\n| 30%   41C    P2    31W / 120W |   5566MiB /  6144MiB |      1%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0      1488    C+G   Insufficient Permissions                   N/A      |\r\n|    0      2408    C+G   Insufficient Permissions                   N/A      |\r\n|    0      3816    C+G   ...x64__8wekyb3d8bbwe\\Microsoft.Photos.exe N/A      |\r\n|    0      7492    C+G   C:\\Windows\\explorer.exe                    N/A      |\r\n|    0      8052    C+G   ...oftEdge_8wekyb3d8bbwe\\MicrosoftEdge.exe N/A      |\r\n|    0      8236    C+G   ...hell.Experiences.TextInput.InputApp.exe N/A      |\r\n|    0      8372    C+G   ...5n1h2txyewy\\StartMenuExperienceHost.exe N/A      |\r\n|    0      8436    C+G   ...t_cw5n1h2txyewy\\ShellExperienceHost.exe N/A      |\r\n|    0      8904    C+G   ...dows.Cortana_cw5n1h2txyewy\\SearchUI.exe N/A      |\r\n|    0      9760    C+G   ...6.102.0_x64__kzf8qxf38zg5c\\SkypeApp.exe N/A      |\r\n|    0      9804    C+G   ....111.0_x64__8wekyb3d8bbwe\\YourPhone.exe N/A      |\r\n|    0     10344    C+G   ...mmersiveControlPanel\\SystemSettings.exe N/A      |\r\n|    0     11292    C+G   ...6)\\Google\\Chrome\\Application\\chrome.exe N/A      |\r\n|    0     12680    C+G   ...11011.0_x64__8wekyb3d8bbwe\\Video.UI.exe N/A      |\r\n|    0     13680    C+G   ...1.0_x64__8wekyb3d8bbwe\\WinStore.App.exe N/A      |\r\n|    0     15308      C   ...mData\\Anaconda3\\envs\\DLC-GPU\\python.exe N/A      |\r\n|    0     15972    C+G   ...x86__8wekyb3d8bbwe\\Office16\\OUTLOOK.EXE N/A      |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\nI managed to get it working by uninstalling the conda assocaited cudnn, as it seems to be the wrong version, which fixed it.\r\n\r\nNow it merrily begins training, and under task manager -> performance -> GPU -> Cuda I can see it churning away. However, it stops after 1000-2000 iterations and the Cuda computing drops to 0%.\r\n\r\nWeird.","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/621112701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Ejdrup","id":50575240,"node_id":"MDQ6VXNlcjUwNTc1MjQw","avatar_url":"https://avatars.githubusercontent.com/u/50575240?v=4","gravatar_id":"","url":"https://api.github.com/users/Ejdrup","html_url":"https://github.com/Ejdrup","followers_url":"https://api.github.com/users/Ejdrup/followers","following_url":"https://api.github.com/users/Ejdrup/following{/other_user}","gists_url":"https://api.github.com/users/Ejdrup/gists{/gist_id}","starred_url":"https://api.github.com/users/Ejdrup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ejdrup/subscriptions","organizations_url":"https://api.github.com/users/Ejdrup/orgs","repos_url":"https://api.github.com/users/Ejdrup/repos","events_url":"https://api.github.com/users/Ejdrup/events{/privacy}","received_events_url":"https://api.github.com/users/Ejdrup/received_events","type":"User","site_admin":false}}]