[{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510278791","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-510278791","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":510278791,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDI3ODc5MQ==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T00:27:00Z","updated_at":"2019-07-11T01:06:58Z","author_association":"MEMBER","body":"Seems your Cuda and tensorflow don’t match. I don’t use or support miniconda so cannot trouble shoot this further. \r\n\r\nfor a CPU you cannot set `gputouse=0` - that means it's looking for GPU number 0; you need to set `gputouse=none` \r\n\r\nIf you ask for help on a function it will tell you:\r\n\r\n```\r\n deeplabcut.train_network?\r\nSignature: deeplabcut.train_network(config, shuffle=1, trainingsetindex=0, gputouse=None, max_snapshots_to_keep=5, autotune=False, displayiters=None, saveiters=None, maxiters=None)\r\nDocstring:\r\nTrains the network with the labels in the training dataset.\r\n\r\nParameter\r\n----------\r\nconfig : string\r\n    Full path of the config.yaml file as a string.\r\n\r\nshuffle: int, optional\r\n    Integer value specifying the shuffle index to select for training. Default is set to 1\r\n\r\ntrainingsetindex: int, optional\r\n    Integer specifying which TrainingsetFraction to use. By default the first (note that TrainingFraction is a list in config.yaml).\r\n\r\ngputouse: int, optional. Natural number indicating the number of your GPU (see number in nvidia-smi). If you do not have a GPU put None.\r\nSee: https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries\r\n\r\nAdditional parameters:\r\n\r\nmax_snapshots_to_keep: int, or None. Sets how many snapshots are kept, i.e. states of the trained network. Every savinginteration many times \r\na snapshot is stored, however only the last max_snapshots_to_keep many are kept! If you change this to None, then all are kept. \r\nSee: https://github.com/AlexEMG/DeepLabCut/issues/8#issuecomment-387404835\r\n\r\nautotune: property of TensorFlow, somehow faster if 'false' (as Eldar found out, see https://github.com/tensorflow/tensorflow/issues/13317). Default: False\r\n\r\ndisplayiters: this variable is actually set in pose_config.yaml. However, you can overwrite it with this hack. Don't use this regularly, just if you are too lazy to dig out \r\nthe pose_config.yaml file for the corresponding project. If None, the value from there is used, otherwise it is overwritten! Default: None\r\n\r\nsaveiters: this variable is actually set in pose_config.yaml. However, you can overwrite it with this hack. Don't use this regularly, just if you are too lazy to dig out \r\nthe pose_config.yaml file for the corresponding project. If None, the value from there is used, otherwise it is overwritten! Default: None\r\n\r\nmaxiters: this variable is actually set in pose_config.yaml. However, you can overwrite it with this hack. Don't use this regularly, just if you are too lazy to dig out \r\nthe pose_config.yaml file for the corresponding project. If None, the value from there is used, otherwise it is overwritten! Default: None\r\n\r\nExample\r\n--------\r\nfor training the network for first shuffle of the training dataset.\r\n>>> deeplabcut.train_network('/analysis/project/reaching-task/config.yaml')\r\n--------\r\n\r\nfor training the network for second shuffle of the training dataset.\r\n>>> deeplabcut.train_network('/analysis/project/reaching-task/config.yaml',shuffle=2)\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510278791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"id":2474258800,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ3NDI1ODgwMA==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2474258800","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-11T00:27:00Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510403902","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-510403902","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":510403902,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDQwMzkwMg==","user":{"login":"caniko","id":29519599,"node_id":"MDQ6VXNlcjI5NTE5NTk5","avatar_url":"https://avatars.githubusercontent.com/u/29519599?v=4","gravatar_id":"","url":"https://api.github.com/users/caniko","html_url":"https://github.com/caniko","followers_url":"https://api.github.com/users/caniko/followers","following_url":"https://api.github.com/users/caniko/following{/other_user}","gists_url":"https://api.github.com/users/caniko/gists{/gist_id}","starred_url":"https://api.github.com/users/caniko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caniko/subscriptions","organizations_url":"https://api.github.com/users/caniko/orgs","repos_url":"https://api.github.com/users/caniko/repos","events_url":"https://api.github.com/users/caniko/events{/privacy}","received_events_url":"https://api.github.com/users/caniko/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T09:15:36Z","updated_at":"2019-07-11T15:50:04Z","author_association":"NONE","body":"I can vouch for Miniconda, and that it has worked just fine with my two other DLC workstations. There is no difference of significance for this case between Anaconda and Miniconda:\r\nhttps://stackoverflow.com/questions/45421163/anaconda-vs-miniconda\r\n\r\nThe command mentioned is for use with GPU, and not CPU. I merely stated that I would be using dlc-CPU for the time being to avoid this bug.\r\n\r\nHowever, there is truth in your comment. My TF version does indeed not match my CUDA version. This is very weird as the network training went just fine. Interesting, I will report back when I test with another version of CUDA.\r\n\r\nI suggest we reopen this thread. It was closed for the wrong reasons.","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510403902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"caniko","id":29519599,"node_id":"MDQ6VXNlcjI5NTE5NTk5","avatar_url":"https://avatars.githubusercontent.com/u/29519599?v=4","gravatar_id":"","url":"https://api.github.com/users/caniko","html_url":"https://github.com/caniko","followers_url":"https://api.github.com/users/caniko/followers","following_url":"https://api.github.com/users/caniko/following{/other_user}","gists_url":"https://api.github.com/users/caniko/gists{/gist_id}","starred_url":"https://api.github.com/users/caniko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caniko/subscriptions","organizations_url":"https://api.github.com/users/caniko/orgs","repos_url":"https://api.github.com/users/caniko/repos","events_url":"https://api.github.com/users/caniko/events{/privacy}","received_events_url":"https://api.github.com/users/caniko/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510442379","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-510442379","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":510442379,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDQ0MjM3OQ==","user":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T11:11:13Z","updated_at":"2019-07-11T11:11:13Z","author_association":"MEMBER","body":"It’s a tensorflow / CUDA issue, hence why I closed it (it’s not a deeplabcut bug)","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510442379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510543753","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-510543753","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":510543753,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDU0Mzc1Mw==","user":{"login":"caniko","id":29519599,"node_id":"MDQ6VXNlcjI5NTE5NTk5","avatar_url":"https://avatars.githubusercontent.com/u/29519599?v=4","gravatar_id":"","url":"https://api.github.com/users/caniko","html_url":"https://github.com/caniko","followers_url":"https://api.github.com/users/caniko/followers","following_url":"https://api.github.com/users/caniko/following{/other_user}","gists_url":"https://api.github.com/users/caniko/gists{/gist_id}","starred_url":"https://api.github.com/users/caniko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caniko/subscriptions","organizations_url":"https://api.github.com/users/caniko/orgs","repos_url":"https://api.github.com/users/caniko/repos","events_url":"https://api.github.com/users/caniko/events{/privacy}","received_events_url":"https://api.github.com/users/caniko/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T15:51:10Z","updated_at":"2019-07-11T15:52:07Z","author_association":"NONE","body":"My apologies it seemed you closed it because of it being Miniconda, and because I used gputouse parameter in a CPU session (which I did not). Cheers","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/510543753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"caniko","id":29519599,"node_id":"MDQ6VXNlcjI5NTE5NTk5","avatar_url":"https://avatars.githubusercontent.com/u/29519599?v=4","gravatar_id":"","url":"https://api.github.com/users/caniko","html_url":"https://github.com/caniko","followers_url":"https://api.github.com/users/caniko/followers","following_url":"https://api.github.com/users/caniko/following{/other_user}","gists_url":"https://api.github.com/users/caniko/gists{/gist_id}","starred_url":"https://api.github.com/users/caniko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caniko/subscriptions","organizations_url":"https://api.github.com/users/caniko/orgs","repos_url":"https://api.github.com/users/caniko/repos","events_url":"https://api.github.com/users/caniko/events{/privacy}","received_events_url":"https://api.github.com/users/caniko/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/524034910","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-524034910","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":524034910,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDAzNDkxMA==","user":{"login":"ambareeshsrja16","id":39631487,"node_id":"MDQ6VXNlcjM5NjMxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/39631487?v=4","gravatar_id":"","url":"https://api.github.com/users/ambareeshsrja16","html_url":"https://github.com/ambareeshsrja16","followers_url":"https://api.github.com/users/ambareeshsrja16/followers","following_url":"https://api.github.com/users/ambareeshsrja16/following{/other_user}","gists_url":"https://api.github.com/users/ambareeshsrja16/gists{/gist_id}","starred_url":"https://api.github.com/users/ambareeshsrja16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambareeshsrja16/subscriptions","organizations_url":"https://api.github.com/users/ambareeshsrja16/orgs","repos_url":"https://api.github.com/users/ambareeshsrja16/repos","events_url":"https://api.github.com/users/ambareeshsrja16/events{/privacy}","received_events_url":"https://api.github.com/users/ambareeshsrja16/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T19:02:34Z","updated_at":"2019-08-22T19:08:05Z","author_association":"CONTRIBUTOR","body":"An update on the same issue. I was getting the exact same error as @caniko2 {Ubuntu18.0, GeForce  RTX2080 Cuda 10.2 Driver 430.26}\r\n\r\nFrom `nvidia-smi`, the .../envs/dc-ubuntu-GPU/bin/python was using about 7.9GB of GPU memory, and it was breaking with CudNN failing to initialize. \r\n\r\nI followed some other git issues from TensorFlow , and one of them had suggested something simiar for another issue:\r\n\r\n    import tensorflow as tf\r\n    gpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.8)\r\n    sess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options))\r\n\r\nwhich is basically restricting the amount of GPU memory that can be used by a single process.\r\nI have kept it at 80%, and my current usage stands at:\r\n\r\n![Screenshot from 2019-08-22 11-58-40](https://user-images.githubusercontent.com/39631487/63542050-40c0d180-c4d4-11e9-9358-0a46a5975382.png)\r\n\r\nBut thankfully, the network is training, (albeit I suspect slowly). So, this could be a temporary fix for this issue. \r\n\r\nA follow-up question is, Is there any way one can check which function/python module/ part of code is using how much of the GPU memory (rather than a blanket \".../bin/python process is using 90%\" info)\r\nI'm worried if I did some configuration mistake/code changes that might be causing a memory leak/exception handling somewhere which might be flooding the GPU memory. Any ideas?\r\n\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/524034910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ambareeshsrja16","id":39631487,"node_id":"MDQ6VXNlcjM5NjMxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/39631487?v=4","gravatar_id":"","url":"https://api.github.com/users/ambareeshsrja16","html_url":"https://github.com/ambareeshsrja16","followers_url":"https://api.github.com/users/ambareeshsrja16/followers","following_url":"https://api.github.com/users/ambareeshsrja16/following{/other_user}","gists_url":"https://api.github.com/users/ambareeshsrja16/gists{/gist_id}","starred_url":"https://api.github.com/users/ambareeshsrja16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambareeshsrja16/subscriptions","organizations_url":"https://api.github.com/users/ambareeshsrja16/orgs","repos_url":"https://api.github.com/users/ambareeshsrja16/repos","events_url":"https://api.github.com/users/ambareeshsrja16/events{/privacy}","received_events_url":"https://api.github.com/users/ambareeshsrja16/received_events","type":"User","site_admin":false}},{"id":2577521915,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU3NzUyMTkxNQ==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2577521915","actor":{"login":"caniko","id":29519599,"node_id":"MDQ6VXNlcjI5NTE5NTk5","avatar_url":"https://avatars.githubusercontent.com/u/29519599?v=4","gravatar_id":"","url":"https://api.github.com/users/caniko","html_url":"https://github.com/caniko","followers_url":"https://api.github.com/users/caniko/followers","following_url":"https://api.github.com/users/caniko/following{/other_user}","gists_url":"https://api.github.com/users/caniko/gists{/gist_id}","starred_url":"https://api.github.com/users/caniko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caniko/subscriptions","organizations_url":"https://api.github.com/users/caniko/orgs","repos_url":"https://api.github.com/users/caniko/repos","events_url":"https://api.github.com/users/caniko/events{/privacy}","received_events_url":"https://api.github.com/users/caniko/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-22T19:02:34Z","performed_via_github_app":null},{"id":2577521916,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Nzc1MjE5MTY=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2577521916","actor":{"login":"caniko","id":29519599,"node_id":"MDQ6VXNlcjI5NTE5NTk5","avatar_url":"https://avatars.githubusercontent.com/u/29519599?v=4","gravatar_id":"","url":"https://api.github.com/users/caniko","html_url":"https://github.com/caniko","followers_url":"https://api.github.com/users/caniko/followers","following_url":"https://api.github.com/users/caniko/following{/other_user}","gists_url":"https://api.github.com/users/caniko/gists{/gist_id}","starred_url":"https://api.github.com/users/caniko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caniko/subscriptions","organizations_url":"https://api.github.com/users/caniko/orgs","repos_url":"https://api.github.com/users/caniko/repos","events_url":"https://api.github.com/users/caniko/events{/privacy}","received_events_url":"https://api.github.com/users/caniko/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-22T19:02:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/560956366","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-560956366","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":560956366,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDk1NjM2Ng==","user":{"login":"nishbo","id":3775317,"node_id":"MDQ6VXNlcjM3NzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/3775317?v=4","gravatar_id":"","url":"https://api.github.com/users/nishbo","html_url":"https://github.com/nishbo","followers_url":"https://api.github.com/users/nishbo/followers","following_url":"https://api.github.com/users/nishbo/following{/other_user}","gists_url":"https://api.github.com/users/nishbo/gists{/gist_id}","starred_url":"https://api.github.com/users/nishbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishbo/subscriptions","organizations_url":"https://api.github.com/users/nishbo/orgs","repos_url":"https://api.github.com/users/nishbo/repos","events_url":"https://api.github.com/users/nishbo/events{/privacy}","received_events_url":"https://api.github.com/users/nishbo/received_events","type":"User","site_admin":false},"created_at":"2019-12-03T01:28:54Z","updated_at":"2019-12-03T01:28:54Z","author_association":"NONE","body":"I had a similar issue on the system:\r\nWin10 with Anaconda installation (TF v1.3)\r\nNVIDIA GeForce RTX 2060\r\nDriver 440.97\r\nCUDA 10.0\r\n\r\nSimilar to @ambareeshsrja16 I was able to fix the issue by restricting the memory to a lower use (0.6) or running it with `allow_growth` (which sometimes still broke).\r\n\r\nIt seems to be a bug in TF since at least 2017 (https://github.com/tensorflow/tensorflow/issues/6698), still existing in 1.8. I have fixed it for my personal DLC installation by going through source code and changing all lines with `sess = tf.Session()` to \r\n```\r\nconfig = tf.ConfigProto()\r\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.6\r\nsess = tf.Session(config=config)\r\n```\r\nI have found it to be used in the following places:\r\n1. deeplabcut/pose_estimation_tensorflow/train.py:line 147 - needed for training\r\n2. deeplabcut/pose_estimation_tensorflow/nnet/predict.py:line 37 - needed for evaluate_network\r\n3. same file, line 192 - needed for analyze_videos\r\nAnd these functions broke if the memory was not restricted.\r\n\r\nSince the amount of memory allocated is not directly available to the user of DLC, the error message blames TF/cuDNN installation and the majority of issue reports suggest changing the version of TF/CuDNN/CUDA (which does not help and wastes a lot of time), it may be worth adding the `per_process_gpu_memory_fraction` parameter to DLC functions.\r\n\r\nBest","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/560956366/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nishbo","id":3775317,"node_id":"MDQ6VXNlcjM3NzUzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/3775317?v=4","gravatar_id":"","url":"https://api.github.com/users/nishbo","html_url":"https://github.com/nishbo","followers_url":"https://api.github.com/users/nishbo/followers","following_url":"https://api.github.com/users/nishbo/following{/other_user}","gists_url":"https://api.github.com/users/nishbo/gists{/gist_id}","starred_url":"https://api.github.com/users/nishbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishbo/subscriptions","organizations_url":"https://api.github.com/users/nishbo/orgs","repos_url":"https://api.github.com/users/nishbo/repos","events_url":"https://api.github.com/users/nishbo/events{/privacy}","received_events_url":"https://api.github.com/users/nishbo/received_events","type":"User","site_admin":false}},{"id":2848177069,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg0ODE3NzA2OQ==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2848177069","actor":{"login":"ambareeshsrja16","id":39631487,"node_id":"MDQ6VXNlcjM5NjMxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/39631487?v=4","gravatar_id":"","url":"https://api.github.com/users/ambareeshsrja16","html_url":"https://github.com/ambareeshsrja16","followers_url":"https://api.github.com/users/ambareeshsrja16/followers","following_url":"https://api.github.com/users/ambareeshsrja16/following{/other_user}","gists_url":"https://api.github.com/users/ambareeshsrja16/gists{/gist_id}","starred_url":"https://api.github.com/users/ambareeshsrja16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambareeshsrja16/subscriptions","organizations_url":"https://api.github.com/users/ambareeshsrja16/orgs","repos_url":"https://api.github.com/users/ambareeshsrja16/repos","events_url":"https://api.github.com/users/ambareeshsrja16/events{/privacy}","received_events_url":"https://api.github.com/users/ambareeshsrja16/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-03T01:28:55Z","performed_via_github_app":null},{"id":2848177072,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NDgxNzcwNzI=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2848177072","actor":{"login":"ambareeshsrja16","id":39631487,"node_id":"MDQ6VXNlcjM5NjMxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/39631487?v=4","gravatar_id":"","url":"https://api.github.com/users/ambareeshsrja16","html_url":"https://github.com/ambareeshsrja16","followers_url":"https://api.github.com/users/ambareeshsrja16/followers","following_url":"https://api.github.com/users/ambareeshsrja16/following{/other_user}","gists_url":"https://api.github.com/users/ambareeshsrja16/gists{/gist_id}","starred_url":"https://api.github.com/users/ambareeshsrja16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambareeshsrja16/subscriptions","organizations_url":"https://api.github.com/users/ambareeshsrja16/orgs","repos_url":"https://api.github.com/users/ambareeshsrja16/repos","events_url":"https://api.github.com/users/ambareeshsrja16/events{/privacy}","received_events_url":"https://api.github.com/users/ambareeshsrja16/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-03T01:28:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/561052711","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-561052711","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":561052711,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTA1MjcxMQ==","user":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"created_at":"2019-12-03T08:20:14Z","updated_at":"2019-12-03T08:20:14Z","author_association":"MEMBER","body":"Firstly, you can restrict process growth already in dlc without any code changes, see:\nhttps://github.com/AlexEMG/DeepLabCut/pull/458#issuecomment-546973637\n\nSecondly the tf issue you highlight is indeed quite illuminating, but also that people commonly solve it by a) switching tf/cuda etc and b) deleting idle processes or c) restricting capacity as above.\n\n________________________________\nFrom: Anton Sobinov <notifications@github.com>\nSent: Monday, December 2, 2019 20:29\nTo: AlexEMG/DeepLabCut\nCc: Subscribed\nSubject: Re: [AlexEMG/DeepLabCut] Using GPU in analyse_videos(): CudNN failed to initialize (#358)\n\n\nI had a similar issue on the system:\nWin10 with Anaconda installation (TF v1.3)\nNVIDIA GeForce RTX 2060\nDriver 440.97\nCUDA 10.0\n\nSimilar to @ambareeshsrja16<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ambareeshsrja16&d=DwMCaQ&c=WO-RGvefibhHBZq3fL85hQ&r=11wEEDBv3Ke3n3b8dICjuQC5vgZ23dfGPax018VOZ2g&m=HYKAX1zWYjwkincByCctMYVvzlUeQK1blbrfRmIT6GQ&s=xYouPIy_j_b29renM7uHYjuS5q6USMhR_AkDbQoWiIA&e=> I was able to fix the issue by restricting the memory to a lower use (0.6) or running it with allow_growth (which sometimes still broke).\n\nIt seems to be a bug in TF since at least 2017 (tensorflow/tensorflow#6698<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_tensorflow_tensorflow_issues_6698&d=DwMCaQ&c=WO-RGvefibhHBZq3fL85hQ&r=11wEEDBv3Ke3n3b8dICjuQC5vgZ23dfGPax018VOZ2g&m=HYKAX1zWYjwkincByCctMYVvzlUeQK1blbrfRmIT6GQ&s=9mLzcDe41D6m7n_Kg1DRFynlflMFV96AMZH8BLjylDI&e=>), still existing in 1.8. I have fixed it for my personal DLC installation by going through source code and changing all lines with sess = tf.Session() to\n\nconfig = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.6\nsess = tf.Session(config=config)\n\n\nI have found it to be used in the following places:\n\n  1.  deeplabcut/pose_estimation_tensorflow/train.py:line 147 - needed for training\n  2.  deeplabcut/pose_estimation_tensorflow/nnet/predict.py:line 37 - needed for evaluate_network\n  3.  same file, line 192 - needed for analyze_videos\nAnd these functions broke if the memory was not restricted.\n\nSince the amount of memory allocated is not directly available to the user of DLC, the error message blames TF/cuDNN installation and the majority of issue reports suggest changing the version of TF/CuDNN/CUDA (which does not help and wastes a lot of time), it may be worth adding the per_process_gpu_memory_fraction parameter to DLC functions.\n\nBest\n\n—\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_AlexEMG_DeepLabCut_issues_358-3Femail-5Fsource-3Dnotifications-26email-5Ftoken-3DAE7CMXUFQFN2XPGI2I7TNATQWWY5ZA5CNFSM4IAD6VCKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEFXYHTQ-23issuecomment-2D560956366&d=DwMCaQ&c=WO-RGvefibhHBZq3fL85hQ&r=11wEEDBv3Ke3n3b8dICjuQC5vgZ23dfGPax018VOZ2g&m=HYKAX1zWYjwkincByCctMYVvzlUeQK1blbrfRmIT6GQ&s=MOaNBjE79POoMPLUxmHtHerQKV2s3OE_xoNTZwYGfPo&e=>, or unsubscribe<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AE7CMXRUQPLWJCIVDGSJUJTQWWY5ZANCNFSM4IAD6VCA&d=DwMCaQ&c=WO-RGvefibhHBZq3fL85hQ&r=11wEEDBv3Ke3n3b8dICjuQC5vgZ23dfGPax018VOZ2g&m=HYKAX1zWYjwkincByCctMYVvzlUeQK1blbrfRmIT6GQ&s=XAEvb-RI6M4u3D5Lh_sV8YHDejCQxlNTdc2CrLfB5e0&e=>.\n","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/561052711/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false}},{"id":2848972890,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg0ODk3Mjg5MA==","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2848972890","actor":{"login":"ambareeshsrja16","id":39631487,"node_id":"MDQ6VXNlcjM5NjMxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/39631487?v=4","gravatar_id":"","url":"https://api.github.com/users/ambareeshsrja16","html_url":"https://github.com/ambareeshsrja16","followers_url":"https://api.github.com/users/ambareeshsrja16/followers","following_url":"https://api.github.com/users/ambareeshsrja16/following{/other_user}","gists_url":"https://api.github.com/users/ambareeshsrja16/gists{/gist_id}","starred_url":"https://api.github.com/users/ambareeshsrja16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambareeshsrja16/subscriptions","organizations_url":"https://api.github.com/users/ambareeshsrja16/orgs","repos_url":"https://api.github.com/users/ambareeshsrja16/repos","events_url":"https://api.github.com/users/ambareeshsrja16/events{/privacy}","received_events_url":"https://api.github.com/users/ambareeshsrja16/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-03T08:20:14Z","performed_via_github_app":null},{"id":2848972899,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NDg5NzI4OTk=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/events/2848972899","actor":{"login":"ambareeshsrja16","id":39631487,"node_id":"MDQ6VXNlcjM5NjMxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/39631487?v=4","gravatar_id":"","url":"https://api.github.com/users/ambareeshsrja16","html_url":"https://github.com/ambareeshsrja16","followers_url":"https://api.github.com/users/ambareeshsrja16/followers","following_url":"https://api.github.com/users/ambareeshsrja16/following{/other_user}","gists_url":"https://api.github.com/users/ambareeshsrja16/gists{/gist_id}","starred_url":"https://api.github.com/users/ambareeshsrja16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ambareeshsrja16/subscriptions","organizations_url":"https://api.github.com/users/ambareeshsrja16/orgs","repos_url":"https://api.github.com/users/ambareeshsrja16/repos","events_url":"https://api.github.com/users/ambareeshsrja16/events{/privacy}","received_events_url":"https://api.github.com/users/ambareeshsrja16/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-03T08:20:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/601967735","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/358#issuecomment-601967735","issue_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/358","id":601967735,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTk2NzczNQ==","user":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"created_at":"2020-03-21T00:45:42Z","updated_at":"2020-03-21T00:45:42Z","author_association":"MEMBER","body":"Also check out this related issue: https://github.com/tensorflow/tensorflow/issues/24828","reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/comments/601967735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false}}]