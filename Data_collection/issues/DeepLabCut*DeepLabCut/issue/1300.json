{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1300","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1300/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1300/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1300/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1300","id":909518080,"node_id":"MDU6SXNzdWU5MDk1MTgwODA=","number":1300,"title":"create_training_model_comparison confused by training split 93%","user":{"login":"jefromson","id":66144986,"node_id":"MDQ6VXNlcjY2MTQ0OTg2","avatar_url":"https://avatars.githubusercontent.com/u/66144986?v=4","gravatar_id":"","url":"https://api.github.com/users/jefromson","html_url":"https://github.com/jefromson","followers_url":"https://api.github.com/users/jefromson/followers","following_url":"https://api.github.com/users/jefromson/following{/other_user}","gists_url":"https://api.github.com/users/jefromson/gists{/gist_id}","starred_url":"https://api.github.com/users/jefromson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jefromson/subscriptions","organizations_url":"https://api.github.com/users/jefromson/orgs","repos_url":"https://api.github.com/users/jefromson/repos","events_url":"https://api.github.com/users/jefromson/events{/privacy}","received_events_url":"https://api.github.com/users/jefromson/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2021-06-02T13:43:05Z","updated_at":"2021-06-24T20:18:58Z","closed_at":"2021-06-24T20:18:58Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nUsing the deeplabcut gui, when I use the \"create_training_model_comparison\" function (screenshot a), it creates a training dataset with 93% training fraction (output 1, screenshot b). When I attempt to begin training the system is automatically looking for a folder labeled “trainingset95shuffle0” and not finding it because it is “trainingset93shuffle0” (output 2). If I attempt to use the “User Feedback” function (screenshot c) when creating the training dataset to force the training split to be 95% I get another error and the dataset is not created successfully(Output 3).\r\n\r\n**Desktop (please complete the following information about your system):**\r\n - Ubuntu 20.04\r\n - DeepLabCut version 2.1.10.4\r\n - DeepLabCut single animal tracking\r\n\r\n**To Reproduce**\r\n1. Open the DeepLabCut GUI\r\n2. On the \"Create training dataset\" page select the compare models option.\r\n3. Create dataset\r\n4. Train network\r\n5. See errors:\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\nOutput 1:\r\n```python\r\nAnnotation data converted to unix format...\r\nYou passed a split with the following fraction: 93%\r\nThe training dataset is successfully created. Use the function 'train_network' to start training. Happy training!\r\n```\r\n\r\nOutput 2:\r\n```\r\nThe training datafile  /home/John/Downloads/net_comparison_v1-JE-2021-06-02/dlc-models/iteration-0/net_comparison_v1Jun2-trainset95shuffle0/train/pose_cfg.yaml  is not present.\r\nProbably, the training dataset for this specific shuffle index was not created.\r\nTry with a different shuffle/trainingsetfraction or use function 'create_training_dataset' to create a new trainingdataset with this shuffle index.\r\n---------------------------------------------------------------------------\r\nFileNotFoundError                         Traceback (most recent call last)\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/gui/train_network.py in train_network(self, event)\r\n    326             displayiters=displayiters,\r\n    327             saveiters=saveiters,\r\n--> 328             maxiters=maxiters,\r\n    329         )\r\n    330 \r\n\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/training.py in train_network(config, shuffle, trainingsetindex, max_snapshots_to_keep, displayiters, saveiters, maxiters, allow_growth, gputouse, autotune, keepdeconvweights, modelprefix)\r\n    191 \r\n    192     except BaseException as e:\r\n--> 193         raise e\r\n    194     finally:\r\n    195         os.chdir(str(start_path))\r\n\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/training.py in train_network(config, shuffle, trainingsetindex, max_snapshots_to_keep, displayiters, saveiters, maxiters, allow_growth, gputouse, autotune, keepdeconvweights, modelprefix)\r\n    162             os.environ[\"CUDA_VISIBLE_DEVICES\"] = str(gputouse)\r\n    163     try:\r\n--> 164         cfg_dlc = auxiliaryfunctions.read_plainconfig(poseconfigfile)\r\n    165         if \"multi-animal\" in cfg_dlc[\"dataset_type\"]:\r\n    166             from deeplabcut.pose_estimation_tensorflow.train_multianimal import train\r\n\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/utils/auxiliaryfunctions.py in read_plainconfig(configname)\r\n    261     if not os.path.exists(configname):\r\n    262         raise FileNotFoundError(\r\n--> 263             f\"Config {configname} is not found. Please make sure that the file exists.\"\r\n    264         )\r\n    265     with open(configname) as file:\r\n\r\nFileNotFoundError: Config /home/John/Downloads/net_comparison_v1-JE-2021-06-02/dlc-models/iteration-0/net_comparison_v1Jun2-trainset95shuffle0/train/pose_cfg.yaml is not found. Please make sure that the file exists.\r\n```\r\n\r\nOutput 3:\r\n```\r\nIt appears that the images were labeled on a Windows system, but you are currently trying to create a training set on a Unix system. \r\n In this case the paths should be converted. Do you want to proceed with the conversion?\r\nyes/noyes\r\nAnnotation data converted to unix format...\r\n/home/John/Downloads/net_comparison_v1-JE-2021-06-02/training-datasets/iteration-0/UnaugmentedDataSet_net_comparison_v1Jun2  already exists!\r\nIt appears that the images were labeled on a Windows system, but you are currently trying to create a training set on a Unix system. \r\n In this case the paths should be converted. Do you want to proceed with the conversion?\r\nyes/noyes\r\nAnnotation data converted to unix format...\r\nYou passed a split with the following fraction: 93%\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/gui/create_training_dataset.py in create_training_dataset(self, event)\r\n    398                     userfeedback=userfeedback,\r\n    399                     net_types=self.net_type,\r\n--> 400                     augmenter_types=self.aug_type,\r\n    401                 )\r\n    402 \r\n\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py in create_training_model_comparison(config, trainindex, num_shuffles, net_types, augmenter_types, userfeedback, windows2linux)\r\n   1206                     augmenter_type=aug,\r\n   1207                     userfeedback=userfeedback,\r\n-> 1208                     windows2linux=windows2linux,\r\n   1209                 )\r\n   1210                 logger.info(log_info)\r\n\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py in create_training_dataset(config, num_shuffles, Shuffles, windows2linux, userfeedback, trainIndices, testIndices, net_type, augmenter_type)\r\n    967                         config,\r\n    968                         shuffle=shuffle,\r\n--> 969                         trainingsetindex=cfg[\"TrainingFraction\"].index(trainFraction),\r\n    970                     )\r\n    971                     if trainposeconfigfile.is_file():\r\n\r\n~/miniconda3/envs/dlc_gpu/lib/python3.7/_collections_abc.py in index(self, value, start, stop)\r\n    918                 break\r\n    919             i += 1\r\n--> 920         raise ValueError\r\n    921 \r\n    922     def count(self, value):\r\n\r\nValueError: \r\n```\r\n\r\n</p></details>\r\n\r\n\r\n**Expected behavior**\r\n1) When I create a training dataset using the compare_models function the train_network function should find the correct training set regardless of training fraction.\r\n2) I am unsure the expected behavior of the \"User feedback\" parameter here but I was not expecting it to get hung up here.\r\n\r\n**Screenshots**\r\na) ![image](https://user-images.githubusercontent.com/66144986/120487320-dcf35a00-c383-11eb-8ca6-4f4faa167fcb.png)\r\n\r\nb) ![image](https://user-images.githubusercontent.com/66144986/120488460-cbf71880-c384-11eb-9077-1b8b7cdb6cd7.png)\r\n\r\nc) ![image](https://user-images.githubusercontent.com/66144986/120487430-f72d3800-c383-11eb-945b-7b79bb5f1208.png)\r\n\r\n\r\n\r\n**Additional context**\r\n\r\nThe data was labeled on a Windows 10 system and is being converted to Unix format.\r\n\r\nThanks!\r\n","closed_by":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1300/timeline","performed_via_github_app":null,"state_reason":"completed"}