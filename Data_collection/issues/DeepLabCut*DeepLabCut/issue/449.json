{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/449","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/449/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/449/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/449/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/449","id":504276122,"node_id":"MDU6SXNzdWU1MDQyNzYxMjI=","number":449,"title":"issue when using analyze_time_lapse_frames with grayscale image","user":{"login":"felixhol","id":18172105,"node_id":"MDQ6VXNlcjE4MTcyMTA1","avatar_url":"https://avatars.githubusercontent.com/u/18172105?v=4","gravatar_id":"","url":"https://api.github.com/users/felixhol","html_url":"https://github.com/felixhol","followers_url":"https://api.github.com/users/felixhol/followers","following_url":"https://api.github.com/users/felixhol/following{/other_user}","gists_url":"https://api.github.com/users/felixhol/gists{/gist_id}","starred_url":"https://api.github.com/users/felixhol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixhol/subscriptions","organizations_url":"https://api.github.com/users/felixhol/orgs","repos_url":"https://api.github.com/users/felixhol/repos","events_url":"https://api.github.com/users/felixhol/events{/privacy}","received_events_url":"https://api.github.com/users/felixhol/received_events","type":"User","site_admin":false},"labels":[{"id":880550034,"node_id":"MDU6TGFiZWw4ODA1NTAwMzQ=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2019-10-08T20:58:11Z","updated_at":"2019-10-20T22:02:13Z","closed_at":"2019-10-20T22:02:13Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhen running inference on a directory with gray scale png images using analyze time lapse, the code expects a color images regardles of rgb=False and returns: \r\nValueError: not enough values to unpack (expected 3, got 2)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\nrun:\r\n\r\ndeeplabcut.analyze_time_lapse_frames(config, imageDir, save_as_csv=True, rgb=False)\r\n\r\non a grayscale png\r\n\r\n**Expected behavior**\r\n\r\nIdeally this would work on gray scale images, yet there are several points downstream in the code that seem incompatible with gray scale images  (e.g. expect shape (x, y, 3))\r\n\r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: ubuntu 18.04, encountered same issue on macOS\r\n - DeepLabCut Version 2.0.9\r\n - Browser chrome on ubuntu, safari on macOS\r\n\r\n**Additional context**\r\n\r\nA quick and dirty work around is to add:\r\n\r\nim=gray2rgb(im)\r\n\r\nafter:\r\nim=io.imread(os.path.join(directory,framelist[0]))\r\nand,\r\nim=io.imread(os.path.join(directory,framename))\r\nand,\r\nim=io.imread(os.path.join(directory,framename))\r\n\r\nto convert the gray scale image to rgb. With that everything runs smooth, though it's not the ideal long term solution. \r\n\r\n\r\n","closed_by":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/449/timeline","performed_via_github_app":null,"state_reason":"completed"}