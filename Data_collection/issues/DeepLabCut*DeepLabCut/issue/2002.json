{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2002","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2002/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2002/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2002/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/2002","id":1400113337,"node_id":"I_kwDOB5BM6c5TdAi5","number":2002,"title":"WXAgg error in Docker","user":{"login":"junQree","id":115181840,"node_id":"U_kgDOBt2JEA","avatar_url":"https://avatars.githubusercontent.com/u/115181840?v=4","gravatar_id":"","url":"https://api.github.com/users/junQree","html_url":"https://github.com/junQree","followers_url":"https://api.github.com/users/junQree/followers","following_url":"https://api.github.com/users/junQree/following{/other_user}","gists_url":"https://api.github.com/users/junQree/gists{/gist_id}","starred_url":"https://api.github.com/users/junQree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junQree/subscriptions","organizations_url":"https://api.github.com/users/junQree/orgs","repos_url":"https://api.github.com/users/junQree/repos","events_url":"https://api.github.com/users/junQree/events{/privacy}","received_events_url":"https://api.github.com/users/junQree/received_events","type":"User","site_admin":false},"labels":[{"id":1201091212,"node_id":"MDU6TGFiZWwxMjAxMDkxMjEy","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/Docker","name":"Docker","color":"bfd4f2","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"stes","id":727984,"node_id":"MDQ6VXNlcjcyNzk4NA==","avatar_url":"https://avatars.githubusercontent.com/u/727984?v=4","gravatar_id":"","url":"https://api.github.com/users/stes","html_url":"https://github.com/stes","followers_url":"https://api.github.com/users/stes/followers","following_url":"https://api.github.com/users/stes/following{/other_user}","gists_url":"https://api.github.com/users/stes/gists{/gist_id}","starred_url":"https://api.github.com/users/stes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stes/subscriptions","organizations_url":"https://api.github.com/users/stes/orgs","repos_url":"https://api.github.com/users/stes/repos","events_url":"https://api.github.com/users/stes/events{/privacy}","received_events_url":"https://api.github.com/users/stes/received_events","type":"User","site_admin":false},"assignees":[{"login":"stes","id":727984,"node_id":"MDQ6VXNlcjcyNzk4NA==","avatar_url":"https://avatars.githubusercontent.com/u/727984?v=4","gravatar_id":"","url":"https://api.github.com/users/stes","html_url":"https://github.com/stes","followers_url":"https://api.github.com/users/stes/followers","following_url":"https://api.github.com/users/stes/following{/other_user}","gists_url":"https://api.github.com/users/stes/gists{/gist_id}","starred_url":"https://api.github.com/users/stes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stes/subscriptions","organizations_url":"https://api.github.com/users/stes/orgs","repos_url":"https://api.github.com/users/stes/repos","events_url":"https://api.github.com/users/stes/events{/privacy}","received_events_url":"https://api.github.com/users/stes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2022-10-06T18:18:35Z","updated_at":"2022-10-09T14:45:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Bug description\r\nI've tried both: creating a conda env or using docker to import deeplabcut containers.\r\nIn both cases, the installation goes through. But when I run\r\n\r\n$ python -m deeplabcut\r\n-or-\r\n$ deeplabcut-docker gui\r\n\r\nI get very similar errors involving WXAgg. Not sure how to solve this.\r\n#3 shows you the gpu information.\r\n\r\n### Operating System\r\n\r\nUbuntu 20.04.2\r\n\r\n### DeepLabCut version\r\n\r\n### DeepLabCut mode\r\n\r\n### Device type\r\n\r\n14 VCPUs and 1 GPU\r\n\r\n### Steps To Reproduce\r\n\r\n### Relevant log output\r\n\r\n```shell\r\n>#1\r\n\r\n(DEEPLABCUT) jkrhee@compute:~/anaconda3/envs$ python -m deeplabcut\r\n2022-10-07 09:41:07.014745: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 FMA\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2022-10-07 09:41:07.267372: E tensorflow/stream_executor/cuda/cuda_blas.cc:2981] Unable to register cuBLAS factory: Attempting to register factory for plugin cuBLAS when one has already been registered\r\n2022-10-07 09:41:13.538786: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libnvinfer.so.7'; dlerror: libnvinfer.so.7: cannot open shared object file: No such file or directory\r\n2022-10-07 09:41:13.538978: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libnvinfer_plugin.so.7'; dlerror: libnvinfer_plugin.so.7: cannot open shared object file: No such file or directory\r\n2022-10-07 09:41:13.538999: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning: Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.\r\nLoading DLC 2.2.2...\r\nStarting GUI...\r\nTraceback (most recent call last):\r\n  File \"/nfs/home/jkrhee/anaconda3/envs/DEEPLABCUT/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/nfs/home/jkrhee/anaconda3/envs/DEEPLABCUT/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/nfs/home/jkrhee/anaconda3/envs/DEEPLABCUT/lib/python3.8/site-packages/deeplabcut/__main__.py\", line 22, in <module>\r\n    deeplabcut.launch_dlc()\r\n  File \"/nfs/home/jkrhee/anaconda3/envs/DEEPLABCUT/lib/python3.8/site-packages/deeplabcut/gui/launch_script.py\", line 45, in launch_dlc\r\n    mpl.use(\"WxAgg\")\r\n  File \"/nfs/home/jkrhee/anaconda3/envs/DEEPLABCUT/lib/python3.8/site-packages/matplotlib/__init__.py\", line 1156, in use\r\n    plt.switch_backend(name)\r\n  File \"/nfs/home/jkrhee/anaconda3/envs/DEEPLABCUT/lib/python3.8/site-packages/matplotlib/pyplot.py\", line 273, in switch_backend\r\n    raise ImportError(\r\nImportError: Cannot load backend 'WXAgg' which requires the 'wx' interactive framework, as 'headless' is currently running\r\n\r\n\r\n>#2\r\n\r\n(scripts_python) jkrhee@compute:~/anaconda3/envs$ deeplabcut-docker gui\r\n\r\n                    .--,       .--,\r\n                    ( (  \\.---./  ) )\r\n                     '.__/o   o\\__.'\r\n                       `{=  ^  =}Â´\r\n                         >  u  <\r\n ____________________.\"\"`-------`\"\".______________________\r\n\\   ___                   __         __   _____       __  /\r\n/  / _ \\ ___  ___  ___   / /  ___ _ / /  / ___/__ __ / /_ \\\r\n\\ / // // -_)/ -_)/ _ \\ / /__/ _ `// _ \\/ /__ / // // __/ /\r\n//____/ \\__/ \\__// .__//____/\\_,_//_.__/\\___/ \\_,_/ \\__/  \\\r\n\\_________________________________________________________/\r\n                       ___)( )(___ `-.___.\r\n                      (((__) (__)))      ~`\r\n\r\nWelcome to DeepLabCut docker!\r\n\r\ngroups: cannot find name for group ID 5000\r\nlatest-gui: Pulling from deeplabcut/deeplabcut\r\nDigest: sha256:3f08a9e7ee3b0d9ab9905cb13114363c70a012d656b5662b1dd888d9cbce43ad\r\nStatus: Image is up to date for deeplabcut/deeplabcut:latest-gui\r\ndocker.io/deeplabcut/deeplabcut:latest-gui\r\nid: cannot find name for group ID 5000\r\n[2022-10-07T09:49:35+0000]: Configuring a local container for user jkrhee (10006) in group 5000 (5000)\r\nsha256:ff0a2149602cc8bbea96b063a8ec50e030565bd280b5f399aac517580438fbae\r\n[2022-10-07T09:49:35+0000]: Build succeeded\r\n[2022-10-07T09:49:35+0000]: Using Linux config\r\n2022-10-07 09:49:36.328858: I tensorflow/stream_executor/platform/default/dso_loader.cc:53] Successfully opened dynamic library libcudart.so.11.0\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/runpy.py\", line 185, in _run_module_as_main\r\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 144, in _get_module_details\r\n    return _get_module_details(pkg_main_name, error)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 111, in _get_module_details\r\n    __import__(pkg_name)\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/__init__.py\", line 27, in <module>\r\n    from deeplabcut import generate_training_dataset\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/generate_training_dataset/__init__.py\", line 12, in <module>\r\n    from deeplabcut.generate_training_dataset.trainingsetmanipulation import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py\", line 23, in <module>\r\n    from deeplabcut.pose_estimation_tensorflow import training\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/pose_estimation_tensorflow/__init__.py\", line 12, in <module>\r\n    from deeplabcut.pose_estimation_tensorflow.datasets import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/pose_estimation_tensorflow/datasets/__init__.py\", line 11, in <module>\r\n    from .pose_deterministic import DeterministicPoseDataset\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/pose_estimation_tensorflow/datasets/pose_deterministic.py\", line 19, in <module>\r\n    from deeplabcut.utils.auxfun_videos import imread, imresize\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/utils/__init__.py\", line 6, in <module>\r\n    from deeplabcut.utils.make_labeled_video import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/utils/make_labeled_video.py\", line 26, in <module>\r\n    import matplotlib.pyplot as plt\r\n  File \"/usr/local/lib/python3.8/dist-packages/matplotlib/pyplot.py\", line 2500, in <module>\r\n    switch_backend(rcParams[\"backend\"])\r\n  File \"/usr/local/lib/python3.8/dist-packages/matplotlib/pyplot.py\", line 285, in switch_backend\r\n    raise ImportError(\r\nImportError: Cannot load backend 'WXAgg' which requires the 'wx' interactive framework, as 'headless' is currently running\r\n[2022-10-07T09:49:39+0000]: Failed to launch the DLC GUI. Used args: \"-e DISPLAY=unix -v /tmp/.X11-unix:/tmp/.X11-unix -v :/home/developer/.Xauthority -v /nfs/home/jkrhee/anaconda3/envs:/app -w /app \"\r\nContainer stopped.\r\n\r\n\r\n>#3\r\n(scripts_python) nvidia-smi\r\nFri Oct  7 10:21:50 2022\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 470.57.02    Driver Version: 470.57.02    CUDA Version: 11.4     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|                               |                      |               MIG M. |\r\n|===============================+======================+======================|\r\n|   0  Tesla P100-PCIE...  Off  | 00000000:00:05.0 Off |                    0 |\r\n| N/A   23C    P0    26W / 250W |      0MiB / 16280MiB |      0%      Default |\r\n|                               |                      |                  N/A |\r\n+-------------------------------+----------------------+----------------------+\r\n\r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                                  |\r\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\r\n|        ID   ID                                                   Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":null,"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2002/timeline","performed_via_github_app":null,"state_reason":null}