{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1703","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1703/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1703/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1703/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1703","id":1148638330,"node_id":"I_kwDOB5BM6c5EdtR6","number":1703,"title":"`Getlistofvideos` returns `[]` when given a directory as a string","user":{"login":"sneakers-the-rat","id":12961499,"node_id":"MDQ6VXNlcjEyOTYxNDk5","avatar_url":"https://avatars.githubusercontent.com/u/12961499?v=4","gravatar_id":"","url":"https://api.github.com/users/sneakers-the-rat","html_url":"https://github.com/sneakers-the-rat","followers_url":"https://api.github.com/users/sneakers-the-rat/followers","following_url":"https://api.github.com/users/sneakers-the-rat/following{/other_user}","gists_url":"https://api.github.com/users/sneakers-the-rat/gists{/gist_id}","starred_url":"https://api.github.com/users/sneakers-the-rat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sneakers-the-rat/subscriptions","organizations_url":"https://api.github.com/users/sneakers-the-rat/orgs","repos_url":"https://api.github.com/users/sneakers-the-rat/repos","events_url":"https://api.github.com/users/sneakers-the-rat/events{/privacy}","received_events_url":"https://api.github.com/users/sneakers-the-rat/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-02-23T22:18:04Z","updated_at":"2022-03-08T15:49:14Z","closed_at":"2022-03-08T15:49:13Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nIf a `'string'` rather than a `['string']` in a list is passed to `auxiliaryfunctions.Getlistofvideos`, it isn't coerced before the check for being a directory, so it checks if each character in the string is a directory instead:\r\n\r\nhttps://github.com/DeepLabCut/DeepLabCut/blob/63e65bcce1a5ff15adf324465392320f8174f5c7/deeplabcut/utils/auxiliaryfunctions.py#L326\r\n\r\nand since that check fails, and so will the `os.path.isfile` that follows, an empty list is returned silently. \r\n\r\nAdditionally, the `videotype` is applied inconsistently, and needs to be supplied even when it is unnecessary: eg. if someone supplies a list of `.mp4` videos, they need to provide the extension even though it isn't used, which complicates the functions that wrap it.\r\n\r\nThe function also changes the working directory unnecessarily, which is causing some unexpected behavior when some folks in my lab use it.\r\n\r\nThe simplest way I think of fixing without changing behavior would be to \r\n* coerce to list if string\r\n* make optional videotype, but require if given a directory,\r\n* if given directory, get list of videos first,\r\n* otherwise do all filtering in same step at end of function\r\n\r\nWill submit a PR in a second. \r\n\n\n### Operating System\n\nShould be crossplatform? but i'm on a mac\n\n### DeepLabCut version\n\npulled latest version of `main`, which is `63e65bc` at the moment\n\n### DeepLabCut mode\n\nmulti animal\n\n### Device type\n\ngpu\n\n### Steps To Reproduce\n\n```python\r\n>>> import os\r\n>>> [os.path.isdir(i) for i in '/home/user/video_dir']\r\n[True,\r\n False,\r\n False,\r\n ...]\r\n```\n\n### Relevant log output\n\n```shell\n(remotely debugging some problems my labmates are having, so i don't have stdout)\n```\n\n\n### Anything else?\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1703/timeline","performed_via_github_app":null,"state_reason":"completed"}