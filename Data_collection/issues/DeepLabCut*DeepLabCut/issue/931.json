{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/931","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/931/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/931/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/931/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/931","id":711240175,"node_id":"MDU6SXNzdWU3MTEyNDAxNzU=","number":931,"title":"Issues training multianimal video on COLAB","user":{"login":"Hydraulic343","id":43321657,"node_id":"MDQ6VXNlcjQzMzIxNjU3","avatar_url":"https://avatars.githubusercontent.com/u/43321657?v=4","gravatar_id":"","url":"https://api.github.com/users/Hydraulic343","html_url":"https://github.com/Hydraulic343","followers_url":"https://api.github.com/users/Hydraulic343/followers","following_url":"https://api.github.com/users/Hydraulic343/following{/other_user}","gists_url":"https://api.github.com/users/Hydraulic343/gists{/gist_id}","starred_url":"https://api.github.com/users/Hydraulic343/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hydraulic343/subscriptions","organizations_url":"https://api.github.com/users/Hydraulic343/orgs","repos_url":"https://api.github.com/users/Hydraulic343/repos","events_url":"https://api.github.com/users/Hydraulic343/events{/privacy}","received_events_url":"https://api.github.com/users/Hydraulic343/received_events","type":"User","site_admin":false},"labels":[{"id":2309673365,"node_id":"MDU6TGFiZWwyMzA5NjczMzY1","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/stale%20issue%20(closed)","name":"stale issue (closed)","color":"077fb7","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-09-29T15:43:51Z","updated_at":"2020-11-25T17:13:01Z","closed_at":"2020-10-19T09:15:41Z","author_association":"NONE","active_lock_reason":null,"body":"I’ve been trying to run training for a multianimal video containing two mice, using “COLAB_maDLC_TrainNetwork_VideoAnalysis.ipynb”. Only one of the mice has at least one frame containing a complete skeleton, but the second mouse only has partial skeletons on each frame. I’ve attached the config file to this question. I keep running into the following error message whenever I run training:\r\n\r\n_____________________________________________________________________________________________________\r\nResourceExhaustedError: 2 root error(s) found.\r\n(0) Resource exhausted: OOM when allocating tensor with shape[8,49,87,2048] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\n[[{{node resnet_v1_50/block4/unit_1/bottleneck_v1/conv3/Conv2D-0-0-TransposeNCHWToNHWC-LayoutOptimizer}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n [[mean_squared_error/assert_broadcastable/is_valid_shape/has_valid_nonscalar_shape/has_invalid_dims/concat/_563]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n(1) Resource exhausted: OOM when allocating tensor with shape[8,49,87,2048] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\n[[{{node resnet_v1_50/block4/unit_1/bottleneck_v1/conv3/Conv2D-0-0-TransposeNCHWToNHWC-LayoutOptimizer}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n0 successful operations.\r\n0 derived errors ignored.\r\n_____________________________________________________________________________________________________\r\nAlso, in the create training dataset section, I am unable to run the line of code “deeplabcut.cropimagesandlabels(path_config_file, userfeedback=True)” without encountering an error:\r\n\r\n_____________________________________________________________________________________________________\r\nDo you want to crop frames for folder: /content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/labeled-data/FST 5_22_18 ?\r\n(yes/no):yes\r\n25%|██▌ | 5/20 [00:18<00:54, 3.62s/it]/usr/local/lib/python3.6/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py:364: UserWarning: /content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/labeled-data/FST 5_22_18_cropped/img04216c2.png is a low contrast image\r\nio.imsave(cropppedimgname, frame[y0:y1, x0:x1])\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py:364: UserWarning: /content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/labeled-data/FST 5_22_18_cropped/img04216c4.png is a low contrast image\r\nio.imsave(cropppedimgname, frame[y0:y1, x0:x1])\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py:364: UserWarning: /content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/labeled-data/FST 5_22_18_cropped/img04216c6.png is a low contrast image\r\nio.imsave(cropppedimgname, frame[y0:y1, x0:x1])\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py:364: UserWarning: /content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/labeled-data/FST 5_22_18_cropped/img04216c8.png is a low contrast image\r\nio.imsave(cropppedimgname, frame[y0:y1, x0:x1])\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py:364: UserWarning: /content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/labeled-data/FST 5_22_18_cropped/img04216c9.png is a low contrast image\r\nio.imsave(cropppedimgname, frame[y0:y1, x0:x1])\r\n100%|██████████| 20/20 [01:14<00:00, 3.74s/it]\r\nKeyError Traceback (most recent call last)\r\nin ()\r\n----> 1 deeplabcut.cropimagesandlabels(path_config_file, userfeedback=True)\r\n2\r\n3 #if you labeled on Windows, please set the windows2linux=True:\r\n4 deeplabcut.create_multianimaltraining_dataset(path_config_file, windows2linux=False)\r\n\r\n1 frames\r\n/usr/local/lib/python3.6/dist-packages/ruamel/yaml/comments.py in getitem(self, key)\r\n751 # type: (Any) -> Any\r\n752 try:\r\n–> 753 return ordereddict.getitem(self, key)\r\n754 except KeyError:\r\n755 for merged in getattr(self, merge_attrib, ):\r\n\r\nKeyError: ‘/content/drive/My Drive/FST52218 TEST DLC-Nicole Lookfong-2020-09-24/videos\\FST 5_22_18.MP4’\r\n_____________________________________________________________________________________________________\r\n\r\nI have been told that the issue could be that because I labeled on Windows that I need to convert to Linux for it to run on Colab. However I run this step every time, so this is not the issue: \r\n“deeplabcut.create_multianimaltraining_dataset(path_config_file, windows2linux=True)”\r\n\r\nIn addition, when I run cropping and the training on just my computer, without Colab, I have no errors and training proceeds as normal. However the training is incredibly slow and does not go at the speed I need it to given my hardware limitations.\r\n\r\nAlso, I am running what I believe to be the latest version of deeplabcut which I believe is 2.2.b8.\r\n\r\nAny help would be appreciated. Let me know if you need more information.","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/931/timeline","performed_via_github_app":null,"state_reason":"completed"}