{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1352","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1352/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1352/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1352/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1352","id":929554626,"node_id":"MDU6SXNzdWU5Mjk1NTQ2MjY=","number":1352,"title":"Training model with Pairwise loss raises KeyError accessing pairwise_targets object Batch","user":{"login":"aiporre","id":11966855,"node_id":"MDQ6VXNlcjExOTY2ODU1","avatar_url":"https://avatars.githubusercontent.com/u/11966855?v=4","gravatar_id":"","url":"https://api.github.com/users/aiporre","html_url":"https://github.com/aiporre","followers_url":"https://api.github.com/users/aiporre/followers","following_url":"https://api.github.com/users/aiporre/following{/other_user}","gists_url":"https://api.github.com/users/aiporre/gists{/gist_id}","starred_url":"https://api.github.com/users/aiporre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiporre/subscriptions","organizations_url":"https://api.github.com/users/aiporre/orgs","repos_url":"https://api.github.com/users/aiporre/repos","events_url":"https://api.github.com/users/aiporre/events{/privacy}","received_events_url":"https://api.github.com/users/aiporre/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-06-24T19:37:55Z","updated_at":"2021-06-24T21:39:28Z","closed_at":"2021-06-24T21:39:28Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"First at all, thank you very much for the incredible work!\r\n\r\n\r\n**Describe the bug**\r\nBatch variable is list and fails KeyError is rised at line `deeplabcut\\pose_estimation_tensorflow\\nnet\\pose_net.py  at  line 311, in train pairwise_targets = batch[Batch.pairwise_targets]`\r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: [e.g. Windows10, MacOS version, Linux version, etc.]\r\n - DeepLabCut Version [e.g. 22] (please check with ``import deeplabcut``, ``deeplabcut.__version__``)\r\n - DeepLabCut mode, i.e. single animal tracking, multi-animal tracking, 3D tracking.\r\n - GPU TYPE: (or CPU only)?\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior, i.e.:\r\n\r\n\r\n 1. training a model with single-animal. \r\n 2. Defined a skeleton on the `config.yaml`. I set the flags of in the `pose_cfg.yaml` like:\r\n\r\n<details><summary>pose_cfg.yaml</summary><p>\r\n\r\n```bash\r\npairwise_huber_loss: true\r\npairwise_predict: true\r\npartaffinityfield_predict: true\r\n```\r\n</p></details>\r\n\r\n 3. I have a KeyError:\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 886, in onTrainNetwork\r\n    saveiters=pose_config['save_iters'])\r\n  File \"C:\\Users\\XYZ\\Anaconda3\\envs\\xyz\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\training.py\", line 193, in train_network\r\n    raise e\r\n  File \"C:\\Users\\XYZ\\Anaconda3\\envs\\xyz\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\training.py\", line 189, in train_network\r\n    allow_growth=allow_growth,\r\n  File \"C:\\Users\\XYZ\\Anaconda3\\envs\\xyz\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\train.py\", line 178, in train\r\n    losses = pose_net(cfg).train(batch)\r\n  File \"C:\\Users\\XYZ\\Anaconda3\\envs\\xyz\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\nnet\\pose_net.py\", line 311, in train\r\n    pairwise_targets = batch[Batch.pairwise_targets]\r\nKeyError: <Batch.pairwise_targets: 5>\r\n```\r\n</p></details>\r\n\r\n\r\n\r\nIf I print Batch, I get a list:\r\n\r\n<details><summary>My Print</summary><p>\r\n\r\n```python \r\n> print(''+++++>>>>\", list(Batch))\r\nOUTS:\r\n+++++>>>> [<Batch.inputs: 0>, <Batch.part_score_targets: 1>, <Batch.part_score_weights: 2>, <Batch.locref_targets: 3>, <Batch.locref_mask: 4>, <Batch.pairwise_targets: 5>, <Batch.pairwise_mask: 6>, <Batch.data_item: 7>]\r\n> print(\"+++++>>>>\", Batch)\r\nOUTS:\r\n+++++>>>> <enum 'Batch'>\r\n```\r\n</p></details>\r\n\r\n**Expected behavior**\r\nMaybe read the element create object attribute..\r\n\r\n**Screenshots**\r\nNA\r\n**Additional context**\r\nNA\r\n","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1352/timeline","performed_via_github_app":null,"state_reason":"completed"}