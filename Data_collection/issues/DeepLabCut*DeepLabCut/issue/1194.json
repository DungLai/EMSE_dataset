{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1194","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1194/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1194/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1194/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1194","id":860663298,"node_id":"MDU6SXNzdWU4NjA2NjMyOTg=","number":1194,"title":"deeplabcut.extract_outlier_frames error","user":{"login":"IvanHalen86","id":17021319,"node_id":"MDQ6VXNlcjE3MDIxMzE5","avatar_url":"https://avatars.githubusercontent.com/u/17021319?v=4","gravatar_id":"","url":"https://api.github.com/users/IvanHalen86","html_url":"https://github.com/IvanHalen86","followers_url":"https://api.github.com/users/IvanHalen86/followers","following_url":"https://api.github.com/users/IvanHalen86/following{/other_user}","gists_url":"https://api.github.com/users/IvanHalen86/gists{/gist_id}","starred_url":"https://api.github.com/users/IvanHalen86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IvanHalen86/subscriptions","organizations_url":"https://api.github.com/users/IvanHalen86/orgs","repos_url":"https://api.github.com/users/IvanHalen86/repos","events_url":"https://api.github.com/users/IvanHalen86/events{/privacy}","received_events_url":"https://api.github.com/users/IvanHalen86/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-18T13:18:51Z","updated_at":"2021-04-18T20:59:42Z","closed_at":"2021-04-18T20:59:11Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nI just run the deeplabcut.extract_outlier_frames(yaml_file_path,['video_path']) to refine my labels but i got an error (see below). \r\nAll the previous steps (extract frames, label frames, training) and next steps (deeplabcut.analyze_videos, deeplabcut.create_labeled_video) are working perfectly. \r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: Windows10\r\n - DeepLabCut Version: 2.1.5.2\r\n - DeepLabCut mode: 2D tracking\r\n\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\n\r\ndeeplabcut.extract_outlier_frames(path_config,[my video path])\r\nMethod  jump  found  30  putative outlier frames.\r\nDo you want to proceed with extracting  20  of those?\r\nIf this list is very large, perhaps consider changing the paramters (start, stop, epsilon, comparisonbodyparts) or use a different method.\r\nyes/noyes\r\nFrames from video camera-1-003_30_350_2_013  already extracted (more will be added)!\r\nLoading video...\r\nDuration of video [s]:  4.466666666666667 , recorded @  30.0 fps!\r\nOverall # of frames:  134 with (cropped) frame dimensions:\r\nKmeans-quantization based extracting of frames from 0.0  seconds to 4.47  seconds.\r\nExtracting and downsampling... 30  frames from the video.\r\n30it [00:00, 35.37it/s]\r\nKmeans clustering ... (this might take a while)\r\nC:\\Users\\volciclab-vr\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\sklearn\\cluster\\_kmeans.py:888: UserWarning: MiniBatchKMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can prevent it by setting batch_size >= 4096 or by setting the environment variable OMP_NUM_THREADS=1\r\n  f\"MiniBatchKMeans is known to have a memory leak on \"\r\nLet's select frames indices: [55, 118, 47, 52, 113, 50, 114, 46, 121, 116, 111, 49, 123, 56, 117, 109, 51, 122, 54, 119]\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-13-9b933cff94e0> in <module>\r\n----> 1 deeplabcut.extract_outlier_frames(path_config,[my_video_path],outlieralgorithm='jump')\r\n\r\n~\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\outlier_frames.py in extract_outlier_frames(config, videos, videotype, shuffle, trainingsetindex, outlieralgorithm, comparisonbodyparts, epsilon, p_bound, ARdegree, MAdegree, alpha, extractionalgorithm, automatic, cluster_resizewidth, cluster_color, opencv, savelabeled, destfolder)\r\n    189               if askuser=='y' or askuser=='yes' or askuser=='Ja' or askuser=='ha': # multilanguage support :)\r\n    190                   #Now extract from those Indices!\r\n--> 191                   ExtractFramesbasedonPreselection(Indices,extractionalgorithm,Dataframe,dataname,scorer,video,cfg,config,opencv,cluster_resizewidth,cluster_color,savelabeled)\r\n    192               else:\r\n    193                   print(\"Nothing extracted, please change the parameters and start again...\")\r\n\r\n~\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\outlier_frames.py in ExtractFramesbasedonPreselection(Index, extractionalgorithm, Dataframe, dataname, scorer, video, cfg, config, opencv, cluster_resizewidth, cluster_color, savelabeled)\r\n    366     if len(frames2pick)>0:\r\n    367         #Dataframe = pd.read_hdf(os.path.join(videofolder,dataname+'.h5'))\r\n--> 368         DF = Dataframe.ix[frames2pick]\r\n    369         DF.index=[os.path.join('labeled-data', vname,\"img\"+str(index).zfill(strwidth)+\".png\") for index in DF.index] #exchange index number by file names.\r\n    370\r\n\r\n~\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\pandas\\core\\generic.py in __getattr__(self, name)\r\n   5139             if self._info_axis._can_hold_identifiers_and_holds_name(name):\r\n   5140                 return self[name]\r\n-> 5141             return object.__getattribute__(self, name)\r\n   5142\r\n   5143     def __setattr__(self, name: str, value) -> None:\r\n\r\nAttributeError: 'DataFrame' object has no attribute 'ix'\r\n\r\n```\r\n</p></details>\r\n","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1194/timeline","performed_via_github_app":null,"state_reason":"completed"}