{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1266","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1266/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1266/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1266/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1266","id":898794566,"node_id":"MDU6SXNzdWU4OTg3OTQ1NjY=","number":1266,"title":"maDLC number of individuals mismatch with config in refine_labels","user":{"login":"backyardbiomech","id":9662673,"node_id":"MDQ6VXNlcjk2NjI2NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9662673?v=4","gravatar_id":"","url":"https://api.github.com/users/backyardbiomech","html_url":"https://github.com/backyardbiomech","followers_url":"https://api.github.com/users/backyardbiomech/followers","following_url":"https://api.github.com/users/backyardbiomech/following{/other_user}","gists_url":"https://api.github.com/users/backyardbiomech/gists{/gist_id}","starred_url":"https://api.github.com/users/backyardbiomech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/backyardbiomech/subscriptions","organizations_url":"https://api.github.com/users/backyardbiomech/orgs","repos_url":"https://api.github.com/users/backyardbiomech/repos","events_url":"https://api.github.com/users/backyardbiomech/events{/privacy}","received_events_url":"https://api.github.com/users/backyardbiomech/received_events","type":"User","site_admin":false},"labels":[{"id":880550034,"node_id":"MDU6TGFiZWw4ODA1NTAwMzQ=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-05-22T12:37:18Z","updated_at":"2022-04-24T12:51:56Z","closed_at":"2021-05-25T14:57:46Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"When loading individual names, the `refine_labels` gui looks at the number of individuals in the config file, but when the number of animals has been set lower than that number to create tracks, loading the machine labels generates a key error.\r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: Windows10\r\n - DeepLabCut Version: 2.2rc1\r\n - DeepLabCut mode: maDLC, GUI and jupyter\r\n\r\n**To Reproduce**\r\nIn my config file, I have three individuals:\r\n```\r\nindividuals: \r\n- ind1 \r\n- ind2 \r\n- ind3\r\n```\r\n\r\nFor a specific set of videos, there are only 2 animals, so I set that in the GUI before creating tracks, and then I extract outliers.\r\n\r\nWhen selecting the relevant `machinelabels` file in the refine labels GUI, I get: \r\n```\r\nKeyError: 'ind3'\r\n```\r\nSee full error:\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n\r\n```python\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\indexes\\base.py\", line 3080, in get_loc\r\n    return self._engine.get_loc(casted_key)\r\n  File \"pandas\\_libs\\index.pyx\", line 70, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas\\_libs\\index.pyx\", line 101, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas\\_libs\\hashtable_class_helper.pxi\", line 4554, in pandas._libs.hashtable.PyObjectHashTable.get_item\r\n  File \"pandas\\_libs\\hashtable_class_helper.pxi\", line 4562, in pandas._libs.hashtable.PyObjectHashTable.get_item\r\nKeyError: 'ind3'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\deeplabcut\\gui\\multiple_individuals_refinement_toolbox.py\", line 499, in browseDir\r\n    MainFrame.plot(self, self.img)\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\deeplabcut\\gui\\multiple_individuals_refinement_toolbox.py\", line 1051, in plot\r\n    self.Dataframe[self.scorer][ind][bp][\"x\"].values[self.iter],\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\frame.py\", line 3023, in __getitem__\r\n    return self._getitem_multilevel(key)\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\frame.py\", line 3074, in _getitem_multilevel\r\n    loc = self.columns.get_loc(key)\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\indexes\\multi.py\", line 2876, in get_loc\r\n    loc = self._get_level_indexer(key, level=0)\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\indexes\\multi.py\", line 3158, in _get_level_indexer\r\n    idx = self._get_loc_single_level_index(level_index, key)\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\indexes\\multi.py\", line 2809, in _get_loc_single_level_index\r\n    return level_index.get_loc(key)\r\n  File \"C:\\Users\\jacksonbe3\\Miniconda3\\envs\\dlc22\\lib\\site-packages\\pandas\\core\\indexes\\base.py\", line 3082, in get_loc\r\n    raise KeyError(key) from err\r\nKeyError: 'ind3'\r\n\r\n```\r\n</p></details>\r\n\r\nThis is quickly avoided for now by editing the config file, but that is not ideal. \r\n\r\n","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1266/timeline","performed_via_github_app":null,"state_reason":"completed"}