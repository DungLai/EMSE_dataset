{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1726","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1726/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1726/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1726/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1726","id":1170009582,"node_id":"I_kwDOB5BM6c5FvO3u","number":1726,"title":"Parallel progress bars for `make_labeled_video`","user":{"login":"sneakers-the-rat","id":12961499,"node_id":"MDQ6VXNlcjEyOTYxNDk5","avatar_url":"https://avatars.githubusercontent.com/u/12961499?v=4","gravatar_id":"","url":"https://api.github.com/users/sneakers-the-rat","html_url":"https://github.com/sneakers-the-rat","followers_url":"https://api.github.com/users/sneakers-the-rat/followers","following_url":"https://api.github.com/users/sneakers-the-rat/following{/other_user}","gists_url":"https://api.github.com/users/sneakers-the-rat/gists{/gist_id}","starred_url":"https://api.github.com/users/sneakers-the-rat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sneakers-the-rat/subscriptions","organizations_url":"https://api.github.com/users/sneakers-the-rat/orgs","repos_url":"https://api.github.com/users/sneakers-the-rat/repos","events_url":"https://api.github.com/users/sneakers-the-rat/events{/privacy}","received_events_url":"https://api.github.com/users/sneakers-the-rat/received_events","type":"User","site_admin":false},"labels":[{"id":880550036,"node_id":"MDU6TGFiZWw4ODA1NTAwMzY=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1019981644,"node_id":"MDU6TGFiZWwxMDE5OTgxNjQ0","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/contributions-welcome","name":"contributions-welcome","color":"0de065","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"assignees":[{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2022-03-15T18:03:09Z","updated_at":"2022-07-19T14:29:16Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nI'm sitting here with the lab computer just in my peripheral vision and my labmate is analyzing some videos and the progress bar is flickering badly and it is distracting me. I think it would be nice to have progress bars for multiple processes display all at once instead of overlapping\r\n\r\n**Describe the solution you'd like**\r\n\r\nUnless there's something I'm missing, it would take\r\n* setting a `Lock` for tqdm when the pool is initialized here https://github.com/DeepLabCut/DeepLabCut/blob/4a653bb9203691fa81a024bf6d3d9c6ad0660d72/deeplabcut/utils/make_labeled_video.py#L517\r\n* identifying the process ID (or set as `0` when not run from `multiprocessing.Pool`) in the inner method that calls the progress bar\r\n* setting that as the `position`\r\n\r\nHere's a MWE:\r\n\r\n```python\r\nimport multiprocessing as mp\r\nimport os\r\nfrom time import sleep\r\nimport random\r\nfrom tqdm.auto import tqdm, trange\r\n\r\n\r\ndef regular_pbar(idk):\r\n    speed = random.random()*0.1\r\n    for i in trange(100, leave=False):\r\n        sleep(speed)\r\n\r\ndef parallel_pbar(whatevs):\r\n    speed = random.random()*0.1\r\n    proc = mp.current_process()\r\n    id = proc._identity[0]-1\r\n\r\n    for i in trange(100, \r\n        position=id,\r\n        desc=f\"Process {id:02d}\",\r\n        leave=False):\r\n        sleep(speed)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    \r\n    print('-'*20)\r\n    print('parallel pbars')\r\n    with mp.Pool(\r\n            16, \r\n            initializer=tqdm.set_lock,\r\n            initargs=(mp.Lock(),)) as pool:\r\n        pool.map(parallel_pbar, range(16))\r\n\r\n    print(\"\\x1b[2J\") \r\n    print('-'*20)\r\n    print('regular pbars')\r\n    with mp.Pool(16) as pool:\r\n        pool.map(regular_pbar, range(16))\r\n\r\n```\r\n\r\nand here's how that looks:\r\n\r\n![tqdm_paralell](https://user-images.githubusercontent.com/12961499/158442638-3f7e4b7d-2504-4680-822d-0ca33ba4bcae.gif)\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1726/reactions","total_count":3,"+1":2,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1726/timeline","performed_via_github_app":null,"state_reason":null}