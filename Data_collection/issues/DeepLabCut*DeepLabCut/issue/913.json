{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/913","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/913/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/913/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/913/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/913","id":704706789,"node_id":"MDU6SXNzdWU3MDQ3MDY3ODk=","number":913,"title":"analyze_videos causes ValueError","user":{"login":"shinhs0506","id":51249639,"node_id":"MDQ6VXNlcjUxMjQ5NjM5","avatar_url":"https://avatars.githubusercontent.com/u/51249639?v=4","gravatar_id":"","url":"https://api.github.com/users/shinhs0506","html_url":"https://github.com/shinhs0506","followers_url":"https://api.github.com/users/shinhs0506/followers","following_url":"https://api.github.com/users/shinhs0506/following{/other_user}","gists_url":"https://api.github.com/users/shinhs0506/gists{/gist_id}","starred_url":"https://api.github.com/users/shinhs0506/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shinhs0506/subscriptions","organizations_url":"https://api.github.com/users/shinhs0506/orgs","repos_url":"https://api.github.com/users/shinhs0506/repos","events_url":"https://api.github.com/users/shinhs0506/events{/privacy}","received_events_url":"https://api.github.com/users/shinhs0506/received_events","type":"User","site_admin":false},"labels":[{"id":1313079487,"node_id":"MDU6TGFiZWwxMzEzMDc5NDg3","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/howtousedlc","name":"howtousedlc","color":"a1b3f4","default":false,"description":"issue regarding the use of DeepLabCut"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-09-18T23:21:33Z","updated_at":"2020-10-02T09:03:05Z","closed_at":"2020-10-02T09:03:05Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nrunning analyze_videos causes ValueError\r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: Ubuntu 18.04\r\n - DeepLabCut Version [2.1.8.2]\r\n - Browser, [Firefox, using Jupyter]\r\n \r\n**To Reproduce**\r\nSteps to reproduce the behavior, i.e.:\r\nI simply followed the guide on the GitHub page\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\n\r\ndeeplabcut.analyze_network(config_path, video_paths, save_frames=True)\r\n\r\nValueError                                Traceback (most recent call last)\r\n~/anaconda3/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/gui/analyze_videos.py in analyze_videos(self, event)\r\n    262         deeplabcut.analyze_videos(self.config, self.filelist, videotype=self.videotype.GetValue(), shuffle=shuffle,\r\n    263                                   trainingsetindex=trainingsetindex, gputouse=None, save_as_csv=save_as_csv,\r\n--> 264                                   destfolder=self.destfolder, crop=crop, dynamic=dynamic)\r\n    265         if self.filter.GetStringSelection() == \"Yes\":\r\n    266             deeplabcut.filterpredictions(self.config, self.filelist, videotype=self.videotype.GetValue(), shuffle=shuffle, trainingsetindex=trainingsetindex, filtertype='median', windowlength=5, p_bound=0.001, ARdegree=3, MAdegree=1, alpha=0.01, save_as_csv=True, destfolder=self.destfolder)\r\n\r\n~/anaconda3/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/predict_videos.py in analyze_videos(config, videos, videotype, shuffle, trainingsetindex, gputouse, save_as_csv, destfolder, batchsize, crop, get_nframesfrommetadata, TFGPUinference, dynamic)\r\n    218         #looping over videos\r\n    219         for video in Videos:\r\n--> 220             DLCscorer=AnalyzeVideo(video,DLCscorer,DLCscorerlegacy,trainFraction,cfg,dlc_cfg,sess,inputs, outputs,pdindex,save_as_csv, destfolder,TFGPUinference,dynamic)\r\n    221 \r\n    222         os.chdir(str(start_path))\r\n\r\n~/anaconda3/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/predict_videos.py in AnalyzeVideo(video, DLCscorer, DLCscorerlegacy, trainFraction, cfg, dlc_cfg, sess, inputs, outputs, pdindex, save_as_csv, destfolder, TFGPUinference, dynamic)\r\n    496             if int(dlc_cfg[\"batch_size\"])>1:\r\n    497                 if TFGPUinference:\r\n--> 498                     PredictedData,nframes=GetPoseF_GTF(cfg,dlc_cfg, sess, inputs, outputs,cap,nframes,int(dlc_cfg[\"batch_size\"]))\r\n    499                 else:\r\n    500                     PredictedData,nframes=GetPoseF(cfg,dlc_cfg, sess, inputs, outputs,cap,nframes,int(dlc_cfg[\"batch_size\"]))\r\n\r\n~/anaconda3/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/predict_videos.py in GetPoseF_GTF(cfg, dlc_cfg, sess, inputs, outputs, cap, nframes, batchsize)\r\n    380                     pose[:, [0,1,2]] = pose[:, [1,0,2]] #change order to have x,y,confidence\r\n    381                     pose=np.reshape(pose,(batchsize,-1)) #bring into batchsize times x,y,conf etc.\r\n--> 382                     PredictedData[batch_num*batchsize:(batch_num+1)*batchsize, :] = pose\r\n    383 \r\n    384                     batch_ind = 0\r\n\r\nValueError: could not broadcast input array from shape (8,12) into shape (3,12)\r\n\r\n\r\n```\r\n</p></details>\r\n\r\n\r\n\r\n\r\n**Screenshots**\r\n![Screen Shot 2020-09-17 at 11 43 19 AM](https://user-images.githubusercontent.com/51249639/93652656-a7136e80-f9ca-11ea-9ef2-84e5c7579fc9.png)\r\n\r\n\r\n**Additional context**\r\nThe whole workflow was working just fine, but started having this problem since yesterday. No upgrades done in-between.\r\nNOTE: same thing happens when using the GUI. Only thing I touched was maxiteration=2000 and saveiteration=1000. Other than that, just simply clicked 'okay' \r\n","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/913/timeline","performed_via_github_app":null,"state_reason":"completed"}