{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1978","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1978/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1978/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1978/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1978","id":1368449131,"node_id":"I_kwDOB5BM6c5RkOBr","number":1978,"title":"KeyError: 'No object named h5_store in the file'","user":{"login":"Stakwhy","id":32238243,"node_id":"MDQ6VXNlcjMyMjM4MjQz","avatar_url":"https://avatars.githubusercontent.com/u/32238243?v=4","gravatar_id":"","url":"https://api.github.com/users/Stakwhy","html_url":"https://github.com/Stakwhy","followers_url":"https://api.github.com/users/Stakwhy/followers","following_url":"https://api.github.com/users/Stakwhy/following{/other_user}","gists_url":"https://api.github.com/users/Stakwhy/gists{/gist_id}","starred_url":"https://api.github.com/users/Stakwhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stakwhy/subscriptions","organizations_url":"https://api.github.com/users/Stakwhy/orgs","repos_url":"https://api.github.com/users/Stakwhy/repos","events_url":"https://api.github.com/users/Stakwhy/events{/privacy}","received_events_url":"https://api.github.com/users/Stakwhy/received_events","type":"User","site_admin":false},"labels":[{"id":1313079487,"node_id":"MDU6TGFiZWwxMzEzMDc5NDg3","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/howtousedlc","name":"howtousedlc","color":"a1b3f4","default":false,"description":"issue regarding the use of DeepLabCut"}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-09-10T01:18:18Z","updated_at":"2022-09-12T07:10:08Z","closed_at":"2022-09-12T07:09:50Z","author_association":"NONE","active_lock_reason":null,"body":"Question:\r\nI read the HDF file appear wrong\r\n\r\nSeek help:\r\nHow to solve the error of success is to use df. Resample data sorting?\r\n\r\ncode:\r\nimport pandas as pd\r\nimport os\r\n\r\npd.set_option('expand_frame_repr', False)  # 当列太多时显示完整\r\n\r\n\r\n# =====将数据存入hdf文件\r\n# 批量读取文件名称\r\nfile_list = []\r\n# 存储csv文件的文件夹路径\r\nfile_location = r'C:\\Users\\Administrator\\Desktop\\python\\coin_quant_class_2022\\data\\class6\\BITFINEX\\EOSUSD'\r\n\r\nfor root, dirs, files in os.walk(file_location):\r\n    for filename in files:\r\n        if filename.endswith('.csv'):\r\n            file_path = os.path.join(root, filename)\r\n            file_path = os.path.abspath(file_path)\r\n            file_list.append([filename, file_path])\r\n\r\n# 创建hdf文件\r\nh5_store = pd.HDFStore(\r\n    r'C:\\Users\\Administrator\\Desktop\\python\\coin_quant_class_2022\\data\\class6\\BITFINEX\\eos_1min_data_来源HSD保存数据.h5',\r\n    mode='w',\r\n    key='h5_store'\r\n)\r\n\r\n# 批量导入并且存储数据\r\nfor filename, file_path in sorted(file_list):\r\n    # BITFINEX_EOSUSD_20170701_1T.csv\r\n    date = filename.split('_')[2]\r\n    print(date, filename, file_path)\r\n    df = pd.read_csv(file_path, encoding='gbk', skiprows=1, parse_dates=['candle_begin_time'])\r\n\r\n    # 存储数据到hdf\r\n    h5_store['eos_' + date] = df.iloc[:100]\r\n\r\n# 关闭hdf文件\r\nh5_store.close()\r\n\r\n# =====读取hdf数据\r\n# 创建hdf文件\r\nh5_store = pd.HDFStore(\r\n    r'C:\\Users\\Administrator\\Desktop\\python\\coin_quant_class_2022\\data\\class6\\BITFINEX\\eos_1min_data_来源HSD保存数据.h5',\r\n    mode='r',\r\n    key='h5_store'\r\n)\r\n\r\n\r\n**The following generation output when there is a problem**\r\n# === 从hdf中读取1分钟数据\r\nhdf_hdf_path = r'C:\\Users\\Administrator\\Desktop\\python\\coin_quant_class_2022\\data\\class6\\BITFINEX\\eos_1min_data_来源HSD保存数据.h5'\r\n\r\ndf = pd.read_hdf(hdf_hdf_path, key='h5_store', mode='r')\r\n\r\n# === 1min k线数据转换为5min k线数据\r\nrule_type = '5T'\r\nperiod_df = df.resample(rule=rule_type, on='candle_begin_time', base=0, label='left', closed='left').agg(\r\n    {\r\n        'open': 'first',\r\n        'high': 'max',\r\n        'low': 'min',\r\n        'close': 'last',\r\n        'volume': 'sum',\r\n    }\r\n)\r\n\r\noutput：\r\n\r\nKeyError: 'No object named h5_store in the file'\r\n","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1978/timeline","performed_via_github_app":null,"state_reason":"completed"}