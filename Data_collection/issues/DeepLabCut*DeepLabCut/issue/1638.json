{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1638","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1638/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1638/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1638/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1638","id":1101466105,"node_id":"I_kwDOB5BM6c5Bpwn5","number":1638,"title":"ZeroDivisionError: division by zero at covert to tracklets","user":{"login":"Shachafbe","id":53897118,"node_id":"MDQ6VXNlcjUzODk3MTE4","avatar_url":"https://avatars.githubusercontent.com/u/53897118?v=4","gravatar_id":"","url":"https://api.github.com/users/Shachafbe","html_url":"https://github.com/Shachafbe","followers_url":"https://api.github.com/users/Shachafbe/followers","following_url":"https://api.github.com/users/Shachafbe/following{/other_user}","gists_url":"https://api.github.com/users/Shachafbe/gists{/gist_id}","starred_url":"https://api.github.com/users/Shachafbe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shachafbe/subscriptions","organizations_url":"https://api.github.com/users/Shachafbe/orgs","repos_url":"https://api.github.com/users/Shachafbe/repos","events_url":"https://api.github.com/users/Shachafbe/events{/privacy}","received_events_url":"https://api.github.com/users/Shachafbe/received_events","type":"User","site_admin":false},"labels":[{"id":880550034,"node_id":"MDU6TGFiZWw4ODA1NTAwMzQ=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2379991078,"node_id":"MDU6TGFiZWwyMzc5OTkxMDc4","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/maDLC","name":"maDLC","color":"96001b","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":15,"created_at":"2022-01-13T09:57:14Z","updated_at":"2022-05-03T06:33:14Z","closed_at":"2022-01-18T11:13:49Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nUsing DLC 2.2 (with GUI) on a multiple animals project I created using the former DLC version.\r\nUsed the same tagged frames but I run again the creation of training dataset, training and video analyzation with DLC 2.2. \r\nAll went fine and the video for checking detection was great. \r\nThen I tried to run convert to tracklets and received the error attached. \r\n\r\nI saw that there were similar issues but I could not find a relevant solution (I don't think that the file path is the problem- The video analysis went fine)\r\nMany thanks in advance for the help!\n\n### Operating System\n\nWindows 10\n\n### DeepLabCut version\n\nDLC version 2.2\n\n### DeepLabCut mode\n\nmulti animal\n\n### Device type\n\ngpu\n\n### Steps To Reproduce\n\nUsing the GUI: Run all steps untile covert to tracklets with yes for calibrate animal assembly and assemble with identity only. \n\n### Relevant log output\n\n```shell\nThe videos are analyzed. Time to assemble animals and track 'em...\r\n Call 'create_video_with_all_detections' to check multi-animal detection quality before tracking.\r\nIf the tracking is not satisfactory for some videos, consider expanding the training set. You can use the function 'extract_outlier_frames' to extract a few representative outlier frames.\r\nUsing snapshot-200000 for model F:\\thirdcolony\\colony3new-shachaf-2021-05-25\\dlc-models\\iteration-0\\colony3newMay25-trainset95shuffle5\r\nProcessing...  F:\\thirdcolony\\colony3new-shachaf-2021-05-25\\videos\\col3D1.mp4\r\nAnalyzing F:\\thirdcolony\\colony3new-shachaf-2021-05-25\\videos\\col3D1DLC_dlcrnetms5_colony3newMay25shuffle5_200000.h5\r\n37it [00:00, 961.51it/s]\r\n---------------------------------------------------------------------------\r\nZeroDivisionError                         Traceback (most recent call last)\r\n~\\.conda\\envs\\dlc 22\\lib\\site-packages\\deeplabcut\\gui\\analyze_videos.py in convert2_tracklets(self, event)\r\n    422             calibrate=self.calibrate.GetStringSelection() == \"Yes\",\r\n    423             window_size=self.winsize.GetValue(),\r\n--> 424             identity_only=self.identity_toggle.GetStringSelection() == \"Yes\",\r\n    425         )\r\n    426\r\n\r\n~\\.conda\\envs\\dlc 22\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\predict_videos.py in convert_detections2tracklets(config, videos, videotype, shuffle, trainingsetindex, overwrite, destfolder, ignore_bodyparts, inferencecfg, modelprefix, track_method, greedy, calibrate, window_size, identity_only)\r\n   1461                     )\r\n   1462                     ass.calibrate(train_data_file)\r\n-> 1463                 ass.assemble()\r\n   1464                 ass.to_pickle(dataname.split(\".h5\")[0] + \"_assemblies.pickle\")\r\n   1465\r\n\r\n~\\.conda\\envs\\dlc 22\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\lib\\inferenceutils.py in assemble(self, chunk_size, n_processes)\r\n    751         if chunk_size == 0 or multiprocessing.get_start_method() == \"spawn\":\r\n    752             for i, data_dict in enumerate(tqdm(self)):\r\n--> 753                 assemblies, unique = self._assemble(data_dict, i)\r\n    754                 if assemblies:\r\n    755                     self.assemblies[i] = assemblies\r\n\r\n~\\.conda\\envs\\dlc 22\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\lib\\inferenceutils.py in _assemble(self, data_dict, ind_frame)\r\n    695             if self._kde is not None:\r\n    696                 scores = [\r\n--> 697                     -self.calc_assembly_mahalanobis_dist(ass) for ass in assemblies\r\n    698                 ]\r\n    699             else:\r\n\r\n~\\.conda\\envs\\dlc 22\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\lib\\inferenceutils.py in <listcomp>(.0)\r\n    695             if self._kde is not None:\r\n    696                 scores = [\r\n--> 697                     -self.calc_assembly_mahalanobis_dist(ass) for ass in assemblies\r\n    698                 ]\r\n    699             else:\r\n\r\n~\\.conda\\envs\\dlc 22\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\lib\\inferenceutils.py in calc_assembly_mahalanobis_dist(self, assembly, return_proba, nan_policy)\r\n    304             inv_cov = self._kde.inv_cov[np.ix_(inds, inds)]\r\n    305             # Correct distance to account for missing observations\r\n--> 306             factor = self._kde.d / len(inds)\r\n    307         else:\r\n    308             # Alternatively, reduce contribution of missing values to the Mahalanobis\r\n\r\nZeroDivisionError: division by zero\n```\n\n\n### Anything else?\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1638/timeline","performed_via_github_app":null,"state_reason":"completed"}