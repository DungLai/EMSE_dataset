{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/775","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/775/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/775/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/775/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/775","id":647667779,"node_id":"MDU6SXNzdWU2NDc2Njc3Nzk=","number":775,"title":"Unable to convert raw tracks to h5","user":{"login":"Xiaoyu-Tong","id":55998514,"node_id":"MDQ6VXNlcjU1OTk4NTE0","avatar_url":"https://avatars.githubusercontent.com/u/55998514?v=4","gravatar_id":"","url":"https://api.github.com/users/Xiaoyu-Tong","html_url":"https://github.com/Xiaoyu-Tong","followers_url":"https://api.github.com/users/Xiaoyu-Tong/followers","following_url":"https://api.github.com/users/Xiaoyu-Tong/following{/other_user}","gists_url":"https://api.github.com/users/Xiaoyu-Tong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xiaoyu-Tong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xiaoyu-Tong/subscriptions","organizations_url":"https://api.github.com/users/Xiaoyu-Tong/orgs","repos_url":"https://api.github.com/users/Xiaoyu-Tong/repos","events_url":"https://api.github.com/users/Xiaoyu-Tong/events{/privacy}","received_events_url":"https://api.github.com/users/Xiaoyu-Tong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-06-29T21:03:33Z","updated_at":"2020-07-07T06:10:19Z","closed_at":"2020-06-30T09:37:46Z","author_association":"NONE","active_lock_reason":null,"body":"Thanks for opening this issue, and thanks for using DeepLabCut (we hope you are enjoying it ;). Please fill out the template completely, including the full \"traceback\" and input code that you ran to hit this error.\r\n\r\n**Your Operating system and DeepLabCut version**\r\n\r\nPlease state your operating system, env, and which version of DeepLabCut you are using.\r\nExample: Ubuntu 16.04 LTS, with an Anaconda Env, & DeepLabCut1.x or 2.x.\r\n\r\n_I was using Google Colab to analyze videos after trained my own model. I was using the code provided by your maDLC Jupyter notebook ( have tried both DLC 2.2b5 and 2.2b6. Neither of them worked)_\r\n\r\nPlease complete the following information about your system:\r\n\r\nOS: [e.g. MacOS, Windows 10, etc]\r\nDeepLabCut Version: [e.g. 2.2] (please check with import deeplabcut, deeplabcut.__version__)\r\nAnaconda env used:\r\n_N/A_\r\n\r\n**Describe the problem**\r\n\r\nA clear and concise description of what the problem is.\r\n\r\nI could not convert raw tracks to h5 using the Jupyter notebook you provided. After done training my own maDLC model, I tried to analyze an example video. First, I ran deeplabcut.analyze_videos, which gave me 2 pickle files and nothing else (no h5/csv files). Pickles were meta.pickle and full.pickle. I could generate videos with all detections using deeplabcut.create_video_with_all_detections. But then when I tried to generate videos with identities, the function deeplabcut.convert_raw_tracks_to_h5 failed with an error message of KeyError: 'header'.\r\n\r\nPlease place code inside this:\r\n\r\nThis is the Jupyter notebook I was using: https://colab.research.google.com/drive/1omLcDLjn49f61Xs5R3_bubNcnypj9kCw#scrollTo=a6izVWX8sdzL\r\n\r\n[Please copy/paste the full terminal output of the error here!!!]\r\n\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n<ipython-input-6-3acda52a2051> in <module>()\r\n      4 vid ='/content/drive/My Drive/2BM Videos/190912-FMfor2BM_8524_72040.mp4'\r\n      5 \r\n----> 6 deeplabcut.convert_raw_tracks_to_h5(path_config_file, picklefile)\r\n      7 #deeplabcut.filterpredictions(path_config_file,\r\n      8 #                                 videofile_path,\r\n\r\n2 frames\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/refine_training_dataset/tracklets.py in convert_raw_tracks_to_h5(config, tracks_pickle, output_name)\r\n   1071 def convert_raw_tracks_to_h5(config, tracks_pickle, output_name=\"\"):\r\n   1072     manager = TrackletManager(config, 0, 0)\r\n-> 1073     manager.load_tracklets_from_pickle(tracks_pickle)\r\n   1074     manager.save(output_name)\r\n\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/refine_training_dataset/tracklets.py in load_tracklets_from_pickle(self, filename, auto_fill)\r\n    330         with open(filename, \"rb\") as file:\r\n    331             tracklets = pickle.load(file)\r\n--> 332         self._load_tracklets(tracklets, auto_fill)\r\n    333         self._xy = self.xy.copy()\r\n    334 \r\n\r\n/usr/local/lib/python3.6/dist-packages/deeplabcut/refine_training_dataset/tracklets.py in _load_tracklets(self, tracklets, auto_fill)\r\n    171 \r\n    172     def _load_tracklets(self, tracklets, auto_fill):\r\n--> 173         header = tracklets.pop(\"header\")\r\n    174         self.scorer = header.get_level_values(\"scorer\").unique().to_list()\r\n    175         frames = sorted(\r\n\r\nKeyError: 'header'\r\n\r\n**How to Reproduce the problem**\r\nSteps to reproduce the behavior:\r\n1. Go to maDLC COLAB Jupyter notebook.\r\n2. Run deeplabcut.analyze_videos, create_video_with_all_detections, deeplabcut.convert_detections2tracklets (these 3 functions worked)\r\n3. Run deeplabcut.convert_raw_tracks_to_h5\r\n4. See error\r\n\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n\r\n**Additional context**\r\nPlease let me know if you need more information! I suspect this issue is relevant to DLC version. It is also possible that this issue comes from some unexpected error before training process.\r\n","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/775/timeline","performed_via_github_app":null,"state_reason":"completed"}