{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1854","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1854/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1854/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1854/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1854","id":1254479549,"node_id":"I_kwDOB5BM6c5Kxda9","number":1854,"title":"OSError: Tracklets are empty.","user":{"login":"diegosancarmen","id":101142209,"node_id":"U_kgDOBgdOwQ","avatar_url":"https://avatars.githubusercontent.com/u/101142209?v=4","gravatar_id":"","url":"https://api.github.com/users/diegosancarmen","html_url":"https://github.com/diegosancarmen","followers_url":"https://api.github.com/users/diegosancarmen/followers","following_url":"https://api.github.com/users/diegosancarmen/following{/other_user}","gists_url":"https://api.github.com/users/diegosancarmen/gists{/gist_id}","starred_url":"https://api.github.com/users/diegosancarmen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diegosancarmen/subscriptions","organizations_url":"https://api.github.com/users/diegosancarmen/orgs","repos_url":"https://api.github.com/users/diegosancarmen/repos","events_url":"https://api.github.com/users/diegosancarmen/events{/privacy}","received_events_url":"https://api.github.com/users/diegosancarmen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2022-05-31T22:29:26Z","updated_at":"2022-06-03T07:55:52Z","closed_at":"2022-06-03T07:55:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Is there an existing issue for this?\r\n\r\n- [x] I have searched the existing issues\r\n\r\n### Bug description\r\n\r\nI've previously run `deeplabcut.analyze_videos()` on these samples and they labeled with acceptable accuracy.  Now when I tried to run the function on the same videos I'm getting the tracklet error.\r\n\r\nI used `vid.check_integrity()` as referenced in the @jeylau comment in #982-- the videos aren't corrupt.\r\nI looked through all the github issue tickets related to this problem but none of them address the issue: as aforementioned, the videos are in working condition.\r\n\r\n### Operating System\r\n\r\nGoogle Colab\r\n\r\n### DeepLabCut version\r\n\r\n2.2.1\r\n\r\n### DeepLabCut mode\r\n\r\nsingle animal\r\n\r\n### Device type\r\n\r\nGoogle Colab Pro GPU\r\n\r\n### Steps To Reproduce\r\n\r\n```\r\ndeeplabcut.analyze_videos(path_config_file,videofile_path, videotype=VideoType, save_as_csv = True)\r\n```\r\n\r\n### Relevant log output\r\n\r\n```shell\r\nUsing snapshot-20000 for model /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/dlc-models/iteration-0/Trial9May23-trainset95shuffle1\r\nActivating extracting of PAFs\r\nAnalyzing all the videos in the directory...\r\nStarting to analyze %  /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/videos/FILE0595_C1_pre-aCSF_TrimA_Trim.mp4\r\nLoading  /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/videos/FILE0595_C1_pre-aCSF_TrimA_Trim.mp4\r\nDuration of video [s]:  30.27 , recorded with  30.0 fps!\r\nOverall # of frames:  908  found with (before cropping) frame dimensions:  1920 1080\r\nStarting to extract posture from the video(s) with batchsize: 8\r\n100%|██████████| 908/908 [01:35<00:00,  9.52it/s]\r\nVideo Analyzed. Saving results in /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/videos...\r\nUsing snapshot-20000 for model /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/dlc-models/iteration-0/Trial9May23-trainset95shuffle1\r\nProcessing...  /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/videos/FILE0595_C1_pre-aCSF_TrimA_Trim.mp4\r\nAnalyzing /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/videos/FILE0595_C1_pre-aCSF_TrimA_TrimDLC_resnet50_Trial9May23shuffle1_20000.h5\r\n100%|██████████| 908/908 [00:01<00:00, 678.29it/s]\r\n908it [00:00, 133934.52it/s]\r\nThe tracklets were created (i.e., under the hood deeplabcut.convert_detections2tracklets was run). Now you can 'refine_tracklets' in the GUI, or run 'deeplabcut.stitch_tracklets'.\r\nProcessing...  /content/drive/My Drive/DeepLabCut/Trial9B-JDC-2022-05-23/videos/FILE0595_C1_pre-aCSF_TrimA_Trim.mp4\r\n---------------------------------------------------------------------------\r\nOSError                                   Traceback (most recent call last)\r\n[<ipython-input-22-00093eb97f4f>](https://localhost:8080/#) in <module>()\r\n----> 1 deeplabcut.analyze_videos(path_config_file,videofile_path, videotype=VideoType, save_as_csv = True)\r\n\r\n4 frames\r\n[/usr/local/lib/python3.7/dist-packages/deeplabcut/pose_estimation_tensorflow/predict_videos.py](https://localhost:8080/#) in analyze_videos(config, videos, videotype, shuffle, trainingsetindex, gputouse, save_as_csv, destfolder, batchsize, cropping, TFGPUinference, dynamic, modelprefix, robust_nframes, allow_growth, use_shelve, auto_track, n_tracks, calibrate, identity_only, use_openvino)\r\n    587                         destfolder=destfolder,\r\n    588                         n_tracks=n_tracks,\r\n--> 589                         modelprefix=modelprefix,\r\n    590                     )\r\n    591         else:\r\n\r\n[/usr/local/lib/python3.7/dist-packages/deeplabcut/refine_training_dataset/stitch.py](https://localhost:8080/#) in stitch_tracklets(config_path, videos, videotype, shuffle, trainingsetindex, n_tracks, min_length, split_tracklets, prestitch_residuals, max_gap, weight_func, destfolder, modelprefix, track_method, output_name, transformer_checkpoint)\r\n   1157         try:\r\n   1158             stitcher = TrackletStitcher.from_pickle(\r\n-> 1159                 pickle_file, n_tracks, min_length, split_tracklets, prestitch_residuals\r\n   1160             )\r\n   1161             with_id = any(tracklet.identity != -1 for tracklet in stitcher)\r\n\r\n[/usr/local/lib/python3.7/dist-packages/deeplabcut/refine_training_dataset/stitch.py](https://localhost:8080/#) in from_pickle(cls, pickle_file, n_tracks, min_length, split_tracklets, prestitch_residuals)\r\n    508             tracklets = pickle.load(file)\r\n    509         class_ = cls.from_dict_of_dict(\r\n--> 510             tracklets, n_tracks, min_length, split_tracklets, prestitch_residuals\r\n    511         )\r\n    512         class_.filename = pickle_file\r\n\r\n[/usr/local/lib/python3.7/dist-packages/deeplabcut/refine_training_dataset/stitch.py](https://localhost:8080/#) in from_dict_of_dict(cls, dict_of_dict, n_tracks, min_length, split_tracklets, prestitch_residuals)\r\n    540                 tracklets.append(Tracklet(data, inds))\r\n    541         class_ = cls(\r\n--> 542             tracklets, n_tracks, min_length, split_tracklets, prestitch_residuals\r\n    543         )\r\n    544         class_.header = header\r\n\r\n[/usr/local/lib/python3.7/dist-packages/deeplabcut/refine_training_dataset/stitch.py](https://localhost:8080/#) in __init__(self, tracklets, n_tracks, min_length, split_tracklets, prestitch_residuals)\r\n    460 \r\n    461         if not len(self.tracklets):\r\n--> 462             raise IOError(\"Tracklets are empty.\")\r\n    463 \r\n    464         if prestitch_residuals:\r\n\r\nOSError: Tracklets are empty.\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\nI can provide a Google Drive folder with the pertinent files if needed.\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1854/timeline","performed_via_github_app":null,"state_reason":"completed"}