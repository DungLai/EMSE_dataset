{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1190","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1190/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1190/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1190/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1190","id":859246878,"node_id":"MDU6SXNzdWU4NTkyNDY4Nzg=","number":1190,"title":"Is it possible to redirect create_training_dataset to download pretrained datasets in alternate location?","user":{"login":"rdauria","id":10660664,"node_id":"MDQ6VXNlcjEwNjYwNjY0","avatar_url":"https://avatars.githubusercontent.com/u/10660664?v=4","gravatar_id":"","url":"https://api.github.com/users/rdauria","html_url":"https://github.com/rdauria","followers_url":"https://api.github.com/users/rdauria/followers","following_url":"https://api.github.com/users/rdauria/following{/other_user}","gists_url":"https://api.github.com/users/rdauria/gists{/gist_id}","starred_url":"https://api.github.com/users/rdauria/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdauria/subscriptions","organizations_url":"https://api.github.com/users/rdauria/orgs","repos_url":"https://api.github.com/users/rdauria/repos","events_url":"https://api.github.com/users/rdauria/events{/privacy}","received_events_url":"https://api.github.com/users/rdauria/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2021-04-15T21:04:41Z","updated_at":"2021-04-30T11:19:34Z","closed_at":"2021-04-30T11:19:34Z","author_association":"NONE","active_lock_reason":null,"body":"**Operating system and DeepLabCut version**\r\n\r\nCentOS  Linux release 7.9.2009, with an Anaconda Env, &  DeepLabCut 2.1.10.3\r\n\r\n**Description of the problem**\r\n\r\nWe would like to install deeplabcut as a conda environment in a centralized location for several users on a shared cluster. However I noticed, when testing the environment with the provided testscript.py, that the function create_training_dataset wants to donwload the pretrained data set within the conda environment:\r\n\r\n```$CONDA_ENV/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/models/pretrained```\r\n\r\nPlease place code inside this:\r\n\r\n<details><summary>Code output</summary><p>\r\n\r\npython3 testscript.py\r\n[...]\r\nCREATING TRAININGSET\r\nDownloading a ImageNet-pretrained model from http://download.tensorflow.org/models/resnet_v1_50_2016_08_28.tar.gz....\r\nTraceback (most recent call last):\r\n  File \"testscript.py\", line 121, in <module>\r\n    path_config_file, net_type=net_type, augmenter_type=augmenter_type\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py\", line 918, in create_training_dataset\r\n    net_type, Path(dlcparent_path), num_shuffles\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/utils/auxfun_models.py\", line 62, in Check4weights\r\n    Downloadweights(modeltype, model_path)\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/utils/auxfun_models.py\", line 88, in Downloadweights\r\n    tar.extractall(path=target_dir)\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/tarfile.py\", line 2002, in extractall\r\n    numeric_owner=numeric_owner)\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/tarfile.py\", line 2044, in extract\r\n    numeric_owner=numeric_owner)\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/tarfile.py\", line 2114, in _extract_member\r\n    self.makefile(tarinfo, targetpath)\r\n  File \"/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/tarfile.py\", line 2155, in makefile\r\n    with bltn_open(targetpath, \"wb\") as target:\r\nPermissionError: [Errno 13] Permission denied: '/u/local/apps/anaconda3/2020.11/envs/DLC-GPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/models/pretrained/resnet_v1_50.ckpt'\r\n\r\n\r\n</p></details>\r\n\r\n**Questions**\r\n\r\nIs there any way these preretrained model can be downloaded in the user $HOME? \r\n\r\nOr should we have each user just create their own conda env (which would be wasteful)? \r\n\r\nAlternatively could you suggest how to go about and prepopulate for the users all the locations where files needs to be downloaded and installed centrally?\r\n\r\nThanks,\r\n\r\nRD\r\n\r\n\r\n","closed_by":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1190/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1190/timeline","performed_via_github_app":null,"state_reason":"completed"}