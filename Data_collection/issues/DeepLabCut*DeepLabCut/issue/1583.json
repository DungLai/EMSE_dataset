{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1583","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1583/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1583/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1583/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1583","id":1056664692,"node_id":"I_kwDOB5BM6c4--2x0","number":1583,"title":"Import issue with headless and GUI usage on the same machine","user":{"login":"arawayrj","id":20631073,"node_id":"MDQ6VXNlcjIwNjMxMDcz","avatar_url":"https://avatars.githubusercontent.com/u/20631073?v=4","gravatar_id":"","url":"https://api.github.com/users/arawayrj","html_url":"https://github.com/arawayrj","followers_url":"https://api.github.com/users/arawayrj/followers","following_url":"https://api.github.com/users/arawayrj/following{/other_user}","gists_url":"https://api.github.com/users/arawayrj/gists{/gist_id}","starred_url":"https://api.github.com/users/arawayrj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arawayrj/subscriptions","organizations_url":"https://api.github.com/users/arawayrj/orgs","repos_url":"https://api.github.com/users/arawayrj/repos","events_url":"https://api.github.com/users/arawayrj/events{/privacy}","received_events_url":"https://api.github.com/users/arawayrj/received_events","type":"User","site_admin":false},"labels":[{"id":1313079487,"node_id":"MDU6TGFiZWwxMzEzMDc5NDg3","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/howtousedlc","name":"howtousedlc","color":"a1b3f4","default":false,"description":"issue regarding the use of DeepLabCut"}],"state":"closed","locked":false,"assignee":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"assignees":[{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2021-11-17T21:46:46Z","updated_at":"2021-11-25T16:37:01Z","closed_at":"2021-11-25T16:37:01Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Bug description\r\n\r\nWhen trying to import deeplabcut in an ipython session while connected over ssh, if wxPython is installed in the environment (since the machine is also used with a GUI), an error related to matplotlib's backend switching comes up since it is trying to load wxAgg but cannot since it is headless. Docs seem to say to set environment variable DLClight=True to force headless, but \\_\\_init\\_\\_.py only checks if wxPython is installed through a ModuleNotFoundError, so if wxPython is installed it will still try to use wxAgg regardless of whether DLClight is set, causing an error. \r\n\r\n### Operating System\r\n\r\nUbuntu 20.04\r\n\r\n### DeepLabCut version\r\n\r\n2.2.0.2\r\n\r\n### DeepLabCut mode\r\n\r\nsingle animal\r\n\r\n### Device type\r\n\r\nCPU: AMD Ryzen Threadripper PRO 3975WX\r\nGPU: nVidia Quadro RTX 5000\r\n\r\n### Steps To Reproduce\r\n\r\n1. Have deeplabcut and wxPython installed on Ubuntu\r\n2. SSH into machine\r\n3. Set DLClight using 'export DLClight=True'\r\n4. Try 'import deeplabcut' in ipython\r\n\r\n### Relevant log output\r\n\r\n```shell\r\n273         if (current_framework and required_framework\r\n    274                 and current_framework != required_framework):\r\n--> 275             raise ImportError(\r\n    276                 \"Cannot load backend {!r} which requires the {!r} interactive \"\r\n    277                 \"framework, as {!r} is currently running\".format(\r\n\r\nImportError: Cannot load backend 'WXAgg' which requires the 'wx' interactive framework, as 'headless' is currently running\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\nI was able to import after adding a check in \\_\\_init\\_\\_.py to see whether DLClight had been set before the try block for importing the graphical stuff\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1583/timeline","performed_via_github_app":null,"state_reason":"completed"}