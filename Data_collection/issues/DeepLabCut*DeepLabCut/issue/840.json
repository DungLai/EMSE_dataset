{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/840","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/840/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/840/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/840/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/840","id":673761405,"node_id":"MDU6SXNzdWU2NzM3NjE0MDU=","number":840,"title":"Letter 'c' in file name of labeled images results in no training set being generated (not using cropping)","user":{"login":"felixhol","id":18172105,"node_id":"MDQ6VXNlcjE4MTcyMTA1","avatar_url":"https://avatars.githubusercontent.com/u/18172105?v=4","gravatar_id":"","url":"https://api.github.com/users/felixhol","html_url":"https://github.com/felixhol","followers_url":"https://api.github.com/users/felixhol/followers","following_url":"https://api.github.com/users/felixhol/following{/other_user}","gists_url":"https://api.github.com/users/felixhol/gists{/gist_id}","starred_url":"https://api.github.com/users/felixhol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixhol/subscriptions","organizations_url":"https://api.github.com/users/felixhol/orgs","repos_url":"https://api.github.com/users/felixhol/repos","events_url":"https://api.github.com/users/felixhol/events{/privacy}","received_events_url":"https://api.github.com/users/felixhol/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2020-08-05T18:36:24Z","updated_at":"2020-11-16T14:06:34Z","closed_at":"2020-08-05T19:55:35Z","author_association":"NONE","active_lock_reason":null,"body":"_This issue may be due to non-standard use of DLC:_\r\nHaving a letter 'c' in the file name of all labeled images (when not using cropping) has as a result that no training set is being generated. This is due to the calling of filename.split(\"c\")[0] at line 107 and subsequently img_names = Data.index.map(strip_cropped_image_name).unique() at line 109 of multiple_individuals_trainingsetmanipulation.py \r\nWhen all images have a 'c' in the file name, len(img_names) = 1 resulting in all frames being assigned to the test set and none to the training set. This does not produce an error, yet it creates an empty training set. \r\n\r\nWork around:\r\nWhile it is easy to remove the letter 'c' from all filenames if one is aware of this issue before hand, this is cumbersome to run into after all frames have been labeled. A work around is changing the search string 'c' in filename.split(\"c\")[0], to something compatible with the file naming system a user may have. In order to make this compatible with cropimagesandlabels, one needs to change the new image name generated at line 361 of trainingsetmanipulation.py accordingly.\r\n\r\n\r\n- OS: Ubuntu 18.04 and macOS\r\n- DeepLabCut Version: 2.2b7\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior, i.e.:\r\n1. Create custom code to extract frames, have 'c' in file name. \r\n2. run deeplabcut.create_multianimaltraining_dataset(config_path)\r\n3. empty training set is generated. \r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\n\r\nimport os\r\nfrom pathlib import Path\r\nimport deeplabcut\r\n\r\nconfig_path = '/Users/felix/biteOscope/DLC_aedes/aedes-gefe-2020-07-23/config.yaml'\r\n\r\ndeeplabcut.create_multianimaltraining_dataset(config_path) \r\n\r\n\r\n```\r\n</p></details>\r\n\r\n\r\n**Expected behavior**\r\nI understand that this issue would not occur when extracting frames using the standard code, so this is likely not a problem for typical use cases. However, it would be nice if e.g. custom file names in the labeled frames would not result in issues downstream. \r\n\r\n\r\n**Additional context**\r\nI use custom code to extract frames as my data comes in image sequences (tiff's) instead of video files, which is currently not supported by extract_frames.\r\n","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/840/timeline","performed_via_github_app":null,"state_reason":"completed"}