{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/943","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/943/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/943/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/943/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/943","id":714744257,"node_id":"MDU6SXNzdWU3MTQ3NDQyNTc=","number":943,"title":"maDLC Refine Tracklets memory error","user":{"login":"Shachafbe","id":53897118,"node_id":"MDQ6VXNlcjUzODk3MTE4","avatar_url":"https://avatars.githubusercontent.com/u/53897118?v=4","gravatar_id":"","url":"https://api.github.com/users/Shachafbe","html_url":"https://github.com/Shachafbe","followers_url":"https://api.github.com/users/Shachafbe/followers","following_url":"https://api.github.com/users/Shachafbe/following{/other_user}","gists_url":"https://api.github.com/users/Shachafbe/gists{/gist_id}","starred_url":"https://api.github.com/users/Shachafbe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shachafbe/subscriptions","organizations_url":"https://api.github.com/users/Shachafbe/orgs","repos_url":"https://api.github.com/users/Shachafbe/repos","events_url":"https://api.github.com/users/Shachafbe/events{/privacy}","received_events_url":"https://api.github.com/users/Shachafbe/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-05T11:09:02Z","updated_at":"2020-10-07T11:31:49Z","closed_at":"2020-10-07T11:31:49Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there :)\r\nUsing maDLC 2.2b7, on windows with GeForce RTX 2080Ti GPU.\r\nI'm working on 8 animals with 6 body parts each.\r\nAt the beginning I worked on my big 12 hours video and it went super well, recognizing 8 fish after labeling only 20 frames (exciting!).  \r\nBut when I tried to run Refine Tracklets it didn't let me launch the GUI with the memory error below. \r\nI tried to analyze a shorter 1 hour movie but same message. \r\nIs there any parameter I should try to change or maybe I should reduce the amount of animals being tracked (if so, can I use the same labeled frames somehow?)\r\n\r\nThanks a lot in advance, \r\nand for this incredible tool!\r\n\r\n\r\n---------------------------------------------------------------------------\r\nMemoryError                               Traceback (most recent call last)\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\gui\\refine_tracklets.py in refine_tracklets(self, event)\r\n    272             min_tracklet_len=self.slider_track.GetValue(),\r\n    273             max_gap=self.slider_gap.GetValue(),\r\n--> 274             trail_len=self.length_track.GetValue(),\r\n    275         )\r\n    276         self.export.Enable()\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\tracklets.py in refine_tracklets(config, pickle_or_h5_file, video, min_swap_len, min_tracklet_len, max_gap, trail_len)\r\n   1120     manager = TrackletManager(config, min_swap_len, min_tracklet_len, max_gap)\r\n   1121     if pickle_or_h5_file.endswith(\"pickle\"):\r\n-> 1122         manager.load_tracklets_from_pickle(pickle_or_h5_file)\r\n   1123     else:\r\n   1124         manager.load_tracklets_from_hdf(pickle_or_h5_file)\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\tracklets.py in load_tracklets_from_pickle(self, filename, auto_fill)\r\n    330         with open(filename, \"rb\") as file:\r\n    331             tracklets = pickle.load(file)\r\n--> 332         self._load_tracklets(tracklets, auto_fill)\r\n    333         self._xy = self.xy.copy()\r\n    334\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\tracklets.py in _load_tracklets(self, tracklets, auto_fill)\r\n    203             completeness = nonempty.sum()\r\n    204             if completeness >= self.min_tracklet_len:\r\n--> 205                 is_single = np.isnan(to_fill[:, mask_multi]).all()\r\n    206                 if is_single:\r\n    207                     to_fill = to_fill[:, mask_single]\r\n\r\nMemoryError:\r\n---------------------------------------------------------------------------\r\nMemoryError                               Traceback (most recent call last)\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\gui\\refine_tracklets.py in refine_tracklets(self, event)\r\n    272             min_tracklet_len=self.slider_track.GetValue(),\r\n    273             max_gap=self.slider_gap.GetValue(),\r\n--> 274             trail_len=self.length_track.GetValue(),\r\n    275         )\r\n    276         self.export.Enable()\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\tracklets.py in refine_tracklets(config, pickle_or_h5_file, video, min_swap_len, min_tracklet_len, max_gap, trail_len)\r\n   1120     manager = TrackletManager(config, min_swap_len, min_tracklet_len, max_gap)\r\n   1121     if pickle_or_h5_file.endswith(\"pickle\"):\r\n-> 1122         manager.load_tracklets_from_pickle(pickle_or_h5_file)\r\n   1123     else:\r\n   1124         manager.load_tracklets_from_hdf(pickle_or_h5_file)\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\DLC-GPU1\\lib\\site-packages\\deeplabcut\\refine_training_dataset\\tracklets.py in load_tracklets_from_pickle(self, filename, auto_fill)\r\n    329         self.filename = filename\r\n    330         with open(filename, \"rb\") as file:\r\n--> 331             tracklets = pickle.load(file)\r\n    332         self._load_tracklets(tracklets, auto_fill)\r\n    333         self._xy = self.xy.copy()\r\n\r\nMemoryError:","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/943/timeline","performed_via_github_app":null,"state_reason":"completed"}