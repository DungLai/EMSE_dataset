{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1673","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1673/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1673/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1673/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1673","id":1126974595,"node_id":"I_kwDOB5BM6c5DLESD","number":1673,"title":"Error in creating training dataset after refining outliers","user":{"login":"anna-teruel","id":78961609,"node_id":"MDQ6VXNlcjc4OTYxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/78961609?v=4","gravatar_id":"","url":"https://api.github.com/users/anna-teruel","html_url":"https://github.com/anna-teruel","followers_url":"https://api.github.com/users/anna-teruel/followers","following_url":"https://api.github.com/users/anna-teruel/following{/other_user}","gists_url":"https://api.github.com/users/anna-teruel/gists{/gist_id}","starred_url":"https://api.github.com/users/anna-teruel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anna-teruel/subscriptions","organizations_url":"https://api.github.com/users/anna-teruel/orgs","repos_url":"https://api.github.com/users/anna-teruel/repos","events_url":"https://api.github.com/users/anna-teruel/events{/privacy}","received_events_url":"https://api.github.com/users/anna-teruel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},{"login":"intergalactic-mammoth","id":57266953,"node_id":"MDQ6VXNlcjU3MjY2OTUz","avatar_url":"https://avatars.githubusercontent.com/u/57266953?v=4","gravatar_id":"","url":"https://api.github.com/users/intergalactic-mammoth","html_url":"https://github.com/intergalactic-mammoth","followers_url":"https://api.github.com/users/intergalactic-mammoth/followers","following_url":"https://api.github.com/users/intergalactic-mammoth/following{/other_user}","gists_url":"https://api.github.com/users/intergalactic-mammoth/gists{/gist_id}","starred_url":"https://api.github.com/users/intergalactic-mammoth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intergalactic-mammoth/subscriptions","organizations_url":"https://api.github.com/users/intergalactic-mammoth/orgs","repos_url":"https://api.github.com/users/intergalactic-mammoth/repos","events_url":"https://api.github.com/users/intergalactic-mammoth/events{/privacy}","received_events_url":"https://api.github.com/users/intergalactic-mammoth/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2022-02-08T09:06:33Z","updated_at":"2022-04-08T13:43:16Z","closed_at":"2022-04-08T13:43:16Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nHi folks, \r\nA partner of mine in the lab is facing a problem I never had before. He created a project in his laptop (Windows, Deeplabcut Version 2.1.10.4), trained for it inside a cluster (Deeplabcut Version 2.2.0.6) and then exctacted outliers and refined them in his laptop. Once finished, and still inside his laptop, he merged the dataset and created the training dataset. I always create training dataset inside the cluster, where the training will be done. Thatâ€™s why I didn't know how to face it. I wrote this issue on Image.sc forum (https://forum.image.sc/t/unable-to-create-training-dataset-after-outlier-refinement/62856) and in the end of that talk they suggested me addressing the issue to the github repo. \r\n\r\nCreating a training dataset on a different computer where the training will be performed was obviously a mistake. Thus, we decided to update his DLC version to 2.2.0.6 (which is the one installed in our cluster), create a new project and copy all labeled folders to this new project. However, we keep getting an error when trying to create training dataset. This error only occurs with refined folders. If we delete refined labels and only use the original extracted and labeled frames, we are able to create the training dataset and eventually trained the network. We are on our way to extract new outlier frames and try the whole process again. However, it is a pity not to be able to save corrected data.\r\n\r\nThe error we keep getting when trying to create training dataset with refined labels is the following I attach in this post. \r\n\r\nOn Image.sc forum they have suggested that the fact that the error has both front and back slashes is the only problem they can see. They say that to them, that says that the code is not properly building these paths when project are moved between windows and linux/mac. 2.2.0.5 and 2.2.0.6 have new strategies that were supposed to fix this, so this might be a bug that [@jeylau](https://forum.image.sc/u/jeylau) will need to fix.\r\n\r\nWhat do you think about it? BIG THANKS\r\nIf any more information is needed, please let me know. \n\n### Operating System\n\noperating system\n\n### DeepLabCut version\n\ndlc version\n\n### DeepLabCut mode\n\nsingle animal\n\n### Device type\n\ngpu computer cluster (https://bioinfo.cipf.es/ubb/cluster/), and cpu (windows) \n\n### Steps To Reproduce\n\n_No response_\n\n### Relevant log output\n\n```shell\n/opt/sci-soft/software/DeepLabCut/2.2.0.6-Anaconda3-GPU/lib/python3.8/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py:717: FutureWarning: `windows2l$\r\n  warnings.warn(\r\n/opt/sci-soft/software/DeepLabCut/2.2.0.6-Anaconda3-GPU/lib/python3.8/site-packages/pandas/io/pytables.py:314: PerformanceWarning:\r\nyour performance may suffer as PyTables will pickle object types that it cannot\r\nmap directly to c-types [inferred_type->mixed,key->axis1] [items->None]\r\n\r\n  f(store)\r\nDLC loaded in light mode; you cannot use any GUI (labeling, relabeling and standalone GUI)\r\nTraceback (most recent call last):\r\n  File \"deeplabcut_cluster.py\", line 15, in <module>\r\n    deeplabcut.create_training_dataset(config_path, augmenter_type = 'imgaug', windows2linux=True)\r\n  File \"/opt/sci-soft/software/DeepLabCut/2.2.0.6-Anaconda3-GPU/lib/python3.8/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py\", line 865, in create_$\r\n    data, MatlabData = format_training_data(\r\n  File \"/opt/sci-soft/software/DeepLabCut/2.2.0.6-Anaconda3-GPU/lib/python3.8/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py\", line 631, in format_$\r\n    img_shape = read_image_shape_fast(os.path.join(project_path, *filename))\r\n  File \"/opt/sci-soft/software/DeepLabCut/2.2.0.6-Anaconda3-GPU/lib/python3.8/site-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py\", line 613, in read_im$\r\n    with Image.open(path) as img:\r\n  File \"/opt/sci-soft/software/DeepLabCut/2.2.0.6-Anaconda3-GPU/lib/python3.8/site-packages/PIL/Image.py\", line 2975, in open\r\n    fp = builtins.open(filename, \"rb\")\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/vteruel/manel/conductas-socialobjeto-manel-2022-02-07/labeled-data\\\\M2161_hab1_1\\\\img18883.png'\n```\n\n\n### Anything else?\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1673/timeline","performed_via_github_app":null,"state_reason":"completed"}