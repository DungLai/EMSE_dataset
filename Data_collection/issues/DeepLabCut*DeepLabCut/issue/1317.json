{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1317","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1317/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1317/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1317/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1317","id":917554896,"node_id":"MDU6SXNzdWU5MTc1NTQ4OTY=","number":1317,"title":"PAF usage in multianimal video analysis","user":{"login":"mynschen","id":53803897,"node_id":"MDQ6VXNlcjUzODAzODk3","avatar_url":"https://avatars.githubusercontent.com/u/53803897?v=4","gravatar_id":"","url":"https://api.github.com/users/mynschen","html_url":"https://github.com/mynschen","followers_url":"https://api.github.com/users/mynschen/followers","following_url":"https://api.github.com/users/mynschen/following{/other_user}","gists_url":"https://api.github.com/users/mynschen/gists{/gist_id}","starred_url":"https://api.github.com/users/mynschen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mynschen/subscriptions","organizations_url":"https://api.github.com/users/mynschen/orgs","repos_url":"https://api.github.com/users/mynschen/repos","events_url":"https://api.github.com/users/mynschen/events{/privacy}","received_events_url":"https://api.github.com/users/mynschen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-06-10T16:37:39Z","updated_at":"2021-06-30T17:16:36Z","closed_at":"2021-06-30T17:16:36Z","author_association":"NONE","active_lock_reason":null,"body":"**Your Operating system and DeepLabCut version**\r\n\r\nOS: Ubuntu 20.04\r\nDeepLabCut Version: 2.2rc2\r\n\r\n**Describe the problem**\r\n\r\nI am wondering if part affinity fields (PAF) are extracted during video analysis for a multianimal project. \r\nFrom the biorxiv preprint (doi: https://doi.org/10.1101/2021.04.30.442096), I was convinced that PAF is applied to link body parts and to generate a robust proposal for animal assembly. However, in DeepLabCut/docs/maDLC_UserGuide.md it says \"If the network has been trained to learn the animals' identities (i.e., you set identity=True in config.yaml before training) this information can be leveraged both during: (i) animal assembly, where body parts are grouped based on the animal they are predicted to belong to (affinity between pairs of keypoints is no longer considered in that case); and (ii) animal tracking, where identity only can be utilized in place of motion trackers to form tracklets.\" Therefore, I looked into the original code and in deeplabcut/pose_estimation_tensorflow/nnet/predict.py I noticed that the function extract_cnn_output(outputs_np, cfg) returns only scmap and locref but not paf.\r\nFrom my testing experience with maDLC with identity as true, the identity prediction is more correct. However, the instances of physically unlikely assignment of bodyparts seems to increase as well (please refer to the screenshot below). In the screenshot, some distances between bodyparts assigned to the same individual seems extremely far away. I am wondering if this could be managed using information form PAF.\r\nThank you for your time reading and kind explanation. =)\r\n\r\n**Screenshots**\r\n![196267769_1503435890007747_8753553839741352068_n](https://user-images.githubusercontent.com/53803897/121562690-46422f80-ca4c-11eb-9a47-adfe281e8860.png)\r\n![199022909_519112919208086_4635575227889512202_n](https://user-images.githubusercontent.com/53803897/121562696-47735c80-ca4c-11eb-9f7a-1d7fd34eae5d.png)","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1317/timeline","performed_via_github_app":null,"state_reason":"completed"}