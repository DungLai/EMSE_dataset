{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/953","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/953/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/953/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/953/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/953","id":718629419,"node_id":"MDU6SXNzdWU3MTg2Mjk0MTk=","number":953,"title":"Unable to run DLC pre trained , Jupyter Notebook .","user":{"login":"MokkelRekords","id":72599266,"node_id":"MDQ6VXNlcjcyNTk5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/72599266?v=4","gravatar_id":"","url":"https://api.github.com/users/MokkelRekords","html_url":"https://github.com/MokkelRekords","followers_url":"https://api.github.com/users/MokkelRekords/followers","following_url":"https://api.github.com/users/MokkelRekords/following{/other_user}","gists_url":"https://api.github.com/users/MokkelRekords/gists{/gist_id}","starred_url":"https://api.github.com/users/MokkelRekords/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MokkelRekords/subscriptions","organizations_url":"https://api.github.com/users/MokkelRekords/orgs","repos_url":"https://api.github.com/users/MokkelRekords/repos","events_url":"https://api.github.com/users/MokkelRekords/events{/privacy}","received_events_url":"https://api.github.com/users/MokkelRekords/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-10T14:18:24Z","updated_at":"2020-10-12T14:31:58Z","closed_at":"2020-10-11T13:51:36Z","author_association":"NONE","active_lock_reason":null,"body":"Hi DLC team , \r\n\r\n**Describe the bug**\r\nI downloaded the DLC model zoo google collab. jupyter notebook .I made some changes to run it locally . However it results in some error as described below. \r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: Ubuntu 18.04 OS \r\n - DeepLabCut Version 2.2b8\r\n - DeepLabCut mode :Single Animal tracking (pre trained model)\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior, i.e.:\r\n1.  Download the Google collab notebook to the OS  [pre-trained-model](https://github.com/DeepLabCut/DeepLabCut/blob/master/examples/COLAB_DLC_ModelZoo.ipynb)\r\n2. Modify the notebook as followis \r\n3. Modified Cells \r\n```\r\n **[3]#**GUIs don't work on the cloud, so we supress them:\r\nimport os\r\nos.environ[\"DLClight\"]=\"True\"\r\n\r\n# stifle tensorflow warnings, like we get it already.\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'\r\n\r\nimport deeplabcut\r\nDLC loaded in light mode; you cannot use any GUI (labeling, relabeling and standalone GUI)\r\n\r\n\r\n\r\n**[24]**video_path = '/home/ComputerVision/DeepLabCut/horsejumpl2r.mp4'\r\nprint(video_path)\r\n/home/ComputerVision/DeepLabCut/horsejumpl2r.mp4\r\n\r\n**[30]**\r\nimport ipywidgets as widgets\r\nfrom IPython.display import display\r\nmodel_options = deeplabcut.create_project.modelzoo.Modeloptions[5]\r\nmodel_selected = model_options\r\ndisplay(model_selected)\r\n'horse_sideview'\r\n\r\n**[34]**\r\npath_config_file = deeplabcut.create_pretrained_project(ProjectFolderName, YourName, video_path, videotype=videotype, \r\n                                      model=model_selected, analyzevideo=True, createlabeledvideo=True, copy_videos=True) #must leave copy_videos=True\r\n```\r\n```\r\n```\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\n\r\n^do not delete the above \"<details><summary>TRACEBACK</summary><p>\" or the ```python part!\r\nCreated \"/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos\"\r\nCreated \"/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/labeled-data\"\r\nCreated \"/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/training-datasets\"\r\nCreated \"/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/dlc-models\"\r\n3  videos from the directory . were added to the project.\r\nCopying the videos\r\n/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampledDLC_resnet50_myDLC_modelZooOct10shuffle1_60000_filtered_labeled.mp4\r\n/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4\r\n/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4\r\nGenerated \"/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/config.yaml\"\r\n\r\nA new project with name testlocal-testlocal-2020-10-10 is created at /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos and a configurable file (config.yaml) is stored there. Change the parameters in this file to adapt to your project's needs.\r\n Once you have changed the configuration file, use the function 'extract_frames' to select frames for labeling.\r\n. [OPTIONAL] Use the function 'add_new_videos' to add new videos to your project (at any stage).\r\nDowloading weights...\r\n  0%|          | 0/353936401 [00:00<?, ?B/s]Downloading the model from the DeepLabCut server @Harvard -> Go Crimson!!! http://deeplabcut.rowland.harvard.edu/models/DLC_Horses_resnet_50_iteration-1_shuffle-1.tar.gz....\r\n353951744B [01:06, 5343406.95B/s]                                \r\n/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/dlc-models/iteration-0/testlocalOct10-trainset95shuffle1/train/pose_cfg.yaml\r\nAnalyzing video...\r\nUsing snapshot-60000 for model /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/dlc-models/iteration-0/testlocalOct10-trainset95shuffle1\r\nInitializing ResNet\r\n  0%|          | 0/94 [00:00<?, ?it/s]Analyzing all the videos in the directory...\r\nStarting to analyze %  /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4\r\n/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos  already exists!\r\nLoading  /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4\r\nDuration of video [s]:  3.13 , recorded with  30.0 fps!\r\nOverall # of frames:  94  found with (before cropping) frame dimensions:  1920 1080\r\nStarting to extract posture\r\n\r\n  0%|          | 0/94 [00:00<?, ?it/s]AStarting to analyze %  /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4\r\n/homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos  already exists!\r\nLoading  /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4\r\nDuration of video [s]:  3.13 , recorded with  30.0 fps!\r\nOverall # of frames:  94  found with (before cropping) frame dimensions:  300 200\r\nStarting to extract posture\r\n\r\n 21%|██▏       | 20/94 [00:00<00:01, 60.62it/s]A\r\n 32%|███▏      | 30/94 [00:00<00:01, 44.41it/s]A\r\n 43%|████▎     | 40/94 [00:01<00:01, 37.69it/s]A\r\n 53%|█████▎    | 50/94 [00:01<00:01, 25.69it/s]A\r\n 64%|██████▍   | 60/94 [00:02<00:01, 26.70it/s]A\r\n 74%|███████▍  | 70/94 [00:02<00:00, 27.46it/s]A\r\n 85%|████████▌ | 80/94 [00:02<00:00, 28.15it/s]A\r\n 96%|█████████▌| 90/94 [00:03<00:00, 22.52it/s]A\r\n100it [00:03, 24.16it/s]                       ADetected frames:  94\r\n100it [00:04, 24.52it/s]\r\n 11%|█         | 10/94 [00:15<02:06,  1.50s/it]\r\nSaving results in /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos...\r\nSaving csv poses!\r\nThe videos are analyzed. Now your research can truly start! \r\n You can create labeled videos with 'create_labeled_video'\r\nIf the tracking is not satisfactory for some videos, consider expanding the training set. You can use the function 'extract_outlier_frames' to extract a few representative outlier frames.\r\nAnalyzing all the videos in the directory...\r\nFiltering with median model /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4\r\nSaving filtered csv poses!\r\nFiltering with median model /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4\r\nNo unfiltered data file found in /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos for video horsejumpl2r and scorer DLC_resnet50_testlocalOct10shuffle1_60000.\r\nPlotting results...\r\nAnalyzing all the videos in the directory...\r\n/home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos   already exists! already exists!\r\n\r\nStarting to process video: /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4Starting to process video: /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4\r\n\r\nLoading /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4 and data.Loading /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4 and data.\r\n\r\nNo filtered data file found in /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos for video horsejumpl2r and scorer DLC_resnet50_testlocalOct10shuffle1_60000.\r\nDuration of video [s]: 3.13, recorded with 30.0 fps!\r\nOverall # of frames: 94 with cropped frame dimensions: 300 200\r\nGenerating frames and creating video.\r\n100%|██████████| 94/94 [00:00<00:00, 442.81it/s]\r\nAnalyzing all the videos in the directory...\r\nLoading  /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2rdownsampled.mp4 and data.\r\nLoading  /home/ComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos/horsejumpl2r.mp4 and data.\r\nNo filtered data file found in /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos for video horsejumpl2r and scorer DLC_resnet50_testlocalOct10shuffle1_60000.\r\n---------------------------------------------------------------------------\r\nFileNotFoundError                         Traceback (most recent call last)\r\n~/ComputerVision/DeepLabCut/deeplabcut/utils/plotting.py in plot_trajectories(config, videos, videotype, shuffle, trainingsetindex, filtered, displayedbodyparts, displayedindividuals, showfigures, destfolder, modelprefix, track_method)\r\n    213             df, _, _, suffix = auxiliaryfunctions.load_analyzed_data(\r\n--> 214                 videofolder, vname, DLCscorer, filtered, track_method\r\n    215             )\r\n\r\n~/ComputerVision/DeepLabCut/deeplabcut/utils/auxiliaryfunctions.py in load_analyzed_data(folder, videoname, scorer, filtered, track_method)\r\n    743     filepath, scorer, suffix = find_analyzed_data(\r\n--> 744         folder, videoname, scorer, filtered, track_method\r\n    745     )\r\n\r\n~/ComputerVision/DeepLabCut/deeplabcut/utils/auxiliaryfunctions.py in find_analyzed_data(folder, videoname, scorer, filtered, track_method)\r\n    728         msg += \".\"\r\n--> 729         raise FileNotFoundError(msg)\r\n    730 \r\n\r\nFileNotFoundError: No filtered data file found in /homeComputerVision/DeepLabCut/myDLC_modelZoo-teamDLC-2020-10-10/videos/testlocal-testlocal-2020-10-10/videos for video horsejumpl2r and scorer DLC_resnet50_testlocalOct10shuffle1_60000.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-34-6f8b748a5e0d> in <module>\r\n      1 path_config_file = deeplabcut.create_pretrained_project(ProjectFolderName, YourName, video_path, videotype=videotype, \r\n----> 2                                       model=model2use, analyzevideo=True, createlabeledvideo=True, copy_videos=True) #must leave copy_videos=True\r\n\r\n~/ComputerVision/DeepLabCut/deeplabcut/create_project/modelzoo.py in create_pretrained_project(project, experimenter, videos, model, working_directory, copy_videos, videotype, analyzevideo, filtered, createlabeledvideo, trainFraction)\r\n    328                 cfg, [video_dir], videotype, draw_skeleton=True, filtered=filtered\r\n    329             )\r\n--> 330             deeplabcut.plot_trajectories(cfg, [video_dir], videotype, filtered=filtered)\r\n    331 \r\n    332         os.chdir(cwd)\r\n\r\n~/ComputerVision/DeepLabCut/deeplabcut/utils/plotting.py in plot_trajectories(config, videos, videotype, shuffle, trainingsetindex, filtered, displayedbodyparts, displayedindividuals, showfigures, destfolder, modelprefix, track_method)\r\n    238             try:\r\n    239                 _ = auxiliaryfunctions.load_detection_data(\r\n--> 240                     video, DLCscorer, track_method\r\n    241                 )\r\n    242                 print(\r\n\r\n~/ComputerVision/DeepLabCut/deeplabcut/utils/auxiliaryfunctions.py in load_detection_data(video, scorer, track_method)\r\n    756         tracker = \"bx\"\r\n    757     else:\r\n--> 758         raise ValueError(f\"Unrecognized track_method={track_method}\")\r\n    759 \r\n    760     filepath = os.path.splitext(video)[0] + scorer + f\"_{tracker}.pickle\"\r\n\r\nValueError: Unrecognized track_method=\r\n```\r\n\r\n\r\n</p></details>\r\n\r\n\r\n**Expected behavior**\r\nIdeally the pre trained model should be downloaded and the videos should be analyzed and labelled with keypoint information written to a CSV file \r\n\r\n\r\n","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/953/timeline","performed_via_github_app":null,"state_reason":"completed"}