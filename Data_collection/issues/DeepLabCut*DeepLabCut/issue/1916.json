{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1916","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1916/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1916/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1916/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1916","id":1314376863,"node_id":"I_kwDOB5BM6c5OV8yf","number":1916,"title":"Network evaluation bug -- ValueError","user":{"login":"sunqy31","id":109411875,"node_id":"U_kgDOBoV-Iw","avatar_url":"https://avatars.githubusercontent.com/u/109411875?v=4","gravatar_id":"","url":"https://api.github.com/users/sunqy31","html_url":"https://github.com/sunqy31","followers_url":"https://api.github.com/users/sunqy31/followers","following_url":"https://api.github.com/users/sunqy31/following{/other_user}","gists_url":"https://api.github.com/users/sunqy31/gists{/gist_id}","starred_url":"https://api.github.com/users/sunqy31/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunqy31/subscriptions","organizations_url":"https://api.github.com/users/sunqy31/orgs","repos_url":"https://api.github.com/users/sunqy31/repos","events_url":"https://api.github.com/users/sunqy31/events{/privacy}","received_events_url":"https://api.github.com/users/sunqy31/received_events","type":"User","site_admin":false},"labels":[{"id":880550038,"node_id":"MDU6TGFiZWw4ODA1NTAwMzg=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"},{"id":1313079487,"node_id":"MDU6TGFiZWwxMzEzMDc5NDg3","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/howtousedlc","name":"howtousedlc","color":"a1b3f4","default":false,"description":"issue regarding the use of DeepLabCut"}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-07-22T06:10:33Z","updated_at":"2022-11-17T00:03:35Z","closed_at":"2022-11-16T12:16:16Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nHi, \r\n\r\nI had trained my multianimal network successfully, but when I evaluate it on GUI, it showed ：“ ValueError : Shape of passed value is (40, 10), indices imply (40, 15)\".  I started to learn Deeplabcut a few days ago. I had trained a single-animal model without this bug. So I wonder whether it was due to the multianimal mode.  \r\n\r\nBy the way, there is another bothering question. Could I continue to work with the network, if training process was accidentally killed? Actually, I had trained a previous model but it stopped at iteration 75000 out of unknown reason. I tried to reload the project and go evaluation, but got the same \"ValueError\" bug. I thought that was caused by the training interruption, so I copied the files and did trained again. This time training completed, but the error was still there.   \r\n\r\nI'm fledgling in deeplabcut and I used mostly default settings. \r\n\r\nMany thanks！\n\n### Operating System\n\nWindows 10\n\n### DeepLabCut version\n\ndeeplabcut 2.2.1.1 GUI\n\n### DeepLabCut mode\n\nmulti animal\n\n### Device type\n\nGPU NVIDIA Quadro P1000\n\n### Steps To Reproduce\n\n1. launch DeepLabCut GUI\r\n2. everything samed ok till training completed \r\n3. run: evaluate network\r\n4. boom!\n\n### Relevant log output\n\n```shell\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\gui\\evaluate_network.py:270, in Evaluate_network.evaluate_network(self, event)\r\n    268 if len(self.bodyparts) == 0:\r\n    269     self.bodyparts = \"all\"\r\n--> 270 deeplabcut.evaluate_network(\r\n    271     self.config,\r\n    272     Shuffles=Shuffles,\r\n    273     #trainingsetindex=trainingsetindex,\r\n    274     plotting=plotting,\r\n    275     show_errors=True,\r\n    276     comparisonbodyparts=self.bodyparts,\r\n    277 )\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\core\\evaluate.py:601, in evaluate_network(config, Shuffles, trainingsetindex, plotting, show_errors, comparisonbodyparts, gputouse, rescale, modelprefix)\r\n    598     from .evaluate_multianimal import evaluate_multianimal_full\r\n    600     # TODO: Make this code not so redundant!\r\n--> 601     evaluate_multianimal_full(\r\n    602         config=config,\r\n    603         Shuffles=Shuffles,\r\n    604         trainingsetindex=trainingsetindex,\r\n    605         plotting=plotting,\r\n    606         comparisonbodyparts=comparisonbodyparts,\r\n    607         gputouse=gputouse,\r\n    608         modelprefix=modelprefix,\r\n    609     )\r\n    610 else:\r\n    611     from deeplabcut.utils.auxfun_videos import imread, imresize\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\core\\evaluate_multianimal.py:448, in evaluate_multianimal_full(config, Shuffles, trainingsetindex, plotting, show_errors, comparisonbodyparts, gputouse, modelprefix)\r\n    445 sess.close()  # closes the current tf session\r\n    447 # Compute all distance statistics\r\n--> 448 df_dist = pd.DataFrame(dist, columns=df.index)\r\n    449 df_conf = pd.DataFrame(conf, columns=df.index)\r\n    450 df_joint = pd.concat(\r\n    451     [df_dist, df_conf],\r\n    452     keys=[\"rmse\", \"conf\"],\r\n    453     names=[\"metrics\"],\r\n    454     axis=1,\r\n    455 )\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\core\\frame.py:694, in DataFrame.__init__(self, data, index, columns, dtype, copy)\r\n    684         mgr = dict_to_mgr(\r\n    685             # error: Item \"ndarray\" of \"Union[ndarray, Series, Index]\" has no\r\n    686             # attribute \"name\"\r\n   (...)\r\n    691             typ=manager,\r\n    692         )\r\n    693     else:\r\n--> 694         mgr = ndarray_to_mgr(\r\n    695             data,\r\n    696             index,\r\n    697             columns,\r\n    698             dtype=dtype,\r\n    699             copy=copy,\r\n    700             typ=manager,\r\n    701         )\r\n    703 # For data is list-like, or Iterable (will consume into list)\r\n    704 elif is_list_like(data):\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\core\\internals\\construction.py:351, in ndarray_to_mgr(values, index, columns, dtype, copy, typ)\r\n    346 # _prep_ndarray ensures that values.ndim == 2 at this point\r\n    347 index, columns = _get_axes(\r\n    348     values.shape[0], values.shape[1], index=index, columns=columns\r\n    349 )\r\n--> 351 _check_values_indices_shape_match(values, index, columns)\r\n    353 if typ == \"array\":\r\n    355     if issubclass(values.dtype.type, str):\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\core\\internals\\construction.py:422, in _check_values_indices_shape_match(values, index, columns)\r\n    420 passed = values.shape\r\n    421 implied = (len(index), len(columns))\r\n--> 422 raise ValueError(f\"Shape of passed values is {passed}, indices imply {implied}\")\r\n\r\nValueError: Shape of passed values is (40, 10), indices imply (40, 15)\n```\n\n\n### Anything else?\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1916/timeline","performed_via_github_app":null,"state_reason":"completed"}