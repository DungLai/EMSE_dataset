{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/956","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/956/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/956/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/956/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/956","id":719255728,"node_id":"MDU6SXNzdWU3MTkyNTU3Mjg=","number":956,"title":"\"The passed save_path is not a valid checkpoint\" on Colab","user":{"login":"Charlottewiltshire97","id":68918736,"node_id":"MDQ6VXNlcjY4OTE4NzM2","avatar_url":"https://avatars.githubusercontent.com/u/68918736?v=4","gravatar_id":"","url":"https://api.github.com/users/Charlottewiltshire97","html_url":"https://github.com/Charlottewiltshire97","followers_url":"https://api.github.com/users/Charlottewiltshire97/followers","following_url":"https://api.github.com/users/Charlottewiltshire97/following{/other_user}","gists_url":"https://api.github.com/users/Charlottewiltshire97/gists{/gist_id}","starred_url":"https://api.github.com/users/Charlottewiltshire97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Charlottewiltshire97/subscriptions","organizations_url":"https://api.github.com/users/Charlottewiltshire97/orgs","repos_url":"https://api.github.com/users/Charlottewiltshire97/repos","events_url":"https://api.github.com/users/Charlottewiltshire97/events{/privacy}","received_events_url":"https://api.github.com/users/Charlottewiltshire97/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-10-12T10:14:40Z","updated_at":"2020-11-18T16:08:50Z","closed_at":"2020-11-18T16:08:50Z","author_association":"NONE","active_lock_reason":null,"body":"Thanks for opening this issue, and thanks for using DeepLabCut (we hope you are enjoying it ;). Please fill out the template completely, including the full \"traceback\" and input code that you ran to hit this error.\r\n\r\n**Your Operating system and DeepLabCut version**\r\n\r\nPlease state your operating system, env, and which version of DeepLabCut you are using.\r\nExample: Ubuntu 16.04 LTS, with an Anaconda Env, & DeepLabCut1.x or 2.x.\r\nwindows, using google colab, DLC 2.2b8\r\n\r\nPlease complete the following information about your system:\r\n\r\nOS: [e.g. MacOS, Windows 10, etc] Windows 10\r\nDeepLabCut Version: [e.g. 2.2] (please check with import deeplabcut, deeplabcut.__version__) 2.2B8\r\nAnaconda env used:\r\n\r\n**Describe the problem**\r\n\r\nTrying to begin training using Colab and get the error:\r\nThe passed save_path is not a valid checkpoint: /usr/local/lib/python3.6/dist-packages/deeplabcut/pose_estimation_tensorflow/models/pretrained/resnet_v1_50.ckpt\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\n\r\ndeeplabcut.train_network(path_config_file, shuffle=shuffle, displayiters=100,saveiters=500)\r\n\r\n[Please copy/paste the full terminal output of the error here!!!]\r\n\r\nSelecting multi-animal trainer\r\nConfig:\r\n{'all_joints': [[0], [1], [2], [3], [4], [5], [6], [7], [8], [9]],\r\n 'all_joints_names': ['bottom_lip',\r\n                      'top_lip',\r\n                      'right_pupil',\r\n                      'left_pupil',\r\n                      'right_ear',\r\n                      'left_ear',\r\n                      'right_nostil',\r\n                      'left_nostril',\r\n                      'right_brow',\r\n                      'left_brow'],\r\n 'batch_size': 8,\r\n 'bottomheight': 400,\r\n 'crop': True,\r\n 'crop_pad': 0,\r\n 'cropratio': 0.4,\r\n 'dataset': 'training-datasets/iteration-0/UnaugmentedDataSet_colab2Jun29/colab2_Charlotte95shuffle1.pickle',\r\n 'dataset_type': 'multi-animal-imgaug',\r\n 'deterministic': False,\r\n 'display_iters': 500,\r\n 'fg_fraction': 0.25,\r\n 'global_scale': 0.8,\r\n 'init_weights': '/usr/local/lib/python3.6/dist-packages/deeplabcut/pose_estimation_tensorflow/models/pretrained/resnet_v1_50.ckpt',\r\n 'intermediate_supervision': False,\r\n 'intermediate_supervision_layer': 12,\r\n 'leftwidth': 400,\r\n 'location_refinement': True,\r\n 'locref_huber_loss': True,\r\n 'locref_loss_weight': 0.05,\r\n 'locref_stdev': 7.2801,\r\n 'log_dir': 'log',\r\n 'max_input_size': 1500,\r\n 'mean_pixel': [123.68, 116.779, 103.939],\r\n 'metadataset': 'training-datasets/iteration-0/UnaugmentedDataSet_colab2Jun29/Documentation_data-colab2_95shuffle1.pickle',\r\n 'min_input_size': 64,\r\n 'minsize': 100,\r\n 'mirror': False,\r\n 'multi_step': [[0.0001, 7500], [5e-05, 12000], [1e-05, 200000]],\r\n 'net_type': 'resnet_50',\r\n 'num_joints': 10,\r\n 'num_limbs': 14,\r\n 'optimizer': 'adam',\r\n 'pafwidth': 20,\r\n 'pairwise_huber_loss': False,\r\n 'pairwise_loss_weight': 0.1,\r\n 'pairwise_predict': False,\r\n 'partaffinityfield_graph': [[0, 1],\r\n                             [0, 7],\r\n                             [0, 6],\r\n                             [1, 7],\r\n                             [1, 6],\r\n                             [6, 7],\r\n                             [7, 3],\r\n                             [2, 8],\r\n                             [3, 9],\r\n                             [2, 4],\r\n                             [3, 5],\r\n                             [9, 8],\r\n                             [9, 5],\r\n                             [8, 4]],\r\n 'partaffinityfield_predict': True,\r\n 'pos_dist_thresh': 17,\r\n 'project_path': '/content/drive/My Drive/test2',\r\n 'regularize': False,\r\n 'rightwidth': 400,\r\n 'save_iters': 10000,\r\n 'scale_jitter_lo': 0.5,\r\n 'scale_jitter_up': 1.25,\r\n 'scoremap_dir': 'test',\r\n 'shuffle': True,\r\n 'snapshot_prefix': '/content/drive/My '\r\n                    'Drive/test2/dlc-models/iteration-0/colab2Jun29-trainset95shuffle1/train/snapshot',\r\n 'stride': 8.0,\r\n 'topheight': 400,\r\n 'weigh_negatives': False,\r\n 'weigh_only_present_joints': False,\r\n 'weigh_part_predictions': False,\r\n 'weight_decay': 0.0001}\r\nActivating limb prediction...\r\nStarting with multi-animal imaug + adam pose-dataset loader.\r\nBatch Size is 8\r\nGetting specs multi-animal-imgaug 14 10\r\nInitializing ResNet\r\nLoading ImageNet-pretrained resnet_50\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-8-ab9cdcec782d> in <module>()\r\n      3 #which shuffle do you want to train?\r\n      4 shuffle = 1\r\n----> 5 deeplabcut.train_network(path_config_file, shuffle=shuffle, displayiters=100,saveiters=500)\r\n      6 \r\n      7 #this will run until you stop it (hit the stop icon). Train until the loss plateaus (It might never reach 0.0002)\r\n\r\n3 frames\r\n/tensorflow-1.15.2/python3.6/tensorflow_core/python/training/saver.py in restore(self, sess, save_path)\r\n   1280     if not checkpoint_management.checkpoint_exists_internal(checkpoint_prefix):\r\n   1281       raise ValueError(\"The passed save_path is not a valid checkpoint: \" +\r\n-> 1282                        checkpoint_prefix)\r\n   1283 \r\n   1284     logging.info(\"Restoring parameters from %s\", checkpoint_prefix)\r\n\r\nValueError: The passed save_path is not a valid checkpoint: /usr/local/lib/python3.6/dist-packages/deeplabcut/pose_estimation_tensorflow/models/pretrained/resnet_v1_50.ckpt\r\n\r\n```\r\n</p></details>\r\n\r\n**How to Reproduce the problem**\r\nSteps to reproduce the behavior:\r\n1. Go to 'google colab'\r\n2. Try to train with the original Init_Weights\r\n3. See error\r\n","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/956/timeline","performed_via_github_app":null,"state_reason":"completed"}