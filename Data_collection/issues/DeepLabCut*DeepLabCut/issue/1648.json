{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1648","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1648/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1648/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1648/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1648","id":1111067611,"node_id":"I_kwDOB5BM6c5COYvb","number":1648,"title":"Error after saving labels","user":{"login":"akeip","id":75046125,"node_id":"MDQ6VXNlcjc1MDQ2MTI1","avatar_url":"https://avatars.githubusercontent.com/u/75046125?v=4","gravatar_id":"","url":"https://api.github.com/users/akeip","html_url":"https://github.com/akeip","followers_url":"https://api.github.com/users/akeip/followers","following_url":"https://api.github.com/users/akeip/following{/other_user}","gists_url":"https://api.github.com/users/akeip/gists{/gist_id}","starred_url":"https://api.github.com/users/akeip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akeip/subscriptions","organizations_url":"https://api.github.com/users/akeip/orgs","repos_url":"https://api.github.com/users/akeip/repos","events_url":"https://api.github.com/users/akeip/events{/privacy}","received_events_url":"https://api.github.com/users/akeip/received_events","type":"User","site_admin":false},"labels":[{"id":880550035,"node_id":"MDU6TGFiZWw4ODA1NTAwMzU=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/duplicate","name":"duplicate","color":"cfd3d7","default":true,"description":"This issue or pull request already exists"},{"id":1010467338,"node_id":"MDU6TGFiZWwxMDEwNDY3MzM4","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/Installation","name":"Installation","color":"ecfca6","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-01-21T23:34:20Z","updated_at":"2022-01-24T13:45:16Z","closed_at":"2022-01-24T13:45:16Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nHi there,\r\n\r\nWhen I try to save labels I receive this error message: ImportError: Missing optional dependency 'tables'.  Use pip or conda to install tables. Which prevents me to advancing to any of the downstream steps. I've included the full log output from creating the project up until the error occurs. I've tried a number of troubleshooting solutions, but none have worked. I've include links to the proposed solutions that I've attempted in the 'Anything Else' textbox.\r\n\r\nThanks for your help!!\r\nAlex\n\n### Operating System\n\nWindows 10\n\n### DeepLabCut version\n\ndlc version 2.2.0.5\n\n### DeepLabCut mode\n\nsingle animal\n\n### Device type\n\nNVIDIA GeForce RTX 2070 with Max-Q Design\n\n### Steps To Reproduce\n\n_No response_\n\n### Relevant log output\n\n```shell\n(base) C:\\Users\\keipa>conda activate DEEPLABCUT\r\n\r\n(DEEPLABCUT) C:\\Users\\keipa>ipython\r\nPython 3.8.12 | packaged by conda-forge | (default, Oct 12 2021, 21:22:46) [MSC v.1916 64 bit (AMD64)]\r\nType 'copyright', 'credits' or 'license' for more information\r\nIPython 8.0.1 -- An enhanced Interactive Python. Type '?' for help.\r\n\r\nIn [1]: import deeplabcut\r\n\r\nIn [2]: deeplabcut.create_new_project(\r\n   ...:     \"TEST\",\r\n   ...:     \"KEIP\",\r\n   ...:     [\"D:\\\\Test_Video_Trimmed.M4V\"],\r\n   ...:     working_directory=\"C:\\\\Users\\\\keipa\\\\Downloads\\\\DeepLabCut-master\\\\DeepLabCut-master\\\\conda-environments\",\r\n   ...:     copy_videos=False,\r\n   ...:     multianimal=False,\r\n   ...: )\r\nCreated \"C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\videos\"\r\nCreated \"C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\labeled-data\"\r\nCreated \"C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\training-datasets\"\r\nCreated \"C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\dlc-models\"\r\nAttempting to create a symbolic link of the video ...\r\nCreated the symlink of D:\\Test_Video_Trimmed.M4V to C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\videos\\Test_Video_Trimmed.M4V\r\nC:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\videos\\Test_Video_Trimmed.M4V\r\nGenerated \"C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments\\TEST-KEIP-2022-01-21\\config.yaml\"\r\n\r\nA new project with name TEST-KEIP-2022-01-21 is created at C:\\Users\\keipa\\Downloads\\DeepLabCut-master\\DeepLabCut-master\\conda-environments and a configurable file (config.yaml) is stored there. Change the parameters in this file to adapt to your project's needs.\r\n Once you have changed the configuration file, use the function 'extract_frames' to select frames for labeling.\r\n. [OPTIONAL] Use the function 'add_new_videos' to add new videos to your project (at any stage).\r\nOut[2]: 'C:\\\\Users\\\\keipa\\\\Downloads\\\\DeepLabCut-master\\\\DeepLabCut-master\\\\conda-environments\\\\TEST-KEIP-2022-01-21\\\\config.yaml'\r\n\r\nIn [3]: deeplabcut.extract_frames(\r\n   ...:     \"C:\\\\Users\\\\keipa\\\\Downloads\\\\DeepLabCut-master\\\\DeepLabCut-master\\\\conda-environments\\\\TEST-KEIP-2022-01-21\\\\config.YAM\r\n   ...: L\",\r\n   ...:     mode=\"automatic\",\r\n   ...:     algo=\"kmeans\",\r\n   ...:     userfeedback=False,\r\n   ...:     crop=False,\r\n   ...: )\r\nConfig file read successfully.\r\nExtracting frames based on kmeans ...\r\nKmeans-quantization based extracting of frames from 0.0  seconds to 718.4  seconds.\r\nExtracting and downsampling... 14368  frames from the video.\r\n14368it [00:23, 615.45it/s]\r\nKmeans clustering ... (this might take a while)\r\nC:\\Users\\keipa\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\sklearn\\cluster\\_kmeans.py:1043: UserWarning: MiniBatchKMeans is known to have a memory leak on Windows with MKL, when there are less chunks than available threads. You can prevent it by setting batch_size >= 3072 or by setting the environment variable OMP_NUM_THREADS=1\r\n  warnings.warn(\r\nFrame 14357  not found!\r\nFrames were successfully extracted, for the videos listed in the config.yaml file.\r\n\r\nYou can now label the frames using the function 'label_frames' (Note, you should label frames extracted from diverse videos (and many videos; we do not recommend training on single videos!)).\r\n\r\nIn [4]: deeplabcut.label_frames(\r\n   ...:     \"C:\\\\Users\\\\keipa\\\\Downloads\\\\DeepLabCut-master\\\\DeepLabCut-master\\\\conda-environments\\\\TEST-KEIP-2022-01-21\\\\config.YAM\r\n   ...: L\"\r\n   ...: )\r\n---------------------------------------------------------------------------\r\nImportError                               Traceback (most recent call last)\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\gui\\labeling_toolbox.py:945, in MainFrame.saveDataSet(self, event)\r\n    937 self.dataFrame = self.dataFrame.reindex(\r\n    938     self.cfg[\"bodyparts\"],\r\n    939     axis=1,\r\n    940     level=self.dataFrame.columns.names.index(\"bodyparts\"),\r\n    941 )\r\n    942 self.dataFrame.to_csv(\r\n    943     os.path.join(self.dir, \"CollectedData_\" + self.scorer + \".csv\")\r\n    944 )\r\n--> 945 self.dataFrame.to_hdf(\r\n    946     os.path.join(self.dir, \"CollectedData_\" + self.scorer + \".h5\"),\r\n    947     \"df_with_missing\",\r\n    948 )\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\core\\generic.py:2703, in NDFrame.to_hdf(self, path_or_buf, key, mode, complevel, complib, append, format, index, min_itemsize, nan_rep, dropna, data_columns, errors, encoding)\r\n   2592 \"\"\"\r\n   2593 Write the contained data to an HDF5 file using HDFStore.\r\n   2594\r\n   (...)\r\n   2699 >>> os.remove('data.h5')\r\n   2700 \"\"\"\r\n   2701 from pandas.io import pytables\r\n-> 2703 pytables.to_hdf(\r\n   2704     path_or_buf,\r\n   2705     key,\r\n   2706     self,\r\n   2707     mode=mode,\r\n   2708     complevel=complevel,\r\n   2709     complib=complib,\r\n   2710     append=append,\r\n   2711     format=format,\r\n   2712     index=index,\r\n   2713     min_itemsize=min_itemsize,\r\n   2714     nan_rep=nan_rep,\r\n   2715     dropna=dropna,\r\n   2716     data_columns=data_columns,\r\n   2717     errors=errors,\r\n   2718     encoding=encoding,\r\n   2719 )\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\io\\pytables.py:311, in to_hdf(path_or_buf, key, value, mode, complevel, complib, append, format, index, min_itemsize, nan_rep, dropna, data_columns, errors, encoding)\r\n    309 path_or_buf = stringify_path(path_or_buf)\r\n    310 if isinstance(path_or_buf, str):\r\n--> 311     with HDFStore(\r\n    312         path_or_buf, mode=mode, complevel=complevel, complib=complib\r\n    313     ) as store:\r\n    314         f(store)\r\n    315 else:\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\io\\pytables.py:572, in HDFStore.__init__(self, path, mode, complevel, complib, fletcher32, **kwargs)\r\n    569 if \"format\" in kwargs:\r\n    570     raise ValueError(\"format is not a defined argument for HDFStore\")\r\n--> 572 tables = import_optional_dependency(\"tables\")\r\n    574 if complib is not None and complib not in tables.filters.all_complibs:\r\n    575     raise ValueError(\r\n    576         f\"complib only supports {tables.filters.all_complibs} compression.\"\r\n    577     )\r\n\r\nFile ~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\pandas\\compat\\_optional.py:118, in import_optional_dependency(name, extra, errors, min_version)\r\n    116 except ImportError:\r\n    117     if errors == \"raise\":\r\n--> 118         raise ImportError(msg) from None\r\n    119     else:\r\n    120         return None\r\n\r\nImportError: Missing optional dependency 'tables'.  Use pip or conda to install tables.\r\nYou can now check the labels, using 'check_labels' before proceeding. Then, you can use the function 'create_training_dataset' to create the training dataset.\n```\n\n\n### Anything else?\n\nhttps://github.com/DeepLabCut/DeepLabCut/issues/431\r\n\r\nhttps://github.com/DeepLabCut/DeepLabCut/issues/377\r\n\r\nhttps://github.com/DeepLabCut/DeepLabCut/issues/398\r\n\r\nhttps://github.com/DeepLabCut/DeepLabCut/issues/108\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1648/timeline","performed_via_github_app":null,"state_reason":"completed"}