{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1436","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1436/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1436/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1436/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1436","id":952769403,"node_id":"MDU6SXNzdWU5NTI3Njk0MDM=","number":1436,"title":"mismatch between C/C++ and Windows locale (wxPython related error?)","user":{"login":"clementpouget","id":71383157,"node_id":"MDQ6VXNlcjcxMzgzMTU3","avatar_url":"https://avatars.githubusercontent.com/u/71383157?v=4","gravatar_id":"","url":"https://api.github.com/users/clementpouget","html_url":"https://github.com/clementpouget","followers_url":"https://api.github.com/users/clementpouget/followers","following_url":"https://api.github.com/users/clementpouget/following{/other_user}","gists_url":"https://api.github.com/users/clementpouget/gists{/gist_id}","starred_url":"https://api.github.com/users/clementpouget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clementpouget/subscriptions","organizations_url":"https://api.github.com/users/clementpouget/orgs","repos_url":"https://api.github.com/users/clementpouget/repos","events_url":"https://api.github.com/users/clementpouget/events{/privacy}","received_events_url":"https://api.github.com/users/clementpouget/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-07-26T10:50:15Z","updated_at":"2021-07-26T12:44:44Z","closed_at":"2021-07-26T12:44:44Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\n**Your Operating system and DeepLabCut version**\r\n\r\nOS: [Windows 10 Pro Version 10.0.19041 Build 19041]\r\nDeepLabCut Version: [2.2rc3] \r\nAnaconda env used: yes, conda 4.10.3 (Python 3.8.10)\r\n\r\n**Describe the problem**\r\n\r\nI am trying to run DLC, but I get an error message every time a GUI window opens up. For example, when trying to use DLC completely with the GUI: \r\n\r\n<details><summary>Code output</summary><p>\r\n\r\n(DEEPLABCUT) C:\\Users\\C4_admin>python -m deeplabcut\r\n2021-07-26 12:36:27.647513: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'cudart64_110.dll'; dlerror: cudart64_110.dll not found\r\n2021-07-26 12:36:27.647656: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.\r\nStarting GUI...\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\C4_admin\\anaconda3\\envs\\DEEPLABCUT\\lib\\runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\C4_admin\\anaconda3\\envs\\DEEPLABCUT\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\C4_admin\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\__main__.py\", line 22, in <module>\r\n    deeplabcut.launch_dlc()\r\n  File \"C:\\Users\\C4_admin\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\gui\\launch_script.py\", line 45, in launch_dlc\r\n    frame = MainFrame().Show()\r\n  File \"C:\\Users\\C4_admin\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\gui\\launch_script.py\", line 27, in __init__\r\n    self.SetIcon(wx.Icon(logo))\r\nwx._core.wxAssertionError: C++ assertion \"strcmp(setlocale(LC_ALL, NULL), \"C\") == 0\" failed at ..\\..\\src\\common\\intl.cpp(1579) in wxLocale::GetInfo(): You probably called setlocale() directly instead of using wxLocale and now there is a mismatch between C/C++ and Windows locale.\r\nThings are going to break, please only change locale by creating wxLocale objects to avoid this!\r\n</p></details>\r\n\r\nOr, when working through the command window, the same error pops when I get to the labeling step. I can open the labeling step GUI, click 'Load frames', but when I select the folder where my images are here's what comes up :\r\n\r\n<details><summary>Code output</summary><p>\r\nIn [6]: deeplabcut.label_frames(config_path)\r\n---------------------------------------------------------------------------\r\nwxAssertionError                          Traceback (most recent call last)\r\n~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\gui\\labeling_toolbox.py in browseDir(self, event)\r\n    696                 self.canvas,\r\n    697                 self.toolbar,\r\n--> 698             ) = self.image_panel.drawplot(\r\n    699                 self.img, img_name, self.iter, self.index, self.bodyparts, self.colormap\r\n    700             )\r\n\r\n~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\deeplabcut\\gui\\labeling_toolbox.py in drawplot(self, img, img_name, itr, index, bodyparts, cmap, keep_view)\r\n    187             self.axes.set_ylim(ylim)\r\n    188         if self.toolbar is None:\r\n--> 189             self.toolbar = NavigationToolbar(self.canvas)\r\n    190         return (self.figure, self.axes, self.canvas, self.toolbar)\r\n    191\r\n\r\n~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\matplotlib\\backends\\backend_wx.py in __init__(self, canvas)\r\n   1375     def __init__(self, canvas):\r\n   1376         wx.ToolBar.__init__(self, canvas.GetParent(), -1)\r\n-> 1377         NavigationToolbar2.__init__(self, canvas)\r\n   1378         self.canvas = canvas\r\n   1379         self._idle = True\r\n\r\n~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\matplotlib\\backend_bases.py in __init__(self, canvas)\r\n   2634         # This cursor will be set after the initial draw.\r\n   2635         self._lastCursor = cursors.POINTER\r\n-> 2636         self._init_toolbar()\r\n   2637         self._idDrag = self.canvas.mpl_connect(\r\n   2638             'motion_notify_event', self.mouse_move)\r\n\r\n~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\matplotlib\\backends\\backend_wx.py in _init_toolbar(self)\r\n   1402                 self.AddTool(\r\n   1403                     -1,\r\n-> 1404                     bitmap=_load_bitmap(image_file + \".png\"),\r\n   1405                     bmpDisabled=wx.NullBitmap,\r\n   1406                     label=text, shortHelp=text, longHelp=tooltip_text,\r\n\r\n~\\anaconda3\\envs\\DEEPLABCUT\\lib\\site-packages\\matplotlib\\backends\\backend_wx.py in _load_bitmap(filename)\r\n   1241         raise IOError('Could not find bitmap file \"%s\"; dying' % bmpFilename)\r\n   1242\r\n-> 1243     bmp = wx.Bitmap(bmpFilename)\r\n   1244     return bmp\r\n   1245\r\n\r\nwxAssertionError: C++ assertion \"strcmp(setlocale(LC_ALL, NULL), \"C\") == 0\" failed at ..\\..\\src\\common\\intl.cpp(1579) in wxLocale::GetInfo(): You probably called setlocale() directly instead of using wxLocale and now there is a mismatch between C/C++ and Windows locale.\r\nThings are going to break, please only change locale by creating wxLocale objects to avoid this!\r\n\r\n</p></details>\r\n\r\n\r\n\r\n**Additional context**\r\n I am guessing this is error is coming from wxpython. I believe the provided version with the conda env. was wspython 4.0.x, and I tried updating to 4.1.1, but the error codes stay the same. \r\n I haven't the slightest idea how to fix this... Any ideas would be appreciated. \r\n \r\n","closed_by":{"login":"clementpouget","id":71383157,"node_id":"MDQ6VXNlcjcxMzgzMTU3","avatar_url":"https://avatars.githubusercontent.com/u/71383157?v=4","gravatar_id":"","url":"https://api.github.com/users/clementpouget","html_url":"https://github.com/clementpouget","followers_url":"https://api.github.com/users/clementpouget/followers","following_url":"https://api.github.com/users/clementpouget/following{/other_user}","gists_url":"https://api.github.com/users/clementpouget/gists{/gist_id}","starred_url":"https://api.github.com/users/clementpouget/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clementpouget/subscriptions","organizations_url":"https://api.github.com/users/clementpouget/orgs","repos_url":"https://api.github.com/users/clementpouget/repos","events_url":"https://api.github.com/users/clementpouget/events{/privacy}","received_events_url":"https://api.github.com/users/clementpouget/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1436/timeline","performed_via_github_app":null,"state_reason":"completed"}