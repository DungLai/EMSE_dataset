{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/691","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/691/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/691/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/691/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/691","id":619597779,"node_id":"MDU6SXNzdWU2MTk1OTc3Nzk=","number":691,"title":"GetPoseF_GTF in predict_videos reads in more frames than .mpg has","user":{"login":"KidElectric","id":14025598,"node_id":"MDQ6VXNlcjE0MDI1NTk4","avatar_url":"https://avatars.githubusercontent.com/u/14025598?v=4","gravatar_id":"","url":"https://api.github.com/users/KidElectric","html_url":"https://github.com/KidElectric","followers_url":"https://api.github.com/users/KidElectric/followers","following_url":"https://api.github.com/users/KidElectric/following{/other_user}","gists_url":"https://api.github.com/users/KidElectric/gists{/gist_id}","starred_url":"https://api.github.com/users/KidElectric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KidElectric/subscriptions","organizations_url":"https://api.github.com/users/KidElectric/orgs","repos_url":"https://api.github.com/users/KidElectric/repos","events_url":"https://api.github.com/users/KidElectric/events{/privacy}","received_events_url":"https://api.github.com/users/KidElectric/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-05-17T03:01:30Z","updated_at":"2020-05-18T18:07:03Z","closed_at":"2020-05-18T17:05:32Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nFor many .mpg videos, entire video will be processed and then cap.read() somehow returns True even when counter  > nframes (i.e. it somehow reads in frames beyond nframes).. This then throws errors later when trying to put these frames into PredictedData, giving error \"could not broadcast input array from shape (6,30) into shape (5,30)\" [or whatever the case may be]. I don't know if this is an issue with openCV, DLC, or a common way that .mpg files themselves can be corrupted. but it's pretty frustrating (because it happens allll the way at the end of a long video analysis session ;-). Really hard to predict which videos it will happen to. I was able to get around it by adding an if statement checking that counter  < nframes instead of relying on ret from cap.read().  I.e.\r\n```\r\n            if counter < nframes:\r\n                ret, frame = cap.read()\r\n            else:\r\n                ret = False\r\n```\r\nNot sure if this generalizes because it also appears GetPoseF_GTF dynamically re-assigns nframes at the end ( nframes = counter)... even though PredictedData is already initialized to the original nframes? Not sure what's going on there. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nI can attempt to send an example video and model this happens on if needed (they are large). Hoping that the above description is precise enough.\r\n\r\n**Expected behavior**\r\nVideo analysis completing.\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: Windows 10 and also Linux Ubuntu  (DLC Docker)\r\n - DeepLabCut Version 2.1.7\r\n - Browser: N/A\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","closed_by":{"login":"KidElectric","id":14025598,"node_id":"MDQ6VXNlcjE0MDI1NTk4","avatar_url":"https://avatars.githubusercontent.com/u/14025598?v=4","gravatar_id":"","url":"https://api.github.com/users/KidElectric","html_url":"https://github.com/KidElectric","followers_url":"https://api.github.com/users/KidElectric/followers","following_url":"https://api.github.com/users/KidElectric/following{/other_user}","gists_url":"https://api.github.com/users/KidElectric/gists{/gist_id}","starred_url":"https://api.github.com/users/KidElectric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KidElectric/subscriptions","organizations_url":"https://api.github.com/users/KidElectric/orgs","repos_url":"https://api.github.com/users/KidElectric/repos","events_url":"https://api.github.com/users/KidElectric/events{/privacy}","received_events_url":"https://api.github.com/users/KidElectric/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/691/timeline","performed_via_github_app":null,"state_reason":"completed"}