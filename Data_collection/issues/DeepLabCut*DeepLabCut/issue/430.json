{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/430","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/430/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/430/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/430/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/430","id":499853330,"node_id":"MDU6SXNzdWU0OTk4NTMzMzA=","number":430,"title":"ZeroDivisionError/OpenCV Error Opening File during Demo Code","user":{"login":"parth-agrawal","id":31422484,"node_id":"MDQ6VXNlcjMxNDIyNDg0","avatar_url":"https://avatars.githubusercontent.com/u/31422484?v=4","gravatar_id":"","url":"https://api.github.com/users/parth-agrawal","html_url":"https://github.com/parth-agrawal","followers_url":"https://api.github.com/users/parth-agrawal/followers","following_url":"https://api.github.com/users/parth-agrawal/following{/other_user}","gists_url":"https://api.github.com/users/parth-agrawal/gists{/gist_id}","starred_url":"https://api.github.com/users/parth-agrawal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parth-agrawal/subscriptions","organizations_url":"https://api.github.com/users/parth-agrawal/orgs","repos_url":"https://api.github.com/users/parth-agrawal/repos","events_url":"https://api.github.com/users/parth-agrawal/events{/privacy}","received_events_url":"https://api.github.com/users/parth-agrawal/received_events","type":"User","site_admin":false},"labels":[{"id":1010467338,"node_id":"MDU6TGFiZWwxMDEwNDY3MzM4","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/Installation","name":"Installation","color":"ecfca6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-09-29T03:59:31Z","updated_at":"2019-11-08T19:30:08Z","closed_at":"2019-10-04T22:54:04Z","author_association":"NONE","active_lock_reason":null,"body":"**Operating system and DeepLabCut version**\r\nOS: Windows 10\r\nenv: dlc-windowsCPU\r\nDLC version: 2.0.9\r\n\r\n**The problem**\r\n\r\nI'm attempting to work through the reaching data demo set. I completed training of the dataset and it seems to have analyzed the video. However, it seems there are several issues. Highlighted:\r\n\r\n(1) \"The video was not analyzed with this scorer: DeepCut_resnet50_ReachingAug30shuffle1_300\r\nOther scorers were found, however:\"\r\n(2) \"False 0 832 0 747 \r\nwarning: Error opening file (/build/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:901)\"\r\n(3) \"duration = nframes/fps\r\nZeroDivisionError: float division by zero\"\r\n\r\n\r\n**Full log:**\r\n```\r\n..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\config.yaml\r\n..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\videos\\reachingvideo1.avi\r\nstart Analyzing the video!\r\nUsing snapshot-300 for model C:\\Users\\parth\\Dropbox\\Research\\Sahin \r\nResearch\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\dlc-models\\iteration-\r\n0\\ReachingAug30-trainset95shuffle1\r\nStarting to analyze %  ..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\videos\\reachingvideo1.avi\r\nVideo already analyzed! ..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\videos\\reachingvideo1DeepCut_resnet50_ReachingAug30shuffle1_300.h5\r\nThe videos are analyzed. Now your research can truly start!\r\nYou can create labeled videos with 'create_labeled_video'.\r\nIf the tracking is not satisfactory for some videos, consider expanding the training set. You can use the function 'extract_outlier_frames' to extract any outlier frames!\r\nStarting %  ..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\videos ['..\\\\DeepLabCut\\\\examples\\\\Reaching-Mackenzie-2018-08-30\\\\videos\\\\reachingvideo1.avi']\r\nLoading  ..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\videos\\reachingvideo1.avi and data.\r\nThe video was not analyzed with this scorer: DeepCut_resnet50_ReachingAug30shuffle1_300\r\nOther scorers were found, however:['reachingvideo1DeepCut_resnet50_ReachingAug30shuffle1_300.h5']\r\nCreating labeled video for: DeepCut_resnet50_ReachingAug30shuffle1_300  instead.\r\nFalse 0 832 0 747\r\nwarning: Error opening file (/build/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:901)\r\nwarning: ..\\DeepLabCut\\examples\\Reaching-Mackenzie-2018-08-30\\videos\\reachingvideo1.avi (/build/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:902)\r\n0\r\nTraceback (most recent call last):\r\n  File \"vidDemo.py\", line 13, in <module>\r\n    deeplabcut.create_labeled_video(path_config_file, [videofile_path], draw_skeleton=True)\r\n  File \"C:\\Users\\parth\\Anaconda3\\envs\\dlc-windowsCPU\\lib\\site-packages\\deeplabcut\\utils\\make_labeled_video.py\", line 404, in create_labeled_video\r\n    CreateVideo(clip,Dataframe,cfg[\"pcutoff\"],cfg[\"dotsize\"],cfg[\"colormap\"],DLCscorer,bodyparts,trailpoints,cropping,x1,x2,y1,y2,bodyparts2connect,skeleton_color,draw_skeleton,displaycropped)\r\n  File \"C:\\Users\\parth\\Anaconda3\\envs\\dlc-windowsCPU\\lib\\site-packages\\deeplabcut\\utils\\make_labeled_video.py\", line 71, in CreateVideo\r\n    duration = nframes/fps\r\nZeroDivisionError: float division by zero\r\n```\r\n\r\nI searched the forum for the ZeroDivisionError and found two relevant issues, #197 and #273 . I tried the solution for #273 and reinstalled ffmpeg in case that was the issue (`conda install -c conda-forge ffmpeg`). However, that did not resolve it. I'm not sure if #197's solution applies to me, since I'm using the demo data you guys provide and don't need to convert between formats. I'm also using brackets in my code. \r\n\r\nI get 3 file outputs in /examples/../videos:\r\n![image](https://user-images.githubusercontent.com/31422484/65826035-4c7a8300-e24c-11e9-9783-f5d3349b1bcb.png)\r\n\r\nHowever, when I try to play the labeled video file I get an \"invalid file type error\" (0xc10100be). I've tried this with VLC which should be able to read the file - I think it might be that the file itself wasn't generated properly as a result of the errors.\r\n\r\n**My script:**\r\n\r\n```\r\nimport deeplabcut\r\nimport os\r\npath_config_file = os.path.normpath(os.path.join(os.path.dirname(__file__), \"..\", \"DeepLabCut/examples/Reaching-Mackenzie-2018-08-30/config.yaml\"))\r\nprint (path_config_file)\r\nvideofile_path = os.path.normpath(os.path.join(os.path.dirname(__file__), \"..\", \"DeepLabCut/examples/Reaching-Mackenzie-2018-08-30/videos/reachingvideo1.avi\"))\r\nprint(videofile_path)\r\nprint (\"start Analyzing the video!\")\r\ndeeplabcut.analyze_videos(path_config_file,[videofile_path], videotype=\".avi\")\r\ndeeplabcut.create_labeled_video(path_config_file, [videofile_path], draw_skeleton=True)\r\ndeeplabcut.extract_outlier_frames(path_config_file, videofile_path, outlieralgorithm='uncertain',p_bound=0.2)\r\n```\r\n\r\n\r\nI made only two intentional changes to the demo code - I added the config file path to sys.path as my demo script is not in the same directory as the \"examples\" folder, which was the only place I could successfully import the deeplabcut module. The second was the addition of `videotype=\".avi\"` as a possible solution from #197 (which had no effect).\r\n\r\nWould you be able to explain why issue (1) happens, and the next steps to resolve issue (2)? My guess is that issue (3) is derived from (2).\r\n","closed_by":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/430/timeline","performed_via_github_app":null,"state_reason":"completed"}