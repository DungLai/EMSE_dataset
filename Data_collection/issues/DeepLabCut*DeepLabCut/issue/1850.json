{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1850","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1850/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1850/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1850/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1850","id":1249649469,"node_id":"I_kwDOB5BM6c5KfCM9","number":1850,"title":"Exception in SkeletonBuilder","user":{"login":"poja","id":4618146,"node_id":"MDQ6VXNlcjQ2MTgxNDY=","avatar_url":"https://avatars.githubusercontent.com/u/4618146?v=4","gravatar_id":"","url":"https://api.github.com/users/poja","html_url":"https://github.com/poja","followers_url":"https://api.github.com/users/poja/followers","following_url":"https://api.github.com/users/poja/following{/other_user}","gists_url":"https://api.github.com/users/poja/gists{/gist_id}","starred_url":"https://api.github.com/users/poja/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poja/subscriptions","organizations_url":"https://api.github.com/users/poja/orgs","repos_url":"https://api.github.com/users/poja/repos","events_url":"https://api.github.com/users/poja/events{/privacy}","received_events_url":"https://api.github.com/users/poja/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-05-26T14:30:39Z","updated_at":"2022-05-31T11:49:57Z","closed_at":"2022-05-31T11:49:57Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nWhen pressing \"Build Skeleton\" in the \"Create videos\" tab of the GUI, I get the following exception:\r\n\r\n```\r\nFile d:\\deeplabcut\\deeplabcut\\deeplabcut\\gui\\create_videos.py:248, in Create_Labeled_Videos.build_skeleton(self, event)\r\n    247 def build_skeleton(self, event):\r\n--> 248     skeleton.SkeletonBuilder(self.config)\r\n\r\nFile d:\\deeplabcut\\deeplabcut\\deeplabcut\\utils\\skeleton.py:56, in SkeletonBuilder.__init__(self, config_path)\r\n     50 if os.path.isdir(folder) and not any(\r\n     51     folder.endswith(s) for s in (\"cropped\", \"labeled\")\r\n     52 ):\r\n     53     self.df = pd.read_hdf(\r\n     54         os.path.join(folder, f'CollectedData_{self.cfg[\"scorer\"]}.h5')\r\n     55     )\r\n---> 56     row, col = self.pick_labeled_frame()\r\n     57     if \"individuals\" in self.df.columns.names:\r\n     58         self.df = self.df.xs(col, axis=1, level=\"individuals\")\r\n\r\nFile d:\\deeplabcut\\deeplabcut\\deeplabcut\\utils\\skeleton.py:110, in SkeletonBuilder.pick_labeled_frame(self)\r\n    108 kept = mask.stack().index.to_list()\r\n    109 np.random.shuffle(kept)\r\n--> 110 row, col = kept.pop()\r\n    111 return row, col\r\n\r\nValueError: too many values to unpack (expected 2)\r\n```\r\n\r\nIt seems that `kept.pop()` returns a 4-value tuple, instead of the expected 2 values. A deeper inspection shows that my dataframe's index is made of tuples that look like this: \r\n`('labeled-data',\r\n 'VIDEO1',\r\n 'img1191.png')`\r\nwhile the code seems to expect a single string value for the dataframe index (`row` is passed later to `self.df.loc`)\n\n### Operating System\n\nwindows\n\n### DeepLabCut version\n\nv2.2.1\n\n### DeepLabCut mode\n\nmulti animal\n\n### Device type\n\ngpu\n\n### Steps To Reproduce\n\n1. Train and evaluate a model\r\n2. Go to \"Create videos\" tab\r\n3. Press \"Build skeleton\"\n\n### Relevant log output\n\n_No response_\n\n### Anything else?\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1850/timeline","performed_via_github_app":null,"state_reason":"completed"}