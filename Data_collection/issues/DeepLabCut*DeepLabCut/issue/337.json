{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/337","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/337/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/337/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/337/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/337","id":460469992,"node_id":"MDU6SXNzdWU0NjA0Njk5OTI=","number":337,"title":"create_labeled_video_3d [defining skeleton Q]","user":{"login":"mawaishafeez","id":30775768,"node_id":"MDQ6VXNlcjMwNzc1NzY4","avatar_url":"https://avatars.githubusercontent.com/u/30775768?v=4","gravatar_id":"","url":"https://api.github.com/users/mawaishafeez","html_url":"https://github.com/mawaishafeez","followers_url":"https://api.github.com/users/mawaishafeez/followers","following_url":"https://api.github.com/users/mawaishafeez/following{/other_user}","gists_url":"https://api.github.com/users/mawaishafeez/gists{/gist_id}","starred_url":"https://api.github.com/users/mawaishafeez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mawaishafeez/subscriptions","organizations_url":"https://api.github.com/users/mawaishafeez/orgs","repos_url":"https://api.github.com/users/mawaishafeez/repos","events_url":"https://api.github.com/users/mawaishafeez/events{/privacy}","received_events_url":"https://api.github.com/users/mawaishafeez/received_events","type":"User","site_admin":false},"labels":[{"id":880550040,"node_id":"MDU6TGFiZWw4ODA1NTAwNDA=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/question","name":"question","color":"d876e3","default":true,"description":"user question (not great for github ;)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-06-25T14:46:19Z","updated_at":"2019-06-25T15:24:49Z","closed_at":"2019-06-25T15:24:49Z","author_association":"NONE","active_lock_reason":null,"body":"Using: Ubuntu 16.04 LTS, with an Anaconda Env, & DLC 2.0.7\r\n\r\n\r\n**Describe the problem**\r\nHaving issues with labeling 3d videos... couldn't sort it out.. Folder contains videos from both cameras and .h5 file ... can you please help to locate the error\r\n\r\n```\r\nIn [59]: dlc.create_labeled_video_3d(config_file_3d, [videospath], trailpoints=3, videotype=\".mp4\")\r\nAnalyzing all the videos in the directory\r\n[['/work/dlc-project/prehen/ Ah T2  D20 W7_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T2  D20 W7.mp4', '/work/dlc-project/prehen/camera-2 Ah T2  D20 W7.mp4'], ['/work/dlc-project/prehen/ Ah T2  D20 W5_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T2  D20 W5.mp4', '/work/dlc-project/prehen/camera-2 Ah T2  D20 W5.mp4'], ['/work/dlc-project/prehen/ Ah T3  D40 W5_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T3  D40 W5.mp4', '/work/dlc-project/prehen/camera-2 Ah T3  D40 W5.mp4'], ['/work/dlc-project/prehen/ Ah T2  D40 W7_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T2  D40 W7.mp4', '/work/dlc-project/prehen/camera-2 Ah T2  D40 W7.mp4'], ['/work/dlc-project/prehen/ Ah T1  D40 W7_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T1  D40 W7.mp4', '/work/dlc-project/prehen/camera-2 Ah T1  D40 W7.mp4'], ['/work/dlc-project/prehen/ Ah T3  D40 W7_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T3  D40 W7.mp4', '/work/dlc-project/prehen/camera-2 Ah T3  D40 W7.mp4'], ['/work/dlc-project/prehen/ Ah T1  D20 W7_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T1  D20 W7.mp4', '/work/dlc-project/prehen/camera-2 Ah T1  D20 W7.mp4'], ['/work/dlc-project/prehen/ Ah T3  D20 W7_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T3  D20 W7.mp4', '/work/dlc-project/prehen/camera-2 Ah T3  D20 W7.mp4'], ['/work/dlc-project/prehen/ Ah T2  D40 W5_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T2  D40 W5.mp4', '/work/dlc-project/prehen/camera-2 Ah T2  D40 W5.mp4'], ['/work/dlc-project/prehen/ Ah T3  D20 W5_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T3  D20 W5.mp4', '/work/dlc-project/prehen/camera-2 Ah T3  D20 W5.mp4'], ['/work/dlc-project/prehen/ Ah T1  D40 W5_DLC_3D.h5', '/work/dlc-project/prehen/camera-1 Ah T1  D40 W5.mp4', '/work/dlc-project/prehen/camera-2 Ah T1  D40 W5.mp4']]\r\nCreating 3D video from camera-1 Ah T2  D20 W7.mp4 and camera-2 Ah T2  D20 W7.mp4 using  Ah T2  D20 W7_DLC_3D.h5\r\nTrying to find filtered predictions...\r\nFound filtered predictions! I will use these for triangulation.\r\n  0%|                                                                                                                     | 0/296 [00:00<?, ?it/s]\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/base.py in get_loc(self, key, method, tolerance)\r\n   2521             try:\r\n-> 2522                 return self._engine.get_loc(key)\r\n   2523             except KeyError:\r\n\r\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\r\n\r\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\r\n\r\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()\r\n\r\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()\r\n\r\nKeyError: 'O'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nKeyError                                  Traceback (most recent call last)\r\n<ipython-input-59-9277253585c4> in <module>()\r\n----> 1 dlc.create_labeled_video_3d(config_file_3d, [videospath], trailpoints=3, videotype=\".mp4\")\r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/deeplabcut/pose_estimation_3d/plotting3D.py in create_labeled_video_3d(config, path, videofolder, start, end, trailpoints, videotype, view, xlim, ylim, zlim, draw_skeleton)\r\n    133         # Start plotting for every frame\r\n    134         for k in tqdm(frames):\r\n--> 135             output_folder,num_frames = plot2D(cfg_3d,k,bodyparts2plot,vid_cam1,vid_cam2,bodyparts2connect,df_cam1,df_cam2,df_3d,pcutoff,markerSize,alphaValue,color,path_h5_file,file_name,skeleton_color,view,draw_skeleton,trailpoints,xlim,ylim,zlim)\r\n    136 \r\n    137         # Once all the frames are saved, then make a movie using ffmpeg.\r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/deeplabcut/pose_estimation_3d/plotting3D.py in plot2D(cfg_3d, k, bodyparts2plot, vid_cam1, vid_cam2, bodyparts2connect, df_cam1_view, df_cam2_view, xyz_pts, pcutoff, markerSize, alphaValue, color, path_h5_file, file_name, skeleton_color, view, draw_skeleton, trailpoints, xlim, ylim, zlim)\r\n    196     df_z = np.empty((len(bodyparts2plot),numberFrames))\r\n    197     for bpindex, bp in enumerate(bodyparts2plot):\r\n--> 198         df_x[bpindex,:]=xyz_pts[scorer_3d][bp]['x'].values\r\n    199         df_y[bpindex,:]=xyz_pts[scorer_3d][bp]['y'].values\r\n    200         df_z[bpindex,:]=xyz_pts[scorer_3d][bp]['z'].values\r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py in __getitem__(self, key)\r\n   2135             return self._getitem_frame(key)\r\n   2136         elif is_mi_columns:\r\n-> 2137             return self._getitem_multilevel(key)\r\n   2138         else:\r\n   2139             return self._getitem_column(key)\r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py in _getitem_multilevel(self, key)\r\n   2179 \r\n   2180     def _getitem_multilevel(self, key):\r\n-> 2181         loc = self.columns.get_loc(key)\r\n   2182         if isinstance(loc, (slice, Series, np.ndarray, Index)):\r\n   2183             new_columns = self.columns[loc]\r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/multi.py in get_loc(self, key, method)\r\n   2069 \r\n   2070         if not isinstance(key, tuple):\r\n-> 2071             loc = self._get_level_indexer(key, level=0)\r\n   2072             return _maybe_to_slice(loc)\r\n   2073 \r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/multi.py in _get_level_indexer(self, key, level, indexer)\r\n   2359         else:\r\n   2360 \r\n-> 2361             loc = level_index.get_loc(key)\r\n   2362             if isinstance(loc, slice):\r\n   2363                 return loc\r\n\r\n/home/ubuntu/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/base.py in get_loc(self, key, method, tolerance)\r\n   2522                 return self._engine.get_loc(key)\r\n   2523             except KeyError:\r\n-> 2524                 return self._engine.get_loc(self._maybe_cast_indexer(key))\r\n   2525 \r\n   2526         indexer = self.get_indexer([key], method=method, tolerance=tolerance)\r\n\r\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\r\n\r\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\r\n\r\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()\r\n\r\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()\r\n\r\nKeyError: 'O'\r\n```\r\n\r\n\r\nmy videospath is as following:\r\n\r\n```\r\nIn [62]: videospath\r\nOut[62]: '/work/dlc-project/prehen/'\r\n```\r\n\r\nThanks\r\n","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/337/timeline","performed_via_github_app":null,"state_reason":"completed"}