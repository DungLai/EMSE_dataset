{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/179","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/179/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/179/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/179/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/179","id":400821157,"node_id":"MDU6SXNzdWU0MDA4MjExNTc=","number":179,"title":"Unable to crop videos (in manual frame-grabbing mode)","user":{"login":"zhangwujie","id":18428474,"node_id":"MDQ6VXNlcjE4NDI4NDc0","avatar_url":"https://avatars.githubusercontent.com/u/18428474?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangwujie","html_url":"https://github.com/zhangwujie","followers_url":"https://api.github.com/users/zhangwujie/followers","following_url":"https://api.github.com/users/zhangwujie/following{/other_user}","gists_url":"https://api.github.com/users/zhangwujie/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangwujie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangwujie/subscriptions","organizations_url":"https://api.github.com/users/zhangwujie/orgs","repos_url":"https://api.github.com/users/zhangwujie/repos","events_url":"https://api.github.com/users/zhangwujie/events{/privacy}","received_events_url":"https://api.github.com/users/zhangwujie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-01-18T17:32:22Z","updated_at":"2019-01-19T21:58:18Z","closed_at":"2019-01-19T21:58:18Z","author_association":"NONE","active_lock_reason":null,"body":"**Your Operating system and DeepLabCut version**\r\nWindows 10, Anaconda (using the provided environment dlc-windowsGPU.yaml), DeepLabCut 2.0.3\r\n\r\n**Describe the problem**\r\nWhen I extract frames using\r\n`deeplabcut.extract_frames(config_file,mode='manual',crop=True,checkcropping=True)`\r\nThe GUI pops up and asks whether to crop the video, and if I click yes, I get:\r\n```\r\nKeyError                                  Traceback (most recent call last)\r\nc:\\users\\analysis\\anaconda3\\envs\\dlc-windowsgpu\\lib\\site-packages\\deeplabcut\\generate_training_dataset\\frame_extraction_toolbox.py in browseDir(self, event)\r\n    169                 self.cropping = True\r\n    170                 self.basefolder = 'data-' + self.Task + '/'\r\n--> 171                 MainFrame.CheckCropping(self)\r\n    172             else:\r\n    173                 self.cropping = False\r\n\r\nc:\\users\\analysis\\anaconda3\\envs\\dlc-windowsgpu\\lib\\site-packages\\deeplabcut\\generate_training_dataset\\frame_extraction_toolbox.py in CheckCropping(self)\r\n     99         filename = self.filename\r\n    100         time = self.start\r\n--> 101         self.x1 = int(self.cfg['video_sets'][videosource]['crop'].split(',')[0])\r\n    102         self.x2 = int(self.cfg['video_sets'][videosource]['crop'].split(',')[1])\r\n    103         self.y1 = int(self.cfg['video_sets'][videosource]['crop'].split(',')[2])\r\n\r\nKeyError: 'C:\\\\Users\\\\Analysis\\\\BatVideos\\\\0104\\\\Downsampled\\\\short_video.avi'\r\n```\r\n\r\nAnd if I then click grab frame, I get:\r\n```\r\nAttributeError                            Traceback (most recent call last)\r\nc:\\users\\analysis\\anaconda3\\envs\\dlc-windowsgpu\\lib\\site-packages\\deeplabcut\\generate_training_dataset\\frame_extraction_toolbox.py in grabFrame(self, event)\r\n    211             img_name = str(output_path) +'/img'+str(self.currFrame).zfill(int(np.ceil(np.log10(self.numberFrames)))) + '.png'\r\n    212             if self.cropping:\r\n--> 213                 crop_img = frame[self.y1:self.y2, self.x1:self.x2]\r\n    214                 cv2.imwrite(img_name, cv2.cvtColor(crop_img, cv2.COLOR_RGB2BGR))\r\n    215             else:\r\n\r\nAttributeError: 'MainFrame' object has no attribute 'y1'\r\n```\r\nIf I don't crop, then grabbing frames works fine.\r\n\r\nMy config.yaml is the following:\r\n```\r\nbatch_size: 4\r\nproject_path: C:\\Users\\Analysis\\BatVideos\\0104\\Downsampled\\Results\\short-WZ-2019-01-18\r\niteration: 0\r\ncolormap: jet\r\nalphavalue: 0.5\r\ndotsize: 10\r\ny2: 624\r\ny1: 277\r\nx2: 640\r\nx1: 0\r\nmove2corner: true\r\ncorner2move2: !!python/tuple\r\n- 50\r\n- 50\r\npcutoff: 0.1\r\nsnapshotindex: -1\r\nresnet: 50\r\nTrainingFraction:\r\n- 0.95\r\ndate: Jan18\r\nscorer: WZ\r\nbodyparts:\r\n- hand\r\n- Finger1\r\n- Finger2\r\n- Joystick\r\nnumframes2pick: 4\r\nstop: 1\r\nstart: 0\r\ncropping: true\r\nvideo_sets:\r\n  C:\\Users\\Analysis\\BatVideos\\0104\\Downsampled\\Results\\short-WZ-2019-01-18\\videos\\short_video.avi:\r\n    crop: 10, 50, 10, 50\r\nTask: short\r\n```\r\nThank you very much!\r\nWujie","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/179/timeline","performed_via_github_app":null,"state_reason":"completed"}