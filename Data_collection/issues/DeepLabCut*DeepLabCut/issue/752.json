{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/752","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/752/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/752/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/752/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/752","id":638941047,"node_id":"MDU6SXNzdWU2Mzg5NDEwNDc=","number":752,"title":"Inferencebounds.yaml not found [fix: update to 2.2b6!]","user":{"login":"xneven","id":66742593,"node_id":"MDQ6VXNlcjY2NzQyNTkz","avatar_url":"https://avatars.githubusercontent.com/u/66742593?v=4","gravatar_id":"","url":"https://api.github.com/users/xneven","html_url":"https://github.com/xneven","followers_url":"https://api.github.com/users/xneven/followers","following_url":"https://api.github.com/users/xneven/following{/other_user}","gists_url":"https://api.github.com/users/xneven/gists{/gist_id}","starred_url":"https://api.github.com/users/xneven/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xneven/subscriptions","organizations_url":"https://api.github.com/users/xneven/orgs","repos_url":"https://api.github.com/users/xneven/repos","events_url":"https://api.github.com/users/xneven/events{/privacy}","received_events_url":"https://api.github.com/users/xneven/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2020-06-15T15:24:38Z","updated_at":"2020-06-24T09:06:20Z","closed_at":"2020-06-18T15:13:30Z","author_association":"NONE","active_lock_reason":null,"body":"**Your Operating system and DeepLabCut version**\r\n\r\nMacOS Catalina 10.15.4, with an Anaconda environment DLC-CPU, DLC 2.2b5\r\n\r\n**Describe the problem**\r\n\r\nAs in issue #724 maDLC fails to find the inferencebounds.yaml file. When it tries to create one, a KeyError is reported. I followed the advice from the previous discussion and made sure none of the bodypart names contain spaces and updated the .csv and .h5 files to reflect that. Since that didn't solve the issue, I created a new \"dummy\" project with a minimal number of annotated data and valid bodypart names, went through all the stages up to cross-validation and encountered the same problem. The problem arises both locally on a macOS system as well as google colabs.\r\n\r\n\r\n<details><summary>TRACEBACK</summary><p>\r\n\r\n```python\r\ndlc.evaluate_multianimal_crossvalidate(config_path, Shuffles=[1], edgewisecondition=True, leastbpts=1, init_points=20, n_iter=50, target='rpck_train')\r\n\r\n>>> dlc.evaluate_multianimal_crossvalidate(config, Shuffles=[1], edgewisecondition=True, leastbpts=1, init_points=20, n_iter=50, target='rpck_train')\r\n/Users/neven/Documents/UCL/Year 1/Rotations/Kohl Lab/DLC/Pregnancy Behaviour-Neven-2020-06-03/evaluation-results/iteration-0/Pregnancy BehaviourJun3-trainset95shuffle1  already exists!\r\n/Users/neven/Documents/UCL/Year 1/Rotations/Kohl Lab/DLC/Pregnancy Behaviour-Neven-2020-06-03/evaluation-results/iteration-0/Pregnancy BehaviourJun3-trainset95shuffle1/DLC_resnet50_Pregnancy BehaviourJun3shuffle1_36000-snapshot-36000.h5\r\nComputing distances...\r\n{'0_1': {'intra_max': '69.0', 'intra_min': '0.0', 'inter_max': '373.0', 'inter_min': '16.0'}}\r\n{'0_1': {'intra_max': '69.0', 'intra_min': '0.0', 'inter_max': '373.0', 'inter_min': '16.0'}, '0_2': {'intra_max': '103.0', 'intra_min': '1.0', 'inter_max': '370.0', 'inter_min': '19.0'}}\r\n{'0_1': {'intra_max': '69.0', 'intra_min': '0.0', 'inter_max': '373.0', 'inter_min': '16.0'}, '0_2': {'intra_max': '103.0', 'intra_min': '1.0', 'inter_max': '370.0', 'inter_min': '19.0'}, '0_3': {'intra_max': '147.0', 'intra_min': '2.0', 'inter_max': '370.0', 'inter_min': '21.0'}}\r\n{'0_1': {'intra_max': '69.0', 'intra_min': '0.0', 'inter_max': '373.0', 'inter_min': '16.0'}, '0_2': {'intra_max': '103.0', 'intra_min': '1.0', 'inter_max': '370.0', 'inter_min': '19.0'}, '0_3': {'intra_max': '147.0', 'intra_min': '2.0', 'inter_max': '370.0', 'inter_min': '21.0'}, '1_2': {'intra_max': '68.0', 'intra_min': '0.0', 'inter_max': '339.0', 'inter_min': '17.0'}}\r\n{'0_1': {'intra_max': '69.0', 'intra_min': '0.0', 'inter_max': '373.0', 'inter_min': '16.0'}, '0_2': {'intra_max': '103.0', 'intra_min': '1.0', 'inter_max': '370.0', 'inter_min': '19.0'}, '0_3': {'intra_max': '147.0', 'intra_min': '2.0', 'inter_max': '370.0', 'inter_min': '21.0'}, '1_2': {'intra_max': '68.0', 'intra_min': '0.0', 'inter_max': '339.0', 'inter_min': '17.0'}, '1_3': {'intra_max': '132.0', 'intra_min': '0.0', 'inter_max': '340.0', 'inter_min': '17.0'}}\r\n{'0_1': {'intra_max': '69.0', 'intra_min': '0.0', 'inter_max': '373.0', 'inter_min': '16.0'}, '0_2': {'intra_max': '103.0', 'intra_min': '1.0', 'inter_max': '370.0', 'inter_min': '19.0'}, '0_3': {'intra_max': '147.0', 'intra_min': '2.0', 'inter_max': '370.0', 'inter_min': '21.0'}, '1_2': {'intra_max': '68.0', 'intra_min': '0.0', 'inter_max': '339.0', 'inter_min': '17.0'}, '1_3': {'intra_max': '132.0', 'intra_min': '0.0', 'inter_max': '340.0', 'inter_min': '17.0'}, '2_3': {'intra_max': '165.0', 'intra_min': '0.0', 'inter_max': '341.0', 'inter_min': '3.0'}}\r\nTraceback (most recent call last):\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/lib/crossvalutils.py\", line 371, in bayesian_search\r\n    path_inferencebounds_config\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/deeplabcut/utils/auxiliaryfunctions.py\", line 263, in read_plainconfig\r\n    f\"Config {configname} is not found. Please make sure that the file exists.\"\r\nFileNotFoundError: Config /Users/neven/Documents/UCL/Year 1/Rotations/Kohl Lab/DLC/Pregnancy Behaviour-Neven-2020-06-03/dlc-models/iteration-0/Pregnancy BehaviourJun3-trainset95shuffle1/test/inferencebounds.yaml is not found. Please make sure that the file exists.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/evaluate_multianimal.py\", line 567, in evaluate_multianimal_crossvalidate\r\n    modelprefix=modelprefix,\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/lib/crossvalutils.py\", line 378, in bayesian_search\r\n    config_path, shuffle, trainingsetindex\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/deeplabcut/pose_estimation_tensorflow/evaluate.py\", line 140, in calculatepafdistancebounds\r\n    (Data[ind, j1, \"x\"] - Data[ind2, j1, \"x\"]) ** 2\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/pandas/core/frame.py\", line 2799, in __getitem__\r\n    return self._getitem_multilevel(key)\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/pandas/core/frame.py\", line 2849, in _getitem_multilevel\r\n    loc = self.columns.get_loc(key)\r\n  File \"/Users/neven/anaconda3/envs/DLC-CPU/lib/python3.7/site-packages/pandas/core/indexes/multi.py\", line 2672, in get_loc\r\n    return self._engine.get_loc(key)\r\n  File \"pandas/_libs/index.pyx\", line 709, in pandas._libs.index.BaseMultiIndexCodesEngine.get_loc\r\n  File \"pandas/_libs/index.pyx\", line 111, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas/_libs/index.pyx\", line 138, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 694, in pandas._libs.hashtable.UInt64HashTable.get_item\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 701, in pandas._libs.hashtable.UInt64HashTable.get_item\r\nKeyError: 157\r\n```","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/752/timeline","performed_via_github_app":null,"state_reason":"completed"}