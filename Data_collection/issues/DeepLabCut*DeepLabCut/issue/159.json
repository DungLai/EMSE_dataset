{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/159","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/159/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/159/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/159/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/159","id":394822797,"node_id":"MDU6SXNzdWUzOTQ4MjI3OTc=","number":159,"title":"Issues running create_labeled_video","user":{"login":"luigimvargas","id":46249584,"node_id":"MDQ6VXNlcjQ2MjQ5NTg0","avatar_url":"https://avatars.githubusercontent.com/u/46249584?v=4","gravatar_id":"","url":"https://api.github.com/users/luigimvargas","html_url":"https://github.com/luigimvargas","followers_url":"https://api.github.com/users/luigimvargas/followers","following_url":"https://api.github.com/users/luigimvargas/following{/other_user}","gists_url":"https://api.github.com/users/luigimvargas/gists{/gist_id}","starred_url":"https://api.github.com/users/luigimvargas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luigimvargas/subscriptions","organizations_url":"https://api.github.com/users/luigimvargas/orgs","repos_url":"https://api.github.com/users/luigimvargas/repos","events_url":"https://api.github.com/users/luigimvargas/events{/privacy}","received_events_url":"https://api.github.com/users/luigimvargas/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-12-29T20:32:50Z","updated_at":"2019-01-05T18:25:38Z","closed_at":"2019-01-05T18:25:38Z","author_association":"NONE","active_lock_reason":null,"body":"\r\nOS & Version: Windows, DLC 2.0\r\n\r\nHaving an issue with creating labeled video after successfully evaluating network and running 'analyze_videos'\r\n\r\n**Here's the command line for successful run of analyze videos:**\r\n\r\n>>> deeplabcut.analyze_videos(config_path,'d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4',save_as_csv=True,videotype='.mp4')\r\n\r\nConfig:\r\n{'all_joints': [[0], [1], [2]],\r\n 'all_joints_names': ['Nose', 'rHand', 'lHand'],\r\n 'batch_size': 4,\r\n 'bottomheight': 400,\r\n 'crop': True,\r\n 'crop_pad': 0,\r\n 'cropratio': 0.4,\r\n 'dataset': 'training-datasets\\\\iteration-0\\\\UnaugmentedDataSet_d3stimDec20\\\\d3stim_Luigim95shuffle1.mat',\r\n 'dataset_type': 'default',\r\n 'display_iters': 1000,\r\n 'fg_fraction': 0.25,\r\n 'global_scale': 0.8,\r\n 'init_weights': 'C:\\\\Users\\\\Luigim\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python36\\\\lib\\\\site-packages\\\\deeplabcut\\\\pose_estimation_tensorflow\\\\models\\\\pretrained\\\\resnet_v1_50.ckpt',\r\n 'intermediate_supervision': False,\r\n 'intermediate_supervision_layer': 12,\r\n 'leftwidth': 400,\r\n 'location_refinement': True,\r\n 'locref_huber_loss': True,\r\n 'locref_loss_weight': 0.05,\r\n 'locref_stdev': 7.2801,\r\n 'log_dir': 'log',\r\n 'max_input_size': 1000,\r\n 'mean_pixel': [123.68, 116.779, 103.939],\r\n 'metadataset': 'training-datasets\\\\iteration-0\\\\UnaugmentedDataSet_d3stimDec20\\\\Documentation_data-d3stim_95shuffle1.pickle',\r\n 'minsize': 100,\r\n 'mirror': False,\r\n 'multi_step': [[0.005, 10000],\r\n                [0.02, 430000],\r\n                [0.002, 730000],\r\n                [0.001, 1030000]],\r\n 'net_type': 'resnet_50',\r\n 'num_joints': 3,\r\n 'optimizer': 'sgd',\r\n 'pos_dist_thresh': 17,\r\n 'project_path': 'C:\\\\Users\\\\Luigim\\\\Desktop\\\\DeepLabCut-master\\\\Projects\\\\d3stim-Luigim-2018-12-20',\r\n 'regularize': False,\r\n 'rightwidth': 400,\r\n 'save_iters': 50000,\r\n 'scale_jitter_lo': 0.5,\r\n 'scale_jitter_up': 1.25,\r\n 'scoremap_dir': 'test',\r\n 'shuffle': True,\r\n 'snapshot_prefix': 'C:\\\\Users\\\\Luigim\\\\Desktop\\\\DeepLabCut-master\\\\Projects\\\\d3stim-Luigim-2018-12-20\\\\dlc-models\\\\iteration-0\\\\d3stimDec20-trainset95shuffle1\\\\test\\\\snapshot',\r\n 'stride': 8.0,\r\n 'topheight': 400,\r\n 'use_gt_segm': False,\r\n 'video': False,\r\n 'video_batch': False,\r\n 'weigh_negatives': False,\r\n 'weigh_only_present_joints': False,\r\n 'weigh_part_predictions': False,\r\n 'weight_decay': 0.0001}\r\nUsing snapshot-1030000 for model C:\\Users\\Luigim\\Desktop\\DeepLabCut-master\\Projects\\d3stim-Luigim-2018-12-20\\dlc-models\\iteration-0\\d3stimDec20-trainset95shuffle1\r\nINFO:tensorflow:Restoring parameters from C:\\Users\\Luigim\\Desktop\\DeepLabCut-master\\Projects\\d3stim-Luigim-2018-12-20\\dlc-models\\iteration-0\\d3stimDec20-trainset95shuffle1\\train\\snapshot-1030000\r\nRestoring parameters from C:\\Users\\Luigim\\Desktop\\DeepLabCut-master\\Projects\\d3stim-Luigim-2018-12-20\\dlc-models\\iteration-0\\d3stimDec20-trainset95shuffle1\\train\\snapshot-1030000\r\nd3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4\r\nStarting %  d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4\r\nLoading  d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4\r\nDuration of video [s]:  11.03 , recorded with  30.0 fps!\r\nOverall # of frames:  331 without cropped frame dimensions:  1920 1080\r\nStarting to extract posture\r\nCropping based on the x1 = 0 x2 = 1920 y1 = 400 y2 = 1080. You can adjust the cropping coordinates in the config.yaml file.\r\n340it [00:49,  7.08it/s]                                                                                               Detected frames:  331\r\nSaving results in d3stim-Luigim-2018-12-20\\videos...\r\nSaving csv poses!\r\nThe videos are analyzed. Now your research can truly start!\r\n You can create labeled videos with 'create_labeled_video'.\r\nIf the tracking is not satisfactory for some videos, consider expanding the training set. You can use the function 'extract_outlier_frames' to extract any outlier frames!\r\n\r\n**Now, on my first attempt to create the video, I get the following error:**\r\n>>>deeplabcut.create_labeled_video(config_path,['d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4'])\r\n\r\nStarting %  d3stim-Luigim-2018-12-20\\videos ['d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4']\r\nLoading  d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4 and data.\r\nThe video was not analyzed with this scorer: DeepCut_resnet50_d3stimDec20shuffle1_1030000\r\nOther scorers were found, however: ['137Mouse-5HzDeepCut_resnet50_d3stimDec20shuffle1_1030000.h5']\r\nCreating labeled video for: DeepCut_resnet50_d3stimDec20shuffle1_1030000  instead.\r\nTrue 0 1920 400 1080\r\nwarning: Error opening file (/build/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:901)\r\nwarning: d3stim-Luigim-2018-12-20/videos/137Mouse-5Hz.mp4 (/build/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:902)\r\n0\r\nFast video creation has currently not been implemented for cropped videos. Please use 'save_frames=True' to get the video.\r\n\r\n\r\n**I removed the cropping option to see if it would help, but it did not. The above command seems to change my working directory to /videos, so following attempts just list the video files, and give me a different error:**\r\n\r\n>>>deeplabcut.create_labeled_video(config_path,['137Mouse-5Hz.mp4'])\r\nStarting %  . ['137Mouse-5Hz.mp4']\r\nLoading  137Mouse-5Hz.mp4 and data.\r\nThe video was not analyzed with this scorer: DeepCut_resnet50_d3stimDec20shuffle1_1030000\r\nNo other scorers were found, please use the function 'analyze_videos' first.\r\n\r\nI don't understand what cause this error; the outputs of analyze_videos seems to work as expected.\r\n\r\nI would greatly appreciate some help troubleshooting this error.","closed_by":{"login":"luigimvargas","id":46249584,"node_id":"MDQ6VXNlcjQ2MjQ5NTg0","avatar_url":"https://avatars.githubusercontent.com/u/46249584?v=4","gravatar_id":"","url":"https://api.github.com/users/luigimvargas","html_url":"https://github.com/luigimvargas","followers_url":"https://api.github.com/users/luigimvargas/followers","following_url":"https://api.github.com/users/luigimvargas/following{/other_user}","gists_url":"https://api.github.com/users/luigimvargas/gists{/gist_id}","starred_url":"https://api.github.com/users/luigimvargas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luigimvargas/subscriptions","organizations_url":"https://api.github.com/users/luigimvargas/orgs","repos_url":"https://api.github.com/users/luigimvargas/repos","events_url":"https://api.github.com/users/luigimvargas/events{/privacy}","received_events_url":"https://api.github.com/users/luigimvargas/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/159/timeline","performed_via_github_app":null,"state_reason":"completed"}