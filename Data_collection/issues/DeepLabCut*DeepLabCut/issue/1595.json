{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1595","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1595/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1595/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1595/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1595","id":1062844276,"node_id":"I_kwDOB5BM6c4_Wbd0","number":1595,"title":"Unable to use plot_trajectories function","user":{"login":"davidmurray","id":545502,"node_id":"MDQ6VXNlcjU0NTUwMg==","avatar_url":"https://avatars.githubusercontent.com/u/545502?v=4","gravatar_id":"","url":"https://api.github.com/users/davidmurray","html_url":"https://github.com/davidmurray","followers_url":"https://api.github.com/users/davidmurray/followers","following_url":"https://api.github.com/users/davidmurray/following{/other_user}","gists_url":"https://api.github.com/users/davidmurray/gists{/gist_id}","starred_url":"https://api.github.com/users/davidmurray/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidmurray/subscriptions","organizations_url":"https://api.github.com/users/davidmurray/orgs","repos_url":"https://api.github.com/users/davidmurray/repos","events_url":"https://api.github.com/users/davidmurray/events{/privacy}","received_events_url":"https://api.github.com/users/davidmurray/received_events","type":"User","site_admin":false},"labels":[{"id":1313079487,"node_id":"MDU6TGFiZWwxMzEzMDc5NDg3","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/howtousedlc","name":"howtousedlc","color":"a1b3f4","default":false,"description":"issue regarding the use of DeepLabCut"}],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-11-24T19:56:54Z","updated_at":"2021-11-26T17:24:17Z","closed_at":"2021-11-26T17:24:17Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Bug description\r\n\r\nHi,\r\n\r\nI am using DeepLabCut in **single animal mode**. I have trained a model and analyzed a video, but I am unable to use the `plot_trajectories` function. Here are the lines of code that I am running in my jupyter notebook:\r\n\r\n1. `deeplabcut.create_training_dataset(path_config_file, net_type='resnet_50', augmenter_type='imgaug')`\r\n2. `deeplabcut.train_network(path_config_file, shuffle=1, displayiters=10, saveiters=500, gputouse=0)`\r\n3. `deeplabcut.evaluate_network(path_config_file,plotting=True)`\r\nResults: \r\n```c\r\nRunning  DLC_resnet50_wall_camera1Nov5shuffle1_211500  with # of training iterations: 211500\r\nThis net has already been evaluated!\r\nPlotting...(attention scale might be inconsistent in comparison to when data was analyzed; i.e. if you used rescale)\r\n100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 150/150 [01:29<00:00,  1.67it/s]\r\n```\r\n4. `deeplabcut.analyze_videos(path_config_file,\"/home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4\", videotype=\"mp4\")`\r\nResults:\r\n```c\r\nUsing snapshot-211500 for model /home/comportement/GBM8970-Comportement/dlc_projects/floor_camera1-GBM8970-2021-11-09/dlc-models/iteration-0/wall_camera1Nov5-trainset95shuffle1\r\n2021-11-24 14:49:46.936598: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.937110: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties: \r\npciBusID: 0000:21:00.0 name: GeForce RTX 2060 computeCapability: 7.5\r\ncoreClock: 1.755GHz coreCount: 30 deviceMemorySize: 5.79GiB deviceMemoryBandwidth: 312.97GiB/s\r\n2021-11-24 14:49:46.937156: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.937573: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 1 with properties: \r\npciBusID: 0000:49:00.0 name: GeForce RTX 2060 computeCapability: 7.5\r\ncoreClock: 1.755GHz coreCount: 30 deviceMemorySize: 5.79GiB deviceMemoryBandwidth: 312.97GiB/s\r\n2021-11-24 14:49:46.937608: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2021-11-24 14:49:46.937615: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2021-11-24 14:49:46.937622: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2021-11-24 14:49:46.937628: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2021-11-24 14:49:46.937634: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2021-11-24 14:49:46.937640: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2021-11-24 14:49:46.937647: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2021-11-24 14:49:46.937681: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.938116: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.938550: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.938981: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.939388: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1703] Adding visible gpu devices: 0, 1\r\n2021-11-24 14:49:46.939412: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2021-11-24 14:49:46.939416: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1108]      0 1 \r\n2021-11-24 14:49:46.939418: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] 0:   N N \r\n2021-11-24 14:49:46.939420: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] 1:   N N \r\n2021-11-24 14:49:46.939495: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.939946: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.940385: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.940797: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1247] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5365 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2060, pci bus id: 0000:21:00.0, compute capability: 7.5)\r\n2021-11-24 14:49:46.940920: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-11-24 14:49:46.941342: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1247] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 5489 MB memory) -> physical GPU (device: 1, name: GeForce RTX 2060, pci bus id: 0000:49:00.0, compute capability: 7.5)\r\nStarting to analyze %  /home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4\r\nLoading  /home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4\r\nDuration of video [s]:  63.0 , recorded with  29.97 fps!\r\nOverall # of frames:  1888  found with (before cropping) frame dimensions:  1280 720\r\nStarting to extract posture\r\n  0%|                                                                                                                                           | 0/1888 [00:00<?, ?it/s]2021-11-24 14:49:48.067030: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2021-11-24 14:49:49.176477: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n1890it [01:41, 18.63it/s]                                                                                                                                                \r\nSaving results in /home/comportement/GBM8970-Comportement...\r\nThe videos are analyzed. Now your research can truly start! \r\n You can create labeled videos with 'create_labeled_video'\r\nIf the tracking is not satisfactory for some videos, consider expanding the training set. You can use the function 'extract_outlier_frames' to extract a few representative outlier frames.\r\n```\r\n\r\n\r\n5. `deeplabcut.create_labeled_video(path_config_file,\"/home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4\", videotype=\"mp4\")`\r\nResults:\r\n```c\r\nStarting to process video: /home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4\r\nLoading /home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4 and data.\r\nDuration of video [s]: 63.0, recorded with 29.97 fps!\r\nOverall # of frames: 1888 with cropped frame dimensions: 1280 720\r\nGenerating frames and creating video.\r\n100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1888/1888 [00:08<00:00, 217.65it/s]\r\n```\r\n\r\n**Note**: this video is fine and it has the annotations correctly drawn as one would expect, so the model works fine.\r\n\r\n6. `deeplabcut.plot_trajectories(path_config_file, [\"/home/comportement/GBM8970-\r\n**Error**:\r\n```c\r\nComportement/floor_camera1_TEST_VIDEO_fixed.mp4\"], videotype=\"mp4\", track_method=\"box\", showfigures=True)`\r\nLoading  /home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4 and data.\r\nNo unfiltered data file found in /home/comportement/GBM8970-Comportement for video floor_camera1_TEST_VIDEO_fixed and scorer DLC_resnet50_wall_camera1Nov5shuffle1_211500 and box tracker.\r\nNo detection data found in /home/comportement/GBM8970-Comportement for video floor_camera1_TEST_VIDEO_fixed, scorer DLC_resnet50_wall_camera1Nov5shuffle1_211500, and tracker box\r\nMake sure /home/comportement/GBM8970-Comportement/floor_camera1_TEST_VIDEO_fixed.mp4 was previously analyzed, and that detections were successively converted to tracklets using \"deeplabcut.convert_detections2tracklets()\" and \"deeplabcut.stitch_tracklets()\".\r\nPlots could not be created! Videos were not evaluated with the current scorer DLC_resnet50_wall_camera1Nov5shuffle1_211500.\r\n```\r\nThis is what isn't working and after searching the web, I don't really know how to fix this.\r\nJust to be clear, this is a *single animal project*, so from what I understand, convert_detections2tracklets and stitch_tracklets are not applicable.\r\nI am trying to obtain [an image like this](https://user-images.githubusercontent.com/545502/143304502-8cb589bb-cf73-4a18-a716-5922a17c78a2.png).\r\n\r\nHere is what is in the current folder:\r\n\r\n```c\r\n(base) comportement@threadripper2:~/GBM8970-Comportement$ ls -la\r\ntotal 132584\r\ndrwxrwxr-x  6 comportement comportement     4096 Nov 24 14:55 .\r\ndrwxr-xr-x 14 comportement comportement     4096 Nov 17 12:56 ..\r\ndrwxrwxr-x  4 comportement comportement     4096 Nov 16 12:15 dlc_projects\r\ndrwxrwxr-x  2 comportement comportement     4096 Nov 16 12:15 env\r\n-rw-rw-r--  1 comportement comportement   609655 Nov 24 14:51 floor_camera1_TEST_VIDEO_fixedDLC_resnet50_wall_camera1Nov5shuffle1_211500.h5\r\n-rw-rw-r--  1 comportement comportement 29921287 Nov 24 14:52 floor_camera1_TEST_VIDEO_fixedDLC_resnet50_wall_camera1Nov5shuffle1_211500_labeled.mp4\r\n-rw-rw-r--  1 comportement comportement     1852 Nov 24 14:51 floor_camera1_TEST_VIDEO_fixedDLC_resnet50_wall_camera1Nov5shuffle1_211500_meta.pickle\r\n-rw-rw-r--  1 comportement comportement 19047570 Nov 16 21:38 floor_camera1_TEST_VIDEO_fixed.mp4\r\ndrwxrwxr-x  2 comportement comportement     4096 Nov 16 12:29 .ipynb_checkpoints\r\n-rw-rw-r--  1 comportement comportement  1153160 Nov 24 14:55 train_notebook.ipynb\r\n```\r\n\r\nThank you very much in advance for your help,\r\nDavid Murray\r\n\r\n### Operating System\r\n\r\nUbuntu 20.04\r\n\r\n### DeepLabCut version\r\n\r\ndlc version 2.2.0.3 (latest pip version)\r\n\r\n### DeepLabCut mode\r\n\r\nsingle animal\r\n\r\n### Device type\r\n\r\nNvidia GeForce RTX 2060\r\nCUDA 11.2\r\n\r\n### Steps To Reproduce\r\n\r\n_No response_\r\n\r\n### Relevant log output\r\n\r\n_No response_\r\n\r\n### Anything else?\r\n\r\n_No response_\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"davidmurray","id":545502,"node_id":"MDQ6VXNlcjU0NTUwMg==","avatar_url":"https://avatars.githubusercontent.com/u/545502?v=4","gravatar_id":"","url":"https://api.github.com/users/davidmurray","html_url":"https://github.com/davidmurray","followers_url":"https://api.github.com/users/davidmurray/followers","following_url":"https://api.github.com/users/davidmurray/following{/other_user}","gists_url":"https://api.github.com/users/davidmurray/gists{/gist_id}","starred_url":"https://api.github.com/users/davidmurray/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidmurray/subscriptions","organizations_url":"https://api.github.com/users/davidmurray/orgs","repos_url":"https://api.github.com/users/davidmurray/repos","events_url":"https://api.github.com/users/davidmurray/events{/privacy}","received_events_url":"https://api.github.com/users/davidmurray/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1595/timeline","performed_via_github_app":null,"state_reason":"completed"}