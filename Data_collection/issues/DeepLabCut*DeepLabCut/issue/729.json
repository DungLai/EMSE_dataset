{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/729","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/729/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/729/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/729/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/729","id":631552423,"node_id":"MDU6SXNzdWU2MzE1NTI0MjM=","number":729,"title":"Multianimal GPU training not starting on DLC 2.2b6 (AttributeError: module 'numpy.random' has no attribute 'bit_generator)","user":{"login":"alesantuz","id":7524938,"node_id":"MDQ6VXNlcjc1MjQ5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/7524938?v=4","gravatar_id":"","url":"https://api.github.com/users/alesantuz","html_url":"https://github.com/alesantuz","followers_url":"https://api.github.com/users/alesantuz/followers","following_url":"https://api.github.com/users/alesantuz/following{/other_user}","gists_url":"https://api.github.com/users/alesantuz/gists{/gist_id}","starred_url":"https://api.github.com/users/alesantuz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alesantuz/subscriptions","organizations_url":"https://api.github.com/users/alesantuz/orgs","repos_url":"https://api.github.com/users/alesantuz/repos","events_url":"https://api.github.com/users/alesantuz/events{/privacy}","received_events_url":"https://api.github.com/users/alesantuz/received_events","type":"User","site_admin":false},"labels":[{"id":1010467338,"node_id":"MDU6TGFiZWwxMDEwNDY3MzM4","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/Installation","name":"Installation","color":"ecfca6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-06-05T12:27:03Z","updated_at":"2020-06-09T10:08:25Z","closed_at":"2020-06-09T09:53:00Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"OS: Windows 10 build 18363\r\nDeepLabCut Version: 2.2b6\r\nAnaconda env used: dlc-windowsGPU\r\n\r\nConverted pre-2.2 labels to multianimal with (works flawlessly, thanks for updating):\r\n```python\r\ndeeplabcut.convert2_maDLC(path_config_file, userfeedback=False)\r\n```\r\nCreated the new multianimal dataset with:\r\n```python\r\ndeeplabcut.create_multianimaltraining_dataset(path_config_file)\r\n```\r\nStarted training with (displayiters=10 just for checking):\r\n```python\r\ndeeplabcut.train_network(path_config_file, shuffle=1, displayiters=10, saveiters=10000, max_snapshots_to_keep=2)\r\n```\r\nUnfortunately training on GPU does not start and appears to be frozen (I let it run for around 4 hours):\r\n\r\n![Annotation 2020-06-05 092209](https://user-images.githubusercontent.com/7524938/83875794-090bd900-a738-11ea-800a-956a54b86e59.png)\r\n\r\nThis happened several times and I could never start the training. Please let me know if and how I can provide more info on this issue.\r\n\r\nTraceback:\r\n```python\r\nActivating limb prediction...\r\nStarting with multi-animal imaug + adam pose-dataset loader.\r\nBatch Size is 8\r\nGetting specs multi-animal-imgaug 52 17\r\nInitializing ResNet\r\nLoading ImageNet-pretrained resnet_50\r\n2020-06-05 05:00:56.774839: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2\r\n2020-06-05 05:00:57.033499: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties:\r\nname: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.635\r\npciBusID: 0000:17:00.0\r\ntotalMemory: 11.00GiB freeMemory: 8.95GiB\r\n2020-06-05 05:00:57.153841: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 1 with properties:\r\nname: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.635\r\npciBusID: 0000:65:00.0\r\ntotalMemory: 11.00GiB freeMemory: 8.95GiB\r\n2020-06-05 05:00:57.159104: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0, 1\r\n2020-06-05 05:00:57.816870: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2020-06-05 05:00:57.819636: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 1\r\n2020-06-05 05:00:57.821401: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N Y\r\n2020-06-05 05:00:57.823139: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 1:   Y N\r\n2020-06-05 05:00:57.824973: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 8618 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2080 Ti, pci bus id: 0000:17:00.0, compute capability: 7.5)\r\n2020-06-05 05:00:57.831857: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 8618 MB memory) -> physical GPU (device: 1, name: GeForce RTX 2080 Ti, pci bus id: 0000:65:00.0, compute capability: 7.5)\r\nException in thread Thread-130:\r\nTraceback (most recent call last):\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\train_multianimal.py\", line 76, in load_and_enqueue\r\n    batch_np = dataset.next_batch()\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\dataset\\pose_multianimal_imgaug.py\", line 247, in next_batch\r\n    height=target_size[0], width=target_size[1], apply_prob=0.5\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\deeplabcut\\pose_estimation_tensorflow\\dataset\\pose_multianimal_imgaug.py\", line 80, in build_augmentation_pipeline\r\n    pipeline = iaa.Sequential(random_order=False)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\augmenters\\meta.py\", line 2928, in __init__\r\n    random_state=random_state)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\augmenters\\meta.py\", line 283, in __init__\r\n    self.random_state = iarandom.RNG(random_state)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 142, in __init__\r\n    self.generator = normalize_generator_(generator)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 841, in normalize_generator_\r\n    return _normalize_generator_np117_(generator)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 846, in _normalize_generator_np117_\r\n    return get_global_rng().generator\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 738, in get_global_rng\r\n    GLOBAL_RNG = RNG(convert_seed_to_generator(seed))\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 142, in __init__\r\n    self.generator = normalize_generator_(generator)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 841, in normalize_generator_\r\n    return _normalize_generator_np117_(generator)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\dlc-windowsGPU\\lib\\site-packages\\imgaug\\random.py\", line 851, in _normalize_generator_np117_\r\n    elif isinstance(generator, np.random.bit_generator.BitGenerator):\r\nAttributeError: module 'numpy.random' has no attribute 'bit_generator'\r\n```","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/729/timeline","performed_via_github_app":null,"state_reason":"completed"}