{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2044","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2044/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2044/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2044/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/2044","id":1444424935,"node_id":"I_kwDOB5BM6c5WGCzn","number":2044,"title":"Error due to PyTorch when trying to install in development mode","user":{"login":"jonahpearl","id":68478436,"node_id":"MDQ6VXNlcjY4NDc4NDM2","avatar_url":"https://avatars.githubusercontent.com/u/68478436?v=4","gravatar_id":"","url":"https://api.github.com/users/jonahpearl","html_url":"https://github.com/jonahpearl","followers_url":"https://api.github.com/users/jonahpearl/followers","following_url":"https://api.github.com/users/jonahpearl/following{/other_user}","gists_url":"https://api.github.com/users/jonahpearl/gists{/gist_id}","starred_url":"https://api.github.com/users/jonahpearl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonahpearl/subscriptions","organizations_url":"https://api.github.com/users/jonahpearl/orgs","repos_url":"https://api.github.com/users/jonahpearl/repos","events_url":"https://api.github.com/users/jonahpearl/events{/privacy}","received_events_url":"https://api.github.com/users/jonahpearl/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-11-10T19:09:25Z","updated_at":"2022-12-12T16:11:31Z","closed_at":"2022-12-12T16:11:31Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Bug description\n\nI wanted to be able to do some hacking in the DLC code (related to #2036; specifically, adding an option to pass a manually-chosen list of frames for refinement via cli), so I tried to make a developer install. I removed the `deeplabcut` requirement from the yaml, made a conda env with everything *except* deeplabcut, then ran `pip install -e \".[tf]\"` from within the cloned directory to install dlc. (I'm on a CLI so no gui.)This almost worked perfectly, except I got an odd unexpected error. Running `import deeplabcut` from a python interpreter gave an error about circular imports, but then it succeeds the second time:\r\n\r\n```\r\n2022-11-10 14:02:49.250879: I tensorflow/core/platform/cpu_feature_guard.cc:193] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F AVX512_VNNI FMA\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2022-11-10 14:02:49.370427: I tensorflow/core/util/util.cc:169] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.\r\n2022-11-10 14:02:49.404578: E tensorflow/stream_executor/cuda/cuda_blas.cc:2981] Unable to register cuBLAS factory: Attempting to register factory for plugin cuBLAS when one has already been registered\r\n2022-11-10 14:02:50.503183: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libnvinfer.so.7'; dlerror: libnvinfer.so.7: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /n/app/cuda/11.2/lib64:/n/app/gcc/6.2.0/lib64:/n/app/gcc/6.2.0/lib\r\n2022-11-10 14:02:50.503364: W tensorflow/stream_executor/platform/default/dso_loader.cc:64] Could not load dynamic library 'libnvinfer_plugin.so.7'; dlerror: libnvinfer_plugin.so.7: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /n/app/cuda/11.2/lib64:/n/app/gcc/6.2.0/lib64:/n/app/gcc/6.2.0/lib\r\n2022-11-10 14:02:50.503419: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning: Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.\r\nLoading DLC 2.3rc2...\r\nDLC loaded in light mode; you cannot use any GUI (labeling, relabeling and standalone GUI)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/__init__.py\", line 35, in <module>\r\n    from deeplabcut.create_project import (\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/create_project/__init__.py\", line 2, in <module>\r\n    from deeplabcut.create_project.demo_data import load_demo_data\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/create_project/demo_data.py\", line 15, in <module>\r\n    from deeplabcut.utils import auxiliaryfunctions\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/utils/__init__.py\", line 1, in <module>\r\n    from deeplabcut.utils.auxfun_multianimal import *\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/utils/auxfun_multianimal.py\", line 24, in <module>\r\n    from deeplabcut.utils import auxiliaryfunctions, conversioncode\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/utils/auxiliaryfunctions.py\", line 21, in <module>\r\n    from deeplabcut.pose_estimation_tensorflow.lib.trackingutils import TRACK_METHODS\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/pose_estimation_tensorflow/__init__.py\", line 20, in <module>\r\n    from deeplabcut.pose_estimation_tensorflow.predict_videos import *\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/pose_estimation_tensorflow/predict_videos.py\", line 36, in <module>\r\n    from deeplabcut.refine_training_dataset.stitch import stitch_tracklets\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/refine_training_dataset/__init__.py\", line 12, in <module>\r\n    from deeplabcut.refine_training_dataset.tracklets import *\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/refine_training_dataset/tracklets.py\", line 5, in <module>\r\n    from deeplabcut.post_processing import columnwise_spline_interp\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/post_processing/__init__.py\", line 12, in <module>\r\n    from deeplabcut.post_processing.filtering import *\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/post_processing/filtering.py\", line 18, in <module>\r\n    from deeplabcut.refine_training_dataset.outlier_frames import FitSARIMAXModel\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/refine_training_dataset/outlier_frames.py\", line 24, in <module>\r\n    from deeplabcut.utils import (\r\n  File \"/home/jop9552/datta-lab/DeepLabCut/deeplabcut/utils/visualization.py\", line 20, in <module>\r\n    from deeplabcut.utils.auxiliaryfunctions import attempttomakefolder\r\nImportError: cannot import name 'attempttomakefolder' from partially initialized module 'deeplabcut.utils.auxiliaryfunctions' (most likely due to a circular import) (/home/jop9552/datta-lab/DeepLabCut/deeplabcut/utils/auxiliaryfunctions.py)\r\n>>> import deeplabcut\r\nLoading DLC 2.3rc2...\r\nDLC loaded in light mode; you cannot use any GUI (labeling, relabeling and standalone GUI)\r\n```\r\n\r\nAfter this happened, I made a clean conda env + install of normal DLC (keeping it in the conda yaml) and it worked fine. I noticed the version of DLC differs between the normal and the dev versions: the normal one I just cloned says `Loading DLC 2.2.3...` vs `Loading DLC 2.3rc2...` in the development version. But I made both from the same clone which I grabbed just an hour ago! So I'm confused as to how they can have different versions. \r\n\r\nPlease let me know if there's a better way to run DLC in dev mode so that I can run tests and contribute :)\n\n### Operating System\n\nNAME=\"CentOS Linux\"\r\nVERSION=\"7 (Core)\"\r\nID=\"centos\"\r\nID_LIKE=\"rhel fedora\"\r\nVERSION_ID=\"7\"\r\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\r\n\r\n3.10.0-1160.76.1.el7.x86_64\n\n### DeepLabCut version\n\n2.2.3 / 2.3rc2\n\n### DeepLabCut mode\n\nsingle animal\n\n### Device type\n\ngpu\n\n### Steps To Reproduce\n\nYAML file (can't put yamls on gh so here it is as a txt): [DEEPLABCUT_dev.txt](https://github.com/DeepLabCut/DeepLabCut/files/9983938/DEEPLABCUT_dev.txt)\r\n\r\n\"\"\"\r\nconda env create -f DEEPLABCUT_dev.yaml\r\ncd [your dlc clone]\r\npip install -e \".[tf]\"\r\ncd [anywhere other than the dlc directory]\r\nconda activate DEEPLABCUT_dev\r\npython\r\n>> import deeplabcut\r\n\"\"\"\r\n\n\n### Relevant log output\n\n_No response_\n\n### Anything else?\n\n_No response_\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/2044/timeline","performed_via_github_app":null,"state_reason":"completed"}