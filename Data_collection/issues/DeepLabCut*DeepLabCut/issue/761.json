{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/761","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/761/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/761/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/761/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/761","id":642450999,"node_id":"MDU6SXNzdWU2NDI0NTA5OTk=","number":761,"title":"Installation check failed GPU Windows10","user":{"login":"neurologic","id":4777333,"node_id":"MDQ6VXNlcjQ3NzczMzM=","avatar_url":"https://avatars.githubusercontent.com/u/4777333?v=4","gravatar_id":"","url":"https://api.github.com/users/neurologic","html_url":"https://github.com/neurologic","followers_url":"https://api.github.com/users/neurologic/followers","following_url":"https://api.github.com/users/neurologic/following{/other_user}","gists_url":"https://api.github.com/users/neurologic/gists{/gist_id}","starred_url":"https://api.github.com/users/neurologic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neurologic/subscriptions","organizations_url":"https://api.github.com/users/neurologic/orgs","repos_url":"https://api.github.com/users/neurologic/repos","events_url":"https://api.github.com/users/neurologic/events{/privacy}","received_events_url":"https://api.github.com/users/neurologic/received_events","type":"User","site_admin":false},"labels":[{"id":1010467338,"node_id":"MDU6TGFiZWwxMDEwNDY3MzM4","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/Installation","name":"Installation","color":"ecfca6","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"assignees":[{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2020-06-20T21:48:13Z","updated_at":"2020-06-21T20:53:10Z","closed_at":"2020-06-21T16:21:05Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for all of the detailed instructions on the installation process. I tried to methodically followed all of the steps, and I read the linked docs for version compatability, but one of the first tests of success has already failed. I know that there are a lot of versions and parameters so it might be difficult for you to help. But I am new to using many of these components so I may have just misunderstood something in all of the documentation that you provided and I am hoping my issue is apparent to you.\r\n\r\nOS: Windows10\r\nGPU: Quadro P4000 8GB\r\nDeepLabCut Version: 2.1.8.2 (the version that came with the DLC-GPU environment, though I will ultimately be using the multianimal tracking versions once I get the basics working.**\r\nAnaconda env used: created using DLC-GPU.yaml\r\n\r\nAll of the install GUIs completed successfully (driver, CUDA, VS2017)\r\nMy build has failed the following error check that was suggested:\r\n```\r\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\r\n```\r\nHere is the output of that command (in ipython after importing tensorflow):\r\n<details><summary>Code output</summary><p>\r\n\r\n```python\r\n[In [2]: tf.Session(config=tf.ConfigProto(log_device_placement=True))\r\n2020-06-20 14:08:29.820950: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2\r\n2020-06-20 14:08:30.246933: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties:\r\nname: Quadro P4000 major: 6 minor: 1 memoryClockRate(GHz): 1.48\r\npciBusID: 0000:65:00.0\r\ntotalMemory: 8.00GiB freeMemory: 6.65GiB\r\n2020-06-20 14:08:30.252835: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n---------------------------------------------------------------------------\r\nInternalError                             Traceback (most recent call last)\r\n<ipython-input-2-45efb92717fc> in <module>\r\n----> 1 tf.Session(config=tf.ConfigProto(log_device_placement=True))\r\n\r\n~\\Anaconda3\\envs\\DLC-GPU\\lib\\site-packages\\tensorflow\\python\\client\\session.py in __init__(self, target, graph, config)\r\n   1549\r\n   1550     \"\"\"\r\n-> 1551     super(Session, self).__init__(target, graph, config=config)\r\n   1552     # NOTE(mrry): Create these on first `__enter__` to avoid a reference cycle.\r\n   1553     self._default_graph_context_manager = None\r\n\r\n~\\Anaconda3\\envs\\DLC-GPU\\lib\\site-packages\\tensorflow\\python\\client\\session.py in __init__(self, target, graph, config)\r\n    674     try:\r\n    675       # pylint: disable=protected-access\r\n--> 676       self._session = tf_session.TF_NewSessionRef(self._graph._c_graph, opts)\r\n    677       # pylint: enable=protected-access\r\n    678     finally:\r\n\r\nInternalError: cudaGetDevice() failed. Status: CUDA driver version is insufficient for CUDA runtime version\r\n]\r\n```\r\n\r\n</p></details>\r\n\r\n\r\n**The following are the steps that I took to install on my new computer**\r\n1. Installed most recent Anaconda with python 3.7 64bit (I have done this before and am very familiar using python, etc)\r\n2. Downloaded and Installed an NVIDIA driver that is compatible with my GPU and with CUDA 9.1: \r\nQuadro Driver 390 -- R390 U13 392.59; Windows10 64 bit standard.\r\nInstall was via the .exe GUI\r\nhttps://www.nvidia.com/Download/driverResults.aspx/157261/en-us\r\n3. Downloaded and attempted to install CUDA 9.1:\r\nCUDA 9.1.85_Win10 (+the three patches)\r\nhttps://developer.nvidia.com/cuda-91-download-archive?\r\nInstall was via the .exe GUItarget_os=Windows&target_arch=x86_64&target_version=10&target_type=exelocal\r\n**The GUI install stalled and gave feedback that no visual studio was installed and asked me to install it.\r\n4. I quit the CUDA install GUI\r\n5. Downloaded and installed Visual studio 2017 Community.\r\nFrom googling, I found numerous threads naming compatibility between CUDA 9.1 and VS2017 community. However, there was also lots of information that CuDA9.1 specifically needed VS 2017 15.4.5 and that this was no longer available. I could not find it and decided to try whichever VS2017 I could get.\r\nInstall of VS via GUI but WITHOUT workstation packages.\r\n6. Tried CUDA install GUI again. This time is succeeded to completion.\r\n7. Installed and created the conda environment from DLC-GPU.yaml\r\n\r\nPhew....\r\nI think that is all of the steps laid out in the instructions and sub-linked instructions.\r\n\r\nI then went on in the instructions to check the CUDA and tensorflow installation:\r\nipython\r\nimport tensorflow as tf\r\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\r\n\r\nThis failed (the error output is posted above in this message where I stated my problem).\r\n\r\nI did dig a little bit through the troubleshooting links so far and as per this site (https://www.pytorials.com/install-tensorflow-gpu-windows/) I tried nvcc --version to check if CUDAtoolkit is set to path.\r\nCode Output was successful:\r\n<details><summary>Code output</summary><p>\r\n\r\n[C:\\Users\\kperks>nvcc --version\r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2017 NVIDIA Corporation\r\nBuilt on Fri_Nov__3_21:08:12_Central_Daylight_Time_2017\r\nCuda compilation tools, release 9.1, V9.1.85]\r\n]\r\n\r\n</p></details>\r\nI also downloaded and installed cuDNN 7.0.5 as per the extract/copy instructions on that page \r\n\r\nThe tensorflow check in ipython still fails in the same way. \r\n\r\nI feel very stuck and this is the first time I am working with GPU computing so do not have a lot of background to contextualize the troubleshooting. \r\nAny help/advice would be deeply appreciated. \r\n\r\nThank you again for all your work on DLC! I am really excited to implement it in my research.\r\n\r\n-Krista\r\n","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/761/timeline","performed_via_github_app":null,"state_reason":"completed"}