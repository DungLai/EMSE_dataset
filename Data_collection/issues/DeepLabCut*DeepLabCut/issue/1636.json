{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1636","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1636/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1636/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1636/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1636","id":1097231284,"node_id":"I_kwDOB5BM6c5BZmu0","number":1636,"title":"merge_datasets and/or create_training_dataset bug with projects/folder structure","user":{"login":"juliencarponcy","id":41296546,"node_id":"MDQ6VXNlcjQxMjk2NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/41296546?v=4","gravatar_id":"","url":"https://api.github.com/users/juliencarponcy","html_url":"https://github.com/juliencarponcy","followers_url":"https://api.github.com/users/juliencarponcy/followers","following_url":"https://api.github.com/users/juliencarponcy/following{/other_user}","gists_url":"https://api.github.com/users/juliencarponcy/gists{/gist_id}","starred_url":"https://api.github.com/users/juliencarponcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juliencarponcy/subscriptions","organizations_url":"https://api.github.com/users/juliencarponcy/orgs","repos_url":"https://api.github.com/users/juliencarponcy/repos","events_url":"https://api.github.com/users/juliencarponcy/events{/privacy}","received_events_url":"https://api.github.com/users/juliencarponcy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false},"assignees":[{"login":"jeylau","id":30733203,"node_id":"MDQ6VXNlcjMwNzMzMjAz","avatar_url":"https://avatars.githubusercontent.com/u/30733203?v=4","gravatar_id":"","url":"https://api.github.com/users/jeylau","html_url":"https://github.com/jeylau","followers_url":"https://api.github.com/users/jeylau/followers","following_url":"https://api.github.com/users/jeylau/following{/other_user}","gists_url":"https://api.github.com/users/jeylau/gists{/gist_id}","starred_url":"https://api.github.com/users/jeylau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeylau/subscriptions","organizations_url":"https://api.github.com/users/jeylau/orgs","repos_url":"https://api.github.com/users/jeylau/repos","events_url":"https://api.github.com/users/jeylau/events{/privacy}","received_events_url":"https://api.github.com/users/jeylau/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2022-01-09T15:52:12Z","updated_at":"2022-01-21T16:27:36Z","closed_at":"2022-01-21T16:27:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Bug description\r\n\r\nHi,\r\n\r\nAfter having done already a couple of iterations and having good performance, I wanted to add frames from a particular animal which has a feet in the wrong place, altering performance.\r\nI extracted frames, labelled them, and used check labels perfectly, however, I have alsways the same bug (GUI or python CLI) when trying to create another dataset. \r\nI can see that the iterations number are automatically modified in the conig.yaml and i most likely messed up with that or folder structure somehow but i cannot get where. \r\nthe error is included in log below\r\n\r\nI tried to manually clean the folders restart with lower number of iterations including going back to 0 and 1 when i have filled up training-datasets repositories (csv h pickle and mat) but it looks like the particular failure i originated do not pass argument checks on trainingsetmanipulations.py, whatever i can input now in config. Whether it worked once before... \r\nI attached my training-datasets folder for the project and config.yaml file as the .zip attachment. You will see that I already messed up a bit trying to play with shuffles on iteration 0 :(\r\n\r\nThank you very much for help me patching up that messed up folder structure or resolve that argument bug\r\n[side_2_hands-julien-2022-01-05.zip](https://github.com/DeepLabCut/DeepLabCut/files/7835368/side_2_hands-julien-2022-01-05.zip)\r\n.\r\n\r\n### Operating System\r\n\r\nWindows 10\r\n\r\n### DeepLabCut version\r\n\r\ndlc version 2.2.0.5\r\n\r\n### DeepLabCut mode\r\n\r\nsingle animal\r\n\r\n### Device type\r\n\r\ngpu\r\n\r\n### Steps To Reproduce\r\n\r\nI idoubt that the error could be easily reproducible without the full project folder structure and data.\r\nPlease let me know if some part of the folders or files are needed to understand the issue.\r\n\r\n### Relevant log output\r\n\r\nSorry for the fornatting, it would come even worst formatting before edit as a single well spaced line.\r\n\r\n\r\ndeeplabcut.create_training_dataset(path_config_file)                                                                                                                                                            Traceback (most recent call last):                                                                                                                                                                                    File \"<stdin>\", line 1, in <module>                                                                                                                                                                                 File \"C:\\Users\\phar0732\\Documents\\GitHub\\DeepLabCut\\deeplabcut\\generate_training_dataset\\trainingsetmanipulation.py\", line 745, in create_training_dataset                                                            Path(os.path.join(project_path, trainingsetfolder)),                                                                                                                                                              File \"C:\\Users\\phar0732\\Documents\\GitHub\\DeepLabCut\\deeplabcut\\generate_training_dataset\\trainingsetmanipulation.py\", line 439, in merge_annotateddatasets                                                            \r\nAnnotationData = pd.concat(AnnotationData).sort_index()                                                                                                                                                           File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\util\\_decorators.py\", line 311, in wrapper                                                                                                          return func(*args, **kwargs)                                                                                                                                                                                      File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\core\\frame.py\", line 6402, in sort_index                                                                                                            key,                                                                                                                                                                                                              File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\core\\generic.py\", line 4545, in sort_index                                                                                                          target, level, ascending, kind, na_position, sort_remaining, key                                                                                                                                                  File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\core\\sorting.py\", line 92, in get_indexer_indexer                                                                                                   target, kind=kind, ascending=ascending, na_position=na_position                                                                                                                                                   File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\core\\sorting.py\", line 391, in nargsort                                                                                                             return items.argsort(ascending=ascending, kind=kind, na_position=na_position)                                                                                                                                     File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\core\\arrays\\base.py\", line 633, in argsort                                                                                                          mask=np.asarray(self.isna()),                                                                                                                                                                                     File \"C:\\Users\\phar0732\\.conda\\envs\\dlc3\\lib\\site-packages\\pandas\\core\\sorting.py\", line 403, in nargsort                                                                                                             indexer = non_nan_idx[non_nans.argsort(kind=kind)]                                                                                                                                                              TypeError: '<' not supported between instances of 'tuple' and 'str'\r\n\r\n\r\n\r\n### Anything else?\r\n\r\n_No response_\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"AlexEMG","id":20850270,"node_id":"MDQ6VXNlcjIwODUwMjcw","avatar_url":"https://avatars.githubusercontent.com/u/20850270?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexEMG","html_url":"https://github.com/AlexEMG","followers_url":"https://api.github.com/users/AlexEMG/followers","following_url":"https://api.github.com/users/AlexEMG/following{/other_user}","gists_url":"https://api.github.com/users/AlexEMG/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexEMG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexEMG/subscriptions","organizations_url":"https://api.github.com/users/AlexEMG/orgs","repos_url":"https://api.github.com/users/AlexEMG/repos","events_url":"https://api.github.com/users/AlexEMG/events{/privacy}","received_events_url":"https://api.github.com/users/AlexEMG/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1636/timeline","performed_via_github_app":null,"state_reason":"completed"}