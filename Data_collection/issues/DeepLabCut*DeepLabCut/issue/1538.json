{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1538","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1538/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1538/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1538/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1538","id":1025640313,"node_id":"I_kwDOB5BM6c49Igd5","number":1538,"title":"Installing deeplabcut-docker on ubuntu20 - Failed to launch the DLC GUI; `as 'headless' is currently running`","user":{"login":"albertalbesa","id":78608384,"node_id":"MDQ6VXNlcjc4NjA4Mzg0","avatar_url":"https://avatars.githubusercontent.com/u/78608384?v=4","gravatar_id":"","url":"https://api.github.com/users/albertalbesa","html_url":"https://github.com/albertalbesa","followers_url":"https://api.github.com/users/albertalbesa/followers","following_url":"https://api.github.com/users/albertalbesa/following{/other_user}","gists_url":"https://api.github.com/users/albertalbesa/gists{/gist_id}","starred_url":"https://api.github.com/users/albertalbesa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertalbesa/subscriptions","organizations_url":"https://api.github.com/users/albertalbesa/orgs","repos_url":"https://api.github.com/users/albertalbesa/repos","events_url":"https://api.github.com/users/albertalbesa/events{/privacy}","received_events_url":"https://api.github.com/users/albertalbesa/received_events","type":"User","site_admin":false},"labels":[{"id":1201091212,"node_id":"MDU6TGFiZWwxMjAxMDkxMjEy","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/Docker","name":"Docker","color":"bfd4f2","default":false,"description":""},{"id":1916568775,"node_id":"MDU6TGFiZWwxOTE2NTY4Nzc1","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/more-data-requested-by-us","name":"more-data-requested-by-us","color":"08427c","default":false,"description":"We would like to get more data to answer"}],"state":"closed","locked":false,"assignee":{"login":"stes","id":727984,"node_id":"MDQ6VXNlcjcyNzk4NA==","avatar_url":"https://avatars.githubusercontent.com/u/727984?v=4","gravatar_id":"","url":"https://api.github.com/users/stes","html_url":"https://github.com/stes","followers_url":"https://api.github.com/users/stes/followers","following_url":"https://api.github.com/users/stes/following{/other_user}","gists_url":"https://api.github.com/users/stes/gists{/gist_id}","starred_url":"https://api.github.com/users/stes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stes/subscriptions","organizations_url":"https://api.github.com/users/stes/orgs","repos_url":"https://api.github.com/users/stes/repos","events_url":"https://api.github.com/users/stes/events{/privacy}","received_events_url":"https://api.github.com/users/stes/received_events","type":"User","site_admin":false},"assignees":[{"login":"stes","id":727984,"node_id":"MDQ6VXNlcjcyNzk4NA==","avatar_url":"https://avatars.githubusercontent.com/u/727984?v=4","gravatar_id":"","url":"https://api.github.com/users/stes","html_url":"https://github.com/stes","followers_url":"https://api.github.com/users/stes/followers","following_url":"https://api.github.com/users/stes/following{/other_user}","gists_url":"https://api.github.com/users/stes/gists{/gist_id}","starred_url":"https://api.github.com/users/stes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stes/subscriptions","organizations_url":"https://api.github.com/users/stes/orgs","repos_url":"https://api.github.com/users/stes/repos","events_url":"https://api.github.com/users/stes/events{/privacy}","received_events_url":"https://api.github.com/users/stes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-10-13T19:55:37Z","updated_at":"2021-11-06T11:27:32Z","closed_at":"2021-11-06T11:27:32Z","author_association":"NONE","active_lock_reason":null,"body":"### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Bug description\r\n\r\nI have been trying to install DLC on ubuntu 20.04 and got the same error every trial.\r\n\r\nAfter installing DLC with docker, when I run\r\n\r\ndeeplabcut-docker gui\r\n\r\nIt is able to complete all the pulls, and then at this point\r\n\r\n`Status: Downloaded newer image for deeplabcut/deeplabcut:latest-gui\r\ndocker.io/deeplabcut/deeplabcut:latest-gui\r\n[2021-10-13T15:14:20-0400]: Configuring a local container for user USER(1000) in group GROUP (1000)\r\nsha256:9c1223084ebac1ca13599ea183cbdac776d7aee4c12b53df3228a0b226dc75a1\r\n[2021-10-13T15:15:02-0400]: Build succeeded\r\n[2021-10-13T15:15:02-0400]: Using Linux config\r\n2021-10-13 19:15:04.360495: I tensorflow/stream_executor/platform/default/dso_loader.cc:53] Successfully opened dynamic library libcudart.so.11.0\r\n`\r\n\r\nI get the error (see LOG for trace)\r\n```\r\nImportError: Cannot load backend 'WXAgg' which requires the 'wx' interactive framework, as 'headless' is currently running\r\n[2021-10-13T15:15:07-0400]: Failed to launch the DLC GUI. Used args: \"-e DISPLAY=unix -v /tmp/.X11-unix:/tmp/.X11-unix -v :/home/developer/.Xauthority -v /home/USER:/app -w /app \"\r\nContainer stopped.\r\n```\r\n\r\nI have tried both installing and not installing conda first and got same error.\r\n\r\n### Operating System\r\n\r\nUbuntu 20.04\r\n\r\n### DeepLabCut version\r\n\r\ndlc version\r\n\r\n### DeepLabCut mode\r\n\r\nsingle animal\r\n\r\n### Device type\r\n\r\ngpu\r\n\r\n### Steps To Reproduce\r\n\r\n1. Install Ubuntu 20.04 (fresh)\r\n2. Go to settings, software update, additional drivers, NVIDIA driver metapackage from nvidia-driver-470\r\n3. Install CUDA 11.4 and cuDNN 8 following the steps in\r\nhttps://medium.com/@stephengregory_69986/installing-cuda-10-1-on-ubuntu-20-04-e562a5e724a0\r\n(the steps are for cuda 10.1, but I installed 11.4)\r\n4. Install docker following the steps in \r\nhttps://phoenixnap.com/kb/install-docker-on-ubuntu-20-04\r\n(option 1, steps 1 to 6 and then those in section Run Docker Commands Without Sudo)\r\n5.Install DLC using docker (pip install deeplabcut-docker)\r\n6.Install DLC gui deeplabcut-docker gui\r\n\r\n### Relevant log output\r\n\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/runpy.py\", line 185, in _run_module_as_main\r\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 144, in _get_module_details\r\n    return _get_module_details(pkg_main_name, error)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 111, in _get_module_details\r\n    __import__(pkg_name)\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/__init__.py\", line 27, in <module>\r\n    from deeplabcut import generate_training_dataset\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/generate_training_dataset/__init__.py\", line 12, in <module>\r\n    from deeplabcut.generate_training_dataset.trainingsetmanipulation import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/generate_training_dataset/trainingsetmanipulation.py\", line 23, in <module>\r\n    from deeplabcut.pose_estimation_tensorflow import training\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/pose_estimation_tensorflow/__init__.py\", line 12, in <module>\r\n    from deeplabcut.pose_estimation_tensorflow.datasets import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/pose_estimation_tensorflow/datasets/__init__.py\", line 11, in <module>\r\n    from .pose_deterministic import DeterministicPoseDataset\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/pose_estimation_tensorflow/datasets/pose_deterministic.py\", line 19, in <module>\r\n    from deeplabcut.utils.auxfun_videos import imread, imresize\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/utils/__init__.py\", line 6, in <module>\r\n    from deeplabcut.utils.make_labeled_video import *\r\n  File \"/usr/local/lib/python3.8/dist-packages/deeplabcut/utils/make_labeled_video.py\", line 26, in <module>\r\n    import matplotlib.pyplot as plt\r\n  File \"/usr/local/lib/python3.8/dist-packages/matplotlib/pyplot.py\", line 2500, in <module>\r\n    switch_backend(rcParams[\"backend\"])\r\n  File \"/usr/local/lib/python3.8/dist-packages/matplotlib/pyplot.py\", line 285, in switch_backend\r\n    raise ImportError(\r\nImportError: Cannot load backend 'WXAgg' which requires the 'wx' interactive framework, as 'headless' is currently running\r\n[2021-10-13T15:15:07-0400]: Failed to launch the DLC GUI. Used args: \"-e DISPLAY=unix -v /tmp/.X11-unix:/tmp/.X11-unix -v :/home/developer/.Xauthority -v /home/USER:/app -w /app \"\r\nContainer stopped.\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\n_No response_\r\n\r\n### Code of Conduct\r\n\r\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/DeepLabCut/DeepLabCut/blob/master/CODE_OF_CONDUCT.md)","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1538/timeline","performed_via_github_app":null,"state_reason":"completed"}