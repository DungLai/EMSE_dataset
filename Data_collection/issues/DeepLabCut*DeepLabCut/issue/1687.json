{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1687","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1687/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1687/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1687/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/1687","id":1137436141,"node_id":"I_kwDOB5BM6c5Dy-Xt","number":1687,"title":"Hardware accelleration and easy installation on ANY GPU (AMD, Intel, Nvidia) via Tensorflow-DirectML","user":{"login":"Seyij","id":52794254,"node_id":"MDQ6VXNlcjUyNzk0MjU0","avatar_url":"https://avatars.githubusercontent.com/u/52794254?v=4","gravatar_id":"","url":"https://api.github.com/users/Seyij","html_url":"https://github.com/Seyij","followers_url":"https://api.github.com/users/Seyij/followers","following_url":"https://api.github.com/users/Seyij/following{/other_user}","gists_url":"https://api.github.com/users/Seyij/gists{/gist_id}","starred_url":"https://api.github.com/users/Seyij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seyij/subscriptions","organizations_url":"https://api.github.com/users/Seyij/orgs","repos_url":"https://api.github.com/users/Seyij/repos","events_url":"https://api.github.com/users/Seyij/events{/privacy}","received_events_url":"https://api.github.com/users/Seyij/received_events","type":"User","site_admin":false},"labels":[{"id":880550036,"node_id":"MDU6TGFiZWw4ODA1NTAwMzY=","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1896137682,"node_id":"MDU6TGFiZWwxODk2MTM3Njgy","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/documentation","name":"documentation","color":"57b8c1","default":true,"description":"documentation updates/comments"}],"state":"closed","locked":false,"assignee":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"assignees":[{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2022-02-14T15:06:23Z","updated_at":"2022-03-16T20:24:09Z","closed_at":"2022-03-16T20:24:09Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Installation for GPU hardware accelleation can be complicated and only works on Nvidia graphics cards. There is a method I used that made installation of deeplabcut with GPU hardware incredibly easy and consistant across devices (even those with only integrated GPUs). I could create a conda environment fully set up for GPU-deeplabcut work in 3 lines that worked on multiple tested computers. This was when Tensorflow-DirectML was in pre-release, where originally there were issues but I contacted the developers of Tensorflow-DirectML, where they thankfully added support for the version of Deeplabcut that was available a that time. \r\n\r\nAfter coming back to working with Deeplabcut after various updates, there are now compatibility issues with the method. I believe I and many others would benefit is this method was made to work again and added to the installation documentation.  Here I will briefly describe the instructions I followed and what no longer works.\r\n\r\n### Easy GPU accelleration installation on Windows PCs for ANY GPU:\r\n\r\nIf you are on Windows 10/11 and have a DirectX 12 compatible GPU from ANY vendor (AMD, Intel, or Nvidia), you can benefit from the dramatic speed increase of using a GPU for inference, but with much simpler installation than with standard tensorflow-GPU. This method uses [Tensorflow-directml](https://github.com/microsoft/tensorflow-directml) which uses DirectX instead of Cuda for ML inference. \r\n\r\nTo check the DirectX version of your installed GPU, type in __*dxdiag*__ into windows search and select the run command. In system information the bottom item of the list shows your DirectX version. In addition to this ensure your GPU drivers are up-to-date. Updating drivers by any official means (Nvidia Geforce experience, AMD radeon software, direct from the vendor website) is fine.\r\n\r\nThe following instructions are using conda and pip for environment management, executing within the Anaconda prompt program that was installed along with Anaconda python. The # lines are not to be typed, they are for guidance.\r\n\r\n```dos\r\n# the latest version of python compatible with tensorflow-directml is 3.7\r\n# the environment name dlc_dml can be any name\r\nconda create -n dlc_dml python=3.7\r\n# activate so any next steps are within this environment\r\nconda activate dlc_directml\r\n\r\npip install tensorflow-directml\r\npip install \"deeplabcut[gui]\"\r\n```\r\n---\r\nAfter going through some deeplabcut examples, this no longer works. I think the main incompatibility problem is that the latest version of tensorflow-directml is based on tensorflow 1.15, whereas as Deeplabcut is on tensorflow 2. Because of this, training new networks does not work. I also was unable to get GPU inferencing to work. Pip noted a large dependency issue being numpy and tensorboard versions, as deeplabcut required newer versions than numpy.\r\n\r\nThanks very much for your time and development work, if you have any more questions about what I have written feel free to ask.\r\n\r\n\r\n\r\n","closed_by":{"login":"Seyij","id":52794254,"node_id":"MDQ6VXNlcjUyNzk0MjU0","avatar_url":"https://avatars.githubusercontent.com/u/52794254?v=4","gravatar_id":"","url":"https://api.github.com/users/Seyij","html_url":"https://github.com/Seyij","followers_url":"https://api.github.com/users/Seyij/followers","following_url":"https://api.github.com/users/Seyij/following{/other_user}","gists_url":"https://api.github.com/users/Seyij/gists{/gist_id}","starred_url":"https://api.github.com/users/Seyij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Seyij/subscriptions","organizations_url":"https://api.github.com/users/Seyij/orgs","repos_url":"https://api.github.com/users/Seyij/repos","events_url":"https://api.github.com/users/Seyij/events{/privacy}","received_events_url":"https://api.github.com/users/Seyij/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1687/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/1687/timeline","performed_via_github_app":null,"state_reason":"completed"}