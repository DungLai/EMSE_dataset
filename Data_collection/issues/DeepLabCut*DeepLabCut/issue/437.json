{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/437","repository_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut","labels_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/437/labels{/name}","comments_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/437/comments","events_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/437/events","html_url":"https://github.com/DeepLabCut/DeepLabCut/issues/437","id":501539896,"node_id":"MDU6SXNzdWU1MDE1Mzk4OTY=","number":437,"title":"ERROR:root:Cannot activate multiple GUI eventloops","user":{"login":"Cumol","id":4943380,"node_id":"MDQ6VXNlcjQ5NDMzODA=","avatar_url":"https://avatars.githubusercontent.com/u/4943380?v=4","gravatar_id":"","url":"https://api.github.com/users/Cumol","html_url":"https://github.com/Cumol","followers_url":"https://api.github.com/users/Cumol/followers","following_url":"https://api.github.com/users/Cumol/following{/other_user}","gists_url":"https://api.github.com/users/Cumol/gists{/gist_id}","starred_url":"https://api.github.com/users/Cumol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cumol/subscriptions","organizations_url":"https://api.github.com/users/Cumol/orgs","repos_url":"https://api.github.com/users/Cumol/repos","events_url":"https://api.github.com/users/Cumol/events{/privacy}","received_events_url":"https://api.github.com/users/Cumol/received_events","type":"User","site_admin":false},"labels":[{"id":1518724279,"node_id":"MDU6TGFiZWwxNTE4NzI0Mjc5","url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/labels/GUI","name":"GUI","color":"4477c4","default":false,"description":"issues relating to GUI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-10-02T14:50:09Z","updated_at":"2019-10-07T17:06:06Z","closed_at":"2019-10-07T17:06:06Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nbasically the same situation as with this issue: https://github.com/AlexEMG/DeepLabCut/issues/124\r\n\r\n\r\n**To Reproduce**\r\n1. run deeplabcut on videos (works)\r\n2. extract frames (works)\r\n3. run the following:\r\n```\r\n%gui wx\r\ndeeplabcut.refine_labels(path_config)\r\n```\r\nOutput:\r\n\r\n```\r\n\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-3-537231e7ea2b> in <module>\r\n      1 get_ipython().run_line_magic('gui', 'wx')\r\n----> 2 deeplabcut.refine_labels(path_config)\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/deeplabcut/refine_training_dataset/outlier_frames.py in refine_labels(config)\r\n    609     os.chdir(str(wd))\r\n    610     from deeplabcut.refine_training_dataset import refinement\r\n--> 611     refinement.show(config)\r\n    612 \r\n    613 def merge_datasets(config,forceiterate=None):\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/deeplabcut/refine_training_dataset/refinement.py in show(config)\r\n    650 def show(config):\r\n    651     app = wx.App()\r\n--> 652     frame = MainFrame(None,config).Show()\r\n    653     app.MainLoop()\r\n    654 \r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/deeplabcut/refine_training_dataset/refinement.py in __init__(self, parent, config)\r\n    143         vSplitter = wx.SplitterWindow(topSplitter)\r\n    144 \r\n--> 145         self.image_panel = ImagePanel(vSplitter, config,self.gui_size)\r\n    146         self.choice_panel = ScrollPanel(vSplitter)\r\n    147 #        self.choice_panel.SetupScrolling(scroll_x=True, scroll_y=True, scrollToTop=False)\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/deeplabcut/refine_training_dataset/refinement.py in __init__(self, parent, config, gui_size, **kwargs)\r\n     47         self.figure = matplotlib.figure.Figure()\r\n     48         self.axes = self.figure.add_subplot(1, 1, 1)\r\n---> 49         self.canvas = FigureCanvas(self, -1, self.figure)\r\n     50         self.sizer = wx.BoxSizer(wx.VERTICAL)\r\n     51         self.sizer.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/matplotlib/backends/backend_wx.py in __init__(self, parent, id, figure)\r\n    589         \"\"\"\r\n    590 \r\n--> 591         FigureCanvasBase.__init__(self, figure)\r\n    592         # Set preferred window size hint - helps the sizer (if one is\r\n    593         # connected)\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/matplotlib/backend_bases.py in __init__(self, figure)\r\n   1580 \r\n   1581     def __init__(self, figure):\r\n-> 1582         self._fix_ipython_backend2gui()\r\n   1583         self._is_idle_drawing = True\r\n   1584         self._is_saving = False\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/matplotlib/backend_bases.py in _fix_ipython_backend2gui(cls)\r\n   1627             try:\r\n   1628                 mpl.rcParamsOrig[\"backend\"] = mpl.rcParams[\"backend\"]\r\n-> 1629                 ip.enable_matplotlib()\r\n   1630             finally:\r\n   1631                 mpl.rcParamsOrig[\"backend\"] = orig_origbackend\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/IPython/core/interactiveshell.py in enable_matplotlib(self, gui)\r\n   3417         # Now we must activate the gui pylab wants to use, and fix %run to take\r\n   3418         # plot updates into account\r\n-> 3419         self.enable_gui(gui)\r\n   3420         self.magics_manager.registry['ExecutionMagics'].default_runner = \\\r\n   3421             pt.mpl_runner(self.safe_execfile)\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/ipykernel/zmqshell.py in enable_gui(self, gui)\r\n    483         from .eventloops import enable_gui as real_enable_gui\r\n    484         try:\r\n--> 485             real_enable_gui(gui)\r\n    486             self.active_eventloop = gui\r\n    487         except ValueError as e:\r\n\r\n~/anaconda3/envs/dlc-ubuntu-CPU/lib/python3.6/site-packages/ipykernel/eventloops.py in enable_gui(gui, kernel)\r\n    400     loop = loop_map[gui]\r\n    401     if loop and kernel.eventloop is not None and kernel.eventloop is not loop:\r\n--> 402         raise RuntimeError(\"Cannot activate multiple GUI eventloops\")\r\n    403     kernel.eventloop = loop\r\n\r\nRuntimeError: Cannot activate multiple GUI eventloops\r\n```\r\n\r\n\r\n**Expected behavior**\r\nExpected is a popup of a GUI to correct the frames. It worked the first time I ran the notebook and the first time when I reboot the machine. \r\n\r\n**Desktop (please complete the following information about your system):**\r\n - OS: Ubuntu 18.04\r\n - DeepLabCut Version: 2.0.6.3\r\n - Browser: Firefox\r\n\r\n**Additional context**\r\nAs stated above. It always works the first time after a fresh reboot. It does not work after restarting the kernel or terminating all processes and starting again.","closed_by":{"login":"MMathisLab","id":28102185,"node_id":"MDQ6VXNlcjI4MTAyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/28102185?v=4","gravatar_id":"","url":"https://api.github.com/users/MMathisLab","html_url":"https://github.com/MMathisLab","followers_url":"https://api.github.com/users/MMathisLab/followers","following_url":"https://api.github.com/users/MMathisLab/following{/other_user}","gists_url":"https://api.github.com/users/MMathisLab/gists{/gist_id}","starred_url":"https://api.github.com/users/MMathisLab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MMathisLab/subscriptions","organizations_url":"https://api.github.com/users/MMathisLab/orgs","repos_url":"https://api.github.com/users/MMathisLab/repos","events_url":"https://api.github.com/users/MMathisLab/events{/privacy}","received_events_url":"https://api.github.com/users/MMathisLab/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DeepLabCut/DeepLabCut/issues/437/timeline","performed_via_github_app":null,"state_reason":"completed"}