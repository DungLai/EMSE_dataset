{"url":"https://api.github.com/repos/theislab/diffxpy/issues/207","repository_url":"https://api.github.com/repos/theislab/diffxpy","labels_url":"https://api.github.com/repos/theislab/diffxpy/issues/207/labels{/name}","comments_url":"https://api.github.com/repos/theislab/diffxpy/issues/207/comments","events_url":"https://api.github.com/repos/theislab/diffxpy/issues/207/events","html_url":"https://github.com/theislab/diffxpy/issues/207","id":1003371704,"node_id":"I_kwDOCFAGUM47zjy4","number":207,"title":"Syntax error in partioned rank_test","user":{"login":"jhkliu42","id":25183677,"node_id":"MDQ6VXNlcjI1MTgzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/25183677?v=4","gravatar_id":"","url":"https://api.github.com/users/jhkliu42","html_url":"https://github.com/jhkliu42","followers_url":"https://api.github.com/users/jhkliu42/followers","following_url":"https://api.github.com/users/jhkliu42/following{/other_user}","gists_url":"https://api.github.com/users/jhkliu42/gists{/gist_id}","starred_url":"https://api.github.com/users/jhkliu42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhkliu42/subscriptions","organizations_url":"https://api.github.com/users/jhkliu42/orgs","repos_url":"https://api.github.com/users/jhkliu42/repos","events_url":"https://api.github.com/users/jhkliu42/events{/privacy}","received_events_url":"https://api.github.com/users/jhkliu42/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-21T22:08:48Z","updated_at":"2021-09-21T22:08:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm attempting to run rank_test() on subgroups in an AnnData object, by making use of test.partition(). There appears to be a syntax error, where in the rank_test method of a partition, it passes the datatype into test.rank_test (starting around Line 1729):\r\n\r\nfor i, idx in enumerate(self.partition_idx):\r\n            DETestsSingle.append(rank_test(\r\n                data=self.x[idx, :],\r\n                grouping=grouping,\r\n                gene_names=self.gene_names,\r\n                sample_description=self.sample_description.iloc[idx, :],\r\n                is_sig_zerovar=is_sig_zerovar,\r\n                dtype=dtype\r\n            ))\r\n\r\nHowever, in test.rank_test(), dtype is not an acceptable key word argument:\r\ndef rank_test(\r\n        data: Union[anndata.AnnData, Raw, np.ndarray, scipy.sparse.csr_matrix, glm.typing.InputDataBase],\r\n        grouping: Union[str, np.ndarray, list],\r\n        gene_names: Union[np.ndarray, list] = None,\r\n        sample_description: pd.DataFrame = None,\r\n        is_logged: bool = False,\r\n        is_sig_zerovar: bool = True\r\n):\r\n\r\nThis results in the following error being thrown: \"rank_test() got an unexpected keyword argument 'dtype'\".","closed_by":null,"reactions":{"url":"https://api.github.com/repos/theislab/diffxpy/issues/207/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/theislab/diffxpy/issues/207/timeline","performed_via_github_app":null,"state_reason":null}