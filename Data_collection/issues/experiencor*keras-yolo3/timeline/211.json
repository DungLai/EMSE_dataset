[{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/520287976","html_url":"https://github.com/experiencor/keras-yolo3/issues/211#issuecomment-520287976","issue_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/211","id":520287976,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDI4Nzk3Ng==","user":{"login":"monocongo","id":1328158,"node_id":"MDQ6VXNlcjEzMjgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/1328158?v=4","gravatar_id":"","url":"https://api.github.com/users/monocongo","html_url":"https://github.com/monocongo","followers_url":"https://api.github.com/users/monocongo/followers","following_url":"https://api.github.com/users/monocongo/following{/other_user}","gists_url":"https://api.github.com/users/monocongo/gists{/gist_id}","starred_url":"https://api.github.com/users/monocongo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monocongo/subscriptions","organizations_url":"https://api.github.com/users/monocongo/orgs","repos_url":"https://api.github.com/users/monocongo/repos","events_url":"https://api.github.com/users/monocongo/events{/privacy}","received_events_url":"https://api.github.com/users/monocongo/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T03:06:49Z","updated_at":"2019-08-12T05:14:56Z","author_association":"NONE","body":"I've tried to work around this by modifying the model creation section of the `train.py` script ([here](https://github.com/experiencor/keras-yolo3/blob/master/train.py#L117)) from this\r\n```python\r\n    if multi_gpu > 1:\r\n        with tf.device('/cpu:0'):\r\n```\r\nto this\r\n```python\r\n    if multi_gpu >= 1:\r\n        with tf.device('/device:GPU:0'):\r\n```\r\nbut it resulted in this error:\r\n```bash\r\n   if not _has_nchw_support() and list(reduction_axes) == [0, 2, 3]:\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 291, in _has_nchw_support\r\n    explicitly_on_cpu = _is_current_explicit_device('CPU')\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 266, in _is_current_explicit_device\r\n    device = _get_current_tf_device()\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 247, in _get_current_tf_device\r\n    g._apply_device_functions(op)\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 4581, in _apply_device_functions\r\n    op._set_device_from_string(device_string)\r\nAttributeError: '_TfDeviceCaptureOp' object has no attribute '_set_device_from_string'\r\n```\r\n\r\nIt appears that I've come across [a known bug in TensorFlow 1.14](https://github.com/tensorflow/tensorflow/issues/30728), and maybe that's why this code appears to be using CPU even when there's a list of GPUs in the configuration JSON file (as a workaround for that bug)? I may be misreading things...","reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/520287976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"monocongo","id":1328158,"node_id":"MDQ6VXNlcjEzMjgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/1328158?v=4","gravatar_id":"","url":"https://api.github.com/users/monocongo","html_url":"https://github.com/monocongo","followers_url":"https://api.github.com/users/monocongo/followers","following_url":"https://api.github.com/users/monocongo/following{/other_user}","gists_url":"https://api.github.com/users/monocongo/gists{/gist_id}","starred_url":"https://api.github.com/users/monocongo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monocongo/subscriptions","organizations_url":"https://api.github.com/users/monocongo/orgs","repos_url":"https://api.github.com/users/monocongo/repos","events_url":"https://api.github.com/users/monocongo/events{/privacy}","received_events_url":"https://api.github.com/users/monocongo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/520984853","html_url":"https://github.com/experiencor/keras-yolo3/issues/211#issuecomment-520984853","issue_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/211","id":520984853,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk4NDg1Mw==","user":{"login":"ivankunyankin","id":47857592,"node_id":"MDQ6VXNlcjQ3ODU3NTky","avatar_url":"https://avatars.githubusercontent.com/u/47857592?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankunyankin","html_url":"https://github.com/ivankunyankin","followers_url":"https://api.github.com/users/ivankunyankin/followers","following_url":"https://api.github.com/users/ivankunyankin/following{/other_user}","gists_url":"https://api.github.com/users/ivankunyankin/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankunyankin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankunyankin/subscriptions","organizations_url":"https://api.github.com/users/ivankunyankin/orgs","repos_url":"https://api.github.com/users/ivankunyankin/repos","events_url":"https://api.github.com/users/ivankunyankin/events{/privacy}","received_events_url":"https://api.github.com/users/ivankunyankin/received_events","type":"User","site_admin":false},"created_at":"2019-08-13T19:56:47Z","updated_at":"2019-08-13T19:56:47Z","author_association":"NONE","body":"Hi, @monocongo! I've faced the same problem. As I can see your current driver version is 430. Try 410. It helped me. Good luck!","reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/520984853/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ivankunyankin","id":47857592,"node_id":"MDQ6VXNlcjQ3ODU3NTky","avatar_url":"https://avatars.githubusercontent.com/u/47857592?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankunyankin","html_url":"https://github.com/ivankunyankin","followers_url":"https://api.github.com/users/ivankunyankin/followers","following_url":"https://api.github.com/users/ivankunyankin/following{/other_user}","gists_url":"https://api.github.com/users/ivankunyankin/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankunyankin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankunyankin/subscriptions","organizations_url":"https://api.github.com/users/ivankunyankin/orgs","repos_url":"https://api.github.com/users/ivankunyankin/repos","events_url":"https://api.github.com/users/ivankunyankin/events{/privacy}","received_events_url":"https://api.github.com/users/ivankunyankin/received_events","type":"User","site_admin":false}},{"id":2554546535,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU1NDU0NjUzNQ==","url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/events/2554546535","actor":{"login":"monocongo","id":1328158,"node_id":"MDQ6VXNlcjEzMjgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/1328158?v=4","gravatar_id":"","url":"https://api.github.com/users/monocongo","html_url":"https://github.com/monocongo","followers_url":"https://api.github.com/users/monocongo/followers","following_url":"https://api.github.com/users/monocongo/following{/other_user}","gists_url":"https://api.github.com/users/monocongo/gists{/gist_id}","starred_url":"https://api.github.com/users/monocongo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monocongo/subscriptions","organizations_url":"https://api.github.com/users/monocongo/orgs","repos_url":"https://api.github.com/users/monocongo/repos","events_url":"https://api.github.com/users/monocongo/events{/privacy}","received_events_url":"https://api.github.com/users/monocongo/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-13T19:56:47Z","performed_via_github_app":null},{"id":2554546537,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTQ1NDY1Mzc=","url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/events/2554546537","actor":{"login":"monocongo","id":1328158,"node_id":"MDQ6VXNlcjEzMjgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/1328158?v=4","gravatar_id":"","url":"https://api.github.com/users/monocongo","html_url":"https://github.com/monocongo","followers_url":"https://api.github.com/users/monocongo/followers","following_url":"https://api.github.com/users/monocongo/following{/other_user}","gists_url":"https://api.github.com/users/monocongo/gists{/gist_id}","starred_url":"https://api.github.com/users/monocongo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monocongo/subscriptions","organizations_url":"https://api.github.com/users/monocongo/orgs","repos_url":"https://api.github.com/users/monocongo/repos","events_url":"https://api.github.com/users/monocongo/events{/privacy}","received_events_url":"https://api.github.com/users/monocongo/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-13T19:56:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/535568873","html_url":"https://github.com/experiencor/keras-yolo3/issues/211#issuecomment-535568873","issue_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/211","id":535568873,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTU2ODg3Mw==","user":{"login":"andreasmarxer","id":45263298,"node_id":"MDQ6VXNlcjQ1MjYzMjk4","avatar_url":"https://avatars.githubusercontent.com/u/45263298?v=4","gravatar_id":"","url":"https://api.github.com/users/andreasmarxer","html_url":"https://github.com/andreasmarxer","followers_url":"https://api.github.com/users/andreasmarxer/followers","following_url":"https://api.github.com/users/andreasmarxer/following{/other_user}","gists_url":"https://api.github.com/users/andreasmarxer/gists{/gist_id}","starred_url":"https://api.github.com/users/andreasmarxer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreasmarxer/subscriptions","organizations_url":"https://api.github.com/users/andreasmarxer/orgs","repos_url":"https://api.github.com/users/andreasmarxer/repos","events_url":"https://api.github.com/users/andreasmarxer/events{/privacy}","received_events_url":"https://api.github.com/users/andreasmarxer/received_events","type":"User","site_admin":false},"created_at":"2019-09-26T15:53:30Z","updated_at":"2019-09-26T15:53:30Z","author_association":"NONE","body":"Uninstall tensorflow and install tensorflow-gpu does maybe help?","reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/535568873/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"andreasmarxer","id":45263298,"node_id":"MDQ6VXNlcjQ1MjYzMjk4","avatar_url":"https://avatars.githubusercontent.com/u/45263298?v=4","gravatar_id":"","url":"https://api.github.com/users/andreasmarxer","html_url":"https://github.com/andreasmarxer","followers_url":"https://api.github.com/users/andreasmarxer/followers","following_url":"https://api.github.com/users/andreasmarxer/following{/other_user}","gists_url":"https://api.github.com/users/andreasmarxer/gists{/gist_id}","starred_url":"https://api.github.com/users/andreasmarxer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreasmarxer/subscriptions","organizations_url":"https://api.github.com/users/andreasmarxer/orgs","repos_url":"https://api.github.com/users/andreasmarxer/repos","events_url":"https://api.github.com/users/andreasmarxer/events{/privacy}","received_events_url":"https://api.github.com/users/andreasmarxer/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/542727060","html_url":"https://github.com/experiencor/keras-yolo3/issues/211#issuecomment-542727060","issue_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/211","id":542727060,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjcyNzA2MA==","user":{"login":"ydteng","id":35255690,"node_id":"MDQ6VXNlcjM1MjU1Njkw","avatar_url":"https://avatars.githubusercontent.com/u/35255690?v=4","gravatar_id":"","url":"https://api.github.com/users/ydteng","html_url":"https://github.com/ydteng","followers_url":"https://api.github.com/users/ydteng/followers","following_url":"https://api.github.com/users/ydteng/following{/other_user}","gists_url":"https://api.github.com/users/ydteng/gists{/gist_id}","starred_url":"https://api.github.com/users/ydteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydteng/subscriptions","organizations_url":"https://api.github.com/users/ydteng/orgs","repos_url":"https://api.github.com/users/ydteng/repos","events_url":"https://api.github.com/users/ydteng/events{/privacy}","received_events_url":"https://api.github.com/users/ydteng/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T14:24:10Z","updated_at":"2019-10-16T14:24:10Z","author_association":"NONE","body":"@monocongo \r\nHave you solved the problem? I met it, too","reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/542727060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydteng","id":35255690,"node_id":"MDQ6VXNlcjM1MjU1Njkw","avatar_url":"https://avatars.githubusercontent.com/u/35255690?v=4","gravatar_id":"","url":"https://api.github.com/users/ydteng","html_url":"https://github.com/ydteng","followers_url":"https://api.github.com/users/ydteng/followers","following_url":"https://api.github.com/users/ydteng/following{/other_user}","gists_url":"https://api.github.com/users/ydteng/gists{/gist_id}","starred_url":"https://api.github.com/users/ydteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydteng/subscriptions","organizations_url":"https://api.github.com/users/ydteng/orgs","repos_url":"https://api.github.com/users/ydteng/repos","events_url":"https://api.github.com/users/ydteng/events{/privacy}","received_events_url":"https://api.github.com/users/ydteng/received_events","type":"User","site_admin":false}},{"id":2717836687,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjcxNzgzNjY4Nw==","url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/events/2717836687","actor":{"login":"monocongo","id":1328158,"node_id":"MDQ6VXNlcjEzMjgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/1328158?v=4","gravatar_id":"","url":"https://api.github.com/users/monocongo","html_url":"https://github.com/monocongo","followers_url":"https://api.github.com/users/monocongo/followers","following_url":"https://api.github.com/users/monocongo/following{/other_user}","gists_url":"https://api.github.com/users/monocongo/gists{/gist_id}","starred_url":"https://api.github.com/users/monocongo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monocongo/subscriptions","organizations_url":"https://api.github.com/users/monocongo/orgs","repos_url":"https://api.github.com/users/monocongo/repos","events_url":"https://api.github.com/users/monocongo/events{/privacy}","received_events_url":"https://api.github.com/users/monocongo/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-16T14:24:18Z","performed_via_github_app":null},{"id":2717836690,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3MTc4MzY2OTA=","url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/events/2717836690","actor":{"login":"monocongo","id":1328158,"node_id":"MDQ6VXNlcjEzMjgxNTg=","avatar_url":"https://avatars.githubusercontent.com/u/1328158?v=4","gravatar_id":"","url":"https://api.github.com/users/monocongo","html_url":"https://github.com/monocongo","followers_url":"https://api.github.com/users/monocongo/followers","following_url":"https://api.github.com/users/monocongo/following{/other_user}","gists_url":"https://api.github.com/users/monocongo/gists{/gist_id}","starred_url":"https://api.github.com/users/monocongo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monocongo/subscriptions","organizations_url":"https://api.github.com/users/monocongo/orgs","repos_url":"https://api.github.com/users/monocongo/repos","events_url":"https://api.github.com/users/monocongo/events{/privacy}","received_events_url":"https://api.github.com/users/monocongo/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-16T14:24:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/621093348","html_url":"https://github.com/experiencor/keras-yolo3/issues/211#issuecomment-621093348","issue_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/211","id":621093348,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTA5MzM0OA==","user":{"login":"hamddan4","id":16596176,"node_id":"MDQ6VXNlcjE2NTk2MTc2","avatar_url":"https://avatars.githubusercontent.com/u/16596176?v=4","gravatar_id":"","url":"https://api.github.com/users/hamddan4","html_url":"https://github.com/hamddan4","followers_url":"https://api.github.com/users/hamddan4/followers","following_url":"https://api.github.com/users/hamddan4/following{/other_user}","gists_url":"https://api.github.com/users/hamddan4/gists{/gist_id}","starred_url":"https://api.github.com/users/hamddan4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hamddan4/subscriptions","organizations_url":"https://api.github.com/users/hamddan4/orgs","repos_url":"https://api.github.com/users/hamddan4/repos","events_url":"https://api.github.com/users/hamddan4/events{/privacy}","received_events_url":"https://api.github.com/users/hamddan4/received_events","type":"User","site_admin":false},"created_at":"2020-04-29T09:34:34Z","updated_at":"2020-04-29T09:42:35Z","author_association":"NONE","body":"[Tensorflow 1.14 is not tested with CUDA 10.1](https://www.tensorflow.org/install/source#tested_build_configurations), so I installed CUDA 10.0, maybe it solves your problems too. Here is what I did in case you need it:\r\n\r\nFirst, download the CUDA 10.0 installer from: https://developer.nvidia.com/cuda-10.0-download-archive\r\n\r\nThen, install it. Choose the configuration to not override CUDA 10.1 in your system. You can install to the default path (usually `/usr/local/cuda-10.0`), but do not create symlink to cuda, so CUDA 10.1 will still be the default CUDA version in your system. In bash:\r\n```sudo sh ./cuda_10.0.130_410.48_linux.run```\r\n\r\nMake sure to have tensorflow 1.14. In python:\r\n```\r\nfrom tensorflow import tf\r\ntf.__version__\r\n```\r\n\r\nBefore running the script for training, you must change LD_LIBRARY_PATH with the following bash command:\r\n```\r\nexport LD_LIBRARY_PATH=/usr/local/cuda-10.0/lib64\r\n```\r\nThis only changes LD_LIBRARY_PATH on the current console!\r\n\r\nYou are ready to go. If you want the script to automatically change LD_LIBRARY_PATH when running, maybe you can check the answers in [this StackOverflow thread](https://stackoverflow.com/questions/8365394/set-environment-variable-in-python-script).\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/comments/621093348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hamddan4","id":16596176,"node_id":"MDQ6VXNlcjE2NTk2MTc2","avatar_url":"https://avatars.githubusercontent.com/u/16596176?v=4","gravatar_id":"","url":"https://api.github.com/users/hamddan4","html_url":"https://github.com/hamddan4","followers_url":"https://api.github.com/users/hamddan4/followers","following_url":"https://api.github.com/users/hamddan4/following{/other_user}","gists_url":"https://api.github.com/users/hamddan4/gists{/gist_id}","starred_url":"https://api.github.com/users/hamddan4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hamddan4/subscriptions","organizations_url":"https://api.github.com/users/hamddan4/orgs","repos_url":"https://api.github.com/users/hamddan4/repos","events_url":"https://api.github.com/users/hamddan4/events{/privacy}","received_events_url":"https://api.github.com/users/hamddan4/received_events","type":"User","site_admin":false}}]