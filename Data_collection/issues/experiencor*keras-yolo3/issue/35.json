{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/35","repository_url":"https://api.github.com/repos/experiencor/keras-yolo3","labels_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/35/labels{/name}","comments_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/35/comments","events_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/35/events","html_url":"https://github.com/experiencor/keras-yolo3/issues/35","id":318097510,"node_id":"MDU6SXNzdWUzMTgwOTc1MTA=","number":35,"title":"Predict: Division by Zero when no object was found","user":{"login":"vobject","id":437697,"node_id":"MDQ6VXNlcjQzNzY5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/437697?v=4","gravatar_id":"","url":"https://api.github.com/users/vobject","html_url":"https://github.com/vobject","followers_url":"https://api.github.com/users/vobject/followers","following_url":"https://api.github.com/users/vobject/following{/other_user}","gists_url":"https://api.github.com/users/vobject/gists{/gist_id}","starred_url":"https://api.github.com/users/vobject/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vobject/subscriptions","organizations_url":"https://api.github.com/users/vobject/orgs","repos_url":"https://api.github.com/users/vobject/repos","events_url":"https://api.github.com/users/vobject/events{/privacy}","received_events_url":"https://api.github.com/users/vobject/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-26T16:04:39Z","updated_at":"2020-04-23T13:53:42Z","closed_at":"2018-05-20T15:15:27Z","author_association":"NONE","active_lock_reason":null,"body":"Python 3.6, Win10, GTX 1060\r\n\r\nI've trained a model to detect a single class (similar to the examples).\r\nWhen using the `predict`  script on an image where it doesn't detect any object of said class, the subsequent code for handling bounding boxes runs into a division by zero `bbox/bbox_iou()` because `union` becomes zero.\r\nI'm not sure how to fix the underlying issue but was able to work around it.\r\n\r\nI've worked around this by naively replacing the return statement with:\r\n`return float(intersect) / union if union != 0 else 0.`\r\n\r\nThis get's me further but then also had to add this to `bbox/draw_boxes()`\r\n```\r\nif abs(box.xmin) > 1000 or abs(box.xmax) > 1000 or abs(box.ymin) > 1000 or abs(box.ymax) > 1000:\r\n    continue\r\n```\r\nbecause the [xy]min/max values are basically invalid values (insanely small/large)\r\n\r\n\r\nI guess somewhere before all this the boxes should have been discarded to never even reach those code paths but I'm not familiar enough to spot it.","closed_by":{"login":"vobject","id":437697,"node_id":"MDQ6VXNlcjQzNzY5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/437697?v=4","gravatar_id":"","url":"https://api.github.com/users/vobject","html_url":"https://github.com/vobject","followers_url":"https://api.github.com/users/vobject/followers","following_url":"https://api.github.com/users/vobject/following{/other_user}","gists_url":"https://api.github.com/users/vobject/gists{/gist_id}","starred_url":"https://api.github.com/users/vobject/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vobject/subscriptions","organizations_url":"https://api.github.com/users/vobject/orgs","repos_url":"https://api.github.com/users/vobject/repos","events_url":"https://api.github.com/users/vobject/events{/privacy}","received_events_url":"https://api.github.com/users/vobject/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/35/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/35/timeline","performed_via_github_app":null,"state_reason":"completed"}