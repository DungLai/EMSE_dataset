{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/60","repository_url":"https://api.github.com/repos/experiencor/keras-yolo3","labels_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/60/labels{/name}","comments_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/60/comments","events_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/60/events","html_url":"https://github.com/experiencor/keras-yolo3/issues/60","id":323110518,"node_id":"MDU6SXNzdWUzMjMxMTA1MTg=","number":60,"title":"Transformation of prediction","user":{"login":"RichardSieg","id":13641877,"node_id":"MDQ6VXNlcjEzNjQxODc3","avatar_url":"https://avatars.githubusercontent.com/u/13641877?v=4","gravatar_id":"","url":"https://api.github.com/users/RichardSieg","html_url":"https://github.com/RichardSieg","followers_url":"https://api.github.com/users/RichardSieg/followers","following_url":"https://api.github.com/users/RichardSieg/following{/other_user}","gists_url":"https://api.github.com/users/RichardSieg/gists{/gist_id}","starred_url":"https://api.github.com/users/RichardSieg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RichardSieg/subscriptions","organizations_url":"https://api.github.com/users/RichardSieg/orgs","repos_url":"https://api.github.com/users/RichardSieg/repos","events_url":"https://api.github.com/users/RichardSieg/events{/privacy}","received_events_url":"https://api.github.com/users/RichardSieg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-05-15T08:12:49Z","updated_at":"2018-05-15T09:20:35Z","closed_at":"2018-05-15T09:20:35Z","author_association":"NONE","active_lock_reason":null,"body":"Sorry for asking so many questions, but I'd really like to understand the code and YOLOv3 didn't get any good results yet on our dataset. \r\n\r\nIn YOLOv2, the prediction was transformed like this:\r\n```  \r\n### adjust x and y\r\npred_box_xy = tf.sigmoid(y_pred[..., :2]) + cell_grid\r\n\r\n### adjust w and h\r\npred_box_wh = tf.exp(y_pred[..., 2:4]) * np.reshape(self.anchors, [1,1,1,self.nb_box,2])\r\n\r\n### adjust confidence\r\npred_box_conf = tf.sigmoid(y_pred[..., 4])\r\n\r\n### adjust class probabilities\r\npred_box_class = y_pred[..., 5:]\r\n```\r\n\r\nBut now in YOLOv3, the width and height is predicted without the exponential (as opposed to the paper as well):\r\n```\r\npred_box_xy    = (self.cell_grid[:,:grid_h,:grid_w,:,:] + tf.sigmoid(y_pred[..., :2]))  # sigma(t_xy) + c_xy\r\npred_box_wh    = y_pred[..., 2:4]                                                       # t_wh\r\npred_box_conf  = tf.expand_dims(tf.sigmoid(y_pred[..., 4]), 4)                          # adjust confidence\r\npred_box_class = y_pred[..., 5:]                                                        # adjust class probabilities\r\n```\r\nIs this correct and the exponential is taken somewhere else?","closed_by":{"login":"RichardSieg","id":13641877,"node_id":"MDQ6VXNlcjEzNjQxODc3","avatar_url":"https://avatars.githubusercontent.com/u/13641877?v=4","gravatar_id":"","url":"https://api.github.com/users/RichardSieg","html_url":"https://github.com/RichardSieg","followers_url":"https://api.github.com/users/RichardSieg/followers","following_url":"https://api.github.com/users/RichardSieg/following{/other_user}","gists_url":"https://api.github.com/users/RichardSieg/gists{/gist_id}","starred_url":"https://api.github.com/users/RichardSieg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RichardSieg/subscriptions","organizations_url":"https://api.github.com/users/RichardSieg/orgs","repos_url":"https://api.github.com/users/RichardSieg/repos","events_url":"https://api.github.com/users/RichardSieg/events{/privacy}","received_events_url":"https://api.github.com/users/RichardSieg/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/60/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/experiencor/keras-yolo3/issues/60/timeline","performed_via_github_app":null,"state_reason":"completed"}