{"url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/78","repository_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose","labels_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/78/labels{/name}","comments_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/78/comments","events_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/78/events","html_url":"https://github.com/YangZeyu95/unofficial-implement-of-openpose/issues/78","id":1077163737,"node_id":"I_kwDOCXXCbM5ANDbZ","number":78,"title":"AssertionError: can only start a process object created by current process","user":{"login":"bilalkhann16","id":43230844,"node_id":"MDQ6VXNlcjQzMjMwODQ0","avatar_url":"https://avatars.githubusercontent.com/u/43230844?v=4","gravatar_id":"","url":"https://api.github.com/users/bilalkhann16","html_url":"https://github.com/bilalkhann16","followers_url":"https://api.github.com/users/bilalkhann16/followers","following_url":"https://api.github.com/users/bilalkhann16/following{/other_user}","gists_url":"https://api.github.com/users/bilalkhann16/gists{/gist_id}","starred_url":"https://api.github.com/users/bilalkhann16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bilalkhann16/subscriptions","organizations_url":"https://api.github.com/users/bilalkhann16/orgs","repos_url":"https://api.github.com/users/bilalkhann16/repos","events_url":"https://api.github.com/users/bilalkhann16/events{/privacy}","received_events_url":"https://api.github.com/users/bilalkhann16/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-12-10T19:28:36Z","updated_at":"2022-09-06T02:51:14Z","closed_at":"2022-04-16T09:17:36Z","author_association":"NONE","active_lock_reason":null,"body":"Hello, I'm trying to train the model on the COCO'17 dataset. When I try to run the train.py I get this error: `AssertionError: can only start a process object created by current process`. I'm currently using M1 Mac and Miniconda(Anaconda) for the envirornment.\r\nHere is the complete error:\r\n```\r\n(tf) bilalk@bilals-MacBook unofficial-implement-of-openposet_v2 % python3 train.py \r\n[2021-12-11 00:10:25,454] [train] [INFO] Namespace(annot_path='/Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/COCO/annotations/', backbone_net_ckpt_path='checkpoints/vgg/vgg_19.ckpt', batch_size=10, checkpoint_path='/Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/checkpoints', continue_training=False, hm_channels=19, img_path='/Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/COCO/images/', input_height=368, input_width=368, loss_func='l2', max_echos=5, paf_channels=38, save_checkpoint_frequency=1000, save_summary_frequency=100, stage_num=6, train_vgg=True, use_bn=False)\r\n[2021-12-11 00:10:25,454] [train] [INFO] checkpoint_path: /Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/checkpoints2021-12-11-0-10-25\r\n[2021-12-11 00:10:25,459] [train] [INFO] initializing data loader...\r\n[2021-12-11 00:10:25,459] [pose_dataset] [INFO] dataflow img_path=/Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/COCO/images/\r\nloading annotations into memory...\r\nDone (t=4.42s)\r\ncreating index...\r\nindex created!\r\n[2021-12-11 00:10:30,112] [pose_dataset] [INFO] /Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/COCO/annotations/ dataset 118287\r\n[1211 00:10:30 @parallel.py:219] [MultiProcessRunner] Will fork a dataflow more than one times. This assumes the datapoints are i.i.d.\r\n[1211 00:10:30 @parallel.py:219] [MultiProcessRunner] Will fork a dataflow more than one times. This assumes the datapoints are i.i.d.\r\n\r\nds <tensorpack.dataflow.parallel.MultiProcessRunner object at 0x28f4fc8b0>\r\n\r\nenquerer <DataFlowToQueue(Thread-1, initial daemon)>\r\n\r\nHere:  [<tf.Tensor 'fifo_queue_Dequeue:0' shape=(10, 368, 368, 3) dtype=float32>, <tf.Tensor 'fifo_queue_Dequeue:1' shape=(10, 46, 46, 19) dtype=float32>, <tf.Tensor 'fifo_queue_Dequeue:2' shape=(10, 46, 46, 38) dtype=float32>]\r\n\r\n[2021-12-11 00:10:30,141] [pose_dataset] [INFO] dataflow img_path=/Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/COCO/images/\r\nloading annotations into memory...\r\nDone (t=0.70s)\r\ncreating index...\r\nindex created!\r\n[2021-12-11 00:10:30,850] [pose_dataset] [INFO] /Users/bilalk/Desktop/unofficial-implement-of-openposet_v2/COCO/annotations/ dataset 5000\r\n[1211 00:10:30 @parallel.py:219] [MultiProcessRunner] Will fork a dataflow more than one times. This assumes the datapoints are i.i.d.\r\n[2021-12-11 00:10:35,502] [train] [INFO] initializing model...\r\n/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorflow/python/keras/engine/base_layer_v1.py:1694: UserWarning: `layer.apply` is deprecated and will be removed in a future version. Please use `layer.__call__` method instead.\r\n  warnings.warn('`layer.apply` is deprecated and '\r\n[2021-12-11 00:10:36,942] [train] [INFO] use l2 loss\r\n[2021-12-11 00:10:37,340] [train] [INFO] use l2 loss\r\n[2021-12-11 00:10:37,434] [train] [INFO] use l2 loss\r\n[2021-12-11 00:10:37,436] [train] [INFO] use l2 loss\r\n[2021-12-11 00:10:37,437] [train] [INFO] use l2 loss\r\n[2021-12-11 00:10:37,439] [train] [INFO] use l2 loss\r\n[2021-12-11 00:10:38,516] [train] [INFO] initialize saver...\r\n[2021-12-11 00:10:38,577] [train] [INFO] initialize tensorboard\r\n[2021-12-11 00:10:38,598] [train] [INFO] initialize session...\r\nMetal device set to: Apple M1\r\n\r\nsystemMemory: 8.00 GB\r\nmaxCacheSize: 2.67 GB\r\n\r\n2021-12-11 00:10:38.610424: I tensorflow/core/common_runtime/pluggable_device/pluggable_device_factory.cc:305] Could not identify NUMA node of platform GPU ID 0, defaulting to 0. Your kernel may not have been built with NUMA support.\r\n2021-12-11 00:10:38.610766: I tensorflow/core/common_runtime/pluggable_device/pluggable_device_factory.cc:271] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 0 MB memory) -> physical PluggableDevice (device: 0, name: METAL, pci bus id: <undefined>)\r\n2021-12-11 00:10:39.126790: W tensorflow/core/platform/profile_utils/cpu_utils.cc:128] Failed to get CPU frequency: 0 Hz\r\n2021-12-11 00:10:39.128769: I tensorflow/core/grappler/optimizers/custom_graph_optimizer_registry.cc:112] Plugin optimizer for device_type GPU is enabled.\r\n[2021-12-11 00:10:41,409] [train] [INFO] restoring vgg weights from checkpoints/vgg/vgg_19.ckpt\r\n2021-12-11 00:10:41.445859: I tensorflow/core/grappler/optimizers/custom_graph_optimizer_registry.cc:112] Plugin optimizer for device_type GPU is enabled.\r\n[2021-12-11 00:10:43,094] [train] [INFO] start training...\r\n  0%|                                                 | 0/11828 [00:00<?, ?it/s]2021-12-11 00:10:45.997830: I tensorflow/core/grappler/optimizers/custom_graph_optimizer_registry.cc:112] Plugin optimizer for device_type GPU is enabled.\r\nProcess _Worker-8:\r\nTraceback (most recent call last):\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/dataflow/parallel.py\", line 190, in run\r\n    self.ds.reset_state()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/dataflow/base.py\", line 181, in reset_state\r\n    self.ds.reset_state()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/dataflow/parallel.py\", line 238, in reset_state\r\n    start_proc_mask_signal(self.procs)\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/utils/concurrency.py\", line 240, in start_proc_mask_signal\r\n    p.start()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/multiprocessing/process.py\", line 116, in start\r\n    assert self._parent_pid == os.getpid(), \\\r\nAssertionError: can only start a process object created by current process\r\nProcess _Worker-9:\r\nTraceback (most recent call last):\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/dataflow/parallel.py\", line 190, in run\r\n    self.ds.reset_state()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/dataflow/base.py\", line 181, in reset_state\r\n    self.ds.reset_state()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/dataflow/parallel.py\", line 238, in reset_state\r\n    start_proc_mask_signal(self.procs)\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/site-packages/tensorpack/utils/concurrency.py\", line 240, in start_proc_mask_signal\r\n    p.start()\r\n  File \"/Users/bilalk/miniforge3/envs/tf/lib/python3.8/multiprocessing/process.py\", line 116, in start\r\n    assert self._parent_pid == os.getpid(), \\\r\nAssertionError: can only start a process object created by current process\r\n```\r\n\r\nSeems like something related to threads needs to be edited. Any help? Thanks.","closed_by":{"login":"bilalkhann16","id":43230844,"node_id":"MDQ6VXNlcjQzMjMwODQ0","avatar_url":"https://avatars.githubusercontent.com/u/43230844?v=4","gravatar_id":"","url":"https://api.github.com/users/bilalkhann16","html_url":"https://github.com/bilalkhann16","followers_url":"https://api.github.com/users/bilalkhann16/followers","following_url":"https://api.github.com/users/bilalkhann16/following{/other_user}","gists_url":"https://api.github.com/users/bilalkhann16/gists{/gist_id}","starred_url":"https://api.github.com/users/bilalkhann16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bilalkhann16/subscriptions","organizations_url":"https://api.github.com/users/bilalkhann16/orgs","repos_url":"https://api.github.com/users/bilalkhann16/repos","events_url":"https://api.github.com/users/bilalkhann16/events{/privacy}","received_events_url":"https://api.github.com/users/bilalkhann16/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/78/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/78/timeline","performed_via_github_app":null,"state_reason":"completed"}