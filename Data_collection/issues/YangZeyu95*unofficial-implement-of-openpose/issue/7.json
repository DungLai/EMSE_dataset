{"url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/7","repository_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose","labels_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/7/labels{/name}","comments_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/7/comments","events_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/7/events","html_url":"https://github.com/YangZeyu95/unofficial-implement-of-openpose/issues/7","id":394971554,"node_id":"MDU6SXNzdWUzOTQ5NzE1NTQ=","number":7,"title":"Checkpoint file to .pb file conversion","user":{"login":"AdnanMuhib","id":18069154,"node_id":"MDQ6VXNlcjE4MDY5MTU0","avatar_url":"https://avatars.githubusercontent.com/u/18069154?v=4","gravatar_id":"","url":"https://api.github.com/users/AdnanMuhib","html_url":"https://github.com/AdnanMuhib","followers_url":"https://api.github.com/users/AdnanMuhib/followers","following_url":"https://api.github.com/users/AdnanMuhib/following{/other_user}","gists_url":"https://api.github.com/users/AdnanMuhib/gists{/gist_id}","starred_url":"https://api.github.com/users/AdnanMuhib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AdnanMuhib/subscriptions","organizations_url":"https://api.github.com/users/AdnanMuhib/orgs","repos_url":"https://api.github.com/users/AdnanMuhib/repos","events_url":"https://api.github.com/users/AdnanMuhib/events{/privacy}","received_events_url":"https://api.github.com/users/AdnanMuhib/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-12-31T12:08:46Z","updated_at":"2019-01-15T16:49:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Can I have the .pb file of the checkpoint file?\r\nI tried the code from the answer at [Stackoverflow](https://stackoverflow.com/questions/45864363/tensorflow-how-to-convert-meta-data-and-index-model-files-into-one-graph-pb)\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nmeta_path = 'model-59000.ckpt.meta' # Your .meta file\r\n\r\nwith tf.Session() as sess:\r\n\r\n    # Restore the graph\r\n    saver = tf.train.import_meta_graph(meta_path)\r\n\r\n    # Load weights\r\n    saver.restore(sess,tf.train.latest_checkpoint('.'))\r\n\r\n    # Output nodes\r\n    output_node_names =[n.name for n in tf.get_default_graph().as_graph_def().node]\r\n\r\n    # Freeze the graph\r\n    frozen_graph_def = tf.graph_util.convert_variables_to_constants(\r\n        sess,\r\n        sess.graph_def,\r\n        output_node_names)\r\n\r\n    # Save the frozen graph\r\n    with open('output_graph.pb', 'wb') as f:\r\n      f.write(frozen_graph_def.SerializeToString())\r\n```\r\n\r\nBut that produced the following errors\r\n\r\n```\r\n(tensorflow) H:\\OpenPose\\unofficial-implement-of-openpose\\checkpoints\\train\\2018-12-13-16-56-49>python toPb.py\r\nC:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\h5py\\__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n2018-12-31 17:05:27.908516: I C:\\tf_jenkins\\workspace\\rel-win\\M\\windows\\PY\\35\\tensorflow\\core\\platform\\cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1350, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1329, in _run_fn\r\n    status, run_metadata)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 473, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value global_step\r\n         [[Node: _retval_global_step_0_0 = _Retval[T=DT_INT32, index=0, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](global_step)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"toPb.py\", line 20, in <module>\r\n    output_node_names)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\graph_util_impl.py\", line 243, in convert_variables_to_constants\r\n    returned_variables = sess.run(variable_names)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 895, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1128, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1344, in _do_run\r\n    options, run_metadata)\r\n  File \"C:\\Program Files\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1363, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value global_step\r\n         [[Node: _retval_global_step_0_0 = _Retval[T=DT_INT32, index=0, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](global_step)]]\r\n\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/7/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/YangZeyu95/unofficial-implement-of-openpose/issues/7/timeline","performed_via_github_app":null,"state_reason":null}