{"url":"https://api.github.com/repos/JayYip/m3tl/issues/99","repository_url":"https://api.github.com/repos/JayYip/m3tl","labels_url":"https://api.github.com/repos/JayYip/m3tl/issues/99/labels{/name}","comments_url":"https://api.github.com/repos/JayYip/m3tl/issues/99/comments","events_url":"https://api.github.com/repos/JayYip/m3tl/issues/99/events","html_url":"https://github.com/JayYip/m3tl/issues/99","id":1167845613,"node_id":"I_kwDOCYOcXc5Fm-jt","number":99,"title":"请教复现问题","user":{"login":"18140663659","id":28996606,"node_id":"MDQ6VXNlcjI4OTk2NjA2","avatar_url":"https://avatars.githubusercontent.com/u/28996606?v=4","gravatar_id":"","url":"https://api.github.com/users/18140663659","html_url":"https://github.com/18140663659","followers_url":"https://api.github.com/users/18140663659/followers","following_url":"https://api.github.com/users/18140663659/following{/other_user}","gists_url":"https://api.github.com/users/18140663659/gists{/gist_id}","starred_url":"https://api.github.com/users/18140663659/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/18140663659/subscriptions","organizations_url":"https://api.github.com/users/18140663659/orgs","repos_url":"https://api.github.com/users/18140663659/repos","events_url":"https://api.github.com/users/18140663659/events{/privacy}","received_events_url":"https://api.github.com/users/18140663659/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-03-14T03:40:35Z","updated_at":"2022-06-06T06:24:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"刚开始使用，下面的代码模型训练好像有问题\r\n\r\n\r\nimport m3tl\r\nfrom m3tl.preproc_decorator import preprocessing_fn\r\nfrom m3tl.params import Params\r\nfrom m3tl.special_tokens import TRAIN\r\nfrom m3tl.predefined_problems.ner_data import get_weibo_ner_fn\r\n\r\nparams =  m3tl.params.Params()\r\nfor problem_type in params.list_available_problem_types():\r\n    print('`{problem_type}`: {desc}'.format(\r\n        desc=params.problem_type_desc[problem_type], problem_type=problem_type))\r\n\r\nproblem_type_dict = {'weibo_ner':'seq_tag'}\r\n\r\nprocessing_fn_dict = {'weibo_ner':get_weibo_ner_fn(\"data/ner/weiboNER*\")}\r\n\r\nfrom m3tl.run_bert_multitask import train_bert_multitask, eval_bert_multitask, predict_bert_multitask\r\nproblem = 'weibo_ner'\r\n\r\nmodel = train_bert_multitask(\r\n    params=params,\r\n    problem=problem,\r\n    num_epochs=20,\r\n    problem_type_dict=problem_type_dict,\r\n    processing_fn_dict=processing_fn_dict,\r\n    continue_training=False\r\n)\r\n\r\n具体结果如下：\r\n/0: 2.7941\r\nEpoch 3/20\r\n 1/11 [=>............................] - ETA: 0s - mean_acc: 1.3923 - weibo_ner_acc: 0.0737 - 2/11 [====>.........................] - ETA: 20s - mean_acc: 1.3904 - weibo_ner_acc: 0.0748  3/11 [=======>......................] - ETA: 18s - mean_acc: 1.4114 - weibo_ner_acc: 0.0706  4/11 [=========>....................] - ETA: 19s - mean_acc: 1.4114 - weibo_ner_acc: 0.0694  5/11 [============>.................] - ETA: 16s - mean_acc: 1.4064 - weibo_ner_acc: 0.0679  6/11 [===============>..............] - ETA: 16s - mean_acc: 1.4166 - weibo_ner_acc: 0.0696  7/11 [==================>...........] - ETA: 16s - mean_acc: 1.4105 - weibo_ner_acc: 0.0715 - BertMultiTaskTop/weibo_ner/losses/0: 8/11 [====================>.........] - ETA: 11s - mean_acc: 1.4148 - weibo_ner_acc: 0.0707 - BertMultiTaskTop/weibo_ner/losses/0: 9/11 [=======================>......] - ETA: 7s - mean_acc: 1.4135 - weibo_ner_acc: 0.0700 - BertMultiTaskTop/weibo_ner/losses/0: 10/11 [==========================>...] - ETA: 3s - mean_acc: 1.4174 - weibo_ner_acc: 0.0703 - BertMultiTaskTop/weibo_ner/losses/0: 11/11 [==============================] - ETA: 0s - mean_acc: 1.4229 - weibo_ner_acc: 0.0699 - BertMultiTaskTop/weibo_ner/losses/0: 11/11 [==============================] - 41s 4s/step - mean_acc: 1.4229 - weibo_ner_acc: 0.0699 - BertMultiTaskTop/weibo_ner/losses/0: 2.7844\r\nEpoch 4/20\r\n 1/11 [=>............................] - ETA: 0s - mean_acc: 1.4003 - weibo_ner_acc: 0.0613 - BertMultiTaskTop/weibo_ner/losses/0:  2/11 [====>.........................] - ETA: 16s - mean_acc: 1.4068 - weibo_ner_acc: 0.0607 - BertMultiTaskTop/weibo_ner/losses/0: 3/11 [=======>......................] - ETA: 33s - mean_acc: 1.3949 - weibo_ner_acc: 0.0686 - BertMultiTaskTop/weibo_ner/losses/0: 4/11 [=========>....................] - ETA: 25s - mean_acc: 1.3999 - weibo_ner_acc: 0.0677 - BertMultiTaskTop/weibo_ner/losses/0: 5/11 [============>.................] - ETA: 23s - mean_acc: 1.4015 - weibo_ner_acc: 0.0669 - BertMultiTaskTop/weibo_ner/losses/0: 6/11 [===============>..............] - ETA: 20s - mean_acc: 1.4122 - weibo_ner_acc: 0.0679 - BertMultiTaskTop/weibo_ner/losses/0: 7/11 [==================>...........] - ETA: 19s - mean_acc: 1.4101 - weibo_ner_acc: 0.0682 - BertMultiTaskTop/weibo_ner/losses/0: 8/11 [====================>.........] - ETA: 13s - mean_acc: 1.4176 - weibo_ner_acc: 0.0668 - BertMultiTaskTop/weibo_ner/losses/0: 9/11 [=======================>......] - ETA: 8s - mean_acc: 1.4131 - weibo_ner_acc: 0.0674 - BertMultiTaskTop/weibo_ner/losses/0: 10/11 [==========================>...] - ETA: 4s - mean_acc: 1.4180 - weibo_ner_acc: 0.0673 - BertMultiTaskTop/weibo_ner/losses/0: 11/11 [==============================] - ETA: 0s - mean_acc: 1.4211 - weibo_ner_acc: 0.0680 - BertMultiTaskTop/weibo_ner/losses/0: 11/11 [==============================] - 45s 4s/step - mean_acc: 1.4211 - weibo_ner_acc: 0.0680 - BertMultiTaskTop/weibo_ner/losses/0: 2.7807\r\nEpoch 5/20\r\n 1/11 [=>............................] - ETA: 0s - mean_acc: 1.3925 - weibo_ner_acc: 0.0683 - BertMultiTaskTop/weibo_ner/losses/0:  2/11 [====>.........................] - ETA: 9s - mean_acc: 1.4057 - weibo_ner_acc: 0.0677 - BertMultiTaskTop/weibo_ner/losses/0:  3/11 [=======>......................] - ETA: 19s - mean_acc: 1.4285 - weibo_ner_acc: 0.0730 - BertMultiTaskTop/weibo_ner/losses/0: 4/11 [=========>....................] - ETA: 31s - mean_acc: 1.4171 - weibo_ner_acc: 0.0692 - BertMultiTaskTop/weibo_ner/losses/0: 5/11 [============>.................] - ETA: 24s - mean_acc: 1.4222 - weibo_ner_acc: 0.0670 - BertMultiTaskTop/weibo_ner/losses/0: 6/11 [===============>..............] - ETA: 20s - mean_acc: 1.4147 - weibo_ner_acc: 0.0685 - BertMultiTaskTop/weibo_ner/losses/0: 7/11 [==================>...........] - ETA: 18s - mean_acc: 1.4084 - weibo_ner_acc: 0.0697 - BertMultiTaskTop/weibo_ner/losses/0: 8/11 [====================>.........] - ETA: 12s - mean_acc: 1.4074 - weibo_ner_acc: 0.0690 - BertMultiTaskTop/weibo_ner/losses/0: 9/11 [=======================>......] - ETA: 8s - mean_acc: 1.4085 - weibo_ner_acc: 0.0690 - BertMultiTaskTop/weibo_ner/losses/0: 10/11 [==========================>...] - ETA: 3s - mean_acc: 1.4148 - weibo_ner_acc: 0.0690 - BertMultiTaskTop/weibo_ner/losses/0: 11/11 [==============================] - ETA: 0s - mean_acc: 1.4175 - weibo_ner_acc: 0.0700 - BertMultiTaskTop/weibo_ner/losses/0: 11/11 [==============================] - 45s 4s/step - mean_acc: 1.4175 - weibo_ner_acc: 0.0700 - BertMultiTaskTop/weibo_ner/losses/0: 2.7702\r\nEpoch 6/20\r\n","closed_by":{"login":"18140663659","id":28996606,"node_id":"MDQ6VXNlcjI4OTk2NjA2","avatar_url":"https://avatars.githubusercontent.com/u/28996606?v=4","gravatar_id":"","url":"https://api.github.com/users/18140663659","html_url":"https://github.com/18140663659","followers_url":"https://api.github.com/users/18140663659/followers","following_url":"https://api.github.com/users/18140663659/following{/other_user}","gists_url":"https://api.github.com/users/18140663659/gists{/gist_id}","starred_url":"https://api.github.com/users/18140663659/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/18140663659/subscriptions","organizations_url":"https://api.github.com/users/18140663659/orgs","repos_url":"https://api.github.com/users/18140663659/repos","events_url":"https://api.github.com/users/18140663659/events{/privacy}","received_events_url":"https://api.github.com/users/18140663659/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/99/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/JayYip/m3tl/issues/99/timeline","performed_via_github_app":null,"state_reason":null}