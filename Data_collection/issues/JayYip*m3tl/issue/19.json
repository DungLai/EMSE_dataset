{"url":"https://api.github.com/repos/JayYip/m3tl/issues/19","repository_url":"https://api.github.com/repos/JayYip/m3tl","labels_url":"https://api.github.com/repos/JayYip/m3tl/issues/19/labels{/name}","comments_url":"https://api.github.com/repos/JayYip/m3tl/issues/19/comments","events_url":"https://api.github.com/repos/JayYip/m3tl/issues/19/events","html_url":"https://github.com/JayYip/m3tl/issues/19","id":464820050,"node_id":"MDU6SXNzdWU0NjQ4MjAwNTA=","number":19,"title":"NoneTypes of labels","user":{"login":"chiyuzhang94","id":33407613,"node_id":"MDQ6VXNlcjMzNDA3NjEz","avatar_url":"https://avatars.githubusercontent.com/u/33407613?v=4","gravatar_id":"","url":"https://api.github.com/users/chiyuzhang94","html_url":"https://github.com/chiyuzhang94","followers_url":"https://api.github.com/users/chiyuzhang94/followers","following_url":"https://api.github.com/users/chiyuzhang94/following{/other_user}","gists_url":"https://api.github.com/users/chiyuzhang94/gists{/gist_id}","starred_url":"https://api.github.com/users/chiyuzhang94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chiyuzhang94/subscriptions","organizations_url":"https://api.github.com/users/chiyuzhang94/orgs","repos_url":"https://api.github.com/users/chiyuzhang94/repos","events_url":"https://api.github.com/users/chiyuzhang94/events{/privacy}","received_events_url":"https://api.github.com/users/chiyuzhang94/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-07-06T05:32:35Z","updated_at":"2019-07-09T19:20:45Z","closed_at":"2019-07-09T19:20:45Z","author_association":"NONE","active_lock_reason":null,"body":"Hi I am trying to run the classification tasks. I can successfully run my code at first time. But I get error when I remove the results of first run and rerun the model. The error is:\r\n```\r\nAdding new problem country_cls, problem type: cls\r\nAdding new problem gender_cls, problem type: cls\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-9-50089851ce6e> in <module>\r\n      4 train_bert_multitask(problem='country_cls&gender_cls', num_gpus=2, \r\n      5                      num_epochs=2, params=params,\r\n----> 6                      problem_type_dict=new_problem_type, processing_fn_dict=new_problem_process_fn_dict)\r\n\r\n/lustre03/project/6007993/chiyu94/bert-multitask-learning-master/bert_multitask_learning/run_bert_multitask.py in train_bert_multitask(problem, num_gpus, num_epochs, model_dir, params, problem_type_dict, processing_fn_dict, model)\r\n    106                 problem_name=new_problem, problem_type=problem_type_dict[new_problem], processing_fn=new_problem_processing_fn)\r\n    107     params.assign_problem(problem, gpu=int(num_gpus),\r\n--> 108                           base_dir=base_dir, dir_name=dir_name)\r\n    109     params.to_json()\r\n    110 \r\n\r\n/lustre03/project/6007993/chiyu94/bert-multitask-learning-master/bert_multitask_learning/params.py in assign_problem(self, flag_string, gpu, base_dir, dir_name, is_serve)\r\n    191         self.prepare_dir(base_dir, dir_name, self.problem_list)\r\n    192 \r\n--> 193         self.get_data_info(self.problem_list, self.ckpt_dir)\r\n    194 \r\n    195         if not is_serve:\r\n\r\n/lustre03/project/6007993/chiyu94/bert-multitask-learning-master/bert_multitask_learning/params.py in get_data_info(self, problem_list, base)\r\n    255 \r\n    256                     self.data_num_dict[problem] = len(\r\n--> 257                         list(self.read_data_fn[problem](self, 'train')))\r\n    258                     self.data_num += self.data_num_dict[problem]\r\n    259                 else:\r\n\r\n/lustre03/project/6007993/chiyu94/bert-multitask-learning-master/bert_multitask_learning/data_preprocessing/preproc_decorator.py in wrapper(params, mode)\r\n     13         if os.path.exists(pickle_file) and params.multiprocess:\r\n     14             label_encoder = get_or_make_label_encoder(\r\n---> 15                 params, problem=problem, mode=mode)\r\n     16             return create_single_problem_generator(\r\n     17                 func.__name__,\r\n\r\n/lustre03/project/6007993/chiyu94/bert-multitask-learning-master/bert_multitask_learning/utils.py in get_or_make_label_encoder(params, problem, mode, label_list, zero_class)\r\n    136             label_encoder = LabelEncoder()\r\n    137 \r\n--> 138             label_encoder.fit(label_list, zero_class=zero_class)\r\n    139             label_encoder.dump(le_path)\r\n    140         else:\r\n\r\n/lustre03/project/6007993/chiyu94/bert-multitask-learning-master/bert_multitask_learning/utils.py in fit(self, y, zero_class)\r\n     28         self.encode_dict = {}\r\n     29         self.decode_dict = {}\r\n---> 30         label_set = set(y)\r\n     31         if zero_class is None:\r\n     32             zero_class = '[PAD]'\r\n\r\nTypeError: 'NoneType' object is not iterable\r\n``` ","closed_by":{"login":"chiyuzhang94","id":33407613,"node_id":"MDQ6VXNlcjMzNDA3NjEz","avatar_url":"https://avatars.githubusercontent.com/u/33407613?v=4","gravatar_id":"","url":"https://api.github.com/users/chiyuzhang94","html_url":"https://github.com/chiyuzhang94","followers_url":"https://api.github.com/users/chiyuzhang94/followers","following_url":"https://api.github.com/users/chiyuzhang94/following{/other_user}","gists_url":"https://api.github.com/users/chiyuzhang94/gists{/gist_id}","starred_url":"https://api.github.com/users/chiyuzhang94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chiyuzhang94/subscriptions","organizations_url":"https://api.github.com/users/chiyuzhang94/orgs","repos_url":"https://api.github.com/users/chiyuzhang94/repos","events_url":"https://api.github.com/users/chiyuzhang94/events{/privacy}","received_events_url":"https://api.github.com/users/chiyuzhang94/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/19/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/JayYip/m3tl/issues/19/timeline","performed_via_github_app":null,"state_reason":"completed"}