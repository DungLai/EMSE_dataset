[{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/533352803","html_url":"https://github.com/JayYip/m3tl/issues/28#issuecomment-533352803","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/28","id":533352803,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM1MjgwMw==","user":{"login":"cszer","id":50749428,"node_id":"MDQ6VXNlcjUwNzQ5NDI4","avatar_url":"https://avatars.githubusercontent.com/u/50749428?v=4","gravatar_id":"","url":"https://api.github.com/users/cszer","html_url":"https://github.com/cszer","followers_url":"https://api.github.com/users/cszer/followers","following_url":"https://api.github.com/users/cszer/following{/other_user}","gists_url":"https://api.github.com/users/cszer/gists{/gist_id}","starred_url":"https://api.github.com/users/cszer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cszer/subscriptions","organizations_url":"https://api.github.com/users/cszer/orgs","repos_url":"https://api.github.com/users/cszer/repos","events_url":"https://api.github.com/users/cszer/events{/privacy}","received_events_url":"https://api.github.com/users/cszer/received_events","type":"User","site_admin":false},"created_at":"2019-09-20T00:05:34Z","updated_at":"2019-09-20T00:11:39Z","author_association":"NONE","body":"```python\r\ndef _read_data(input_file):\r\n        \"\"\"Reads a BIO data.\"\"\"\r\n        with open(input_file) as f:\r\n            lines = []\r\n            words = []\r\n            labels = []\r\n            for line in f:\r\n                contends = line.strip()\r\n                if len(contends) == 0:\r\n                    assert len(words) == len(labels)\r\n                    if len(words) > 30:\r\n                        while len(words) > 30:\r\n                            tmplabel = labels[:30]\r\n                            for iidx in range(len(tmplabel)):\r\n                                if tmplabel.pop() == 'O':\r\n                                     break\r\n                            l = ' '.join([label for label in labels[:len(tmplabel)+1] if len(label) > 0])\r\n                            w = ' '.join([word for word in words[:len(tmplabel)+1] if len(word) > 0])\r\n                            lines.append([l, w])\r\n                            words = words[len(tmplabel)+1:]\r\n                            labels = labels[len(tmplabel)+1:]\r\n                    if len(words) == 0:\r\n                        continue\r\n                    l = ' '.join([label for label in labels if len(label) > 0])\r\n                    w = ' '.join([word for word in words if len(word) > 0])\r\n                    lines.append([l, w])\r\n                    words = []\r\n                    labels = []\r\n                    continue   \r\n                word = line.strip().split()[0]\r\n                label = line.strip().split()[-1]\r\n                words.append(word)\r\n                labels.append(label)\r\n            return lines\r\n```\r\n\r\n```python\r\ndef get_data(file_pattern):\r\n  result_dict = {\r\n        'train': {\r\n            'inputs': [],\r\n            'target': []\r\n        },\r\n        'eval': {\r\n            'inputs': [],\r\n            'target': []\r\n        }\r\n    }\r\n  file_list = glob(file_pattern)\r\n  for input_file in file_list:\r\n    lines=_read_data(input_file)\r\n    input_list=[]\r\n    targ_list=[]\r\n    splittedline=[]\r\n    splittedtarg=[]\r\n    for (i, line) in enumerate(lines):\r\n      splittedline=line[1].split()\r\n      splittedtarg=line[0].split()\r\n      input_list.append(splittedline)\r\n      targ_list.append(splittedtarg)\r\n    if 'train' in input_file:\r\n      result_dict['train']['inputs'] = input_list\r\n      result_dict['train']['target'] = targ_list\r\n    else:\r\n      result_dict['eval']['inputs'] = input_list\r\n      result_dict['eval']['target'] = targ_list \r\n  return result_dict\r\n```\r\n\r\n\r\n\r\n- \r\n```python\r\n@preprocessing_fn\r\ndef TASK(params,mode):\r\n  bio_data=get_data(file_pattern='/content/drive/My Drive/biobert/bioinf/data/BioNLP09-IOB/protein*')\r\n  inputs_list = []\r\n  target_list = []\r\n  for data in [bio_data]:\r\n    if mode == TRAIN:\r\n      inputs_list += data['train']['inputs']\r\n      target_list += data['train']['target']\r\n    else:\r\n      inputs_list += data['eval']['inputs']\r\n      target_list += data['eval']['target']\r\n  return inputs_list,target_list\r\n```      \r\nthere are my functions to grab the data and send to model","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/533352803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cszer","id":50749428,"node_id":"MDQ6VXNlcjUwNzQ5NDI4","avatar_url":"https://avatars.githubusercontent.com/u/50749428?v=4","gravatar_id":"","url":"https://api.github.com/users/cszer","html_url":"https://github.com/cszer","followers_url":"https://api.github.com/users/cszer/followers","following_url":"https://api.github.com/users/cszer/following{/other_user}","gists_url":"https://api.github.com/users/cszer/gists{/gist_id}","starred_url":"https://api.github.com/users/cszer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cszer/subscriptions","organizations_url":"https://api.github.com/users/cszer/orgs","repos_url":"https://api.github.com/users/cszer/repos","events_url":"https://api.github.com/users/cszer/events{/privacy}","received_events_url":"https://api.github.com/users/cszer/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/539829528","html_url":"https://github.com/JayYip/m3tl/issues/28#issuecomment-539829528","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/28","id":539829528,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTgyOTUyOA==","user":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"created_at":"2019-10-09T04:55:40Z","updated_at":"2019-10-09T04:55:40Z","author_association":"OWNER","body":"Hi, the F1 result might actually make sense since the accuracy is low. Typically the accuracy should be above 0.9.","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/539829528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false}},{"id":3359291290,"node_id":"MDExOkNsb3NlZEV2ZW50MzM1OTI5MTI5MA==","url":"https://api.github.com/repos/JayYip/m3tl/issues/events/3359291290","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-05-21T05:22:40Z","state_reason":null,"performed_via_github_app":null}]