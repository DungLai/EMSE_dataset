[{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/967110402","html_url":"https://github.com/JayYip/m3tl/issues/93#issuecomment-967110402","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/93","id":967110402,"node_id":"IC_kwDOCYOcXc45pO8C","user":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"created_at":"2021-11-12T13:15:12Z","updated_at":"2021-11-12T13:15:12Z","author_association":"OWNER","body":"这个貌似是个python编程问题？可以参考\r\nhttps://stackoverflow.com/questions/11291242/python-dynamically-create-function-at-runtime\r\n\r\nOn Thu, Nov 11, 2021, 16:26 DataAnalysist ***@***.***> wrote:\r\n\r\n> 如题，如果我有多个任务：A、B、C、D那是不是需要创建多个类似A_cls这样的装饰器函数，如下所示：\r\n> @preprocessing_fn\r\n> def A_cls(params, mode):\r\n> # get data\r\n> # your work\r\n> return input_list, target_list\r\n> 能否根据具体任务动态的创建数据处理函数呢\r\n>\r\n> —\r\n> You are receiving this because you are subscribed to this thread.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/JayYip/bert-multitask-learning/issues/93>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ADS2OTDJATZOX7AXIHTQ4V3ULN44JANCNFSM5HZ33S4Q>\r\n> .\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/967110402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/978901284","html_url":"https://github.com/JayYip/m3tl/issues/93#issuecomment-978901284","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/93","id":978901284,"node_id":"IC_kwDOCYOcXc46WNkk","user":{"login":"AlexYoung757","id":11361175,"node_id":"MDQ6VXNlcjExMzYxMTc1","avatar_url":"https://avatars.githubusercontent.com/u/11361175?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexYoung757","html_url":"https://github.com/AlexYoung757","followers_url":"https://api.github.com/users/AlexYoung757/followers","following_url":"https://api.github.com/users/AlexYoung757/following{/other_user}","gists_url":"https://api.github.com/users/AlexYoung757/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexYoung757/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexYoung757/subscriptions","organizations_url":"https://api.github.com/users/AlexYoung757/orgs","repos_url":"https://api.github.com/users/AlexYoung757/repos","events_url":"https://api.github.com/users/AlexYoung757/events{/privacy}","received_events_url":"https://api.github.com/users/AlexYoung757/received_events","type":"User","site_admin":false},"created_at":"2021-11-25T07:20:15Z","updated_at":"2021-11-25T07:20:15Z","author_association":"NONE","body":"# 创建单任务数据处理函数\r\ndef create_fn(problem_list):\r\n    # do some\r\n    print(\"do work\")\r\n\r\n    @preprocessing_fn\r\n    def example_cls(params, mode):\r\n        train_texts, train_labels = [], []\r\n        test_texts, test_labels = [],[]\r\n\r\n        # 训练模型\r\n        if (mode == TRAIN):\r\n            input_list = train_texts\r\n            target_list = train_labels\r\n        else:\r\n            input_list = test_texts\r\n            target_list = test_labels\r\n        \r\n        return input_list, target_list\r\n    \r\n    example_cls.__name__ = problem_list\r\n\r\n    return example_cls\r\n\r\nlike this？","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/978901284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexYoung757","id":11361175,"node_id":"MDQ6VXNlcjExMzYxMTc1","avatar_url":"https://avatars.githubusercontent.com/u/11361175?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexYoung757","html_url":"https://github.com/AlexYoung757","followers_url":"https://api.github.com/users/AlexYoung757/followers","following_url":"https://api.github.com/users/AlexYoung757/following{/other_user}","gists_url":"https://api.github.com/users/AlexYoung757/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexYoung757/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexYoung757/subscriptions","organizations_url":"https://api.github.com/users/AlexYoung757/orgs","repos_url":"https://api.github.com/users/AlexYoung757/repos","events_url":"https://api.github.com/users/AlexYoung757/events{/privacy}","received_events_url":"https://api.github.com/users/AlexYoung757/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/981389198","html_url":"https://github.com/JayYip/m3tl/issues/93#issuecomment-981389198","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/93","id":981389198,"node_id":"IC_kwDOCYOcXc46fs-O","user":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"created_at":"2021-11-29T08:19:57Z","updated_at":"2021-11-29T08:19:57Z","author_association":"OWNER","body":"嗯, 看起来差不多, 可能这样构造会好一点\r\n\r\n```python\r\ndef create_preproc_fns(problem: str) -> Callable:\r\n    @preprocessing_fn\r\n    def example_cls(params, mode):\r\n        train_texts, train_labels = [], []\r\n        test_texts, test_labels = [],[]\r\n\r\n        # 训练模型\r\n        if (mode == TRAIN):\r\n            input_list = train_texts\r\n            target_list = train_labels\r\n        else:\r\n            input_list = test_texts\r\n            target_list = test_labels\r\n        \r\n        return input_list, target_list\r\n    example_cls.__name__ = problem\r\n    return example_cls\r\n\r\nfn_list = [create_preproc_fns(problem) for problem in ['a', 'b', 'c']]\r\n```","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/981389198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false}}]