[{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523447947","html_url":"https://github.com/JayYip/m3tl/issues/25#issuecomment-523447947","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/25","id":523447947,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzQ0Nzk0Nw==","user":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"created_at":"2019-08-21T13:05:30Z","updated_at":"2019-08-21T13:05:30Z","author_association":"OWNER","body":"请问单独训练的时候也是用这个框架训练的吗？我在混合训练seq2seq任务和其他任务的时候遇到了nan问题，你的任务类型也是包含seq2seq吗？","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523447947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523722286","html_url":"https://github.com/JayYip/m3tl/issues/25#issuecomment-523722286","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/25","id":523722286,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzcyMjI4Ng==","user":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T02:36:07Z","updated_at":"2019-08-22T02:36:07Z","author_association":"NONE","body":"你好，单独训练也是用的这个框架。不包含seq2seq，是多个cls的任务。","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523722286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523725676","html_url":"https://github.com/JayYip/m3tl/issues/25#issuecomment-523725676","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/25","id":523725676,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzcyNTY3Ng==","user":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T02:54:19Z","updated_at":"2019-08-22T02:54:19Z","author_association":"OWNER","body":"我好像没有遇到过这个情况, 一般来说, 比较常见的nan产生原因有: 学习率过大, 通常会表现为损失上升然后变nan; 设置的类别数小于实际类别数, 那么遇到超过设置类别数的类别就会产生nan. \r\n\r\n那个warning那里应该是在seq2seq任务中, 如果没有抽样到该seq2seq任务的话, 其损失为nan. 但是cls任务应该是不会的.  ","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523725676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523768297","html_url":"https://github.com/JayYip/m3tl/issues/25#issuecomment-523768297","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/25","id":523768297,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzc2ODI5Nw==","user":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T06:30:13Z","updated_at":"2019-08-22T06:30:13Z","author_association":"NONE","body":"感谢！初步定位到top_utils.py，tf.reduce_mean(batch_loss*loss_multiplier)，传入reduce_mean的tensor为空，导致了nan，暂时先把这里的tensor做个判断，为空时传[0]。因为临时帮同事处理nan，还没仔细去读您的代码，感谢分享这么好的项目，随后再学习下！","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523768297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523778330","html_url":"https://github.com/JayYip/m3tl/issues/25#issuecomment-523778330","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/25","id":523778330,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzc3ODMzMA==","user":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T07:06:21Z","updated_at":"2019-08-22T07:06:21Z","author_association":"OWNER","body":"好的, 如果你发现了问题根源或者觉得这个一个好的解决方法, 欢迎提个pr! \r\n\r\n单纯的检测到nan传0可能会掩盖学习率过大的问题, 但是如果同时检测到`batch_loss`第一个维度为0的话, 感觉这个解决方案是可以的. ","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523778330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JayYip","id":15050572,"node_id":"MDQ6VXNlcjE1MDUwNTcy","avatar_url":"https://avatars.githubusercontent.com/u/15050572?v=4","gravatar_id":"","url":"https://api.github.com/users/JayYip","html_url":"https://github.com/JayYip","followers_url":"https://api.github.com/users/JayYip/followers","following_url":"https://api.github.com/users/JayYip/following{/other_user}","gists_url":"https://api.github.com/users/JayYip/gists{/gist_id}","starred_url":"https://api.github.com/users/JayYip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JayYip/subscriptions","organizations_url":"https://api.github.com/users/JayYip/orgs","repos_url":"https://api.github.com/users/JayYip/repos","events_url":"https://api.github.com/users/JayYip/events{/privacy}","received_events_url":"https://api.github.com/users/JayYip/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523782313","html_url":"https://github.com/JayYip/m3tl/issues/25#issuecomment-523782313","issue_url":"https://api.github.com/repos/JayYip/m3tl/issues/25","id":523782313,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzc4MjMxMw==","user":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T07:19:42Z","updated_at":"2019-08-22T07:19:42Z","author_association":"NONE","body":"嗯，我也是想在找下这个问题的根源，找到再与您交流！","reactions":{"url":"https://api.github.com/repos/JayYip/m3tl/issues/comments/523782313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false}},{"id":2575484372,"node_id":"MDExOkNsb3NlZEV2ZW50MjU3NTQ4NDM3Mg==","url":"https://api.github.com/repos/JayYip/m3tl/issues/events/2575484372","actor":{"login":"keaideii","id":13547868,"node_id":"MDQ6VXNlcjEzNTQ3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13547868?v=4","gravatar_id":"","url":"https://api.github.com/users/keaideii","html_url":"https://github.com/keaideii","followers_url":"https://api.github.com/users/keaideii/followers","following_url":"https://api.github.com/users/keaideii/following{/other_user}","gists_url":"https://api.github.com/users/keaideii/gists{/gist_id}","starred_url":"https://api.github.com/users/keaideii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keaideii/subscriptions","organizations_url":"https://api.github.com/users/keaideii/orgs","repos_url":"https://api.github.com/users/keaideii/repos","events_url":"https://api.github.com/users/keaideii/events{/privacy}","received_events_url":"https://api.github.com/users/keaideii/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-08-22T07:30:09Z","state_reason":null,"performed_via_github_app":null}]