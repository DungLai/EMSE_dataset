{"url":"https://api.github.com/repos/microsoft/graspologic/issues/918","repository_url":"https://api.github.com/repos/microsoft/graspologic","labels_url":"https://api.github.com/repos/microsoft/graspologic/issues/918/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/graspologic/issues/918/comments","events_url":"https://api.github.com/repos/microsoft/graspologic/issues/918/events","html_url":"https://github.com/microsoft/graspologic/issues/918","id":1126784667,"node_id":"I_kwDOCM7Erc5DKV6b","number":918,"title":"[BUG] Graspologic import returns a scipy error.","user":{"login":"alyakin314","id":25692376,"node_id":"MDQ6VXNlcjI1NjkyMzc2","avatar_url":"https://avatars.githubusercontent.com/u/25692376?v=4","gravatar_id":"","url":"https://api.github.com/users/alyakin314","html_url":"https://github.com/alyakin314","followers_url":"https://api.github.com/users/alyakin314/followers","following_url":"https://api.github.com/users/alyakin314/following{/other_user}","gists_url":"https://api.github.com/users/alyakin314/gists{/gist_id}","starred_url":"https://api.github.com/users/alyakin314/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alyakin314/subscriptions","organizations_url":"https://api.github.com/users/alyakin314/orgs","repos_url":"https://api.github.com/users/alyakin314/repos","events_url":"https://api.github.com/users/alyakin314/events{/privacy}","received_events_url":"https://api.github.com/users/alyakin314/received_events","type":"User","site_admin":false},"labels":[{"id":1048646805,"node_id":"MDU6TGFiZWwxMDQ4NjQ2ODA1","url":"https://api.github.com/repos/microsoft/graspologic/labels/bug","name":"bug","color":"cded2d","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-02-08T04:36:18Z","updated_at":"2022-02-11T13:48:52Z","closed_at":"2022-02-11T13:48:52Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"## Expected Behavior\r\nGraspologic should import after an install in a clean environment.\r\n\r\n## Actual Behavior\r\nExits due to some scipy import. Technically attempted a hyppo import and then broke, but since I installed everything from `pip install grapologic` - thought posting here is more appropriate. Unsure if some dependence mess or it's on my end of installation. \r\n\r\n## Example Code\r\nPlease see [How to create a Minimal, Reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) for some guidance on creating the best possible example of the problem\r\n```\r\n(standard) antonalyakin@Antons-MBP-2 Code % mkvirtualenv test-graspologic --python=python3\r\ncreated virtual environment CPython3.8.5.final.0-64 in 837ms\r\n  creator CPython3Posix(dest=/Users/antonalyakin/.virtualenvs/test-graspologic, clear=False, global=False)\r\n  seeder FromAppData(download=False, pip=latest, setuptools=latest, wheel=latest, via=copy, app_data_dir=/Users/antonalyakin/Library/Application Support/virtualenv/seed-app-data/v1.0.1)\r\n  activators PythonActivator,FishActivator,XonshActivator,CShellActivator,PowerShellActivator,BashActivator\r\nvirtualenvwrapper.user_scripts creating /Users/antonalyakin/.virtualenvs/test-graspologic/bin/predeactivate\r\nvirtualenvwrapper.user_scripts creating /Users/antonalyakin/.virtualenvs/test-graspologic/bin/postdeactivate\r\nvirtualenvwrapper.user_scripts creating /Users/antonalyakin/.virtualenvs/test-graspologic/bin/preactivate\r\nvirtualenvwrapper.user_scripts creating /Users/antonalyakin/.virtualenvs/test-graspologic/bin/postactivate\r\nvirtualenvwrapper.user_scripts creating /Users/antonalyakin/.virtualenvs/test-graspologic/bin/get_env_details\r\n(test-graspologic) antonalyakin@Antons-MBP-2 Code % which pip3\r\n/Users/antonalyakin/.virtualenvs/test-graspologic/bin/pip3\r\n(test-graspologic) antonalyakin@Antons-MBP-2 Code % pip3 install graspologic\r\nProcessing /Users/antonalyakin/Library/Caches/pip/wheels/53/b4/c4/f4015dd4d42b9c874035d1d182910e800ddba87972d122b0c3/graspologic-0.3.1-py3-none-any.whl\r\nCollecting seaborn>=0.11.0\r\n  Using cached seaborn-0.11.2-py3-none-any.whl (292 kB)\r\nCollecting joblib>=0.17.0\r\n  Using cached joblib-1.1.0-py2.py3-none-any.whl (306 kB)\r\nCollecting POT>=0.7.0\r\n  Using cached POT-0.8.1.0-cp38-cp38-macosx_10_9_x86_64.whl (189 kB)\r\nCollecting matplotlib!=3.3.*,>=3.0.0\r\n  Using cached matplotlib-3.5.1-cp38-cp38-macosx_10_9_x86_64.whl (7.3 MB)\r\nCollecting anytree>=2.8.0\r\n  Using cached anytree-2.8.0-py2.py3-none-any.whl (41 kB)\r\nProcessing /Users/antonalyakin/Library/Caches/pip/wheels/2e/14/ab/ee6f0a3d0e4295f7a63a917956c4480a10e3b60670b74c3ae8/hyppo-0.2.2-py3-none-any.whl\r\nCollecting beartype>=0.7.1\r\n  Using cached beartype-0.9.1-py3-none-any.whl (524 kB)\r\nCollecting gensim<=3.9.0,>=3.8.0\r\n  Using cached gensim-3.8.3-cp38-cp38-macosx_10_9_x86_64.whl (24.2 MB)\r\nCollecting numpy>=1.8.1\r\n  Using cached numpy-1.22.2-cp38-cp38-macosx_10_14_x86_64.whl (17.6 MB)\r\nCollecting scipy>=1.4.0\r\n  Using cached scipy-1.8.0-cp38-cp38-macosx_10_9_x86_64.whl (34.8 MB)\r\nCollecting graspologic-native>=1.0.0\r\n  Using cached graspologic_native-1.1.1-cp36-abi3-macosx_10_9_x86_64.macosx_11_0_arm64.macosx_10_9_universal2.whl (597 kB)\r\nProcessing /Users/antonalyakin/Library/Caches/pip/wheels/f2/64/75/df601da9514261c8cb0830b9515d2b94b5a51f09ddeae92b9e/umap_learn-0.5.2-py3-none-any.whl\r\nCollecting scikit-learn>=0.22.0\r\n  Using cached scikit_learn-1.0.2-cp38-cp38-macosx_10_13_x86_64.whl (7.9 MB)\r\nCollecting networkx>=2.1\r\n  Using cached networkx-2.6.3-py3-none-any.whl (1.9 MB)\r\nCollecting pandas>=0.23\r\n  Using cached pandas-1.4.0-cp38-cp38-macosx_10_9_x86_64.whl (11.4 MB)\r\nCollecting pillow>=6.2.0\r\n  Using cached Pillow-9.0.1-cp38-cp38-macosx_10_10_x86_64.whl (3.0 MB)\r\nCollecting fonttools>=4.22.0\r\n  Using cached fonttools-4.29.1-py3-none-any.whl (895 kB)\r\nCollecting packaging>=20.0\r\n  Using cached packaging-21.3-py3-none-any.whl (40 kB)\r\nCollecting python-dateutil>=2.7\r\n  Using cached python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\r\nCollecting pyparsing>=2.2.1\r\n  Using cached pyparsing-3.0.7-py3-none-any.whl (98 kB)\r\nCollecting cycler>=0.10\r\n  Using cached cycler-0.11.0-py3-none-any.whl (6.4 kB)\r\nCollecting kiwisolver>=1.0.1\r\n  Using cached kiwisolver-1.3.2-cp38-cp38-macosx_10_9_x86_64.whl (61 kB)\r\nCollecting six>=1.9.0\r\n  Using cached six-1.16.0-py2.py3-none-any.whl (11 kB)\r\nCollecting numba>=0.46\r\n  Using cached numba-0.55.1-cp38-cp38-macosx_10_14_x86_64.whl (2.3 MB)\r\nCollecting smart-open>=1.8.1\r\n  Using cached smart_open-5.2.1-py3-none-any.whl (58 kB)\r\nProcessing /Users/antonalyakin/Library/Caches/pip/wheels/1d/07/6e/9ae4e883392994fd1d7c61a0377f0177e3f8e2faff6c677341/pynndescent-0.5.6-py3-none-any.whl\r\nCollecting tqdm\r\n  Using cached tqdm-4.62.3-py2.py3-none-any.whl (76 kB)\r\nCollecting threadpoolctl>=2.0.0\r\n  Using cached threadpoolctl-3.1.0-py3-none-any.whl (14 kB)\r\nCollecting pytz>=2020.1\r\n  Using cached pytz-2021.3-py2.py3-none-any.whl (503 kB)\r\nCollecting llvmlite<0.39,>=0.38.0rc1\r\n  Using cached llvmlite-0.38.0-cp38-cp38-macosx_10_9_x86_64.whl (25.5 MB)\r\nRequirement already satisfied: setuptools in /Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages (from numba>=0.46->hyppo>=0.2.0->graspologic) (46.1.3)\r\nERROR: numba 0.55.1 has requirement numpy<1.22,>=1.18, but you'll have numpy 1.22.2 which is incompatible.\r\nInstalling collected packages: numpy, scipy, pillow, fonttools, pyparsing, packaging, six, python-dateutil, cycler, kiwisolver, matplotlib, pytz, pandas, seaborn, joblib, POT, anytree, llvmlite, numba, threadpoolctl, scikit-learn, hyppo, beartype, smart-open, gensim, graspologic-native, pynndescent, tqdm, umap-learn, networkx, graspologic\r\nSuccessfully installed POT-0.8.1.0 anytree-2.8.0 beartype-0.9.1 cycler-0.11.0 fonttools-4.29.1 gensim-3.8.3 graspologic-0.3.1 graspologic-native-1.1.1 hyppo-0.2.2 joblib-1.1.0 kiwisolver-1.3.2 llvmlite-0.38.0 matplotlib-3.5.1 networkx-2.6.3 numba-0.55.1 numpy-1.22.2 packaging-21.3 pandas-1.4.0 pillow-9.0.1 pynndescent-0.5.6 pyparsing-3.0.7 python-dateutil-2.8.2 pytz-2021.3 scikit-learn-1.0.2 scipy-1.8.0 seaborn-0.11.2 six-1.16.0 smart-open-5.2.1 threadpoolctl-3.1.0 tqdm-4.62.3 umap-learn-0.5.2\r\nWARNING: You are using pip version 20.0.2; however, version 22.0.3 is available.\r\nYou should consider upgrading via the '/Users/antonalyakin/.virtualenvs/test-graspologic/bin/python -m pip install --upgrade pip' command.\r\n(test-graspologic) antonalyakin@Antons-MBP-2 Code % which python\r\n/Users/antonalyakin/.virtualenvs/test-graspologic/bin/python\r\n(test-graspologic) antonalyakin@Antons-MBP-2 Code % python \r\nPython 3.8.5 (default, Jul 21 2020, 10:48:26) \r\n[Clang 11.0.3 (clang-1103.0.32.62)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import graspologic\r\n```\r\n\r\n## Full Traceback\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/graspologic/__init__.py\", line 8, in <module>\r\n    import graspologic.inference\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/graspologic/inference/__init__.py\", line 4, in <module>\r\n    from .latent_distribution_test import latent_distribution_test\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/graspologic/inference/latent_distribution_test.py\", line 7, in <module>\r\n    from hyppo.ksample import KSample\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/hyppo/__init__.py\", line 1, in <module>\r\n    import hyppo.discrim\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/hyppo/discrim/__init__.py\", line 1, in <module>\r\n    from .discrim_one_samp import DiscrimOneSample\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/hyppo/discrim/discrim_one_samp.py\", line 5, in <module>\r\n    from ._utils import _CheckInputs\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/hyppo/discrim/_utils.py\", line 4, in <module>\r\n    from ..tools import check_ndarray_xy, check_reps, contains_nan, convert_xy_float64\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/hyppo/tools/__init__.py\", line 1, in <module>\r\n    from .common import *\r\n  File \"/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/hyppo/tools/common.py\", line 6, in <module>\r\n    from scipy.stats.stats import _contains_nan\r\nImportError: cannot import name '_contains_nan' from 'scipy.stats.stats' (/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/scipy/stats/stats.py)\r\n```\r\n\r\n## Your Environment\r\n* Python version: 3.8.5\r\n* graspologic version: 0.3.1\r\n\r\n## Additional Details\r\nPackages I have after installation. \r\n```\r\n(test-graspologic) antonalyakin@Antons-MBP-2 Code % pip list\r\nPackage            Version\r\n------------------ -------\r\nanytree            2.8.0  \r\nbeartype           0.9.1  \r\ncycler             0.11.0 \r\nfonttools          4.29.1 \r\ngensim             3.8.3  \r\ngraspologic        0.3.1  \r\ngraspologic-native 1.1.1  \r\nhyppo              0.2.2  \r\njoblib             1.1.0  \r\nkiwisolver         1.3.2  \r\nllvmlite           0.38.0 \r\nmatplotlib         3.5.1  \r\nnetworkx           2.6.3  \r\nnumba              0.55.1 \r\nnumpy              1.22.2 \r\npackaging          21.3   \r\npandas             1.4.0  \r\nPillow             9.0.1  \r\npip                20.0.2 \r\nPOT                0.8.1.0\r\npynndescent        0.5.6  \r\npyparsing          3.0.7  \r\npython-dateutil    2.8.2  \r\npytz               2021.3 \r\nscikit-learn       1.0.2  \r\nscipy              1.8.0  \r\nseaborn            0.11.2 \r\nsetuptools         46.1.3 \r\nsix                1.16.0 \r\nsmart-open         5.2.1  \r\nthreadpoolctl      3.1.0  \r\ntqdm               4.62.3 \r\numap-learn         0.5.2  \r\nwheel              0.34.2 \r\n```\r\nI lurked around stackoverflow for scipy.stats.stats._contains_nan errors, but couldnt find anything, other than this:\r\nhttps://stackoverflow.com/questions/48491649/importerror-on-scipy-stats\r\n```\r\n(test-graspologic) antonalyakin@Antons-MBP-2 Code % python \r\nPython 3.8.5 (default, Jul 21 2020, 10:48:26) \r\n[Clang 11.0.3 (clang-1103.0.32.62)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import scipy\r\n>>> scipy.__version__\r\n'1.8.0'\r\n>>> scipy.__file__\r\n'/Users/antonalyakin/.virtualenvs/test-graspologic/lib/python3.8/site-packages/scipy/__init__.py'\r\n```","closed_by":{"login":"bdpedigo","id":25714207,"node_id":"MDQ6VXNlcjI1NzE0MjA3","avatar_url":"https://avatars.githubusercontent.com/u/25714207?v=4","gravatar_id":"","url":"https://api.github.com/users/bdpedigo","html_url":"https://github.com/bdpedigo","followers_url":"https://api.github.com/users/bdpedigo/followers","following_url":"https://api.github.com/users/bdpedigo/following{/other_user}","gists_url":"https://api.github.com/users/bdpedigo/gists{/gist_id}","starred_url":"https://api.github.com/users/bdpedigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdpedigo/subscriptions","organizations_url":"https://api.github.com/users/bdpedigo/orgs","repos_url":"https://api.github.com/users/bdpedigo/repos","events_url":"https://api.github.com/users/bdpedigo/events{/privacy}","received_events_url":"https://api.github.com/users/bdpedigo/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/microsoft/graspologic/issues/918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/graspologic/issues/918/timeline","performed_via_github_app":null,"state_reason":"completed"}