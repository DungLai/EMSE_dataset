{"url":"https://api.github.com/repos/bioinform/neusomatic/issues/55","repository_url":"https://api.github.com/repos/bioinform/neusomatic","labels_url":"https://api.github.com/repos/bioinform/neusomatic/issues/55/labels{/name}","comments_url":"https://api.github.com/repos/bioinform/neusomatic/issues/55/comments","events_url":"https://api.github.com/repos/bioinform/neusomatic/issues/55/events","html_url":"https://github.com/bioinform/neusomatic/issues/55","id":559937461,"node_id":"MDU6SXNzdWU1NTk5Mzc0NjE=","number":55,"title":"AssertionError on fast_file.fetch()","user":{"login":"GodloveD","id":7672924,"node_id":"MDQ6VXNlcjc2NzI5MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7672924?v=4","gravatar_id":"","url":"https://api.github.com/users/GodloveD","html_url":"https://github.com/GodloveD","followers_url":"https://api.github.com/users/GodloveD/followers","following_url":"https://api.github.com/users/GodloveD/following{/other_user}","gists_url":"https://api.github.com/users/GodloveD/gists{/gist_id}","starred_url":"https://api.github.com/users/GodloveD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GodloveD/subscriptions","organizations_url":"https://api.github.com/users/GodloveD/orgs","repos_url":"https://api.github.com/users/GodloveD/repos","events_url":"https://api.github.com/users/GodloveD/events{/privacy}","received_events_url":"https://api.github.com/users/GodloveD/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-02-04T19:42:30Z","updated_at":"2020-02-05T14:49:24Z","closed_at":"2020-02-05T14:49:24Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to run a the following command:\r\n\r\n```\r\npreprocess.py \\\r\n    --mode train \\\r\n    --reference ${refGenome} \\\r\n    --region_bed ${bed} \\\r\n    --tumor_bam ${input_dir}/syntheticTumor.bam \\\r\n    --normal_bam ${input_dir}/syntheticNormal.bam \\\r\n    --work ${input_dir}/work_train_2 \\\r\n    --truth_vcf ${input_dir}/synthetic_snvs.vcf \\\r\n    --min_mapq 10 \\\r\n    --num_threads 20 \\\r\n    --scan_alignments_binary ${NEUSOMATIC_SCAN_ALIGNMENTS}\r\n```\r\n\r\nAnd it is giving me the error messages below.  I'm assuming this is because the data that I'm using are not yielding any results and the fasta files are not being created?  But maybe it is something totally different.  Could someone comment?  \r\n\r\nIt also might be useful to know that this is running using [this container from DockerHub](https://hub.docker.com/layers/msahraeian/neusomatic/0.2.1/images/sha256-4d2345ef9f423048e3d86e51906958222e028bed1907085555f986ed9388e8e2) and I'm running it with Singularity.  \r\n\r\nAny help is appreciated.  Thanks!\r\n\r\n```\r\n[...snip]\r\nINFO 2020-02-04 14:03:29,122 find_records (ForkPoolWorker-59) Start find_records for worker 18\r\nINFO 2020-02-04 14:03:29,125 find_records (ForkPoolWorker-60) Start find_records for worker 19\r\nERROR 2020-02-04 14:03:29,780 find_records (ForkPoolWorker-45) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,780 find_records (ForkPoolWorker-45) \r\nERROR 2020-02-04 14:03:29,788 find_records (ForkPoolWorker-47) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,788 find_records (ForkPoolWorker-47) \r\nERROR 2020-02-04 14:03:29,790 find_records (ForkPoolWorker-49) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,790 find_records (ForkPoolWorker-49) \r\nERROR 2020-02-04 14:03:29,790 find_records (ForkPoolWorker-60) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,790 find_records (ForkPoolWorker-60) \r\nERROR 2020-02-04 14:03:29,796 find_records (ForkPoolWorker-55) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,796 find_records (ForkPoolWorker-55) \r\nERROR 2020-02-04 14:03:29,796 find_records (ForkPoolWorker-42) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,797 find_records (ForkPoolWorker-42) \r\nERROR 2020-02-04 14:03:29,798 find_records (ForkPoolWorker-41) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,799 find_records (ForkPoolWorker-41) \r\nERROR 2020-02-04 14:03:29,803 find_records (ForkPoolWorker-51) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,803 find_records (ForkPoolWorker-51) \r\nERROR 2020-02-04 14:03:29,805 find_records (ForkPoolWorker-57) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,805 find_records (ForkPoolWorker-57) \r\nERROR 2020-02-04 14:03:29,808 find_records (ForkPoolWorker-58) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,809 find_records (ForkPoolWorker-58) \r\nERROR 2020-02-04 14:03:29,809 find_records (ForkPoolWorker-48) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,809 find_records (ForkPoolWorker-56) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,810 find_records (ForkPoolWorker-56) \r\nERROR 2020-02-04 14:03:29,810 find_records (ForkPoolWorker-48) \r\nERROR 2020-02-04 14:03:29,812 find_records (ForkPoolWorker-46) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,813 find_records (ForkPoolWorker-46) \r\nINFO 2020-02-04 14:03:29,845 find_records (ForkPoolWorker-53) N_none: 263 \r\nINFO 2020-02-04 14:03:29,845 find_records (ForkPoolWorker-54) N_none: 239 \r\nINFO 2020-02-04 14:03:29,846 find_records (ForkPoolWorker-50) N_none: 272 \r\nINFO 2020-02-04 14:03:29,847 find_records (ForkPoolWorker-43) N_none: 250 \r\nERROR 2020-02-04 14:03:29,855 find_records (ForkPoolWorker-44) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,855 find_records (ForkPoolWorker-44) \r\nERROR 2020-02-04 14:03:29,855 find_records (ForkPoolWorker-59) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,856 find_records (ForkPoolWorker-59) \r\nERROR 2020-02-04 14:03:29,929 find_records (ForkPoolWorker-52) Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1055, in find_records\r\n    mt2, eqs2 = push_lr(fasta_file, mt, 2)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 728, in push_lr\r\n    assert(fasta_file.fetch((c), p - 1, p - 1 + len(r)).upper() == r)\r\nAssertionError\r\n\r\nERROR 2020-02-04 14:03:29,930 find_records (ForkPoolWorker-52) \r\nERROR 2020-02-04 14:03:29,931 __main__             Traceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 435, in <module>\r\n    args.scan_alignments_binary)\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 335, in preprocess\r\n    ensemble_beds[i] if ensemble_tsv else None, tsv_batch_size)\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 129, in generate_dataset_region\r\n    tsv_batch_size)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1461, in generate_dataset\r\n    raise Exception(\"find_records failed!\")\r\nException: find_records failed!\r\n\r\nERROR 2020-02-04 14:03:29,931 __main__             Aborting!\r\nERROR 2020-02-04 14:03:29,931 __main__             preprocess.py failure on arguments: Namespace(dbsnp_to_filter=None, del_merge_min_af=0, del_min_af=0.05, ensemble_tsv=None, filter_duplicate=False, first_do_without_qual=False, good_ao=10, ins_merge_min_af=0, ins_min_af=0.05, long_read=False, matrix_base_pad=7, matrix_width=32, max_dp=100000, merge_r=0.5, min_ao=1, min_dp=5, min_ev_frac_per_col=0.06, min_mapq=1, mode='train', normal_bam='/data/godlovedc/slurm-job/hapmap_output_multi_mda_snv/syntheticNormal.bam', num_threads=20, reference='/data/godlovedc/slurm-job/hg38.fa', region_bed='/data/godlovedc/slurm-job/broad_MDA_mocha_overlap_cds.bed', restart=False, scan_alignments_binary='/opt/neusomatic/neusomatic/bin/scan_alignments', scan_maf=0.01, scan_window_size=2000, snp_min_af=0.05, snp_min_ao=3, snp_min_bq=10, truth_vcf='/data/godlovedc/slurm-job/hapmap_output_multi_mda_snv/synthetic_snvs.vcf', tsv_batch_size=50000, tumor_bam='/data/godlovedc/slurm-job/hapmap_output_multi_mda_snv/syntheticTumor.bam', work='/data/godlovedc/slurm-job/hapmap_output_multi_mda_snv/work_train_2')\r\nTraceback (most recent call last):\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 441, in <module>\r\n    raise e\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 435, in <module>\r\n    args.scan_alignments_binary)\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 335, in preprocess\r\n    ensemble_beds[i] if ensemble_tsv else None, tsv_batch_size)\r\n  File \"/opt/neusomatic/neusomatic/python//preprocess.py\", line 129, in generate_dataset_region\r\n    tsv_batch_size)\r\n  File \"/opt/neusomatic/neusomatic/python/generate_dataset.py\", line 1461, in generate_dataset\r\n    raise Exception(\"find_records failed!\")\r\nException: find_records failed!\r\n\r\n```","closed_by":{"login":"GodloveD","id":7672924,"node_id":"MDQ6VXNlcjc2NzI5MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7672924?v=4","gravatar_id":"","url":"https://api.github.com/users/GodloveD","html_url":"https://github.com/GodloveD","followers_url":"https://api.github.com/users/GodloveD/followers","following_url":"https://api.github.com/users/GodloveD/following{/other_user}","gists_url":"https://api.github.com/users/GodloveD/gists{/gist_id}","starred_url":"https://api.github.com/users/GodloveD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GodloveD/subscriptions","organizations_url":"https://api.github.com/users/GodloveD/orgs","repos_url":"https://api.github.com/users/GodloveD/repos","events_url":"https://api.github.com/users/GodloveD/events{/privacy}","received_events_url":"https://api.github.com/users/GodloveD/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bioinform/neusomatic/issues/55/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bioinform/neusomatic/issues/55/timeline","performed_via_github_app":null,"state_reason":"completed"}