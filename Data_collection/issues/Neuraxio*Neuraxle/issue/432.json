{"url":"https://api.github.com/repos/Neuraxio/Neuraxle/issues/432","repository_url":"https://api.github.com/repos/Neuraxio/Neuraxle","labels_url":"https://api.github.com/repos/Neuraxio/Neuraxle/issues/432/labels{/name}","comments_url":"https://api.github.com/repos/Neuraxio/Neuraxle/issues/432/comments","events_url":"https://api.github.com/repos/Neuraxio/Neuraxle/issues/432/events","html_url":"https://github.com/Neuraxio/Neuraxle/issues/432","id":772382993,"node_id":"MDU6SXNzdWU3NzIzODI5OTM=","number":432,"title":"Bug: 25% of execution time is consumed by parsing hyperparameter spaces","user":{"login":"guillaume-chevalier","id":11862328,"node_id":"MDQ6VXNlcjExODYyMzI4","avatar_url":"https://avatars.githubusercontent.com/u/11862328?v=4","gravatar_id":"","url":"https://api.github.com/users/guillaume-chevalier","html_url":"https://github.com/guillaume-chevalier","followers_url":"https://api.github.com/users/guillaume-chevalier/followers","following_url":"https://api.github.com/users/guillaume-chevalier/following{/other_user}","gists_url":"https://api.github.com/users/guillaume-chevalier/gists{/gist_id}","starred_url":"https://api.github.com/users/guillaume-chevalier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guillaume-chevalier/subscriptions","organizations_url":"https://api.github.com/users/guillaume-chevalier/orgs","repos_url":"https://api.github.com/users/guillaume-chevalier/repos","events_url":"https://api.github.com/users/guillaume-chevalier/events{/privacy}","received_events_url":"https://api.github.com/users/guillaume-chevalier/received_events","type":"User","site_admin":false},"labels":[{"id":1290971220,"node_id":"MDU6TGFiZWwxMjkwOTcxMjIw","url":"https://api.github.com/repos/Neuraxio/Neuraxle/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1290971225,"node_id":"MDU6TGFiZWwxMjkwOTcxMjI1","url":"https://api.github.com/repos/Neuraxio/Neuraxle/labels/invalid","name":"invalid","color":"e4e669","default":true,"description":"This doesn't seem right"}],"state":"closed","locked":false,"assignee":{"login":"vincent-antaki","id":74119210,"node_id":"MDQ6VXNlcjc0MTE5MjEw","avatar_url":"https://avatars.githubusercontent.com/u/74119210?v=4","gravatar_id":"","url":"https://api.github.com/users/vincent-antaki","html_url":"https://github.com/vincent-antaki","followers_url":"https://api.github.com/users/vincent-antaki/followers","following_url":"https://api.github.com/users/vincent-antaki/following{/other_user}","gists_url":"https://api.github.com/users/vincent-antaki/gists{/gist_id}","starred_url":"https://api.github.com/users/vincent-antaki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincent-antaki/subscriptions","organizations_url":"https://api.github.com/users/vincent-antaki/orgs","repos_url":"https://api.github.com/users/vincent-antaki/repos","events_url":"https://api.github.com/users/vincent-antaki/events{/privacy}","received_events_url":"https://api.github.com/users/vincent-antaki/received_events","type":"User","site_admin":false},"assignees":[{"login":"vincent-antaki","id":74119210,"node_id":"MDQ6VXNlcjc0MTE5MjEw","avatar_url":"https://avatars.githubusercontent.com/u/74119210?v=4","gravatar_id":"","url":"https://api.github.com/users/vincent-antaki","html_url":"https://github.com/vincent-antaki","followers_url":"https://api.github.com/users/vincent-antaki/followers","following_url":"https://api.github.com/users/vincent-antaki/following{/other_user}","gists_url":"https://api.github.com/users/vincent-antaki/gists{/gist_id}","starred_url":"https://api.github.com/users/vincent-antaki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincent-antaki/subscriptions","organizations_url":"https://api.github.com/users/vincent-antaki/orgs","repos_url":"https://api.github.com/users/vincent-antaki/repos","events_url":"https://api.github.com/users/vincent-antaki/events{/privacy}","received_events_url":"https://api.github.com/users/vincent-antaki/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/Neuraxio/Neuraxle/milestones/8","html_url":"https://github.com/Neuraxio/Neuraxle/milestone/8","labels_url":"https://api.github.com/repos/Neuraxio/Neuraxle/milestones/8/labels","id":5248526,"node_id":"MDk6TWlsZXN0b25lNTI0ODUyNg==","number":8,"title":"0.6.0","description":"","creator":{"login":"guillaume-chevalier","id":11862328,"node_id":"MDQ6VXNlcjExODYyMzI4","avatar_url":"https://avatars.githubusercontent.com/u/11862328?v=4","gravatar_id":"","url":"https://api.github.com/users/guillaume-chevalier","html_url":"https://github.com/guillaume-chevalier","followers_url":"https://api.github.com/users/guillaume-chevalier/followers","following_url":"https://api.github.com/users/guillaume-chevalier/following{/other_user}","gists_url":"https://api.github.com/users/guillaume-chevalier/gists{/gist_id}","starred_url":"https://api.github.com/users/guillaume-chevalier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guillaume-chevalier/subscriptions","organizations_url":"https://api.github.com/users/guillaume-chevalier/orgs","repos_url":"https://api.github.com/users/guillaume-chevalier/repos","events_url":"https://api.github.com/users/guillaume-chevalier/events{/privacy}","received_events_url":"https://api.github.com/users/guillaume-chevalier/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":12,"state":"closed","created_at":"2020-03-29T16:26:18Z","updated_at":"2021-06-30T19:02:20Z","due_on":null,"closed_at":"2021-06-29T00:15:45Z"},"comments":0,"created_at":"2020-12-21T18:40:18Z","updated_at":"2021-02-25T16:08:50Z","closed_at":"2021-02-25T16:08:50Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Describe the bug**\r\n25% of the execution time is consumed in the RecursiveDict, especially when initializing steps. \r\n\r\n**To Reproduce**\r\nCreate a ColumnTransformer containing a few steps. \r\n\r\n**Expected behavior**\r\nThe recursive dict by nature is supposed to be an optimized data structure, but the current implementation is flawed in several ways. Completely rewriting the RecursiveDict's `__getitem__` method, as well as the flattening and unflattening methods, is a must. \r\n\r\nThe Recursive Dict should be rarely flattened, but for now, it is flattened everywhere in an OCD fashion inside and outside the base step. I suggest that we never flatten it from inside the base step. I also suggest that we only flatten it at the very end of an apply method... but thinking twice, it should not even be flattened there. \r\n\r\nAlso, the `__getitem__` and `get` should only dig in itself rather than looping, and assuming that self is nested rather than flat. E.g.: \r\n\r\n```\r\ndef __getitem__(self, key):\r\n    if key is None: \r\n        return self\r\n    lkey, _, rkey = key.partition(self.separator)\r\n    return OrderedDict.__getitem__(self, lkey)[rkey]\r\n```\r\n\r\nAlso, when re-creating a RecursiveDict from an existing recursive dict or other data structure, there should be more type checking to avoid re-doing the full recursion uselessly by assuming that if the root RecursiveDict is fine, that its children are as well. \r\n\r\nMoreover, the recursive dict can be returned without being flattened to a primitive dict, because if someone try to getitem with a key that has separators, the getitem method as described above will simply dig through self as per the `return OrderedDict.__getitem__(self, lkey)[rkey]` above. \r\n\r\nFixing that will give back to Neuraxle all its speed. This RecursiveDict class is very pure and simple: it should be rather easy to be implemented correctly so that it reaches its intended goal of being optimized. Right now this class reparses itself millions of times within the construction of a regular ML pipeline, which is hard to even picture. ","closed_by":{"login":"vincent-antaki","id":74119210,"node_id":"MDQ6VXNlcjc0MTE5MjEw","avatar_url":"https://avatars.githubusercontent.com/u/74119210?v=4","gravatar_id":"","url":"https://api.github.com/users/vincent-antaki","html_url":"https://github.com/vincent-antaki","followers_url":"https://api.github.com/users/vincent-antaki/followers","following_url":"https://api.github.com/users/vincent-antaki/following{/other_user}","gists_url":"https://api.github.com/users/vincent-antaki/gists{/gist_id}","starred_url":"https://api.github.com/users/vincent-antaki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincent-antaki/subscriptions","organizations_url":"https://api.github.com/users/vincent-antaki/orgs","repos_url":"https://api.github.com/users/vincent-antaki/repos","events_url":"https://api.github.com/users/vincent-antaki/events{/privacy}","received_events_url":"https://api.github.com/users/vincent-antaki/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Neuraxio/Neuraxle/issues/432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Neuraxio/Neuraxle/issues/432/timeline","performed_via_github_app":null,"state_reason":"completed"}