[{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/521816312","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-521816312","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":521816312,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTgxNjMxMg==","user":{"login":"Auroir","id":36361058,"node_id":"MDQ6VXNlcjM2MzYxMDU4","avatar_url":"https://avatars.githubusercontent.com/u/36361058?v=4","gravatar_id":"","url":"https://api.github.com/users/Auroir","html_url":"https://github.com/Auroir","followers_url":"https://api.github.com/users/Auroir/followers","following_url":"https://api.github.com/users/Auroir/following{/other_user}","gists_url":"https://api.github.com/users/Auroir/gists{/gist_id}","starred_url":"https://api.github.com/users/Auroir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Auroir/subscriptions","organizations_url":"https://api.github.com/users/Auroir/orgs","repos_url":"https://api.github.com/users/Auroir/repos","events_url":"https://api.github.com/users/Auroir/events{/privacy}","received_events_url":"https://api.github.com/users/Auroir/received_events","type":"User","site_admin":false},"created_at":"2019-08-15T22:14:02Z","updated_at":"2019-08-15T22:14:02Z","author_association":"CONTRIBUTOR","body":"It's all 2D training, images are 256x256x3 arrays, 1 plane per BGR channel. Masks are 256x256x1, black & white. I think there's some 3D translation math done with facial landmarks for pitch/yaw estimation, but nothing about this is really 3D.\r\n\r\nStylized Adversarial AutoEncoder for Image Generation\r\nhttps://www.docdroid.net/pwc97xN/31232663123450.pdf\r\n\r\nExtracting useful info from the model folder (I.E. the *.h5 model data) is not realistic. However extracting the info from your aligned faces is very easy, all the data is embedded into the face files themselves. PNG faces have it in a custom header & JPG faces have it appended to the end of the file, both are in pickle format. If you're just looking for info on the src/dst faces that's where to look. \r\n\r\nThat being said, with a VFX background I'd imagine that just using the \"Export png with alpha channel\" option when converting faces will give you enough to work with. Overlaying your faked faces on the frames with more advanced software/techniques can do wonders. Even just a simple deshake + sharpen of the faces can help a bunch.\r\n\r\n**Getting embedded data from an aligned face in colab**\r\n```\r\nimport os\r\nimport numpy as np\r\n\r\n#Import DFL functions\r\n%cd /content/DeepFaceLab/\r\nfrom utils.DFLPNG import DFLPNG\r\n%cd /content/\r\nprint('Functions imported...\\n\\n')\r\n\r\ndst_face_path = '/content/workspace/data_dst/aligned'\r\ndst_face_files = [f'{dst_face_path}/{x}' for x in os.listdir(dst_face_path)]\r\ndst_face = np.random.choice(dst_face_files)\r\ndst_dfl_im = DFLPNG.load(dst_face)\r\ndst_dfl_embedded = dst_dfl_im.getDFLDictData()\r\nprint(f'Loaded dst face {dst_face.split(\"/\")[-1]}! Showing embedded data.\\n' )\r\n\r\nfor k in dst_dfl_embedded.keys():\r\n  print(f'{k: ^30}\\n{\"-\"*30}\\n{dst_dfl_embedded[k]}\\n')\r\n```\r\n```\r\nFunctions imported...\r\n\r\n\r\nLoaded dst face 01328_0.png! Showing embedded data.\r\n\r\n          face_type           \r\n------------------------------\r\nfull_face\r\n\r\n          landmarks           \r\n------------------------------\r\n[[33.327935140258774, 90.06378632506372], [36.65708006861337, 114.25916535169475], [39.98622499696819, 138.45454437832572], ...\r\n\r\n           ie_polys           \r\n------------------------------\r\nNone\r\n\r\n       source_filename        \r\n------------------------------\r\n01328.png\r\n\r\n         source_rect          \r\n------------------------------\r\n[766  80 928 341]\r\n\r\n       source_landmarks       \r\n------------------------------\r\n[[764.0416959197653, 166.65048692525465], [763.5474817848411, 189.35225148801473], [763.0532676499171, 212.05401605077478], ...\r\n\r\n      image_to_face_mat       \r\n------------------------------\r\n[[ 1.06209704e+00  1.69768667e-01 -8.06450520e+02]\r\n [-1.69768667e-01  1.06209704e+00  4.27751373e+01]]\r\n\r\n         fanseg_mask          \r\n------------------------------\r\nNone\r\n\r\n        pitch_yaw_roll        \r\n------------------------------\r\nNone\r\n```\r\nNote that I trimmed the landmark output, there's 68 of them, and this is an example from a google colab version that uses PNG faces. Use DFLJPG if you want to look at JPG faces, the functions are identical. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/521816312/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Auroir","id":36361058,"node_id":"MDQ6VXNlcjM2MzYxMDU4","avatar_url":"https://avatars.githubusercontent.com/u/36361058?v=4","gravatar_id":"","url":"https://api.github.com/users/Auroir","html_url":"https://github.com/Auroir","followers_url":"https://api.github.com/users/Auroir/followers","following_url":"https://api.github.com/users/Auroir/following{/other_user}","gists_url":"https://api.github.com/users/Auroir/gists{/gist_id}","starred_url":"https://api.github.com/users/Auroir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Auroir/subscriptions","organizations_url":"https://api.github.com/users/Auroir/orgs","repos_url":"https://api.github.com/users/Auroir/repos","events_url":"https://api.github.com/users/Auroir/events{/privacy}","received_events_url":"https://api.github.com/users/Auroir/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/521927603","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-521927603","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":521927603,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTkyNzYwMw==","user":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false},"created_at":"2019-08-16T08:15:37Z","updated_at":"2019-08-16T08:15:37Z","author_association":"NONE","body":"Thanks so much for the response, very detailed.\r\n\r\nJust browsing the data, the landmarks are the lines (pts) that get drawn on in the aligned_debug images so I am writing a parser at the moment that will allow me to build animated masks based on the point information for each frame for the nose, face, eyes and mouth.  It will also provide me a central tracking point to follow the face which may help with adding custom masks into the mix.\r\n\r\nMay also be able to generate motion vectors to help manage motion blur as well.   Will report back if I accomplish anything useful.","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/521927603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/524282607","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-524282607","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":524282607,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDI4MjYwNw==","user":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"created_at":"2019-08-23T11:35:58Z","updated_at":"2019-08-23T11:35:58Z","author_association":"OWNER","body":"@krs1972 \r\nhi\r\nhave you the code to manage motion blur?\r\nwe have landmarks across frames, so we can calculate delta offset of face for every frame.\r\nand apply motion blur?\r\nI need the code.","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/524282607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false}},{"id":2579421581,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU3OTQyMTU4MQ==","url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/events/2579421581","actor":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-23T11:35:58Z","performed_via_github_app":null},{"id":2579421582,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1Nzk0MjE1ODI=","url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/events/2579421582","actor":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-23T11:35:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/524408762","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-524408762","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":524408762,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDQwODc2Mg==","user":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"created_at":"2019-08-23T18:03:18Z","updated_at":"2019-08-23T18:03:18Z","author_association":"OWNER","body":"@krs1972 nevermind, I implemented motion blur in the next release","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/524408762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false}},{"id":2580444198,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU4MDQ0NDE5OA==","url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/events/2580444198","actor":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-23T18:03:18Z","performed_via_github_app":null},{"id":2580444199,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1ODA0NDQxOTk=","url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/events/2580444199","actor":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-23T18:03:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/527685671","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-527685671","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":527685671,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzY4NTY3MQ==","user":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false},"created_at":"2019-09-04T00:03:36Z","updated_at":"2019-09-04T00:03:36Z","author_association":"NONE","body":"Sorry for the slow response.   I was using compositing software (Fusion) that implements optical flow vector analysis over the Deepfake output and generates the motion blur from there.   I am guessing to generate motion blur you interpolated a number of frames before and after the seed frame (using the prev and next frames) and blended them together?","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/527685671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"krs1972","id":54100554,"node_id":"MDQ6VXNlcjU0MTAwNTU0","avatar_url":"https://avatars.githubusercontent.com/u/54100554?v=4","gravatar_id":"","url":"https://api.github.com/users/krs1972","html_url":"https://github.com/krs1972","followers_url":"https://api.github.com/users/krs1972/followers","following_url":"https://api.github.com/users/krs1972/following{/other_user}","gists_url":"https://api.github.com/users/krs1972/gists{/gist_id}","starred_url":"https://api.github.com/users/krs1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krs1972/subscriptions","organizations_url":"https://api.github.com/users/krs1972/orgs","repos_url":"https://api.github.com/users/krs1972/repos","events_url":"https://api.github.com/users/krs1972/events{/privacy}","received_events_url":"https://api.github.com/users/krs1972/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/527705574","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-527705574","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":527705574,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzcwNTU3NA==","user":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"created_at":"2019-09-04T01:50:13Z","updated_at":"2019-09-04T01:50:13Z","author_association":"OWNER","body":"```\r\nfor i in io.progress_bar_generator( range(len(frames)) , \"Computing motion vectors\"):\r\n                    fi_prev = frames[max(0, i-1)].frame_info\r\n                    fi      = frames[i].frame_info\r\n                    fi_next = frames[min(i+1, frames_len-1)].frame_info\r\n                    if len(fi_prev.landmarks_list) == 0 or \\\r\n                       len(fi.landmarks_list) == 0 or \\\r\n                       len(fi_next.landmarks_list) == 0:\r\n                            continue\r\n\r\n                    mat_prev = LandmarksProcessor.get_transform_mat ( fi_prev.landmarks_list[0], s, face_type=FaceType.FULL)\r\n                    mat      = LandmarksProcessor.get_transform_mat ( fi.landmarks_list[0]     , s, face_type=FaceType.FULL)\r\n                    mat_next = LandmarksProcessor.get_transform_mat ( fi_next.landmarks_list[0], s, face_type=FaceType.FULL)\r\n\r\n                    pts_prev = LandmarksProcessor.transform_points (local_pts, mat_prev, True)\r\n                    pts      = LandmarksProcessor.transform_points (local_pts, mat, True)\r\n                    pts_next = LandmarksProcessor.transform_points (local_pts, mat_next, True)\r\n\r\n                    prev_vector = pts[0]-pts_prev[0]\r\n                    next_vector = pts_next[0]-pts[0]\r\n\r\n                    motion_vector = pts_next[0] - pts_prev[0]\r\n                    fi.motion_power = npla.norm(motion_vector)\r\n\r\n                    motion_vector = motion_vector / fi.motion_power if fi.motion_power != 0 else np.array([0,0],dtype=np.float32)\r\n\r\n                    fi.motion_deg = -math.atan2(motion_vector[1],motion_vector[0])*180 / math.pi\r\n```","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/527705574/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/593142929","html_url":"https://github.com/iperov/DeepFaceLab/issues/346#issuecomment-593142929","issue_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/346","id":593142929,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzE0MjkyOQ==","user":{"login":"ThomasBardem","id":57501789,"node_id":"MDQ6VXNlcjU3NTAxNzg5","avatar_url":"https://avatars.githubusercontent.com/u/57501789?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasBardem","html_url":"https://github.com/ThomasBardem","followers_url":"https://api.github.com/users/ThomasBardem/followers","following_url":"https://api.github.com/users/ThomasBardem/following{/other_user}","gists_url":"https://api.github.com/users/ThomasBardem/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasBardem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasBardem/subscriptions","organizations_url":"https://api.github.com/users/ThomasBardem/orgs","repos_url":"https://api.github.com/users/ThomasBardem/repos","events_url":"https://api.github.com/users/ThomasBardem/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasBardem/received_events","type":"User","site_admin":false},"created_at":"2020-03-01T20:41:39Z","updated_at":"2020-03-01T20:41:39Z","author_association":"NONE","body":"> Thanks so much for the response, very detailed.\r\n> \r\n> Just browsing the data, the landmarks are the lines (pts) that get drawn on in the aligned_debug images so I am writing a parser at the moment that will allow me to build animated masks based on the point information for each frame for the nose, face, eyes and mouth. It will also provide me a central tracking point to follow the face which may help with adding custom masks into the mix.\r\n> \r\n> May also be able to generate motion vectors to help manage motion blur as well. Will report back if I accomplish anything useful.\r\n\r\nI know I'm kinda digging oout old stuff by replying here and I'm not sure you'll read this but have you managed to ever get this thing to work (extract info from aligments and convert it into individual masks for each part of face like nose, eyes, mouth, eyebrows)?","reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/comments/593142929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ThomasBardem","id":57501789,"node_id":"MDQ6VXNlcjU3NTAxNzg5","avatar_url":"https://avatars.githubusercontent.com/u/57501789?v=4","gravatar_id":"","url":"https://api.github.com/users/ThomasBardem","html_url":"https://github.com/ThomasBardem","followers_url":"https://api.github.com/users/ThomasBardem/followers","following_url":"https://api.github.com/users/ThomasBardem/following{/other_user}","gists_url":"https://api.github.com/users/ThomasBardem/gists{/gist_id}","starred_url":"https://api.github.com/users/ThomasBardem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ThomasBardem/subscriptions","organizations_url":"https://api.github.com/users/ThomasBardem/orgs","repos_url":"https://api.github.com/users/ThomasBardem/repos","events_url":"https://api.github.com/users/ThomasBardem/events{/privacy}","received_events_url":"https://api.github.com/users/ThomasBardem/received_events","type":"User","site_admin":false}},{"id":3174666327,"node_id":"MDExOkNsb3NlZEV2ZW50MzE3NDY2NjMyNw==","url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/events/3174666327","actor":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-28T05:41:07Z","state_reason":null,"performed_via_github_app":null}]