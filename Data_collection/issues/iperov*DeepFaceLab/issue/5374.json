{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5374","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5374/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5374/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5374/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/5374","id":952973975,"node_id":"MDU6SXNzdWU5NTI5NzM5NzU=","number":5374,"title":"Multi GPU Support Broken","user":{"login":"holycowdude","id":63405100,"node_id":"MDQ6VXNlcjYzNDA1MTAw","avatar_url":"https://avatars.githubusercontent.com/u/63405100?v=4","gravatar_id":"","url":"https://api.github.com/users/holycowdude","html_url":"https://github.com/holycowdude","followers_url":"https://api.github.com/users/holycowdude/followers","following_url":"https://api.github.com/users/holycowdude/following{/other_user}","gists_url":"https://api.github.com/users/holycowdude/gists{/gist_id}","starred_url":"https://api.github.com/users/holycowdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/holycowdude/subscriptions","organizations_url":"https://api.github.com/users/holycowdude/orgs","repos_url":"https://api.github.com/users/holycowdude/repos","events_url":"https://api.github.com/users/holycowdude/events{/privacy}","received_events_url":"https://api.github.com/users/holycowdude/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-26T14:35:51Z","updated_at":"2021-07-26T14:35:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"- On Windows 10 Pro\r\n- 2 x RTX 3090 Graphic Cards **not** connected by SLI or NVLINK\r\n- DeepFaceLab_NVIDIA_RTX3000_series_build_07_17_2021.exe installed with no modifications\r\n- No other python instances installed\r\n- Hardware scheduling disabled (when enabled it gives an error at the start of training)\r\n- Latest NVIDIA STUDIO GPU drivers installed\r\n- Windows completely up to date\r\n- Using liae-ud & DF-UD models\r\n\r\n## Expected behavior\r\n\r\nWhen training on a single RTX3090 card it works well, eg for a 512 resolution model with standard settings the it/s time is around 800ms\r\nWhen selecting 2 x RTX3090 Graphic cards (eg GPU 0 & GPU 1 at the load screen) it is expected that the training time will be faster than a single card (less than 800its), and it should allow you to build higher quality models on the additional VRAM available from both cards but this is not happening and there is currently no benefit to train on 2 GPU's\r\nIt is also expected that you could train 2 different models at the same time (using GPU 0 for model 1 and GPU 1 for model 2 but it doesn't work)\r\n\r\n## Actual behavior\r\n\r\nWhen selecting 2 x RTX3090 on the training screen (GPU 0 & GPU 1) it is very slow to start training\r\nWhen it starts training the training time is double that of a single card eg 800its with a single card is now 1600-2000its with 2 cards\r\nIf you try and build a high quality model you get out of memory errors (DFL only uses 24GB of the combined 48GB VRAM and gives an OOM error)\r\nIt seems to be that DFL fills both cards VRAM equally like its duplicating the work rather than sharing it over both cards.\r\nI also tried to train 2 different models using both cards separately, eg model 1 using GPU 0 and model 2 using GPU 1, one will train but as soon as the 2nd starts training both give an error and stop.\r\n\r\n## Steps to reproduce\r\n\r\nInstall 2 x RTX3090 graphic cards (not connected by SLI or NVLINK\r\nHardware scheduling disabled\r\nTrain a liae-ud / DF-UD model by selecting both GPU's\r\nNotice very slow training time \r\n\r\n## Other relevant information\r\n\r\nWindows 10 with latest updates\r\nUsing untouched builds","closed_by":null,"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5374/reactions","total_count":2,"+1":0,"-1":0,"laugh":2,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5374/timeline","performed_via_github_app":null,"state_reason":null}