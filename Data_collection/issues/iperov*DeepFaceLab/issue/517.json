{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/517","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/517/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/517/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/517/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/517","id":537995295,"node_id":"MDU6SXNzdWU1Mzc5OTUyOTU=","number":517,"title":"ValueError while training","user":{"login":"Miha20","id":58894837,"node_id":"MDQ6VXNlcjU4ODk0ODM3","avatar_url":"https://avatars.githubusercontent.com/u/58894837?v=4","gravatar_id":"","url":"https://api.github.com/users/Miha20","html_url":"https://github.com/Miha20","followers_url":"https://api.github.com/users/Miha20/followers","following_url":"https://api.github.com/users/Miha20/following{/other_user}","gists_url":"https://api.github.com/users/Miha20/gists{/gist_id}","starred_url":"https://api.github.com/users/Miha20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Miha20/subscriptions","organizations_url":"https://api.github.com/users/Miha20/orgs","repos_url":"https://api.github.com/users/Miha20/repos","events_url":"https://api.github.com/users/Miha20/events{/privacy}","received_events_url":"https://api.github.com/users/Miha20/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-12-15T03:05:59Z","updated_at":"2021-04-19T20:30:02Z","closed_at":"2020-03-28T05:41:59Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\n\r\nI've been training models in H128 and SAE. I would expect the programm to go through iterations, till I end training of the model, since no iteration is specified during setup of training.\r\n\r\n## Actual behavior\r\n\r\nThe iteration counter changes from the normal info to one with nan in it, e.g.:\r\n\r\nfrom\r\n[13:53:35][#1406393][1314ms][0.2449][0.4413]\r\nto\r\n[14:01:30][#1406754][1302ms][nan][nan].4881]\r\n\r\nThis happens at different times. Can be a few minutes or hours, after training is started.\r\nHappens with H128 and SAE, have not tried other ones. But expect same outcome.\r\n\r\nWhen this occurs, and I press S for saving (or the autobackup kicks in) I get the following error message:\r\n\r\nError: cannot convert float NaN to integer1]\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 161, in trainerThread\r\n    model_save()\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 60, in model_save\r\n    model.save()\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 411, in save\r\n    preview_lh = ModelBase.get_loss_history_preview(self.loss_history, self.iter, preview.shape[1], preview.shape[2])\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 649, in get_loss_history_preview\r\n    ph_max = int ( (plist_max[col][p] / plist_abs_max) * (lh_height-1) )\r\nValueError: cannot convert float NaN to integer\r\nDone.\r\n\r\nIf I press P for an update of the preview, I would get:\r\n\r\nTraceback (most recent call last):nan].4332]\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\main.py\", line 304, in <module>\r\n    arguments.func(arguments)\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\main.py\", line 162, in process_train\r\n    Trainer.main(args, device_args)\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 288, in main\r\n    lh_img = models.ModelBase.get_loss_history_preview(loss_history_to_show, iter, w, c)\r\n  File \"C:\\DeepFaceLab_OpenCL_SSE\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 649, in get_loss_history_preview\r\n    ph_max = int ( (plist_max[col][p] / plist_abs_max) * (lh_height-1) )\r\nValueError: cannot convert float NaN to integer\r\n\r\nIf I pressed P it will continue with messages like\r\n[18:44:23][#1402285][1280ms][nan][nan]\r\ntill I press S or autobackup kicks in and then stop.\r\n\r\n## Steps to reproduce\r\n\r\nNo idea how to reproduce. Can't see a pattern.\r\n\r\n## Other relevant information\r\nRunning prebuilt Windows release DeepFaceLabOpenCLSSE version 12_12_2019 (same problem in versions 11_14_2019 and 11_12_2019)\r\nOn AMD RX480","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/517/timeline","performed_via_github_app":null,"state_reason":"completed"}