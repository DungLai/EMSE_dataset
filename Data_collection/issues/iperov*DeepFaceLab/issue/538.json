{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/538","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/538/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/538/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/538/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/538","id":543345952,"node_id":"MDU6SXNzdWU1NDMzNDU5NTI=","number":538,"title":"The trainer does not work in the DeepFaceLab_CUDA_9.2_SSE, both the face extractions work well.","user":{"login":"jiujitsu101","id":57220226,"node_id":"MDQ6VXNlcjU3MjIwMjI2","avatar_url":"https://avatars.githubusercontent.com/u/57220226?v=4","gravatar_id":"","url":"https://api.github.com/users/jiujitsu101","html_url":"https://github.com/jiujitsu101","followers_url":"https://api.github.com/users/jiujitsu101/followers","following_url":"https://api.github.com/users/jiujitsu101/following{/other_user}","gists_url":"https://api.github.com/users/jiujitsu101/gists{/gist_id}","starred_url":"https://api.github.com/users/jiujitsu101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiujitsu101/subscriptions","organizations_url":"https://api.github.com/users/jiujitsu101/orgs","repos_url":"https://api.github.com/users/jiujitsu101/repos","events_url":"https://api.github.com/users/jiujitsu101/events{/privacy}","received_events_url":"https://api.github.com/users/jiujitsu101/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-12-29T09:38:57Z","updated_at":"2020-03-28T05:42:16Z","closed_at":"2020-03-28T05:42:16Z","author_association":"NONE","active_lock_reason":null,"body":"**Hi,\r\nThe DeepFaceLab work in all things except for training on my laptop. \r\nI am using:\r\nI7-8th gen\r\nNVIDIA Geforce GTX 1050Ti - 4 GB VRAM\r\nCUDA 10.0 (Installed just for being safe)\r\ncuDNN related to it also installed\r\ninstalled latest tensorflow\r\n\r\nThe face extractions work well. Faces are extracted with no problem at all. The problem is during training. I click on the train H64 option and select all the default option (just pressing enter).\r\nThen the program loads for a few seconds and then burn out showing the message;**\r\n\"\r\nStarting. Press \"Enter\" to stop training and save model.\r\n[14:55:00][#000001][9578ms][3.8497][2.0770]\r\nError: OOM when allocating tensor with shape[2048,1024,3,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\n         [[{{node training/Adam/gradients/model_1/conv2d_5/convolution_grad/Conv2DBackpropFilter}} = Conv2DBackpropFilter[T=DT_FLOAT, _class=[\"loc:@train...kpropInput\"], data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](training/Adam/gradients/model_1/conv2d_5/convolution_grad/Conv2DBackpropFilter-0-TransposeNHWCToNCHW-LayoutOptimizer, ConstantFolding/training/Adam/gradients/model_1/conv2d_5/convolution_grad/ShapeN-matshapes-1, training/Adam/gradients/AddN_23)]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 109, in trainerThread\r\n    iter, iter_time = model.train_one_iter()\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 506, in train_one_iter\r\n    losses = self.onTrainOneIter(sample, self.generator_list)\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\DeepFaceLab\\models\\Model_H64\\Model.py\", line 88, in onTrainOneIter\r\n    total, loss_src_bgr, loss_src_mask, loss_dst_bgr, loss_dst_mask = self.ae.train_on_batch( [warped_src, target_src_full_mask, warped_dst, target_dst_full_mask], [target_src, target_src_full_mask, target_dst, target_dst_full_mask] )\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\engine\\training.py\", line 1217, in train_on_batch\r\n    outputs = self.train_function(ins)\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2715, in __call__\r\n    return self._call(inputs)\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2675, in _call\r\n    fetched = self._callable_fn(*array_vals)\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1439, in __call__\r\n    run_metadata_ptr)\r\n  File \"C:\\Users\\x\\Desktop\\DeepFaceLab_CUDA_9.2_SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[2048,1024,3,3] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\n         [[{{node training/Adam/gradients/model_1/conv2d_5/convolution_grad/Conv2DBackpropFilter}} = Conv2DBackpropFilter[T=DT_FLOAT, _class=[\"loc:@train...kpropInput\"], data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](training/Adam/gradients/model_1/conv2d_5/convolution_grad/Conv2DBackpropFilter-0-TransposeNHWCToNCHW-LayoutOptimizer, ConstantFolding/training/Adam/gradients/model_1/conv2d_5/convolution_grad/ShapeN-matshapes-1, training/Adam/gradients/AddN_23)]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\nDone.\r\nPress any key to continue . . .\r\n\"\r\n\r\nPlease sir help if you can, I have downloaded all sorts of CUDA and CUDNN. Please advise on what to do. I am very frustrated and nothing works.\r\n\r\nI also used the OpenCL_SSE latest version too. That one uses just my CPU, not my GPU. Please advise on what to do.\r\nI will be greatful","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/538/timeline","performed_via_github_app":null,"state_reason":"completed"}