{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5456","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5456/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5456/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5456/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/5456","id":1096210080,"node_id":"I_kwDOCBuapc5BVtag","number":5456,"title":"RTX 2060 Super - SAEHD training Memory Error even with Batch size 1","user":{"login":"Stingrayseven","id":97287484,"node_id":"U_kgDOBcx9PA","avatar_url":"https://avatars.githubusercontent.com/u/97287484?v=4","gravatar_id":"","url":"https://api.github.com/users/Stingrayseven","html_url":"https://github.com/Stingrayseven","followers_url":"https://api.github.com/users/Stingrayseven/followers","following_url":"https://api.github.com/users/Stingrayseven/following{/other_user}","gists_url":"https://api.github.com/users/Stingrayseven/gists{/gist_id}","starred_url":"https://api.github.com/users/Stingrayseven/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stingrayseven/subscriptions","organizations_url":"https://api.github.com/users/Stingrayseven/orgs","repos_url":"https://api.github.com/users/Stingrayseven/repos","events_url":"https://api.github.com/users/Stingrayseven/events{/privacy}","received_events_url":"https://api.github.com/users/Stingrayseven/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2022-01-07T10:56:49Z","updated_at":"2022-11-25T07:27:42Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Tried lowering all kinds of resolutions and batch size to no avail. Currently at batch size 1 it's still giving me a memory error. I don't think this should happen on my GPU.\r\n\r\nWindows 10.0.18363 Build 18363\r\nAMD Ryzen 5 3600\r\nNvidia RTX 2060 Super\r\n\r\n## CMD\r\n```\r\n===================== Model Summary ======================\r\n==                                                      ==\r\n==            Model name: new_SAEHD                     ==\r\n==                                                      ==\r\n==     Current iteration: 0                             ==\r\n==                                                      ==\r\n==------------------- Model Options --------------------==\r\n==                                                      ==\r\n==            resolution: 64                            ==\r\n==             face_type: wf                            ==\r\n==     models_opt_on_gpu: True                          ==\r\n==                 archi: df                            ==\r\n==               ae_dims: 64                            ==\r\n==                e_dims: 32                            ==\r\n==                d_dims: 32                            ==\r\n==           d_mask_dims: 22                            ==\r\n==       masked_training: True                          ==\r\n==       eyes_mouth_prio: False                         ==\r\n==           uniform_yaw: True                          ==\r\n==         blur_out_mask: False                         ==\r\n==             adabelief: True                          ==\r\n==            lr_dropout: n                             ==\r\n==           random_warp: False                         ==\r\n==      random_hsv_power: 0.0                           ==\r\n==       true_face_power: 0.0                           ==\r\n==      face_style_power: 0.0                           ==\r\n==        bg_style_power: 0.0                           ==\r\n==               ct_mode: none                          ==\r\n==              clipgrad: True                          ==\r\n==              pretrain: True                          ==\r\n==       autobackup_hour: 1                             ==\r\n== write_preview_history: True                          ==\r\n==           target_iter: 0                             ==\r\n==       random_src_flip: True                          ==\r\n==       random_dst_flip: True                          ==\r\n==            batch_size: 1                             ==\r\n==             gan_power: 0.0                           ==\r\n==        gan_patch_size: 16                            ==\r\n==              gan_dims: 16                            ==\r\n==                                                      ==\r\n==--------------------- Running On ---------------------==\r\n==                                                      ==\r\n==          Device index: 0                             ==\r\n==                  Name: NVIDIA GeForce RTX 2060 SUPER ==\r\n==                  VRAM: 6.17GB                        ==\r\n==                                                      ==\r\n==========================================================\r\nStarting. Press \"Enter\" to stop training and save model.\r\n\r\nTrying to do the first iteration. If an error occurs, reduce the model parameters.\r\n\r\n!!!\r\nWindows 10 users IMPORTANT notice. You should set this setting in order to work correctly.\r\nhttps://i.imgur.com/B7cmDCB.jpg\r\n!!!\r\nError:\r\nTraceback (most recent call last):\r\n  File \"D:\\Program Files (x86)\\Everything Deepfake\\DeepFaceLab\\DeepFaceLab_NVIDIA_up_to_RTX2080Ti\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 159, in trainerThread\r\n    model_save()\r\n  File \"D:\\Program Files (x86)\\Everything Deepfake\\DeepFaceLab\\DeepFaceLab_NVIDIA_up_to_RTX2080Ti\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 68, in model_save\r\n    model.save()\r\n  File \"D:\\Program Files (x86)\\Everything Deepfake\\DeepFaceLab\\DeepFaceLab_NVIDIA_up_to_RTX2080Ti\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 393, in save\r\n    self.onSave()\r\n  File \"D:\\Program Files (x86)\\Everything Deepfake\\DeepFaceLab\\DeepFaceLab_NVIDIA_up_to_RTX2080Ti\\_internal\\DeepFaceLab\\models\\Model_SAEHD\\Model.py\", line 759, in onSave\r\n    model.save_weights ( self.get_strpath_storage_for_file(filename) )\r\n  File \"D:\\Program Files (x86)\\Everything Deepfake\\DeepFaceLab\\DeepFaceLab_NVIDIA_up_to_RTX2080Ti\\_internal\\DeepFaceLab\\core\\leras\\layers\\Saveable.py\", line 61, in save_weights\r\n    d_dumped = pickle.dumps (d, 4)\r\nMemoryError\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5456/timeline","performed_via_github_app":null,"state_reason":null}