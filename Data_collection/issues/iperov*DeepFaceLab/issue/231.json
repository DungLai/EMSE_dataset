{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/231","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/231/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/231/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/231/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/231","id":431807879,"node_id":"MDU6SXNzdWU0MzE4MDc4Nzk=","number":231,"title":"Unable to start subprocesses. GTX 1060.","user":{"login":"lumaaaaaa","id":24190720,"node_id":"MDQ6VXNlcjI0MTkwNzIw","avatar_url":"https://avatars.githubusercontent.com/u/24190720?v=4","gravatar_id":"","url":"https://api.github.com/users/lumaaaaaa","html_url":"https://github.com/lumaaaaaa","followers_url":"https://api.github.com/users/lumaaaaaa/followers","following_url":"https://api.github.com/users/lumaaaaaa/following{/other_user}","gists_url":"https://api.github.com/users/lumaaaaaa/gists{/gist_id}","starred_url":"https://api.github.com/users/lumaaaaaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lumaaaaaa/subscriptions","organizations_url":"https://api.github.com/users/lumaaaaaa/orgs","repos_url":"https://api.github.com/users/lumaaaaaa/repos","events_url":"https://api.github.com/users/lumaaaaaa/events{/privacy}","received_events_url":"https://api.github.com/users/lumaaaaaa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-04-11T03:01:45Z","updated_at":"2019-04-11T09:33:05Z","closed_at":"2019-04-11T09:33:05Z","author_association":"NONE","active_lock_reason":null,"body":"THIS IS NOT TECH SUPPORT FOR NEWBIE FAKERS\r\nPOST ONLY ISSUES RELATED TO BUGS OR CODE\r\n\r\n## Expected behavior\r\nI'm supposed to end up with extracted faces from my video.\r\n## Actual behavior\r\nI get an error when running the face extract after extracting frames. This is the error:\r\nPerforming 1st pass...\r\nRunning on GeForce GTX 1060 with Max-Q Design #1.\r\nRunning on GeForce GTX 1060 with Max-Q Design #2.\r\nRunning on GeForce GTX 1060 with Max-Q Design #0.\r\nUsing TensorFlow backend.\r\nUsing TensorFlow backend.\r\nUsing TensorFlow backend.\r\nfatal   : Memory allocation failure\r\n22020101919-9-004-04-10-4 1-10 11099 19:5:52:5:221::511.559..099200172361984:66 ::  EE  Ett eetnnessnoosrroffrllfoolwwo//wss/ttsrrteereaaammm___eeexxxeeecccuuutttooorrr///cccuudduaad//acc/uucdduaad__add_nndnnn..ncc.ccc::c33:773337]]3 C]o  uCCloouldud l ndno ot tncrote  atccerear teae tcceuu ddcnnunnd  nhhnaa nnhddallneed::l  eCC:UU DDCNNUNND__NSSNTT_AASTTTUUASST__UIISNN_TTIEENRRTNNERNAAALLL___EEERRRRRROOORRR\r\n\r\n\r\nfatal   : Memory allocation failure\r\n2019-04-10 19:52:15.2290021920-17048:-9 1-E00  4t1-e91n:0s52o :r11f95l:.o59w22/:3s13t58r.8e9:a2 m3E_3 e3tx4ee:nc suEot rotfrel/nocswuo/drsaft/lrcoeuwad/mas__tedrxneenacut.moc_rce/:xc3eu7cd3ua]t/ ocCruo/dula_dcunddn a.n/cocctu: d3ca7r_3ed]an tnCo.euc lccd:u 3dn7no3nt]   haCcroneadutlee cudnn handle:l: d CUDNN_CUS DTANnTN_UoSS_TATtIU NScT_rERNIeANaLTE_teER cuRRdNOnARnL\r\n h_EaRROR\r\nndle: CUDNN_STATUS_INTERNAL_ERROR\r\nException: Traceback (most recent call last):\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\", line 59, in _subprocess_run\r\n    self.on_initialize(client_dict)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\mainscripts\\Extractor.py\", line 71, in on_initialize\r\n    self.e.__enter__()\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\facelib\\MTCExtractor.py\", line 82, in __enter__\r\n    faces, pnts = detect_face ( np.zeros ( (self.scale_to, self.scale_to, 3)), self.min_face_size, self.pnet_fun, self.rnet_fun, self.onet_fun, [ self.thresh1, self.thresh2, self.thresh3 ], self.scale_factor )\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\facelib\\MTCExtractor.py\", line 136, in detect_face\r\n    out = pnet([img_y])\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2715, in __call__\r\n    return self._call(inputs)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2675, in _call\r\n    fetched = self._callable_fn(*array_vals)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1439, in __call__\r\n    run_metadata_ptr)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.UnknownError: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n         [[{{node conv1/convolution}} = Conv2D[T=DT_FLOAT, data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"VALID\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](conv1/convolution-0-TransposeNHWCToNCHW-LayoutOptimizer, conv1/kernel/read)]]\r\n\r\nException: Traceback (most recent call last):\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\", line 59, in _subprocess_run\r\n    self.on_initialize(client_dict)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\mainscripts\\Extractor.py\", line 71, in on_initialize\r\n    self.e.__enter__()\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\facelib\\MTCExtractor.py\", line 82, in __enter__\r\n    faces, pnts = detect_face ( np.zeros ( (self.scale_to, self.scale_to, 3)), self.min_face_size, self.pnet_fun, self.rnet_fun, self.onet_fun, [ self.thresh1, self.thresh2, self.thresh3 ], self.scale_factor )\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\facelib\\MTCExtractor.py\", line 136, in detect_face\r\n    out = pnet([img_y])\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2715, in __call__\r\n    return self._call(inputs)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2675, in _call\r\n    fetched = self._callable_fn(*array_vals)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1439, in __call__\r\n    run_metadata_ptr)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.UnknownError: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n         [[{{node conv1/convolution}} = Conv2D[T=DT_FLOAT, data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"VALID\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](conv1/convolution-0-TransposeNHWCToNCHW-LayoutOptimizer, conv1/kernel/read)]]\r\n\r\nException: Traceback (most recent call last):\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\", line 59, in _subprocess_run\r\n    self.on_initialize(client_dict)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\mainscripts\\Extractor.py\", line 71, in on_initialize\r\n    self.e.__enter__()\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\facelib\\MTCExtractor.py\", line 82, in __enter__\r\n    faces, pnts = detect_face ( np.zeros ( (self.scale_to, self.scale_to, 3)), self.min_face_size, self.pnet_fun, self.rnet_fun, self.onet_fun, [ self.thresh1, self.thresh2, self.thresh3 ], self.scale_factor )\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\facelib\\MTCExtractor.py\", line 136, in detect_face\r\n    out = pnet([img_y])\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2715, in __call__\r\n    return self._call(inputs)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py\", line 2675, in _call\r\n    fetched = self._callable_fn(*array_vals)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1439, in __call__\r\n    run_metadata_ptr)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.UnknownError: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n         [[{{node conv1/convolution}} = Conv2D[T=DT_FLOAT, data_format=\"NCHW\", dilations=[1, 1, 1, 1], padding=\"VALID\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](conv1/convolution-0-TransposeNHWCToNCHW-LayoutOptimizer, conv1/kernel/read)]]\r\n         [[{{node softmax_1/truediv/_305}} = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_111_softmax_1/truediv\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\r\n\r\nTraceback (most recent call last):\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\main.py\", line 213, in <module>\r\n    arguments.func(arguments)\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\main.py\", line 35, in process_extract\r\n    'multi_gpu' : arguments.multi_gpu,\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\mainscripts\\Extractor.py\", line 725, in main\r\n    data = ExtractSubprocessor ([ ExtractSubprocessor.Data(filename) for filename in input_path_image_paths ], 'rects-'+detector, image_size, face_type, debug_dir, multi_gpu=multi_gpu, cpu_only=cpu_only, manual=False).run()\r\n  File \"A:\\macheese\\DeepFaceLabCUDA9.2SSE\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\", line 187, in run\r\n    raise Exception ( \"Unable to start subprocesses.\" )\r\nException: Unable to start subprocesses.\r\n## Steps to reproduce\r\nI have tried with all CUDA9 builds, but no luck. I extracted at 5 frames, and now when I try to extract faces, I get the above error.\r\n## Other relevant information\r\n- **Command lined used (if not specified in steps to reproduce)**: main.py ... cmd.exe\r\n- **Operating system and version:** Windows 10 Pro 1809\r\n- **Python version:** 3.7","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/231/timeline","performed_via_github_app":null,"state_reason":"completed"}