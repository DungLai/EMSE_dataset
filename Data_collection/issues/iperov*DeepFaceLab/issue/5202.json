{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5202","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5202/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5202/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5202/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/5202","id":770206284,"node_id":"MDU6SXNzdWU3NzAyMDYyODQ=","number":5202,"title":"Training XSeg doesn't continue, doesn't error.","user":{"login":"jarviscodes","id":31391792,"node_id":"MDQ6VXNlcjMxMzkxNzky","avatar_url":"https://avatars.githubusercontent.com/u/31391792?v=4","gravatar_id":"","url":"https://api.github.com/users/jarviscodes","html_url":"https://github.com/jarviscodes","followers_url":"https://api.github.com/users/jarviscodes/followers","following_url":"https://api.github.com/users/jarviscodes/following{/other_user}","gists_url":"https://api.github.com/users/jarviscodes/gists{/gist_id}","starred_url":"https://api.github.com/users/jarviscodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jarviscodes/subscriptions","organizations_url":"https://api.github.com/users/jarviscodes/orgs","repos_url":"https://api.github.com/users/jarviscodes/repos","events_url":"https://api.github.com/users/jarviscodes/events{/privacy}","received_events_url":"https://api.github.com/users/jarviscodes/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-12-17T16:49:18Z","updated_at":"2021-01-05T08:54:27Z","closed_at":"2020-12-17T23:27:57Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\n\r\nAfter going through extraction and basic XSeg editing, I'm trying to run the XSeg_train.bat. \r\nThe first iteration kicks off pretty fast. \r\nExpected: Continue training after first step or throw an error.\r\n\r\n## Actual behavior\r\n\r\nScript hangs indefinitely (let it run for 12-14 hours) after output below:\r\n\r\n```\r\nRunning trainer.\r\n\r\n\r\nModel first run.\r\n\r\nChoose one or several GPU idxs (separated by comma).\r\n\r\n[CPU] : CPU\r\n  [0] : GeForce GTX 1080\r\n\r\n[0] Which GPU indexes to choose? : 0\r\n0\r\n\r\n[wf] Face type ( h/mf/f/wf/head ?:help ) :\r\nwf\r\n[4] Batch_size ( 2-16 ?:help ) :\r\n4\r\nLoading samples: 100%|############################################################| 2179/2179 [00:11<00:00, 193.29it/s]\r\nLoading samples: 100%|############################################################| 1319/1319 [00:07<00:00, 178.98it/s]\r\nFiltering: 100%|##################################################################| 3498/3498 [00:03<00:00, 961.40it/s]\r\nUsing 188 segmented samples.\r\n============= Model Summary =============\r\n==                                     ==\r\n==        Model name: XSeg             ==\r\n==                                     ==\r\n== Current iteration: 0                ==\r\n==                                     ==\r\n==----------- Model Options -----------==\r\n==                                     ==\r\n==         face_type: wf               ==\r\n==        batch_size: 4                ==\r\n==                                     ==\r\n==------------ Running On -------------==\r\n==                                     ==\r\n==      Device index: 0                ==\r\n==              Name: GeForce GTX 1080 ==\r\n==              VRAM: 8.00GB           ==\r\n==                                     ==\r\n=========================================\r\nStarting. Press \"Enter\" to stop training and save model.\r\n\r\nTrying to do the first iteration. If an error occurs, reduce the model parameters.\r\n```\r\n\r\nThe first time I tried this I ran it with batch_size 16, next 8, now at 4. Have not tried lower, but 12 hours for no additional iterations seems rather long.\r\n\r\nNote: The preview for the first iteration is shown correctly. I can cycle through the different loaded masks for that iteration.\r\n\r\n## Steps to reproduce\r\n\r\nrun `5.XSeg) train.bat` after extracting and aligning faces, and editing masks.\r\n\r\n## Other relevant information\r\n\r\nSpecs:\r\n* Intel i7-6700K (4GHz)\r\n* 32GB RAM (Already increased pagefile on SSD to 60 GB)\r\n* 64 bit \r\n* Windows 10 V 1909 Build 18363.1256\r\n* Python Version: The one that came with a fresh DFL Download yesterday.\r\n* Driver version: 460.89\r\n* Other Cuda installations: Removed entirely\r\n* DFL on OS Boot disk? Yes, but a different partition. \r\n\r\nI also notice specifically low usage, when usually training models my GPU Memory (8GB) is used up to 6.8GB, DFL is not taking more than 4.8GB VideoRAM. Also only using 1.4GB of RAM with more than 28 available.\r\nMy CPU is near idle, and so is my GPU. See imgur ss below.\r\n\r\n![Screenshot](https://i.imgur.com/u88ikE4.png)\r\n\r\nPlease let me know if there's more debugging logs I can attach.","closed_by":{"login":"jarviscodes","id":31391792,"node_id":"MDQ6VXNlcjMxMzkxNzky","avatar_url":"https://avatars.githubusercontent.com/u/31391792?v=4","gravatar_id":"","url":"https://api.github.com/users/jarviscodes","html_url":"https://github.com/jarviscodes","followers_url":"https://api.github.com/users/jarviscodes/followers","following_url":"https://api.github.com/users/jarviscodes/following{/other_user}","gists_url":"https://api.github.com/users/jarviscodes/gists{/gist_id}","starred_url":"https://api.github.com/users/jarviscodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jarviscodes/subscriptions","organizations_url":"https://api.github.com/users/jarviscodes/orgs","repos_url":"https://api.github.com/users/jarviscodes/repos","events_url":"https://api.github.com/users/jarviscodes/events{/privacy}","received_events_url":"https://api.github.com/users/jarviscodes/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5202/timeline","performed_via_github_app":null,"state_reason":"completed"}