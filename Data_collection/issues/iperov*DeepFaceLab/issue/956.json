{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/956","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/956/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/956/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/956/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/956","id":749216571,"node_id":"MDU6SXNzdWU3NDkyMTY1NzE=","number":956,"title":"Issue with dual GTX 1080TI cards","user":{"login":"fuorissimo","id":35644089,"node_id":"MDQ6VXNlcjM1NjQ0MDg5","avatar_url":"https://avatars.githubusercontent.com/u/35644089?v=4","gravatar_id":"","url":"https://api.github.com/users/fuorissimo","html_url":"https://github.com/fuorissimo","followers_url":"https://api.github.com/users/fuorissimo/followers","following_url":"https://api.github.com/users/fuorissimo/following{/other_user}","gists_url":"https://api.github.com/users/fuorissimo/gists{/gist_id}","starred_url":"https://api.github.com/users/fuorissimo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuorissimo/subscriptions","organizations_url":"https://api.github.com/users/fuorissimo/orgs","repos_url":"https://api.github.com/users/fuorissimo/repos","events_url":"https://api.github.com/users/fuorissimo/events{/privacy}","received_events_url":"https://api.github.com/users/fuorissimo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-11-24T00:05:24Z","updated_at":"2020-11-27T12:39:06Z","closed_at":"2020-11-27T12:39:06Z","author_association":"NONE","active_lock_reason":null,"body":"Hi everyone, I just bought 2 GTX 1080TI cards. I have installed them and they are recognized by the system, the drivers are up to date. One is on PCI16X (which obviously works at 8x) and the second is on PCIE4X (I have Asus crossfire motherboard).\r\n\r\nNO SLI CONNECTION\r\n\r\nWhen I launch DFL I immediately get this error and then everything crashes. The first card has about 8.5GB allocated (GPU0 wich is on PCIE16X), while the second only 4.5Gb (GPU1 wich is on PCIE4X). For this reason, the program indicates that it lacks 4Gb and stops responding. What's the problem? I try to use it in SLI? (there is a program that allows it (DifferentSliAuto). I bought these cards on purpose, it would be a real disaster.\r\n\r\nThe really nonsense is that if I run train using only one card (0,1 option), card0 not work (same error) (but using 2 gpu is the one with memory allocated) and card1 (wich is on PCIE4X) it work fine. If i disable card1 and i try again, card0 work again.\r\n\r\nI have a ghost in my case? :)\r\n\r\nSort by yaw: 100%|######################################################################################################################################################################################| 128/128 [00:00<00:00, 1170.35it/s]\r\n2020-11-23 23:46:26.065111: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:26.160303: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 3.60G (3865470464 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:26.253655: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 3.24G (3478923264 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:26.344427: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 2.92G (3131030784 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:26.469213: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:26.671608: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n================ Model Summary =================\r\n==                                            ==\r\n==            Model name: 320head_SAEHD       ==\r\n==                                            ==\r\n==     Current iteration: 150000              ==\r\n==                                            ==\r\n==-------------- Model Options ---------------==\r\n==                                            ==\r\n==            resolution: 320                 ==\r\n==             face_type: head                ==\r\n==     models_opt_on_gpu: True                ==\r\n==                 archi: df-ud               ==\r\n==               ae_dims: 256                 ==\r\n==                e_dims: 64                  ==\r\n==                d_dims: 80                  ==\r\n==           d_mask_dims: 32                  ==\r\n==       masked_training: True                ==\r\n==             eyes_prio: True                ==\r\n==           uniform_yaw: True                ==\r\n==            lr_dropout: y                   ==\r\n==           random_warp: False               ==\r\n==             gan_power: 0.1                 ==\r\n==       true_face_power: 0.01                ==\r\n==      face_style_power: 0.0                 ==\r\n==        bg_style_power: 0.0                 ==\r\n==               ct_mode: none                ==\r\n==              clipgrad: False               ==\r\n==              pretrain: False               ==\r\n==       autobackup_hour: 1                   ==\r\n== write_preview_history: False               ==\r\n==           target_iter: 200000              ==\r\n==           random_flip: True                ==\r\n==            batch_size: 8                   ==\r\n==                                            ==\r\n==---------------- Running On ----------------==\r\n==                                            ==\r\n==          Device index: 0                   ==\r\n==                  Name: GeForce GTX 1080 Ti ==\r\n==                  VRAM: 11.00GB             ==\r\n==          Device index: 1                   ==\r\n==                  Name: GeForce GTX 1080 Ti ==\r\n==                  VRAM: 11.00GB             ==\r\n==                                            ==\r\n================================================\r\nStarting. Target iteration: 200000. Press \"Enter\" to stop training and save model.\r\n2020-11-23 23:46:38.813222: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:38.914679: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:39.329281: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:39.593559: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n2020-11-23 23:46:39.704984: E tensorflow/stream_executor/cuda/cuda_driver.cc:806] failed to allocate 4.00G (4294967296 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory","closed_by":{"login":"fuorissimo","id":35644089,"node_id":"MDQ6VXNlcjM1NjQ0MDg5","avatar_url":"https://avatars.githubusercontent.com/u/35644089?v=4","gravatar_id":"","url":"https://api.github.com/users/fuorissimo","html_url":"https://github.com/fuorissimo","followers_url":"https://api.github.com/users/fuorissimo/followers","following_url":"https://api.github.com/users/fuorissimo/following{/other_user}","gists_url":"https://api.github.com/users/fuorissimo/gists{/gist_id}","starred_url":"https://api.github.com/users/fuorissimo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuorissimo/subscriptions","organizations_url":"https://api.github.com/users/fuorissimo/orgs","repos_url":"https://api.github.com/users/fuorissimo/repos","events_url":"https://api.github.com/users/fuorissimo/events{/privacy}","received_events_url":"https://api.github.com/users/fuorissimo/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/956/timeline","performed_via_github_app":null,"state_reason":"completed"}