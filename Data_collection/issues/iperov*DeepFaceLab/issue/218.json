{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/218","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/218/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/218/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/218/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/218","id":429728878,"node_id":"MDU6SXNzdWU0Mjk3Mjg4Nzg=","number":218,"title":"Memory issue with extreme slowdown when converting","user":{"login":"wesson09","id":49007620,"node_id":"MDQ6VXNlcjQ5MDA3NjIw","avatar_url":"https://avatars.githubusercontent.com/u/49007620?v=4","gravatar_id":"","url":"https://api.github.com/users/wesson09","html_url":"https://github.com/wesson09","followers_url":"https://api.github.com/users/wesson09/followers","following_url":"https://api.github.com/users/wesson09/following{/other_user}","gists_url":"https://api.github.com/users/wesson09/gists{/gist_id}","starred_url":"https://api.github.com/users/wesson09/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wesson09/subscriptions","organizations_url":"https://api.github.com/users/wesson09/orgs","repos_url":"https://api.github.com/users/wesson09/repos","events_url":"https://api.github.com/users/wesson09/events{/privacy}","received_events_url":"https://api.github.com/users/wesson09/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-04-05T12:23:40Z","updated_at":"2019-04-05T17:43:32Z","closed_at":"2019-04-05T17:43:31Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\n\r\nConvert on 4K with decent speed on computer with a lot of logical cores.\r\n\r\n## Actual behavior\r\n\r\nthere is as many instances of converters as there is CPU logical cores. With 4K dest, each instance takes 2GB+ of private RAM. So it sucks dry the physical RAM and goes on SWAP, which in turn cause extreme slowdown in the process. Often it also cause the spawned process to be auto-killed as they don't respond after the 60 seconds delay.\r\n\r\n## Steps to reproduce\r\nTry a 4k convert on a computer with CPU with 8 cores/16 threads and 16 GB of RAM or less.\r\n\r\n## Other relevant information\r\n- Use prebuilt windows binaries\r\n- Quick and dirty solving of the issue in file mainscripts/Converter.py line 153\r\n\r\n`r = [0] if self.debug else range(min(8,multiprocessing.cpu_count()))`\r\n\r\nBetter solution would be to consider the available RAM","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/218/timeline","performed_via_github_app":null,"state_reason":"completed"}