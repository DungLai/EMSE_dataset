{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/188","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/188/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/188/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/188/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/188","id":420084057,"node_id":"MDU6SXNzdWU0MjAwODQwNTc=","number":188,"title":"Azure NC6 Tesla K80, Train hang after 5 minutes","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-03-12T16:28:44Z","updated_at":"2019-03-16T03:50:01Z","closed_at":"2019-03-16T03:50:01Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\nTrain works.\r\n\r\n## Actual behavior\r\n![QQ截图20190313001424](https://user-images.githubusercontent.com/26805927/54217414-8ab98a80-4526-11e9-8432-9f670ad22bf4.jpg)\r\nAt first, train goes fine, but after 5 minutes, it just hang\\stuck.\r\nProgram just hang there, always Epoch 127, wait 6 hours, nothing changed.\r\nSAE, LIAE128, DF and so on, none of them works.\r\n\r\n## Steps to reproduce\r\nPut aligned face to dst and src, then run train.bat\r\n\r\n## Other relevant information\r\nAzure Cloud Platform\r\nInstance:    Standard NC6 (1 Tesla K80 GPU)\r\nWindows 10 1809\r\nTried Nvidia Driver 398.75 CUDA9.2 and 412.29 CUDA10. None of them works.\r\nTried  DeepFaceLabCUDA_build_28_02_2019,  DeepFaceLabCUDA_build_03_01_2019 RTX OK, DeepFaceLabCUDA9.0SSE_build_03_04_2019, DeepFaceLabCUDA9.2SSE_build_03_11_2019, DeepFaceLabCUDA10.1AVX_build_03_11_2019. None of them works.\r\n\r\nLog Here:\r\n<pre>Running trainer.\r\n\r\nLoading model...\r\n\r\nModel first run. Enter model options as default for each run.\r\nWrite preview history? (y/n ?:help skip:n/default) :\r\nn\r\nTarget epoch (skip:unlimited/default) :\r\n0\r\nBatch_size (?:help skip:0/default) :\r\n0\r\nFeed faces to network sorted by yaw? (y/n ?:help skip:n) :\r\nn\r\nFlip faces randomly? (y/n ?:help skip:y) :\r\ny\r\nSrc face scale modifier % ( -30...30, ?:help skip:0) :\r\n0\r\nResolution ( 64-256 ?:help skip:128) :\r\n128\r\nHalf or Full face? (h/f, ?:help skip:f) :\r\nf\r\nLearn mask? (y/n, ?:help skip:y) :\r\ny\r\nAE architecture (df, liae, vg ?:help skip:df) :\r\ndf\r\nAutoEncoder dims (32-1024 ?:help skip:512) :\r\n512\r\nEncoder/Decoder dims per channel (21-85 ?:help skip:42) :\r\n42\r\nUse lightweight encoder? (y/n, ?:help skip:n) :\r\nn\r\nUse multiscale decoder? (y/n, ?:help skip:y) :\r\ny\r\nUse pixel loss? (y/n, ?:help skip: n/default ) :\r\nn\r\nFace style power ( 0.0 .. 100.0 ?:help skip:0.00) :\r\n0.0\r\nBackground style power ( 0.0 .. 100.0 ?:help skip:0.00) :\r\n0.0\r\nD:\\DeepFaceLabCUDA\\_internal\\bin\\lib\\site-packages\\h5py\\__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from float to np.floating is deprecated. In future, it will be treated as np.float64 == np.dtype(float).type.\r\n  from ._conv import register_converters as _register_converters\r\n2019-03-12 16:07:05.803960: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n2019-03-12 16:07:06.037394: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties:\r\nname: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235\r\npciBusID: 0001:00:00.0\r\ntotalMemory: 11.18GiB freeMemory: 10.94GiB\r\n2019-03-12 16:07:06.043903: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n2019-03-12 16:07:07.680015: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-03-12 16:07:07.683777: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0\r\n2019-03-12 16:07:07.686102: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N\r\n2019-03-12 16:07:07.691307: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10595 MB memory) -> physical GPU (device: 0, name: Tesla K80, pci bus id: 0001:00:00.0, compute capability: 3.7)\r\nUsing TensorFlow backend.\r\nWARNING:tensorflow:From D:\\DeepFaceLabCUDA\\_internal\\bin\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\nWARNING:tensorflow:From D:\\DeepFaceLabCUDA\\_internal\\bin\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.cast instead.\r\nLoading: 100%|####################################################################| 1283/1283 [00:03<00:00, 421.90it/s]\r\nLoading: 100%|####################################################################| 1540/1540 [00:04<00:00, 369.12it/s]\r\n===== Model summary =====\r\n== Model name: SAE\r\n==\r\n== Current epoch: 0\r\n==\r\n== Model options:\r\n== |== batch_size : 4\r\n== |== sort_by_yaw : False\r\n== |== random_flip : True\r\n== |== resolution : 128\r\n== |== face_type : f\r\n== |== learn_mask : True\r\n== |== archi : df\r\n== |== ae_dims : 512\r\n== |== ed_ch_dims : 42\r\n== |== lighter_encoder : False\r\n== |== multiscale_decoder : True\r\n== |== pixel_loss : False\r\n== |== face_style_power : 0.0\r\n== |== bg_style_power : 0.0\r\n== Running on:\r\n== |== [0 : Tesla K80]\r\n=========================\r\nSaving...\r\nStarting. Press \"Enter\" to stop training and save model.\r\n2019-03-12 16:07:35.149056: I tensorflow/stream_executor/dso_loader.cc:152] successfully opened CUDA library cublas64_100.dll locally\r\nSaving...[#000165][1071ms] src_loss:4.926 dst_loss:9.92880</pre>","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/188/timeline","performed_via_github_app":null,"state_reason":"completed"}