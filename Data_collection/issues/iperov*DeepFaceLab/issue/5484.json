{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5484","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5484/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5484/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5484/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/5484","id":1150751454,"node_id":"I_kwDOCBuapc5ElxLe","number":5484,"title":"Is SAEhd Broken for gtx 1080 drivers? 2 Root errors out the box. nothing has been changed.","user":{"login":"HDNinecloudz","id":100440463,"node_id":"U_kgDOBfyZjw","avatar_url":"https://avatars.githubusercontent.com/u/100440463?v=4","gravatar_id":"","url":"https://api.github.com/users/HDNinecloudz","html_url":"https://github.com/HDNinecloudz","followers_url":"https://api.github.com/users/HDNinecloudz/followers","following_url":"https://api.github.com/users/HDNinecloudz/following{/other_user}","gists_url":"https://api.github.com/users/HDNinecloudz/gists{/gist_id}","starred_url":"https://api.github.com/users/HDNinecloudz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HDNinecloudz/subscriptions","organizations_url":"https://api.github.com/users/HDNinecloudz/orgs","repos_url":"https://api.github.com/users/HDNinecloudz/repos","events_url":"https://api.github.com/users/HDNinecloudz/events{/privacy}","received_events_url":"https://api.github.com/users/HDNinecloudz/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-02-25T18:52:08Z","updated_at":"2022-02-25T19:41:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Running SAEhd on CPU gives this error: internal compiler error, abnormal program termination.\r\n\r\nRunning SAEhd on GPU gives me this error\r\n\r\n================== Model Summary ===================\r\n==                                                ==\r\n==            Model name: new_SAEHD               ==\r\n==                                                ==\r\n==     Current iteration: 1000000                 ==\r\n==                                                ==\r\n==---------------- Model Options -----------------==\r\n==                                                ==\r\n==            resolution: 288                     ==\r\n==             face_type: wf                      ==\r\n==     models_opt_on_gpu: True                    ==\r\n==                 archi: df                      ==\r\n==               ae_dims: 384                     ==\r\n==                e_dims: 92                      ==\r\n==                d_dims: 72                      ==\r\n==           d_mask_dims: 22                      ==\r\n==       masked_training: True                    ==\r\n==            lr_dropout: n                       ==\r\n==           random_warp: False                   ==\r\n==             gan_power: 0.0                     ==\r\n==       true_face_power: 0.0                     ==\r\n==      face_style_power: 0.0                     ==\r\n==        bg_style_power: 0.0                     ==\r\n==               ct_mode: none                    ==\r\n==              clipgrad: False                   ==\r\n==              pretrain: True                    ==\r\n==       autobackup_hour: 0                       ==\r\n== write_preview_history: False                   ==\r\n==           target_iter: 1000000000              ==\r\n==           random_flip: True                    ==\r\n==            batch_size: 4                       ==\r\n==       eyes_mouth_prio: True                    ==\r\n==           uniform_yaw: True                    ==\r\n==         blur_out_mask: False                   ==\r\n==             adabelief: True                    ==\r\n==      random_hsv_power: 0.0                     ==\r\n==       random_src_flip: False                   ==\r\n==       random_dst_flip: True                    ==\r\n==        gan_patch_size: 36                      ==\r\n==              gan_dims: 16                      ==\r\n==                                                ==\r\n==------------------ Running On ------------------==\r\n==                                                ==\r\n==          Device index: 0                       ==\r\n==                  Name: NVIDIA GeForce GTX 1080 ==\r\n==                  VRAM: 6.78GB                  ==\r\n==                                                ==\r\n====================================================\r\nStarting. Target iteration: 1000000000. Press \"Enter\" to stop training and save model.\r\nError: 2 root error(s) found.\r\n  (0) Resource exhausted: OOM when allocating tensor with shape[4,576,72,72] and type float on /job:localhost/replica:0/task:0/device:DML:0 by allocator DmlAllocator\r\n         [[{{node ArithmeticOptimizer/AddOpsRewrite_Leaf_1_add_34}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n         [[concat_1/concat/_417]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n  (1) Resource exhausted: OOM when allocating tensor with shape[4,576,72,72] and type float on /job:localhost/replica:0/task:0/device:DML:0 by allocator DmlAllocator\r\n         [[{{node ArithmeticOptimizer/AddOpsRewrite_Leaf_1_add_34}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n0 successful operations.\r\n0 derived errors ignored.\r\nTraceback (most recent call last):\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1365, in _do_call\r\n    return fn(*args)\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1350, in _run_fn\r\n    target_list, run_metadata)\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1443, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: 2 root error(s) found.\r\n  (0) Resource exhausted: OOM when allocating tensor with shape[4,576,72,72] and type float on /job:localhost/replica:0/task:0/device:DML:0 by allocator DmlAllocator\r\n         [[{{node ArithmeticOptimizer/AddOpsRewrite_Leaf_1_add_34}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n         [[concat_1/concat/_417]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n  (1) Resource exhausted: OOM when allocating tensor with shape[4,576,72,72] and type float on /job:localhost/replica:0/task:0/device:DML:0 by allocator DmlAllocator\r\n         [[{{node ArithmeticOptimizer/AddOpsRewrite_Leaf_1_add_34}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n0 successful operations.\r\n0 derived errors ignored.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Games\\dpl\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 129, in trainerThread\r\n    iter, iter_time = model.train_one_iter()\r\n  File \"C:\\Games\\dpl\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 474, in train_one_iter\r\n    losses = self.onTrainOneIter()\r\n  File \"C:\\Games\\dpl\\_internal\\DeepFaceLab\\models\\Model_SAEHD\\Model.py\", line 774, in onTrainOneIter\r\n    src_loss, dst_loss = self.src_dst_train (warped_src, target_src, target_srcm, target_srcm_em, warped_dst, target_dst, target_dstm, target_dstm_em)\r\n  File \"C:\\Games\\dpl\\_internal\\DeepFaceLab\\models\\Model_SAEHD\\Model.py\", line 584, in src_dst_train\r\n    self.target_dstm_em:target_dstm_em,\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 956, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1180, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1359, in _do_run\r\n    run_metadata)\r\n  File \"C:\\Games\\dpl\\_internal\\python-3.6.8\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1384, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: 2 root error(s) found.\r\n  (0) Resource exhausted: OOM when allocating tensor with shape[4,576,72,72] and type float on /job:localhost/replica:0/task:0/device:DML:0 by allocator DmlAllocator\r\n         [[{{node ArithmeticOptimizer/AddOpsRewrite_Leaf_1_add_34}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n         [[concat_1/concat/_417]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n  (1) Resource exhausted: OOM when allocating tensor with shape[4,576,72,72] and type float on /job:localhost/replica:0/task:0/device:DML:0 by allocator DmlAllocator\r\n         [[{{node ArithmeticOptimizer/AddOpsRewrite_Leaf_1_add_34}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n0 successful operations.\r\n0 derived errors ignored.\r\n\r\nI dont know what to do with all this. i cant find the Run options the Hints are telling me to change. so im assuming the current build is destroyed? or is it the pretrained faces? cause honestly i tried deleting the facepak and the whole program wont work without it. pls help","closed_by":null,"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5484/timeline","performed_via_github_app":null,"state_reason":null}