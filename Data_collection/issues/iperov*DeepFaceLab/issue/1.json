{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/1","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/1/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/1/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/1","id":329409158,"node_id":"MDU6SXNzdWUzMjk0MDkxNTg=","number":1,"title":"`Error: Sorry, this model works only on 2GB+ GPU` on GPU with 2GB dedicated VRAM","user":{"login":"Ludoboii","id":39264467,"node_id":"MDQ6VXNlcjM5MjY0NDY3","avatar_url":"https://avatars.githubusercontent.com/u/39264467?v=4","gravatar_id":"","url":"https://api.github.com/users/Ludoboii","html_url":"https://github.com/Ludoboii","followers_url":"https://api.github.com/users/Ludoboii/followers","following_url":"https://api.github.com/users/Ludoboii/following{/other_user}","gists_url":"https://api.github.com/users/Ludoboii/gists{/gist_id}","starred_url":"https://api.github.com/users/Ludoboii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ludoboii/subscriptions","organizations_url":"https://api.github.com/users/Ludoboii/orgs","repos_url":"https://api.github.com/users/Ludoboii/repos","events_url":"https://api.github.com/users/Ludoboii/events{/privacy}","received_events_url":"https://api.github.com/users/Ludoboii/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-06-05T11:12:36Z","updated_at":"2019-08-12T16:13:04Z","closed_at":"2018-06-06T23:02:28Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\nStart training.\r\n\r\n## Actual behavior\r\nThe script shows this output:\r\n```\r\nRunning trainer.\r\n\r\nLoading model...\r\n/home/giovanni/virtualenv/faceswap/lib/python3.5/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n2018-06-05 12:48:16.247626: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-06-05 12:48:16.644955: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2018-06-05 12:48:16.645801: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: \r\nname: GeForce 840M major: 5 minor: 0 memoryClockRate(GHz): 1.124\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 1.96GiB freeMemory: 1.80GiB\r\n2018-06-05 12:48:16.645834: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0\r\n2018-06-05 12:48:30.618264: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2018-06-05 12:48:30.618302: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0 \r\n2018-06-05 12:48:30.618312: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N \r\n2018-06-05 12:48:30.661743: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1562 MB memory) -> physical GPU (device: 0, name: GeForce 840M, pci bus id: 0000:01:00.0, compute capability: 5.0)\r\nUsing TensorFlow backend.\r\nError: Sorry, this model works only on 2GB+ GPU\r\nTraceback (most recent call last):\r\n  File \"/home/giovanni/git_repos/DeepFaceLab/mainscripts/Trainer.py\", line 41, in trainerThread\r\n    **in_options)\r\n  File \"/home/giovanni/git_repos/DeepFaceLab/models/ModelBase.py\", line 108, in __init__\r\n    self.onInitialize(**in_options)\r\n  File \"/home/giovanni/git_repos/DeepFaceLab/models/Model_H64/Model.py\", line 18, in onInitialize\r\n    self.set_vram_batch_requirements( {2:2,3:4,4:8,5:16,6:32,7:32,8:32,9:48} )\r\n  File \"/home/giovanni/git_repos/DeepFaceLab/models/ModelBase.py\", line 323, in set_vram_batch_requirements\r\n    raise Exception ('Sorry, this model works only on %dGB+ GPU' % ( keys[0] ) )\r\nException: Sorry, this model works only on 2GB+ GPU\r\n```\r\nHowever my GPU does have 2GBs of dedicated VRAM (the script says `totalMemory: 1.96GiB`, which is more than 2GB), it's an Nvidia GeForce 840M. I imagine the problem could be that only 1.80GiB are free, but I have no idea how to free more memory. I don't know if it's possible to use the integrated Intel Graphics GPU to handle my laptop's graphics and use the Nvidia GPU exclusively for tensorflow, I haven't found out anything so far, but I'm still researching this topic.\r\n\r\n## Steps to reproduce\r\n```\r\n$ python main.py train --training-data-src-dir ./data-old/person1 --training-data-dst-dir ./data-old/person2 --model-dir ./face-models --model H64 --write-preview-history --save-interval-min 30\r\n```\r\n## Other relevant information\r\n- **Operating system and version:** elementary OS 0.4.1 Loki, Built on \"Ubuntu 16.04.3 LTS\", Linux 4.13.0-43-generic\r\n- **Python version:** 3.5.2","closed_by":{"login":"Ludoboii","id":39264467,"node_id":"MDQ6VXNlcjM5MjY0NDY3","avatar_url":"https://avatars.githubusercontent.com/u/39264467?v=4","gravatar_id":"","url":"https://api.github.com/users/Ludoboii","html_url":"https://github.com/Ludoboii","followers_url":"https://api.github.com/users/Ludoboii/followers","following_url":"https://api.github.com/users/Ludoboii/following{/other_user}","gists_url":"https://api.github.com/users/Ludoboii/gists{/gist_id}","starred_url":"https://api.github.com/users/Ludoboii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ludoboii/subscriptions","organizations_url":"https://api.github.com/users/Ludoboii/orgs","repos_url":"https://api.github.com/users/Ludoboii/repos","events_url":"https://api.github.com/users/Ludoboii/events{/privacy}","received_events_url":"https://api.github.com/users/Ludoboii/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/1/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/1/timeline","performed_via_github_app":null,"state_reason":"completed"}