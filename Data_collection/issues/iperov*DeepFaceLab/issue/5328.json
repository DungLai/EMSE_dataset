{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5328","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5328/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5328/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5328/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/5328","id":885387830,"node_id":"MDU6SXNzdWU4ODUzODc4MzA=","number":5328,"title":"3090 -every 4th iteration is very slow","user":{"login":"tamaragordon","id":83990164,"node_id":"MDQ6VXNlcjgzOTkwMTY0","avatar_url":"https://avatars.githubusercontent.com/u/83990164?v=4","gravatar_id":"","url":"https://api.github.com/users/tamaragordon","html_url":"https://github.com/tamaragordon","followers_url":"https://api.github.com/users/tamaragordon/followers","following_url":"https://api.github.com/users/tamaragordon/following{/other_user}","gists_url":"https://api.github.com/users/tamaragordon/gists{/gist_id}","starred_url":"https://api.github.com/users/tamaragordon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tamaragordon/subscriptions","organizations_url":"https://api.github.com/users/tamaragordon/orgs","repos_url":"https://api.github.com/users/tamaragordon/repos","events_url":"https://api.github.com/users/tamaragordon/events{/privacy}","received_events_url":"https://api.github.com/users/tamaragordon/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-05-10T23:46:58Z","updated_at":"2021-05-17T09:27:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"THIS IS NOT TECH SUPPORT FOR NEWBIE FAKERS\r\nPOST ONLY ISSUES RELATED TO BUGS OR CODE\r\n\r\n## Expected behavior\r\n\r\n**a smooth training process**\r\n\r\n## Actual behavior\r\n\r\n****Every 4th iteration/epoch gets stuck for some time.  i have narrowed it down to the fact that , the bigger ( resolution) the src (aligned) is . the slower the 4th iteration is . \r\n\r\nthere is a detailed thread on this issue : https://mrdeepfakes.com/forums/thread-every-4th-iteration-takes-a-long-time\r\n\r\nalso take a look at this video : https://streamable.com/nl07km\r\nthis video is with the smallest model i could think of  1 batch and 64 resolution liae-ud** \r\n\r\nif i lower the resolution of the aligned src , the training iterations go faster , but it will STILL take extra time on every 4th iteration.\r\non a 320 resolution it takes upto 13-19 seconds .** \r\n\r\n## Steps to reproduce\r\n\r\n**i tried to clean install windows , and follow all tips . \r\nupdated cuda and cnn and drivers.  tried on studio drivers and gameready ones.\r\n\r\ntried with clean install windows and just drivers.\r\n\r\nand yes my \" hardware-accelerated GPU scheduling \" is ON**\r\n\r\n## Other relevant information\r\n\r\nvery very interesting \r\n\r\n\r\ncheck this video out: https://streamable.com/fhbix7\r\n\r\nthis is with when src  aligned is WF 512  now every 16th iteration is slowing down\r\n\r\nso the stuck/lag went from every 4th to every 16th  because the src aligned was 2048 and now its 512.\r\n\r\nbut what does that have to do with anything, only the model perimeters should effect the iterations, and we extract bigger aligned srcs for future proofing ( somewhat) \r\n\r\n\r\n\r\nmore info : either its my cpu 6700k \r\nor maybe dfl/3090 needs more support . it runs better on 1024 images . gets stuck for a little while on the 16th iteration is 1024 images(src) aligned is used .  \r\n\r\n also , i tried running an old model used with a 980ti with my new 3090  , which had around 600k iterations,  used  2048 src aligned and i expected 3 fast iterations and 4th one very slow but to my surprise the speed with the 3090 was very slow , around 2000 ms .  so i think if high iterations are achieved , speed will slow down also . \r\n\r\n , this is being trained on a nvme m2 so its not the hdd speed that causes this.\r\n\r\n- **Operating system and version:**             Windows 10 20H2 build 19042.964\r\n \r\n- **Python version:** 3.5, 3.6.4, ... (if you are not using prebuilt windows binary)\r\n\r\n**i tried running it with the lastest build DeepFaceLab_NVIDIA_RTX3000_series_build_04_22_2021**","closed_by":null,"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5328/timeline","performed_via_github_app":null,"state_reason":null}