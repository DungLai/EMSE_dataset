{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/274","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/274/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/274/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/274/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/274","id":450563427,"node_id":"MDU6SXNzdWU0NTA1NjM0Mjc=","number":274,"title":"Error converting H64 - OpenCLSSE","user":{"login":"TheMadFaker","id":51217785,"node_id":"MDQ6VXNlcjUxMjE3Nzg1","avatar_url":"https://avatars.githubusercontent.com/u/51217785?v=4","gravatar_id":"","url":"https://api.github.com/users/TheMadFaker","html_url":"https://github.com/TheMadFaker","followers_url":"https://api.github.com/users/TheMadFaker/followers","following_url":"https://api.github.com/users/TheMadFaker/following{/other_user}","gists_url":"https://api.github.com/users/TheMadFaker/gists{/gist_id}","starred_url":"https://api.github.com/users/TheMadFaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheMadFaker/subscriptions","organizations_url":"https://api.github.com/users/TheMadFaker/orgs","repos_url":"https://api.github.com/users/TheMadFaker/repos","events_url":"https://api.github.com/users/TheMadFaker/events{/privacy}","received_events_url":"https://api.github.com/users/TheMadFaker/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-05-31T00:32:21Z","updated_at":"2019-06-02T15:26:12Z","closed_at":"2019-06-02T15:26:11Z","author_association":"NONE","active_lock_reason":null,"body":"Running converter.\r\n\r\nLoading model...\r\nUsing plaidml.keras.backend backend.\r\nINFO:plaidml:Opening device \"opencl_amd_tonga.0\"\r\n===== Model summary =====\r\n== Model name: H64\r\n==\r\n== Current iteration: 70371\r\n==\r\n== Model options:\r\n== |== batch_size : 4\r\n== |== sort_by_yaw : False\r\n== |== random_flip : False\r\n== |== lighter_ae : False\r\n== |== pixel_loss : False\r\n== Running on:\r\n== |== [0 : Advanced Micro Devices, Inc. Tonga (OpenCL)]\r\n=========================\r\nINFO:plaidml:Analyzing Ops: 85 of 158 operations complete\r\nChoose mode: (1) overlay, (2) hist match, (3) hist match bw, (4) seamless, (5) r\r\naw. Default - 4 :\r\n4\r\nSeamless hist match? (y/n skip:n) :\r\nn\r\nMask mode: (1) learned, (2) dst . Default - 1 :\r\n1\r\nChoose erode mask modifier [-200..200] (skip:0) :\r\n0\r\nChoose blur mask modifier [-200..200] (skip:0) :\r\n0\r\nChoose output face scale modifier [-50..50] (skip:0) :\r\n0\r\nApply color transfer to predicted face? Choose mode ( rct/lct skip:None ) : RCT\r\nApply super resolution? (y/n ?:help skip:n) :\r\nn\r\nDegrade color power of final image [0..100] (skip:0) :\r\n0\r\nExport png with alpha channel? (y/n skip:n) :\r\nn\r\n\r\nCollecting alignments: 100%|################| 214/214 [00:00<00:00, 623.54it/s]\r\nRunning on CPU0.\r\nRunning on CPU1.\r\nRunning on CPU2.\r\nRunning on CPU3.\r\nRunning on CPU4.\r\nRunning on CPU5.\r\nConverting:   0%|                                      | 0/251 [00:00<?, ?it/s]E\r\nxception while process data [C:\\DeepFaceLabCLSSE02\\workspace\\data_dst\\00003.jpg]\r\n: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\",\r\n line 68, in _subprocess_run\r\n    result = self.process_data (data)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 132, in process_data\r\n    raise Exception( 'Error while converting face_num [%d] in file [%s]: %s' % (\r\nface_num, filename_path, e_str) )\r\nException: Error while converting face_num [0] in file [C:\\DeepFaceLabCLSSE02\\wo\r\nrkspace\\data_dst\\00003.jpg]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\n\r\nException while process data [C:\\DeepFaceLabCLSSE02\\workspace\\data_dst\\00004.jpg\r\n]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\",\r\n line 68, in _subprocess_run\r\n    result = self.process_data (data)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 132, in process_data\r\n    raise Exception( 'Error while converting face_num [%d] in file [%s]: %s' % (\r\nface_num, filename_path, e_str) )\r\nException: Error while converting face_num [0] in file [C:\\DeepFaceLabCLSSE02\\wo\r\nrkspace\\data_dst\\00004.jpg]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\n\r\nException while process data [C:\\DeepFaceLabCLSSE02\\workspace\\data_dst\\00002.jpg\r\n]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\",\r\n line 68, in _subprocess_run\r\n    result = self.process_data (data)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 132, in process_data\r\n    raise Exception( 'Error while converting face_num [%d] in file [%s]: %s' % (\r\nface_num, filename_path, e_str) )\r\nException: Error while converting face_num [0] in file [C:\\DeepFaceLabCLSSE02\\wo\r\nrkspace\\data_dst\\00002.jpg]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\n\r\nException while process data [C:\\DeepFaceLabCLSSE02\\workspace\\data_dst\\00001.jpg\r\n]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\",\r\n line 68, in _subprocess_run\r\n    result = self.process_data (data)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 132, in process_data\r\n    raise Exception( 'Error while converting face_num [%d] in file [%s]: %s' % (\r\nface_num, filename_path, e_str) )\r\nException: Error while converting face_num [0] in file [C:\\DeepFaceLabCLSSE02\\wo\r\nrkspace\\data_dst\\00001.jpg]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\n\r\nException while process data [C:\\DeepFaceLabCLSSE02\\workspace\\data_dst\\00006.jpg\r\n]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\",\r\n line 68, in _subprocess_run\r\n    result = self.process_data (data)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 132, in process_data\r\n    raise Exception( 'Error while converting face_num [%d] in file [%s]: %s' % (\r\nface_num, filename_path, e_str) )\r\nException: Error while converting face_num [0] in file [C:\\DeepFaceLabCLSSE02\\wo\r\nrkspace\\data_dst\\00006.jpg]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\n\r\nException while process data [C:\\DeepFaceLabCLSSE02\\workspace\\data_dst\\00005.jpg\r\n]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\",\r\n line 68, in _subprocess_run\r\n    result = self.process_data (data)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 132, in process_data\r\n    raise Exception( 'Error while converting face_num [%d] in file [%s]: %s' % (\r\nface_num, filename_path, e_str) )\r\nException: Error while converting face_num [0] in file [C:\\DeepFaceLabCLSSE02\\wo\r\nrkspace\\data_dst\\00005.jpg]: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\", l\r\nine 125, in process_data\r\n    image = self.converter.cli_convert_face(image, image_landmarks, self.debug,\r\navaperator_face_bgr=ava_face)\r\n  File \"C:\\DeepFaceLabCLSSE02\\_internal\\DeepFaceLab\\converters\\ConverterMasked.p\r\ny\", line 408, in cli_convert_face\r\n    new_out = cv2.warpAffine( new_out_face_bgr, face_mat, img_size, img_bgr.copy\r\n(), cv2.WARP_INVERSE_MAP | cv2.INTER_LANCZOS4, cv2.BORDER_TRANSPARENT )\r\nUnboundLocalError: local variable 'new_out_face_bgr' referenced before assignmen\r\nt\r\n\r\n\r\n\r\nDone.\r\nPress any key to continue . . .\r\n\r\nWindows 7, R9380, i7920\r\n\r\nTHIS IS NOT TECH SUPPORT FOR NEWBIE FAKERS\r\nPOST ONLY ISSUES RELATED TO BUGS OR CODE\r\n\r\n## Expected behavior\r\n\r\n*Describe, in some detail, what you are trying to do and what the output is that you expect from the program.*\r\n\r\n## Actual behavior\r\n\r\n*Describe, in some detail, what the program does instead. Be sure to include any error message or screenshots.*\r\n\r\n## Steps to reproduce\r\n\r\n*Describe, in some detail, the steps you tried that resulted in the behavior described above.*\r\n\r\n## Other relevant information\r\n- **Command lined used (if not specified in steps to reproduce)**: main.py ...\r\n- **Operating system and version:** Windows, macOS, Linux \r\n- **Python version:** 3.5, 3.6.4, ... (if you are not using prebuilt windows binary)","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/274/timeline","performed_via_github_app":null,"state_reason":"completed"}