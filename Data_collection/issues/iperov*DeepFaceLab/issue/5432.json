{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5432","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5432/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5432/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5432/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/5432","id":1057471732,"node_id":"I_kwDOCBuapc4_B7z0","number":5432,"title":"Multiple GPU performance","user":{"login":"michael-shur","id":94626855,"node_id":"U_kgDOBaPkJw","avatar_url":"https://avatars.githubusercontent.com/u/94626855?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-shur","html_url":"https://github.com/michael-shur","followers_url":"https://api.github.com/users/michael-shur/followers","following_url":"https://api.github.com/users/michael-shur/following{/other_user}","gists_url":"https://api.github.com/users/michael-shur/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-shur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-shur/subscriptions","organizations_url":"https://api.github.com/users/michael-shur/orgs","repos_url":"https://api.github.com/users/michael-shur/repos","events_url":"https://api.github.com/users/michael-shur/events{/privacy}","received_events_url":"https://api.github.com/users/michael-shur/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-11-18T15:13:22Z","updated_at":"2021-12-19T15:15:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nHardware: \r\nmining rig with x4 AMD Radeon R9 380 4GB each, all same brand ASUS STRIX R9 380 DirectCU II OC 4 GB\r\nDell XPS 8700 with Intel I7-4770 CPU @3.4GHz\r\n16GB RAM \r\n120GB Samsung SSD\r\nSoftware:\r\n64-bit Windows 10 OS\r\nLatest AMD Catalist driver, all default settings\r\nLatest DeepFaceLab ( so far checked on DeepFaceLab_DirectX12_build_10_20_2021.exe and DeepFaceLab_DirectX12_build_11_20_2021.exe )\r\n\r\nThe issue :\r\n\r\n1. Some random 2:33 minutes 368x738, 29fps video ( or any other, I'm just giving spec of one was on the test )  \"data_src_faceset_extract.bat\" that runs on only ONE GPU0 will take about ~6 hours\r\n2. Same video \"data_src_faceset_extract\" that runs on all 4 GPU will take about ~1:45 hours so IMHO it is know to utilize all 4 GPU\r\n\r\nBut then:\r\n\r\n3. \"train_Quick96\" that runs on all 4 GPU makes ~280 iteration in 10 minutes\r\n4. \"train_Quick96\" that runs on only one GPU0 makes ~700 (!) iteration  in 10 minutes\r\n5. \"train_Quick96\" that runs on only one of GPU1 to GPU3 makes again, only ~280 iteration  in 10 minutes\r\n\r\n\r\nSimilar for XSig training - 388 iteration for 10 minutes for GPU0, GPU1, GPU2 and GPU3. But 559  iteration for 10 minutes for GPU0 only. \r\n\r\nSame story with SAEHD, 219 iterations for 10 minutes on all 4 GPU0, GPU1, GPU2 and GPU3. But 365 iteration for 10 minutes using GPU0 only.  Speed is also goes from 2500 ms when utilizing all 4 GPU down to 1600 ms on GPU0 alone.\r\n\r\nSo it looks like training script ( that is most important and takes most of the time ) does not know to utilize all 4 GPU effectively. It also knows to utilize effectively only GPU0, but not GPU1- GPU3, even if they used separately from others cards.\r\n\r\nThank you, спасибочки...\r\nMichael.\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5432/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/5432/timeline","performed_via_github_app":null,"state_reason":null}