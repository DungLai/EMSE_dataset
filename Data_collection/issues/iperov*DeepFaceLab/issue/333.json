{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/333","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/333/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/333/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/333/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/333","id":478127736,"node_id":"MDU6SXNzdWU0NzgxMjc3MzY=","number":333,"title":"H128 unable to run OpenCL kernal and unable to map memory (CL_MEM_OBJECT_ALLOCATION_FAILURE)","user":{"login":"Rektroth","id":53879295,"node_id":"MDQ6VXNlcjUzODc5Mjk1","avatar_url":"https://avatars.githubusercontent.com/u/53879295?v=4","gravatar_id":"","url":"https://api.github.com/users/Rektroth","html_url":"https://github.com/Rektroth","followers_url":"https://api.github.com/users/Rektroth/followers","following_url":"https://api.github.com/users/Rektroth/following{/other_user}","gists_url":"https://api.github.com/users/Rektroth/gists{/gist_id}","starred_url":"https://api.github.com/users/Rektroth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rektroth/subscriptions","organizations_url":"https://api.github.com/users/Rektroth/orgs","repos_url":"https://api.github.com/users/Rektroth/repos","events_url":"https://api.github.com/users/Rektroth/events{/privacy}","received_events_url":"https://api.github.com/users/Rektroth/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-07T20:36:27Z","updated_at":"2019-08-07T21:33:15Z","closed_at":"2019-08-07T21:33:15Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\n\r\nSimply trying to train with H128.\r\n\r\n## Actual behavior\r\n\r\nThe model will load and the training preview will even appear. It will go through a thousands of iterations and I'll just let it sit for a while (several hours) and absolutely no progress will be made.\r\n\r\nAfter saving and exiting, the following appears:\r\n\r\n`ERROR:plaidml:unable to run OpenCL kernel: CL_MEM_OBJECT_ALLOCATION_FAILURE\r\nERROR:plaidml:Unable to map memory: CL_MEM_OBJECT_ALLOCATION_FAILURE\r\nError: Unable to map memory: CL_MEM_OBJECT_ALLOCATION_FAILURE\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 159, in trainerThread\r\n    model_save()\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\mainscripts\\Trainer.py\", line 59, in model_save\r\n    model.save()\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 345, in save\r\n    self.onSave()\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\models\\Model_H128\\Model.py\", line 81, in onSave\r\n    self.save_weights_safe( self.get_model_filename_list() )\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\models\\ModelBase.py\", line 420, in save_weights_safe\r\n    model.save_weights( filename + '.tmp' )\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\engine\\network.py\", line 1121, in save_weights\r\n    saving.save_weights_to_hdf5_group(f, self.layers)\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\keras\\engine\\saving.py\", line 572, in save_weights_to_hdf5_group\r\n    weight_values = K.batch_get_value(symbolic_weights)\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\plaidml\\keras\\backend.py\", line 354, in batch_get_value\r\n    return [get_value(x) for x in xs]\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\plaidml\\keras\\backend.py\", line 354, in <listcomp>\r\n    return [get_value(x) for x in xs]\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\plaidml\\keras\\backend.py\", line 771, in get_value\r\n    with tensor.mmap_current() as view:\r\n  File \"contextlib.py\", line 81, in __enter__\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\plaidml\\__init__.py\", line 1245, in mmap_current\r\n    ctypes.cast(None, _MAP_BUFFER_FUNCTYPE), None)\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\plaidml\\__init__.py\", line 777, in _check_err\r\n    self.raise_last_status()\r\n  File \"C:\\Users\\Rektroth\\Desktop\\DeepFaceLabOpenCLSSE\\_internal\\python-3.6.8\\lib\\site-packages\\plaidml\\library.py\", line 131, in raise_last_status\r\n    raise self.last_status()\r\nplaidml.exceptions.Unknown: Unable to map memory: CL_MEM_OBJECT_ALLOCATION_FAILURE`\r\n\r\n## Steps to reproduce\r\n\r\nJust run the H128 trainer and input the default values.\r\n\r\n## Other relevant information\r\n- **Command lined used (if not specified in steps to reproduce)**: cmd.exe\r\n- **Operating system and version:** Windows 10 Version 1809\r\n- **Python version:** using pre-build\r\n\r\nFor full context, [here's a complete console log](https://pastebin.com/LE8fsEYf).","closed_by":{"login":"Rektroth","id":53879295,"node_id":"MDQ6VXNlcjUzODc5Mjk1","avatar_url":"https://avatars.githubusercontent.com/u/53879295?v=4","gravatar_id":"","url":"https://api.github.com/users/Rektroth","html_url":"https://github.com/Rektroth","followers_url":"https://api.github.com/users/Rektroth/followers","following_url":"https://api.github.com/users/Rektroth/following{/other_user}","gists_url":"https://api.github.com/users/Rektroth/gists{/gist_id}","starred_url":"https://api.github.com/users/Rektroth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rektroth/subscriptions","organizations_url":"https://api.github.com/users/Rektroth/orgs","repos_url":"https://api.github.com/users/Rektroth/repos","events_url":"https://api.github.com/users/Rektroth/events{/privacy}","received_events_url":"https://api.github.com/users/Rektroth/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/333/timeline","performed_via_github_app":null,"state_reason":"completed"}