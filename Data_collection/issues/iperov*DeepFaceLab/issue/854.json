{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/854","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/854/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/854/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/854/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/854","id":675516803,"node_id":"MDU6SXNzdWU2NzU1MTY4MDM=","number":854,"title":"Multi GPU VRAM issue with UD models","user":{"login":"gravis778","id":67483613,"node_id":"MDQ6VXNlcjY3NDgzNjEz","avatar_url":"https://avatars.githubusercontent.com/u/67483613?v=4","gravatar_id":"","url":"https://api.github.com/users/gravis778","html_url":"https://github.com/gravis778","followers_url":"https://api.github.com/users/gravis778/followers","following_url":"https://api.github.com/users/gravis778/following{/other_user}","gists_url":"https://api.github.com/users/gravis778/gists{/gist_id}","starred_url":"https://api.github.com/users/gravis778/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gravis778/subscriptions","organizations_url":"https://api.github.com/users/gravis778/orgs","repos_url":"https://api.github.com/users/gravis778/repos","events_url":"https://api.github.com/users/gravis778/events{/privacy}","received_events_url":"https://api.github.com/users/gravis778/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-08-08T12:16:53Z","updated_at":"2020-08-08T12:16:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"THIS IS NOT TECH SUPPORT FOR NEWBIE FAKERS\r\nPOST ONLY ISSUES RELATED TO BUGS OR CODE\r\n\r\n## Expected behavior\r\n\r\nI have 2 GPUs with different amounts of vram (one 8 gig card, one 6 gig card). When running a non-UD model, the vram on the 8 gig card is filled, then the memory on the 6 gig card is filled. The expected behavior is for UD models to behave similar with vram\r\n\r\n## Actual behavior\r\nI want to emphasize this only happens in UD models, regardless of batch size or resolution. In running in multiGPU mode, both the 8 gig card and the six gig card are only using 5 gig of vram. When running a non-UD model, the 8 gig card uses approximately 6.5-7 gig of vram, and the 6 gig card uses 6 gig, so this is unique to UD models. When I run in single GPU mode, the 7 gig card will use between 6.5-7 gig vram, so it seems to be splitting the workload evenly between the cards rather than maximizing each card\r\n\r\n## Steps to reproduce\r\n\r\nI am running an RTX 2070 OC Super with 8 gig vram as gpu 0, and an RTX 2060 with 6 gig vram in GPU 1. The issue occurs when doing any UD model and selecting GPU 0,1\r\n\r\n## Other relevant information\r\n[DF256 WF UD_SAEHD_summary.txt](https://github.com/iperov/DeepFaceLab/files/5045229/DF256.WF.UD_SAEHD_summary.txt)\r\nPrebuilt Windows Binary July 21, 2020\r\nWindows 10 64 bit version 1909, build 18363.836\r\nNvidia Game Ready Driver Version 451.67\r\n[DF256 WF UD_SAEHD_summary.txt](https://github.com/iperov/DeepFaceLab/files/5045233/DF256.WF.UD_SAEHD_summary.txt)\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/854/timeline","performed_via_github_app":null,"state_reason":null}