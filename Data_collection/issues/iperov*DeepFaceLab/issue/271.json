{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/271","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/271/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/271/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/271/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/271","id":447766412,"node_id":"MDU6SXNzdWU0NDc3NjY0MTI=","number":271,"title":"error with FAN-x conversion on OpenCL","user":{"login":"blitzenrod","id":50961793,"node_id":"MDQ6VXNlcjUwOTYxNzkz","avatar_url":"https://avatars.githubusercontent.com/u/50961793?v=4","gravatar_id":"","url":"https://api.github.com/users/blitzenrod","html_url":"https://github.com/blitzenrod","followers_url":"https://api.github.com/users/blitzenrod/followers","following_url":"https://api.github.com/users/blitzenrod/following{/other_user}","gists_url":"https://api.github.com/users/blitzenrod/gists{/gist_id}","starred_url":"https://api.github.com/users/blitzenrod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blitzenrod/subscriptions","organizations_url":"https://api.github.com/users/blitzenrod/orgs","repos_url":"https://api.github.com/users/blitzenrod/repos","events_url":"https://api.github.com/users/blitzenrod/events{/privacy}","received_events_url":"https://api.github.com/users/blitzenrod/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-23T16:42:28Z","updated_at":"2019-09-02T09:43:31Z","closed_at":"2019-05-24T05:44:46Z","author_association":"NONE","active_lock_reason":null,"body":"## Expected behavior\r\n\r\nTrying to convert SAE using FAN-x on newest OpenCL build.\r\n\r\n## Actual behavior\r\n\r\nattribute error\r\n\r\n## Steps to reproduce\r\n\r\nRunning converter.\r\n\r\nLoading model...\r\nUsing plaidml.keras.backend backend.\r\nINFO:plaidml:Opening device \"opencl_amd_tonga.0\"\r\n===== Model summary =====\r\n== Model name: SAE\r\n==\r\n== Current iteration: 360\r\n==\r\n== Model options:\r\n== |== batch_size : 4\r\n== |== sort_by_yaw : False\r\n== |== random_flip : True\r\n== |== resolution : 128\r\n== |== face_type : f\r\n== |== learn_mask : True\r\n== |== optimizer_mode : 1\r\n== |== archi : df\r\n== |== ae_dims : 512\r\n== |== e_ch_dims : 42\r\n== |== d_ch_dims : 21\r\n== |== multiscale_decoder : True\r\n== |== ca_weights : True\r\n== |== pixel_loss : False\r\n== |== face_style_power : 0.0\r\n== |== bg_style_power : 0.0\r\n== |== apply_random_ct : False\r\n== Running on:\r\n== |== [0 : Advanced Micro Devices, Inc. Tonga (OpenCL)]\r\n=========================\r\nINFO:plaidml:Analyzing Ops: 84 of 362 operations complete\r\nINFO:plaidml:Analyzing Ops: 119 of 362 operations complete\r\nINFO:plaidml:Analyzing Ops: 153 of 362 operations complete\r\nINFO:plaidml:Analyzing Ops: 184 of 362 operations complete\r\nINFO:plaidml:Analyzing Ops: 218 of 362 operations complete\r\nINFO:plaidml:Analyzing Ops: 276 of 362 operations complete\r\nINFO:plaidml:Analyzing Ops: 328 of 362 operations complete\r\nChoose mode: (1) overlay, (2) hist match, (3) hist match bw, (4) seamless, (5) r\r\naw. Default - 4 :\r\n4\r\nSeamless hist match? (y/n skip:n) :\r\nn\r\nMask mode: (1) learned, (2) dst, (3) FAN-prd, (4) FAN-dst , (5) FAN-prd*FAN-dst\r\n(6) learned*FAN-prd*FAN-dst (?) help. Default - 1 : 4\r\nChoose erode mask modifier [-200..200] (skip:0) :\r\n0\r\nChoose blur mask modifier [-200..200] (skip:0) :\r\n0\r\nChoose output face scale modifier [-50..50] (skip:0) :\r\n0\r\nApply color transfer to predicted face? Choose mode ( rct/lct skip:None ) :\r\nNone\r\nApply super resolution? (y/n ?:help skip:n) :\r\nn\r\nDegrade color power of final image [0..100] (skip:0) :\r\n0\r\nExport png with alpha channel? (y/n skip:n) :\r\nn\r\n\r\nCollecting alignments: 0it [00:00, ?it/s]\r\nRunning on CPU0.\r\nUsing plaidml.keras.backend backend.\r\nException: Traceback (most recent call last):\r\n  File \"C:\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\joblib\\SubprocessorBase.py\r\n\", line 59, in _subprocess_run\r\n    self.on_initialize(client_dict)\r\n  File \"C:\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\mainscripts\\Converter.py\",\r\n line 47, in on_initialize\r\n    self.converter.on_cli_initialize()\r\n  File \"C:\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\converters\\ConverterMasked\r\n.py\", line 128, in on_cli_initialize\r\n    self.fan_seg = FANSegmentator(256, FaceType.toString( self.face_type ) )\r\n  File \"C:\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\facelib\\FANSegmentator.py\"\r\n, line 25, in __init__\r\n    exec( nnlib.import_all(), locals(), globals() )\r\n  File \"C:\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\nnlib\\nnlib.py\", line 754,\r\n in import_all\r\n    nnlib.import_keras(device_config)\r\n  File \"C:\\DeepFaceLabOpenCLSSE\\_internal\\DeepFaceLab\\nnlib\\nnlib.py\", line 188,\r\n in import_keras\r\n    nnlib.keras.backend.set_session(nnlib.tf_sess)\r\nAttributeError: module 'keras.backend' has no attribute 'set_session'","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/271/timeline","performed_via_github_app":null,"state_reason":"completed"}