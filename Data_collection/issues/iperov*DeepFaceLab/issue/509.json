{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/509","repository_url":"https://api.github.com/repos/iperov/DeepFaceLab","labels_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/509/labels{/name}","comments_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/509/comments","events_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/509/events","html_url":"https://github.com/iperov/DeepFaceLab/issues/509","id":530627437,"node_id":"MDU6SXNzdWU1MzA2Mjc0Mzc=","number":509,"title":"Face extraction interrupted at 2nd pass","user":{"login":"guferr","id":58373283,"node_id":"MDQ6VXNlcjU4MzczMjgz","avatar_url":"https://avatars.githubusercontent.com/u/58373283?v=4","gravatar_id":"","url":"https://api.github.com/users/guferr","html_url":"https://github.com/guferr","followers_url":"https://api.github.com/users/guferr/followers","following_url":"https://api.github.com/users/guferr/following{/other_user}","gists_url":"https://api.github.com/users/guferr/gists{/gist_id}","starred_url":"https://api.github.com/users/guferr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guferr/subscriptions","organizations_url":"https://api.github.com/users/guferr/orgs","repos_url":"https://api.github.com/users/guferr/repos","events_url":"https://api.github.com/users/guferr/events{/privacy}","received_events_url":"https://api.github.com/users/guferr/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-11-30T20:35:50Z","updated_at":"2020-03-28T05:41:58Z","closed_at":"2020-03-28T05:41:58Z","author_association":"NONE","active_lock_reason":null,"body":"Ps.: I actually found the issue myself and fixed it, but I'm letting this here just so if anyone has a similar problem.\r\n\r\nThe solution was to change the time \"no_response_time_sec\" variable from mainscripts/Extractor.py (line 309) to a greater value (like 1000).\r\n\r\nThe script was in fact running as I suspected, but because my processor is too slow the script thinks it's stuck. \r\n\r\nOriginal Issue:\r\n\r\nI'm testing if DeepFaceLab_Linux (from the fork made by Ibfs) runs with --cpu-only in all steps in a very weak hardware:\r\n\r\n```\r\nSpecs:` \r\n        \r\nCPU: Intel(R) Celeron(R) CPU  N2940  @ 1.83GHz (4 cores)\r\n\r\nRAM memory: 1333 Mhz DDR3 4096 MB\r\n\r\nGPU: Intel HD Graphics for Intel Atom Processor Z3700 (integrated).\r\n\r\nOS: Linux Mint 18 Sarah\r\n\r\nKernel version: 4.13.0-19-generic\r\n```\r\n\r\nI followed all the steps to install it with Anaconda (but used pip install with requirements-cpu.txt), set the environment variables and then I had a problem with tensorflow: \r\n\r\n`The TensorFlow library was compiled to use AVX instructions, but these aren't available on your machine.`\r\n\r\nThen I uninstalled tensorflow, keras and h5py using 'pip uninstall' and installed the same exact versions using conda. \r\n\r\nIt solved this problem and the script started to work, but suddenly stopped at the second pass:\r\n\r\n```\r\n(deepfacelab) root@ubuntu /home/mint/DeepFaceLab_Linux/scripts # bash 4_data_src_extract_faces_MT_all_GPU.sh --cpu-only\r\n\tPerforming 1st pass...\r\n\tRunning on CPU0.\r\n\tUsing TensorFlow backend.\r\n\t\tRunning on CPU1.\r\n\tUsing TensorFlow backend.\r\n\t100%|###########################################| 68/68 [03:20<00:00,  2.95s/it]\r\n\tPerforming 2nd pass...\r\n\tRunning on CPU0.\r\n\tUsing TensorFlow backend.\r\n\tRunning on CPU1.\r\n\tUsing TensorFlow backend.\r\n\t  0%|                                                    | 0/68 [00:00<?, ?it/s]CPU0 doesnt response, terminating it.\r\n\tCPU1 doesnt response, terminating it.\r\n\t  0%|                                                    | 0/68 [01:00<?, ?it/s]\r\n\tPerforming 3rd pass...\r\n\tRunning on CPU0.\r\n\tRunning on CPU1.\r\n\tRunning on CPU2.\r\n\tRunning on CPU3.\r\n\t0it [00:00, ?it/s]\r\n\t-------------------------\r\n\tImages found:        68\r\n\tFaces detected:      0\r\n\t-------------------------\r\n\tDone.\r\n```\r\n\r\nSearching I've found other very similar issues, but they were in the Windows version of DeepFaceLab and weren't using --cpu-only.\r\n\r\nThis message appears about 1 minutes after it gets to the second progress bar, being that in no moment the CPU usage lowers, it's 100% in both cores all the time until it claims it isn't responding.\r\n\r\nIs there any chance that the CPU is just too slow and the software considered it a timeout and it could be forced to wait more?\r\n\r\nThanks.\r\n\r\n","closed_by":{"login":"iperov","id":8076202,"node_id":"MDQ6VXNlcjgwNzYyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/8076202?v=4","gravatar_id":"","url":"https://api.github.com/users/iperov","html_url":"https://github.com/iperov","followers_url":"https://api.github.com/users/iperov/followers","following_url":"https://api.github.com/users/iperov/following{/other_user}","gists_url":"https://api.github.com/users/iperov/gists{/gist_id}","starred_url":"https://api.github.com/users/iperov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iperov/subscriptions","organizations_url":"https://api.github.com/users/iperov/orgs","repos_url":"https://api.github.com/users/iperov/repos","events_url":"https://api.github.com/users/iperov/events{/privacy}","received_events_url":"https://api.github.com/users/iperov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/iperov/DeepFaceLab/issues/509/timeline","performed_via_github_app":null,"state_reason":"completed"}