{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4","repository_url":"https://api.github.com/repos/trent-b/iterative-stratification","labels_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4/comments","events_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4/events","html_url":"https://github.com/trent-b/iterative-stratification/issues/4","id":369846480,"node_id":"MDU6SXNzdWUzNjk4NDY0ODA=","number":4,"title":"Getting started help","user":{"login":"kevinkit","id":6839921,"node_id":"MDQ6VXNlcjY4Mzk5MjE=","avatar_url":"https://avatars.githubusercontent.com/u/6839921?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinkit","html_url":"https://github.com/kevinkit","followers_url":"https://api.github.com/users/kevinkit/followers","following_url":"https://api.github.com/users/kevinkit/following{/other_user}","gists_url":"https://api.github.com/users/kevinkit/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinkit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinkit/subscriptions","organizations_url":"https://api.github.com/users/kevinkit/orgs","repos_url":"https://api.github.com/users/kevinkit/repos","events_url":"https://api.github.com/users/kevinkit/events{/privacy}","received_events_url":"https://api.github.com/users/kevinkit/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-10-13T22:15:03Z","updated_at":"2018-10-17T14:31:51Z","closed_at":"2018-10-17T14:31:51Z","author_association":"NONE","active_lock_reason":null,"body":"Hello and thank you for this project.\r\n\r\nI am new to machine learning and have a little bit of trouble getting started with this.\r\n\r\nIf i got it correctly this method is used, when I have unevenly distributed multilabel dataset, in order to get an evenly distributed one.\r\n\r\nTo test this I used one of the toy examples and changed it a little, so that I have an uneven distribution over 3 classes. \r\n\r\n\r\n```\r\nfrom iterstrat.ml_stratifiers import MultilabelStratifiedShuffleSplit\r\nimport numpy as np\r\nfrom matplotlib import pyplot as plt\r\n\r\n\r\nAMOUNT_OF_CLASSES = 3\r\nX = np.array([[1,2], [3,4], [1,2], [3,4], [1,2], [3,4], [1,2], [3,4]])\r\ny = np.array([[1,0,1], [1,1,0], [1,0,1], [0,0,1], [1,1,0], [0,0,1], [1,0,0], [1,0,0]])\r\n```\r\n\r\nIf I take a look at the distribution at the beginning it will look like the following:\r\n\r\n\r\n```\r\ndis = np.zeros(shape=(AMOUNT_OF_CLASSES,))\r\nfor i in range(0,AMOUNT_OF_CLASSES):\r\n    dis[i] = y[:,i].sum()\r\n\r\n# Show original distribution\r\nplt.figure(0)\r\nplt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],dis)\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/6839921/46910502-d4855100-cf45-11e8-84d6-e80db8c8f28a.png)\r\n\r\n\r\nIf I now do the stratification like this:\r\n\r\n```\r\n# now go for stratifcaation\r\nmsss = MultilabelStratifiedShuffleSplit(n_splits=10, test_size=0.5, random_state=0)\r\n\r\ncnt = 1\r\n# distribution over all iterations\r\nall_dis = np.zeros(shape=(AMOUNT_OF_CLASSES,))\r\nfor train_index, test_index in msss.split(X, y):\r\n    iter_dis = np.zeros(shape=(AMOUNT_OF_CLASSES,))\r\n    print(\"TRAIN:\", train_index, \"TEST:\", test_index)\r\n    X_train, X_test = X[train_index], X[test_index]\r\n    y_train, y_test = y[train_index], y[test_index]\r\n    \r\n    \r\n    for i in range(0,AMOUNT_OF_CLASSES):\r\n        iter_dis[i] = y_train[:,i].sum()\r\n        \r\n    all_dis += iter_dis\r\n    # Show new distribution (for the latest one at first)\r\n    plt.figure(cnt)\r\n    plt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],iter_dis)\r\n    \r\n    \r\n    \r\n    cnt += 1\r\n```\r\n\r\nand look at the distribution at the end:\r\n\r\n```\r\n\r\nplt.figure(cnt+1)\r\nplt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],all_dis)    \r\nplt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],dis)\r\nplt.title(\"Distribution after Stratification\")\r\nplt.legend(['Distribution after stratification','original distribution'])\r\n```\r\n\r\n\r\nI will get the following:\r\n\r\n![image](https://user-images.githubusercontent.com/6839921/46910514-1910ec80-cf46-11e8-9883-61e141b16a10.png)\r\n\r\n\r\nSo it still looks like I do not have an even distribution among the classes. \r\n\r\nIs this not what this is used for? How could I achieve that every class is evenly distributed over the data? \r\nThank you really much ","closed_by":{"login":"trent-b","id":34728837,"node_id":"MDQ6VXNlcjM0NzI4ODM3","avatar_url":"https://avatars.githubusercontent.com/u/34728837?v=4","gravatar_id":"","url":"https://api.github.com/users/trent-b","html_url":"https://github.com/trent-b","followers_url":"https://api.github.com/users/trent-b/followers","following_url":"https://api.github.com/users/trent-b/following{/other_user}","gists_url":"https://api.github.com/users/trent-b/gists{/gist_id}","starred_url":"https://api.github.com/users/trent-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trent-b/subscriptions","organizations_url":"https://api.github.com/users/trent-b/orgs","repos_url":"https://api.github.com/users/trent-b/repos","events_url":"https://api.github.com/users/trent-b/events{/privacy}","received_events_url":"https://api.github.com/users/trent-b/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4/timeline","performed_via_github_app":null,"state_reason":"completed"}