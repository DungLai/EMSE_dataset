[{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/comments/430019929","html_url":"https://github.com/trent-b/iterative-stratification/issues/4#issuecomment-430019929","issue_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4","id":430019929,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDAxOTkyOQ==","user":{"login":"trent-b","id":34728837,"node_id":"MDQ6VXNlcjM0NzI4ODM3","avatar_url":"https://avatars.githubusercontent.com/u/34728837?v=4","gravatar_id":"","url":"https://api.github.com/users/trent-b","html_url":"https://github.com/trent-b","followers_url":"https://api.github.com/users/trent-b/followers","following_url":"https://api.github.com/users/trent-b/following{/other_user}","gists_url":"https://api.github.com/users/trent-b/gists{/gist_id}","starred_url":"https://api.github.com/users/trent-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trent-b/subscriptions","organizations_url":"https://api.github.com/users/trent-b/orgs","repos_url":"https://api.github.com/users/trent-b/repos","events_url":"https://api.github.com/users/trent-b/events{/privacy}","received_events_url":"https://api.github.com/users/trent-b/received_events","type":"User","site_admin":false},"created_at":"2018-10-15T21:27:49Z","updated_at":"2018-10-15T21:47:31Z","author_association":"OWNER","body":"Thank you for your inquiry. The objective of stratification is to make the percentage of each label similar between train and test splits. In your code, it looks as though you are comparing the distribution of labels from all data to the distribution of labels from the train data. While the label distribution from all of the data should be similar to the label distribution of the train data, I believe you really want to compare the distribution of labels from train data to the distribution of labels of test data. They should be similar. Here is some simplified code.\r\n\r\n```\r\nfrom iterstrat.ml_stratifiers import MultilabelStratifiedShuffleSplit\r\nimport numpy as np\r\nfrom matplotlib import pyplot as plt\r\n\r\n\r\nAMOUNT_OF_CLASSES = 3\r\nX = np.array([[1,2], [3,4], [1,2], [3,4], [1,2], [3,4], [1,2], [3,4]])\r\ny = np.array([[1,0,1], [1,1,0], [1,0,1], [0,0,1], [1,1,0], [0,0,1], [1,0,0], [1,0,0]])\r\n\r\n# now go for stratifcaation\r\nmsss = MultilabelStratifiedShuffleSplit(n_splits=1, test_size=0.5, random_state=0)\r\n\r\nfor train_index, test_index in msss.split(X, y):\r\n    print(\"TRAIN:\", train_index, \"TEST:\", test_index)\r\n    X_train, X_test = X[train_index], X[test_index]\r\n    y_train, y_test = y[train_index], y[test_index]\r\n    \r\nplt.figure\r\nplt.subplot(3,1,1)\r\nplt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],y.sum(axis=0) / y.shape[0])\r\nplt.title('All Data Distribution')\r\nplt.subplot(3,1,2)\r\nplt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],y_train.sum(axis=0) / y_train.shape[0])\r\nplt.title('Train Distribution')\r\nplt.subplot(3,1,3)\r\nplt.bar([i for i in range(0,AMOUNT_OF_CLASSES)],y_test.sum(axis=0) / y_test.shape[0])\r\nplt.title('Test Distribution')\r\n```\r\n![image](https://user-images.githubusercontent.com/34728837/46980362-4d99bb00-d0a2-11e8-9d35-38850441e716.png)\r\n","reactions":{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/comments/430019929/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"trent-b","id":34728837,"node_id":"MDQ6VXNlcjM0NzI4ODM3","avatar_url":"https://avatars.githubusercontent.com/u/34728837?v=4","gravatar_id":"","url":"https://api.github.com/users/trent-b","html_url":"https://github.com/trent-b","followers_url":"https://api.github.com/users/trent-b/followers","following_url":"https://api.github.com/users/trent-b/following{/other_user}","gists_url":"https://api.github.com/users/trent-b/gists{/gist_id}","starred_url":"https://api.github.com/users/trent-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trent-b/subscriptions","organizations_url":"https://api.github.com/users/trent-b/orgs","repos_url":"https://api.github.com/users/trent-b/repos","events_url":"https://api.github.com/users/trent-b/events{/privacy}","received_events_url":"https://api.github.com/users/trent-b/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/comments/430595880","html_url":"https://github.com/trent-b/iterative-stratification/issues/4#issuecomment-430595880","issue_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4","id":430595880,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDU5NTg4MA==","user":{"login":"kevinkit","id":6839921,"node_id":"MDQ6VXNlcjY4Mzk5MjE=","avatar_url":"https://avatars.githubusercontent.com/u/6839921?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinkit","html_url":"https://github.com/kevinkit","followers_url":"https://api.github.com/users/kevinkit/followers","following_url":"https://api.github.com/users/kevinkit/following{/other_user}","gists_url":"https://api.github.com/users/kevinkit/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinkit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinkit/subscriptions","organizations_url":"https://api.github.com/users/kevinkit/orgs","repos_url":"https://api.github.com/users/kevinkit/repos","events_url":"https://api.github.com/users/kevinkit/events{/privacy}","received_events_url":"https://api.github.com/users/kevinkit/received_events","type":"User","site_admin":false},"created_at":"2018-10-17T11:43:55Z","updated_at":"2018-10-17T11:43:55Z","author_association":"NONE","body":"Thank you really much for this much appreciated detaileda  answer. Now I got it !\r\n\r\nAny Idea or \"go-to\" method that can be used to solve the original problem having an evenly distributed multilabel dataset?","reactions":{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/comments/430595880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kevinkit","id":6839921,"node_id":"MDQ6VXNlcjY4Mzk5MjE=","avatar_url":"https://avatars.githubusercontent.com/u/6839921?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinkit","html_url":"https://github.com/kevinkit","followers_url":"https://api.github.com/users/kevinkit/followers","following_url":"https://api.github.com/users/kevinkit/following{/other_user}","gists_url":"https://api.github.com/users/kevinkit/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinkit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinkit/subscriptions","organizations_url":"https://api.github.com/users/kevinkit/orgs","repos_url":"https://api.github.com/users/kevinkit/repos","events_url":"https://api.github.com/users/kevinkit/events{/privacy}","received_events_url":"https://api.github.com/users/kevinkit/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/comments/430652324","html_url":"https://github.com/trent-b/iterative-stratification/issues/4#issuecomment-430652324","issue_url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/4","id":430652324,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDY1MjMyNA==","user":{"login":"trent-b","id":34728837,"node_id":"MDQ6VXNlcjM0NzI4ODM3","avatar_url":"https://avatars.githubusercontent.com/u/34728837?v=4","gravatar_id":"","url":"https://api.github.com/users/trent-b","html_url":"https://github.com/trent-b","followers_url":"https://api.github.com/users/trent-b/followers","following_url":"https://api.github.com/users/trent-b/following{/other_user}","gists_url":"https://api.github.com/users/trent-b/gists{/gist_id}","starred_url":"https://api.github.com/users/trent-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trent-b/subscriptions","organizations_url":"https://api.github.com/users/trent-b/orgs","repos_url":"https://api.github.com/users/trent-b/repos","events_url":"https://api.github.com/users/trent-b/events{/privacy}","received_events_url":"https://api.github.com/users/trent-b/received_events","type":"User","site_admin":false},"created_at":"2018-10-17T14:31:32Z","updated_at":"2018-10-17T14:31:32Z","author_association":"OWNER","body":"That is an interesting problem that I have not looked into. For binary classification problems with imbalanced datasets, I've listed some materials below. I have not thought about how the methods could be used for multilabel datasets.\r\n\r\nReview paper: https://sci2s.ugr.es/keel/dataset/includes/catImbFiles/2004-Batista-SIGKDD.pdf\r\nSMOTE (one technique) in Python: https://github.com/scikit-learn-contrib/imbalanced-learn","reactions":{"url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/comments/430652324/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"trent-b","id":34728837,"node_id":"MDQ6VXNlcjM0NzI4ODM3","avatar_url":"https://avatars.githubusercontent.com/u/34728837?v=4","gravatar_id":"","url":"https://api.github.com/users/trent-b","html_url":"https://github.com/trent-b","followers_url":"https://api.github.com/users/trent-b/followers","following_url":"https://api.github.com/users/trent-b/following{/other_user}","gists_url":"https://api.github.com/users/trent-b/gists{/gist_id}","starred_url":"https://api.github.com/users/trent-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trent-b/subscriptions","organizations_url":"https://api.github.com/users/trent-b/orgs","repos_url":"https://api.github.com/users/trent-b/repos","events_url":"https://api.github.com/users/trent-b/events{/privacy}","received_events_url":"https://api.github.com/users/trent-b/received_events","type":"User","site_admin":false}},{"id":1909728964,"node_id":"MDExOkNsb3NlZEV2ZW50MTkwOTcyODk2NA==","url":"https://api.github.com/repos/trent-b/iterative-stratification/issues/events/1909728964","actor":{"login":"trent-b","id":34728837,"node_id":"MDQ6VXNlcjM0NzI4ODM3","avatar_url":"https://avatars.githubusercontent.com/u/34728837?v=4","gravatar_id":"","url":"https://api.github.com/users/trent-b","html_url":"https://github.com/trent-b","followers_url":"https://api.github.com/users/trent-b/followers","following_url":"https://api.github.com/users/trent-b/following{/other_user}","gists_url":"https://api.github.com/users/trent-b/gists{/gist_id}","starred_url":"https://api.github.com/users/trent-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trent-b/subscriptions","organizations_url":"https://api.github.com/users/trent-b/orgs","repos_url":"https://api.github.com/users/trent-b/repos","events_url":"https://api.github.com/users/trent-b/events{/privacy}","received_events_url":"https://api.github.com/users/trent-b/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-10-17T14:31:51Z","state_reason":null,"performed_via_github_app":null}]