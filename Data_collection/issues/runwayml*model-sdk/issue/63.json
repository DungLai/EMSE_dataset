{"url":"https://api.github.com/repos/runwayml/model-sdk/issues/63","repository_url":"https://api.github.com/repos/runwayml/model-sdk","labels_url":"https://api.github.com/repos/runwayml/model-sdk/issues/63/labels{/name}","comments_url":"https://api.github.com/repos/runwayml/model-sdk/issues/63/comments","events_url":"https://api.github.com/repos/runwayml/model-sdk/issues/63/events","html_url":"https://github.com/runwayml/model-sdk/issues/63","id":453209555,"node_id":"MDU6SXNzdWU0NTMyMDk1NTU=","number":63,"title":"runway.setup with empty options gives unexpected error","user":{"login":"aparrish","id":125839,"node_id":"MDQ6VXNlcjEyNTgzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/125839?v=4","gravatar_id":"","url":"https://api.github.com/users/aparrish","html_url":"https://github.com/aparrish","followers_url":"https://api.github.com/users/aparrish/followers","following_url":"https://api.github.com/users/aparrish/following{/other_user}","gists_url":"https://api.github.com/users/aparrish/gists{/gist_id}","starred_url":"https://api.github.com/users/aparrish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aparrish/subscriptions","organizations_url":"https://api.github.com/users/aparrish/orgs","repos_url":"https://api.github.com/users/aparrish/repos","events_url":"https://api.github.com/users/aparrish/events{/privacy}","received_events_url":"https://api.github.com/users/aparrish/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-06-06T19:52:24Z","updated_at":"2019-06-11T17:35:30Z","closed_at":"2019-06-11T17:35:30Z","author_association":"NONE","active_lock_reason":null,"body":"I was trying to make a very minimal Runway model and noticed that if the `options` parameter to the `setup` decorator is an empty dictionary, you get a runtime error. Here's minimal code to reproduce:\r\n\r\n```\r\nimport runway                                                                   \r\n                                                                                \r\n@runway.setup(options={})                                                       \r\ndef setup(opts):                                                                \r\n    return \"hello\"                                                              \r\n                                                                                \r\nif __name__ == '__main__':                                                      \r\n    runway.run(host='0.0.0.0', port=8000)\r\n```\r\n\r\n... which produces (for me) the following error:\r\n\r\n```\r\nError during setup: TypeError(\"setup() missing 1 required positional argument: 'opts'\",).\r\nFile \"/Users/allison/anaconda/lib/python3.6/site-packages/runway/model.py\", line 455, in run\r\n    self.setup_model(model_options)\r\nFile \"/Users/allison/anaconda/lib/python3.6/site-packages/runway/model.py\", line 337, in setup_model\r\n    raise reraise(SetupError, SetupError(repr(err)), sys.exc_info()[2])\r\nFile \"/Users/allison/anaconda/lib/python3.6/site-packages/six.py\", line 692, in reraise\r\n    raise value.with_traceback(tb)\r\nFile \"/Users/allison/anaconda/lib/python3.6/site-packages/runway/model.py\", line 335, in setup_model\r\n    self.model = self.setup_fn()\r\n```\r\n\r\nThis is on Python 3.6, using version 0.0.75 of Runway SDK.\r\n\r\nI think the problem is here:\r\n\r\nhttps://github.com/runwayml/model-sdk/blob/14b36a2e749e76cf8c555363dceaa01fac39902d/runway/model.py#L317\r\n\r\n... because `self.options` is an empty array, it counts as False-y in the `if` statement, which  causes the `elif` below to run (which in turn calls the setup function without any parameters).\r\n\r\n(This came up when I was trying to prune down the example `runway_model.py` in the `model-template` directory to a bare minimumâ€”I wasn't sure how the `options` parameter worked, so I just deleted the keys/values from the dictionary literal in the hopes that I would end up with a model that didn't have any options. I see now that `@model.setup` [w/o parameters] is how you'd be expected to use the decorator in the situation. So not a show-stopping bug, but might be confusing to other future developers like it was for me)","closed_by":{"login":"agermanidis","id":600956,"node_id":"MDQ6VXNlcjYwMDk1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/600956?v=4","gravatar_id":"","url":"https://api.github.com/users/agermanidis","html_url":"https://github.com/agermanidis","followers_url":"https://api.github.com/users/agermanidis/followers","following_url":"https://api.github.com/users/agermanidis/following{/other_user}","gists_url":"https://api.github.com/users/agermanidis/gists{/gist_id}","starred_url":"https://api.github.com/users/agermanidis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agermanidis/subscriptions","organizations_url":"https://api.github.com/users/agermanidis/orgs","repos_url":"https://api.github.com/users/agermanidis/repos","events_url":"https://api.github.com/users/agermanidis/events{/privacy}","received_events_url":"https://api.github.com/users/agermanidis/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/runwayml/model-sdk/issues/63/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/runwayml/model-sdk/issues/63/timeline","performed_via_github_app":null,"state_reason":"completed"}