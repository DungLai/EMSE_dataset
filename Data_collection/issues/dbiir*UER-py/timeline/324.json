[{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1147266607","html_url":"https://github.com/dbiir/UER-py/issues/324#issuecomment-1147266607","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/324","id":1147266607,"node_id":"IC_kwDOCsNQKM5EYeYv","user":{"login":"hhou435","id":59219579,"node_id":"MDQ6VXNlcjU5MjE5NTc5","avatar_url":"https://avatars.githubusercontent.com/u/59219579?v=4","gravatar_id":"","url":"https://api.github.com/users/hhou435","html_url":"https://github.com/hhou435","followers_url":"https://api.github.com/users/hhou435/followers","following_url":"https://api.github.com/users/hhou435/following{/other_user}","gists_url":"https://api.github.com/users/hhou435/gists{/gist_id}","starred_url":"https://api.github.com/users/hhou435/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhou435/subscriptions","organizations_url":"https://api.github.com/users/hhou435/orgs","repos_url":"https://api.github.com/users/hhou435/repos","events_url":"https://api.github.com/users/hhou435/events{/privacy}","received_events_url":"https://api.github.com/users/hhou435/received_events","type":"User","site_admin":false},"created_at":"2022-06-06T09:50:05Z","updated_at":"2022-06-06T09:50:05Z","author_association":"COLLABORATOR","body":"您好，请问单卡运行正常吗，最近项目更新了dataloader和dataset，如果使用旧的代码处理的数据和新的代码可能不兼容","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1147266607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hhou435","id":59219579,"node_id":"MDQ6VXNlcjU5MjE5NTc5","avatar_url":"https://avatars.githubusercontent.com/u/59219579?v=4","gravatar_id":"","url":"https://api.github.com/users/hhou435","html_url":"https://github.com/hhou435","followers_url":"https://api.github.com/users/hhou435/followers","following_url":"https://api.github.com/users/hhou435/following{/other_user}","gists_url":"https://api.github.com/users/hhou435/gists{/gist_id}","starred_url":"https://api.github.com/users/hhou435/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhou435/subscriptions","organizations_url":"https://api.github.com/users/hhou435/orgs","repos_url":"https://api.github.com/users/hhou435/repos","events_url":"https://api.github.com/users/hhou435/events{/privacy}","received_events_url":"https://api.github.com/users/hhou435/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1147307756","html_url":"https://github.com/dbiir/UER-py/issues/324#issuecomment-1147307756","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/324","id":1147307756,"node_id":"IC_kwDOCsNQKM5EYobs","user":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false},"created_at":"2022-06-06T10:38:38Z","updated_at":"2022-06-06T10:38:38Z","author_association":"NONE","body":"可能是因为我用了旧的代码处理数据，重新处理一遍代价比较大，我还是用旧代码好了。BTW，我想让模型记录跑过哪些数据，这样方便中断后继续运行，请问修改代码有建议的地方吗，因为我看这个框架的data 加载似乎没有用distribute sampler。","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1147307756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1147381953","html_url":"https://github.com/dbiir/UER-py/issues/324#issuecomment-1147381953","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/324","id":1147381953,"node_id":"IC_kwDOCsNQKM5EY6jB","user":{"login":"zhezhaoa","id":10495098,"node_id":"MDQ6VXNlcjEwNDk1MDk4","avatar_url":"https://avatars.githubusercontent.com/u/10495098?v=4","gravatar_id":"","url":"https://api.github.com/users/zhezhaoa","html_url":"https://github.com/zhezhaoa","followers_url":"https://api.github.com/users/zhezhaoa/followers","following_url":"https://api.github.com/users/zhezhaoa/following{/other_user}","gists_url":"https://api.github.com/users/zhezhaoa/gists{/gist_id}","starred_url":"https://api.github.com/users/zhezhaoa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhezhaoa/subscriptions","organizations_url":"https://api.github.com/users/zhezhaoa/orgs","repos_url":"https://api.github.com/users/zhezhaoa/repos","events_url":"https://api.github.com/users/zhezhaoa/events{/privacy}","received_events_url":"https://api.github.com/users/zhezhaoa/received_events","type":"User","site_admin":false},"created_at":"2022-06-06T12:13:29Z","updated_at":"2022-06-06T12:13:29Z","author_association":"COLLABORATOR","body":"> 可能是因为我用了旧的代码处理数据，重新处理一遍代价比较大，我还是用旧代码好了。BTW，我想让模型记录跑过哪些数据，这样方便中断后继续运行，请问修改代码有建议的地方吗，因为我看这个框架的data 加载似乎没有用distribute sampler。\r\n\r\n新的代码对dataset和dataloader进行了优化，能够大幅度减少dataset.pt的大小，非常建议用新版本哈\r\n关于模型中断后重新运行，这个需要考虑的比较多，包括模型的存储和加载，优化器、数据等，修改难度比较高。这个后续我们会加入相关功能","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1147381953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhezhaoa","id":10495098,"node_id":"MDQ6VXNlcjEwNDk1MDk4","avatar_url":"https://avatars.githubusercontent.com/u/10495098?v=4","gravatar_id":"","url":"https://api.github.com/users/zhezhaoa","html_url":"https://github.com/zhezhaoa","followers_url":"https://api.github.com/users/zhezhaoa/followers","following_url":"https://api.github.com/users/zhezhaoa/following{/other_user}","gists_url":"https://api.github.com/users/zhezhaoa/gists{/gist_id}","starred_url":"https://api.github.com/users/zhezhaoa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhezhaoa/subscriptions","organizations_url":"https://api.github.com/users/zhezhaoa/orgs","repos_url":"https://api.github.com/users/zhezhaoa/repos","events_url":"https://api.github.com/users/zhezhaoa/events{/privacy}","received_events_url":"https://api.github.com/users/zhezhaoa/received_events","type":"User","site_admin":false}},{"id":6757476736,"node_id":"CE_lADOCsNQKM5LMizLzwAAAAGSxumA","url":"https://api.github.com/repos/dbiir/UER-py/issues/events/6757476736","actor":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-06-07T03:05:35Z","state_reason":null,"performed_via_github_app":null},{"id":6787508412,"node_id":"REE_lADOCsNQKM5LMizLzwAAAAGUkSi8","url":"https://api.github.com/repos/dbiir/UER-py/issues/events/6787508412","actor":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2022-06-10T17:01:36Z","state_reason":"reopened","performed_via_github_app":null},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1152565067","html_url":"https://github.com/dbiir/UER-py/issues/324#issuecomment-1152565067","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/324","id":1152565067,"node_id":"IC_kwDOCsNQKM5Esr9L","user":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false},"created_at":"2022-06-10T17:05:05Z","updated_at":"2022-06-10T17:05:05Z","author_association":"NONE","body":"很遗憾，我花了四天重新处理完之后，只减少了11G同时多机多卡还是用不了。。。。。","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1152565067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1152968920","html_url":"https://github.com/dbiir/UER-py/issues/324#issuecomment-1152968920","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/324","id":1152968920,"node_id":"IC_kwDOCsNQKM5EuOjY","user":{"login":"zhezhaoa","id":10495098,"node_id":"MDQ6VXNlcjEwNDk1MDk4","avatar_url":"https://avatars.githubusercontent.com/u/10495098?v=4","gravatar_id":"","url":"https://api.github.com/users/zhezhaoa","html_url":"https://github.com/zhezhaoa","followers_url":"https://api.github.com/users/zhezhaoa/followers","following_url":"https://api.github.com/users/zhezhaoa/following{/other_user}","gists_url":"https://api.github.com/users/zhezhaoa/gists{/gist_id}","starred_url":"https://api.github.com/users/zhezhaoa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhezhaoa/subscriptions","organizations_url":"https://api.github.com/users/zhezhaoa/orgs","repos_url":"https://api.github.com/users/zhezhaoa/repos","events_url":"https://api.github.com/users/zhezhaoa/events{/privacy}","received_events_url":"https://api.github.com/users/zhezhaoa/received_events","type":"User","site_admin":false},"created_at":"2022-06-11T17:26:12Z","updated_at":"2022-06-11T17:26:12Z","author_association":"COLLABORATOR","body":"> 很遗憾，我花了四天重新处理完之后，只减少了11G同时多机多卡还是用不了。。。。。\r\n\r\n请确保多机的的环境是完全一致的\r\n\r\n并且部分pytorch版本可能会导致多机卡住，可以更换pytorch版本\r\nhttps://github.com/pytorch/pytorch/issues/17745","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1152968920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhezhaoa","id":10495098,"node_id":"MDQ6VXNlcjEwNDk1MDk4","avatar_url":"https://avatars.githubusercontent.com/u/10495098?v=4","gravatar_id":"","url":"https://api.github.com/users/zhezhaoa","html_url":"https://github.com/zhezhaoa","followers_url":"https://api.github.com/users/zhezhaoa/followers","following_url":"https://api.github.com/users/zhezhaoa/following{/other_user}","gists_url":"https://api.github.com/users/zhezhaoa/gists{/gist_id}","starred_url":"https://api.github.com/users/zhezhaoa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhezhaoa/subscriptions","organizations_url":"https://api.github.com/users/zhezhaoa/orgs","repos_url":"https://api.github.com/users/zhezhaoa/repos","events_url":"https://api.github.com/users/zhezhaoa/events{/privacy}","received_events_url":"https://api.github.com/users/zhezhaoa/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1154804479","html_url":"https://github.com/dbiir/UER-py/issues/324#issuecomment-1154804479","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/324","id":1154804479,"node_id":"IC_kwDOCsNQKM5E1Or_","user":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false},"created_at":"2022-06-14T07:12:54Z","updated_at":"2022-06-14T07:12:54Z","author_association":"NONE","body":"多机多卡版本一致的，pytorch1.10是版本，在dataloader优化前是可以多机多卡的，推测是这部分代码没有考虑多机多卡的情况？","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/1154804479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seeledu","id":26110916,"node_id":"MDQ6VXNlcjI2MTEwOTE2","avatar_url":"https://avatars.githubusercontent.com/u/26110916?v=4","gravatar_id":"","url":"https://api.github.com/users/seeledu","html_url":"https://github.com/seeledu","followers_url":"https://api.github.com/users/seeledu/followers","following_url":"https://api.github.com/users/seeledu/following{/other_user}","gists_url":"https://api.github.com/users/seeledu/gists{/gist_id}","starred_url":"https://api.github.com/users/seeledu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seeledu/subscriptions","organizations_url":"https://api.github.com/users/seeledu/orgs","repos_url":"https://api.github.com/users/seeledu/repos","events_url":"https://api.github.com/users/seeledu/events{/privacy}","received_events_url":"https://api.github.com/users/seeledu/received_events","type":"User","site_admin":false}}]