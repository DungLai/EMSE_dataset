[{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/812572558","html_url":"https://github.com/dbiir/UER-py/issues/127#issuecomment-812572558","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/127","id":812572558,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjU3MjU1OA==","user":{"login":"Embedding","id":31317254,"node_id":"MDQ6VXNlcjMxMzE3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/31317254?v=4","gravatar_id":"","url":"https://api.github.com/users/Embedding","html_url":"https://github.com/Embedding","followers_url":"https://api.github.com/users/Embedding/followers","following_url":"https://api.github.com/users/Embedding/following{/other_user}","gists_url":"https://api.github.com/users/Embedding/gists{/gist_id}","starred_url":"https://api.github.com/users/Embedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Embedding/subscriptions","organizations_url":"https://api.github.com/users/Embedding/orgs","repos_url":"https://api.github.com/users/Embedding/repos","events_url":"https://api.github.com/users/Embedding/events{/privacy}","received_events_url":"https://api.github.com/users/Embedding/received_events","type":"User","site_admin":false},"created_at":"2021-04-02T15:13:23Z","updated_at":"2021-04-02T15:13:23Z","author_association":"COLLABORATOR","body":"只有一张卡并且只训练了10万步。可能训练不充分。建议训练更多的步数。\r\n关于[UNK]问题，我们使用了扩展的词典，细节请参考这里[这里](https://huggingface.co/uer/gpt2-chinese-poem)。","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/812572558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Embedding","id":31317254,"node_id":"MDQ6VXNlcjMxMzE3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/31317254?v=4","gravatar_id":"","url":"https://api.github.com/users/Embedding","html_url":"https://github.com/Embedding","followers_url":"https://api.github.com/users/Embedding/followers","following_url":"https://api.github.com/users/Embedding/following{/other_user}","gists_url":"https://api.github.com/users/Embedding/gists{/gist_id}","starred_url":"https://api.github.com/users/Embedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Embedding/subscriptions","organizations_url":"https://api.github.com/users/Embedding/orgs","repos_url":"https://api.github.com/users/Embedding/repos","events_url":"https://api.github.com/users/Embedding/events{/privacy}","received_events_url":"https://api.github.com/users/Embedding/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/813231168","html_url":"https://github.com/dbiir/UER-py/issues/127#issuecomment-813231168","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/127","id":813231168,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzIzMTE2OA==","user":{"login":"Imposingapple","id":39848377,"node_id":"MDQ6VXNlcjM5ODQ4Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/39848377?v=4","gravatar_id":"","url":"https://api.github.com/users/Imposingapple","html_url":"https://github.com/Imposingapple","followers_url":"https://api.github.com/users/Imposingapple/followers","following_url":"https://api.github.com/users/Imposingapple/following{/other_user}","gists_url":"https://api.github.com/users/Imposingapple/gists{/gist_id}","starred_url":"https://api.github.com/users/Imposingapple/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Imposingapple/subscriptions","organizations_url":"https://api.github.com/users/Imposingapple/orgs","repos_url":"https://api.github.com/users/Imposingapple/repos","events_url":"https://api.github.com/users/Imposingapple/events{/privacy}","received_events_url":"https://api.github.com/users/Imposingapple/received_events","type":"User","site_admin":false},"created_at":"2021-04-05T06:58:46Z","updated_at":"2021-04-05T06:58:46Z","author_association":"NONE","body":"您好，我参看了您给的链接，然后完全运行了示范给定的代码，并按照预训练的选项运行了generate_lm.py，效果虽然比之前好了不少，没了[UNK]，但结果貌似还是不尽如人意，包括很多[SEP]字符，输入五言可是生成的全是七言（我的数据集七言和五言一起输入进去的，是nlp_chinese_corpus的诗，一行一首，七言不会比五言多很多的），而且一开始的[CLS]不知道为什么在输出时就是[cl##s]\r\n\r\n这是我的测试代码：\r\n![sh](https://user-images.githubusercontent.com/39848377/113546406-7de0c580-961e-11eb-9a3f-94758589eac5.JPEG)\r\n\r\n这是我的生成结果：\r\n![result](https://user-images.githubusercontent.com/39848377/113546419-846f3d00-961e-11eb-8fbc-3e27c1e05e92.JPEG)\r\n\r\n这是和我的数据点差不多的数据点的运行状态：\r\n![state](https://user-images.githubusercontent.com/39848377/113546505-b6809f00-961e-11eb-9ac7-6e32b84c9492.JPEG)\r\n\r\n我的vocab用的是您给的链接里下载下来的，并命名为poem_zh_vocab.txt\r\n\r\n请问这是什么原因？\r\n还有想请教一下[CLS]是在程序里哪里加的，我看了UER的dataloader部分好像没有找到？\r\n\r\n求大佬指教，谢谢！\r\n\r\n","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/813231168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Imposingapple","id":39848377,"node_id":"MDQ6VXNlcjM5ODQ4Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/39848377?v=4","gravatar_id":"","url":"https://api.github.com/users/Imposingapple","html_url":"https://github.com/Imposingapple","followers_url":"https://api.github.com/users/Imposingapple/followers","following_url":"https://api.github.com/users/Imposingapple/following{/other_user}","gists_url":"https://api.github.com/users/Imposingapple/gists{/gist_id}","starred_url":"https://api.github.com/users/Imposingapple/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Imposingapple/subscriptions","organizations_url":"https://api.github.com/users/Imposingapple/orgs","repos_url":"https://api.github.com/users/Imposingapple/repos","events_url":"https://api.github.com/users/Imposingapple/events{/privacy}","received_events_url":"https://api.github.com/users/Imposingapple/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/813282671","html_url":"https://github.com/dbiir/UER-py/issues/127#issuecomment-813282671","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/127","id":813282671,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzI4MjY3MQ==","user":{"login":"hhou435","id":59219579,"node_id":"MDQ6VXNlcjU5MjE5NTc5","avatar_url":"https://avatars.githubusercontent.com/u/59219579?v=4","gravatar_id":"","url":"https://api.github.com/users/hhou435","html_url":"https://github.com/hhou435","followers_url":"https://api.github.com/users/hhou435/followers","following_url":"https://api.github.com/users/hhou435/following{/other_user}","gists_url":"https://api.github.com/users/hhou435/gists{/gist_id}","starred_url":"https://api.github.com/users/hhou435/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhou435/subscriptions","organizations_url":"https://api.github.com/users/hhou435/orgs","repos_url":"https://api.github.com/users/hhou435/repos","events_url":"https://api.github.com/users/hhou435/events{/privacy}","received_events_url":"https://api.github.com/users/hhou435/received_events","type":"User","site_admin":false},"created_at":"2021-04-05T08:51:49Z","updated_at":"2021-04-05T08:51:49Z","author_association":"COLLABORATOR","body":"您好，我们刚刚更新了generate_lm.py，在开头默认加上了[CLS]，不需要手动添加了。\r\n此外，我们也在Modelzoo中提供了GPT2古诗预训练模型。\r\nhttps://github.com/dbiir/UER-py/wiki/%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E4%BB%93%E5%BA%93#%E5%9F%BA%E4%BA%8E%E4%B8%8D%E5%90%8C%E8%AF%AD%E6%96%99%E7%9A%84%E4%B8%AD%E6%96%87gpt-2%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B\r\n您可以下载后与您现在训练的模型比较一下生成结果。\r\n出现[SEP]代表了生成结束。","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/813282671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hhou435","id":59219579,"node_id":"MDQ6VXNlcjU5MjE5NTc5","avatar_url":"https://avatars.githubusercontent.com/u/59219579?v=4","gravatar_id":"","url":"https://api.github.com/users/hhou435","html_url":"https://github.com/hhou435","followers_url":"https://api.github.com/users/hhou435/followers","following_url":"https://api.github.com/users/hhou435/following{/other_user}","gists_url":"https://api.github.com/users/hhou435/gists{/gist_id}","starred_url":"https://api.github.com/users/hhou435/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hhou435/subscriptions","organizations_url":"https://api.github.com/users/hhou435/orgs","repos_url":"https://api.github.com/users/hhou435/repos","events_url":"https://api.github.com/users/hhou435/events{/privacy}","received_events_url":"https://api.github.com/users/hhou435/received_events","type":"User","site_admin":false}},{"id":4926160378,"node_id":"MDExOkNsb3NlZEV2ZW50NDkyNjE2MDM3OA==","url":"https://api.github.com/repos/dbiir/UER-py/issues/events/4926160378","actor":{"login":"ydli-ai","id":20391895,"node_id":"MDQ6VXNlcjIwMzkxODk1","avatar_url":"https://avatars.githubusercontent.com/u/20391895?v=4","gravatar_id":"","url":"https://api.github.com/users/ydli-ai","html_url":"https://github.com/ydli-ai","followers_url":"https://api.github.com/users/ydli-ai/followers","following_url":"https://api.github.com/users/ydli-ai/following{/other_user}","gists_url":"https://api.github.com/users/ydli-ai/gists{/gist_id}","starred_url":"https://api.github.com/users/ydli-ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydli-ai/subscriptions","organizations_url":"https://api.github.com/users/ydli-ai/orgs","repos_url":"https://api.github.com/users/ydli-ai/repos","events_url":"https://api.github.com/users/ydli-ai/events{/privacy}","received_events_url":"https://api.github.com/users/ydli-ai/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-06-23T02:47:06Z","state_reason":null,"performed_via_github_app":null}]