[{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508374288","html_url":"https://github.com/dbiir/UER-py/issues/11#issuecomment-508374288","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/11","id":508374288,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODM3NDI4OA==","user":{"login":"Embedding","id":31317254,"node_id":"MDQ6VXNlcjMxMzE3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/31317254?v=4","gravatar_id":"","url":"https://api.github.com/users/Embedding","html_url":"https://github.com/Embedding","followers_url":"https://api.github.com/users/Embedding/followers","following_url":"https://api.github.com/users/Embedding/following{/other_user}","gists_url":"https://api.github.com/users/Embedding/gists{/gist_id}","starred_url":"https://api.github.com/users/Embedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Embedding/subscriptions","organizations_url":"https://api.github.com/users/Embedding/orgs","repos_url":"https://api.github.com/users/Embedding/repos","events_url":"https://api.github.com/users/Embedding/events{/privacy}","received_events_url":"https://api.github.com/users/Embedding/received_events","type":"User","site_admin":false},"created_at":"2019-07-04T07:34:22Z","updated_at":"2019-07-04T07:34:22Z","author_association":"COLLABORATOR","body":"Hi, thank you for this issue.\r\nplease try to set strict=False here.\r\n```\r\nload_state_dict(pretrained_model, strict=True)\r\n```\r\nThe LSTM pre-trained model uses LM and CLS targets, which is different with BERT target.\r\nWe will change feature_extractor.py to make it more robust.","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508374288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Embedding","id":31317254,"node_id":"MDQ6VXNlcjMxMzE3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/31317254?v=4","gravatar_id":"","url":"https://api.github.com/users/Embedding","html_url":"https://github.com/Embedding","followers_url":"https://api.github.com/users/Embedding/followers","following_url":"https://api.github.com/users/Embedding/following{/other_user}","gists_url":"https://api.github.com/users/Embedding/gists{/gist_id}","starred_url":"https://api.github.com/users/Embedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Embedding/subscriptions","organizations_url":"https://api.github.com/users/Embedding/orgs","repos_url":"https://api.github.com/users/Embedding/repos","events_url":"https://api.github.com/users/Embedding/events{/privacy}","received_events_url":"https://api.github.com/users/Embedding/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508384975","html_url":"https://github.com/dbiir/UER-py/issues/11#issuecomment-508384975","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/11","id":508384975,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODM4NDk3NQ==","user":{"login":"bb9696aa","id":14299519,"node_id":"MDQ6VXNlcjE0Mjk5NTE5","avatar_url":"https://avatars.githubusercontent.com/u/14299519?v=4","gravatar_id":"","url":"https://api.github.com/users/bb9696aa","html_url":"https://github.com/bb9696aa","followers_url":"https://api.github.com/users/bb9696aa/followers","following_url":"https://api.github.com/users/bb9696aa/following{/other_user}","gists_url":"https://api.github.com/users/bb9696aa/gists{/gist_id}","starred_url":"https://api.github.com/users/bb9696aa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bb9696aa/subscriptions","organizations_url":"https://api.github.com/users/bb9696aa/orgs","repos_url":"https://api.github.com/users/bb9696aa/repos","events_url":"https://api.github.com/users/bb9696aa/events{/privacy}","received_events_url":"https://api.github.com/users/bb9696aa/received_events","type":"User","site_admin":false},"created_at":"2019-07-04T08:08:22Z","updated_at":"2019-07-04T08:08:22Z","author_association":"NONE","body":"> Hi, thank you for this issue.\r\n> please try to set strict=False here.\r\n> \r\n> ```\r\n> load_state_dict(pretrained_model, strict=True)\r\n> ```\r\n> \r\n> The LSTM pre-trained model uses LM and CLS targets, which is different with BERT target.\r\n> We will change feature_extractor.py to make it more robust.\r\n\r\nIt works, thanks a lot! \r\n\r\nFurthermore, if I want to get the average token embeddings to represent a sentence through the LSTM multiple targets pre-trained model, whether should I add the `[CLS]` token at the head of each sentence?\r\n\r\nUnlike the `[CLS]` token using Bert Target, maybe the `[CLS]` token using `first LM targets then CLS targets` training strategy could get a good token embedding.\r\n\r\nOr, maybe I just need to pick the last unpad token embedding to represent a sentence instead of the average strategy mentioned above? Since it's a LSTM-based model.\r\n\r\nReally appreciate your patience and support, thank you!","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508384975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bb9696aa","id":14299519,"node_id":"MDQ6VXNlcjE0Mjk5NTE5","avatar_url":"https://avatars.githubusercontent.com/u/14299519?v=4","gravatar_id":"","url":"https://api.github.com/users/bb9696aa","html_url":"https://github.com/bb9696aa","followers_url":"https://api.github.com/users/bb9696aa/followers","following_url":"https://api.github.com/users/bb9696aa/following{/other_user}","gists_url":"https://api.github.com/users/bb9696aa/gists{/gist_id}","starred_url":"https://api.github.com/users/bb9696aa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bb9696aa/subscriptions","organizations_url":"https://api.github.com/users/bb9696aa/orgs","repos_url":"https://api.github.com/users/bb9696aa/repos","events_url":"https://api.github.com/users/bb9696aa/events{/privacy}","received_events_url":"https://api.github.com/users/bb9696aa/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508399728","html_url":"https://github.com/dbiir/UER-py/issues/11#issuecomment-508399728","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/11","id":508399728,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODM5OTcyOA==","user":{"login":"Embedding","id":31317254,"node_id":"MDQ6VXNlcjMxMzE3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/31317254?v=4","gravatar_id":"","url":"https://api.github.com/users/Embedding","html_url":"https://github.com/Embedding","followers_url":"https://api.github.com/users/Embedding/followers","following_url":"https://api.github.com/users/Embedding/following{/other_user}","gists_url":"https://api.github.com/users/Embedding/gists{/gist_id}","starred_url":"https://api.github.com/users/Embedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Embedding/subscriptions","organizations_url":"https://api.github.com/users/Embedding/orgs","repos_url":"https://api.github.com/users/Embedding/repos","events_url":"https://api.github.com/users/Embedding/events{/privacy}","received_events_url":"https://api.github.com/users/Embedding/received_events","type":"User","site_admin":false},"created_at":"2019-07-04T08:52:20Z","updated_at":"2019-07-04T08:52:20Z","author_association":"COLLABORATOR","body":"Hi, [CLS] is not suitable for encoders like RNN. Adding mean/max pooling is a good choice in practice.\r\nI will add a pooling option in feature_extractor.py as soon as possible. ","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508399728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Embedding","id":31317254,"node_id":"MDQ6VXNlcjMxMzE3MjU0","avatar_url":"https://avatars.githubusercontent.com/u/31317254?v=4","gravatar_id":"","url":"https://api.github.com/users/Embedding","html_url":"https://github.com/Embedding","followers_url":"https://api.github.com/users/Embedding/followers","following_url":"https://api.github.com/users/Embedding/following{/other_user}","gists_url":"https://api.github.com/users/Embedding/gists{/gist_id}","starred_url":"https://api.github.com/users/Embedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Embedding/subscriptions","organizations_url":"https://api.github.com/users/Embedding/orgs","repos_url":"https://api.github.com/users/Embedding/repos","events_url":"https://api.github.com/users/Embedding/events{/privacy}","received_events_url":"https://api.github.com/users/Embedding/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508428293","html_url":"https://github.com/dbiir/UER-py/issues/11#issuecomment-508428293","issue_url":"https://api.github.com/repos/dbiir/UER-py/issues/11","id":508428293,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODQyODI5Mw==","user":{"login":"bb9696aa","id":14299519,"node_id":"MDQ6VXNlcjE0Mjk5NTE5","avatar_url":"https://avatars.githubusercontent.com/u/14299519?v=4","gravatar_id":"","url":"https://api.github.com/users/bb9696aa","html_url":"https://github.com/bb9696aa","followers_url":"https://api.github.com/users/bb9696aa/followers","following_url":"https://api.github.com/users/bb9696aa/following{/other_user}","gists_url":"https://api.github.com/users/bb9696aa/gists{/gist_id}","starred_url":"https://api.github.com/users/bb9696aa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bb9696aa/subscriptions","organizations_url":"https://api.github.com/users/bb9696aa/orgs","repos_url":"https://api.github.com/users/bb9696aa/repos","events_url":"https://api.github.com/users/bb9696aa/events{/privacy}","received_events_url":"https://api.github.com/users/bb9696aa/received_events","type":"User","site_admin":false},"created_at":"2019-07-04T10:16:45Z","updated_at":"2019-07-04T10:16:45Z","author_association":"NONE","body":"> Hi, [CLS] is not suitable for encoders like RNN. Adding mean/max pooling is a good choice in practice.\r\n> I will add a pooling option in feature_extractor.py as soon as possible.\r\n\r\nReally helpful, thanks!","reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/comments/508428293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bb9696aa","id":14299519,"node_id":"MDQ6VXNlcjE0Mjk5NTE5","avatar_url":"https://avatars.githubusercontent.com/u/14299519?v=4","gravatar_id":"","url":"https://api.github.com/users/bb9696aa","html_url":"https://github.com/bb9696aa","followers_url":"https://api.github.com/users/bb9696aa/followers","following_url":"https://api.github.com/users/bb9696aa/following{/other_user}","gists_url":"https://api.github.com/users/bb9696aa/gists{/gist_id}","starred_url":"https://api.github.com/users/bb9696aa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bb9696aa/subscriptions","organizations_url":"https://api.github.com/users/bb9696aa/orgs","repos_url":"https://api.github.com/users/bb9696aa/repos","events_url":"https://api.github.com/users/bb9696aa/events{/privacy}","received_events_url":"https://api.github.com/users/bb9696aa/received_events","type":"User","site_admin":false}},{"id":2460134299,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ2MDEzNDI5OQ==","url":"https://api.github.com/repos/dbiir/UER-py/issues/events/2460134299","actor":{"login":"bb9696aa","id":14299519,"node_id":"MDQ6VXNlcjE0Mjk5NTE5","avatar_url":"https://avatars.githubusercontent.com/u/14299519?v=4","gravatar_id":"","url":"https://api.github.com/users/bb9696aa","html_url":"https://github.com/bb9696aa","followers_url":"https://api.github.com/users/bb9696aa/followers","following_url":"https://api.github.com/users/bb9696aa/following{/other_user}","gists_url":"https://api.github.com/users/bb9696aa/gists{/gist_id}","starred_url":"https://api.github.com/users/bb9696aa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bb9696aa/subscriptions","organizations_url":"https://api.github.com/users/bb9696aa/orgs","repos_url":"https://api.github.com/users/bb9696aa/repos","events_url":"https://api.github.com/users/bb9696aa/events{/privacy}","received_events_url":"https://api.github.com/users/bb9696aa/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-04T10:16:45Z","state_reason":null,"performed_via_github_app":null}]