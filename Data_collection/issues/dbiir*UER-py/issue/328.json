{"url":"https://api.github.com/repos/dbiir/UER-py/issues/328","repository_url":"https://api.github.com/repos/dbiir/UER-py","labels_url":"https://api.github.com/repos/dbiir/UER-py/issues/328/labels{/name}","comments_url":"https://api.github.com/repos/dbiir/UER-py/issues/328/comments","events_url":"https://api.github.com/repos/dbiir/UER-py/issues/328/events","html_url":"https://github.com/dbiir/UER-py/issues/328","id":1292038762,"node_id":"I_kwDOCsNQKM5NAvJq","number":328,"title":"预训练时加载huggingface T5模型报错","user":{"login":"fade-color","id":50774720,"node_id":"MDQ6VXNlcjUwNzc0NzIw","avatar_url":"https://avatars.githubusercontent.com/u/50774720?v=4","gravatar_id":"","url":"https://api.github.com/users/fade-color","html_url":"https://github.com/fade-color","followers_url":"https://api.github.com/users/fade-color/followers","following_url":"https://api.github.com/users/fade-color/following{/other_user}","gists_url":"https://api.github.com/users/fade-color/gists{/gist_id}","starred_url":"https://api.github.com/users/fade-color/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fade-color/subscriptions","organizations_url":"https://api.github.com/users/fade-color/orgs","repos_url":"https://api.github.com/users/fade-color/repos","events_url":"https://api.github.com/users/fade-color/events{/privacy}","received_events_url":"https://api.github.com/users/fade-color/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-07-02T11:51:16Z","updated_at":"2022-07-15T09:05:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"使用经过脚本转换后的huggingface上的mengzi-t5-base模型时报错：\r\n```\r\nRuntimeError: Error(s) in loading state_dict for Model:\r\n        size mismatch for embedding.word_embedding.weight: copying a param with shape torch.Size([32128, 768]) from checkpoint, the shape in current model is torch.Size([32028, 768]).\r\n        size mismatch for tgt_embedding.word_embedding.weight: copying a param with shape torch.Size([32128, 768]) from checkpoint, the shape in current model is torch.Size([32028, 768]).\r\n        size mismatch for target.output_layer.weight: copying a param with shape torch.Size([32128, 768]) from checkpoint, the shape in current model is torch.Size([32028, 768]).\r\n```\r\n参数：\r\n```\r\npython3 pretrain.py --dataset_path data/dataset.pt \\\r\n                    --pretrained_model_path pretrained_model.bin \\\r\n                    --spm_model_path models/Langboat/mengzi-t5-base/spiece.model \\\r\n                    --vocab_path models/Langboat/mengzi-t5-base/spiece.vocab \\\r\n                    --config_path models/t5-v1_1/base_config.json \\\r\n                    --output_model_path output_model.bin \\\r\n                    --world_size 2 --gpu_ranks 0 1 \\\r\n                    --learning_rate 3e-5 --batch_size 8 \\\r\n                    --span_masking --span_geo_prob 0.3 --span_max_length 5 \\\r\n                    --data_processor t5 \\\r\n                    --embedding word --relative_position_embedding --remove_embedding_layernorm --tgt_embedding word --share_embedding \\\r\n                    --encoder transformer --mask fully_visible --decoder transformer \\\r\n                    --layernorm_positioning pre --layernorm t5 --feed_forward gated --remove_attention_scale --remove_transformer_bias \\\r\n                    --target lm\r\n```\r\n请问是哪里的问题呢，感谢","closed_by":null,"reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dbiir/UER-py/issues/328/timeline","performed_via_github_app":null,"state_reason":null}