{"url":"https://api.github.com/repos/dbiir/UER-py/issues/110","repository_url":"https://api.github.com/repos/dbiir/UER-py","labels_url":"https://api.github.com/repos/dbiir/UER-py/issues/110/labels{/name}","comments_url":"https://api.github.com/repos/dbiir/UER-py/issues/110/comments","events_url":"https://api.github.com/repos/dbiir/UER-py/issues/110/events","html_url":"https://github.com/dbiir/UER-py/issues/110","id":800965281,"node_id":"MDU6SXNzdWU4MDA5NjUyODE=","number":110,"title":"generate.py: error: argument --encoder: invalid choice: 'gpt'","user":{"login":"SefaZeng","id":13918630,"node_id":"MDQ6VXNlcjEzOTE4NjMw","avatar_url":"https://avatars.githubusercontent.com/u/13918630?v=4","gravatar_id":"","url":"https://api.github.com/users/SefaZeng","html_url":"https://github.com/SefaZeng","followers_url":"https://api.github.com/users/SefaZeng/followers","following_url":"https://api.github.com/users/SefaZeng/following{/other_user}","gists_url":"https://api.github.com/users/SefaZeng/gists{/gist_id}","starred_url":"https://api.github.com/users/SefaZeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SefaZeng/subscriptions","organizations_url":"https://api.github.com/users/SefaZeng/orgs","repos_url":"https://api.github.com/users/SefaZeng/repos","events_url":"https://api.github.com/users/SefaZeng/events{/privacy}","received_events_url":"https://api.github.com/users/SefaZeng/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-02-04T06:07:53Z","updated_at":"2021-02-04T11:12:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I try to use the **MixedCorpus+GptEncoder+LmTarget** model for generate some text like GPT2. And I followed the example scripts like\r\n```\r\npython3 scripts/generate.py --pretrained_model_path models/gpt_model.bin --vocab_path models/google_zh_vocab.txt \r\n                            --input_path story_beginning.txt --output_path story_full.txt --config_path models/bert_base_config.json \r\n                            --encoder gpt --target lm --seq_length 128  \r\n```\r\nThen it raise an error `generate.py: error: argument --encoder: invalid choice: 'gpt'`\r\nIt seems there are some codes mismatch because there is no such encoder type called gpt in UER code.\r\nIn addition to this, there are also something wrong with the pretrain scripts for GPT and the release GPT model from **MixedCorpus+GptEncoder+LmTarget**.\r\nSome features in the pretrain scripts like \r\n`--embedding word_pos --remove_embedding_layernorm --layernorm_positioning pre`\r\nneed to be droped if you wanna finetune the **MixedCorpus+GptEncoder+LmTarget** model. \r\nAnd you need add another args `--has_lmtarget_bias`\r\nMaybe you guys make some other scripts in the pretrain stage.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/dbiir/UER-py/issues/110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dbiir/UER-py/issues/110/timeline","performed_via_github_app":null,"state_reason":null}