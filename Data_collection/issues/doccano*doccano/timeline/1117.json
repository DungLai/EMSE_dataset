[{"url":"https://api.github.com/repos/doccano/doccano/issues/comments/747381448","html_url":"https://github.com/doccano/doccano/issues/1117#issuecomment-747381448","issue_url":"https://api.github.com/repos/doccano/doccano/issues/1117","id":747381448,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NzM4MTQ0OA==","user":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false},"created_at":"2020-12-17T11:25:54Z","updated_at":"2020-12-17T11:25:54Z","author_association":"NONE","body":"Made modest progress by using jwilder/nginx-proxy and the companion LE container. The domain is now SSL-enabled but I now run into a 500 error.\r\n\r\nI think this is the relevant error:\r\n[warn] 18#18: no resolver defined to resolve r3.o.lencr.org while requesting c\r\nertificate status, responder: r3.o.lencr.org, certificate: \"/etc/nginx/certs/your.domain.com.crt\"\r\n\r\n```\r\nversion: \"3.7\"\r\nservices:\r\n\r\n  backend:\r\n    build: ./app\r\n    command: [\"/app/tools/run.sh\"]\r\n    volumes:\r\n      - static_volume:/app/staticfiles\r\n    environment:\r\n      ADMIN_USERNAME: \"admin\"\r\n      ADMIN_PASSWORD: \"pw\"\r\n      ADMIN_EMAIL: \"example@gmail.com\"\r\n      DATABASE_URL: \"postgres://doccano:doccano@postgres:5432/doccano?sslmode=disable\"\r\n      ALLOW_SIGNUP: \"False\"\r\n      DEBUG: \"False\"\r\n      SESSION_COOKIE_SECURE: \"True\"\r\n      CSRF_COOKIE_SECURE: \"True\"\r\n      CSRF_TRUSTED_ORIGINS: \"your.domain.com\"\r\n      VIRTUAL_HOST: \"your.domain.com\"\r\n      VIRTUAL_PORT: 8000\r\n      LETSENCRYPT_HOST: \"your.domain.com\"\r\n      LETSENCRYPT_EMAIL: \"example@gmail.com\"\r\n    depends_on:\r\n      - postgres\r\n    expose:\r\n      - 80\r\n      - 8000\r\n    networks:\r\n      - network-backend\r\n      - network-frontend\r\n\r\n  frontend:\r\n    build: ./frontend\r\n    environment:\r\n      API_URL: \"http://backend:8000\"\r\n      GOOGLE_TRACKING_ID: \"\"\r\n    volumes:\r\n      - www:/app/dist\r\n\r\n  nginx-proxy:\r\n    build: nginx\r\n    container_name: nginx-proxy\r\n    volumes:\r\n      - www:/var/www/html:ro\r\n      - static_volume:/static\r\n      - vhost:/etc/nginx/vhost.d\r\n      - html:/usr/share/nginx/html\r\n      - certs:/etc/nginx/certs:ro\r\n      - conf:/etc/nginx/conf.d\r\n    labels:\r\n      - \"com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy\"\r\n    ports:\r\n      - 80:80\r\n      - 443:443\r\n    depends_on:\r\n      - backend\r\n    networks:\r\n      - network-frontend\r\n      - proxy-tier\r\n\r\n  docker-gen:\r\n    image: jwilder/docker-gen\r\n    container_name: nginx-proxy-gen\r\n    command: -notify-sighup nginx-proxy -watch /etc/docker-gen/templates/nginx.tmpl /etc/nginx/conf.d/default.conf\r\n    volumes_from:\r\n      - nginx-proxy\r\n    volumes:\r\n      - ./nginx.tmpl:/etc/docker-gen/templates/nginx.tmpl:ro\r\n      - /var/run/docker.sock:/tmp/docker.sock:ro\r\n    labels:\r\n      - \"com.github.jrcs.letsencrypt_nginx_proxy_companion.docker_gen\"\r\n    environment:\r\n      NGINX_PROXY_CONTAINER: \"nginx-proxy\"\r\n    networks:\r\n      - network-frontend\r\n      - proxy-tier\r\n\r\n  letsencrypt:\r\n    image: jrcs/letsencrypt-nginx-proxy-companion\r\n    container_name: nginx-proxy-le\r\n    volumes_from:\r\n      - nginx-proxy\r\n    volumes:\r\n      - certs:/etc/nginx/certs:rw\r\n      - acme:/etc/acme.sh\r\n      - /var/run/docker.sock:/var/run/docker.sock:ro\r\n    environment:\r\n      NGINX_DOCKER_GEN_CONTAINER: \"nginx-proxy-gen\"\r\n      LETSENCRYPT_TEST: \"False\"\r\n      DEBUG: 1\r\n    networks:\r\n      - proxy-tier\r\n\r\n\r\n  postgres:\r\n    image: postgres:13.1-alpine\r\n    volumes:\r\n      - postgres_data:/var/lib/postgresql/data/\r\n    environment:\r\n      POSTGRES_USER: \"doccano\"\r\n      POSTGRES_PASSWORD: \"doccano\"\r\n      POSTGRES_DB: \"doccano\"\r\n    networks:\r\n      - network-backend\r\n\r\nvolumes:\r\n  postgres_data:\r\n  static_volume:\r\n  www:\r\n  vhost:\r\n  html:\r\n  certs:\r\n  acme:\r\n  conf:\r\n\r\nnetworks:\r\n  network-backend:\r\n  network-frontend:\r\n  proxy-tier:\r\n    external:\r\n```\r\nThanks!","reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/comments/747381448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false}},{"id":4127643635,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxMjc2NDM2MzU=","url":"https://api.github.com/repos/doccano/doccano/issues/events/4127643635","actor":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-18T00:40:12Z","label":{"name":"feature request","color":"FBC904"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/doccano/doccano/issues/comments/748748844","html_url":"https://github.com/doccano/doccano/issues/1117#issuecomment-748748844","issue_url":"https://api.github.com/repos/doccano/doccano/issues/1117","id":748748844,"node_id":"MDEyOklzc3VlQ29tbWVudDc0ODc0ODg0NA==","user":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false},"created_at":"2020-12-21T04:23:33Z","updated_at":"2020-12-21T04:23:33Z","author_association":"NONE","body":"For anyone googling in future: finally solved by putting traefik in front of nginx. Traefik has SSL enabled by default, just needs a few more settings, and nginx does the routing with the default config file.","reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/comments/748748844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false}},{"id":4134219146,"node_id":"MDExOkNsb3NlZEV2ZW50NDEzNDIxOTE0Ng==","url":"https://api.github.com/repos/doccano/doccano/issues/events/4134219146","actor":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-12-21T04:23:34Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/doccano/doccano/issues/comments/748771720","html_url":"https://github.com/doccano/doccano/issues/1117#issuecomment-748771720","issue_url":"https://api.github.com/repos/doccano/doccano/issues/1117","id":748771720,"node_id":"MDEyOklzc3VlQ29tbWVudDc0ODc3MTcyMA==","user":{"login":"kuraga","id":1063219,"node_id":"MDQ6VXNlcjEwNjMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1063219?v=4","gravatar_id":"","url":"https://api.github.com/users/kuraga","html_url":"https://github.com/kuraga","followers_url":"https://api.github.com/users/kuraga/followers","following_url":"https://api.github.com/users/kuraga/following{/other_user}","gists_url":"https://api.github.com/users/kuraga/gists{/gist_id}","starred_url":"https://api.github.com/users/kuraga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kuraga/subscriptions","organizations_url":"https://api.github.com/users/kuraga/orgs","repos_url":"https://api.github.com/users/kuraga/repos","events_url":"https://api.github.com/users/kuraga/events{/privacy}","received_events_url":"https://api.github.com/users/kuraga/received_events","type":"User","site_admin":false},"created_at":"2020-12-21T05:43:00Z","updated_at":"2020-12-21T05:43:00Z","author_association":"CONTRIBUTOR","body":"@eizanendoso let's add to FAQ?","reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/comments/748771720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kuraga","id":1063219,"node_id":"MDQ6VXNlcjEwNjMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1063219?v=4","gravatar_id":"","url":"https://api.github.com/users/kuraga","html_url":"https://github.com/kuraga","followers_url":"https://api.github.com/users/kuraga/followers","following_url":"https://api.github.com/users/kuraga/following{/other_user}","gists_url":"https://api.github.com/users/kuraga/gists{/gist_id}","starred_url":"https://api.github.com/users/kuraga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kuraga/subscriptions","organizations_url":"https://api.github.com/users/kuraga/orgs","repos_url":"https://api.github.com/users/kuraga/repos","events_url":"https://api.github.com/users/kuraga/events{/privacy}","received_events_url":"https://api.github.com/users/kuraga/received_events","type":"User","site_admin":false}},{"id":4134379543,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDEzNDM3OTU0Mw==","url":"https://api.github.com/repos/doccano/doccano/issues/events/4134379543","actor":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-21T05:43:00Z","performed_via_github_app":null},{"id":4134379547,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxMzQzNzk1NDc=","url":"https://api.github.com/repos/doccano/doccano/issues/events/4134379547","actor":{"login":"eizanendoso","id":19331833,"node_id":"MDQ6VXNlcjE5MzMxODMz","avatar_url":"https://avatars.githubusercontent.com/u/19331833?v=4","gravatar_id":"","url":"https://api.github.com/users/eizanendoso","html_url":"https://github.com/eizanendoso","followers_url":"https://api.github.com/users/eizanendoso/followers","following_url":"https://api.github.com/users/eizanendoso/following{/other_user}","gists_url":"https://api.github.com/users/eizanendoso/gists{/gist_id}","starred_url":"https://api.github.com/users/eizanendoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eizanendoso/subscriptions","organizations_url":"https://api.github.com/users/eizanendoso/orgs","repos_url":"https://api.github.com/users/eizanendoso/repos","events_url":"https://api.github.com/users/eizanendoso/events{/privacy}","received_events_url":"https://api.github.com/users/eizanendoso/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-21T05:43:00Z","performed_via_github_app":null}]