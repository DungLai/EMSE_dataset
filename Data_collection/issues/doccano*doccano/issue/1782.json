{"url":"https://api.github.com/repos/doccano/doccano/issues/1782","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1782/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1782/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1782/events","html_url":"https://github.com/doccano/doccano/issues/1782","id":1203804561,"node_id":"I_kwDOB-j9wM5HwJmR","number":1782,"title":"Unable to use Docker Compose - Issue confirming certificate when fetching 'https://pypi.org/simple/pip/'","user":{"login":"samy-mahmoudi","id":40919691,"node_id":"MDQ6VXNlcjQwOTE5Njkx","avatar_url":"https://avatars.githubusercontent.com/u/40919691?v=4","gravatar_id":"","url":"https://api.github.com/users/samy-mahmoudi","html_url":"https://github.com/samy-mahmoudi","followers_url":"https://api.github.com/users/samy-mahmoudi/followers","following_url":"https://api.github.com/users/samy-mahmoudi/following{/other_user}","gists_url":"https://api.github.com/users/samy-mahmoudi/gists{/gist_id}","starred_url":"https://api.github.com/users/samy-mahmoudi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samy-mahmoudi/subscriptions","organizations_url":"https://api.github.com/users/samy-mahmoudi/orgs","repos_url":"https://api.github.com/users/samy-mahmoudi/repos","events_url":"https://api.github.com/users/samy-mahmoudi/events{/privacy}","received_events_url":"https://api.github.com/users/samy-mahmoudi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-04-13T21:22:37Z","updated_at":"2022-09-10T04:10:17Z","closed_at":"2022-05-09T17:04:41Z","author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the behaviour:\r\n---------\r\n* docker-compose -f docker/docker-compose.prod.yml up\r\n* docker-compose -f docker/docker-compose.prod.yml build --no-cache\r\n```\r\nSetting up odbcinst (2.3.6-0.1) ...\r\nSetting up odbcinst1debian2:amd64 (2.3.6-0.1) ...\r\nSetting up unixodbc-dev:amd64 (2.3.6-0.1) ...\r\nProcessing triggers for libc-bin (2.28-10) ...\r\nRequirement already satisfied: pip in /usr/local/lib/python3.8/site-packages (21.2.4)\r\nWARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))': /simple/pip/                                                                                                                                                                  \r\nWARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))': /simple/pip/                                                                                                                                                                  \r\nWARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))': /simple/pip/                                                                                                                                                                  \r\nWARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))': /simple/pip/                                                                                                                                                                  \r\nWARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))': /simple/pip/                                                                                                                                                                  \r\nCould not fetch URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host='pypi.org', port=443): Max retries exceeded with url: /simple/pip/ (Caused by SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))) - skipping\r\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv                                                                                                                                                               \r\nCould not fetch URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host='pypi.org', port=443): Max retries exceeded with url: /simple/pip/ (Caused by SSLError(SSLError(1, '[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:1131)'))) - skipping\r\ncurl: (35) error:1408F10B:SSL routines:ssl3_get_record:wrong version number\r\n/bin/sh: 1: poetry: not found                                                                                                                                                                 \r\nERROR: Service 'celery' failed to build: The command '/bin/sh -c apt-get update  && apt-get install -y --no-install-recommends     netcat=1.*     libpq-dev=11.*     unixodbc-dev=2.*     g++=4:*     curl  && pip install --upgrade pip  && curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -  && PATH=\"${PATH}:$HOME/.poetry/bin\"  && poetry config virtualenvs.create false  && poetry install --no-dev --no-root  && poetry add psycopg2-binary  && apt-get clean  && rm -rf /var/lib/apt/lists/*' returned a non-zero code: 127\r\n```\r\n\r\nMy Environment:\r\n---------\r\n*   Operating System:\r\n```\r\nsamy@focal:/home/samy/repositories/doccano$ cat /etc/lsb-release\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=20.04\r\nDISTRIB_CODENAME=focal\r\nDISTRIB_DESCRIPTION=\"Ubuntu 20.04.4 LTS\"\r\n```\r\n*   Python Version Used: 3.8 (seemingly):\r\n```\r\nRequirement already satisfied: pip in /usr/local/lib/python3.8/site-packages (21.2.4)\r\n```\r\n\r\n*   When (did) you install doccano: After pulling the last changes:\r\n```\r\ncommit f27c42810a9b68d3bf82b697fda3b2c2c8f72b59 (HEAD -> master, origin/master, origin/HEAD)\r\nMerge: e9f0603a 80d4a0bf\r\nAuthor: Hiroki Nakayama <hiroki.nakayama.py@gmail.com>\r\nDate:   Wed Apr 13 19:34:06 2022 +0900\r\n\r\n    Merge pull request #1781 from doccano/fix/#1780\r\n    \r\n    Add tmp_file as a volume\r\n```\r\n*   How did you install doccano (Heroku button etc): By cloning the repository and checking out the `master` branch. \r\n","closed_by":{"login":"samy-mahmoudi","id":40919691,"node_id":"MDQ6VXNlcjQwOTE5Njkx","avatar_url":"https://avatars.githubusercontent.com/u/40919691?v=4","gravatar_id":"","url":"https://api.github.com/users/samy-mahmoudi","html_url":"https://github.com/samy-mahmoudi","followers_url":"https://api.github.com/users/samy-mahmoudi/followers","following_url":"https://api.github.com/users/samy-mahmoudi/following{/other_user}","gists_url":"https://api.github.com/users/samy-mahmoudi/gists{/gist_id}","starred_url":"https://api.github.com/users/samy-mahmoudi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samy-mahmoudi/subscriptions","organizations_url":"https://api.github.com/users/samy-mahmoudi/orgs","repos_url":"https://api.github.com/users/samy-mahmoudi/repos","events_url":"https://api.github.com/users/samy-mahmoudi/events{/privacy}","received_events_url":"https://api.github.com/users/samy-mahmoudi/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1782/timeline","performed_via_github_app":null,"state_reason":"completed"}