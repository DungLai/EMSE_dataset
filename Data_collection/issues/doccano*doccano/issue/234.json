{"url":"https://api.github.com/repos/doccano/doccano/issues/234","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/234/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/234/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/234/events","html_url":"https://github.com/doccano/doccano/issues/234","id":453696625,"node_id":"MDU6SXNzdWU0NTM2OTY2MjU=","number":234,"title":"Heroku new app deployment failing","user":{"login":"john-dugan","id":11981287,"node_id":"MDQ6VXNlcjExOTgxMjg3","avatar_url":"https://avatars.githubusercontent.com/u/11981287?v=4","gravatar_id":"","url":"https://api.github.com/users/john-dugan","html_url":"https://github.com/john-dugan","followers_url":"https://api.github.com/users/john-dugan/followers","following_url":"https://api.github.com/users/john-dugan/following{/other_user}","gists_url":"https://api.github.com/users/john-dugan/gists{/gist_id}","starred_url":"https://api.github.com/users/john-dugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/john-dugan/subscriptions","organizations_url":"https://api.github.com/users/john-dugan/orgs","repos_url":"https://api.github.com/users/john-dugan/repos","events_url":"https://api.github.com/users/john-dugan/events{/privacy}","received_events_url":"https://api.github.com/users/john-dugan/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-06-07T21:15:28Z","updated_at":"2019-06-08T06:32:47Z","closed_at":"2019-06-08T06:32:47Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nHerkou via https://dashboard.heroku.com/new?template=https://github.com/chakki-works/doccano\r\n- **Python version**: \r\nheroku/python buildpack (3.6.8)\r\n\r\n### Describe the problem\r\n\r\nThe Heroku create app flow is failing at the `ls ./static/bundle` step in heroku.sh during a brand new app deployment.  \r\n\r\n`ls: cannot access './static/bundle': No such file or directory` \r\n\r\nRemoving the `ls ./static/bundle` line allows the app to successfully deploy on heroku, and if that step isn't relevant anymore I can submit a pull request removing/fixing it.\r\n\r\n\r\n```\r\n\r\n-----> Node.js app detected\r\n       \r\n-----> Creating runtime environment\r\n       \r\n       NPM_CONFIG_LOGLEVEL=error\r\n       NODE_ENV=production\r\n       NODE_MODULES_CACHE=true\r\n       NODE_VERBOSE=false\r\n       \r\n-----> Installing binaries\r\n       engines.node (package.json):  8.x\r\n       engines.npm (package.json):   unspecified (use default)\r\n       \r\n       Resolving node version 8.x...\r\n       Downloading and installing node 8.16.0...\r\n       Using default npm version: 6.4.1\r\n       \r\n-----> Installing dependencies\r\n       Installing node modules (package.json)\r\n       up to date in 0.49s\r\n       found 0 vulnerabilities\r\n       \r\n       \r\n-----> Build\r\n       Running heroku-postbuild\r\n       \r\n       > @ heroku-postbuild /tmp/build_d09457687117af539176b710a5db0835\r\n       > sh tools/heroku.sh build\r\n       \r\n       \r\n       > swiper@4.3.3 postinstall /tmp/build_d09457687117af539176b710a5db0835/app/server/static/node_modules/swiper\r\n       > node -e \"console.log('\\u001b[35m\\u001b[1mLove Swiper? Support Vladimir\\'s work by donating or pledging on patreon:\\u001b[22m\\u001b[39m\\n > \\u001b[32mhttps://patreon.com/vladimirkharlampidi\\u001b[0m\\n')\"\r\n       \r\n       Love Swiper? Support Vladimir's work by donating or pledging on patreon:\r\n        > https://patreon.com/vladimirkharlampidi\r\n       \r\n       added 54 packages from 326 contributors and audited 8430 packages in 8.086s\r\n       found 20 vulnerabilities (16 moderate, 4 high)\r\n         run `npm audit fix` to fix them, or `npm audit` for details\r\n       \r\n       > husky@0.13.4 install /tmp/build_d09457687117af539176b710a5db0835/app/server/static/node_modules/husky\r\n       > node ./bin/install.js\r\n       \r\n       husky\r\n       setting up hooks\r\n       Can't find .git directory, skipping Git hooks installation\r\n       added 910 packages from 495 contributors and audited 8430 packages in 26.165s\r\n       found 20 vulnerabilities (16 moderate, 4 high)\r\n         run `npm audit fix` to fix them, or `npm audit` for details\r\n       Hash: c8b9653f73fa11a7b580\r\n       Version: webpack 4.12.0\r\n       Time: 32119ms\r\n       Built at: 2019-06-07 15:11:50\r\n                                 Asset      Size  Chunks                    Chunk Names\r\n                          guideline.js  1020 KiB       9  [emitted]  [big]  guideline\r\n         upload_text_classification.js  3.07 MiB       0  [emitted]  [big]  upload_text_classification\r\n                     upload_seq2seq.js  3.07 MiB       2  [emitted]  [big]  upload_seq2seq\r\n                              stats.js  3.41 MiB       3  [emitted]  [big]  stats\r\n                  sequence_labeling.js  3.15 MiB       4  [emitted]  [big]  sequence_labeling\r\n                            seq2seq.js   3.1 MiB       5  [emitted]  [big]  seq2seq\r\n                           projects.js   923 KiB       6  [emitted]  [big]  projects\r\n                              label.js   936 KiB       7  [emitted]  [big]  label\r\n                              index.js   656 KiB       8  [emitted]  [big]  index\r\n           upload_sequence_labeling.js  3.07 MiB       1  [emitted]  [big]  upload_sequence_labeling\r\n       download_text_classification.js  3.07 MiB      10  [emitted]  [big]  download_text_classification\r\n         download_sequence_labeling.js  3.07 MiB      11  [emitted]  [big]  download_sequence_labeling\r\n                   download_seq2seq.js  3.07 MiB      12  [emitted]  [big]  download_seq2seq\r\n            document_classification.js  3.13 MiB      13  [emitted]  [big]  document_classification\r\n                   demo_translation.js   949 KiB      14  [emitted]  [big]  demo_translation\r\n           demo_text_classification.js   978 KiB      15  [emitted]  [big]  demo_text_classification\r\n                  demo_named_entity.js   990 KiB      16  [emitted]  [big]  demo_named_entity\r\n                            dataset.js   127 KiB      17  [emitted]         dataset\r\n       Entrypoint dataset = dataset.js\r\n       Entrypoint demo_named_entity [big] = demo_named_entity.js\r\n       Entrypoint demo_text_classification [big] = demo_text_classification.js\r\n       Entrypoint demo_translation [big] = demo_translation.js\r\n       Entrypoint document_classification [big] = document_classification.js\r\n       Entrypoint download_seq2seq [big] = download_seq2seq.js\r\n       Entrypoint download_sequence_labeling [big] = download_sequence_labeling.js\r\n       Entrypoint download_text_classification [big] = download_text_classification.js\r\n       Entrypoint guideline [big] = guideline.js\r\n       Entrypoint index [big] = index.js\r\n       Entrypoint label [big] = label.js\r\n       Entrypoint projects [big] = projects.js\r\n       Entrypoint seq2seq [big] = seq2seq.js\r\n       Entrypoint sequence_labeling [big] = sequence_labeling.js\r\n       Entrypoint stats [big] = stats.js\r\n       Entrypoint upload_seq2seq [big] = upload_seq2seq.js\r\n       Entrypoint upload_sequence_labeling [big] = upload_sequence_labeling.js\r\n       Entrypoint upload_text_classification [big] = upload_text_classification.js\r\n       [366] ./pages/index.js + 3 modules 249 KiB {8} [built]\r\n             | ./pages/index.js 744 bytes [built]\r\n             |     + 3 hidden modules\r\n       [367] ./pages/seq2seq.js + 5 modules 11.8 KiB {5} [built]\r\n             | ./pages/seq2seq.js 197 bytes [built]\r\n             |     + 5 hidden modules\r\n       [368] ./pages/document_classification.js + 5 modules 11.2 KiB {13} [built]\r\n             | ./pages/document_classification.js 297 bytes [built]\r\n             |     + 5 hidden modules\r\n       [369] ./pages/label.js + 5 modules 14.5 KiB {7} [built]\r\n             | ./pages/label.js 157 bytes [built]\r\n             |     + 5 hidden modules\r\n       [370] ./pages/download_seq2seq.js + 5 modules 3.7 KiB {12} [built]\r\n             | ./pages/download_seq2seq.js 195 bytes [built]\r\n             |     + 5 hidden modules\r\n       [371] ./pages/download_sequence_labeling.js + 5 modules 3.25 KiB {11} [built]\r\n             | ./pages/download_sequence_labeling.js 232 bytes [built]\r\n             |     + 5 hidden modules\r\n       [372] ./pages/demo_translation.js + 5 modules 11.2 KiB {14} [built]\r\n             | ./pages/demo_translation.js 235 bytes [built]\r\n             |     + 5 hidden modules\r\n       [373] ./pages/upload_seq2seq.js + 5 modules 5.22 KiB {2} [built]\r\n             | ./pages/upload_seq2seq.js 187 bytes [built]\r\n             |     + 5 hidden modules\r\n       [374] ./pages/projects.js + 5 modules 11.1 KiB {6} [built]\r\n             | ./pages/projects.js 171 bytes [built]\r\n             |     + 5 hidden modules\r\n       [375] ./pages/demo_text_classification.js + 5 modules 10.8 KiB {15} [built]\r\n             | ./pages/demo_text_classification.js 303 bytes [built]\r\n             |     + 5 hidden modules\r\n       [376] ./pages/download_text_classification.js + 5 modules 3.83 KiB {10} [built]\r\n             | ./pages/download_text_classification.js 240 bytes [built]\r\n             |     + 5 hidden modules\r\n       [377] ./pages/upload_sequence_labeling.js + 5 modules 5.52 KiB {1} [built]\r\n             | ./pages/upload_sequence_labeling.js 224 bytes [built]\r\n             |     + 5 hidden modules\r\n       [381] ./pages/demo_named_entity.js + 10 modules 15.4 KiB {16} [built]\r\n             | ./pages/demo_named_entity.js 275 bytes [built]\r\n             |     + 10 hidden modules\r\n       [382] ./pages/sequence_labeling.js + 10 modules 16.2 KiB {4} [built]\r\n             | ./pages/sequence_labeling.js 273 bytes [built]\r\n             |     + 10 hidden modules\r\n       [439] ./pages/dataset.js 333 bytes {17} [built]\r\n           + 425 hidden modules\r\n       \r\n       WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\r\n       This can impact web performance.\r\n       Assets: \r\n         upload_text_classification.js (3.07 MiB)\r\n         upload_sequence_labeling.js (3.07 MiB)\r\n         upload_seq2seq.js (3.07 MiB)\r\n         stats.js (3.41 MiB)\r\n         sequence_labeling.js (3.15 MiB)\r\n         seq2seq.js (3.1 MiB)\r\n         projects.js (923 KiB)\r\n         label.js (936 KiB)\r\n         index.js (656 KiB)\r\n         guideline.js (1020 KiB)\r\n         download_text_classification.js (3.07 MiB)\r\n         download_sequence_labeling.js (3.07 MiB)\r\n         download_seq2seq.js (3.07 MiB)\r\n         document_classification.js (3.13 MiB)\r\n         demo_translation.js (949 KiB)\r\n         demo_text_classification.js (978 KiB)\r\n         demo_named_entity.js (990 KiB)\r\n       \r\n       WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\r\n       Entrypoints:\r\n         demo_named_entity (990 KiB)\r\n             demo_named_entity.js\r\n         demo_text_classification (978 KiB)\r\n             demo_text_classification.js\r\n         demo_translation (949 KiB)\r\n             demo_translation.js\r\n         document_classification (3.13 MiB)\r\n             document_classification.js\r\n         download_seq2seq (3.07 MiB)\r\n             download_seq2seq.js\r\n         download_sequence_labeling (3.07 MiB)\r\n             download_sequence_labeling.js\r\n         download_text_classification (3.07 MiB)\r\n             download_text_classification.js\r\n         guideline (1020 KiB)\r\n             guideline.js\r\n         index (656 KiB)\r\n             index.js\r\n         label (936 KiB)\r\n             label.js\r\n         projects (923 KiB)\r\n             projects.js\r\n         seq2seq (3.1 MiB)\r\n             seq2seq.js\r\n         sequence_labeling (3.15 MiB)\r\n             sequence_labeling.js\r\n         stats (3.41 MiB)\r\n             stats.js\r\n         upload_seq2seq (3.07 MiB)\r\n             upload_seq2seq.js\r\n         upload_sequence_labeling (3.07 MiB)\r\n             upload_sequence_labeling.js\r\n         upload_text_classification (3.07 MiB)\r\n             upload_text_classification.js\r\n       \r\n       \r\n       WARNING in webpack performance recommendations: \r\n       You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\r\n       For more info visit https://webpack.js.org/guides/code-splitting/\r\n       Done webpack build.\r\nls: cannot access './static/bundle': No such file or directory\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 2\r\nnpm ERR! @ heroku-postbuild: `sh tools/heroku.sh build`\r\nnpm ERR! Exit status 2\r\nnpm ERR! \r\nnpm ERR! Failed at the @ heroku-postbuild script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /tmp/npmcache.Y9Shk/_logs/2019-06-07T15_11_50_856Z-debug.log\r\n-----> Build failed\r\n       \r\n       We're sorry this build is failing! You can troubleshoot common issues here:\r\n       https://devcenter.heroku.com/articles/troubleshooting-node-deploys\r\n       \r\n       If you're stuck, please submit a ticket so we can help:\r\n       https://help.heroku.com/\r\n       \r\n       Love,\r\n       Heroku\r\n       \r\n !     Push rejected, failed to compile Node.js app.\r\n !     Push failed\r\n\r\n```","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/234/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/234/timeline","performed_via_github_app":null,"state_reason":"completed"}