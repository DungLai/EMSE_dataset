{"url":"https://api.github.com/repos/doccano/doccano/issues/1015","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1015/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1015/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1015/events","html_url":"https://github.com/doccano/doccano/issues/1015","id":722039253,"node_id":"MDU6SXNzdWU3MjIwMzkyNTM=","number":1015,"title":"User data cannot be preserved on importing an exported dataset","user":{"login":"carsondwilber","id":43151640,"node_id":"MDQ6VXNlcjQzMTUxNjQw","avatar_url":"https://avatars.githubusercontent.com/u/43151640?v=4","gravatar_id":"","url":"https://api.github.com/users/carsondwilber","html_url":"https://github.com/carsondwilber","followers_url":"https://api.github.com/users/carsondwilber/followers","following_url":"https://api.github.com/users/carsondwilber/following{/other_user}","gists_url":"https://api.github.com/users/carsondwilber/gists{/gist_id}","starred_url":"https://api.github.com/users/carsondwilber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carsondwilber/subscriptions","organizations_url":"https://api.github.com/users/carsondwilber/orgs","repos_url":"https://api.github.com/users/carsondwilber/repos","events_url":"https://api.github.com/users/carsondwilber/events{/privacy}","received_events_url":"https://api.github.com/users/carsondwilber/received_events","type":"User","site_admin":false},"labels":[{"id":927327721,"node_id":"MDU6TGFiZWw5MjczMjc3MjE=","url":"https://api.github.com/repos/doccano/doccano/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"Improvement on existing feature"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-10-15T06:28:38Z","updated_at":"2022-09-01T12:09:57Z","closed_at":"2021-04-21T07:19:52Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04.4 LTS\r\n- **Python version**: 2.7.17\r\n\r\n### Describe the problem\r\nYou cannot re-import an exported dataset with user IDs attached.\r\n\r\n### Source code / logs\r\nNo particular source code, but as noted in #217 there is an export option for \"text labels\" (in the format [start_offset, end_offset, \"label\"]). However, since this is the only format which can be imported, user data is not preserved.\r\n\r\nHere's my team's issue: what we did is we changed our label spec based on some revisions in our annotating guidelines. When we uploaded our new spec, of course our old files' annotations broke as the new labels had different IDs. I wrote a handy script for mapping the old spec to the new spec, converted the labels in the old files to use the new IDs, and went to upload --\r\n\r\nBut you can't do that and keep the user IDs. You MUST convert to the \"text label\" format to reupload, and upon doing so, it seems the \"user\" value is always set to 1. When not in collaborative mode, you cannot access these annotations without being signed in to the user with ID 1. This is not optimal as we like to use collaborative mode when doing cross-annotator analysis.\r\n\r\nYou also can't do this because the importer will reject any file which has overlapping annotations. Because the user is the same for all of the annotations, and a user cannot label any portion of the document with multiple annotations, you will receive the generic \"failed to upload\" notification on the import dialog.\r\n\r\nIt seems like the two possible solutions are:\r\n\r\n1. Revise the \"text label\" format to allow (if not require) a fourth value in each tuple which is the user ID, and remove checks for overlapping annotations.\r\n2. Revise the importer to allow the original JSON format (not the \"text label\" format) and ascribe annotations to each user by the user ID included in each annotation, thus avoiding checks for overlapping annotations.\r\n\r\nI'm pressed for time or I would implement this and PR myself, so I figured it would be best to at least make an issue for it.","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1015/timeline","performed_via_github_app":null,"state_reason":"completed"}