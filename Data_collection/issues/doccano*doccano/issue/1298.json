{"url":"https://api.github.com/repos/doccano/doccano/issues/1298","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1298/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1298/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1298/events","html_url":"https://github.com/doccano/doccano/issues/1298","id":854380952,"node_id":"MDU6SXNzdWU4NTQzODA5NTI=","number":1298,"title":"How can i find doccano's  error log. ","user":{"login":"luoqishuai","id":40172595,"node_id":"MDQ6VXNlcjQwMTcyNTk1","avatar_url":"https://avatars.githubusercontent.com/u/40172595?v=4","gravatar_id":"","url":"https://api.github.com/users/luoqishuai","html_url":"https://github.com/luoqishuai","followers_url":"https://api.github.com/users/luoqishuai/followers","following_url":"https://api.github.com/users/luoqishuai/following{/other_user}","gists_url":"https://api.github.com/users/luoqishuai/gists{/gist_id}","starred_url":"https://api.github.com/users/luoqishuai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luoqishuai/subscriptions","organizations_url":"https://api.github.com/users/luoqishuai/orgs","repos_url":"https://api.github.com/users/luoqishuai/repos","events_url":"https://api.github.com/users/luoqishuai/events{/privacy}","received_events_url":"https://api.github.com/users/luoqishuai/received_events","type":"User","site_admin":false},"labels":[{"id":927327721,"node_id":"MDU6TGFiZWw5MjczMjc3MjE=","url":"https://api.github.com/repos/doccano/doccano/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"Improvement on existing feature"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-09T10:09:35Z","updated_at":"2021-10-21T05:54:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Question:\r\nHow can i find doccano's  error log. \r\nI run 'docker logs --tail 200  doccano/nginx/postgres'\r\nThere is no current logging\r\nToday is 2021.04.09. I restart docker containers on 17:47.\r\ndoccano log\r\n```\r\nMaking staticfiles\r\nExecuting collectstatic\r\n\r\n185 static files copied to '/app/staticfiles', 579 post-processed.\r\nInitializing database\r\nOperations to perform:\r\n  Apply all migrations: admin, api, auth, authtoken, contenttypes, sessions, social_django\r\nRunning migrations:\r\n  No migrations to apply.\r\nCreating admin\r\nUser admin already exists.\r\nSetting password for User admin.\r\nStarting django\r\n[2021-03-09 01:14:05 +0000] [395] [INFO] Starting gunicorn 20.0.4\r\n[2021-03-09 01:14:05 +0000] [395] [INFO] Listening at: http://0.0.0.0:8000 (395)\r\n[2021-03-09 01:14:05 +0000] [395] [INFO] Using worker: sync\r\n[2021-03-09 01:14:05 +0000] [397] [INFO] Booting worker with pid: 397\r\n/usr/local/lib/python3.8/site-packages/jose/backends/cryptography_backend.py:18: CryptographyDeprecationWarning: int_from_bytes is deprecated, use int.from_bytes instead\r\n  from cryptography.utils import int_from_bytes, int_to_bytes\r\nMaking staticfiles\r\nInitializing database\r\nOperations to perform:\r\n  Apply all migrations: admin, api, auth, authtoken, contenttypes, sessions, social_django\r\nRunning migrations:\r\n  No migrations to apply.\r\nCreating admin\r\nUser admin already exists.\r\nSetting password for User admin.\r\nStarting django\r\n[2021-03-19 08:11:21 +0000] [394] [INFO] Starting gunicorn 20.0.4\r\n[2021-03-19 08:11:21 +0000] [394] [INFO] Listening at: http://0.0.0.0:8000 (394)\r\n[2021-03-19 08:11:21 +0000] [394] [INFO] Using worker: sync\r\n[2021-03-19 08:11:21 +0000] [396] [INFO] Booting worker with pid: 396\r\n/usr/local/lib/python3.8/site-packages/jose/backends/cryptography_backend.py:18: CryptographyDeprecationWarning: int_from_bytes is deprecated, use int.from_bytes instead\r\n  from cryptography.utils import int_from_bytes, int_to_bytes\r\nMaking staticfiles\r\nInitializing database\r\nOperations to perform:\r\n  Apply all migrations: admin, api, auth, authtoken, contenttypes, sessions, social_django\r\nRunning migrations:\r\n  No migrations to apply.\r\nCreating admin\r\nUser admin already exists.\r\nSetting password for User admin.\r\nStarting django\r\n[2021-04-09 17:47:27 +0800] [394] [INFO] Starting gunicorn 20.0.4\r\n[2021-04-09 17:47:27 +0800] [394] [INFO] Listening at: http://0.0.0.0:8000 (394)\r\n[2021-04-09 17:47:27 +0800] [394] [INFO] Using worker: sync\r\n[2021-04-09 17:47:27 +0800] [396] [INFO] Booting worker with pid: 396\r\n/usr/local/lib/python3.8/site-packages/jose/backends/cryptography_backend.py:18: CryptographyDeprecationWarning: int_from_bytes is deprecated, use int.from_bytes instead\r\n  from cryptography.utils import int_from_bytes, int_to_bytes\r\n```\r\n\r\n\r\nYour Environment\r\n\r\n*   Operating System:ubuntu 18.04\r\n*   Python Version Used:Python 3.8.6\r\n*   When you install doccano: maybe 2021-03\r\n*   How did you install doccano (Heroku button etc):\r\ndocker-compose.yml\r\n```\r\nversion: \"2\"\r\nservices:\r\n\r\n  backend:\r\n    build:\r\n      context: .\r\n      dockerfile: app/Dockerfile.prod\r\n    volumes:\r\n      - /public/application/doccano/static_volume:/app/staticfiles\r\n      - /etc/localtime:/etc/localtime\r\n    environment:\r\n      ADMIN_USERNAME: \"admin\"\r\n      ADMIN_PASSWORD: \"******\"\r\n      ADMIN_EMAIL: \"******\"\r\n      DATABASE_URL: \"postgres://doccano:doccano@postgres:5432/doccano?sslmode=disable\"\r\n      ALLOW_SIGNUP: \"False\"\r\n      DEBUG: \"False\"\r\n    ports:\r\n      - 8000:8000\r\n    depends_on:\r\n      - postgres\r\n    networks:\r\n      - network-backend\r\n      - network-frontend\r\n\r\n  nginx:\r\n    build:\r\n      context: .\r\n      dockerfile: nginx/Dockerfile\r\n    environment:\r\n      API_URL: \"http://backend:8000\"\r\n      GOOGLE_TRACKING_ID: \"\"\r\n    volumes:\r\n      - /public/application/doccano/static_volume:/static\r\n      - /etc/localtime:/etc/localtime\r\n    ports:\r\n      - 80:80\r\n    depends_on:\r\n      - backend\r\n    networks:\r\n      - network-frontend\r\n\r\n  postgres:\r\n    image: postgres:13.1-alpine\r\n    volumes:\r\n      - /public/application/doccano/postgresql:/var/lib/postgresql/data/\r\n      - /etc/localtime:/etc/localtime\r\n    environment:\r\n      POSTGRES_USER: \"doccano\"\r\n      POSTGRES_PASSWORD: \"doccano\"\r\n      POSTGRES_DB: \"doccano\"\r\n    networks:\r\n      - network-backend\r\n    ports:\r\n      - 5432:5432\r\nvolumes:\r\n  postgres_data:\r\n  static_volume:\r\n\r\nnetworks:\r\n  network-backend:\r\n  network-frontend:\r\n```\r\n\r\napp/Dockerfile.prod\r\n```\r\nARG PYTHON_VERSION=\"3.8.6\"\r\nFROM python:${PYTHON_VERSION}-slim-buster\r\n\r\nCMD [\"python3\"]\r\n\r\nWORKDIR /app\r\n\r\nENV PYTHONDONTWRITEBYTECODE 1\r\nENV PYTHONUNBUFFERED 1\r\n\r\nCOPY ./app/ /app/\r\nCOPY ./Pipfile* /app/\r\n\r\n# hadolint ignore=DL3013\r\nRUN sed -i 's#http://deb.debian.org#https://mirrors.ustc.edu.cn#g' /etc/apt/sources.list\r\nRUN sed -i 's|security.debian.org/debian-security|mirrors.ustc.edu.cn/debian-security|g' /etc/apt/sources.list\r\nRUN apt-get update \\\r\n && apt-get install -y --no-install-recommends \\\r\n    netcat=1.10-41.1 \\\r\n    libpq-dev=11.10-0+deb10u1 \\\r\n    unixodbc-dev=2.3.6-0.1 \\\r\n    g++=4:8.3.0-1 \\\r\n && pip install --no-cache-dir pipenv==2020.11.15 -i https://pypi.douban.com/simple/ \\\r\n && pip config set global.index-url https://pypi.douban.com/simple/ \\\r\n && pipenv install --system --deploy \\\r\n && pip uninstall -y pipenv virtualenv-clone virtualenv \\\r\n && apt-get clean \\\r\n && rm -rf /var/lib/apt/lists/*\r\n\r\nCOPY tools/ /opt/bin/\r\n\r\nENTRYPOINT [ \"/opt/bin/run.sh\" ]\r\n```\r\n\r\nnginx/Dockerfile\r\n```\r\nARG NODE_VERSION=\"13.7\"\r\nFROM node:${NODE_VERSION}-alpine AS frontend-builder\r\n\r\nCOPY frontend/ /app/\r\nWORKDIR /app\r\nRUN set -eux && sed -i 's/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g' /etc/apk/repositories\r\nRUN apk add -U --no-cache git python3 make g++ \\\r\n  && yarn install \\\r\n  && yarn build \\\r\n  && apk del --no-cache git make g++\r\n\r\nFROM nginx:1.17.4-alpine AS runtime\r\n\r\nCOPY --from=frontend-builder /app/dist /var/www/html\r\nRUN rm /etc/nginx/conf.d/default.conf\r\nCOPY nginx/nginx.conf /etc/nginx/conf.d\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1298/timeline","performed_via_github_app":null,"state_reason":null}