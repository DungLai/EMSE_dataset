{"url":"https://api.github.com/repos/doccano/doccano/issues/1106","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1106/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1106/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1106/events","html_url":"https://github.com/doccano/doccano/issues/1106","id":761494586,"node_id":"MDU6SXNzdWU3NjE0OTQ1ODY=","number":1106,"title":"Installation via docker-compose fails due to python version conflicts (3.6 vs 3.8 required)","user":{"login":"sally14","id":23744696,"node_id":"MDQ6VXNlcjIzNzQ0Njk2","avatar_url":"https://avatars.githubusercontent.com/u/23744696?v=4","gravatar_id":"","url":"https://api.github.com/users/sally14","html_url":"https://github.com/sally14","followers_url":"https://api.github.com/users/sally14/followers","following_url":"https://api.github.com/users/sally14/following{/other_user}","gists_url":"https://api.github.com/users/sally14/gists{/gist_id}","starred_url":"https://api.github.com/users/sally14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sally14/subscriptions","organizations_url":"https://api.github.com/users/sally14/orgs","repos_url":"https://api.github.com/users/sally14/repos","events_url":"https://api.github.com/users/sally14/events{/privacy}","received_events_url":"https://api.github.com/users/sally14/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-12-10T18:28:30Z","updated_at":"2020-12-11T13:53:31Z","closed_at":"2020-12-10T20:57:32Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Before submitting an issue, make sure to check the docs and closed issues and FAQ to see if any of the solutions work for you. https://github.com/doccano/doccano/wiki/Frequently-Asked-Questions -->\r\n\r\nHello, \r\nFirst, thank you for developing and maintaining Doccano, which is a super-useful ressource. \r\n\r\nWhen trying to install the latest version of doccano via the docker-compose installation, I ran in a bug which forces the backend to exit, due to a python version conflict. \r\n\r\nI first did a canonical docker + docker compose installation (following docker documentation), then, following Doccano documentation :  \r\n\r\n```bash\r\ngit clone https://github.com/doccano/doccano.git\r\ncd doccano\r\ndocker-compose -f docker-compose.prod.yml up\r\n```\r\nI ran into this error: \r\n\r\n```bash\r\nStarting doccano_postgres_1 ... done\r\nStarting doccano_frontend_1 ... done\r\nStarting doccano_backend_1  ... done\r\nStarting doccano_nginx_1    ... done\r\nAttaching to doccano_postgres_1, doccano_frontend_1, doccano_backend_1, doccano_nginx_1\r\nbackend_1   | Making staticfiles\r\nbackend_1   | Executing collectstatic\r\nbackend_1   | Traceback (most recent call last):\r\nbackend_1   |   File \"manage.py\", line 15, in <module>\r\nbackend_1   |     execute_from_command_line(sys.argv)\r\nbackend_1   |   File \"/usr/lib/python3.6/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\r\nbackend_1   |     utility.execute()\r\nbackend_1   |   File \"/usr/lib/python3.6/site-packages/django/core/management/__init__.py\", line 325, in execute\r\nbackend_1   |     settings.INSTALLED_APPS\r\nbackend_1   |   File \"/usr/lib/python3.6/site-packages/django/conf/__init__.py\", line 79, in __getattr__\r\nbackend_1   |     self._setup(name)\r\nbackend_1   |   File \"/usr/lib/python3.6/site-packages/django/conf/__init__.py\", line 66, in _setup\r\nbackend_1   |     self._wrapped = Settings(settings_module)\r\nbackend_1   |   File \"/usr/lib/python3.6/site-packages/django/conf/__init__.py\", line 157, in __init__\r\nbackend_1   |     mod = importlib.import_module(self.SETTINGS_MODULE)\r\nbackend_1   |   File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\nbackend_1   |     return _bootstrap._gcd_import(name[level:], package, level)\r\nbackend_1   |   File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\nbackend_1   |   File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\nbackend_1   |   File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\nbackend_1   |   File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\nbackend_1   |   File \"<frozen importlib._bootstrap_external>\", line 674, in exec_module\r\nbackend_1   |   File \"<frozen importlib._bootstrap_external>\", line 781, in get_code\r\nbackend_1   |   File \"<frozen importlib._bootstrap_external>\", line 741, in source_to_code\r\nbackend_1   |   File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nbackend_1   |   File \"/app/app/settings.py\", line 283\r\nbackend_1   |     if (spec := importlib.util.find_spec(name)) is not None:\r\nbackend_1   |              ^\r\nbackend_1   | SyntaxError: invalid syntax\r\ndoccano_backend_1 exited with code 1\r\ndoccano_frontend_1 exited with code 0\r\n```\r\nIt seems like the python version installed by docker was python 3.6, where, when I checked the main Dockerfile ([doccano/Dockerfile](https://github.com/doccano/doccano/blob/master/Dockerfile)), it should be python 3.8.6 (and manage.py syntax error suggests it is python 3.8). \r\n\r\nMight it be the alpine 3.9.6 version of [doccano/app/Dockerfile](https://github.com/doccano/doccano/blob/master/app/Dockerfile) which has python 3.6.9 by default? ( https://pkgs.alpinelinux.org/package/v3.9/main/x86_64/python3 )\r\n\r\nThank you in advance!\r\n\r\n Environment\r\n---------\r\n<!-- Include details of your environment.-->\r\n*   Operating System: Ubuntu 18.04.5 LTS\r\n*   Python Version Used: 3.6.9 (but I don't use the python installation)\r\n*   When you install doccano: December 10th, 2020\r\n*   How did you install doccano (Heroku button etc): Docker-compose installation\r\n","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1106/timeline","performed_via_github_app":null,"state_reason":"completed"}