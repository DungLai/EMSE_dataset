{"url":"https://api.github.com/repos/doccano/doccano/issues/656","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/656/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/656/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/656/events","html_url":"https://github.com/doccano/doccano/issues/656","id":591579817,"node_id":"MDU6SXNzdWU1OTE1Nzk4MTc=","number":656,"title":"cannot run docker compose the second time","user":{"login":"WiraDKP","id":33952122,"node_id":"MDQ6VXNlcjMzOTUyMTIy","avatar_url":"https://avatars.githubusercontent.com/u/33952122?v=4","gravatar_id":"","url":"https://api.github.com/users/WiraDKP","html_url":"https://github.com/WiraDKP","followers_url":"https://api.github.com/users/WiraDKP/followers","following_url":"https://api.github.com/users/WiraDKP/following{/other_user}","gists_url":"https://api.github.com/users/WiraDKP/gists{/gist_id}","starred_url":"https://api.github.com/users/WiraDKP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WiraDKP/subscriptions","organizations_url":"https://api.github.com/users/WiraDKP/orgs","repos_url":"https://api.github.com/users/WiraDKP/repos","events_url":"https://api.github.com/users/WiraDKP/events{/privacy}","received_events_url":"https://api.github.com/users/WiraDKP/received_events","type":"User","site_admin":false},"labels":[{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-04-01T02:55:48Z","updated_at":"2020-04-01T08:31:33Z","closed_at":"2020-04-01T03:37:32Z","author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the problem\r\n---------\r\nI would like to change username and password, and also the delivery port. Turns out that I could not reinstall the docker anymore. I am not familiar with how docker-compose works.\r\n\r\n1. First install with `docker-compose`\r\n```\r\ngit clone https://github.com/doccano/doccano.git\r\ncd doccano\r\ndocker-compose -f docker-compose.prod.yml up\r\n```\r\n\r\n2. Then stop all containers, remove them, and remove all images\r\n\r\n3. reinstall with `docker-compose` shows this error\r\n```bash\r\nWARNING: Image for service nginx was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.\r\nCreating doccano_postgres_1 ... done\r\nCreating doccano_frontend_1 ... done\r\nCreating doccano_backend_1  ... done\r\nCreating doccano_nginx_1    ... done\r\nAttaching to doccano_postgres_1, doccano_backend_1, doccano_frontend_1, doccano_nginx_1\r\npostgres_1  | 2020-04-01 02:37:32.218 UTC [1] LOG:  starting PostgreSQL 12.0 on x86_64-pc-linux-musl, compiled by gcc (Alpine 8.3.0) 8.3.0, 64-bit\r\npostgres_1  | 2020-04-01 02:37:32.218 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\r\npostgres_1  | 2020-04-01 02:37:32.218 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\r\npostgres_1  | 2020-04-01 02:37:32.223 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\r\npostgres_1  | 2020-04-01 02:37:32.241 UTC [18] LOG:  database system was interrupted; last known up at 2020-04-01 02:19:54 UTC\r\npostgres_1  | 2020-04-01 02:37:32.363 UTC [18] LOG:  database system was not properly shut down; automatic recovery in progress\r\npostgres_1  | 2020-04-01 02:37:32.366 UTC [18] LOG:  redo starts at 0/17799D0\r\npostgres_1  | 2020-04-01 02:37:32.366 UTC [18] LOG:  invalid record length at 0/1779A08: wanted 24, got 0\r\npostgres_1  | 2020-04-01 02:37:32.366 UTC [18] LOG:  redo done at 0/17799D0\r\npostgres_1  | 2020-04-01 02:37:32.380 UTC [1] LOG:  database system is ready to accept connections\r\ndoccano_frontend_1 exited with code 0\r\nbackend_1   | Making staticfiles\r\nbackend_1   | \r\nbackend_1   | 315 static files copied to '/app/staticfiles', 978 post-processed.\r\nbackend_1   | Initializing database\r\nbackend_1   | Operations to perform:\r\nbackend_1   |   Apply all migrations: admin, api, auth, authtoken, contenttypes, sessions, social_django\r\nbackend_1   | Running migrations:\r\nbackend_1   |   No migrations to apply.\r\nbackend_1   |   Your models have changes that are not yet reflected in a migration, and so won't be applied.\r\nbackend_1   |   Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.\r\nbackend_1   | CommandError: Error: That username is already taken.\r\nbackend_1   | Starting django\r\nbackend_1   | [2020-04-01 02:38:09 +0000] [38] [INFO] Starting gunicorn 19.9.0\r\nbackend_1   | [2020-04-01 02:38:09 +0000] [38] [INFO] Listening at: http://0.0.0.0:8000 (38)\r\nbackend_1   | [2020-04-01 02:38:09 +0000] [38] [INFO] Using worker: sync\r\nbackend_1   | [2020-04-01 02:38:09 +0000] [41] [INFO] Booting worker with pid: 41\r\n```\r\n\r\nIt says `database system was interrupted; last known up at` also `CommandError: Error: That username is already taken.`. Are there anything to remove besides the containers and images?\r\n\r\nYour Environment\r\n---------\r\n*   Operating System: Linux\r\n*   When you install doccano: April 1st\r\n*   How did you install doccano (Heroku button etc): docker-compose","closed_by":{"login":"WiraDKP","id":33952122,"node_id":"MDQ6VXNlcjMzOTUyMTIy","avatar_url":"https://avatars.githubusercontent.com/u/33952122?v=4","gravatar_id":"","url":"https://api.github.com/users/WiraDKP","html_url":"https://github.com/WiraDKP","followers_url":"https://api.github.com/users/WiraDKP/followers","following_url":"https://api.github.com/users/WiraDKP/following{/other_user}","gists_url":"https://api.github.com/users/WiraDKP/gists{/gist_id}","starred_url":"https://api.github.com/users/WiraDKP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WiraDKP/subscriptions","organizations_url":"https://api.github.com/users/WiraDKP/orgs","repos_url":"https://api.github.com/users/WiraDKP/repos","events_url":"https://api.github.com/users/WiraDKP/events{/privacy}","received_events_url":"https://api.github.com/users/WiraDKP/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/656/timeline","performed_via_github_app":null,"state_reason":"completed"}