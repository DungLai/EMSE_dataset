{"url":"https://api.github.com/repos/doccano/doccano/issues/1311","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1311/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1311/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1311/events","html_url":"https://github.com/doccano/doccano/issues/1311","id":862753046,"node_id":"MDU6SXNzdWU4NjI3NTMwNDY=","number":1311,"title":"unable to connect to doccano-api client ","user":{"login":"meltedhead","id":33033076,"node_id":"MDQ6VXNlcjMzMDMzMDc2","avatar_url":"https://avatars.githubusercontent.com/u/33033076?v=4","gravatar_id":"","url":"https://api.github.com/users/meltedhead","html_url":"https://github.com/meltedhead","followers_url":"https://api.github.com/users/meltedhead/followers","following_url":"https://api.github.com/users/meltedhead/following{/other_user}","gists_url":"https://api.github.com/users/meltedhead/gists{/gist_id}","starred_url":"https://api.github.com/users/meltedhead/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meltedhead/subscriptions","organizations_url":"https://api.github.com/users/meltedhead/orgs","repos_url":"https://api.github.com/users/meltedhead/repos","events_url":"https://api.github.com/users/meltedhead/events{/privacy}","received_events_url":"https://api.github.com/users/meltedhead/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-04-20T12:13:44Z","updated_at":"2021-04-23T04:15:27Z","closed_at":"2021-04-23T04:15:20Z","author_association":"NONE","active_lock_reason":null,"body":"I have deployed doccano to aws in  a kubernetes cluster and now trying to use the client to upload data from an airflow pipeline but I can't seem to connect with the doccano-client. I am following the instructions but i keep getting an error using mac osx big sur and jupyter notebook to connect:\r\n\r\nfrom doccano_api_client import DoccanoClient\r\n\r\ndoccano_client = DoccanoClient(\r\n    'https://doccano-dev.test.com/', \r\n    os.environ.get('DOCANNO_ADMIN'), \r\n    os.environ.get('DOCANNO_PWD')\r\n)\r\n\r\nI then get the error below\r\n\r\n---------------------------------------------------------------------------\r\nJSONDecodeError                           Traceback (most recent call last)\r\n<ipython-input-100-60f5cf7a0cc5> in <module>\r\n      4     'https://doccano-dev.test.com/',\r\n      5     os.environ.get('DOCANNO_ADMIN'),\r\n----> 6     os.environ.get('DOCANNO_PWD')\r\n      7 )\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/doccano_api_client/__init__.py in __init__(self, baseurl, username, password)\r\n    107         self.baseurl = baseurl if baseurl[-1] == '/' else baseurl+'/'\r\n    108         self.session = requests.Session()\r\n--> 109         self._login(username, password)\r\n    110 \r\n    111     def _login(\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/doccano_api_client/__init__.py in _login(self, username, password)\r\n    125         url = 'v1/auth-token'\r\n    126         auth = {'username': username, 'password': password}\r\n--> 127         response = self.post(url, auth)\r\n    128         token = response['token']\r\n    129         self.session.headers.update(\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/doccano_api_client/__init__.py in post(self, endpoint, data, json, files)\r\n     62         request_url = urljoin(self.baseurl, endpoint)\r\n     63         return self.session.post(\r\n---> 64                 request_url, data=data, files=files, json=json).json()\r\n     65 \r\n     66     def delete(\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/requests/models.py in json(self, **kwargs)\r\n    896                     # used.\r\n    897                     pass\r\n--> 898         return complexjson.loads(self.text, **kwargs)\r\n    899 \r\n    900     @property\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/simplejson/__init__.py in loads(s, encoding, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, use_decimal, **kw)\r\n    523             parse_constant is None and object_pairs_hook is None\r\n    524             and not use_decimal and not kw):\r\n--> 525         return _default_decoder.decode(s)\r\n    526     if cls is None:\r\n    527         cls = JSONDecoder\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/simplejson/decoder.py in decode(self, s, _w, _PY3)\r\n    368         if _PY3 and isinstance(s, bytes):\r\n    369             s = str(s, self.encoding)\r\n--> 370         obj, end = self.raw_decode(s)\r\n    371         end = _w(s, end).end()\r\n    372         if end != len(s):\r\n\r\n~/.pyenv/versions/3.6.10/lib/python3.6/site-packages/simplejson/decoder.py in raw_decode(self, s, idx, _w, _PY3)\r\n    398             elif ord0 == 0xef and s[idx:idx + 3] == '\\xef\\xbb\\xbf':\r\n    399                 idx += 3\r\n--> 400         return self.scan_once(s, idx=_w(s, idx).end())\r\n\r\nJSONDecodeError: Expecting value: line 2 column 1 (char 1)\r\n","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1311/timeline","performed_via_github_app":null,"state_reason":"completed"}