{"url":"https://api.github.com/repos/doccano/doccano/issues/938","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/938/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/938/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/938/events","html_url":"https://github.com/doccano/doccano/issues/938","id":669141618,"node_id":"MDU6SXNzdWU2NjkxNDE2MTg=","number":938,"title":"docker-compose.prod.yml results in doccano_frontend_1 exited with code 0","user":{"login":"leehanchung","id":4794839,"node_id":"MDQ6VXNlcjQ3OTQ4Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4794839?v=4","gravatar_id":"","url":"https://api.github.com/users/leehanchung","html_url":"https://github.com/leehanchung","followers_url":"https://api.github.com/users/leehanchung/followers","following_url":"https://api.github.com/users/leehanchung/following{/other_user}","gists_url":"https://api.github.com/users/leehanchung/gists{/gist_id}","starred_url":"https://api.github.com/users/leehanchung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leehanchung/subscriptions","organizations_url":"https://api.github.com/users/leehanchung/orgs","repos_url":"https://api.github.com/users/leehanchung/repos","events_url":"https://api.github.com/users/leehanchung/events{/privacy}","received_events_url":"https://api.github.com/users/leehanchung/received_events","type":"User","site_admin":false},"labels":[{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-30T19:58:27Z","updated_at":"2020-07-31T02:07:49Z","closed_at":"2020-07-31T02:07:49Z","author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the behaviour\r\n---------\r\n`docker-compose -f docker-compse.prod.yml up`\r\n\r\n---------\r\n<!-- Include details of your environment.-->\r\n*   Operating System: Windows 10, build 20175.rs-prerelease\r\n*   Docker Version: Docker Desktop 2.3.0.4 (46911)\r\n\r\nlog from docker compose\r\n----------\r\n```\r\n(base) PS D:\\user\\doccano> docker-compose -f docker-compose.prod.yml up\r\nCreating network \"doccano_default\" with the default driver\r\nCreating network \"doccano_network-backend\" with the default driver\r\nCreating network \"doccano_network-frontend\" with the default driver\r\nBuilding frontend\r\nStep 1/4 : FROM node:13.7-alpine\r\n ---> b809734bb743\r\nStep 2/4 : WORKDIR /app\r\n ---> Running in aff1626aec23\r\nRemoving intermediate container aff1626aec23\r\n ---> d74123cb3078\r\nStep 3/4 : COPY . /app/\r\n ---> 7c7bf3cc9b96\r\nStep 4/4 : RUN apk add -U --no-cache git python3 make g++   && yarn install   && yarn build   && apk del --no-cache git make g++\r\n ---> Running in fbc1f8b80ade\r\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\r\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\r\n(1/29) Upgrading musl (1.1.24-r0 -> 1.1.24-r2)\r\n(2/29) Upgrading libstdc++ (9.2.0-r3 -> 9.2.0-r4)\r\n(3/29) Installing binutils (2.33.1-r0)\r\n(4/29) Installing gmp (6.1.2-r1)\r\n(5/29) Installing isl (0.18-r0)\r\n(6/29) Installing libgomp (9.2.0-r4)\r\n(7/29) Installing libatomic (9.2.0-r4)\r\n(8/29) Installing mpfr4 (4.0.2-r1)\r\n(9/29) Installing mpc1 (1.1.0-r1)\r\n(10/29) Installing gcc (9.2.0-r4)\r\n(11/29) Installing musl-dev (1.1.24-r2)\r\n(12/29) Installing libc-dev (0.7.2-r0)\r\n(13/29) Installing g++ (9.2.0-r4)\r\n(14/29) Installing ca-certificates (20191127-r2)\r\n(15/29) Installing nghttp2-libs (1.40.0-r1)\r\n(16/29) Installing libcurl (7.67.0-r0)\r\n(17/29) Installing expat (2.2.9-r1)\r\n(18/29) Installing pcre2 (10.34-r1)\r\n(19/29) Installing git (2.24.3-r0)\r\n(20/29) Installing make (4.2.1-r2)\r\n(21/29) Installing libbz2 (1.0.8-r1)\r\n(22/29) Installing libffi (3.2.1-r6)\r\n(23/29) Installing gdbm (1.13-r1)\r\n(24/29) Installing xz-libs (5.2.4-r0)\r\n(25/29) Installing ncurses-terminfo-base (6.1_p20200118-r4)\r\n(26/29) Installing ncurses-libs (6.1_p20200118-r4)\r\n(27/29) Installing readline (8.0.1-r0)\r\n(28/29) Installing sqlite-libs (3.30.1-r2)\r\n(29/29) Installing python3 (3.8.2-r1)\r\nExecuting busybox-1.31.1-r9.trigger\r\nExecuting ca-certificates-20191127-r2.trigger\r\nOK: 246 MiB in 43 packages\r\nyarn install v1.21.1\r\n[1/4] Resolving packages...\r\n[2/4] Fetching packages...\r\nwarning Pattern [\"squire-rte@github:seonim-ryu/Squire#fd40b4e3020845825701e9689f190bab3f4775d4\"] is trying to unpack in the same destination \"/usr/local/share/.cache/yarn/v6/npm-squire-rte-1.9.0/node_modules/squire-rte\" as pattern [\"squire-rte@github:seonim-ryu/Squire#10a470c9dfd07cfb37b06dedc581526b061975e1\"]. This could result in non-deterministic behavior, skipping.\r\nwarning sha.js@2.4.11: Invalid bin entry for \"sha.js\" (in \"sha.js\").\r\ninfo fsevents@2.0.7: The platform \"linux\" is incompatible with this module.\r\ninfo \"fsevents@2.0.7\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo fsevents@2.1.3: The platform \"linux\" is incompatible with this module.\r\ninfo \"fsevents@2.1.3\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\ninfo fsevents@1.2.13: The platform \"linux\" is incompatible with this module.\r\ninfo \"fsevents@1.2.13\" is an optional dependency and failed compatibility check. Excluding it from installation.\r\n[3/4] Linking dependencies...\r\nwarning \"@nuxtjs/vuetify > sass-loader@8.0.2\" has unmet peer dependency \"webpack@^4.36.0 || ^5.0.0\".\r\nwarning \" > vuetify@2.3.4\" has unmet peer dependency \"vue@^2.6.4\".\r\nwarning \"@nuxtjs/vuetify > vuetify-loader@1.6.0\" has unmet peer dependency \"vue-template-compiler@^2.6.10\".\r\nwarning \"@nuxtjs/vuetify > vuetify-loader@1.6.0\" has unmet peer dependency \"webpack@^4.0.0\".\r\nwarning \"@nuxtjs/vuetify > vuetify-loader > file-loader@4.3.0\" has unmet peer dependency \"webpack@^4.0.0\".\r\nwarning \" > @toast-ui/vue-editor@1.1.1\" has unmet peer dependency \"vue@^2.5.0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-async-generators@7.8.4\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-class-properties@7.10.4\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-json-strings@7.8.3\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-nullish-coalescing-operator@7.8.3\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-numeric-separator@7.10.4\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-object-rest-spread@7.8.3\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-optional-catch-binding@7.8.3\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-optional-chaining@7.8.3\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \" > vue-youtube@1.4.0\" has unmet peer dependency \"vue@^2.3.0\".\r\nwarning \"@nuxtjs/eslint-config > eslint-plugin-import@2.19.1\" has incorrect peer dependency \"eslint@2.x - 6.x\".\r\nwarning \" > eslint-plugin-vue@6.2.2\" has incorrect peer dependency \"eslint@^5.0.0 || ^6.0.0\".\r\nwarning \"@nuxtjs/eslint-config > eslint-plugin-unicorn > eslint-template-visitor@1.1.0\" has incorrect peer dependency \"eslint@^6.4.0\".\r\nwarning \"@nuxtjs/eslint-config > eslint-plugin-jest > @typescript-eslint/experimental-utils > @typescript-eslint/typescript-estree > tsutils@3.17.1\" has unmet peer dependency \"typescript@>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta\".\r\nwarning \"@nuxtjs/eslint-module > eslint-loader@4.0.2\" has unmet peer dependency \"webpack@^4.0.0 || ^5.0.0\".\r\nwarning \" > @vue/test-utils@1.0.3\" has unmet peer dependency \"vue@2.x\".\r\nwarning \" > @vue/test-utils@1.0.3\" has unmet peer dependency \"vue-template-compiler@^2.x\".\r\nwarning \" > axios-mock-adapter@1.18.1\" has unmet peer dependency \"axios@>= 0.9.0\".\r\nwarning \" > babel-core@7.0.0-bridge.0\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \" > babel-jest@26.1.0\" has unmet peer dependency \"@babel/core@^7.0.0\".\r\nwarning \"babel-jest > babel-preset-jest@26.1.0\" has unmet peer dependency \"@babel/core@^7.0.0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax@0.1.3\" has unmet peer dependency \"@babel/core@^7.0.0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-bigint@7.8.3\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-import-meta@7.10.4\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \"babel-jest > babel-preset-jest > babel-preset-current-node-syntax > @babel/plugin-syntax-logical-assignment-operators@7.10.4\" has unmet peer dependency \"@babel/core@^7.0.0-0\".\r\nwarning \" > vue-jest@3.0.6\" has unmet peer dependency \"vue@^2.x\".\r\nwarning \" > vue-jest@3.0.6\" has unmet peer dependency \"vue-template-compiler@^2.x\".\r\n[4/4] Building fresh packages...\r\nDone in 48.35s.\r\nyarn run v1.21.1\r\n$ nuxt build\r\nℹ Production build\r\nℹ Bundling only for client side\r\nℹ Target: static\r\n✔ Builder initialized\r\n✔ Nuxt files generated\r\nℹ Compiling Client\r\n\r\n ERROR  (node:252) ExperimentalWarning: Conditional exports is an experimental feature. This feature could change at any time\r\n\r\n✔ Client: Compiled successfully in 23.25s\r\n\r\nHash: 1644f6db1119be39f6ef\r\nVersion: webpack 4.43.0\r\nTime: 23253ms\r\nBuilt at: 07/30/2020 7:52:16 PM\r\n                                                   Asset      Size  Chunks                                Chunk Names\r\n                          ../server/client.manifest.json  49.2 KiB          [emitted]\r\n                                                LICENSES  1.66 KiB          [emitted]\r\n                                          app.1b21ded.js   107 KiB       1  [emitted] [immutable]         app\r\n                             commons/5a35ca0e.b010512.js  20.2 KiB       0  [emitted] [immutable]         commons/5a35ca0e\r\n                                  commons/app.fa153ed.js   194 KiB       2  [emitted] [immutable]         commons/app\r\n                                    img/icon.8612b9c.png  62.4 KiB          [emitted]\r\n                           img/tui-editor-2x.b436124.png  23.9 KiB          [emitted]\r\n                              img/tui-editor.30dd0f5.png  10.6 KiB          [emitted]\r\n                                   pages/auth.0e4ebd8.js  14.6 KiB       3  [emitted] [immutable]         pages/auth\r\n    pages/demo/named-entity-recognition/index.b5158d3.js    12 KiB       4  [emitted] [immutable]         pages/demo/named-entity-recognition/index\r\n          pages/demo/sentiment-analysis/index.5576dc6.js  16.2 KiB       5  [emitted] [immutable]         pages/demo/sentiment-analysis/index\r\n                 pages/demo/text-to-sql/index.fd50392.js  12.4 KiB       6  [emitted] [immutable]         pages/demo/text-to-sql/index\r\n                 pages/demo/translation/index.c94c624.js  12.2 KiB       7  [emitted] [immutable]         pages/demo/translation/index\r\n                                  pages/index.25a60c7.js  7.74 KiB       8  [emitted] [immutable]         pages/index\r\n             pages/projects/_id/dataset/index.109d923.js  12.1 KiB       9  [emitted] [immutable]         pages/projects/_id/dataset/index\r\n           pages/projects/_id/guideline/index.dbbffa8.js  2.17 KiB      10  [emitted] [immutable]         pages/projects/_id/guideline/index\r\n                     pages/projects/_id/index.086bb23.js  14.1 KiB      11  [emitted] [immutable]         pages/projects/_id/index\r\n              pages/projects/_id/labels/index.ffa2b1b.js    12 KiB      12  [emitted] [immutable]         pages/projects/_id/labels/index\r\n             pages/projects/_id/members/index.5401b1e.js  22.1 KiB      13  [emitted] [immutable]         pages/projects/_id/members/index\r\n   pages/projects/_id/sequence-labeling/index.f9be005.js  11.8 KiB      14  [emitted] [immutable]         pages/projects/_id/sequence-labeling/index\r\npages/projects/_id/sequence-to-sequence/index.946d99e.js  12.6 KiB      15  [emitted] [immutable]         pages/projects/_id/sequence-to-sequence/index\r\n          pages/projects/_id/statistics/index.c9963b4.js   6.2 KiB      16  [emitted] [immutable]         pages/projects/_id/statistics/index\r\n pages/projects/_id/text-classification/index.5edd69b.js  18.3 KiB      17  [emitted] [immutable]         pages/projects/_id/text-classification/index\r\n                         pages/projects/index.9e89ea8.js  22.3 KiB      18  [emitted] [immutable]         pages/projects/index\r\n                                      runtime.0f24200.js  3.33 KiB      19  [emitted] [immutable]         runtime\r\n                                  vendors~app.13f6de1.js  2.22 MiB      20  [emitted] [immutable]  [big]  vendors~app\r\n     vendors~pages/projects/_id/dataset/index.8a85d28.js    20 KiB      21  [emitted] [immutable]         vendors~pages/projects/_id/dataset/index\r\n   vendors~pages/projects/_id/guideline/index.61c4df0.js  29.4 KiB      22  [emitted] [immutable]         vendors~pages/projects/_id/guideline/index\r\n      vendors~pages/projects/_id/labels/index.775f7d0.js  41.5 KiB      23  [emitted] [immutable]         vendors~pages/projects/_id/labels/index\r\n  vendors~pages/projects/_id/statistics/index.90dda03.js   435 KiB      24  [emitted] [immutable]  [big]  vendors~pages/projects/_id/statistics/index\r\n + 1 hidden asset\r\nEntrypoint app [big] = runtime.0f24200.js commons/app.fa153ed.js vendors~app.13f6de1.js app.1b21ded.js\r\n\r\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\r\nThis can impact web performance.\r\nAssets:\r\n  vendors~app.13f6de1.js (2.22 MiB)\r\n  vendors~pages/projects/_id/statistics/index.90dda03.js (435 KiB)\r\n\r\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (1000 KiB). This can impact web performance.\r\nEntrypoints:\r\n  app (2.52 MiB)\r\n      runtime.0f24200.js\r\n      commons/app.fa153ed.js\r\n      vendors~app.13f6de1.js\r\n      app.1b21ded.js\r\n\r\nℹ Generating output directory: dist/\r\nℹ Generating pages\r\n✔ Generated route \"/auth\"\r\n✔ Generated route \"/projects\"\r\n✔ Generated route \"/\"\r\n✔ Generated route \"/demo/named-entity-recognition\"\r\n✔ Generated route \"/demo/sentiment-analysis\"\r\n✔ Generated route \"/demo/translation\"\r\n✔ Generated route \"/demo/text-to-sql\"\r\n✔ Client-side fallback created: 200.html\r\nDone in 26.97s.\r\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz\r\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz\r\n(1/17) Purging g++ (9.2.0-r4)\r\n(2/17) Purging gcc (9.2.0-r4)\r\n(3/17) Purging binutils (2.33.1-r0)\r\n(4/17) Purging libatomic (9.2.0-r4)\r\n(5/17) Purging libgomp (9.2.0-r4)\r\n(6/17) Purging libc-dev (0.7.2-r0)\r\n(7/17) Purging musl-dev (1.1.24-r2)\r\n(8/17) Purging git (2.24.3-r0)\r\n(9/17) Purging make (4.2.1-r2)\r\n(10/17) Purging isl (0.18-r0)\r\n(11/17) Purging mpc1 (1.1.0-r1)\r\n(12/17) Purging mpfr4 (4.0.2-r1)\r\n(13/17) Purging gmp (6.1.2-r1)\r\n(14/17) Purging libcurl (7.67.0-r0)\r\n(15/17) Purging ca-certificates (20191127-r2)\r\nExecuting ca-certificates-20191127-r2.post-deinstall\r\n(16/17) Purging nghttp2-libs (1.40.0-r1)\r\n(17/17) Purging pcre2 (10.34-r1)\r\nExecuting busybox-1.31.1-r9.trigger\r\nOK: 66 MiB in 26 packages\r\nRemoving intermediate container fbc1f8b80ade\r\n ---> 27675dba7389\r\n\r\nSuccessfully built 27675dba7389\r\nSuccessfully tagged doccano_frontend:latest\r\nWARNING: Image for service frontend was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.\r\n\r\n... backend and ngnix built log ...\r\n\r\nCreating doccano_postgres_1 ... done\r\nCreating doccano_frontend_1 ... done\r\nCreating doccano_backend_1  ... done\r\nCreating doccano_nginx_1    ... done\r\nAttaching to doccano_postgres_1, doccano_frontend_1, doccano_backend_1, doccano_nginx_1\r\nbackend_1   | Making staticfiles\r\npostgres_1  | 2020-07-30 19:57:04.042 UTC [1] LOG:  starting PostgreSQL 12.0 on x86_64-pc-linux-musl, compiled by gcc (Alpine 8.3.0) 8.3.0, 64-bit\r\npostgres_1  | 2020-07-30 19:57:04.042 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\r\npostgres_1  | 2020-07-30 19:57:04.042 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\r\npostgres_1  | 2020-07-30 19:57:04.046 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\r\npostgres_1  | 2020-07-30 19:57:04.059 UTC [18] LOG:  database system was shut down at 2020-07-30 19:49:37 UTC\r\npostgres_1  | 2020-07-30 19:57:04.063 UTC [1] LOG:  database system is ready to accept connections\r\ndoccano_frontend_1 exited with code 0\r\n\r\n... backend boot log ...\r\n```","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/938/timeline","performed_via_github_app":null,"state_reason":"completed"}