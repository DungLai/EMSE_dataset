{"url":"https://api.github.com/repos/doccano/doccano/issues/1437","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1437/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1437/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1437/events","html_url":"https://github.com/doccano/doccano/issues/1437","id":936890996,"node_id":"MDU6SXNzdWU5MzY4OTA5OTY=","number":1437,"title":"Which response format do i need to use for Auto labeling on multiple examples ?","user":{"login":"EnzoNclt","id":23526246,"node_id":"MDQ6VXNlcjIzNTI2MjQ2","avatar_url":"https://avatars.githubusercontent.com/u/23526246?v=4","gravatar_id":"","url":"https://api.github.com/users/EnzoNclt","html_url":"https://github.com/EnzoNclt","followers_url":"https://api.github.com/users/EnzoNclt/followers","following_url":"https://api.github.com/users/EnzoNclt/following{/other_user}","gists_url":"https://api.github.com/users/EnzoNclt/gists{/gist_id}","starred_url":"https://api.github.com/users/EnzoNclt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EnzoNclt/subscriptions","organizations_url":"https://api.github.com/users/EnzoNclt/orgs","repos_url":"https://api.github.com/users/EnzoNclt/repos","events_url":"https://api.github.com/users/EnzoNclt/events{/privacy}","received_events_url":"https://api.github.com/users/EnzoNclt/received_events","type":"User","site_admin":false},"labels":[{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-05T09:27:44Z","updated_at":"2021-11-12T02:39:37Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the behaviour\r\n---------\r\n<!-- Before submitting an issue, make sure to check the docs and closed issues and FAQ to see if any of the solutions work for you. https://github.com/doccano/doccano/wiki/Frequently-Asked-Questions -->\r\nI am trying to use auto-labeling on multiple files, but my response format does not seems to be the good one. for a single example, it works fine like in the example below.\r\n![Capture d’écran 2021-07-05 à 10 55 11](https://user-images.githubusercontent.com/23526246/124445105-8e205200-dd7f-11eb-99c6-a16875bbdd73.png)\r\n\r\nBut when i try to annotate the same sentences but with separates examples (in textline) instead of one 'big' file, this happens\r\n![Capture d’écran 2021-07-05 à 10 52 05](https://user-images.githubusercontent.com/23526246/124445330-bf008700-dd7f-11eb-82d7-4cf6dce95896.png)\r\n  \r\nOfc my json response format is different for the two examples, the first one is a json with all annotations in a single list, while the second one look like this:\r\n````\r\n{\r\n    \"predict\": [\r\n      {\r\n        \"annotations\": [\r\n          {\r\n            \"id\": \"T00000\",\r\n            \"label\": \"ORG\",\r\n            \"locations\": {\r\n              \"end_offset\": 2,\r\n              \"size\": 2,\r\n              \"start_offset\": 0\r\n            },\r\n            \"proba\": 0.9928516029795982,\r\n            \"surface\": \"EU\"\r\n          },\r\n          {\r\n            \"id\": \"T00001\",\r\n            \"label\": \"NORP\",\r\n            \"locations\": {\r\n              \"end_offset\": 17,\r\n              \"size\": 6,\r\n              \"start_offset\": 11\r\n            },\r\n            \"proba\": 0.9994875804209173,\r\n            \"surface\": \"German\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"annotations\": [\r\n          {\r\n            \"id\": \"T00000\",\r\n            \"label\": \"DATE\",\r\n            \"locations\": {\r\n              \"end_offset\": 19,\r\n              \"size\": 19,\r\n              \"start_offset\": 0\r\n            },\r\n            \"proba\": 0.7791278090533954,\r\n            \"surface\": \"BRUSSELS 1996-08-22\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"annotations\": [\r\n          {\r\n            \"id\": \"T00000\",\r\n            \"label\": \"ORG\",\r\n            \"locations\": {\r\n              \"end_offset\": 23,\r\n              \"size\": 23,\r\n              \"start_offset\": 0\r\n            },\r\n            \"proba\": 1,\r\n            \"surface\": \"The European Commission\"\r\n          },\r\n          {\r\n            \"id\": \"T00001\",\r\n            \"label\": \"DATE\",\r\n            \"locations\": {\r\n              \"end_offset\": 40,\r\n              \"size\": 8,\r\n              \"start_offset\": 32\r\n            },\r\n            \"proba\": 0.9964998775584722,\r\n            \"surface\": \"Thursday\"\r\n          },\r\n          {\r\n            \"id\": \"T00002\",\r\n            \"label\": \"NORP\",\r\n            \"locations\": {\r\n              \"end_offset\": 65,\r\n              \"size\": 6,\r\n              \"start_offset\": 59\r\n            },\r\n            \"proba\": 0.998305021972962,\r\n            \"surface\": \"German\"\r\n          },\r\n          {\r\n            \"id\": \"T00003\",\r\n            \"label\": \"NORP\",\r\n            \"locations\": {\r\n              \"end_offset\": 101,\r\n              \"size\": 7,\r\n              \"start_offset\": 94\r\n            },\r\n            \"proba\": 0.9983327161645421,\r\n            \"surface\": \"British\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"annotations\": [\r\n          {\r\n            \"id\": \"T00000\",\r\n            \"label\": \"GPE\",\r\n            \"locations\": {\r\n              \"end_offset\": 7,\r\n              \"size\": 7,\r\n              \"start_offset\": 0\r\n            },\r\n            \"proba\": 0.9983538772417894,\r\n            \"surface\": \"Germany\"\r\n          },\r\n          {\r\n            \"id\": \"T00001\",\r\n            \"label\": \"ORG\",\r\n            \"locations\": {\r\n              \"end_offset\": 48,\r\n              \"size\": 20,\r\n              \"start_offset\": 28\r\n            },\r\n            \"proba\": 1.0000000000000002,\r\n            \"surface\": \"the European Union's\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n````\r\n\r\nI deleted from the json lot of annotations for clarity reasons, but you got the idea.\r\n\r\nSo, my question is, is there a bug / un-implemented feature in doccano's code which does not allow to automatically annotate several files, or am I just using the wrong response format for multi-examples files ?\r\n\r\n<!--\r\nInclude a code example or the steps that led to the problem. Please try to be as specific as possible. -->\r\n\r\nYour Environment\r\n---------\r\n<!-- Include details of your environment. -->\r\n\r\n*   Operating System: MacOS Darwin \r\n*   Python Version Used: 3.9.5\r\n*   When you install doccano: v1.4.1\r\n*   How did you install doccano (Heroku button etc): pip installation\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1437/timeline","performed_via_github_app":null,"state_reason":null}