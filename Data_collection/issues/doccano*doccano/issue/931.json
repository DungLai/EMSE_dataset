{"url":"https://api.github.com/repos/doccano/doccano/issues/931","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/931/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/931/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/931/events","html_url":"https://github.com/doccano/doccano/issues/931","id":665288599,"node_id":"MDU6SXNzdWU2NjUyODg1OTk=","number":931,"title":"IntegrityError occurs when deploy to Azure","user":{"login":"lune94","id":114554,"node_id":"MDQ6VXNlcjExNDU1NA==","avatar_url":"https://avatars.githubusercontent.com/u/114554?v=4","gravatar_id":"","url":"https://api.github.com/users/lune94","html_url":"https://github.com/lune94","followers_url":"https://api.github.com/users/lune94/followers","following_url":"https://api.github.com/users/lune94/following{/other_user}","gists_url":"https://api.github.com/users/lune94/gists{/gist_id}","starred_url":"https://api.github.com/users/lune94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lune94/subscriptions","organizations_url":"https://api.github.com/users/lune94/orgs","repos_url":"https://api.github.com/users/lune94/repos","events_url":"https://api.github.com/users/lune94/events{/privacy}","received_events_url":"https://api.github.com/users/lune94/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-07-24T16:44:00Z","updated_at":"2021-04-26T03:10:59Z","closed_at":"2021-04-26T03:10:59Z","author_association":"NONE","active_lock_reason":null,"body":"Hi everyone\r\n\r\nI would like to report an issue.\r\n\r\n### System information\r\n- **OS Platform and Distribution Azure Web App Linux container\r\n- **Python version**: 3.6\r\n\r\n### Describe the problem\r\nWe deployed Doccano APP via \"Deploy to Azure\" button on github. The application stopped running 12 days ago. The container cannot run anymore. Here is the webapp log:\r\n2020-07-24T15:44:06.063Z INFO  - **docker run -d -p 9281:8000 --name doccanoapp_0_288079f1 -e PORT=8000 -e WEBSITES_ENABLE_APP_SERVICE_STORAGE=false -e WEBSITES_PORT=8000 -e WEBSITE_SITE_NAME=DoccanoApp -e WEBSITE_AUTH_ENABLED=False -e WEBSITE_ROLE_INSTANCE_ID=0 -e WEBSITE_HOSTNAME=*MYHOSTNAME* -e WEBSITE_INSTANCE_ID=*MY INSTANCE ID* doccano/doccano:latest**  \r\n2020-07-24T15:44:33.539Z ERROR - Container doccanoapp_0_288079f1 for site doccanoapp has exited, failing site start\r\n2020-07-24T15:44:33.549Z ERROR - Container doccanoapp_0_288079f1 didn't respond to HTTP pings on port: 8000, failing site start. See container logs for debugging.\r\n2020-07-24T15:44:33.555Z INFO  - Stopping site doccanoapp because it failed during startup.\r\n\r\n\r\nHere is the container log:\r\n2020-07-24T00:01:33.529636296Z Operations to perform:\r\n2020-07-24T00:01:33.529677899Z   Apply all migrations: admin, api, auth, authtoken, contenttypes, sessions, social_django\r\n2020-07-24T00:01:33.529684799Z Running migrations:\r\n2020-07-24T00:01:33.529689100Z   No migrations to apply.\r\n2020-07-24T00:01:33.529693300Z   Your models have changes that are not yet reflected in a migration, and so won't be applied.\r\n2020-07-24T00:01:33.529697700Z   Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.\r\n2020-07-24T00:01:42.125627948Z Traceback (most recent call last):\r\n2020-07-24T00:01:42.125657550Z   File \"/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py\", line 85, in _execute\r\n2020-07-24T00:01:42.125663151Z     return self.cursor.execute(sql, params)\r\n2020-07-24T00:01:42.125666851Z psycopg2.IntegrityError: duplicate key value violates unique constraint \"auth_user_username_key\"\r\n2020-07-24T00:01:42.125670651Z DETAIL:  Key (username)=(MYLOGIN) already exists.\r\n\r\nThank you for your help","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/931/timeline","performed_via_github_app":null,"state_reason":"completed"}