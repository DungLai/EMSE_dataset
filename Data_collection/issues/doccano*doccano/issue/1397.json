{"url":"https://api.github.com/repos/doccano/doccano/issues/1397","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1397/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1397/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1397/events","html_url":"https://github.com/doccano/doccano/issues/1397","id":910343441,"node_id":"MDU6SXNzdWU5MTAzNDM0NDE=","number":1397,"title":"Upload error","user":{"login":"mehmetilker","id":279289,"node_id":"MDQ6VXNlcjI3OTI4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/279289?v=4","gravatar_id":"","url":"https://api.github.com/users/mehmetilker","html_url":"https://github.com/mehmetilker","followers_url":"https://api.github.com/users/mehmetilker/followers","following_url":"https://api.github.com/users/mehmetilker/following{/other_user}","gists_url":"https://api.github.com/users/mehmetilker/gists{/gist_id}","starred_url":"https://api.github.com/users/mehmetilker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehmetilker/subscriptions","organizations_url":"https://api.github.com/users/mehmetilker/orgs","repos_url":"https://api.github.com/users/mehmetilker/repos","events_url":"https://api.github.com/users/mehmetilker/events{/privacy}","received_events_url":"https://api.github.com/users/mehmetilker/received_events","type":"User","site_admin":false},"labels":[{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-06-03T10:15:53Z","updated_at":"2021-06-03T11:09:08Z","closed_at":"2021-06-03T11:08:58Z","author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the behaviour\r\n---------\r\n-create new env on ubuntu\r\n-install with pip with following (pip installation section)\r\n-start in a shell with \"doccano webserver --port 8000\" and another shell \"doccano task\"\r\n-Try to upload following line as jsonl file (changing column label to labels)\r\n~~~\r\n{\"text\":\"Easily create clusters that run preconfigured open source software. Install using-facing applications like blogs or chat, or sidecars to better operate your own containers.mas\",\"labels\":[[14,28,\"WORK_OF_ART\"]]}\r\n~~~\r\n\r\n-Upload progress finish with success message but I see following error on \"docanno task\" shell:\r\n\r\n~~~\r\n[2021-06-03 10:11:49,748: ERROR/ForkPoolWorker-1] Task api.tasks.injest_data[b2cb8a44-81bc-4391-a85f-2cd19764590b] raised unexpected: TypeError(\"[14, 28, 'WORK_OF_ART'] is not str.\")\r\nTraceback (most recent call last):\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/celery/app/trace.py\", line 450, in trace_task\r\n    R = retval = fun(*args, **kwargs)\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/celery/app/trace.py\", line 731, in __protected_call__\r\n    return self.run(*args, **kwargs)\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/backend/api/tasks.py\", line 111, in injest_data\r\n    example = next(it)\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/backend/api/views/upload/dataset.py\", line 68, in __iter__\r\n    yield from self.load(filename)\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/backend/api/views/upload/dataset.py\", line 187, in load\r\n    yield self.from_row(filename, row, line_num)\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/backend/api/views/upload/dataset.py\", line 114, in from_row\r\n    label = [self.label_class.parse(o) for o in label]\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/backend/api/views/upload/dataset.py\", line 114, in <listcomp>\r\n    label = [self.label_class.parse(o) for o in label]\r\n  File \"/home/projects/test-project/.env/lib/python3.8/site-packages/backend/api/views/upload/label.py\", line 98, in parse\r\n    raise TypeError(f'{obj} is not str.')\r\nTypeError: [14, 28, 'WORK_OF_ART'] is not str.\r\n~~~\r\n\r\n\r\n\r\nYour Environment\r\n---------\r\n<!-- Include details of your environment.-->\r\n*   Operating System: ubuntu 18\r\n*   Python Version Used: 3.8\r\n*   When you install doccano: version 1.4.1\r\n*   How did you install doccano (Heroku button etc): pip\r\n","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1397/timeline","performed_via_github_app":null,"state_reason":"completed"}