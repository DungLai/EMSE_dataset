{"url":"https://api.github.com/repos/doccano/doccano/issues/645","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/645/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/645/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/645/events","html_url":"https://github.com/doccano/doccano/issues/645","id":587488131,"node_id":"MDU6SXNzdWU1ODc0ODgxMzE=","number":645,"title":"How to use & connect mysql client on kubernetes?","user":{"login":"harshmanvar","id":50694399,"node_id":"MDQ6VXNlcjUwNjk0Mzk5","avatar_url":"https://avatars.githubusercontent.com/u/50694399?v=4","gravatar_id":"","url":"https://api.github.com/users/harshmanvar","html_url":"https://github.com/harshmanvar","followers_url":"https://api.github.com/users/harshmanvar/followers","following_url":"https://api.github.com/users/harshmanvar/following{/other_user}","gists_url":"https://api.github.com/users/harshmanvar/gists{/gist_id}","starred_url":"https://api.github.com/users/harshmanvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshmanvar/subscriptions","organizations_url":"https://api.github.com/users/harshmanvar/orgs","repos_url":"https://api.github.com/users/harshmanvar/repos","events_url":"https://api.github.com/users/harshmanvar/events{/privacy}","received_events_url":"https://api.github.com/users/harshmanvar/received_events","type":"User","site_admin":false},"labels":[{"id":927327723,"node_id":"MDU6TGFiZWw5MjczMjc3MjM=","url":"https://api.github.com/repos/doccano/doccano/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"},{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-25T07:08:42Z","updated_at":"2020-05-11T23:03:42Z","closed_at":"2020-05-11T04:44:35Z","author_association":"NONE","active_lock_reason":null,"body":"How to use & connect mysql client ?\r\n---------\r\n\r\n```\r\napiVersion: extensions/v1beta1\r\nkind: Deployment\r\nmetadata:\r\n  labels:\r\n    app: doccano\r\n  name: doccano\r\n  namespace: default\r\nspec:\r\n  progressDeadlineSeconds: 600\r\n  replicas: 1\r\n  revisionHistoryLimit: 10\r\n  selector:\r\n    matchLabels:\r\n      app: doccano\r\n      tier: frontend\r\n  strategy:\r\n    rollingUpdate:\r\n      maxSurge: 25%\r\n      maxUnavailable: 25%\r\n    type: RollingUpdate\r\n  template:\r\n    metadata:\r\n      creationTimestamp: null\r\n      labels:\r\n        app: doccano\r\n        tier: frontend\r\n    spec:\r\n      containers:\r\n      - env:\r\n        - name: ADMIN_USERNAME\r\n          value: admin\r\n        - name: ADMIN_EMAIL\r\n          value: harsh.manvar@xxxx.com\r\n        - name: ADMIN_PASSWORD\r\n          value: admin\r\n        - name: DATABASE_URL\r\n          value: mysql://root:vbvf2lnhxxx@192.168.2.6:3306/doccano\r\n        image: doccano/doccano\r\n        imagePullPolicy: Always\r\n        name: doccano\r\n        ports:\r\n        - containerPort: 8000\r\n          name: http\r\n          protocol: TCP\r\n        - containerPort: 80\r\n          name: https\r\n          protocol: TCP\r\n        resources:\r\n          limits:\r\n            cpu: 200m\r\n            memory: 250Mi\r\n          requests:\r\n            cpu: 150m\r\n            memory: 128Mi\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n      dnsPolicy: ClusterFirst\r\n      restartPolicy: Always\r\n      schedulerName: default-scheduler\r\n      securityContext: {}\r\n      terminationGracePeriodSeconds: 30\r\n```\r\n\r\nerror i am getting:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/backends/mysql/base.py\", line 15, in <module>\r\n    import MySQLdb as Database\r\n  File \"/usr/local/lib/python3.6/site-packages/MySQLdb/__init__.py\", line 18, in <module>\r\n    from . import _mysql\r\nImportError: libmariadbclient.so.18: cannot open shared object file: No such file or directory\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"app/manage.py\", line 15, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py\", line 357, in execute\r\n    django.setup()\r\n  File \"/usr/local/lib/python3.6/site-packages/django/__init__.py\", line 24, in setup\r\n    apps.populate(settings.INSTALLED_APPS)\r\n  File \"/usr/local/lib/python3.6/site-packages/django/apps/registry.py\", line 112, in populate\r\n    app_config.import_models()\r\n  File \"/usr/local/lib/python3.6/site-packages/django/apps/config.py\", line 198, in import_models\r\n    self.models_module = import_module(models_module_name)\r\n  File \"/usr/local/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/usr/local/lib/python3.6/site-packages/django/contrib/auth/models.py\", line 2, in <module>\r\n    from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager\r\n  File \"/usr/local/lib/python3.6/site-packages/django/contrib/auth/base_user.py\", line 47, in <module>\r\n    class AbstractBaseUser(models.Model):\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/models/base.py\", line 101, in __new__\r\n    new_class.add_to_class('_meta', Options(meta, app_label))\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/models/base.py\", line 305, in add_to_class\r\n    value.contribute_to_class(cls, name)\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/models/options.py\", line 203, in contribute_to_class\r\n    self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/__init__.py\", line 33, in __getattr__\r\n    return getattr(connections[DEFAULT_DB_ALIAS], item)\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/utils.py\", line 202, in __getitem__\r\n    backend = load_backend(db['ENGINE'])\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/utils.py\", line 110, in load_backend\r\n    return import_module('%s.base' % backend_name)\r\n  File \"/usr/local/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/usr/local/lib/python3.6/site-packages/django/db/backends/mysql/base.py\", line 20, in <module>\r\n    ) from err\r\ndjango.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.\r\nDid you install mysqlclient?\r\n```\r\n\r\n\r\nEnvironment\r\n---------\r\nTrying to setup on Kubernetes.\r\n\r\nFor persistence data i have to add volume ? if i also have to add volume then mount path documentation?\r\n","closed_by":{"login":"harshmanvar","id":50694399,"node_id":"MDQ6VXNlcjUwNjk0Mzk5","avatar_url":"https://avatars.githubusercontent.com/u/50694399?v=4","gravatar_id":"","url":"https://api.github.com/users/harshmanvar","html_url":"https://github.com/harshmanvar","followers_url":"https://api.github.com/users/harshmanvar/followers","following_url":"https://api.github.com/users/harshmanvar/following{/other_user}","gists_url":"https://api.github.com/users/harshmanvar/gists{/gist_id}","starred_url":"https://api.github.com/users/harshmanvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshmanvar/subscriptions","organizations_url":"https://api.github.com/users/harshmanvar/orgs","repos_url":"https://api.github.com/users/harshmanvar/repos","events_url":"https://api.github.com/users/harshmanvar/events{/privacy}","received_events_url":"https://api.github.com/users/harshmanvar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/645/timeline","performed_via_github_app":null,"state_reason":"completed"}