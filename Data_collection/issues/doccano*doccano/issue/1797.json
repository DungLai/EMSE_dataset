{"url":"https://api.github.com/repos/doccano/doccano/issues/1797","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1797/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1797/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1797/events","html_url":"https://github.com/doccano/doccano/issues/1797","id":1212473275,"node_id":"I_kwDOB-j9wM5IRN-7","number":1797,"title":"Unable to deploy Doccano on Azure using template (login issue)","user":{"login":"sebkeil","id":62847324,"node_id":"MDQ6VXNlcjYyODQ3MzI0","avatar_url":"https://avatars.githubusercontent.com/u/62847324?v=4","gravatar_id":"","url":"https://api.github.com/users/sebkeil","html_url":"https://github.com/sebkeil","followers_url":"https://api.github.com/users/sebkeil/followers","following_url":"https://api.github.com/users/sebkeil/following{/other_user}","gists_url":"https://api.github.com/users/sebkeil/gists{/gist_id}","starred_url":"https://api.github.com/users/sebkeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebkeil/subscriptions","organizations_url":"https://api.github.com/users/sebkeil/orgs","repos_url":"https://api.github.com/users/sebkeil/repos","events_url":"https://api.github.com/users/sebkeil/events{/privacy}","received_events_url":"https://api.github.com/users/sebkeil/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-22T15:02:43Z","updated_at":"2022-04-28T23:12:36Z","closed_at":"2022-04-28T23:12:36Z","author_association":"NONE","active_lock_reason":null,"body":"I used a json deployment template for Azure Resource Manager, which is basically a modification of the template by [https://github.com/aribornstein/doccano4Azure]. This is the content of the json file:\r\n\r\n`\r\n  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n  \"contentVersion\": \"1.0.0.0\",\r\n  \"parameters\": {   \r\n    \"appName\": {\r\n      \"defaultValue\": \"doccanova22\",\r\n      \"type\": \"string\"\r\n    },\r\n    \"admin_user\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"admin_pass\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"admin_email\": {\r\n      \"type\": \"string\"\r\n    }\r\n\r\n  },\r\n  \"variables\": {\r\n    \"servicePlanName\": \"[concat('serviceplan',uniqueString(resourceGroup().id))]\"\r\n  },\r\n  \"resources\": [\r\n    {\r\n      \"type\": \"Microsoft.Web/serverfarms\",\r\n      \"name\": \"[variables('servicePlanName')]\",\r\n      \"apiVersion\": \"2016-03-01\",\r\n      \"location\": \"[resourceGroup().location]\",\r\n      \"sku\": {\r\n        \"name\": \"B1\",\r\n        \"capacity\": 1\r\n      },\r\n      \"kind\": \"linux\",\r\n      \"properties\": {\r\n        \"workerSizeId\": 0,\r\n        \"reserved\": true,\r\n        \"hostingEnvironment\": \"\"\r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Microsoft.Web/sites\",\r\n      \"name\": \"[parameters('appName')]\",\r\n      \"apiVersion\": \"2016-03-01\",\r\n      \"location\": \"[resourceGroup().location]\",\r\n      \"properties\": {\r\n        \"name\": \"[parameters('appName')]\",\r\n        \"serverFarmId\": \"[resourceId('Microsoft.Web/serverfarms', variables('servicePlanName'))]\"\r\n      },\r\n      \"dependsOn\": [\r\n        \"[resourceId('Microsoft.Web/serverfarms', variables('servicePlanName'))]\"\r\n      ],\r\n      \"resources\": [\r\n        {\r\n          \"name\": \"appsettings\",\r\n          \"type\": \"config\",\r\n          \"apiVersion\": \"2016-03-01\",\r\n          \"dependsOn\": [\r\n            \"[resourceId('Microsoft.Web/sites', parameters('appName'))]\"\r\n          ],\r\n          \"tags\": {\r\n            \"displayName\": \"appSettings\"\r\n          },\r\n          \"properties\": {\r\n            \"WEBSITES_PORT\":8000 ,\r\n            \"DOCKER_CUSTOM_IMAGE_NAME\": \"doccano/doccano\",\r\n            \"DOCKER_CUSTOM_IMAGE_RUN_COMMAND\": \"doccano/doccano -e ADMIN_USERNAME=parameters('admin_user') -e ADMIN_EMAIL=parameters('admin_email') -e ADMIN_PASSWORD=parameters('admin_pass')\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}`\r\n\r\nwhere I replace the image call to the image provided by doccano4Azure with the most recent version of doccano (doccano/doccano), and pass the enviroment variables as specified in the documentation. Then I run the following commands using the Azure command-line integration:\r\n\r\naz login\r\n\r\naz deployment group create --resource-group mygroupname --template-file azuredeploy2.json \r\n\r\nAfter passing my desired admin name and password, the app is successfully deployed (https://doccanova22.azurewebsites.net/), but I am not able to log in with the creditials I have passed. I keep receiving the error \"Incorrect username or password, or something went wrong.\" I also receive the same error when passing the default values (admin, password). It seems to be that the docker application succesfully receives the credentials I am passing (otherwise it would not build), but they do not propagate to the Django application. Please let me know if you have any tipps, it would be much appreciated.","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1797/timeline","performed_via_github_app":null,"state_reason":"completed"}