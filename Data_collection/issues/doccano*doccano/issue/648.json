{"url":"https://api.github.com/repos/doccano/doccano/issues/648","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/648/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/648/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/648/events","html_url":"https://github.com/doccano/doccano/issues/648","id":589014226,"node_id":"MDU6SXNzdWU1ODkwMTQyMjY=","number":648,"title":"Persistence path for Kubernetes?","user":{"login":"harshmanvar","id":50694399,"node_id":"MDQ6VXNlcjUwNjk0Mzk5","avatar_url":"https://avatars.githubusercontent.com/u/50694399?v=4","gravatar_id":"","url":"https://api.github.com/users/harshmanvar","html_url":"https://github.com/harshmanvar","followers_url":"https://api.github.com/users/harshmanvar/followers","following_url":"https://api.github.com/users/harshmanvar/following{/other_user}","gists_url":"https://api.github.com/users/harshmanvar/gists{/gist_id}","starred_url":"https://api.github.com/users/harshmanvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshmanvar/subscriptions","organizations_url":"https://api.github.com/users/harshmanvar/orgs","repos_url":"https://api.github.com/users/harshmanvar/repos","events_url":"https://api.github.com/users/harshmanvar/events{/privacy}","received_events_url":"https://api.github.com/users/harshmanvar/received_events","type":"User","site_admin":false},"labels":[{"id":927327723,"node_id":"MDU6TGFiZWw5MjczMjc3MjM=","url":"https://api.github.com/repos/doccano/doccano/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"},{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-27T09:53:10Z","updated_at":"2021-04-20T05:33:52Z","closed_at":"2021-04-20T05:33:52Z","author_association":"NONE","active_lock_reason":null,"body":"I have set up Postgres in Kubernetes and also setup Doccano in Kubernetes however it's working well but wants to know the mount point for Kubernetes to attach Persistence volume.\r\n\r\nMy deployment.yaml\r\n\r\n```\r\napiVersion: extensions/v1beta1\r\nkind: Deployment\r\nmetadata:\r\n  labels:\r\n    app: doccano\r\n  name: doccano\r\n  namespace: default\r\nspec:\r\n  progressDeadlineSeconds: 600\r\n  replicas: 1\r\n  revisionHistoryLimit: 10\r\n  selector:\r\n    matchLabels:\r\n      app: doccano\r\n      tier: frontend\r\n  strategy:\r\n    rollingUpdate:\r\n      maxSurge: 25%\r\n      maxUnavailable: 25%\r\n    type: RollingUpdate\r\n  template:\r\n    metadata:\r\n      creationTimestamp: null\r\n      labels:\r\n        app: doccano\r\n        tier: frontend\r\n    spec:\r\n      containers:\r\n      - env:\r\n        - name: ADMIN_USERNAME\r\n          value: admin\r\n        - name: ADMIN_EMAIL\r\n          value: harsh.manvar@xxxxx.com\r\n        - name: ADMIN_PASSWORD\r\n          value: admin\r\n        - name: DATABASE_URL\r\n          value: postgres://root:2lnhK06u@postgres:5432/doccano?sslmode=disable\r\n        - name: ALLOW_SIGNUP\r\n          value : \"True\"\r\n        image: doccano/doccano\r\n        volumeMounts:\r\n        - name: doccano-data\r\n          mountPath: app/staticfiles\r\n        imagePullPolicy: Always\r\n        resources:\r\n          limits:\r\n            cpu: 300m\r\n            memory: 400Mi\r\n          requests:\r\n            cpu: 150m\r\n            memory: 128Mi\r\n        name: doccano\r\n        ports:\r\n        - containerPort: 8000\r\n          name: http\r\n          protocol: TCP\r\n        - containerPort: 80\r\n          name: https\r\n          protocol: TCP\r\n      volumes:\r\n      - name: doccano-data\r\n        persistentVolumeClaim:\r\n          claimName: doccano-data\r\n```\r\n\r\nright now i have used path : `app/staticfiles` but when pod restarts it delete all the files inside it that means files are not persistent at this path.\r\n","closed_by":{"login":"harshmanvar","id":50694399,"node_id":"MDQ6VXNlcjUwNjk0Mzk5","avatar_url":"https://avatars.githubusercontent.com/u/50694399?v=4","gravatar_id":"","url":"https://api.github.com/users/harshmanvar","html_url":"https://github.com/harshmanvar","followers_url":"https://api.github.com/users/harshmanvar/followers","following_url":"https://api.github.com/users/harshmanvar/following{/other_user}","gists_url":"https://api.github.com/users/harshmanvar/gists{/gist_id}","starred_url":"https://api.github.com/users/harshmanvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshmanvar/subscriptions","organizations_url":"https://api.github.com/users/harshmanvar/orgs","repos_url":"https://api.github.com/users/harshmanvar/repos","events_url":"https://api.github.com/users/harshmanvar/events{/privacy}","received_events_url":"https://api.github.com/users/harshmanvar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/648/timeline","performed_via_github_app":null,"state_reason":"completed"}