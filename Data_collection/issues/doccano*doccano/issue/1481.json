{"url":"https://api.github.com/repos/doccano/doccano/issues/1481","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1481/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1481/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1481/events","html_url":"https://github.com/doccano/doccano/issues/1481","id":981467717,"node_id":"MDU6SXNzdWU5ODE0Njc3MTc=","number":1481,"title":"doccano init causes a ModuleNotFoundError for chardet","user":{"login":"jcohen02","id":8027703,"node_id":"MDQ6VXNlcjgwMjc3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8027703?v=4","gravatar_id":"","url":"https://api.github.com/users/jcohen02","html_url":"https://github.com/jcohen02","followers_url":"https://api.github.com/users/jcohen02/followers","following_url":"https://api.github.com/users/jcohen02/following{/other_user}","gists_url":"https://api.github.com/users/jcohen02/gists{/gist_id}","starred_url":"https://api.github.com/users/jcohen02/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcohen02/subscriptions","organizations_url":"https://api.github.com/users/jcohen02/orgs","repos_url":"https://api.github.com/users/jcohen02/repos","events_url":"https://api.github.com/users/jcohen02/events{/privacy}","received_events_url":"https://api.github.com/users/jcohen02/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-08-27T17:54:44Z","updated_at":"2021-10-26T01:09:04Z","closed_at":"2021-10-26T01:09:04Z","author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the behaviour\r\n---------\r\n\r\nCreate a fresh virtualenv in which to test, then install the latest release of doccano from PyPi (v1.4.1):\r\n\r\n```\r\n$ virtualenv env\r\n [...virtualenv output removed...]\r\n\r\n$ source env/bin/activate\r\n(env) $ pip install doccano\r\n\r\n [... main output removed...]\r\nSuccessfully installed Django-3.2.6 MarkupSafe-2.0.1 PyJWT-2.1.0 amqp-5.0.6 apache-libcloud-3.3.1 asgiref-3.4.1 auto-labeling-pipeline-0.1.21 billiard-3.6.4.0 boto3-1.18.30 botocore-1.21.30 celery-5.1.2 certifi-2021.5.30 cffi-1.14.6 charset-normalizer-2.0.4 click-7.1.2 click-didyoumean-0.0.3 click-plugins-1.1.1 click-repl-0.2.0 colour-0.1.5 conllu-4.4.1 coreapi-2.3.3 coreschema-0.0.4 cryptography-3.4.8 defusedxml-0.7.1 dj-database-url-0.5.0 dj-rest-auth-2.1.11 django-celery-results-2.2.0 django-cors-headers-3.8.0 django-drf-filepond-0.4.0 django-filter-2.4.0 django-polymorphic-3.0.0 django-rest-polymorphic-0.1.9 django-storages-1.11.1 djangorestframework-3.12.4 djangorestframework-csv-2.1.1 djangorestframework-xml-2.0.0 doccano-1.4.1 drf-yasg-1.20.0 ecdsa-0.17.0 environs-9.3.3 et-xmlfile-1.1.0 furl-2.1.2 greenlet-1.1.1 gunicorn-20.1.0 idna-3.2 inflection-0.5.1 itypes-1.2.0 jinja2-3.0.1 jmespath-0.10.0 joblib-1.0.1 kombu-5.1.0 lml-0.1.0 marshmallow-3.13.0 numpy-1.21.2 oauthlib-3.1.1 openpyxl-3.0.7 orderedmultidict-1.0.1 packaging-21.0 prompt-toolkit-3.0.20 pyasn1-0.4.8 pycparser-2.20 pydantic-1.8.2 pyexcel-0.6.6 pyexcel-io-0.6.4 pyexcel-xlsx-0.6.0 pyparsing-2.4.7 python-dateutil-2.8.2 python-dotenv-0.19.0 python-jose-3.3.0 python3-openid-3.2.0 pytz-2021.1 requests-2.26.0 requests-oauthlib-1.3.0 rsa-4.7.2 ruamel.yaml-0.17.14 ruamel.yaml.clib-0.2.6 s3transfer-0.5.0 scikit-learn-0.24.2 scipy-1.7.1 seqeval-1.2.2 shortuuid-1.0.1 six-1.16.0 social-auth-app-django-5.0.0 social-auth-core-4.1.0 sqlalchemy-1.4.23 sqlparse-0.4.1 texttable-1.6.4 threadpoolctl-2.2.0 typing-extensions-3.10.0.0 unicodecsv-0.14.1 uritemplate-3.0.1 urllib3-1.26.6 vine-5.0.0 wcwidth-0.2.5 whitenoise-5.3.0\r\n```\r\n\r\nNow run `doccano init`:\r\n```\r\n(env) $ doccano init\r\n```\r\n\r\nThis results in a set of long stack traces all rooted on [doccano/backend/api/views/upload/dataset.py:L7](https://github.com/doccano/doccano/blob/3bf91c1e30c00693362491932a6aa802235a5f95/backend/api/views/upload/dataset.py#L7) - `import chardet`\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/env/lib/python3.8/site-packages/backend/manage.py\", line 15, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"/env/lib/python3.8/site-packages/django/core/management/__init__.py\", line 419, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/env/lib/python3.8/site-packages/django/core/management/__init__.py\", line 413, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"/env/lib/python3.8/site-packages/django/core/management/base.py\", line 354, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n\r\n[...traceback truncated...]\r\n\r\n  File \"/env/lib/python3.8/site-packages/backend/api/urls.py\", line 3, in <module>\r\n    from . import views\r\n  File \"/env/lib/python3.8/site-packages/backend/api/views/__init__.py\", line 5, in <module>\r\n    from .export_dataset import *\r\n  File \"/env/lib/python3.8/site-packages/backend/api/views/export_dataset.py\", line 11, in <module>\r\n    from ..tasks import export_dataset\r\n  File \"/env/lib/python3.8/site-packages/backend/api/tasks.py\", line 13, in <module>\r\n    from .views.upload.factory import (get_data_class, get_dataset_class,\r\n  File \"/env/lib/python3.8/site-packages/backend/api/views/upload/factory.py\", line 3, in <module>\r\n    from . import catalog, data, dataset, label\r\n  File \"/env/lib/python3.8/site-packages/backend/api/views/upload/dataset.py\", line 7, in <module>\r\n    import chardet\r\nModuleNotFoundError: No module named 'chardet'\r\n```\r\n\r\n`pip install chardet` resolves the issue and `doccano init` then completes successfully and I'm able to run the app. \r\n\r\nYour Environment\r\n---------\r\n\r\n*   **Operating System:** Tested on both macOS 10.15.7 and Ubuntu 20.04\r\n*   **Python Version Used:** 3.8.9 (macOS, via macports), 3.8.10 (Ubuntu)\r\n*   **When you install doccano:** 27th Aug 2021 - installing current release from PyPi, v1.4.1\r\n*   **How did you install doccano (Heroku button etc):** Installing v1.4.1 from PyPi using `pip install doccano` into a clean python virtualenv.\r\n","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1481/timeline","performed_via_github_app":null,"state_reason":"completed"}