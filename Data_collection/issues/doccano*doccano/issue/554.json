{"url":"https://api.github.com/repos/doccano/doccano/issues/554","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/554/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/554/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/554/events","html_url":"https://github.com/doccano/doccano/issues/554","id":560322802,"node_id":"MDU6SXNzdWU1NjAzMjI4MDI=","number":554,"title":"MultipleObjectsReturned: get() returned more than one RoleMapping","user":{"login":"kuraga","id":1063219,"node_id":"MDQ6VXNlcjEwNjMyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1063219?v=4","gravatar_id":"","url":"https://api.github.com/users/kuraga","html_url":"https://github.com/kuraga","followers_url":"https://api.github.com/users/kuraga/followers","following_url":"https://api.github.com/users/kuraga/following{/other_user}","gists_url":"https://api.github.com/users/kuraga/gists{/gist_id}","starred_url":"https://api.github.com/users/kuraga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kuraga/subscriptions","organizations_url":"https://api.github.com/users/kuraga/orgs","repos_url":"https://api.github.com/users/kuraga/repos","events_url":"https://api.github.com/users/kuraga/events{/privacy}","received_events_url":"https://api.github.com/users/kuraga/received_events","type":"User","site_admin":false},"labels":[{"id":927327728,"node_id":"MDU6TGFiZWw5MjczMjc3Mjg=","url":"https://api.github.com/repos/doccano/doccano/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-02-05T11:53:36Z","updated_at":"2020-02-10T07:41:10Z","closed_at":"2020-02-10T01:31:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Good day!\r\n\r\nI've found an error in my log:\r\n```\r\nnginx_1     | <client ip address> - - [04/Feb/2020:13:09:14 +0000] \"GET /v1/projects/1/statistics HTTP/1.1\" 200 326 \"http://<server ip address>/projects/1/statistics\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chr\r\nome/79.0.3945.130 Safari/537.36\" \"-\"                                                                                                                                                                                                          \r\nbackend_1   | Internal Server Error: /v1/projects/1                                                                                                                                                                                           \r\nbackend_1   | Traceback (most recent call last):                                                                                                                                                                                              \r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/core/handlers/exception.py\", line 34, in inner                                                                                                                            \r\nbackend_1   |     response = get_response(request)                                                                                                                                                                                            \r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/core/handlers/base.py\", line 126, in _get_response                                                                                                                        \r\nbackend_1   |     response = self.process_exception_by_middleware(e, request)                                                                                                                                                                 \r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/core/handlers/base.py\", line 124, in _get_response                                                                                                                        \r\nbackend_1   |     response = wrapped_callback(request, *callback_args, **callback_kwargs)                                                                                                                                                     \r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/views/decorators/csrf.py\", line 54, in wrapped_view                                                                                                                       \r\nbackend_1   |     return view_func(*args, **kwargs)                                                                                                                                                                                           \r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/views/generic/base.py\", line 68, in view                                                                                                                                  \r\nbackend_1   |     return self.dispatch(request, *args, **kwargs)                                                                                                                                                                              \r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/views.py\", line 497, in dispatch                                                                                                                          [4/9257]\r\nbackend_1   |     response = self.handle_exception(exc)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/views.py\", line 457, in handle_exception\r\nbackend_1   |     self.raise_uncaught_exception(exc)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/views.py\", line 468, in raise_uncaught_exception\r\nbackend_1   |     raise exc\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/views.py\", line 494, in dispatch\r\nbackend_1   |     response = handler(request, *args, **kwargs)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/generics.py\", line 282, in get\r\nbackend_1   |     return self.retrieve(request, *args, **kwargs)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/mixins.py\", line 56, in retrieve\r\nbackend_1   |     return Response(serializer.data)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/serializers.py\", line 559, in data\r\nbackend_1   |     ret = super().data\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/serializers.py\", line 261, in data\r\nbackend_1   |     self._data = self.to_representation(self.instance)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/serializers.py\", line 526, in to_representation\r\nbackend_1   |     ret[field.field_name] = field.to_representation(attribute)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/rest_framework/fields.py\", line 1873, in to_representation\r\nbackend_1   |     return method(value)\r\nbackend_1   |   File \"/app/api/serializers.py\", line 99, in get_current_users_role\r\nbackend_1   |     queryset, project=instance.id, user=self.context.get(\"request\").user.id\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/shortcuts.py\", line 93, in get_object_or_404\r\nbackend_1   |     return queryset.get(*args, **kwargs)\r\nbackend_1   |   File \"/usr/local/lib/python3.6/site-packages/django/db/models/query.py\", line 403, in get\r\nbackend_1   |     (self.model._meta.object_name, num)\r\nbackend_1   | api.models.RoleMapping.MultipleObjectsReturned: get() returned more than one RoleMapping -- it returned 2!\r\n```\r\n\r\nDoccano 1.0.2 + patch from PR 527 (via Docker compose)","closed_by":{"login":"icoxfog417","id":544269,"node_id":"MDQ6VXNlcjU0NDI2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/544269?v=4","gravatar_id":"","url":"https://api.github.com/users/icoxfog417","html_url":"https://github.com/icoxfog417","followers_url":"https://api.github.com/users/icoxfog417/followers","following_url":"https://api.github.com/users/icoxfog417/following{/other_user}","gists_url":"https://api.github.com/users/icoxfog417/gists{/gist_id}","starred_url":"https://api.github.com/users/icoxfog417/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icoxfog417/subscriptions","organizations_url":"https://api.github.com/users/icoxfog417/orgs","repos_url":"https://api.github.com/users/icoxfog417/repos","events_url":"https://api.github.com/users/icoxfog417/events{/privacy}","received_events_url":"https://api.github.com/users/icoxfog417/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/554/timeline","performed_via_github_app":null,"state_reason":"completed"}