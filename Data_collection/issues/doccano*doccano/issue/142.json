{"url":"https://api.github.com/repos/doccano/doccano/issues/142","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/142/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/142/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/142/events","html_url":"https://github.com/doccano/doccano/issues/142","id":427507670,"node_id":"MDU6SXNzdWU0Mjc1MDc2NzA=","number":142,"title":"Support for custom tokenization","user":{"login":"lfoppiano","id":15426,"node_id":"MDQ6VXNlcjE1NDI2","avatar_url":"https://avatars.githubusercontent.com/u/15426?v=4","gravatar_id":"","url":"https://api.github.com/users/lfoppiano","html_url":"https://github.com/lfoppiano","followers_url":"https://api.github.com/users/lfoppiano/followers","following_url":"https://api.github.com/users/lfoppiano/following{/other_user}","gists_url":"https://api.github.com/users/lfoppiano/gists{/gist_id}","starred_url":"https://api.github.com/users/lfoppiano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfoppiano/subscriptions","organizations_url":"https://api.github.com/users/lfoppiano/orgs","repos_url":"https://api.github.com/users/lfoppiano/repos","events_url":"https://api.github.com/users/lfoppiano/events{/privacy}","received_events_url":"https://api.github.com/users/lfoppiano/received_events","type":"User","site_admin":false},"labels":[{"id":1203581726,"node_id":"MDU6TGFiZWwxMjAzNTgxNzI2","url":"https://api.github.com/repos/doccano/doccano/labels/feature%20request","name":"feature request","color":"FBC904","default":false,"description":"feature request for doccano"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-04-01T04:35:33Z","updated_at":"2020-05-12T21:58:21Z","closed_at":"2020-05-12T21:58:21Z","author_association":"NONE","active_lock_reason":null,"body":"From a previous discussion (#113) I've been asked to open a new issue for this specific feature request. \r\n\r\nThe use case is the following, as an independent annotation tool, Doccano is now be able to load pre-annotated data but we should add information about tokenisation. \r\n\r\nThis because\r\n - different tasks might require different tokeniser \r\n - different languages might be tokenised in several ways \r\n\r\nTherefore to avoid being lock-in with a particular tool and make doccano able to be plugged in any workflow. \r\nMy training data is in sync with other part of my machinery it will be guarantee that such synchronization will be maintained. \r\n\r\nThe tokenisation is also more robust and would allow to ship (without necessarly support) more information for each token (for example orthogonal features like formatting etc..)\r\n\r\nMy proposal is to follow the prodigy format (although I choose that just for simplicity - also the main elements can be called with any name):\r\n\r\n```\r\n{\r\n\"spans\": [{\"start\": 58, \"end\": 72, \"token_start\": 16, \"token_end\": 25, \"label\": \"label1\"}], [...]\r\n\"tokens\": [{\"text\": \"We\", \"start\": 0, \"end\": 2, \"id\": 0}, {\"text\": \" \", \"start\": 2, \"end\": 3, \"id\": 1}] , [...]\r\n\"text\": \"We have measured the [...]\"\r\n}\r\n```\r\n- `spans` refer to the list of annotations, \r\n- `start/end` refer to the offset in the text, while \r\n- `token_start/token_end` to the index of the tokens.\r\n- tokens `id`  can be any type, maybe string or long are better?\r\n\r\nIf a user upload plain text to be annotated, doccano can always output it's own tokenisation to export the data and maintain the consistency.\r\nAs mentioned before, attached to the `spans` there can be also `user` information but also formatting, and other information that doccano can happily ignore - they must kept and send out in the output)","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/142/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/142/timeline","performed_via_github_app":null,"state_reason":"completed"}