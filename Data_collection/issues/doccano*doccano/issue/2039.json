{"url":"https://api.github.com/repos/doccano/doccano/issues/2039","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/2039/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/2039/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/2039/events","html_url":"https://github.com/doccano/doccano/issues/2039","id":1432022768,"node_id":"I_kwDOB-j9wM5VWu7w","number":2039,"title":"Broken: Importing and Exporting SequenceLabeling projects with relations","user":{"login":"david-engelmann","id":81196676,"node_id":"MDQ6VXNlcjgxMTk2Njc2","avatar_url":"https://avatars.githubusercontent.com/u/81196676?v=4","gravatar_id":"","url":"https://api.github.com/users/david-engelmann","html_url":"https://github.com/david-engelmann","followers_url":"https://api.github.com/users/david-engelmann/followers","following_url":"https://api.github.com/users/david-engelmann/following{/other_user}","gists_url":"https://api.github.com/users/david-engelmann/gists{/gist_id}","starred_url":"https://api.github.com/users/david-engelmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/david-engelmann/subscriptions","organizations_url":"https://api.github.com/users/david-engelmann/orgs","repos_url":"https://api.github.com/users/david-engelmann/repos","events_url":"https://api.github.com/users/david-engelmann/events{/privacy}","received_events_url":"https://api.github.com/users/david-engelmann/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-11-01T20:08:17Z","updated_at":"2022-12-16T07:07:54Z","closed_at":"2022-12-16T07:07:54Z","author_association":"NONE","active_lock_reason":null,"body":"How to reproduce the behaviour\r\n---------\r\n<!-- Before submitting an issue, make sure to check the docs and closed issues and FAQ to see if any of the solutions work for you. https://github.com/doccano/doccano/wiki/Frequently-Asked-Questions -->\r\n\r\n<!-- Include a code example or the steps that led to the problem. Please try to be as specific as possible. -->\r\n\r\nYour Environment\r\n---------\r\n<!-- Include details of your environment.-->\r\n*   Operating System: Dockeer\r\n*   Python Version Used: 3.8\r\n*   When you install doccano: 11/1/22\r\n*   How did you install doccano (Heroku button etc): docker-compose\r\n\r\nI observed issues with the UI and interacting with relation labels. I am able create a relation label between two span labels in the UI, however the relation array get exported empty when going through the Export Dataset -> JSONL(relation) path. Furthermore, issues occur when trying to import relations as well. The import dataset flow only takes one \"Column Label\" field. When that is set to label, all of the span label and relation label info are uploaded as metadata. \r\n\r\n![image](https://user-images.githubusercontent.com/81196676/199328801-c98d3693-ff8f-45b3-80a3-7d916075ec56.png)\r\n\r\nIf the \"Column Label\" field is set to \"entities\" the span labels are imported and only the relation label data is uploaded as metadata. \r\n\r\n![image](https://user-images.githubusercontent.com/81196676/199329062-26b1ea53-8b03-464d-932e-15e0b0e83061.png)\r\n\r\nThe first goal would be that the export process, exports in the format displayed when you select the JSONL(relation) option from Export Dataset.\r\n\r\nie.\r\n\r\n```\r\n{\r\n    \"text\": \"Google was founded on September 4, 1998, by Larry Page and Sergey Brin.\",\r\n    \"entities\": [\r\n        {\r\n            \"id\": 0,\r\n            \"start_offset\": 0,\r\n            \"end_offset\": 6,\r\n            \"label\": \"ORG\"\r\n        },\r\n        {\r\n            \"id\": 1,\r\n            \"start_offset\": 22,\r\n            \"end_offset\": 39,\r\n            \"label\": \"DATE\"\r\n        },\r\n        {\r\n            \"id\": 2,\r\n            \"start_offset\": 44,\r\n            \"end_offset\": 54,\r\n            \"label\": \"PERSON\"\r\n        },\r\n        {\r\n            \"id\": 3,\r\n            \"start_offset\": 59,\r\n            \"end_offset\": 70,\r\n            \"label\": \"PERSON\"\r\n        }\r\n    ],\r\n    \"relations\": [\r\n        {\r\n            \"id\": 0,\r\n            \"from_id\": 0,\r\n            \"to_id\": 1,\r\n            \"type\": \"foundedAt\"\r\n        },\r\n        {\r\n            \"id\": 1,\r\n            \"from_id\": 0,\r\n            \"to_id\": 2,\r\n            \"type\": \"foundedBy\"\r\n        },\r\n        {\r\n            \"id\": 2,\r\n            \"from_id\": 0,\r\n            \"to_id\": 3,\r\n            \"type\": \"foundedBy\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nThe second goal would be the ability to upload span labels and relation labels. Basically, Import Dataset should work with the Export Dataset -> JSONL(relation) results. I'll include a JSONL testing file for imports.\r\n\r\n[relation_import_sample.zip](https://github.com/doccano/doccano/files/9913661/relation_import_sample.zip)","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/2039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/2039/timeline","performed_via_github_app":null,"state_reason":"completed"}