{"url":"https://api.github.com/repos/doccano/doccano/issues/1676","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/1676/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/1676/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/1676/events","html_url":"https://github.com/doccano/doccano/issues/1676","id":1126272347,"node_id":"I_kwDOB-j9wM5DIY1b","number":1676,"title":"Service 'nginx' failed to build: Error: `make` failed with exit code: 2","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[{"id":927327719,"node_id":"MDU6TGFiZWw5MjczMjc3MTk=","url":"https://api.github.com/repos/doccano/doccano/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-02-07T17:14:54Z","updated_at":"2022-02-15T06:34:49Z","closed_at":"2022-02-15T06:34:49Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI'm trying to deploy doccano as a docker container via docker-compose and facing an error during Nginx service build.\r\n\r\nPlease refer to the described steps below \r\n\r\nHow to reproduce the problem\r\n---------\r\nrun `sudo docker-compose -f docker-compose.prod.yml up`\r\nin local repository \r\n\r\n```bash\r\n[3/4] Linking dependencies...\r\n[4/4] Building fresh packages...\r\ninfo Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.\r\nerror /app/node_modules/deasync: Command failed.\r\nExit code: 1\r\nCommand: node ./build.js\r\nArguments:\r\nDirectory: /app/node_modules/deasync\r\nOutput:\r\ngyp info it worked if it ends with ok\r\ngyp info using node-gyp@7.1.2\r\ngyp info using node@16.5.0 | linux | x64\r\ngyp info find Python using Python version 3.9.5 found at \"/usr/bin/python3\"\r\ngyp http GET https://unofficial-builds.nodejs.org/download/release/v16.5.0/node-v16.5.0-headers.tar.gz\r\ngyp http 200 https://unofficial-builds.nodejs.org/download/release/v16.5.0/node-v16.5.0-headers.tar.gz\r\ngyp http GET https://unofficial-builds.nodejs.org/download/release/v16.5.0/SHASUMS256.txt\r\ngyp http 200 https://unofficial-builds.nodejs.org/download/release/v16.5.0/SHASUMS256.txt\r\n(node:144) [DEP0150] DeprecationWarning: Setting process.config is deprecated. In the future the property will be read-only.\r\n(Use `node --trace-deprecation ...` to show where the warning was created)\r\ngyp info spawn /usr/bin/python3\r\ngyp info spawn args [\r\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',\r\ngyp info spawn args   'binding.gyp',\r\ngyp info spawn args   '-f',\r\ngyp info spawn args   'make',\r\ngyp info spawn args   '-I',\r\ngyp info spawn args   '/app/node_modules/deasync/build/config.gypi',\r\ngyp info spawn args   '-I',\r\ngyp info spawn args   '/usr/local/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',\r\ngyp info spawn args   '-I',\r\ngyp info spawn args   '/root/.cache/node-gyp/16.5.0/include/node/common.gypi',\r\ngyp info spawn args   '-Dlibrary=shared_library',\r\ngyp info spawn args   '-Dvisibility=default',\r\ngyp info spawn args   '-Dnode_root_dir=/root/.cache/node-gyp/16.5.0',\r\ngyp info spawn args   '-Dnode_gyp_dir=/usr/local/lib/node_modules/npm/node_modules/node-gyp',\r\ngyp info spawn args   '-Dnode_lib_file=/root/.cache/node-gyp/16.5.0/<(target_arch)/node.lib',\r\ngyp info spawn args   '-Dmodule_root_dir=/app/node_modules/deasync',\r\ngyp info spawn args   '-Dnode_engine=v8',\r\ngyp info spawn args   '--depth=.',\r\ngyp info spawn args   '--no-parallel',\r\ngyp info spawn args   '--generator-output',\r\ngyp info spawn args   'build',\r\ngyp info spawn args   '-Goutput_dir=.'\r\ngyp info spawn args ]\r\ngyp info spawn make\r\ngyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]\r\nmake: Entering directory '/app/node_modules/deasync/build'\r\nmake: printf: Operation not permitted\r\nmake: *** [deasync.target.mk:111: Release/obj.target/deasync/src/deasync.o] Error 127\r\nmake: Leaving directory '/app/node_modules/deasync/build'\r\ngyp ERR! build error\r\ngyp ERR! stack Error: `make` failed with exit code: 2\r\ngyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:194:23)\r\ngyp ERR! stack     at ChildProcess.emit (node:events:394:28)\r\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (node:internal/child_process:290:12)\r\ngyp ERR! System Linux 5.4.0-1043-azure\r\ngyp ERR! command \"/usr/local/bin/node\" \"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\r\ngyp ERR! cwd /app/node_modules/deasync\r\ngyp ERR! node -v v16.5.0\r\ngyp ERR! node-gyp -v v7.1.2\r\ngyp ERR! not ok\r\nBuild failed\r\n```\r\n\r\nYour Environment\r\n---------\r\n<!-- Include details of your environment.-->\r\n*   Operating System:  Ubuntu 18.04.5 LTS/ docker 19.03.13\r\n*   Python Version Used:  PYTHON_VERSION=\"3.8.12-slim-buster\"\r\n*   When you install doccano: 2022.02.07\r\n*   How did you install doccano (Heroku button etc): docker-compose\r\n\r\n","closed_by":{"login":"Hironsan","id":6737785,"node_id":"MDQ6VXNlcjY3Mzc3ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6737785?v=4","gravatar_id":"","url":"https://api.github.com/users/Hironsan","html_url":"https://github.com/Hironsan","followers_url":"https://api.github.com/users/Hironsan/followers","following_url":"https://api.github.com/users/Hironsan/following{/other_user}","gists_url":"https://api.github.com/users/Hironsan/gists{/gist_id}","starred_url":"https://api.github.com/users/Hironsan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hironsan/subscriptions","organizations_url":"https://api.github.com/users/Hironsan/orgs","repos_url":"https://api.github.com/users/Hironsan/repos","events_url":"https://api.github.com/users/Hironsan/events{/privacy}","received_events_url":"https://api.github.com/users/Hironsan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/1676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/1676/timeline","performed_via_github_app":null,"state_reason":"completed"}