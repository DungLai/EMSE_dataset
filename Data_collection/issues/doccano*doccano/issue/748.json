{"url":"https://api.github.com/repos/doccano/doccano/issues/748","repository_url":"https://api.github.com/repos/doccano/doccano","labels_url":"https://api.github.com/repos/doccano/doccano/issues/748/labels{/name}","comments_url":"https://api.github.com/repos/doccano/doccano/issues/748/comments","events_url":"https://api.github.com/repos/doccano/doccano/issues/748/events","html_url":"https://github.com/doccano/doccano/issues/748","id":613155375,"node_id":"MDU6SXNzdWU2MTMxNTUzNzU=","number":748,"title":"Clarify how to set user own username/password in docker-compose for security","user":{"login":"Citronelol","id":28651806,"node_id":"MDQ6VXNlcjI4NjUxODA2","avatar_url":"https://avatars.githubusercontent.com/u/28651806?v=4","gravatar_id":"","url":"https://api.github.com/users/Citronelol","html_url":"https://github.com/Citronelol","followers_url":"https://api.github.com/users/Citronelol/followers","following_url":"https://api.github.com/users/Citronelol/following{/other_user}","gists_url":"https://api.github.com/users/Citronelol/gists{/gist_id}","starred_url":"https://api.github.com/users/Citronelol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Citronelol/subscriptions","organizations_url":"https://api.github.com/users/Citronelol/orgs","repos_url":"https://api.github.com/users/Citronelol/repos","events_url":"https://api.github.com/users/Citronelol/events{/privacy}","received_events_url":"https://api.github.com/users/Citronelol/received_events","type":"User","site_admin":false},"labels":[{"id":927327721,"node_id":"MDU6TGFiZWw5MjczMjc3MjE=","url":"https://api.github.com/repos/doccano/doccano/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"Improvement on existing feature"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-05-06T08:52:38Z","updated_at":"2020-07-11T01:52:36Z","closed_at":"2020-07-11T01:52:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Feature description\r\n---------\r\nHi all,\r\n\r\nUnless I am wrong today the only way to define a custom website username and password are overriding these values through the docker-compose files. See below for website configuration in `docker-compose.prod.yml` \r\n\r\n```\r\n    environment:\r\n      ADMIN_USERNAME: \"admin\"\r\n      ADMIN_PASSWORD: \"password\"\r\n      ADMIN_EMAIL: \"admin@example.com\"\r\n```\r\n\r\nThis has some little disadvantages:\r\n* If I use both `dev` and `prod` environment I need to modify both `docker-compose.prod.yml` and `docker-compose.dev.yml` manually\r\n* If I try to deploy `doccano` in some CICD pipeline and need to override these values, I need to override the whole docker-compose file with a custom one, which is a bit overkill compared to using environment variables.\r\n* Not asking people to explicitly specify their own login and password values makes it easy for malicious individuals to guess secrets\r\n\r\nWhat about suggesting users to define their own environment variables by creating and `.env` file ? (see [variable substitution](https://docs.docker.com/compose/compose-file/#variable-substitution) and [using env variables](https://docs.docker.com/compose/environment-variables/#the-env-file) in docker compose)\r\n\r\nProcedure:\r\n* Website username and password variables (or more?) are stored in an `.env` file\r\n* `docker-compose` files use what's inside `.env` \r\n*  We commit an `.env.example` file with default configuration\r\n* `.env` is added to `.gitignore` to make sure no one commits secrets\r\n* we add a step in `README.md` asking users to \"copy the `.env.example` file in an `.env` file and eventually modify its content before launching `docker-compose -f docker-compose.prod.yml up`\r\n\r\nI reckon this will make more complex the launching of doccano for new users (which is quite easy as of today!) and may increase errors if people do not follow or read the `README.md` correctly... there is maybe a tradeoff here, so happy to discuss and eventually contribute if needed.\r\n","closed_by":{"login":"icoxfog417","id":544269,"node_id":"MDQ6VXNlcjU0NDI2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/544269?v=4","gravatar_id":"","url":"https://api.github.com/users/icoxfog417","html_url":"https://github.com/icoxfog417","followers_url":"https://api.github.com/users/icoxfog417/followers","following_url":"https://api.github.com/users/icoxfog417/following{/other_user}","gists_url":"https://api.github.com/users/icoxfog417/gists{/gist_id}","starred_url":"https://api.github.com/users/icoxfog417/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icoxfog417/subscriptions","organizations_url":"https://api.github.com/users/icoxfog417/orgs","repos_url":"https://api.github.com/users/icoxfog417/repos","events_url":"https://api.github.com/users/icoxfog417/events{/privacy}","received_events_url":"https://api.github.com/users/icoxfog417/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/doccano/doccano/issues/748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/doccano/doccano/issues/748/timeline","performed_via_github_app":null,"state_reason":"completed"}