[{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030518973","html_url":"https://github.com/WLM1ke/poptimizer/issues/101#issuecomment-1030518973","issue_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/101","id":1030518973,"node_id":"IC_kwDOCYyMws49bHi9","user":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false},"created_at":"2022-02-05T04:15:48Z","updated_at":"2022-02-05T04:15:48Z","author_association":"OWNER","body":"Какая-то проблема с ssl сертификатами, возможно вы давно не обновляли библиотеку certifi","reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030518973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030596543","html_url":"https://github.com/WLM1ke/poptimizer/issues/101#issuecomment-1030596543","issue_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/101","id":1030596543,"node_id":"IC_kwDOCYyMws49bae_","user":{"login":"ArjaraGit","id":57317188,"node_id":"MDQ6VXNlcjU3MzE3MTg4","avatar_url":"https://avatars.githubusercontent.com/u/57317188?v=4","gravatar_id":"","url":"https://api.github.com/users/ArjaraGit","html_url":"https://github.com/ArjaraGit","followers_url":"https://api.github.com/users/ArjaraGit/followers","following_url":"https://api.github.com/users/ArjaraGit/following{/other_user}","gists_url":"https://api.github.com/users/ArjaraGit/gists{/gist_id}","starred_url":"https://api.github.com/users/ArjaraGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArjaraGit/subscriptions","organizations_url":"https://api.github.com/users/ArjaraGit/orgs","repos_url":"https://api.github.com/users/ArjaraGit/repos","events_url":"https://api.github.com/users/ArjaraGit/events{/privacy}","received_events_url":"https://api.github.com/users/ArjaraGit/received_events","type":"User","site_admin":false},"created_at":"2022-02-05T10:31:12Z","updated_at":"2022-02-05T10:31:12Z","author_association":"NONE","body":"обновил библиотеки в виртуальном окружении, удалил дату последней выгрузки котировок в misk/trading_dates\r\nперезапустил эволюцию \r\nполучаю ошибку: poptimizer.data.adapters.html.description.ParserError: На странице нет таблицы 2\r\n\r\nесли я правильно понял, это страница с датами закрытия реестров на московской бирже\r\nстраница начитывается, но в ней нет таблиц\r\n\r\nприложил объекты, которые передаются в метод  _get_table_from_html\r\n[html.txt](https://github.com/WLM1ke/poptimizer/files/8007811/html.txt)\r\ntable_num = {int} 2\r\n\r\n[soup.txt](https://github.com/WLM1ke/poptimizer/files/8007813/soup.txt)\r\n\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/evolve/__init__.py\", line 2, in <module>\r\n    from poptimizer.evolve.evolve import Evolution\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/evolve/evolve.py\", line 11, in <module>\r\n    from poptimizer.data.views import listing\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/views/listing.py\", line 8, in <module>\r\n    from poptimizer.data.app import bootstrap, viewers\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/app/bootstrap.py\", line 47, in <module>\r\n    BUS, VIEWER = start_app()\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/app/bootstrap.py\", line 42, in start_app\r\n    bus.handle_event(event)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/shared/app.py\", line 74, in handle_event\r\n    loop.run_until_complete(self._handle_event(event))\r\n  File \"/Users/opt/miniconda3/envs/torch39_20220205/lib/python3.9/asyncio/base_events.py\", line 642, in run_until_complete\r\n    return future.result()\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/shared/app.py\", line 89, in _handle_event\r\n    pending |= self._create_tasks(task.result())\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/shared/app.py\", line 100, in _handle_one_command\r\n    return await self._event_handler.handle_event(event, repo)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/domain/handlers.py\", line 69, in trading_day_ended\r\n    *itertools.chain.from_iterable(await asyncio.gather(*aws)),\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/domain/handlers.py\", line 29, in _load_by_id_and_handle_event\r\n    return await table.handle_event(event)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/domain/tables/base.py\", line 71, in handle_event\r\n    df_new = await self._prepare_df(event)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/domain/tables/dividends.py\", line 90, in _prepare_df\r\n    dfs = [await gw() for gw in self._gateways]\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/domain/tables/dividends.py\", line 90, in <listcomp>\r\n    dfs = [await gw() for gw in self._gateways]\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/adapters/gateways/moex_status.py\", line 57, in __call__\r\n    df = await parser.get_df_from_url(URL, TABLE_INDEX, cols_desc)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/adapters/html/parser.py\", line 87, in get_df_from_url\r\n    return get_df_from_html(html, table_num, cols_desc)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/adapters/html/parser.py\", line 78, in get_df_from_html\r\n    table = _get_table_from_html(html, table_num)\r\n  File \"/Users/Documents/PythonProjects/poptimizer/poptimizer/poptimizer/data/adapters/html/parser.py\", line 35, in _get_table_from_html\r\n    raise description.ParserError(f\"На странице нет таблицы {table_num}\")\r\npoptimizer.data.adapters.html.description.ParserError: На странице нет таблицы 2","reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030596543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ArjaraGit","id":57317188,"node_id":"MDQ6VXNlcjU3MzE3MTg4","avatar_url":"https://avatars.githubusercontent.com/u/57317188?v=4","gravatar_id":"","url":"https://api.github.com/users/ArjaraGit","html_url":"https://github.com/ArjaraGit","followers_url":"https://api.github.com/users/ArjaraGit/followers","following_url":"https://api.github.com/users/ArjaraGit/following{/other_user}","gists_url":"https://api.github.com/users/ArjaraGit/gists{/gist_id}","starred_url":"https://api.github.com/users/ArjaraGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArjaraGit/subscriptions","organizations_url":"https://api.github.com/users/ArjaraGit/orgs","repos_url":"https://api.github.com/users/ArjaraGit/repos","events_url":"https://api.github.com/users/ArjaraGit/events{/privacy}","received_events_url":"https://api.github.com/users/ArjaraGit/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030596878","html_url":"https://github.com/WLM1ke/poptimizer/issues/101#issuecomment-1030596878","issue_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/101","id":1030596878,"node_id":"IC_kwDOCYyMws49bakO","user":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false},"created_at":"2022-02-05T10:33:39Z","updated_at":"2022-02-05T10:33:39Z","author_association":"OWNER","body":"Уже в #102 сообщили - думаю это временный глюк на стороне MOEX (утром у меня все скачалось, а сейчас страница пустая). Нужно подождать, пока они у себя починят.","reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030596878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030598567","html_url":"https://github.com/WLM1ke/poptimizer/issues/101#issuecomment-1030598567","issue_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/101","id":1030598567,"node_id":"IC_kwDOCYyMws49ba-n","user":{"login":"ArjaraGit","id":57317188,"node_id":"MDQ6VXNlcjU3MzE3MTg4","avatar_url":"https://avatars.githubusercontent.com/u/57317188?v=4","gravatar_id":"","url":"https://api.github.com/users/ArjaraGit","html_url":"https://github.com/ArjaraGit","followers_url":"https://api.github.com/users/ArjaraGit/followers","following_url":"https://api.github.com/users/ArjaraGit/following{/other_user}","gists_url":"https://api.github.com/users/ArjaraGit/gists{/gist_id}","starred_url":"https://api.github.com/users/ArjaraGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArjaraGit/subscriptions","organizations_url":"https://api.github.com/users/ArjaraGit/orgs","repos_url":"https://api.github.com/users/ArjaraGit/repos","events_url":"https://api.github.com/users/ArjaraGit/events{/privacy}","received_events_url":"https://api.github.com/users/ArjaraGit/received_events","type":"User","site_admin":false},"created_at":"2022-02-05T10:45:37Z","updated_at":"2022-02-05T10:45:37Z","author_association":"NONE","body":"@WLM1ke, упс, не видел\r\nок. спасибо))","reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030598567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ArjaraGit","id":57317188,"node_id":"MDQ6VXNlcjU3MzE3MTg4","avatar_url":"https://avatars.githubusercontent.com/u/57317188?v=4","gravatar_id":"","url":"https://api.github.com/users/ArjaraGit","html_url":"https://github.com/ArjaraGit","followers_url":"https://api.github.com/users/ArjaraGit/followers","following_url":"https://api.github.com/users/ArjaraGit/following{/other_user}","gists_url":"https://api.github.com/users/ArjaraGit/gists{/gist_id}","starred_url":"https://api.github.com/users/ArjaraGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArjaraGit/subscriptions","organizations_url":"https://api.github.com/users/ArjaraGit/orgs","repos_url":"https://api.github.com/users/ArjaraGit/repos","events_url":"https://api.github.com/users/ArjaraGit/events{/privacy}","received_events_url":"https://api.github.com/users/ArjaraGit/received_events","type":"User","site_admin":false}},{"id":6013671558,"node_id":"MEE_lADOCYyMws5DCVCZzwAAAAFmcViG","url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/events/6013671558","actor":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-05T10:45:37Z","performed_via_github_app":null},{"id":6013671559,"node_id":"SE_lADOCYyMws5DCVCZzwAAAAFmcViH","url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/events/6013671559","actor":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-05T10:45:37Z","performed_via_github_app":null},{"id":6013671657,"node_id":"CE_lADOCYyMws5DCVCZzwAAAAFmcVjp","url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/events/6013671657","actor":{"login":"ArjaraGit","id":57317188,"node_id":"MDQ6VXNlcjU3MzE3MTg4","avatar_url":"https://avatars.githubusercontent.com/u/57317188?v=4","gravatar_id":"","url":"https://api.github.com/users/ArjaraGit","html_url":"https://github.com/ArjaraGit","followers_url":"https://api.github.com/users/ArjaraGit/followers","following_url":"https://api.github.com/users/ArjaraGit/following{/other_user}","gists_url":"https://api.github.com/users/ArjaraGit/gists{/gist_id}","starred_url":"https://api.github.com/users/ArjaraGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArjaraGit/subscriptions","organizations_url":"https://api.github.com/users/ArjaraGit/orgs","repos_url":"https://api.github.com/users/ArjaraGit/repos","events_url":"https://api.github.com/users/ArjaraGit/events{/privacy}","received_events_url":"https://api.github.com/users/ArjaraGit/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-02-05T10:45:42Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030852432","html_url":"https://github.com/WLM1ke/poptimizer/issues/101#issuecomment-1030852432","issue_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/101","id":1030852432,"node_id":"IC_kwDOCYyMws49cY9Q","user":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false},"created_at":"2022-02-06T15:15:26Z","updated_at":"2022-02-06T15:15:26Z","author_association":"OWNER","body":"Вроде на MOEX все починилось","reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/comments/1030852432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false}}]