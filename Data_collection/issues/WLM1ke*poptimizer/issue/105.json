{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/105","repository_url":"https://api.github.com/repos/WLM1ke/poptimizer","labels_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/105/labels{/name}","comments_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/105/comments","events_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/105/events","html_url":"https://github.com/WLM1ke/poptimizer/issues/105","id":1201978662,"node_id":"I_kwDOCYyMws5HpL0m","number":105,"title":"Ошибка при загрузке данных ","user":{"login":"swpman","id":22314161,"node_id":"MDQ6VXNlcjIyMzE0MTYx","avatar_url":"https://avatars.githubusercontent.com/u/22314161?v=4","gravatar_id":"","url":"https://api.github.com/users/swpman","html_url":"https://github.com/swpman","followers_url":"https://api.github.com/users/swpman/followers","following_url":"https://api.github.com/users/swpman/following{/other_user}","gists_url":"https://api.github.com/users/swpman/gists{/gist_id}","starred_url":"https://api.github.com/users/swpman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swpman/subscriptions","organizations_url":"https://api.github.com/users/swpman/orgs","repos_url":"https://api.github.com/users/swpman/repos","events_url":"https://api.github.com/users/swpman/events{/privacy}","received_events_url":"https://api.github.com/users/swpman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-12T14:58:18Z","updated_at":"2022-04-12T15:11:53Z","closed_at":"2022-04-12T15:11:53Z","author_association":"NONE","active_lock_reason":null,"body":"DateCheckRequired(timestamp=datetime.datetime(2022, 4, 12, 14, 50, 3, 162156))\r\n\r\nЗагрузка данных по торговым дням\r\n\r\nСохранение ID(package='data', group='trading_dates', name='trading_dates')\r\n\r\nTradingDayEnded(date=datetime.date(2022, 4, 11))\r\n\r\nЗагрузка инфляции\r\n\r\nЗагрузка данных\r\n\r\n(2022-04-11, 2022-04-11)\r\n\r\nЗагрузка данных\r\n\r\nСохранение ID(package='data', group='div_new', name='div_new')\r\n\r\nСохранение ID(package='data', group='usd', name='usd')Сохранение ID(package='data', group='usd', name='usd')\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/PATH_TO/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n\r\n    return _run_code(code, main_globals, None,\r\n\r\n  File \"/PATH_TO/python3.9/runpy.py\", line 87, in _run_code\r\n\r\n    exec(code, run_globals)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/__main__.py\", line 7, in <module>\r\n\r\n    from poptimizer.data.views import div_status\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/views/div_status.py\", line 10, in <module>\r\n\r\n    from poptimizer.data.app import bootstrap, viewers\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/app/bootstrap.py\", line 47, in <module>\r\n\r\n    BUS, VIEWER = start_app()\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/app/bootstrap.py\", line 42, in start_app\r\n\r\n    bus.handle_event(event)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/shared/app.py\", line 74, in handle_event\r\n\r\n    loop.run_until_complete(self._handle_event(event))\r\n\r\n  File \"/PATH_TO/python3.9/asyncio/base_events.py\", line 642, in run_until_complete\r\n\r\n    return future.result()\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/shared/app.py\", line 89, in _handle_event\r\n\r\n    pending |= self._create_tasks(task.result())\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/shared/app.py\", line 100, in _handle_one_command\r\n\r\n    return await self._event_handler.handle_event(event, repo)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/domain/handlers.py\", line 73, in trading_day_ended\r\n\r\n    *itertools.chain.from_iterable(await asyncio.gather(*aws)),\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/domain/handlers.py\", line 29, in _load_by_id_and_handle_event\r\n\r\n    return await table.handle_event(event)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/domain/tables/base.py\", line 71, in handle_event\r\n\r\n    df_new = await self._prepare_df(event)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/domain/tables/cpi.py\", line 32, in _prepare_df\r\n\r\n    return await self._gateway()\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/adapters/gateways/cpi.py\", line 99, in __call__\r\n\r\n    df = await _load_and_parse_xlsx(self._session)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/adapters/gateways/cpi.py\", line 38, in _load_and_parse_xlsx\r\n\r\n    page = await _loap_cpi_page(session)\r\n\r\n  File \"/PATH_TO/poptimizer/poptimizer/data/adapters/gateways/cpi.py\", line 55, in _loap_cpi_page\r\n\r\n    return await resp.text(\"cp1251\")\r\n\r\n  File \"/PATH_TO/python3.9/site-packages/aiohttp/client_reqrep.py\", line 1085, in text\r\n\r\n    return self._body.decode(  # type: ignore[no-any-return,union-attr]\r\n\r\n  File \"/PATH_TO/python3.9/encodings/cp1251.py\", line 15, in decode\r\n\r\n    return codecs.charmap_decode(input,errors,decoding_table)\r\n\r\nUnicodeDecodeError: 'charmap' codec can't decode byte 0x98 in position 4050: character maps to <undefined>","closed_by":{"login":"WLM1ke","id":35304528,"node_id":"MDQ6VXNlcjM1MzA0NTI4","avatar_url":"https://avatars.githubusercontent.com/u/35304528?v=4","gravatar_id":"","url":"https://api.github.com/users/WLM1ke","html_url":"https://github.com/WLM1ke","followers_url":"https://api.github.com/users/WLM1ke/followers","following_url":"https://api.github.com/users/WLM1ke/following{/other_user}","gists_url":"https://api.github.com/users/WLM1ke/gists{/gist_id}","starred_url":"https://api.github.com/users/WLM1ke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WLM1ke/subscriptions","organizations_url":"https://api.github.com/users/WLM1ke/orgs","repos_url":"https://api.github.com/users/WLM1ke/repos","events_url":"https://api.github.com/users/WLM1ke/events{/privacy}","received_events_url":"https://api.github.com/users/WLM1ke/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/105/timeline","performed_via_github_app":null,"state_reason":"completed"}