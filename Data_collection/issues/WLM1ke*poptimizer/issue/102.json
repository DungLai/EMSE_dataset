{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/102","repository_url":"https://api.github.com/repos/WLM1ke/poptimizer","labels_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/102/labels{/name}","comments_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/102/comments","events_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/102/events","html_url":"https://github.com/WLM1ke/poptimizer/issues/102","id":1124875958,"node_id":"I_kwDOCYyMws5DDD62","number":102,"title":"проблема загрузки данных https://www.moex.com/ru/listing/listing-register-closing.aspx","user":{"login":"swpman","id":22314161,"node_id":"MDQ6VXNlcjIyMzE0MTYx","avatar_url":"https://avatars.githubusercontent.com/u/22314161?v=4","gravatar_id":"","url":"https://api.github.com/users/swpman","html_url":"https://github.com/swpman","followers_url":"https://api.github.com/users/swpman/followers","following_url":"https://api.github.com/users/swpman/following{/other_user}","gists_url":"https://api.github.com/users/swpman/gists{/gist_id}","starred_url":"https://api.github.com/users/swpman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swpman/subscriptions","organizations_url":"https://api.github.com/users/swpman/orgs","repos_url":"https://api.github.com/users/swpman/repos","events_url":"https://api.github.com/users/swpman/events{/privacy}","received_events_url":"https://api.github.com/users/swpman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-02-05T08:58:34Z","updated_at":"2022-02-07T09:05:19Z","closed_at":"2022-02-07T09:05:19Z","author_association":"NONE","active_lock_reason":null,"body":"Загрузка данных по торговым дням\r\nСохранение ID(package='data', group='trading_dates', name='trading_dates')\r\nTradingDayEnded(date=datetime.date(2022, 2, 4))\r\nЗагрузка инфляции\r\nЗагрузка данных\r\nЗагрузка данных\r\n(2022-02-04, 2022-02-04)\r\nЗагрузка данных\r\nСохранение ID(package='data', group='usd', name='usd')\r\nСохранение ID(package='data', group='risk_free', name='risk_free')\r\nСохранение ID(package='data', group='CPI', name='CPI')\r\nTraceback (most recent call last):\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\adapters\\html\\parser.py\", line 33, in _get_table_from_html\r\n    table = soup.find_all(\"table\")[table_num]\r\nIndexError: list index out of range\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\PythonProjects\\anaconda3\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"D:\\PythonProjects\\anaconda3\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\__main__.py\", line 7, in <module>\r\n    from poptimizer.data.views import div_status\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\views\\div_status.py\", line 10, in <module>\r\n    from poptimizer.data.app import bootstrap, viewers\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\app\\bootstrap.py\", line 47, in <module>\r\n    BUS, VIEWER = start_app()\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\app\\bootstrap.py\", line 42, in start_app\r\n    bus.handle_event(event)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\shared\\app.py\", line 74, in handle_event\r\n    loop.run_until_complete(self._handle_event(event))\r\n  File \"D:\\PythonProjects\\anaconda3\\lib\\asyncio\\base_events.py\", line 642, in run_until_complete\r\n    return future.result()\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\shared\\app.py\", line 89, in _handle_event\r\n    pending |= self._create_tasks(task.result())\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\shared\\app.py\", line 100, in _handle_one_command\r\n    return await self._event_handler.handle_event(event, repo)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\domain\\handlers.py\", line 69, in trading_day_ended\r\n    *itertools.chain.from_iterable(await asyncio.gather(*aws)),\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\domain\\handlers.py\", line 29, in _load_by_id_and_handle_event\r\n    return await table.handle_event(event)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\domain\\tables\\base.py\", line 71, in handle_event\r\n    df_new = await self._prepare_df(event)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\domain\\tables\\dividends.py\", line 90, in _prepare_df\r\n    dfs = [await gw() for gw in self._gateways]\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\domain\\tables\\dividends.py\", line 90, in <listcomp>\r\n    dfs = [await gw() for gw in self._gateways]\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\adapters\\gateways\\moex_status.py\", line 57, in __call__\r\n    df = await parser.get_df_from_url(URL, TABLE_INDEX, cols_desc)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\adapters\\html\\parser.py\", line 87, in get_df_from_url\r\n    return get_df_from_html(html, table_num, cols_desc)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\adapters\\html\\parser.py\", line 78, in get_df_from_html\r\n    table = _get_table_from_html(html, table_num)\r\n  File \"%PATH_TO%\\poptimizer\\poptimizer\\data\\adapters\\html\\parser.py\", line 35, in _get_table_from_html\r\n    raise description.ParserError(f\"На странице нет таблицы {table_num}\")\r\npoptimizer.data.adapters.html.description.ParserError: На странице нет таблицы 2\r\n\r\nВидимо что то поменяли...","closed_by":{"login":"swpman","id":22314161,"node_id":"MDQ6VXNlcjIyMzE0MTYx","avatar_url":"https://avatars.githubusercontent.com/u/22314161?v=4","gravatar_id":"","url":"https://api.github.com/users/swpman","html_url":"https://github.com/swpman","followers_url":"https://api.github.com/users/swpman/followers","following_url":"https://api.github.com/users/swpman/following{/other_user}","gists_url":"https://api.github.com/users/swpman/gists{/gist_id}","starred_url":"https://api.github.com/users/swpman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swpman/subscriptions","organizations_url":"https://api.github.com/users/swpman/orgs","repos_url":"https://api.github.com/users/swpman/repos","events_url":"https://api.github.com/users/swpman/events{/privacy}","received_events_url":"https://api.github.com/users/swpman/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/WLM1ke/poptimizer/issues/102/timeline","performed_via_github_app":null,"state_reason":"completed"}