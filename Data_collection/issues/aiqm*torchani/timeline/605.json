[{"url":"https://api.github.com/repos/aiqm/torchani/issues/comments/991133093","html_url":"https://github.com/aiqm/torchani/issues/605#issuecomment-991133093","issue_url":"https://api.github.com/repos/aiqm/torchani/issues/605","id":991133093,"node_id":"IC_kwDOB5237M47E32l","user":{"login":"isayev","id":3207981,"node_id":"MDQ6VXNlcjMyMDc5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3207981?v=4","gravatar_id":"","url":"https://api.github.com/users/isayev","html_url":"https://github.com/isayev","followers_url":"https://api.github.com/users/isayev/followers","following_url":"https://api.github.com/users/isayev/following{/other_user}","gists_url":"https://api.github.com/users/isayev/gists{/gist_id}","starred_url":"https://api.github.com/users/isayev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isayev/subscriptions","organizations_url":"https://api.github.com/users/isayev/orgs","repos_url":"https://api.github.com/users/isayev/repos","events_url":"https://api.github.com/users/isayev/events{/privacy}","received_events_url":"https://api.github.com/users/isayev/received_events","type":"User","site_admin":false},"created_at":"2021-12-10T16:53:39Z","updated_at":"2021-12-10T16:53:39Z","author_association":"MEMBER","body":"Your definition of the periodic system is incorrect. This must pass (3, 3) matrix of cell vectors to `cell` variable and boolean vector of size 3 to `pbc` if you want to have periodicity in all 3 dimensions. ","reactions":{"url":"https://api.github.com/repos/aiqm/torchani/issues/comments/991133093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"isayev","id":3207981,"node_id":"MDQ6VXNlcjMyMDc5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3207981?v=4","gravatar_id":"","url":"https://api.github.com/users/isayev","html_url":"https://github.com/isayev","followers_url":"https://api.github.com/users/isayev/followers","following_url":"https://api.github.com/users/isayev/following{/other_user}","gists_url":"https://api.github.com/users/isayev/gists{/gist_id}","starred_url":"https://api.github.com/users/isayev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isayev/subscriptions","organizations_url":"https://api.github.com/users/isayev/orgs","repos_url":"https://api.github.com/users/isayev/repos","events_url":"https://api.github.com/users/isayev/events{/privacy}","received_events_url":"https://api.github.com/users/isayev/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/aiqm/torchani/issues/comments/991839790","html_url":"https://github.com/aiqm/torchani/issues/605#issuecomment-991839790","issue_url":"https://api.github.com/repos/aiqm/torchani/issues/605","id":991839790,"node_id":"IC_kwDOB5237M47HkYu","user":{"login":"zubatyuk","id":4084163,"node_id":"MDQ6VXNlcjQwODQxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/4084163?v=4","gravatar_id":"","url":"https://api.github.com/users/zubatyuk","html_url":"https://github.com/zubatyuk","followers_url":"https://api.github.com/users/zubatyuk/followers","following_url":"https://api.github.com/users/zubatyuk/following{/other_user}","gists_url":"https://api.github.com/users/zubatyuk/gists{/gist_id}","starred_url":"https://api.github.com/users/zubatyuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zubatyuk/subscriptions","organizations_url":"https://api.github.com/users/zubatyuk/orgs","repos_url":"https://api.github.com/users/zubatyuk/repos","events_url":"https://api.github.com/users/zubatyuk/events{/privacy}","received_events_url":"https://api.github.com/users/zubatyuk/received_events","type":"User","site_admin":false},"created_at":"2021-12-12T05:55:34Z","updated_at":"2021-12-12T05:55:34Z","author_association":"CONTRIBUTOR","body":"Samuel: the current implementation of PBC in TorchANI is not 'batched', you\ncan not do a batch of crystals.\n\nOn Fri, Dec 10, 2021 at 11:53 AM Olexandr Isayev ***@***.***>\nwrote:\n\n> Your definition of the periodic system is incorrect. This must pass (3, 3)\n> matrix of cell vectors to cell variable and boolean vector of size 3 to\n> pbc if you want to have periodicity in all 3 dimensions.\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/aiqm/torchani/issues/605#issuecomment-991133093>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AA7FDQ4NBRDWHGFZLKHIYCLUQIWB5ANCNFSM5JZPAGZQ>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","reactions":{"url":"https://api.github.com/repos/aiqm/torchani/issues/comments/991839790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zubatyuk","id":4084163,"node_id":"MDQ6VXNlcjQwODQxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/4084163?v=4","gravatar_id":"","url":"https://api.github.com/users/zubatyuk","html_url":"https://github.com/zubatyuk","followers_url":"https://api.github.com/users/zubatyuk/followers","following_url":"https://api.github.com/users/zubatyuk/following{/other_user}","gists_url":"https://api.github.com/users/zubatyuk/gists{/gist_id}","starred_url":"https://api.github.com/users/zubatyuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zubatyuk/subscriptions","organizations_url":"https://api.github.com/users/zubatyuk/orgs","repos_url":"https://api.github.com/users/zubatyuk/repos","events_url":"https://api.github.com/users/zubatyuk/events{/privacy}","received_events_url":"https://api.github.com/users/zubatyuk/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/aiqm/torchani/issues/comments/1004179380","html_url":"https://github.com/aiqm/torchani/issues/605#issuecomment-1004179380","issue_url":"https://api.github.com/repos/aiqm/torchani/issues/605","id":1004179380,"node_id":"IC_kwDOB5237M472o-0","user":{"login":"SamTov","id":47057691,"node_id":"MDQ6VXNlcjQ3MDU3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/47057691?v=4","gravatar_id":"","url":"https://api.github.com/users/SamTov","html_url":"https://github.com/SamTov","followers_url":"https://api.github.com/users/SamTov/followers","following_url":"https://api.github.com/users/SamTov/following{/other_user}","gists_url":"https://api.github.com/users/SamTov/gists{/gist_id}","starred_url":"https://api.github.com/users/SamTov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamTov/subscriptions","organizations_url":"https://api.github.com/users/SamTov/orgs","repos_url":"https://api.github.com/users/SamTov/repos","events_url":"https://api.github.com/users/SamTov/events{/privacy}","received_events_url":"https://api.github.com/users/SamTov/received_events","type":"User","site_admin":false},"created_at":"2022-01-03T15:44:53Z","updated_at":"2022-01-03T15:44:53Z","author_association":"NONE","body":"Perfect, thank you for the feedback. ","reactions":{"url":"https://api.github.com/repos/aiqm/torchani/issues/comments/1004179380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SamTov","id":47057691,"node_id":"MDQ6VXNlcjQ3MDU3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/47057691?v=4","gravatar_id":"","url":"https://api.github.com/users/SamTov","html_url":"https://github.com/SamTov","followers_url":"https://api.github.com/users/SamTov/followers","following_url":"https://api.github.com/users/SamTov/following{/other_user}","gists_url":"https://api.github.com/users/SamTov/gists{/gist_id}","starred_url":"https://api.github.com/users/SamTov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamTov/subscriptions","organizations_url":"https://api.github.com/users/SamTov/orgs","repos_url":"https://api.github.com/users/SamTov/repos","events_url":"https://api.github.com/users/SamTov/events{/privacy}","received_events_url":"https://api.github.com/users/SamTov/received_events","type":"User","site_admin":false}},{"id":5835934998,"node_id":"CE_lADOB5237M5AMab0zwAAAAFb2U0W","url":"https://api.github.com/repos/aiqm/torchani/issues/events/5835934998","actor":{"login":"SamTov","id":47057691,"node_id":"MDQ6VXNlcjQ3MDU3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/47057691?v=4","gravatar_id":"","url":"https://api.github.com/users/SamTov","html_url":"https://github.com/SamTov","followers_url":"https://api.github.com/users/SamTov/followers","following_url":"https://api.github.com/users/SamTov/following{/other_user}","gists_url":"https://api.github.com/users/SamTov/gists{/gist_id}","starred_url":"https://api.github.com/users/SamTov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamTov/subscriptions","organizations_url":"https://api.github.com/users/SamTov/orgs","repos_url":"https://api.github.com/users/SamTov/repos","events_url":"https://api.github.com/users/SamTov/events{/privacy}","received_events_url":"https://api.github.com/users/SamTov/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-01-03T15:44:53Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"rschireman","id":41241487,"node_id":"MDQ6VXNlcjQxMjQxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/41241487?v=4","gravatar_id":"","url":"https://api.github.com/users/rschireman","html_url":"https://github.com/rschireman","followers_url":"https://api.github.com/users/rschireman/followers","following_url":"https://api.github.com/users/rschireman/following{/other_user}","gists_url":"https://api.github.com/users/rschireman/gists{/gist_id}","starred_url":"https://api.github.com/users/rschireman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rschireman/subscriptions","organizations_url":"https://api.github.com/users/rschireman/orgs","repos_url":"https://api.github.com/users/rschireman/repos","events_url":"https://api.github.com/users/rschireman/events{/privacy}","received_events_url":"https://api.github.com/users/rschireman/received_events","type":"User","site_admin":false},"created_at":"2022-03-16T17:55:52Z","updated_at":"2022-03-16T17:55:52Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/aiqm/torchani/issues/613","repository_url":"https://api.github.com/repos/aiqm/torchani","labels_url":"https://api.github.com/repos/aiqm/torchani/issues/613/labels{/name}","comments_url":"https://api.github.com/repos/aiqm/torchani/issues/613/comments","events_url":"https://api.github.com/repos/aiqm/torchani/issues/613/events","html_url":"https://github.com/aiqm/torchani/issues/613","id":1171358408,"node_id":"I_kwDOB5237M5F0YLI","number":613,"title":"Training with a batch of crystals","user":{"login":"rschireman","id":41241487,"node_id":"MDQ6VXNlcjQxMjQxNDg3","avatar_url":"https://avatars.githubusercontent.com/u/41241487?v=4","gravatar_id":"","url":"https://api.github.com/users/rschireman","html_url":"https://github.com/rschireman","followers_url":"https://api.github.com/users/rschireman/followers","following_url":"https://api.github.com/users/rschireman/following{/other_user}","gists_url":"https://api.github.com/users/rschireman/gists{/gist_id}","starred_url":"https://api.github.com/users/rschireman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rschireman/subscriptions","organizations_url":"https://api.github.com/users/rschireman/orgs","repos_url":"https://api.github.com/users/rschireman/repos","events_url":"https://api.github.com/users/rschireman/events{/privacy}","received_events_url":"https://api.github.com/users/rschireman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-16T17:55:51Z","updated_at":"2022-04-12T18:07:37Z","closed_at":"2022-04-12T18:07:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"repository":{"id":127776748,"node_id":"MDEwOlJlcG9zaXRvcnkxMjc3NzY3NDg=","name":"torchani","full_name":"aiqm/torchani","private":false,"owner":{"login":"aiqm","id":40004880,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwMDA0ODgw","avatar_url":"https://avatars.githubusercontent.com/u/40004880?v=4","gravatar_id":"","url":"https://api.github.com/users/aiqm","html_url":"https://github.com/aiqm","followers_url":"https://api.github.com/users/aiqm/followers","following_url":"https://api.github.com/users/aiqm/following{/other_user}","gists_url":"https://api.github.com/users/aiqm/gists{/gist_id}","starred_url":"https://api.github.com/users/aiqm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiqm/subscriptions","organizations_url":"https://api.github.com/users/aiqm/orgs","repos_url":"https://api.github.com/users/aiqm/repos","events_url":"https://api.github.com/users/aiqm/events{/privacy}","received_events_url":"https://api.github.com/users/aiqm/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/aiqm/torchani","description":"Accurate Neural Network Potential on PyTorch","fork":false,"url":"https://api.github.com/repos/aiqm/torchani","forks_url":"https://api.github.com/repos/aiqm/torchani/forks","keys_url":"https://api.github.com/repos/aiqm/torchani/keys{/key_id}","collaborators_url":"https://api.github.com/repos/aiqm/torchani/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/aiqm/torchani/teams","hooks_url":"https://api.github.com/repos/aiqm/torchani/hooks","issue_events_url":"https://api.github.com/repos/aiqm/torchani/issues/events{/number}","events_url":"https://api.github.com/repos/aiqm/torchani/events","assignees_url":"https://api.github.com/repos/aiqm/torchani/assignees{/user}","branches_url":"https://api.github.com/repos/aiqm/torchani/branches{/branch}","tags_url":"https://api.github.com/repos/aiqm/torchani/tags","blobs_url":"https://api.github.com/repos/aiqm/torchani/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/aiqm/torchani/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/aiqm/torchani/git/refs{/sha}","trees_url":"https://api.github.com/repos/aiqm/torchani/git/trees{/sha}","statuses_url":"https://api.github.com/repos/aiqm/torchani/statuses/{sha}","languages_url":"https://api.github.com/repos/aiqm/torchani/languages","stargazers_url":"https://api.github.com/repos/aiqm/torchani/stargazers","contributors_url":"https://api.github.com/repos/aiqm/torchani/contributors","subscribers_url":"https://api.github.com/repos/aiqm/torchani/subscribers","subscription_url":"https://api.github.com/repos/aiqm/torchani/subscription","commits_url":"https://api.github.com/repos/aiqm/torchani/commits{/sha}","git_commits_url":"https://api.github.com/repos/aiqm/torchani/git/commits{/sha}","comments_url":"https://api.github.com/repos/aiqm/torchani/comments{/number}","issue_comment_url":"https://api.github.com/repos/aiqm/torchani/issues/comments{/number}","contents_url":"https://api.github.com/repos/aiqm/torchani/contents/{+path}","compare_url":"https://api.github.com/repos/aiqm/torchani/compare/{base}...{head}","merges_url":"https://api.github.com/repos/aiqm/torchani/merges","archive_url":"https://api.github.com/repos/aiqm/torchani/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/aiqm/torchani/downloads","issues_url":"https://api.github.com/repos/aiqm/torchani/issues{/number}","pulls_url":"https://api.github.com/repos/aiqm/torchani/pulls{/number}","milestones_url":"https://api.github.com/repos/aiqm/torchani/milestones{/number}","notifications_url":"https://api.github.com/repos/aiqm/torchani/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/aiqm/torchani/labels{/name}","releases_url":"https://api.github.com/repos/aiqm/torchani/releases{/id}","deployments_url":"https://api.github.com/repos/aiqm/torchani/deployments","created_at":"2018-04-02T15:43:04Z","updated_at":"2023-01-13T12:48:18Z","pushed_at":"2022-11-10T21:04:28Z","git_url":"git://github.com/aiqm/torchani.git","ssh_url":"git@github.com:aiqm/torchani.git","clone_url":"https://github.com/aiqm/torchani.git","svn_url":"https://github.com/aiqm/torchani","homepage":"https://aiqm.github.io/torchani/","size":77541,"stargazers_count":365,"watchers_count":365,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":99,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":17,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["deep-learning","force-field","molecular-simulation","neural-network","quantum-chemistry","quantum-mechanics"],"visibility":"public","forks":99,"open_issues":17,"watchers":365,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi all,\r\n\r\nI see that from #605, the PBC implementation in torchani is not batched, or only supports a batch size of 1. I have modified my database to include the 3x3 cell matrix for each structure and can successfully load species, coordinates, energies, forces, and cells with `torchani.data.load`.\r\n\r\nBut, now the dimensions when the batch size is not 1 are not compatible with functions in `aev.py`. I'm more than happy to contribute and submit a pull request, but I wanted to reach out to make sure this wasn't already being developed and to also ask for some guidance. I'm mostly stuck on how to make the returned quantity from `compute_shifts(cell: Tensor, pbc: Tensor, cutoff: float) -> Tensor:` compatible with this line:\r\n\r\n`aev = compute_aev(species, coordinates, self.triu_index, self.constants(), self.sizes, (cell, shifts))`\r\n\r\nThank you,\r\nRay","reactions":{"url":"https://api.github.com/repos/aiqm/torchani/issues/613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/aiqm/torchani/issues/613/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]