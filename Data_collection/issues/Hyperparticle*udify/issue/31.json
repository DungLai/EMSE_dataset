{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/31","repository_url":"https://api.github.com/repos/Hyperparticle/udify","labels_url":"https://api.github.com/repos/Hyperparticle/udify/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/Hyperparticle/udify/issues/31/comments","events_url":"https://api.github.com/repos/Hyperparticle/udify/issues/31/events","html_url":"https://github.com/Hyperparticle/udify/issues/31","id":1229022217,"node_id":"I_kwDOCrACu85JQWQJ","number":31,"title":"Issue with AllenNLP integration causes predict to not work (ArrayField.empty_field)","user":{"login":"ftyers","id":449545,"node_id":"MDQ6VXNlcjQ0OTU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/449545?v=4","gravatar_id":"","url":"https://api.github.com/users/ftyers","html_url":"https://github.com/ftyers","followers_url":"https://api.github.com/users/ftyers/followers","following_url":"https://api.github.com/users/ftyers/following{/other_user}","gists_url":"https://api.github.com/users/ftyers/gists{/gist_id}","starred_url":"https://api.github.com/users/ftyers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ftyers/subscriptions","organizations_url":"https://api.github.com/users/ftyers/orgs","repos_url":"https://api.github.com/users/ftyers/repos","events_url":"https://api.github.com/users/ftyers/events{/privacy}","received_events_url":"https://api.github.com/users/ftyers/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-05-08T23:56:25Z","updated_at":"2022-12-20T15:02:35Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"When I try to run a clean checkout of UDify, I get the following error:\r\n\r\n```\r\n(udify-venv) fran@tlazolteotl /var/lib/home/fran/source/udify $ python predict.py udify-model.tar.gz  data/UD_Kiche-IU/quc_iu-ud-test.conllu logs/pred.conllu --eval_file logs/pred.json\r\nTraceback (most recent call last):\r\n  File \"predict.py\", line 14, in <module>\r\n    from allennlp.models.archival import archive_model\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/models/__init__.py\", line 6, in <module>\r\n    from allennlp.models.model import Model\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/models/model.py\", line 16, in <module>\r\n    from allennlp.data import Instance, Vocabulary\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/__init__.py\", line 1, in <module>\r\n    from allennlp.data.dataset_readers.dataset_reader import DatasetReader\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/dataset_readers/__init__.py\", line 10, in <module>\r\n    from allennlp.data.dataset_readers.ccgbank import CcgBankDatasetReader\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/dataset_readers/ccgbank.py\", line 9, in <module>\r\n    from allennlp.data.dataset_readers.dataset_reader import DatasetReader\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/dataset_readers/dataset_reader.py\", line 8, in <module>\r\n    from allennlp.data.instance import Instance\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/instance.py\", line 3, in <module>\r\n    from allennlp.data.fields.field import DataArray, Field\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/fields/__init__.py\", line 7, in <module>\r\n    from allennlp.data.fields.array_field import ArrayField\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/fields/array_field.py\", line 10, in <module>\r\n    class ArrayField(Field[numpy.ndarray]):\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/allennlp/data/fields/array_field.py\", line 50, in ArrayField\r\n    @overrides\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/overrides/overrides.py\", line 88, in overrides\r\n    return _overrides(method, check_signature, check_at_runtime)\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/overrides/overrides.py\", line 114, in _overrides\r\n    _validate_method(method, super_class, check_signature)\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/overrides/overrides.py\", line 135, in _validate_method\r\n    ensure_signature_is_compatible(super_method, method, is_static)\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/overrides/signature.py\", line 93, in ensure_signature_is_compatible\r\n    ensure_return_type_compatibility(super_type_hints, sub_type_hints, method_name)\r\n  File \"/mnt/partuuid-46caa556-c2c4-eb47-907a-5d2092050724/var/lib/home/fran/source/udify-venv/lib/python3.7/site-packages/overrides/signature.py\", line 288, in ensure_return_type_compatibility\r\n    f\"{method_name}: return type `{sub_return}` is not a `{super_return}`.\"\r\nTypeError: ArrayField.empty_field: return type `None` is not a `<class 'allennlp.data.fields.field.Field'>`.\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Hyperparticle/udify/issues/31/timeline","performed_via_github_app":null,"state_reason":null}