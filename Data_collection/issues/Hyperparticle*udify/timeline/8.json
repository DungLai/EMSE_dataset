[{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/555307232","html_url":"https://github.com/Hyperparticle/udify/issues/8#issuecomment-555307232","issue_url":"https://api.github.com/repos/Hyperparticle/udify/issues/8","id":555307232,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTMwNzIzMg==","user":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T02:46:06Z","updated_at":"2019-11-19T02:46:06Z","author_association":"OWNER","body":"It's not strictly necessary to use the conllu predictor, it's just there for convenience for evaluation. All the logic for sentence input and prediction output can be found in [predictor.py](https://github.com/Hyperparticle/udify/blob/master/udify/predictors/predictor.py). The `_json_to_instance()` is probably what you are interested in, which takes as input a json dict with a sentence as input, which you can then tokenize (AllenNLP provides a Spacy tokenizer which can be used for multilingual text), and then pass to the dataset reader. I can get you a simple example working soon.","reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/555307232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/555322718","html_url":"https://github.com/Hyperparticle/udify/issues/8#issuecomment-555322718","issue_url":"https://api.github.com/repos/Hyperparticle/udify/issues/8","id":555322718,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTMyMjcxOA==","user":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T04:01:17Z","updated_at":"2019-11-19T04:01:17Z","author_association":"OWNER","body":"I added a new option `--raw_text` to `predict.py` that can take an input file of one sentence per line and output one json annotation object per line.\r\n\r\nHope this helps. Let me know if you need any additional help.","reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/555322718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false}},{"id":2809930578,"node_id":"MDExOkNsb3NlZEV2ZW50MjgwOTkzMDU3OA==","url":"https://api.github.com/repos/Hyperparticle/udify/issues/events/2809930578","actor":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-11-19T04:01:36Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/555400108","html_url":"https://github.com/Hyperparticle/udify/issues/8#issuecomment-555400108","issue_url":"https://api.github.com/repos/Hyperparticle/udify/issues/8","id":555400108,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTQwMDEwOA==","user":{"login":"drunkinlove","id":31738272,"node_id":"MDQ6VXNlcjMxNzM4Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/31738272?v=4","gravatar_id":"","url":"https://api.github.com/users/drunkinlove","html_url":"https://github.com/drunkinlove","followers_url":"https://api.github.com/users/drunkinlove/followers","following_url":"https://api.github.com/users/drunkinlove/following{/other_user}","gists_url":"https://api.github.com/users/drunkinlove/gists{/gist_id}","starred_url":"https://api.github.com/users/drunkinlove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drunkinlove/subscriptions","organizations_url":"https://api.github.com/users/drunkinlove/orgs","repos_url":"https://api.github.com/users/drunkinlove/repos","events_url":"https://api.github.com/users/drunkinlove/events{/privacy}","received_events_url":"https://api.github.com/users/drunkinlove/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T08:55:24Z","updated_at":"2019-11-19T08:55:24Z","author_association":"NONE","body":"great, thanks a lot!","reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/555400108/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"drunkinlove","id":31738272,"node_id":"MDQ6VXNlcjMxNzM4Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/31738272?v=4","gravatar_id":"","url":"https://api.github.com/users/drunkinlove","html_url":"https://github.com/drunkinlove","followers_url":"https://api.github.com/users/drunkinlove/followers","following_url":"https://api.github.com/users/drunkinlove/following{/other_user}","gists_url":"https://api.github.com/users/drunkinlove/gists{/gist_id}","starred_url":"https://api.github.com/users/drunkinlove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drunkinlove/subscriptions","organizations_url":"https://api.github.com/users/drunkinlove/orgs","repos_url":"https://api.github.com/users/drunkinlove/repos","events_url":"https://api.github.com/users/drunkinlove/events{/privacy}","received_events_url":"https://api.github.com/users/drunkinlove/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/581728583","html_url":"https://github.com/Hyperparticle/udify/issues/8#issuecomment-581728583","issue_url":"https://api.github.com/repos/Hyperparticle/udify/issues/8","id":581728583,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTcyODU4Mw==","user":{"login":"jzhou316","id":31744226,"node_id":"MDQ6VXNlcjMxNzQ0MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31744226?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhou316","html_url":"https://github.com/jzhou316","followers_url":"https://api.github.com/users/jzhou316/followers","following_url":"https://api.github.com/users/jzhou316/following{/other_user}","gists_url":"https://api.github.com/users/jzhou316/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhou316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhou316/subscriptions","organizations_url":"https://api.github.com/users/jzhou316/orgs","repos_url":"https://api.github.com/users/jzhou316/repos","events_url":"https://api.github.com/users/jzhou316/events{/privacy}","received_events_url":"https://api.github.com/users/jzhou316/received_events","type":"User","site_admin":false},"created_at":"2020-02-04T03:39:25Z","updated_at":"2020-02-04T03:39:58Z","author_association":"NONE","body":"Hi I also found that the option to directly input a raw text file for prediction very useful. Thanks for that! I have another small question, which is related to tokenization and BPE encoding. For example, if my text file is already tokenized (with some of my own tokenizer) and split by BPE, does it still work? And how are the BPE sub-words handled in the word-level tag prediction?","reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/581728583/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jzhou316","id":31744226,"node_id":"MDQ6VXNlcjMxNzQ0MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31744226?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhou316","html_url":"https://github.com/jzhou316","followers_url":"https://api.github.com/users/jzhou316/followers","following_url":"https://api.github.com/users/jzhou316/following{/other_user}","gists_url":"https://api.github.com/users/jzhou316/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhou316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhou316/subscriptions","organizations_url":"https://api.github.com/users/jzhou316/orgs","repos_url":"https://api.github.com/users/jzhou316/repos","events_url":"https://api.github.com/users/jzhou316/events{/privacy}","received_events_url":"https://api.github.com/users/jzhou316/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/582043875","html_url":"https://github.com/Hyperparticle/udify/issues/8#issuecomment-582043875","issue_url":"https://api.github.com/repos/Hyperparticle/udify/issues/8","id":582043875,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjA0Mzg3NQ==","user":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false},"created_at":"2020-02-04T18:15:07Z","updated_at":"2020-02-04T18:15:07Z","author_association":"OWNER","body":"The text should work if it is tokenized, though if you already split with BPE I'm not sure what will happen. You could either recombine the words so that they can be split by the model (easy) or you could modify the tokenizer code in the repo to bypass the BPE step (harder).\r\n\r\nThe BPE subword embeddings are all discarded except for the first subword which is used to represent the information content of the whole word. In my experiments, I found no discernible difference between using the first, last, or average of all embeddings. This is also explained in the paper, and there's existing work which report similar findings.","reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/582043875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Hyperparticle","id":8497170,"node_id":"MDQ6VXNlcjg0OTcxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/8497170?v=4","gravatar_id":"","url":"https://api.github.com/users/Hyperparticle","html_url":"https://github.com/Hyperparticle","followers_url":"https://api.github.com/users/Hyperparticle/followers","following_url":"https://api.github.com/users/Hyperparticle/following{/other_user}","gists_url":"https://api.github.com/users/Hyperparticle/gists{/gist_id}","starred_url":"https://api.github.com/users/Hyperparticle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hyperparticle/subscriptions","organizations_url":"https://api.github.com/users/Hyperparticle/orgs","repos_url":"https://api.github.com/users/Hyperparticle/repos","events_url":"https://api.github.com/users/Hyperparticle/events{/privacy}","received_events_url":"https://api.github.com/users/Hyperparticle/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/582221530","html_url":"https://github.com/Hyperparticle/udify/issues/8#issuecomment-582221530","issue_url":"https://api.github.com/repos/Hyperparticle/udify/issues/8","id":582221530,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjIyMTUzMA==","user":{"login":"jzhou316","id":31744226,"node_id":"MDQ6VXNlcjMxNzQ0MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31744226?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhou316","html_url":"https://github.com/jzhou316","followers_url":"https://api.github.com/users/jzhou316/followers","following_url":"https://api.github.com/users/jzhou316/following{/other_user}","gists_url":"https://api.github.com/users/jzhou316/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhou316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhou316/subscriptions","organizations_url":"https://api.github.com/users/jzhou316/orgs","repos_url":"https://api.github.com/users/jzhou316/repos","events_url":"https://api.github.com/users/jzhou316/events{/privacy}","received_events_url":"https://api.github.com/users/jzhou316/received_events","type":"User","site_admin":false},"created_at":"2020-02-05T03:15:28Z","updated_at":"2020-02-05T03:15:28Z","author_association":"NONE","body":"Thanks for the clarification! That really helps.","reactions":{"url":"https://api.github.com/repos/Hyperparticle/udify/issues/comments/582221530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jzhou316","id":31744226,"node_id":"MDQ6VXNlcjMxNzQ0MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31744226?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhou316","html_url":"https://github.com/jzhou316","followers_url":"https://api.github.com/users/jzhou316/followers","following_url":"https://api.github.com/users/jzhou316/following{/other_user}","gists_url":"https://api.github.com/users/jzhou316/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhou316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhou316/subscriptions","organizations_url":"https://api.github.com/users/jzhou316/orgs","repos_url":"https://api.github.com/users/jzhou316/repos","events_url":"https://api.github.com/users/jzhou316/events{/privacy}","received_events_url":"https://api.github.com/users/jzhou316/received_events","type":"User","site_admin":false}},{"id":3022339254,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwMjIzMzkyNTQ=","url":"https://api.github.com/repos/Hyperparticle/udify/issues/events/3022339254","actor":{"login":"delmaksym","id":8141935,"node_id":"MDQ6VXNlcjgxNDE5MzU=","avatar_url":"https://avatars.githubusercontent.com/u/8141935?v=4","gravatar_id":"","url":"https://api.github.com/users/delmaksym","html_url":"https://github.com/delmaksym","followers_url":"https://api.github.com/users/delmaksym/followers","following_url":"https://api.github.com/users/delmaksym/following{/other_user}","gists_url":"https://api.github.com/users/delmaksym/gists{/gist_id}","starred_url":"https://api.github.com/users/delmaksym/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/delmaksym/subscriptions","organizations_url":"https://api.github.com/users/delmaksym/orgs","repos_url":"https://api.github.com/users/delmaksym/repos","events_url":"https://api.github.com/users/delmaksym/events{/privacy}","received_events_url":"https://api.github.com/users/delmaksym/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-10T11:30:42Z","performed_via_github_app":null},{"id":3022339288,"node_id":"MDE3OlVuc3Vic2NyaWJlZEV2ZW50MzAyMjMzOTI4OA==","url":"https://api.github.com/repos/Hyperparticle/udify/issues/events/3022339288","actor":{"login":"delmaksym","id":8141935,"node_id":"MDQ6VXNlcjgxNDE5MzU=","avatar_url":"https://avatars.githubusercontent.com/u/8141935?v=4","gravatar_id":"","url":"https://api.github.com/users/delmaksym","html_url":"https://github.com/delmaksym","followers_url":"https://api.github.com/users/delmaksym/followers","following_url":"https://api.github.com/users/delmaksym/following{/other_user}","gists_url":"https://api.github.com/users/delmaksym/gists{/gist_id}","starred_url":"https://api.github.com/users/delmaksym/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/delmaksym/subscriptions","organizations_url":"https://api.github.com/users/delmaksym/orgs","repos_url":"https://api.github.com/users/delmaksym/repos","events_url":"https://api.github.com/users/delmaksym/events{/privacy}","received_events_url":"https://api.github.com/users/delmaksym/received_events","type":"User","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-10T11:30:43Z","performed_via_github_app":null}]