{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/524","repository_url":"https://api.github.com/repos/catalyst-team/catalyst","labels_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/524/labels{/name}","comments_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/524/comments","events_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/524/events","html_url":"https://github.com/catalyst-team/catalyst/issues/524","id":525168062,"node_id":"MDU6SXNzdWU1MjUxNjgwNjI=","number":524,"title":"TypeError: 'int' object is not callable","user":{"login":"maksimovsv","id":2456805,"node_id":"MDQ6VXNlcjI0NTY4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/2456805?v=4","gravatar_id":"","url":"https://api.github.com/users/maksimovsv","html_url":"https://github.com/maksimovsv","followers_url":"https://api.github.com/users/maksimovsv/followers","following_url":"https://api.github.com/users/maksimovsv/following{/other_user}","gists_url":"https://api.github.com/users/maksimovsv/gists{/gist_id}","starred_url":"https://api.github.com/users/maksimovsv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maksimovsv/subscriptions","organizations_url":"https://api.github.com/users/maksimovsv/orgs","repos_url":"https://api.github.com/users/maksimovsv/repos","events_url":"https://api.github.com/users/maksimovsv/events{/privacy}","received_events_url":"https://api.github.com/users/maksimovsv/received_events","type":"User","site_admin":false},"labels":[{"id":1029400270,"node_id":"MDU6TGFiZWwxMDI5NDAwMjcw","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-11-19T17:54:42Z","updated_at":"2019-11-19T19:36:25Z","closed_at":"2019-11-19T19:36:25Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nTrying to run the last notebook on Colab with a segmentation pipeline. \r\nhttps://colab.research.google.com/github/catalyst-team/catalyst/blob/master/examples/notebooks/segmentation-tutorial.ipynb\r\n\r\n**To Reproduce**\r\nJust run the following notebook and you will get the error in the cell\r\n```python\r\nSEED = 42\r\nutils.set_global_seed(SEED)\r\nutils.prepare_cudnn(deterministic=True)\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-44-e5fdf9518754> in <module>()\r\n     12 \r\n     13 SEED = 42\r\n---> 14 utils.set_global_seed(SEED)\r\n     15 utils.prepare_cudnn(deterministic=True)\r\n\r\n/usr/local/lib/python3.6/dist-packages/catalyst/utils/seed.py in set_global_seed(seed)\r\n     29         else:\r\n     30             tf.compat.v1.set_random_seed(seed)\r\n---> 31     random.seed(seed)\r\n     32     np.random.seed(seed)\r\n     33 \r\n\r\nTypeError: 'int' object is not callable\r\n\r\nfurther, even if you will comment the row\r\n```python\r\nutils.set_global_seed(SEED)\r\n```\r\nyou will get the same error in the cell below\r\n\r\n```python\r\nfrom catalyst.dl.callbacks import DiceCallback, IouCallback, \\\r\n  CriterionCallback, CriterionAggregatorCallback\r\n\r\nrunner.train(\r\n    model=model,\r\n    criterion=criterion,\r\n    optimizer=optimizer,\r\n    scheduler=scheduler,\r\n    \r\n    # our dataloaders\r\n    loaders=loaders,\r\n    \r\n    callbacks=[\r\n        # Each criterion is calculated separately.\r\n        CriterionCallback(\r\n            input_key=\"mask\",\r\n            prefix=\"loss_dice\",\r\n            criterion_key=\"dice\"\r\n        ),\r\n        CriterionCallback(\r\n            input_key=\"mask\",\r\n            prefix=\"loss_iou\",\r\n            criterion_key=\"iou\"\r\n        ),\r\n        CriterionCallback(\r\n            input_key=\"mask\",\r\n            prefix=\"loss_bce\",\r\n            criterion_key=\"bce\",\r\n            multiplier=0.8\r\n        ),\r\n        \r\n        # And only then we aggregate everything into one loss.\r\n        CriterionAggregatorCallback(\r\n            prefix=\"loss\",\r\n            loss_keys=[\"loss_dice\", \"loss_iou\", \"loss_bce\"],\r\n            loss_aggregate_fn=\"sum\" # or \"mean\"\r\n        ),\r\n        \r\n        # metrics\r\n        DiceCallback(input_key=\"mask\"),\r\n        IouCallback(input_key=\"mask\"),\r\n    ],\r\n    # path to save logs\r\n    logdir=logdir,\r\n    \r\n    num_epochs=num_epochs,\r\n    \r\n    # save our best checkpoint by IoU metric\r\n    main_metric=\"iou\",\r\n    # IoU needs to be maximized.\r\n    minimize_metric=False,\r\n    \r\n    # for FP16. It uses the variable from the very first cell\r\n    fp16=fp16_params,\r\n    \r\n    # prints train logs\r\n    verbose=False\r\n)\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n/usr/local/lib/python3.6/dist-packages/catalyst/dl/core/runner.py in run_experiment(self, experiment, check)\r\n    348             for stage in self.experiment.stages:\r\n--> 349                 self._run_stage(stage)\r\n    350         except (Exception, KeyboardInterrupt) as ex:\r\n\r\n5 frames\r\n/usr/local/lib/python3.6/dist-packages/catalyst/dl/core/runner.py in _run_stage(self, stage)\r\n    294     def _run_stage(self, stage: str):\r\n--> 295         self._prepare_for_stage(stage)\r\n    296         loaders = self.experiment.get_loaders(stage)\r\n\r\n/usr/local/lib/python3.6/dist-packages/catalyst/dl/core/runner.py in _prepare_for_stage(self, stage)\r\n     75     def _prepare_for_stage(self, stage: str):\r\n---> 76         utils.set_global_seed(self.experiment.initial_seed)\r\n     77         migrating_params = {}\r\n\r\n/usr/local/lib/python3.6/dist-packages/catalyst/utils/seed.py in set_global_seed(seed)\r\n     30             tf.compat.v1.set_random_seed(seed)\r\n---> 31     random.seed(seed)\r\n     32     np.random.seed(seed)\r\n\r\nTypeError: 'int' object is not callable\r\n\r\n\r\n**Expected behavior**\r\nI'm expecting execution of the cells without errors","closed_by":{"login":"maksimovsv","id":2456805,"node_id":"MDQ6VXNlcjI0NTY4MDU=","avatar_url":"https://avatars.githubusercontent.com/u/2456805?v=4","gravatar_id":"","url":"https://api.github.com/users/maksimovsv","html_url":"https://github.com/maksimovsv","followers_url":"https://api.github.com/users/maksimovsv/followers","following_url":"https://api.github.com/users/maksimovsv/following{/other_user}","gists_url":"https://api.github.com/users/maksimovsv/gists{/gist_id}","starred_url":"https://api.github.com/users/maksimovsv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maksimovsv/subscriptions","organizations_url":"https://api.github.com/users/maksimovsv/orgs","repos_url":"https://api.github.com/users/maksimovsv/repos","events_url":"https://api.github.com/users/maksimovsv/events{/privacy}","received_events_url":"https://api.github.com/users/maksimovsv/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/524/timeline","performed_via_github_app":null,"state_reason":"completed"}