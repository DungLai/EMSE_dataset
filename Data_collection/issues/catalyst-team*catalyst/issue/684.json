{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/684","repository_url":"https://api.github.com/repos/catalyst-team/catalyst","labels_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/684/labels{/name}","comments_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/684/comments","events_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/684/events","html_url":"https://github.com/catalyst-team/catalyst/issues/684","id":574533863,"node_id":"MDU6SXNzdWU1NzQ1MzM4NjM=","number":684,"title":"SupervisedWandbRunner logs wrong number of epochs to WandB","user":{"login":"CrafterKolyan","id":9883873,"node_id":"MDQ6VXNlcjk4ODM4NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9883873?v=4","gravatar_id":"","url":"https://api.github.com/users/CrafterKolyan","html_url":"https://github.com/CrafterKolyan","followers_url":"https://api.github.com/users/CrafterKolyan/followers","following_url":"https://api.github.com/users/CrafterKolyan/following{/other_user}","gists_url":"https://api.github.com/users/CrafterKolyan/gists{/gist_id}","starred_url":"https://api.github.com/users/CrafterKolyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CrafterKolyan/subscriptions","organizations_url":"https://api.github.com/users/CrafterKolyan/orgs","repos_url":"https://api.github.com/users/CrafterKolyan/repos","events_url":"https://api.github.com/users/CrafterKolyan/events{/privacy}","received_events_url":"https://api.github.com/users/CrafterKolyan/received_events","type":"User","site_admin":false},"labels":[{"id":1029400270,"node_id":"MDU6TGFiZWwxMDI5NDAwMjcw","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1029400277,"node_id":"MDU6TGFiZWwxMDI5NDAwMjc3","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-03T09:35:54Z","updated_at":"2020-05-02T14:50:28Z","closed_at":"2020-03-21T15:38:10Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nCatalyst 20.02.4\r\n`WandbRunner` is logging wrong number of epochs to WandB\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n```\r\nfrom catalyst import dl\r\nimport torch\r\nimport torch.nn as nn\r\nimport torch.optim as optim\r\nfrom torch.utils.data import DataLoader, TensorDataset\r\n\r\nclass Projector(nn.Module):\r\n    def __init__(self, input_size):\r\n        super().__init__()\r\n        self.linear = nn.Linear(input_size, 1)\r\n        \r\n    def forward(self, X):\r\n        return self.linear(X).squeeze(-1)\r\n\r\nX = torch.rand(16, 10)\r\ny = torch.rand(X.shape[0])\r\nmodel = Projector(X.shape[1])\r\ndataset = TensorDataset(X, y)\r\nloader = DataLoader(dataset, batch_size=8)\r\nrunner = dl.SupervisedWandbRunner()\r\n\r\nrunner.train(\r\n    model=model,\r\n    loaders={\r\n        \"train\": loader,\r\n        \"valid\": loader\r\n    },\r\n    criterion=nn.MSELoss(),\r\n    optimizer=optim.Adam(model.parameters()),\r\n    logdir=\"log_xxx_000\",\r\n    monitoring_params={\r\n        \"project\": \"wandb_wrong_epochs\"\r\n    },\r\n    num_epochs=10\r\n)\r\n```\r\n\r\n**Expected behavior**\r\nIn WandB I see two plots with `MSELoss` with exactly 10 epochs\r\n\r\n**Actual behaviour**\r\nIn WandB I see two plots with `MSELoss` with 20 epochs (but each has exactly 10 dots)\r\n\r\n**Screenshots**\r\nLook on number of steps. It has 20 steps. But should have 10.\r\n![image](https://user-images.githubusercontent.com/9883873/75762200-564c6900-5d4b-11ea-87e3-20ef0e840725.png)\r\n","closed_by":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/684/timeline","performed_via_github_app":null,"state_reason":"completed"}