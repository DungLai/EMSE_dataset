{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/289","repository_url":"https://api.github.com/repos/catalyst-team/catalyst","labels_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/289/labels{/name}","comments_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/289/comments","events_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/289/events","html_url":"https://github.com/catalyst-team/catalyst/issues/289","id":478113827,"node_id":"MDU6SXNzdWU0NzgxMTM4Mjc=","number":289,"title":"[fix] utils.plot_metrics error","user":{"login":"lightforever","id":10817054,"node_id":"MDQ6VXNlcjEwODE3MDU0","avatar_url":"https://avatars.githubusercontent.com/u/10817054?v=4","gravatar_id":"","url":"https://api.github.com/users/lightforever","html_url":"https://github.com/lightforever","followers_url":"https://api.github.com/users/lightforever/followers","following_url":"https://api.github.com/users/lightforever/following{/other_user}","gists_url":"https://api.github.com/users/lightforever/gists{/gist_id}","starred_url":"https://api.github.com/users/lightforever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightforever/subscriptions","organizations_url":"https://api.github.com/users/lightforever/orgs","repos_url":"https://api.github.com/users/lightforever/repos","events_url":"https://api.github.com/users/lightforever/events{/privacy}","received_events_url":"https://api.github.com/users/lightforever/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-07T20:01:44Z","updated_at":"2019-08-16T15:32:59Z","closed_at":"2019-08-16T15:32:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Catalyst 19.08\r\ntensorboardX=1.8\r\n\r\nHow to reproduce: examples/notebook-example.ipynb\r\n\r\nIntro, NUM_EPOCHS, change to 1, i.e.\r\n\r\nNUM_EPOCHS = 1\r\n\r\nAfter the training:\r\n\r\nutils.plot_metrics(logdir=logdir)\r\n\r\n```\r\nEventReadingError                         Traceback (most recent call last)\r\n<ipython-input-26-09be543730b6> in <module>\r\n      1 # you can use plotly and tensorboard to plot metrics inside jupyter\r\n      2 # by default it only plots loss\r\n----> 3 utils.plot_metrics(logdir=logdir)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/dl/utils/visualization.py in plot_metrics(logdir, step, metrics, height, width)\r\n     29         f\"Step should be either 'batch' or 'epoch', got '{step}'\"\r\n     30     metrics = metrics or [\"loss\"]\r\n---> 31     plot_tensorboard_log(logdir, step, metrics, height, width)\r\n     32 \r\n     33 \r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/plotly.py in plot_tensorboard_log(logdir, step, metrics, height, width)\r\n     46     scalars_per_loader = {\r\n     47         key: _get_tensorboard_scalars(inner_logdir, metrics, step)\r\n---> 48         for key, inner_logdir in logdirs.items()\r\n     49     }\r\n     50 \r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/plotly.py in <dictcomp>(.0)\r\n     46     scalars_per_loader = {\r\n     47         key: _get_tensorboard_scalars(inner_logdir, metrics, step)\r\n---> 48         for key, inner_logdir in logdirs.items()\r\n     49     }\r\n     50 \r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/plotly.py in _get_tensorboard_scalars(logdir, metrics, step)\r\n     15 \r\n     16     items = defaultdict(list)\r\n---> 17     for item in summary_reader:\r\n     18         if step in item.tag and (\r\n     19             metrics is None or any(m in item.tag for m in metrics)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/tensorboard.py in __iter__(self)\r\n    248                 reader = EventsFileReader(f)\r\n    249                 yield from (\r\n--> 250                     item for item in self._decode_events(reader)\r\n    251                     if item is not None and self._check_tag(item.tag)\r\n    252                     and item.type in self._types\r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/tensorboard.py in <genexpr>(.0)\r\n    248                 reader = EventsFileReader(f)\r\n    249                 yield from (\r\n--> 250                     item for item in self._decode_events(reader)\r\n    251                     if item is not None and self._check_tag(item.tag)\r\n    252                     and item.type in self._types\r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/tensorboard.py in _decode_events(self, events)\r\n    203         \"\"\"\r\n    204 \r\n--> 205         for event in events:\r\n    206             if not event.HasField(\"summary\"):\r\n    207                 yield None\r\n\r\n~/anaconda3/lib/python3.7/site-packages/catalyst/utils/tensorboard.py in __iter__(self)\r\n    107             event_raw = self._read_and_check(event_size)\r\n    108             if event_raw is None:\r\n--> 109                 raise EventReadingError(\"Unexpected end of events file\")\r\n    110             event = Event()\r\n    111             event.ParseFromString(event_raw)\r\n\r\nEventReadingError: Unexpected end of events file\r\n```\r\n\r\nThe same situation if I train outside of Jupyter(from CLI). For examples, after cifar_simple.","closed_by":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/289/timeline","performed_via_github_app":null,"state_reason":"completed"}