{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/1375","repository_url":"https://api.github.com/repos/catalyst-team/catalyst","labels_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/1375/labels{/name}","comments_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/1375/comments","events_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/1375/events","html_url":"https://github.com/catalyst-team/catalyst/issues/1375","id":1078581301,"node_id":"I_kwDOCKpmxM5ASdg1","number":1375,"title":".tar.gz on PyPI is missing the `requirements/` directory","user":{"login":"YodaEmbedding","id":721196,"node_id":"MDQ6VXNlcjcyMTE5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/721196?v=4","gravatar_id":"","url":"https://api.github.com/users/YodaEmbedding","html_url":"https://github.com/YodaEmbedding","followers_url":"https://api.github.com/users/YodaEmbedding/followers","following_url":"https://api.github.com/users/YodaEmbedding/following{/other_user}","gists_url":"https://api.github.com/users/YodaEmbedding/gists{/gist_id}","starred_url":"https://api.github.com/users/YodaEmbedding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YodaEmbedding/subscriptions","organizations_url":"https://api.github.com/users/YodaEmbedding/orgs","repos_url":"https://api.github.com/users/YodaEmbedding/repos","events_url":"https://api.github.com/users/YodaEmbedding/events{/privacy}","received_events_url":"https://api.github.com/users/YodaEmbedding/received_events","type":"User","site_admin":false},"labels":[{"id":1029400270,"node_id":"MDU6TGFiZWwxMDI5NDAwMjcw","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1029400273,"node_id":"MDU6TGFiZWwxMDI5NDAwMjcz","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Extra attention is needed"},{"id":1029400277,"node_id":"MDU6TGFiZWwxMDI5NDAwMjc3","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":{"login":"bagxi","id":19803638,"node_id":"MDQ6VXNlcjE5ODAzNjM4","avatar_url":"https://avatars.githubusercontent.com/u/19803638?v=4","gravatar_id":"","url":"https://api.github.com/users/bagxi","html_url":"https://github.com/bagxi","followers_url":"https://api.github.com/users/bagxi/followers","following_url":"https://api.github.com/users/bagxi/following{/other_user}","gists_url":"https://api.github.com/users/bagxi/gists{/gist_id}","starred_url":"https://api.github.com/users/bagxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagxi/subscriptions","organizations_url":"https://api.github.com/users/bagxi/orgs","repos_url":"https://api.github.com/users/bagxi/repos","events_url":"https://api.github.com/users/bagxi/events{/privacy}","received_events_url":"https://api.github.com/users/bagxi/received_events","type":"User","site_admin":false},"assignees":[{"login":"ditwoo","id":7264490,"node_id":"MDQ6VXNlcjcyNjQ0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/7264490?v=4","gravatar_id":"","url":"https://api.github.com/users/ditwoo","html_url":"https://github.com/ditwoo","followers_url":"https://api.github.com/users/ditwoo/followers","following_url":"https://api.github.com/users/ditwoo/following{/other_user}","gists_url":"https://api.github.com/users/ditwoo/gists{/gist_id}","starred_url":"https://api.github.com/users/ditwoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ditwoo/subscriptions","organizations_url":"https://api.github.com/users/ditwoo/orgs","repos_url":"https://api.github.com/users/ditwoo/repos","events_url":"https://api.github.com/users/ditwoo/events{/privacy}","received_events_url":"https://api.github.com/users/ditwoo/received_events","type":"User","site_admin":false},{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},{"login":"bagxi","id":19803638,"node_id":"MDQ6VXNlcjE5ODAzNjM4","avatar_url":"https://avatars.githubusercontent.com/u/19803638?v=4","gravatar_id":"","url":"https://api.github.com/users/bagxi","html_url":"https://github.com/bagxi","followers_url":"https://api.github.com/users/bagxi/followers","following_url":"https://api.github.com/users/bagxi/following{/other_user}","gists_url":"https://api.github.com/users/bagxi/gists{/gist_id}","starred_url":"https://api.github.com/users/bagxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagxi/subscriptions","organizations_url":"https://api.github.com/users/bagxi/orgs","repos_url":"https://api.github.com/users/bagxi/repos","events_url":"https://api.github.com/users/bagxi/events{/privacy}","received_events_url":"https://api.github.com/users/bagxi/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-12-13T14:13:03Z","updated_at":"2022-03-05T18:06:10Z","closed_at":"2022-03-05T18:06:10Z","author_association":"NONE","active_lock_reason":null,"body":"## üêõ Bug Report\r\n.tar.gz on PyPI is missing the `requirements/` directory.\r\n\r\n### How To Reproduce\r\nDownload latest .tar.gz from: https://pypi.org/project/catalyst/#files.\r\n\r\n### Code sample\r\n```bash\r\nwget https://files.pythonhosted.org/packages/92/6b/035a8394f8aabff4d1bf8eab6eb232b9b4e187f6b62564fcb94feaaf7a82/catalyst-21.11.tar.gz\r\ntar xf catalyst-21.11.tar.gz\r\ncd catalyst-21.11\r\npip install .\r\n```\r\n\r\nError log:\r\n```\r\nProcessing /mnt/data/Downloads/catalyst-21.11\r\n  DEPRECATION: A future pip version will change local packages to be built in-place without first copying to a temporary directory. We recommend you use --use-feature=in-tree-build to test your packages with this new behavior before it becomes the default.\r\n   pip 21.3 will remove support for this functionality. You can find discussion regarding this at https://github.com/pypa/pip/issues/7555.\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... error\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /nix/store/bqpbprsqhlvmkfp1nqqm677dqr7ymjpl-python3-3.9.6-env/bin/python3.9 /nix/store/bqpbprsqhlvmkfp1nqqm677dqr7ymjpl-python3-3.9.6-env/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py get_requires_for_build_wheel /tmp/tmp0a2ik0cl\r\n       cwd: /tmp/pip-req-build-yge_hp0l\r\n  Complete output (20 lines):\r\n  Traceback (most recent call last):\r\n    File \"/nix/store/bqpbprsqhlvmkfp1nqqm677dqr7ymjpl-python3-3.9.6-env/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 280, in <module>\r\n      main()\r\n    File \"/nix/store/bqpbprsqhlvmkfp1nqqm677dqr7ymjpl-python3-3.9.6-env/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 263, in main\r\n      json_out['return_val'] = hook(**hook_input['kwargs'])\r\n    File \"/nix/store/bqpbprsqhlvmkfp1nqqm677dqr7ymjpl-python3-3.9.6-env/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 114, in get_requires_for_build_wheel\r\n      return hook(config_settings)\r\n    File \"/tmp/pip-build-env-qb_mcgns/overlay/lib/python3.9/site-packages/setuptools/build_meta.py\", line 162, in get_requires_for_build_wheel\r\n      return self._get_build_requires(\r\n    File \"/tmp/pip-build-env-qb_mcgns/overlay/lib/python3.9/site-packages/setuptools/build_meta.py\", line 143, in _get_build_requires\r\n      self.run_setup()\r\n    File \"/tmp/pip-build-env-qb_mcgns/overlay/lib/python3.9/site-packages/setuptools/build_meta.py\", line 267, in run_setup\r\n      super(_BuildMetaLegacyBackend,\r\n    File \"/tmp/pip-build-env-qb_mcgns/overlay/lib/python3.9/site-packages/setuptools/build_meta.py\", line 158, in run_setup\r\n      exec(compile(code, __file__, 'exec'), locals())\r\n    File \"setup.py\", line 43, in <module>\r\n      \"albu\": load_requirements(\"requirements/requirements-albu.txt\"),\r\n    File \"setup.py\", line 22, in load_requirements\r\n      with open(os.path.join(PROJECT_ROOT, filename), \"r\") as f:\r\n  FileNotFoundError: [Errno 2] No such file or directory: '/tmp/pip-req-build-yge_hp0l/requirements/requirements-albu.txt'\r\n  ----------------------------------------\r\n```\r\n\r\n### Additional context\r\n`pip install` should be sufficient to build the package. This makes it easier to package on systems like NixOS.\r\n\r\n```nix\r\n{ lib\r\n, buildPythonPackage\r\n, fetchPypi\r\n, hydra-slayer\r\n, numpy\r\n, pytest\r\n, pytorch\r\n, pyyaml\r\n, tensorboardx\r\n, tqdm\r\n}:\r\n\r\nbuildPythonPackage rec {\r\n  pname = \"catalyst\";\r\n  version = \"21.11\";\r\n\r\n  src = fetchPypi {\r\n    inherit pname version;\r\n    sha256 = \"\";\r\n  };\r\n\r\n  propagatedBuildInputs = [\r\n    hydra-slayer\r\n    numpy\r\n    pytorch\r\n    pyyaml\r\n    tensorboardx\r\n    tqdm\r\n  ];\r\n\r\n  checkInputs = [\r\n    pytest\r\n  ];\r\n\r\n  meta = with lib; {\r\n    description = \"Accelerated deep learning R&D\";\r\n    homepage = \"https://github.com/catalyst-team/catalyst\";\r\n    maintainers = [ ];\r\n  };\r\n}\r\n```\r\n\r\n```nix\r\n{ lib\r\n, buildPythonPackage\r\n, fetchPypi\r\n, pytest\r\n}:\r\n\r\nbuildPythonPackage rec {\r\n  pname = \"hydra-slayer\";\r\n  version = \"0.4.0\";\r\n\r\n  src = fetchPypi {\r\n    inherit pname version;\r\n    sha256 = \"sha256-Ln7wuZ5eEVBNgJlvaJ7V7Xrodm7bjna2kzswaWYVlgQ=\";\r\n  };\r\n\r\n  checkInputs = [\r\n    pytest\r\n  ];\r\n\r\n  meta = with lib; {\r\n    description = \"PyTorch library for configuring complex applications\";\r\n    homepage = \"https://github.com/catalyst-team/hydra-slayer\";\r\n  };\r\n}\r\n```\r\n\r\nEDIT: P.S. Consider bumping to `tensorboardX<2.5.0>=2.1.0` if there's no breaking changes.","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/1375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/1375/timeline","performed_via_github_app":null,"state_reason":"completed"}