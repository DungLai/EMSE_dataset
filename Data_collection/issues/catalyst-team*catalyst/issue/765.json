{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/765","repository_url":"https://api.github.com/repos/catalyst-team/catalyst","labels_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/765/labels{/name}","comments_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/765/comments","events_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/765/events","html_url":"https://github.com/catalyst-team/catalyst/issues/765","id":604653149,"node_id":"MDU6SXNzdWU2MDQ2NTMxNDk=","number":765,"title":"Distributed mode Fail","user":{"login":"balakhonoff","id":44712112,"node_id":"MDQ6VXNlcjQ0NzEyMTEy","avatar_url":"https://avatars.githubusercontent.com/u/44712112?v=4","gravatar_id":"","url":"https://api.github.com/users/balakhonoff","html_url":"https://github.com/balakhonoff","followers_url":"https://api.github.com/users/balakhonoff/followers","following_url":"https://api.github.com/users/balakhonoff/following{/other_user}","gists_url":"https://api.github.com/users/balakhonoff/gists{/gist_id}","starred_url":"https://api.github.com/users/balakhonoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balakhonoff/subscriptions","organizations_url":"https://api.github.com/users/balakhonoff/orgs","repos_url":"https://api.github.com/users/balakhonoff/repos","events_url":"https://api.github.com/users/balakhonoff/events{/privacy}","received_events_url":"https://api.github.com/users/balakhonoff/received_events","type":"User","site_admin":false},"labels":[{"id":1029400270,"node_id":"MDU6TGFiZWwxMDI5NDAwMjcw","url":"https://api.github.com/repos/catalyst-team/catalyst/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-22T10:43:25Z","updated_at":"2020-04-22T12:38:24Z","closed_at":"2020-04-22T12:37:48Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to use distributed mode in a .py script file converted from .ipynb notebook. When I run the notebook everything is ok with distributed=False, but when I change it to True and launch the script I get an error:\r\n\r\nRuntimeError: Expected to have finished reduction in the prior iteration before starting a new one. This error indicates that your module has parameters that were not used in producing loss. You can enable unused parameter detection by (1) passing the keyword argument find_unused_parameters=True to torch.nn.parallel.DistributedDataParallel; (2) making sure all forward function outputs participate in calculating loss. If you already have done the above two steps, then the distributed data parallel module wasn't able to locate the output tensors in the return value of your module's forward function. Please include the loss function and the structure of the return value of forward of your module when reporting this issue (e.g. list, dict, iterable). (prepare_for_backward at /pytorch/torch/csrc/distributed/c10d/reducer.cpp:514)\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string const&) + 0x33 (0x7f21ce104193 in /home/kb/.local/lib/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10d::Reducer::prepare_for_backward(std::vector<at::Tensor, std::allocatorat::Tensor > const&) + 0x731 (0x7f22198c46f1 in /home/kb/.local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n\r\nIt seems to be we need to transfer find_unused_parameters=True when wrapping a model into torch.nn.parallel.DistributedDataParallel","closed_by":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/765/timeline","performed_via_github_app":null,"state_reason":"completed"}