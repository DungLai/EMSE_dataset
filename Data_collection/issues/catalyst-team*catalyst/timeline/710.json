[{"id":3142178867,"node_id":"MDEyOkxhYmVsZWRFdmVudDMxNDIxNzg4Njc=","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3142178867","actor":{"login":"litvinich","id":37345721,"node_id":"MDQ6VXNlcjM3MzQ1NzIx","avatar_url":"https://avatars.githubusercontent.com/u/37345721?v=4","gravatar_id":"","url":"https://api.github.com/users/litvinich","html_url":"https://github.com/litvinich","followers_url":"https://api.github.com/users/litvinich/followers","following_url":"https://api.github.com/users/litvinich/following{/other_user}","gists_url":"https://api.github.com/users/litvinich/gists{/gist_id}","starred_url":"https://api.github.com/users/litvinich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/litvinich/subscriptions","organizations_url":"https://api.github.com/users/litvinich/orgs","repos_url":"https://api.github.com/users/litvinich/repos","events_url":"https://api.github.com/users/litvinich/events{/privacy}","received_events_url":"https://api.github.com/users/litvinich/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-03-18T16:15:39Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/601128310","html_url":"https://github.com/catalyst-team/catalyst/issues/710#issuecomment-601128310","issue_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/710","id":601128310,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTEyODMxMA==","user":{"login":"litvinich","id":37345721,"node_id":"MDQ6VXNlcjM3MzQ1NzIx","avatar_url":"https://avatars.githubusercontent.com/u/37345721?v=4","gravatar_id":"","url":"https://api.github.com/users/litvinich","html_url":"https://github.com/litvinich","followers_url":"https://api.github.com/users/litvinich/followers","following_url":"https://api.github.com/users/litvinich/following{/other_user}","gists_url":"https://api.github.com/users/litvinich/gists{/gist_id}","starred_url":"https://api.github.com/users/litvinich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/litvinich/subscriptions","organizations_url":"https://api.github.com/users/litvinich/orgs","repos_url":"https://api.github.com/users/litvinich/repos","events_url":"https://api.github.com/users/litvinich/events{/privacy}","received_events_url":"https://api.github.com/users/litvinich/received_events","type":"User","site_admin":false},"created_at":"2020-03-19T11:28:08Z","updated_at":"2020-03-19T11:28:08Z","author_association":"CONTRIBUTOR","body":"I found how to fix this bug:\r\nChange `on_epoch_end` method to:\r\n```\r\ndef on_epoch_end(self, state: _State):\r\n        \"\"\"Translate epoch metrics to Alchemy\"\"\"\r\n        if state.logdir is None:\r\n            return\r\n\r\n        extra_mode = \"_base\"\r\n        splitted_epoch_metrics = utils.split_dict_to_subdicts(\r\n            dct=state.epoch_metrics, prefixes=list(state.loaders.keys()), extra_key=extra_mode,\r\n        )\r\n        if self.log_on_epoch_end and splitted_epoch_metrics.get(extra_mode):\r\n            self._log_metrics(\r\n                metrics=splitted_epoch_metrics[extra_mode],\r\n                step=state.global_epoch,\r\n                mode=extra_mode,\r\n                suffix=self.epoch_log_suffix,\r\n            )\r\n```\r\nBecause `base_` key is not always in dict with metrics\r\nIf this solution is good and doesn't has corner cases, I can make pull request with this bug fix + LR logging bug (change SchedulerCallback order to 100 and LoggingCallback order to 120)\r\n","reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/601128310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"litvinich","id":37345721,"node_id":"MDQ6VXNlcjM3MzQ1NzIx","avatar_url":"https://avatars.githubusercontent.com/u/37345721?v=4","gravatar_id":"","url":"https://api.github.com/users/litvinich","html_url":"https://github.com/litvinich","followers_url":"https://api.github.com/users/litvinich/followers","following_url":"https://api.github.com/users/litvinich/following{/other_user}","gists_url":"https://api.github.com/users/litvinich/gists{/gist_id}","starred_url":"https://api.github.com/users/litvinich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/litvinich/subscriptions","organizations_url":"https://api.github.com/users/litvinich/orgs","repos_url":"https://api.github.com/users/litvinich/repos","events_url":"https://api.github.com/users/litvinich/events{/privacy}","received_events_url":"https://api.github.com/users/litvinich/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/603096271","html_url":"https://github.com/catalyst-team/catalyst/issues/710#issuecomment-603096271","issue_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/710","id":603096271,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzA5NjI3MQ==","user":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"created_at":"2020-03-24T08:22:24Z","updated_at":"2020-03-24T08:22:24Z","author_association":"MEMBER","body":"Looks like we have already fixed this issue during `20.03.3` release :)","reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/603096271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false}},{"id":3158555441,"node_id":"MDExOkNsb3NlZEV2ZW50MzE1ODU1NTQ0MQ==","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3158555441","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-24T08:22:24Z","state_reason":null,"performed_via_github_app":null}]