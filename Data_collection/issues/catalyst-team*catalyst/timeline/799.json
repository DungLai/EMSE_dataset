[{"id":3319422053,"node_id":"MDEyOkxhYmVsZWRFdmVudDMzMTk0MjIwNTM=","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3319422053","actor":{"login":"AlekseySh","id":20143575,"node_id":"MDQ6VXNlcjIwMTQzNTc1","avatar_url":"https://avatars.githubusercontent.com/u/20143575?v=4","gravatar_id":"","url":"https://api.github.com/users/AlekseySh","html_url":"https://github.com/AlekseySh","followers_url":"https://api.github.com/users/AlekseySh/followers","following_url":"https://api.github.com/users/AlekseySh/following{/other_user}","gists_url":"https://api.github.com/users/AlekseySh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlekseySh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlekseySh/subscriptions","organizations_url":"https://api.github.com/users/AlekseySh/orgs","repos_url":"https://api.github.com/users/AlekseySh/repos","events_url":"https://api.github.com/users/AlekseySh/events{/privacy}","received_events_url":"https://api.github.com/users/AlekseySh/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-05-09T14:11:12Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":3319422055,"node_id":"MDEyOkxhYmVsZWRFdmVudDMzMTk0MjIwNTU=","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3319422055","actor":{"login":"AlekseySh","id":20143575,"node_id":"MDQ6VXNlcjIwMTQzNTc1","avatar_url":"https://avatars.githubusercontent.com/u/20143575?v=4","gravatar_id":"","url":"https://api.github.com/users/AlekseySh","html_url":"https://github.com/AlekseySh","followers_url":"https://api.github.com/users/AlekseySh/followers","following_url":"https://api.github.com/users/AlekseySh/following{/other_user}","gists_url":"https://api.github.com/users/AlekseySh/gists{/gist_id}","starred_url":"https://api.github.com/users/AlekseySh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlekseySh/subscriptions","organizations_url":"https://api.github.com/users/AlekseySh/orgs","repos_url":"https://api.github.com/users/AlekseySh/repos","events_url":"https://api.github.com/users/AlekseySh/events{/privacy}","received_events_url":"https://api.github.com/users/AlekseySh/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-05-09T14:11:12Z","label":{"name":"help wanted","color":"008672"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/626208361","html_url":"https://github.com/catalyst-team/catalyst/issues/799#issuecomment-626208361","issue_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/799","id":626208361,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjIwODM2MQ==","user":{"login":"yhn112","id":3002534,"node_id":"MDQ6VXNlcjMwMDI1MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3002534?v=4","gravatar_id":"","url":"https://api.github.com/users/yhn112","html_url":"https://github.com/yhn112","followers_url":"https://api.github.com/users/yhn112/followers","following_url":"https://api.github.com/users/yhn112/following{/other_user}","gists_url":"https://api.github.com/users/yhn112/gists{/gist_id}","starred_url":"https://api.github.com/users/yhn112/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yhn112/subscriptions","organizations_url":"https://api.github.com/users/yhn112/orgs","repos_url":"https://api.github.com/users/yhn112/repos","events_url":"https://api.github.com/users/yhn112/events{/privacy}","received_events_url":"https://api.github.com/users/yhn112/received_events","type":"User","site_admin":false},"created_at":"2020-05-09T17:19:10Z","updated_at":"2020-05-09T17:19:10Z","author_association":"CONTRIBUTOR","body":"Sorry for my importunity, but I have to say that it's a good reason to add a sample counter, as I suggested in https://github.com/catalyst-team/catalyst/issues/755#issuecomment-626059081 =)","reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/626208361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yhn112","id":3002534,"node_id":"MDQ6VXNlcjMwMDI1MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3002534?v=4","gravatar_id":"","url":"https://api.github.com/users/yhn112","html_url":"https://github.com/yhn112","followers_url":"https://api.github.com/users/yhn112/followers","following_url":"https://api.github.com/users/yhn112/following{/other_user}","gists_url":"https://api.github.com/users/yhn112/gists{/gist_id}","starred_url":"https://api.github.com/users/yhn112/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yhn112/subscriptions","organizations_url":"https://api.github.com/users/yhn112/orgs","repos_url":"https://api.github.com/users/yhn112/repos","events_url":"https://api.github.com/users/yhn112/events{/privacy}","received_events_url":"https://api.github.com/users/yhn112/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/626292408","html_url":"https://github.com/catalyst-team/catalyst/issues/799#issuecomment-626292408","issue_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/799","id":626292408,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjI5MjQwOA==","user":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"created_at":"2020-05-10T08:30:48Z","updated_at":"2020-05-10T08:36:00Z","author_association":"MEMBER","body":"Agreed, thanks for noting.\r\nDue to https://www.github.com/catalyst-team/catalyst/blob/master/catalyst/core/runner.py#L386#L389 we have correct per-loader `batch_size`, but have don't have correct non-`drop_last` loader handling.\r\n\r\nPR would be appreciated :)","reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/626292408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false}},{"id":3320107048,"node_id":"MDEyOkxhYmVsZWRFdmVudDMzMjAxMDcwNDg=","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3320107048","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-05-10T08:30:56Z","label":{"name":"core","color":"1c39cc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/626357116","html_url":"https://github.com/catalyst-team/catalyst/issues/799#issuecomment-626357116","issue_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/799","id":626357116,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjM1NzExNg==","user":{"login":"yhn112","id":3002534,"node_id":"MDQ6VXNlcjMwMDI1MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3002534?v=4","gravatar_id":"","url":"https://api.github.com/users/yhn112","html_url":"https://github.com/yhn112","followers_url":"https://api.github.com/users/yhn112/followers","following_url":"https://api.github.com/users/yhn112/following{/other_user}","gists_url":"https://api.github.com/users/yhn112/gists{/gist_id}","starred_url":"https://api.github.com/users/yhn112/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yhn112/subscriptions","organizations_url":"https://api.github.com/users/yhn112/orgs","repos_url":"https://api.github.com/users/yhn112/repos","events_url":"https://api.github.com/users/yhn112/events{/privacy}","received_events_url":"https://api.github.com/users/yhn112/received_events","type":"User","site_admin":false},"created_at":"2020-05-10T16:54:19Z","updated_at":"2020-05-10T16:54:19Z","author_association":"CONTRIBUTOR","body":"But how is it reasonable to do this from an \"architectural\" point of view?\r\nIn my opinion, `state.batch_size` reflects the loader property and should not be changed during the loader operation. So I would add `state.current_batch_size` separately and would like to have something like this:\r\n```\r\ndef _run_batch(self, batch: Mapping[str, Any]) -> None:\r\n        self.state.current_batch_size = batch.shape[0]\r\n        self.state.global_step += self.state.current_batch_size\r\n        batch = self._batch2device(batch, self.device)\r\n        self.state.input = batch\r\n\r\n        self._run_event(\"on_batch_start\")\r\n        self._handle_batch(batch=batch)\r\n        self._run_event(\"on_batch_end\")\r\n        self.state.current_batch_size = None  # to show that it makes no sense outside handling a batch\r\n```","reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/626357116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yhn112","id":3002534,"node_id":"MDQ6VXNlcjMwMDI1MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3002534?v=4","gravatar_id":"","url":"https://api.github.com/users/yhn112","html_url":"https://github.com/yhn112","followers_url":"https://api.github.com/users/yhn112/followers","following_url":"https://api.github.com/users/yhn112/following{/other_user}","gists_url":"https://api.github.com/users/yhn112/gists{/gist_id}","starred_url":"https://api.github.com/users/yhn112/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yhn112/subscriptions","organizations_url":"https://api.github.com/users/yhn112/orgs","repos_url":"https://api.github.com/users/yhn112/repos","events_url":"https://api.github.com/users/yhn112/events{/privacy}","received_events_url":"https://api.github.com/users/yhn112/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/627144919","html_url":"https://github.com/catalyst-team/catalyst/issues/799#issuecomment-627144919","issue_url":"https://api.github.com/repos/catalyst-team/catalyst/issues/799","id":627144919,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzE0NDkxOQ==","user":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"created_at":"2020-05-12T06:40:43Z","updated_at":"2020-05-12T06:40:43Z","author_association":"MEMBER","body":"I think, that `batch_size` property should be with `current_batch_size` logic. And if you and `current_loader_batch_size` it's better to use something like `state.loader_batch_size`.","reactions":{"url":"https://api.github.com/repos/catalyst-team/catalyst/issues/comments/627144919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false}},{"id":3366871575,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMzNjY4NzE1NzU=","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3366871575","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"4fcdd999b68fed912d3f7f544eb36c0a09e54805","commit_url":"https://api.github.com/repos/catalyst-team/catalyst/commits/4fcdd999b68fed912d3f7f544eb36c0a09e54805","created_at":"2020-05-23T09:43:59Z","performed_via_github_app":null},{"id":3366952264,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMzNjY5NTIyNjQ=","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3366952264","actor":{"login":"lightforever","id":10817054,"node_id":"MDQ6VXNlcjEwODE3MDU0","avatar_url":"https://avatars.githubusercontent.com/u/10817054?v=4","gravatar_id":"","url":"https://api.github.com/users/lightforever","html_url":"https://github.com/lightforever","followers_url":"https://api.github.com/users/lightforever/followers","following_url":"https://api.github.com/users/lightforever/following{/other_user}","gists_url":"https://api.github.com/users/lightforever/gists{/gist_id}","starred_url":"https://api.github.com/users/lightforever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightforever/subscriptions","organizations_url":"https://api.github.com/users/lightforever/orgs","repos_url":"https://api.github.com/users/lightforever/repos","events_url":"https://api.github.com/users/lightforever/events{/privacy}","received_events_url":"https://api.github.com/users/lightforever/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"08892326a6cdf2e2f8cad57b4d99437d9eaf5129","commit_url":"https://api.github.com/repos/catalyst-team/catalyst/commits/08892326a6cdf2e2f8cad57b4d99437d9eaf5129","created_at":"2020-05-23T11:32:24Z","performed_via_github_app":null},{"id":3367934450,"node_id":"MDExOkNsb3NlZEV2ZW50MzM2NzkzNDQ1MA==","url":"https://api.github.com/repos/catalyst-team/catalyst/issues/events/3367934450","actor":{"login":"Scitator","id":7606451,"node_id":"MDQ6VXNlcjc2MDY0NTE=","avatar_url":"https://avatars.githubusercontent.com/u/7606451?v=4","gravatar_id":"","url":"https://api.github.com/users/Scitator","html_url":"https://github.com/Scitator","followers_url":"https://api.github.com/users/Scitator/followers","following_url":"https://api.github.com/users/Scitator/following{/other_user}","gists_url":"https://api.github.com/users/Scitator/gists{/gist_id}","starred_url":"https://api.github.com/users/Scitator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Scitator/subscriptions","organizations_url":"https://api.github.com/users/Scitator/orgs","repos_url":"https://api.github.com/users/Scitator/repos","events_url":"https://api.github.com/users/Scitator/events{/privacy}","received_events_url":"https://api.github.com/users/Scitator/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-05-24T13:07:31Z","state_reason":null,"performed_via_github_app":null}]