{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34","repository_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec","labels_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34/labels{/name}","comments_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34/comments","events_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34/events","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34","id":389672148,"node_id":"MDU6SXNzdWUzODk2NzIxNDg=","number":34,"title":"Runtime Error cuda out of memory occurs while the gpu memory is empty","user":{"login":"sagrawal1993","id":18900112,"node_id":"MDQ6VXNlcjE4OTAwMTEy","avatar_url":"https://avatars.githubusercontent.com/u/18900112?v=4","gravatar_id":"","url":"https://api.github.com/users/sagrawal1993","html_url":"https://github.com/sagrawal1993","followers_url":"https://api.github.com/users/sagrawal1993/followers","following_url":"https://api.github.com/users/sagrawal1993/following{/other_user}","gists_url":"https://api.github.com/users/sagrawal1993/gists{/gist_id}","starred_url":"https://api.github.com/users/sagrawal1993/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sagrawal1993/subscriptions","organizations_url":"https://api.github.com/users/sagrawal1993/orgs","repos_url":"https://api.github.com/users/sagrawal1993/repos","events_url":"https://api.github.com/users/sagrawal1993/events{/privacy}","received_events_url":"https://api.github.com/users/sagrawal1993/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-12-11T09:38:51Z","updated_at":"2019-08-08T03:52:05Z","closed_at":"2019-08-08T03:52:05Z","author_association":"NONE","active_lock_reason":null,"body":"Detailed error description::\r\n\r\nTraceback (most recent call last):                                                                                                                                                \r\n  File \"crnn_main.py\", line 193, in <module>                                                                                                                  \r\n    training()                                                                                                                                                                    \r\n  File \"crnn_main.py\", line 110, in training                                                                                                                                      \r\n    cost = trainBatch(crnn, criterion, optimizer, train_iter)                                                                                                                     \r\n  File \"crnn_main.py\", line 96, in trainBatch                                                                                                                                     \r\n    cost = criterion(preds, text, preds_size, length) / batch_size                                                                                                                \r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/nn/modules/module.py\", line 477, in __call__                                                         \r\n    result = self.forward(*input, **kwargs)                                                                                                                                       \r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/warpctc_pytorch-0.1-py3.5-linux-x86_64.egg/warpctc_pytorch/__init__.py\", line 82, in forward               \r\n    self.length_average, self.blank)                                                                                                                                              \r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/warpctc_pytorch-0.1-py3.5-linux-x86_64.egg/warpctc_pytorch/__init__.py\", line 32, in forward               \r\n    blank)                                                                                                                                                                        \r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/utils/ffi/__init__.py\", line 202, in safe_call                                                \r\n    result = torch._C._safe_call(*args, **kwargs)                                                                                                                                 \r\ntorch.FatalError: CUDA error: out of memory (allocate at /pytorch/aten/src/THC/THCCachingAllocator.cpp:510)                                                                       \r\nframe #0: THCudaMalloc + 0x79 (0x7f50f7b32e99 in /home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/lib/libcaffe2_gpu.so)                                       \r\nframe #1: gpu_ctc + 0x134 (0x7f50f61f92a4 in /home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/warpctc_pytorch-0.1-py3.5-linux-x86_64.egg/warpctc_pytorch/_warp_ctc/$\r\n_warp_ctc.cpython-35m-x86_64-linux-gnu.so)                                                                                                                                        \r\nframe #2: <unknown function> + 0x1ad2 (0x7f50f61f8ad2 in /home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/warpctc_pytorch-0.1-py3.5-linux-x86_64.egg/warpctc_pytorc$\r\n/_warp_ctc/__warp_ctc.cpython-35m-x86_64-linux-gnu.so)                                                                                                                            \r\n<omitting python frames>                                                                                                                                                          \r\nframe #5: THPModule_safeCall(_object*, _object*, _object*) + 0x4c (0x7f511e7a67cc in /home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/_C.cpython-35m-x86_64-l$\r\nnux-gnu.so)                                                                                                                                                                       \r\nframe #8: python() [0x5401ef]                                                                                                                                                     \r\nframe #11: python() [0x4ec358]                                                                                                                                                    \r\nframe #14: THPFunction_apply(_object*, _object*) + 0x38f (0x7f511eb9383f in /home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/_C.cpython-35m-x86_64-linux-gnu.so)                                                                                                                                                                                \r\nframe #18: python() [0x4ec3f7]                                                                                                                                                    \r\nframe #22: python() [0x4ec2e3]                                                                                                                                                    \r\nframe #24: python() [0x4fbfce]                                                                                                                                                    \r\nframe #26: python() [0x574db6]                                                                                                                                                    \r\nframe #31: python() [0x53fc97]                                                                                                                                                    \r\nframe #33: python() [0x60cb42]                                                                                                                                                    \r\nframe #38: __libc_start_main + 0xf0 (0x7f513430a830 in /lib/x86_64-linux-gnu/libc.so.6)                                                                                           \r\nException ignored in: <bound method _DataLoaderIter.__del__ of <torch.utils.data.dataloader._DataLoaderIter object at 0x7f50ec9151d0>>                                            \r\nTraceback (most recent call last):                                                                                                                                                \r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 399, in __del__                                                      \r\n    self._shutdown_workers()\r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/utils/data/dataloader.py\", line 378, in _shutdown_workers                                            \r\n    self.worker_result_queue.get()                                                                                                                                                \r\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 345, in get                                                                                                          \r\n    return ForkingPickler.loads(res)                                                                                                                                              \r\n  File \"/home/ubuntu/suraj/TrainModel/venv/lib/python3.5/site-packages/torch/multiprocessing/reductions.py\", line 151, in rebuild_storage_fd                                      \r\n    fd = df.detach()                                                                                                                                                              \r\n  File \"/usr/lib/python3.5/multiprocessing/resource_sharer.py\", line 57, in detach                                                                                                \r\n    with _resource_sharer.get_connection(self._id) as conn:                                                                                                                       \r\n  File \"/usr/lib/python3.5/multiprocessing/resource_sharer.py\", line 87, in get_connection                                                                                        \r\n    c = Client(address, authkey=process.current_process().authkey)                                                                                                                \r\n  File \"/usr/lib/python3.5/multiprocessing/connection.py\", line 487, in Client                                                                                                    \r\n    c = SocketClient(address)                                                                                                                                                     \r\n  File \"/usr/lib/python3.5/multiprocessing/connection.py\", line 614, in SocketClient                                                                                              \r\n    s.connect(address)                                                                                                                                                            \r\nConnectionRefusedError: [Errno 111] Connection refused\r\n\r\nI am using ::\r\ncuda: 8.0\r\npython: 3.5\r\npytourch : 0.4.1\r\n\r\n\r\nI am getting error while using cuda. It is running fine on cpu.","closed_by":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/34/timeline","performed_via_github_app":null,"state_reason":"completed"}