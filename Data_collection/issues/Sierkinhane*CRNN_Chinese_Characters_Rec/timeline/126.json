[{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516044674","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516044674","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516044674,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjA0NDY3NA==","user":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false},"created_at":"2019-07-29T15:39:22Z","updated_at":"2019-07-29T15:39:22Z","author_association":"OWNER","body":"crnn网络的输入是深度为1的灰度图，所以你提供的彩色图应该没有用处；测试效果不好的话可能与测试[代码](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/test.py#L39)中的放缩的比率有关，这里给出我训练时候的图片宽高信息：训练图片尺寸为w,h=280,32，并缩小至w,h=160,32作为网络输入。","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516044674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516047632","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516047632","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516047632,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjA0NzYzMg==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2019-07-29T15:46:47Z","updated_at":"2019-07-29T15:48:19Z","author_association":"NONE","body":"> \r\n> \r\n> crnn网络的输入是深度为1的灰度图，所以你提供的彩色图应该没有用处；测试效果不好的话可能与测试[代码](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/test.py#L39)中的放缩的比率有关，这里给出我训练时候的图片宽高信息：训练图片尺寸为w,h=280,32，并缩小至w,h=160,32作为网络输入。\r\n\r\n彩色图是希望转换成灰度图之后能够引入噪声，我是不是应该先把彩色图转成灰度图再训练呢？\r\n另外需要在生成图片的时候固定w，h，然后在输入网络时再缩小吗？现在是固定字号，根据各种字体的每个文字的宽度和高度生成图片后，按比例缩小至h为32：）\r\n\r\nPS：测试不是用的这个[代码](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/test.py#L39)，我明天再去检测一遍代码吧","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516047632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516049950","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516049950","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516049950,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjA0OTk1MA==","user":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false},"created_at":"2019-07-29T15:52:44Z","updated_at":"2019-07-29T15:52:44Z","author_association":"OWNER","body":"这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516049950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516307409","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516307409","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516307409,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjMwNzQwOQ==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T07:51:47Z","updated_at":"2019-07-30T07:51:47Z","author_association":"NONE","body":"> 这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)\r\n\r\n果然是缩放的问题，修改了一下训练时图片的缩放比例，测试的结果提升了不少，感谢：）","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516307409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"id":2518859871,"node_id":"MDExOkNsb3NlZEV2ZW50MjUxODg1OTg3MQ==","url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/events/2518859871","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-30T07:53:38Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516709854","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516709854","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516709854,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjcwOTg1NA==","user":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T06:06:20Z","updated_at":"2019-07-31T06:06:20Z","author_association":"NONE","body":"怎么进行迁移学习啊？博主的代码中给出了训练模型，但如何进行迁移学习麻烦不吝赐教","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516709854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516747165","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516747165","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516747165,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc0NzE2NQ==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T08:16:08Z","updated_at":"2019-07-31T08:16:08Z","author_association":"NONE","body":"> 怎么进行迁移学习啊？博主的代码中给出了训练模型，但如何进行迁移学习麻烦不吝赐教\r\n\r\n1.准备好自己的训练集和测试集，转换成lmdb格式（使用的是原来版本的代码，新版本好像不需要转换，暂时没有继续测试，之后有时间再看看）\r\n2.读取预训练模型，根据需要冻结前几层，对后面几层网络进行训练（这里我没有冻结，直接进行训练，效果也不错）","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516747165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516751156","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516751156","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516751156,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc1MTE1Ng==","user":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T08:28:05Z","updated_at":"2019-07-31T08:28:05Z","author_association":"NONE","body":"您好，这个读取预训练模型是指读取作者之前的那个.pth文件是吗？不是直接将自己的数据集送进crnn_main训练进行了吗？怎么操作啊？请大神指教一下，十分感谢","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516751156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516758441","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516758441","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516758441,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc1ODQ0MQ==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T08:48:57Z","updated_at":"2019-07-31T08:48:57Z","author_association":"NONE","body":"> 您好，这个读取预训练模型是指读取作者之前的那个.pth文件是吗？不是直接将自己的数据集送进crnn_main训练进行了吗？怎么操作啊？请大神指教一下，十分感谢\r\n\r\n1.修改[crnn='你的预训练模型.pth'](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/master/params.py#L14)\r\ncrnn=''时将会重新训练一个权重，指定预训练模型后将读取其参数进行微调，这里可以根据需要冻结参数，冻结参数应该需要在crnn_main.py中修改代码，具体如何操作你应该问问repo owner\r\n2.生成lmdb，需要修改[to_lmdb/tolmdb_py3.py#L18](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/master/to_lmdb/tolmdb_py3.py#L18) [to_lmdb/tolmdb_py3.py#L23](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/master/to_lmdb/tolmdb_py3.py#L23) [to_lmdb/tolmdb_py3.py#L28](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/master/to_lmdb/tolmdb_py3.py#L28)\r\n运行python tolmdb_py3.py\r\n3.运行python crnn_main.py --trainroot 你的lmdb格式的train set --valroot 你的lmdb格式的val set --cuda","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516758441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516760671","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516760671","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516760671,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc2MDY3MQ==","user":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T08:55:38Z","updated_at":"2019-07-31T08:55:38Z","author_association":"NONE","body":"懂了，十分感谢，感激不尽。祝大佬越来越牛","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516760671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516760682","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-516760682","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":516760682,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc2MDY4Mg==","user":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T08:55:41Z","updated_at":"2019-07-31T08:55:41Z","author_association":"NONE","body":"懂了，十分感谢，感激不尽。祝大佬越来越牛","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/516760682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vlzzhou","id":38495504,"node_id":"MDQ6VXNlcjM4NDk1NTA0","avatar_url":"https://avatars.githubusercontent.com/u/38495504?v=4","gravatar_id":"","url":"https://api.github.com/users/vlzzhou","html_url":"https://github.com/vlzzhou","followers_url":"https://api.github.com/users/vlzzhou/followers","following_url":"https://api.github.com/users/vlzzhou/following{/other_user}","gists_url":"https://api.github.com/users/vlzzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/vlzzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vlzzhou/subscriptions","organizations_url":"https://api.github.com/users/vlzzhou/orgs","repos_url":"https://api.github.com/users/vlzzhou/repos","events_url":"https://api.github.com/users/vlzzhou/events{/privacy}","received_events_url":"https://api.github.com/users/vlzzhou/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618236889","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618236889","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618236889,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODIzNjg4OQ==","user":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T07:41:38Z","updated_at":"2020-04-23T07:41:38Z","author_association":"NONE","body":"> > 这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)\r\n> \r\n> 果然是缩放的问题，修改了一下训练时图片的缩放比例，测试的结果提升了不少，感谢：）\r\n\r\n请问您如何修改缩放比例的呢","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618236889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618263494","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618263494","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618263494,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI2MzQ5NA==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T08:36:36Z","updated_at":"2020-04-23T08:36:36Z","author_association":"NONE","body":"> \r\n> \r\n> > > 这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)\r\n> > \r\n> > \r\n> > 果然是缩放的问题，修改了一下训练时图片的缩放比例，测试的结果提升了不少，感谢：）\r\n> \r\n> 请问您如何修改缩放比例的呢\r\n\r\n我是先将h设定为32px后，w按比例缩放的\r\n```python\r\nw = int(image.size[0] / (image.size[1] * 1.0 / 32))\r\n```","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618263494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618273982","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618273982","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618273982,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI3Mzk4Mg==","user":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T08:56:16Z","updated_at":"2020-04-23T08:56:16Z","author_association":"NONE","body":"> > > > 这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)\r\n> > > \r\n> > > \r\n> > > 果然是缩放的问题，修改了一下训练时图片的缩放比例，测试的结果提升了不少，感谢：）\r\n> > \r\n> > \r\n> > 请问您如何修改缩放比例的呢\r\n> \r\n> 我是先将h设定为32px后，w按比例缩放的\r\n> \r\n> ```python\r\n> w = int(image.size[0] / (image.size[1] * 1.0 / 32))\r\n> ```\r\n\r\n谢谢您的回复！\r\n可以再请问您一个问题吗，我现在正遇到的：\r\n我在自己生成的数据集上微调另一个项目里的模型，迭代一两次之后准确率还可以，val识别也是正确的，如图：\r\n![image](https://user-images.githubusercontent.com/31719207/80079291-ab09a480-8582-11ea-9c86-f987c3aad573.png)\r\n但是我用微调后的模型去识别测试图像，输出是错误的（乱码的），如图：\r\n![image](https://user-images.githubusercontent.com/31719207/80079674-2cf9cd80-8583-11ea-82d8-0a30707a684f.png)\r\n图中netCRNN63.pth为预训练模型，crnn_best.pth为微调后的。\r\n可以请您帮忙分析一下吗，谢谢！！\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618273982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618297896","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618297896","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618297896,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI5Nzg5Ng==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T09:41:19Z","updated_at":"2020-04-23T09:41:19Z","author_association":"NONE","body":"> \r\n> \r\n> > > > > 这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)\r\n> > > > \r\n> > > > \r\n> > > > 果然是缩放的问题，修改了一下训练时图片的缩放比例，测试的结果提升了不少，感谢：）\r\n> > > \r\n> > > \r\n> > > 请问您如何修改缩放比例的呢\r\n> > \r\n> > \r\n> > 我是先将h设定为32px后，w按比例缩放的\r\n> > ```python\r\n> > w = int(image.size[0] / (image.size[1] * 1.0 / 32))\r\n> > ```\r\n> \r\n> 谢谢您的回复！\r\n> 可以再请问您一个问题吗，我现在正遇到的：\r\n> 我在自己生成的数据集上微调另一个项目里的模型，迭代一两次之后准确率还可以，val识别也是正确的，如图：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80079291-ab09a480-8582-11ea-9c86-f987c3aad573.png)\r\n> 但是我用微调后的模型去识别测试图像，输出是错误的（乱码的），如图：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80079674-2cf9cd80-8583-11ea-82d8-0a30707a684f.png)\r\n> 图中netCRNN63.pth为预训练模型，crnn_best.pth为微调后的。\r\n> 可以请您帮忙分析一下吗，谢谢！！\r\n\r\n能把训练集和测试图片贴出来看看吗？","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618297896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618304618","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618304618","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618304618,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODMwNDYxOA==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T09:54:50Z","updated_at":"2020-04-23T09:54:50Z","author_association":"NONE","body":"> \r\n> \r\n> > > > > 这个仓库的代码会将彩色图在输入时转化为[灰度图](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L57)；图片的宽一定要为32，所以图片的宽高按w/32比例放缩，[新的代码会将图片宽高放缩](https://github.com/Sierkinhane/crnn_chinese_characters_rec/blob/4c2c24bf96d92fca54b4af7cc35ce8a8801ad91d/dataset_v2.py#L65)\r\n> > > > \r\n> > > > \r\n> > > > 果然是缩放的问题，修改了一下训练时图片的缩放比例，测试的结果提升了不少，感谢：）\r\n> > > \r\n> > > \r\n> > > 请问您如何修改缩放比例的呢\r\n> > \r\n> > \r\n> > 我是先将h设定为32px后，w按比例缩放的\r\n> > ```python\r\n> > w = int(image.size[0] / (image.size[1] * 1.0 / 32))\r\n> > ```\r\n> \r\n> 谢谢您的回复！\r\n> 可以再请问您一个问题吗，我现在正遇到的：\r\n> 我在自己生成的数据集上微调另一个项目里的模型，迭代一两次之后准确率还可以，val识别也是正确的，如图：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80079291-ab09a480-8582-11ea-9c86-f987c3aad573.png)\r\n> 但是我用微调后的模型去识别测试图像，输出是错误的（乱码的），如图：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80079674-2cf9cd80-8583-11ea-82d8-0a30707a684f.png)\r\n> 图中netCRNN63.pth为预训练模型，crnn_best.pth为微调后的。\r\n> 可以请您帮忙分析一下吗，谢谢！！\r\n\r\n还有一点需要确认的是，训练代码和测试代码里的图像缩放方法需要统一，举个例子，训练代码中缩放方法为固定大小，但在测试代码中为等比例，这种情况下一旦固定大小缩放改变了文字的字形，在测试中就很容易得到错误的结果。","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618304618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618355265","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618355265","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618355265,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODM1NTI2NQ==","user":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T11:46:56Z","updated_at":"2020-04-23T11:46:56Z","author_association":"NONE","body":"训练代码和测试代码都没有改动，只是更改了对应的路径。\r\n训练图像使用https://github.com/Belval/TextRecognitionDataGenerator生成的，生成时大小就为32*280；训练集200W，测试集15W。生成的时候也是考虑了多个背景和字体、字体颜色等，样本大致为：\r\n![image](https://user-images.githubusercontent.com/31719207/80091834-5c650600-8594-11ea-8246-5e9766c85183.png)\r\n测试图像满足同分布。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618355265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618481372","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618481372","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618481372,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQ4MTM3Mg==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T15:55:01Z","updated_at":"2020-04-23T15:55:01Z","author_association":"NONE","body":"> \r\n> \r\n> 训练代码和测试代码都没有改动，只是更改了对应的路径。\r\n> 训练图像使用[https://github.com/Belval/TextRecognitionDataGenerator生成的，生成时大小就为32*280；训练集200W，测试集15W。生成的时候也是考虑了多个背景和字体、字体颜色等，样本大致为：](https://github.com/Belval/TextRecognitionDataGenerator%E7%94%9F%E6%88%90%E7%9A%84%EF%BC%8C%E7%94%9F%E6%88%90%E6%97%B6%E5%A4%A7%E5%B0%8F%E5%B0%B1%E4%B8%BA32*280%EF%BC%9B%E8%AE%AD%E7%BB%83%E9%9B%86200W%EF%BC%8C%E6%B5%8B%E8%AF%95%E9%9B%8615W%E3%80%82%E7%94%9F%E6%88%90%E7%9A%84%E6%97%B6%E5%80%99%E4%B9%9F%E6%98%AF%E8%80%83%E8%99%91%E4%BA%86%E5%A4%9A%E4%B8%AA%E8%83%8C%E6%99%AF%E5%92%8C%E5%AD%97%E4%BD%93%E3%80%81%E5%AD%97%E4%BD%93%E9%A2%9C%E8%89%B2%E7%AD%89%EF%BC%8C%E6%A0%B7%E6%9C%AC%E5%A4%A7%E8%87%B4%E4%B8%BA%EF%BC%9A)\r\n> ![image](https://user-images.githubusercontent.com/31719207/80091834-5c650600-8594-11ea-8246-5e9766c85183.png)\r\n> 测试图像满足同分布。\r\n\r\n测试图像满足同分布是指？\r\n因为没有看到你的测试图像具体长什么样子，所以具体是什么原因我也暂时无法确定。\r\n从你的测试结果来看，似乎后半部分（“有限公司”）的识别是正确的，说明训练什么的应该是没有问题的，只是前半部分可能由于背景或者字形等原因识别错误了，还是需要看一下测试的图片才能进一步分析。","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618481372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618755598","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618755598","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618755598,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc1NTU5OA==","user":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false},"created_at":"2020-04-24T01:43:46Z","updated_at":"2020-04-24T01:43:46Z","author_association":"NONE","body":"谢谢您百忙之中给予我指导！\r\n我主要是想通过微调另一个项目的模型来识别船名。例如测试图像：\r\n![image](https://user-images.githubusercontent.com/31719207/80165862-139e6300-860f-11ea-9e31-036b1879d209.png)\r\n用预训练模型可以识别一部分的字符：\r\n![image](https://user-images.githubusercontent.com/31719207/80165925-3892d600-860f-11ea-822b-0366dd202fb4.png)\r\n但是用微调后的模型（val准确率93%左右）识别这张船名，输出是乱码的。\r\n![image](https://user-images.githubusercontent.com/31719207/80165993-637d2a00-860f-11ea-912d-9cac49172eb0.png)\r\n再比如测试图像：\r\n![image](https://user-images.githubusercontent.com/31719207/80166091-accd7980-860f-11ea-8481-80e4423187be.png)\r\nyu预训练模型和微调模型识别结果：\r\n![image](https://user-images.githubusercontent.com/31719207/80166126-c242a380-860f-11ea-8f00-22fad9e79ad9.png)\r\n![image](https://user-images.githubusercontent.com/31719207/80166134-c79fee00-860f-11ea-8b7d-95a0204c2098.png)\r\n请问出现这种情况是为什么呢，我测试了验证集图像都能准确识别。然后测试了作者项目中的test2.png\r\n![image](https://user-images.githubusercontent.com/31719207/80165315-d38ab080-860d-11ea-94bd-89c2ca0058e7.png)\r\n我用微调后的模型用test.py来测试该图像的结果：能够识别一部分字体\r\n![image](https://user-images.githubusercontent.com/31719207/80165267-b6ee7880-860d-11ea-87ac-99534c26f2ef.png)  \r\n但是用test_v2.py来测试同样的图像得到结果会差很多：\r\n![image](https://user-images.githubusercontent.com/31719207/80165440-059c1280-860e-11ea-9c02-20431c0ef2d1.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618755598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mrlihellohorld","id":31719207,"node_id":"MDQ6VXNlcjMxNzE5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/31719207?v=4","gravatar_id":"","url":"https://api.github.com/users/mrlihellohorld","html_url":"https://github.com/mrlihellohorld","followers_url":"https://api.github.com/users/mrlihellohorld/followers","following_url":"https://api.github.com/users/mrlihellohorld/following{/other_user}","gists_url":"https://api.github.com/users/mrlihellohorld/gists{/gist_id}","starred_url":"https://api.github.com/users/mrlihellohorld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrlihellohorld/subscriptions","organizations_url":"https://api.github.com/users/mrlihellohorld/orgs","repos_url":"https://api.github.com/users/mrlihellohorld/repos","events_url":"https://api.github.com/users/mrlihellohorld/events{/privacy}","received_events_url":"https://api.github.com/users/mrlihellohorld/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618802917","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-618802917","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":618802917,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwMjkxNw==","user":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false},"created_at":"2020-04-24T05:02:13Z","updated_at":"2020-04-24T08:11:21Z","author_association":"NONE","body":"> \r\n> \r\n> 谢谢您百忙之中给予我指导！\r\n> 我主要是想通过微调另一个项目的模型来识别船名。例如测试图像：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80165862-139e6300-860f-11ea-9e31-036b1879d209.png)\r\n> 用预训练模型可以识别一部分的字符：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80165925-3892d600-860f-11ea-822b-0366dd202fb4.png)\r\n> 但是用微调后的模型（val准确率93%左右）识别这张船名，输出是乱码的。\r\n> ![image](https://user-images.githubusercontent.com/31719207/80165993-637d2a00-860f-11ea-912d-9cac49172eb0.png)\r\n> 再比如测试图像：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80166091-accd7980-860f-11ea-8481-80e4423187be.png)\r\n> yu预训练模型和微调模型识别结果：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80166126-c242a380-860f-11ea-8f00-22fad9e79ad9.png)\r\n> ![image](https://user-images.githubusercontent.com/31719207/80166134-c79fee00-860f-11ea-8b7d-95a0204c2098.png)\r\n> 请问出现这种情况是为什么呢，我测试了验证集图像都能准确识别。然后测试了作者项目中的test2.png\r\n> ![image](https://user-images.githubusercontent.com/31719207/80165315-d38ab080-860d-11ea-94bd-89c2ca0058e7.png)\r\n> 我用微调后的模型用test.py来测试该图像的结果：能够识别一部分字体\r\n> ![image](https://user-images.githubusercontent.com/31719207/80165267-b6ee7880-860d-11ea-87ac-99534c26f2ef.png)\r\n> 但是用test_v2.py来测试同样的图像得到结果会差很多：\r\n> ![image](https://user-images.githubusercontent.com/31719207/80165440-059c1280-860e-11ea-9c02-20431c0ef2d1.png)\r\n\r\n船名识别出现问题，我觉得应该是中文下方的拼音对识别产生了干扰，你可以看到训练集中的样本都是干净的，只有一行中文，但是这里下方却出现了一行拼音。\r\n如果你做的东西是检测加识别的话，可能需要改进或换一种方法得到更加准确的文字框，即能将中文和拼音分别放在两个文字框中，之后再使用crnn识别应该能得到不错的效果。\r\n\r\n对于下面的使用作者提供的测试图片进行测试，使用finetune后的模型得到的结果不理想。因为不知道你数据集的构造是否含有类似的白底黑字的样本，是否冻结了提取特征的卷积层参数，训练的epoch数量等信息，有可能还是因为训练集和测试图片不是同分布导致的。\r\ntest_v2.py的问题，应该还是缩放引起的，大致上就是训练时的缩放和测试时的缩放不一致。缩放这个问题有点复杂，跟你构造的训练集也有关系，像作者构造的训练集尺寸都是280\\*32的，在train时缩放为160\\*32，只在w上进行缩放，而且缩放的比例也比较大。test2.png的尺寸为331\\*36，如果你没有修改，在test.py中，w是按照280缩放到160的比例对331进行缩放，h则是直接压缩至32；在test_v2.py中，实现的效果应该和test.py是相同的，也就是说两段代码最后得到的结果应该是一样的。\r\n你试着用test.py加载netCRNN63.pth测试test2.png，再用test_v2.py加载crnn_best.pth测试test2.png验证一下。看看是不是因为加载的模型不同，所以结果不同，而两个test.py实际上没有区别。\r\n\r\n理论上，测试样本在缩放后的字形上与训练集的相似程度越高，测试的效果会越好。","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/618802917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"changwh","id":22048098,"node_id":"MDQ6VXNlcjIyMDQ4MDk4","avatar_url":"https://avatars.githubusercontent.com/u/22048098?v=4","gravatar_id":"","url":"https://api.github.com/users/changwh","html_url":"https://github.com/changwh","followers_url":"https://api.github.com/users/changwh/followers","following_url":"https://api.github.com/users/changwh/following{/other_user}","gists_url":"https://api.github.com/users/changwh/gists{/gist_id}","starred_url":"https://api.github.com/users/changwh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changwh/subscriptions","organizations_url":"https://api.github.com/users/changwh/orgs","repos_url":"https://api.github.com/users/changwh/repos","events_url":"https://api.github.com/users/changwh/events{/privacy}","received_events_url":"https://api.github.com/users/changwh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/1227898242","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126#issuecomment-1227898242","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/126","id":1227898242,"node_id":"IC_kwDOCPcPJ85JMD2C","user":{"login":"sssimpleboy","id":100906198,"node_id":"U_kgDOBgO01g","avatar_url":"https://avatars.githubusercontent.com/u/100906198?v=4","gravatar_id":"","url":"https://api.github.com/users/sssimpleboy","html_url":"https://github.com/sssimpleboy","followers_url":"https://api.github.com/users/sssimpleboy/followers","following_url":"https://api.github.com/users/sssimpleboy/following{/other_user}","gists_url":"https://api.github.com/users/sssimpleboy/gists{/gist_id}","starred_url":"https://api.github.com/users/sssimpleboy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sssimpleboy/subscriptions","organizations_url":"https://api.github.com/users/sssimpleboy/orgs","repos_url":"https://api.github.com/users/sssimpleboy/repos","events_url":"https://api.github.com/users/sssimpleboy/events{/privacy}","received_events_url":"https://api.github.com/users/sssimpleboy/received_events","type":"User","site_admin":false},"created_at":"2022-08-26T00:56:02Z","updated_at":"2022-08-26T00:56:02Z","author_association":"NONE","body":"大佬。我做的是自然场景的文字识别。\r\n目前的数据集有真实场景的 百度17W ，RECTS 10W, RCTW 2W 以及自己合成的一些图片 不到200W，\r\n由于带着真实数据训练 loss会变成nan。 所以现在是只用生成的图片训练，8W验证集，180W训练集，一共是3600个类别（3500汉字+英文，数字，标点）。 \r\n生成的图片 是彩色背景(一张图只有一个色)+彩色字。然后经过透视变换。然后将原来的CNN部分替换成了resnet，并把预处理的灰度图部分去掉改成了彩色图。（这个resnet部分是从aster拿过来的，aster由于转onnx遇到了问题，就没再继续了）。\r\n\r\n\r\n目前训练集损失可达到0.3以下，而验证集损失却高达4以上，准确率只有0.2\r\n请问该怎么训练，或者有什么建议呢？我知道可能过拟合了，但是L2正则化不知道怎么加，dropout还没试过，CTCloss好像是封装好的。\r\n\r\n以下是一些合成数据样例：\r\n\r\n![image](https://user-images.githubusercontent.com/100906198/186793770-ae77f28d-d3da-437c-88dc-3224c200a971.png)\r\n![image](https://user-images.githubusercontent.com/100906198/186793814-eaf617f0-2cab-4c0a-8595-162179e15980.png)\r\n![image](https://user-images.githubusercontent.com/100906198/186793848-592d1345-db20-4d53-8463-e4a86b394505.png)\r\n![image](https://user-images.githubusercontent.com/100906198/186793868-fec1c66a-903f-44e4-9b66-8218b0299f64.png)\r\n![image](https://user-images.githubusercontent.com/100906198/186793888-5f5fd130-d753-4016-a7af-4a9b6a1d6aa7.png)\r\n","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/1227898242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sssimpleboy","id":100906198,"node_id":"U_kgDOBgO01g","avatar_url":"https://avatars.githubusercontent.com/u/100906198?v=4","gravatar_id":"","url":"https://api.github.com/users/sssimpleboy","html_url":"https://github.com/sssimpleboy","followers_url":"https://api.github.com/users/sssimpleboy/followers","following_url":"https://api.github.com/users/sssimpleboy/following{/other_user}","gists_url":"https://api.github.com/users/sssimpleboy/gists{/gist_id}","starred_url":"https://api.github.com/users/sssimpleboy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sssimpleboy/subscriptions","organizations_url":"https://api.github.com/users/sssimpleboy/orgs","repos_url":"https://api.github.com/users/sssimpleboy/repos","events_url":"https://api.github.com/users/sssimpleboy/events{/privacy}","received_events_url":"https://api.github.com/users/sssimpleboy/received_events","type":"User","site_admin":false}}]