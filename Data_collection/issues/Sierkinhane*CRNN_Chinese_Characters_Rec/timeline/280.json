[{"id":4187745163,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE4Nzc0NTE2Mw==","url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/events/4187745163","actor":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-10T06:45:12Z","performed_via_github_app":null},{"id":4187745164,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxODc3NDUxNjQ=","url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/events/4187745164","actor":{"login":"Sierkinhane","id":41798797,"node_id":"MDQ6VXNlcjQxNzk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41798797?v=4","gravatar_id":"","url":"https://api.github.com/users/Sierkinhane","html_url":"https://github.com/Sierkinhane","followers_url":"https://api.github.com/users/Sierkinhane/followers","following_url":"https://api.github.com/users/Sierkinhane/following{/other_user}","gists_url":"https://api.github.com/users/Sierkinhane/gists{/gist_id}","starred_url":"https://api.github.com/users/Sierkinhane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sierkinhane/subscriptions","organizations_url":"https://api.github.com/users/Sierkinhane/orgs","repos_url":"https://api.github.com/users/Sierkinhane/repos","events_url":"https://api.github.com/users/Sierkinhane/events{/privacy}","received_events_url":"https://api.github.com/users/Sierkinhane/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-10T06:45:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862293692","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280#issuecomment-862293692","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280","id":862293692,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MjI5MzY5Mg==","user":{"login":"shelvenn","id":8746884,"node_id":"MDQ6VXNlcjg3NDY4ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/8746884?v=4","gravatar_id":"","url":"https://api.github.com/users/shelvenn","html_url":"https://github.com/shelvenn","followers_url":"https://api.github.com/users/shelvenn/followers","following_url":"https://api.github.com/users/shelvenn/following{/other_user}","gists_url":"https://api.github.com/users/shelvenn/gists{/gist_id}","starred_url":"https://api.github.com/users/shelvenn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shelvenn/subscriptions","organizations_url":"https://api.github.com/users/shelvenn/orgs","repos_url":"https://api.github.com/users/shelvenn/repos","events_url":"https://api.github.com/users/shelvenn/events{/privacy}","received_events_url":"https://api.github.com/users/shelvenn/received_events","type":"User","site_admin":false},"created_at":"2021-06-16T11:16:47Z","updated_at":"2021-06-16T11:16:47Z","author_association":"NONE","body":"同问，使用脚本转换时：\r\npython3 pytorch2onnx.py \r\nTraceback (most recent call last):\r\n  File \"pytorch2onnx.py\", line 32, in <module>\r\n    model.load_state_dict(torch.load(model_path)) #load the pytorch model\r\n  File \"/usr/local/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 845, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for CRNN:\r\n\tMissing key(s) in state_dict: \"cnn.conv0.weight\", \"cnn.conv0.bias\", \"cnn.conv1.weight\", \"cnn.conv1.bias\", \"cnn.conv2.weight\", \"cnn.conv2.bias\", \"cnn.batchnorm2.weight\", \"cnn.batchnorm2.bias\", \"cnn.batchnorm2.running_mean\", \"cnn.batchnorm2.running_var\", \"cnn.conv3.weight\", \"cnn.conv3.bias\", \"cnn.conv4.weight\", \"cnn.conv4.bias\", \"cnn.batchnorm4.weight\", \"cnn.batchnorm4.bias\", \"cnn.batchnorm4.running_mean\", \"cnn.batchnorm4.running_var\", \"cnn.conv5.weight\", \"cnn.conv5.bias\", \"cnn.conv6.weight\", \"cnn.conv6.bias\", \"cnn.batchnorm6.weight\", \"cnn.batchnorm6.bias\", \"cnn.batchnorm6.running_mean\", \"cnn.batchnorm6.running_var\", \"rnn.0.rnn.weight_ih_l0\", \"rnn.0.rnn.weight_hh_l0\", \"rnn.0.rnn.bias_ih_l0\", \"rnn.0.rnn.bias_hh_l0\", \"rnn.0.rnn.weight_ih_l0_reverse\", \"rnn.0.rnn.weight_hh_l0_reverse\", \"rnn.0.rnn.bias_ih_l0_reverse\", \"rnn.0.rnn.bias_hh_l0_reverse\", \"rnn.0.embedding.weight\", \"rnn.0.embedding.bias\", \"rnn.1.rnn.weight_ih_l0\", \"rnn.1.rnn.weight_hh_l0\", \"rnn.1.rnn.bias_ih_l0\", \"rnn.1.rnn.bias_hh_l0\", \"rnn.1.rnn.weight_ih_l0_reverse\", \"rnn.1.rnn.weight_hh_l0_reverse\", \"rnn.1.rnn.bias_ih_l0_reverse\", \"rnn.1.rnn.bias_hh_l0_reverse\", \"rnn.1.embedding.weight\", \"rnn.1.embedding.bias\". \r\n\tUnexpected key(s) in state_dict: \"state_dict\", \"epoch\", \"best_acc\". \r\n是不是网络有点不一样？","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862293692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shelvenn","id":8746884,"node_id":"MDQ6VXNlcjg3NDY4ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/8746884?v=4","gravatar_id":"","url":"https://api.github.com/users/shelvenn","html_url":"https://github.com/shelvenn","followers_url":"https://api.github.com/users/shelvenn/followers","following_url":"https://api.github.com/users/shelvenn/following{/other_user}","gists_url":"https://api.github.com/users/shelvenn/gists{/gist_id}","starred_url":"https://api.github.com/users/shelvenn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shelvenn/subscriptions","organizations_url":"https://api.github.com/users/shelvenn/orgs","repos_url":"https://api.github.com/users/shelvenn/repos","events_url":"https://api.github.com/users/shelvenn/events{/privacy}","received_events_url":"https://api.github.com/users/shelvenn/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862876061","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280#issuecomment-862876061","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280","id":862876061,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Mjg3NjA2MQ==","user":{"login":"xiao12mm","id":42893941,"node_id":"MDQ6VXNlcjQyODkzOTQx","avatar_url":"https://avatars.githubusercontent.com/u/42893941?v=4","gravatar_id":"","url":"https://api.github.com/users/xiao12mm","html_url":"https://github.com/xiao12mm","followers_url":"https://api.github.com/users/xiao12mm/followers","following_url":"https://api.github.com/users/xiao12mm/following{/other_user}","gists_url":"https://api.github.com/users/xiao12mm/gists{/gist_id}","starred_url":"https://api.github.com/users/xiao12mm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiao12mm/subscriptions","organizations_url":"https://api.github.com/users/xiao12mm/orgs","repos_url":"https://api.github.com/users/xiao12mm/repos","events_url":"https://api.github.com/users/xiao12mm/events{/privacy}","received_events_url":"https://api.github.com/users/xiao12mm/received_events","type":"User","site_admin":false},"created_at":"2021-06-17T02:52:33Z","updated_at":"2021-06-17T02:52:33Z","author_association":"NONE","body":"训练时候用的什么模型，你就加载什么模型","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862876061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xiao12mm","id":42893941,"node_id":"MDQ6VXNlcjQyODkzOTQx","avatar_url":"https://avatars.githubusercontent.com/u/42893941?v=4","gravatar_id":"","url":"https://api.github.com/users/xiao12mm","html_url":"https://github.com/xiao12mm","followers_url":"https://api.github.com/users/xiao12mm/followers","following_url":"https://api.github.com/users/xiao12mm/following{/other_user}","gists_url":"https://api.github.com/users/xiao12mm/gists{/gist_id}","starred_url":"https://api.github.com/users/xiao12mm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiao12mm/subscriptions","organizations_url":"https://api.github.com/users/xiao12mm/orgs","repos_url":"https://api.github.com/users/xiao12mm/repos","events_url":"https://api.github.com/users/xiao12mm/events{/privacy}","received_events_url":"https://api.github.com/users/xiao12mm/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862881180","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280#issuecomment-862881180","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280","id":862881180,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Mjg4MTE4MA==","user":{"login":"shelvenn","id":8746884,"node_id":"MDQ6VXNlcjg3NDY4ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/8746884?v=4","gravatar_id":"","url":"https://api.github.com/users/shelvenn","html_url":"https://github.com/shelvenn","followers_url":"https://api.github.com/users/shelvenn/followers","following_url":"https://api.github.com/users/shelvenn/following{/other_user}","gists_url":"https://api.github.com/users/shelvenn/gists{/gist_id}","starred_url":"https://api.github.com/users/shelvenn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shelvenn/subscriptions","organizations_url":"https://api.github.com/users/shelvenn/orgs","repos_url":"https://api.github.com/users/shelvenn/repos","events_url":"https://api.github.com/users/shelvenn/events{/privacy}","received_events_url":"https://api.github.com/users/shelvenn/received_events","type":"User","site_admin":false},"created_at":"2021-06-17T03:06:21Z","updated_at":"2021-06-17T03:06:21Z","author_association":"NONE","body":"我用crnn_pytorch  CRNN_Chinese_Characters_Rec训练出来的模型 pth，但是转ONNX一直不成功，\r\n\r\n\r\n\r\n***@***.***\r\n \r\n发件人： xiao12mm\r\n发送时间： 2021-06-17 10:52\r\n收件人： Sierkinhane/CRNN_Chinese_Characters_Rec\r\n抄送： lwx; Comment\r\n主题： Re: [Sierkinhane/CRNN_Chinese_Characters_Rec] 训练出来的模型怎么转ONNX？GIT主？ (#280)\r\n训练时候用的什么模型，你就加载什么模型\r\n—\r\nYou are receiving this because you commented.\r\nReply to this email directly, view it on GitHub, or unsubscribe.\r\n","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862881180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shelvenn","id":8746884,"node_id":"MDQ6VXNlcjg3NDY4ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/8746884?v=4","gravatar_id":"","url":"https://api.github.com/users/shelvenn","html_url":"https://github.com/shelvenn","followers_url":"https://api.github.com/users/shelvenn/followers","following_url":"https://api.github.com/users/shelvenn/following{/other_user}","gists_url":"https://api.github.com/users/shelvenn/gists{/gist_id}","starred_url":"https://api.github.com/users/shelvenn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shelvenn/subscriptions","organizations_url":"https://api.github.com/users/shelvenn/orgs","repos_url":"https://api.github.com/users/shelvenn/repos","events_url":"https://api.github.com/users/shelvenn/events{/privacy}","received_events_url":"https://api.github.com/users/shelvenn/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862883680","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280#issuecomment-862883680","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280","id":862883680,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Mjg4MzY4MA==","user":{"login":"xiao12mm","id":42893941,"node_id":"MDQ6VXNlcjQyODkzOTQx","avatar_url":"https://avatars.githubusercontent.com/u/42893941?v=4","gravatar_id":"","url":"https://api.github.com/users/xiao12mm","html_url":"https://github.com/xiao12mm","followers_url":"https://api.github.com/users/xiao12mm/followers","following_url":"https://api.github.com/users/xiao12mm/following{/other_user}","gists_url":"https://api.github.com/users/xiao12mm/gists{/gist_id}","starred_url":"https://api.github.com/users/xiao12mm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiao12mm/subscriptions","organizations_url":"https://api.github.com/users/xiao12mm/orgs","repos_url":"https://api.github.com/users/xiao12mm/repos","events_url":"https://api.github.com/users/xiao12mm/events{/privacy}","received_events_url":"https://api.github.com/users/xiao12mm/received_events","type":"User","site_admin":false},"created_at":"2021-06-17T03:12:09Z","updated_at":"2021-06-17T03:12:09Z","author_association":"NONE","body":"Error(s) in loading state_dict for CRNN:\r\n加载模型参数的时候就报错了，训练的时候用的什么网络，加载的时候要加载相同的网络，这样参数才对的上","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862883680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xiao12mm","id":42893941,"node_id":"MDQ6VXNlcjQyODkzOTQx","avatar_url":"https://avatars.githubusercontent.com/u/42893941?v=4","gravatar_id":"","url":"https://api.github.com/users/xiao12mm","html_url":"https://github.com/xiao12mm","followers_url":"https://api.github.com/users/xiao12mm/followers","following_url":"https://api.github.com/users/xiao12mm/following{/other_user}","gists_url":"https://api.github.com/users/xiao12mm/gists{/gist_id}","starred_url":"https://api.github.com/users/xiao12mm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiao12mm/subscriptions","organizations_url":"https://api.github.com/users/xiao12mm/orgs","repos_url":"https://api.github.com/users/xiao12mm/repos","events_url":"https://api.github.com/users/xiao12mm/events{/privacy}","received_events_url":"https://api.github.com/users/xiao12mm/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862888936","html_url":"https://github.com/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280#issuecomment-862888936","issue_url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/280","id":862888936,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Mjg4ODkzNg==","user":{"login":"shelvenn","id":8746884,"node_id":"MDQ6VXNlcjg3NDY4ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/8746884?v=4","gravatar_id":"","url":"https://api.github.com/users/shelvenn","html_url":"https://github.com/shelvenn","followers_url":"https://api.github.com/users/shelvenn/followers","following_url":"https://api.github.com/users/shelvenn/following{/other_user}","gists_url":"https://api.github.com/users/shelvenn/gists{/gist_id}","starred_url":"https://api.github.com/users/shelvenn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shelvenn/subscriptions","organizations_url":"https://api.github.com/users/shelvenn/orgs","repos_url":"https://api.github.com/users/shelvenn/repos","events_url":"https://api.github.com/users/shelvenn/events{/privacy}","received_events_url":"https://api.github.com/users/shelvenn/received_events","type":"User","site_admin":false},"created_at":"2021-06-17T03:24:16Z","updated_at":"2021-06-17T03:24:16Z","author_association":"NONE","body":"https://github.com/YIYANGCAI/CRNN-Pytorch2TensorRT-via-ONNX，我用的这个pytorch2onnx.py，模型我对比过了，一样的，但是加载参数的时候还是有很大差别，\r\n这个问题是可以解决的，Unexpected key(s) in state_dict: \"state_dict\", \"epoch\", \"best_acc\".\r\n但是用checkpoint = torch.load(modelpath)  #modelpath是你要加载训练好的模型文件地址\r\nmodel.load_state_dict(checkpoint['state_dict'])\r\n还是出现问题的呢\r\n    model.load_state_dict(checkpoint['state_dict'])\r\n  File \"/usr/local/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 845, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for CRNN:\r\n\tsize mismatch for rnn.0.rnn.weight_ih_l0: copying a param with shape torch.Size([1024, 512]) from checkpoint, the shape in current model is torch.Size([1120, 512]).\r\n\tsize mismatch for rnn.0.rnn.weight_hh_l0: copying a param with shape torch.Size([1024, 256]) from checkpoint, the shape in current model is torch.Size([1120, 280]).\r\n\tsize mismatch for rnn.0.rnn.bias_ih_l0: copying a param with shape torch.Size([1024]) from checkpoint, the shape in current model is torch.Size([1120]).\r\n\tsize mismatch for rnn.0.rnn.bias_hh_l0: copying a param with shape torch.Size([1024]) from checkpoint, the shape in current model is torch.Size([1120]).\r\n\tsize mismatch for rnn.0.rnn.weight_ih_l0_reverse: copying a param with shape torch.Size([1024, 512]) from checkpoint, the shape in current model is torch.Size([1120, 512]).\r\n\tsize mismatch for rnn.0.rnn.weight_hh_l0_reverse: copying a param with shape torch.Size([1024, 256]) from checkpoint, the shape in current model is torch.Size([1120, 280]).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Sierkinhane/CRNN_Chinese_Characters_Rec/issues/comments/862888936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shelvenn","id":8746884,"node_id":"MDQ6VXNlcjg3NDY4ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/8746884?v=4","gravatar_id":"","url":"https://api.github.com/users/shelvenn","html_url":"https://github.com/shelvenn","followers_url":"https://api.github.com/users/shelvenn/followers","following_url":"https://api.github.com/users/shelvenn/following{/other_user}","gists_url":"https://api.github.com/users/shelvenn/gists{/gist_id}","starred_url":"https://api.github.com/users/shelvenn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shelvenn/subscriptions","organizations_url":"https://api.github.com/users/shelvenn/orgs","repos_url":"https://api.github.com/users/shelvenn/repos","events_url":"https://api.github.com/users/shelvenn/events{/privacy}","received_events_url":"https://api.github.com/users/shelvenn/received_events","type":"User","site_admin":false}}]