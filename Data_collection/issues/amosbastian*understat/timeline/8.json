[{"url":"https://api.github.com/repos/amosbastian/understat/issues/comments/527520318","html_url":"https://github.com/amosbastian/understat/issues/8#issuecomment-527520318","issue_url":"https://api.github.com/repos/amosbastian/understat/issues/8","id":527520318,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzUyMDMxOA==","user":{"login":"amosbastian","id":9199433,"node_id":"MDQ6VXNlcjkxOTk0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/9199433?v=4","gravatar_id":"","url":"https://api.github.com/users/amosbastian","html_url":"https://github.com/amosbastian","followers_url":"https://api.github.com/users/amosbastian/followers","following_url":"https://api.github.com/users/amosbastian/following{/other_user}","gists_url":"https://api.github.com/users/amosbastian/gists{/gist_id}","starred_url":"https://api.github.com/users/amosbastian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amosbastian/subscriptions","organizations_url":"https://api.github.com/users/amosbastian/orgs","repos_url":"https://api.github.com/users/amosbastian/repos","events_url":"https://api.github.com/users/amosbastian/events{/privacy}","received_events_url":"https://api.github.com/users/amosbastian/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T15:51:52Z","updated_at":"2019-09-03T15:51:52Z","author_association":"OWNER","body":"You'd have to filter the results list by certain dates yourself. Something like this should do the trick:\r\n\r\n```python\r\nimport asyncio\r\nimport datetime\r\nimport json\r\n\r\nimport aiohttp\r\nfrom dateutil.parser import parse\r\n\r\nfrom understat import Understat\r\n\r\n\r\ndef previous_week_range(date):\r\n    start_date = date + datetime.timedelta(-date.weekday(), weeks=-1)\r\n    end_date = date + datetime.timedelta(-date.weekday() - 1)\r\n    return start_date, end_date\r\n\r\n\r\nasync def main():\r\n    date_one, date_two = previous_week_range(datetime.date.today())\r\n\r\n    async with aiohttp.ClientSession() as session:\r\n        understat = Understat(session)\r\n        results = await understat.get_league_results(\"Bundesliga\", 2019)\r\n\r\n    filtered_results = [result for result in results\r\n                        if parse(result[\"datetime\"]).date() >= date_one and\r\n                        parse(result[\"datetime\"]).date() <= date_two]\r\n\r\n    print(json.dumps(filtered_results, indent=4))\r\n\r\nif __name__ == \"__main__\":\r\n    asyncio.run(main())\r\n```","reactions":{"url":"https://api.github.com/repos/amosbastian/understat/issues/comments/527520318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amosbastian","id":9199433,"node_id":"MDQ6VXNlcjkxOTk0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/9199433?v=4","gravatar_id":"","url":"https://api.github.com/users/amosbastian","html_url":"https://github.com/amosbastian","followers_url":"https://api.github.com/users/amosbastian/followers","following_url":"https://api.github.com/users/amosbastian/following{/other_user}","gists_url":"https://api.github.com/users/amosbastian/gists{/gist_id}","starred_url":"https://api.github.com/users/amosbastian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amosbastian/subscriptions","organizations_url":"https://api.github.com/users/amosbastian/orgs","repos_url":"https://api.github.com/users/amosbastian/repos","events_url":"https://api.github.com/users/amosbastian/events{/privacy}","received_events_url":"https://api.github.com/users/amosbastian/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/amosbastian/understat/issues/comments/527780815","html_url":"https://github.com/amosbastian/understat/issues/8#issuecomment-527780815","issue_url":"https://api.github.com/repos/amosbastian/understat/issues/8","id":527780815,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzc4MDgxNQ==","user":{"login":"FWeissenb","id":2239170,"node_id":"MDQ6VXNlcjIyMzkxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/2239170?v=4","gravatar_id":"","url":"https://api.github.com/users/FWeissenb","html_url":"https://github.com/FWeissenb","followers_url":"https://api.github.com/users/FWeissenb/followers","following_url":"https://api.github.com/users/FWeissenb/following{/other_user}","gists_url":"https://api.github.com/users/FWeissenb/gists{/gist_id}","starred_url":"https://api.github.com/users/FWeissenb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FWeissenb/subscriptions","organizations_url":"https://api.github.com/users/FWeissenb/orgs","repos_url":"https://api.github.com/users/FWeissenb/repos","events_url":"https://api.github.com/users/FWeissenb/events{/privacy}","received_events_url":"https://api.github.com/users/FWeissenb/received_events","type":"User","site_admin":false},"created_at":"2019-09-04T07:33:57Z","updated_at":"2019-09-04T07:33:57Z","author_association":"NONE","body":"But this only works if the last matchday was a week before ğŸ˜„ \r\nSo if we have a break for national games (like atm) it doesn't work anymore ğŸ˜¢ \r\n\r\nIf I look at understat they also filter there data and only show \"current matchday\" and some buttons to switch prev and next. How do they do this? Is there any list \"this matchday contains the following games: id1, id2, id3..\" so that I can get this list and every single game?","reactions":{"url":"https://api.github.com/repos/amosbastian/understat/issues/comments/527780815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"FWeissenb","id":2239170,"node_id":"MDQ6VXNlcjIyMzkxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/2239170?v=4","gravatar_id":"","url":"https://api.github.com/users/FWeissenb","html_url":"https://github.com/FWeissenb","followers_url":"https://api.github.com/users/FWeissenb/followers","following_url":"https://api.github.com/users/FWeissenb/following{/other_user}","gists_url":"https://api.github.com/users/FWeissenb/gists{/gist_id}","starred_url":"https://api.github.com/users/FWeissenb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FWeissenb/subscriptions","organizations_url":"https://api.github.com/users/FWeissenb/orgs","repos_url":"https://api.github.com/users/FWeissenb/repos","events_url":"https://api.github.com/users/FWeissenb/events{/privacy}","received_events_url":"https://api.github.com/users/FWeissenb/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/amosbastian/understat/issues/comments/527861495","html_url":"https://github.com/amosbastian/understat/issues/8#issuecomment-527861495","issue_url":"https://api.github.com/repos/amosbastian/understat/issues/8","id":527861495,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzg2MTQ5NQ==","user":{"login":"amosbastian","id":9199433,"node_id":"MDQ6VXNlcjkxOTk0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/9199433?v=4","gravatar_id":"","url":"https://api.github.com/users/amosbastian","html_url":"https://github.com/amosbastian","followers_url":"https://api.github.com/users/amosbastian/followers","following_url":"https://api.github.com/users/amosbastian/following{/other_user}","gists_url":"https://api.github.com/users/amosbastian/gists{/gist_id}","starred_url":"https://api.github.com/users/amosbastian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amosbastian/subscriptions","organizations_url":"https://api.github.com/users/amosbastian/orgs","repos_url":"https://api.github.com/users/amosbastian/repos","events_url":"https://api.github.com/users/amosbastian/events{/privacy}","received_events_url":"https://api.github.com/users/amosbastian/received_events","type":"User","site_admin":false},"created_at":"2019-09-04T11:32:58Z","updated_at":"2019-09-04T11:32:58Z","author_association":"OWNER","body":"I'm not sure how Understat does this specifically but they probably do something like this:\r\n\r\n```python\r\nimport asyncio\r\nimport datetime\r\nimport json\r\n\r\nimport aiohttp\r\nfrom dateutil.parser import parse\r\n\r\nfrom understat import Understat\r\n\r\n\r\ndef get_latest_week_results(results, week):\r\n    latest_results = [\r\n        result for result in results\r\n        if parse(result[\"datetime\"]).date().isocalendar()[1] == week]\r\n\r\n    if not latest_results:\r\n        return get_latest_week_results(results, week - 1)\r\n\r\n    return latest_results\r\n\r\n\r\nasync def main():\r\n    async with aiohttp.ClientSession() as session:\r\n        understat = Understat(session)\r\n        results = await understat.get_league_results(\"Bundesliga\", 2019)\r\n\r\n    current_week = datetime.datetime.now().isocalendar()[1]\r\n    print(json.dumps(get_latest_week_results(results, current_week), indent=4))\r\n\r\nif __name__ == \"__main__\":\r\n    asyncio.run(main())\r\n```\r\n\r\nI mean, it's basically the same thing as above, but it just uses the week number instead. It always gets the latest results, which is what I think you want. To get the next fixtures they'd probably have a similar function to `get_latest_week_results`, but the other way around (and using fixtures instead of results), which executes when someone clicks the buttons.","reactions":{"url":"https://api.github.com/repos/amosbastian/understat/issues/comments/527861495/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amosbastian","id":9199433,"node_id":"MDQ6VXNlcjkxOTk0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/9199433?v=4","gravatar_id":"","url":"https://api.github.com/users/amosbastian","html_url":"https://github.com/amosbastian","followers_url":"https://api.github.com/users/amosbastian/followers","following_url":"https://api.github.com/users/amosbastian/following{/other_user}","gists_url":"https://api.github.com/users/amosbastian/gists{/gist_id}","starred_url":"https://api.github.com/users/amosbastian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amosbastian/subscriptions","organizations_url":"https://api.github.com/users/amosbastian/orgs","repos_url":"https://api.github.com/users/amosbastian/repos","events_url":"https://api.github.com/users/amosbastian/events{/privacy}","received_events_url":"https://api.github.com/users/amosbastian/received_events","type":"User","site_admin":false}},{"id":2827772891,"node_id":"MDExOkNsb3NlZEV2ZW50MjgyNzc3Mjg5MQ==","url":"https://api.github.com/repos/amosbastian/understat/issues/events/2827772891","actor":{"login":"FWeissenb","id":2239170,"node_id":"MDQ6VXNlcjIyMzkxNzA=","avatar_url":"https://avatars.githubusercontent.com/u/2239170?v=4","gravatar_id":"","url":"https://api.github.com/users/FWeissenb","html_url":"https://github.com/FWeissenb","followers_url":"https://api.github.com/users/FWeissenb/followers","following_url":"https://api.github.com/users/FWeissenb/following{/other_user}","gists_url":"https://api.github.com/users/FWeissenb/gists{/gist_id}","starred_url":"https://api.github.com/users/FWeissenb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FWeissenb/subscriptions","organizations_url":"https://api.github.com/users/FWeissenb/orgs","repos_url":"https://api.github.com/users/FWeissenb/repos","events_url":"https://api.github.com/users/FWeissenb/events{/privacy}","received_events_url":"https://api.github.com/users/FWeissenb/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-11-25T11:46:27Z","state_reason":null,"performed_via_github_app":null}]