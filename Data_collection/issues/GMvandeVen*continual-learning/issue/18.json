{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/18","repository_url":"https://api.github.com/repos/GMvandeVen/continual-learning","labels_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/18/labels{/name}","comments_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/18/comments","events_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/18/events","html_url":"https://github.com/GMvandeVen/continual-learning/issues/18","id":1027039885,"node_id":"I_kwDOCPgkf849N2KN","number":18,"title":"one little confusion about the loss_fn_kd function","user":{"login":"HLBayes","id":24219983,"node_id":"MDQ6VXNlcjI0MjE5OTgz","avatar_url":"https://avatars.githubusercontent.com/u/24219983?v=4","gravatar_id":"","url":"https://api.github.com/users/HLBayes","html_url":"https://github.com/HLBayes","followers_url":"https://api.github.com/users/HLBayes/followers","following_url":"https://api.github.com/users/HLBayes/following{/other_user}","gists_url":"https://api.github.com/users/HLBayes/gists{/gist_id}","starred_url":"https://api.github.com/users/HLBayes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HLBayes/subscriptions","organizations_url":"https://api.github.com/users/HLBayes/orgs","repos_url":"https://api.github.com/users/HLBayes/repos","events_url":"https://api.github.com/users/HLBayes/events{/privacy}","received_events_url":"https://api.github.com/users/HLBayes/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-10-15T03:23:59Z","updated_at":"2022-08-17T18:31:25Z","closed_at":"2022-08-17T18:31:25Z","author_association":"NONE","active_lock_reason":null,"body":"Many thanks for your impressive project. Here I am a few confused about the `.detach()` in the below code,\r\nhttps://github.com/GMvandeVen/continual-learning/blob/a02db26d3b10754abdc4a549bdcde6af488c94e0/utils.py#L35\r\n\r\nwhich is defined in https://github.com/GMvandeVen/continual-learning/blob/a02db26d3b10754abdc4a549bdcde6af488c94e0/utils.py#L18\r\n\r\nRefer to the blog, [PyTorch .detach() method ](http://www.bnikolic.co.uk/blog/pytorch-detach.html), `.detach()` will take the `targets_norm` as one fixed parameter in the the `KD_loss`, and the  backpropagation will not update the parameters along the `targets_norm` related branch.\r\n\r\nHowever, in your another project, [brain-inspired-replay](https://github.com/GMvandeVen/brain-inspired-replay), the same loss function, [`loss_fn_kd`](https://github.com/GMvandeVen/brain-inspired-replay/blob/1a030f75666c656416e1ca02466758ca32cf2fe4/models/utils/loss_functions.py#L12) uses,\r\n\r\n```python\r\n targets_norm = torch.cat([targets_norm, zeros_to_add], dim=1)\r\n```\r\nas shown in line 29, in which no `.detach()` is attached.\r\n\r\n Although the same results all these two types I have tested, I am still confused about how does the second type work?","closed_by":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/18/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/18/timeline","performed_via_github_app":null,"state_reason":"completed"}