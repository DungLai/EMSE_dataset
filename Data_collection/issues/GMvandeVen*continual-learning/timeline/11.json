[{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/557785926","html_url":"https://github.com/GMvandeVen/continual-learning/issues/11#issuecomment-557785926","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/11","id":557785926,"node_id":"MDEyOklzc3VlQ29tbWVudDU1Nzc4NTkyNg==","user":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"created_at":"2019-11-23T10:27:19Z","updated_at":"2019-11-23T10:27:19Z","author_association":"OWNER","body":"Thanks for your comment! You’re right that the order in which the square and average operations are applied matters, exactly for the reason you point out. But the code in my repository does use the correct order, because the Fisher Information matrix is calculated with batches of size 1 ([see here](https://github.com/GMvandeVen/continual-learning/blob/ff0e03cb913ac0dea4fc59058968b1e6784decfd/continual_learner.py#L88-L92)).\r\n\r\nI admit this might not be the most efficient implementation (alternative suggestions are very welcome!), but the reason I chose this implementation for now is that (as far as I’m aware) in PyTorch it is currently not possible to access the gradients of individual elements in a sum.","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/557785926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/557812211","html_url":"https://github.com/GMvandeVen/continual-learning/issues/11#issuecomment-557812211","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/11","id":557812211,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NzgxMjIxMQ==","user":{"login":"tangbinh","id":11259516,"node_id":"MDQ6VXNlcjExMjU5NTE2","avatar_url":"https://avatars.githubusercontent.com/u/11259516?v=4","gravatar_id":"","url":"https://api.github.com/users/tangbinh","html_url":"https://github.com/tangbinh","followers_url":"https://api.github.com/users/tangbinh/followers","following_url":"https://api.github.com/users/tangbinh/following{/other_user}","gists_url":"https://api.github.com/users/tangbinh/gists{/gist_id}","starred_url":"https://api.github.com/users/tangbinh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangbinh/subscriptions","organizations_url":"https://api.github.com/users/tangbinh/orgs","repos_url":"https://api.github.com/users/tangbinh/repos","events_url":"https://api.github.com/users/tangbinh/events{/privacy}","received_events_url":"https://api.github.com/users/tangbinh/received_events","type":"User","site_admin":false},"created_at":"2019-11-23T16:30:16Z","updated_at":"2019-11-23T16:30:16Z","author_association":"NONE","body":"I see. Estimating the Fisher information matrix with a single example seems to result in high variance (see [this notebook](https://github.com/ariseff/overcoming-catastrophic/blob/master/experiment.ipynb) for example). Have you seen any difference if a larger batch size is used? As you said, I don't think it's possible to access individual gradients with just one backward call.","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/557812211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tangbinh","id":11259516,"node_id":"MDQ6VXNlcjExMjU5NTE2","avatar_url":"https://avatars.githubusercontent.com/u/11259516?v=4","gravatar_id":"","url":"https://api.github.com/users/tangbinh","html_url":"https://github.com/tangbinh","followers_url":"https://api.github.com/users/tangbinh/followers","following_url":"https://api.github.com/users/tangbinh/following{/other_user}","gists_url":"https://api.github.com/users/tangbinh/gists{/gist_id}","starred_url":"https://api.github.com/users/tangbinh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangbinh/subscriptions","organizations_url":"https://api.github.com/users/tangbinh/orgs","repos_url":"https://api.github.com/users/tangbinh/repos","events_url":"https://api.github.com/users/tangbinh/events{/privacy}","received_events_url":"https://api.github.com/users/tangbinh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/557831206","html_url":"https://github.com/GMvandeVen/continual-learning/issues/11#issuecomment-557831206","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/11","id":557831206,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NzgzMTIwNg==","user":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"created_at":"2019-11-23T20:43:21Z","updated_at":"2019-11-23T20:43:21Z","author_association":"OWNER","body":"Sorry, I should have been clearer, I realise my use of ‘batches’ is a bit confusing here. What I meant is that the backward passes(*) are done one-by-one for each sample used the calculate the Fisher Information matrix. The number of samples used to calculate the Fisher Information matrix is typically not 1 (this is set by the option `--fisher-n`; the default is using the full training-set).\r\n\r\n(*) actually also the forward passes; I now realise this could be made more efficient by at least performing the forward passes with larger ‘batches’. I’ll look into that when I get some time.","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/557831206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false}},{"id":2893921052,"node_id":"MDExOkNsb3NlZEV2ZW50Mjg5MzkyMTA1Mg==","url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/events/2893921052","actor":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-12-18T15:13:21Z","state_reason":null,"performed_via_github_app":null}]