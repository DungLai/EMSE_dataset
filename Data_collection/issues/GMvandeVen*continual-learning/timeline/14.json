[{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805725859","html_url":"https://github.com/GMvandeVen/continual-learning/issues/14#issuecomment-805725859","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/14","id":805725859,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTcyNTg1OQ==","user":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"created_at":"2021-03-24T11:00:37Z","updated_at":"2021-03-24T11:00:37Z","author_association":"OWNER","body":"Hi, thanks for your interest in the code! You're correct that in the line you refer to, `p.grad` is the gradient of the regularized loss. But my understanding of SI is that it is this gradient that should be used for computing the parameter regularisation strengths. I think it's outside of the scope of this issue to go into to much depth, but what I found to be a useful paper in this regard (even though it is about EWC rather than SI) is this one: https://arxiv.org/abs/1712.03847. Hope this helps!","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805725859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805753167","html_url":"https://github.com/GMvandeVen/continual-learning/issues/14#issuecomment-805753167","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/14","id":805753167,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTc1MzE2Nw==","user":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"created_at":"2021-03-24T11:40:35Z","updated_at":"2021-03-24T11:40:35Z","author_association":"OWNER","body":"Actually, thinking a bit more about, I'm not sure anymore how relevant the above paper is to this specific issue. Sorry. I quickly checked the original paper on SI and my impression is that based on the description in that paper it is ambiguous whether they used the gradient of the reguarized or the unregularized loss. (But please correct me if you can point out somewhere in that paper where this is specified!)\r\nAnyway, for this code I intended to follow the approach as described in Eq 13-15 in this paper (https://www.nature.com/articles/s41467-020-17866-2). Whether or not that is the most appropriate approach is an interesting question, I'll need to think more about that. My guess is that in practice it will not matter too much, although that remains to be demonstrated.\r\n","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805753167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805775432","html_url":"https://github.com/GMvandeVen/continual-learning/issues/14#issuecomment-805775432","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/14","id":805775432,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTc3NTQzMg==","user":{"login":"ssydasheng","id":8342176,"node_id":"MDQ6VXNlcjgzNDIxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/8342176?v=4","gravatar_id":"","url":"https://api.github.com/users/ssydasheng","html_url":"https://github.com/ssydasheng","followers_url":"https://api.github.com/users/ssydasheng/followers","following_url":"https://api.github.com/users/ssydasheng/following{/other_user}","gists_url":"https://api.github.com/users/ssydasheng/gists{/gist_id}","starred_url":"https://api.github.com/users/ssydasheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssydasheng/subscriptions","organizations_url":"https://api.github.com/users/ssydasheng/orgs","repos_url":"https://api.github.com/users/ssydasheng/repos","events_url":"https://api.github.com/users/ssydasheng/events{/privacy}","received_events_url":"https://api.github.com/users/ssydasheng/received_events","type":"User","site_admin":false},"created_at":"2021-03-24T12:19:15Z","updated_at":"2021-03-24T12:19:15Z","author_association":"NONE","body":"Thank you very much for your detailed response. It seems that the nature paper you referred to indeed used the regularized loss. And I haven't found in the SI paper specifying whether they used the regularized loss or the original loss. I tried to read the released code of the SI paper, but frankly speaking I didn't manage to understand their code well enough either. That's why I came to read your implementation. \r\n\r\nDespite that, I noticed in their released code, the original loss is used, in the following line,\r\nhttps://github.com/ganguli-lab/pathint/blob/master/pathint/optimizers.py#L123\r\nFurthermore, the `unreg_grads` is used in the following line, https://github.com/ganguli-lab/pathint/blob/master/pathint/protocols.py#L34. That's why I thought that they used the original loss, though I am not sure about this.\r\n\r\nI agree with you that in practice it might not matter too much. For using the regularized loss, I think it is similar to use larger coefficients for earlier tasks. Since the Hessian of the quadratic regularization captures the contributions of the previous tasks, and their contribution also exists in the `omega`. Then previous tasks will be counted multiple times. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805775432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ssydasheng","id":8342176,"node_id":"MDQ6VXNlcjgzNDIxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/8342176?v=4","gravatar_id":"","url":"https://api.github.com/users/ssydasheng","html_url":"https://github.com/ssydasheng","followers_url":"https://api.github.com/users/ssydasheng/followers","following_url":"https://api.github.com/users/ssydasheng/following{/other_user}","gists_url":"https://api.github.com/users/ssydasheng/gists{/gist_id}","starred_url":"https://api.github.com/users/ssydasheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssydasheng/subscriptions","organizations_url":"https://api.github.com/users/ssydasheng/orgs","repos_url":"https://api.github.com/users/ssydasheng/repos","events_url":"https://api.github.com/users/ssydasheng/events{/privacy}","received_events_url":"https://api.github.com/users/ssydasheng/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805844499","html_url":"https://github.com/GMvandeVen/continual-learning/issues/14#issuecomment-805844499","issue_url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/14","id":805844499,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNTg0NDQ5OQ==","user":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false},"created_at":"2021-03-24T13:58:13Z","updated_at":"2021-03-24T13:58:13Z","author_association":"OWNER","body":"Interesting, thanks! When I have some time I might look more into this.","reactions":{"url":"https://api.github.com/repos/GMvandeVen/continual-learning/issues/comments/805844499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"GMvandeVen","id":27809645,"node_id":"MDQ6VXNlcjI3ODA5NjQ1","avatar_url":"https://avatars.githubusercontent.com/u/27809645?v=4","gravatar_id":"","url":"https://api.github.com/users/GMvandeVen","html_url":"https://github.com/GMvandeVen","followers_url":"https://api.github.com/users/GMvandeVen/followers","following_url":"https://api.github.com/users/GMvandeVen/following{/other_user}","gists_url":"https://api.github.com/users/GMvandeVen/gists{/gist_id}","starred_url":"https://api.github.com/users/GMvandeVen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMvandeVen/subscriptions","organizations_url":"https://api.github.com/users/GMvandeVen/orgs","repos_url":"https://api.github.com/users/GMvandeVen/repos","events_url":"https://api.github.com/users/GMvandeVen/events{/privacy}","received_events_url":"https://api.github.com/users/GMvandeVen/received_events","type":"User","site_admin":false}}]