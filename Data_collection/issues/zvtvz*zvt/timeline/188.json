[{"id":5566906613,"node_id":"AE_lADOCrI2ac4-Ls18zwAAAAFL0ED1","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/5566906613","actor":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-11-04T08:52:02Z","assignee":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"id":5566907750,"node_id":"LE_lADOCrI2ac4-Ls18zwAAAAFL0EVm","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/5566907750","actor":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-11-04T08:52:16Z","label":{"name":"enhancement","color":"a2eeef"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/1008239070","html_url":"https://github.com/zvtvz/zvt/issues/188#issuecomment-1008239070","issue_url":"https://api.github.com/repos/zvtvz/zvt/issues/188","id":1008239070,"node_id":"IC_kwDOCrI2ac48GIHe","user":{"login":"awfssv","id":24654879,"node_id":"MDQ6VXNlcjI0NjU0ODc5","avatar_url":"https://avatars.githubusercontent.com/u/24654879?v=4","gravatar_id":"","url":"https://api.github.com/users/awfssv","html_url":"https://github.com/awfssv","followers_url":"https://api.github.com/users/awfssv/followers","following_url":"https://api.github.com/users/awfssv/following{/other_user}","gists_url":"https://api.github.com/users/awfssv/gists{/gist_id}","starred_url":"https://api.github.com/users/awfssv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awfssv/subscriptions","organizations_url":"https://api.github.com/users/awfssv/orgs","repos_url":"https://api.github.com/users/awfssv/repos","events_url":"https://api.github.com/users/awfssv/events{/privacy}","received_events_url":"https://api.github.com/users/awfssv/received_events","type":"User","site_admin":false},"created_at":"2022-01-09T06:27:11Z","updated_at":"2022-01-09T06:27:11Z","author_association":"NONE","body":"执行examples\\data_runner\\finance_runner.py 碰到下面这错误貌似跟这个有关，请问怎么解决？\r\n\r\n2022-01-09 13:54:08,861  INFO  MainThread  Adding job tentatively -- it will be properly scheduled when the scheduler starts\r\n2022-01-09 13:54:08,861  INFO  MainThread   record data: Stock, entity_provider: None, data_provider: eastmoney\r\nStock registered recorders:{'joinquant': <class 'zvt.recorders.joinquant.meta.jq_stock_meta_recorder.JqChinaStockRecorder'>, 'exchange': <class 'zvt.recorders.exchange.exchange_stock_meta_recorder.ExchangeStockMetaRecorder'>, 'em': <class 'zvt.recorders.em.meta.em_stock_meta_recorder.EMStockRecorder'>, 'eastmoney': <class 'zvt.recorders.eastmoney.meta.eastmoney_stock_meta_recorder.EastmoneyStockRecorder'>}\r\n2022-01-09 13:54:08,869  ERROR  MainThread  report error:(sqlite3.OperationalError) no such column: recoder_state.state_name\r\n[SQL: SELECT recoder_state.id AS recoder_state_id, recoder_state.entity_id AS recoder_state_entity_id, recoder_state.timestamp AS recoder_state_timestamp, recoder_state.state_name AS recoder_state_state_name, recoder_state.state AS recoder_state_state \r\nFROM recoder_state \r\nWHERE recoder_state.id = ?]\r\n[parameters: ('eastmoney_stock_recorder',)]\r\n(Background on this error at: http://sqlalche.me/e/14/e3q8)\r\nTraceback (most recent call last):\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1771, in _execute_context\r\n    cursor, statement, parameters, context\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_execute\r\n    cursor.execute(statement, parameters)\r\nsqlite3.OperationalError: no such column: recoder_state.state_name\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\examples\\recorder_utils.py\", line 29, in run_data_recorder\r\n    entity_ids=entity_ids, provider=data_provider, sleeping_time=sleeping_time, **recorder_kv\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\zvt\\contract\\schema.py\", line 209, in record_data\r\n    r = recorder_class(**kw)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\zvt\\contract\\recorder.py\", line 53, in __init__\r\n    super().__init__()\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\zvt\\contract\\base.py\", line 44, in __init__\r\n    self.state_domain = self.state_schema.get_one(id=self.name)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\zvt\\contract\\schema.py\", line 83, in get_one\r\n    return get_one(data_schema=cls, id=id, provider=provider)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\zvt\\contract\\api.py\", line 234, in get_one\r\n    return session.query(data_schema).get(id)\r\n  File \"<string>\", line 2, in get\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\util\\deprecations.py\", line 390, in warned\r\n    return fn(*args, **kwargs)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 942, in get\r\n    return self._get_impl(ident, loading.load_on_pk_identity)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 954, in _get_impl\r\n    execution_options=self._execution_options,\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2843, in _get_impl\r\n    load_options=load_options,\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\orm\\loading.py\", line 535, in load_on_pk_identity\r\n    bind_arguments=bind_arguments,\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1689, in execute\r\n    result = conn._execute_20(statement, params or {}, execution_options)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1582, in _execute_20\r\n    return meth(self, args_10style, kwargs_10style, execution_options)\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 324, in _execute_on_connection\r\n    self, multiparams, params, execution_options\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1461, in _execute_clauseelement\r\n    cache_hit=cache_hit,\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1814, in _execute_context\r\n    e, statement, parameters, cursor, context\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1995, in _handle_dbapi_exception\r\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\util\\compat.py\", line 207, in raise_\r\n    raise exception\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1771, in _execute_context\r\n    cursor, statement, parameters, context\r\n  File \"D:\\MyDocument\\myprogram\\python\\zvt\\venv\\lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 717, in do_execute\r\n    cursor.execute(statement, parameters)\r\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: recoder_state.state_name\r\n[SQL: SELECT recoder_state.id AS recoder_state_id, recoder_state.entity_id AS recoder_state_entity_id, recoder_state.timestamp AS recoder_state_timestamp, recoder_state.state_name AS recoder_state_state_name, recoder_state.state AS recoder_state_state \r\nFROM recoder_state \r\nWHERE recoder_state.id = ?]\r\n[parameters: ('eastmoney_stock_recorder',)]\r\n(Background on this error at: http://sqlalche.me/e/14/e3q8)","reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/1008239070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"awfssv","id":24654879,"node_id":"MDQ6VXNlcjI0NjU0ODc5","avatar_url":"https://avatars.githubusercontent.com/u/24654879?v=4","gravatar_id":"","url":"https://api.github.com/users/awfssv","html_url":"https://github.com/awfssv","followers_url":"https://api.github.com/users/awfssv/followers","following_url":"https://api.github.com/users/awfssv/following{/other_user}","gists_url":"https://api.github.com/users/awfssv/gists{/gist_id}","starred_url":"https://api.github.com/users/awfssv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awfssv/subscriptions","organizations_url":"https://api.github.com/users/awfssv/orgs","repos_url":"https://api.github.com/users/awfssv/repos","events_url":"https://api.github.com/users/awfssv/events{/privacy}","received_events_url":"https://api.github.com/users/awfssv/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/1008486081","html_url":"https://github.com/zvtvz/zvt/issues/188#issuecomment-1008486081","issue_url":"https://api.github.com/repos/zvtvz/zvt/issues/188","id":1008486081,"node_id":"IC_kwDOCrI2ac48HEbB","user":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"created_at":"2022-01-10T02:01:13Z","updated_at":"2022-01-10T02:01:13Z","author_association":"MEMBER","body":"@awfssv \r\n把$zvt-home/data目录里面的zvt_zvt_info.db删掉就好。\r\n\r\n记录状态的结构(其实现在用不到)有些变化，我下个版本对目前的recorder去除掉这个依赖吧，省得已经在用的引起麻烦。\r\n","reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/1008486081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false}},{"id":5863119171,"node_id":"MEE_lADOCrI2ac4-Ls18zwAAAAFdeBlD","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/5863119171","actor":{"login":"awfssv","id":24654879,"node_id":"MDQ6VXNlcjI0NjU0ODc5","avatar_url":"https://avatars.githubusercontent.com/u/24654879?v=4","gravatar_id":"","url":"https://api.github.com/users/awfssv","html_url":"https://github.com/awfssv","followers_url":"https://api.github.com/users/awfssv/followers","following_url":"https://api.github.com/users/awfssv/following{/other_user}","gists_url":"https://api.github.com/users/awfssv/gists{/gist_id}","starred_url":"https://api.github.com/users/awfssv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awfssv/subscriptions","organizations_url":"https://api.github.com/users/awfssv/orgs","repos_url":"https://api.github.com/users/awfssv/repos","events_url":"https://api.github.com/users/awfssv/events{/privacy}","received_events_url":"https://api.github.com/users/awfssv/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-01-10T02:01:13Z","performed_via_github_app":null},{"id":5863119227,"node_id":"SE_lADOCrI2ac4-Ls18zwAAAAFdeBl7","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/5863119227","actor":{"login":"awfssv","id":24654879,"node_id":"MDQ6VXNlcjI0NjU0ODc5","avatar_url":"https://avatars.githubusercontent.com/u/24654879?v=4","gravatar_id":"","url":"https://api.github.com/users/awfssv","html_url":"https://github.com/awfssv","followers_url":"https://api.github.com/users/awfssv/followers","following_url":"https://api.github.com/users/awfssv/following{/other_user}","gists_url":"https://api.github.com/users/awfssv/gists{/gist_id}","starred_url":"https://api.github.com/users/awfssv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/awfssv/subscriptions","organizations_url":"https://api.github.com/users/awfssv/orgs","repos_url":"https://api.github.com/users/awfssv/repos","events_url":"https://api.github.com/users/awfssv/events{/privacy}","received_events_url":"https://api.github.com/users/awfssv/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-01-10T02:01:14Z","performed_via_github_app":null}]