[{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/696457157","html_url":"https://github.com/zvtvz/zvt/issues/109#issuecomment-696457157","issue_url":"https://api.github.com/repos/zvtvz/zvt/issues/109","id":696457157,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjQ1NzE1Nw==","user":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"created_at":"2020-09-22T00:54:46Z","updated_at":"2020-09-22T02:22:18Z","author_association":"MEMBER","body":"@weiguang-zz \r\n整个回测其实是轮询的方式，时间间隔可以足够低，即IntervalLevel的设置，可以支持tick\r\n1.订单其实也是时间事件，因为一切的事件驱动，本质还是“轮询”，做过嵌入式驱动的“看门狗”都知道。\r\n目前流行的事件驱动不过是把那一层屏蔽了。\r\n\r\n2.收盘后5分钟执行操作，可以在on_trading_close之后设置一个timer来做。\r\n大部分跟时间相关的操作都可以在on_xxx的回调里面来自定义。\r\n\r\n3.嗯，级别越低，各方面要求越高，目前zvt定位是分钟级别的。\r\n\r\n你的抽象很棒！可以通过扩展相应的回调函数来满足你的要求。\r\n纯事件驱动最主要的问题是做多级别同步时很麻烦，而\"区间套\"之类的策略用轮询的方式会比较自然。\r\n这跟个人的交易理念有关，相比精度，交易延时，个人更看重“全市场”的大局。\r\n","reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/696457157/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false}},{"id":3791103149,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzc5MTEwMzE0OQ==","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/3791103149","actor":{"login":"weiguang-zz","id":17842829,"node_id":"MDQ6VXNlcjE3ODQyODI5","avatar_url":"https://avatars.githubusercontent.com/u/17842829?v=4","gravatar_id":"","url":"https://api.github.com/users/weiguang-zz","html_url":"https://github.com/weiguang-zz","followers_url":"https://api.github.com/users/weiguang-zz/followers","following_url":"https://api.github.com/users/weiguang-zz/following{/other_user}","gists_url":"https://api.github.com/users/weiguang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/weiguang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiguang-zz/subscriptions","organizations_url":"https://api.github.com/users/weiguang-zz/orgs","repos_url":"https://api.github.com/users/weiguang-zz/repos","events_url":"https://api.github.com/users/weiguang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/weiguang-zz/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-22T00:54:46Z","performed_via_github_app":null},{"id":3791103150,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3OTExMDMxNTA=","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/3791103150","actor":{"login":"weiguang-zz","id":17842829,"node_id":"MDQ6VXNlcjE3ODQyODI5","avatar_url":"https://avatars.githubusercontent.com/u/17842829?v=4","gravatar_id":"","url":"https://api.github.com/users/weiguang-zz","html_url":"https://github.com/weiguang-zz","followers_url":"https://api.github.com/users/weiguang-zz/followers","following_url":"https://api.github.com/users/weiguang-zz/following{/other_user}","gists_url":"https://api.github.com/users/weiguang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/weiguang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiguang-zz/subscriptions","organizations_url":"https://api.github.com/users/weiguang-zz/orgs","repos_url":"https://api.github.com/users/weiguang-zz/repos","events_url":"https://api.github.com/users/weiguang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/weiguang-zz/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-22T00:54:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/697051700","html_url":"https://github.com/zvtvz/zvt/issues/109#issuecomment-697051700","issue_url":"https://api.github.com/repos/zvtvz/zvt/issues/109","id":697051700,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzA1MTcwMA==","user":{"login":"weiguang-zz","id":17842829,"node_id":"MDQ6VXNlcjE3ODQyODI5","avatar_url":"https://avatars.githubusercontent.com/u/17842829?v=4","gravatar_id":"","url":"https://api.github.com/users/weiguang-zz","html_url":"https://github.com/weiguang-zz","followers_url":"https://api.github.com/users/weiguang-zz/followers","following_url":"https://api.github.com/users/weiguang-zz/following{/other_user}","gists_url":"https://api.github.com/users/weiguang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/weiguang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiguang-zz/subscriptions","organizations_url":"https://api.github.com/users/weiguang-zz/orgs","repos_url":"https://api.github.com/users/weiguang-zz/repos","events_url":"https://api.github.com/users/weiguang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/weiguang-zz/received_events","type":"User","site_admin":false},"created_at":"2020-09-23T00:28:52Z","updated_at":"2020-09-23T00:28:52Z","author_association":"NONE","body":"关于第二个问题，我其实是想说用户期待一个更简单的方式来处理时间事件，虽然你提供的分钟级别的回调能满足要求，但是用户需要在回调逻辑中进行各种判断。可以参考zipline的回测引擎，它提供对时间事件的建模，比如用户的策略如果想在收盘前5分钟做一些事情，只需要这么做\n`\nalgo.schedule_function(func, date=every_day(), time=market_close(offset=5))\n`","reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/697051700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiguang-zz","id":17842829,"node_id":"MDQ6VXNlcjE3ODQyODI5","avatar_url":"https://avatars.githubusercontent.com/u/17842829?v=4","gravatar_id":"","url":"https://api.github.com/users/weiguang-zz","html_url":"https://github.com/weiguang-zz","followers_url":"https://api.github.com/users/weiguang-zz/followers","following_url":"https://api.github.com/users/weiguang-zz/following{/other_user}","gists_url":"https://api.github.com/users/weiguang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/weiguang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiguang-zz/subscriptions","organizations_url":"https://api.github.com/users/weiguang-zz/orgs","repos_url":"https://api.github.com/users/weiguang-zz/repos","events_url":"https://api.github.com/users/weiguang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/weiguang-zz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/697060761","html_url":"https://github.com/zvtvz/zvt/issues/109#issuecomment-697060761","issue_url":"https://api.github.com/repos/zvtvz/zvt/issues/109","id":697060761,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzA2MDc2MQ==","user":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"created_at":"2020-09-23T01:03:01Z","updated_at":"2020-09-23T01:04:41Z","author_association":"MEMBER","body":"Thanks，不错。“某个时间点用户自定义函数“” 可以提供插入接口。\r\n目前最原始的就是on_timestamp里面自由发挥了。\r\n类似的常用的通用一些的功能，可以抽象出专门的插入接口，欢迎多提意见，一起完善。","reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/697060761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/697150650","html_url":"https://github.com/zvtvz/zvt/issues/109#issuecomment-697150650","issue_url":"https://api.github.com/repos/zvtvz/zvt/issues/109","id":697150650,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzE1MDY1MA==","user":{"login":"weiguang-zz","id":17842829,"node_id":"MDQ6VXNlcjE3ODQyODI5","avatar_url":"https://avatars.githubusercontent.com/u/17842829?v=4","gravatar_id":"","url":"https://api.github.com/users/weiguang-zz","html_url":"https://github.com/weiguang-zz","followers_url":"https://api.github.com/users/weiguang-zz/followers","following_url":"https://api.github.com/users/weiguang-zz/following{/other_user}","gists_url":"https://api.github.com/users/weiguang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/weiguang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiguang-zz/subscriptions","organizations_url":"https://api.github.com/users/weiguang-zz/orgs","repos_url":"https://api.github.com/users/weiguang-zz/repos","events_url":"https://api.github.com/users/weiguang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/weiguang-zz/received_events","type":"User","site_admin":false},"created_at":"2020-09-23T05:57:15Z","updated_at":"2020-09-23T05:57:15Z","author_association":"NONE","body":"不客气，加油加油","reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/comments/697150650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weiguang-zz","id":17842829,"node_id":"MDQ6VXNlcjE3ODQyODI5","avatar_url":"https://avatars.githubusercontent.com/u/17842829?v=4","gravatar_id":"","url":"https://api.github.com/users/weiguang-zz","html_url":"https://github.com/weiguang-zz","followers_url":"https://api.github.com/users/weiguang-zz/followers","following_url":"https://api.github.com/users/weiguang-zz/following{/other_user}","gists_url":"https://api.github.com/users/weiguang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/weiguang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiguang-zz/subscriptions","organizations_url":"https://api.github.com/users/weiguang-zz/orgs","repos_url":"https://api.github.com/users/weiguang-zz/repos","events_url":"https://api.github.com/users/weiguang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/weiguang-zz/received_events","type":"User","site_admin":false}},{"id":5264946335,"node_id":"CE_lADOCrI2ac4qCvn9zwAAAAE50LSf","url":"https://api.github.com/repos/zvtvz/zvt/issues/events/5264946335","actor":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-09-07T10:45:02Z","state_reason":null,"performed_via_github_app":null}]