{"url":"https://api.github.com/repos/zvtvz/zvt/issues/93","repository_url":"https://api.github.com/repos/zvtvz/zvt","labels_url":"https://api.github.com/repos/zvtvz/zvt/issues/93/labels{/name}","comments_url":"https://api.github.com/repos/zvtvz/zvt/issues/93/comments","events_url":"https://api.github.com/repos/zvtvz/zvt/issues/93/events","html_url":"https://github.com/zvtvz/zvt/issues/93","id":675408151,"node_id":"MDU6SXNzdWU2NzU0MDgxNTE=","number":93,"title":"[data]北向资金(沪深港通)持股数据","user":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-08-08T02:37:25Z","updated_at":"2022-06-14T10:22:41Z","closed_at":"2021-05-21T01:20:46Z","author_association":"MEMBER","active_lock_reason":null,"body":"- **define schema**\r\nhttps://github.com/zvtvz/zvt/blob/master/zvt/domain/misc/holder.py\r\n```\r\nclass HkHolder(HolderBase, Mixin):\r\n    __tablename__ = 'hk_holder'\r\n    # 股票代码\r\n    code = Column(String(length=32))\r\n    # 股票名称\r\n    name = Column(String(length=32))\r\n\r\n    # 市场通编码\t三种类型：310001-沪股通，310002-深股通，310005-港股通\r\n    holder_code = Column(String(length=32))\r\n    # 市场通名称\t三种类型：沪股通，深股通，港股通\r\n    holder_name = Column(String(length=32))\r\n\r\n    # 持股数量\r\n    share_number = Column(Float)\r\n    # 持股比例\r\n    share_ratio = Column(Float)\r\n```\r\n\r\n- **implement recorder**\r\n\r\nhttps://github.com/zvtvz/zvt/blob/master/zvt/recorders/joinquant/misc/joinquant_hk_holder_recorder.py\r\n\r\n- **use in zvt**\r\n\r\n下载数据\r\n```\r\nfrom zvt.domain import *\r\nHkHolder.record_data(provider='joinquant')\r\n```\r\n\r\n使用例子，最新的持仓比例前50\r\n```\r\nIn [13]: df=HkHolder.query_data(start_timestamp='2020-08-07',order=HkHolder.share_ratio.desc(),limit=50,provider='joinquant',columns=['code','name','share_ratio'])\r\n\r\nIn [14]: df\r\nOut[14]:\r\n      code  name  share_ratio  timestamp\r\n0   600009  上海机场        22.99 2020-08-07\r\n1   603489  八方股份        22.97 2020-08-07\r\n2   603501  韦尔股份        22.16 2020-08-07\r\n3   002572   索菲亚        20.07 2020-08-07\r\n4   300012  华测检测        19.93 2020-08-07\r\n5   600201  生物股份        18.01 2020-08-07\r\n6   601901  方正证券        17.87 2020-08-07\r\n7   000333  美的集团        16.75 2020-08-07\r\n8   603605   珀莱雅        16.48 2020-08-07\r\n9   000651  格力电器        16.35 2020-08-07\r\n10  300347  泰格医药        15.78 2020-08-07\r\n11  600406  国电南瑞        15.71 2020-08-07\r\n12  002008  大族激光        14.73 2020-08-07\r\n13  002439  启明星辰        14.61 2020-08-07\r\n14  002508  老板电器        14.14 2020-08-07\r\n15  600887  伊利股份        12.97 2020-08-07\r\n16  601138  工业富联        12.94 2020-08-07\r\n17  600298  安琪酵母        12.90 2020-08-07\r\n18  000338  潍柴动力        12.77 2020-08-07\r\n19  603882  金域医学        12.60 2020-08-07\r\n20  603259  药明康得        12.36 2020-08-07\r\n21  603939  益丰药房        12.23 2020-08-07\r\n22  002271  东方雨虹        11.68 2020-08-07\r\n23  600276  恒瑞医药        11.53 2020-08-07\r\n24  002557  洽洽食品        11.48 2020-08-07\r\n25  300124  汇川技术        11.44 2020-08-07\r\n26  600585  海螺水泥        11.31 2020-08-07\r\n27  600872  中炬高新        11.31 2020-08-07\r\n28  000157  中联重科        11.09 2020-08-07\r\n29  300244  迪安诊断        11.08 2020-08-07\r\n30  600885  宏发股份        10.86 2020-08-07\r\n31  601888  中国国旅        10.82 2020-08-07\r\n32  002410   广联达        10.38 2020-08-07\r\n33  600660  福耀玻璃        10.37 2020-08-07\r\n34  300285  国瓷材料        10.22 2020-08-07\r\n35  603713  密尔克卫        10.04 2020-08-07\r\n36  601100  恒立液压         9.90 2020-08-07\r\n37  600031  三一重工         9.86 2020-08-07\r\n38  600690  海尔智家         9.73 2020-08-07\r\n39  300383  光环新网         9.57 2020-08-07\r\n40  603915  国茂股份         9.30 2020-08-07\r\n41  002179  中航光电         9.15 2020-08-07\r\n42  603056  德邦股份         9.02 2020-08-07\r\n43  002027  分众传媒         8.87 2020-08-07\r\n44  002697  红旗连锁         8.64 2020-08-07\r\n45  603533  掌阅科技         8.51 2020-08-07\r\n46  600066  宇通客车         8.45 2020-08-07\r\n47  600519  贵州茅台         8.30 2020-08-07\r\n48  600835  上海机电         8.30 2020-08-07\r\n49  603737   三棵树         8.28 2020-08-07\r\n```\r\n","closed_by":{"login":"foolcage","id":1160499,"node_id":"MDQ6VXNlcjExNjA0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1160499?v=4","gravatar_id":"","url":"https://api.github.com/users/foolcage","html_url":"https://github.com/foolcage","followers_url":"https://api.github.com/users/foolcage/followers","following_url":"https://api.github.com/users/foolcage/following{/other_user}","gists_url":"https://api.github.com/users/foolcage/gists{/gist_id}","starred_url":"https://api.github.com/users/foolcage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foolcage/subscriptions","organizations_url":"https://api.github.com/users/foolcage/orgs","repos_url":"https://api.github.com/users/foolcage/repos","events_url":"https://api.github.com/users/foolcage/events{/privacy}","received_events_url":"https://api.github.com/users/foolcage/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/zvtvz/zvt/issues/93/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/zvtvz/zvt/issues/93/timeline","performed_via_github_app":null,"state_reason":"completed"}