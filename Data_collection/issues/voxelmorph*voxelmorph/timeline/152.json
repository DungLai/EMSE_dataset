[{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/588309744","html_url":"https://github.com/voxelmorph/voxelmorph/issues/152#issuecomment-588309744","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/152","id":588309744,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODMwOTc0NA==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2020-02-19T16:27:16Z","updated_at":"2020-02-19T16:27:16Z","author_association":"COLLABORATOR","body":"@swinzeck looking at Figure 2 in our [paper](https://arxiv.org/pdf/1908.02738.pdf), the overall model essentially has the atlas as part of it. To extract this atlas model, simply use something like \r\n\r\n```\r\nmodel_atlas_out = keras.models.Model(model.inputs[:2], model.get_layer('atlas').output)\r\n```\r\n\r\nThis will then give you a model that outputs the atlas given some inputs. I believe the inputs (if you haven't changed anything) will be the first two inputs you have during training (which I think is a blurry initial atlas and the phenotipc value). Does this make sense?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/588309744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":3052397307,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA1MjM5NzMwNw==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3052397307","actor":{"login":"swinzeck","id":15986743,"node_id":"MDQ6VXNlcjE1OTg2NzQz","avatar_url":"https://avatars.githubusercontent.com/u/15986743?v=4","gravatar_id":"","url":"https://api.github.com/users/swinzeck","html_url":"https://github.com/swinzeck","followers_url":"https://api.github.com/users/swinzeck/followers","following_url":"https://api.github.com/users/swinzeck/following{/other_user}","gists_url":"https://api.github.com/users/swinzeck/gists{/gist_id}","starred_url":"https://api.github.com/users/swinzeck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swinzeck/subscriptions","organizations_url":"https://api.github.com/users/swinzeck/orgs","repos_url":"https://api.github.com/users/swinzeck/repos","events_url":"https://api.github.com/users/swinzeck/events{/privacy}","received_events_url":"https://api.github.com/users/swinzeck/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-19T16:27:17Z","performed_via_github_app":null},{"id":3052397322,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwNTIzOTczMjI=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3052397322","actor":{"login":"swinzeck","id":15986743,"node_id":"MDQ6VXNlcjE1OTg2NzQz","avatar_url":"https://avatars.githubusercontent.com/u/15986743?v=4","gravatar_id":"","url":"https://api.github.com/users/swinzeck","html_url":"https://github.com/swinzeck","followers_url":"https://api.github.com/users/swinzeck/followers","following_url":"https://api.github.com/users/swinzeck/following{/other_user}","gists_url":"https://api.github.com/users/swinzeck/gists{/gist_id}","starred_url":"https://api.github.com/users/swinzeck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swinzeck/subscriptions","organizations_url":"https://api.github.com/users/swinzeck/orgs","repos_url":"https://api.github.com/users/swinzeck/repos","events_url":"https://api.github.com/users/swinzeck/events{/privacy}","received_events_url":"https://api.github.com/users/swinzeck/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-19T16:27:17Z","performed_via_github_app":null},{"id":3052397943,"node_id":"MDEyOkxhYmVsZWRFdmVudDMwNTIzOTc5NDM=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3052397943","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-02-19T16:27:24Z","label":{"name":"atlas-construction","color":"ff7f7c"},"performed_via_github_app":null},{"id":3073643667,"node_id":"MDExOkNsb3NlZEV2ZW50MzA3MzY0MzY2Nw==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3073643667","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-02-26T13:12:41Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/718302052","html_url":"https://github.com/voxelmorph/voxelmorph/issues/152#issuecomment-718302052","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/152","id":718302052,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODMwMjA1Mg==","user":{"login":"rsavjanimdphd","id":12067725,"node_id":"MDQ6VXNlcjEyMDY3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/12067725?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavjanimdphd","html_url":"https://github.com/rsavjanimdphd","followers_url":"https://api.github.com/users/rsavjanimdphd/followers","following_url":"https://api.github.com/users/rsavjanimdphd/following{/other_user}","gists_url":"https://api.github.com/users/rsavjanimdphd/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavjanimdphd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavjanimdphd/subscriptions","organizations_url":"https://api.github.com/users/rsavjanimdphd/orgs","repos_url":"https://api.github.com/users/rsavjanimdphd/repos","events_url":"https://api.github.com/users/rsavjanimdphd/events{/privacy}","received_events_url":"https://api.github.com/users/rsavjanimdphd/received_events","type":"User","site_admin":false},"created_at":"2020-10-29T01:29:38Z","updated_at":"2020-10-29T01:29:38Z","author_association":"NONE","body":"Thank you very much for sharing this! I was able to get the model_atlas_out, but it's not so clear how to pass in the phenotypic value and output the atlas image. It would be great to loop through a range of phenotypic values and save out the corresponding nifti atlas images. Thank you! ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/718302052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rsavjanimdphd","id":12067725,"node_id":"MDQ6VXNlcjEyMDY3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/12067725?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavjanimdphd","html_url":"https://github.com/rsavjanimdphd","followers_url":"https://api.github.com/users/rsavjanimdphd/followers","following_url":"https://api.github.com/users/rsavjanimdphd/following{/other_user}","gists_url":"https://api.github.com/users/rsavjanimdphd/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavjanimdphd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavjanimdphd/subscriptions","organizations_url":"https://api.github.com/users/rsavjanimdphd/orgs","repos_url":"https://api.github.com/users/rsavjanimdphd/repos","events_url":"https://api.github.com/users/rsavjanimdphd/events{/privacy}","received_events_url":"https://api.github.com/users/rsavjanimdphd/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/718327197","html_url":"https://github.com/voxelmorph/voxelmorph/issues/152#issuecomment-718327197","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/152","id":718327197,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODMyNzE5Nw==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2020-10-29T02:56:31Z","updated_at":"2020-10-29T02:56:31Z","author_association":"COLLABORATOR","body":"@rsavjanimdphd , as mentioned above `model_atlas_out` does what you want. You simply need to:\r\n``` \r\nfor phenotype in my phenotypes:\r\n  atlas = model_atlas_out.predict([phenotype])\r\n```\r\nDepending on how you set up the model (or which model you are using) you might need to pass in something else to the model, such as the initial blurry average. But that's the main idea","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/718327197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":3934211467,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzkzNDIxMTQ2Nw==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3934211467","actor":{"login":"rsavjanimdphd","id":12067725,"node_id":"MDQ6VXNlcjEyMDY3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/12067725?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavjanimdphd","html_url":"https://github.com/rsavjanimdphd","followers_url":"https://api.github.com/users/rsavjanimdphd/followers","following_url":"https://api.github.com/users/rsavjanimdphd/following{/other_user}","gists_url":"https://api.github.com/users/rsavjanimdphd/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavjanimdphd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavjanimdphd/subscriptions","organizations_url":"https://api.github.com/users/rsavjanimdphd/orgs","repos_url":"https://api.github.com/users/rsavjanimdphd/repos","events_url":"https://api.github.com/users/rsavjanimdphd/events{/privacy}","received_events_url":"https://api.github.com/users/rsavjanimdphd/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-29T02:56:31Z","performed_via_github_app":null},{"id":3934211470,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM5MzQyMTE0NzA=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3934211470","actor":{"login":"rsavjanimdphd","id":12067725,"node_id":"MDQ6VXNlcjEyMDY3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/12067725?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavjanimdphd","html_url":"https://github.com/rsavjanimdphd","followers_url":"https://api.github.com/users/rsavjanimdphd/followers","following_url":"https://api.github.com/users/rsavjanimdphd/following{/other_user}","gists_url":"https://api.github.com/users/rsavjanimdphd/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavjanimdphd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavjanimdphd/subscriptions","organizations_url":"https://api.github.com/users/rsavjanimdphd/orgs","repos_url":"https://api.github.com/users/rsavjanimdphd/repos","events_url":"https://api.github.com/users/rsavjanimdphd/events{/privacy}","received_events_url":"https://api.github.com/users/rsavjanimdphd/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-29T02:56:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/718350162","html_url":"https://github.com/voxelmorph/voxelmorph/issues/152#issuecomment-718350162","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/152","id":718350162,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODM1MDE2Mg==","user":{"login":"rsavjanimdphd","id":12067725,"node_id":"MDQ6VXNlcjEyMDY3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/12067725?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavjanimdphd","html_url":"https://github.com/rsavjanimdphd","followers_url":"https://api.github.com/users/rsavjanimdphd/followers","following_url":"https://api.github.com/users/rsavjanimdphd/following{/other_user}","gists_url":"https://api.github.com/users/rsavjanimdphd/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavjanimdphd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavjanimdphd/subscriptions","organizations_url":"https://api.github.com/users/rsavjanimdphd/orgs","repos_url":"https://api.github.com/users/rsavjanimdphd/repos","events_url":"https://api.github.com/users/rsavjanimdphd/events{/privacy}","received_events_url":"https://api.github.com/users/rsavjanimdphd/received_events","type":"User","site_admin":false},"created_at":"2020-10-29T04:21:39Z","updated_at":"2020-10-29T04:21:39Z","author_association":"NONE","body":"Ah, perfect, that was exactly what I needed, thank you! ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/718350162/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rsavjanimdphd","id":12067725,"node_id":"MDQ6VXNlcjEyMDY3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/12067725?v=4","gravatar_id":"","url":"https://api.github.com/users/rsavjanimdphd","html_url":"https://github.com/rsavjanimdphd","followers_url":"https://api.github.com/users/rsavjanimdphd/followers","following_url":"https://api.github.com/users/rsavjanimdphd/following{/other_user}","gists_url":"https://api.github.com/users/rsavjanimdphd/gists{/gist_id}","starred_url":"https://api.github.com/users/rsavjanimdphd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsavjanimdphd/subscriptions","organizations_url":"https://api.github.com/users/rsavjanimdphd/orgs","repos_url":"https://api.github.com/users/rsavjanimdphd/repos","events_url":"https://api.github.com/users/rsavjanimdphd/events{/privacy}","received_events_url":"https://api.github.com/users/rsavjanimdphd/received_events","type":"User","site_admin":false}}]