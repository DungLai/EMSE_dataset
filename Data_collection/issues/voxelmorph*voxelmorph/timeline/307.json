[{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835376106","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-835376106","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":835376106,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNTM3NjEwNg==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2021-05-08T14:02:36Z","updated_at":"2021-05-08T14:02:36Z","author_association":"COLLABORATOR","body":"@CadyWang thanks for your interest.\r\nCan you tell us what version of `tf` you have, what your data looks like? Did you modify anything in the scripts?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835376106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":4707851169,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDcwNzg1MTE2OQ==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4707851169","actor":null,"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-08T14:02:37Z","performed_via_github_app":null},{"id":4707851170,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3MDc4NTExNzA=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4707851170","actor":null,"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-08T14:02:37Z","performed_via_github_app":null},{"id":4707851573,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ3MDc4NTE1NzM=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4707851573","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-08T14:02:47Z","label":{"name":"atlas-construction","color":"ff7f7c"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835381613","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-835381613","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":835381613,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNTM4MTYxMw==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2021-05-08T14:19:16Z","updated_at":"2021-05-08T14:19:16Z","author_association":"NONE","body":"Hi,Thank you very much for your reply!\r\nI have tried tensorflow2.1 and tensorflow2.4. when I use tensorflow2.1,I receive the following error.\r\n\r\n\r\ncreating input atlas by averaging scans\r\n2021-05-08 21:32:22.622490: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n2021-05-08 21:32:22.640673: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:22.642552: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties:&nbsp;\r\npciBusID: 0000:03:00.0 name: Tesla V100-PCIE-32GB computeCapability: 7.0\r\ncoreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.72GiB deviceMemoryBandwidth: 836.37GiB/s\r\n2021-05-08 21:32:22.654404: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2021-05-08 21:32:22.668366: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2021-05-08 21:32:22.709924: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2021-05-08 21:32:22.719388: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2021-05-08 21:32:22.798598: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2021-05-08 21:32:22.809306: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2021-05-08 21:32:22.934560: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2021-05-08 21:32:22.934853: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:22.937052: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:22.939741: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1703] Adding visible gpu devices: 0\r\n2021-05-08 21:32:22.940568: I tensorflow/core/platform/cpu_feature_guard.cc:143] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 AVX512F FMA\r\n2021-05-08 21:32:22.977805: I tensorflow/core/platform/profile_utils/cpu_utils.cc:102] CPU Frequency: 2095074999 Hz\r\n2021-05-08 21:32:22.982857: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x562e1a9d7cb0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2021-05-08 21:32:22.982927: I tensorflow/compiler/xla/service/service.cc:176]&nbsp; &nbsp;StreamExecutor device (0): Host, Default Version\r\n2021-05-08 21:32:22.984742: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:22.986730: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties:&nbsp;\r\npciBusID: 0000:03:00.0 name: Tesla V100-PCIE-32GB computeCapability: 7.0\r\ncoreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.72GiB deviceMemoryBandwidth: 836.37GiB/s\r\n2021-05-08 21:32:22.986826: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2021-05-08 21:32:22.986870: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2021-05-08 21:32:22.986910: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2021-05-08 21:32:22.986950: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2021-05-08 21:32:22.986978: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2021-05-08 21:32:22.987017: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2021-05-08 21:32:22.987054: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2021-05-08 21:32:22.987200: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:22.988706: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:22.989911: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1703] Adding visible gpu devices: 0\r\n2021-05-08 21:32:22.990977: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2021-05-08 21:32:23.134391: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2021-05-08 21:32:23.134426: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1108]&nbsp; &nbsp; &nbsp; 0&nbsp;\r\n2021-05-08 21:32:23.134434: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] 0:&nbsp; &nbsp;N&nbsp;\r\n2021-05-08 21:32:23.136130: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:23.137122: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:23.137854: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:32:23.139270: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1247] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 20302 MB memory) -&gt; physical GPU (device: 0, name: Tesla V100-PCIE-32GB, pci bus id: 0000:03:00.0, compute capability: 7.0)\r\n2021-05-08 21:32:23.143600: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x562e1e895c60 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:\r\n2021-05-08 21:32:23.143628: I tensorflow/compiler/xla/service/service.cc:176]&nbsp; &nbsp;StreamExecutor device (0): Tesla V100-PCIE-32GB, Compute Capability 7.0\r\nWARNING:tensorflow:From /home/wangyi/run_on_server/Template/train.py:140: Model.fit_generator (from tensorflow.python.keras.engine.training) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nPlease use Model.fit, which supports generators.\r\nEpoch 1/1500\r\nTraceback (most recent call last):\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/execute.py\", line 60, in quick_execute\r\n&nbsp; &nbsp; inputs, attrs, num_outputs)\r\nTypeError: An op outside of the function building code is being passed\r\na \"Graph\" tensor. It is possible to have Graph tensors\r\nleak out of the function building context by including a\r\ntf.init_scope in your function building code.\r\nFor example, the following function will fail:\r\n&nbsp; @tf.function\r\n&nbsp; def has_init_scope():\r\n&nbsp; &nbsp; my_constant = tf.constant(1.)\r\n&nbsp; &nbsp; with tf.init_scope():\r\n&nbsp; &nbsp; &nbsp; added = my_constant * 2\r\nThe graph tensor has name: atlas/Identity:0\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n\r\nTraceback (most recent call last):\r\n&nbsp; File \"/home/wangyi/run_on_server/Template/train.py\", line 140, in <module&gt;\r\n&nbsp; &nbsp; verbose=1\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 324, in new_func\r\n&nbsp; &nbsp; return func(*args, **kwargs)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 1479, in fit_generator\r\n&nbsp; &nbsp; initial_epoch=initial_epoch)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 66, in _method_wrapper\r\n&nbsp; &nbsp; return method(self, *args, **kwargs)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 848, in fit\r\n&nbsp; &nbsp; tmp_logs = train_function(iterator)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py\", line 580, in __call__\r\n&nbsp; &nbsp; result = self._call(*args, **kwds)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py\", line 644, in _call\r\n&nbsp; &nbsp; return self._stateless_fn(*args, **kwds)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 2420, in __call__\r\n&nbsp; &nbsp; return graph_function._filtered_call(args, kwargs)&nbsp; # pylint: disable=protected-access\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 1665, in _filtered_call\r\n&nbsp; &nbsp; self.captured_inputs)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 1746, in _call_flat\r\n&nbsp; &nbsp; ctx, args, cancellation_manager=cancellation_manager))\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 598, in call\r\n&nbsp; &nbsp; ctx=ctx)\r\n&nbsp; File \"/home/wangyi/anaconda3/envs/tensorflow2_0/lib/python3.6/site-packages/tensorflow/python/eager/execute.py\", line 74, in quick_execute\r\n&nbsp; &nbsp; \"tensors, but found {}\".format(keras_symbolic_tensors))\r\ntensorflow.python.eager.core._SymbolicException: Inputs to eager execution function cannot be Keras symbolic tensors, but found [<tf.Tensor 'atlas/Identity:0' shape=(None, 128, 128, 128, 1) dtype=float32&gt;]\r\n\r\n\r\n\r\nwhen I use tensorflow2.4,I receive the following error.\r\n\r\n\r\n2021-05-08 21:31:26.937692: I tensorflow/compiler/jit/xla_cpu_device.cc:41] Not creating XLA devices, tf_xla_enable_xla_devices not set\r\n2021-05-08 21:31:26.938921: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcuda.so.1\r\n2021-05-08 21:31:26.977614: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:26.978570: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties:&nbsp;\r\npciBusID: 0000:03:00.0 name: Tesla V100-PCIE-32GB computeCapability: 7.0\r\ncoreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.72GiB deviceMemoryBandwidth: 836.37GiB/s\r\n2021-05-08 21:31:26.978600: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.10.1\r\n2021-05-08 21:31:26.980403: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.10\r\n2021-05-08 21:31:26.980463: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.10\r\n2021-05-08 21:31:26.981995: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.10\r\n2021-05-08 21:31:26.982336: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.10\r\n2021-05-08 21:31:26.984074: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.10\r\n2021-05-08 21:31:26.984810: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.10\r\n2021-05-08 21:31:26.988522: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.7\r\n2021-05-08 21:31:26.988649: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:26.989595: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:26.990478: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 0\r\n2021-05-08 21:31:26.990867: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:&nbsp; SSE4.1 SSE4.2 AVX AVX2 AVX512F FMA\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2021-05-08 21:31:26.996373: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:26.999036: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties:&nbsp;\r\npciBusID: 0000:03:00.0 name: Tesla V100-PCIE-32GB computeCapability: 7.0\r\ncoreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.72GiB deviceMemoryBandwidth: 836.37GiB/s\r\n2021-05-08 21:31:26.999111: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.10.1\r\n2021-05-08 21:31:26.999166: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.10\r\n2021-05-08 21:31:26.999208: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.10\r\n2021-05-08 21:31:26.999248: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.10\r\n2021-05-08 21:31:26.999288: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.10\r\n2021-05-08 21:31:26.999329: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.10\r\n2021-05-08 21:31:26.999369: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.10\r\n2021-05-08 21:31:26.999409: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.7\r\n2021-05-08 21:31:26.999550: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:27.002195: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:27.004770: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 0\r\n2021-05-08 21:31:27.004877: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.10.1\r\n2021-05-08 21:31:27.820356: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1261] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2021-05-08 21:31:27.820401: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1267]&nbsp; &nbsp; &nbsp; 0&nbsp;\r\n2021-05-08 21:31:27.820409: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1280] 0:&nbsp; &nbsp;N&nbsp;\r\n2021-05-08 21:31:27.820592: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:27.821560: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:27.822482: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-05-08 21:31:27.823365: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1406] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 30094 MB memory) -&gt; physical GPU (device: 0, name: Tesla V100-PCIE-32GB, pci bus id: 0000:03:00.0, compute capability: 7.0)\r\n2021-05-08 21:31:27.823804: I tensorflow/compiler/jit/xla_gpu_device.cc:99] Not creating XLA devices, tf_xla_enable_xla_devices not set\r\nWARNING:tensorflow:AutoGraph could not transform <bound method LocalParamWithInput.call of <model.layers.LocalParamWithInput object at 0x7fecb5fa8be0&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method RescaleTransform.call of <model.layers.RescaleTransform object at 0x7fecb5b9ac10&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method Resize.call of <model.layers.Resize object at 0x7fecb5b5e970&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:From /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/util/deprecation.py:605: calling map_fn_v2 (from tensorflow.python.ops.map_fn) with dtype is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse fn_output_signature instead\r\nWARNING:tensorflow:AutoGraph could not transform <function resize at 0x7fecb66cfca0&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method VecInt.call of <model.layers.VecInt object at 0x7fecb5b9ab50&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method VecInt._single_int of <model.layers.VecInt object at 0x7fecb5b9ab50&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method SpatialTransformer.call of <model.layers.SpatialTransformer object at 0x7fecb5a9daf0&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method SpatialTransformer._single_transform of <model.layers.SpatialTransformer object at 0x7fecb5a9daf0&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\nWARNING:tensorflow:AutoGraph could not transform <bound method MeanStream.call of <model.layers.MeanStream object at 0x7fecb5c86370&gt;&gt; and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: module 'gast' has no attribute 'Index'\r\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\r\n/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py:1844: UserWarning: `Model.fit_generator` is deprecated and will be removed in a future version. Please use `Model.fit`, which supports generators.\r\n&nbsp; warnings.warn('`Model.fit_generator` is deprecated and '\r\n2021-05-08 21:31:30.403256: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:116] None of the MLIR optimization passes are enabled (registered 2)\r\n2021-05-08 21:31:30.403653: I tensorflow/core/platform/profile_utils/cpu_utils.cc:112] CPU Frequency: 2095074999 Hz\r\nEpoch 1/1500\r\nTraceback (most recent call last):\r\n&nbsp; File \"/home/sda3/wangyi/run_on_server/Template/train.py\", line 133, in <module&gt;\r\n&nbsp; &nbsp; model.fit_generator(generator,\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py\", line 1847, in fit_generator\r\n&nbsp; &nbsp; return self.fit(\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py\", line 1100, in fit\r\n&nbsp; &nbsp; tmp_logs = self.train_function(iterator)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/def_function.py\", line 828, in __call__\r\n&nbsp; &nbsp; result = self._call(*args, **kwds)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/def_function.py\", line 871, in _call\r\n&nbsp; &nbsp; self._initialize(args, kwds, add_initializers_to=initializers)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/def_function.py\", line 725, in _initialize\r\n&nbsp; &nbsp; self._stateful_fn._get_concrete_function_internal_garbage_collected(&nbsp; # pylint: disable=protected-access\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/function.py\", line 2969, in _get_concrete_function_internal_garbage_collected\r\n&nbsp; &nbsp; graph_function, _ = self._maybe_define_function(args, kwargs)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/function.py\", line 3361, in _maybe_define_function\r\n&nbsp; &nbsp; graph_function = self._create_graph_function(args, kwargs)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/function.py\", line 3196, in _create_graph_function\r\n&nbsp; &nbsp; func_graph_module.func_graph_from_py_func(\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/func_graph.py\", line 990, in func_graph_from_py_func\r\n&nbsp; &nbsp; func_outputs = python_func(*func_args, **func_kwargs)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/eager/def_function.py\", line 634, in wrapped_fn\r\n&nbsp; &nbsp; out = weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n&nbsp; File \"/home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/func_graph.py\", line 977, in wrapper\r\n&nbsp; &nbsp; raise e.ag_error_metadata.to_exception(e)\r\nTypeError: in user code:\r\n\r\n\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py:805 train_function&nbsp; *\r\n&nbsp; &nbsp; &nbsp; &nbsp; return step_function(self, iterator)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py:795 step_function&nbsp; **\r\n&nbsp; &nbsp; &nbsp; &nbsp; outputs = model.distribute_strategy.run(run_step, args=(data,))\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/distribute/distribute_lib.py:1259 run\r\n&nbsp; &nbsp; &nbsp; &nbsp; return self._extended.call_for_each_replica(fn, args=args, kwargs=kwargs)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/distribute/distribute_lib.py:2730 call_for_each_replica\r\n&nbsp; &nbsp; &nbsp; &nbsp; return self._call_for_each_replica(fn, args, kwargs)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/distribute/distribute_lib.py:3417 _call_for_each_replica\r\n&nbsp; &nbsp; &nbsp; &nbsp; return fn(*args, **kwargs)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py:788 run_step&nbsp; **\r\n&nbsp; &nbsp; &nbsp; &nbsp; outputs = model.train_step(data)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/training.py:755 train_step\r\n&nbsp; &nbsp; &nbsp; &nbsp; loss = self.compiled_loss(\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/compile_utils.py:213 __call__\r\n&nbsp; &nbsp; &nbsp; &nbsp; metric_obj.update_state(loss_metric_value, sample_weight=batch_dim)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/utils/metrics_utils.py:90 decorated\r\n&nbsp; &nbsp; &nbsp; &nbsp; update_op = update_state_fn(*args, **kwargs)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/metrics.py:177 update_state_fn\r\n&nbsp; &nbsp; &nbsp; &nbsp; return ag_update_state(*args, **kwargs)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/metrics.py:363 update_state&nbsp; **\r\n&nbsp; &nbsp; &nbsp; &nbsp; sample_weight = weights_broadcast_ops.broadcast_weights(\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/ops/weights_broadcast_ops.py:155 broadcast_weights\r\n&nbsp; &nbsp; &nbsp; &nbsp; values = ops.convert_to_tensor(values, name=\"values\")\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/profiler/trace.py:163 wrapped\r\n&nbsp; &nbsp; &nbsp; &nbsp; return func(*args, **kwargs)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/ops.py:1540 convert_to_tensor\r\n&nbsp; &nbsp; &nbsp; &nbsp; ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/constant_op.py:339 _constant_tensor_conversion_function\r\n&nbsp; &nbsp; &nbsp; &nbsp; return constant(v, dtype=dtype, name=name)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/constant_op.py:264 constant\r\n&nbsp; &nbsp; &nbsp; &nbsp; return _constant_impl(value, dtype, shape, name, verify_shape=False,\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/constant_op.py:281 _constant_impl\r\n&nbsp; &nbsp; &nbsp; &nbsp; tensor_util.make_tensor_proto(\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/framework/tensor_util.py:435 make_tensor_proto\r\n&nbsp; &nbsp; &nbsp; &nbsp; values = np.asarray(values)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/numpy/core/_asarray.py:102 asarray\r\n&nbsp; &nbsp; &nbsp; &nbsp; return array(a, dtype, copy=False, order=order)\r\n&nbsp; &nbsp; /home/sda3/wangyi/anaconda3/envs/tensorflow/lib/python3.9/site-packages/tensorflow/python/keras/engine/keras_tensor.py:273 __array__\r\n&nbsp; &nbsp; &nbsp; &nbsp; raise TypeError(\r\n\r\n\r\n&nbsp; &nbsp; TypeError: Cannot convert a symbolic Keras input/output to a numpy array. This error may indicate that you're trying to pass a symbolic value to a NumPy call, which is not supported. Or, you may be trying to pass Keras symbolic inputs/outputs to a TF API that does not register dispatching, preventing Keras from automatically converting the API call to a lambda layer in the Functional Model.\r\n\r\n\r\n\r\n\r\nI just wrote it myself generator and didn't&nbsp;modify anything in the scripts.My data si in NPZ format and I only use the FA file in the data.\r\n\r\nThanks a lot and all the best wishes for you.\r\nSincerely yours,\r\nYi wang\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:                                                                                                                        \"voxelmorph/voxelmorph\"                                                                                    ***@***.***&gt;;\r\n发送时间:&nbsp;2021年5月8日(星期六) 晚上10:02\r\n***@***.***&gt;;\r\n***@***.******@***.***&gt;;\r\n主题:&nbsp;Re: [voxelmorph/voxelmorph] Creation of Deformable Template (#307)\r\n\r\n\r\n\r\n\r\n\r\n \r\n@CadyWang thanks for your interest.\r\n Can you tell us what version of tf you have, what your data looks like? Did you modify anything in the scripts?\r\n \r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub, or unsubscribe.\r\n\r\n\r\n从QQ邮箱发来的超大附件\r\n\r\n100408.npz (64.00M, 2021年06月07日 22:15 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0f6630650399c8c9da8c2d5e4564051d53555252550100001d5f56515a49035400021d070001541f005f5255020503040856085c636e3703005604555b4a59424a660d&code=0f0ecd72\r\n\r\n\r\n\r\n\r\n100610.npz (64.00M, 2021年06月07日 22:15 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0a32366504cbcf9ddfd82b5e42360249530b535c5100085e18010404541b040302021b04520f064b575750005101095654505753643c30570502005454185e164f320b&code=526ed60f\r\n\r\n\r\n\r\n\r\n100307.npz (64.00M, 2021年06月07日 22:16 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0f62363655cccd9eda882b0d1331004a05525753575306501d54570f571c065502011b0f025450480050020f0554530400505355353b325400520506021f5c154a620b&code=0b66512e\r\n\r\n\r\n\r\n\r\n101006.npz (64.00M, 2021年06月07日 22:16 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0b656633559bc9cdde8f7b0813660419060005060704505019065f0a014b020456534b520554031b055705070602045705520303356c360704545603034858464e655b&code=4ef35f66\r\n\r\n\r\n\r\n\r\n101107.npz (64.00M, 2021年06月07日 22:16 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0839306654cdc7ccddd32d5d12300a18510a08070c0509041a0d0403571d0c0e565c1d0702065e1a565f005705000a00520c0154343a380607080156031e56474d390d&code=790f4087","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835381613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false}},{"id":4707892226,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDcwNzg5MjIyNg==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4707892226","actor":null,"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-08T14:19:17Z","performed_via_github_app":null},{"id":4707892228,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3MDc4OTIyMjg=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4707892228","actor":null,"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-08T14:19:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835390437","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-835390437","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":835390437,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNTM5MDQzNw==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2021-05-08T14:48:38Z","updated_at":"2021-05-08T14:48:38Z","author_association":"COLLABORATOR","body":"Hi Yi, can you share the generator? It seems like there's a problem with the type of data matching up with the keras inputs. \r\n\r\nCould you call `next` on your generator and show us the shape and `dtype` of what comes out?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835390437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835738777","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-835738777","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":835738777,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNTczODc3Nw==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2021-05-09T08:12:22Z","updated_at":"2021-05-09T08:12:22Z","author_association":"NONE","body":"I can get a tupe that contains two list when I call next on my generator. I have checked my generator and don't find any problems.My code is sent to you as an attachment.I have been perplexed by this problem for a long time.\r\nThanks again for your help.\r\nYi Wang\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:                                                                                                                        \"voxelmorph/voxelmorph\"                                                                                    ***@***.***&gt;;\r\n发送时间:&nbsp;2021年5月8日(星期六) 晚上10:48\r\n***@***.***&gt;;\r\n***@***.******@***.***&gt;;\r\n主题:&nbsp;Re: [voxelmorph/voxelmorph] Creation of Deformable Template (#307)\r\n\r\n\r\n\r\n\r\n\r\n \r\nHi Yi, can you share the generator? It seems like there's a problem with the type of data matching up with the keras inputs.\r\n \r\nCould you call next on your generator and show us the shape and dtype of what comes out?\r\n \r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835738777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835791735","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-835791735","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":835791735,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNTc5MTczNQ==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2021-05-09T11:57:55Z","updated_at":"2021-05-09T11:57:55Z","author_association":"COLLABORATOR","body":"@CadyWang I didn't get an attachment.\r\nPlease just print out the `shape` and `dtype`  of all your generator data.\r\n\r\nAlso, are you using the `dev` or `master` branches of voxelmorph? ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835791735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":4710703524,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDcxMDcwMzUyNA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4710703524","actor":null,"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-09T11:57:55Z","performed_via_github_app":null},{"id":4710703525,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3MTA3MDM1MjU=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4710703525","actor":null,"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-09T11:57:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835800431","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-835800431","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":835800431,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNTgwMDQzMQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2021-05-09T12:45:39Z","updated_at":"2021-05-09T12:45:39Z","author_association":"NONE","body":"Sorry, I don't konw why the attachment has not been sent to you. I 'm using the branches of voxelmorph.\r\n&nbsp;I get a tuple that contains two list when I call next on my generator. The fist list contains two numpy arrays that the shape is (1,128,128,128,1) and the dtype is float32. The second list contains four numpy arrays that the dtype all is float32. The shape of the four arrays are (1,128,128,128,1),(1,128,128,128,1),(1,128,128,128,3),(1,128,128,128,3).\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nMy generator code is as follows:\r\nimport os\r\nimport sys\r\nimport glob\r\nimport numpy as np\r\n\r\n\r\ndef volgen(\r\n        vol_names,\r\n        batch_size=1,\r\n        load_fa=False,\r\n        load_md=False,\r\n        load_dti=False,\r\n        add_batch_axis=False,\r\n        add_feat_axis=False\r\n):\r\n    \"\"\"\r\n    Base generator for random volume loading. Volumes can be passed as a path to\r\n    the parent directory, a glob pattern or a list of file paths.\r\n    :param vol_names:  Path, glob pattern or list of volume files to load.\r\n    :param batch_size: Batch size. Default is 1.\r\n    :param load_fa: Loads corresponding fa\r\n    :param load_md: Loads corresponding md\r\n    :param load_dti: Loads corresponding dti\r\n    :param add_batch_axis: Adds an axis to the beginning of the array. Default is True.\r\n    :param add_feat_axis: Load volume arrays with added feature axis. Default is True.\r\n    :return:\r\n    \"\"\"\r\n    # convert glob path to filenames\r\n    if isinstance(vol_names,str):\r\n        if os.path.isdir(vol_names):\r\n            vol_names = os.path.join(vol_names,\"*\")\r\n        vol_names = glob.glob(vol_names)\r\n    while True:\r\n        # generate [batchsize] random image indices\r\n        indices = np.random.randint(len(vol_names), size=batch_size)\r\n\r\n        vols = []\r\n        # load volumes and concatenate\r\n        load_params = dict(add_batch_axis=add_batch_axis,add_feat_axis=add_feat_axis,load_fa=load_fa,load_md=load_md,load_dti=load_dti)\r\n        imgs = [load_volfile(vol_names[i],**load_params)for i in indices]\r\n        if load_fa:\r\n            img_fa = [img[0] for img in imgs]\r\n            vols_fa = np.concatenate(img_fa,axis=0)\r\n            vols.append(vols_fa)\r\n        if load_md:\r\n            img_md = [img[1] for img in imgs]\r\n            vols_md = np.concatenate(img_md,axis=0)\r\n            vols.append(vols_md)\r\n        if load_dti:\r\n            img_dti = [img[len(img)-1] for img in imgs]\r\n            vols_dti = np.concatenate(img_dti,axis=0)\r\n            vols.append(vols_dti)\r\n        yield tuple([vols])\r\n\r\ndef template_creation(vol_names,atlas,bidir=False,batch_size=1,**kwargs):\r\n    \"\"\"\r\n    Generator for unconditional template creation.\r\n\r\n    :param vol_names: List of volume files to load\r\n    :param atlas:  Atlas input volume data.\r\n    :param bidir: Yield input image as output for bidirectional.Default is False.\r\n    :param batch_size: Batch size. Default is 1.\r\n    :param kwargs: Forwarded to the internal volgen generator.\r\n    :return:\r\n    \"\"\"\r\n    shape = atlas.shape[1:-1]\r\n    zeros = np.zeros((batch_size,*shape,len(shape)),dtype=np.float32)\r\n    atlas = np.repeat(atlas,batch_size,axis=0)\r\n    gen = volgen(vol_names,batch_size=batch_size,load_fa=True,add_feat_axis=True,add_batch_axis=True)\r\n    while True:\r\n        scan, = next(gen)[0]\r\n        invols = [atlas,scan]\r\n        outvols = [scan,atlas,zeros,zeros] if bidir else [scan,zeros,zeros]\r\n        yield (invols,outvols)\r\n\r\ndef load_volfile(\r\n        filename,\r\n        load_fa = False,\r\n        load_md = False,\r\n        load_dti = False,\r\n        add_batch_axis= False,\r\n        add_feat_axis = False\r\n):\r\n    \"\"\"\r\n\r\n    :param filename: Filename to load\r\n    :param read_fa:  load fa Default is False\r\n    :param read_md: load md Default is False\r\n    :param read_dti: load dti Default is False\r\n    :param add_batch_axis: Adds an axis to the beginning of the array. Default is False.\r\n    :param add_feat_axis: Adds an axis to the end of the array. Default is False.\r\n    :return:\r\n    \"\"\"\r\n    if filename.endswith('.npz'):\r\n        if load_fa:\r\n            fa = np.load(filename)['fa']\r\n            if add_batch_axis:\r\n                fa = fa[np.newaxis, ...]\r\n            if add_feat_axis:\r\n                fa = fa[..., np.newaxis]\r\n        if load_md:\r\n            md = np.load(filename)['md']\r\n            if add_batch_axis:\r\n                md = md[np.newaxis, ...]\r\n            if add_feat_axis:\r\n                md = md[..., np.newaxis]\r\n        if load_dti:\r\n            dti = np.load(filename)['dti']\r\n            if add_batch_axis:\r\n                dti = dti[np.newaxis, ...]\r\n    else:\r\n        raise ValueError('unknown filetype for %s' % filename)\r\n    vols = []\r\n    if load_fa:\r\n        vols.append(fa)\r\n    if load_md:\r\n        vols.append(md)\r\n    if load_dti:\r\n        vols.append(dti)\r\n    return vols\r\n\r\nMy train_template code is as follows:\r\nimport os\r\nimport random\r\nimport argparse\r\nimport glob\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport voxelmorph as vxm\r\nfrom utils import load_volfile,save_volfile\r\nfrom loader.generator import template_creation\r\n\r\n\r\n\r\n# parse the commandline\r\nparser = argparse.ArgumentParser()\r\n\r\n# data organization parameters\r\nparser.add_argument('--datadir',help='base data directory',default='./data/train',type=str,required=False)\r\nparser.add_argument('--atlas',help='atlas filename')\r\nparser.add_argument('--validation_dir',help='base verification directory',default='./data/verification',type=str,required=False)\r\nparser.add_argument('--tempolary_dir',help='tempolary file',default='./tmp',type=str,required=False)\r\n\r\nparser.add_argument('--model-dir',default='./ckpt',help='model output directory(default:ckpt)')\r\nparser.add_argument('--multichannel',action='store_true',help='specify that data has multiple channels')\r\n\r\n# train parameters\r\nparser.add_argument('--gpu',default='0',help='GPU ID numbers(default:0)')\r\nparser.add_argument('--batch-size',type=int, default=1,help='batch size (default:1)')\r\nparser.add_argument('--epochs',type=int,default=1500,help='number of train epochs(default:1500)')\r\nparser.add_argument('--steps-per-epoch',type=int,default=100,help='frequency of model saves(default:100)')\r\nparser.add_argument('--load-weights',help='optional weights file to initialize with',default='')\r\nparser.add_argument('--initial-epoch',type=int,default=0,help='initial epoch number(default:0)')\r\nparser.add_argument('--lr',type=float,default=1e-4,help='learning rate(default:1e-4)')\r\n\r\n# network architecture parameters\r\nparser.add_argument('--enc',type=int,nargs='+',help='list of unet encoder filters(default:16 32 32 32)')\r\nparser.add_argument('--dec',type=int,nargs='+',help='list of unet decorder filters(default:32 32 32 32 32 16 16)')\r\n\r\n# loss hyperparameters\r\nparser.add_argument('--image-loss',default='mse',help='image reconstruction loss - can be mse or ncc(default:mse)')\r\nparser.add_argument('-image-loss-weight',type=float,default=1.0,help='relative weight of transformed atlas loss (default:1.0)')\r\nparser.add_argument('--mean-loss-weight',type=float,default=1.0,help='weight of mean stream loss (default:1.0)')\r\nparser.add_argument('--grad-loss-weight',type=float,default=0.01,help='weight of gradient loss (lamba) (default:0.01)')\r\n\r\nargs = parser.parse_args()\r\n\r\n# load and prepare training data\r\ntrain_vol_names = glob.glob(os.path.join(args.datadir, '*.npz'))\r\nrandom.shuffle(train_vol_names)  # shuffle volume list\r\nassert len(train_vol_names) &gt; 0, 'Could not find any training data'\r\n\r\n# prepare model folder\r\nmodel_dir = args.model_dir\r\nos.makedirs(model_dir, exist_ok=True)\r\n\r\n# no need to append an extra feature axis if data is multichannel\r\nadd_feat_axis = not args.multichannel\r\n\r\n# prepare the initial weights for the atlas \"layer\"\r\nif args.atlas:\r\n    # load atlas from file\r\n    atlas = load_volfile(args.atlas,load_fa=True,add_batch_axis=True,add_feat_axis=True)\r\n\r\nelse:\r\n    # generate rough atlas by averaging inputs\r\n    print('creating input atlas by averaging scans')\r\n    atlas = 0\r\n    atlas_scans = train_vol_names[:100]\r\n    for scan in atlas_scans:\r\n        atlas += load_volfile(scan,load_fa=True,add_batch_axis=True,add_feat_axis=True)[0]\r\n    atlas /=len(atlas_scans)\r\n\r\n# save input atlas for the record\r\nsave_volfile(atlas.squeeze(),os.path.join(model_dir,'input_atlas.npz'))\r\n\r\n# get atlas shape (might differ from image input shape)\r\natlas_shape = atlas.shape[1:-1]\r\nnfeats = atlas.shape[-1]\r\n\r\n# tensorflow device handling\r\ndevice, nb_devices = vxm.tf.utils.setup_device(args.gpu)\r\nassert np.mod(args.batch_size, nb_devices) == 0, 'Batch size (%d) should be a multiple of the number of gpus (%d)' % (args.batch_size, nb_devices)\r\n\r\n# unet architecture\r\nenc_nf = args.enc if args.enc else [16, 32, 32, 32]\r\ndec_nf = args.dec if args.dec else [32, 32, 32, 32, 32, 16, 16]\r\n\r\n# configure generator\r\ngenerator = template_creation(train_vol_names,atlas,bidir=True,batch_size=args.batch_size,add_feat_axis=add_feat_axis)\r\n# prepare model checkpoint save path\r\nsave_filename = os.path.join(model_dir, '{epoch:04d}.h5')\r\n\r\n# prepare the model\r\nwith tf.device(device):\r\n\r\n    # build model\r\n    model = vxm.networks.TemplateCreation(\r\n        atlas_shape,\r\n        nb_unet_features=[enc_nf, dec_nf],\r\n        atlas_feats=nfeats,\r\n        src_feats=nfeats\r\n    )\r\n\r\n    # set initial atlas weights\r\n    model.references.atlas_layer.set_weights([atlas[0, ...]])\r\n\r\n    # load initial weights (if provided)\r\n    if args.load_weights:\r\n        model.load_weights(args.load_weights, by_name=True)\r\n\r\n    # prepare image loss\r\n    if args.image_loss == 'ncc':\r\n        image_loss_func = vxm.losses.NCC().loss\r\n    elif args.image_loss == 'mse':\r\n        image_loss_func = vxm.losses.MSE().loss\r\n    else:\r\n        raise ValueError('Image loss should be \"mse\" or \"ncc\", but found \"%s\"' % args.image_loss)\r\n\r\n    # make sure the warped target is compared to the generated atlas and not the input atlas\r\n    neg_loss_func = lambda _, y_pred: image_loss_func(model.references.atlas_tensor, y_pred)\r\n\r\n    losses = [image_loss_func, neg_loss_func, vxm.losses.MSE().loss, vxm.losses.Grad('l2', loss_mult=2).loss]\r\n    weights = [args.image_loss_weight, 1 - args.image_loss_weight, args.mean_loss_weight, args.grad_loss_weight]\r\n\r\n    # multi-gpu support\r\n    if nb_devices &gt; 1:\r\n        save_callback = vxm.networks.ModelCheckpointParallel(save_filename)\r\n        model = tf.keras.utils.multi_gpu_model(model, gpus=nb_devices)\r\n    else:\r\n        save_callback = tf.keras.callbacks.ModelCheckpoint(save_filename)\r\n\r\n    model.compile(optimizer=tf.keras.optimizers.Adam(lr=args.lr), loss=losses, loss_weights=weights,experimental_run_tf_function=False)\r\n\r\n    # save starting weights\r\n    model.save(save_filename.format(epoch=args.initial_epoch))\r\n\r\n    model.fit_generator(generator,\r\n        initial_epoch=args.initial_epoch,\r\n        epochs=args.epochs,\r\n        callbacks=[save_callback],\r\n        steps_per_epoch=args.steps_per_epoch,\r\n        verbose=1\r\n    )when you have time,could you help me test my code? I haven't modified the voxelmorph except the generator.best wishes,Yi Wang\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n\r\n\r\n\r\n\r\n\r\n\r\n发件人:                                                                                                                        \"voxelmorph/voxelmorph\"                                                                                    ***@***.***&gt;;\r\n发送时间:&nbsp;2021年5月9日(星期天) 晚上7:58\r\n***@***.***&gt;;\r\n***@***.******@***.***&gt;;\r\n主题:&nbsp;Re: [voxelmorph/voxelmorph] Creation of Deformable Template (#307)\r\n\r\n\r\n\r\n\r\n\r\n \r\n@CadyWang I didn't get an attachment.\r\n Please just print out the shape and dtype  of all your generator data.\r\n \r\nAlso, are you using the dev or master branches of voxelmorph?\r\n \r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub, or unsubscribe.\r\n\r\n\r\n从QQ邮箱发来的超大附件\r\n\r\n101309.npz (64.00M, 2021年06月08日 20:39 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0a343433069c9a9fdfde29084061574b505551570757555318010200044c51010c561952035807495356500057005d0002070757666b6555050507035f4f0b144f3409&code=5443faed\r\n\r\n\r\n\r\n\r\n101410.npz (64.00M, 2021年06月08日 20:39 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0966643402989a9edc8c790f4465574a0e000556515d06561b045c55514851520353490c5a015c4857025152500154060f055302626f655406575005524b0b154c6659&code=6fd4beee\r\n\r\n\r\n\r\n\r\n101915.npz (64.00M, 2021年06月08日 20:39 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=0965376456cac79fdc8f2a5f10370a4b0e53055553530d571b070f5d021a0c0507061a0602555c4904070707010500010306055c363d385506540e55031956144c650a&code=6e7d678d\r\n\r\n\r\n\r\n\r\n102008.npz (64.00M, 2021年06月08日 20:40 到期)进入下载页面：http://mail.qq.com/cgi-bin/ftnExs_download?t=exs_ftn_download&k=5a37353358c4ca9a8fdd28081e39074e57060d0a5e0f0c57480650060e140153510218525e0a064c010707060f01010000020403383335505505050300175b111f3708&code=e753895a","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/835800431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false}},{"id":4710803144,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDcxMDgwMzE0NA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4710803144","actor":null,"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-09T12:45:39Z","performed_via_github_app":null},{"id":4710803145,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3MTA4MDMxNDU=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/4710803145","actor":null,"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-09T12:45:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/1124409814","html_url":"https://github.com/voxelmorph/voxelmorph/issues/307#issuecomment-1124409814","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/307","id":1124409814,"node_id":"IC_kwDOB_Nd285DBSHW","user":{"login":"mikami520","id":70731556,"node_id":"MDQ6VXNlcjcwNzMxNTU2","avatar_url":"https://avatars.githubusercontent.com/u/70731556?v=4","gravatar_id":"","url":"https://api.github.com/users/mikami520","html_url":"https://github.com/mikami520","followers_url":"https://api.github.com/users/mikami520/followers","following_url":"https://api.github.com/users/mikami520/following{/other_user}","gists_url":"https://api.github.com/users/mikami520/gists{/gist_id}","starred_url":"https://api.github.com/users/mikami520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikami520/subscriptions","organizations_url":"https://api.github.com/users/mikami520/orgs","repos_url":"https://api.github.com/users/mikami520/repos","events_url":"https://api.github.com/users/mikami520/events{/privacy}","received_events_url":"https://api.github.com/users/mikami520/received_events","type":"User","site_admin":false},"created_at":"2022-05-12T00:35:59Z","updated_at":"2022-05-12T00:35:59Z","author_association":"NONE","body":"@CadyWang \r\n\r\nHi Cady, I have a quick question about your generator. I compared your generator to the original one, you add atlas as an input argument and to the generator, what's the difference between these two versions? will yours have some improvement when getting atlas? I am looking forward to your response, thanks!\r\n\r\nBest,\r\nYuliang Xiao","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/1124409814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikami520","id":70731556,"node_id":"MDQ6VXNlcjcwNzMxNTU2","avatar_url":"https://avatars.githubusercontent.com/u/70731556?v=4","gravatar_id":"","url":"https://api.github.com/users/mikami520","html_url":"https://github.com/mikami520","followers_url":"https://api.github.com/users/mikami520/followers","following_url":"https://api.github.com/users/mikami520/following{/other_user}","gists_url":"https://api.github.com/users/mikami520/gists{/gist_id}","starred_url":"https://api.github.com/users/mikami520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikami520/subscriptions","organizations_url":"https://api.github.com/users/mikami520/orgs","repos_url":"https://api.github.com/users/mikami520/repos","events_url":"https://api.github.com/users/mikami520/events{/privacy}","received_events_url":"https://api.github.com/users/mikami520/received_events","type":"User","site_admin":false}},{"id":6594360185,"node_id":"MEE_lADOB_Nd2840ftzyzwAAAAGJDfN5","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/6594360185","actor":null,"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-12T00:35:59Z","performed_via_github_app":null},{"id":6594360188,"node_id":"SE_lADOB_Nd2840ftzyzwAAAAGJDfN8","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/6594360188","actor":null,"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-12T00:35:59Z","performed_via_github_app":null}]