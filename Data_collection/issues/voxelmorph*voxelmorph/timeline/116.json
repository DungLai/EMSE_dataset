[{"id":2759623558,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjc1OTYyMzU1OA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2759623558","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-31T12:39:14Z","performed_via_github_app":null},{"id":2759623559,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3NTk2MjM1NTk=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2759623559","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-31T12:39:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/551170724","html_url":"https://github.com/voxelmorph/voxelmorph/issues/116#issuecomment-551170724","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/116","id":551170724,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MTE3MDcyNA==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-11-07T17:02:16Z","updated_at":"2019-11-07T17:02:16Z","author_association":"COLLABORATOR","body":"Sure, we create a black and white grid via `bw_grid()` in [pynd](https://github.com/adalca/pytools-lib/blob/master/pynd/ndutils.py) to create an image the size of the input volume, and then use `model.predict()` on the resulting image, and show a slide from that. Does that make sense?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/551170724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":2780116980,"node_id":"MDExOkNsb3NlZEV2ZW50Mjc4MDExNjk4MA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2780116980","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-11-07T17:02:16Z","state_reason":null,"performed_via_github_app":null},{"id":2780118026,"node_id":"MDEyOkxhYmVsZWRFdmVudDI3ODAxMTgwMjY=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2780118026","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-11-07T17:02:35Z","label":{"name":"neuron","color":"84cde0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/564407174","html_url":"https://github.com/voxelmorph/voxelmorph/issues/116#issuecomment-564407174","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/116","id":564407174,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDQwNzE3NA==","user":{"login":"white-hy","id":33248778,"node_id":"MDQ6VXNlcjMzMjQ4Nzc4","avatar_url":"https://avatars.githubusercontent.com/u/33248778?v=4","gravatar_id":"","url":"https://api.github.com/users/white-hy","html_url":"https://github.com/white-hy","followers_url":"https://api.github.com/users/white-hy/followers","following_url":"https://api.github.com/users/white-hy/following{/other_user}","gists_url":"https://api.github.com/users/white-hy/gists{/gist_id}","starred_url":"https://api.github.com/users/white-hy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/white-hy/subscriptions","organizations_url":"https://api.github.com/users/white-hy/orgs","repos_url":"https://api.github.com/users/white-hy/repos","events_url":"https://api.github.com/users/white-hy/events{/privacy}","received_events_url":"https://api.github.com/users/white-hy/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T06:58:18Z","updated_at":"2019-12-11T06:58:18Z","author_association":"NONE","body":"@adalca Hi. Dear Author.\r\n\r\n> and show a slide from that. Does that make sense?\r\n\r\nI'm a little confused about what you said about ` slide` . Dose this  ` slide` is a slice?\r\nI used Voxelmorph to complete the registration of the lung images. The Jacobian determinants of the resulting displacement field are all positve, which means I achieve a smooth displacemen field, right? However, I use the resulting displacement field to transform the grid image. Visually, the grid image is discontinuous. My results are shown as follows:\r\n![image](https://user-images.githubusercontent.com/33248778/70597430-44af6580-1c23-11ea-896d-a1855a76b761.png)\r\n![image](https://user-images.githubusercontent.com/33248778/70597831-534a4c80-1c24-11ea-91ee-b8e424a098ef.png)![image](https://user-images.githubusercontent.com/33248778/70597800-3e6db900-1c24-11ea-95bd-183de106eb22.png)\r\n![image](https://user-images.githubusercontent.com/33248778/70598637-40387c00-1c26-11ea-892a-8849fb8cbfc1.png)![image](https://user-images.githubusercontent.com/33248778/70598725-6cec9380-1c26-11ea-8fb3-1af8ee3560dd.png)\r\n\r\n\r\n\r\n\r\n\r\nHere is my code:\r\n```\r\n    with tf.device(gpu):\r\n        pred = nib.load('./displacement_field.nii.gz').get_data()[np.newaxis, ...]  \r\n        Warp_img = nn_trf_model.predict([Grid_image, pred])[0, ..., 0]\r\n        Warp_img = Warp_img.transpose(2, 1, 0)\r\n        Warp_img = sitk.GetImageFromArray(Warp_img)\r\n        Warp_img.SetSpacing(img_spacing)\r\n        sitk.WriteImage(Warp_img,'')\r\n```\r\nI don't know why the grid is discontinuous.Can you give me some hints.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/564407174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"white-hy","id":33248778,"node_id":"MDQ6VXNlcjMzMjQ4Nzc4","avatar_url":"https://avatars.githubusercontent.com/u/33248778?v=4","gravatar_id":"","url":"https://api.github.com/users/white-hy","html_url":"https://github.com/white-hy","followers_url":"https://api.github.com/users/white-hy/followers","following_url":"https://api.github.com/users/white-hy/following{/other_user}","gists_url":"https://api.github.com/users/white-hy/gists{/gist_id}","starred_url":"https://api.github.com/users/white-hy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/white-hy/subscriptions","organizations_url":"https://api.github.com/users/white-hy/orgs","repos_url":"https://api.github.com/users/white-hy/repos","events_url":"https://api.github.com/users/white-hy/events{/privacy}","received_events_url":"https://api.github.com/users/white-hy/received_events","type":"User","site_admin":false}},{"id":2873146230,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3MzE0NjIzMA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2873146230","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-11T06:58:18Z","performed_via_github_app":null},{"id":2873146233,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzMxNDYyMzM=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2873146233","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-11T06:58:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/564793150","html_url":"https://github.com/voxelmorph/voxelmorph/issues/116#issuecomment-564793150","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/116","id":564793150,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDc5MzE1MA==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T00:22:11Z","updated_at":"2019-12-12T00:22:11Z","author_association":"COLLABORATOR","body":"positive Jacobian det simply means no foldings (good!) \r\n\r\nMostly because you used nearest neighbour interpolation. Try building a model that warps without that uses linear interpolation (like `nn_trf` but `linear` instead of `nearest`). I think the results will look better.\r\n\r\nHaving said this, looking at your images it seems like the field isn't super regular, you might find it useful to increaes the regularity *just a bit*.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/564793150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/564819896","html_url":"https://github.com/voxelmorph/voxelmorph/issues/116#issuecomment-564819896","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/116","id":564819896,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDgxOTg5Ng==","user":{"login":"white-hy","id":33248778,"node_id":"MDQ6VXNlcjMzMjQ4Nzc4","avatar_url":"https://avatars.githubusercontent.com/u/33248778?v=4","gravatar_id":"","url":"https://api.github.com/users/white-hy","html_url":"https://github.com/white-hy","followers_url":"https://api.github.com/users/white-hy/followers","following_url":"https://api.github.com/users/white-hy/following{/other_user}","gists_url":"https://api.github.com/users/white-hy/gists{/gist_id}","starred_url":"https://api.github.com/users/white-hy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/white-hy/subscriptions","organizations_url":"https://api.github.com/users/white-hy/orgs","repos_url":"https://api.github.com/users/white-hy/repos","events_url":"https://api.github.com/users/white-hy/events{/privacy}","received_events_url":"https://api.github.com/users/white-hy/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T02:19:19Z","updated_at":"2019-12-12T02:25:21Z","author_association":"NONE","body":"@adalca  Thank you so much for your advice.  I'll do what you said right away.\r\n\r\nI'm a little confused about this:\r\n>  looking at your images it seems like the field isn't super regular\r\n\r\nI adjusted the window width when I showed the three images of the displacement field. Here are the images before I adjusted the window level.\r\n![image](https://user-images.githubusercontent.com/33248778/70676434-1c794280-1cc7-11ea-9759-c56f7b003502.png)![image](https://user-images.githubusercontent.com/33248778/70676462-3450c680-1cc7-11ea-954c-5bdd4b87c3ce.png)\r\n![image](https://user-images.githubusercontent.com/33248778/70676504-55191c00-1cc7-11ea-9c26-bf7e390c5d17.png)![image](https://user-images.githubusercontent.com/33248778/70676767-323b3780-1cc8-11ea-8321-b5c05dfbf95d.png)\r\nHow can I get the conclusion that it is necessary to add regularization by observing the images of displacement field? Can you give me some hints. \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/564819896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"white-hy","id":33248778,"node_id":"MDQ6VXNlcjMzMjQ4Nzc4","avatar_url":"https://avatars.githubusercontent.com/u/33248778?v=4","gravatar_id":"","url":"https://api.github.com/users/white-hy","html_url":"https://github.com/white-hy","followers_url":"https://api.github.com/users/white-hy/followers","following_url":"https://api.github.com/users/white-hy/following{/other_user}","gists_url":"https://api.github.com/users/white-hy/gists{/gist_id}","starred_url":"https://api.github.com/users/white-hy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/white-hy/subscriptions","organizations_url":"https://api.github.com/users/white-hy/orgs","repos_url":"https://api.github.com/users/white-hy/repos","events_url":"https://api.github.com/users/white-hy/events{/privacy}","received_events_url":"https://api.github.com/users/white-hy/received_events","type":"User","site_admin":false}},{"id":2876404904,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3NjQwNDkwNA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2876404904","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-12T02:19:20Z","performed_via_github_app":null},{"id":2876404905,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzY0MDQ5MDU=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2876404905","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-12T02:19:20Z","performed_via_github_app":null}]