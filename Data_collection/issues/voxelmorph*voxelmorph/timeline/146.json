[{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584654509","html_url":"https://github.com/voxelmorph/voxelmorph/issues/146#issuecomment-584654509","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/146","id":584654509,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDY1NDUwOQ==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2020-02-11T14:14:11Z","updated_at":"2020-02-11T14:14:11Z","author_association":"COLLABORATOR","body":"Hi @HansLeonardVanBrueggemann ,\r\n\r\nSorry, this is a bit unclear. The specification in `SpatialTransformer.build()` [Perhaps we should copy this documentation to each function?] is correct: the affine matrix should be `N x N+1`, so `3x4` in your case, or 12-long vector.  However, we *did* have a small bug that did dimension checking wrong. We've updated this bug, but even if you don't pull the latest version, passing a 12-long vector (3x4 flattened) should still work. Or simply pull the latest version which should have corrected the dimension checking.\r\n\r\nAlso please make sure you read the documentation under `SpatialTransformer()` which clarifies how we treat the affine data (this isn't related to your question but we've had some questions about it recently).","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584654509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":3026706286,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzAyNjcwNjI4Ng==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3026706286","actor":{"login":"HansLeonardVanBrueggemann","id":445665,"node_id":"MDQ6VXNlcjQ0NTY2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/445665?v=4","gravatar_id":"","url":"https://api.github.com/users/HansLeonardVanBrueggemann","html_url":"https://github.com/HansLeonardVanBrueggemann","followers_url":"https://api.github.com/users/HansLeonardVanBrueggemann/followers","following_url":"https://api.github.com/users/HansLeonardVanBrueggemann/following{/other_user}","gists_url":"https://api.github.com/users/HansLeonardVanBrueggemann/gists{/gist_id}","starred_url":"https://api.github.com/users/HansLeonardVanBrueggemann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansLeonardVanBrueggemann/subscriptions","organizations_url":"https://api.github.com/users/HansLeonardVanBrueggemann/orgs","repos_url":"https://api.github.com/users/HansLeonardVanBrueggemann/repos","events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/events{/privacy}","received_events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-11T14:14:11Z","performed_via_github_app":null},{"id":3026706287,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwMjY3MDYyODc=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3026706287","actor":{"login":"HansLeonardVanBrueggemann","id":445665,"node_id":"MDQ6VXNlcjQ0NTY2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/445665?v=4","gravatar_id":"","url":"https://api.github.com/users/HansLeonardVanBrueggemann","html_url":"https://github.com/HansLeonardVanBrueggemann","followers_url":"https://api.github.com/users/HansLeonardVanBrueggemann/followers","following_url":"https://api.github.com/users/HansLeonardVanBrueggemann/following{/other_user}","gists_url":"https://api.github.com/users/HansLeonardVanBrueggemann/gists{/gist_id}","starred_url":"https://api.github.com/users/HansLeonardVanBrueggemann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansLeonardVanBrueggemann/subscriptions","organizations_url":"https://api.github.com/users/HansLeonardVanBrueggemann/orgs","repos_url":"https://api.github.com/users/HansLeonardVanBrueggemann/repos","events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/events{/privacy}","received_events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-11T14:14:11Z","performed_via_github_app":null},{"id":3026706926,"node_id":"MDEyOkxhYmVsZWRFdmVudDMwMjY3MDY5MjY=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3026706926","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-02-11T14:14:20Z","label":{"name":"voxelmorph","color":"1d76db"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584679896","html_url":"https://github.com/voxelmorph/voxelmorph/issues/146#issuecomment-584679896","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/146","id":584679896,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDY3OTg5Ng==","user":{"login":"HansLeonardVanBrueggemann","id":445665,"node_id":"MDQ6VXNlcjQ0NTY2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/445665?v=4","gravatar_id":"","url":"https://api.github.com/users/HansLeonardVanBrueggemann","html_url":"https://github.com/HansLeonardVanBrueggemann","followers_url":"https://api.github.com/users/HansLeonardVanBrueggemann/followers","following_url":"https://api.github.com/users/HansLeonardVanBrueggemann/following{/other_user}","gists_url":"https://api.github.com/users/HansLeonardVanBrueggemann/gists{/gist_id}","starred_url":"https://api.github.com/users/HansLeonardVanBrueggemann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansLeonardVanBrueggemann/subscriptions","organizations_url":"https://api.github.com/users/HansLeonardVanBrueggemann/orgs","repos_url":"https://api.github.com/users/HansLeonardVanBrueggemann/repos","events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/events{/privacy}","received_events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/received_events","type":"User","site_admin":false},"created_at":"2020-02-11T15:06:02Z","updated_at":"2020-02-11T15:06:02Z","author_association":"NONE","body":"shouldn't this code be corrected too? \r\n```\r\n        if not self.is_affine:\r\n            if trf_shape[-1] != self.ndims:\r\n                raise Exception('Offset flow field size expected: %d, found: %d' \r\n                                % (self.ndims, trf_shape[-1]))\r\n```\r\nto either check for trf_shape[1] being N+1 or trf_shape[0] being N? \r\nand why does it get in this part of the code when I pass a 3x4? \r\n\r\n`is_affine = ... or len(trf_shape) == 2 and all([trf_shape[0] == self.ndims, trf_shape[1] == self.ndims+1])`\r\n\r\nshould be true with a 3x4, correct? ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584679896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"HansLeonardVanBrueggemann","id":445665,"node_id":"MDQ6VXNlcjQ0NTY2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/445665?v=4","gravatar_id":"","url":"https://api.github.com/users/HansLeonardVanBrueggemann","html_url":"https://github.com/HansLeonardVanBrueggemann","followers_url":"https://api.github.com/users/HansLeonardVanBrueggemann/followers","following_url":"https://api.github.com/users/HansLeonardVanBrueggemann/following{/other_user}","gists_url":"https://api.github.com/users/HansLeonardVanBrueggemann/gists{/gist_id}","starred_url":"https://api.github.com/users/HansLeonardVanBrueggemann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansLeonardVanBrueggemann/subscriptions","organizations_url":"https://api.github.com/users/HansLeonardVanBrueggemann/orgs","repos_url":"https://api.github.com/users/HansLeonardVanBrueggemann/repos","events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/events{/privacy}","received_events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584683439","html_url":"https://github.com/voxelmorph/voxelmorph/issues/146#issuecomment-584683439","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/146","id":584683439,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDY4MzQzOQ==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2020-02-11T15:12:57Z","updated_at":"2020-02-11T15:12:57Z","author_association":"COLLABORATOR","body":"Sorry, I'm not sure I understand your questions.\r\n\r\nThe first part is only checked if your transform is *not* affine -- it's for *dense* fields, which you don't care about, right? So I'm not sure quite sure what you are saying we should change here?\r\n\r\nThe second part should indeed be `True` if you pass in a `3x4` Tensor. ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584683439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584690014","html_url":"https://github.com/voxelmorph/voxelmorph/issues/146#issuecomment-584690014","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/146","id":584690014,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDY5MDAxNA==","user":{"login":"HansLeonardVanBrueggemann","id":445665,"node_id":"MDQ6VXNlcjQ0NTY2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/445665?v=4","gravatar_id":"","url":"https://api.github.com/users/HansLeonardVanBrueggemann","html_url":"https://github.com/HansLeonardVanBrueggemann","followers_url":"https://api.github.com/users/HansLeonardVanBrueggemann/followers","following_url":"https://api.github.com/users/HansLeonardVanBrueggemann/following{/other_user}","gists_url":"https://api.github.com/users/HansLeonardVanBrueggemann/gists{/gist_id}","starred_url":"https://api.github.com/users/HansLeonardVanBrueggemann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansLeonardVanBrueggemann/subscriptions","organizations_url":"https://api.github.com/users/HansLeonardVanBrueggemann/orgs","repos_url":"https://api.github.com/users/HansLeonardVanBrueggemann/repos","events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/events{/privacy}","received_events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/received_events","type":"User","site_admin":false},"created_at":"2020-02-11T15:25:42Z","updated_at":"2020-02-11T15:25:42Z","author_association":"NONE","body":"sure, sorry, it was a problem in my code. ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/584690014/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"HansLeonardVanBrueggemann","id":445665,"node_id":"MDQ6VXNlcjQ0NTY2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/445665?v=4","gravatar_id":"","url":"https://api.github.com/users/HansLeonardVanBrueggemann","html_url":"https://github.com/HansLeonardVanBrueggemann","followers_url":"https://api.github.com/users/HansLeonardVanBrueggemann/followers","following_url":"https://api.github.com/users/HansLeonardVanBrueggemann/following{/other_user}","gists_url":"https://api.github.com/users/HansLeonardVanBrueggemann/gists{/gist_id}","starred_url":"https://api.github.com/users/HansLeonardVanBrueggemann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansLeonardVanBrueggemann/subscriptions","organizations_url":"https://api.github.com/users/HansLeonardVanBrueggemann/orgs","repos_url":"https://api.github.com/users/HansLeonardVanBrueggemann/repos","events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/events{/privacy}","received_events_url":"https://api.github.com/users/HansLeonardVanBrueggemann/received_events","type":"User","site_admin":false}},{"id":3028084990,"node_id":"MDExOkNsb3NlZEV2ZW50MzAyODA4NDk5MA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/3028084990","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-02-11T20:22:54Z","state_reason":null,"performed_via_github_app":null}]