[{"id":2467990115,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0Njc5OTAxMTU=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2467990115","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-09T03:26:42Z","label":{"name":"voxelmorph","color":"1d76db"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509472397","html_url":"https://github.com/voxelmorph/voxelmorph/issues/70#issuecomment-509472397","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/70","id":509472397,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ3MjM5Nw==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T03:26:43Z","updated_at":"2019-07-09T03:26:43Z","author_association":"COLLABORATOR","body":"HI @zhang-qiang-github \r\n\r\nI honestly don't know about image.rotate (I'm a bit surprised if it doesn't have a gradient). \r\nHowever, you can use the `SpatialTransformer` in [neuron.layers](https://github.com/adalca/neuron/blob/master/neuron/layers.py) to apply affine transformation matrices -- so you could try using that, which we've had no problem with.\r\n\r\nHope this helps!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509472397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":2467990152,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ2Nzk5MDE1Mg==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2467990152","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-09T03:26:43Z","state_reason":null,"performed_via_github_app":null},{"id":2467990153,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ2Nzk5MDE1Mw==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2467990153","actor":{"login":"zhang-qiang-github","id":29271051,"node_id":"MDQ6VXNlcjI5MjcxMDUx","avatar_url":"https://avatars.githubusercontent.com/u/29271051?v=4","gravatar_id":"","url":"https://api.github.com/users/zhang-qiang-github","html_url":"https://github.com/zhang-qiang-github","followers_url":"https://api.github.com/users/zhang-qiang-github/followers","following_url":"https://api.github.com/users/zhang-qiang-github/following{/other_user}","gists_url":"https://api.github.com/users/zhang-qiang-github/gists{/gist_id}","starred_url":"https://api.github.com/users/zhang-qiang-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhang-qiang-github/subscriptions","organizations_url":"https://api.github.com/users/zhang-qiang-github/orgs","repos_url":"https://api.github.com/users/zhang-qiang-github/repos","events_url":"https://api.github.com/users/zhang-qiang-github/events{/privacy}","received_events_url":"https://api.github.com/users/zhang-qiang-github/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-09T03:26:43Z","performed_via_github_app":null},{"id":2467990154,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0Njc5OTAxNTQ=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2467990154","actor":{"login":"zhang-qiang-github","id":29271051,"node_id":"MDQ6VXNlcjI5MjcxMDUx","avatar_url":"https://avatars.githubusercontent.com/u/29271051?v=4","gravatar_id":"","url":"https://api.github.com/users/zhang-qiang-github","html_url":"https://github.com/zhang-qiang-github","followers_url":"https://api.github.com/users/zhang-qiang-github/followers","following_url":"https://api.github.com/users/zhang-qiang-github/following{/other_user}","gists_url":"https://api.github.com/users/zhang-qiang-github/gists{/gist_id}","starred_url":"https://api.github.com/users/zhang-qiang-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhang-qiang-github/subscriptions","organizations_url":"https://api.github.com/users/zhang-qiang-github/orgs","repos_url":"https://api.github.com/users/zhang-qiang-github/repos","events_url":"https://api.github.com/users/zhang-qiang-github/events{/privacy}","received_events_url":"https://api.github.com/users/zhang-qiang-github/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-09T03:26:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509474912","html_url":"https://github.com/voxelmorph/voxelmorph/issues/70#issuecomment-509474912","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/70","id":509474912,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ3NDkxMg==","user":{"login":"zhang-qiang-github","id":29271051,"node_id":"MDQ6VXNlcjI5MjcxMDUx","avatar_url":"https://avatars.githubusercontent.com/u/29271051?v=4","gravatar_id":"","url":"https://api.github.com/users/zhang-qiang-github","html_url":"https://github.com/zhang-qiang-github","followers_url":"https://api.github.com/users/zhang-qiang-github/followers","following_url":"https://api.github.com/users/zhang-qiang-github/following{/other_user}","gists_url":"https://api.github.com/users/zhang-qiang-github/gists{/gist_id}","starred_url":"https://api.github.com/users/zhang-qiang-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhang-qiang-github/subscriptions","organizations_url":"https://api.github.com/users/zhang-qiang-github/orgs","repos_url":"https://api.github.com/users/zhang-qiang-github/repos","events_url":"https://api.github.com/users/zhang-qiang-github/events{/privacy}","received_events_url":"https://api.github.com/users/zhang-qiang-github/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T03:42:17Z","updated_at":"2019-07-09T03:42:17Z","author_association":"NONE","body":" To be honest, I am not clear about how to use the SpatialTransformer. Could you please give me an example? For example, I have tensors for float_image and angle. How can I use the SpatialTransformer to get the wrap image?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509474912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhang-qiang-github","id":29271051,"node_id":"MDQ6VXNlcjI5MjcxMDUx","avatar_url":"https://avatars.githubusercontent.com/u/29271051?v=4","gravatar_id":"","url":"https://api.github.com/users/zhang-qiang-github","html_url":"https://github.com/zhang-qiang-github","followers_url":"https://api.github.com/users/zhang-qiang-github/followers","following_url":"https://api.github.com/users/zhang-qiang-github/following{/other_user}","gists_url":"https://api.github.com/users/zhang-qiang-github/gists{/gist_id}","starred_url":"https://api.github.com/users/zhang-qiang-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhang-qiang-github/subscriptions","organizations_url":"https://api.github.com/users/zhang-qiang-github/orgs","repos_url":"https://api.github.com/users/zhang-qiang-github/repos","events_url":"https://api.github.com/users/zhang-qiang-github/events{/privacy}","received_events_url":"https://api.github.com/users/zhang-qiang-github/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509485645","html_url":"https://github.com/voxelmorph/voxelmorph/issues/70#issuecomment-509485645","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/70","id":509485645,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ4NTY0NQ==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T04:46:44Z","updated_at":"2019-07-09T12:51:45Z","author_association":"COLLABORATOR","body":"`SpatialTransformer` is a `Layer` we wrote for keras models. If you have `float_image` and `angle` as keras tensors, you can do something like `warped_image_tensor = SpatialTransformer()([float_image, angle])`. This will give you the next layer tensor (output) in the model.\r\n\r\nIf they are just tensorflow tensors and you just want to do this one operation, it's a bit more complicated, but something *like* this would be the idea: first, set up the affine matrix from the rotation angle (see https://en.wikipedia.org/wiki/Affine_transformation#Image_transformation Rotate row), then:\r\n\r\n```\r\n# get transform at each voxel from the affine matrix\r\ntrf = neuron.utils.affine_to_shift(affine, float_image.shape, shift_center=True)\r\n\r\n# warp image according to transform\r\nwarped_image = neuron.utils.transform(transform, trf)\r\n```\r\n\r\nIf you're planning to play with rigid registration, I recommend you learn more about affine transformation matrices anyway, and this can help you understand what's going on here.\r\n","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509485645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509493813","html_url":"https://github.com/voxelmorph/voxelmorph/issues/70#issuecomment-509493813","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/70","id":509493813,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ5MzgxMw==","user":{"login":"zhang-qiang-github","id":29271051,"node_id":"MDQ6VXNlcjI5MjcxMDUx","avatar_url":"https://avatars.githubusercontent.com/u/29271051?v=4","gravatar_id":"","url":"https://api.github.com/users/zhang-qiang-github","html_url":"https://github.com/zhang-qiang-github","followers_url":"https://api.github.com/users/zhang-qiang-github/followers","following_url":"https://api.github.com/users/zhang-qiang-github/following{/other_user}","gists_url":"https://api.github.com/users/zhang-qiang-github/gists{/gist_id}","starred_url":"https://api.github.com/users/zhang-qiang-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhang-qiang-github/subscriptions","organizations_url":"https://api.github.com/users/zhang-qiang-github/orgs","repos_url":"https://api.github.com/users/zhang-qiang-github/repos","events_url":"https://api.github.com/users/zhang-qiang-github/events{/privacy}","received_events_url":"https://api.github.com/users/zhang-qiang-github/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T05:27:34Z","updated_at":"2019-07-09T05:27:34Z","author_association":"NONE","body":"How can I provide angle and translate (X, Y) seperately in SpatialTransformer? ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509493813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhang-qiang-github","id":29271051,"node_id":"MDQ6VXNlcjI5MjcxMDUx","avatar_url":"https://avatars.githubusercontent.com/u/29271051?v=4","gravatar_id":"","url":"https://api.github.com/users/zhang-qiang-github","html_url":"https://github.com/zhang-qiang-github","followers_url":"https://api.github.com/users/zhang-qiang-github/followers","following_url":"https://api.github.com/users/zhang-qiang-github/following{/other_user}","gists_url":"https://api.github.com/users/zhang-qiang-github/gists{/gist_id}","starred_url":"https://api.github.com/users/zhang-qiang-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhang-qiang-github/subscriptions","organizations_url":"https://api.github.com/users/zhang-qiang-github/orgs","repos_url":"https://api.github.com/users/zhang-qiang-github/repos","events_url":"https://api.github.com/users/zhang-qiang-github/events{/privacy}","received_events_url":"https://api.github.com/users/zhang-qiang-github/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509630336","html_url":"https://github.com/voxelmorph/voxelmorph/issues/70#issuecomment-509630336","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/70","id":509630336,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTYzMDMzNg==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T12:54:52Z","updated_at":"2019-07-09T12:54:52Z","author_association":"COLLABORATOR","body":"given an angle and translation you can create an affine matrix. translations go in the top right entries of the affine matrix, `[0, 2]` and `[1, 2]` in numpy indexing.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/509630336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}}]