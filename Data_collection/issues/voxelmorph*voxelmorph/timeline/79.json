[{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/515687650","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-515687650","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":515687650,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTY4NzY1MA==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-27T14:19:54Z","updated_at":"2019-07-27T14:20:11Z","author_association":"COLLABORATOR","body":"Re: quadrature, I suppose it is, but you'll get more intuition of how it works by looking here; https://en.wikipedia.org/wiki/Numerical_integration#Quadrature_rules_based_on_interpolating_functions\r\n\r\nregarding inverse consistency, I'm not sure where exactly you are referring. There are several ways that people compute this -- one is to compose the two deformation fields (forward and inverse) and see how close you are to identity (0 displacement). Yes, the `transform` part of the code will help with this. Essentially, if you have a `fwd` and a `bwd` transform, you want to do something like warp the `fwd` model with the `bwd` model, and then add the `bwd` model to this -- the result should be close to 0 if the models are true inverses.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/515687650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":2514263445,"node_id":"MDExOkNsb3NlZEV2ZW50MjUxNDI2MzQ0NQ==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2514263445","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-27T14:19:54Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/515729770","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-515729770","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":515729770,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTcyOTc3MA==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-07-28T03:27:18Z","updated_at":"2019-07-28T03:27:18Z","author_association":"NONE","body":"Re: Thank you very much, I understand what you mean. Just have one more thing to confirm.\r\n\r\nYou mentioned in your paper that the effects of integration steps on the registration accuracy, the registration time, the number of folding voxels and the inverse consistency error.   You said \"during training, we hold the scaling and squaring steps fixed. However, this number can be varied at test time.\" Does this mean that we can train the model with a fixed steps like nb_steps = 7, and test this trained model with different steps like nb_steps = 5,6,7,8,9 ? I mean, should the parameter nb_steps in the training model be  necessarily the same with that of the test model? Because if we use one parameter value in the training process while use a different value for the same parameter in the test process, I think that will make the test results inaccurate. So maybe I should train 5 models with 5 values of nb_steps and test them respectively. Does this make any sense? I did train one model with nb_steps = 8 and tested this model with 5 different values, 5,6,7,8,9, and found that the dice scores are almost the same, and as the parameter increases  from 5 to 7, the number of  folding voxels increases a little instead of decreasing like your result and the registration time decreases a little, while the  inverse consistency error follows your result. So I think maybe I should use different values of the parameter nb_steps to train models. \r\n\r\nThink you very much and look forward to your reply !","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/515729770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/515765766","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-515765766","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":515765766,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc2NTc2Ng==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-28T14:07:22Z","updated_at":"2019-07-28T14:07:22Z","author_association":"COLLABORATOR","body":"yes, you can train with `nb_steps=7` (something sufficiently larger), and test with a different `nb_steps` value (usually you would want this the same or larger at test time, otherwise i don't see a point of changing it) -- that's actually what we show in the paper -- the results don't really become less accurate, but you should get better Jacobian determinant values! This is because the number of steps will affect the accuracy of the integration. \r\n\r\nI don't think you should train 5 models. In your model trained with 8 steps, can you plot the Jacobian determinant values for `nb_steps = 6,7,8,9` over, say, 50 subjects? If the number of folding voxels go *up*, that's an issue, we never observed something like this.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/515765766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":2514743358,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1MTQ3NDMzNTg=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2514743358","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-28T14:07:33Z","label":{"name":"voxelmorph","color":"1d76db"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516242442","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-516242442","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":516242442,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI0MjQ0Mg==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T03:11:03Z","updated_at":"2019-07-30T03:11:03Z","author_association":"NONE","body":"I'm so sorry for the late response, I use 37 subjects to get the mean of folding voxels' number  when fix the number of integration steps and plot the variation trend of the folding voxels' number as the number of steps increases. The figure is shown as follows.\r\n![folding_voxels](https://user-images.githubusercontent.com/50296395/62097786-a2699380-b2ba-11e9-89ae-07758bb22d8d.png)\r\n Thank you very much!","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516242442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516314291","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-516314291","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":516314291,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjMxNDI5MQ==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T08:12:27Z","updated_at":"2019-07-30T08:12:27Z","author_association":"NONE","body":"I'm sorry, forgot to ask, you suggest me  train with a smaller  **nb_steps**， such as 5  and test with some larger **nb_steps**， such as 5,6,7,8,9  rather than train with 8 and test with 5,6 and 7. Is this the rule, maybe in this way, I can get a down trend as the nb_steps goes up.\r\n\r\nThank you very much!","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516314291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516560081","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-516560081","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":516560081,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU2MDA4MQ==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T19:29:17Z","updated_at":"2019-07-30T19:29:17Z","author_association":"COLLABORATOR","body":"Whoah, that is a lot of folding voxels -- can you show the standard deviations on the graph? also, what images are these, how did you train, etc?\r\n\r\nI think you should train with a high number of steps if you can, I was just saying that in some cases, users might *need* to use a low number of steps because of memory considerations at training. ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516560081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516592788","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-516592788","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":516592788,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU5Mjc4OA==","user":{"login":"Barnonewdm","id":22175925,"node_id":"MDQ6VXNlcjIyMTc1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/22175925?v=4","gravatar_id":"","url":"https://api.github.com/users/Barnonewdm","html_url":"https://github.com/Barnonewdm","followers_url":"https://api.github.com/users/Barnonewdm/followers","following_url":"https://api.github.com/users/Barnonewdm/following{/other_user}","gists_url":"https://api.github.com/users/Barnonewdm/gists{/gist_id}","starred_url":"https://api.github.com/users/Barnonewdm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Barnonewdm/subscriptions","organizations_url":"https://api.github.com/users/Barnonewdm/orgs","repos_url":"https://api.github.com/users/Barnonewdm/repos","events_url":"https://api.github.com/users/Barnonewdm/events{/privacy}","received_events_url":"https://api.github.com/users/Barnonewdm/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T20:57:27Z","updated_at":"2019-07-30T20:57:27Z","author_association":"NONE","body":"Thanks for @adalca's response. My experience is consistent with @shuo-shuo-zhang's. In my understanding, the exact integration method \"scaling and squaring\" is doing scaling and composition. Most importantly, this step is not an identity.  The displacement norm will decrease with the increase of integration number (nb_steps in code). If the nb_steps is large enough, i.e. 150, the displacement after integration is almost zero (the deformation field should be identity). Therefore, I do agree that the folding points should decrease with the number of integration. But the figure showed by @shuo-shuo-zhang reveals one more important issue that folding performance is not sensitive to the number of integration.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516592788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Barnonewdm","id":22175925,"node_id":"MDQ6VXNlcjIyMTc1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/22175925?v=4","gravatar_id":"","url":"https://api.github.com/users/Barnonewdm","html_url":"https://github.com/Barnonewdm","followers_url":"https://api.github.com/users/Barnonewdm/followers","following_url":"https://api.github.com/users/Barnonewdm/following{/other_user}","gists_url":"https://api.github.com/users/Barnonewdm/gists{/gist_id}","starred_url":"https://api.github.com/users/Barnonewdm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Barnonewdm/subscriptions","organizations_url":"https://api.github.com/users/Barnonewdm/orgs","repos_url":"https://api.github.com/users/Barnonewdm/repos","events_url":"https://api.github.com/users/Barnonewdm/events{/privacy}","received_events_url":"https://api.github.com/users/Barnonewdm/received_events","type":"User","site_admin":false}},{"id":2521245118,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUyMTI0NTExOA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521245118","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-30T20:57:28Z","performed_via_github_app":null},{"id":2521245122,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MjEyNDUxMjI=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521245122","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-30T20:57:28Z","performed_via_github_app":null},{"id":2521245129,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUyMTI0NTEyOQ==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521245129","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-30T20:57:28Z","performed_via_github_app":null},{"id":2521245131,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MjEyNDUxMzE=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521245131","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-30T20:57:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516597633","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-516597633","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":516597633,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU5NzYzMw==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T21:12:00Z","updated_at":"2019-07-30T21:12:00Z","author_association":"COLLABORATOR","body":"Thanks for the input @Barnonewdm, @shuo-shuo-zhang .\r\n\r\nCan you both confirm that you are using `use_miccai_int=False` in `miccai2018_net`, that is, the default?\r\n\r\n@Barnonewdm, your interpretation of scaling and squaring is not quite correct --> you can think of *scaling and squaring* as approximating the integral \\phi = int(v), and the number of steps will simply affect how close this approximation is. Therefore, with very high  `nb_steps`, the resulting displacement will be close to what you would get from the smooth integral -- so not close to 0, but close to the analytical integration solution, and should have fewer folding voxels (0 in the limit of infinite steps). We do indeed find this empirically in the paper (see Fig 10 in https://arxiv.org/pdf/1903.03545.pdf). \r\n\r\nI'm not quite sure why the behaviour in the figure of @shuo-shuo-zhang is as it is, and I'm happy to help debug it. The first thing to make sure is that the `use_miccai_int` variable is set to `False`. Next, it would be great for @shuo-shuo-zhang to explain how he built that graph, exactly.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516597633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":2521280968,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUyMTI4MDk2OA==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521280968","actor":{"login":"Barnonewdm","id":22175925,"node_id":"MDQ6VXNlcjIyMTc1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/22175925?v=4","gravatar_id":"","url":"https://api.github.com/users/Barnonewdm","html_url":"https://github.com/Barnonewdm","followers_url":"https://api.github.com/users/Barnonewdm/followers","following_url":"https://api.github.com/users/Barnonewdm/following{/other_user}","gists_url":"https://api.github.com/users/Barnonewdm/gists{/gist_id}","starred_url":"https://api.github.com/users/Barnonewdm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Barnonewdm/subscriptions","organizations_url":"https://api.github.com/users/Barnonewdm/orgs","repos_url":"https://api.github.com/users/Barnonewdm/repos","events_url":"https://api.github.com/users/Barnonewdm/events{/privacy}","received_events_url":"https://api.github.com/users/Barnonewdm/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-30T21:12:00Z","performed_via_github_app":null},{"id":2521280969,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MjEyODA5Njk=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521280969","actor":{"login":"Barnonewdm","id":22175925,"node_id":"MDQ6VXNlcjIyMTc1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/22175925?v=4","gravatar_id":"","url":"https://api.github.com/users/Barnonewdm","html_url":"https://github.com/Barnonewdm","followers_url":"https://api.github.com/users/Barnonewdm/followers","following_url":"https://api.github.com/users/Barnonewdm/following{/other_user}","gists_url":"https://api.github.com/users/Barnonewdm/gists{/gist_id}","starred_url":"https://api.github.com/users/Barnonewdm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Barnonewdm/subscriptions","organizations_url":"https://api.github.com/users/Barnonewdm/orgs","repos_url":"https://api.github.com/users/Barnonewdm/repos","events_url":"https://api.github.com/users/Barnonewdm/events{/privacy}","received_events_url":"https://api.github.com/users/Barnonewdm/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-30T21:12:00Z","performed_via_github_app":null},{"id":2521280972,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUyMTI4MDk3Mg==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521280972","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-30T21:12:00Z","performed_via_github_app":null},{"id":2521280975,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MjEyODA5NzU=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2521280975","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-30T21:12:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516893175","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-516893175","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":516893175,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjg5MzE3NQ==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T15:13:36Z","updated_at":"2019-07-31T15:13:36Z","author_association":"NONE","body":"I have to prepare my answer and images, so I need some time, when I get them prepared, I'll put the details here.\r\n\r\nThank you very much!","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/516893175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517092993","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-517092993","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":517092993,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA5Mjk5Mw==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-08-01T02:27:13Z","updated_at":"2019-08-01T02:27:13Z","author_association":"NONE","body":"Dear Dr. Dalca,\r\nI'm sure I set the  use_miccai_int variable to False when training. I use the Colin27 template to align the ADNI images and perform almost the same  pre-processing steps with you except the histogram matching I use to reduce the gray scale gap of the Colin template and ADNI images.  For training details, I use the mse loss for warped image and fixed image, and L2 regularization loss for velocity field to make it smooth, the hyper-parameter ratio for the two is about 17. I use the Adam optimizer and train about 800 epochs and with ss of 8 nb_steps.  But during training, the standard deviation for each integration step is  very large,  the number I have shown in the figure above is a mean of 37 subjects and is almost 380, while the max is about 1000 and the min is 0, so the standard deviation is very large.\r\n\r\nThat is all that comes to mind and tell me if I missed something. Thank you very much!","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517092993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517093501","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-517093501","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":517093501,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA5MzUwMQ==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-08-01T02:29:54Z","updated_at":"2019-08-01T02:29:54Z","author_association":"COLLABORATOR","body":"Can you specify what you mean by L2 loss on the deformation field? This sounds like you changed the loss function from the default miccai loss?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517093501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517103597","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-517103597","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":517103597,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzEwMzU5Nw==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-08-01T03:27:13Z","updated_at":"2019-08-01T03:27:13Z","author_association":"NONE","body":"Dear Dr. Dalca,\r\nI just tried to increase the velocity field regularization parameter a lot, and the number of folding voxels decreased to almost 0, however the dice score also went down a lot. I don't know which one is more important, the dice score or the number of folding voxels, which one should I make sure is more accurate, the dice or the folding voxels? \r\n\r\nThank you very much!","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517103597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517104285","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-517104285","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":517104285,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzEwNDI4NQ==","user":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false},"created_at":"2019-08-01T03:31:02Z","updated_at":"2019-08-01T03:31:02Z","author_association":"NONE","body":"yes, I changed the kl_loss to the L2 regularization loss which a lot of people use to make the deformation field smooth. I think it is similar to the kl_loss.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517104285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shuo-shuo-zhang","id":50296395,"node_id":"MDQ6VXNlcjUwMjk2Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/50296395?v=4","gravatar_id":"","url":"https://api.github.com/users/shuo-shuo-zhang","html_url":"https://github.com/shuo-shuo-zhang","followers_url":"https://api.github.com/users/shuo-shuo-zhang/followers","following_url":"https://api.github.com/users/shuo-shuo-zhang/following{/other_user}","gists_url":"https://api.github.com/users/shuo-shuo-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/shuo-shuo-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuo-shuo-zhang/subscriptions","organizations_url":"https://api.github.com/users/shuo-shuo-zhang/orgs","repos_url":"https://api.github.com/users/shuo-shuo-zhang/repos","events_url":"https://api.github.com/users/shuo-shuo-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/shuo-shuo-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517106387","html_url":"https://github.com/voxelmorph/voxelmorph/issues/79#issuecomment-517106387","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/79","id":517106387,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzEwNjM4Nw==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2019-08-01T03:43:11Z","updated_at":"2019-08-01T03:43:11Z","author_association":"COLLABORATOR","body":"okay, you might want to mention the changes you made up front when you ask a question, it helps us figure out what's going on :)\r\n\r\nYou should be able to achieve both high Dice and nearly no folding\r\n\r\nLet's see -- my question was more what do you apply L2 to? the velocity mean? the velocity sample? The problem is that without a KL loss, I'm not quite sure why the variance wouldn't go to ~0 -- the gradients would point in that direction. Thus, I think it's best if you explain in detail what you changed.\r\n\r\nAlso, if you're changing losses and data, you might as well change MSE to NCC -- this will be more robust to changes in the data you have (but you'll need to tune parameters)","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/517106387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}}]