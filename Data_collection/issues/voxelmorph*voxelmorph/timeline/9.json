[{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/407620210","html_url":"https://github.com/voxelmorph/voxelmorph/issues/9#issuecomment-407620210","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/9","id":407620210,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzYyMDIxMA==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2018-07-25T03:15:42Z","updated_at":"2018-07-25T03:15:42Z","author_association":"COLLABORATOR","body":"I believe that we always used a single GPU \r\n(where did we say in the paper that we used multi-gpu?)\r\n\r\nEither way, I think the simplest way to use multi gpus is to use keras' direct support: https://keras.io/utils/#multi_gpu_model . Specifically, define the model in networks.py, then run `multi_gpu_model` to create a parallel model, then finally fit that model. Although not for voxelmorph, I've done this for other projects and it works well.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/407620210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":1751618059,"node_id":"MDExOkNsb3NlZEV2ZW50MTc1MTYxODA1OQ==","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/1751618059","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-07-25T03:15:46Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/407620955","html_url":"https://github.com/voxelmorph/voxelmorph/issues/9#issuecomment-407620955","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/9","id":407620955,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzYyMDk1NQ==","user":{"login":"nazib","id":14937060,"node_id":"MDQ6VXNlcjE0OTM3MDYw","avatar_url":"https://avatars.githubusercontent.com/u/14937060?v=4","gravatar_id":"","url":"https://api.github.com/users/nazib","html_url":"https://github.com/nazib","followers_url":"https://api.github.com/users/nazib/followers","following_url":"https://api.github.com/users/nazib/following{/other_user}","gists_url":"https://api.github.com/users/nazib/gists{/gist_id}","starred_url":"https://api.github.com/users/nazib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nazib/subscriptions","organizations_url":"https://api.github.com/users/nazib/orgs","repos_url":"https://api.github.com/users/nazib/repos","events_url":"https://api.github.com/users/nazib/events{/privacy}","received_events_url":"https://api.github.com/users/nazib/received_events","type":"User","site_admin":false},"created_at":"2018-07-25T03:20:58Z","updated_at":"2018-07-25T03:20:58Z","author_association":"NONE","body":"thanks","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/407620955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nazib","id":14937060,"node_id":"MDQ6VXNlcjE0OTM3MDYw","avatar_url":"https://avatars.githubusercontent.com/u/14937060?v=4","gravatar_id":"","url":"https://api.github.com/users/nazib","html_url":"https://github.com/nazib","followers_url":"https://api.github.com/users/nazib/followers","following_url":"https://api.github.com/users/nazib/following{/other_user}","gists_url":"https://api.github.com/users/nazib/gists{/gist_id}","starred_url":"https://api.github.com/users/nazib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nazib/subscriptions","organizations_url":"https://api.github.com/users/nazib/orgs","repos_url":"https://api.github.com/users/nazib/repos","events_url":"https://api.github.com/users/nazib/events{/privacy}","received_events_url":"https://api.github.com/users/nazib/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/446566888","html_url":"https://github.com/voxelmorph/voxelmorph/issues/9#issuecomment-446566888","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/9","id":446566888,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjU2Njg4OA==","user":{"login":"meggiezhou","id":36956590,"node_id":"MDQ6VXNlcjM2OTU2NTkw","avatar_url":"https://avatars.githubusercontent.com/u/36956590?v=4","gravatar_id":"","url":"https://api.github.com/users/meggiezhou","html_url":"https://github.com/meggiezhou","followers_url":"https://api.github.com/users/meggiezhou/followers","following_url":"https://api.github.com/users/meggiezhou/following{/other_user}","gists_url":"https://api.github.com/users/meggiezhou/gists{/gist_id}","starred_url":"https://api.github.com/users/meggiezhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meggiezhou/subscriptions","organizations_url":"https://api.github.com/users/meggiezhou/orgs","repos_url":"https://api.github.com/users/meggiezhou/repos","events_url":"https://api.github.com/users/meggiezhou/events{/privacy}","received_events_url":"https://api.github.com/users/meggiezhou/received_events","type":"User","site_admin":false},"created_at":"2018-12-12T12:13:04Z","updated_at":"2018-12-12T12:13:04Z","author_association":"NONE","body":"Hi sir , I want to run the train.py with multi-gpu , but the commend line  ''assert np.mod(batch_size, nb_gpus) == 0, \\\r\n        'batch_size should be a multiple of the nr. of gpus. ' + \\\r\n        'Got batch_size %d, %d gpus' % (batch_size, nb_gpus)'' get wrong with output\r\nloading /data/zhoumeiqi/voxelmorph-master/models/cvpr2018_vm2_l2.h5\r\nTraceback (most recent call last):\r\n  File \"/data/zhoumeiqi/voxelmorph-master/src/train.py\", line 189, in <module>\r\n    train(**vars(args))\r\n  File \"/data/zhoumeiqi/voxelmorph-master/src/train.py\", line 115, in train\r\n    'Got batch_size %d, %d gpus' % (batch_size, nb_gpus)\r\nAssertionError: batch_size should be a multiple of the nr. of gpus. Got batch_size 1, 2 gpus\r\ncould you tell me how to solve the problem?\r\nthank you ","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/446566888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"meggiezhou","id":36956590,"node_id":"MDQ6VXNlcjM2OTU2NTkw","avatar_url":"https://avatars.githubusercontent.com/u/36956590?v=4","gravatar_id":"","url":"https://api.github.com/users/meggiezhou","html_url":"https://github.com/meggiezhou","followers_url":"https://api.github.com/users/meggiezhou/followers","following_url":"https://api.github.com/users/meggiezhou/following{/other_user}","gists_url":"https://api.github.com/users/meggiezhou/gists{/gist_id}","starred_url":"https://api.github.com/users/meggiezhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meggiezhou/subscriptions","organizations_url":"https://api.github.com/users/meggiezhou/orgs","repos_url":"https://api.github.com/users/meggiezhou/repos","events_url":"https://api.github.com/users/meggiezhou/events{/privacy}","received_events_url":"https://api.github.com/users/meggiezhou/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/446671502","html_url":"https://github.com/voxelmorph/voxelmorph/issues/9#issuecomment-446671502","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/9","id":446671502,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjY3MTUwMg==","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2018-12-12T17:25:11Z","updated_at":"2018-12-12T17:25:11Z","author_association":"COLLABORATOR","body":"When using multiple GPUs, you need to feed in a batch size that is a multiple of the number of GPUs (so that the model can split the data across GPUs). \r\nSo, if you have 2 gpus, set the batch size to 2.","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/446671502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"id":2319176313,"node_id":"MDEyOkxhYmVsZWRFdmVudDIzMTkxNzYzMTM=","url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/events/2319176313","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-05-04T18:21:09Z","label":{"name":"voxelmorph","color":"1d76db"},"performed_via_github_app":null}]