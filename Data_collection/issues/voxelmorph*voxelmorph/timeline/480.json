[{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/1273981619","html_url":"https://github.com/voxelmorph/voxelmorph/issues/480#issuecomment-1273981619","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/480","id":1273981619,"node_id":"IC_kwDOB_Nd285L72qz","user":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"created_at":"2022-10-11T01:45:12Z","updated_at":"2022-10-11T01:45:12Z","author_association":"COLLABORATOR","body":"I believe mri_robust_register was developed mainly for neuroimaging so I'm not sure it owuld work here. Perhaps try [ANTs](https://github.com/ANTsX/ANTsPy) or Niftireg?\r\n\r\nAs I think I mentioned in the other chat, though, this really doesn't feel like an issue with the field to me, but something baout the voxel intensities/type.\r\n\r\nCan you try running vxm with higher regularization, such that the fields are overly smooth -- how does the moved image look like?","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/1273981619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/1275259245","html_url":"https://github.com/voxelmorph/voxelmorph/issues/480#issuecomment-1275259245","issue_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/480","id":1275259245,"node_id":"IC_kwDOB_Nd285MAult","user":{"login":"bhosalems","id":10846405,"node_id":"MDQ6VXNlcjEwODQ2NDA1","avatar_url":"https://avatars.githubusercontent.com/u/10846405?v=4","gravatar_id":"","url":"https://api.github.com/users/bhosalems","html_url":"https://github.com/bhosalems","followers_url":"https://api.github.com/users/bhosalems/followers","following_url":"https://api.github.com/users/bhosalems/following{/other_user}","gists_url":"https://api.github.com/users/bhosalems/gists{/gist_id}","starred_url":"https://api.github.com/users/bhosalems/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhosalems/subscriptions","organizations_url":"https://api.github.com/users/bhosalems/orgs","repos_url":"https://api.github.com/users/bhosalems/repos","events_url":"https://api.github.com/users/bhosalems/events{/privacy}","received_events_url":"https://api.github.com/users/bhosalems/received_events","type":"User","site_admin":false},"created_at":"2022-10-11T20:48:40Z","updated_at":"2022-10-11T20:53:24Z","author_association":"NONE","body":"I was able to register with mri_register, and I could verify it by visualizing it in  ITKsnap. I then trained on affinely aligned volumes with the preprocessing [from this paper](https://github.com/cheng-01037/Self-supervised-Fewshot-Medical-Image-Segmentation/tree/master/data/CHAOST2 ) and DIce score looks better, but I still do see drop somehow after 50 Epochs, and drops suddenly around 200 epochs.\r\n![image](https://user-images.githubusercontent.com/10846405/195194850-2826bdcd-90ff-4170-9995-53c577c8ed13.png)\r\nAlthough similarity loss decreases,\r\n![image](https://user-images.githubusercontent.com/10846405/195195021-e2d59294-e650-4a05-9c27-5c14b585083a.png)\r\nBut I do see the rise in the gradient loss around similar epochs,\r\n![image](https://user-images.githubusercontent.com/10846405/195195278-632aef3d-00ab-49db-8b4f-5405890231da.png)\r\nSo I think I should tune the regularization of the gradient loss.\r\n\r\nWarped images do look smoother now (although outside volume artifacts are not completely eliminated, particularly when warped at later epochs),\r\nFixed image\r\n![image](https://user-images.githubusercontent.com/10846405/195195837-59e92347-4e4e-48d4-8bdb-2412df81fd44.png)\r\nMoving warped image\r\n![image](https://user-images.githubusercontent.com/10846405/195195963-a835a6ee-2f8e-41dc-9e72-4d16870b4aed.png)\r\nCorresponding flow -\r\n![e498idx18_m39f2grid_flow](https://user-images.githubusercontent.com/10846405/195196128-e794fd5a-6331-47ff-8cd5-482491b99cf7.png)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/comments/1275259245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bhosalems","id":10846405,"node_id":"MDQ6VXNlcjEwODQ2NDA1","avatar_url":"https://avatars.githubusercontent.com/u/10846405?v=4","gravatar_id":"","url":"https://api.github.com/users/bhosalems","html_url":"https://github.com/bhosalems","followers_url":"https://api.github.com/users/bhosalems/followers","following_url":"https://api.github.com/users/bhosalems/following{/other_user}","gists_url":"https://api.github.com/users/bhosalems/gists{/gist_id}","starred_url":"https://api.github.com/users/bhosalems/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhosalems/subscriptions","organizations_url":"https://api.github.com/users/bhosalems/orgs","repos_url":"https://api.github.com/users/bhosalems/repos","events_url":"https://api.github.com/users/bhosalems/events{/privacy}","received_events_url":"https://api.github.com/users/bhosalems/received_events","type":"User","site_admin":false}}]