{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/270","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/270/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/270/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/270/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/270","id":805373160,"node_id":"MDU6SXNzdWU4MDUzNzMxNjA=","number":270,"title":"Problem running training_unsupervised_seg.py / missing package used in test_unsupervised_seg.py?","user":{"login":"StylianosChatzichronis","id":52251860,"node_id":"MDQ6VXNlcjUyMjUxODYw","avatar_url":"https://avatars.githubusercontent.com/u/52251860?v=4","gravatar_id":"","url":"https://api.github.com/users/StylianosChatzichronis","html_url":"https://github.com/StylianosChatzichronis","followers_url":"https://api.github.com/users/StylianosChatzichronis/followers","following_url":"https://api.github.com/users/StylianosChatzichronis/following{/other_user}","gists_url":"https://api.github.com/users/StylianosChatzichronis/gists{/gist_id}","starred_url":"https://api.github.com/users/StylianosChatzichronis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StylianosChatzichronis/subscriptions","organizations_url":"https://api.github.com/users/StylianosChatzichronis/orgs","repos_url":"https://api.github.com/users/StylianosChatzichronis/repos","events_url":"https://api.github.com/users/StylianosChatzichronis/events{/privacy}","received_events_url":"https://api.github.com/users/StylianosChatzichronis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-02-10T10:17:13Z","updated_at":"2021-03-24T18:28:12Z","closed_at":"2021-03-24T18:28:12Z","author_association":"NONE","active_lock_reason":null,"body":"**Task**\r\nRun the script 'training_unsupervised_seg.py'.\r\n\r\nIn kaggle I get the Error:\r\n![image](https://user-images.githubusercontent.com/52251860/107493688-9391bb80-6b96-11eb-877b-f393fd5686b0.png)\r\n\r\n\r\n\r\nIn PC l had the error : \r\n![image](https://user-images.githubusercontent.com/52251860/107494368-5ed23400-6b97-11eb-90ca-6deab7fe5666.png)\r\n\r\n\r\nI had batch size=1 (Default) \r\nI changed the lines in files \"train_unsupervised_seg.py\" and \"voxelmorph/networks.py\"\r\n\"import tensorflow as tf\"\r\nto\r\n\"import tensorflow.compat.v1 as tf\r\ntf.disable_v2_behavior()\"\r\nin order to have compatibility . I only had a few warnings of deprecation\r\n\r\n**What have I tried**\r\nI tried this command in kaggle\r\nrun ../input/test-sc/train_unsupervised_seg.py ../input/npz-files --atlas ../input/atlas-input/prob_atlas.npz\r\n\r\nI had crop the images into (160,192,224) as mentioned and normalized the intensity values by divinding via 255.\r\nLater I have cropped both images and atlas to (160,160,160) but I had the same errors.\r\n\r\n**Details of experiments**\r\nI run both in kaggle (in GPU accelerator) and in my PC (CPU, i dont have nvidia GPU) \r\n\r\nkaggle:\r\nGPU 16 GB\r\nCPU 12 GB\r\nTensorflow 2.4.0\r\n\r\nPc:\r\nCPU 16 GB\r\nTensorflow 2.4.1\r\nkeras 2.3.1\r\n\r\n------------------------------------------------------------------------------------------------------\r\nHave I done something wrong? If not, I could find a trained model to import to test_unsupervised_seg.py. In older \r\nversions of script it is mentioned a \"../models/unified_hardcodedstats_lambda_0.01_lr_0.001/60.h5\". Is it available on\r\nkaggle? \r\nAlso, in test_unsupervised_seg.py the line 89 \r\n\" warped = vxm.tf.ne.transform(input_atlas, input_flow, interp_method='linear', indexing='ij')\" \r\nseems wrong as there is no ne module in vxm.\r\n\r\n\r\nEdit:\r\nI changed line 89 in test_unsupervised_seg.py into \"warped = vxm.tf.utils.transform(input_atlas, input_flow, interp_method='linear', indexing='ij')\" .Is that right? \r\n","closed_by":{"login":"StylianosChatzichronis","id":52251860,"node_id":"MDQ6VXNlcjUyMjUxODYw","avatar_url":"https://avatars.githubusercontent.com/u/52251860?v=4","gravatar_id":"","url":"https://api.github.com/users/StylianosChatzichronis","html_url":"https://github.com/StylianosChatzichronis","followers_url":"https://api.github.com/users/StylianosChatzichronis/followers","following_url":"https://api.github.com/users/StylianosChatzichronis/following{/other_user}","gists_url":"https://api.github.com/users/StylianosChatzichronis/gists{/gist_id}","starred_url":"https://api.github.com/users/StylianosChatzichronis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StylianosChatzichronis/subscriptions","organizations_url":"https://api.github.com/users/StylianosChatzichronis/orgs","repos_url":"https://api.github.com/users/StylianosChatzichronis/repos","events_url":"https://api.github.com/users/StylianosChatzichronis/events{/privacy}","received_events_url":"https://api.github.com/users/StylianosChatzichronis/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/270/timeline","performed_via_github_app":null,"state_reason":"completed"}