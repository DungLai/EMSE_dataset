{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/47","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/47/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/47/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/47/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/47","id":441673933,"node_id":"MDU6SXNzdWU0NDE2NzM5MzM=","number":47,"title":"problem on register.py","user":{"login":"AFEI31","id":27017552,"node_id":"MDQ6VXNlcjI3MDE3NTUy","avatar_url":"https://avatars.githubusercontent.com/u/27017552?v=4","gravatar_id":"","url":"https://api.github.com/users/AFEI31","html_url":"https://github.com/AFEI31","followers_url":"https://api.github.com/users/AFEI31/followers","following_url":"https://api.github.com/users/AFEI31/following{/other_user}","gists_url":"https://api.github.com/users/AFEI31/gists{/gist_id}","starred_url":"https://api.github.com/users/AFEI31/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AFEI31/subscriptions","organizations_url":"https://api.github.com/users/AFEI31/orgs","repos_url":"https://api.github.com/users/AFEI31/repos","events_url":"https://api.github.com/users/AFEI31/events{/privacy}","received_events_url":"https://api.github.com/users/AFEI31/received_events","type":"User","site_admin":false},"labels":[{"id":1347467145,"node_id":"MDU6TGFiZWwxMzQ3NDY3MTQ1","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/voxelmorph","name":"voxelmorph","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-05-08T10:54:38Z","updated_at":"2019-05-08T12:44:50Z","closed_at":"2019-05-08T11:24:02Z","author_association":"NONE","active_lock_reason":null,"body":"when runing `register.py` on my training result  `/data/afei/voxelmorph/models/models_1/1500.h5`,the error is : \r\n\r\n    Traceback (most recent call last):\r\n      File \"/data/afei/voxelmorph/src/register.py\", line 165, in <module>\r\n        register(**vars(args))\r\n      File \"/data/afei/voxelmorph/src/register.py\", line 89, in register\r\n        net = keras.models.load_model(model_file, custom_objects=custom_layers)\r\n      File \"/data/home/amaxcuda8/anaconda2/envs/afei_py35/lib/python3.5/site-packages/keras/models.py\", line 301, in load_model\r\n        sample_weight_mode=sample_weight_mode)\r\n      File \"/data/home/amaxcuda8/anaconda2/envs/afei_py35/lib/python3.5/site-packages/keras/engine/training.py\", line 841, in compile\r\n        sample_weight, mask)\r\n      File \"/data/home/amaxcuda8/anaconda2/envs/afei_py35/lib/python3.5/site-packages/keras/engine/training.py\", line 434, in weighted\r\n        score_array = fn(y_true, y_pred)\r\n    TypeError: recon_loss() missing 1 required positional argument: 'y_pred'\r\n\r\nAfter adding `recon_loss` and `kl_loss()`,\r\n\r\n    #parameter in recon_loss and kl_loss\r\n    vol_size = [160,192,224]\r\n    nf_enc = [16,32,32,32]\r\n    nf_dec = [32,32,32,32,16,3]\r\n    model = networks.miccai2018_net(vol_size, nf_enc, nf_dec, bidir=bidir)\r\n    flow_vol_shape = model.outputs[-1].shape[1:-1]\r\n    loss_class = losses.Miccai2018(image_sigma, prior_lambda, flow_vol_shape=flow_vol_shape)\r\n    #import loss of src/losses\r\n    custom_layers = {'SpatialTransformer':nrn_layers.SpatialTransformer,\r\n                     'VecInt':nrn_layers.VecInt,\r\n                     'Sample':networks.Sample,\r\n                     'Rescale':networks.RescaleDouble,\r\n                     'Resize':networks.ResizeDouble,\r\n                     'Negate':networks.Negate,\r\n                     # afei\r\n                     # 'recon_loss':losses.Miccai2018.recon_loss,\r\n                     # 'kl_loss':losses.Miccai2018.kl_loss}\r\n                     'recon_loss':loss_class.recon_loss,\r\n                     'kl_loss':loss_class.kl_loss}\r\n\r\nAnd I find in another terminal(run `ps a`):\r\nBegianing is :\r\n\r\n     PID TTY      STAT   TIME COMMAND\r\n    24654 pts/42   Rl+    1:29 python /data/afei/voxelmorph/src/register.py --gpu 3 /data/afei/voxelm...\r\nfinally there is  in terminal :\r\n\r\n    Using TensorFlow backend.\r\n    '''\r\n    some thing about gpu\r\n    '''\r\n    <module 'keras.losses' from '/data/home/amaxcuda8/anaconda2/envs/afei_py35/lib/python3.5/site-packages/keras/losses.py'>\r\nin another terminal :\r\n\r\n     PID TTY      STAT   TIME COMMAND\r\n    24654 pts/42   Sl+    6:16 python /data/afei/voxelmorph/src/register.py --gpu 3 /data/afei/voxelm...\r\n\r\nNow, I want to know can you offer another `register.py` or give some advise.\r\n","closed_by":{"login":"AFEI31","id":27017552,"node_id":"MDQ6VXNlcjI3MDE3NTUy","avatar_url":"https://avatars.githubusercontent.com/u/27017552?v=4","gravatar_id":"","url":"https://api.github.com/users/AFEI31","html_url":"https://github.com/AFEI31","followers_url":"https://api.github.com/users/AFEI31/followers","following_url":"https://api.github.com/users/AFEI31/following{/other_user}","gists_url":"https://api.github.com/users/AFEI31/gists{/gist_id}","starred_url":"https://api.github.com/users/AFEI31/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AFEI31/subscriptions","organizations_url":"https://api.github.com/users/AFEI31/orgs","repos_url":"https://api.github.com/users/AFEI31/repos","events_url":"https://api.github.com/users/AFEI31/events{/privacy}","received_events_url":"https://api.github.com/users/AFEI31/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/47/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/47/timeline","performed_via_github_app":null,"state_reason":"completed"}