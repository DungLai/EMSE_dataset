{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/317","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/317/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/317/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/317/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/317","id":912158395,"node_id":"MDU6SXNzdWU5MTIxNTgzOTU=","number":317,"title":"issue with hypermorph","user":{"login":"daxuemi","id":81818702,"node_id":"MDQ6VXNlcjgxODE4NzAy","avatar_url":"https://avatars.githubusercontent.com/u/81818702?v=4","gravatar_id":"","url":"https://api.github.com/users/daxuemi","html_url":"https://github.com/daxuemi","followers_url":"https://api.github.com/users/daxuemi/followers","following_url":"https://api.github.com/users/daxuemi/following{/other_user}","gists_url":"https://api.github.com/users/daxuemi/gists{/gist_id}","starred_url":"https://api.github.com/users/daxuemi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxuemi/subscriptions","organizations_url":"https://api.github.com/users/daxuemi/orgs","repos_url":"https://api.github.com/users/daxuemi/repos","events_url":"https://api.github.com/users/daxuemi/events{/privacy}","received_events_url":"https://api.github.com/users/daxuemi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"ahoopes","id":24280487,"node_id":"MDQ6VXNlcjI0MjgwNDg3","avatar_url":"https://avatars.githubusercontent.com/u/24280487?v=4","gravatar_id":"","url":"https://api.github.com/users/ahoopes","html_url":"https://github.com/ahoopes","followers_url":"https://api.github.com/users/ahoopes/followers","following_url":"https://api.github.com/users/ahoopes/following{/other_user}","gists_url":"https://api.github.com/users/ahoopes/gists{/gist_id}","starred_url":"https://api.github.com/users/ahoopes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahoopes/subscriptions","organizations_url":"https://api.github.com/users/ahoopes/orgs","repos_url":"https://api.github.com/users/ahoopes/repos","events_url":"https://api.github.com/users/ahoopes/events{/privacy}","received_events_url":"https://api.github.com/users/ahoopes/received_events","type":"User","site_admin":false},"assignees":[{"login":"ahoopes","id":24280487,"node_id":"MDQ6VXNlcjI0MjgwNDg3","avatar_url":"https://avatars.githubusercontent.com/u/24280487?v=4","gravatar_id":"","url":"https://api.github.com/users/ahoopes","html_url":"https://github.com/ahoopes","followers_url":"https://api.github.com/users/ahoopes/followers","following_url":"https://api.github.com/users/ahoopes/following{/other_user}","gists_url":"https://api.github.com/users/ahoopes/gists{/gist_id}","starred_url":"https://api.github.com/users/ahoopes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahoopes/subscriptions","organizations_url":"https://api.github.com/users/ahoopes/orgs","repos_url":"https://api.github.com/users/ahoopes/repos","events_url":"https://api.github.com/users/ahoopes/events{/privacy}","received_events_url":"https://api.github.com/users/ahoopes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2021-06-05T08:46:30Z","updated_at":"2022-05-23T18:28:15Z","closed_at":"2022-05-23T18:28:15Z","author_association":"NONE","active_lock_reason":null,"body":"dear professor,\r\n  Considering that you haven't provided **test_hypermorph.py** yet to calculate dice score, we try to implement this code ourselves under your guidance.([voxelmorph/voxelmorph/issues/293])\r\n   Our implementation as follows:\r\n```python\r\n         for hyp_n, hyp_lambda in enumerate(np.linspace(0, 1, 20)):\r\n              hyp = np.array([[hyp_lambda]], dtype='float32')\r\n              # predict and apply transform\r\n              warp = registration_model.predict([moving_vol, atlas_vol, hyp])[0]\r\n              print(\"warp.shape = \", warp.shape)\r\n              # warp_vol = nib.Nifti1Image(warp, fix.affine)\r\n              # nib.save(warp_vol, \"wrap1\")\r\n              warped_seg = transform_model.predict([moving_seg, warp]).squeeze()\r\n              # compute volume overlap (dice)\r\n              overlap = vxm.py.utils.dice(warped_seg, atlas_seg, labels=labels)\r\n```\r\nhowever, we got the error as follows:   \r\n\r\nthis line : `warped_seg = transform_model.predict([moving_seg, warp]).squeeze()`\r\n\r\n Model was constructed with shape (None, 160, 192, 224, 3) for input KerasTensor(type_spec=TensorSpec(shape=(None, 160, 192, 224, 3), dtype=tf.float32, name='trf_input'), name='trf_input', description=\"created by layer 'trf_input'\"), but it was called on an input with incompatible shape (None, 160, 192, 224, 1).\r\n\r\n We dont know what happened since it seems that  there's nothing wrong with our process. so we need your help. We would be grateful if you could help us to analyze the possible causes. thank you professorÔºÅ\r\n\r\nWe will share our  implement code to test hypermorph later if the problem is solved. \r\n\r\n At the same time, we are looking forward to your release of the official version of  ` test_hypermorph.py ` so that we can use hypermorph more easily\r\n\r\n   ","closed_by":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/317/timeline","performed_via_github_app":null,"state_reason":"completed"}