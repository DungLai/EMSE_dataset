{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/302","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/302/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/302/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/302/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/302","id":870616514,"node_id":"MDU6SXNzdWU4NzA2MTY1MTQ=","number":302,"title":"Super big l2 norm of dvf gradient","user":{"login":"XXZhou25","id":48270633,"node_id":"MDQ6VXNlcjQ4MjcwNjMz","avatar_url":"https://avatars.githubusercontent.com/u/48270633?v=4","gravatar_id":"","url":"https://api.github.com/users/XXZhou25","html_url":"https://github.com/XXZhou25","followers_url":"https://api.github.com/users/XXZhou25/followers","following_url":"https://api.github.com/users/XXZhou25/following{/other_user}","gists_url":"https://api.github.com/users/XXZhou25/gists{/gist_id}","starred_url":"https://api.github.com/users/XXZhou25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XXZhou25/subscriptions","organizations_url":"https://api.github.com/users/XXZhou25/orgs","repos_url":"https://api.github.com/users/XXZhou25/repos","events_url":"https://api.github.com/users/XXZhou25/events{/privacy}","received_events_url":"https://api.github.com/users/XXZhou25/received_events","type":"User","site_admin":false},"labels":[{"id":1347467145,"node_id":"MDU6TGFiZWwxMzQ3NDY3MTQ1","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/voxelmorph","name":"voxelmorph","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":33,"created_at":"2021-04-29T05:10:08Z","updated_at":"2021-05-23T00:45:24Z","closed_at":"2021-04-30T16:22:55Z","author_association":"NONE","active_lock_reason":null,"body":"**Task** (what are you trying to do/register?)\r\n\r\nlung CTs\r\n\r\n**What have you tried**\r\n\r\nVoxelmorph with MSE/NCC as loss and l2 norm of dvf gradient as regularization. \r\n\r\n**Details of experiments**\r\nI did data standardization(zscore normalization with mean and std) before training. \r\n\r\nMSE + l2 norm of dvf gradient worked fine, as my expectation.  \r\nBut NCC + l2 norm of dvf gradient didn't work as expected. NCC was within reasonable range which is about -1~0, but l2 norm of dvf gradient was as large as hundreds. High dvf gradients mean that most of voxels' displacements are out of image, resulting in an almost blank registered moving image (interpolation will fill out-of-boundary voxels with intensity = 0).\r\n\r\nBut I used another piece of code, NCC + l2 norm of dvf gradient worked normally. \r\nbtw, loss weight = [1, 0.5]\r\nI was wondering if you have any insights about why? \r\n\r\nThis is quite straight forward, computing the gradients based on Taylor expansion, which will be the difference between neighboring voxels. \r\nI will really appreciate if you have any suggestions! \r\n","closed_by":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/302/timeline","performed_via_github_app":null,"state_reason":"completed"}