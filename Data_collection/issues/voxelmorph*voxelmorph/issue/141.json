{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/141","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/141/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/141/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/141/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/141","id":552239886,"node_id":"MDU6SXNzdWU1NTIyMzk4ODY=","number":141,"title":"Gradient Regularizer","user":{"login":"tychovdo","id":1726201,"node_id":"MDQ6VXNlcjE3MjYyMDE=","avatar_url":"https://avatars.githubusercontent.com/u/1726201?v=4","gravatar_id":"","url":"https://api.github.com/users/tychovdo","html_url":"https://github.com/tychovdo","followers_url":"https://api.github.com/users/tychovdo/followers","following_url":"https://api.github.com/users/tychovdo/following{/other_user}","gists_url":"https://api.github.com/users/tychovdo/gists{/gist_id}","starred_url":"https://api.github.com/users/tychovdo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tychovdo/subscriptions","organizations_url":"https://api.github.com/users/tychovdo/orgs","repos_url":"https://api.github.com/users/tychovdo/repos","events_url":"https://api.github.com/users/tychovdo/events{/privacy}","received_events_url":"https://api.github.com/users/tychovdo/received_events","type":"User","site_admin":false},"labels":[{"id":1347467145,"node_id":"MDU6TGFiZWwxMzQ3NDY3MTQ1","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/voxelmorph","name":"voxelmorph","color":"1d76db","default":false,"description":""},{"id":1512756635,"node_id":"MDU6TGFiZWwxNTEyNzU2NjM1","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/pytorch","name":"pytorch","color":"e51206","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-20T11:25:25Z","updated_at":"2020-01-21T07:54:53Z","closed_at":"2020-01-20T17:57:08Z","author_association":"NONE","active_lock_reason":null,"body":"Dear Dalca, (and other authors/contributors)\r\n\r\nFirst of all, thank you for your contributions to DL-based registration methods. I really enjoyed multiple of your papers and especially like the fact that the methods are provided in a clear variational framework.\r\n\r\n\r\nI am currently trying to understand the Voxelmorph paper and have a question about some details in your implementation. If I understand correctly, the zero-mean normal prior on the velocity field z results in a KL divergence which contains a L2 norm on the vectors in the field. Intuitively this makes sense to me, as you thereby directly penalize (possibly unnecessarily) warping of voxels.\r\n\r\nHowever, in your code it seems that this penalty is not applied on the field directly, but on its approximated gradients by first substracting the same field with a small offset:\r\nhttps://github.com/voxelmorph/voxelmorph/blob/7f289b3613bdbccfdb4c1eff3fbff29710a65680/pytorch/losses.py#L14-L16\r\n\r\nI am wondering how this 'gradient_loss' is derived and why this might be better than applying the L2 norm on the velocity field directly?\r\n\r\nTo me, penalizing larger values/norms in the velocity field seems a desirable property which you seem to lose in this 'gradient_loss'.\r\n\r\n\r\nLooking forward to your reply.\r\n\r\nBest regards,\r\nTycho van der Ouderaa","closed_by":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/141/timeline","performed_via_github_app":null,"state_reason":"completed"}