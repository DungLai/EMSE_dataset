{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/97","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/97/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/97/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/97/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/97","id":487892543,"node_id":"MDU6SXNzdWU0ODc4OTI1NDM=","number":97,"title":"ValueError: Unknown loss function:loss","user":{"login":"takerujason","id":33355267,"node_id":"MDQ6VXNlcjMzMzU1MjY3","avatar_url":"https://avatars.githubusercontent.com/u/33355267?v=4","gravatar_id":"","url":"https://api.github.com/users/takerujason","html_url":"https://github.com/takerujason","followers_url":"https://api.github.com/users/takerujason/followers","following_url":"https://api.github.com/users/takerujason/following{/other_user}","gists_url":"https://api.github.com/users/takerujason/gists{/gist_id}","starred_url":"https://api.github.com/users/takerujason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/takerujason/subscriptions","organizations_url":"https://api.github.com/users/takerujason/orgs","repos_url":"https://api.github.com/users/takerujason/repos","events_url":"https://api.github.com/users/takerujason/events{/privacy}","received_events_url":"https://api.github.com/users/takerujason/received_events","type":"User","site_admin":false},"labels":[{"id":1347467145,"node_id":"MDU6TGFiZWwxMzQ3NDY3MTQ1","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/voxelmorph","name":"voxelmorph","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-09-01T14:28:42Z","updated_at":"2019-10-15T08:30:41Z","closed_at":"2019-09-03T03:39:17Z","author_association":"NONE","active_lock_reason":null,"body":"Hi @adalca ,\r\n\r\nI have trained my own model `05.h5` via `train.py`(cvpr version), but when it used in `python register.py --gpu 0 ../test_vol.nii.gz ../atlas_norm.nii.gz --out_img ../wrap.nii.gz --model_file ../models/05.h5 `and an error occurred.\r\n\r\n```\r\n(voxelmorph) jasonfu@jasonfu-Z370-HD3:~/voxelmorph/src$ python register.py --gpu 0 ../IXI001.nii.gz ../atlas_norm.nii.gz --out_img ../wrap.nii.gz --model_file ../models/05.h5 \r\nUsing TensorFlow backend.\r\n2019-09-01 21:06:02.075134: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-09-01 21:06:02.144359: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-09-01 21:06:02.144634: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1356] Found device 0 with properties: \r\nname: GeForce GTX 1070 major: 6 minor: 1 memoryClockRate(GHz): 1.7845\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.93GiB freeMemory: 7.74GiB\r\n2019-09-01 21:06:02.144647: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1435] Adding visible gpu devices: 0\r\n2019-09-01 21:06:02.373578: I tensorflow/core/common_runtime/gpu/gpu_device.cc:923] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-09-01 21:06:02.373604: I tensorflow/core/common_runtime/gpu/gpu_device.cc:929]      0 \r\n2019-09-01 21:06:02.373610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:942] 0:   N \r\n2019-09-01 21:06:02.373697: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1053] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7477 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1070, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\nTraceback (most recent call last):\r\n  File \"register.py\", line 104, in <module>\r\n    register(**vars(args))\r\n  File \"register.py\", line 67, in register\r\n    net = keras.models.load_model(model_file, custom_objects=custom_objects)\r\n  File \"/home/jasonfu/anaconda3/envs/voxelmorph/lib/python3.6/site-packages/keras/models.py\", line 301, in load_model\r\n    sample_weight_mode=sample_weight_mode)\r\n  File \"/home/jasonfu/anaconda3/envs/voxelmorph/lib/python3.6/site-packages/keras/engine/training.py\", line 634, in compile\r\n    loss_functions = [losses.get(l) for l in loss]\r\n  File \"/home/jasonfu/anaconda3/envs/voxelmorph/lib/python3.6/site-packages/keras/engine/training.py\", line 634, in <listcomp>\r\n    loss_functions = [losses.get(l) for l in loss]\r\n  File \"/home/jasonfu/anaconda3/envs/voxelmorph/lib/python3.6/site-packages/keras/losses.py\", line 122, in get\r\n    return deserialize(identifier)\r\n  File \"/home/jasonfu/anaconda3/envs/voxelmorph/lib/python3.6/site-packages/keras/losses.py\", line 114, in deserialize\r\n    printable_module_name='loss function')\r\n  File \"/home/jasonfu/anaconda3/envs/voxelmorph/lib/python3.6/site-packages/keras/utils/generic_utils.py\", line 164, in deserialize_keras_object\r\n    ':' + function_name)\r\nValueError: Unknown loss function:loss\r\n```\r\nI\r\n","closed_by":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/97/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/97/timeline","performed_via_github_app":null,"state_reason":"completed"}