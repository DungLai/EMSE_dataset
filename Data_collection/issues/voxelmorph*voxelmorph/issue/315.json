{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/315","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/315/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/315/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/315/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/315","id":899738720,"node_id":"MDU6SXNzdWU4OTk3Mzg3MjA=","number":315,"title":"ValueError when trianing voxelmorph on my own 2 d dataset","user":{"login":"1299246210","id":82441427,"node_id":"MDQ6VXNlcjgyNDQxNDI3","avatar_url":"https://avatars.githubusercontent.com/u/82441427?v=4","gravatar_id":"","url":"https://api.github.com/users/1299246210","html_url":"https://github.com/1299246210","followers_url":"https://api.github.com/users/1299246210/followers","following_url":"https://api.github.com/users/1299246210/following{/other_user}","gists_url":"https://api.github.com/users/1299246210/gists{/gist_id}","starred_url":"https://api.github.com/users/1299246210/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1299246210/subscriptions","organizations_url":"https://api.github.com/users/1299246210/orgs","repos_url":"https://api.github.com/users/1299246210/repos","events_url":"https://api.github.com/users/1299246210/events{/privacy}","received_events_url":"https://api.github.com/users/1299246210/received_events","type":"User","site_admin":false},"labels":[{"id":1347467145,"node_id":"MDU6TGFiZWwxMzQ3NDY3MTQ1","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/voxelmorph","name":"voxelmorph","color":"1d76db","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2021-05-24T14:57:22Z","updated_at":"2021-05-25T16:40:58Z","closed_at":"2021-05-25T16:40:58Z","author_association":"NONE","active_lock_reason":null,"body":"**Task** (what are you trying to do/register?)\r\n\r\nHi, I want to use vxm to train a model to register 2-D photos of high-speed railway Chassis images(gray),Resolution is 20688x1120. my tf is 2.3.0  ,Use the branch: master. Since I'm new to this,I don't know how to slove it. Thanks a lot.\r\n\r\n**What have you tried**\r\n\r\nI converted the JPG file to NPZ, and use them to train a model .\r\n Using the command :  python train.py  C:\\Users\\12992\\vox1\\input  --model-dir  C:\\Users\\12992\\vox1\\output\r\n\r\n**Details of experiments**\r\n\r\nI get errors:\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Negative dimension size caused by subtracting 2 from 1 for '{{node unet_enc_pooling_0/MaxPool3D}} = MaxPool3D[T=DT_FLOAT, data_format=\"NDHWC\", ksize=[1, 2, 2, 2, 1], padding=\"VALID\", strides=[1, 2, 2, 2, 1]](unet_enc_conv_0_0_activation/LeakyRelu)' with input shapes: [?,1,1120,20688,16].\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 96, in <module>\r\n    model = vxm.networks.VxmDense(\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\voxelmorph\\tf\\modelio.py\", line 22, in wrapper\r\n    retval = func(self, *args, **kwargs)\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\voxelmorph\\tf\\networks.py\", line 87, in __init__\r\n    unet_model = Unet(\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\voxelmorph\\tf\\networks.py\", line 825, in __init__\r\n    last = MaxPooling(max_pool[level], name='unet_enc_pooling_%d' % level)(last)\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\keras\\engine\\base_layer.py\", line 925, in __call__\r\n    return self._functional_construction_call(inputs, args, kwargs,\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\keras\\engine\\base_layer.py\", line 1117, in _functional_construction_call\r\n    outputs = call_fn(cast_inputs, *args, **kwargs)\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\keras\\layers\\pooling.py\", line 566, in call\r\n    outputs = self.pool_function(\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\util\\dispatch.py\", line 201, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\ops\\nn_ops.py\", line 4642, in max_pool3d\r\n    return gen_nn_ops.max_pool3d(\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\ops\\gen_nn_ops.py\", line 5372, in max_pool3d\r\n    _, _, _op, _outputs = _op_def_library._apply_op_helper(\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 742, in _apply_op_helper\r\n    op = g._create_op_internal(op_type_name, inputs, dtypes=None,\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\framework\\func_graph.py\", line 591, in _create_op_internal\r\n    return super(FuncGraph, self)._create_op_internal(  # pylint: disable=protected-access\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3477, in _create_op_internal\r\n    ret = Operation(\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1974, in __init__\r\n    self._c_op = _create_c_op(self._graph, node_def, inputs,\r\n  File \"C:\\Users\\12992\\AppData\\Roaming\\Python\\Python38\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1815, in _create_c_op\r\n    raise ValueError(str(e))\r\n\r\nValueError: Negative dimension size caused by subtracting 2 from 1 for '{{node unet_enc_pooling_0/MaxPool3D}} = MaxPool3D[T=DT_FLOAT, data_format=\"NDHWC\", ksize=[1, 2, 2, 2, 1], padding=\"VALID\", strides=[1, 2, 2, 2, 1]](unet_enc_conv_0_0_activation/LeakyRelu)' with input shapes: [?,1,1120,20688,16].","closed_by":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/315/timeline","performed_via_github_app":null,"state_reason":"completed"}