{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/83","repository_url":"https://api.github.com/repos/voxelmorph/voxelmorph","labels_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/83/labels{/name}","comments_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/83/comments","events_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/83/events","html_url":"https://github.com/voxelmorph/voxelmorph/issues/83","id":477879046,"node_id":"MDU6SXNzdWU0Nzc4NzkwNDY=","number":83,"title":"About shift_center flag","user":{"login":"lalithnag","id":32514406,"node_id":"MDQ6VXNlcjMyNTE0NDA2","avatar_url":"https://avatars.githubusercontent.com/u/32514406?v=4","gravatar_id":"","url":"https://api.github.com/users/lalithnag","html_url":"https://github.com/lalithnag","followers_url":"https://api.github.com/users/lalithnag/followers","following_url":"https://api.github.com/users/lalithnag/following{/other_user}","gists_url":"https://api.github.com/users/lalithnag/gists{/gist_id}","starred_url":"https://api.github.com/users/lalithnag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lalithnag/subscriptions","organizations_url":"https://api.github.com/users/lalithnag/orgs","repos_url":"https://api.github.com/users/lalithnag/repos","events_url":"https://api.github.com/users/lalithnag/events{/privacy}","received_events_url":"https://api.github.com/users/lalithnag/received_events","type":"User","site_admin":false},"labels":[{"id":1488776807,"node_id":"MDU6TGFiZWwxNDg4Nzc2ODA3","url":"https://api.github.com/repos/voxelmorph/voxelmorph/labels/neuron","name":"neuron","color":"84cde0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-07T11:47:15Z","updated_at":"2019-08-07T12:49:37Z","closed_at":"2019-08-07T12:48:28Z","author_association":"NONE","active_lock_reason":null,"body":"Hi! In the spatial transformer layer implementation, you call the function affine_to_shift as follows:\r\n\r\n```\r\n   def _single_aff_to_shift(self, trf, volshape):\r\n        if len(trf.shape) == 1:  # go from vector to matrix\r\n            trf = tf.reshape(trf, [self.ndims, self.ndims + 1])\r\n\r\n        # note this is unnecessarily extra graph since at every batch entry we have a tf.eye graph\r\n        trf += tf.eye(self.ndims+1)[:self.ndims,:]  # add identity, hence affine is a shift from identity\r\n        return affine_to_shift(trf, volshape, shift_center=True)\r\n```\r\n\r\nAnd in the function definition, the following happens:\r\n```\r\n    if shift_center:\r\n        mesh = [mesh[f] - (volshape[f]-1)/2 for f in range(len(volshape))]\r\n```\r\n\r\nI wasn't able to understand why you were doing this and in what cases to toggle the flag. It would be great if you can throw some light on it. Thanks in advance!","closed_by":{"login":"adalca","id":3219675,"node_id":"MDQ6VXNlcjMyMTk2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3219675?v=4","gravatar_id":"","url":"https://api.github.com/users/adalca","html_url":"https://github.com/adalca","followers_url":"https://api.github.com/users/adalca/followers","following_url":"https://api.github.com/users/adalca/following{/other_user}","gists_url":"https://api.github.com/users/adalca/gists{/gist_id}","starred_url":"https://api.github.com/users/adalca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adalca/subscriptions","organizations_url":"https://api.github.com/users/adalca/orgs","repos_url":"https://api.github.com/users/adalca/repos","events_url":"https://api.github.com/users/adalca/events{/privacy}","received_events_url":"https://api.github.com/users/adalca/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/83/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/voxelmorph/voxelmorph/issues/83/timeline","performed_via_github_app":null,"state_reason":"completed"}