{"url":"https://api.github.com/repos/justinshenk/fer/issues/31","repository_url":"https://api.github.com/repos/justinshenk/fer","labels_url":"https://api.github.com/repos/justinshenk/fer/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/justinshenk/fer/issues/31/comments","events_url":"https://api.github.com/repos/justinshenk/fer/issues/31/events","html_url":"https://github.com/justinshenk/fer/issues/31","id":1004482628,"node_id":"I_kwDOCPJ3J8473zBE","number":31,"title":"collab broken?","user":{"login":"osfa","id":195952,"node_id":"MDQ6VXNlcjE5NTk1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/195952?v=4","gravatar_id":"","url":"https://api.github.com/users/osfa","html_url":"https://github.com/osfa","followers_url":"https://api.github.com/users/osfa/followers","following_url":"https://api.github.com/users/osfa/following{/other_user}","gists_url":"https://api.github.com/users/osfa/gists{/gist_id}","starred_url":"https://api.github.com/users/osfa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osfa/subscriptions","organizations_url":"https://api.github.com/users/osfa/orgs","repos_url":"https://api.github.com/users/osfa/repos","events_url":"https://api.github.com/users/osfa/events{/privacy}","received_events_url":"https://api.github.com/users/osfa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-09-22T16:15:02Z","updated_at":"2021-09-29T08:26:25Z","closed_at":"2021-09-29T08:26:25Z","author_association":"NONE","active_lock_reason":null,"body":"if running on a video I never get any detects (empty zip, empty vid).\r\n\r\nwhen running the basic example:\r\n\r\n```\r\nfrom fer import FER\r\nimport cv2\r\n\r\nimg = cv2.imread(\"justin.jpg\")\r\ndetector = FER()\r\ndetector.detect_emotions(img)\r\n```\r\n\r\ncrashes with:\r\n\r\n```\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/dist-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nnon-resource variables are not supported in the long term\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/layers/normalization.py:534: _colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\n\r\n20-09-2021:10:21:50,660 WARNING  [deprecation.py:336] From /usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/layers/normalization.py:534: _colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training.py:2424: UserWarning: `Model.state_updates` will be removed in a future version. This property should not be used in TensorFlow 2.0, as `updates` are applied automatically.\r\n  warnings.warn('`Model.state_updates` will be removed in a future version. '\r\n\r\n---------------------------------------------------------------------------\r\n\r\nUnknownError                              Traceback (most recent call last)\r\n\r\n<ipython-input-2-1c74acac5d76> in <module>()\r\n      4 img = cv2.imread(\"justin.jpg\")\r\n      5 detector = FER()\r\n----> 6 detector.detect_emotions(img)\r\n\r\n5 frames\r\n\r\n/usr/local/lib/python3.7/dist-packages/fer/fer.py in detect_emotions(self, img, face_rectangles)\r\n    254             gray_face = np.expand_dims(gray_face, -1)\r\n    255 \r\n--> 256             emotion_prediction = self.__emotion_classifier.predict(gray_face)[0]\r\n    257             labelled_emotions = {\r\n    258                 emotion_labels[idx]: round(float(score), 2)\r\n\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training_v1.py in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing)\r\n    995         max_queue_size=max_queue_size,\r\n    996         workers=workers,\r\n--> 997         use_multiprocessing=use_multiprocessing)\r\n    998 \r\n    999   def reset_metrics(self):\r\n\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training_arrays_v1.py in predict(self, model, x, batch_size, verbose, steps, callbacks, **kwargs)\r\n    707         verbose=verbose,\r\n    708         steps=steps,\r\n--> 709         callbacks=callbacks)\r\n\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training_arrays_v1.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, validation_freq, mode, validation_in_fit, prepared_feed_values_from_dataset, steps_name, **kwargs)\r\n    378 \r\n    379         # Get outputs.\r\n--> 380         batch_outs = f(ins_batch)\r\n    381         if not isinstance(batch_outs, list):\r\n    382           batch_outs = [batch_outs]\r\n\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/backend.py in __call__(self, inputs)\r\n   4053 \r\n   4054     fetched = self._callable_fn(*array_vals,\r\n-> 4055                                 run_metadata=self.run_metadata)\r\n   4056     self._call_fetch_callbacks(fetched[-len(self._fetches):])\r\n   4057     output_structure = nest.pack_sequence_as(\r\n\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/python/client/session.py in __call__(self, *args, **kwargs)\r\n   1480         ret = tf_session.TF_SessionRunCallable(self._session._session,\r\n   1481                                                self._handle, args,\r\n-> 1482                                                run_metadata_ptr)\r\n   1483         if run_metadata:\r\n   1484           proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\nUnknownError: 2 root error(s) found.\r\n  (0) Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n\t [[{{node conv2d_1/Conv2D}}]]\r\n  (1) Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n\t [[{{node conv2d_1/Conv2D}}]]\r\n\t [[predictions/Softmax/_485]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n```\r\n\r\nthe repo says tf 1.7, the collab specifies 2.x? switching to 1.x results in same error.","closed_by":{"login":"osfa","id":195952,"node_id":"MDQ6VXNlcjE5NTk1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/195952?v=4","gravatar_id":"","url":"https://api.github.com/users/osfa","html_url":"https://github.com/osfa","followers_url":"https://api.github.com/users/osfa/followers","following_url":"https://api.github.com/users/osfa/following{/other_user}","gists_url":"https://api.github.com/users/osfa/gists{/gist_id}","starred_url":"https://api.github.com/users/osfa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osfa/subscriptions","organizations_url":"https://api.github.com/users/osfa/orgs","repos_url":"https://api.github.com/users/osfa/repos","events_url":"https://api.github.com/users/osfa/events{/privacy}","received_events_url":"https://api.github.com/users/osfa/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/justinshenk/fer/issues/31/timeline","performed_via_github_app":null,"state_reason":"completed"}