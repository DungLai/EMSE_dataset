[{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/876264860","html_url":"https://github.com/justinshenk/fer/issues/26#issuecomment-876264860","issue_url":"https://api.github.com/repos/justinshenk/fer/issues/26","id":876264860,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NjI2NDg2MA==","user":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"created_at":"2021-07-08T09:01:33Z","updated_at":"2021-07-08T09:01:33Z","author_association":"OWNER","body":"Can you please try running\nos.environ[\"SM_FRAMEWORK\"] = \"tf.keras\"\nbefore the first approach and let me know if it works?\n\nThe second issue seems related to\nhttps://github.com/justinshenk/fer/issues/13.\n\nOn Mon, Jul 5, 2021 at 6:49 PM Fqlox ***@***.***> wrote:\n\n> Hi,\n>\n> I tried to run the Justin.jpg simple example and got Issues with the\n> detector:\n>\n> if I try :\n>\n> detector = FER(mtcnn=True)\n>\n> I get a :\n>\n>   File \"[]/opt/miniconda3/envs/fer/lib/python3.6/site-packages/keras/initializers/__init__.py\", line 49, in populate_deserializable_objects\n>     LOCAL.GENERATED_WITH_V2 = tf.__internal__.tf2.enabled()\n> AttributeError: module 'tensorflow.compat.v2.__internal__' has no attribute 'tf2'\n>\n>\n> if I try :\n>\n> detector = FER(mtcnn=False)\n>\n> I get a :\n>\n>   File \"[]/opt/miniconda3/envs/fer/lib/python3.6/site-packages/fer/fer.py\", line 168, in find_faces\n>     if isinstance(self.__face_detector, cv2.CascadeClassifier):\n> TypeError: isinstance() arg 2 must be a type or tuple of types\n>\n> Using miniconda 4.10\n> and this packages\n>\n> Package                 Version\n> ----------------------- -------------------\n> absl-py                 0.13.0\n> astor                   0.8.1\n> astunparse              1.6.3\n> bleach                  1.5.0\n> cached-property         1.5.2\n> cachetools              4.2.2\n> certifi                 2021.5.30\n> chardet                 4.0.0\n> cycler                  0.10.0\n> dataclasses             0.8\n> fer                     20.1.3\n> flatbuffers             1.12\n> gast                    0.3.3\n> google-auth             1.32.1\n> google-auth-oauthlib    0.4.4\n> google-pasta            0.2.0\n> grpcio                  1.32.0\n> h5py                    2.10.0\n> html5lib                0.9999999\n> idna                    2.10\n> importlib-metadata      4.6.1\n> Keras                   2.4.3\n> Keras-Applications      1.0.8\n> keras-nightly           2.5.0.dev2021032900\n> Keras-Preprocessing     1.1.2\n> kiwisolver              1.3.1\n> Markdown                3.3.4\n> matplotlib              3.3.4\n> mtcnn                   0.1.0\n> numpy                   1.19.5\n> oauthlib                3.1.1\n> opencv-contrib-python   3.3.0.9\n> opencv-python           4.5.2.54\n> opt-einsum              3.3.0\n> pandas                  1.1.5\n> Pillow                  8.3.0\n> pip                     21.1.3\n> protobuf                3.17.3\n> pyasn1                  0.4.8\n> pyasn1-modules          0.2.8\n> pyparsing               2.4.7\n> python-dateutil         2.8.1\n> pytz                    2021.1\n> PyYAML                  5.4.1\n> requests                2.25.1\n> requests-oauthlib       1.3.0\n> rsa                     4.7.2\n> scipy                   1.5.4\n> setuptools              52.0.0.post20210125\n> six                     1.15.0\n> tensorboard             2.5.0\n> tensorboard-data-server 0.6.1\n> tensorboard-plugin-wit  1.8.0\n> tensorflow              2.4.1\n> tensorflow-estimator    2.4.0\n> termcolor               1.1.0\n> typing-extensions       3.7.4.3\n> urllib3                 1.26.6\n> Werkzeug                2.0.1\n> wheel                   0.36.2\n> wrapt                   1.12.1\n> zipp                    3.5.0\n>\n> Thanks in advance\n>\n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/justinshenk/fer/issues/26>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ACOLMZA66B2UNKYSTRAIFC3TWHPADANCNFSM473BRO7Q>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/876264860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/876307496","html_url":"https://github.com/justinshenk/fer/issues/26#issuecomment-876307496","issue_url":"https://api.github.com/repos/justinshenk/fer/issues/26","id":876307496,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NjMwNzQ5Ng==","user":{"login":"Fqlox","id":33659731,"node_id":"MDQ6VXNlcjMzNjU5NzMx","avatar_url":"https://avatars.githubusercontent.com/u/33659731?v=4","gravatar_id":"","url":"https://api.github.com/users/Fqlox","html_url":"https://github.com/Fqlox","followers_url":"https://api.github.com/users/Fqlox/followers","following_url":"https://api.github.com/users/Fqlox/following{/other_user}","gists_url":"https://api.github.com/users/Fqlox/gists{/gist_id}","starred_url":"https://api.github.com/users/Fqlox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fqlox/subscriptions","organizations_url":"https://api.github.com/users/Fqlox/orgs","repos_url":"https://api.github.com/users/Fqlox/repos","events_url":"https://api.github.com/users/Fqlox/events{/privacy}","received_events_url":"https://api.github.com/users/Fqlox/received_events","type":"User","site_admin":false},"created_at":"2021-07-08T10:03:11Z","updated_at":"2021-07-08T10:03:11Z","author_association":"NONE","body":"Alright, I tried :\r\n\r\n```\r\n\r\nimport cv2\r\nfrom fer import FER\r\nimport os\r\n\r\nos.environ[\"SM_FRAMEWORK\"] = \"tf.keras\"\r\n\r\ndetector = FER(mtcnn=True) # or with mtcnn=False for Haar Cascade Classifier\r\n\r\nimage = cv2.imread(\"justin.png\") ....\r\n```\r\n\r\nI got : \r\n\r\n```\r\nWARNING:tensorflow:From /Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nnon-resource variables are not supported in the long term\r\nTraceback (most recent call last):\r\n  File \"webcam.py\", line 13, in <module>\r\n    detector = FER(mtcnn=True) # or with mtcnn=False for Haar Cascade Classifier\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/fer/fer.py\", line 98, in __init__\r\n    from mtcnn.mtcnn import MTCNN\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/mtcnn/__init__.py\", line 26, in <module>\r\n    from mtcnn.mtcnn import MTCNN\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/mtcnn/mtcnn.py\", line 37, in <module>\r\n    from mtcnn.network.factory import NetworkFactory\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/mtcnn/network/factory.py\", line 26, in <module>\r\n    from keras.layers import Input, Dense, Conv2D, MaxPooling2D, PReLU, Flatten, Softmax\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/keras/__init__.py\", line 20, in <module>\r\n    from . import initializers\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/keras/initializers/__init__.py\", line 124, in <module>\r\n    populate_deserializable_objects()\r\n  File \"/Users/user/opt/miniconda3/envs/fer/lib/python3.6/site-packages/keras/initializers/__init__.py\", line 49, in populate_deserializable_objects\r\n    LOCAL.GENERATED_WITH_V2 = tf.__internal__.tf2.enabled()\r\nAttributeError: module 'tensorflow.compat.v2.__internal__' has no attribute 'tf2'\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/876307496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Fqlox","id":33659731,"node_id":"MDQ6VXNlcjMzNjU5NzMx","avatar_url":"https://avatars.githubusercontent.com/u/33659731?v=4","gravatar_id":"","url":"https://api.github.com/users/Fqlox","html_url":"https://github.com/Fqlox","followers_url":"https://api.github.com/users/Fqlox/followers","following_url":"https://api.github.com/users/Fqlox/following{/other_user}","gists_url":"https://api.github.com/users/Fqlox/gists{/gist_id}","starred_url":"https://api.github.com/users/Fqlox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fqlox/subscriptions","organizations_url":"https://api.github.com/users/Fqlox/orgs","repos_url":"https://api.github.com/users/Fqlox/repos","events_url":"https://api.github.com/users/Fqlox/events{/privacy}","received_events_url":"https://api.github.com/users/Fqlox/received_events","type":"User","site_admin":false}}]