[{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/865927783","html_url":"https://github.com/justinshenk/fer/issues/23#issuecomment-865927783","issue_url":"https://api.github.com/repos/justinshenk/fer/issues/23","id":865927783,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NTkyNzc4Mw==","user":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"created_at":"2021-06-22T12:08:24Z","updated_at":"2021-06-22T12:11:45Z","author_association":"OWNER","body":"Can you please try enclosing the inference in `with tf.device('/device:GPU:0')` and see if it helps?\r\n\r\nwith tf.device('/device:GPU:0'):\r\n  detector = FER(mtcnn=True)\r\n  # Video predictions\r\n  video = Video(videofile)\r\n\r\n  # Output list of dictionaries\r\n  raw_data = video.analyze(detector, display=False)\r\n\r\nOn Fri, Jun 18, 2021 at 5:19 PM linguist89 ***@***.***> wrote:\r\n\r\n> I'm running the package using Google Colab and the GPU is detected and\r\n> available, however the FER packages doesn't seem to use it. I've run it\r\n> before on the same setup and it worked using the GPU, but now it doesn't.\r\n> Is there anyone that has the same problem?\r\n>\r\n> â€”\r\n> You are receiving this because you are subscribed to this thread.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/justinshenk/fer/issues/23>, or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACOLMZACDPIAD3HKOGBLRGDTTNPYHANCNFSM4653YMWA>\r\n> .\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/865927783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/866942184","html_url":"https://github.com/justinshenk/fer/issues/23#issuecomment-866942184","issue_url":"https://api.github.com/repos/justinshenk/fer/issues/23","id":866942184,"node_id":"MDEyOklzc3VlQ29tbWVudDg2Njk0MjE4NA==","user":{"login":"linguist89","id":52411527,"node_id":"MDQ6VXNlcjUyNDExNTI3","avatar_url":"https://avatars.githubusercontent.com/u/52411527?v=4","gravatar_id":"","url":"https://api.github.com/users/linguist89","html_url":"https://github.com/linguist89","followers_url":"https://api.github.com/users/linguist89/followers","following_url":"https://api.github.com/users/linguist89/following{/other_user}","gists_url":"https://api.github.com/users/linguist89/gists{/gist_id}","starred_url":"https://api.github.com/users/linguist89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linguist89/subscriptions","organizations_url":"https://api.github.com/users/linguist89/orgs","repos_url":"https://api.github.com/users/linguist89/repos","events_url":"https://api.github.com/users/linguist89/events{/privacy}","received_events_url":"https://api.github.com/users/linguist89/received_events","type":"User","site_admin":false},"created_at":"2021-06-23T15:33:46Z","updated_at":"2021-06-23T15:33:46Z","author_association":"NONE","body":"@justinshenk Thanks for the reply. I have tried that, but it still doesn't work. I've scoured the internet forums and it seems that there has been a Colab update and the CUDA and tensorflow version are now different. I think that might be the reason, but I don't know how to fix that.","reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/866942184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"linguist89","id":52411527,"node_id":"MDQ6VXNlcjUyNDExNTI3","avatar_url":"https://avatars.githubusercontent.com/u/52411527?v=4","gravatar_id":"","url":"https://api.github.com/users/linguist89","html_url":"https://github.com/linguist89","followers_url":"https://api.github.com/users/linguist89/followers","following_url":"https://api.github.com/users/linguist89/following{/other_user}","gists_url":"https://api.github.com/users/linguist89/gists{/gist_id}","starred_url":"https://api.github.com/users/linguist89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linguist89/subscriptions","organizations_url":"https://api.github.com/users/linguist89/orgs","repos_url":"https://api.github.com/users/linguist89/repos","events_url":"https://api.github.com/users/linguist89/events{/privacy}","received_events_url":"https://api.github.com/users/linguist89/received_events","type":"User","site_admin":false}},{"id":4929646071,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDkyOTY0NjA3MQ==","url":"https://api.github.com/repos/justinshenk/fer/issues/events/4929646071","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-23T15:33:47Z","performed_via_github_app":null},{"id":4929646079,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ5Mjk2NDYwNzk=","url":"https://api.github.com/repos/justinshenk/fer/issues/events/4929646079","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-23T15:33:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/878103701","html_url":"https://github.com/justinshenk/fer/issues/23#issuecomment-878103701","issue_url":"https://api.github.com/repos/justinshenk/fer/issues/23","id":878103701,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODEwMzcwMQ==","user":{"login":"linguist89","id":52411527,"node_id":"MDQ6VXNlcjUyNDExNTI3","avatar_url":"https://avatars.githubusercontent.com/u/52411527?v=4","gravatar_id":"","url":"https://api.github.com/users/linguist89","html_url":"https://github.com/linguist89","followers_url":"https://api.github.com/users/linguist89/followers","following_url":"https://api.github.com/users/linguist89/following{/other_user}","gists_url":"https://api.github.com/users/linguist89/gists{/gist_id}","starred_url":"https://api.github.com/users/linguist89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linguist89/subscriptions","organizations_url":"https://api.github.com/users/linguist89/orgs","repos_url":"https://api.github.com/users/linguist89/repos","events_url":"https://api.github.com/users/linguist89/events{/privacy}","received_events_url":"https://api.github.com/users/linguist89/received_events","type":"User","site_admin":false},"created_at":"2021-07-12T09:03:46Z","updated_at":"2021-07-12T09:03:46Z","author_association":"NONE","body":"@justinshenk I'm continuing my comments from [this issue](https://github.com/justinshenk/fer/issues/29) since I didn't want to hijack his question. I've got the GPU working, but it seems that it was working the whole time only it uses about 5% of the GPU, so it's only marginally faster than CPU. I found a little bash script that plots the GPU usage \r\n![GPU_usage](https://user-images.githubusercontent.com/52411527/125260572-c20bf200-e300-11eb-8642-ef687acbf764.png)\r\n\r\nIs there a way to force the code to use more GPU?","reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/878103701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"linguist89","id":52411527,"node_id":"MDQ6VXNlcjUyNDExNTI3","avatar_url":"https://avatars.githubusercontent.com/u/52411527?v=4","gravatar_id":"","url":"https://api.github.com/users/linguist89","html_url":"https://github.com/linguist89","followers_url":"https://api.github.com/users/linguist89/followers","following_url":"https://api.github.com/users/linguist89/following{/other_user}","gists_url":"https://api.github.com/users/linguist89/gists{/gist_id}","starred_url":"https://api.github.com/users/linguist89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linguist89/subscriptions","organizations_url":"https://api.github.com/users/linguist89/orgs","repos_url":"https://api.github.com/users/linguist89/repos","events_url":"https://api.github.com/users/linguist89/events{/privacy}","received_events_url":"https://api.github.com/users/linguist89/received_events","type":"User","site_admin":false}},{"id":5006199906,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNjE5OTkwNg==","url":"https://api.github.com/repos/justinshenk/fer/issues/events/5006199906","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-12T09:03:46Z","performed_via_github_app":null},{"id":5006199910,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDYxOTk5MTA=","url":"https://api.github.com/repos/justinshenk/fer/issues/events/5006199910","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-12T09:03:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/1054674765","html_url":"https://github.com/justinshenk/fer/issues/23#issuecomment-1054674765","issue_url":"https://api.github.com/repos/justinshenk/fer/issues/23","id":1054674765,"node_id":"IC_kwDOCPJ3J84-3Q9N","user":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false},"created_at":"2022-02-28T21:21:36Z","updated_at":"2022-02-28T21:21:36Z","author_association":"OWNER","body":"Batching the frames and adding a queue would allow speeding it up and increasing GPU usage. It would be great if someone would make a PR for this","reactions":{"url":"https://api.github.com/repos/justinshenk/fer/issues/comments/1054674765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"justinshenk","id":10270308,"node_id":"MDQ6VXNlcjEwMjcwMzA4","avatar_url":"https://avatars.githubusercontent.com/u/10270308?v=4","gravatar_id":"","url":"https://api.github.com/users/justinshenk","html_url":"https://github.com/justinshenk","followers_url":"https://api.github.com/users/justinshenk/followers","following_url":"https://api.github.com/users/justinshenk/following{/other_user}","gists_url":"https://api.github.com/users/justinshenk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinshenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinshenk/subscriptions","organizations_url":"https://api.github.com/users/justinshenk/orgs","repos_url":"https://api.github.com/users/justinshenk/repos","events_url":"https://api.github.com/users/justinshenk/events{/privacy}","received_events_url":"https://api.github.com/users/justinshenk/received_events","type":"User","site_admin":false}}]