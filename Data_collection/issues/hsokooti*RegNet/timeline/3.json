[{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/404666213","html_url":"https://github.com/hsokooti/RegNet/issues/3#issuecomment-404666213","issue_url":"https://api.github.com/repos/hsokooti/RegNet/issues/3","id":404666213,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDY2NjIxMw==","user":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T22:08:17Z","updated_at":"2018-07-12T22:08:17Z","author_association":"OWNER","body":"Thank you for your interest Qiang-Zhang-Y. At the test time, you need to increase the patch size and the size of output will automatically increase. In order to avoid any errors in the script, you can set the size of the placeholders to be None:\r\n```python\r\nx = tf.placeholder(tf.float32, shape=[None, None, None, None , 2], name=\"x\")\r\nxLow = tf.placeholder(tf.float32, shape=[None, None, None, None, 2], name=\"x\")\r\ny = tf.placeholder(tf.float32, shape=[None, None, None, None, 3], name=\"labels\")\r\n```\r\nThe above lines are in the script, you can uncomment them.\r\n\r\nPlease note that in this version of the code, you need to apply an upsampling with a factor of two to the output. In the next version, this problem is solved.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/404666213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/427758963","html_url":"https://github.com/hsokooti/RegNet/issues/3#issuecomment-427758963","issue_url":"https://api.github.com/repos/hsokooti/RegNet/issues/3","id":427758963,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzc1ODk2Mw==","user":{"login":"nlite8","id":17958755,"node_id":"MDQ6VXNlcjE3OTU4NzU1","avatar_url":"https://avatars.githubusercontent.com/u/17958755?v=4","gravatar_id":"","url":"https://api.github.com/users/nlite8","html_url":"https://github.com/nlite8","followers_url":"https://api.github.com/users/nlite8/followers","following_url":"https://api.github.com/users/nlite8/following{/other_user}","gists_url":"https://api.github.com/users/nlite8/gists{/gist_id}","starred_url":"https://api.github.com/users/nlite8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nlite8/subscriptions","organizations_url":"https://api.github.com/users/nlite8/orgs","repos_url":"https://api.github.com/users/nlite8/repos","events_url":"https://api.github.com/users/nlite8/events{/privacy}","received_events_url":"https://api.github.com/users/nlite8/received_events","type":"User","site_admin":false},"created_at":"2018-10-08T08:40:29Z","updated_at":"2018-10-08T08:40:29Z","author_association":"NONE","body":"Thank you for sharing, but I can't understand how to process the test images to get the registration results, maybe  voxel by voxel?","reactions":{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/427758963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nlite8","id":17958755,"node_id":"MDQ6VXNlcjE3OTU4NzU1","avatar_url":"https://avatars.githubusercontent.com/u/17958755?v=4","gravatar_id":"","url":"https://api.github.com/users/nlite8","html_url":"https://github.com/nlite8","followers_url":"https://api.github.com/users/nlite8/followers","following_url":"https://api.github.com/users/nlite8/following{/other_user}","gists_url":"https://api.github.com/users/nlite8/gists{/gist_id}","starred_url":"https://api.github.com/users/nlite8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nlite8/subscriptions","organizations_url":"https://api.github.com/users/nlite8/orgs","repos_url":"https://api.github.com/users/nlite8/repos","events_url":"https://api.github.com/users/nlite8/events{/privacy}","received_events_url":"https://api.github.com/users/nlite8/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/427857207","html_url":"https://github.com/hsokooti/RegNet/issues/3#issuecomment-427857207","issue_url":"https://api.github.com/repos/hsokooti/RegNet/issues/3","id":427857207,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzg1NzIwNw==","user":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false},"created_at":"2018-10-08T14:29:42Z","updated_at":"2018-10-08T14:29:42Z","author_association":"OWNER","body":"For example, you can set the size of x to be 163, and set the size of xLow to be 150, then the output automatically enlarges. ","reactions":{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/427857207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/447303506","html_url":"https://github.com/hsokooti/RegNet/issues/3#issuecomment-447303506","issue_url":"https://api.github.com/repos/hsokooti/RegNet/issues/3","id":447303506,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzMwMzUwNg==","user":{"login":"cs123951","id":13451757,"node_id":"MDQ6VXNlcjEzNDUxNzU3","avatar_url":"https://avatars.githubusercontent.com/u/13451757?v=4","gravatar_id":"","url":"https://api.github.com/users/cs123951","html_url":"https://github.com/cs123951","followers_url":"https://api.github.com/users/cs123951/followers","following_url":"https://api.github.com/users/cs123951/following{/other_user}","gists_url":"https://api.github.com/users/cs123951/gists{/gist_id}","starred_url":"https://api.github.com/users/cs123951/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cs123951/subscriptions","organizations_url":"https://api.github.com/users/cs123951/orgs","repos_url":"https://api.github.com/users/cs123951/repos","events_url":"https://api.github.com/users/cs123951/events{/privacy}","received_events_url":"https://api.github.com/users/cs123951/received_events","type":"User","site_admin":false},"created_at":"2018-12-14T11:55:04Z","updated_at":"2018-12-14T11:55:36Z","author_association":"NONE","body":"hi, @hsokooti , I have the same question. In the paper, you said \r\n\r\n> The proposed CNN architecture RegNet takes patches from a pair of 3D images (the fixed image IF and the moving image IM) as input.\r\n\r\nThen how to get the registration result of the test image?\r\nI mean, when I have a test image (let the size of the image be 256x256x128, the spacing is [1,1,1]), should I input the whole image into the network when testing? If I do so, is the output exactly the DVF? \r\n\r\nBut when I run your code, I found the input of 155 outputs 27, which confused me. \r\n\r\nCould you show more about the details of the network?\r\n\r\nThanks a lot.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/447303506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cs123951","id":13451757,"node_id":"MDQ6VXNlcjEzNDUxNzU3","avatar_url":"https://avatars.githubusercontent.com/u/13451757?v=4","gravatar_id":"","url":"https://api.github.com/users/cs123951","html_url":"https://github.com/cs123951","followers_url":"https://api.github.com/users/cs123951/followers","following_url":"https://api.github.com/users/cs123951/following{/other_user}","gists_url":"https://api.github.com/users/cs123951/gists{/gist_id}","starred_url":"https://api.github.com/users/cs123951/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cs123951/subscriptions","organizations_url":"https://api.github.com/users/cs123951/orgs","repos_url":"https://api.github.com/users/cs123951/repos","events_url":"https://api.github.com/users/cs123951/events{/privacy}","received_events_url":"https://api.github.com/users/cs123951/received_events","type":"User","site_admin":false}},{"id":2026658977,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjAyNjY1ODk3Nw==","url":"https://api.github.com/repos/hsokooti/RegNet/issues/events/2026658977","actor":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-12-14T11:55:36Z","performed_via_github_app":null},{"id":2026658979,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwMjY2NTg5Nzk=","url":"https://api.github.com/repos/hsokooti/RegNet/issues/events/2026658979","actor":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-12-14T11:55:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/447352234","html_url":"https://github.com/hsokooti/RegNet/issues/3#issuecomment-447352234","issue_url":"https://api.github.com/repos/hsokooti/RegNet/issues/3","id":447352234,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzM1MjIzNA==","user":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false},"created_at":"2018-12-14T15:06:39Z","updated_at":"2018-12-14T15:06:39Z","author_association":"OWNER","body":"Hi @cs123951,\r\n\r\nThe network design of the current version (0.2alpha) is a bit different from the paper (0.1). In this version, the network design `decimation3` takes inputs of 155 and gives an output of 27 during training. At the test phase, you can increase the size of inputs and a larger output.\r\n\r\nYou can tune the input size is in the script `Function.RegNetModel.decimation3` line 89. For instance, you can increase the input to 255:\r\n```python\r\nr_input = 255\r\n```\r\nThe size of `dvf_regnet` will be `[None, 127, 127, 127, 3]`.\r\n\r\nIn your case, the ideal number of r_input is `r_input = 387` which leads to `dvf_regnet` of  `[None, 259, 259, 259, 3]`. However, the limitation to increase the input size is your GPU memory. By trying different numbers you can find the maximum size that can be fed in the GPU memory. \r\n\r\nTwo minor tricks should be noted:\r\n* You need to pad the input images in order to get the output with the same size as the original image.\r\n* Because of the memory limitation you might need to do a loop over the images. \r\n\r\nThe script `RegNet3D_FullReg_MultiStage.py` does this job. If you use only one stage, then set the stage list to be 1: \r\n```python\r\nstage_list = [1]\r\n```\r\nI hope that this might help.\r\n","reactions":{"url":"https://api.github.com/repos/hsokooti/RegNet/issues/comments/447352234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hsokooti","id":12530760,"node_id":"MDQ6VXNlcjEyNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/12530760?v=4","gravatar_id":"","url":"https://api.github.com/users/hsokooti","html_url":"https://github.com/hsokooti","followers_url":"https://api.github.com/users/hsokooti/followers","following_url":"https://api.github.com/users/hsokooti/following{/other_user}","gists_url":"https://api.github.com/users/hsokooti/gists{/gist_id}","starred_url":"https://api.github.com/users/hsokooti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hsokooti/subscriptions","organizations_url":"https://api.github.com/users/hsokooti/orgs","repos_url":"https://api.github.com/users/hsokooti/repos","events_url":"https://api.github.com/users/hsokooti/events{/privacy}","received_events_url":"https://api.github.com/users/hsokooti/received_events","type":"User","site_admin":false}},{"id":2027050064,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjAyNzA1MDA2NA==","url":"https://api.github.com/repos/hsokooti/RegNet/issues/events/2027050064","actor":{"login":"cs123951","id":13451757,"node_id":"MDQ6VXNlcjEzNDUxNzU3","avatar_url":"https://avatars.githubusercontent.com/u/13451757?v=4","gravatar_id":"","url":"https://api.github.com/users/cs123951","html_url":"https://github.com/cs123951","followers_url":"https://api.github.com/users/cs123951/followers","following_url":"https://api.github.com/users/cs123951/following{/other_user}","gists_url":"https://api.github.com/users/cs123951/gists{/gist_id}","starred_url":"https://api.github.com/users/cs123951/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cs123951/subscriptions","organizations_url":"https://api.github.com/users/cs123951/orgs","repos_url":"https://api.github.com/users/cs123951/repos","events_url":"https://api.github.com/users/cs123951/events{/privacy}","received_events_url":"https://api.github.com/users/cs123951/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-12-14T15:06:39Z","performed_via_github_app":null},{"id":2027050066,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwMjcwNTAwNjY=","url":"https://api.github.com/repos/hsokooti/RegNet/issues/events/2027050066","actor":{"login":"cs123951","id":13451757,"node_id":"MDQ6VXNlcjEzNDUxNzU3","avatar_url":"https://avatars.githubusercontent.com/u/13451757?v=4","gravatar_id":"","url":"https://api.github.com/users/cs123951","html_url":"https://github.com/cs123951","followers_url":"https://api.github.com/users/cs123951/followers","following_url":"https://api.github.com/users/cs123951/following{/other_user}","gists_url":"https://api.github.com/users/cs123951/gists{/gist_id}","starred_url":"https://api.github.com/users/cs123951/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cs123951/subscriptions","organizations_url":"https://api.github.com/users/cs123951/orgs","repos_url":"https://api.github.com/users/cs123951/repos","events_url":"https://api.github.com/users/cs123951/events{/privacy}","received_events_url":"https://api.github.com/users/cs123951/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-12-14T15:06:39Z","performed_via_github_app":null}]