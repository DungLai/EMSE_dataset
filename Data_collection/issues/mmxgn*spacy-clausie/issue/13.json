{"url":"https://api.github.com/repos/mmxgn/spacy-clausie/issues/13","repository_url":"https://api.github.com/repos/mmxgn/spacy-clausie","labels_url":"https://api.github.com/repos/mmxgn/spacy-clausie/issues/13/labels{/name}","comments_url":"https://api.github.com/repos/mmxgn/spacy-clausie/issues/13/comments","events_url":"https://api.github.com/repos/mmxgn/spacy-clausie/issues/13/events","html_url":"https://github.com/mmxgn/spacy-clausie/issues/13","id":1142587836,"node_id":"I_kwDOCPViBs5EGoG8","number":13,"title":"[Bug] AttributeError: 'str' object has no attribute 'pos_'","user":{"login":"abhinavkulkarni","id":1565547,"node_id":"MDQ6VXNlcjE1NjU1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1565547?v=4","gravatar_id":"","url":"https://api.github.com/users/abhinavkulkarni","html_url":"https://github.com/abhinavkulkarni","followers_url":"https://api.github.com/users/abhinavkulkarni/followers","following_url":"https://api.github.com/users/abhinavkulkarni/following{/other_user}","gists_url":"https://api.github.com/users/abhinavkulkarni/gists{/gist_id}","starred_url":"https://api.github.com/users/abhinavkulkarni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhinavkulkarni/subscriptions","organizations_url":"https://api.github.com/users/abhinavkulkarni/orgs","repos_url":"https://api.github.com/users/abhinavkulkarni/repos","events_url":"https://api.github.com/users/abhinavkulkarni/events{/privacy}","received_events_url":"https://api.github.com/users/abhinavkulkarni/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-02-18T08:02:32Z","updated_at":"2022-03-05T14:47:30Z","closed_at":"2022-03-05T14:47:30Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI have the following piece of code:\r\n\r\n```python\r\n\r\nimport spacy\r\n\r\nnlp = spacy.load('en_core_web_trf')\r\n\r\nimport claucy\r\n\r\nclaucy.add_to_pipe(nlp)\r\n\r\ntext = '''John Joseph Mearsheimer (/ˈmɪərʃaɪmər/; born December 14, 1947) is an American political scientist and international relations scholar, who belongs to the realist school of thought. He is the R. Wendell Harrison Distinguished Service Professor at the University of Chicago. He has been described as the most influential realist of his generation.[3]\r\n\r\nMearsheimer is best known for developing the theory of offensive realism, which describes the interaction between great powers as being primarily driven by the rational desire to achieve regional hegemony in an anarchic international system. He was a vocal opponent of the Iraq War in 2003 and was almost alone in opposing Ukraine's decision to give up its nuclear weapons in 1994, predicting that it would inevitably face Russian aggression without a nuclear deterrent.\r\n\r\nHis most controversial views concern alleged influence by interest groups over US government actions in the Middle East which he wrote about in his 2007 book The Israel Lobby and U.S. Foreign Policy. In accordance with his theory, Mearsheimer believes that China's growing power will likely bring it into conflict with the United States.\r\n\r\n'''\r\n\r\ndoc = nlp(text)\r\n\r\ndoc._.clauses[0].to_propositions(as_text=True)\r\n```\r\n\r\nI get the following error:\r\n\r\n```bash\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n/tmp/ipykernel_382495/3055812236.py in <module>\r\n----> 1 doc._.clauses[0].to_propositions(as_text=True)\r\n\r\n~/miniconda3/envs/blink37/lib/python3.7/site-packages/claucy/claucy.py in to_propositions(self, as_text, inflect, capitalize)\r\n    263         if as_text:\r\n    264             return _convert_clauses_to_text(\r\n--> 265                 propositions, inflect=inflect, capitalize=capitalize\r\n    266             )\r\n    267 \r\n\r\n~/miniconda3/envs/blink37/lib/python3.7/site-packages/claucy/claucy.py in _convert_clauses_to_text(propositions, inflect, capitalize)\r\n    290             token_texts = []\r\n    291             for token in span:\r\n--> 292                 token_texts.append(inflect_token(token, inflect))\r\n    293 \r\n    294             span_texts.append(\" \".join(token_texts))\r\n\r\n~/miniconda3/envs/blink37/lib/python3.7/site-packages/claucy/claucy.py in inflect_token(token, inflect)\r\n    272     if (\r\n    273         inflect\r\n--> 274         and token.pos_ == \"VERB\"\r\n    275         and \"AUX\" not in [tt.pos_ for tt in token.lefts]\r\n    276         # t is not preceded by an auxiliary verb (e.g. `the birds were ailing`)\r\n\r\nAttributeError: 'str' object has no attribute 'pos_'\r\n```\r\n\r\nThe installed package versions are as follows:\r\n\r\n```bash\r\n$ pip freeze | grep -E 'spacy|clausy' -i\r\nclaucy @ git+https://github.com/mmxgn/spacy-clausie.git@600d8e30b4d373da91c06bf7826b443aca101636\r\nen-core-web-lg @ https://github.com/explosion/spacy-models/releases/download/en_core_web_lg-3.1.0/en_core_web_lg-3.1.0-py3-none-any.whl\r\nen-core-web-sm @ https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.1.0/en_core_web_sm-3.1.0-py3-none-any.whl\r\nen-core-web-trf @ https://github.com/explosion/spacy-models/releases/download/en_core_web_trf-3.1.0/en_core_web_trf-3.1.0-py3-none-any.whl\r\nspacy==3.1.4\r\nspacy-alignments==0.8.4\r\nspacy-legacy==3.0.8\r\nspacy-transformers==1.0.6\r\n```\r\n\r\nThanks!","closed_by":{"login":"mmxgn","id":349290,"node_id":"MDQ6VXNlcjM0OTI5MA==","avatar_url":"https://avatars.githubusercontent.com/u/349290?v=4","gravatar_id":"","url":"https://api.github.com/users/mmxgn","html_url":"https://github.com/mmxgn","followers_url":"https://api.github.com/users/mmxgn/followers","following_url":"https://api.github.com/users/mmxgn/following{/other_user}","gists_url":"https://api.github.com/users/mmxgn/gists{/gist_id}","starred_url":"https://api.github.com/users/mmxgn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmxgn/subscriptions","organizations_url":"https://api.github.com/users/mmxgn/orgs","repos_url":"https://api.github.com/users/mmxgn/repos","events_url":"https://api.github.com/users/mmxgn/events{/privacy}","received_events_url":"https://api.github.com/users/mmxgn/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mmxgn/spacy-clausie/issues/13/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mmxgn/spacy-clausie/issues/13/timeline","performed_via_github_app":null,"state_reason":"completed"}