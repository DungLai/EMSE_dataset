[{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570516415","html_url":"https://github.com/kashif/firedup/issues/10#issuecomment-570516415","issue_url":"https://api.github.com/repos/kashif/firedup/issues/10","id":570516415,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDUxNjQxNQ==","user":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false},"created_at":"2020-01-03T09:30:20Z","updated_at":"2020-01-03T09:30:20Z","author_association":"OWNER","body":"@mimoralea yes great observation! You are right it differs from the spinning up version and I made a PR there for it, see: openai/spinningup#85 \r\n\r\nThis was a year ago so I don't remember the reason right now and would need to go through my notes of the time, unless you can figure it out.\r\n\r\nps. looking forward to your book, I am sure it will be great!","reactions":{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570516415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false}},{"id":2919746705,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjkxOTc0NjcwNQ==","url":"https://api.github.com/repos/kashif/firedup/issues/events/2919746705","actor":{"login":"mimoralea","id":2921476,"node_id":"MDQ6VXNlcjI5MjE0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2921476?v=4","gravatar_id":"","url":"https://api.github.com/users/mimoralea","html_url":"https://github.com/mimoralea","followers_url":"https://api.github.com/users/mimoralea/followers","following_url":"https://api.github.com/users/mimoralea/following{/other_user}","gists_url":"https://api.github.com/users/mimoralea/gists{/gist_id}","starred_url":"https://api.github.com/users/mimoralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimoralea/subscriptions","organizations_url":"https://api.github.com/users/mimoralea/orgs","repos_url":"https://api.github.com/users/mimoralea/repos","events_url":"https://api.github.com/users/mimoralea/events{/privacy}","received_events_url":"https://api.github.com/users/mimoralea/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-03T09:30:20Z","performed_via_github_app":null},{"id":2919746708,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5MTk3NDY3MDg=","url":"https://api.github.com/repos/kashif/firedup/issues/events/2919746708","actor":{"login":"mimoralea","id":2921476,"node_id":"MDQ6VXNlcjI5MjE0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2921476?v=4","gravatar_id":"","url":"https://api.github.com/users/mimoralea","html_url":"https://github.com/mimoralea","followers_url":"https://api.github.com/users/mimoralea/followers","following_url":"https://api.github.com/users/mimoralea/following{/other_user}","gists_url":"https://api.github.com/users/mimoralea/gists{/gist_id}","starred_url":"https://api.github.com/users/mimoralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimoralea/subscriptions","organizations_url":"https://api.github.com/users/mimoralea/orgs","repos_url":"https://api.github.com/users/mimoralea/repos","events_url":"https://api.github.com/users/mimoralea/events{/privacy}","received_events_url":"https://api.github.com/users/mimoralea/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-03T09:30:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570562020","html_url":"https://github.com/kashif/firedup/issues/10#issuecomment-570562020","issue_url":"https://api.github.com/repos/kashif/firedup/issues/10","id":570562020,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDU2MjAyMA==","user":{"login":"mimoralea","id":2921476,"node_id":"MDQ6VXNlcjI5MjE0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2921476?v=4","gravatar_id":"","url":"https://api.github.com/users/mimoralea","html_url":"https://github.com/mimoralea","followers_url":"https://api.github.com/users/mimoralea/followers","following_url":"https://api.github.com/users/mimoralea/following{/other_user}","gists_url":"https://api.github.com/users/mimoralea/gists{/gist_id}","starred_url":"https://api.github.com/users/mimoralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimoralea/subscriptions","organizations_url":"https://api.github.com/users/mimoralea/orgs","repos_url":"https://api.github.com/users/mimoralea/repos","events_url":"https://api.github.com/users/mimoralea/events{/privacy}","received_events_url":"https://api.github.com/users/mimoralea/received_events","type":"User","site_admin":false},"created_at":"2020-01-03T12:41:42Z","updated_at":"2020-01-03T12:41:42Z","author_association":"NONE","body":"Good, @kashif. I think the correct way is what you have. You can see the \"Official\"-Pytorch implementation uses the `min`: https://github.com/vitchyr/rlkit/blob/master/rlkit/torch/sac/sac.py#L108-L112\r\n\r\nSame with the Official (TensorFlow) implementation: https://github.com/rail-berkeley/softlearning/blob/master/softlearning/algorithms/sac.py#L241-L244\r\n\r\nI think opening up the pull request was the way to go, let's see what comes out of it.\r\n\r\nThanks for the good wishes, looking forward to the comments once it comes out.","reactions":{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570562020/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mimoralea","id":2921476,"node_id":"MDQ6VXNlcjI5MjE0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2921476?v=4","gravatar_id":"","url":"https://api.github.com/users/mimoralea","html_url":"https://github.com/mimoralea","followers_url":"https://api.github.com/users/mimoralea/followers","following_url":"https://api.github.com/users/mimoralea/following{/other_user}","gists_url":"https://api.github.com/users/mimoralea/gists{/gist_id}","starred_url":"https://api.github.com/users/mimoralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimoralea/subscriptions","organizations_url":"https://api.github.com/users/mimoralea/orgs","repos_url":"https://api.github.com/users/mimoralea/repos","events_url":"https://api.github.com/users/mimoralea/events{/privacy}","received_events_url":"https://api.github.com/users/mimoralea/received_events","type":"User","site_admin":false}},{"id":2920110768,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjkyMDExMDc2OA==","url":"https://api.github.com/repos/kashif/firedup/issues/events/2920110768","actor":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-03T12:41:43Z","performed_via_github_app":null},{"id":2920110769,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5MjAxMTA3Njk=","url":"https://api.github.com/repos/kashif/firedup/issues/events/2920110769","actor":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-03T12:41:43Z","performed_via_github_app":null},{"id":2920791819,"node_id":"MDExOkNsb3NlZEV2ZW50MjkyMDc5MTgxOQ==","url":"https://api.github.com/repos/kashif/firedup/issues/events/2920791819","actor":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-01-03T17:39:08Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570644292","html_url":"https://github.com/kashif/firedup/issues/10#issuecomment-570644292","issue_url":"https://api.github.com/repos/kashif/firedup/issues/10","id":570644292,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY0NDI5Mg==","user":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false},"created_at":"2020-01-03T17:42:48Z","updated_at":"2020-01-03T17:42:48Z","author_association":"OWNER","body":"Do note that the softlearning implementation came after the author's implementation which is probably what the spinningup was based on\r\n\r\nhttps://github.com/haarnoja/sac/blob/master/sac/algos/sac.py#L312-L316\r\n\r\nrail-berkeley/softlearning became the official implementation a bit later, I suspect when the updated paper came out...","reactions":{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570644292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kashif","id":8100,"node_id":"MDQ6VXNlcjgxMDA=","avatar_url":"https://avatars.githubusercontent.com/u/8100?v=4","gravatar_id":"","url":"https://api.github.com/users/kashif","html_url":"https://github.com/kashif","followers_url":"https://api.github.com/users/kashif/followers","following_url":"https://api.github.com/users/kashif/following{/other_user}","gists_url":"https://api.github.com/users/kashif/gists{/gist_id}","starred_url":"https://api.github.com/users/kashif/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kashif/subscriptions","organizations_url":"https://api.github.com/users/kashif/orgs","repos_url":"https://api.github.com/users/kashif/repos","events_url":"https://api.github.com/users/kashif/events{/privacy}","received_events_url":"https://api.github.com/users/kashif/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570669143","html_url":"https://github.com/kashif/firedup/issues/10#issuecomment-570669143","issue_url":"https://api.github.com/repos/kashif/firedup/issues/10","id":570669143,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2OTE0Mw==","user":{"login":"mimoralea","id":2921476,"node_id":"MDQ6VXNlcjI5MjE0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2921476?v=4","gravatar_id":"","url":"https://api.github.com/users/mimoralea","html_url":"https://github.com/mimoralea","followers_url":"https://api.github.com/users/mimoralea/followers","following_url":"https://api.github.com/users/mimoralea/following{/other_user}","gists_url":"https://api.github.com/users/mimoralea/gists{/gist_id}","starred_url":"https://api.github.com/users/mimoralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimoralea/subscriptions","organizations_url":"https://api.github.com/users/mimoralea/orgs","repos_url":"https://api.github.com/users/mimoralea/repos","events_url":"https://api.github.com/users/mimoralea/events{/privacy}","received_events_url":"https://api.github.com/users/mimoralea/received_events","type":"User","site_admin":false},"created_at":"2020-01-03T19:12:35Z","updated_at":"2020-01-03T19:18:32Z","author_association":"NONE","body":"Good point. I think the mix-up comes from the first version of the first paper. The second version seems to suggest two q-functions and using the min, and the second paper reinforces that.\r\n\r\nHere are the two papers (two papers with two versions each) for future reference:\r\n\r\nhttps://arxiv.org/abs/1801.01290v1:\r\n\r\n> In the policy improvement step, we update the policy towards the exponential of the new Q-function.\r\n\r\n\r\nhttps://arxiv.org/abs/1801.01290:\r\n\r\n> Our algorithm also makes use of two Q-functions to mitigate\r\n> positive bias in the policy improvement step that is known\r\n> to degrade performance of value based methods (Hasselt,\r\n> 2010; Fujimoto et al., 2018). In particular, we parameterize\r\n> two Q-functions, with parameters θi\r\n> , and train them independently to optimize JQ(θi). We then use the minimum of\r\n> the Q-functions for the value gradient in Equation 6 and policy gradient in Equation 13, as proposed by Fujimoto et al.\r\n> (2018)\r\n\r\n\r\nhttps://arxiv.org/abs/1812.05905v1:\r\n\r\n> Our algorithm makes use of two soft Q-functions to mitigate positive bias in the policy improvement\r\n> step that is known to degrade performance of value based methods (Hasselt, 2010; Fujimoto et al.,\r\n> 2018). In particular, we parameterize two soft Q-functions, with parameters θi\r\n> , and train them\r\n> independently to optimize JQ(θi). We then use the minimum of the the soft Q-functions for the\r\n> stochastic gradient in Equation 6 and policy gradient in Equation 10, as proposed by Fujimoto\r\n> et al. (2018). Although our algorithm can learn challenging tasks, including a 21-dimensional\r\n> Humanoid, using just a single Q-function, we found two soft Q-functions significantly speed up\r\n> training, especially on harder tasks\r\n\r\nhttps://arxiv.org/abs/1812.05905:\r\n\r\n> Our algorithm makes use of two soft Q-functions to mitigate positive bias in the policy improvement\r\n> step that is known to degrade performance of value based methods (Hasselt, 2010; Fujimoto et al.,\r\n> 2018). In particular, we parameterize two soft Q-functions, with parameters θi\r\n> , and train them\r\n> independently to optimize JQ(θi). We then use the minimum of the the soft Q-functions for the\r\n> stochastic gradient in Equation 6 and policy gradient in Equation 10, as proposed by Fujimoto\r\n> et al. (2018). Although our algorithm can learn challenging tasks, including a 21-dimensional\r\n> Humanoid, using just a single Q-function, we found two soft Q-functions significantly speed up\r\n> training, especially on harder tasks.\r\n","reactions":{"url":"https://api.github.com/repos/kashif/firedup/issues/comments/570669143/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mimoralea","id":2921476,"node_id":"MDQ6VXNlcjI5MjE0NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2921476?v=4","gravatar_id":"","url":"https://api.github.com/users/mimoralea","html_url":"https://github.com/mimoralea","followers_url":"https://api.github.com/users/mimoralea/followers","following_url":"https://api.github.com/users/mimoralea/following{/other_user}","gists_url":"https://api.github.com/users/mimoralea/gists{/gist_id}","starred_url":"https://api.github.com/users/mimoralea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mimoralea/subscriptions","organizations_url":"https://api.github.com/users/mimoralea/orgs","repos_url":"https://api.github.com/users/mimoralea/repos","events_url":"https://api.github.com/users/mimoralea/events{/privacy}","received_events_url":"https://api.github.com/users/mimoralea/received_events","type":"User","site_admin":false}}]