[{"id":2251997096,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyNTE5OTcwOTY=","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2251997096","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-04-04T07:28:58Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":2251997106,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyMjUxOTk3MTA2","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2251997106","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-04-04T07:28:58Z","assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/479783720","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-479783720","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":479783720,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTc4MzcyMA==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-04T07:30:20Z","updated_at":"2019-04-04T07:30:20Z","author_association":"NONE","body":"识别语音合成都没有问题，临时文件下载回来也可以播放，但是在树莓派zero上就没有播放出来声音。\r\n\r\n开始启动时的时候的有声音，还有录音开始和结束的提示音都有。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/479783720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/479785659","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-479785659","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":479785659,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTc4NTY1OQ==","user":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-04-04T07:36:42Z","updated_at":"2019-04-04T07:36:42Z","author_association":"OWNER","body":"我暂时没想出可能原因。\r\n\r\n不过，启动的声音、录音开始结束音、TTS合成音都是使用play命令播放，并无二致。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/479785659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480309894","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480309894","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480309894,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDMwOTg5NA==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-05T15:04:43Z","updated_at":"2019-04-05T15:14:52Z","author_association":"NONE","body":"今天在另外一块3b+上测试也是同样的问题，我直接用`play`命令也不能播放：\r\n```\r\n$ play /var/tmp/tmp49ct9g5j.mp3\r\n\r\n/var/tmp/tmp49ct9g5j.mp3:\r\n\r\n File Size: 4.90k     Bit Rate: 16.0k\r\n  Encoding: MPEG audio    \r\n  Channels: 1 @ 16-bit   \r\nSamplerate: 16000Hz      \r\nReplaygain: off         \r\n  Duration: 00:00:02.45  \r\n\r\nIn:0.00% 00:00:00.00 [00:00:02.45] Out:0     [      |      ]        Clip:0  \r\n```\r\n另一个终端窗口查看进程\r\n```\r\npi@raspberrypi:~/wukong-robot $ ps -ef | grep mp3\r\npi        1417  1369  0 23:10 pts/0    00:00:00 play -v 1 /var/tmp/tmp0sl7br4m.mp3\r\npi        1423  1130  0 23:11 pts/1    00:00:00 grep --color=auto mp3\r\n```\r\n发现有一个`play -v 1 /var/tmp/tmp0sl7br4m.mp3`卡住了。然后发现将wukong给关掉，这时再用play就可以播放，是不是线程独占文件的问题？","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480309894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480477120","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480477120","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480477120,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ3NzEyMA==","user":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T05:57:48Z","updated_at":"2019-04-06T05:57:48Z","author_association":"OWNER","body":"装了 pulseaudio 了吗？","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480477120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480491927","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480491927","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480491927,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5MTkyNw==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T10:06:56Z","updated_at":"2019-04-06T10:06:56Z","author_association":"NONE","body":"@wzpan \r\n装了\r\n\r\n> pi@raspberrypi:~ $ sudo apt-get install pulseaudio -y\r\n> Reading package lists... Done\r\n> Building dependency tree       \r\n> Reading state information... Done\r\n> pulseaudio is already the newest version (10.0-1+deb9u1).\r\n> The following packages were automatically installed and are no longer required:\r\n>   vlc-plugin-notify vlc-plugin-samba vlc-plugin-video-splitter\r\n>   vlc-plugin-visualization\r\n> Use 'sudo apt autoremove' to remove them.\r\n> 0 upgraded, 0 newly installed, 0 to remove and 12 not upgraded.","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480491927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"id":2257380013,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjI1NzM4MDAxMw==","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2257380013","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-06T10:06:56Z","performed_via_github_app":null},{"id":2257380014,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyNTczODAwMTQ=","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2257380014","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-06T10:06:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480492067","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480492067","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480492067,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5MjA2Nw==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T10:09:37Z","updated_at":"2019-04-06T10:09:37Z","author_association":"NONE","body":"现在就是play会被hang住（试过了aplay播放wav也是同样问题），在临时文件创建那里也加了f.close()也不起作用。只要把wukong关掉，再播放就没有问题。用了lsof查看也是那个mp3文件被一个play进程给hang住了。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480492067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480492715","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480492715","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480492715,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5MjcxNQ==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T10:20:13Z","updated_at":"2019-04-06T10:20:13Z","author_association":"NONE","body":"简单再说明一下流程：\r\n1. 关键词唤醒后，叮咚一下，开始录音，被识别，转换成文字，图灵机器人回答，再TTS合成语音，生成一个临时文件\r\n2. 这时wukong不播放这个语音\r\n3. 同时在另一个终端窗口中，用进程查看，发现有一个play进程，用lsof查看文件也是这个play进程hang在那里\r\n4. 这时在另一个终端窗口中，直接用play -v 1 /tmp/临时.mp3，亦被hang住\r\n5. 这时将wukong给关掉（ctrl + \\），第4步被hang住的就可以播放了，再次运行命令播放也没有问题。\r\n\r\n已经试过以下解决方案：\r\n1. 换另外一个temp目录生成临时文件\r\n2. 用uuid生成临时文件名，不用tempfile包，直接用open(f, \"wb\")写文件\r\n3. 换aplay，生成wav临时文件\r\n4. 在util.py里生成临时文件的地方加上f.close()\r\n以上都不起作用，生成的文件在wukong关闭后都可以播放。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480492715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480493322","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480493322","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480493322,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5MzMyMg==","user":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T10:30:17Z","updated_at":"2019-04-06T10:30:17Z","author_association":"OWNER","body":"我刚改了一下 SoxPlayer 的实现方式（https://github.com/wzpan/wukong-robot/commit/e12b3d107ae7613b20ef954ad762eb05abfef866 ）。你看看还有没有问题。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480493322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480493399","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480493399","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480493399,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5MzM5OQ==","user":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T10:31:44Z","updated_at":"2019-04-06T10:31:44Z","author_association":"OWNER","body":"想了一下，有一种可能的原因，你是不是克隆悟空仓库的时候用了sudo？有可能是因为没权限写入不了文件导致阻塞了播放。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480493399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480494985","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480494985","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480494985,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5NDk4NQ==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T11:00:40Z","updated_at":"2019-04-06T11:00:40Z","author_association":"NONE","body":"@wzpan 我没有sudo去git clone，就是用pi用户克隆的。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480494985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"id":2257397089,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjI1NzM5NzA4OQ==","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2257397089","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-06T11:00:40Z","performed_via_github_app":null},{"id":2257397090,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyNTczOTcwOTA=","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2257397090","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-06T11:00:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480495393","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480495393","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480495393,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5NTM5Mw==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T11:08:00Z","updated_at":"2019-04-06T11:10:07Z","author_association":"NONE","body":"刚刚pull了最新的代码测试。\r\n\r\n第一个终端：\r\n\r\n> pi@raspberrypi:~ $ cd wukong-robot/\r\n> pi@raspberrypi:~/wukong-robot $ git pull\r\n> remote: Enumerating objects: 14, done.\r\n> remote: Counting objects: 100% (14/14), done.\r\n> remote: Compressing objects: 100% (3/3), done.\r\n> remote: Total 16 (delta 10), reused 14 (delta 10), pack-reused 2\r\n> Unpacking objects: 100% (16/16), done.\r\n> From https://github.com/wzpan/wukong-robot\r\n>    e248db0..74d9fc5  master     -> origin/master\r\n>  * [new tag]         1.4.9      -> 1.4.9\r\n> Updating e248db0..74d9fc5\r\n> Fast-forward\r\n>  VERSION          |  2 +-\r\n>  robot/Player.py  | 18 ++++++------------\r\n>  robot/config.py  |  2 +-\r\n>  robot/logging.py |  9 ++-------\r\n>  4 files changed, 10 insertions(+), 21 deletions(-)\r\n> pi@raspberrypi:~/wukong-robot $ python3 wukong.py \r\n> ...\r\n> INFO:snowboy:Keyword 2 detected at time: 2019-04-06 12:02:58\r\n> INFO:snowboy:Keyword 1 detected at time: 2019-04-06 12:03:00\r\n> INFO:__main__:开始录音\r\n> INFO:robot.Conversation:结束录音\r\n> INFO:robot.ASR:baidu-asr 语音识别到了：['哦，您好，']\r\n> INFO:robot.AI:tuling 回答：在在，我在呢，我亲爱的小伙伴\r\n> INFO:robot.TTS:baidu-tts 语音合成成功，合成路径：**/tmp/tmpijjts6g0.mp3**\r\n\r\n第二终端（同时）：\r\n\r\n> pi@raspberrypi:~ $ ps -ef | grep play\r\n> pi       21603 21311  0 12:03 pts/0    00:00:00 **play -v 1 /tmp/tmpijjts6g0.mp3**\r\n> pi       21819 21311  0 12:04 pts/0    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\n> pi       21872 21311  0 12:04 pts/0    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\n> pi       21990 21311  1 12:04 pts/0    00:00:00 play -v 1 /tmp/tmpjotkzb6a.mp3\r\n> pi       22009 21939  0 12:04 pts/1    00:00:00 grep --color=auto play\r\n> pi@raspberrypi:~ $ ls -la /tmp/*.mp3\r\n> -rw------- 1 pi pi  4248 Apr  6 11:20 /tmp/tmp0gm0iodh.mp3\r\n> -rw------- 1 pi pi  6048 Apr  6 11:20 /tmp/tmp5jl2bdmn.mp3\r\n> -rw------- 1 pi pi  3960 Apr  6 11:18 /tmp/tmpa1zc1tgj.mp3\r\n> -rw------- 1 pi pi 13752 Apr  6 11:21 /tmp/tmpb1x847mn.mp3\r\n> -rw------- 1 pi pi  7920 Apr  6 11:19 /tmp/tmpc_rzqikq.mp3\r\n> **-rw------- 1 pi pi  7200 Apr  6 12:03 /tmp/tmpijjts6g0.mp3**\r\n> -rw------- 1 pi pi  5760 Apr  6 11:21 /tmp/tmpjhn74bz9.mp3\r\n> -rw------- 1 pi pi 10944 Apr  6 12:04 /tmp/tmpjotkzb6a.mp3\r\n> pi@raspberrypi:~ $ lsof /tmp/*.mp3\r\n> COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\r\n> **play    21603   pi    3r   REG  179,2     7200 4578 /tmp/tmpijjts6g0.mp3**","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480495393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480495570","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480495570","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480495570,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDQ5NTU3MA==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T11:11:05Z","updated_at":"2019-04-06T11:11:05Z","author_association":"NONE","body":"可以看到上面生成的/tmp/tmpijjts6g0.mp3在play的时候被hang住了。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480495570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480507599","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480507599","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480507599,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDUwNzU5OQ==","user":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-04-06T14:16:17Z","updated_at":"2019-04-06T14:16:17Z","author_association":"OWNER","body":"你这个问题很诡异，我也不知道怎么解决了。在我的 Pi 3 上是无法复现的。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480507599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480553324","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480553324","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480553324,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDU1MzMyNA==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-07T02:29:09Z","updated_at":"2019-04-07T02:29:09Z","author_association":"NONE","body":"@wzpan 又查了一下，发现是设备独占的问题，在热词唤醒那里（snowboydecoder.py）有一个while循环，在这里audio设备被占用了，如果运行时按ctrl+c，snowboy会退出，这时就可以播放了（通过网页发送命令），但是热词唤醒功能就没有了，因为对pyaudio不熟悉，不知道要如何处理。\r\n不知道你是什么设备？我打印了我的设备：\r\n`{'index': 0, 'structVersion': 2, 'name': 'wm8960-soundcard: - (hw:0,0)', 'hostApi': 0, 'maxInputChannels': 2, 'maxOutputChannels': 0, 'defaultLowInputLatency': 0.005804988662131519, 'defaultLowOutputLatency': -1.0, 'defaultHighInputLatency': 0.034829931972789115, 'defaultHighOutputLatency': -1.0, 'defaultSampleRate': 44100.0}`","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480553324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"id":2257730168,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjI1NzczMDE2OA==","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2257730168","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-07T02:29:09Z","performed_via_github_app":null},{"id":2257730169,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyNTc3MzAxNjk=","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2257730169","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-07T02:29:09Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480824180","html_url":"https://github.com/wzpan/wukong-robot/issues/47#issuecomment-480824180","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/47","id":480824180,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDgyNDE4MA==","user":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"created_at":"2019-04-08T13:08:06Z","updated_at":"2019-04-08T13:08:06Z","author_association":"NONE","body":"把播放和录音设备分开了，解决了。","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/480824180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false}},{"id":2259621799,"node_id":"MDExOkNsb3NlZEV2ZW50MjI1OTYyMTc5OQ==","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2259621799","actor":{"login":"zhiwehu","id":1313947,"node_id":"MDQ6VXNlcjEzMTM5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1313947?v=4","gravatar_id":"","url":"https://api.github.com/users/zhiwehu","html_url":"https://github.com/zhiwehu","followers_url":"https://api.github.com/users/zhiwehu/followers","following_url":"https://api.github.com/users/zhiwehu/following{/other_user}","gists_url":"https://api.github.com/users/zhiwehu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhiwehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhiwehu/subscriptions","organizations_url":"https://api.github.com/users/zhiwehu/orgs","repos_url":"https://api.github.com/users/zhiwehu/repos","events_url":"https://api.github.com/users/zhiwehu/events{/privacy}","received_events_url":"https://api.github.com/users/zhiwehu/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-04-08T13:08:06Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T05:31:53Z","updated_at":"2019-04-10T05:31:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/51","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/51/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/51/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/51/events","html_url":"https://github.com/wzpan/wukong-robot/issues/51","id":431266683,"node_id":"MDU6SXNzdWU0MzEyNjY2ODM=","number":51,"title":"问答无声音，开机有问候音，第一次唤醒有beep音，后续就没有声音了。","user":{"login":"5high","id":25703510,"node_id":"MDQ6VXNlcjI1NzAzNTEw","avatar_url":"https://avatars.githubusercontent.com/u/25703510?v=4","gravatar_id":"","url":"https://api.github.com/users/5high","html_url":"https://github.com/5high","followers_url":"https://api.github.com/users/5high/followers","following_url":"https://api.github.com/users/5high/following{/other_user}","gists_url":"https://api.github.com/users/5high/gists{/gist_id}","starred_url":"https://api.github.com/users/5high/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/5high/subscriptions","organizations_url":"https://api.github.com/users/5high/orgs","repos_url":"https://api.github.com/users/5high/repos","events_url":"https://api.github.com/users/5high/events{/privacy}","received_events_url":"https://api.github.com/users/5high/received_events","type":"User","site_admin":false},"labels":[{"id":1196019304,"node_id":"MDU6TGFiZWwxMTk2MDE5MzA0","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"我的锅"}],"state":"closed","locked":false,"assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"assignees":[{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":14,"created_at":"2019-04-10T01:48:18Z","updated_at":"2019-07-30T08:31:55Z","closed_at":"2019-07-30T08:31:55Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":166071450,"node_id":"MDEwOlJlcG9zaXRvcnkxNjYwNzE0NTA=","name":"wukong-robot","full_name":"wzpan/wukong-robot","private":false,"owner":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/wzpan/wukong-robot","description":"🤖 wukong-robot 是一个简单、灵活、优雅的中文语音对话机器人/智能音箱项目，还可能是首个支持脑机交互的开源智能音箱项目。","fork":false,"url":"https://api.github.com/repos/wzpan/wukong-robot","forks_url":"https://api.github.com/repos/wzpan/wukong-robot/forks","keys_url":"https://api.github.com/repos/wzpan/wukong-robot/keys{/key_id}","collaborators_url":"https://api.github.com/repos/wzpan/wukong-robot/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/wzpan/wukong-robot/teams","hooks_url":"https://api.github.com/repos/wzpan/wukong-robot/hooks","issue_events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events{/number}","events_url":"https://api.github.com/repos/wzpan/wukong-robot/events","assignees_url":"https://api.github.com/repos/wzpan/wukong-robot/assignees{/user}","branches_url":"https://api.github.com/repos/wzpan/wukong-robot/branches{/branch}","tags_url":"https://api.github.com/repos/wzpan/wukong-robot/tags","blobs_url":"https://api.github.com/repos/wzpan/wukong-robot/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/wzpan/wukong-robot/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/wzpan/wukong-robot/git/refs{/sha}","trees_url":"https://api.github.com/repos/wzpan/wukong-robot/git/trees{/sha}","statuses_url":"https://api.github.com/repos/wzpan/wukong-robot/statuses/{sha}","languages_url":"https://api.github.com/repos/wzpan/wukong-robot/languages","stargazers_url":"https://api.github.com/repos/wzpan/wukong-robot/stargazers","contributors_url":"https://api.github.com/repos/wzpan/wukong-robot/contributors","subscribers_url":"https://api.github.com/repos/wzpan/wukong-robot/subscribers","subscription_url":"https://api.github.com/repos/wzpan/wukong-robot/subscription","commits_url":"https://api.github.com/repos/wzpan/wukong-robot/commits{/sha}","git_commits_url":"https://api.github.com/repos/wzpan/wukong-robot/git/commits{/sha}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/comments{/number}","issue_comment_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments{/number}","contents_url":"https://api.github.com/repos/wzpan/wukong-robot/contents/{+path}","compare_url":"https://api.github.com/repos/wzpan/wukong-robot/compare/{base}...{head}","merges_url":"https://api.github.com/repos/wzpan/wukong-robot/merges","archive_url":"https://api.github.com/repos/wzpan/wukong-robot/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/wzpan/wukong-robot/downloads","issues_url":"https://api.github.com/repos/wzpan/wukong-robot/issues{/number}","pulls_url":"https://api.github.com/repos/wzpan/wukong-robot/pulls{/number}","milestones_url":"https://api.github.com/repos/wzpan/wukong-robot/milestones{/number}","notifications_url":"https://api.github.com/repos/wzpan/wukong-robot/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/labels{/name}","releases_url":"https://api.github.com/repos/wzpan/wukong-robot/releases{/id}","deployments_url":"https://api.github.com/repos/wzpan/wukong-robot/deployments","created_at":"2019-01-16T16:19:51Z","updated_at":"2023-01-19T05:00:55Z","pushed_at":"2023-01-04T04:05:23Z","git_url":"git://github.com/wzpan/wukong-robot.git","ssh_url":"git@github.com:wzpan/wukong-robot.git","clone_url":"https://github.com/wzpan/wukong-robot.git","svn_url":"https://github.com/wzpan/wukong-robot","homepage":"https://wukong.hahack.com/","size":10993,"stargazers_count":3749,"watchers_count":3749,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":983,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ai","alexa","amazon-echo","anyq","asr","bci","google-home","homeassistant","muse","raspeberry-pi","snowboy","speaker","tts","unit"],"visibility":"public","forks":983,"open_issues":10,"watchers":3749,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**确认已寻找过答案**\r\n\r\n我已确认在 [Github issue](https://github.com/wzpan/wukong-robot/issues) 页、[常见问题](https://github.com/wzpan/wukong-robot/wiki/troubleshooting)页、[文档](http://wukong.hahack.com) 中都查找过，没有找到类似问题和资料。我也没有 google / bing/ 百度 / duckduckgo 到相关解答。\r\n\r\n**安装方式**\r\n\r\n手动安装\r\n\r\n**操作系统**\r\n\r\nRaspbian Stretch\r\n\r\n**问题描述**\r\n\r\n日志正常显示问答内容，麦克风正常，语音识别正常，只是喇叭无声音。\r\n\r\n2019-04-10 09:47:09,059 - snowboy - INFO - Keyword 1 detected at time: 2019-04-10 09:47:09\r\n2019-04-10 09:47:09,084 - __main__ - INFO - 开始录音\r\n2019-04-10 09:47:13,667 - robot.Conversation - INFO - 结束录音\r\n2019-04-10 09:47:16,627 - robot.ASR - INFO - baidu-asr 语音识别到了：['你好吗？']\r\n2019-04-10 09:47:18,823 - robot.AI - INFO - emotibot 回答：你好吗？我很好！你有没有觉得像电影《情书》的情节~\r\n2019-04-10 09:47:19,358 - robot.TTS - INFO - baidu-tts 语音合成成功，合成路径：/tmp/tmp4im8isy1.mp3\r\n\r\n\r\n\r\n进程里出现一堆play命令\r\npi         722   651  0 09:39 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/temp/ed0b13acab092d00d8af1bd781caccfb.mp3\r\npi         726   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         730   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         735   651  0 09:40 pts/1    00:00:00 play -v 1 /tmp/tmpm8sqejau.mp3\r\npi         739   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         746   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\nroot       748   433  0 09:40 ?        00:00:00 sshd: pi [priv]\r\npi         756   651  0 09:40 pts/1    00:00:00 play -v 1 /tmp/tmp_8_b0onm.mp3\r\npi         762   748  0 09:40 ?        00:00:00 sshd: pi@pts/2\r\npi         766   762  0 09:40 pts/2    00:00:01 -bash\r\npi         773   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         796   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         801   651  0 09:40 pts/1    00:00:00 play -v 1 /tmp/tmpooe1v9hj.mp3\r\npi         806   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         812   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         817   651  0 09:40 pts/1    00:00:00 play -v 1 /tmp/tmpz6vl1sxj.mp3\r\npi         821   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         829   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         835   651  0 09:40 pts/1    00:00:00 play -v 1 /tmp/tmpaeu30im5.mp3\r\npi         839   651  0 09:40 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         847   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         852   651  0 09:41 pts/1    00:00:00 play -v 1 /tmp/tmpty2fy0ft.mp3\r\npi         856   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         866   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         871   651  0 09:41 pts/1    00:00:00 play -v 1 /tmp/tmperjxl98o.mp3\r\npi         875   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         882   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         887   651  0 09:41 pts/1    00:00:00 play -v 1 /tmp/tmpiqtmj2t_.mp3\r\npi         891   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         897   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         902   651  0 09:41 pts/1    00:00:00 play -v 1 /tmp/tmplnlr5s8h.mp3\r\npi         906   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         912   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         917   651  0 09:41 pts/1    00:00:00 play -v 1 /tmp/tmp72djtvkh.mp3\r\npi         921   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         927   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         932   651  0 09:41 pts/1    00:00:00 play -v 1 /tmp/tmpco8ax2gc.mp3\r\npi         936   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         942   651  0 09:41 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         948   651  0 09:42 pts/1    00:00:00 play -v 1 /tmp/tmptm9nklya.mp3\r\npi         952   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         958   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         963   651  0 09:42 pts/1    00:00:00 play -v 1 /tmp/tmpozu1etqv.mp3\r\npi         967   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         973   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         978   651  0 09:42 pts/1    00:00:00 play -v 1 /tmp/tmpwksz0kxl.mp3\r\npi         982   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi         988   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi         993   651  0 09:42 pts/1    00:00:00 play -v 1 /tmp/tmp0ka1bp3f.mp3\r\npi         997   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi        1003   651  0 09:42 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi        1008   651  0 09:42 pts/1    00:00:00 play -v 1 /tmp/tmpdu1cmh3o.mp3\r\npi        1014   651  0 09:43 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi        1018   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi        1023   651  0 09:44 pts/1    00:00:00 play -v 1 /tmp/tmp6vvo3e20.mp3\r\npi        1027   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi        1033   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\nroot      1034     2  0 09:44 ?        00:00:01 [kworker/u2:3]\r\npi        1039   651  0 09:44 pts/1    00:00:00 play -v 1 /tmp/tmpkeq37pkz.mp3\r\npi        1043   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi        1049   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi        1054   651  0 09:44 pts/1    00:00:00 play -v 1 /tmp/tmp97b6gqjo.mp3\r\npi        1058   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi        1065   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_lo.wav\r\npi        1071   651  0 09:44 pts/1    00:00:00 play -v 1 /tmp/tmp11w0emtn.mp3\r\npi        1076   651  0 09:44 pts/1    00:00:00 play -v 1 /home/pi/wukong-robot/static/beep_hi.wav\r\npi        1089   651  0 09:44 pts/1    00:00:00 play -v 1 /tmp/tmpntzmep9u.mp3\r\n**复现步骤**\r\n\r\n具体描述下复现步骤\r\n","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/51/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/51/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"Xiaoshizi1024","id":32703518,"node_id":"MDQ6VXNlcjMyNzAzNTE4","avatar_url":"https://avatars.githubusercontent.com/u/32703518?v=4","gravatar_id":"","url":"https://api.github.com/users/Xiaoshizi1024","html_url":"https://github.com/Xiaoshizi1024","followers_url":"https://api.github.com/users/Xiaoshizi1024/followers","following_url":"https://api.github.com/users/Xiaoshizi1024/following{/other_user}","gists_url":"https://api.github.com/users/Xiaoshizi1024/gists{/gist_id}","starred_url":"https://api.github.com/users/Xiaoshizi1024/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xiaoshizi1024/subscriptions","organizations_url":"https://api.github.com/users/Xiaoshizi1024/orgs","repos_url":"https://api.github.com/users/Xiaoshizi1024/repos","events_url":"https://api.github.com/users/Xiaoshizi1024/events{/privacy}","received_events_url":"https://api.github.com/users/Xiaoshizi1024/received_events","type":"User","site_admin":false},"created_at":"2019-04-13T12:38:51Z","updated_at":"2019-04-13T12:38:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/55","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/55/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/55/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/55/events","html_url":"https://github.com/wzpan/wukong-robot/issues/55","id":432842897,"node_id":"MDU6SXNzdWU0MzI4NDI4OTc=","number":55,"title":"树莓派3B+语音无输出 ","user":{"login":"Xiaoshizi1024","id":32703518,"node_id":"MDQ6VXNlcjMyNzAzNTE4","avatar_url":"https://avatars.githubusercontent.com/u/32703518?v=4","gravatar_id":"","url":"https://api.github.com/users/Xiaoshizi1024","html_url":"https://github.com/Xiaoshizi1024","followers_url":"https://api.github.com/users/Xiaoshizi1024/followers","following_url":"https://api.github.com/users/Xiaoshizi1024/following{/other_user}","gists_url":"https://api.github.com/users/Xiaoshizi1024/gists{/gist_id}","starred_url":"https://api.github.com/users/Xiaoshizi1024/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xiaoshizi1024/subscriptions","organizations_url":"https://api.github.com/users/Xiaoshizi1024/orgs","repos_url":"https://api.github.com/users/Xiaoshizi1024/repos","events_url":"https://api.github.com/users/Xiaoshizi1024/events{/privacy}","received_events_url":"https://api.github.com/users/Xiaoshizi1024/received_events","type":"User","site_admin":false},"labels":[{"id":1236422386,"node_id":"MDU6TGFiZWwxMjM2NDIyMzg2","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/operation%20problem","name":"operation problem","color":"8bed95","default":false,"description":"用户操作问题"}],"state":"closed","locked":false,"assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"assignees":[{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-04-13T12:38:51Z","updated_at":"2019-04-15T12:53:39Z","closed_at":"2019-04-15T12:53:39Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":166071450,"node_id":"MDEwOlJlcG9zaXRvcnkxNjYwNzE0NTA=","name":"wukong-robot","full_name":"wzpan/wukong-robot","private":false,"owner":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"html_url":"https://github.com/wzpan/wukong-robot","description":"🤖 wukong-robot 是一个简单、灵活、优雅的中文语音对话机器人/智能音箱项目，还可能是首个支持脑机交互的开源智能音箱项目。","fork":false,"url":"https://api.github.com/repos/wzpan/wukong-robot","forks_url":"https://api.github.com/repos/wzpan/wukong-robot/forks","keys_url":"https://api.github.com/repos/wzpan/wukong-robot/keys{/key_id}","collaborators_url":"https://api.github.com/repos/wzpan/wukong-robot/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/wzpan/wukong-robot/teams","hooks_url":"https://api.github.com/repos/wzpan/wukong-robot/hooks","issue_events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events{/number}","events_url":"https://api.github.com/repos/wzpan/wukong-robot/events","assignees_url":"https://api.github.com/repos/wzpan/wukong-robot/assignees{/user}","branches_url":"https://api.github.com/repos/wzpan/wukong-robot/branches{/branch}","tags_url":"https://api.github.com/repos/wzpan/wukong-robot/tags","blobs_url":"https://api.github.com/repos/wzpan/wukong-robot/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/wzpan/wukong-robot/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/wzpan/wukong-robot/git/refs{/sha}","trees_url":"https://api.github.com/repos/wzpan/wukong-robot/git/trees{/sha}","statuses_url":"https://api.github.com/repos/wzpan/wukong-robot/statuses/{sha}","languages_url":"https://api.github.com/repos/wzpan/wukong-robot/languages","stargazers_url":"https://api.github.com/repos/wzpan/wukong-robot/stargazers","contributors_url":"https://api.github.com/repos/wzpan/wukong-robot/contributors","subscribers_url":"https://api.github.com/repos/wzpan/wukong-robot/subscribers","subscription_url":"https://api.github.com/repos/wzpan/wukong-robot/subscription","commits_url":"https://api.github.com/repos/wzpan/wukong-robot/commits{/sha}","git_commits_url":"https://api.github.com/repos/wzpan/wukong-robot/git/commits{/sha}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/comments{/number}","issue_comment_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments{/number}","contents_url":"https://api.github.com/repos/wzpan/wukong-robot/contents/{+path}","compare_url":"https://api.github.com/repos/wzpan/wukong-robot/compare/{base}...{head}","merges_url":"https://api.github.com/repos/wzpan/wukong-robot/merges","archive_url":"https://api.github.com/repos/wzpan/wukong-robot/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/wzpan/wukong-robot/downloads","issues_url":"https://api.github.com/repos/wzpan/wukong-robot/issues{/number}","pulls_url":"https://api.github.com/repos/wzpan/wukong-robot/pulls{/number}","milestones_url":"https://api.github.com/repos/wzpan/wukong-robot/milestones{/number}","notifications_url":"https://api.github.com/repos/wzpan/wukong-robot/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/labels{/name}","releases_url":"https://api.github.com/repos/wzpan/wukong-robot/releases{/id}","deployments_url":"https://api.github.com/repos/wzpan/wukong-robot/deployments","created_at":"2019-01-16T16:19:51Z","updated_at":"2023-01-19T05:00:55Z","pushed_at":"2023-01-04T04:05:23Z","git_url":"git://github.com/wzpan/wukong-robot.git","ssh_url":"git@github.com:wzpan/wukong-robot.git","clone_url":"https://github.com/wzpan/wukong-robot.git","svn_url":"https://github.com/wzpan/wukong-robot","homepage":"https://wukong.hahack.com/","size":10993,"stargazers_count":3749,"watchers_count":3749,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":983,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ai","alexa","amazon-echo","anyq","asr","bci","google-home","homeassistant","muse","raspeberry-pi","snowboy","speaker","tts","unit"],"visibility":"public","forks":983,"open_issues":10,"watchers":3749,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**问题描述**\r\n运行wukong.py 没有开机的提示音效，只有录音前后的提示音，语音交互后，没有语音输出...  \r\n**安装方式**\r\n\r\n手动安装\r\n\r\n**背景**\r\n- Raspbian Stretch\r\n- 环境在虚拟环境中   \r\n- 树莓派双麦克阵列麦克风 \r\n      \r\n**进行的尝试**  \r\n## 1.2  叮咚不说话  \r\n问她问题， 它只在play 录音开始跟录音结束的声音，但是没有对最后的结果进行播报。。。  \r\n相关issue: [https://github.com/wzpan/wukong-robot/issues/47](https://github.com/wzpan/wukong-robot/issues/47)  \r\n行动:  \r\n* 根据issue  安装  pulseaudio\r\n```\r\n(py3venv) pi@raspberrypi:~/wukong $ sudo apt-get install pulseaudio -y\r\n正在读取软件包列表... 完成\r\n正在分析软件包的依赖关系树       \r\n正在读取状态信息... 完成       \r\n下列软件包是自动安装的并且现在不需要了：\r\n  dconf-cli erlang-base erlang-crypto erlang-syntax-tools fonts-lato\r\n  gir1.2-ibus-1.0 gir1.2-packagekitglib-1.0 gnome-software-common\r\n  libappstream-glib8 libboost-thread1.62.0 libfwupd1 libgcab-1.0-0\r\n  libgtkspell3-3-0 libibus-1.0-5 liblua5.1-0 libpng-tools libpyzy-1.0-0v5\r\n  libqt5opengl5 libqt5scintilla2-12v5 libqt5scintilla2-l10n libqt5x11extras5\r\n  libqwt-qt5-6 libruby2.3 libscsynth1 libsctp1 libxrender-dev python3-pycurl\r\n  python3-software-properties rake ruby ruby-did-you-mean ruby-minitest\r\n  ruby-net-telnet ruby-power-assert ruby-test-unit ruby2.3\r\n  rubygems-integration software-properties-common software-properties-gtk\r\n  unattended-upgrades x11proto-render-dev\r\n使用'sudo apt autoremove'来卸载它(它们)。\r\n将会同时安装下列软件：\r\n  libpulsedsp pulseaudio-utils rtkit\r\n建议安装：\r\n  pavumeter pavucontrol paman paprefs\r\n下列【新】软件包将被安装：\r\n  libpulsedsp pulseaudio pulseaudio-utils rtkit\r\n升级了 0 个软件包，新安装了 4 个软件包，要卸载 0 个软件包，有 11 个软件包未被升级。\r\n需要下载 1,187 kB 的归档。\r\n解压缩后会消耗 6,164 kB 的额外空间。\r\n获取:1 http://mirrors.ustc.edu.cn/raspbian/raspbian stretch/main armhf libpulsedsp armhf 10.0-1+deb9u1 [52.0 kB]\r\n获取:2 http://mirrors.ustc.edu.cn/raspbian/raspbian stretch/main armhf pulseaudio-utils armhf 10.0-1+deb9u1 [82.8 kB]\r\n获取:3 http://mirrors.ustc.edu.cn/raspbian/raspbian stretch/main armhf pulseaudio armhf 10.0-1+deb9u1 [1,020 kB]\r\n获取:4 http://mirrors.ustc.edu.cn/raspbian/raspbian stretch/main armhf rtkit armhf 0.11-4+deb9u1 [32.2 kB]\r\n已下载 1,187 kB，耗时 1分 51秒 (10.6 kB/s)\r\n正在选中未选择的软件包 libpulsedsp:armhf。\r\n(正在读取数据库 ... 系统当前共安装有 136359 个文件和目录。)\r\n正准备解包 .../libpulsedsp_10.0-1+deb9u1_armhf.deb  ...\r\n正在解包 libpulsedsp:armhf (10.0-1+deb9u1) ...\r\n正在选中未选择的软件包 pulseaudio-utils。\r\n正准备解包 .../pulseaudio-utils_10.0-1+deb9u1_armhf.deb  ...\r\n正在解包 pulseaudio-utils (10.0-1+deb9u1) ...\r\n正在选中未选择的软件包 pulseaudio。\r\n正准备解包 .../pulseaudio_10.0-1+deb9u1_armhf.deb  ...\r\n正在解包 pulseaudio (10.0-1+deb9u1) ...\r\n正在选中未选择的软件包 rtkit。\r\n正准备解包 .../rtkit_0.11-4+deb9u1_armhf.deb  ...\r\n正在解包 rtkit (0.11-4+deb9u1) ...\r\n正在设置 libpulsedsp:armhf (10.0-1+deb9u1) ...\r\n正在设置 pulseaudio-utils (10.0-1+deb9u1) ...\r\n正在设置 rtkit (0.11-4+deb9u1) ...\r\nCreated symlink /etc/systemd/system/graphical.target.wants/rtkit-daemon.service → /lib/systemd/system/rtkit-daemon.service.\r\n正在处理用于 man-db (2.7.6.1-2) 的触发器 ...\r\n正在处理用于 dbus (1.10.26-0+deb9u1) 的触发器 ...\r\n正在设置 pulseaudio (10.0-1+deb9u1) ...\r\n正在将用户“pulse”加入到“audio”组中\r\n正在处理用于 dbus (1.10.26-0+deb9u1) 的触发器 ...\r\n(py3venv) pi@raspberrypi:~/wukong $ ^C\r\n````\r\n```\r\n结果正在运行的 wukong.py 竟然一点声音也没要有啦。。。   \r\n行动： 重新运行 wukong.py  还是没有声音，决重启电脑看看    \r\n\r\n 重启之后，发现其实是能够播放声音啦，只是声音是从 核心表的音频口播放的，而不是在音频盘子上出来的  \r\n\r\n其实这里面可以延伸出来两个问他\r\nQ 1： 如何自定义选择播放设备， 能够自由的控制从那个音频口出音频  \r\nQ 2:  只有录音开始，结束有声音是什么问题呢？    \r\n\r\n通过官方提供的资料， 给音频模块 2Mic配置环境   \r\nRef:  \r\n* [https://wukong.hahack.com/#/mic-choices](https://wukong.hahack.com/#/mic-choices)  \r\n\r\n运行代码：   \r\n```    \r\n```\r\npi@raspberrypi:~ $ cd /home/pi/wukong\r\npi@raspberrypi:~/wukong $ source py3venv/bin/activate\r\n(py3venv) pi@raspberrypi:~/wukong $ git clone https://github.com/respeaker/seeed-voicecard.git\r\nfatal: 目标路径 'seeed-voicecard' 已经存在，并且不是一个空目录。\r\n(py3venv) pi@raspberrypi:~/wukong $ cd seeed-voicecard\r\n(py3venv) pi@raspberrypi:~/wukong/seeed-voicecard $ sudo ./install.sh\r\n命中:1 http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian stretch InRelease\r\n命中:2 http://mirrors.ustc.edu.cn/raspbian/raspbian stretch InRelease\r\n忽略:3 http://mirrors.ustc.edu.cn/archive.raspberrypi.org stretch InRelease\r\n错误:4 http://mirrors.ustc.edu.cn/archive.raspberrypi.org stretch Release\r\n  404  Not Found [IP: 218.104.71.170 80]\r\n正在读取软件包列表... 完成   \r\nE: 仓库 “http://mirrors.ustc.edu.cn/archive.raspberrypi.org stretch Release” 没有 Release 文件。\r\nN: 无法安全地用该源进行更新，所以默认禁用该源。\r\nN: 参见 apt-secure(8) 手册以了解仓库创建和用户配置方面的细节。\r\n正在读取软件包列表... 完成\r\n正在分析软件包的依赖关系树       \r\n正在读取状态信息... 完成       \r\nraspberrypi-kernel-headers 已经是最新版 (1.20180703-1)。\r\nraspberrypi-kernel 已经是最新版 (1.20180703-1)。\r\n下列软件包是自动安装的并且现在不需要了：\r\n  dconf-cli erlang-base erlang-crypto erlang-syntax-tools fonts-lato gir1.2-ibus-1.0\r\n  gir1.2-packagekitglib-1.0 gnome-software-common libappstream-glib8 libboost-thread1.62.0\r\n  libfwupd1 libgcab-1.0-0 libgtkspell3-3-0 libibus-1.0-5 liblua5.1-0 libpng-tools\r\n  libpyzy-1.0-0v5 libqt5opengl5 libqt5scintilla2-12v5 libqt5scintilla2-l10n\r\n  libqt5x11extras5 libqwt-qt5-6 libruby2.3 libscsynth1 libsctp1 libxrender-dev\r\n  python3-pycurl python3-software-properties rake ruby ruby-did-you-mean ruby-minitest\r\n  ruby-net-telnet ruby-power-assert ruby-test-unit ruby2.3 rubygems-integration\r\n  software-properties-common software-properties-gtk unattended-upgrades\r\n  x11proto-render-dev\r\n使用'sudo apt autoremove'来卸载它(它们)。\r\n升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 11 个软件包未被升级。\r\n正在读取软件包列表... 完成\r\n正在分析软件包的依赖关系树       \r\n正在读取状态信息... 完成       \r\ndkms 已经是最新版 (2.3-2)。\r\ngit 已经是最新版 (1:2.11.0-3+deb9u4)。\r\ni2c-tools 已经是最新版 (3.1.2-3)。\r\nlibasound2-plugins 已经是最新版 (1.1.1-1)。\r\n下列软件包是自动安装的并且现在不需要了：\r\n  dconf-cli erlang-base erlang-crypto erlang-syntax-tools fonts-lato gir1.2-ibus-1.0\r\n  gir1.2-packagekitglib-1.0 gnome-software-common libappstream-glib8 libboost-thread1.62.0\r\n  libfwupd1 libgcab-1.0-0 libgtkspell3-3-0 libibus-1.0-5 liblua5.1-0 libpng-tools\r\n  libpyzy-1.0-0v5 libqt5opengl5 libqt5scintilla2-12v5 libqt5scintilla2-l10n\r\n  libqt5x11extras5 libqwt-qt5-6 libruby2.3 libscsynth1 libsctp1 libxrender-dev\r\n  python3-pycurl python3-software-properties rake ruby ruby-did-you-mean ruby-minitest\r\n  ruby-net-telnet ruby-power-assert ruby-test-unit ruby2.3 rubygems-integration\r\n  software-properties-common software-properties-gtk unattended-upgrades\r\n  x11proto-render-dev\r\n使用'sudo apt autoremove'来卸载它(它们)。\r\n升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 11 个软件包未被升级。\r\n\r\n-------- Uninstall Beginning --------\r\nModule:  seeed-voicecard\r\nVersion: 0.3\r\nKernel:  4.14.52+ (armv7l)\r\n-------------------------------------\r\n\r\nStatus: Before uninstall, this module version was ACTIVE on this kernel.\r\n\r\nsnd-soc-wm8960.ko:\r\n - Uninstallation\r\n   - Deleting from: /lib/modules/4.14.52+/kernel/sound/soc/codecs/\r\n - Original module\r\n   - No original module was found for this module on this kernel.\r\n   - Use the dkms install command to reinstall any previous module version.\r\n\r\n\r\nsnd-soc-ac108.ko:\r\n - Uninstallation\r\n   - Deleting from: /lib/modules/4.14.52+/kernel/sound/soc/codecs/\r\n - Original module\r\n   - No original module was found for this module on this kernel.\r\n   - Use the dkms install command to reinstall any previous module version.\r\n\r\n\r\nsnd-soc-seeed-voicecard.ko:\r\n - Uninstallation\r\n   - Deleting from: /lib/modules/4.14.52+/kernel/sound/soc/bcm/\r\n - Original module\r\n   - No original module was found for this module on this kernel.\r\n   - Use the dkms install command to reinstall any previous module version.\r\n\r\ndepmod....\r\n\r\nDKMS: uninstall completed.\r\n\r\n-------- Uninstall Beginning --------\r\nModule:  seeed-voicecard\r\nVersion: 0.3\r\nKernel:  4.14.52-v7+ (armv7l)\r\n-------------------------------------\r\n\r\nStatus: Before uninstall, this module version was ACTIVE on this kernel.\r\n\r\nsnd-soc-wm8960.ko:\r\n - Uninstallation\r\n   - Deleting from: /lib/modules/4.14.52-v7+/kernel/sound/soc/codecs/\r\n - Original module\r\n   - No original module was found for this module on this kernel.\r\n   - Use the dkms install command to reinstall any previous module version.\r\n\r\n\r\nsnd-soc-ac108.ko:\r\n - Uninstallation\r\n   - Deleting from: /lib/modules/4.14.52-v7+/kernel/sound/soc/codecs/\r\n - Original module\r\n   - No original module was found for this module on this kernel.\r\n   - Use the dkms install command to reinstall any previous module version.\r\n\r\n\r\nsnd-soc-seeed-voicecard.ko:\r\n - Uninstallation\r\n   - Deleting from: /lib/modules/4.14.52-v7+/kernel/sound/soc/bcm/\r\n - Original module\r\n   - No original module was found for this module on this kernel.\r\n   - Use the dkms install command to reinstall any previous module version.\r\n\r\ndepmod....\r\n\r\nDKMS: uninstall completed.\r\n\r\n------------------------------\r\nDeleting module version: 0.3\r\ncompletely from the DKMS tree.\r\n------------------------------\r\nDone.\r\n\r\nCreating symlink /var/lib/dkms/seeed-voicecard/0.3/source ->\r\n                 /usr/src/seeed-voicecard-0.3\r\n\r\nDKMS: add completed.\r\n\r\nKernel preparation unnecessary for this kernel.  Skipping...\r\n\r\nBuilding module:\r\ncleaning build area....\r\nmake -j4 KERNELRELEASE=4.14.52+ -C /lib/modules/4.14.52+/build M=/var/lib/dkms/seeed-voicecard/0.3/build.......\r\ncleaning build area....\r\n\r\nDKMS: build completed.\r\n\r\nKernel preparation unnecessary for this kernel.  Skipping...\r\n\r\nBuilding module:\r\ncleaning build area...\r\nmake -j4 KERNELRELEASE=4.14.52-v7+ -C /lib/modules/4.14.52-v7+/build M=/var/lib/dkms/seeed-voicecard/0.3/build.......\r\ncleaning build area...\r\n\r\nDKMS: build completed.\r\n\r\nsnd-soc-wm8960:\r\nRunning module version sanity check.\r\n - Original module\r\n   - No original module exists within this kernel\r\n - Installation\r\n   - Installing to /lib/modules/4.14.52+/kernel/sound/soc/codecs/\r\n\r\nsnd-soc-ac108.ko:\r\nRunning module version sanity check.\r\n - Original module\r\n   - No original module exists within this kernel\r\n - Installation\r\n   - Installing to /lib/modules/4.14.52+/kernel/sound/soc/codecs/\r\n\r\nsnd-soc-seeed-voicecard.ko:\r\nRunning module version sanity check.\r\n - Original module\r\n   - No original module exists within this kernel\r\n - Installation\r\n   - Installing to /lib/modules/4.14.52+/kernel/sound/soc/bcm/\r\n\r\ndepmod....\r\n\r\nDKMS: install completed.\r\n\r\nsnd-soc-wm8960:\r\nRunning module version sanity check.\r\n - Original module\r\n   - No original module exists within this kernel\r\n - Installation\r\n   - Installing to /lib/modules/4.14.52-v7+/kernel/sound/soc/codecs/\r\n\r\nsnd-soc-ac108.ko:\r\nRunning module version sanity check.\r\n - Original module\r\n   - No original module exists within this kernel\r\n - Installation\r\n   - Installing to /lib/modules/4.14.52-v7+/kernel/sound/soc/codecs/\r\n\r\nsnd-soc-seeed-voicecard.ko:\r\nRunning module version sanity check.\r\n - Original module\r\n   - No original module exists within this kernel\r\n - Installation\r\n   - Installing to /lib/modules/4.14.52-v7+/kernel/sound/soc/bcm/\r\n\r\ndepmod...\r\n\r\nDKMS: install completed.\r\nmkdir: 无法创建目录\"/etc/voicecard\": 文件已存在\r\ngit init\r\n重新初始化已存在的 Git 仓库于 /etc/voicecard/.git/\r\ngit add --all\r\ngit commit -m \"origin configures\"\r\n位于分支 master\r\n无文件要提交，干净的工作区\r\n------------------------------------------------------\r\nPlease reboot your raspberry pi to apply all settings\r\nEnjoy!\r\n------------------------------------------------------\r\n\r\n运行：reboot  \r\n重新\r\n查看音频设备？  \r\n```  \r\n``` \r\npi@raspberrypi:~ $ aplay -l\r\n**** List of PLAYBACK Hardware Devices ****\r\ncard 0: ALSA [bcm2835 ALSA], device 0: bcm2835 ALSA [bcm2835 ALSA]\r\n  Subdevices: 7/7\r\n  Subdevice #0: subdevice #0\r\n  Subdevice #1: subdevice #1\r\n  Subdevice #2: subdevice #2\r\n  Subdevice #3: subdevice #3\r\n  Subdevice #4: subdevice #4\r\n  Subdevice #5: subdevice #5\r\n  Subdevice #6: subdevice #6\r\ncard 0: ALSA [bcm2835 ALSA], device 1: bcm2835 ALSA [bcm2835 IEC958/HDMI]\r\n  Subdevices: 1/1\r\n  Subdevice #0: subdevice #0\r\ncard 1: seeed2micvoicec [seeed-2mic-voicecard], device 0: bcm2835-i2s-wm8960-hifi wm8960-hifi-0 []\r\n  Subdevices: 1/1\r\n  Subdevice #0: subdevice #0\r\n```\r\n\r\n等等...  \r\n190413 17:05    \r\n还是先解决 只能放 录音开始跟结束声音的事情吧。   \r\n\r\n通过查看issuse 进行测试以下问题    \r\n\r\nQ1:在运行 wukong.py时， 能否播放声音？     \r\n* 找到tmp文件夹，利用树莓派系统自带的 Audacity 可以播放 应该播报，应该发出来的声音  \r\n* 那么用命令行能否让这些音频进行播放呢？ \r\n  * 利用play 命令播放  .wav有声音 播放 mp3出现问题       \r\n\r\n```\r\npi@raspberrypi:~ $ ls\r\n4mics_hat  Downloads          node               seeed-voicecard  wukong\r\navs        env                Pictures           Templates        xiaomo1.wav\r\nbaidu_STT  MagPi              Public             temp.wav         xiaomo2.wav\r\nDesktop    matchbox-keyboard  python_games       Videos           xiaomo3.wav\r\nDocuments  Music              respeaker_v2_eval  voice-engine\r\npi@raspberrypi:~ $ play xiaomo1.wav\r\n\r\nxiaomo1.wav:\r\n\r\n File Size: 283k      Bit Rate: 1.41M\r\n  Encoding: Signed PCM    \r\n  Channels: 2 @ 16-bit   \r\nSamplerate: 44100Hz      \r\nReplaygain: off         \r\n  Duration: 00:00:01.60  \r\n\r\nIn:100%  00:00:01.60 [00:00:00.00] Out:70.7k [    -=|=-    ]        Clip:0    \r\nDone.\r\n-------------------------------------------------- \r\n\r\npi@raspberrypi://tmp $ play tmp8d2ls_37.mp3\r\nplay FAIL formats: no handler for file extension `mp3'\r\n# 播放失败格式：没有文件扩展名“mp3”的处理程序 \r\n------- \r\npi@raspberrypi:/ $ play /var/tmp/play FAIL formats: no handler for file extension `mp3'\r\n> play /var/tmp/tmpechb7vp6.mp3\r\n> \r\n>   DSF D  W  \r\n> /var/tmp/tepechb7vp6.mp3\r\n```\r\n  \r\n测试到这里，就可以知道跟issuse中遇到的问题其实是不一样的， 但是其给跟创作者给出的东西本质上有着很大的参考价值  \r\n* 根据作者给的链接，可以知道 管理音频的文档是    \r\n* 大神们都是如何看进程上的内容的呢？     \r\n\r\n**关联**   \r\n#51 问答无声音，开机有问候音，第一次唤醒有beep音，后续就没有声音了\r\n#47 在树莓派zero上，播放不了回答\r\n\r\n","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/55/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/55/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]