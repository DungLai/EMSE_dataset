[{"id":2424766815,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0MjQ3NjY4MTU=","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2424766815","actor":{"login":"huoniu","id":18247262,"node_id":"MDQ6VXNlcjE4MjQ3MjYy","avatar_url":"https://avatars.githubusercontent.com/u/18247262?v=4","gravatar_id":"","url":"https://api.github.com/users/huoniu","html_url":"https://github.com/huoniu","followers_url":"https://api.github.com/users/huoniu/followers","following_url":"https://api.github.com/users/huoniu/following{/other_user}","gists_url":"https://api.github.com/users/huoniu/gists{/gist_id}","starred_url":"https://api.github.com/users/huoniu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huoniu/subscriptions","organizations_url":"https://api.github.com/users/huoniu/orgs","repos_url":"https://api.github.com/users/huoniu/repos","events_url":"https://api.github.com/users/huoniu/events{/privacy}","received_events_url":"https://api.github.com/users/huoniu/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-19T16:24:09Z","label":{"name":"operation problem","color":"8bed95"},"performed_via_github_app":null},{"id":2424766836,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyNDI0NzY2ODM2","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2424766836","actor":{"login":"huoniu","id":18247262,"node_id":"MDQ6VXNlcjE4MjQ3MjYy","avatar_url":"https://avatars.githubusercontent.com/u/18247262?v=4","gravatar_id":"","url":"https://api.github.com/users/huoniu","html_url":"https://github.com/huoniu","followers_url":"https://api.github.com/users/huoniu/followers","following_url":"https://api.github.com/users/huoniu/following{/other_user}","gists_url":"https://api.github.com/users/huoniu/gists{/gist_id}","starred_url":"https://api.github.com/users/huoniu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huoniu/subscriptions","organizations_url":"https://api.github.com/users/huoniu/orgs","repos_url":"https://api.github.com/users/huoniu/repos","events_url":"https://api.github.com/users/huoniu/events{/privacy}","received_events_url":"https://api.github.com/users/huoniu/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-06-19T16:24:09Z","assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/505957456","html_url":"https://github.com/wzpan/wukong-robot/issues/72#issuecomment-505957456","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/72","id":505957456,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTk1NzQ1Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"created_at":"2019-06-26T16:51:25Z","updated_at":"2019-06-26T16:51:25Z","author_association":"NONE","body":"由于久无进展，这个 issue 已被标为过期。如果还没有后续进展，这个 issue 将被关闭。谢谢你的反馈！\n","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/505957456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false}},{"id":2441559364,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0NDE1NTkzNjQ=","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2441559364","actor":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-26T16:51:26Z","label":{"name":"wontfix","color":"ffffff"},"performed_via_github_app":null},{"id":2449023571,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ0OTAyMzU3MQ==","url":"https://api.github.com/repos/wzpan/wukong-robot/issues/events/2449023571","actor":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-06-29T17:07:06Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/512160084","html_url":"https://github.com/wzpan/wukong-robot/issues/72#issuecomment-512160084","issue_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/72","id":512160084,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjE2MDA4NA==","user":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T08:38:42Z","updated_at":"2019-07-17T08:38:53Z","author_association":"OWNER","body":"我看代码应该是没问题的。\r\n\r\n![image](https://user-images.githubusercontent.com/1631405/61360390-ef0fa080-a8b0-11e9-8a69-6916fbd299e6.png)\r\n\r\n[这里](https://github.com/wzpan/wukong-robot/blob/master/robot/Player.py#L81) 就是等播放进程结束。除非系统或者sox有bug提前结束。你可以试试强制延长多一两秒：在 self.proc.wait() 后加一句 time.sleep(1) 。例如：\r\n\r\n```\r\n# -*- coding: utf-8-*-\r\nimport time \r\n...\r\n\r\n\r\nclass SoxPlayer(AbstractSoundPlayer):\r\n\r\n    ...\r\n\r\n    def run(self):\r\n        cmd = ['play', '-v', str(self.volume), str(self.src)]\r\n        logger.debug('Executing %s', ' '.join(cmd))\r\n\r\n        self.proc = subprocess.Popen(cmd, stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)\r\n        self.playing = True\r\n        self.proc.wait()\r\n        time.sleep(1)  # 强制再等待一秒确保说完\r\n        self.playing = False\r\n        if self.delete:\r\n            utils.check_and_delete(self.src)\r\n        logger.debug('play completed')\r\n        for onCompleted in self.onCompleteds:\r\n            if onCompleted:                \r\n                onCompleted()\r\n        self.onCompleteds = []\r\n```\r\n\r\n另外这个文件开头记得 `import time` 。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/comments/512160084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}}]