{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/61","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/61/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/61/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/61/events","html_url":"https://github.com/wzpan/wukong-robot/issues/61","id":438748049,"node_id":"MDU6SXNzdWU0Mzg3NDgwNDk=","number":61,"title":"在容器中运行wukong-robot,PS3-EYE 无法录音","user":{"login":"tomcatGu","id":6365837,"node_id":"MDQ6VXNlcjYzNjU4Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/6365837?v=4","gravatar_id":"","url":"https://api.github.com/users/tomcatGu","html_url":"https://github.com/tomcatGu","followers_url":"https://api.github.com/users/tomcatGu/followers","following_url":"https://api.github.com/users/tomcatGu/following{/other_user}","gists_url":"https://api.github.com/users/tomcatGu/gists{/gist_id}","starred_url":"https://api.github.com/users/tomcatGu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomcatGu/subscriptions","organizations_url":"https://api.github.com/users/tomcatGu/orgs","repos_url":"https://api.github.com/users/tomcatGu/repos","events_url":"https://api.github.com/users/tomcatGu/events{/privacy}","received_events_url":"https://api.github.com/users/tomcatGu/received_events","type":"User","site_admin":false},"labels":[{"id":1196019323,"node_id":"MDU6TGFiZWwxMTk2MDE5MzIz","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"环境问题或我不想修或我修不了"},{"id":1236422386,"node_id":"MDU6TGFiZWwxMjM2NDIyMzg2","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/operation%20problem","name":"operation problem","color":"8bed95","default":false,"description":"用户操作问题"}],"state":"closed","locked":false,"assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"assignees":[{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":11,"created_at":"2019-04-30T12:17:06Z","updated_at":"2019-05-21T06:52:12Z","closed_at":"2019-05-21T06:52:12Z","author_association":"NONE","active_lock_reason":null,"body":"**确认已寻找过答案**\r\n\r\n我已确认在 [Github issue](https://github.com/wzpan/wukong-robot/issues) 页、[常见问题](https://github.com/wzpan/wukong-robot/wiki/troubleshooting)页、[文档](http://wukong.hahack.com) 中都查找过，没有找到类似问题和资料。我也没有 google / bing/ 百度 / duckduckgo 到相关解答。\r\n\r\n**安装方式**\r\n\r\n树莓派中安装了一个docker和hassio，参考手动安装方式，用homeassistant的local addon功能，写了一个Dockerfile生成了一个镜像，并在容器中运行wukong-robot。\r\n\r\n**操作系统**\r\n\r\n树莓派3b+ raspbian hassio\r\n\r\n**问题描述**\r\n\r\n现在拍照是正常的，播放声音也正常，就是无法录音唤醒。PS3-EYE的蓝灯长亮，红灯不亮。\r\n\r\n在容器中执行 arecord -l，显示如下：\r\nroot@local-wukong-robot:/home/pi# arecord -l\r\n**** List of CAPTURE Hardware Devices ****\r\ncard 1: CameraB409241 [USB Camera-B4.09.24.1], device 0: USB Audio [USB Audio]\r\n  Subdevices: 0/1\r\n  Subdevice #0: subdevice #0\r\n\r\n在容器中执行arecord -D \"plughw:1,0\"  temp.wav，显示如下：\r\nroot@local-wukong-robot:/home/pi# arecord -D \"plughw:1,0\"  temp.wav\r\narecord: main:788: audio open error: Device or resource busy\r\n\r\nwukong-robot启动日志如下：\r\nwukong-robot!\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.front.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM front\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround51.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround21\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround51.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround21\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround40.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround40\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround51.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround41\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround51.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround50\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround51.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround51\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.surround71.0:CARD=0'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM surround71\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.iec958.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM iec958\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.iec958.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM spdif\r\nALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.bcm2835_alsa.pcm.iec958.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'\r\nALSA lib conf.c:4528:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory\r\nALSA lib conf.c:5007:(snd_config_expand) Evaluate error: No such file or directory\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM spdif\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline\r\nALSA lib pcm.c:2495:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline\r\nALSA lib pcm_dmix.c:1052:(snd_pcm_dmix_open) unable to open slave\r\nCannot connect to server socket err = No such file or directory\r\nCannot connect to server request channel\r\njack server is not running or cannot be started\r\nJackShmReadWritePtr::~JackShmReadWritePtr - Init not done for -1, skipping unlock\r\nJackShmReadWritePtr::~JackShmReadWritePtr - Init not done for -1, skipping unlock\r\n\r\n原来的dingdang-robot，我也用类似的方法在docker容器中运行，是可以录音唤醒的，工作时那个PS3-EYE的红灯是长亮的。\r\n\r\n\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/61/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/61/timeline","performed_via_github_app":null,"state_reason":"completed"}