{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/109","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/109/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/109/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/109/events","html_url":"https://github.com/wzpan/wukong-robot/issues/109","id":573478548,"node_id":"MDU6SXNzdWU1NzM0Nzg1NDg=","number":109,"title":"打开wukong.py报错。","user":{"login":"kiorry","id":32972865,"node_id":"MDQ6VXNlcjMyOTcyODY1","avatar_url":"https://avatars.githubusercontent.com/u/32972865?v=4","gravatar_id":"","url":"https://api.github.com/users/kiorry","html_url":"https://github.com/kiorry","followers_url":"https://api.github.com/users/kiorry/followers","following_url":"https://api.github.com/users/kiorry/following{/other_user}","gists_url":"https://api.github.com/users/kiorry/gists{/gist_id}","starred_url":"https://api.github.com/users/kiorry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiorry/subscriptions","organizations_url":"https://api.github.com/users/kiorry/orgs","repos_url":"https://api.github.com/users/kiorry/repos","events_url":"https://api.github.com/users/kiorry/events{/privacy}","received_events_url":"https://api.github.com/users/kiorry/received_events","type":"User","site_admin":false},"labels":[{"id":1235853798,"node_id":"MDU6TGFiZWwxMjM1ODUzNzk4","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/snowboy","name":"snowboy","color":"0052cc","default":false,"description":"snowboy相关问题"},{"id":1236422386,"node_id":"MDU6TGFiZWwxMjM2NDIyMzg2","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/operation%20problem","name":"operation problem","color":"8bed95","default":false,"description":"用户操作问题"}],"state":"closed","locked":false,"assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"assignees":[{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-03-01T04:40:00Z","updated_at":"2020-03-16T06:18:16Z","closed_at":"2020-03-01T07:53:30Z","author_association":"NONE","active_lock_reason":null,"body":"**确认已寻找过答案**\r\n\r\n我已确认在 [Github issue](https://github.com/wzpan/wukong-robot/issues) 页、[常见问题](https://github.com/wzpan/wukong-robot/wiki/troubleshooting)页、[文档](http://wukong.hahack.com) 中都查找过，没有找到类似问题和资料。我也没有 google / bing/ 百度 / duckduckgo 到相关解答。\r\n\r\n**安装方式**\r\n\r\n手动安装\r\n\r\n**操作系统**\r\n\r\n Raspbian Buster\r\n\r\n**离线唤醒相关**\r\n\r\n如果是离线唤醒相关的问题，是否已确保 `arecord temp.wav`、`aplay temp.wav` (Linux) 或 `rec temp.wav`、`play temp.wav` （Mac）已正常工作？（注意要求不能带任何其他参数）如果不能，请先配置好麦克风和音响再尝试。\r\n\r\n—— 我已确保录音、播放都正常工作才尝试 wukong-robot 。\r\n\r\n**问题描述**\r\n\r\n具体说明下问题\r\n\r\n我用的是树莓派3B，装的系统是buster lite. 项目安装是能过git clone到本地，然后用pip3 install -r.\r\nMIC是respeaker 2 mic，已经通过respeaker的录音，插入，还有demo测试过，没问题。也用snowboy的demo测试过，均可正常操作。\r\n\r\n下面是我遇到的具体问题。\r\n用python3打开wukong.py时报错如下 ：\r\npi@raspberrypi:~/wukong-robot/snowboy $ python3 ../wukong.py\r\nTraceback (most recent call last):\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydetect.py\", line 15, in swig_import_helper\r\n    return importlib.import_module(mname)\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 670, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 583, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1043, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: dynamic module does not define module export function (PyInit__snowboydetect)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"../wukong.py\", line 2, in <module>\r\n    from snowboy import snowboydecoder\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydecoder.py\", line 5, in <module>\r\n    from . import snowboydetect\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydetect.py\", line 18, in <module>\r\n    _snowboydetect = swig_import_helper()\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydetect.py\", line 17, in swig_import_helper\r\n    return importlib.import_module('_snowboydetect')\r\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\nModuleNotFoundError: No module named '_snowboydetect'\r\n\r\n\r\n因为提示是No module named '_snowboydetect'，我以为是snowboy的问题，把snowboy的测试用的文件 _snowboydetec.so 也拷过来，还是不行。\r\npi@raspberrypi:~/wukong-robot/snowboy $ ls\r\n__init__.py  resources          snowboydetect.py\r\n__pycache__  snowboydecoder.py  _snowboydetect.so\r\n\r\n然后我以为是命名的原因，我把/wukong/snowboy/snowboydetect.py修改了一下，把第12行的\r\n'_snowboydtect' 改成 'snowboydetect'.\r\n报错如下：\r\nTraceback (most recent call last):\r\n  File \"../wukong.py\", line 2, in <module>\r\n    from snowboy import snowboydecoder\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydecoder.py\", line 5, in <module>\r\n    from . import snowboydetect\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydetect.py\", line 99, in <module>\r\n    class SnowboyDetect(_object):\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydetect.py\", line 148, in SnowboyDetect\r\n    __swig_destroy__ = _snowboydetect.delete_SnowboyDetect\r\nAttributeError: module 'snowboy.snowboydetect' has no attribute 'delete_SnowboyDetect'\r\n\r\n注释148行，再运行。\r\nTraceback (most recent call last):\r\n  File \"../wukong.py\", line 2, in <module>\r\n    from snowboy import snowboydecoder\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydecoder.py\", line 5, in <module>\r\n    from . import snowboydetect\r\n  File \"/home/pi/wukong-robot/snowboy/snowboydetect.py\", line 150, in <module>\r\n    SnowboyDetect_swigregister = _snowboydetect.SnowboyDetect_swigregister\r\nAttributeError: module 'snowboy.snowboydetect' has no attribute 'SnowboyDetect_swigregister'\r\n\r\n到这里，我发现一开始改名字的方法是错的，但我不知道要怎么解决。\r\n\r\n\r\n\r\n","closed_by":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/109/timeline","performed_via_github_app":null,"state_reason":"completed"}