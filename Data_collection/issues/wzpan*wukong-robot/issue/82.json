{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/82","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/82/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/82/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/82/events","html_url":"https://github.com/wzpan/wukong-robot/issues/82","id":475961948,"node_id":"MDU6SXNzdWU0NzU5NjE5NDg=","number":82,"title":"树莓派上本地音乐插件功能紊乱","user":{"login":"shawn2013","id":46065644,"node_id":"MDQ6VXNlcjQ2MDY1NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/46065644?v=4","gravatar_id":"","url":"https://api.github.com/users/shawn2013","html_url":"https://github.com/shawn2013","followers_url":"https://api.github.com/users/shawn2013/followers","following_url":"https://api.github.com/users/shawn2013/following{/other_user}","gists_url":"https://api.github.com/users/shawn2013/gists{/gist_id}","starred_url":"https://api.github.com/users/shawn2013/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shawn2013/subscriptions","organizations_url":"https://api.github.com/users/shawn2013/orgs","repos_url":"https://api.github.com/users/shawn2013/repos","events_url":"https://api.github.com/users/shawn2013/events{/privacy}","received_events_url":"https://api.github.com/users/shawn2013/received_events","type":"User","site_admin":false},"labels":[{"id":1196019304,"node_id":"MDU6TGFiZWwxMTk2MDE5MzA0","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"我的锅"}],"state":"closed","locked":false,"assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"assignees":[{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-08-02T02:03:50Z","updated_at":"2019-08-06T04:04:02Z","closed_at":"2019-08-06T04:04:02Z","author_association":"NONE","active_lock_reason":null,"body":"**确认已寻找过答案**\r\n\r\n我已确认在 [Github issue](https://github.com/wzpan/wukong-robot/issues) 页、[常见问题](https://github.com/wzpan/wukong-robot/wiki/troubleshooting)页、[文档](http://wukong.hahack.com) 中都查找过，没有找到类似问题和资料。我也没有 google / bing/ 百度 / duckduckgo 到相关解答。\r\n\r\n**安装方式**\r\n\r\n手动安装/docker安装\r\n\r\n**操作系统**\r\n\r\n（例如 Raspbian Stretch、Ubuntu 16.04）\r\n\r\n**离线唤醒相关**\r\n\r\n如果是离线唤醒相关的问题，是否已确保 `arecord temp.wav`、`aplay temp.wav` (Linux) 或 `rec temp.wav`、`play temp.wav` （Mac）已正常工作？（注意要求不能带任何其他参数）如果不能，请先配置好麦克风和音响再尝试。\r\n\r\n—— 我已确保录音、播放都正常工作才尝试 wukong-robot 。\r\n\r\n**问题描述**\r\n树莓派上本地音乐插件功能紊乱，但在ubuntu下运行正常\r\n\r\n具体说明下问题\r\n唤醒本地播放功能，然后“大点声”、“小点声”等功能，调大/调小了音量的同时，还会切换到其他歌曲播放，打开debug日志后，发现会出现连续的play->complete->next。从日志上看，是在say(“调大音量”)的过程中，原来play音乐的线程出现了连续多个onComplete。\r\n注：\r\n\r\n- 这些音乐文件都是能正常播放的\r\n- ubuntu下没有这个情况\r\n- 环境区别是网络带宽，cpu处理能力不同\r\n这个问题应该是个例，希望楼主能给点定位问题或解决问题的思路，我自己尝试解决\r\n\r\n日志如下：\r\n<img width=\"452\" alt=\"企业微信截图_20190802094322\" src=\"https://user-images.githubusercontent.com/46065644/62338896-c4f2eb00-b50c-11e9-9d3a-fd0d93edd4da.png\">\r\n\r\n**复现步骤**\r\n较难复现\r\n具体描述下复现步骤\r\n","closed_by":{"login":"shawn2013","id":46065644,"node_id":"MDQ6VXNlcjQ2MDY1NjQ0","avatar_url":"https://avatars.githubusercontent.com/u/46065644?v=4","gravatar_id":"","url":"https://api.github.com/users/shawn2013","html_url":"https://github.com/shawn2013","followers_url":"https://api.github.com/users/shawn2013/followers","following_url":"https://api.github.com/users/shawn2013/following{/other_user}","gists_url":"https://api.github.com/users/shawn2013/gists{/gist_id}","starred_url":"https://api.github.com/users/shawn2013/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shawn2013/subscriptions","organizations_url":"https://api.github.com/users/shawn2013/orgs","repos_url":"https://api.github.com/users/shawn2013/repos","events_url":"https://api.github.com/users/shawn2013/events{/privacy}","received_events_url":"https://api.github.com/users/shawn2013/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/82/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/82/timeline","performed_via_github_app":null,"state_reason":"completed"}