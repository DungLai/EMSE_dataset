{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/4","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/4/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/4/events","html_url":"https://github.com/wzpan/wukong-robot/issues/4","id":407256372,"node_id":"MDU6SXNzdWU0MDcyNTYzNzI=","number":4,"title":"安装pyaudio遇到问题","user":{"login":"vufa","id":16551546,"node_id":"MDQ6VXNlcjE2NTUxNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/16551546?v=4","gravatar_id":"","url":"https://api.github.com/users/vufa","html_url":"https://github.com/vufa","followers_url":"https://api.github.com/users/vufa/followers","following_url":"https://api.github.com/users/vufa/following{/other_user}","gists_url":"https://api.github.com/users/vufa/gists{/gist_id}","starred_url":"https://api.github.com/users/vufa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vufa/subscriptions","organizations_url":"https://api.github.com/users/vufa/orgs","repos_url":"https://api.github.com/users/vufa/repos","events_url":"https://api.github.com/users/vufa/events{/privacy}","received_events_url":"https://api.github.com/users/vufa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-02-06T14:18:03Z","updated_at":"2019-02-07T10:23:17Z","closed_at":"2019-02-07T10:23:16Z","author_association":"NONE","active_lock_reason":null,"body":"系统: ArchLinux\r\npython: 用miniconda创建的环境，版本为3.7.2:\r\n\r\n```shell\r\nconda create -n wukong python=3.7.2\r\nconda activate wukong\r\n```\r\n\r\n根据安装文档，安装python依赖里的pyaudio时出错：\r\n```shell\r\npip install  -r requirements.txt\r\n```\r\n```\r\nBuilding wheels for collected packages: PyAudio\r\n  Running setup.py bdist_wheel for PyAudio ... error\r\n  Complete output from command /home/countstarlight/data/miniconda2/envs/wukong/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-gwxqmr0l/PyAudio/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/pip-wheel-10iuyt7v --python-tag cp37:\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.linux-x86_64-3.7\r\n  copying src/pyaudio.py -> build/lib.linux-x86_64-3.7\r\n  running build_ext\r\n  building '_portaudio' extension\r\n  creating build/temp.linux-x86_64-3.7\r\n  creating build/temp.linux-x86_64-3.7/src\r\n  gcc -pthread -B /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/countstarlight/data/miniconda2/envs/wukong/include/python3.7m -c src/_portaudiomodule.c -o build/temp.linux-x86_64-3.7/src/_portaudiomodule.o\r\n  src/_portaudiomodule.c: In function ‘_stream_callback_cfunction’:\r\n  src/_portaudiomodule.c:43:8: warning: comparison of integer expressions of different signedness: ‘int’ and ‘long unsigned int’ [-Wsign-compare]\r\n       _a < _b ? _a : _b;      \\\r\n          ^\r\n  src/_portaudiomodule.c:1351:32: note: in expansion of macro ‘min’\r\n       memcpy(output_data, pData, min(output_len, bytes_per_frame * frameCount));\r\n                                  ^~~\r\n  src/_portaudiomodule.c:43:15: warning: operand of ?: changes signedness from ‘int’ to ‘long unsigned int’ due to unsignedness of other operand [-Wsign-compare]\r\n       _a < _b ? _a : _b;      \\\r\n                 ^~\r\n  src/_portaudiomodule.c:1351:32: note: in expansion of macro ‘min’\r\n       memcpy(output_data, pData, min(output_len, bytes_per_frame * frameCount));\r\n                                  ^~~\r\n  src/_portaudiomodule.c:1354:20: warning: comparison of integer expressions of different signedness: ‘int’ and ‘long unsigned int’ [-Wsign-compare]\r\n       if (output_len < (frameCount * bytes_per_frame)) {\r\n                      ^\r\n  gcc -pthread -shared -B /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat -L/home/countstarlight/data/miniconda2/envs/wukong/lib -Wl,-rpath=/home/countstarlight/data/miniconda2/envs/wukong/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.7/src/_portaudiomodule.o -lportaudio -o build/lib.linux-x86_64-3.7/_portaudio.cpython-37m-x86_64-linux-gnu.so\r\n  /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n  /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n  /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n  /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n  build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: file not recognized: file format not recognized\r\n  collect2: error: ld returned 1 exit status\r\n  error: command 'gcc' failed with exit status 1\r\n  \r\n  ----------------------------------------\r\n  Failed building wheel for PyAudio\r\n  Running setup.py clean for PyAudio\r\nFailed to build PyAudio\r\nInstalling collected packages: PyAudio, pyyaml, chardet, idna, urllib3, requests, baidu-aip, pydub, numpy, quantities, semantic, six, python-dateutil, argh, pathtools, watchdog, pytz, fire, tornado\r\n  Running setup.py install for PyAudio ... error\r\n    Complete output from command /home/countstarlight/data/miniconda2/envs/wukong/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-gwxqmr0l/PyAudio/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-4wis33i2/install-record.txt --single-version-externally-managed --compile:\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib.linux-x86_64-3.7\r\n    copying src/pyaudio.py -> build/lib.linux-x86_64-3.7\r\n    running build_ext\r\n    building '_portaudio' extension\r\n    creating build/temp.linux-x86_64-3.7\r\n    creating build/temp.linux-x86_64-3.7/src\r\n    gcc -pthread -B /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/countstarlight/data/miniconda2/envs/wukong/include/python3.7m -c src/_portaudiomodule.c -o build/temp.linux-x86_64-3.7/src/_portaudiomodule.o\r\n    src/_portaudiomodule.c: In function ‘_stream_callback_cfunction’:\r\n    src/_portaudiomodule.c:43:8: warning: comparison of integer expressions of different signedness: ‘int’ and ‘long unsigned int’ [-Wsign-compare]\r\n         _a < _b ? _a : _b;      \\\r\n            ^\r\n    src/_portaudiomodule.c:1351:32: note: in expansion of macro ‘min’\r\n         memcpy(output_data, pData, min(output_len, bytes_per_frame * frameCount));\r\n                                    ^~~\r\n    src/_portaudiomodule.c:43:15: warning: operand of ?: changes signedness from ‘int’ to ‘long unsigned int’ due to unsignedness of other operand [-Wsign-compare]\r\n         _a < _b ? _a : _b;      \\\r\n                   ^~\r\n    src/_portaudiomodule.c:1351:32: note: in expansion of macro ‘min’\r\n         memcpy(output_data, pData, min(output_len, bytes_per_frame * frameCount));\r\n                                    ^~~\r\n    src/_portaudiomodule.c:1354:20: warning: comparison of integer expressions of different signedness: ‘int’ and ‘long unsigned int’ [-Wsign-compare]\r\n         if (output_len < (frameCount * bytes_per_frame)) {\r\n                        ^\r\n    gcc -pthread -shared -B /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat -L/home/countstarlight/data/miniconda2/envs/wukong/lib -Wl,-rpath=/home/countstarlight/data/miniconda2/envs/wukong/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.7/src/_portaudiomodule.o -lportaudio -o build/lib.linux-x86_64-3.7/_portaudio.cpython-37m-x86_64-linux-gnu.so\r\n    /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n    /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n    /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n    /home/countstarlight/data/miniconda2/envs/wukong/compiler_compat/ld: build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: unable to initialize decompress status for section .debug_info\r\n    build/temp.linux-x86_64-3.7/src/_portaudiomodule.o: file not recognized: file format not recognized\r\n    collect2: error: ld returned 1 exit status\r\n    error: command 'gcc' failed with exit status 1\r\n    \r\n    ----------------------------------------\r\nCommand \"/home/countstarlight/data/miniconda2/envs/wukong/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-gwxqmr0l/PyAudio/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-4wis33i2/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-install-gwxqmr0l/PyAudio/\r\n```\r\n安装了Archlinux源里的`python-pyaudio`，pyaudio版本是0.2.11，将`requirements.txt`里的pyaudio版本修改为0.2.11，再次安装:\r\n```shell\r\npip install --no-cache-dir -r requirements.txt\r\n```\r\n出现一样的错误","closed_by":{"login":"vufa","id":16551546,"node_id":"MDQ6VXNlcjE2NTUxNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/16551546?v=4","gravatar_id":"","url":"https://api.github.com/users/vufa","html_url":"https://github.com/vufa","followers_url":"https://api.github.com/users/vufa/followers","following_url":"https://api.github.com/users/vufa/following{/other_user}","gists_url":"https://api.github.com/users/vufa/gists{/gist_id}","starred_url":"https://api.github.com/users/vufa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vufa/subscriptions","organizations_url":"https://api.github.com/users/vufa/orgs","repos_url":"https://api.github.com/users/vufa/repos","events_url":"https://api.github.com/users/vufa/events{/privacy}","received_events_url":"https://api.github.com/users/vufa/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/4/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/4/timeline","performed_via_github_app":null,"state_reason":"completed"}