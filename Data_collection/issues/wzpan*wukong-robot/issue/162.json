{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/162","repository_url":"https://api.github.com/repos/wzpan/wukong-robot","labels_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/162/labels{/name}","comments_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/162/comments","events_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/162/events","html_url":"https://github.com/wzpan/wukong-robot/issues/162","id":952659736,"node_id":"MDU6SXNzdWU5NTI2NTk3MzY=","number":162,"title":"启动时报错 TypeError","user":{"login":"fred913","id":41846047,"node_id":"MDQ6VXNlcjQxODQ2MDQ3","avatar_url":"https://avatars.githubusercontent.com/u/41846047?v=4","gravatar_id":"","url":"https://api.github.com/users/fred913","html_url":"https://github.com/fred913","followers_url":"https://api.github.com/users/fred913/followers","following_url":"https://api.github.com/users/fred913/following{/other_user}","gists_url":"https://api.github.com/users/fred913/gists{/gist_id}","starred_url":"https://api.github.com/users/fred913/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fred913/subscriptions","organizations_url":"https://api.github.com/users/fred913/orgs","repos_url":"https://api.github.com/users/fred913/repos","events_url":"https://api.github.com/users/fred913/events{/privacy}","received_events_url":"https://api.github.com/users/fred913/received_events","type":"User","site_admin":false},"labels":[{"id":1236422386,"node_id":"MDU6TGFiZWwxMjM2NDIyMzg2","url":"https://api.github.com/repos/wzpan/wukong-robot/labels/operation%20problem","name":"operation problem","color":"8bed95","default":false,"description":"用户操作问题"}],"state":"closed","locked":false,"assignee":{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false},"assignees":[{"login":"wzpan","id":1631405,"node_id":"MDQ6VXNlcjE2MzE0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/1631405?v=4","gravatar_id":"","url":"https://api.github.com/users/wzpan","html_url":"https://github.com/wzpan","followers_url":"https://api.github.com/users/wzpan/followers","following_url":"https://api.github.com/users/wzpan/following{/other_user}","gists_url":"https://api.github.com/users/wzpan/gists{/gist_id}","starred_url":"https://api.github.com/users/wzpan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzpan/subscriptions","organizations_url":"https://api.github.com/users/wzpan/orgs","repos_url":"https://api.github.com/users/wzpan/repos","events_url":"https://api.github.com/users/wzpan/events{/privacy}","received_events_url":"https://api.github.com/users/wzpan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-07-26T08:46:17Z","updated_at":"2021-07-26T09:48:50Z","closed_at":"2021-07-26T09:48:49Z","author_association":"NONE","active_lock_reason":null,"body":"**确认已寻找过答案**\r\n\r\n我已确认在 [Github issue](https://github.com/wzpan/wukong-robot/issues) 页、[常见问题](https://github.com/wzpan/wukong-robot/wiki/troubleshooting)页、[文档](http://wukong.hahack.com) 中都查找过，没有找到类似问题和资料。我也没有 google / bing/ 百度 / duckduckgo 到相关解答。\r\n\r\n**安装方式**\r\n\r\n手动安装\r\n\r\n**操作系统**\r\n\r\nRaspbian Buster\r\n\r\n**离线唤醒相关**\r\n\r\n非离线唤醒问题\r\n—— 我已确保录音、播放都正常工作才尝试 wukong-robot 。\r\n\r\n**问题描述**\r\n\r\n启动时报错\r\n```\r\nTraceback (most recent call last):\r\n  File \"wukong.py\", line 275, in <module>\r\n    wukong.run()\r\n  File \"wukong.py\", line 118, in run\r\n    self.init()\r\n  File \"wukong.py\", line 49, in init\r\n    self._conversation.say('{} 你好！试试对我喊唤醒词叫醒我吧'.format(config.get('first_name', '主人')), True)\r\n  File \"/root/wukong-robot/robot/Conversation.py\", line 205, in say\r\n    self.player.play(voice, not cache, onCompleted, wait)\r\n  File \"/root/wukong-robot/robot/Player.py\", line 84, in play\r\n    if os.path.exists(src) or src.startswith('http'):\r\n  File \"/usr/lib/python3.7/genericpath.py\", line 19, in exists\r\n    os.stat(path)\r\nTypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType\r\n```\r\n该报错已有一个issue，但不是同一个问题。配置文件格式完全正确（通过pyyaml校验过），经检查可能是语音合成出了什么问题。通过断点发现在调用self.player.play时voice值为None，且不调用self.onSay（audio未定义），剩下的仍在寻找错误原因","closed_by":{"login":"fred913","id":41846047,"node_id":"MDQ6VXNlcjQxODQ2MDQ3","avatar_url":"https://avatars.githubusercontent.com/u/41846047?v=4","gravatar_id":"","url":"https://api.github.com/users/fred913","html_url":"https://github.com/fred913","followers_url":"https://api.github.com/users/fred913/followers","following_url":"https://api.github.com/users/fred913/following{/other_user}","gists_url":"https://api.github.com/users/fred913/gists{/gist_id}","starred_url":"https://api.github.com/users/fred913/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fred913/subscriptions","organizations_url":"https://api.github.com/users/fred913/orgs","repos_url":"https://api.github.com/users/fred913/repos","events_url":"https://api.github.com/users/fred913/events{/privacy}","received_events_url":"https://api.github.com/users/fred913/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/wzpan/wukong-robot/issues/162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/wzpan/wukong-robot/issues/162/timeline","performed_via_github_app":null,"state_reason":"completed"}