[{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/888241178","html_url":"https://github.com/philipperemy/keras-tcn/issues/211#issuecomment-888241178","issue_url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/211","id":888241178,"node_id":"IC_kwDOB4a3hs408Xwa","user":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false},"created_at":"2021-07-28T11:40:52Z","updated_at":"2021-07-28T11:40:52Z","author_association":"OWNER","body":"@jjfaj TF 2.5 broke the compatibility with this function. Try to use 2.4 in the mean time while we find a way to fix it.","reactions":{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/888241178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false}},{"id":5079620849,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTA3OTYyMDg0OQ==","url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/events/5079620849","actor":{"login":"jjfaj","id":63961624,"node_id":"MDQ6VXNlcjYzOTYxNjI0","avatar_url":"https://avatars.githubusercontent.com/u/63961624?v=4","gravatar_id":"","url":"https://api.github.com/users/jjfaj","html_url":"https://github.com/jjfaj","followers_url":"https://api.github.com/users/jjfaj/followers","following_url":"https://api.github.com/users/jjfaj/following{/other_user}","gists_url":"https://api.github.com/users/jjfaj/gists{/gist_id}","starred_url":"https://api.github.com/users/jjfaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjfaj/subscriptions","organizations_url":"https://api.github.com/users/jjfaj/orgs","repos_url":"https://api.github.com/users/jjfaj/repos","events_url":"https://api.github.com/users/jjfaj/events{/privacy}","received_events_url":"https://api.github.com/users/jjfaj/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-28T11:40:53Z","performed_via_github_app":null},{"id":5079620858,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwNzk2MjA4NTg=","url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/events/5079620858","actor":{"login":"jjfaj","id":63961624,"node_id":"MDQ6VXNlcjYzOTYxNjI0","avatar_url":"https://avatars.githubusercontent.com/u/63961624?v=4","gravatar_id":"","url":"https://api.github.com/users/jjfaj","html_url":"https://github.com/jjfaj","followers_url":"https://api.github.com/users/jjfaj/followers","following_url":"https://api.github.com/users/jjfaj/following{/other_user}","gists_url":"https://api.github.com/users/jjfaj/gists{/gist_id}","starred_url":"https://api.github.com/users/jjfaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjfaj/subscriptions","organizations_url":"https://api.github.com/users/jjfaj/orgs","repos_url":"https://api.github.com/users/jjfaj/repos","events_url":"https://api.github.com/users/jjfaj/events{/privacy}","received_events_url":"https://api.github.com/users/jjfaj/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-28T11:40:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/951158713","html_url":"https://github.com/philipperemy/keras-tcn/issues/211#issuecomment-951158713","issue_url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/211","id":951158713,"node_id":"IC_kwDOB4a3hs44sYe5","user":{"login":"microprediction","id":57455669,"node_id":"MDQ6VXNlcjU3NDU1NjY5","avatar_url":"https://avatars.githubusercontent.com/u/57455669?v=4","gravatar_id":"","url":"https://api.github.com/users/microprediction","html_url":"https://github.com/microprediction","followers_url":"https://api.github.com/users/microprediction/followers","following_url":"https://api.github.com/users/microprediction/following{/other_user}","gists_url":"https://api.github.com/users/microprediction/gists{/gist_id}","starred_url":"https://api.github.com/users/microprediction/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microprediction/subscriptions","organizations_url":"https://api.github.com/users/microprediction/orgs","repos_url":"https://api.github.com/users/microprediction/repos","events_url":"https://api.github.com/users/microprediction/events{/privacy}","received_events_url":"https://api.github.com/users/microprediction/received_events","type":"User","site_admin":false},"created_at":"2021-10-25T17:46:51Z","updated_at":"2021-10-25T17:46:51Z","author_association":"NONE","body":"commenting to watch as I have the same issue. ","reactions":{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/951158713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"microprediction","id":57455669,"node_id":"MDQ6VXNlcjU3NDU1NjY5","avatar_url":"https://avatars.githubusercontent.com/u/57455669?v=4","gravatar_id":"","url":"https://api.github.com/users/microprediction","html_url":"https://github.com/microprediction","followers_url":"https://api.github.com/users/microprediction/followers","following_url":"https://api.github.com/users/microprediction/following{/other_user}","gists_url":"https://api.github.com/users/microprediction/gists{/gist_id}","starred_url":"https://api.github.com/users/microprediction/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/microprediction/subscriptions","organizations_url":"https://api.github.com/users/microprediction/orgs","repos_url":"https://api.github.com/users/microprediction/repos","events_url":"https://api.github.com/users/microprediction/events{/privacy}","received_events_url":"https://api.github.com/users/microprediction/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/1017296011","html_url":"https://github.com/philipperemy/keras-tcn/issues/211#issuecomment-1017296011","issue_url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/211","id":1017296011,"node_id":"IC_kwDOB4a3hs48orSL","user":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false},"created_at":"2022-01-20T09:50:26Z","updated_at":"2022-01-20T09:50:26Z","author_association":"OWNER","body":"I'll do my best to provide a version compatible for tensorflow 2.5+","reactions":{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/1017296011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false}},{"id":5923503045,"node_id":"LE_lADOB4a3hs44FZ3MzwAAAAFhEXvF","url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/events/5923503045","actor":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-01-20T09:51:21Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/1018327620","html_url":"https://github.com/philipperemy/keras-tcn/issues/211#issuecomment-1018327620","issue_url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/211","id":1018327620,"node_id":"IC_kwDOB4a3hs48snJE","user":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false},"created_at":"2022-01-21T09:22:14Z","updated_at":"2022-01-21T09:22:14Z","author_association":"OWNER","body":"So guys after many attempts, I could not get anything satisfactory. I think we should all move to tensorboard.\r\n\r\nSomething like that is more visual:\r\n\r\n![image](https://user-images.githubusercontent.com/4516927/150500775-194a7643-4987-437b-9735-57a5a214fa93.png)\r\n\r\nI posted an example on how to use it: https://github.com/philipperemy/keras-tcn/blob/master/tasks/tcn_tensorboard.py.\r\n\r\nI will deprecate the function `tcn_full_summary()`.\r\n\r\nFor information, I'm posting the code where I tried to have it working for tensorflow 2.5+\r\n\r\n```python\r\ndef tcn_full_summary(model: Model):\r\n    existing_layers = list(model.layers)  # store existing layers\r\n    all_layers = []\r\n\r\n    # {'embedding/embeddings:0': 2560000,\r\n    # 'tcn/residual_block_0/conv1D_0/kernel:0': 49152, x\r\n    # 'tcn/residual_block_0/conv1D_0/bias:0': 64, x\r\n    # 'tcn/residual_block_0/conv1D_1/kernel:0':  24576, x\r\n    # 'tcn/residual_block_0/conv1D_1/bias:0': 64, x\r\n    # 'tcn/residual_block_0/matching_conv1D/kernel:0': 8192, <- missing?\r\n    # 'tcn/residual_block_0/matching_conv1D/bias:0': 64, <- missing?\r\n    # 'tcn/residual_block_1/conv1D_0/kernel:0': 24576, x\r\n    # 'tcn/residual_block_1/conv1D_0/bias:0': 64, x\r\n    # 'tcn/residual_block_1/conv1D_1/kernel:0': 24576, x\r\n    # 'tcn/residual_block_1/conv1D_1/bias:0': 64, x\r\n    # 'dense/kernel:0': 64,\r\n    # 'dense/bias:0': 1}\r\n    # [2560000, 49152, 64, 24576, 64, 8192, 64, 24576, 64, 24576, 64, 64, 1]\r\n    for existing_layer in existing_layers:\r\n        if isinstance(existing_layer, TCN):\r\n            for tcn_layer in existing_layer._self_tracked_trackables:\r\n                # try:\r\n                #     print(tcn_layer.name, tcn_layer)\r\n                # except:\r\n                #     pass\r\n                if isinstance(tcn_layer, ResidualBlock):\r\n                    for res_layer in tcn_layer.layers:\r\n                        if not hasattr(res_layer, '__iter__'):\r\n                            # print('-', res_layer.name, res_layer)\r\n                            all_layers.append(res_layer)\r\n                        else:\r\n                            print('PASS', res_layer)\r\n                    if hasattr(tcn_layer, 'matching_conv1D'):\r\n                        # print('matching_conv1D', tcn_layer.matching_conv1D)\r\n                        all_layers.append(tcn_layer.matching_conv1D)\r\n                else:\r\n                    if not hasattr(tcn_layer, '__iter__'):\r\n                        all_layers.append(tcn_layer)\r\n                    # else:\r\n                    #     print('PASS', tcn_layer)\r\n        else:\r\n            all_layers.append(existing_layer)\r\n\r\n    for i, a in enumerate(all_layers):\r\n        a._name = a.name + '__' + str(i)\r\n\r\n    Sequential(layers=all_layers).summary()\r\n    # model.summary()  # print summary\r\n```\r\n\r\nI will close this issue but don't hesitate to revisit it if you find the magical solution ;)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/comments/1018327620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false}},{"id":5930745469,"node_id":"CE_lADOB4a3hs44FZ3MzwAAAAFhf_59","url":"https://api.github.com/repos/philipperemy/keras-tcn/issues/events/5930745469","actor":{"login":"philipperemy","id":4516927,"node_id":"MDQ6VXNlcjQ1MTY5Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/4516927?v=4","gravatar_id":"","url":"https://api.github.com/users/philipperemy","html_url":"https://github.com/philipperemy","followers_url":"https://api.github.com/users/philipperemy/followers","following_url":"https://api.github.com/users/philipperemy/following{/other_user}","gists_url":"https://api.github.com/users/philipperemy/gists{/gist_id}","starred_url":"https://api.github.com/users/philipperemy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philipperemy/subscriptions","organizations_url":"https://api.github.com/users/philipperemy/orgs","repos_url":"https://api.github.com/users/philipperemy/repos","events_url":"https://api.github.com/users/philipperemy/events{/privacy}","received_events_url":"https://api.github.com/users/philipperemy/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-01-21T09:22:14Z","state_reason":null,"performed_via_github_app":null}]