[{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/559859971","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-559859971","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":559859971,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTg1OTk3MQ==","user":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"created_at":"2019-11-29T18:24:32Z","updated_at":"2019-11-29T18:25:47Z","author_association":"NONE","body":"@ziadloo Thanks for these fixes. Also in this implementation GRU was used and if I were to use LSTM do I need to make any changes?\r\n\r\nI mean in `GRU (return_state=True)` only return `1 hidden state` where as in `LSTM(return_state=True)` return `1 hidden state` and `1 cell state`. I couldn't figure out and I was wondering if you were able to help me out.","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/559859971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false}},{"id":2842067639,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg0MjA2NzYzOQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2842067639","actor":{"login":"ziadloo","id":3235521,"node_id":"MDQ6VXNlcjMyMzU1MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3235521?v=4","gravatar_id":"","url":"https://api.github.com/users/ziadloo","html_url":"https://github.com/ziadloo","followers_url":"https://api.github.com/users/ziadloo/followers","following_url":"https://api.github.com/users/ziadloo/following{/other_user}","gists_url":"https://api.github.com/users/ziadloo/gists{/gist_id}","starred_url":"https://api.github.com/users/ziadloo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziadloo/subscriptions","organizations_url":"https://api.github.com/users/ziadloo/orgs","repos_url":"https://api.github.com/users/ziadloo/repos","events_url":"https://api.github.com/users/ziadloo/events{/privacy}","received_events_url":"https://api.github.com/users/ziadloo/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-11-29T18:24:32Z","performed_via_github_app":null},{"id":2842067646,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NDIwNjc2NDY=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2842067646","actor":{"login":"ziadloo","id":3235521,"node_id":"MDQ6VXNlcjMyMzU1MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3235521?v=4","gravatar_id":"","url":"https://api.github.com/users/ziadloo","html_url":"https://github.com/ziadloo","followers_url":"https://api.github.com/users/ziadloo/followers","following_url":"https://api.github.com/users/ziadloo/following{/other_user}","gists_url":"https://api.github.com/users/ziadloo/gists{/gist_id}","starred_url":"https://api.github.com/users/ziadloo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziadloo/subscriptions","organizations_url":"https://api.github.com/users/ziadloo/orgs","repos_url":"https://api.github.com/users/ziadloo/repos","events_url":"https://api.github.com/users/ziadloo/events{/privacy}","received_events_url":"https://api.github.com/users/ziadloo/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-11-29T18:24:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/560343289","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-560343289","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":560343289,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDM0MzI4OQ==","user":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"created_at":"2019-12-02T10:52:44Z","updated_at":"2019-12-02T10:52:44Z","author_association":"OWNER","body":"@ziadloo ,\r\n\r\nThanks for pointing these out. I'll have a go through and make the necessary changes.\r\n\r\n@John-8704 ,\r\n\r\nThis is something I will soon working on. Yes, since LSTM returns two states, it might not work properly.","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/560343289/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false}},{"id":2845196299,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg0NTE5NjI5OQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2845196299","actor":{"login":"ziadloo","id":3235521,"node_id":"MDQ6VXNlcjMyMzU1MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3235521?v=4","gravatar_id":"","url":"https://api.github.com/users/ziadloo","html_url":"https://github.com/ziadloo","followers_url":"https://api.github.com/users/ziadloo/followers","following_url":"https://api.github.com/users/ziadloo/following{/other_user}","gists_url":"https://api.github.com/users/ziadloo/gists{/gist_id}","starred_url":"https://api.github.com/users/ziadloo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziadloo/subscriptions","organizations_url":"https://api.github.com/users/ziadloo/orgs","repos_url":"https://api.github.com/users/ziadloo/repos","events_url":"https://api.github.com/users/ziadloo/events{/privacy}","received_events_url":"https://api.github.com/users/ziadloo/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-02T10:52:44Z","performed_via_github_app":null},{"id":2845196308,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg0NTE5NjMwOA==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2845196308","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-02T10:52:45Z","performed_via_github_app":null},{"id":2845196315,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NDUxOTYzMTU=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2845196315","actor":{"login":"ziadloo","id":3235521,"node_id":"MDQ6VXNlcjMyMzU1MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3235521?v=4","gravatar_id":"","url":"https://api.github.com/users/ziadloo","html_url":"https://github.com/ziadloo","followers_url":"https://api.github.com/users/ziadloo/followers","following_url":"https://api.github.com/users/ziadloo/following{/other_user}","gists_url":"https://api.github.com/users/ziadloo/gists{/gist_id}","starred_url":"https://api.github.com/users/ziadloo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ziadloo/subscriptions","organizations_url":"https://api.github.com/users/ziadloo/orgs","repos_url":"https://api.github.com/users/ziadloo/repos","events_url":"https://api.github.com/users/ziadloo/events{/privacy}","received_events_url":"https://api.github.com/users/ziadloo/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-02T10:52:45Z","performed_via_github_app":null},{"id":2845196571,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NDUxOTY1NzE=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2845196571","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-02T10:52:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564309661","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-564309661","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":564309661,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDMwOTY2MQ==","user":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"created_at":"2019-12-10T23:39:11Z","updated_at":"2019-12-10T23:39:25Z","author_association":"OWNER","body":"@John-8704 \r\n\r\nI am currently looking at using AttentionLayer for LSTMs. Can you post the error you're getting? Technically, it should work out of the box. Because, you should be using the output of the LSTM layer (which will have only a single state) and not the state of the LSTM.\r\n\r\n```\r\n    encoder_gru = GRU(hidden_size, return_sequences=True, return_state=True, name='encoder_gru')\r\n    encoder_out, encoder_state = encoder_gru(encoder_inputs)\r\n\r\n    # Set up the decoder GRU, using `encoder_states` as initial state.\r\n    decoder_gru = GRU(hidden_size, return_sequences=True, return_state=True, name='decoder_gru')\r\n    decoder_out, decoder_state = decoder_gru(decoder_inputs, initial_state=encoder_state)\r\n\r\n    # Attention layer\r\n    attn_layer = AttentionLayer(name='attention_layer')\r\n    attn_out, attn_states = attn_layer([encoder_out, decoder_out])\r\n```","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564309661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false}},{"id":2872455161,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3MjQ1NTE2MQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2872455161","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-10T23:39:11Z","performed_via_github_app":null},{"id":2872455162,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzI0NTUxNjI=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2872455162","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-10T23:39:11Z","performed_via_github_app":null},{"id":2875827317,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3NTgyNzMxNw==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2875827317","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-11T21:21:01Z","performed_via_github_app":null},{"id":2875827321,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzU4MjczMjE=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2875827321","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-11T21:21:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564738853","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-564738853","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":564738853,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDczODg1Mw==","user":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T21:23:15Z","updated_at":"2019-12-11T21:26:08Z","author_association":"NONE","body":"@thushv89 \r\n\r\nThis is the error that I've been getting when I try to use Bi-Directional LSTM's inplace of GRU's. Were you able to get lstm's working with the attention layer?\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-55-bf8ea5683d13> in <module>\r\n      1 nmt_model, enc_outputs, dec_outputs = seq2seq(input_vocab, target_vocab, embed_size,\r\n      2                                               units, en_embedding_matrix,\r\n----> 3                                               fr_embedding_matrix)\r\n      4 nmt_model.summary()\r\n\r\n<ipython-input-54-3c3245d693ea> in seq2seq(input_vocab, target_vocab, embed_size, lstm_units, en_embedding_matrix, fr_embedding_matrix)\r\n     10                                        lstm_units, enc_states)\r\n     11 \r\n---> 12     attention_scores, dec_context = attention(enc_outputs, dec_outputs)\r\n     13     # output layer\r\n     14     dense1 = Dense(dec_context.get_shape()[-1], activation='elu', name='dense1')\r\n\r\n<ipython-input-53-56fd806996ff> in attention(enc_outputs, dec_outputs)\r\n     38     # attention weights\r\n     39     attn_layer = AttentionLayer(name='attention_layer')\r\n---> 40     attn_out, attn_energy = attn_layer([enc_outputs, dec_outputs])\r\n     41     # context\r\n     42     dec_context = Concatenate(name='dec_context')([attn_out, dec_outputs])\r\n\r\n~/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py in __call__(self, inputs, *args, **kwargs)\r\n    840                     not base_layer_utils.is_in_eager_or_tf_function()):\r\n    841                   with auto_control_deps.AutomaticControlDependencies() as acd:\r\n--> 842                     outputs = call_fn(cast_inputs, *args, **kwargs)\r\n    843                     # Wrap Tensors in `outputs` in `tf.identity` to avoid\r\n    844                     # circular dependencies.\r\n\r\n~/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/api.py in wrapper(*args, **kwargs)\r\n    235       except Exception as e:  # pylint:disable=broad-except\r\n    236         if hasattr(e, 'ag_error_metadata'):\r\n--> 237           raise e.ag_error_metadata.to_exception(e)\r\n    238         else:\r\n    239           raise\r\n\r\nTypeError: in converted code:\r\n\r\n   <ipython-input-52-1b23d5a92cb2>:32 energy_step  *\r\n        W_a_dot_s = K.reshape(K.dot(reshaped_enc_outputs, self.W_a), (-1, en_seq_len, en_hidden))\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py:4035 rnn\r\n        input_time_zero, tuple(initial_states) + tuple(constants))\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py:2737 reshape\r\n        return array_ops.reshape(x, shape)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/ops/array_ops.py:131 reshape\r\n        result = gen_array_ops.reshape(tensor, shape, name)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_array_ops.py:8117 reshape\r\n        \"Reshape\", tensor=tensor, shape=shape, name=name)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/op_def_library.py:530 _apply_op_helper\r\n        raise err\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/op_def_library.py:527 _apply_op_helper\r\n        preferred_dtype=default_dtype)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py:1296 internal_convert_to_tensor\r\n        ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py:286 _constant_tensor_conversion_function\r\n        return constant(v, dtype=dtype, name=name)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py:227 constant\r\n        allow_broadcast=True)\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/constant_op.py:265 _constant_impl\r\n        allow_broadcast=allow_broadcast))\r\n    /home/john76/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/tensor_util.py:545 make_tensor_proto\r\n        \"supported type.\" % (type(values), values))\r\n\r\n    TypeError: Failed to convert object of type <class 'tuple'> to Tensor. Contents: (-1, None, 200). Consider casting elements to a supported type.\r\n```","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564738853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false}},{"id":2875833449,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3NTgzMzQ0OQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2875833449","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-11T21:23:16Z","performed_via_github_app":null},{"id":2875833453,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzU4MzM0NTM=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2875833453","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-11T21:23:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564773647","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-564773647","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":564773647,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDc3MzY0Nw==","user":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T23:06:47Z","updated_at":"2019-12-11T23:06:47Z","author_association":"OWNER","body":"@John-8704 Can you also post the full model you got in place?","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564773647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false}},{"id":2876087391,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3NjA4NzM5MQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2876087391","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-11T23:06:47Z","performed_via_github_app":null},{"id":2876087394,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzYwODczOTQ=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2876087394","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-11T23:06:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564867052","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-564867052","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":564867052,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDg2NzA1Mg==","user":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T06:18:59Z","updated_at":"2019-12-12T06:33:36Z","author_association":"NONE","body":"@thushv89 This is the link to the [notebook](https://github.com/John-8704/code/blob/master/nmt-attention.ipynb) I'm working on. Also i'm the dataset is english-french sentences which also I've uploaded here. https://github.com/John-8704/code\r\n\r\nA small note, In my notebook I initialized fake states like this same as your code, It's exactly same as attention.py from your repo. **\"I think the error might be related to this but i'm not sure.\"**\r\n\r\n```\r\ndef create_inital_state(inputs, hidden_size):\r\n    # We are not using initial states, but need to pass something to K.rnn funciton\r\n    fake_state = K.zeros_like(inputs)  # <= (batch_size, enc_seq_len, latent_dim\r\n    fake_state = K.sum(fake_state, axis=[1, 2])  # <= (batch_size)\r\n    fake_state = K.expand_dims(fake_state)  # <= (batch_size, 1)\r\n    fake_state = K.tile(fake_state, [1, hidden_size])  # <= (batch_size, latent_dim\r\n    return fake_state\r\n\r\nfake_state_c = create_inital_state(encoder_out_seq, encoder_out_seq.shape[-1])\r\nfake_state_e = create_inital_state(encoder_out_seq, encoder_out_seq.shape[1]) \r\n```\r\n\r\nIf I instead initialize fake states like the above suggestion by ziadloo,\r\n```\r\nfake_state_e = K.zeros_like(K.placeholder(shape=(decoder_out_seq.shape[0], 1)))\r\nfake_state_c = K.zeros_like(K.placeholder(shape=(decoder_out_seq.shape[0], 1)))\r\n```\r\n\r\nthen I'm getting the error like the one above which I already shared in my previous comment.","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/564867052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false}},{"id":2876746465,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg3Njc0NjQ2NQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2876746465","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-12T06:18:59Z","performed_via_github_app":null},{"id":2876746466,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4NzY3NDY0NjY=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2876746466","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-12T06:18:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/565744621","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-565744621","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":565744621,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTc0NDYyMQ==","user":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"created_at":"2019-12-14T19:21:38Z","updated_at":"2019-12-14T19:21:38Z","author_association":"NONE","body":"@thushv89 Any update on why the error might be occurring? I couldn't figure out why I'm getting that error. Any temp fix?","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/565744621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false}},{"id":2883556798,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg4MzU1Njc5OA==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2883556798","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-14T19:21:38Z","performed_via_github_app":null},{"id":2883556799,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4ODM1NTY3OTk=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2883556799","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-14T19:21:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/565753151","html_url":"https://github.com/thushv89/attention_keras/issues/24#issuecomment-565753151","issue_url":"https://api.github.com/repos/thushv89/attention_keras/issues/24","id":565753151,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTc1MzE1MQ==","user":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"created_at":"2019-12-14T21:05:21Z","updated_at":"2019-12-14T21:05:21Z","author_association":"OWNER","body":"@John-8704 ,\r\n\r\nI had a look at your code. The problem is that you are using `None` as the length of your inputs length. This layer can handle only one `None` dimension in it's input (currently). Try the following for example. It'll work. \r\n\r\n```\r\ntimesteps = 15\r\nencoder_inputs = Input(shape=(timesteps,))\r\n\r\n# Decoder with attention\r\ntimesteps = 10\r\ndecoder_inputs = Input(shape=(timesteps,))\r\n```\r\n\r\n**PS**: If you can request this as a feature, I can start working on it at some point. :)","reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/comments/565753151/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false}},{"id":2883609527,"node_id":"MDExOkNsb3NlZEV2ZW50Mjg4MzYwOTUyNw==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2883609527","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-12-14T21:05:21Z","state_reason":null,"performed_via_github_app":null},{"id":2883609529,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjg4MzYwOTUyOQ==","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2883609529","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-12-14T21:05:21Z","performed_via_github_app":null},{"id":2883609530,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4ODM2MDk1MzA=","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2883609530","actor":{"login":"user06039","id":58213113,"node_id":"MDQ6VXNlcjU4MjEzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/58213113?v=4","gravatar_id":"","url":"https://api.github.com/users/user06039","html_url":"https://github.com/user06039","followers_url":"https://api.github.com/users/user06039/followers","following_url":"https://api.github.com/users/user06039/following{/other_user}","gists_url":"https://api.github.com/users/user06039/gists{/gist_id}","starred_url":"https://api.github.com/users/user06039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/user06039/subscriptions","organizations_url":"https://api.github.com/users/user06039/orgs","repos_url":"https://api.github.com/users/user06039/repos","events_url":"https://api.github.com/users/user06039/events{/privacy}","received_events_url":"https://api.github.com/users/user06039/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-12-14T21:05:21Z","performed_via_github_app":null},{"id":2883609580,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQyODgzNjA5NTgw","url":"https://api.github.com/repos/thushv89/attention_keras/issues/events/2883609580","actor":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2019-12-14T21:05:28Z","state_reason":null,"performed_via_github_app":null}]