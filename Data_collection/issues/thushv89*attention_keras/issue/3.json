{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/3","repository_url":"https://api.github.com/repos/thushv89/attention_keras","labels_url":"https://api.github.com/repos/thushv89/attention_keras/issues/3/labels{/name}","comments_url":"https://api.github.com/repos/thushv89/attention_keras/issues/3/comments","events_url":"https://api.github.com/repos/thushv89/attention_keras/issues/3/events","html_url":"https://github.com/thushv89/attention_keras/issues/3","id":422029973,"node_id":"MDU6SXNzdWU0MjIwMjk5NzM=","number":3,"title":"AttributeError: 'tuple' object has no attribute '_keras_shape'","user":{"login":"bigbizze","id":42508203,"node_id":"MDQ6VXNlcjQyNTA4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/42508203?v=4","gravatar_id":"","url":"https://api.github.com/users/bigbizze","html_url":"https://github.com/bigbizze","followers_url":"https://api.github.com/users/bigbizze/followers","following_url":"https://api.github.com/users/bigbizze/following{/other_user}","gists_url":"https://api.github.com/users/bigbizze/gists{/gist_id}","starred_url":"https://api.github.com/users/bigbizze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bigbizze/subscriptions","organizations_url":"https://api.github.com/users/bigbizze/orgs","repos_url":"https://api.github.com/users/bigbizze/repos","events_url":"https://api.github.com/users/bigbizze/events{/privacy}","received_events_url":"https://api.github.com/users/bigbizze/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-03-18T04:15:12Z","updated_at":"2019-04-17T20:00:00Z","closed_at":"2019-04-17T20:00:00Z","author_association":"NONE","active_lock_reason":null,"body":"I'm getting this error when using this code:\r\n\r\n\r\n```\r\ndef adjust(x):\r\n     return K.cast(K.reshape(x, (batch_size, 697, 64)), dtype='float32')\r\n\r\ninput_1 = Input(shape=(maxlen,), name=\"input1\")\r\nx_ = Embedding(vocab_size, embed_size, weights=[embed], name='embedding_1', trainable=False)(input_1)\r\nencoder_out, forward_h, backward_h = Bidirectional(GRU(32, return_sequences=True, return_state=True))(_x)\r\ndecoder_out, forward_h, backward_h = Bidirectional(GRU(32, return_sequences=True, return_state=True))(_x, initial_state=[forward_h, backward_h])\r\nencoder_out = Lambda(adjust)(encoder_out)\r\ndecoder_out = Lambda(adjust)(decoder_out)\r\nattn_out, attn_states = AttentionLayer()([encoder_out, decoder_out])\r\na = concatenate([decoder_out, attn_out], axis=1)\r\n```\r\n\r\nI'm under the impression this has something to do with how I'm reshaping the encoder & decoder inputs but when I don't reshape them to give a defined shape their shape is == to (?, ?, 64) and I get the error \"ValueError: Cannot convert a partially known TensorShape to a Tensor: (?, 64)\" followed by \"TypeError: __int__ returned non-int (type NoneType)\".\r\n\r\nWhen I use:\r\n\r\n```\r\ndef adjust(x):\r\n     return K.cast(tf.shape(x), dtype='float32')\r\n```\r\n\r\nInstead, my encoder & decoder shapes become (3,) which is quite confusing.\r\n\r\nI'm assuming that this is my mistake but if it isn't then I thought i'd make you aware of it! Great repository btw! I appreciate all & any advice!","closed_by":{"login":"thushv89","id":1381369,"node_id":"MDQ6VXNlcjEzODEzNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1381369?v=4","gravatar_id":"","url":"https://api.github.com/users/thushv89","html_url":"https://github.com/thushv89","followers_url":"https://api.github.com/users/thushv89/followers","following_url":"https://api.github.com/users/thushv89/following{/other_user}","gists_url":"https://api.github.com/users/thushv89/gists{/gist_id}","starred_url":"https://api.github.com/users/thushv89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thushv89/subscriptions","organizations_url":"https://api.github.com/users/thushv89/orgs","repos_url":"https://api.github.com/users/thushv89/repos","events_url":"https://api.github.com/users/thushv89/events{/privacy}","received_events_url":"https://api.github.com/users/thushv89/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/thushv89/attention_keras/issues/3/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/thushv89/attention_keras/issues/3/timeline","performed_via_github_app":null,"state_reason":"completed"}