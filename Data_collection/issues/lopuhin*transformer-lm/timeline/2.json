[{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/477911822","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-477911822","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":477911822,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzkxMTgyMg==","user":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"created_at":"2019-03-29T08:26:51Z","updated_at":"2019-03-29T08:26:51Z","author_association":"OWNER","body":"Thank you @binhvq üëç \r\nThis is something I would love to have. It's possible to do that by excluding some code from the training script, as it generates samples during training, but I would love to have this feature stand-alone.\r\n\r\nBut right now I'm moving to Tensorflow 2.0 to be able to support multi-GPU training easily, plan to get back to easy text scoring and generation once it's done.","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/477911822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false}},{"id":2238527258,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIzODUyNzI1OA==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238527258","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-29T08:26:51Z","performed_via_github_app":null},{"id":2238527260,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMzg1MjcyNjA=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238527260","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-29T08:26:51Z","performed_via_github_app":null},{"id":2238612856,"node_id":"MDExOkNsb3NlZEV2ZW50MjIzODYxMjg1Ng==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238612856","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-03-29T09:04:24Z","state_reason":null,"performed_via_github_app":null},{"id":2238614423,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjIzODYxNDQyMw==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238614423","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2019-03-29T09:05:06Z","rename":{"from":"Test after trainning finish","to":"Stand-alone text generation and scoring scripts"},"performed_via_github_app":null},{"id":2238614535,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQyMjM4NjE0NTM1","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238614535","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2019-03-29T09:05:08Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/477922870","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-477922870","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":477922870,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzkyMjg3MA==","user":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"created_at":"2019-03-29T09:05:48Z","updated_at":"2019-03-29T09:05:48Z","author_association":"OWNER","body":"@binhvq keeping it open as this is something to be done, I hope you don't mind the title change.","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/477922870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false}},{"id":2238616031,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIzODYxNjAzMQ==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238616031","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-29T09:05:48Z","performed_via_github_app":null},{"id":2238616032,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMzg2MTYwMzI=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2238616032","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-29T09:05:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/477923430","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-477923430","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":477923430,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzkyMzQzMA==","user":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"created_at":"2019-03-29T09:07:49Z","updated_at":"2019-03-29T09:07:49Z","author_association":"NONE","body":"Hi lopuhin!\r\nI was write code for load model and generate text.  It's very simple.\r\n\r\nThanks","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/477923430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/484655500","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-484655500","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":484655500,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDY1NTUwMA==","user":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"created_at":"2019-04-18T19:30:22Z","updated_at":"2019-04-18T19:30:22Z","author_association":"OWNER","body":"Scoring is implemented in https://github.com/lopuhin/transformer-lm/blob/master/lm/inference.py","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/484655500/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/490131275","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-490131275","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":490131275,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDEzMTI3NQ==","user":{"login":"virgulvirgul","id":7441847,"node_id":"MDQ6VXNlcjc0NDE4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7441847?v=4","gravatar_id":"","url":"https://api.github.com/users/virgulvirgul","html_url":"https://github.com/virgulvirgul","followers_url":"https://api.github.com/users/virgulvirgul/followers","following_url":"https://api.github.com/users/virgulvirgul/following{/other_user}","gists_url":"https://api.github.com/users/virgulvirgul/gists{/gist_id}","starred_url":"https://api.github.com/users/virgulvirgul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/virgulvirgul/subscriptions","organizations_url":"https://api.github.com/users/virgulvirgul/orgs","repos_url":"https://api.github.com/users/virgulvirgul/repos","events_url":"https://api.github.com/users/virgulvirgul/events{/privacy}","received_events_url":"https://api.github.com/users/virgulvirgul/received_events","type":"User","site_admin":false},"created_at":"2019-05-07T15:33:42Z","updated_at":"2019-05-07T15:33:42Z","author_association":"NONE","body":"@binhvq @lopuhin Can you please share text generate script?","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/490131275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"virgulvirgul","id":7441847,"node_id":"MDQ6VXNlcjc0NDE4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7441847?v=4","gravatar_id":"","url":"https://api.github.com/users/virgulvirgul","html_url":"https://github.com/virgulvirgul","followers_url":"https://api.github.com/users/virgulvirgul/followers","following_url":"https://api.github.com/users/virgulvirgul/following{/other_user}","gists_url":"https://api.github.com/users/virgulvirgul/gists{/gist_id}","starred_url":"https://api.github.com/users/virgulvirgul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/virgulvirgul/subscriptions","organizations_url":"https://api.github.com/users/virgulvirgul/orgs","repos_url":"https://api.github.com/users/virgulvirgul/repos","events_url":"https://api.github.com/users/virgulvirgul/events{/privacy}","received_events_url":"https://api.github.com/users/virgulvirgul/received_events","type":"User","site_admin":false}},{"id":2324620249,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMyNDYyMDI0OQ==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2324620249","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-07T15:33:42Z","performed_via_github_app":null},{"id":2324620252,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMjQ2MjAyNTI=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2324620252","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-07T15:33:42Z","performed_via_github_app":null},{"id":2324620258,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMyNDYyMDI1OA==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2324620258","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-07T15:33:43Z","performed_via_github_app":null},{"id":2324620260,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMjQ2MjAyNjA=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2324620260","actor":{"login":"binhvq","id":7200425,"node_id":"MDQ6VXNlcjcyMDA0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7200425?v=4","gravatar_id":"","url":"https://api.github.com/users/binhvq","html_url":"https://github.com/binhvq","followers_url":"https://api.github.com/users/binhvq/followers","following_url":"https://api.github.com/users/binhvq/following{/other_user}","gists_url":"https://api.github.com/users/binhvq/gists{/gist_id}","starred_url":"https://api.github.com/users/binhvq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binhvq/subscriptions","organizations_url":"https://api.github.com/users/binhvq/orgs","repos_url":"https://api.github.com/users/binhvq/repos","events_url":"https://api.github.com/users/binhvq/events{/privacy}","received_events_url":"https://api.github.com/users/binhvq/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-07T15:33:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/490369523","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-490369523","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":490369523,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDM2OTUyMw==","user":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"created_at":"2019-05-08T06:48:34Z","updated_at":"2019-05-08T06:48:34Z","author_association":"OWNER","body":"@virgulvirgul I don't have it, but if you have log probabilities for next token, you can take an exponent to get real probabilities, then select say top 40 of them, and then select next token using this probabilities (e.g. passing probabilities into ``p`` parameter of ``np.random.choice``).","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/490369523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false}},{"id":2326309673,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMyNjMwOTY3Mw==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2326309673","actor":{"login":"virgulvirgul","id":7441847,"node_id":"MDQ6VXNlcjc0NDE4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7441847?v=4","gravatar_id":"","url":"https://api.github.com/users/virgulvirgul","html_url":"https://github.com/virgulvirgul","followers_url":"https://api.github.com/users/virgulvirgul/followers","following_url":"https://api.github.com/users/virgulvirgul/following{/other_user}","gists_url":"https://api.github.com/users/virgulvirgul/gists{/gist_id}","starred_url":"https://api.github.com/users/virgulvirgul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/virgulvirgul/subscriptions","organizations_url":"https://api.github.com/users/virgulvirgul/orgs","repos_url":"https://api.github.com/users/virgulvirgul/repos","events_url":"https://api.github.com/users/virgulvirgul/events{/privacy}","received_events_url":"https://api.github.com/users/virgulvirgul/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-08T06:48:35Z","performed_via_github_app":null},{"id":2326309675,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMjYzMDk2NzU=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2326309675","actor":{"login":"virgulvirgul","id":7441847,"node_id":"MDQ6VXNlcjc0NDE4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7441847?v=4","gravatar_id":"","url":"https://api.github.com/users/virgulvirgul","html_url":"https://github.com/virgulvirgul","followers_url":"https://api.github.com/users/virgulvirgul/followers","following_url":"https://api.github.com/users/virgulvirgul/following{/other_user}","gists_url":"https://api.github.com/users/virgulvirgul/gists{/gist_id}","starred_url":"https://api.github.com/users/virgulvirgul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/virgulvirgul/subscriptions","organizations_url":"https://api.github.com/users/virgulvirgul/orgs","repos_url":"https://api.github.com/users/virgulvirgul/repos","events_url":"https://api.github.com/users/virgulvirgul/events{/privacy}","received_events_url":"https://api.github.com/users/virgulvirgul/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-08T06:48:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/511742139","html_url":"https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-511742139","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/2","id":511742139,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTc0MjEzOQ==","user":{"login":"gooofy","id":6418859,"node_id":"MDQ6VXNlcjY0MTg4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/6418859?v=4","gravatar_id":"","url":"https://api.github.com/users/gooofy","html_url":"https://github.com/gooofy","followers_url":"https://api.github.com/users/gooofy/followers","following_url":"https://api.github.com/users/gooofy/following{/other_user}","gists_url":"https://api.github.com/users/gooofy/gists{/gist_id}","starred_url":"https://api.github.com/users/gooofy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gooofy/subscriptions","organizations_url":"https://api.github.com/users/gooofy/orgs","repos_url":"https://api.github.com/users/gooofy/repos","events_url":"https://api.github.com/users/gooofy/events{/privacy}","received_events_url":"https://api.github.com/users/gooofy/received_events","type":"User","site_admin":false},"created_at":"2019-07-16T09:33:27Z","updated_at":"2019-07-16T09:33:27Z","author_association":"CONTRIBUTOR","body":"implemented this approach, works great for my model so far:\r\n\r\n```\r\n#!/usr/bin/env python\r\n# -*- coding: utf-8 -*-\r\n\r\nfrom pathlib import Path\r\nfrom lm import inference\r\n\r\nimport numpy as np\r\n\r\nMODEL_PATH = Path('run-root')\r\n\r\nTOKENS_TO_GENERATE = 32\r\n\r\nTOP_K = 8\r\n\r\nmw = inference.ModelWrapper.load(MODEL_PATH)\r\n\r\ntxt = \"Die Forschung an der k√ºnstlichen Intelligenz\"\r\n\r\ntokens = mw.tokenize(txt)\r\n\r\nfor i in range(TOKENS_TO_GENERATE):\r\n\r\n    # generate TOP_K potential next tokens\r\n    ntk = mw.get_next_top_k(tokens, TOP_K)\r\n\r\n    # convert log probs to real probs\r\n    logprobs = np.array(list(map(lambda a: a[0], ntk)))\r\n    probs = np.exp(logprobs) / np.exp(logprobs).sum()\r\n\r\n    # pick next token randomly according to probs distribution\r\n    next_token_n = np.random.choice(TOP_K, p=probs)\r\n    next_token = ntk[next_token_n][1]\r\n    print (next_token)\r\n\r\n    tokens.append(next_token)\r\n\r\nprint(mw.sp_model.DecodePieces(tokens))\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/511742139/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gooofy","id":6418859,"node_id":"MDQ6VXNlcjY0MTg4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/6418859?v=4","gravatar_id":"","url":"https://api.github.com/users/gooofy","html_url":"https://github.com/gooofy","followers_url":"https://api.github.com/users/gooofy/followers","following_url":"https://api.github.com/users/gooofy/following{/other_user}","gists_url":"https://api.github.com/users/gooofy/gists{/gist_id}","starred_url":"https://api.github.com/users/gooofy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gooofy/subscriptions","organizations_url":"https://api.github.com/users/gooofy/orgs","repos_url":"https://api.github.com/users/gooofy/repos","events_url":"https://api.github.com/users/gooofy/events{/privacy}","received_events_url":"https://api.github.com/users/gooofy/received_events","type":"User","site_admin":false}},{"id":2546576892,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI1NDY1NzY4OTI=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2546576892","actor":{"login":"gsuszka","id":18473705,"node_id":"MDQ6VXNlcjE4NDczNzA1","avatar_url":"https://avatars.githubusercontent.com/u/18473705?v=4","gravatar_id":"","url":"https://api.github.com/users/gsuszka","html_url":"https://github.com/gsuszka","followers_url":"https://api.github.com/users/gsuszka/followers","following_url":"https://api.github.com/users/gsuszka/following{/other_user}","gists_url":"https://api.github.com/users/gsuszka/gists{/gist_id}","starred_url":"https://api.github.com/users/gsuszka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsuszka/subscriptions","organizations_url":"https://api.github.com/users/gsuszka/orgs","repos_url":"https://api.github.com/users/gsuszka/repos","events_url":"https://api.github.com/users/gsuszka/events{/privacy}","received_events_url":"https://api.github.com/users/gsuszka/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"d5944b19313f0f1cf558471f91734fd4b27c80b6","commit_url":"https://api.github.com/repos/iambotHQ/transformer-lm/commits/d5944b19313f0f1cf558471f91734fd4b27c80b6","created_at":"2019-08-09T14:00:59Z","performed_via_github_app":null},{"actor":{"login":"r23","id":396063,"node_id":"MDQ6VXNlcjM5NjA2Mw==","avatar_url":"https://avatars.githubusercontent.com/u/396063?v=4","gravatar_id":"","url":"https://api.github.com/users/r23","html_url":"https://github.com/r23","followers_url":"https://api.github.com/users/r23/followers","following_url":"https://api.github.com/users/r23/following{/other_user}","gists_url":"https://api.github.com/users/r23/gists{/gist_id}","starred_url":"https://api.github.com/users/r23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r23/subscriptions","organizations_url":"https://api.github.com/users/r23/orgs","repos_url":"https://api.github.com/users/r23/repos","events_url":"https://api.github.com/users/r23/events{/privacy}","received_events_url":"https://api.github.com/users/r23/received_events","type":"User","site_admin":false},"created_at":"2021-04-17T03:02:49Z","updated_at":"2021-04-17T03:02:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/31","repository_url":"https://api.github.com/repos/lopuhin/transformer-lm","labels_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/31/comments","events_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/31/events","html_url":"https://github.com/lopuhin/transformer-lm/issues/31","id":860308439,"node_id":"MDU6SXNzdWU4NjAzMDg0Mzk=","number":31,"title":"I would like a longer text result","user":{"login":"r23","id":396063,"node_id":"MDQ6VXNlcjM5NjA2Mw==","avatar_url":"https://avatars.githubusercontent.com/u/396063?v=4","gravatar_id":"","url":"https://api.github.com/users/r23","html_url":"https://github.com/r23","followers_url":"https://api.github.com/users/r23/followers","following_url":"https://api.github.com/users/r23/following{/other_user}","gists_url":"https://api.github.com/users/r23/gists{/gist_id}","starred_url":"https://api.github.com/users/r23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r23/subscriptions","organizations_url":"https://api.github.com/users/r23/orgs","repos_url":"https://api.github.com/users/r23/repos","events_url":"https://api.github.com/users/r23/events{/privacy}","received_events_url":"https://api.github.com/users/r23/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-04-17T03:02:48Z","updated_at":"2021-04-18T10:29:13Z","closed_at":"2021-04-17T23:49:01Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":176069746,"node_id":"MDEwOlJlcG9zaXRvcnkxNzYwNjk3NDY=","name":"transformer-lm","full_name":"lopuhin/transformer-lm","private":false,"owner":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"html_url":"https://github.com/lopuhin/transformer-lm","description":"Transformer language model (GPT-2) with sentencepiece tokenizer","fork":false,"url":"https://api.github.com/repos/lopuhin/transformer-lm","forks_url":"https://api.github.com/repos/lopuhin/transformer-lm/forks","keys_url":"https://api.github.com/repos/lopuhin/transformer-lm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lopuhin/transformer-lm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lopuhin/transformer-lm/teams","hooks_url":"https://api.github.com/repos/lopuhin/transformer-lm/hooks","issue_events_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events{/number}","events_url":"https://api.github.com/repos/lopuhin/transformer-lm/events","assignees_url":"https://api.github.com/repos/lopuhin/transformer-lm/assignees{/user}","branches_url":"https://api.github.com/repos/lopuhin/transformer-lm/branches{/branch}","tags_url":"https://api.github.com/repos/lopuhin/transformer-lm/tags","blobs_url":"https://api.github.com/repos/lopuhin/transformer-lm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lopuhin/transformer-lm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lopuhin/transformer-lm/git/refs{/sha}","trees_url":"https://api.github.com/repos/lopuhin/transformer-lm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lopuhin/transformer-lm/statuses/{sha}","languages_url":"https://api.github.com/repos/lopuhin/transformer-lm/languages","stargazers_url":"https://api.github.com/repos/lopuhin/transformer-lm/stargazers","contributors_url":"https://api.github.com/repos/lopuhin/transformer-lm/contributors","subscribers_url":"https://api.github.com/repos/lopuhin/transformer-lm/subscribers","subscription_url":"https://api.github.com/repos/lopuhin/transformer-lm/subscription","commits_url":"https://api.github.com/repos/lopuhin/transformer-lm/commits{/sha}","git_commits_url":"https://api.github.com/repos/lopuhin/transformer-lm/git/commits{/sha}","comments_url":"https://api.github.com/repos/lopuhin/transformer-lm/comments{/number}","issue_comment_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments{/number}","contents_url":"https://api.github.com/repos/lopuhin/transformer-lm/contents/{+path}","compare_url":"https://api.github.com/repos/lopuhin/transformer-lm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lopuhin/transformer-lm/merges","archive_url":"https://api.github.com/repos/lopuhin/transformer-lm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lopuhin/transformer-lm/downloads","issues_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues{/number}","pulls_url":"https://api.github.com/repos/lopuhin/transformer-lm/pulls{/number}","milestones_url":"https://api.github.com/repos/lopuhin/transformer-lm/milestones{/number}","notifications_url":"https://api.github.com/repos/lopuhin/transformer-lm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lopuhin/transformer-lm/labels{/name}","releases_url":"https://api.github.com/repos/lopuhin/transformer-lm/releases{/id}","deployments_url":"https://api.github.com/repos/lopuhin/transformer-lm/deployments","created_at":"2019-03-17T07:30:07Z","updated_at":"2022-04-07T17:19:19Z","pushed_at":"2021-02-27T15:23:53Z","git_url":"git://github.com/lopuhin/transformer-lm.git","ssh_url":"git@github.com:lopuhin/transformer-lm.git","clone_url":"https://github.com/lopuhin/transformer-lm.git","svn_url":"https://github.com/lopuhin/transformer-lm","homepage":"","size":368,"stargazers_count":161,"watchers_count":161,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":46,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":9,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["gpt-2","language-model","tensorflow"],"visibility":"public","forks":46,"open_issues":9,"watchers":161,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello,\r\n\r\nThank you very much for the wonderful project. It works great! I just have no question about the text length.\r\n\r\nI use the following script \r\nFrom [https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-511742139](https://github.com/lopuhin/transformer-lm/issues/2#issuecomment-511742139)\r\n\r\n```\r\n\r\n#!/usr/bin/env python\r\n# -*- coding: utf-8 -*-\r\n\r\nfrom pathlib import Path\r\nfrom lm import inference\r\n\r\nimport numpy as np\r\n\r\nMODEL_PATH = Path('/..../pytorch_models/de345-root/')\r\n\r\nTOKENS_TO_GENERATE = 38\r\n\r\nTOP_K = 8\r\n\r\nmw = inference.ModelWrapper.load(MODEL_PATH)\r\n\r\ntxt = \"Die Forschung an der k√ºnstlichen Intelligenz\"\r\n\r\ntokens = mw.tokenize(txt)\r\n\r\nfor i in range(TOKENS_TO_GENERATE):\r\n\r\n    # generate TOP_K potential next tokens\r\n    ntk = mw.get_next_top_k(tokens, TOP_K)\r\n\r\n    # convert log probs to real probs\r\n    logprobs = np.array(list(map(lambda a: a[0], ntk)))\r\n    probs = np.exp(logprobs) / np.exp(logprobs).sum()\r\n\r\n    # pick next token randomly according to probs distribution\r\n    next_token_n = np.random.choice(TOP_K, p=probs)\r\n    next_token = ntk[next_token_n][1]\r\n    # print (next_token)\r\n\r\n    tokens.append(next_token)\r\n\r\nprint(mw.sp_model.DecodePieces(tokens))\r\n```\r\n\r\n### The result\r\n> \r\nDie Forschung an der k√ºnstlichen Intelligenz, die sich mit der k√ºnstlichen Intelligenz befassen und die Entwicklung der k√ºnstlichen Intelligenz vorantreiben will, soll in der Zukunft fortgesetzt werden. Das berichtet Technology Review in seiner aktuellen Ausgabe (online zu bestellen). Das\r\n\r\n\r\nGreat\r\n\r\nI'm afraid I'd like a longer text, comparable to \r\npython3 src/interactive_conditional_samples.py\r\nhttps://github.com/openai/gpt-2/blob/master/src/interactive_conditional_samples.py\r\n\r\nGPT-2 generates there sample texts with 4 paragraphs with 2338 characters 406 words.\r\n\r\nWhat do I have to change in the above script for a longer result text? \r\n\r\nI look forward to hints and tips and thank you already now\r\n\r\nRalf\r\n","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/31/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]