[{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/520804040","html_url":"https://github.com/lopuhin/transformer-lm/issues/17#issuecomment-520804040","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/17","id":520804040,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDgwNDA0MA==","user":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"created_at":"2019-08-13T11:54:22Z","updated_at":"2019-08-13T11:54:22Z","author_association":"OWNER","body":"Thank you for your kind words @choomz \r\n\r\n> is it better to put one sentence per line, or a complete article and an empty line between each article?\r\n\r\nEnd of line is nativly supported, it would be replaced with a special symbol during tokenization: https://github.com/lopuhin/transformer-lm/blob/fa3f529ff300a30cd984ea72a4e23b525b6e3f52/lm/common.py#L2\r\nso it's up to you how to best use newlines - I definitely wouldn't put them in the middle of the sentence (unless you're training on poetry), but rather put then at the end of paragraph. Putting them at the end of sentence would also work but it not required.\r\n\r\n> you also have recommendations on the distribution of contents between train / test / valid?\r\n\r\nNo special recommendations, usual rules of thumbs from machine learning apply. One note - if you corpus is say 10-20 GB of text, then it would be quite hard to overfit it without training for a really long time, or using many GPUs.","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/520804040/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false}},{"id":2553109836,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjU1MzEwOTgzNg==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2553109836","actor":{"login":"choomz","id":1176482,"node_id":"MDQ6VXNlcjExNzY0ODI=","avatar_url":"https://avatars.githubusercontent.com/u/1176482?v=4","gravatar_id":"","url":"https://api.github.com/users/choomz","html_url":"https://github.com/choomz","followers_url":"https://api.github.com/users/choomz/followers","following_url":"https://api.github.com/users/choomz/following{/other_user}","gists_url":"https://api.github.com/users/choomz/gists{/gist_id}","starred_url":"https://api.github.com/users/choomz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choomz/subscriptions","organizations_url":"https://api.github.com/users/choomz/orgs","repos_url":"https://api.github.com/users/choomz/repos","events_url":"https://api.github.com/users/choomz/events{/privacy}","received_events_url":"https://api.github.com/users/choomz/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-13T11:54:23Z","performed_via_github_app":null},{"id":2553109837,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1NTMxMDk4Mzc=","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/2553109837","actor":{"login":"choomz","id":1176482,"node_id":"MDQ6VXNlcjExNzY0ODI=","avatar_url":"https://avatars.githubusercontent.com/u/1176482?v=4","gravatar_id":"","url":"https://api.github.com/users/choomz","html_url":"https://github.com/choomz","followers_url":"https://api.github.com/users/choomz/followers","following_url":"https://api.github.com/users/choomz/following{/other_user}","gists_url":"https://api.github.com/users/choomz/gists{/gist_id}","starred_url":"https://api.github.com/users/choomz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choomz/subscriptions","organizations_url":"https://api.github.com/users/choomz/orgs","repos_url":"https://api.github.com/users/choomz/repos","events_url":"https://api.github.com/users/choomz/events{/privacy}","received_events_url":"https://api.github.com/users/choomz/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-13T11:54:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/520824883","html_url":"https://github.com/lopuhin/transformer-lm/issues/17#issuecomment-520824883","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/17","id":520824883,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDgyNDg4Mw==","user":{"login":"choomz","id":1176482,"node_id":"MDQ6VXNlcjExNzY0ODI=","avatar_url":"https://avatars.githubusercontent.com/u/1176482?v=4","gravatar_id":"","url":"https://api.github.com/users/choomz","html_url":"https://github.com/choomz","followers_url":"https://api.github.com/users/choomz/followers","following_url":"https://api.github.com/users/choomz/following{/other_user}","gists_url":"https://api.github.com/users/choomz/gists{/gist_id}","starred_url":"https://api.github.com/users/choomz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choomz/subscriptions","organizations_url":"https://api.github.com/users/choomz/orgs","repos_url":"https://api.github.com/users/choomz/repos","events_url":"https://api.github.com/users/choomz/events{/privacy}","received_events_url":"https://api.github.com/users/choomz/received_events","type":"User","site_admin":false},"created_at":"2019-08-13T13:01:47Z","updated_at":"2019-08-13T13:01:47Z","author_association":"NONE","body":"Thank you for your quick answer. I will put new lines after each paragraph then. \r\n\r\nI allow myself another question about the input parameters on the `gpt-2` command.\r\n\r\nDo you have some tips about the best use of them and their meaning ?\r\n\r\nActually I'm just trying on a small corpus (40k sentences), increasing the number of epoch 10 by 10 to see a result. It's not yet relevant but I think because it's really too small (I event get an error if I don't limit the vocab size at the first command).\r\n\r\nBut on larger corpus, I would like to understand the parameters and also the number of epochs needed etc ... I noticed that the train time can be huge without limiting even on very small corpus. So if you have some clue for a beginner ... :)\r\n\r\nBest regards","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/520824883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"choomz","id":1176482,"node_id":"MDQ6VXNlcjExNzY0ODI=","avatar_url":"https://avatars.githubusercontent.com/u/1176482?v=4","gravatar_id":"","url":"https://api.github.com/users/choomz","html_url":"https://github.com/choomz","followers_url":"https://api.github.com/users/choomz/followers","following_url":"https://api.github.com/users/choomz/following{/other_user}","gists_url":"https://api.github.com/users/choomz/gists{/gist_id}","starred_url":"https://api.github.com/users/choomz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choomz/subscriptions","organizations_url":"https://api.github.com/users/choomz/orgs","repos_url":"https://api.github.com/users/choomz/repos","events_url":"https://api.github.com/users/choomz/events{/privacy}","received_events_url":"https://api.github.com/users/choomz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/520842136","html_url":"https://github.com/lopuhin/transformer-lm/issues/17#issuecomment-520842136","issue_url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/17","id":520842136,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg0MjEzNg==","user":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"created_at":"2019-08-13T13:48:37Z","updated_at":"2019-08-13T13:48:37Z","author_association":"OWNER","body":"I think a good approach would be to train until the validation loss improves for a small corpus, and until you have patience/hardware for a large corpus -- because it's often easy to get a corpus that big that the model won't overfit in any reasonable amount of time on one GPU.","reactions":{"url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/comments/520842136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false}},{"id":3564295986,"node_id":"MDExOkNsb3NlZEV2ZW50MzU2NDI5NTk4Ng==","url":"https://api.github.com/repos/lopuhin/transformer-lm/issues/events/3564295986","actor":{"login":"lopuhin","id":424613,"node_id":"MDQ6VXNlcjQyNDYxMw==","avatar_url":"https://avatars.githubusercontent.com/u/424613?v=4","gravatar_id":"","url":"https://api.github.com/users/lopuhin","html_url":"https://github.com/lopuhin","followers_url":"https://api.github.com/users/lopuhin/followers","following_url":"https://api.github.com/users/lopuhin/following{/other_user}","gists_url":"https://api.github.com/users/lopuhin/gists{/gist_id}","starred_url":"https://api.github.com/users/lopuhin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lopuhin/subscriptions","organizations_url":"https://api.github.com/users/lopuhin/orgs","repos_url":"https://api.github.com/users/lopuhin/repos","events_url":"https://api.github.com/users/lopuhin/events{/privacy}","received_events_url":"https://api.github.com/users/lopuhin/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-07-20T07:20:26Z","state_reason":null,"performed_via_github_app":null}]