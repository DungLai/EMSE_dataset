{"url":"https://api.github.com/repos/intel/dffml/issues/619","repository_url":"https://api.github.com/repos/intel/dffml","labels_url":"https://api.github.com/repos/intel/dffml/issues/619/labels{/name}","comments_url":"https://api.github.com/repos/intel/dffml/issues/619/comments","events_url":"https://api.github.com/repos/intel/dffml/issues/619/events","html_url":"https://github.com/intel/dffml/issues/619","id":614798023,"node_id":"MDU6SXNzdWU2MTQ3OTgwMjM=","number":619,"title":"util: testing: Move core docstrings test logic into main package","user":{"login":"pdxjohnny","id":5950433,"node_id":"MDQ6VXNlcjU5NTA0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5950433?v=4","gravatar_id":"","url":"https://api.github.com/users/pdxjohnny","html_url":"https://github.com/pdxjohnny","followers_url":"https://api.github.com/users/pdxjohnny/followers","following_url":"https://api.github.com/users/pdxjohnny/following{/other_user}","gists_url":"https://api.github.com/users/pdxjohnny/gists{/gist_id}","starred_url":"https://api.github.com/users/pdxjohnny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdxjohnny/subscriptions","organizations_url":"https://api.github.com/users/pdxjohnny/orgs","repos_url":"https://api.github.com/users/pdxjohnny/repos","events_url":"https://api.github.com/users/pdxjohnny/events{/privacy}","received_events_url":"https://api.github.com/users/pdxjohnny/received_events","type":"User","site_admin":false},"labels":[{"id":1062701220,"node_id":"MDU6TGFiZWwxMDYyNzAxMjIw","url":"https://api.github.com/repos/intel/dffml/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1740392441,"node_id":"MDU6TGFiZWwxNzQwMzkyNDQx","url":"https://api.github.com/repos/intel/dffml/labels/p0","name":"p0","color":"b60205","default":false,"description":"Critical Priority"},{"id":1740462287,"node_id":"MDU6TGFiZWwxNzQwNDYyMjg3","url":"https://api.github.com/repos/intel/dffml/labels/tM","name":"tM","color":"82c8e0","default":false,"description":"Esitmated Time To Complete: Medium"},{"id":2853507599,"node_id":"MDU6TGFiZWwyODUzNTA3NTk5","url":"https://api.github.com/repos/intel/dffml/labels/2ndparty","name":"2ndparty","color":"d93f0b","default":false,"description":"Will be a 2nd party plugin, pending 2nd party org"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/intel/dffml/milestones/3","html_url":"https://github.com/intel/dffml/milestone/3","labels_url":"https://api.github.com/repos/intel/dffml/milestones/3/labels","id":4447271,"node_id":"MDk6TWlsZXN0b25lNDQ0NzI3MQ==","number":3,"title":"1.0 Release","description":"","creator":{"login":"pdxjohnny","id":5950433,"node_id":"MDQ6VXNlcjU5NTA0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5950433?v=4","gravatar_id":"","url":"https://api.github.com/users/pdxjohnny","html_url":"https://github.com/pdxjohnny","followers_url":"https://api.github.com/users/pdxjohnny/followers","following_url":"https://api.github.com/users/pdxjohnny/following{/other_user}","gists_url":"https://api.github.com/users/pdxjohnny/gists{/gist_id}","starred_url":"https://api.github.com/users/pdxjohnny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdxjohnny/subscriptions","organizations_url":"https://api.github.com/users/pdxjohnny/orgs","repos_url":"https://api.github.com/users/pdxjohnny/repos","events_url":"https://api.github.com/users/pdxjohnny/events{/privacy}","received_events_url":"https://api.github.com/users/pdxjohnny/received_events","type":"User","site_admin":false},"open_issues":108,"closed_issues":1,"state":"open","created_at":"2019-06-27T19:59:32Z","updated_at":"2022-04-27T22:07:45Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2020-05-08T15:01:57Z","updated_at":"2021-11-18T12:00:24Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"We should refactor `tests/test_docstrings.py` into `dffml/util/testing/docstrings.py` and make it so that the plugins all have a file under their tests which imports and uses the docstring test code so that the plugins docstrings are always tested.\r\n\r\nThe goal here is to take out as much code as possible from `tests/test_docstrings.py` and make it into something which the plugins could import from plugins. For example, say we ran `dffml service dev create model dffml-model-myslr`, and wrote some python examples for the model within the docstring using `>>> ` syntax. We also wrote a `util.py` with a function and that function has `>>> ` style examples in it (see `dffml/util/data.py` for examples). The goal of this issue is that to test both these examples. We only need to add the following to a `tests/test_docstring.py` file:\r\n\r\n**dffml/skel/common/tests/test_docstring.py**\r\n\r\n```python\r\nimport pathlib\r\n\r\nfrom dffml.util.testing.docstrings import make_docstring_tests\r\n\r\n\r\nREPO_ROOT = pathlib.Path(__file__).parents[1]\r\n\r\nfor TestCase in make_docstring_tests(REPO_ROOT):\r\n    setattr(sys.modules[__name__], TestCase.__qaulname__, TestCase)\r\n```\r\n\r\nOur new function, `make_docstring_tests()`, should be essentially the same as the last two for loops in the the old version.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/intel/dffml/issues/619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/intel/dffml/issues/619/timeline","performed_via_github_app":null,"state_reason":null}