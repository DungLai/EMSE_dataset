{"url":"https://api.github.com/repos/intel/dffml/issues/207","repository_url":"https://api.github.com/repos/intel/dffml","labels_url":"https://api.github.com/repos/intel/dffml/issues/207/labels{/name}","comments_url":"https://api.github.com/repos/intel/dffml/issues/207/comments","events_url":"https://api.github.com/repos/intel/dffml/issues/207/events","html_url":"https://github.com/intel/dffml/issues/207","id":495955341,"node_id":"MDU6SXNzdWU0OTU5NTUzNDE=","number":207,"title":"source: csv: CSVSource is reporting int values for src_url instead of string","user":{"login":"pdxjohnny","id":5950433,"node_id":"MDQ6VXNlcjU5NTA0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5950433?v=4","gravatar_id":"","url":"https://api.github.com/users/pdxjohnny","html_url":"https://github.com/pdxjohnny","followers_url":"https://api.github.com/users/pdxjohnny/followers","following_url":"https://api.github.com/users/pdxjohnny/following{/other_user}","gists_url":"https://api.github.com/users/pdxjohnny/gists{/gist_id}","starred_url":"https://api.github.com/users/pdxjohnny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdxjohnny/subscriptions","organizations_url":"https://api.github.com/users/pdxjohnny/orgs","repos_url":"https://api.github.com/users/pdxjohnny/repos","events_url":"https://api.github.com/users/pdxjohnny/events{/privacy}","received_events_url":"https://api.github.com/users/pdxjohnny/received_events","type":"User","site_admin":false},"labels":[{"id":1062701217,"node_id":"MDU6TGFiZWwxMDYyNzAxMjE3","url":"https://api.github.com/repos/intel/dffml/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/intel/dffml/milestones/4","html_url":"https://github.com/intel/dffml/milestone/4","labels_url":"https://api.github.com/repos/intel/dffml/milestones/4/labels","id":4541475,"node_id":"MDk6TWlsZXN0b25lNDU0MTQ3NQ==","number":4,"title":"0.3.1 Alpha Release","description":"","creator":{"login":"pdxjohnny","id":5950433,"node_id":"MDQ6VXNlcjU5NTA0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5950433?v=4","gravatar_id":"","url":"https://api.github.com/users/pdxjohnny","html_url":"https://github.com/pdxjohnny","followers_url":"https://api.github.com/users/pdxjohnny/followers","following_url":"https://api.github.com/users/pdxjohnny/following{/other_user}","gists_url":"https://api.github.com/users/pdxjohnny/gists{/gist_id}","starred_url":"https://api.github.com/users/pdxjohnny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdxjohnny/subscriptions","organizations_url":"https://api.github.com/users/pdxjohnny/orgs","repos_url":"https://api.github.com/users/pdxjohnny/repos","events_url":"https://api.github.com/users/pdxjohnny/events{/privacy}","received_events_url":"https://api.github.com/users/pdxjohnny/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":26,"state":"closed","created_at":"2019-08-01T23:30:03Z","updated_at":"2020-01-05T21:57:07Z","due_on":null,"closed_at":"2019-12-17T21:56:14Z"},"comments":2,"created_at":"2019-09-19T18:20:05Z","updated_at":"2019-12-12T08:18:36Z","closed_at":"2019-12-12T08:18:36Z","author_association":"MEMBER","active_lock_reason":null,"body":"```console\r\n$ cat > train.csv << EOF\r\n> Years,Expertise,Trust,Salary\r\n> 0,1,0.2,10\r\n> 1,3,0.4,20\r\n> 2,5,0.6,30\r\n> 3,7,0.8,40\r\n> EOF\r\n$ cat > test.csv << EOF\r\n> Years,Expertise,Trust,Salary\r\n> 4,9,1.0,50\r\n> 5,11,1.2,60\r\n> EOF\r\n$ dffml train \\\r\n>     -model scikitlr \\\r\n>     -features def:Years:int:1 def:Expertise:int:1 def:Trust:float:1 \\\r\n>     -model-predict Salary \\\r\n>     -sources f=csv \\\r\n>     -source-filename train.csv \\\r\n>     -source-readonly \\\r\n>     -log debug\r\nDEBUG:dffml.cli.Train:Setting features = [Years(DefFeature.<locals>.DefinedFeature)[<class 'int'>, 1], Expertise(DefFeature.<locals>.DefinedFeature)[<class 'int'>, 1], Trust(DefFeature.<locals>.DefinedFeature)[<class 'float'>, 1]]\r\nDEBUG:dffml.cli.Train:Setting log = 20\r\nDEBUG:dffml.cli.Train:Setting model = <class 'abc.LinearRegressionModel'>\r\nDEBUG:dffml.cli.Train:Setting sources = [<class 'abc.CSVSource'>]\r\nDEBUG:dffml.cli.Train:Setting timeout = 120\r\nDEBUG:dffml.CSVSource:CSVSourceConfig(filename='train.csv', readonly=True, key='src_url', label='unlabeled', label_column='label')\r\nDEBUG:dffml.LinearRegressionModel:LinearRegressionModelConfig(directory='/home/johnsa1/.cache/dffml/scikit-scikitlr', predict='Salary', fit_intercept=True, normalize=False, copy_X=True, n_jobs=None)\r\nDEBUG:dffml.util.AsyncContextManagerList.Sources:Entering: CSVSource(CSVSourceConfig(filename='train.csv', readonly=True, key='src_url', label='unlabeled', label_column='label'))\r\nDEBUG:dffml.CSVSource:train.csv first open\r\nDEBUG:dffml.CSVSource:CSVSource(CSVSourceConfig(filename='train.csv', readonly=True, key='src_url', label='unlabeled', label_column='label')) loaded 4 records\r\nDEBUG:dffml.util.AsyncContextManagerListContext.SourcesContext:Entering context: <dffml.source.memory.MemorySourceContext object at 0x7f1756eb6978>\r\nINFO:dffml.LinearRegressionModelContext:Number of input repos: 4\r\n$ dffml accuracy \\\r\n>     -model scikitlr \\\r\n>     -features def:Years:int:1 def:Expertise:int:1 def:Trust:float:1 \\\r\n>     -model-predict Salary \\\r\n>     -sources f=csv \\\r\n>     -source-filename test.csv \\\r\n>     -source-readonly \\\r\n>     -log debug\r\nDEBUG:dffml.cli.Accuracy:Setting features = [Years(DefFeature.<locals>.DefinedFeature)[<class 'int'>, 1], Expertise(DefFeature.<locals>.DefinedFeature)[<class 'int'>, 1], Trust(DefFeature.<locals>.DefinedFeature)[<class 'float'>, 1]]\r\nDEBUG:dffml.cli.Accuracy:Setting log = 20\r\nDEBUG:dffml.cli.Accuracy:Setting model = <class 'abc.LinearRegressionModel'>\r\nDEBUG:dffml.cli.Accuracy:Setting sources = [<class 'abc.CSVSource'>]\r\nDEBUG:dffml.cli.Accuracy:Setting timeout = 120\r\nDEBUG:dffml.CSVSource:CSVSourceConfig(filename='test.csv', readonly=True, key='src_url', label='unlabeled', label_column='label')\r\nDEBUG:dffml.LinearRegressionModel:LinearRegressionModelConfig(directory='/home/johnsa1/.cache/dffml/scikit-scikitlr', predict='Salary', fit_intercept=True, normalize=False, copy_X=True, n_jobs=None)\r\nDEBUG:dffml.util.AsyncContextManagerList.Sources:Entering: CSVSource(CSVSourceConfig(filename='test.csv', readonly=True, key='src_url', label='unlabeled', label_column='label'))\r\nDEBUG:dffml.CSVSource:test.csv first open\r\nDEBUG:dffml.CSVSource:CSVSource(CSVSourceConfig(filename='test.csv', readonly=True, key='src_url', label='unlabeled', label_column='label')) loaded 2 records\r\nDEBUG:dffml.util.AsyncContextManagerListContext.SourcesContext:Entering context: <dffml.source.memory.MemorySourceContext object at 0x7f49d17da5f8>\r\nDEBUG:dffml.LinearRegressionModelContext:Number of input repos: 2\r\nDEBUG:dffml.LinearRegressionModelContext:Model Accuracy: 1.0\r\n1.0\r\n$ echo -e 'Years,Expertise,Trust\\n6,13,1.4\\n' | \\\r\n> dffml predict all \\\r\n> -model scikitlr \\\r\n>     -features def:Years:int:1 def:Expertise:int:1 def:Trust:float:1 \\\r\n>     -model-predict Salary \\\r\n>     -sources f=csv \\\r\n>     -source-filename /dev/stdin \\\r\n>     -source-readonly \\\r\n>     -log debug\r\nDEBUG:dffml.cli.PredictAll:Setting cacheless = []\r\nDEBUG:dffml.cli.PredictAll:Setting caching = False\r\nDEBUG:dffml.cli.PredictAll:Setting features = [Years(DefFeature.<locals>.DefinedFeature)[<class 'int'>, 1], Expertise(DefFeature.<locals>.DefinedFeature)[<class 'int'>, 1], Trust(DefFeature.<locals>.DefinedFeature)[<class 'float'>, 1]]\r\nDEBUG:dffml.cli.PredictAll:Setting log = 20\r\nDEBUG:dffml.cli.PredictAll:Setting model = <class 'abc.LinearRegressionModel'>\r\nDEBUG:dffml.cli.PredictAll:Setting parallel = 1\r\nDEBUG:dffml.cli.PredictAll:Setting sources = [<class 'abc.CSVSource'>]\r\nDEBUG:dffml.cli.PredictAll:Setting timeout = 120\r\nDEBUG:dffml.cli.PredictAll:Setting update = False\r\nDEBUG:dffml.CSVSource:CSVSourceConfig(filename='/dev/stdin', readonly=True, key='src_url', label='unlabeled', label_column='label')\r\nDEBUG:dffml.LinearRegressionModel:LinearRegressionModelConfig(directory='/home/johnsa1/.cache/dffml/scikit-scikitlr', predict='Salary', fit_intercept=True, normalize=False, copy_X=True, n_jobs=None)\r\nDEBUG:dffml.util.AsyncContextManagerList.Sources:Entering: CSVSource(CSVSourceConfig(filename='/dev/stdin', readonly=True, key='src_url', label='unlabeled', label_column='label'))\r\nDEBUG:dffml.CSVSource:/dev/stdin first open\r\nDEBUG:dffml.CSVSource:CSVSource(CSVSourceConfig(filename='/dev/stdin', readonly=True, key='src_url', label='unlabeled', label_column='label')) loaded 1 records\r\nDEBUG:dffml.util.AsyncContextManagerListContext.SourcesContext:Entering context: <dffml.source.memory.MemorySourceContext object at 0x7f4d62d57668>\r\nDEBUG:dffml.LinearRegressionModelContext:Predicted Value of Salary for [[13.   1.4  6. ]]: [70.]\r\n[\r\n    {\r\n        \"extra\": {},\r\n        \"features\": {\r\n            \"Expertise\": 13,\r\n            \"Trust\": 1.4,\r\n            \"Years\": 6\r\n        },\r\n        \"last_updated\": \"2019-09-19T11:18:49Z\",\r\n        \"prediction\": {\r\n            \"confidence\": 1.0,\r\n            \"value\": 70.0\r\n        },\r\n        \"src_url\": 0\r\n    }\r\n]\r\n```","closed_by":{"login":"pdxjohnny","id":5950433,"node_id":"MDQ6VXNlcjU5NTA0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5950433?v=4","gravatar_id":"","url":"https://api.github.com/users/pdxjohnny","html_url":"https://github.com/pdxjohnny","followers_url":"https://api.github.com/users/pdxjohnny/followers","following_url":"https://api.github.com/users/pdxjohnny/following{/other_user}","gists_url":"https://api.github.com/users/pdxjohnny/gists{/gist_id}","starred_url":"https://api.github.com/users/pdxjohnny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdxjohnny/subscriptions","organizations_url":"https://api.github.com/users/pdxjohnny/orgs","repos_url":"https://api.github.com/users/pdxjohnny/repos","events_url":"https://api.github.com/users/pdxjohnny/events{/privacy}","received_events_url":"https://api.github.com/users/pdxjohnny/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/intel/dffml/issues/207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/intel/dffml/issues/207/timeline","performed_via_github_app":null,"state_reason":"completed"}