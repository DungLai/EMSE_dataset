{"url":"https://api.github.com/repos/intel/dffml/issues/1381","repository_url":"https://api.github.com/repos/intel/dffml","labels_url":"https://api.github.com/repos/intel/dffml/issues/1381/labels{/name}","comments_url":"https://api.github.com/repos/intel/dffml/issues/1381/comments","events_url":"https://api.github.com/repos/intel/dffml/issues/1381/events","html_url":"https://github.com/intel/dffml/issues/1381","id":1232951438,"node_id":"I_kwDOCOlgGM5JfViO","number":1381,"title":"security: Do not print out secrets from configs ever","user":{"login":"pdxjohnny","id":5950433,"node_id":"MDQ6VXNlcjU5NTA0MzM=","avatar_url":"https://avatars.githubusercontent.com/u/5950433?v=4","gravatar_id":"","url":"https://api.github.com/users/pdxjohnny","html_url":"https://github.com/pdxjohnny","followers_url":"https://api.github.com/users/pdxjohnny/followers","following_url":"https://api.github.com/users/pdxjohnny/following{/other_user}","gists_url":"https://api.github.com/users/pdxjohnny/gists{/gist_id}","starred_url":"https://api.github.com/users/pdxjohnny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdxjohnny/subscriptions","organizations_url":"https://api.github.com/users/pdxjohnny/orgs","repos_url":"https://api.github.com/users/pdxjohnny/repos","events_url":"https://api.github.com/users/pdxjohnny/events{/privacy}","received_events_url":"https://api.github.com/users/pdxjohnny/received_events","type":"User","site_admin":false},"labels":[{"id":1062701217,"node_id":"MDU6TGFiZWwxMDYyNzAxMjE3","url":"https://api.github.com/repos/intel/dffml/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-05-11T17:10:48Z","updated_at":"2022-05-11T17:11:54Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"`passphrase=b'something throwaway`\r\n\r\n---\r\n\r\n```\r\nDEBUG:dffml.MemoryOrchestratorContext:Initializing dataflow: <dffml.df.types.DataFlow object at 0x7f05729b3070>\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Instantiating operation implementation last_path(last_path) with default config: BaseConfig()\r\nDEBUG:dffml.LastPathImplementation:BaseConfig()\r\nDEBUG:dffml.SsiServiceImportPeerdidImplementation:EncyptedPrivateKey(passphrase=b'something throwaway', comment='no-comment')\r\nDEBUG:dffml.MemoryOrchestratorContext:Running <dffml.df.types.DataFlow object at 0x7f05729b3070>: ({'run_subflow': [Input(value=https://github.com/intel/dffml, definition=URL)]},)\r\nDEBUG:dffml.MemoryOrchestratorContext:Seeding dataflow with input_set: [Input(value=https://github.com/intel/dffml, definition=URL)]\r\nDEBUG:dffml.MemoryOrchestratorContext:kickstarting context: run_subflow\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:[DISPATCH] last_path\r\nDEBUG:dffml.MemoryOrchestratorContext:[run_subflow]: dispatch operation: last_path\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:---\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Stage: PROCESSING: last_path\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Inputs: {'url': 'https://github.com/intel/dffml'}\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Conditions: {}\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Outputs: {'last': 'dffml'}\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:---\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:[DISPATCH] ssi_service.import.peerdid\r\nDEBUG:dffml.MemoryOrchestratorContext:[run_subflow]: dispatch operation: ssi_service.import.peerdid\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:---\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Stage: PROCESSING: ssi_service.import.peerdid\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Inputs: {'last_element_in_path': 'dffml'}\r\nDEBUG:dffml.MemoryOperationImplementationNetworkContext:Conditions: {}\r\nDEBUG:dffml.ssi_service_import_peerdid:Running ['ssh-keygen', '-t', 'ed25519', '-m', 'PKCS8', '-f', PosixPath('/tmp/tmp6yk7j75v/identity_root_key'), '-N', b'something throwaway', '-C', 'no-comment'], {}\r\nDEBUG:dffml.ssi_service_import_peerdid:['ssh-keygen', '-t', 'ed25519', '-m', 'PKCS8', '-f', PosixPath('/tmp/tmp6yk7j75v/identity_root_key'), '-N', b'something throwaway', '-C', 'no-comment']: Subprocess.STDOUT_READLINE: Generating public/private ed25519 key pair.\r\nDEBUG:dffml.ssi_service_import_peerdid:['ssh-keygen', '-t', 'ed25519', '-m', 'PKCS8', '-f', PosixPath('/tmp/tmp6yk7j75v/identity_root_key'), '-N', b'something throwaway', '-C', 'no-comment']: Subprocess.STDOUT_READLINE: Your identification has been saved in /tmp/tmp6yk7j75v/identity_root_key\r\nDEBUG:dffml.ssi_service_import_peerdid:['ssh-keygen', '-t', 'ed25519', '-m', 'PKCS8', '-f', PosixPath('/tmp/tmp6yk7j75v/identity_root_key'), '-N', b'something throwaway', '-C', 'no-comment']: Subprocess.STDERR_READLINE:\r\nTraceback (most recent call last):\r\n  File \"/home/pdxjohnny/Documents/python/dffml/dffml/df/memory.py\", line 1203, in run_dispatch\r\n    outputs = await self.run(\r\n  File \"/home/pdxjohnny/Documents/python/dffml/dffml/df/memory.py\", line 1168, in run\r\n    return await self.run_no_retry(ctx, octx, operation, inputs)\r\n  File \"/home/pdxjohnny/Documents/python/dffml/dffml/df/memory.py\", line 1146, in run_no_retry\r\n    outputs = await opctx.run(inputs)\r\n  File \"/home/pdxjohnny/Documents/python/dffml/operations/peerid/dffml_operations_peerid.py\", line 397, in run\r\n    jwk = jwcrypto.jwk.JWK().import_from_pem(\r\n  File \"/home/pdxjohnny/.local/lib/python3.9/site-packages/jwcrypto/jwk.py\", line 929, in import_from_pem\r\n    key = serialization.load_pem_private_key(\r\n  File \"/home/pdxjohnny/.local/lib/python3.9/site-packages/cryptography/hazmat/primitives/serialization/base.py\", line 22, in load_pem_private_key\r\n    return ossl.load_pem_private_key(data, password)\r\n  File \"/home/pdxjohnny/.local/lib/python3.9/site-packages/cryptography/hazmat/backends/openssl/backend.py\", line 823, in load_pem_private_key\r\n    return self._load_key(\r\n  File \"/home/pdxjohnny/.local/lib/python3.9/site-packages/cryptography/hazmat/backends/openssl/backend.py\", line 1038, in _load_key\r\n    mem_bio = self._bytes_to_bio(data)\r\n  File \"/home/pdxjohnny/.local/lib/python3.9/site-packages/cryptography/hazmat/backends/openssl/backend.py\", line 555, in _bytes_to_bio\r\n    data_ptr = self._ffi.from_buffer(data)\r\nTypeError: from_buffer() cannot return the address of a unicode object\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/pdxjohnny/Documents/python/dffml/operations/peerid/dffml_operations_peerid.py\", line 501, in <module>\r\n    asyncio.run(main())\r\n  File \"/usr/lib/python3.9/asyncio/runners.py\", line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/usr/lib/python3.9/asyncio/base_events.py\", line 642, in run_until_complete\r\n    return future.result()\r\n  File \"/home/pdxjohnny/Documents/python/dffml/operations/peerid/dffml_operations_peerid.py\", line 491, in main\r\n    async for ctx, results in run(\r\n  File \"/home/pdxjohnny/Documents/python/dffml/dffml/high_level/dataflow.py\", line 182, in run\r\n    async for ctx, results in ctx.run(*input_sets):\r\n  File \"/home/pdxjohnny/Documents/python/dffml/dffml/df/memory.py\", line 1588, in run\r\n    raise exception\r\n  File \"/home/pdxjohnny/Documents/python/dffml/dffml/df/memory.py\", line 1740, in run_operations_for_ctx\r\n    raise OperationException(\r\ndffml.df.base.OperationException: ssi_service.import.peerdid({'last_element_in_path': last_element_in_path}): {'last_element_in_path': 'dffml'}\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/intel/dffml/issues/1381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/intel/dffml/issues/1381/timeline","performed_via_github_app":null,"state_reason":null}