{"url":"https://api.github.com/repos/nouhadziri/THRED/issues/23","repository_url":"https://api.github.com/repos/nouhadziri/THRED","labels_url":"https://api.github.com/repos/nouhadziri/THRED/issues/23/labels{/name}","comments_url":"https://api.github.com/repos/nouhadziri/THRED/issues/23/comments","events_url":"https://api.github.com/repos/nouhadziri/THRED/issues/23/events","html_url":"https://github.com/nouhadziri/THRED/issues/23","id":608137509,"node_id":"MDU6SXNzdWU2MDgxMzc1MDk=","number":23,"title":"A dimension problem random300 embedding at models/base.py. ","user":{"login":"LTlitong","id":38782066,"node_id":"MDQ6VXNlcjM4NzgyMDY2","avatar_url":"https://avatars.githubusercontent.com/u/38782066?v=4","gravatar_id":"","url":"https://api.github.com/users/LTlitong","html_url":"https://github.com/LTlitong","followers_url":"https://api.github.com/users/LTlitong/followers","following_url":"https://api.github.com/users/LTlitong/following{/other_user}","gists_url":"https://api.github.com/users/LTlitong/gists{/gist_id}","starred_url":"https://api.github.com/users/LTlitong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LTlitong/subscriptions","organizations_url":"https://api.github.com/users/LTlitong/orgs","repos_url":"https://api.github.com/users/LTlitong/repos","events_url":"https://api.github.com/users/LTlitong/events{/privacy}","received_events_url":"https://api.github.com/users/LTlitong/received_events","type":"User","site_admin":false},"labels":[{"id":1120209757,"node_id":"MDU6TGFiZWwxMTIwMjA5NzU3","url":"https://api.github.com/repos/nouhadziri/THRED/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-28T08:47:44Z","updated_at":"2020-05-21T00:56:04Z","closed_at":"2020-05-21T00:56:04Z","author_association":"NONE","active_lock_reason":null,"body":"When I use random300 embedding to train,  it report an dimension error during the concat operation at models/base.py. And I find that  tensor \"const_embedding_matrixâ€œ is empty.\r\n\r\nIt traceback:\r\n\r\n  File \"/1THRED/thred/main.py\", line 45, in main\r\n    model.train()\r\n  File \"/1THRED/thred/models/hierarchical_base.py\", line 35, in train\r\n    train_model = _helper.create_train_model(self.config, scope)\r\n  File \"/1THRED/thred/models/thred/thred_helper.py\", line 45, in create_train_model\r\n    scope=scope)\r\n  File \"/1THRED/thred/models/thred/thred_model.py\", line 43, in __init__\r\n    self.init_embeddings(params.vocab_file, params.vocab_pkl, scope=scope)\r\n  File \"/1THRED/thred/models/base.py\", line 40, in init_embeddings\r\n    self.embeddings = tf.concat([reserved_token_embeddings, trainable_embeddings, const_embedding_matrix], 0)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 1124, in concat\r\n    return gen_array_ops.concat_v2(values=values, axis=axis, name=name)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 1033, in concat_v2\r\n    \"ConcatV2\", values=values, axis=axis, name=name)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3274, in create_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1792, in __init__\r\n    control_input_ops)\r\n  File \"/usr/local/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1631, in _create_c_op\r\n    raise ValueError(str(e))\r\n\r\nValueError: Shape must be rank 2 but is rank 1 for 'thred_graph/embeddings/concat' (op: 'ConcatV2') with input shapes: [4,300], [40174,300], [0], [].","closed_by":{"login":"ehsk","id":1574406,"node_id":"MDQ6VXNlcjE1NzQ0MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1574406?v=4","gravatar_id":"","url":"https://api.github.com/users/ehsk","html_url":"https://github.com/ehsk","followers_url":"https://api.github.com/users/ehsk/followers","following_url":"https://api.github.com/users/ehsk/following{/other_user}","gists_url":"https://api.github.com/users/ehsk/gists{/gist_id}","starred_url":"https://api.github.com/users/ehsk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehsk/subscriptions","organizations_url":"https://api.github.com/users/ehsk/orgs","repos_url":"https://api.github.com/users/ehsk/repos","events_url":"https://api.github.com/users/ehsk/events{/privacy}","received_events_url":"https://api.github.com/users/ehsk/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nouhadziri/THRED/issues/23/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nouhadziri/THRED/issues/23/timeline","performed_via_github_app":null,"state_reason":"completed"}