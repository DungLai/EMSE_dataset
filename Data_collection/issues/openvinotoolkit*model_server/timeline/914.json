[{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/915035498","html_url":"https://github.com/openvinotoolkit/model_server/issues/914#issuecomment-915035498","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914","id":915035498,"node_id":"IC_kwDOCPfP3842ilVq","user":{"login":"mzegla","id":41325006,"node_id":"MDQ6VXNlcjQxMzI1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/41325006?v=4","gravatar_id":"","url":"https://api.github.com/users/mzegla","html_url":"https://github.com/mzegla","followers_url":"https://api.github.com/users/mzegla/followers","following_url":"https://api.github.com/users/mzegla/following{/other_user}","gists_url":"https://api.github.com/users/mzegla/gists{/gist_id}","starred_url":"https://api.github.com/users/mzegla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mzegla/subscriptions","organizations_url":"https://api.github.com/users/mzegla/orgs","repos_url":"https://api.github.com/users/mzegla/repos","events_url":"https://api.github.com/users/mzegla/events{/privacy}","received_events_url":"https://api.github.com/users/mzegla/received_events","type":"User","site_admin":false},"created_at":"2021-09-08T08:36:49Z","updated_at":"2021-09-08T08:36:49Z","author_association":"COLLABORATOR","body":"Thank you for investigating this issue. Answering your questions:\r\n 1. There's no particular reason for that. We didn't experience any issues with having IECore per model instance so far. \r\n 2. It's hard to tell right away. We will investigate using one common Core for all models in OVMS as it seems reasonable to do \r\n and see if there would be any issues with applying such change. \r\n 3. It's also hard to tell. We have tests that load more than one model into the NCS2 and they work fine, so first we would need to reproduce your issue, switch OVMS to use one Core and check if that helps. \r\n\r\nBy the way, could you share more details about your setup?\r\n- what hardware are you running on?\r\n- what models do you use? (in this case I'm particularly interested in their size)\r\n- how do you run OVMS? (configuration file and a command you use to launch it)","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/915035498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mzegla","id":41325006,"node_id":"MDQ6VXNlcjQxMzI1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/41325006?v=4","gravatar_id":"","url":"https://api.github.com/users/mzegla","html_url":"https://github.com/mzegla","followers_url":"https://api.github.com/users/mzegla/followers","following_url":"https://api.github.com/users/mzegla/following{/other_user}","gists_url":"https://api.github.com/users/mzegla/gists{/gist_id}","starred_url":"https://api.github.com/users/mzegla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mzegla/subscriptions","organizations_url":"https://api.github.com/users/mzegla/orgs","repos_url":"https://api.github.com/users/mzegla/repos","events_url":"https://api.github.com/users/mzegla/events{/privacy}","received_events_url":"https://api.github.com/users/mzegla/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/916066603","html_url":"https://github.com/openvinotoolkit/model_server/issues/914#issuecomment-916066603","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914","id":916066603,"node_id":"IC_kwDOCPfP3842mhEr","user":{"login":"DmitryCS","id":46371199,"node_id":"MDQ6VXNlcjQ2MzcxMTk5","avatar_url":"https://avatars.githubusercontent.com/u/46371199?v=4","gravatar_id":"","url":"https://api.github.com/users/DmitryCS","html_url":"https://github.com/DmitryCS","followers_url":"https://api.github.com/users/DmitryCS/followers","following_url":"https://api.github.com/users/DmitryCS/following{/other_user}","gists_url":"https://api.github.com/users/DmitryCS/gists{/gist_id}","starred_url":"https://api.github.com/users/DmitryCS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DmitryCS/subscriptions","organizations_url":"https://api.github.com/users/DmitryCS/orgs","repos_url":"https://api.github.com/users/DmitryCS/repos","events_url":"https://api.github.com/users/DmitryCS/events{/privacy}","received_events_url":"https://api.github.com/users/DmitryCS/received_events","type":"User","site_admin":false},"created_at":"2021-09-09T12:56:43Z","updated_at":"2021-09-09T12:56:43Z","author_association":"NONE","body":"I guess you have tests with loading several models into the NCS2 using OpenVino, not model_server. For example, demos of OpenVINO like `python3 sample.py -m_1 alexnet.xml -m_2 caffenet.xml -d MYRIAD` will work correctly, since the models are loaded into one IECore inside the script. But if you use two IECore, each model has its own IECore, then the first model will be loaded, and the second will not be able to load into MYRIAD, which is what happens in model_server. Also your [manual](https://github.com/openvinotoolkit/model_server/blob/main/docs/docker_container.md#user-content-start-the-server-with-an-intel-movidius-neural-compute-stick) for NCS2 on model_server says the following: \"A single stick can handle one model at a time. If there are multiple sticks plugged in, OpenVINO Toolkit chooses to which one the model is loaded.\"<br>\r\nDetails about my setup and how to reproduce the situation:\r\n1. Hardware (lspci):\r\n![Screenshot from 2021-09-09 15-41-07](https://user-images.githubusercontent.com/46371199/132671855-5ef02290-cb16-4d62-bd46-a942f372c37f.png)\r\nStick (lsusb):\r\n![Screenshot from 2021-09-09 15-50-12](https://user-images.githubusercontent.com/46371199/132673037-a472454f-e1b5-4e95-82a4-6c0dd6e99bb1.png)\r\n\r\n2. For example, Alexnet FP16 and Caffenet FP16. \r\n3. Models directory tree:\r\nmodels/\r\n├── alexnet\r\n│────└── FP16\r\n│────────└── 1\r\n│ ───────────├── alexnet.bin\r\n│ ───────────├── alexnet.mapping\r\n│ ───────────└── alexnet.xml\r\n├── caffenet\r\n│────└── FP16\r\n│────────└── 1\r\n│───────────├── caffenet.bin\r\n│───────────├── caffenet.mapping\r\n│───────────└── caffenet.xml\r\n└── config.json\r\n<br> Config.json content:\r\n```\r\n {\r\n   \"model_config_list\":[\r\n      {\r\n         \"config\":{\r\n            \"name\":\"alexnet\",\r\n            \"base_path\":\"/opt/ml/alexnet/FP16\",\r\n            \"batch_size\": \"auto\",\r\n            \"target_device\": \"MYRIAD\"\r\n         }\r\n      },\r\n      {\r\n         \"config\":{\r\n            \"name\":\"caffenet\",\r\n            \"base_path\":\"/opt/ml/caffenet/FP16\",\r\n            \"batch_size\": \"auto\",\r\n            \"target_device\": \"MYRIAD\"\r\n         }\r\n      }\r\n   ]\r\n}\r\n```\r\nCommand to run:\r\n```\r\ndocker run --rm -d -it --net=host --privileged \\\r\n--name test_myriad \\\r\n-v $(pwd)/models:/opt/ml \\\r\n-v /dev:/dev \\\r\nopenvino/model_server \\\r\n--config_path /opt/ml/config.json \\\r\n--rest_port 8001\r\n```\r\nCheck errors: <br>\r\n`docker logs test_myriad | grep \"\\[error\\]\"`\r\n<br>Docker logs will spam these errors over and over again:\r\n```\r\n[2021-09-09 12:10:10.076][1][serving][error][modelinstance.cpp:394] Cannot load network into target device; error: Can not init Myriad device: NC_ERROR; model: caffenet; version: 1; device: MYRIAD\r\n[2021-09-09 12:10:10.076][1][serving][error][model.cpp:153] Error occurred while loading model: caffenet; version: 1; error: Cannot load network into target device\r\n[2021-09-09 12:10:10.076][1][modelmanager][error][modelmanager.cpp:874] Error occurred while loading model: caffenet versions; error: Cannot load network into target device\r\n[2021-09-09 12:10:16.130][60][serving][error][modelinstance.cpp:394] Cannot load network into target device; error: Can not init Myriad device: NC_ERROR; model: caffenet; version: 1; device: MYRIAD\r\n[2021-09-09 12:10:16.130][60][serving][error][model.cpp:234] Error occurred while loading model: caffenet; version: 1; error: Cannot load network into target device\r\n[2021-09-09 12:10:16.130][60][modelmanager][error][modelmanager.cpp:891] Error occurred while reloading model: caffenet; versions; error: Cannot load network into target device\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/916066603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DmitryCS","id":46371199,"node_id":"MDQ6VXNlcjQ2MzcxMTk5","avatar_url":"https://avatars.githubusercontent.com/u/46371199?v=4","gravatar_id":"","url":"https://api.github.com/users/DmitryCS","html_url":"https://github.com/DmitryCS","followers_url":"https://api.github.com/users/DmitryCS/followers","following_url":"https://api.github.com/users/DmitryCS/following{/other_user}","gists_url":"https://api.github.com/users/DmitryCS/gists{/gist_id}","starred_url":"https://api.github.com/users/DmitryCS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DmitryCS/subscriptions","organizations_url":"https://api.github.com/users/DmitryCS/orgs","repos_url":"https://api.github.com/users/DmitryCS/repos","events_url":"https://api.github.com/users/DmitryCS/events{/privacy}","received_events_url":"https://api.github.com/users/DmitryCS/received_events","type":"User","site_admin":false}},{"id":5305803059,"node_id":"AE_lADOCPfP3847ADv4zwAAAAE8QCEz","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/5305803059","actor":{"login":"mzegla","id":41325006,"node_id":"MDQ6VXNlcjQxMzI1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/41325006?v=4","gravatar_id":"","url":"https://api.github.com/users/mzegla","html_url":"https://github.com/mzegla","followers_url":"https://api.github.com/users/mzegla/followers","following_url":"https://api.github.com/users/mzegla/following{/other_user}","gists_url":"https://api.github.com/users/mzegla/gists{/gist_id}","starred_url":"https://api.github.com/users/mzegla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mzegla/subscriptions","organizations_url":"https://api.github.com/users/mzegla/orgs","repos_url":"https://api.github.com/users/mzegla/repos","events_url":"https://api.github.com/users/mzegla/events{/privacy}","received_events_url":"https://api.github.com/users/mzegla/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-09-15T13:00:32Z","assignee":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/920813457","html_url":"https://github.com/openvinotoolkit/model_server/issues/914#issuecomment-920813457","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914","id":920813457,"node_id":"IC_kwDOCPfP38424n-R","user":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"created_at":"2021-09-16T11:20:29Z","updated_at":"2021-09-16T11:20:29Z","author_association":"COLLABORATOR","body":"I confirm that there is issue when trying to load more than 1 model on NCS with 2021.4.1 even when the model size is very small.\r\n\r\nWorking on a fix.","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/920813457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false}},{"id":5311892675,"node_id":"LE_lADOCPfP3847ADv4zwAAAAE8nQzD","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/5311892675","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-16T11:20:37Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":5371614531,"node_id":"REFE_lADOCPfP3847ADv4zwAAAAFALFVD","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/5371614531","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"7ee9eccb6ee84cc45e0c27491e0e2668acc67d16","commit_url":"https://api.github.com/repos/openvinotoolkit/model_server/commits/7ee9eccb6ee84cc45e0c27491e0e2668acc67d16","created_at":"2021-09-28T07:09:25Z","performed_via_github_app":null},{"id":5498150958,"node_id":"REFE_lADOCPfP3847ADv4zwAAAAFHtyAu","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/5498150958","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"86821ec6e795434c1f707f5dee86d44b38875640","commit_url":"https://api.github.com/repos/openvinotoolkit/model_server/commits/86821ec6e795434c1f707f5dee86d44b38875640","created_at":"2021-10-21T12:23:28Z","performed_via_github_app":null},{"id":5556354621,"node_id":"CE_lADOCPfP3847ADv4zwAAAAFLLz49","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/5556354621","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-11-02T15:55:00Z","state_reason":null,"performed_via_github_app":null},{"id":5556354770,"node_id":"REFE_lADOCPfP3847ADv4zwAAAAFLLz7S","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/5556354770","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"fe4be895580540392c7b8274c4ec7bf709b02e40","commit_url":"https://api.github.com/repos/openvinotoolkit/model_server/commits/fe4be895580540392c7b8274c4ec7bf709b02e40","created_at":"2021-11-02T15:55:02Z","performed_via_github_app":null}]