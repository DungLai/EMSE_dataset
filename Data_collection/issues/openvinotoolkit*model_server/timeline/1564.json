[{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1336144120","html_url":"https://github.com/openvinotoolkit/model_server/issues/1564#issuecomment-1336144120","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/1564","id":1336144120,"node_id":"IC_kwDOCPfP385Po_D4","user":{"login":"luvwinnie","id":13714992,"node_id":"MDQ6VXNlcjEzNzE0OTky","avatar_url":"https://avatars.githubusercontent.com/u/13714992?v=4","gravatar_id":"","url":"https://api.github.com/users/luvwinnie","html_url":"https://github.com/luvwinnie","followers_url":"https://api.github.com/users/luvwinnie/followers","following_url":"https://api.github.com/users/luvwinnie/following{/other_user}","gists_url":"https://api.github.com/users/luvwinnie/gists{/gist_id}","starred_url":"https://api.github.com/users/luvwinnie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luvwinnie/subscriptions","organizations_url":"https://api.github.com/users/luvwinnie/orgs","repos_url":"https://api.github.com/users/luvwinnie/repos","events_url":"https://api.github.com/users/luvwinnie/events{/privacy}","received_events_url":"https://api.github.com/users/luvwinnie/received_events","type":"User","site_admin":false},"created_at":"2022-12-03T11:57:50Z","updated_at":"2022-12-03T11:57:50Z","author_association":"NONE","body":"Another ineferenced the memory still increased 0.6GB and not be released.\r\n![Screenshot 2022-12-03 at 20 53 58](https://user-images.githubusercontent.com/13714992/205439795-10e97ff4-f053-4cc9-bad6-f48d479625c0.png)\r\n","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1336144120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luvwinnie","id":13714992,"node_id":"MDQ6VXNlcjEzNzE0OTky","avatar_url":"https://avatars.githubusercontent.com/u/13714992?v=4","gravatar_id":"","url":"https://api.github.com/users/luvwinnie","html_url":"https://github.com/luvwinnie","followers_url":"https://api.github.com/users/luvwinnie/followers","following_url":"https://api.github.com/users/luvwinnie/following{/other_user}","gists_url":"https://api.github.com/users/luvwinnie/gists{/gist_id}","starred_url":"https://api.github.com/users/luvwinnie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luvwinnie/subscriptions","organizations_url":"https://api.github.com/users/luvwinnie/orgs","repos_url":"https://api.github.com/users/luvwinnie/repos","events_url":"https://api.github.com/users/luvwinnie/events{/privacy}","received_events_url":"https://api.github.com/users/luvwinnie/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1336830273","html_url":"https://github.com/openvinotoolkit/model_server/issues/1564#issuecomment-1336830273","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/1564","id":1336830273,"node_id":"IC_kwDOCPfP385PrmlB","user":{"login":"brmarkus","id":29976962,"node_id":"MDQ6VXNlcjI5OTc2OTYy","avatar_url":"https://avatars.githubusercontent.com/u/29976962?v=4","gravatar_id":"","url":"https://api.github.com/users/brmarkus","html_url":"https://github.com/brmarkus","followers_url":"https://api.github.com/users/brmarkus/followers","following_url":"https://api.github.com/users/brmarkus/following{/other_user}","gists_url":"https://api.github.com/users/brmarkus/gists{/gist_id}","starred_url":"https://api.github.com/users/brmarkus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brmarkus/subscriptions","organizations_url":"https://api.github.com/users/brmarkus/orgs","repos_url":"https://api.github.com/users/brmarkus/repos","events_url":"https://api.github.com/users/brmarkus/events{/privacy}","received_events_url":"https://api.github.com/users/brmarkus/received_events","type":"User","site_admin":false},"created_at":"2022-12-05T06:57:42Z","updated_at":"2022-12-05T06:57:42Z","author_association":"NONE","body":"Can you provide more details about your environment, please?\r\nWhich OS and which HW are you running on?\r\nWhich version of OpenVINO, which version of the Model-Server are you using?\r\nDoes your use-case make use of dynamic input, dynamic shapes?\r\n\r\nThere were quite several changes to newer versions of OpenVINO to improve memory consumption (especially caching), as well as bug-fixes for specific use-cases for dynamic shapes.\r\n\r\nFor the engineering team to reproduce and analyze your seen behavior, would it be possible if you could share your model files, used command-lines and some input-data?","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1336830273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brmarkus","id":29976962,"node_id":"MDQ6VXNlcjI5OTc2OTYy","avatar_url":"https://avatars.githubusercontent.com/u/29976962?v=4","gravatar_id":"","url":"https://api.github.com/users/brmarkus","html_url":"https://github.com/brmarkus","followers_url":"https://api.github.com/users/brmarkus/followers","following_url":"https://api.github.com/users/brmarkus/following{/other_user}","gists_url":"https://api.github.com/users/brmarkus/gists{/gist_id}","starred_url":"https://api.github.com/users/brmarkus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brmarkus/subscriptions","organizations_url":"https://api.github.com/users/brmarkus/orgs","repos_url":"https://api.github.com/users/brmarkus/repos","events_url":"https://api.github.com/users/brmarkus/events{/privacy}","received_events_url":"https://api.github.com/users/brmarkus/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1337107634","html_url":"https://github.com/openvinotoolkit/model_server/issues/1564#issuecomment-1337107634","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/1564","id":1337107634,"node_id":"IC_kwDOCPfP385PsqSy","user":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"created_at":"2022-12-05T10:35:14Z","updated_at":"2022-12-05T10:35:14Z","author_association":"COLLABORATOR","body":"Additionally could you check what happens when you retire the model from OVMS?\r\n\r\nIn case you use single model mode you can do this by basically adding new version of the model (can be with the same model files). In case you use config.json you can remove the entry for this model.","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1337107634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1337852368","html_url":"https://github.com/openvinotoolkit/model_server/issues/1564#issuecomment-1337852368","issue_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/1564","id":1337852368,"node_id":"IC_kwDOCPfP385PvgHQ","user":{"login":"luvwinnie","id":13714992,"node_id":"MDQ6VXNlcjEzNzE0OTky","avatar_url":"https://avatars.githubusercontent.com/u/13714992?v=4","gravatar_id":"","url":"https://api.github.com/users/luvwinnie","html_url":"https://github.com/luvwinnie","followers_url":"https://api.github.com/users/luvwinnie/followers","following_url":"https://api.github.com/users/luvwinnie/following{/other_user}","gists_url":"https://api.github.com/users/luvwinnie/gists{/gist_id}","starred_url":"https://api.github.com/users/luvwinnie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luvwinnie/subscriptions","organizations_url":"https://api.github.com/users/luvwinnie/orgs","repos_url":"https://api.github.com/users/luvwinnie/repos","events_url":"https://api.github.com/users/luvwinnie/events{/privacy}","received_events_url":"https://api.github.com/users/luvwinnie/received_events","type":"User","site_admin":false},"created_at":"2022-12-05T17:50:45Z","updated_at":"2022-12-05T18:16:05Z","author_association":"NONE","body":"@brmarkus \r\n```OS: Ubuntu 20.04.1\r\nHardware\r\nCPU: AMD Ryzen 9 5950X 16-Core Processor\r\nMemory: 128GB\r\nOpenVINO Dockerhub image: openvino/model_server:latest\r\n```\r\nDoes the model used with AMD Ryzen would cause this problem? Currently testing with Intel CPU machine.\r\n\r\nYes I'm fully make use of dynamic inputs. My models are resnet+transformer based OCR model and CRAFT text detection model. My OCR model has a feature extractor with multiple head to recognize different head of OCR task using the DAG Scheduler with custom config.json.\r\n\r\nAll of my models use dynamic inputs shape since I don't want to reshape the image to cause some distortion on the text image. I can't provide the model in files, is there any way to debug?\r\nI can show an example architecture of the models that I tried. It is a pipeline of OCR, which use a text detector and multiple recognition model which based on a same feature extractor.\r\n<img width=\"585\" alt=\"Screenshot 2022-12-06 at 2 32 47\" src=\"https://user-images.githubusercontent.com/13714992/205703784-2056ccbe-9fb5-48c0-8b97-a6aa76179a09.png\">\r\n\r\n\r\n@atobiszei For your answer, it seems like deallocate a little bit of memory but not all, I have tried retiring the model 1 by 1 but it doesn't deallocate all memory even I retired all models. The raise of memory is when I entry the model again.\r\n\r\n\r\n<img width=\"517\" alt=\"Screenshot 2022-12-06 at 2 24 03\" src=\"https://user-images.githubusercontent.com/13714992/205702925-6d914042-b256-4436-951f-6fe25f49119b.png\">\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/comments/1337852368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luvwinnie","id":13714992,"node_id":"MDQ6VXNlcjEzNzE0OTky","avatar_url":"https://avatars.githubusercontent.com/u/13714992?v=4","gravatar_id":"","url":"https://api.github.com/users/luvwinnie","html_url":"https://github.com/luvwinnie","followers_url":"https://api.github.com/users/luvwinnie/followers","following_url":"https://api.github.com/users/luvwinnie/following{/other_user}","gists_url":"https://api.github.com/users/luvwinnie/gists{/gist_id}","starred_url":"https://api.github.com/users/luvwinnie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luvwinnie/subscriptions","organizations_url":"https://api.github.com/users/luvwinnie/orgs","repos_url":"https://api.github.com/users/luvwinnie/repos","events_url":"https://api.github.com/users/luvwinnie/events{/privacy}","received_events_url":"https://api.github.com/users/luvwinnie/received_events","type":"User","site_admin":false}},{"id":7957474215,"node_id":"MEE_lADOCPfP385X2eYUzwAAAAHaTWun","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/7957474215","actor":{"login":"brmarkus","id":29976962,"node_id":"MDQ6VXNlcjI5OTc2OTYy","avatar_url":"https://avatars.githubusercontent.com/u/29976962?v=4","gravatar_id":"","url":"https://api.github.com/users/brmarkus","html_url":"https://github.com/brmarkus","followers_url":"https://api.github.com/users/brmarkus/followers","following_url":"https://api.github.com/users/brmarkus/following{/other_user}","gists_url":"https://api.github.com/users/brmarkus/gists{/gist_id}","starred_url":"https://api.github.com/users/brmarkus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brmarkus/subscriptions","organizations_url":"https://api.github.com/users/brmarkus/orgs","repos_url":"https://api.github.com/users/brmarkus/repos","events_url":"https://api.github.com/users/brmarkus/events{/privacy}","received_events_url":"https://api.github.com/users/brmarkus/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-05T17:50:45Z","performed_via_github_app":null},{"id":7957474225,"node_id":"SE_lADOCPfP385X2eYUzwAAAAHaTWux","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/7957474225","actor":{"login":"brmarkus","id":29976962,"node_id":"MDQ6VXNlcjI5OTc2OTYy","avatar_url":"https://avatars.githubusercontent.com/u/29976962?v=4","gravatar_id":"","url":"https://api.github.com/users/brmarkus","html_url":"https://github.com/brmarkus","followers_url":"https://api.github.com/users/brmarkus/followers","following_url":"https://api.github.com/users/brmarkus/following{/other_user}","gists_url":"https://api.github.com/users/brmarkus/gists{/gist_id}","starred_url":"https://api.github.com/users/brmarkus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brmarkus/subscriptions","organizations_url":"https://api.github.com/users/brmarkus/orgs","repos_url":"https://api.github.com/users/brmarkus/repos","events_url":"https://api.github.com/users/brmarkus/events{/privacy}","received_events_url":"https://api.github.com/users/brmarkus/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-05T17:50:45Z","performed_via_github_app":null},{"id":7957474236,"node_id":"MEE_lADOCPfP385X2eYUzwAAAAHaTWu8","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/7957474236","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-05T17:50:45Z","performed_via_github_app":null},{"id":7957474244,"node_id":"SE_lADOCPfP385X2eYUzwAAAAHaTWvE","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/7957474244","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-05T17:50:46Z","performed_via_github_app":null},{"id":8253506665,"node_id":"LE_lADOCPfP385X2eYUzwAAAAHr8oRp","url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/events/8253506665","actor":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-01-18T08:57:56Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null}]