{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/685","repository_url":"https://api.github.com/repos/openvinotoolkit/model_server","labels_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/685/labels{/name}","comments_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/685/comments","events_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/685/events","html_url":"https://github.com/openvinotoolkit/model_server/issues/685","id":913569512,"node_id":"MDU6SXNzdWU5MTM1Njk1MTI=","number":685,"title":"[Question] Combined Recognition","user":{"login":"pedromoraesh","id":16081608,"node_id":"MDQ6VXNlcjE2MDgxNjA4","avatar_url":"https://avatars.githubusercontent.com/u/16081608?v=4","gravatar_id":"","url":"https://api.github.com/users/pedromoraesh","html_url":"https://github.com/pedromoraesh","followers_url":"https://api.github.com/users/pedromoraesh/followers","following_url":"https://api.github.com/users/pedromoraesh/following{/other_user}","gists_url":"https://api.github.com/users/pedromoraesh/gists{/gist_id}","starred_url":"https://api.github.com/users/pedromoraesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pedromoraesh/subscriptions","organizations_url":"https://api.github.com/users/pedromoraesh/orgs","repos_url":"https://api.github.com/users/pedromoraesh/repos","events_url":"https://api.github.com/users/pedromoraesh/events{/privacy}","received_events_url":"https://api.github.com/users/pedromoraesh/received_events","type":"User","site_admin":false},"labels":[{"id":1070321713,"node_id":"MDU6TGFiZWwxMDcwMzIxNzEz","url":"https://api.github.com/repos/openvinotoolkit/model_server/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-06-07T13:47:33Z","updated_at":"2021-06-10T15:40:01Z","closed_at":"2021-06-10T15:40:00Z","author_association":"NONE","active_lock_reason":null,"body":"Hey, I've been using the model server as API to do some combined predictions.\r\n\r\nFirst, I ran the example from the Combined Inference section, but the model doesn't load properly. The log says \"FAILED PRECONDITION\".\r\nSteps i did:\r\n- Try a JSON formatter website to ensure JSON configuration. No errors were shown;\r\n- Verified all model name references;\r\n- Make sure all inputs and outputs nodes are named properly.\r\n\r\nBy itself, Age-Gender and Emotion models work fine, but when combined it's not working.\r\n\r\nThen I have two questions:\r\nThe model version, if not specified in the pipeline have any impact to create the pipeline?\r\nCan I do an entire Face Recognition pipeline using Combined Inference? (Face Detection, Face Crop, Landmarks, Face Alling and Face Re ID)\r\n\r\nHere is my JSON:\r\n\r\n```json\r\n{\r\n    \"model_config_list\": [\r\n        {\r\n            \"config\": {\r\n                \"name\": \"emotions_classification\",\r\n                \"base_path\": \"/models/emotions\",\r\n                \"model_version_policy\": {\"specific\": { \"versions\":[1,2,3] }}\r\n            }\r\n        },\r\n        {\r\n            \"config\": {\r\n                \"name\": \"age_gender_classification\",\r\n                \"base_path\": \"/models/age-gender\",\r\n                \"model_version_policy\": {\"specific\": { \"versions\":[1,2,3] }}\r\n            }\r\n        },\r\n        {\r\n            \"config\": {\r\n                \"name\": \"face_detection\",\r\n                \"base_path\": \"/models/face-detection\",\r\n                \"model_version_policy\": {\"specific\": { \"versions\":[1] }}\r\n            }\r\n        },\r\n        {\r\n            \"config\": {\r\n                \"name\": \"face_reidentification\",\r\n                \"base_path\": \"/models/face-reidentification\",\r\n                \"model_version_policy\": {\"specific\": { \"versions\":[1] }}\r\n            }\r\n        },\r\n        {\r\n            \"config\": {\r\n                \"name\": \"landmarks\",\r\n                \"base_path\": \"/models/landmarks\",\r\n                \"model_version_policy\": {\"specific\": { \"versions\":[1] }}\r\n            }\r\n        },\r\n        {\r\n            \"config\": {\r\n                \"name\": \"person_detection\",\r\n                \"base_path\": \"/models/person-detection\",\r\n                \"model_version_policy\": {\"specific\": { \"versions\":[1] }}\r\n            }\r\n        }\r\n    ],\r\n    \"pipeline_config_list\": [\r\n        {\r\n            \"name\": \"combined-recognition\",\r\n            \"inputs\": [\"image\"],\r\n            \"nodes\": [\r\n                {\r\n                    \"name\": \"emotions\",\r\n                    \"model_name\": \"emotions_classification\",\r\n                    \"type\": \"DL model\",\r\n                    \"inputs\": [\r\n                        {\"data\": {\"node_name\": \"request\",\r\n                                   \"data_item\": \"image\"}}\r\n                    ], \r\n                    \"outputs\": [\r\n                        {\"data_item\": \"prob_emotion\",\r\n                         \"alias\": \"emotion\"}\r\n                    ] \r\n                },\r\n                {\r\n                    \"name\": \"age_gender\",\r\n                    \"model_name\": \"age_gender_classification\",\r\n                    \"type\": \"DL model\",\r\n                    \"inputs\": [\r\n                        {\"data\": {\"node_name\": \"request\",\r\n                                  \"data_item\": \"image\"}}\r\n                    ], \r\n                    \"outputs\": [\r\n                        {\"data_item\": \"age_conv3\",\r\n                         \"alias\": \"age\"},\r\n                        {\"data_item\": \"prob\",\r\n                         \"alias\": \"gender\"}\r\n                    ] \r\n                }\r\n            ],\r\n            \"outputs\": [\r\n                {\"age\": {\"node_name\": \"age-gender\",\r\n                           \"data_item\": \"age\"}},\r\n                {\"gender\": {\"node_name\": \"age-gender\",\r\n                           \"data_item\": \"gender\"}},\r\n                {\"emotion\": {\"node_name\": \"emotions\",\r\n                           \"data_item\": \"emotion\"}}\r\n            ]\r\n        }\r\n    ]\r\n}\r\n```\r\n","closed_by":{"login":"pedromoraesh","id":16081608,"node_id":"MDQ6VXNlcjE2MDgxNjA4","avatar_url":"https://avatars.githubusercontent.com/u/16081608?v=4","gravatar_id":"","url":"https://api.github.com/users/pedromoraesh","html_url":"https://github.com/pedromoraesh","followers_url":"https://api.github.com/users/pedromoraesh/followers","following_url":"https://api.github.com/users/pedromoraesh/following{/other_user}","gists_url":"https://api.github.com/users/pedromoraesh/gists{/gist_id}","starred_url":"https://api.github.com/users/pedromoraesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pedromoraesh/subscriptions","organizations_url":"https://api.github.com/users/pedromoraesh/orgs","repos_url":"https://api.github.com/users/pedromoraesh/repos","events_url":"https://api.github.com/users/pedromoraesh/events{/privacy}","received_events_url":"https://api.github.com/users/pedromoraesh/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/685/timeline","performed_via_github_app":null,"state_reason":"completed"}