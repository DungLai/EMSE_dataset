{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914","repository_url":"https://api.github.com/repos/openvinotoolkit/model_server","labels_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914/labels{/name}","comments_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914/comments","events_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914/events","html_url":"https://github.com/openvinotoolkit/model_server/issues/914","id":989871096,"node_id":"MDU6SXNzdWU5ODk4NzEwOTY=","number":914,"title":"New Ð¡ore for each model in \"--config_path config.json\" instead of one Core for all.","user":{"login":"DmitryCS","id":46371199,"node_id":"MDQ6VXNlcjQ2MzcxMTk5","avatar_url":"https://avatars.githubusercontent.com/u/46371199?v=4","gravatar_id":"","url":"https://api.github.com/users/DmitryCS","html_url":"https://github.com/DmitryCS","followers_url":"https://api.github.com/users/DmitryCS/followers","following_url":"https://api.github.com/users/DmitryCS/following{/other_user}","gists_url":"https://api.github.com/users/DmitryCS/gists{/gist_id}","starred_url":"https://api.github.com/users/DmitryCS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DmitryCS/subscriptions","organizations_url":"https://api.github.com/users/DmitryCS/orgs","repos_url":"https://api.github.com/users/DmitryCS/repos","events_url":"https://api.github.com/users/DmitryCS/events{/privacy}","received_events_url":"https://api.github.com/users/DmitryCS/received_events","type":"User","site_admin":false},"labels":[{"id":1070321713,"node_id":"MDU6TGFiZWwxMDcwMzIxNzEz","url":"https://api.github.com/repos/openvinotoolkit/model_server/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"assignees":[{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-09-07T11:12:47Z","updated_at":"2021-11-02T15:55:00Z","closed_at":"2021-11-02T15:55:00Z","author_association":"NONE","active_lock_reason":null,"body":"<b>I had a task to figure out the reason for the impossibility of launching several models on one NCS2 using model_server. </b>\r\n\r\nI have run different configurations with multiple models on different devices. Everything worked except running two models on the MYRIAD device. The following error was issued by the docker server for the second model on MYRIAD:\r\n`modelinstance.cpp: 394 (Cannot load network into target device; error: Can not init Myriad device: NC_ERROR; model: person-detection; version: 1; device: MYRIAD)`\r\nAfter that I decided to understand why I can use several models on MYRIAD using OpenVINO. I found that for the MYRIAD device there can be only one IECore with the models loaded into it for all programs. That is, if you run the same program at the same time in different terminals on MYRIAD device, then only the first will be executed, and the second will not be able to load the model into the device an error will be issued:\r\n`[ERROR] Can not init Myriad device: NC_ERROR`\r\nI was looking for the problem in the model_server source. So, I found that for each model in config.json, its own object of the ModelInstance class is created, which has the attribute \r\n   `std::unique_ptr<InferenceEngine::Core> engine;`\r\nbut as mentioned above, MYRIAD can work with only one Core with models loaded into it at a time.\r\n\r\n<h3><b>Accordingly, the questions arise:\r\n<br>1. For what reasons do you create Inference Engine Core for each model? \r\n<br>2. What prevents the implementation of one common?\r\n<br>3. Would a common core make it possible to use multiple models on one Neural Compute Stick 2?</b></h3>\r\n","closed_by":{"login":"atobiszei","id":36039266,"node_id":"MDQ6VXNlcjM2MDM5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36039266?v=4","gravatar_id":"","url":"https://api.github.com/users/atobiszei","html_url":"https://github.com/atobiszei","followers_url":"https://api.github.com/users/atobiszei/followers","following_url":"https://api.github.com/users/atobiszei/following{/other_user}","gists_url":"https://api.github.com/users/atobiszei/gists{/gist_id}","starred_url":"https://api.github.com/users/atobiszei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atobiszei/subscriptions","organizations_url":"https://api.github.com/users/atobiszei/orgs","repos_url":"https://api.github.com/users/atobiszei/repos","events_url":"https://api.github.com/users/atobiszei/events{/privacy}","received_events_url":"https://api.github.com/users/atobiszei/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/914/timeline","performed_via_github_app":null,"state_reason":"completed"}