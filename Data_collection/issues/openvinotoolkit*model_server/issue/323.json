{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/323","repository_url":"https://api.github.com/repos/openvinotoolkit/model_server","labels_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/323/labels{/name}","comments_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/323/comments","events_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/323/events","html_url":"https://github.com/openvinotoolkit/model_server/issues/323","id":730803851,"node_id":"MDU6SXNzdWU3MzA4MDM4NTE=","number":323,"title":"Failed to deploy on Heroku.","user":{"login":"hetul-patel","id":14092038,"node_id":"MDQ6VXNlcjE0MDkyMDM4","avatar_url":"https://avatars.githubusercontent.com/u/14092038?v=4","gravatar_id":"","url":"https://api.github.com/users/hetul-patel","html_url":"https://github.com/hetul-patel","followers_url":"https://api.github.com/users/hetul-patel/followers","following_url":"https://api.github.com/users/hetul-patel/following{/other_user}","gists_url":"https://api.github.com/users/hetul-patel/gists{/gist_id}","starred_url":"https://api.github.com/users/hetul-patel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hetul-patel/subscriptions","organizations_url":"https://api.github.com/users/hetul-patel/orgs","repos_url":"https://api.github.com/users/hetul-patel/repos","events_url":"https://api.github.com/users/hetul-patel/events{/privacy}","received_events_url":"https://api.github.com/users/hetul-patel/received_events","type":"User","site_admin":false},"labels":[{"id":1070321717,"node_id":"MDU6TGFiZWwxMDcwMzIxNzE3","url":"https://api.github.com/repos/openvinotoolkit/model_server/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Extra attention is needed"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-10-27T20:44:14Z","updated_at":"2021-03-03T15:41:12Z","closed_at":"2021-03-03T15:41:12Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, I am trying to deploy ovms on heroku but getting this error. I also tried assigning --rest_port=$PORT but\r\ncannot resolve the issue. I get this error **_Web process failed to bind to $PORT within 60 seconds of launch_**\r\n\r\n\r\n**Dockerfile**\r\n\r\n```\r\nFROM openvino/model_server:latest as build_image\r\n\r\n# Set where models should be stored in the container\r\nENV MODEL_BASE_PATH /opt/ml\r\nENV MODEL_NAME facedetect\r\n\r\nCOPY models/facedetect /opt/ml/facedetect\r\n\r\n# Run this command to start ovms\r\nCOPY --chown=admin:admin ovms_entrypoint.sh /usr/bin/ovms_entrypoint.sh\r\nENTRYPOINT []\r\nCMD [\"/usr/bin/ovms_entrypoint.sh\"]\r\n```\r\n\r\n**ovms_entrypoint.sh**\r\n\r\n```\r\n#!/bin/bash\r\n\r\necho $PORT\r\n/ovms/bin/ovms --model_name=${MODEL_NAME} --model_path=${MODEL_BASE_PATH}/${MODEL_NAME} --log_level DEBUG \"$@\"\r\n```\r\n\r\n**Log file from Heroku**\r\n```\r\n2020-10-27T20:32:02.458949+00:00 heroku[web.1]: Starting process with command `/usr/bin/ovms_entrypoint.sh`\r\n2020-10-27T20:32:05.229729+00:00 app[web.1]: 20344\r\n2020-10-27T20:32:05.363836+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] CLI parameters passed to ovms server\r\n2020-10-27T20:32:05.363844+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] model_path: /opt/ml/facedetect\r\n2020-10-27T20:32:05.363865+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] model_name: facedetect\r\n2020-10-27T20:32:05.363881+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] batch_size: 0\r\n2020-10-27T20:32:05.363881+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] shape: \r\n2020-10-27T20:32:05.363881+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] model_version_policy: \r\n2020-10-27T20:32:05.363882+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] nireq: 0\r\n2020-10-27T20:32:05.363885+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] target_device: CPU\r\n2020-10-27T20:32:05.363885+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] plugin_config: \r\n2020-10-27T20:32:05.363888+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] gRPC port: 9178\r\n2020-10-27T20:32:05.363932+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] REST port: 0\r\n2020-10-27T20:32:05.363932+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] REST workers: 24\r\n2020-10-27T20:32:05.363933+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] gRPC workers: 1\r\n2020-10-27T20:32:05.363933+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] gRPC channel arguments: \r\n2020-10-27T20:32:05.363937+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] log level: DEBUG\r\n2020-10-27T20:32:05.363937+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] log path: \r\n2020-10-27T20:32:05.364030+00:00 app[web.1]: [2020-10-27 20:32:05.363] [serving] [debug] Batch size set: false, shape set: false\r\n2020-10-27T20:32:05.364185+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [debug] Currently registered versions count:0\r\n2020-10-27T20:32:05.364189+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [info] Getting model from /opt/ml/facedetect\r\n2020-10-27T20:32:05.364189+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [info] Model downloaded to /opt/ml/facedetect\r\n2020-10-27T20:32:05.364214+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [info] Will add model: facedetect; version: 1 ...\r\n2020-10-27T20:32:05.364311+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [info] Loading model: facedetect, version: 1, from path: /opt/ml/facedetect/1, with target device: CPU ...\r\n2020-10-27T20:32:05.364321+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [info] STATUS CHANGE: Version 1 of model facedetect status change. New status: ( \"state\": \"START\", \"error_code\": \"OK\" )\r\n2020-10-27T20:32:05.364325+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [debug] setLoading: facedetect - 1 (previous state: START) -> error: OK\r\n2020-10-27T20:32:05.364326+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [info] STATUS CHANGE: Version 1 of model facedetect status change. New status: ( \"state\": \"LOADING\", \"error_code\": \"OK\" )\r\n2020-10-27T20:32:05.364329+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [debug] Getting model files from path:/opt/ml/facedetect/1\r\n2020-10-27T20:32:05.364808+00:00 app[web.1]: [2020-10-27 20:32:05.364] [serving] [debug] Try reading model file:/opt/ml/facedetect/1/face-detection-0200.xml\r\n2020-10-27T20:32:05.595846+00:00 app[web.1]: [2020-10-27 20:32:05.594] [serving] [debug] Network shape - (1,3,256,256); Final shape - (1,3,256,256)\r\n2020-10-27T20:32:05.597750+00:00 app[web.1]: [2020-10-27 20:32:05.594] [serving] [info] Input name: image; mapping_name: ; shape: 1 3 256 256 ; precision: FP32, layout:NCHW\r\n2020-10-27T20:32:05.597752+00:00 app[web.1]: [2020-10-27 20:32:05.594] [serving] [debug] model: facedetect, version: 1; reshaping inputs is not required\r\n2020-10-27T20:32:05.597753+00:00 app[web.1]: [2020-10-27 20:32:05.594] [serving] [info] Output name: detection_out ; mapping name: ; shape: 1 1 200 7  ; precision: FP32, layout:NCHW\r\n2020-10-27T20:33:02.683257+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch\r\n2020-10-27T20:33:02.738447+00:00 heroku[web.1]: Stopping process with SIGKILL\r\n2020-10-27T20:33:03.255409+00:00 heroku[web.1]: Process exited with status 137\r\n2020-10-27T20:33:03.303212+00:00 heroku[web.1]: State changed from starting to crashed\r\n```","closed_by":{"login":"hetul-patel","id":14092038,"node_id":"MDQ6VXNlcjE0MDkyMDM4","avatar_url":"https://avatars.githubusercontent.com/u/14092038?v=4","gravatar_id":"","url":"https://api.github.com/users/hetul-patel","html_url":"https://github.com/hetul-patel","followers_url":"https://api.github.com/users/hetul-patel/followers","following_url":"https://api.github.com/users/hetul-patel/following{/other_user}","gists_url":"https://api.github.com/users/hetul-patel/gists{/gist_id}","starred_url":"https://api.github.com/users/hetul-patel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hetul-patel/subscriptions","organizations_url":"https://api.github.com/users/hetul-patel/orgs","repos_url":"https://api.github.com/users/hetul-patel/repos","events_url":"https://api.github.com/users/hetul-patel/events{/privacy}","received_events_url":"https://api.github.com/users/hetul-patel/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/openvinotoolkit/model_server/issues/323/timeline","performed_via_github_app":null,"state_reason":"completed"}