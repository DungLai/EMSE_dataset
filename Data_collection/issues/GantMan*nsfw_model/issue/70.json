{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/70","repository_url":"https://api.github.com/repos/GantMan/nsfw_model","labels_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/70/labels{/name}","comments_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/70/comments","events_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/70/events","html_url":"https://github.com/GantMan/nsfw_model/issues/70","id":669705924,"node_id":"MDU6SXNzdWU2Njk3MDU5MjQ=","number":70,"title":"Error with latest version of Tensorflow (2.3.0)","user":{"login":"NotCompsky","id":30552567,"node_id":"MDQ6VXNlcjMwNTUyNTY3","avatar_url":"https://avatars.githubusercontent.com/u/30552567?v=4","gravatar_id":"","url":"https://api.github.com/users/NotCompsky","html_url":"https://github.com/NotCompsky","followers_url":"https://api.github.com/users/NotCompsky/followers","following_url":"https://api.github.com/users/NotCompsky/following{/other_user}","gists_url":"https://api.github.com/users/NotCompsky/gists{/gist_id}","starred_url":"https://api.github.com/users/NotCompsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NotCompsky/subscriptions","organizations_url":"https://api.github.com/users/NotCompsky/orgs","repos_url":"https://api.github.com/users/NotCompsky/repos","events_url":"https://api.github.com/users/NotCompsky/events{/privacy}","received_events_url":"https://api.github.com/users/NotCompsky/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-07-31T11:14:08Z","updated_at":"2020-08-22T20:00:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This project works fine with Tensorflow 2.1.0, but with Tensorflow 2.3.0 I got the following error for every `predict.classify` call:\r\n\r\n`ValueError: Negative dimension size caused by subtracting 8 from 5 for '{{node model_1/average_pooling2d_10/AvgPool}} = AvgPool[T=DT_FLOAT, data_format=\"NHWC\", ksize=[1, 8, 8, 1], padding=\"VALID\", strides=[1, 8, 8, 1]](model_1/mixed10/concat)' with input shapes: [?,5,5,2048]`\r\n\r\nGoogling around, I only get hits for this error from 2017-2019, such as [this](https://stackoverflow.com/questions/41651628/negative-dimension-size-caused-by-subtracting-3-from-1-for-conv2d) which suggests the solution is to change the default ordering of the images in the Keras backend.\r\n\r\nThis was fixed with a simple downgrade of Tensorflow to version 2.1.0. I did not try any intermediate versions.\r\n\r\nHas anyone else had this issue?","closed_by":null,"reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/70/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/70/timeline","performed_via_github_app":null,"state_reason":null}