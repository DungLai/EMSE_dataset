[{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/532429315","html_url":"https://github.com/GantMan/nsfw_model/issues/38#issuecomment-532429315","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/38","id":532429315,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjQyOTMxNQ==","user":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false},"created_at":"2019-09-17T22:38:36Z","updated_at":"2019-09-17T22:38:36Z","author_association":"NONE","body":"https://www.tensorflow.org/lite/convert/cmdline_examples\r\n\r\nHas some helpful examples, but they go a bit over my head.  Anyone have any suggestions how to convert NSFWJS models to tflite?  I'd err on the side of speed over accuracy (assuming the drop in accuracy isn't too significant).\r\n\r\nThis makes me think I should use the quantized model and then run something similar to the following:\r\n```\r\ntflite_convert \\\r\n  --output_file=/tmp/foo.tflite \\\r\n  --graph_def_file=/tmp/some_quantized_graph.pb \\    //this would be the NSFWJS quantized model\r\n  --inference_type=QUANTIZED_UINT8 \\                       // keep this the same\r\n  --input_arrays=input \\                                                  // not sure here--would this stay the same?\r\n  --output_arrays=MobilenetV1/Predictions/Reshape_1 \\    //not sure here--would this stay the same?\r\n  --mean_values=128 \\                                                          //not sure\r\n  --std_dev_values=127                                                         //not sure\r\n```","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/532429315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/533128908","html_url":"https://github.com/GantMan/nsfw_model/issues/38#issuecomment-533128908","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/38","id":533128908,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzEyODkwOA==","user":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false},"created_at":"2019-09-19T13:24:31Z","updated_at":"2019-09-19T13:31:38Z","author_association":"NONE","body":"Using https://lutzroeder.github.io/netron/ my guess would be `input_1` may be the input_array and `dense_3` would be the output_array.  However when I try this I get the following:\r\n```\r\nValueError: Invalid tensors 'dense_3' were found.\r\n```\r\n\r\nEdit:  Looks like it's `dense_3/Softmax`","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/533128908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/581259381","html_url":"https://github.com/GantMan/nsfw_model/issues/38#issuecomment-581259381","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/38","id":581259381,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTI1OTM4MQ==","user":{"login":"MuhammadIbrahimSE","id":27722011,"node_id":"MDQ6VXNlcjI3NzIyMDEx","avatar_url":"https://avatars.githubusercontent.com/u/27722011?v=4","gravatar_id":"","url":"https://api.github.com/users/MuhammadIbrahimSE","html_url":"https://github.com/MuhammadIbrahimSE","followers_url":"https://api.github.com/users/MuhammadIbrahimSE/followers","following_url":"https://api.github.com/users/MuhammadIbrahimSE/following{/other_user}","gists_url":"https://api.github.com/users/MuhammadIbrahimSE/gists{/gist_id}","starred_url":"https://api.github.com/users/MuhammadIbrahimSE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MuhammadIbrahimSE/subscriptions","organizations_url":"https://api.github.com/users/MuhammadIbrahimSE/orgs","repos_url":"https://api.github.com/users/MuhammadIbrahimSE/repos","events_url":"https://api.github.com/users/MuhammadIbrahimSE/events{/privacy}","received_events_url":"https://api.github.com/users/MuhammadIbrahimSE/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T06:29:28Z","updated_at":"2020-02-03T06:29:28Z","author_association":"NONE","body":"Hi @camhart  did you convert it successfully and integrated it with android, can you please share the file and android repo.\r\n","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/581259381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MuhammadIbrahimSE","id":27722011,"node_id":"MDQ6VXNlcjI3NzIyMDEx","avatar_url":"https://avatars.githubusercontent.com/u/27722011?v=4","gravatar_id":"","url":"https://api.github.com/users/MuhammadIbrahimSE","html_url":"https://github.com/MuhammadIbrahimSE","followers_url":"https://api.github.com/users/MuhammadIbrahimSE/followers","following_url":"https://api.github.com/users/MuhammadIbrahimSE/following{/other_user}","gists_url":"https://api.github.com/users/MuhammadIbrahimSE/gists{/gist_id}","starred_url":"https://api.github.com/users/MuhammadIbrahimSE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MuhammadIbrahimSE/subscriptions","organizations_url":"https://api.github.com/users/MuhammadIbrahimSE/orgs","repos_url":"https://api.github.com/users/MuhammadIbrahimSE/repos","events_url":"https://api.github.com/users/MuhammadIbrahimSE/events{/privacy}","received_events_url":"https://api.github.com/users/MuhammadIbrahimSE/received_events","type":"User","site_admin":false}},{"id":3000906430,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzAwMDkwNjQzMA==","url":"https://api.github.com/repos/GantMan/nsfw_model/issues/events/3000906430","actor":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-03T06:29:28Z","performed_via_github_app":null},{"id":3000906432,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwMDA5MDY0MzI=","url":"https://api.github.com/repos/GantMan/nsfw_model/issues/events/3000906432","actor":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-03T06:29:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/595508816","html_url":"https://github.com/GantMan/nsfw_model/issues/38#issuecomment-595508816","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/38","id":595508816,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTUwODgxNg==","user":{"login":"TechnikEmpire","id":11234763,"node_id":"MDQ6VXNlcjExMjM0NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11234763?v=4","gravatar_id":"","url":"https://api.github.com/users/TechnikEmpire","html_url":"https://github.com/TechnikEmpire","followers_url":"https://api.github.com/users/TechnikEmpire/followers","following_url":"https://api.github.com/users/TechnikEmpire/following{/other_user}","gists_url":"https://api.github.com/users/TechnikEmpire/gists{/gist_id}","starred_url":"https://api.github.com/users/TechnikEmpire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TechnikEmpire/subscriptions","organizations_url":"https://api.github.com/users/TechnikEmpire/orgs","repos_url":"https://api.github.com/users/TechnikEmpire/repos","events_url":"https://api.github.com/users/TechnikEmpire/events{/privacy}","received_events_url":"https://api.github.com/users/TechnikEmpire/received_events","type":"User","site_admin":false},"created_at":"2020-03-06T00:11:03Z","updated_at":"2020-03-06T00:11:03Z","author_association":"CONTRIBUTOR","body":"In the latest model, there is a TFLite model already in there. You can simply open the model(s) in Netron and see what the input names are and what the output layer is.\r\n\r\nWith regards to your accuracy issue, don't apply mean substraction and ensure the scale is 255. I ran into this as well converting the model to another inference engine.","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/595508816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"TechnikEmpire","id":11234763,"node_id":"MDQ6VXNlcjExMjM0NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11234763?v=4","gravatar_id":"","url":"https://api.github.com/users/TechnikEmpire","html_url":"https://github.com/TechnikEmpire","followers_url":"https://api.github.com/users/TechnikEmpire/followers","following_url":"https://api.github.com/users/TechnikEmpire/following{/other_user}","gists_url":"https://api.github.com/users/TechnikEmpire/gists{/gist_id}","starred_url":"https://api.github.com/users/TechnikEmpire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TechnikEmpire/subscriptions","organizations_url":"https://api.github.com/users/TechnikEmpire/orgs","repos_url":"https://api.github.com/users/TechnikEmpire/repos","events_url":"https://api.github.com/users/TechnikEmpire/events{/privacy}","received_events_url":"https://api.github.com/users/TechnikEmpire/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/908280977","html_url":"https://github.com/GantMan/nsfw_model/issues/38#issuecomment-908280977","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/38","id":908280977,"node_id":"IC_kwDOCe50yM42I0SR","user":{"login":"arkty","id":6253515,"node_id":"MDQ6VXNlcjYyNTM1MTU=","avatar_url":"https://avatars.githubusercontent.com/u/6253515?v=4","gravatar_id":"","url":"https://api.github.com/users/arkty","html_url":"https://github.com/arkty","followers_url":"https://api.github.com/users/arkty/followers","following_url":"https://api.github.com/users/arkty/following{/other_user}","gists_url":"https://api.github.com/users/arkty/gists{/gist_id}","starred_url":"https://api.github.com/users/arkty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arkty/subscriptions","organizations_url":"https://api.github.com/users/arkty/orgs","repos_url":"https://api.github.com/users/arkty/repos","events_url":"https://api.github.com/users/arkty/events{/privacy}","received_events_url":"https://api.github.com/users/arkty/received_events","type":"User","site_admin":false},"created_at":"2021-08-30T11:58:50Z","updated_at":"2021-08-30T11:58:50Z","author_association":"NONE","body":"@camhart may be you will find this helpful. As @TechnikEmpire said, TFLite file is already included in the latest model. \r\nAll you need is to configure image processor params for this model. Input has type `float32[1,224,224,3]`,so we need to resize image and normalize it.\r\n\r\n```kt\r\nval image: Bitmap // your image\r\n\r\nprivate val imageProcessor = ImageProcessor.Builder()\r\n        .add(ResizeOp(224, 224, ResizeOp.ResizeMethod.NEAREST_NEIGHBOR))\r\n        .add(NormalizeOp(0f, 255f))\r\n        .build()\r\n\r\nval buffer = TensorImage(DataType.FLOAT32).let {\r\n        it.load(image)\r\n        imageProcessor.process(it)\r\n}.tensorBuffer\r\n\r\nval outputs = model.process(buffer).outputFeature0AsTensorBuffer\r\n```\r\n\r\nYou can find more details in project [NsfwDetectHelper.kt](https://github.com/arkty/flickrer-android/blob/feature/nsfw/app/src/main/java/me/arkty/flickrer/utils/helper/NsfwDetectHelper.kt)","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/908280977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arkty","id":6253515,"node_id":"MDQ6VXNlcjYyNTM1MTU=","avatar_url":"https://avatars.githubusercontent.com/u/6253515?v=4","gravatar_id":"","url":"https://api.github.com/users/arkty","html_url":"https://github.com/arkty","followers_url":"https://api.github.com/users/arkty/followers","following_url":"https://api.github.com/users/arkty/following{/other_user}","gists_url":"https://api.github.com/users/arkty/gists{/gist_id}","starred_url":"https://api.github.com/users/arkty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arkty/subscriptions","organizations_url":"https://api.github.com/users/arkty/orgs","repos_url":"https://api.github.com/users/arkty/repos","events_url":"https://api.github.com/users/arkty/events{/privacy}","received_events_url":"https://api.github.com/users/arkty/received_events","type":"User","site_admin":false}},{"id":5225777452,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTIyNTc3NzQ1Mg==","url":"https://api.github.com/repos/GantMan/nsfw_model/issues/events/5225777452","actor":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-08-30T11:58:51Z","performed_via_github_app":null},{"id":5225777458,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUyMjU3Nzc0NTg=","url":"https://api.github.com/repos/GantMan/nsfw_model/issues/events/5225777458","actor":{"login":"camhart","id":3038809,"node_id":"MDQ6VXNlcjMwMzg4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3038809?v=4","gravatar_id":"","url":"https://api.github.com/users/camhart","html_url":"https://github.com/camhart","followers_url":"https://api.github.com/users/camhart/followers","following_url":"https://api.github.com/users/camhart/following{/other_user}","gists_url":"https://api.github.com/users/camhart/gists{/gist_id}","starred_url":"https://api.github.com/users/camhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camhart/subscriptions","organizations_url":"https://api.github.com/users/camhart/orgs","repos_url":"https://api.github.com/users/camhart/repos","events_url":"https://api.github.com/users/camhart/events{/privacy}","received_events_url":"https://api.github.com/users/camhart/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-08-30T11:58:51Z","performed_via_github_app":null},{"id":5225777468,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTIyNTc3NzQ2OA==","url":"https://api.github.com/repos/GantMan/nsfw_model/issues/events/5225777468","actor":{"login":"TechnikEmpire","id":11234763,"node_id":"MDQ6VXNlcjExMjM0NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11234763?v=4","gravatar_id":"","url":"https://api.github.com/users/TechnikEmpire","html_url":"https://github.com/TechnikEmpire","followers_url":"https://api.github.com/users/TechnikEmpire/followers","following_url":"https://api.github.com/users/TechnikEmpire/following{/other_user}","gists_url":"https://api.github.com/users/TechnikEmpire/gists{/gist_id}","starred_url":"https://api.github.com/users/TechnikEmpire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TechnikEmpire/subscriptions","organizations_url":"https://api.github.com/users/TechnikEmpire/orgs","repos_url":"https://api.github.com/users/TechnikEmpire/repos","events_url":"https://api.github.com/users/TechnikEmpire/events{/privacy}","received_events_url":"https://api.github.com/users/TechnikEmpire/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-08-30T11:58:51Z","performed_via_github_app":null},{"id":5225777472,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUyMjU3Nzc0NzI=","url":"https://api.github.com/repos/GantMan/nsfw_model/issues/events/5225777472","actor":{"login":"TechnikEmpire","id":11234763,"node_id":"MDQ6VXNlcjExMjM0NzYz","avatar_url":"https://avatars.githubusercontent.com/u/11234763?v=4","gravatar_id":"","url":"https://api.github.com/users/TechnikEmpire","html_url":"https://github.com/TechnikEmpire","followers_url":"https://api.github.com/users/TechnikEmpire/followers","following_url":"https://api.github.com/users/TechnikEmpire/following{/other_user}","gists_url":"https://api.github.com/users/TechnikEmpire/gists{/gist_id}","starred_url":"https://api.github.com/users/TechnikEmpire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TechnikEmpire/subscriptions","organizations_url":"https://api.github.com/users/TechnikEmpire/orgs","repos_url":"https://api.github.com/users/TechnikEmpire/repos","events_url":"https://api.github.com/users/TechnikEmpire/events{/privacy}","received_events_url":"https://api.github.com/users/TechnikEmpire/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-08-30T11:58:51Z","performed_via_github_app":null}]