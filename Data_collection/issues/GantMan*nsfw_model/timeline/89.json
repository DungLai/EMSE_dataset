[{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/770139533","html_url":"https://github.com/GantMan/nsfw_model/issues/89#issuecomment-770139533","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/89","id":770139533,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDEzOTUzMw==","user":{"login":"yingshaoxo","id":17190829,"node_id":"MDQ6VXNlcjE3MTkwODI5","avatar_url":"https://avatars.githubusercontent.com/u/17190829?v=4","gravatar_id":"","url":"https://api.github.com/users/yingshaoxo","html_url":"https://github.com/yingshaoxo","followers_url":"https://api.github.com/users/yingshaoxo/followers","following_url":"https://api.github.com/users/yingshaoxo/following{/other_user}","gists_url":"https://api.github.com/users/yingshaoxo/gists{/gist_id}","starred_url":"https://api.github.com/users/yingshaoxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yingshaoxo/subscriptions","organizations_url":"https://api.github.com/users/yingshaoxo/orgs","repos_url":"https://api.github.com/users/yingshaoxo/repos","events_url":"https://api.github.com/users/yingshaoxo/events{/privacy}","received_events_url":"https://api.github.com/users/yingshaoxo/received_events","type":"User","site_admin":false},"created_at":"2021-01-30T02:17:33Z","updated_at":"2021-01-30T02:17:33Z","author_association":"NONE","body":"It turns out to be the problem of input.\r\n\r\nHere I got two functions, only the second function works well, it is strange:\r\n\r\n> The first method work but will get very bad accuracy.\r\n\r\n```python\r\n    def detect(self, numpyImage):\r\n        numpyImage = keras.preprocessing.image.smart_resize(numpyImage, size=(IMAGE_DIM, IMAGE_DIM), interpolation=\"nearest\")\r\n        numpyImage = numpyImage.astype(np.float)\r\n        numpyImage /= 255\r\n        probs = classify_nd(self.model, np.asarray([numpyImage]))\r\n        return probs\r\n\r\n    def classify(self, imagePath):\r\n        image = keras.preprocessing.image.load_img(imagePath, target_size=(IMAGE_DIM, IMAGE_DIM))\r\n        image = keras.preprocessing.image.img_to_array(image)\r\n        image /= 255\r\n        probs = classify_nd(self.model, np.asarray([image]))\r\n        return probs\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/770139533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yingshaoxo","id":17190829,"node_id":"MDQ6VXNlcjE3MTkwODI5","avatar_url":"https://avatars.githubusercontent.com/u/17190829?v=4","gravatar_id":"","url":"https://api.github.com/users/yingshaoxo","html_url":"https://github.com/yingshaoxo","followers_url":"https://api.github.com/users/yingshaoxo/followers","following_url":"https://api.github.com/users/yingshaoxo/following{/other_user}","gists_url":"https://api.github.com/users/yingshaoxo/gists{/gist_id}","starred_url":"https://api.github.com/users/yingshaoxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yingshaoxo/subscriptions","organizations_url":"https://api.github.com/users/yingshaoxo/orgs","repos_url":"https://api.github.com/users/yingshaoxo/repos","events_url":"https://api.github.com/users/yingshaoxo/events{/privacy}","received_events_url":"https://api.github.com/users/yingshaoxo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/770140022","html_url":"https://github.com/GantMan/nsfw_model/issues/89#issuecomment-770140022","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/89","id":770140022,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDE0MDAyMg==","user":{"login":"yingshaoxo","id":17190829,"node_id":"MDQ6VXNlcjE3MTkwODI5","avatar_url":"https://avatars.githubusercontent.com/u/17190829?v=4","gravatar_id":"","url":"https://api.github.com/users/yingshaoxo","html_url":"https://github.com/yingshaoxo","followers_url":"https://api.github.com/users/yingshaoxo/followers","following_url":"https://api.github.com/users/yingshaoxo/following{/other_user}","gists_url":"https://api.github.com/users/yingshaoxo/gists{/gist_id}","starred_url":"https://api.github.com/users/yingshaoxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yingshaoxo/subscriptions","organizations_url":"https://api.github.com/users/yingshaoxo/orgs","repos_url":"https://api.github.com/users/yingshaoxo/repos","events_url":"https://api.github.com/users/yingshaoxo/events{/privacy}","received_events_url":"https://api.github.com/users/yingshaoxo/received_events","type":"User","site_admin":false},"created_at":"2021-01-30T02:21:14Z","updated_at":"2021-01-30T02:21:14Z","author_association":"NONE","body":"So is there a way to use the `classify` function without writing a .jpg file to disk first?\r\n\r\nHelp, please.","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/770140022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yingshaoxo","id":17190829,"node_id":"MDQ6VXNlcjE3MTkwODI5","avatar_url":"https://avatars.githubusercontent.com/u/17190829?v=4","gravatar_id":"","url":"https://api.github.com/users/yingshaoxo","html_url":"https://github.com/yingshaoxo","followers_url":"https://api.github.com/users/yingshaoxo/followers","following_url":"https://api.github.com/users/yingshaoxo/following{/other_user}","gists_url":"https://api.github.com/users/yingshaoxo/gists{/gist_id}","starred_url":"https://api.github.com/users/yingshaoxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yingshaoxo/subscriptions","organizations_url":"https://api.github.com/users/yingshaoxo/orgs","repos_url":"https://api.github.com/users/yingshaoxo/repos","events_url":"https://api.github.com/users/yingshaoxo/events{/privacy}","received_events_url":"https://api.github.com/users/yingshaoxo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/830732604","html_url":"https://github.com/GantMan/nsfw_model/issues/89#issuecomment-830732604","issue_url":"https://api.github.com/repos/GantMan/nsfw_model/issues/89","id":830732604,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDczMjYwNA==","user":{"login":"synodriver","id":50922489,"node_id":"MDQ6VXNlcjUwOTIyNDg5","avatar_url":"https://avatars.githubusercontent.com/u/50922489?v=4","gravatar_id":"","url":"https://api.github.com/users/synodriver","html_url":"https://github.com/synodriver","followers_url":"https://api.github.com/users/synodriver/followers","following_url":"https://api.github.com/users/synodriver/following{/other_user}","gists_url":"https://api.github.com/users/synodriver/gists{/gist_id}","starred_url":"https://api.github.com/users/synodriver/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synodriver/subscriptions","organizations_url":"https://api.github.com/users/synodriver/orgs","repos_url":"https://api.github.com/users/synodriver/repos","events_url":"https://api.github.com/users/synodriver/events{/privacy}","received_events_url":"https://api.github.com/users/synodriver/received_events","type":"User","site_admin":false},"created_at":"2021-05-02T03:14:00Z","updated_at":"2021-05-02T03:14:00Z","author_association":"NONE","body":"> So is there a way to use the `classify` function without writing a .jpg file to disk first?\r\n> \r\n> Help, please.\r\n\r\nBy replacing it with io.BytesIO","reactions":{"url":"https://api.github.com/repos/GantMan/nsfw_model/issues/comments/830732604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"synodriver","id":50922489,"node_id":"MDQ6VXNlcjUwOTIyNDg5","avatar_url":"https://avatars.githubusercontent.com/u/50922489?v=4","gravatar_id":"","url":"https://api.github.com/users/synodriver","html_url":"https://github.com/synodriver","followers_url":"https://api.github.com/users/synodriver/followers","following_url":"https://api.github.com/users/synodriver/following{/other_user}","gists_url":"https://api.github.com/users/synodriver/gists{/gist_id}","starred_url":"https://api.github.com/users/synodriver/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synodriver/subscriptions","organizations_url":"https://api.github.com/users/synodriver/orgs","repos_url":"https://api.github.com/users/synodriver/repos","events_url":"https://api.github.com/users/synodriver/events{/privacy}","received_events_url":"https://api.github.com/users/synodriver/received_events","type":"User","site_admin":false}}]