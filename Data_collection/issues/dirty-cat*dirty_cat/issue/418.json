{"url":"https://api.github.com/repos/dirty-cat/dirty_cat/issues/418","repository_url":"https://api.github.com/repos/dirty-cat/dirty_cat","labels_url":"https://api.github.com/repos/dirty-cat/dirty_cat/issues/418/labels{/name}","comments_url":"https://api.github.com/repos/dirty-cat/dirty_cat/issues/418/comments","events_url":"https://api.github.com/repos/dirty-cat/dirty_cat/issues/418/events","html_url":"https://github.com/dirty-cat/dirty_cat/issues/418","id":1476773152,"node_id":"I_kwDOB3LOgs5YBcUg","number":418,"title":"fuzzy_join is slow with big number of categories","user":{"login":"jovan-stojanovic","id":62058944,"node_id":"MDQ6VXNlcjYyMDU4OTQ0","avatar_url":"https://avatars.githubusercontent.com/u/62058944?v=4","gravatar_id":"","url":"https://api.github.com/users/jovan-stojanovic","html_url":"https://github.com/jovan-stojanovic","followers_url":"https://api.github.com/users/jovan-stojanovic/followers","following_url":"https://api.github.com/users/jovan-stojanovic/following{/other_user}","gists_url":"https://api.github.com/users/jovan-stojanovic/gists{/gist_id}","starred_url":"https://api.github.com/users/jovan-stojanovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jovan-stojanovic/subscriptions","organizations_url":"https://api.github.com/users/jovan-stojanovic/orgs","repos_url":"https://api.github.com/users/jovan-stojanovic/repos","events_url":"https://api.github.com/users/jovan-stojanovic/events{/privacy}","received_events_url":"https://api.github.com/users/jovan-stojanovic/received_events","type":"User","site_admin":false},"labels":[{"id":865002870,"node_id":"MDU6TGFiZWw4NjUwMDI4NzA=","url":"https://api.github.com/repos/dirty-cat/dirty_cat/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"rcap107","id":7548232,"node_id":"MDQ6VXNlcjc1NDgyMzI=","avatar_url":"https://avatars.githubusercontent.com/u/7548232?v=4","gravatar_id":"","url":"https://api.github.com/users/rcap107","html_url":"https://github.com/rcap107","followers_url":"https://api.github.com/users/rcap107/followers","following_url":"https://api.github.com/users/rcap107/following{/other_user}","gists_url":"https://api.github.com/users/rcap107/gists{/gist_id}","starred_url":"https://api.github.com/users/rcap107/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcap107/subscriptions","organizations_url":"https://api.github.com/users/rcap107/orgs","repos_url":"https://api.github.com/users/rcap107/repos","events_url":"https://api.github.com/users/rcap107/events{/privacy}","received_events_url":"https://api.github.com/users/rcap107/received_events","type":"User","site_admin":false},"assignees":[{"login":"rcap107","id":7548232,"node_id":"MDQ6VXNlcjc1NDgyMzI=","avatar_url":"https://avatars.githubusercontent.com/u/7548232?v=4","gravatar_id":"","url":"https://api.github.com/users/rcap107","html_url":"https://github.com/rcap107","followers_url":"https://api.github.com/users/rcap107/followers","following_url":"https://api.github.com/users/rcap107/following{/other_user}","gists_url":"https://api.github.com/users/rcap107/gists{/gist_id}","starred_url":"https://api.github.com/users/rcap107/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcap107/subscriptions","organizations_url":"https://api.github.com/users/rcap107/orgs","repos_url":"https://api.github.com/users/rcap107/repos","events_url":"https://api.github.com/users/rcap107/events{/privacy}","received_events_url":"https://api.github.com/users/rcap107/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-12-05T15:07:18Z","updated_at":"2022-12-12T10:34:24Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"When I tried to join my table with the [embeddings table](https://soda-inria.github.io/ken_embeddings/) that contain 2.5 million entities, I realised that the [fuzzy_join](https://dirty-cat.github.io/dev/generated/dirty_cat.fuzzy_join.html#dirty_cat.fuzzy_join) is getting increasingly slow with a big number of categories to join.\r\n\r\nWhen I inspected more closely, the most expensive operation is encoding the categories with the [Count Vectorizer](https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html). To be more precise, it's the [_count_vocab](https://github.com/scikit-learn/scikit-learn/blob/f3f51f9b6/sklearn/feature_extraction/text.py#L1192) that takes too long.\r\n\r\nAn alternative may be to use the [HashingVectorizer](https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.HashingVectorizer.html) when the number of categories is bigger than a certain threshold. Similar to what is done in the [SuperVectorizer](https://dirty-cat.github.io/stable/generated/dirty_cat.SuperVectorizer.html#dirty_cat.SuperVectorizer) with the encoders.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/dirty-cat/dirty_cat/issues/418/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dirty-cat/dirty_cat/issues/418/timeline","performed_via_github_app":null,"state_reason":null}