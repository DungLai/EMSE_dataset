{"url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet/issues/28","repository_url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet","labels_url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet/issues/28/labels{/name}","comments_url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet/issues/28/comments","events_url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet/issues/28/events","html_url":"https://github.com/sniklaus/pytorch-liteflownet/issues/28","id":558706956,"node_id":"MDU6SXNzdWU1NTg3MDY5NTY=","number":28,"title":"Check for pytorch >= 0.4.1 fails for pytorch built from git","user":{"login":"abrock","id":31710,"node_id":"MDQ6VXNlcjMxNzEw","avatar_url":"https://avatars.githubusercontent.com/u/31710?v=4","gravatar_id":"","url":"https://api.github.com/users/abrock","html_url":"https://github.com/abrock","followers_url":"https://api.github.com/users/abrock/followers","following_url":"https://api.github.com/users/abrock/following{/other_user}","gists_url":"https://api.github.com/users/abrock/gists{/gist_id}","starred_url":"https://api.github.com/users/abrock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abrock/subscriptions","organizations_url":"https://api.github.com/users/abrock/orgs","repos_url":"https://api.github.com/users/abrock/repos","events_url":"https://api.github.com/users/abrock/events{/privacy}","received_events_url":"https://api.github.com/users/abrock/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-02T14:48:52Z","updated_at":"2020-02-09T20:00:27Z","closed_at":"2020-02-09T20:00:27Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nThank you for providing the implementation, it is very helpfull in my research and I'll make sure to cite you.\r\n\r\nI built PyTorch from git and the run.py fails with an exception:\r\n\r\n>  File \"/home/alexander/promotion/pytorch-liteflownet/run.py\", line 21, in <module>\r\n>   assert(int(str('').join(torch.__version__.split('.')[0:3]).split('+')[0]) >= 41) # requires at least pytorch >version 0.4.1\r\n>ValueError: invalid literal for int() with base 10: '140a0'\r\n\r\nIn my case the torch.__version__ is \"1.4.0a0+5e8bac2\", this seems to be automatically generated from the git commit of the pytorch repo I used to build: 5e8bac24b4c3b9abd0e056d663a9029cc79c44d5\r\n\r\nI changed the check so it ignores the commit hash:\r\n\r\n```import re\r\ntorch_major = torch.__version__.split('.')[0]\r\ntorch_minor = torch.__version__.split('.')[1]\r\ntorch_rev = re.sub(\"[^0-9].*\", \"\", torch.__version__.split('.')[2]);\r\ntorch_version = int(str('').join([torch_major, torch_minor, torch_rev]))\r\nprint(torch_version)\r\nassert(torch_version >= 41) # requires at least pytorch version 0.4.1\r\n```\r\n\r\nOf course this will fail if someone uses a very old (say, 0.3.1) version and the commit hash starts with a digit :-) ","closed_by":{"login":"sniklaus","id":1238034,"node_id":"MDQ6VXNlcjEyMzgwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1238034?v=4","gravatar_id":"","url":"https://api.github.com/users/sniklaus","html_url":"https://github.com/sniklaus","followers_url":"https://api.github.com/users/sniklaus/followers","following_url":"https://api.github.com/users/sniklaus/following{/other_user}","gists_url":"https://api.github.com/users/sniklaus/gists{/gist_id}","starred_url":"https://api.github.com/users/sniklaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sniklaus/subscriptions","organizations_url":"https://api.github.com/users/sniklaus/orgs","repos_url":"https://api.github.com/users/sniklaus/repos","events_url":"https://api.github.com/users/sniklaus/events{/privacy}","received_events_url":"https://api.github.com/users/sniklaus/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet/issues/28/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sniklaus/pytorch-liteflownet/issues/28/timeline","performed_via_github_app":null,"state_reason":"completed"}