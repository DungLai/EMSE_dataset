{"url":"https://api.github.com/repos/see--/keras-centernet/issues/4","repository_url":"https://api.github.com/repos/see--/keras-centernet","labels_url":"https://api.github.com/repos/see--/keras-centernet/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/see--/keras-centernet/issues/4/comments","events_url":"https://api.github.com/repos/see--/keras-centernet/issues/4/events","html_url":"https://github.com/see--/keras-centernet/issues/4","id":444909052,"node_id":"MDU6SXNzdWU0NDQ5MDkwNTI=","number":4,"title":"report AttributeError: module 'tensorflow.math' has no attribute 'top_k' when run demo code","user":{"login":"Jubird915","id":23327235,"node_id":"MDQ6VXNlcjIzMzI3MjM1","avatar_url":"https://avatars.githubusercontent.com/u/23327235?v=4","gravatar_id":"","url":"https://api.github.com/users/Jubird915","html_url":"https://github.com/Jubird915","followers_url":"https://api.github.com/users/Jubird915/followers","following_url":"https://api.github.com/users/Jubird915/following{/other_user}","gists_url":"https://api.github.com/users/Jubird915/gists{/gist_id}","starred_url":"https://api.github.com/users/Jubird915/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jubird915/subscriptions","organizations_url":"https://api.github.com/users/Jubird915/orgs","repos_url":"https://api.github.com/users/Jubird915/repos","events_url":"https://api.github.com/users/Jubird915/events{/privacy}","received_events_url":"https://api.github.com/users/Jubird915/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-16T11:45:17Z","updated_at":"2019-05-16T23:20:28Z","closed_at":"2019-05-16T23:20:28Z","author_association":"NONE","active_lock_reason":null,"body":"~/learnAI/keras-centernet$ PYTHONPATH=. python keras_centernet/bin/ctdet_image.py --fn assets/demo2.jpg --inres 512,512\r\nUsing TensorFlow backend.\r\nTraceback (most recent call last):\r\n  File \"keras_centernet/bin/ctdet_image.py\", line 59, in <module>\r\n    main()\r\n  File \"keras_centernet/bin/ctdet_image.py\", line 35, in main\r\n    model = CtDetDecode(model)\r\n  File \"/home/ubuntu/learnAI/keras-centernet/keras_centernet/models/decode.py\", line 66, in CtDetDecode\r\n    output = Lambda(_decode)([model.outputs[i] for i in [hm_index, reg_index, wh_index]])\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/keras/engine/base_layer.py\", line 457, in __call__\r\n    output = self.call(inputs, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/keras/layers/core.py\", line 687, in call\r\n    return self.function(inputs, **arguments)\r\n  File \"/home/ubuntu/learnAI/keras-centernet/keras_centernet/models/decode.py\", line 65, in _decode\r\n    return _ctdet_decode(hm, reg, wh, k=k, output_stride=output_stride)\r\n  File \"/home/ubuntu/learnAI/keras-centernet/keras_centernet/models/decode.py\", line 57, in _ctdet_decode\r\n    detections = K.map_fn(_process_sample, [hm_flat, reg_flat, wh_flat], dtype=K.floatx())\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 4321, in map_fn\r\n    return tf.map_fn(fn, elems, name=name, dtype=dtype)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/functional_ops.py\", line 459, in map_fn\r\n    maximum_iterations=n)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 3209, in while_loop\r\n    result = loop_context.BuildLoop(cond, body, loop_vars, shape_invariants)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2941, in BuildLoop\r\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 2878, in _BuildLoop\r\n    body_result = body(*packed_vars_for_body)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 3179, in <lambda>\r\n    body = lambda i, lv: (i + 1, orig_body(*lv))\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/functional_ops.py\", line 448, in compute\r\n    packed_fn_values = fn(packed_values)\r\n  File \"/home/ubuntu/learnAI/keras-centernet/keras_centernet/models/decode.py\", line 32, in _process_sample\r\n    _scores, _inds = tf.math.top_k(_hm, k=k, sorted=True)\r\nAttributeError: module 'tensorflow.math' has no attribute 'top_k'\r\n\r\ndo any one meet the same issue?","closed_by":{"login":"Jubird915","id":23327235,"node_id":"MDQ6VXNlcjIzMzI3MjM1","avatar_url":"https://avatars.githubusercontent.com/u/23327235?v=4","gravatar_id":"","url":"https://api.github.com/users/Jubird915","html_url":"https://github.com/Jubird915","followers_url":"https://api.github.com/users/Jubird915/followers","following_url":"https://api.github.com/users/Jubird915/following{/other_user}","gists_url":"https://api.github.com/users/Jubird915/gists{/gist_id}","starred_url":"https://api.github.com/users/Jubird915/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jubird915/subscriptions","organizations_url":"https://api.github.com/users/Jubird915/orgs","repos_url":"https://api.github.com/users/Jubird915/repos","events_url":"https://api.github.com/users/Jubird915/events{/privacy}","received_events_url":"https://api.github.com/users/Jubird915/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/see--/keras-centernet/issues/4/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/see--/keras-centernet/issues/4/timeline","performed_via_github_app":null,"state_reason":"completed"}