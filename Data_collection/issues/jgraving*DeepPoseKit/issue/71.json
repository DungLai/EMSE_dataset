{"url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/71","repository_url":"https://api.github.com/repos/jgraving/DeepPoseKit","labels_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/71/labels{/name}","comments_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/71/comments","events_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/71/events","html_url":"https://github.com/jgraving/DeepPoseKit/issues/71","id":753085013,"node_id":"MDU6SXNzdWU3NTMwODUwMTM=","number":71,"title":"Index error for flipAxis in augmenter","user":{"login":"Funkyojo","id":7592636,"node_id":"MDQ6VXNlcjc1OTI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/7592636?v=4","gravatar_id":"","url":"https://api.github.com/users/Funkyojo","html_url":"https://github.com/Funkyojo","followers_url":"https://api.github.com/users/Funkyojo/followers","following_url":"https://api.github.com/users/Funkyojo/following{/other_user}","gists_url":"https://api.github.com/users/Funkyojo/gists{/gist_id}","starred_url":"https://api.github.com/users/Funkyojo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Funkyojo/subscriptions","organizations_url":"https://api.github.com/users/Funkyojo/orgs","repos_url":"https://api.github.com/users/Funkyojo/repos","events_url":"https://api.github.com/users/Funkyojo/events{/privacy}","received_events_url":"https://api.github.com/users/Funkyojo/received_events","type":"User","site_admin":false},"labels":[{"id":1636954169,"node_id":"MDU6TGFiZWwxNjM2OTU0MTY5","url":"https://api.github.com/repos/jgraving/DeepPoseKit/labels/stale","name":"stale","color":"3f3f3f","default":false,"description":"Issue has been inactive for 7 days"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-11-30T02:10:55Z","updated_at":"2020-12-15T20:11:03Z","closed_at":"2020-12-15T20:11:03Z","author_association":"NONE","active_lock_reason":null,"body":"![image](https://user-images.githubusercontent.com/7592636/100561449-d1589680-326d-11eb-9593-d3044d15ccab.png)\r\nWhen I include flip axis left and right into the augmenter, I get this error.\r\nI suspect that my non-square input dimension, (100,300), could be the source of the problem.\r\nThis is not a big problem for me personally since I have my own flipping pipeline, but the dev might want to know.\r\n\r\nFollowing is the full error log:\r\n---------------------------------------------------------------------------\r\n\r\nIndexError                                Traceback (most recent call last)\r\n\r\n<ipython-input-40-597dd7754f5e> in <module>()\r\n      6                                     use_graph=True,\r\n      7                                     random_seed=1,\r\n----> 8                                     graph_scale=1)\r\n      9 train_generator.get_config()\r\n\r\n11 frames\r\n\r\n/usr/local/lib/python3.6/dist-packages/deepposekit/io/TrainingGenerator.py in __init__(self, generator, downsample_factor, use_graph, augmenter, shuffle, sigma, validation_split, graph_scale, random_seed)\r\n    119         self.confidence = True\r\n    120         self._init_augmenter(augmenter)\r\n--> 121         self._init_data(generator)\r\n    122         self.on_epoch_end()\r\n    123 \r\n\r\n/usr/local/lib/python3.6/dist-packages/deepposekit/io/TrainingGenerator.py in _init_data(self, generator)\r\n    190 \r\n    191         self.on_epoch_end()\r\n--> 192         X, y = self.__getitem__(0)\r\n    193         self.n_output_channels = y.shape[-1]\r\n    194 \r\n\r\n/usr/local/lib/python3.6/dist-packages/deepposekit/io/TrainingGenerator.py in __getitem__(self, index)\r\n    253 \r\n    254         # Generate data\r\n--> 255         X, y = self.generate_batch(indexes)\r\n    256 \r\n    257         return X, y\r\n\r\n/usr/local/lib/python3.6/dist-packages/deepposekit/io/TrainingGenerator.py in generate_batch(self, indexes)\r\n    291         X, y = self.load_batch(indexes)\r\n    292         if self.augmenter is not None and not self.validation:\r\n--> 293             X, y = self.augment(X, y)\r\n    294         if self.confidence:\r\n    295             y = draw_confidence_maps(\r\n\r\n/usr/local/lib/python3.6/dist-packages/deepposekit/io/TrainingGenerator.py in augment(self, images, keypoints)\r\n    278             images_idx = images[idx, None]\r\n    279             keypoints_idx = keypoints[idx, None]\r\n--> 280             augmented_idx = self.augmenter(images=images_idx, keypoints=keypoints_idx)\r\n    281             images_aug_idx, keypoints_aug_idx = augmented_idx\r\n    282             images_aug.append(images_aug_idx)\r\n\r\n/usr/local/lib/python3.6/dist-packages/imgaug/augmenters/meta.py in __call__(self, *args, **kwargs)\r\n   1886     def __call__(self, *args, **kwargs):\r\n   1887         \"\"\"Alias for :func:`imgaug.augmenters.meta.Augmenter.augment`.\"\"\"\r\n-> 1888         return self.augment(*args, **kwargs)\r\n   1889 \r\n   1890     def pool(self, processes=None, maxtasksperchild=None, seed=None):\r\n\r\n/usr/local/lib/python3.6/dist-packages/imgaug/augmenters/meta.py in augment(self, return_batch, hooks, **kwargs)\r\n   1857         )\r\n   1858 \r\n-> 1859         batch_aug = self.augment_batch(batch, hooks=hooks)\r\n   1860 \r\n   1861         # return either batch or tuple of augmentables, depending on what\r\n\r\n/usr/local/lib/python3.6/dist-packages/imgaug/augmenters/meta.py in augment_batch(self, batch, hooks)\r\n    437         for attr_name, attr in augmentables:\r\n    438             aug = getattr(augseq, \"augment_%s\" % (attr_name,))(\r\n--> 439                 attr, hooks=hooks)\r\n    440             setattr(batch, \"%s_aug\" % (attr_name,), aug)\r\n    441 \r\n\r\n/usr/local/lib/python3.6/dist-packages/imgaug/augmenters/meta.py in augment_keypoints(self, keypoints_on_images, parents, hooks)\r\n    949                     random_state=ia.copy_random_state(self.random_state),\r\n    950                     parents=parents,\r\n--> 951                     hooks=hooks\r\n    952                 )\r\n    953                 ia.forward_random_state(self.random_state)\r\n\r\n/usr/local/lib/python3.6/dist-packages/imgaug/augmenters/meta.py in _augment_keypoints(self, keypoints_on_images, random_state, parents, hooks)\r\n   2858                         keypoints_on_images=keypoints_on_images,\r\n   2859                         parents=parents + [self],\r\n-> 2860                         hooks=hooks\r\n   2861                     )\r\n   2862         return keypoints_on_images\r\n\r\n/usr/local/lib/python3.6/dist-packages/imgaug/augmenters/meta.py in augment_keypoints(self, keypoints_on_images, parents, hooks)\r\n    949                     random_state=ia.copy_random_state(self.random_state),\r\n    950                     parents=parents,\r\n--> 951                     hooks=hooks\r\n    952                 )\r\n    953                 ia.forward_random_state(self.random_state)\r\n\r\n/usr/local/lib/python3.6/dist-packages/deepposekit/augment/FlipAxis.py in _augment_keypoints(self, keypoints_on_images, random_state, parents, hooks)\r\n    136                 swapped = keypoints_on_image.keypoints.copy()\r\n    137                 for r in range(len(keypoints_on_image.keypoints)):\r\n--> 138                     idx = self.swap_index[r]\r\n    139                     if idx >= 0:\r\n    140                         keypoints_on_image.keypoints[r] = swapped[idx]\r\n\r\nIndexError: index 3 is out of bounds for axis 0 with size 3\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/71/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/71/timeline","performed_via_github_app":null,"state_reason":"completed"}