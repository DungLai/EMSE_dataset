{"url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/31","repository_url":"https://api.github.com/repos/jgraving/DeepPoseKit","labels_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/31/labels{/name}","comments_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/31/comments","events_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/31/events","html_url":"https://github.com/jgraving/DeepPoseKit/issues/31","id":524796777,"node_id":"MDU6SXNzdWU1MjQ3OTY3Nzc=","number":31,"title":"`load_model` takes 5 minutes to run","user":{"login":"DenisPolygalov","id":18456799,"node_id":"MDQ6VXNlcjE4NDU2Nzk5","avatar_url":"https://avatars.githubusercontent.com/u/18456799?v=4","gravatar_id":"","url":"https://api.github.com/users/DenisPolygalov","html_url":"https://github.com/DenisPolygalov","followers_url":"https://api.github.com/users/DenisPolygalov/followers","following_url":"https://api.github.com/users/DenisPolygalov/following{/other_user}","gists_url":"https://api.github.com/users/DenisPolygalov/gists{/gist_id}","starred_url":"https://api.github.com/users/DenisPolygalov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DenisPolygalov/subscriptions","organizations_url":"https://api.github.com/users/DenisPolygalov/orgs","repos_url":"https://api.github.com/users/DenisPolygalov/repos","events_url":"https://api.github.com/users/DenisPolygalov/events{/privacy}","received_events_url":"https://api.github.com/users/DenisPolygalov/received_events","type":"User","site_admin":false},"labels":[{"id":1348126481,"node_id":"MDU6TGFiZWwxMzQ4MTI2NDgx","url":"https://api.github.com/repos/jgraving/DeepPoseKit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1348126491,"node_id":"MDU6TGFiZWwxMzQ4MTI2NDkx","url":"https://api.github.com/repos/jgraving/DeepPoseKit/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"},{"id":1607817370,"node_id":"MDU6TGFiZWwxNjA3ODE3Mzcw","url":"https://api.github.com/repos/jgraving/DeepPoseKit/labels/tensorflow","name":"tensorflow","color":"f88c00","default":false,"description":"An issue with Tensorflow"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-11-19T06:11:30Z","updated_at":"2019-12-12T15:13:30Z","closed_at":"2019-12-12T15:13:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"TR;DL\r\nI'm seeing this problem on Windows, can someone confirm that this is \"typical\" time or Ubuntu/Linux is faster/slower? \r\n```\r\ndeepposekit.models.load_model(\"best_model_densenet.h5\")\r\n```\r\ntakes 5 minutes to execute on Windows + Conda + tensorflow-gpu 2.0.0 + cudatoolkit 10.0.130 + cudnn 7.6.4. Most of the time spet in this call:\r\n```\r\ntrain_model = saving.load_model(filepath, custom_objects=custom_objects)\r\n```\r\nWhich is a part of TensorFlow:\r\n```\r\nfrom tensorflow.python.keras.engine import saving\r\n```\r\nI'm only using DeepPoseKit-Data\\datasets\\fly\\best_model_densenet.h5\r\nmodel file without any modifications.\r\nFull log of a single `load_model(\"best_model_densenet.h5\")` call provided below. The \"DEBUG\" lines are mine, just time measurement statements.\r\n\r\n```\r\n2019-11-19 14:39:56.344360: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_100.dll\r\nDEBUG: load_model() IMPORTED in 7.264695 sec\r\n2019-11-19 14:40:03.324369: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library nvcuda.dll\r\n2019-11-19 14:40:03.464370: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.545\r\npciBusID: 0000:05:00.0\r\n2019-11-19 14:40:03.474370: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-11-19 14:40:03.494370: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-11-19 14:40:03.504370: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.545\r\npciBusID: 0000:05:00.0\r\n2019-11-19 14:40:03.514370: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-11-19 14:40:03.534370: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-11-19 14:40:05.114372: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-11-19 14:40:05.124372: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0\r\n2019-11-19 14:40:05.134372: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N\r\n2019-11-19 14:40:05.144372: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 wit\r\nh 9604 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2080 Ti, pci bus id: 0000:05:00.0, compute capability: 7.5)\r\nDEBUG: saving.load_model(): CALLED in 264.017428 sec\r\nDEBUG: model prepared in 9.466326 sec\r\nDEBUG: load_model() CALLED in 273.486011 sec\r\n```\r\n\r\n","closed_by":{"login":"jgraving","id":5445636,"node_id":"MDQ6VXNlcjU0NDU2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5445636?v=4","gravatar_id":"","url":"https://api.github.com/users/jgraving","html_url":"https://github.com/jgraving","followers_url":"https://api.github.com/users/jgraving/followers","following_url":"https://api.github.com/users/jgraving/following{/other_user}","gists_url":"https://api.github.com/users/jgraving/gists{/gist_id}","starred_url":"https://api.github.com/users/jgraving/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jgraving/subscriptions","organizations_url":"https://api.github.com/users/jgraving/orgs","repos_url":"https://api.github.com/users/jgraving/repos","events_url":"https://api.github.com/users/jgraving/events{/privacy}","received_events_url":"https://api.github.com/users/jgraving/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/31/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/31/timeline","performed_via_github_app":null,"state_reason":"completed"}