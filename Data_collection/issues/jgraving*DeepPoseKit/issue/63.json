{"url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/63","repository_url":"https://api.github.com/repos/jgraving/DeepPoseKit","labels_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/63/labels{/name}","comments_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/63/comments","events_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/63/events","html_url":"https://github.com/jgraving/DeepPoseKit/issues/63","id":684236334,"node_id":"MDU6SXNzdWU2ODQyMzYzMzQ=","number":63,"title":"Cyclic pose graph freezing","user":{"login":"richard-warren","id":31221441,"node_id":"MDQ6VXNlcjMxMjIxNDQx","avatar_url":"https://avatars.githubusercontent.com/u/31221441?v=4","gravatar_id":"","url":"https://api.github.com/users/richard-warren","html_url":"https://github.com/richard-warren","followers_url":"https://api.github.com/users/richard-warren/followers","following_url":"https://api.github.com/users/richard-warren/following{/other_user}","gists_url":"https://api.github.com/users/richard-warren/gists{/gist_id}","starred_url":"https://api.github.com/users/richard-warren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richard-warren/subscriptions","organizations_url":"https://api.github.com/users/richard-warren/orgs","repos_url":"https://api.github.com/users/richard-warren/repos","events_url":"https://api.github.com/users/richard-warren/events{/privacy}","received_events_url":"https://api.github.com/users/richard-warren/received_events","type":"User","site_admin":false},"labels":[{"id":1348126481,"node_id":"MDU6TGFiZWwxMzQ4MTI2NDgx","url":"https://api.github.com/repos/jgraving/DeepPoseKit/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-08-23T18:48:41Z","updated_at":"2020-09-07T11:33:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When the pose graph is cyclic (e.g. A->B->C->A), [the while loop in `graph_to_edges`](https://github.com/jgraving/DeepPoseKit/blob/b817ddfdc56f81145cf1c955953999b49ccdcbab/deepposekit/utils/keypoints.py#L49) is infinite. I [solved this in my fork](https://github.com/richard-warren/DeepPoseKit/commit/2605047cb8ff07f7888f196f67310bffd4c38a18) by detecting cycles and giving them all their own edge group label.\r\n\r\nIt was also necessary to change [this](https://github.com/jgraving/DeepPoseKit/blob/b817ddfdc56f81145cf1c955953999b49ccdcbab/deepposekit/utils/keypoints.py#L89):\r\n`edge_confidence = edge_confidence[..., 1:]`\r\nto this:\r\n`edge_confidence = edge_confidence[..., lines>=0]`.\r\n\r\nI believe the former assumes the first confidence map corresponds to the parent of all parents. In cycles no such parent exists, so all the confidence maps should be shown. I'm sure you will have more elegant solutions to this problem. Please let me know if you have some ideas. Thanks!","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/63/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jgraving/DeepPoseKit/issues/63/timeline","performed_via_github_app":null,"state_reason":null}