{"url":"https://api.github.com/repos/imatge-upc/rvos/issues/24","repository_url":"https://api.github.com/repos/imatge-upc/rvos","labels_url":"https://api.github.com/repos/imatge-upc/rvos/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/imatge-upc/rvos/issues/24/comments","events_url":"https://api.github.com/repos/imatge-upc/rvos/issues/24/events","html_url":"https://github.com/imatge-upc/rvos/issues/24","id":517964706,"node_id":"MDU6SXNzdWU1MTc5NjQ3MDY=","number":24,"title":"Creating the mask for one-shot model","user":{"login":"dl002","id":37702997,"node_id":"MDQ6VXNlcjM3NzAyOTk3","avatar_url":"https://avatars.githubusercontent.com/u/37702997?v=4","gravatar_id":"","url":"https://api.github.com/users/dl002","html_url":"https://github.com/dl002","followers_url":"https://api.github.com/users/dl002/followers","following_url":"https://api.github.com/users/dl002/following{/other_user}","gists_url":"https://api.github.com/users/dl002/gists{/gist_id}","starred_url":"https://api.github.com/users/dl002/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl002/subscriptions","organizations_url":"https://api.github.com/users/dl002/orgs","repos_url":"https://api.github.com/users/dl002/repos","events_url":"https://api.github.com/users/dl002/events{/privacy}","received_events_url":"https://api.github.com/users/dl002/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-11-05T18:57:53Z","updated_at":"2021-05-12T01:13:12Z","closed_at":"2019-11-05T21:36:45Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for sharing your code. I am trying to get this to work for my data. I can run the demo.py with the pre-trained models for the one-shot scenario using the command `python demo.py -model_name one-shot-model-davis --overlay_masks`. But when I try to run it for my data with the command `python demo.py -model_name one-shot-model-davis -frames_path path-to-your-frames -mask_path path-to-initial-mask --overlay_masks,` it gives me the following error.\r\n\r\n```\r\n[WARNING][05-11-2019 18:46:24] Temporal stability not available\r\nResults will be saved to: ../models/../models/one-shot-model-youtubevos/results/JPEGImages\r\nLoading model: ../models/one-shot-model-youtubevos\r\nNamespace(all_classes=False, augment=True, base_model='resnet101', batch_size=4, best_val_loss=1000, cat_id=-1, class_loss_after=20, class_th=0.5, class_weight=0.1, crop=False, curriculum_learning=False, dataset='youtube', display=False, display_route=False, dropout=0.0, dropout_cls=0.0, dropout_stop=0.0, epoch_resume=0, eval_split='test', finetune_after=0, gpu_id=0, gt_maxseqlen=10, hidden_size=128, imsize=480, iou_weight=1.0, kernel_size=3, length_clip=5, log_file='train.log', log_term=False, lr=0.001, lr_cnn=1e-06, mask_th=0.5, max_dets=100, max_epoch=100, maxseqlen=10, min_delta=0.0, min_size=0.001, min_steps=1, model_name='spatiotemporal_youtube_bs_04_lc_05_256p', momentum=0.9, ngpus=1, no_display_text=False, no_run_coco_eval=False, num_classes=21, num_workers=1, only_temporal=False, optim='adam', optim_cnn='adam', pascal_dir='/databases/voc2012/VOCAug/', patience=15, patience_stop=60, port=8097, print_every=10, resize=True, resume=False, rotation=10, seed=123, server='http://localhost', shear=0.1, single_object=False, skip_mode='concat', smooth_curves=False, steps_cl=1, stop_balance_weight=0.5, stop_loss_after=-1, stop_th=0.5, stop_weight=0.5, transfer=True, transfer_from='spatiotemporal_youtube_bs_04_lc_05_256p_prev_mask', translation=0.1, update_encoder=False, use_cats=True, use_class_loss=False, use_gpu=True, use_gt_cats=False, use_gt_masks=False, use_gt_stop=False, use_stop_loss=False, visdom=False, weight_decay=1e-06, weight_decay_cnn=1e-06, year='2017', youtube_dir='/databases/YouTubeVOS/', zoom=0.7)\r\nvideo mode activated\r\nTraceback (most recent call last):\r\n  File \"demo.py\", line 288, in <module>\r\n    results.save_result_overlay(x, outs, frame_name)\r\n  File \"demo.py\", line 225, in save_result_overlay\r\n    mask_pred = (torch.squeeze(net_outs[0, t, :])).cpu().numpy()\r\nIndexError: index 10 is out of bounds for dimension 1 with size 10\r\n```\r\n\r\nTo isolate the problem, I replaced my mask with one of the masks in the DAVIS dataset. Although it gives wrong results(as expected) the code runs without issue. So I think the issue is in my mask. Can you please tell me what is the best way to create the masks? I used Matlab GraphCut tool to get the .png mask. Since this .png image did not have a palette(it gave None for image.getpalette()), I converted it in another Python script using `im.convert(\"P\", palette=Image.WEB, colors=256)` before giving as mask for your code. Can you please tell the correct way to create the mask?\r\n\r\nThank you.","closed_by":{"login":"dl002","id":37702997,"node_id":"MDQ6VXNlcjM3NzAyOTk3","avatar_url":"https://avatars.githubusercontent.com/u/37702997?v=4","gravatar_id":"","url":"https://api.github.com/users/dl002","html_url":"https://github.com/dl002","followers_url":"https://api.github.com/users/dl002/followers","following_url":"https://api.github.com/users/dl002/following{/other_user}","gists_url":"https://api.github.com/users/dl002/gists{/gist_id}","starred_url":"https://api.github.com/users/dl002/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl002/subscriptions","organizations_url":"https://api.github.com/users/dl002/orgs","repos_url":"https://api.github.com/users/dl002/repos","events_url":"https://api.github.com/users/dl002/events{/privacy}","received_events_url":"https://api.github.com/users/dl002/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/imatge-upc/rvos/issues/24/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/imatge-upc/rvos/issues/24/timeline","performed_via_github_app":null,"state_reason":"completed"}