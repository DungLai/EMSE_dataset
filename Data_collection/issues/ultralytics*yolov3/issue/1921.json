{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1921","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1921/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1921/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1921/events","html_url":"https://github.com/ultralytics/yolov3/issues/1921","id":1187590084,"node_id":"I_kwDOCLZQgM5GyS_E","number":1921,"title":"How to balance memory usage when adding Transformer blocks?","user":{"login":"caihaunqai","id":56779804,"node_id":"MDQ6VXNlcjU2Nzc5ODA0","avatar_url":"https://avatars.githubusercontent.com/u/56779804?v=4","gravatar_id":"","url":"https://api.github.com/users/caihaunqai","html_url":"https://github.com/caihaunqai","followers_url":"https://api.github.com/users/caihaunqai/followers","following_url":"https://api.github.com/users/caihaunqai/following{/other_user}","gists_url":"https://api.github.com/users/caihaunqai/gists{/gist_id}","starred_url":"https://api.github.com/users/caihaunqai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caihaunqai/subscriptions","organizations_url":"https://api.github.com/users/caihaunqai/orgs","repos_url":"https://api.github.com/users/caihaunqai/repos","events_url":"https://api.github.com/users/caihaunqai/events{/privacy}","received_events_url":"https://api.github.com/users/caihaunqai/received_events","type":"User","site_admin":false},"labels":[{"id":1035696376,"node_id":"MDU6TGFiZWwxMDM1Njk2Mzc2","url":"https://api.github.com/repos/ultralytics/yolov3/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-31T06:39:26Z","updated_at":"2022-03-31T15:24:13Z","closed_at":"2022-03-31T15:24:07Z","author_association":"NONE","active_lock_reason":null,"body":"### Search before asking\n\n- [X] I have searched the YOLOv3 [issues](https://github.com/ultralytics/yolov3/issues) and [discussions](https://github.com/ultralytics/yolov3/discussions) and found no similar questions.\n\n\n### Question\n\nWhen I try to add several transformer layers to the model, the training process gets tough. Due to memory allocation reasons, batch size can only be set very small. At the beginning, the 0th GPU memory usage is very high, and an error will be reported when the batch size increases, but the memory usage of the other three cards is very small. Later, the memory usage of the four cards decreased. In the end, the memory usage of the four cards was less than 1/3, but because the usage was too high at the beginning, it could not continue to increase in the future.\r\n![image](https://user-images.githubusercontent.com/56779804/160991848-dbf30ec9-fe7d-49ff-9042-b396a4853b9f.png)\r\n\n\n### Additional\n\n_No response_","closed_by":{"login":"caihaunqai","id":56779804,"node_id":"MDQ6VXNlcjU2Nzc5ODA0","avatar_url":"https://avatars.githubusercontent.com/u/56779804?v=4","gravatar_id":"","url":"https://api.github.com/users/caihaunqai","html_url":"https://github.com/caihaunqai","followers_url":"https://api.github.com/users/caihaunqai/followers","following_url":"https://api.github.com/users/caihaunqai/following{/other_user}","gists_url":"https://api.github.com/users/caihaunqai/gists{/gist_id}","starred_url":"https://api.github.com/users/caihaunqai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caihaunqai/subscriptions","organizations_url":"https://api.github.com/users/caihaunqai/orgs","repos_url":"https://api.github.com/users/caihaunqai/repos","events_url":"https://api.github.com/users/caihaunqai/events{/privacy}","received_events_url":"https://api.github.com/users/caihaunqai/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1921/timeline","performed_via_github_app":null,"state_reason":"completed"}