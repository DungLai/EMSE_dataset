{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/232","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/232/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/232/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/232/events","html_url":"https://github.com/ultralytics/yolov3/issues/232","id":435736281,"node_id":"MDU6SXNzdWU0MzU3MzYyODE=","number":232,"title":"RECTANGULAR INFERENCE","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"labels":[{"id":1295180840,"node_id":"MDU6TGFiZWwxMjk1MTgwODQw","url":"https://api.github.com/repos/ultralytics/yolov3/labels/tutorial","name":"tutorial","color":"3cba0b","default":false,"description":"Tutorial or example"},{"id":1890885613,"node_id":"MDU6TGFiZWwxODkwODg1NjEz","url":"https://api.github.com/repos/ultralytics/yolov3/labels/Stale","name":"Stale","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"assignees":[{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":41,"created_at":"2019-04-22T13:58:28Z","updated_at":"2022-02-12T13:16:00Z","closed_at":"2020-12-06T00:32:59Z","author_association":"MEMBER","active_lock_reason":null,"body":"Rectangular inference is implemented by default in `detect.py`. This reduces inference time proportionally to the amount of letterboxed area padded onto a square image vs a 32-minimum multiple rectangular image. On `zidane.jpg`, for example, CPU inference time (on a 2018 MacBook Pro) reduces from 1.01s to 0.63s, a 37% reduction, corresponding to a 38% reduction in image area (416x416 to 256x416).\r\n\r\n## Square Inference\r\nLetterboxes to 416x416 squares.\r\n```bash\r\npython3 detect.py  # 416 square inference\r\nNamespace(cfg='cfg/yolov3-spp.cfg', conf_thres=0.5, data_cfg='data/coco.data', images='data/samples', img_size=416, nms_thres=0.5, weights='weights/yolov3-spp.weights')\r\nUsing CPU\r\nimage 1/2 data/samples/bus.jpg: 416x416 1 handbags, 3 persons, 1 buss, Done. (0.999s)\r\nimage 2/2 data/samples/zidane.jpg: 416x416 1 ties, 2 persons, Done. (1.008s)\r\n```\r\n\r\n## Rectangular Inference\r\nLetterboxes to 416 along longest image dimension, pads shorter dimension to minimum multiple of 32.\r\n```bash\r\npython3 detect.py  # 416 rectangular inference\r\nNamespace(cfg='cfg/yolov3-spp.cfg', conf_thres=0.5, data_cfg='data/coco.data', images='data/samples', img_size=416, nms_thres=0.5, weights='weights/yolov3-spp.weights')\r\nUsing CPU\r\nimage 1/2 data/samples/bus.jpg: 416x320 1 handbags, 3 persons, 1 buss, Done. (0.767s)\r\nimage 2/2 data/samples/zidane.jpg: 256x416 1 ties, 2 persons, Done. (0.632s)\r\n```\r\n\r\n`zidane.jpg` | `bus.jpg`\r\n--- | --- \r\n416x416<img src=\"https://user-images.githubusercontent.com/26833433/56502300-1e14b100-6512-11e9-8d6f-46a84e2390c2.jpg\" width=\"300\"/>|416x416<img src=\"https://user-images.githubusercontent.com/26833433/56502297-1e14b100-6512-11e9-8e3c-ce910d46da18.jpg\" width=\"300\"/>\r\n256x416<img src=\"https://user-images.githubusercontent.com/26833433/56502301-1ead4780-6512-11e9-902e-2b6056cab8e5.jpg\" width=\"300\"/>|416x320<img src=\"https://user-images.githubusercontent.com/26833433/56502299-1e14b100-6512-11e9-8723-e473f2375a38.jpg\" width=\"300\"/>\r\n1280 × 720<img src=\"https://user-images.githubusercontent.com/26833433/56502644-5a94dc80-6513-11e9-8d6f-06a5fdceada5.jpg\" width=\"300\"/>|810 × 1080<img src=\"https://user-images.githubusercontent.com/26833433/56502643-5a94dc80-6513-11e9-814f-2dba9b953701.jpg\" width=\"300\"/>","closed_by":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/232/reactions","total_count":39,"+1":28,"-1":0,"laugh":2,"hooray":0,"confused":0,"heart":8,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/232/timeline","performed_via_github_app":null,"state_reason":"completed"}