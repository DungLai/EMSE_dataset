{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1050","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1050/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1050/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1050/events","html_url":"https://github.com/ultralytics/yolov3/issues/1050","id":599411569,"node_id":"MDU6SXNzdWU1OTk0MTE1Njk=","number":1050,"title":"How can i  replace the goal from max IOU to max IOU while include as many area in target rec as possible? ","user":{"login":"sierenavg","id":11030421,"node_id":"MDQ6VXNlcjExMDMwNDIx","avatar_url":"https://avatars.githubusercontent.com/u/11030421?v=4","gravatar_id":"","url":"https://api.github.com/users/sierenavg","html_url":"https://github.com/sierenavg","followers_url":"https://api.github.com/users/sierenavg/followers","following_url":"https://api.github.com/users/sierenavg/following{/other_user}","gists_url":"https://api.github.com/users/sierenavg/gists{/gist_id}","starred_url":"https://api.github.com/users/sierenavg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sierenavg/subscriptions","organizations_url":"https://api.github.com/users/sierenavg/orgs","repos_url":"https://api.github.com/users/sierenavg/repos","events_url":"https://api.github.com/users/sierenavg/events{/privacy}","received_events_url":"https://api.github.com/users/sierenavg/received_events","type":"User","site_admin":false},"labels":[{"id":1890885613,"node_id":"MDU6TGFiZWwxODkwODg1NjEz","url":"https://api.github.com/repos/ultralytics/yolov3/labels/Stale","name":"Stale","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-04-14T09:03:27Z","updated_at":"2020-05-20T00:09:17Z","closed_at":"2020-05-20T00:09:17Z","author_association":"NONE","active_lock_reason":null,"body":"You guys did great work. I really love it.\r\nMy task is to create a rectangle fully contain target rectangle while not making the rectangle too big.\r\nI create the following loss function to punish the network if the predicted rectangle did not contain target rectangle.\r\n\r\nIs it possible to work this way?\r\n\r\nthank you guys for helping me!!!!\r\n\r\n\r\nSource code:  from \r\n**def bbox_iou(box1, box2, x1y1x2y2=True, GIoU=False, DIoU=False, CIoU=False):**\r\n\r\nOriginal:\r\ncw = torch.max(b1_x2, b2_x2) - torch.min(b1_x1, b2_x1)  # convex (smallest enclosing box) width\r\nch = torch.max(b1_y2, b2_y2) - torch.min(b1_y1, b2_y1)  # convex height\r\nif GIoU:  # Generalized IoU https://arxiv.org/pdf/1902.09630.pdf\r\n        c_area = cw * ch + 1e-16  # convex area\r\n        return iou - (c_area - union) / c_area  # GIoU\r\n\r\nReplacement:\r\n\r\n**dwLeft=torch.min(w2,b1_x1-b2_x1 )** \r\n**dwLeft=torch.max(dwLeft,dwLeft*0)** # length of target rectangle not  include in the left  side of predict rectangle\r\n\r\n**dwRight=torch.min(w2,b2_x2-b1_x2 )**\r\n**dwRight=torch.max(dwRight,dwRight*0)**# length of target rectangle not  include in the rightside of predict rectangle\r\n\r\n\r\n**dwTop=torch.min(h2,b1_y1-b2_y1 )**\r\n**dwTop=torch.max(dwTop,dwTop*0)** # length of target rectangle not  include in the upper side of predict rectangle\r\n\r\n\r\n**dwBot=torch.min( h2,b2_y2-b1_y2  )**\r\n**dwBot=torch.max(dwBot,dwBot*0)** # length of target rectangle not  include in the bottom side of predict rectangle\r\n\r\n**area1= (dwLeft+dwRight)** * **h2**\r\n    \r\n**area2=(dwTop+  dwBot)** * **w2**\r\n    \r\n**totalExtraArea=area1+area2** #total area not included by prediction rectangle\r\n\r\ncw = torch.max(b1_x2, b2_x2) - torch.min(b1_x1, b2_x1)  # convex (smallest enclosing box) width\r\nch = torch.max(b1_y2, b2_y2) - torch.min(b1_y1, b2_y1)  # convex height\r\nif GIoU:  # Generalized IoU https://arxiv.org/pdf/1902.09630.pdf\r\n         c_area = cw * ch + 1e-16  # convex area\r\n         return iou - (c_area - union) / c_area - **(totalExtraArea/ union)** # GIoU\r\n\r\n\r\n\r\n","closed_by":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1050/timeline","performed_via_github_app":null,"state_reason":"completed"}