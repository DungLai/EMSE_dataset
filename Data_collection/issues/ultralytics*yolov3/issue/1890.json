{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1890","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1890/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1890/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1890/events","html_url":"https://github.com/ultralytics/yolov3/issues/1890","id":1109665823,"node_id":"I_kwDOCLZQgM5CJCgf","number":1890,"title":"Wrong mAP computation","user":{"login":"abhiagwl4262","id":22645080,"node_id":"MDQ6VXNlcjIyNjQ1MDgw","avatar_url":"https://avatars.githubusercontent.com/u/22645080?v=4","gravatar_id":"","url":"https://api.github.com/users/abhiagwl4262","html_url":"https://github.com/abhiagwl4262","followers_url":"https://api.github.com/users/abhiagwl4262/followers","following_url":"https://api.github.com/users/abhiagwl4262/following{/other_user}","gists_url":"https://api.github.com/users/abhiagwl4262/gists{/gist_id}","starred_url":"https://api.github.com/users/abhiagwl4262/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhiagwl4262/subscriptions","organizations_url":"https://api.github.com/users/abhiagwl4262/orgs","repos_url":"https://api.github.com/users/abhiagwl4262/repos","events_url":"https://api.github.com/users/abhiagwl4262/events{/privacy}","received_events_url":"https://api.github.com/users/abhiagwl4262/received_events","type":"User","site_admin":false},"labels":[{"id":1035696370,"node_id":"MDU6TGFiZWwxMDM1Njk2Mzcw","url":"https://api.github.com/repos/ultralytics/yolov3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2022-01-20T19:06:15Z","updated_at":"2022-01-27T06:01:26Z","closed_at":"2022-01-21T20:08:55Z","author_association":"NONE","active_lock_reason":null,"body":"### Search before asking\r\n\r\n- [X] I have searched the YOLOv3 [issues](https://github.com/ultralytics/yolov3/issues) and found no similar bug report.\r\n\r\n\r\n### YOLOv3 Component\r\n\r\nValidation\r\n\r\n### Bug\r\n\r\nThe way mAP is being computed is misleading(wrong) and doesn't give a real sense of the results. \r\n\r\nThe issue is arising because of sorting the predictions based on the confidence score. Because of the sorting,  all the false positive move at the end of the PR graph, and because we sample 100 points uniformly in the range, the effect of false positives is negligible. \r\n\r\n| conf_thres | iou-thres | map@0.5 |\r\n|      0.001    |    0.45      |  83.9  |\r\n|      0.25      |    0.45      |  82.5  |\r\nmap at conf_thres 0.001 is higher than map @ conf_thres 0.25. Which is obviously weird.\r\n\r\nBut when we actually see the results there are a lot of false positives with conf_thres 0.001\r\nPlease check the [output images with the bounding boxes](https://drive.google.com/drive/folders/1nvqb5iWF5scxa7nZpXwFLY6NqholT8L1?usp=sharing)\r\n\r\n\r\nmap@0.5 Results with my implementation \r\n| conf_thres | iou-thres | map@0.5 |\r\n|      0.001    |    0.45      |   11.2  |\r\n|      0.25      |    0.45      |   75.7  |\r\n|      0.5        |    0.45      |   75.6  |\r\n|      0.7        |    0.45      |   68.0  |\r\n\r\n\r\n### Environment\r\n\r\n_No response_\r\n\r\n### Minimal Reproducible Example\r\n\r\n_No response_\r\n\r\n### Additional\r\n\r\n_No response_\r\n\r\n### Are you willing to submit a PR?\r\n\r\n- [x] Yes I'd like to help by submitting a PR!","closed_by":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1890/timeline","performed_via_github_app":null,"state_reason":"completed"}