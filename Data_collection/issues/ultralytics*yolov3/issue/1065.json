{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1065","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1065/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1065/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1065/events","html_url":"https://github.com/ultralytics/yolov3/issues/1065","id":601838031,"node_id":"MDU6SXNzdWU2MDE4MzgwMzE=","number":1065,"title":"need help, train on custom data get very bad results","user":{"login":"huang475","id":5912803,"node_id":"MDQ6VXNlcjU5MTI4MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5912803?v=4","gravatar_id":"","url":"https://api.github.com/users/huang475","html_url":"https://github.com/huang475","followers_url":"https://api.github.com/users/huang475/followers","following_url":"https://api.github.com/users/huang475/following{/other_user}","gists_url":"https://api.github.com/users/huang475/gists{/gist_id}","starred_url":"https://api.github.com/users/huang475/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huang475/subscriptions","organizations_url":"https://api.github.com/users/huang475/orgs","repos_url":"https://api.github.com/users/huang475/repos","events_url":"https://api.github.com/users/huang475/events{/privacy}","received_events_url":"https://api.github.com/users/huang475/received_events","type":"User","site_admin":false},"labels":[{"id":1035696370,"node_id":"MDU6TGFiZWwxMDM1Njk2Mzcw","url":"https://api.github.com/repos/ultralytics/yolov3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-04-17T09:37:19Z","updated_at":"2020-04-29T07:20:54Z","closed_at":"2020-04-29T07:20:54Z","author_association":"NONE","active_lock_reason":null,"body":"## üêõ Bug\r\nI am testing on my custom data, and get very bad results, need some helps on the things I should look for.\r\n\r\n## To Reproduce\r\nSteps to reproduce the behavior:\r\n1. create custom data config\r\n2. train\r\n3. observe bad result\r\n\r\n## Expected behavior\r\nShould be great?\r\n\r\n## Environment\r\nIf applicable, add screenshots to help explain your problem.\r\nhere's my results\r\n![image](https://user-images.githubusercontent.com/5912803/79554995-7bb1ee00-80d1-11ea-9a48-6703a34fd54b.png)\r\nsome sample and annotation\r\n![image](https://user-images.githubusercontent.com/5912803/79555160-b3209a80-80d1-11ea-8815-321c575393fa.png)\r\nhere's my hyper parameters\r\n```\r\nhyp = {'giou': 0.54,  # giou loss gain\r\n       'cls': 3.4,  # cls loss gain\r\n       'cls_pw': 1.0,  # cls BCELoss positive_weight\r\n       'obj': 4.3,  # obj loss gain (*=img_size/320 if img_size != 320)\r\n       'obj_pw': 1.0,  # obj BCELoss positive_weight\r\n       'iou_t': 0.225,  # iou training threshold\r\n       'lr0': 0.01,  # initial learning rate (SGD=5E-3, Adam=5E-4)\r\n       'lrf': 0.0005,  # final learning rate (with cos scheduler)\r\n       'momentum': 0.937,  # SGD momentum\r\n       'weight_decay': 0.000484,  # optimizer weight decay\r\n       'fl_gamma': 0.0,  # focal loss gamma (efficientDet default is gamma=1.5)\r\n       'hsv_h': 0.0238,  # image HSV-Hue augmentation (fraction)\r\n       'hsv_s': 0.778,  # image HSV-Saturation augmentation (fraction)\r\n       'hsv_v': 0.46,  # image HSV-Value augmentation (fraction)\r\n       'degrees': 1.98 * 0,  # image rotation (+/- deg)\r\n       'translate': 0.05 * 0,  # image translation (+/- fraction)\r\n       'scale': 0.05 * 0,  # image scale (+/- gain)\r\n       'shear': 0.641 * 5}  # image shear (+/- deg)\r\n```\r\n\r\nhere's my anchor settings: \r\nanchors = 137,105, 328,581, 132,309, 66,111, 374,318, 72,162, 79,232, 483,363, 143,511, 564,576, 311,487, 258,229, 179,388, 124,189\r\n\r\nimage size is 512,  model config: yolov3.cfg ,  pretrained weights: darknet53.conv.74\r\n\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: [e.g. iOS] ubuntu\r\n - Version [e.g. 22] 19.04\r\n\r\n**Smartphone (please complete the following information):**\r\n - Device: [e.g. iPhoneXS]\r\n - OS: [e.g. iOS8.1]\r\n - Version [e.g. 22]\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n","closed_by":{"login":"huang475","id":5912803,"node_id":"MDQ6VXNlcjU5MTI4MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5912803?v=4","gravatar_id":"","url":"https://api.github.com/users/huang475","html_url":"https://github.com/huang475","followers_url":"https://api.github.com/users/huang475/followers","following_url":"https://api.github.com/users/huang475/following{/other_user}","gists_url":"https://api.github.com/users/huang475/gists{/gist_id}","starred_url":"https://api.github.com/users/huang475/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huang475/subscriptions","organizations_url":"https://api.github.com/users/huang475/orgs","repos_url":"https://api.github.com/users/huang475/repos","events_url":"https://api.github.com/users/huang475/events{/privacy}","received_events_url":"https://api.github.com/users/huang475/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/1065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/1065/timeline","performed_via_github_app":null,"state_reason":"completed"}