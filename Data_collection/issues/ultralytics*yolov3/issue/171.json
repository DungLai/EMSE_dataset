{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/171","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/171/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/171/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/171/events","html_url":"https://github.com/ultralytics/yolov3/issues/171","id":426054335,"node_id":"MDU6SXNzdWU0MjYwNTQzMzU=","number":171,"title":"Different mAP from cocoAPI","user":{"login":"xiao1228","id":11752039,"node_id":"MDQ6VXNlcjExNzUyMDM5","avatar_url":"https://avatars.githubusercontent.com/u/11752039?v=4","gravatar_id":"","url":"https://api.github.com/users/xiao1228","html_url":"https://github.com/xiao1228","followers_url":"https://api.github.com/users/xiao1228/followers","following_url":"https://api.github.com/users/xiao1228/following{/other_user}","gists_url":"https://api.github.com/users/xiao1228/gists{/gist_id}","starred_url":"https://api.github.com/users/xiao1228/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiao1228/subscriptions","organizations_url":"https://api.github.com/users/xiao1228/orgs","repos_url":"https://api.github.com/users/xiao1228/repos","events_url":"https://api.github.com/users/xiao1228/events{/privacy}","received_events_url":"https://api.github.com/users/xiao1228/received_events","type":"User","site_admin":false},"labels":[{"id":1035696370,"node_id":"MDU6TGFiZWwxMDM1Njk2Mzcw","url":"https://api.github.com/repos/ultralytics/yolov3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":23,"created_at":"2019-03-27T16:14:35Z","updated_at":"2019-04-15T12:25:19Z","closed_at":"2019-03-28T16:32:32Z","author_association":"NONE","active_lock_reason":null,"body":"I am training the code from scratch and the results from best.pt are shown below\r\n\r\n```\r\npython3 test.py --weights weights/best.pt --save-json --img-size 416\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.3, data_cfg='cfg/coco.data', img_size=416, iou_thres=0.5, nms_thres=0.45, save_json=True, weights='weights/best.pt')\r\n\r\n      Image      Total          P          R        mAP\r\n         32       5000      0.562      0.545      0.523      0.744s\r\n         64       5000      0.554      0.549      0.522      0.472s\r\n         96       5000      0.546      0.555      0.529      0.461s\r\n        128       5000      0.547      0.558      0.533      0.435s\r\n        160       5000      0.548      0.559      0.537      0.468s\r\n        192       5000      0.554      0.562       0.54      0.431s\r\n        224       5000       0.55      0.552       0.53       0.45s\r\n        256       5000      0.558      0.555      0.535      0.469s\r\n        288       5000      0.568      0.565      0.545      0.408s\r\n        320       5000      0.561      0.559      0.539      0.461s\r\n        352       5000       0.56      0.556      0.535      0.474s\r\n        384       5000      0.565      0.564      0.543      0.417s\r\n        416       5000      0.564      0.566      0.545      0.514s\r\n        448       5000      0.563      0.562      0.542      0.553s\r\n        480       5000      0.558      0.557      0.536      0.431s\r\n        512       5000      0.553      0.553      0.532      0.505s\r\n        544       5000       0.55      0.551       0.53      0.477s\r\n        576       5000      0.554      0.554      0.533      0.489s\r\n        608       5000      0.557      0.556      0.535      0.553s\r\n        640       5000      0.555      0.553      0.532      0.485s\r\n        672       5000      0.551      0.549      0.528      0.556s\r\n        704       5000      0.553       0.55       0.53      0.395s\r\n        736       5000      0.551      0.547      0.526      0.521s\r\n        768       5000      0.552       0.55      0.529      0.498s\r\n        800       5000      0.553       0.55      0.529      0.478s\r\n        832       5000      0.554      0.551      0.529      0.491s\r\n        864       5000      0.552      0.549      0.527      0.493s\r\n        896       5000       0.55      0.547      0.525       0.58s\r\n        928       5000      0.549      0.546      0.524      0.554s\r\n        960       5000      0.552      0.548      0.526      0.448s\r\n        992       5000       0.55      0.546      0.524      0.554s\r\n       1024       5000      0.551      0.547      0.525      0.496s\r\n       1056       5000      0.552      0.547      0.526      0.427s\r\n       1088       5000      0.551      0.546      0.524      0.473s\r\n       1120       5000       0.55      0.546      0.524      0.538s\r\n       1152       5000      0.549      0.544      0.523       0.49s\r\n       1184       5000      0.547      0.542       0.52      0.484s\r\n       1216       5000      0.545       0.54      0.519      0.508s\r\n       1248       5000      0.545      0.539      0.518       0.51s\r\n       1280       5000      0.544      0.539      0.517      0.535s\r\n       1312       5000      0.548      0.541       0.52      0.494s\r\n       1344       5000      0.548      0.542      0.521      0.608s\r\n       1376       5000      0.549      0.544      0.523      0.532s\r\n       1408       5000      0.551      0.546      0.525      0.465s\r\n       1440       5000       0.55      0.546      0.525       0.46s\r\n       1472       5000      0.549      0.546      0.524       0.57s\r\n       1504       5000       0.55      0.546      0.525      0.522s\r\n       1536       5000       0.55      0.547      0.526      0.495s\r\n       1568       5000       0.55      0.547      0.526      0.453s\r\n       1600       5000      0.551      0.547      0.526      0.513s\r\n       1632       5000      0.551      0.548      0.527      0.444s\r\n       1664       5000      0.552      0.549      0.528      0.443s\r\n       1696       5000      0.554       0.55      0.529      0.494s\r\n       1728       5000      0.554      0.551       0.53      0.529s\r\n       1760       5000      0.554       0.55      0.529      0.487s\r\n       1792       5000      0.555      0.551       0.53      0.497s\r\n       1824       5000      0.554      0.551       0.53      0.465s\r\n       1856       5000      0.554       0.55      0.529      0.493s\r\n       1888       5000      0.554       0.55      0.529      0.534s\r\n       1920       5000      0.554       0.55      0.529      0.501s\r\n       1952       5000      0.552      0.548      0.528      0.517s\r\n       1984       5000      0.552      0.548      0.527      0.483s\r\n       2016       5000      0.551      0.547      0.526      0.447s\r\n       2048       5000       0.55      0.546      0.525      0.576s\r\n       2080       5000       0.55      0.546      0.525      0.438s\r\n       2112       5000      0.551      0.547      0.526      0.497s\r\n       2144       5000      0.551      0.547      0.526      0.538s\r\n       2176       5000      0.552      0.548      0.526      0.562s\r\n       2208       5000       0.55      0.546      0.525      0.551s\r\n       2240       5000      0.549      0.545      0.524      0.516s\r\n       2272       5000      0.549      0.545      0.524      0.506s\r\n       2304       5000      0.549      0.545      0.524      0.446s\r\n       2336       5000      0.549      0.545      0.523      0.486s\r\n       2368       5000       0.55      0.546      0.524      0.545s\r\n       2400       5000       0.55      0.546      0.524      0.506s\r\n       2432       5000       0.55      0.546      0.524      0.468s\r\n       2464       5000       0.55      0.546      0.525       0.54s\r\n       2496       5000       0.55      0.547      0.525      0.551s\r\n       2528       5000       0.55      0.546      0.525      0.543s\r\n       2560       5000      0.549      0.546      0.524      0.465s\r\n       2592       5000      0.549      0.546      0.524      0.495s\r\n       2624       5000      0.549      0.546      0.524      0.612s\r\n       2656       5000      0.549      0.546      0.525      0.512s\r\n       2688       5000      0.549      0.546      0.524      0.523s\r\n       2720       5000      0.547      0.545      0.523      0.547s\r\n       2752       5000      0.547      0.545      0.523      0.537s\r\n       2784       5000      0.547      0.545      0.523      0.519s\r\n       2816       5000      0.548      0.545      0.524      0.474s\r\n       2848       5000      0.547      0.545      0.523      0.498s\r\n       2880       5000      0.548      0.545      0.523      0.526s\r\n       2912       5000      0.547      0.545      0.523      0.478s\r\n       2944       5000      0.547      0.544      0.523      0.487s\r\n       2976       5000      0.547      0.545      0.523      0.536s\r\n       3008       5000      0.545      0.543      0.521      0.509s\r\n       3040       5000      0.544      0.541       0.52      0.466s\r\n       3072       5000      0.543      0.541      0.519      0.511s\r\n       3104       5000      0.544      0.541       0.52      0.489s\r\n       3136       5000      0.544      0.542       0.52       0.42s\r\n       3168       5000      0.545      0.543      0.521      0.536s\r\n       3200       5000      0.545      0.543      0.521      0.452s\r\n       3232       5000      0.545      0.543      0.521      0.545s\r\n       3264       5000      0.544      0.542       0.52       0.56s\r\n       3296       5000      0.544      0.542       0.52      0.533s\r\n       3328       5000      0.544      0.542       0.52       0.48s\r\n       3360       5000      0.543      0.541      0.519       0.49s\r\n       3392       5000      0.542      0.541      0.519      0.507s\r\n       3424       5000      0.542      0.541      0.519      0.522s\r\n       3456       5000      0.542      0.542       0.52      0.522s\r\n       3488       5000      0.541      0.541      0.519      0.675s\r\n       3520       5000      0.541       0.54      0.518      0.443s\r\n       3552       5000      0.541       0.54      0.518      0.515s\r\n       3584       5000      0.541      0.541      0.519       0.54s\r\n       3616       5000      0.541       0.54      0.518      0.462s\r\n       3648       5000      0.542       0.54      0.519      0.575s\r\n       3680       5000      0.542      0.541      0.519      0.575s\r\n       3712       5000      0.543      0.541      0.519      0.604s\r\n       3744       5000      0.542       0.54      0.519      0.595s\r\n       3776       5000      0.542      0.541      0.519      0.504s\r\n       3808       5000      0.542      0.541      0.519      0.469s\r\n       3840       5000      0.542      0.541      0.519      0.572s\r\n       3872       5000      0.541       0.54      0.518      0.485s\r\n       3904       5000      0.541       0.54      0.518      0.585s\r\n       3936       5000      0.541       0.54      0.518      0.518s\r\n       3968       5000      0.541      0.539      0.517       0.53s\r\n       4000       5000      0.541      0.539      0.517      0.472s\r\n       4032       5000      0.541      0.539      0.517      0.585s\r\n       4064       5000      0.541      0.539      0.517      0.545s\r\n       4096       5000      0.541      0.539      0.518      0.568s\r\n       4128       5000      0.541      0.539      0.517      0.508s\r\n       4160       5000      0.541      0.539      0.517      0.447s\r\n       4192       5000       0.54      0.538      0.516      0.571s\r\n       4224       5000       0.54      0.538      0.516      0.553s\r\n       4256       5000       0.54      0.538      0.517      0.493s\r\n       4288       5000      0.541      0.539      0.517      0.451s\r\n       4320       5000      0.542      0.539      0.517      0.538s\r\n       4352       5000      0.542      0.539      0.518      0.535s\r\n       4384       5000      0.541      0.539      0.517      0.636s\r\n       4416       5000      0.542       0.54      0.518      0.448s\r\n       4448       5000      0.542      0.539      0.518      0.507s\r\n       4480       5000      0.542       0.54      0.518      0.566s\r\n       4512       5000      0.542       0.54      0.518      0.606s\r\n       4544       5000      0.542      0.539      0.518      0.587s\r\n       4576       5000      0.541      0.539      0.517      0.479s\r\n       4608       5000      0.541      0.539      0.517      0.523s\r\n       4640       5000      0.542      0.539      0.517      0.542s\r\n       4672       5000      0.541      0.539      0.517      0.633s\r\n       4704       5000      0.542      0.539      0.517       0.54s\r\n       4736       5000      0.542      0.539      0.517      0.448s\r\n       4768       5000      0.542      0.539      0.517      0.552s\r\n       4800       5000      0.542      0.539      0.518        0.5s\r\n       4832       5000      0.542      0.539      0.517      0.476s\r\n       4864       5000      0.542      0.539      0.518      0.524s\r\n       4896       5000      0.543       0.54      0.518      0.535s\r\n       4928       5000      0.542      0.539      0.518       0.61s\r\n       4960       5000      0.542      0.539      0.518      0.517s\r\n       4992       5000      0.542      0.539      0.517      0.513s\r\n       5000       5000      0.542      0.538      0.517      0.142s\r\nmAP Per Class:\r\n         person: 0.6545\r\n        bicycle: 0.3390\r\n            car: 0.4087\r\n     motorcycle: 0.5551\r\n       airplane: 0.7695\r\n            bus: 0.6553\r\n          train: 0.7421\r\n          truck: 0.3311\r\n           boat: 0.3917\r\n  traffic light: 0.3546\r\n   fire hydrant: 0.6711\r\n      stop sign: 0.5843\r\n  parking meter: 0.2901\r\n          bench: 0.2239\r\n           bird: 0.4490\r\n            cat: 0.6029\r\n            dog: 0.5982\r\n          horse: 0.5965\r\n          sheep: 0.4772\r\n            cow: 0.4832\r\n       elephant: 0.7780\r\n           bear: 0.6631\r\n          zebra: 0.7580\r\n        giraffe: 0.8608\r\n       backpack: 0.1389\r\n       umbrella: 0.4296\r\n        handbag: 0.1174\r\n            tie: 0.4122\r\n       suitcase: 0.2834\r\n        frisbee: 0.4407\r\n           skis: 0.3457\r\n      snowboard: 0.4403\r\n    sports ball: 0.4385\r\n           kite: 0.5387\r\n   baseball bat: 0.3634\r\n baseball glove: 0.3577\r\n     skateboard: 0.6406\r\n      surfboard: 0.4961\r\n  tennis racket: 0.6215\r\n         bottle: 0.2793\r\n     wine glass: 0.3463\r\n            cup: 0.3451\r\n           fork: 0.2618\r\n          knife: 0.1097\r\n          spoon: 0.1302\r\n           bowl: 0.2915\r\n         banana: 0.2537\r\n          apple: 0.1686\r\n       sandwich: 0.3510\r\n         orange: 0.2597\r\n       broccoli: 0.2330\r\n         carrot: 0.1589\r\n        hot dog: 0.4160\r\n          pizza: 0.5690\r\n          donut: 0.3708\r\n           cake: 0.3449\r\n          chair: 0.2805\r\n          couch: 0.3294\r\n   potted plant: 0.3229\r\n            bed: 0.3898\r\n   dining table: 0.2956\r\n         toilet: 0.6938\r\n             tv: 0.5832\r\n         laptop: 0.5667\r\n          mouse: 0.4683\r\n         remote: 0.2484\r\n       keyboard: 0.4403\r\n     cell phone: 0.2181\r\n      microwave: 0.5130\r\n           oven: 0.3297\r\n        toaster: 0.0714\r\n           sink: 0.4191\r\n   refrigerator: 0.4699\r\n           book: 0.1062\r\n          clock: 0.5111\r\n           vase: 0.3223\r\n       scissors: 0.1696\r\n     teddy bear: 0.5323\r\n     hair drier: 0.0000\r\n     toothbrush: 0.2262\r\n```\r\n\r\nHowever from COCOAPI the results are shown below\r\n```\r\nAverage Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.100\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.101\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.100\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.064\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.122\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.077\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.117\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.200\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.210\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.232\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.308\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.252\r\n\r\n```\r\n\r\nSo from the test.py it gives mAP 50+ however from COCOAPI it seems like only around 10\r\nAm I missing something or what? \r\nThank you very much @glenn-jocher sorry for the long results. \r\n\r\n","closed_by":{"login":"xiao1228","id":11752039,"node_id":"MDQ6VXNlcjExNzUyMDM5","avatar_url":"https://avatars.githubusercontent.com/u/11752039?v=4","gravatar_id":"","url":"https://api.github.com/users/xiao1228","html_url":"https://github.com/xiao1228","followers_url":"https://api.github.com/users/xiao1228/followers","following_url":"https://api.github.com/users/xiao1228/following{/other_user}","gists_url":"https://api.github.com/users/xiao1228/gists{/gist_id}","starred_url":"https://api.github.com/users/xiao1228/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiao1228/subscriptions","organizations_url":"https://api.github.com/users/xiao1228/orgs","repos_url":"https://api.github.com/users/xiao1228/repos","events_url":"https://api.github.com/users/xiao1228/events{/privacy}","received_events_url":"https://api.github.com/users/xiao1228/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/171/timeline","performed_via_github_app":null,"state_reason":"completed"}