{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/61","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/61/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/61/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/61/events","html_url":"https://github.com/ultralytics/yolov3/issues/61","id":394288965,"node_id":"MDU6SXNzdWUzOTQyODg5NjU=","number":61,"title":"The loss function might not be right.","user":{"login":"geminikq","id":30137333,"node_id":"MDQ6VXNlcjMwMTM3MzMz","avatar_url":"https://avatars.githubusercontent.com/u/30137333?v=4","gravatar_id":"","url":"https://api.github.com/users/geminikq","html_url":"https://github.com/geminikq","followers_url":"https://api.github.com/users/geminikq/followers","following_url":"https://api.github.com/users/geminikq/following{/other_user}","gists_url":"https://api.github.com/users/geminikq/gists{/gist_id}","starred_url":"https://api.github.com/users/geminikq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geminikq/subscriptions","organizations_url":"https://api.github.com/users/geminikq/orgs","repos_url":"https://api.github.com/users/geminikq/repos","events_url":"https://api.github.com/users/geminikq/events{/privacy}","received_events_url":"https://api.github.com/users/geminikq/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":24,"created_at":"2018-12-27T04:09:08Z","updated_at":"2021-01-29T18:23:35Z","closed_at":"2019-04-10T11:47:11Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, thanks for sharing your excent work.\r\nI found some inconsistent implementations with the paper in your code, that might be the reason that trainning only 52.2map.  I am not sure if I am right, so feel free to correct me if I missed something.\r\n(1) from paper, there is an ignore threshold to bypass loss calculation, but I don't see such implementation in your code. In the paper, it says: \"If the bounding box prior is not the best but does overlap a ground truth object by more than some threshold we ignore the prediction\".\r\n(2) You seems to calculate square error loss of \"torch.sigmoid(tx,ty)\" rather than tx, ty as it should be.\r\n(3) for class prediction, the paper says: \"We do not use a softmax as we have found it is unnecessary for good performance, instead we simply use independent logistic classiÔ¨Åers\", so you might first \"torch.sigmoid(cls_pred)\" and then use BCELoss function.\r\n(4) for objectness prediction, you might also use sigmoid function first, and bypass the calculation of those in the ignore group as (1) mentioned. (simply set loss = 0)\r\n","closed_by":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/61/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/61/timeline","performed_via_github_app":null,"state_reason":"completed"}