[{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419428146","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-419428146","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":419428146,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTQyODE0Ng==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T12:46:03Z","updated_at":"2018-09-07T12:46:03Z","author_association":"MEMBER","body":"Thanks for the feedback. I opened Issue #5 about this earlier. Currently only one precision-recall curve is generated per image in test.py, whereas like you say I believe we want one for each class in each image, and then the average of those APs is the mAP for that image.\r\n\r\nI can try and make this correction myself, or we could try and use an off-the-shelf solution, though that would require more imports. I was studying this link to learn more: http://scikit-learn.org/stable/auto_examples/model_selection/plot_precision_recall.html","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419428146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419647600","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-419647600","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":419647600,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTY0NzYwMA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-08T14:48:02Z","updated_at":"2018-09-08T14:48:02Z","author_association":"MEMBER","body":"After reviewing more examples, I think I can copy the methods in this repo:\r\nhttps://github.com/rafaelpadilla/Object-Detection-Metrics\r\n\r\nThere is another main difference: the mAP should be calculated across all images at once, rather than once per image the way it is now. So I'm going to try to fully replace the mAP code with a new one that calculates accumulated TP and FP vectors for each class, then produces 80 precision and recall curves for all the objects in the 5000 validation images at once.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419647600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":1834603382,"node_id":"MDEyOkxhYmVsZWRFdmVudDE4MzQ2MDMzODI=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1834603382","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-09-09T14:36:30Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":1834603405,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQxODM0NjAzNDA1","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1834603405","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2018-09-09T14:36:34Z","assignee":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419770944","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-419770944","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":419770944,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTc3MDk0NA==","user":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T02:38:18Z","updated_at":"2018-09-10T02:38:18Z","author_association":"NONE","body":"Yeah, the evaluation code in that repo is correct. Looking forward for your updates!","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419770944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419925865","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-419925865","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":419925865,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTkyNTg2NQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T14:09:02Z","updated_at":"2018-09-10T14:12:18Z","author_association":"MEMBER","body":"It looks like the original code for AP from recall-precision is fine:\r\nhttps://github.com/ultralytics/yolov3/blob/c43be7b350cfff8f2423547c6aa0e8d6db07061b/utils/utils.py#L129\r\n\r\nSo I left it alone and created a new function to call it once per class in commit c43be7b350cfff8f2423547c6aa0e8d6db07061b:\r\nhttps://github.com/ultralytics/yolov3/blob/c43be7b350cfff8f2423547c6aa0e8d6db07061b/utils/utils.py#L82\r\n\r\n``` python\r\n    # Find unique classes\r\n    unique_classes = np.unique(np.concatenate((pred_cls, target_cls), 0))\r\n\r\n    # Create Precision-Recall curve and compute AP for each class\r\n    ap = []\r\n    for c in unique_classes:\r\n        i = pred_cls == c\r\n        n_gt = sum(target_cls == c)  # Number of ground truth objects\r\n\r\n        if sum(i) == 0:\r\n            ap.append(0)\r\n        else:\r\n            # Accumulate FPs and TPs\r\n            fpa = np.cumsum(1 - tp[i])\r\n            tpa = np.cumsum(tp[i])\r\n\r\n            # Recall\r\n            recall = tpa / (n_gt + 1e-16)\r\n\r\n            # Precision\r\n            precision = tpa / (tpa + fpa)\r\n\r\n            # AP from recall-precision curve\r\n            ap.append(compute_ap(recall, precision))\r\n```\r\n\r\nWhen I re-evaluate mAP it drops from 58.1 to 56.7 with this method however. Darknet reports 57.9. I currently combine true and predicted classes into the list of classes evaluated per image, perhaps I should only be using one or the other. I will have to experiment some more.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419925865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T14:39:28Z","updated_at":"2018-09-10T14:39:28Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9/events","html_url":"https://github.com/ultralytics/yolov3/issues/9","id":358487124,"node_id":"MDU6SXNzdWUzNTg0ODcxMjQ=","number":9,"title":"Can u get the mAP as reported in darknet ?","user":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"assignees":[{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false}],"milestone":null,"comments":41,"created_at":"2018-09-10T06:39:34Z","updated_at":"2020-08-18T19:34:24Z","closed_at":"2019-03-26T16:45:49Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":146165888,"node_id":"MDEwOlJlcG9zaXRvcnkxNDYxNjU4ODg=","name":"yolov3","full_name":"ultralytics/yolov3","private":false,"owner":{"login":"ultralytics","id":26833451,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI2ODMzNDUx","avatar_url":"https://avatars.githubusercontent.com/u/26833451?v=4","gravatar_id":"","url":"https://api.github.com/users/ultralytics","html_url":"https://github.com/ultralytics","followers_url":"https://api.github.com/users/ultralytics/followers","following_url":"https://api.github.com/users/ultralytics/following{/other_user}","gists_url":"https://api.github.com/users/ultralytics/gists{/gist_id}","starred_url":"https://api.github.com/users/ultralytics/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ultralytics/subscriptions","organizations_url":"https://api.github.com/users/ultralytics/orgs","repos_url":"https://api.github.com/users/ultralytics/repos","events_url":"https://api.github.com/users/ultralytics/events{/privacy}","received_events_url":"https://api.github.com/users/ultralytics/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ultralytics/yolov3","description":"YOLOv3 in PyTorch > ONNX > CoreML > TFLite","fork":false,"url":"https://api.github.com/repos/ultralytics/yolov3","forks_url":"https://api.github.com/repos/ultralytics/yolov3/forks","keys_url":"https://api.github.com/repos/ultralytics/yolov3/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ultralytics/yolov3/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ultralytics/yolov3/teams","hooks_url":"https://api.github.com/repos/ultralytics/yolov3/hooks","issue_events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/events{/number}","events_url":"https://api.github.com/repos/ultralytics/yolov3/events","assignees_url":"https://api.github.com/repos/ultralytics/yolov3/assignees{/user}","branches_url":"https://api.github.com/repos/ultralytics/yolov3/branches{/branch}","tags_url":"https://api.github.com/repos/ultralytics/yolov3/tags","blobs_url":"https://api.github.com/repos/ultralytics/yolov3/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ultralytics/yolov3/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ultralytics/yolov3/git/refs{/sha}","trees_url":"https://api.github.com/repos/ultralytics/yolov3/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ultralytics/yolov3/statuses/{sha}","languages_url":"https://api.github.com/repos/ultralytics/yolov3/languages","stargazers_url":"https://api.github.com/repos/ultralytics/yolov3/stargazers","contributors_url":"https://api.github.com/repos/ultralytics/yolov3/contributors","subscribers_url":"https://api.github.com/repos/ultralytics/yolov3/subscribers","subscription_url":"https://api.github.com/repos/ultralytics/yolov3/subscription","commits_url":"https://api.github.com/repos/ultralytics/yolov3/commits{/sha}","git_commits_url":"https://api.github.com/repos/ultralytics/yolov3/git/commits{/sha}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/comments{/number}","issue_comment_url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments{/number}","contents_url":"https://api.github.com/repos/ultralytics/yolov3/contents/{+path}","compare_url":"https://api.github.com/repos/ultralytics/yolov3/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ultralytics/yolov3/merges","archive_url":"https://api.github.com/repos/ultralytics/yolov3/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ultralytics/yolov3/downloads","issues_url":"https://api.github.com/repos/ultralytics/yolov3/issues{/number}","pulls_url":"https://api.github.com/repos/ultralytics/yolov3/pulls{/number}","milestones_url":"https://api.github.com/repos/ultralytics/yolov3/milestones{/number}","notifications_url":"https://api.github.com/repos/ultralytics/yolov3/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ultralytics/yolov3/labels{/name}","releases_url":"https://api.github.com/repos/ultralytics/yolov3/releases{/id}","deployments_url":"https://api.github.com/repos/ultralytics/yolov3/deployments","created_at":"2018-08-26T08:57:20Z","updated_at":"2023-01-19T02:45:28Z","pushed_at":"2023-01-02T20:48:03Z","git_url":"git://github.com/ultralytics/yolov3.git","ssh_url":"git@github.com:ultralytics/yolov3.git","clone_url":"https://github.com/ultralytics/yolov3.git","svn_url":"https://github.com/ultralytics/yolov3","homepage":"https://ultralytics.com","size":9609,"stargazers_count":9265,"watchers_count":9265,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":3359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"gpl-3.0","name":"GNU General Public License v3.0","spdx_id":"GPL-3.0","url":"https://api.github.com/licenses/gpl-3.0","node_id":"MDc6TGljZW5zZTk="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["coreml","deep-learning","ios","machine-learning","ml","object-detection","onnx","pytorch","tflite","yolo","yolov3","yolov4","yolov5"],"visibility":"public","forks":3359,"open_issues":7,"watchers":9265,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/9/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T14:59:50Z","updated_at":"2018-09-10T14:59:50Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/2","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/2/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/2/events","html_url":"https://github.com/ultralytics/yolov3/issues/2","id":356562199,"node_id":"MDU6SXNzdWUzNTY1NjIxOTk=","number":2,"title":"Resume training from official yolov3 weights","user":{"login":"lianuo","id":28760530,"node_id":"MDQ6VXNlcjI4NzYwNTMw","avatar_url":"https://avatars.githubusercontent.com/u/28760530?v=4","gravatar_id":"","url":"https://api.github.com/users/lianuo","html_url":"https://github.com/lianuo","followers_url":"https://api.github.com/users/lianuo/followers","following_url":"https://api.github.com/users/lianuo/following{/other_user}","gists_url":"https://api.github.com/users/lianuo/gists{/gist_id}","starred_url":"https://api.github.com/users/lianuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lianuo/subscriptions","organizations_url":"https://api.github.com/users/lianuo/orgs","repos_url":"https://api.github.com/users/lianuo/repos","events_url":"https://api.github.com/users/lianuo/events{/privacy}","received_events_url":"https://api.github.com/users/lianuo/received_events","type":"User","site_admin":false},"labels":[{"id":1035696370,"node_id":"MDU6TGFiZWwxMDM1Njk2Mzcw","url":"https://api.github.com/repos/ultralytics/yolov3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1035696373,"node_id":"MDU6TGFiZWwxMDM1Njk2Mzcz","url":"https://api.github.com/repos/ultralytics/yolov3/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Extra attention is needed"}],"state":"closed","locked":false,"assignee":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"assignees":[{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":54,"created_at":"2018-09-03T16:39:58Z","updated_at":"2019-04-10T11:46:14Z","closed_at":"2019-04-10T11:46:14Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":146165888,"node_id":"MDEwOlJlcG9zaXRvcnkxNDYxNjU4ODg=","name":"yolov3","full_name":"ultralytics/yolov3","private":false,"owner":{"login":"ultralytics","id":26833451,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI2ODMzNDUx","avatar_url":"https://avatars.githubusercontent.com/u/26833451?v=4","gravatar_id":"","url":"https://api.github.com/users/ultralytics","html_url":"https://github.com/ultralytics","followers_url":"https://api.github.com/users/ultralytics/followers","following_url":"https://api.github.com/users/ultralytics/following{/other_user}","gists_url":"https://api.github.com/users/ultralytics/gists{/gist_id}","starred_url":"https://api.github.com/users/ultralytics/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ultralytics/subscriptions","organizations_url":"https://api.github.com/users/ultralytics/orgs","repos_url":"https://api.github.com/users/ultralytics/repos","events_url":"https://api.github.com/users/ultralytics/events{/privacy}","received_events_url":"https://api.github.com/users/ultralytics/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ultralytics/yolov3","description":"YOLOv3 in PyTorch > ONNX > CoreML > TFLite","fork":false,"url":"https://api.github.com/repos/ultralytics/yolov3","forks_url":"https://api.github.com/repos/ultralytics/yolov3/forks","keys_url":"https://api.github.com/repos/ultralytics/yolov3/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ultralytics/yolov3/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ultralytics/yolov3/teams","hooks_url":"https://api.github.com/repos/ultralytics/yolov3/hooks","issue_events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/events{/number}","events_url":"https://api.github.com/repos/ultralytics/yolov3/events","assignees_url":"https://api.github.com/repos/ultralytics/yolov3/assignees{/user}","branches_url":"https://api.github.com/repos/ultralytics/yolov3/branches{/branch}","tags_url":"https://api.github.com/repos/ultralytics/yolov3/tags","blobs_url":"https://api.github.com/repos/ultralytics/yolov3/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ultralytics/yolov3/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ultralytics/yolov3/git/refs{/sha}","trees_url":"https://api.github.com/repos/ultralytics/yolov3/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ultralytics/yolov3/statuses/{sha}","languages_url":"https://api.github.com/repos/ultralytics/yolov3/languages","stargazers_url":"https://api.github.com/repos/ultralytics/yolov3/stargazers","contributors_url":"https://api.github.com/repos/ultralytics/yolov3/contributors","subscribers_url":"https://api.github.com/repos/ultralytics/yolov3/subscribers","subscription_url":"https://api.github.com/repos/ultralytics/yolov3/subscription","commits_url":"https://api.github.com/repos/ultralytics/yolov3/commits{/sha}","git_commits_url":"https://api.github.com/repos/ultralytics/yolov3/git/commits{/sha}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/comments{/number}","issue_comment_url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments{/number}","contents_url":"https://api.github.com/repos/ultralytics/yolov3/contents/{+path}","compare_url":"https://api.github.com/repos/ultralytics/yolov3/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ultralytics/yolov3/merges","archive_url":"https://api.github.com/repos/ultralytics/yolov3/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ultralytics/yolov3/downloads","issues_url":"https://api.github.com/repos/ultralytics/yolov3/issues{/number}","pulls_url":"https://api.github.com/repos/ultralytics/yolov3/pulls{/number}","milestones_url":"https://api.github.com/repos/ultralytics/yolov3/milestones{/number}","notifications_url":"https://api.github.com/repos/ultralytics/yolov3/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ultralytics/yolov3/labels{/name}","releases_url":"https://api.github.com/repos/ultralytics/yolov3/releases{/id}","deployments_url":"https://api.github.com/repos/ultralytics/yolov3/deployments","created_at":"2018-08-26T08:57:20Z","updated_at":"2023-01-19T02:45:28Z","pushed_at":"2023-01-02T20:48:03Z","git_url":"git://github.com/ultralytics/yolov3.git","ssh_url":"git@github.com:ultralytics/yolov3.git","clone_url":"https://github.com/ultralytics/yolov3.git","svn_url":"https://github.com/ultralytics/yolov3","homepage":"https://ultralytics.com","size":9609,"stargazers_count":9265,"watchers_count":9265,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":3359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"gpl-3.0","name":"GNU General Public License v3.0","spdx_id":"GPL-3.0","url":"https://api.github.com/licenses/gpl-3.0","node_id":"MDc6TGljZW5zZTk="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["coreml","deep-learning","ios","machine-learning","ml","object-detection","onnx","pytorch","tflite","yolo","yolov3","yolov4","yolov5"],"visibility":"public","forks":3359,"open_issues":7,"watchers":9265,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Thanks for your improvement of this YOLOv3 implementation.\r\nI have just test the training ,got some problem .\r\nI follow these steps.\r\n1. load the original yolov3.weight to the model\r\n2. train it on coco2014 with your train.py.\r\n3.Got the following logs ,the precision is down fast from 0.5->0.1. but recall is up to 0.35.\r\nsee Screenshot here\r\n![log](https://user-images.githubusercontent.com/28760530/45008052-2677b480-b033-11e8-837a-361da3b012b4.png)\r\n\r\n4.I save the weight with precision0.2, and run the detect.py\r\nthe result like this , \r\n![000000000019](https://user-images.githubusercontent.com/28760530/44996478-b2112700-afda-11e8-9399-eec286192a96.jpg)\r\nif I do not train,the orginal wight can get this result:\r\n![000000000019](https://user-images.githubusercontent.com/28760530/45008197-d6e5b880-b033-11e8-89dc-97541686dd55.jpg)\r\n\r\nI do not know whether I used wrong parameters or something else, lead to generation of many bbox .\r\ncould you give me some suggestion?\r\nThank you~\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/2/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/2/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/420187703","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-420187703","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":420187703,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDE4NzcwMw==","user":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"created_at":"2018-09-11T08:15:04Z","updated_at":"2018-09-11T08:15:04Z","author_association":"NONE","body":"Maybe you should perform _per-class rank ordering_ instead of _per-image rank ordering_. \r\n\r\nTaking VOC for example, the evaluation code will first produce a per-class prediction list over the whole test-set in the format (image_id, score, x0, y0, x1, y1), like:\r\n\r\n0000.jpg 0.98 100 100 200 200    # the 1st instance of image 0000.jpg\r\n0000.jpg 0.51 10 10 1000 1000    # the last instance of image 0000.jpg\r\n0001.jpg 0.78 100 100 200 200    # the 1st instance of image 0001.jpg\r\n0001.jpg 0.05 10 10 1000 1000    # the last instance of image 0001.jpg\r\n...\r\n\r\nthen perform rank ordering for all instances:\r\n_image-id  score_\r\n0000.jpg  0.98\r\n0001.jpg  0.78\r\n0000.jpg  0.51\r\n...\r\n0001.jpg  0.05\r\n\r\nthen compute and accumulate TPs and FPs ... In this way, the mAP should be higher than per-image rank ordering (and no doubt the authors of yolo said _mAP is screwed up_ xD)\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/420187703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false}},{"id":1860330976,"node_id":"MDEyOkxhYmVsZWRFdmVudDE4NjAzMzA5NzY=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1860330976","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-09-21T14:27:10Z","label":{"name":"help wanted","color":"008672"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467178554","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-467178554","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":467178554,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzE3ODU1NA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-02-25T20:53:14Z","updated_at":"2019-02-25T20:53:14Z","author_association":"MEMBER","body":"@xyutao I'm updating the mAP code, to both add corrections to the repo mAP calculation, and also to output the COCO JSON file to pass to allow the cocoapi to compute the official mAP. \r\n\r\nBefore you recommended switching to per class rank ordering from per image rank ordering. Is this still your recommendation? Do you know if this is how COCO computes mAP?","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467178554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2162982679,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2Mjk4MjY3OQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2162982679","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-25T20:53:14Z","performed_via_github_app":null},{"id":2162982680,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjI5ODI2ODA=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2162982680","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-25T20:53:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467181147","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-467181147","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":467181147,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzE4MTE0Nw==","user":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false},"created_at":"2019-02-25T21:01:01Z","updated_at":"2019-02-25T21:01:01Z","author_association":"NONE","body":"I think the ordering is performed for each class in each image independently. It is performed in the following lines\r\nhttps://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L155-L158\r\nwhich calls\r\nhttps://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L260","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467181147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467199840","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-467199840","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":467199840,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzE5OTg0MA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-02-25T21:56:41Z","updated_at":"2019-02-25T21:56:41Z","author_association":"MEMBER","body":"@xyutao @okanlv I just noticed, the pycocotools demo notebook is selecting a subset of the entire validation set, just as we want for yolov3, since darknet only validates on the 5000 images in `5k.txt`. You can see in the notebook that pycocotools states it is running a _per image_ evaluation.\r\n\r\nhttps://github.com/cocodataset/cocoapi/blob/master/PythonAPI/pycocoEvalDemo.ipynb\r\n<img width=\"925\" alt=\"screenshot 2019-02-25 at 22 55 15\" src=\"https://user-images.githubusercontent.com/26833433/53371417-7aaf8180-3950-11e9-9cba-f309ff3f508d.png\">","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467199840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2163133603,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2MzEzMzYwMw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2163133603","actor":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-25T21:56:41Z","performed_via_github_app":null},{"id":2163133605,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjMxMzM2MDU=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2163133605","actor":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-25T21:56:41Z","performed_via_github_app":null},{"id":2163133607,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2MzEzMzYwNw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2163133607","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-25T21:56:41Z","performed_via_github_app":null},{"id":2163133608,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjMxMzM2MDg=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2163133608","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-25T21:56:41Z","performed_via_github_app":null},{"actor":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T06:06:16Z","updated_at":"2019-03-14T06:06:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/129","repository_url":"https://api.github.com/repos/ultralytics/yolov3","labels_url":"https://api.github.com/repos/ultralytics/yolov3/issues/129/labels{/name}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/issues/129/comments","events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/129/events","html_url":"https://github.com/ultralytics/yolov3/issues/129","id":420846022,"node_id":"MDU6SXNzdWU0MjA4NDYwMjI=","number":129,"title":"about the calculation of Map","user":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-03-14T06:06:16Z","updated_at":"2019-03-15T02:30:54Z","closed_at":"2019-03-15T02:30:54Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":146165888,"node_id":"MDEwOlJlcG9zaXRvcnkxNDYxNjU4ODg=","name":"yolov3","full_name":"ultralytics/yolov3","private":false,"owner":{"login":"ultralytics","id":26833451,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI2ODMzNDUx","avatar_url":"https://avatars.githubusercontent.com/u/26833451?v=4","gravatar_id":"","url":"https://api.github.com/users/ultralytics","html_url":"https://github.com/ultralytics","followers_url":"https://api.github.com/users/ultralytics/followers","following_url":"https://api.github.com/users/ultralytics/following{/other_user}","gists_url":"https://api.github.com/users/ultralytics/gists{/gist_id}","starred_url":"https://api.github.com/users/ultralytics/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ultralytics/subscriptions","organizations_url":"https://api.github.com/users/ultralytics/orgs","repos_url":"https://api.github.com/users/ultralytics/repos","events_url":"https://api.github.com/users/ultralytics/events{/privacy}","received_events_url":"https://api.github.com/users/ultralytics/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ultralytics/yolov3","description":"YOLOv3 in PyTorch > ONNX > CoreML > TFLite","fork":false,"url":"https://api.github.com/repos/ultralytics/yolov3","forks_url":"https://api.github.com/repos/ultralytics/yolov3/forks","keys_url":"https://api.github.com/repos/ultralytics/yolov3/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ultralytics/yolov3/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ultralytics/yolov3/teams","hooks_url":"https://api.github.com/repos/ultralytics/yolov3/hooks","issue_events_url":"https://api.github.com/repos/ultralytics/yolov3/issues/events{/number}","events_url":"https://api.github.com/repos/ultralytics/yolov3/events","assignees_url":"https://api.github.com/repos/ultralytics/yolov3/assignees{/user}","branches_url":"https://api.github.com/repos/ultralytics/yolov3/branches{/branch}","tags_url":"https://api.github.com/repos/ultralytics/yolov3/tags","blobs_url":"https://api.github.com/repos/ultralytics/yolov3/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ultralytics/yolov3/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ultralytics/yolov3/git/refs{/sha}","trees_url":"https://api.github.com/repos/ultralytics/yolov3/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ultralytics/yolov3/statuses/{sha}","languages_url":"https://api.github.com/repos/ultralytics/yolov3/languages","stargazers_url":"https://api.github.com/repos/ultralytics/yolov3/stargazers","contributors_url":"https://api.github.com/repos/ultralytics/yolov3/contributors","subscribers_url":"https://api.github.com/repos/ultralytics/yolov3/subscribers","subscription_url":"https://api.github.com/repos/ultralytics/yolov3/subscription","commits_url":"https://api.github.com/repos/ultralytics/yolov3/commits{/sha}","git_commits_url":"https://api.github.com/repos/ultralytics/yolov3/git/commits{/sha}","comments_url":"https://api.github.com/repos/ultralytics/yolov3/comments{/number}","issue_comment_url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments{/number}","contents_url":"https://api.github.com/repos/ultralytics/yolov3/contents/{+path}","compare_url":"https://api.github.com/repos/ultralytics/yolov3/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ultralytics/yolov3/merges","archive_url":"https://api.github.com/repos/ultralytics/yolov3/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ultralytics/yolov3/downloads","issues_url":"https://api.github.com/repos/ultralytics/yolov3/issues{/number}","pulls_url":"https://api.github.com/repos/ultralytics/yolov3/pulls{/number}","milestones_url":"https://api.github.com/repos/ultralytics/yolov3/milestones{/number}","notifications_url":"https://api.github.com/repos/ultralytics/yolov3/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ultralytics/yolov3/labels{/name}","releases_url":"https://api.github.com/repos/ultralytics/yolov3/releases{/id}","deployments_url":"https://api.github.com/repos/ultralytics/yolov3/deployments","created_at":"2018-08-26T08:57:20Z","updated_at":"2023-01-19T02:45:28Z","pushed_at":"2023-01-02T20:48:03Z","git_url":"git://github.com/ultralytics/yolov3.git","ssh_url":"git@github.com:ultralytics/yolov3.git","clone_url":"https://github.com/ultralytics/yolov3.git","svn_url":"https://github.com/ultralytics/yolov3","homepage":"https://ultralytics.com","size":9609,"stargazers_count":9265,"watchers_count":9265,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":3359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7,"license":{"key":"gpl-3.0","name":"GNU General Public License v3.0","spdx_id":"GPL-3.0","url":"https://api.github.com/licenses/gpl-3.0","node_id":"MDc6TGljZW5zZTk="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["coreml","deep-learning","ios","machine-learning","ml","object-detection","onnx","pytorch","tflite","yolo","yolov3","yolov4","yolov5"],"visibility":"public","forks":3359,"open_issues":7,"watchers":9265,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"At first，thank you very much for this excellent work.\r\nI have notice that this code calculate the Map by each class in each image independently， and then add together. In another issue(https://github.com/ultralytics/yolov3/issues/7#L129)， author say the calculation method of Map is sourecd from cocoapi. Does anyone have a clear document telling me about coco's Map calculation method?","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ultralytics/yolov3/issues/129/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472721476","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-472721476","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":472721476,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjcyMTQ3Ng==","user":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T06:31:07Z","updated_at":"2019-03-14T06:31:07Z","author_association":"NONE","body":"@xyutao ，你搞明白这个问题了吗？按照传统的map计算方法的话，的确应该是按照你说的就是把所有图片中的可能物体都检测出来然后根据confidence进行排序，然后依次选取他们作为正例样本并计算召回率和准确率，最后计算每一个类别的ap。不过我看了这个代码作者的相关回答并结合coco api的详细代码后发现或许计算每一张图片的ap再平均到一起或许才是coco的map计算方法。但我目前没看到相关的正式文档去准确描述coco的map计算方法，最起码找遍中文搜索的目标检测map计算描述后发现都是传统的计算方法","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472721476/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false}},{"id":2202402173,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIwMjQwMjE3Mw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2202402173","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-14T06:31:07Z","performed_via_github_app":null},{"id":2202402174,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMDI0MDIxNzQ=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2202402174","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-14T06:31:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472731057","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-472731057","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":472731057,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjczMTA1Nw==","user":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T07:14:06Z","updated_at":"2019-03-14T07:14:06Z","author_association":"NONE","body":"@guagen COCO的API也是用传统方法算的。它先调用evaluateImg函数，对单张图的每个类，计算各检测框和真值的match情况，然后调用accumulate函数，对同一个类的所有图片的match结果进行合并，并按照检测框的得分进行降序，最后再统一计算precision-recall。\r\n\r\nevaluateImg函数的返回结果详见：https://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L302\r\n\r\n对单个类合并所有图片检测框得分的代码：\r\nhttps://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L363\r\n\r\n对检测框得分降序排列的代码：\r\nhttps://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L367","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472731057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false}},{"id":2202469137,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIwMjQ2OTEzNw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2202469137","actor":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-14T07:14:06Z","performed_via_github_app":null},{"id":2202469139,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMDI0NjkxMzk=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2202469139","actor":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-14T07:14:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472732499","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-472732499","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":472732499,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjczMjQ5OQ==","user":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T07:20:21Z","updated_at":"2019-03-14T07:20:21Z","author_association":"NONE","body":"@glenn-jocher The per-image evaluation just matches the detections and gt for each category, as shown in the evaluateImg function:\r\nhttps://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L236\r\n\r\nThe recall and precision are computed per category, by accumulating the matching and ranking the detection scores for all images of the category. See:\r\nhttps://github.com/cocodataset/cocoapi/blob/ed842bffd41f6ff38707c4f0968d2cfd91088688/PythonAPI/pycocotools/cocoeval.py#L363\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472732499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xyutao","id":42927482,"node_id":"MDQ6VXNlcjQyOTI3NDgy","avatar_url":"https://avatars.githubusercontent.com/u/42927482?v=4","gravatar_id":"","url":"https://api.github.com/users/xyutao","html_url":"https://github.com/xyutao","followers_url":"https://api.github.com/users/xyutao/followers","following_url":"https://api.github.com/users/xyutao/following{/other_user}","gists_url":"https://api.github.com/users/xyutao/gists{/gist_id}","starred_url":"https://api.github.com/users/xyutao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xyutao/subscriptions","organizations_url":"https://api.github.com/users/xyutao/orgs","repos_url":"https://api.github.com/users/xyutao/repos","events_url":"https://api.github.com/users/xyutao/events{/privacy}","received_events_url":"https://api.github.com/users/xyutao/received_events","type":"User","site_admin":false}},{"id":2202479013,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIwMjQ3OTAxMw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2202479013","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-14T07:20:21Z","performed_via_github_app":null},{"id":2202479014,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMDI0NzkwMTQ=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2202479014","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-14T07:20:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472733186","html_url":"https://github.com/ultralytics/yolov3/issues/7#issuecomment-472733186","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/7","id":472733186,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjczMzE4Ng==","user":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T07:23:24Z","updated_at":"2019-03-14T07:23:35Z","author_association":"NONE","body":"@xyutao 好吧，头疼，看来这个代码的作者写错代码了，而且按照他的这种写法，得出的map不等于每一类的单独ap加到一起再除以类别总数","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/472733186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guagen","id":34730469,"node_id":"MDQ6VXNlcjM0NzMwNDY5","avatar_url":"https://avatars.githubusercontent.com/u/34730469?v=4","gravatar_id":"","url":"https://api.github.com/users/guagen","html_url":"https://github.com/guagen","followers_url":"https://api.github.com/users/guagen/followers","following_url":"https://api.github.com/users/guagen/following{/other_user}","gists_url":"https://api.github.com/users/guagen/gists{/gist_id}","starred_url":"https://api.github.com/users/guagen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guagen/subscriptions","organizations_url":"https://api.github.com/users/guagen/orgs","repos_url":"https://api.github.com/users/guagen/repos","events_url":"https://api.github.com/users/guagen/events{/privacy}","received_events_url":"https://api.github.com/users/guagen/received_events","type":"User","site_admin":false}}]