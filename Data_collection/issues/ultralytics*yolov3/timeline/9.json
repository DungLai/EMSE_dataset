[{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419937229","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-419937229","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":419937229,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTkzNzIyOQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T14:39:28Z","updated_at":"2018-09-10T14:39:45Z","author_association":"MEMBER","body":"Issue #7 is open on this topic. The mAP calculation is still under development. The current mAP calculation using this repo with the official yolov3 weights is 56.7 compared to 57.9 in Darknet.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/419937229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/420953072","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-420953072","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":420953072,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDk1MzA3Mg==","user":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"created_at":"2018-09-13T10:01:34Z","updated_at":"2018-09-13T14:58:59Z","author_association":"NONE","body":"I use your code with the official yolov3 weights and COCO API to calculate AP in 5k, and I get AP[IoU=0.50] = 0.533 when image size is 416x416.Here is the whole results.\r\n```\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.299\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.533\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.304\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.153\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.326\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.425\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.264\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.390\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.406\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.236\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.428\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.553\r\n```","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/420953072/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/420956821","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-420956821","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":420956821,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDk1NjgyMQ==","user":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"created_at":"2018-09-13T10:15:37Z","updated_at":"2018-09-13T14:59:15Z","author_association":"NONE","body":"When change image size to 608x608, I get results like this\r\n```\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.303\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.538\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.307\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.189\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.335\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.387\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.269\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.406\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.423\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.281\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.449\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.527\r\n```","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/420956821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/421039726","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-421039726","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":421039726,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTAzOTcyNg==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-13T15:03:07Z","updated_at":"2018-09-13T15:03:56Z","author_association":"MEMBER","body":"@xuzheyuan624 oh thanks for using the official COCO mAP! Do you have code to generate the COCO input text files for the mAP calculation? Maybe we can update `test.py` to generate those also.\r\n\r\nI've been updating the mAP code recently, so I'm not sure if you are using the most recent version. Can you tell me the equivalent mAP you end up with if you run test.py for the 5000 images? I get `0.567`. ","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/421039726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":1843881369,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTg0Mzg4MTM2OQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1843881369","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-09-13T15:03:07Z","performed_via_github_app":null},{"id":1843881370,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE4NDM4ODEzNzA=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1843881370","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-09-13T15:03:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/423550244","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-423550244","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":423550244,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzU1MDI0NA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2018-09-21T14:26:25Z","updated_at":"2018-09-21T14:26:50Z","author_association":"MEMBER","body":"@xuzheyuan624 could you share the code you used to generate the COCO text files used to get the official COCO mAP? It would be very useful if I could integrate that into `test.py`, then we could finally close this issue. Thanks!","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/423550244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":1860329199,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTg2MDMyOTE5OQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1860329199","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-09-21T14:26:25Z","performed_via_github_app":null},{"id":1860329202,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE4NjAzMjkyMDI=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1860329202","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-09-21T14:26:25Z","performed_via_github_app":null},{"id":1860331762,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQxODYwMzMxNzYy","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1860331762","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2018-09-21T14:27:25Z","assignee":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/424197763","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-424197763","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":424197763,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDE5Nzc2Mw==","user":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"created_at":"2018-09-25T03:43:30Z","updated_at":"2018-09-25T03:43:30Z","author_association":"NONE","body":"I have modified some code (I write a dataloader for my own).But u can refer to it to kown how to calculate the mAP by COCO APi\r\n`import os\r\nimport json\r\nfrom json import encoder\r\nencoder.FLOAT_REPR = lambda o: format(o, '.2f')\r\nimport sys\r\nimport numpy as np\r\nimport argparse\r\nfrom models import *\r\nfrom utils.datasets import *\r\nfrom utils.utils import *\r\nfrom common.coco_dataset import COCODataset\r\n\r\nfrom pycocotools.coco import COCO\r\nfrom pycocotools.cocoeval import COCOeval\r\n\r\nparser = argparse.ArgumentParser()\r\nparser.add_argument('-batch_size', type=int, default=4, help='size of each image batch')\r\nparser.add_argument('-cfg', type=str, default='cfg/yolov3.cfg', help='path to model config file')\r\nparser.add_argument('-data_config_path', type=str, default='cfg/coco.data', help='path to data config file')\r\nparser.add_argument('-weights_path', type=str, default='checkpoints/yolov3.weights', help='path to weights file')\r\nparser.add_argument('-class_path', type=str, default='data/coco.names', help='path to class label file')\r\nparser.add_argument('-iou_thres', type=float, default=0.5, help='iou threshold required to qualify as detected')\r\nparser.add_argument('-conf_thres', type=float, default=0.01, help='object confidence threshold')\r\nparser.add_argument('-nms_thres', type=float, default=0.45, help='iou threshold for non-maximum suppression')\r\nparser.add_argument('-n_cpu', type=int, default=0, help='number of cpu threads to use during batch generation')\r\nparser.add_argument('-img_size', type=int, default=608, help='size of each image dimension')\r\nparser.add_argument('-use_cuda', type=bool, default=True, help='whether to use cuda if available')\r\nparser.add_argument('-annotation_path', type=str, default='./data/coco/annotations/instances_val2014.json',help='')\r\nopt = parser.parse_args()\r\nprint(opt)\r\n\r\ncuda = torch.cuda.is_available() and opt.use_cuda\r\ndevice = torch.device('cuda:0' if cuda else 'cpu')\r\n\r\n\r\ndata_config = parse_data_config(opt.data_config_path)\r\nnum_classes = int(data_config['classes'])\r\nif platform == 'darwin':  \r\n    test_path = data_config['valid']\r\nelse:  \r\n    test_path = './data/coco/new_5k.txt'\r\n\r\n\r\nmodel = Darknet(opt.cfg, opt.img_size)\r\n\r\n\r\nif opt.weights_path.endswith('.weights'):  \r\n    load_weights(model, opt.weights_path)\r\nelif opt.weights_path.endswith('.pt'):  \r\n    checkpoint = torch.load(opt.weights_path, map_location='cpu')\r\n    model.load_state_dict(checkpoint['model'])\r\n    del checkpoint\r\n\r\nmodel.to(device).eval()\r\n\r\n\r\ndataloader = torch.utils.data.DataLoader(COCODataset(test_path,\r\n                                                     (opt.img_size, opt.img_size),\r\n                                                     is_training=False),\r\n                                                     batch_size=opt.batch_size,\r\n                                                     shuffle=False, num_workers=8, pin_memory=False)\r\n\r\nindex2category = json.load(open(\"coco_index2category.json\"))\r\n\r\nprint('Start evaling')\r\ncoco_results = []\r\ncoco_img_ids= set([])\r\nfor step, samples in enumerate(dataloader):\r\n    images = samples[\"image\"].to(device)\r\n    labels = samples[\"label\"]\r\n    image_paths, origin_sizes = samples[\"image_path\"], samples[\"origin_size\"]\r\n    with torch.no_grad():\r\n        output = model(images)\r\n        output = non_max_suppression(output, conf_thres=opt.conf_thres, nms_thres=opt.nms_thres)\r\n    for idx, detections in enumerate(output):\r\n        image_id = int(os.path.basename(image_paths[idx])[-16:-4])\r\n        coco_img_ids.add(image_id)\r\n        if detections is not None:\r\n            origin_size = eval(origin_sizes[idx])\r\n            detections = detections.cpu().numpy()\r\n            for x1, y1, x2, y2, conf, cls_conf, cls_pred in detections:\r\n                x1 = x1 / opt.img_size * origin_size[0]\r\n                x2 = x2 / opt.img_size * origin_size[0]\r\n                y1 = y1 / opt.img_size * origin_size[1]\r\n                y2 = y2 / opt.img_size * origin_size[1]\r\n                w = x2 - x1\r\n                h = y2 - y1\r\n                coco_results.append({\r\n                    \"image_id\":image_id,\r\n                    \"category_id\":index2category[str(int(cls_pred.item()))],\r\n                    \"bbox\":(float(x1), float(y1), float(w), float(h)),\r\n                    \"score\":float(conf),\r\n                })\r\n    print(\"Now {}/{}\".format(step, len(dataloader)))\r\nsave_path = \"coco_results.json\"\r\nwith open(save_path, 'w') as f:\r\n    json.dump(coco_results, f, sort_keys=True, indent=4, separators=(',', ':'))\r\nprint(\"Using coco-evaluate tools to evaluate.\")\r\ncocoGT = COCO(opt.annotation_path)\r\ncocoDT = cocoGT.loadRes(save_path)\r\ncocoEval = COCOeval(cocoGT, cocoDT, \"bbox\")\r\ncocoEval.params.imgIds  = list(coco_img_ids) \r\ncocoEval.evaluate()\r\ncocoEval.accumulate()\r\ncocoEval.summarize()`","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/424197763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429840711","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-429840711","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":429840711,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTg0MDcxMQ==","user":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"created_at":"2018-10-15T12:50:57Z","updated_at":"2018-10-15T12:50:57Z","author_association":"NONE","body":"@xuzheyuan624 I noticed that your code doesn't shift the boxes back to original image coordinates from before the letterboxing process. Is this done somewhere else internally?","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429840711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false}},{"id":1903993295,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwMzk5MzI5NQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1903993295","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T12:50:57Z","performed_via_github_app":null},{"id":1903993297,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDM5OTMyOTc=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1903993297","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T12:50:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429845508","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-429845508","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":429845508,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTg0NTUwOA==","user":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"created_at":"2018-10-15T13:06:07Z","updated_at":"2018-10-15T13:07:57Z","author_association":"NONE","body":"@nirbenz \r\n`x1 = x1 / opt.img_size * origin_size[0]\r\nx2 = x2 / opt.img_size * origin_size[0]\r\ny1 = y1 / opt.img_size * origin_size[1]\r\ny2 = y2 / opt.img_size * origin_size[1]`\r\nAnd I also write a pytorch implement recently, u can see my [code](https://github.com/xuzheyuan624/yolov3-pytorch) for details.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429845508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false}},{"id":1904029923,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwNDAyOTkyMw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904029923","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:06:07Z","performed_via_github_app":null},{"id":1904029925,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDQwMjk5MjU=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904029925","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:06:07Z","performed_via_github_app":null},{"id":1904031475,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwNDAzMTQ3NQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904031475","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:06:46Z","performed_via_github_app":null},{"id":1904031476,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDQwMzE0NzY=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904031476","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:06:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429851478","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-429851478","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":429851478,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTg1MTQ3OA==","user":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"created_at":"2018-10-15T13:25:52Z","updated_at":"2018-10-15T13:25:52Z","author_association":"NONE","body":"@xuzheyuan624 this code takes care of scaling back, but what about letterboxing? I mean the process of fitting the image inside a 608x608 square.\r\nIf you are _not doing this_ - this might be the reason you are getting an mAP difference!\r\n\r\nThis is usually done by resizing the larger dimension to 608 (and smaller dimension accordingly) and then padding to the aspect ratio the model was trained on (for COCO - 1x1). @glenn-jocher's original code reverses this process by subtracting the amount of padding done during inference.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429851478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false}},{"id":1904080122,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwNDA4MDEyMg==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904080122","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:25:52Z","performed_via_github_app":null},{"id":1904080123,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDQwODAxMjM=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904080123","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:25:52Z","performed_via_github_app":null},{"id":1904080128,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwNDA4MDEyOA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904080128","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:25:53Z","performed_via_github_app":null},{"id":1904080130,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDQwODAxMzA=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904080130","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T13:25:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429868982","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-429868982","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":429868982,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTg2ODk4Mg==","user":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"created_at":"2018-10-15T14:13:53Z","updated_at":"2018-10-15T14:13:53Z","author_association":"NONE","body":"@nirbenz Oh, thanks for reminding me that.Indeed, I write a dataloader for my  own when I test this code.In this dataloader, I didn't use padding when resizing  the image to 608x608. Maybe it's the reason that I got a different mAP and I will try again by keeping aspect ratio. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429868982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false}},{"id":1904211454,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwNDIxMTQ1NA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904211454","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T14:13:53Z","performed_via_github_app":null},{"id":1904211455,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDQyMTE0NTU=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904211455","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T14:13:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429869507","html_url":"https://github.com/ultralytics/yolov3/issues/9#issuecomment-429869507","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/9","id":429869507,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTg2OTUwNw==","user":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"created_at":"2018-10-15T14:15:10Z","updated_at":"2018-10-15T14:15:19Z","author_association":"NONE","body":"@xuzheyuan624  That would give you aspect ratio invariance, which is probably _not what you want_ for COCO. I wouldn't be surprised if modifying this will get you much closer to the target mAP :)","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/429869507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false}},{"id":1904215457,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTkwNDIxNTQ1Nw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904215457","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-10-15T14:15:19Z","performed_via_github_app":null},{"id":1904215459,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5MDQyMTU0NTk=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/1904215459","actor":{"login":"xuzheyuan624","id":32826010,"node_id":"MDQ6VXNlcjMyODI2MDEw","avatar_url":"https://avatars.githubusercontent.com/u/32826010?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzheyuan624","html_url":"https://github.com/xuzheyuan624","followers_url":"https://api.github.com/users/xuzheyuan624/followers","following_url":"https://api.github.com/users/xuzheyuan624/following{/other_user}","gists_url":"https://api.github.com/users/xuzheyuan624/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzheyuan624/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzheyuan624/subscriptions","organizations_url":"https://api.github.com/users/xuzheyuan624/orgs","repos_url":"https://api.github.com/users/xuzheyuan624/repos","events_url":"https://api.github.com/users/xuzheyuan624/events{/privacy}","received_events_url":"https://api.github.com/users/xuzheyuan624/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-10-15T14:15:19Z","performed_via_github_app":null}]