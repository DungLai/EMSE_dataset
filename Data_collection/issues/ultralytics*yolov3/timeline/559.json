[{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542095700","html_url":"https://github.com/ultralytics/yolov3/issues/559#issuecomment-542095700","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/559","id":542095700,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjA5NTcwMA==","user":{"login":"fromm1990","id":7311836,"node_id":"MDQ6VXNlcjczMTE4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/7311836?v=4","gravatar_id":"","url":"https://api.github.com/users/fromm1990","html_url":"https://github.com/fromm1990","followers_url":"https://api.github.com/users/fromm1990/followers","following_url":"https://api.github.com/users/fromm1990/following{/other_user}","gists_url":"https://api.github.com/users/fromm1990/gists{/gist_id}","starred_url":"https://api.github.com/users/fromm1990/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fromm1990/subscriptions","organizations_url":"https://api.github.com/users/fromm1990/orgs","repos_url":"https://api.github.com/users/fromm1990/repos","events_url":"https://api.github.com/users/fromm1990/events{/privacy}","received_events_url":"https://api.github.com/users/fromm1990/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T08:16:36Z","updated_at":"2019-10-15T10:11:23Z","author_association":"NONE","body":"Hi, I think a better question is \"how is the 500200 batches calculated?\".\r\n\r\nLet me explain. So doing the training you want to go through 500200 batches, every batch contains 64 images (--batch-size = 32 * --accumulate = 2) and you have 117263 images. Thereby you get the equation\r\n\r\n`500200 * batch-size * accumulate / images = epochs`\r\n`500200 * 32 * 2 / 117263 = 273 epochs`\r\n\r\nTo me, 500200 is a magic value and I'm not able to reason about it. However, if you take a look at https://github.com/AlexeyAB/darknet#how-to-train-to-detect-your-custom-objects it is explained that you should have 2000 batches for each class but not less than 4000 batches in total. Thereby, we would get the following:\r\n\r\n`2000 * classes * batch-size * accumulate / images = epochs`\r\n`2000 * 80 * 32 * 2 / 117263 = 87.325 = 88 epochs` (I would take the ceiling of the result)\r\n\r\nNow you could argue that 2000 is a magic value (and yes it is), however, it makes the total batch count grow in relation to classes as opposed to using a static value such as 500200.\r\n\r\nIn your case, 2000 * 1 < 4000 and therefore `4000 * 32 * 2 / 3000 = 85.333 = 86 epochs`.\r\n\r\nThis is the best answer I can do for you, sorry. Hope it helps anyway.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542095700/reactions","total_count":13,"+1":12,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fromm1990","id":7311836,"node_id":"MDQ6VXNlcjczMTE4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/7311836?v=4","gravatar_id":"","url":"https://api.github.com/users/fromm1990","html_url":"https://github.com/fromm1990","followers_url":"https://api.github.com/users/fromm1990/followers","following_url":"https://api.github.com/users/fromm1990/following{/other_user}","gists_url":"https://api.github.com/users/fromm1990/gists{/gist_id}","starred_url":"https://api.github.com/users/fromm1990/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fromm1990/subscriptions","organizations_url":"https://api.github.com/users/fromm1990/orgs","repos_url":"https://api.github.com/users/fromm1990/repos","events_url":"https://api.github.com/users/fromm1990/events{/privacy}","received_events_url":"https://api.github.com/users/fromm1990/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542305197","html_url":"https://github.com/ultralytics/yolov3/issues/559#issuecomment-542305197","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/559","id":542305197,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjMwNTE5Nw==","user":{"login":"oscarzasa","id":52899879,"node_id":"MDQ6VXNlcjUyODk5ODc5","avatar_url":"https://avatars.githubusercontent.com/u/52899879?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarzasa","html_url":"https://github.com/oscarzasa","followers_url":"https://api.github.com/users/oscarzasa/followers","following_url":"https://api.github.com/users/oscarzasa/following{/other_user}","gists_url":"https://api.github.com/users/oscarzasa/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarzasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarzasa/subscriptions","organizations_url":"https://api.github.com/users/oscarzasa/orgs","repos_url":"https://api.github.com/users/oscarzasa/repos","events_url":"https://api.github.com/users/oscarzasa/events{/privacy}","received_events_url":"https://api.github.com/users/oscarzasa/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T16:48:10Z","updated_at":"2019-10-15T16:48:10Z","author_association":"NONE","body":"You're right! I found your answer strongly logic. I'm gonna try to do it that way to calculate the epochs number for my data set. I think I should also train with the whole 273 epochs and compare results.\r\nThanks a lot for your help mate! Have a good one!","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542305197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oscarzasa","id":52899879,"node_id":"MDQ6VXNlcjUyODk5ODc5","avatar_url":"https://avatars.githubusercontent.com/u/52899879?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarzasa","html_url":"https://github.com/oscarzasa","followers_url":"https://api.github.com/users/oscarzasa/followers","following_url":"https://api.github.com/users/oscarzasa/following{/other_user}","gists_url":"https://api.github.com/users/oscarzasa/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarzasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarzasa/subscriptions","organizations_url":"https://api.github.com/users/oscarzasa/orgs","repos_url":"https://api.github.com/users/oscarzasa/repos","events_url":"https://api.github.com/users/oscarzasa/events{/privacy}","received_events_url":"https://api.github.com/users/oscarzasa/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542664316","html_url":"https://github.com/ultralytics/yolov3/issues/559#issuecomment-542664316","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/559","id":542664316,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjY2NDMxNg==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T11:55:38Z","updated_at":"2019-10-16T11:55:38Z","author_association":"MEMBER","body":"@oscarzasa yolov3 on coco is trained to about 500,000 optimizer updates, each with batch-size 64, so 32M images are seen during training.\r\n\r\nFor smaller datasets you probably want at least 100 epochs, and then if you see in your results.png charts that the losses are still decreasing and have not plateaued yet, train longer.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542664316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2717321384,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjcxNzMyMTM4NA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2717321384","actor":{"login":"oscarzasa","id":52899879,"node_id":"MDQ6VXNlcjUyODk5ODc5","avatar_url":"https://avatars.githubusercontent.com/u/52899879?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarzasa","html_url":"https://github.com/oscarzasa","followers_url":"https://api.github.com/users/oscarzasa/followers","following_url":"https://api.github.com/users/oscarzasa/following{/other_user}","gists_url":"https://api.github.com/users/oscarzasa/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarzasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarzasa/subscriptions","organizations_url":"https://api.github.com/users/oscarzasa/orgs","repos_url":"https://api.github.com/users/oscarzasa/repos","events_url":"https://api.github.com/users/oscarzasa/events{/privacy}","received_events_url":"https://api.github.com/users/oscarzasa/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-16T11:55:38Z","performed_via_github_app":null},{"id":2717321387,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3MTczMjEzODc=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2717321387","actor":{"login":"oscarzasa","id":52899879,"node_id":"MDQ6VXNlcjUyODk5ODc5","avatar_url":"https://avatars.githubusercontent.com/u/52899879?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarzasa","html_url":"https://github.com/oscarzasa","followers_url":"https://api.github.com/users/oscarzasa/followers","following_url":"https://api.github.com/users/oscarzasa/following{/other_user}","gists_url":"https://api.github.com/users/oscarzasa/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarzasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarzasa/subscriptions","organizations_url":"https://api.github.com/users/oscarzasa/orgs","repos_url":"https://api.github.com/users/oscarzasa/repos","events_url":"https://api.github.com/users/oscarzasa/events{/privacy}","received_events_url":"https://api.github.com/users/oscarzasa/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-16T11:55:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542664728","html_url":"https://github.com/ultralytics/yolov3/issues/559#issuecomment-542664728","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/559","id":542664728,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjY2NDcyOA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T11:56:51Z","updated_at":"2019-10-16T11:56:51Z","author_association":"MEMBER","body":"@oscarzasa also, the simplest thing to do is simply train until the validation losses begin increasing. Then set --epochs slightly less than that and retrain (to get the LR reductions).","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/542664728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2717324594,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjcxNzMyNDU5NA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2717324594","actor":{"login":"oscarzasa","id":52899879,"node_id":"MDQ6VXNlcjUyODk5ODc5","avatar_url":"https://avatars.githubusercontent.com/u/52899879?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarzasa","html_url":"https://github.com/oscarzasa","followers_url":"https://api.github.com/users/oscarzasa/followers","following_url":"https://api.github.com/users/oscarzasa/following{/other_user}","gists_url":"https://api.github.com/users/oscarzasa/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarzasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarzasa/subscriptions","organizations_url":"https://api.github.com/users/oscarzasa/orgs","repos_url":"https://api.github.com/users/oscarzasa/repos","events_url":"https://api.github.com/users/oscarzasa/events{/privacy}","received_events_url":"https://api.github.com/users/oscarzasa/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-16T11:56:51Z","performed_via_github_app":null},{"id":2717324597,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3MTczMjQ1OTc=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2717324597","actor":{"login":"oscarzasa","id":52899879,"node_id":"MDQ6VXNlcjUyODk5ODc5","avatar_url":"https://avatars.githubusercontent.com/u/52899879?v=4","gravatar_id":"","url":"https://api.github.com/users/oscarzasa","html_url":"https://github.com/oscarzasa","followers_url":"https://api.github.com/users/oscarzasa/followers","following_url":"https://api.github.com/users/oscarzasa/following{/other_user}","gists_url":"https://api.github.com/users/oscarzasa/gists{/gist_id}","starred_url":"https://api.github.com/users/oscarzasa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oscarzasa/subscriptions","organizations_url":"https://api.github.com/users/oscarzasa/orgs","repos_url":"https://api.github.com/users/oscarzasa/repos","events_url":"https://api.github.com/users/oscarzasa/events{/privacy}","received_events_url":"https://api.github.com/users/oscarzasa/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-16T11:56:51Z","performed_via_github_app":null},{"id":2744895091,"node_id":"MDExOkNsb3NlZEV2ZW50Mjc0NDg5NTA5MQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2744895091","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-10-25T17:13:25Z","state_reason":null,"performed_via_github_app":null}]