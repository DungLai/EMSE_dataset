[{"id":2057355713,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA1NzM1NTcxMw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2057355713","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-07T11:25:44Z","performed_via_github_app":null},{"id":2057355714,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNTczNTU3MTQ=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2057355714","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-07T11:25:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/451972056","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-451972056","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":451972056,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTk3MjA1Ng==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T15:28:51Z","updated_at":"2019-01-07T15:33:54Z","author_association":"MEMBER","body":"Hmm, I'm not familiar with pycocotools. Is that the official COCO mAP code? Inference is about identical between this repo and darknet (training differences abound though...), so mAP on the official weights should also be the same, though test.py computes mAP slightly differently than the official COCO code.\r\n\r\nI noticed your local version is a bit out of date with the current repo. The current test.py `conf_thres` is 0.30, which shows improved results compared to the 0.50 you are using. 0.20 works better also BTW, I'm not sure exactly the perfect sweetspot, you could tune this if you have time.\r\nhttps://github.com/ultralytics/yolov3/blob/2dd2564c4e1ed9c03c8b59a921b1c0db2124be15/test.py#L136\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/451972056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/451975134","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-451975134","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":451975134,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTk3NTEzNA==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T15:37:28Z","updated_at":"2019-01-07T16:07:04Z","author_association":"NONE","body":"Yeah, running [https://github.com/cocodataset/cocoapi](https://github.com/cocodataset/cocoapi). So I didn't touch anything.  And I've already tested `conf_thres `with 0.001, 0.005, 0.05, 0.4, 0.5. I gonna try 0.30 or 0.20 later as you suggested, but I doubt it's gonna make huge impact on the score. ","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/451975134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452006891","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-452006891","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":452006891,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjAwNjg5MQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T17:07:36Z","updated_at":"2019-01-07T17:07:36Z","author_association":"MEMBER","body":"Ah it sounds like you tried several values. I think < 0.10 is too low, and > 0.30 is too high. You should get a pretty big improvement going from 0.5 to 0.3, perhaps 10% better mAP (i.e. from 0.40 to 0.50 mAP).","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452006891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452029538","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-452029538","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":452029538,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjAyOTUzOA==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T18:16:36Z","updated_at":"2019-01-07T18:17:38Z","author_association":"NONE","body":"I modified [eval_map.py](https://gist.github.com/ydixon/8f31cd9db677c357bd2a0002083a2b85),[datasets.py](https://gist.github.com/ydixon/92da8e403cb70750f26602247e4ece77) to adapt more recent style of the repo.\r\n\r\nHere are the results. The reason why I would try `thresh` less than `0.10` is because when we build the precision-recall curve, we could include all probability thresholds, starting from 0 score.\r\n```\r\nThresh:0.001 mAP@0.5:0.388\r\nThresh:0.005 mAP@0.5:0.376\r\nThresh:0.05 mAP@0.5:0.425\r\nThresh:0.3 mAP@0.5:0.423\r\nThresh:0.4 mAP@0.5: 0.411\r\nThresh:0.5 mAP@0.5: 0.398\r\n\r\n```\r\nConsole log:\r\n```\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# python eval_map.py --weights weights/yolov3.weights --conf-thres 0.001\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.001, data_config='cfg/coco.data', img_size=416, iou_thres=0.5, n_cpus=0, nms_thres=0.45, weights='weights/yolov3.weights')\r\n\r\nUsing device: \"cuda:0\"\r\nCompute mAP...\r\nloading annotations into memory...\r\nDone (t=0.15s)\r\ncreating index...\r\nindex created!\r\nLoading and preparing results...\r\nDONE (t=3.10s)\r\ncreating index...\r\nindex created!\r\nImages: 5000\r\nRunning per image evaluation...\r\nEvaluate annotation type *bbox*\r\nDONE (t=87.17s).\r\nAccumulating evaluation results...\r\nDONE (t=8.16s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.187\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.338\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.185\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.044\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.165\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.333\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.229\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.368\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.418\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.182\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.422\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.525\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# python eval_map.py --weights weights/yolov3.weights --conf-thres 0.005\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.005, data_config='cfg/coco.data', img_size=416, iou_thres=0.5, n_cpus=0, nms_thres=0.45, weights='weights/yolov3.weights')\r\n\r\nUsing device: \"cuda:0\"\r\nCompute mAP...\r\nloading annotations into memory...\r\nDone (t=0.15s)\r\ncreating index...\r\nindex created!\r\nLoading and preparing results...\r\nDONE (t=1.45s)\r\ncreating index...\r\nindex created!\r\nImages: 5000\r\nRunning per image evaluation...\r\nEvaluate annotation type *bbox*\r\nDONE (t=55.59s).\r\nAccumulating evaluation results...\r\nDONE (t=5.09s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.206\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.376\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.202\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.051\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.184\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.356\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.239\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.371\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.407\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.172\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.406\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.516\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# python eval_map.py --weights weights/yolov3.weights --conf-thres 0.05\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.05, data_config='cfg/coco.data', img_size=416, iou_thres=0.5, n_cpus=0, nms_thres=0.45, weights='weights/yolov3.weights')\r\n\r\nUsing device: \"cuda:0\"\r\nCompute mAP...\r\nloading annotations into memory...\r\nDone (t=0.15s)\r\ncreating index...\r\nindex created!\r\nLoading and preparing results...\r\nDONE (t=0.42s)\r\ncreating index...\r\nindex created!\r\nImages: 5000\r\nRunning per image evaluation...\r\nEvaluate annotation type *bbox*\r\nDONE (t=26.84s).\r\nAccumulating evaluation results...\r\nDONE (t=2.96s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.232\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.425\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.227\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.058\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.214\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.374\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.243\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.355\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.371\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.133\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.361\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.487\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# python eval_map.py --weights weights/yolov3.weights --conf-thres 0.3\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.3, data_config='cfg/coco.data', img_size=416, iou_thres=0.5, n_cpus=0, nms_thres=0.45, weights='weights/yolov3.weights')\r\n\r\nUsing device: \"cuda:0\"\r\nCompute mAP...\r\nloading annotations into memory...\r\nDone (t=0.15s)\r\ncreating index...\r\nindex created!\r\nLoading and preparing results...\r\nDONE (t=0.16s)\r\ncreating index...\r\nindex created!\r\nImages: 5000\r\nRunning per image evaluation...\r\nEvaluate annotation type *bbox*\r\nDONE (t=16.91s).\r\nAccumulating evaluation results...\r\nDONE (t=2.35s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.238\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.423\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.241\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.058\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.217\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.363\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.230\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.312\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.315\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.089\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.292\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.438\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# python eval_map.py --weights weights/yolov3.weights --conf-thres 0.4\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.4, data_config='cfg/coco.data', img_size=416, iou_thres=0.5, n_cpus=0, nms_thres=0.45, weights='weights/yolov3.weights')\r\n\r\nUsing device: \"cuda:0\"\r\nCompute mAP...\r\nloading annotations into memory...\r\nDone (t=0.15s)\r\ncreating index...\r\nindex created!\r\nLoading and preparing results...\r\nDONE (t=0.15s)\r\ncreating index...\r\nindex created!\r\nImages: 5000\r\nRunning per image evaluation...\r\nEvaluate annotation type *bbox*\r\nDONE (t=15.75s).\r\nAccumulating evaluation results...\r\nDONE (t=2.28s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.235\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.411\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.241\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.056\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.212\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.357\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.225\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.299\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.302\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.079\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.276\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.426\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# python eval_map.py --weights weights/yolov3.weights --conf-thres 0.5\r\nNamespace(batch_size=32, cfg='cfg/yolov3.cfg', conf_thres=0.5, data_config='cfg/coco.data', img_size=416, iou_thres=0.5, n_cpus=0, nms_thres=0.45, weights='weights/yolov3.weights')\r\n\r\nUsing device: \"cuda:0\"\r\nCompute mAP...\r\nloading annotations into memory...\r\nDone (t=0.15s)\r\ncreating index...\r\nindex created!\r\nLoading and preparing results...\r\nDONE (t=0.13s)\r\ncreating index...\r\nindex created!\r\nImages: 5000\r\nRunning per image evaluation...\r\nEvaluate annotation type *bbox*\r\nDONE (t=14.42s).\r\nAccumulating evaluation results...\r\nDONE (t=2.13s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.231\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.398\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.239\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.051\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.206\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.352\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.220\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.288\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.289\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.068\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.261\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.415\r\n(fastai) root@4c990753b224:/deep_learning/ultralytics-yolov3# \r\n\r\n```","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452029538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452246174","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-452246174","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":452246174,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjI0NjE3NA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-01-08T10:16:53Z","updated_at":"2019-01-08T10:16:53Z","author_association":"MEMBER","body":"Hmmm, well then I don't understand the discrepancy. The last official COCO SDK results from test.py were by @nirbenz in https://github.com/ultralytics/yolov3/issues/2#issuecomment-434751531, showing 0.543 mAP@0.5 at 416 pixels. Nothing significant should have changed for inference in the repo since then. I'm not sure what to say, other than to try to ask @nirbenz for a PR for his SDK export code.\r\n\r\nRecent results from detect.py also look the exact same as darknet's, i.e. https://github.com/ultralytics/yolov3/issues/16#issuecomment-449569166\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452246174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2059793232,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA1OTc5MzIzMg==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2059793232","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-08T10:16:54Z","performed_via_github_app":null},{"id":2059793233,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNTk3OTMyMzM=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2059793233","actor":{"login":"nirbenz","id":4930255,"node_id":"MDQ6VXNlcjQ5MzAyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/4930255?v=4","gravatar_id":"","url":"https://api.github.com/users/nirbenz","html_url":"https://github.com/nirbenz","followers_url":"https://api.github.com/users/nirbenz/followers","following_url":"https://api.github.com/users/nirbenz/following{/other_user}","gists_url":"https://api.github.com/users/nirbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/nirbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nirbenz/subscriptions","organizations_url":"https://api.github.com/users/nirbenz/orgs","repos_url":"https://api.github.com/users/nirbenz/repos","events_url":"https://api.github.com/users/nirbenz/events{/privacy}","received_events_url":"https://api.github.com/users/nirbenz/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-08T10:16:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452255088","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-452255088","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":452255088,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjI1NTA4OA==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-01-08T10:45:30Z","updated_at":"2019-01-08T10:45:30Z","author_association":"NONE","body":"Understood. I will continue testing and see if I did something wrong with eval_map. I'll let you know if I find something.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/452255088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/466385378","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-466385378","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":466385378,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjM4NTM3OA==","user":{"login":"AndOneDay","id":39371157,"node_id":"MDQ6VXNlcjM5MzcxMTU3","avatar_url":"https://avatars.githubusercontent.com/u/39371157?v=4","gravatar_id":"","url":"https://api.github.com/users/AndOneDay","html_url":"https://github.com/AndOneDay","followers_url":"https://api.github.com/users/AndOneDay/followers","following_url":"https://api.github.com/users/AndOneDay/following{/other_user}","gists_url":"https://api.github.com/users/AndOneDay/gists{/gist_id}","starred_url":"https://api.github.com/users/AndOneDay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndOneDay/subscriptions","organizations_url":"https://api.github.com/users/AndOneDay/orgs","repos_url":"https://api.github.com/users/AndOneDay/repos","events_url":"https://api.github.com/users/AndOneDay/events{/privacy}","received_events_url":"https://api.github.com/users/AndOneDay/received_events","type":"User","site_admin":false},"created_at":"2019-02-22T12:48:11Z","updated_at":"2019-02-22T12:48:11Z","author_association":"NONE","body":"> Understood. I will continue testing and see if I did something wrong with eval_map. I'll let you know if I find something.\r\n\r\nhi，i see your repo map is 0.547 use pycocotools, can you tell me how to solve this? I met the same issue.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/466385378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AndOneDay","id":39371157,"node_id":"MDQ6VXNlcjM5MzcxMTU3","avatar_url":"https://avatars.githubusercontent.com/u/39371157?v=4","gravatar_id":"","url":"https://api.github.com/users/AndOneDay","html_url":"https://github.com/AndOneDay","followers_url":"https://api.github.com/users/AndOneDay/followers","following_url":"https://api.github.com/users/AndOneDay/following{/other_user}","gists_url":"https://api.github.com/users/AndOneDay/gists{/gist_id}","starred_url":"https://api.github.com/users/AndOneDay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndOneDay/subscriptions","organizations_url":"https://api.github.com/users/AndOneDay/orgs","repos_url":"https://api.github.com/users/AndOneDay/repos","events_url":"https://api.github.com/users/AndOneDay/events{/privacy}","received_events_url":"https://api.github.com/users/AndOneDay/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/466778447","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-466778447","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":466778447,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Njc3ODQ0Nw==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-02-24T13:45:54Z","updated_at":"2019-02-24T13:45:54Z","author_association":"MEMBER","body":"It looks like it would be beneficial for test.py to output a JSON file in the format that https://github.com/cocodataset/cocoapi wants, so we could generate mAP directly from cocoapi. I think the relevant JSON format is here. Do any of you have code ready-made for a PR that already does this?\r\nhttps://github.com/cocodataset/cocoapi/blob/master/results/instances_val2014_fakebbox100_results.json","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/466778447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467330553","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467330553","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467330553,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzMzMDU1Mw==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T07:40:50Z","updated_at":"2019-02-26T07:40:50Z","author_association":"NONE","body":"> > Understood. I will continue testing and see if I did something wrong with eval_map. I'll let you know if I find something.\r\n> \r\n> hi，i see your repo map is 0.547 use pycocotools, can you tell me how to solve this? I met the same issue.\r\n\r\nThe NMS scheme in original darknet repo is different from this repo, I suggest you can take a look at the nms code where they differs. Awhile back I did try to make those change on this repo, and I was able to push the mAP to 0.49. But then I got dragged to work on something else.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467330553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467387986","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467387986","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467387986,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzM4Nzk4Ng==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T10:38:00Z","updated_at":"2019-02-26T10:38:00Z","author_association":"NONE","body":"> It looks like it would be beneficial for test.py to output a JSON file in the format that https://github.com/cocodataset/cocoapi wants, so we could generate mAP directly from cocoapi. I think the relevant JSON format is here. Do any of you have code ready-made for a PR that already does this?\r\n> https://github.com/cocodataset/cocoapi/blob/master/results/instances_val2014_fakebbox100_results.json\r\n\r\nI could make a simple PR, the code is pretty straightforward as shown in eval_map.py above. However, you will still need to generate the ground truth json for the 5k dataset as well as any other custom dataset if you want to use COCO api properly. I don't know in which way you would want it to be included in the code.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467387986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467408654","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467408654","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467408654,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzQwODY1NA==","user":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T11:50:02Z","updated_at":"2019-02-26T11:50:02Z","author_association":"NONE","body":"@ydixon Actually, you could write the imgsIDs from \"5k.txt\" into a list and use that to filter ground truth labels in default cocoeval code. I could upload it if anyone needs.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467408654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false}},{"id":2164613182,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2NDYxMzE4Mg==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164613182","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-26T11:50:02Z","performed_via_github_app":null},{"id":2164613184,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjQ2MTMxODQ=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164613184","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-26T11:50:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467455739","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467455739","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467455739,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzQ1NTczOQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T14:19:46Z","updated_at":"2019-02-26T14:19:46Z","author_association":"MEMBER","body":"@ydixon @okanlv @AndOneDay, I updated `test.py` with a `--save-json` argument, which outputs a COCO json and evaluates it using `pycocotools`. There are a few adjustments to the data going into the json:\r\n\r\n1. The COCO json boxes are `xywh`, but `xy` **is top left corner, not centered**. Image origin is top left.\r\n2. COCO json uses the 91 original COCO _paper_ classes, so I created a function to translate between the COCO2014/17 classes and the COCO paper classes `coco80_to_coco91_class()`.\r\n\r\nCode to compile the json dict:\r\nhttps://github.com/ultralytics/yolov3/blob/eb6a4b5b84f177697693a4de4e98ca4c2539cc11/test.py#L67-L81\r\n\r\nCode to evaluate the json with pycocotools:\r\nhttps://github.com/ultralytics/yolov3/blob/eb6a4b5b84f177697693a4de4e98ca4c2539cc11/test.py#L141-L157\r\n\r\n\r\nOutput mAP is low using `yolov3.weights` though, so it may not be constructing the json correctly, or the `test.py` hyperparameters may not be properly aligned with darknet.\r\n```\r\nsudo rm -rf yolov3 && git clone https://github.com/ultralytics/yolov3\r\nsudo rm -rf cocoapi && git clone https://github.com/cocodataset/cocoapi && cd cocoapi/PythonAPI && make && cd ../.. && cp -r cocoapi/PythonAPI/pycocotools yolov3\r\ncd yolov3 && python3 test.py --save-json\r\n...\r\n       5000       5000      0.633      0.598      0.589\r\n      Image      Total          P          R        mAP\r\n...\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.271\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.460\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.285\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.106\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.295\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.415\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.236\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.317\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.320\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.123\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.343\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.492\r\n```\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467455739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2164987988,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2NDk4Nzk4OA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164987988","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-26T14:19:46Z","performed_via_github_app":null},{"id":2164987989,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjQ5ODc5ODk=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164987989","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-26T14:19:46Z","performed_via_github_app":null},{"id":2164987991,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2NDk4Nzk5MQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164987991","actor":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-26T14:19:46Z","performed_via_github_app":null},{"id":2164987992,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjQ5ODc5OTI=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164987992","actor":{"login":"okanlv","id":29547397,"node_id":"MDQ6VXNlcjI5NTQ3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/29547397?v=4","gravatar_id":"","url":"https://api.github.com/users/okanlv","html_url":"https://github.com/okanlv","followers_url":"https://api.github.com/users/okanlv/followers","following_url":"https://api.github.com/users/okanlv/following{/other_user}","gists_url":"https://api.github.com/users/okanlv/gists{/gist_id}","starred_url":"https://api.github.com/users/okanlv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okanlv/subscriptions","organizations_url":"https://api.github.com/users/okanlv/orgs","repos_url":"https://api.github.com/users/okanlv/repos","events_url":"https://api.github.com/users/okanlv/events{/privacy}","received_events_url":"https://api.github.com/users/okanlv/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-26T14:19:46Z","performed_via_github_app":null},{"id":2164987994,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2NDk4Nzk5NA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164987994","actor":{"login":"AndOneDay","id":39371157,"node_id":"MDQ6VXNlcjM5MzcxMTU3","avatar_url":"https://avatars.githubusercontent.com/u/39371157?v=4","gravatar_id":"","url":"https://api.github.com/users/AndOneDay","html_url":"https://github.com/AndOneDay","followers_url":"https://api.github.com/users/AndOneDay/followers","following_url":"https://api.github.com/users/AndOneDay/following{/other_user}","gists_url":"https://api.github.com/users/AndOneDay/gists{/gist_id}","starred_url":"https://api.github.com/users/AndOneDay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndOneDay/subscriptions","organizations_url":"https://api.github.com/users/AndOneDay/orgs","repos_url":"https://api.github.com/users/AndOneDay/repos","events_url":"https://api.github.com/users/AndOneDay/events{/privacy}","received_events_url":"https://api.github.com/users/AndOneDay/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-26T14:19:46Z","performed_via_github_app":null},{"id":2164987995,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjQ5ODc5OTU=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2164987995","actor":{"login":"AndOneDay","id":39371157,"node_id":"MDQ6VXNlcjM5MzcxMTU3","avatar_url":"https://avatars.githubusercontent.com/u/39371157?v=4","gravatar_id":"","url":"https://api.github.com/users/AndOneDay","html_url":"https://github.com/AndOneDay","followers_url":"https://api.github.com/users/AndOneDay/followers","following_url":"https://api.github.com/users/AndOneDay/following{/other_user}","gists_url":"https://api.github.com/users/AndOneDay/gists{/gist_id}","starred_url":"https://api.github.com/users/AndOneDay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndOneDay/subscriptions","organizations_url":"https://api.github.com/users/AndOneDay/orgs","repos_url":"https://api.github.com/users/AndOneDay/repos","events_url":"https://api.github.com/users/AndOneDay/events{/privacy}","received_events_url":"https://api.github.com/users/AndOneDay/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-26T14:19:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467576596","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467576596","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467576596,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzU3NjU5Ng==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T19:24:13Z","updated_at":"2019-02-26T19:25:03Z","author_association":"NONE","body":"In the nms function, comment and replace this line\r\n```\r\n# v = ((pred[:, 4] > conf_thres) & (class_prob > .4))  # TODO examine arbitrary 0.4 thres here\r\nv = (pred[:, 4] * class_prob > conf_thres)\r\n```\r\n\r\nRun the test with with 0.005 `conf_thresh`, you might want to rename it to something else I think.\r\n\r\n```\r\nDONE (t=4.46s).\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.308\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.549\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.313\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.143\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.339\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.447\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.266\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.396\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.415\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.223\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.452\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.570\r\n```\r\n\r\nPlease also let me know how is your model performing under COCO api. There's some interesting different design choices in this repo compared to the original darknet and I would really like to know how well they do under such changes.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467576596/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467583386","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467583386","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467583386,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzU4MzM4Ng==","user":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"created_at":"2019-02-26T19:41:23Z","updated_at":"2019-02-27T04:36:55Z","author_association":"NONE","body":"> @ydixon Actually, you could write the imgsIDs from \"5k.txt\" into a list and use that to filter ground truth labels in default cocoeval code. I could upload it if anyone needs.\r\n\r\nOh I thought the `cocoDt.imgIds` will automatically select the overlapped set. When it didn't work as expected, I ended up creating gt annotations itself. :D ","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467583386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false}},{"id":2165947842,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2NTk0Nzg0Mg==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2165947842","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-26T19:41:23Z","performed_via_github_app":null},{"id":2165947843,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNjU5NDc4NDM=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2165947843","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-26T19:41:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467838809","html_url":"https://github.com/ultralytics/yolov3/issues/71#issuecomment-467838809","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/71","id":467838809,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzgzODgwOQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T12:10:38Z","updated_at":"2019-02-27T12:27:01Z","author_association":"MEMBER","body":"@ydixon @okanlv @AndOneDay it worked, **pycocotools mAP is 0.550 (416) and 0.579 (608)** with `yolov3.weights` in the latest commit!! I simply applied the changes @ydixon recommended. Unfortunately performance swapped between pycocotools mAP and our own in-house mAP, which shows about 0.40 mAP now, will investigate, and also run on our scratch-trained model.\r\n\r\n```\r\nsudo rm -rf yolov3 && git clone https://github.com/ultralytics/yolov3\r\nsudo rm -rf cocoapi && git clone https://github.com/cocodataset/cocoapi && cd cocoapi/PythonAPI && make && cd ../.. && cp -r cocoapi/PythonAPI/pycocotools yolov3\r\ncd yolov3\r\n...\r\npython3 test.py --save-json --conf-thres 0.005\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.308\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.550\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.313\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.143\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.339\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.448\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.266\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.398\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.417\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.226\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.456\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.572\r\n...\r\npython3 test.py --save-json --conf-thres 0.005 --img-size 608 --batch-size 16\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.328\r\n Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.579\r\n Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.341\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.196\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.359\r\n Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.425\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.279\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.423\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.444\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.293\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.472\r\n Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.557\r\n```","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/467838809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2167786857,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE2Nzc4Njg1Nw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2167786857","actor":{"login":"ydixon","id":22487836,"node_id":"MDQ6VXNlcjIyNDg3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/22487836?v=4","gravatar_id":"","url":"https://api.github.com/users/ydixon","html_url":"https://github.com/ydixon","followers_url":"https://api.github.com/users/ydixon/followers","following_url":"https://api.github.com/users/ydixon/following{/other_user}","gists_url":"https://api.github.com/users/ydixon/gists{/gist_id}","starred_url":"https://api.github.com/users/ydixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydixon/subscriptions","organizations_url":"https://api.github.com/users/ydixon/orgs","repos_url":"https://api.github.com/users/ydixon/repos","events_url":"https://api.github.com/users/ydixon/events{/privacy}","received_events_url":"https://api.github.com/users/ydixon/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-27T12:10:38Z","performed_via_github_app":null}]