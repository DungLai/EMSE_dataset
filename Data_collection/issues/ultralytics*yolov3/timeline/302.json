[{"id":2369501347,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM2OTUwMTM0Nw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369501347","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-27T13:55:49Z","performed_via_github_app":null},{"id":2369501348,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNjk1MDEzNDg=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369501348","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-27T13:55:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496243343","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496243343","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496243343,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjI0MzM0Mw==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T15:12:37Z","updated_at":"2019-05-27T15:12:37Z","author_association":"MEMBER","body":"@lyx190 ah this is very interesting, I had not heard about GIoU before. I read the paper, and it seems like you may need to do some regularization of the new GIoU loss to balance it's magnitude with the existing losses (conf and class).\r\n\r\nIndependently of this, I'd advise you to test the default repo first so you have a proper way to test the difference, otherwise your metrics mean nothing by themselves.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496243343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2369693537,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM2OTY5MzUzNw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369693537","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:12:37Z","performed_via_github_app":null},{"id":2369693539,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNjk2OTM1Mzk=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369693539","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:12:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496245966","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496245966","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496245966,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjI0NTk2Ng==","user":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T15:22:38Z","updated_at":"2019-05-27T15:42:25Z","author_association":"NONE","body":"@glenn-jocher thank you for your reply. I have trained on my own dataset with the default repo before. The result looks good, with 88% recall and 78% precision.\r\n\r\nWhat's more, I am trying to finetune the values of  **'cls', 'conf', 'iou_t'** on the Hyperparameters. \r\n\r\nAs for my problem with the high recall(90) and low precision(20), my idea is, that it perhaps caused by the maldistribution of True and False samples during training phase. How do you think of it?\r\n\r\nEdited:\r\nAccording to my thought above, I have changed the **'iou_t'** from 0.24(before) to 0.54 now, it is training. But the result seems not good enough, to epoch 32, recall: 30%, precision: 11.3%.\r\n\r\nBesides, because of the range of the GIoU loss value is among 0 ~ 2, so I have also normalized it into 0 to 1 to fit the cls_loss and conf_loss value.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496245966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false}},{"id":2369716821,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM2OTcxNjgyMQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369716821","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:22:38Z","performed_via_github_app":null},{"id":2369716822,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNjk3MTY4MjI=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369716822","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:22:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496247873","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496247873","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496247873,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjI0Nzg3Mw==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T15:30:07Z","updated_at":"2019-05-27T15:30:07Z","author_association":"MEMBER","body":"@lyx190 ah ok. Hmm, those are very high numbers indeed you got before, and now the precision has dropped a lot. `hyp['iou_t']` in particular affects the precision-recall balance. If you increase this hyperparamter your precision will increase (at the expense of recall). The new GIoU loss needs a hyperparameter to balance it against conf. \r\n\r\nclass loss in single-class datasets is always zero (if you've configured your *.cfg for 1 class), so in your case `hyp['cls']` should not have any effect. Maybe I can try to implement a GIoU loss as well, it seems simple enough if I understand the paper correctly.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496247873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2369733421,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM2OTczMzQyMQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369733421","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:30:08Z","performed_via_github_app":null},{"id":2369733423,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNjk3MzM0MjM=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369733423","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:30:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496250850","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496250850","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496250850,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjI1MDg1MA==","user":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T15:41:54Z","updated_at":"2019-05-27T15:44:41Z","author_association":"NONE","body":"@glenn-jocher ah I forgot to tell before that **hyp['giou']** and **hyp['conf']** I set was 2.4 and 4.3. \r\nBut I am confused that would these two parameters affect the recall and precision so hard?\r\n\r\nAnd also in the training phase, if I wanna map the prediction values to the size of feature map, is it correct that:\r\nfor xy:\r\n```\r\ngrid_xy = torch.cat((gi.view(-1, 1), gj.view(-1, 1)), 1).float()\r\npi_xy = torch.sigmoid(pi[..., :2]) + grid_xy\r\n```\r\n\r\nfor wh:\r\n`pi_wh = torch.exp(pi[..., 2:4]) * (the size of corresponding anchors)`","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496250850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false}},{"id":2369758428,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM2OTc1ODQyOA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369758428","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:41:54Z","performed_via_github_app":null},{"id":2369758429,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNjk3NTg0Mjk=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2369758429","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-27T15:41:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496266993","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496266993","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496266993,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjI2Njk5Mw==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T17:01:49Z","updated_at":"2019-05-27T17:02:11Z","author_association":"MEMBER","body":"Oh, you should probably make `hyp['giou']` much smaller, maybe in the 0.1-0.5 range, since the current box regression hyperparameters are 0.2 and 0.1 for xy and wh.\r\n\r\n```python\r\nhyp = {'xy': 0.2,  # xy loss gain\r\n       'wh': 0.1,  # wh loss gain\r\n       'cls': 0.04,  # cls loss gain\r\n       'conf': 4.5,  # conf loss gain\r\n       'iou_t': 0.5,  # iou target-anchor training threshold\r\n       'lr0': 0.001,  # initial learning rate\r\n       'lrf': -4.,  # final learning rate = lr0 * (10 ** lrf)\r\n       'momentum': 0.90,  # SGD momentum\r\n       'weight_decay': 0.0005}  # optimizer weight decay\r\n```\r\n\r\nI think the IOU metric should not be affected by the units used, so the IOUs could be in grid units or pixels. Off the top of my head the equations seem right, but you should be careful because i and j may be swapped for x and y, i.e. its possible the xy gridpoints are ji and not ij.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496266993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496295727","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496295727","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496295727,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjI5NTcyNw==","user":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T20:00:01Z","updated_at":"2019-05-27T20:00:01Z","author_association":"NONE","body":"@glenn-jocher thanks for your remind. I would check again the xy gridpoints. \r\nnow I am gonna use the whole current hyperparameters to test again the giou_loss. If I have any result i will post here. ","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496295727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false}},{"id":2370093003,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM3MDA5MzAwMw==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2370093003","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-27T20:00:01Z","performed_via_github_app":null},{"id":2370093005,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNzAwOTMwMDU=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2370093005","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-27T20:00:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496724674","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496724674","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496724674,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjcyNDY3NA==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T23:17:14Z","updated_at":"2019-05-28T23:17:42Z","author_association":"MEMBER","body":"@lyx190 I started looking into a GIoU implementation. The code to export the bounding boxes is already present in models.py (for inference). This will create the boxes in units of pixels. If you want the output in grid units you simply skip the line 164 `stride` multiplication.\r\nhttps://github.com/ultralytics/yolov3/blob/9cf5ab0c9d41231148e8f6df23a4797ffa8e6d1a/models.py#L157-L167\r\n\r\nHave you had any luck with your implementation?","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496724674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2373391169,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM3MzM5MTE2OQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2373391169","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-28T23:17:14Z","performed_via_github_app":null},{"id":2373391170,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNzMzOTExNzA=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2373391170","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-28T23:17:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496725425","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496725425","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496725425,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjcyNTQyNQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T23:20:46Z","updated_at":"2019-05-28T23:22:25Z","author_association":"MEMBER","body":"@lyx190 BTW you should be extremely careful about building your own `grid_xy`, it can be very complicated, particularly in the case of rectangular inference. Our validated code which does this in `models.py` is:\r\nhttps://github.com/ultralytics/yolov3/blob/9cf5ab0c9d41231148e8f6df23a4797ffa8e6d1a/models.py#L247-L250\r\nNote that in `grid_xy` the vertical dimension (`y`) comes first, before the horizontal (`x`) dimension. This is in maintaining with typical pytorch image dimension standards.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496725425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2373396374,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM3MzM5NjM3NA==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2373396374","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-28T23:20:46Z","performed_via_github_app":null},{"id":2373396375,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNzMzOTYzNzU=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2373396375","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-28T23:20:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496727881","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496727881","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496727881,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjcyNzg4MQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T23:32:35Z","updated_at":"2019-05-28T23:33:46Z","author_association":"MEMBER","body":"@lyx190 ok, this doesn't seem too hard. I think the fastest way to try is to output models.py raw values along with inference values. The target boxes are in xywh (normalized), while the inference outputs are in xywh (pixels). So we simply multiply the target boxes by the img_size, (target-anchor matches are already made so no new work needed there), and then simply pass the matched boxes to the existing `bbox_iou()` function to get IOUs (it can handle xywh format). Then determine convex area and implement GIoU loss, maybe using about 0.3 as the start of a hyperparameter search for `hyp['giou']`.","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496727881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2373412361,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM3MzQxMjM2MQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2373412361","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-28T23:32:35Z","performed_via_github_app":null},{"id":2373412363,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNzM0MTIzNjM=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2373412363","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-28T23:32:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496910249","html_url":"https://github.com/ultralytics/yolov3/issues/302#issuecomment-496910249","issue_url":"https://api.github.com/repos/ultralytics/yolov3/issues/302","id":496910249,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjkxMDI0OQ==","user":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T12:12:30Z","updated_at":"2019-05-29T12:12:30Z","author_association":"MEMBER","body":"@lyx190 I implemented giou loss in a new giou branch:\r\nhttps://github.com/ultralytics/yolov3/tree/giou\r\n\r\nI tuned the weighting hyperparameters manually a bit to `hyp['giou'] = 0.02`. I compared two trainings on the `coco_img64.data` file that comes with the repo. I was not able to exceed the default performance on this training set, but the loss seems to work well, and the branch seems to be a good starting point for experimentation. Note that in the branch, the `xy` loss reported is the `giou` loss.\r\n![results](https://user-images.githubusercontent.com/26833433/58556221-bd1c7f00-821b-11e9-894d-58a0c2e03663.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/ultralytics/yolov3/issues/comments/496910249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"glenn-jocher","id":26833433,"node_id":"MDQ6VXNlcjI2ODMzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/26833433?v=4","gravatar_id":"","url":"https://api.github.com/users/glenn-jocher","html_url":"https://github.com/glenn-jocher","followers_url":"https://api.github.com/users/glenn-jocher/followers","following_url":"https://api.github.com/users/glenn-jocher/following{/other_user}","gists_url":"https://api.github.com/users/glenn-jocher/gists{/gist_id}","starred_url":"https://api.github.com/users/glenn-jocher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glenn-jocher/subscriptions","organizations_url":"https://api.github.com/users/glenn-jocher/orgs","repos_url":"https://api.github.com/users/glenn-jocher/repos","events_url":"https://api.github.com/users/glenn-jocher/events{/privacy}","received_events_url":"https://api.github.com/users/glenn-jocher/received_events","type":"User","site_admin":false}},{"id":2374885595,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjM3NDg4NTU5NQ==","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2374885595","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-29T12:12:30Z","performed_via_github_app":null},{"id":2374885596,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzNzQ4ODU1OTY=","url":"https://api.github.com/repos/ultralytics/yolov3/issues/events/2374885596","actor":{"login":"lyx190","id":45397836,"node_id":"MDQ6VXNlcjQ1Mzk3ODM2","avatar_url":"https://avatars.githubusercontent.com/u/45397836?v=4","gravatar_id":"","url":"https://api.github.com/users/lyx190","html_url":"https://github.com/lyx190","followers_url":"https://api.github.com/users/lyx190/followers","following_url":"https://api.github.com/users/lyx190/following{/other_user}","gists_url":"https://api.github.com/users/lyx190/gists{/gist_id}","starred_url":"https://api.github.com/users/lyx190/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyx190/subscriptions","organizations_url":"https://api.github.com/users/lyx190/orgs","repos_url":"https://api.github.com/users/lyx190/repos","events_url":"https://api.github.com/users/lyx190/events{/privacy}","received_events_url":"https://api.github.com/users/lyx190/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-29T12:12:30Z","performed_via_github_app":null}]