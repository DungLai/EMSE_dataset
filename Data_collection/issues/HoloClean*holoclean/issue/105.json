{"url":"https://api.github.com/repos/HoloClean/holoclean/issues/105","repository_url":"https://api.github.com/repos/HoloClean/holoclean","labels_url":"https://api.github.com/repos/HoloClean/holoclean/issues/105/labels{/name}","comments_url":"https://api.github.com/repos/HoloClean/holoclean/issues/105/comments","events_url":"https://api.github.com/repos/HoloClean/holoclean/issues/105/events","html_url":"https://github.com/HoloClean/holoclean/issues/105","id":644881371,"node_id":"MDU6SXNzdWU2NDQ4ODEzNzE=","number":105,"title":"Table cell_distr is either empty or does not exist","user":{"login":"arotem3","id":40644295,"node_id":"MDQ6VXNlcjQwNjQ0Mjk1","avatar_url":"https://avatars.githubusercontent.com/u/40644295?v=4","gravatar_id":"","url":"https://api.github.com/users/arotem3","html_url":"https://github.com/arotem3","followers_url":"https://api.github.com/users/arotem3/followers","following_url":"https://api.github.com/users/arotem3/following{/other_user}","gists_url":"https://api.github.com/users/arotem3/gists{/gist_id}","starred_url":"https://api.github.com/users/arotem3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arotem3/subscriptions","organizations_url":"https://api.github.com/users/arotem3/orgs","repos_url":"https://api.github.com/users/arotem3/repos","events_url":"https://api.github.com/users/arotem3/events{/privacy}","received_events_url":"https://api.github.com/users/arotem3/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-06-24T19:39:03Z","updated_at":"2020-06-26T00:19:15Z","closed_at":"2020-06-26T00:19:14Z","author_association":"NONE","active_lock_reason":null,"body":"While running the example, I keep running into two alternating errors:\r\nAfter holoclean is done training the repair model, I run into the error:\r\n```\r\n[ERROR] - generating aux_table cell_distr\r\nTraceback (most recent call last):\r\n  File \"/home/amit/Documents/holoclean_project/randomDB_sim.py\", line 55, in <module>\r\n    hc.repair_errors(featurizers)\r\n  File \"holoclean_master/holoclean.py\", line 327, in repair_errors\r\n    status, infer_time = self.repair_engine.infer_repairs()\r\n  File \"holoclean_master/repair/repair.py\", line 49, in infer_repairs\r\n    self.ds.generate_aux_table(AuxTables.cell_distr, distr_df, store=True, index_attrs=['_vid_'])\r\n  File \"holoclean_master/dataset/dataset.py\", line 150, in generate_aux_table\r\n    self.aux_table[aux_table].store_to_db(self.engine.engine)\r\n  File \"holoclean_master/dataset/table.py\", line 75, in store_to_db\r\n    self.df.to_sql(self.name, db_conn, if_exists=if_exists, index=index, index_label=index_label)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/pandas/core/generic.py\", line 2663, in to_sql\r\n    method=method,\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/pandas/io/sql.py\", line 521, in to_sql\r\n    method=method,\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/pandas/io/sql.py\", line 1316, in to_sql\r\n    table.create()\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/pandas/io/sql.py\", line 648, in create\r\n    self.pd_sql.drop_table(self.name, self.schema)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/pandas/io/sql.py\", line 1363, in drop_table\r\n    self.meta.reflect(only=[table_name], schema=schema)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/sql/schema.py\", line 4159, in reflect\r\n    Table(name, self, **reflect_opts)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/sql/schema.py\", line 469, in __new__\r\n    metadata._remove_table(name, schema)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py\", line 67, in __exit__\r\n    compat.reraise(exc_type, exc_value, exc_tb)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/util/compat.py\", line 277, in reraise\r\n    raise value\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/sql/schema.py\", line 464, in __new__\r\n    table._init(name, metadata, *args, **kw)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/sql/schema.py\", line 552, in _init\r\n    metadata, autoload_with, include_columns, _extend_on=_extend_on\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/sql/schema.py\", line 574, in _autoload\r\n    _extend_on=_extend_on,\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/engine/base.py\", line 1596, in run_callable\r\n    return callable_(self, *args, **kwargs)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/engine/default.py\", line 415, in reflecttable\r\n    table, include_columns, exclude_columns, **opts\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/sqlalchemy/engine/reflection.py\", line 639, in reflecttable\r\n    raise exc.NoSuchTableError(table.name)\r\nsqlalchemy.exc.NoSuchTableError: cell_distr\r\n```\r\n\r\n\r\nOne solution I tried is to `drop holo; create holo;` Directly after training the repair model, this leads to:\r\n```\r\n[ERROR] - generating aux_table cell_distr\r\nTraceback (most recent call last):\r\n  File \"/home/amit/Documents/holoclean_project/randomDB_sim.py\", line 55, in <module>\r\n    hc.repair_errors(featurizers)\r\n  File \"holoclean_master/holoclean.py\", line 327, in repair_errors\r\n    status, infer_time = self.repair_engine.infer_repairs()\r\n  File \"holoclean_master/repair/repair.py\", line 49, in infer_repairs\r\n    self.ds.generate_aux_table(AuxTables.cell_distr, distr_df, store=True, index_attrs=['_vid_'])\r\n  File \"holoclean_master/dataset/dataset.py\", line 152, in generate_aux_table\r\n    self.aux_table[aux_table].create_df_index(index_attrs)\r\n  File \"holoclean_master/dataset/table.py\", line 90, in create_df_index\r\n    self.df.set_index(attr_list, inplace=True)\r\n  File \"/home/amit/anaconda3/envs/hc36/lib/python3.6/site-packages/pandas/core/frame.py\", line 4303, in set_index\r\n    raise KeyError(f\"None of {missing} are in the columns\")\r\nKeyError: \"None of ['_vid_'] are in the columns\"\r\n```\r\nplacing a print statement inside `create_df_index` it is clear that `self.df` is empty, so it is difficult to say exactly what is happening.","closed_by":{"login":"arotem3","id":40644295,"node_id":"MDQ6VXNlcjQwNjQ0Mjk1","avatar_url":"https://avatars.githubusercontent.com/u/40644295?v=4","gravatar_id":"","url":"https://api.github.com/users/arotem3","html_url":"https://github.com/arotem3","followers_url":"https://api.github.com/users/arotem3/followers","following_url":"https://api.github.com/users/arotem3/following{/other_user}","gists_url":"https://api.github.com/users/arotem3/gists{/gist_id}","starred_url":"https://api.github.com/users/arotem3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arotem3/subscriptions","organizations_url":"https://api.github.com/users/arotem3/orgs","repos_url":"https://api.github.com/users/arotem3/repos","events_url":"https://api.github.com/users/arotem3/events{/privacy}","received_events_url":"https://api.github.com/users/arotem3/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/HoloClean/holoclean/issues/105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/HoloClean/holoclean/issues/105/timeline","performed_via_github_app":null,"state_reason":"completed"}