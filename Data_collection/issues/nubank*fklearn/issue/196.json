{"url":"https://api.github.com/repos/nubank/fklearn/issues/196","repository_url":"https://api.github.com/repos/nubank/fklearn","labels_url":"https://api.github.com/repos/nubank/fklearn/issues/196/labels{/name}","comments_url":"https://api.github.com/repos/nubank/fklearn/issues/196/comments","events_url":"https://api.github.com/repos/nubank/fklearn/issues/196/events","html_url":"https://github.com/nubank/fklearn/issues/196","id":1232682205,"node_id":"I_kwDOCk64ls5JeTzd","number":196,"title":"Improve fklearn build process for local testing/development","user":{"login":"erickisos","id":14081477,"node_id":"MDQ6VXNlcjE0MDgxNDc3","avatar_url":"https://avatars.githubusercontent.com/u/14081477?v=4","gravatar_id":"","url":"https://api.github.com/users/erickisos","html_url":"https://github.com/erickisos","followers_url":"https://api.github.com/users/erickisos/followers","following_url":"https://api.github.com/users/erickisos/following{/other_user}","gists_url":"https://api.github.com/users/erickisos/gists{/gist_id}","starred_url":"https://api.github.com/users/erickisos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erickisos/subscriptions","organizations_url":"https://api.github.com/users/erickisos/orgs","repos_url":"https://api.github.com/users/erickisos/repos","events_url":"https://api.github.com/users/erickisos/events{/privacy}","received_events_url":"https://api.github.com/users/erickisos/received_events","type":"User","site_admin":false},"labels":[{"id":1251232928,"node_id":"MDU6TGFiZWwxMjUxMjMyOTI4","url":"https://api.github.com/repos/nubank/fklearn/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1251232930,"node_id":"MDU6TGFiZWwxMjUxMjMyOTMw","url":"https://api.github.com/repos/nubank/fklearn/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1251232941,"node_id":"MDU6TGFiZWwxMjUxMjMyOTQx","url":"https://api.github.com/repos/nubank/fklearn/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-05-11T13:54:19Z","updated_at":"2022-05-12T05:43:55Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## My Computer\r\n\r\n- Macbook Pro M1\r\n- macOS Big Sur 11.6.3\r\n- conda 4.11.0\r\n- python 3.9.12\r\n\r\n## Context\r\n\r\nHey folks, recently I tried to install fklearn on my personal computer and realized that the main installation is not pretty straightforward.\r\nI will add my detailed steps but it would be great to know wdyt about migrating some libraries in order to improve this process, the main error that I'm still getting is this one:\r\n\r\n```\r\nerror: legacy-install-failure\r\n```\r\n\r\n### Instructions\r\n\r\n- Clone the repository on a clean machine\r\n- Install any conda environment, that just has access to conda repos and pypi.\r\n- `conda create -n fklearn python=3.9`\r\n- `conda activate`\r\n- `pip install -e \".[all]\"` (to start working with this repo).\r\n\r\nAt the last point I started having the error `legacy-install-failure` with numpy, so I tried to install first numpy using conda with:\r\n\r\n```shell\r\nconda install numpy\r\n```\r\n\r\nFortunately, `conda` installed all the missing dependencies (like the BLAS libraries), however, when I tried to re-run the `pip install -e \".[all]\"` I received the exact same error with `numpy`, so after reviewing the content of the trace, I realized that the version installed by conda was different, conda installed `numpy==1.22` (which seems to be valid according to the requirements file) but the main pip process was trying to install `numpy==1.18`Â and it seems like, that version didn't include the `bdist/wheels` needed, or was unable to build'em because some of the other libraries (I'm not sure about which ones) are using a `pyproject.toml` definition now.\r\n\r\nSo the next step was to retry installing that specific version using conda: `conda install 'numpy=1.18'`, which helped me avoid the problem with numpy.\r\nIn the next iteration I had the same error with scikit-learn so the process was the same, check if the expected version was in the [conda-forge repo](https://conda.anaconda.org/conda-forge/osx-arm64/) and after that just run the install command.\r\n\r\n### Expected behavior\r\n\r\nIt would be great if at some point we are able to just run a `pip install -e \".[all]\"' to start testing locally the library, maybe this is just a problem related to my computer, but I want to be sure that this is not a problem for someone else.\r\nMaybe the M1 chip is not supported yet, and maybe we are in the process to start supporting that chip (without using rosetta?)\r\n\r\n### Possible solutions\r\n\r\nAs I saw, it seems like there are some libraries that could be installed without any problem directly with conda, so in my understanding, it means that we can find a way to do that directly without having to deal with extra iterations for the compiled packages that we use.\r\n\r\nThanks in advance!","closed_by":null,"reactions":{"url":"https://api.github.com/repos/nubank/fklearn/issues/196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nubank/fklearn/issues/196/timeline","performed_via_github_app":null,"state_reason":null}