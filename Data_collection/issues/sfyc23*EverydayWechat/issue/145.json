{"url":"https://api.github.com/repos/sfyc23/EverydayWechat/issues/145","repository_url":"https://api.github.com/repos/sfyc23/EverydayWechat","labels_url":"https://api.github.com/repos/sfyc23/EverydayWechat/issues/145/labels{/name}","comments_url":"https://api.github.com/repos/sfyc23/EverydayWechat/issues/145/comments","events_url":"https://api.github.com/repos/sfyc23/EverydayWechat/issues/145/events","html_url":"https://github.com/sfyc23/EverydayWechat/issues/145","id":461815595,"node_id":"MDU6SXNzdWU0NjE4MTU1OTU=","number":145,"title":"linux上运行时报错","user":{"login":"1139195320","id":20514071,"node_id":"MDQ6VXNlcjIwNTE0MDcx","avatar_url":"https://avatars.githubusercontent.com/u/20514071?v=4","gravatar_id":"","url":"https://api.github.com/users/1139195320","html_url":"https://github.com/1139195320","followers_url":"https://api.github.com/users/1139195320/followers","following_url":"https://api.github.com/users/1139195320/following{/other_user}","gists_url":"https://api.github.com/users/1139195320/gists{/gist_id}","starred_url":"https://api.github.com/users/1139195320/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1139195320/subscriptions","organizations_url":"https://api.github.com/users/1139195320/orgs","repos_url":"https://api.github.com/users/1139195320/repos","events_url":"https://api.github.com/users/1139195320/events{/privacy}","received_events_url":"https://api.github.com/users/1139195320/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-06-28T01:32:32Z","updated_at":"2019-06-30T10:19:34Z","closed_at":"2019-06-30T10:19:34Z","author_association":"NONE","active_lock_reason":null,"body":"源代码是通过os.environ.get('MODE') == 'server'来判断是否是服务器：\r\nhttps://github.com/sfyc23/EverydayWechat/blob/master/everyday_wechat/main.py\r\n```\r\nif os.environ.get('MODE') == 'server':\r\n\t# 命令行显示登录二维码。\r\n\titchat.auto_login(enableCmdQR=2, hotReload=hotReload, loginCallback=loginCallback,\r\n\t\t\t\t\t  exitCallback=exitCallback)\r\n\titchat.run(blockThread=True)\r\nelse:\r\n\titchat.auto_login(hotReload=hotReload, loginCallback=loginCallback, exitCallback=exitCallback)\r\n\titchat.run(blockThread=True)\r\nif _online():\r\n\tprint('登录成功')\r\n\treturn True\r\n```\r\n\r\n但是经测试os.environ.get('MODE')得出的是None，用的windows7和Centos7.\r\n将这个判断条件改为如下两个平台均测试通过。\r\nplatform.system() == 'Linux'\r\n\r\n希望master查看下\r\n","closed_by":{"login":"sfyc23","id":7067207,"node_id":"MDQ6VXNlcjcwNjcyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/7067207?v=4","gravatar_id":"","url":"https://api.github.com/users/sfyc23","html_url":"https://github.com/sfyc23","followers_url":"https://api.github.com/users/sfyc23/followers","following_url":"https://api.github.com/users/sfyc23/following{/other_user}","gists_url":"https://api.github.com/users/sfyc23/gists{/gist_id}","starred_url":"https://api.github.com/users/sfyc23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfyc23/subscriptions","organizations_url":"https://api.github.com/users/sfyc23/orgs","repos_url":"https://api.github.com/users/sfyc23/repos","events_url":"https://api.github.com/users/sfyc23/events{/privacy}","received_events_url":"https://api.github.com/users/sfyc23/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sfyc23/EverydayWechat/issues/145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sfyc23/EverydayWechat/issues/145/timeline","performed_via_github_app":null,"state_reason":"completed"}