{"url":"https://api.github.com/repos/autonomio/talos/issues/487","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/487/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/487/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/487/events","html_url":"https://github.com/autonomio/talos/issues/487","id":605901781,"node_id":"MDU6SXNzdWU2MDU5MDE3ODE=","number":487,"title":"ValueError: Classification metrics can't handle a mix of unknown and binary targets","user":{"login":"WilfriedOdi","id":43058554,"node_id":"MDQ6VXNlcjQzMDU4NTU0","avatar_url":"https://avatars.githubusercontent.com/u/43058554?v=4","gravatar_id":"","url":"https://api.github.com/users/WilfriedOdi","html_url":"https://github.com/WilfriedOdi","followers_url":"https://api.github.com/users/WilfriedOdi/followers","following_url":"https://api.github.com/users/WilfriedOdi/following{/other_user}","gists_url":"https://api.github.com/users/WilfriedOdi/gists{/gist_id}","starred_url":"https://api.github.com/users/WilfriedOdi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WilfriedOdi/subscriptions","organizations_url":"https://api.github.com/users/WilfriedOdi/orgs","repos_url":"https://api.github.com/users/WilfriedOdi/repos","events_url":"https://api.github.com/users/WilfriedOdi/events{/privacy}","received_events_url":"https://api.github.com/users/WilfriedOdi/received_events","type":"User","site_admin":false},"labels":[{"id":1040763409,"node_id":"MDU6TGFiZWwxMDQwNzYzNDA5","url":"https://api.github.com/repos/autonomio/talos/labels/user%20support","name":"user support","color":"59db8b","default":false,"description":"nothing is wrong with Talos"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-23T21:59:38Z","updated_at":"2020-11-09T17:12:07Z","closed_at":"2020-11-09T17:12:07Z","author_association":"NONE","active_lock_reason":null,"body":"Thanks a lot for suggesting a feature to Talos. Please take a moment to go through the below checklist to provide context in a way that makes it easy to take your request forward.\r\n\r\ndef qsar_oral_toxicity():\r\n    tubes_df = pd.read_csv(\"qsar_oral_toxicity/qsar_oral_toxicity.csv\", sep=';', decimal=',')\r\n    tubes_df_data = tubes_df.iloc[:, :5]\r\n    coords_test_df = tubes_df.iloc[:, 5:]\r\n\r\n    tubes_arr = tubes_df_data.values\r\n    coords_test = coords_test_df.values\r\n\r\n    coord_names = coords_test_df.columns.values.tolist()\r\n\r\n    # масштабируем все спектры к единичной дисперсии\r\n    tubes_arr = preprocessing.scale(tubes_arr)\r\n\r\n    # словари для реальных и предсказанных значений\r\n    y_test_knn = {}\r\n    y_test_mlpr = {}\r\n    y_real = {}\r\n\r\n    knn_params = {\r\n        \"n_neighbors\": [x for x in range(15, 40, 5)],\r\n        \"weights\": [\"uniform\", \"distance\"],\r\n        \"algorithm\": [\"ball_tree\", \"kd_tree\"]\r\n    }\r\n\r\n    mlpr_params = { \"hidden_layer_sizes\": [\r\n            (120, 60), (50, 40), (60)],\r\n            \"alpha\": [0.0001, 0.001, 0.01],\r\n            \"learning_rate_init\": [0.005, 0.001, 0.01]}\r\n\r\n    for i in range(coords_test.shape[1]):\r\n        X_train, X_test, y_train, y_test = train_test_split(tubes_arr, coords_test[:, i], test_size=0.25)\r\n\r\n        X_test = X_test.astype('int')\r\n        y_train = y_train.astype('int')\r\n\r\n        knn = KNeighborsClassifier()\r\n        knn_grid = GridSearchCV(knn, knn_params, cv=3, n_jobs=-1, verbose=10)\r\n        knn_grid.fit(X_train, y_train)\r\n\r\n        y_pred_knn = knn_grid.predict(X_test)\r\n\r\n        acc_svc = metrics.accuracy_score(y_test, y_pred_knn)\r\n        prec_svc = metrics.precision_score(y_test, y_pred_knn)\r\n        rec_svc = metrics.recall_score(y_test, y_pred_knn)\r\n\r\n\r\n","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/487/timeline","performed_via_github_app":null,"state_reason":"completed"}