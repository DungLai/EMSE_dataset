{"url":"https://api.github.com/repos/autonomio/talos/issues/358","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/358/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/358/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/358/events","html_url":"https://github.com/autonomio/talos/issues/358","id":475108832,"node_id":"MDU6SXNzdWU0NzUxMDg4MzI=","number":358,"title":"Correlation reduction fixes and improvements in >=0.6.2","user":{"login":"vendetta1987","id":1315601,"node_id":"MDQ6VXNlcjEzMTU2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1315601?v=4","gravatar_id":"","url":"https://api.github.com/users/vendetta1987","html_url":"https://github.com/vendetta1987","followers_url":"https://api.github.com/users/vendetta1987/followers","following_url":"https://api.github.com/users/vendetta1987/following{/other_user}","gists_url":"https://api.github.com/users/vendetta1987/gists{/gist_id}","starred_url":"https://api.github.com/users/vendetta1987/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vendetta1987/subscriptions","organizations_url":"https://api.github.com/users/vendetta1987/orgs","repos_url":"https://api.github.com/users/vendetta1987/repos","events_url":"https://api.github.com/users/vendetta1987/events{/privacy}","received_events_url":"https://api.github.com/users/vendetta1987/received_events","type":"User","site_admin":false},"labels":[{"id":923120513,"node_id":"MDU6TGFiZWw5MjMxMjA1MTM=","url":"https://api.github.com/repos/autonomio/talos/labels/priority:%20MEDIUM","name":"priority: MEDIUM","color":"FFA500","default":false,"description":"medium priority"}],"state":"closed","locked":false,"assignee":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"assignees":[{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/autonomio/talos/milestones/11","html_url":"https://github.com/autonomio/talos/milestone/11","labels_url":"https://api.github.com/repos/autonomio/talos/milestones/11/labels","id":4527711,"node_id":"MDk6TWlsZXN0b25lNDUyNzcxMQ==","number":11,"title":"v.0.6.2","description":"This update will consist of fixes and upgrades to the v0.6 strain Talos, but the main focus will be on publishing the new comprehensive and up-to-date documentation on a new docs platform (docsify).","creator":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"open_issues":1,"closed_issues":11,"state":"closed","created_at":"2019-07-28T18:31:32Z","updated_at":"2020-01-26T11:26:30Z","due_on":"2019-08-03T07:00:00Z","closed_at":"2019-08-03T16:37:58Z"},"comments":4,"created_at":"2019-07-31T12:16:30Z","updated_at":"2019-08-03T16:25:26Z","closed_at":"2019-08-03T16:25:25Z","author_association":"NONE","active_lock_reason":null,"body":"After updating to the daily-dev branch recently (see #297) I noticed my parameter space doesn't get reduced during the experiment. Debugging the code I found some problems with the new version of `reducers/correlation.py`. Even though the development is not finished I wanted to point them out in hopes you'll revisit these parts.\r\n\r\n[L29](https://github.com/autonomio/talos/blob/c2c233cbf8310c56a42ab676ee0a82b91c2a4ccb/talos/reducers/correlation.py#L29) is meant to remove the actual reduction metric chosen from the correlation. It works OK but the same functionality breaks later on in [L54](https://github.com/autonomio/talos/blob/c2c233cbf8310c56a42ab676ee0a82b91c2a4ccb/talos/reducers/correlation.py#L54) removing the first actual result instead of the metric entry. I'd propose to use\r\n`corr = corr.drop(self.reduction_metric).apply(abs)`\r\ninstead of\r\n`corr = corr.apply(abs)[1:]`\r\n\r\nMy model tends to run into OOM problems so I provide a mocked up history object to Talos in that case. While doing so makes sure the optimization continues it also creates some NaN values in the correlations. Those could be checked in [L33](https://github.com/autonomio/talos/blob/c2c233cbf8310c56a42ab676ee0a82b91c2a4ccb/talos/reducers/correlation.py#L33) like\r\n`if pd.isna(corr.values[0]) or (corr.values[0] <= self.reduction_threshold is self.minimize_loss):`\r\n\r\nI tried wrapping my head around the second correlation run in the method but can't seem to fix it easily. [L61](https://github.com/autonomio/talos/blob/c2c233cbf8310c56a42ab676ee0a82b91c2a4ccb/talos/reducers/correlation.py#L61) should probably not overwrite the found label. Also the return statement in [L68](https://github.com/autonomio/talos/blob/c2c233cbf8310c56a42ab676ee0a82b91c2a4ccb/talos/reducers/correlation.py#L68) seems to provide the values in reverse compared to [L64](https://github.com/autonomio/talos/blob/c2c233cbf8310c56a42ab676ee0a82b91c2a4ccb/talos/reducers/reduce_run.py#L64) in `reduce_run.py`.","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/358/timeline","performed_via_github_app":null,"state_reason":"completed"}