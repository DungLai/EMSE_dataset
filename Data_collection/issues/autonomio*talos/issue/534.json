{"url":"https://api.github.com/repos/autonomio/talos/issues/534","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/534/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/534/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/534/events","html_url":"https://github.com/autonomio/talos/issues/534","id":794688531,"node_id":"MDU6SXNzdWU3OTQ2ODg1MzE=","number":534,"title":"talos for a model with custom layer","user":{"login":"ruhollah2","id":6391913,"node_id":"MDQ6VXNlcjYzOTE5MTM=","avatar_url":"https://avatars.githubusercontent.com/u/6391913?v=4","gravatar_id":"","url":"https://api.github.com/users/ruhollah2","html_url":"https://github.com/ruhollah2","followers_url":"https://api.github.com/users/ruhollah2/followers","following_url":"https://api.github.com/users/ruhollah2/following{/other_user}","gists_url":"https://api.github.com/users/ruhollah2/gists{/gist_id}","starred_url":"https://api.github.com/users/ruhollah2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruhollah2/subscriptions","organizations_url":"https://api.github.com/users/ruhollah2/orgs","repos_url":"https://api.github.com/users/ruhollah2/repos","events_url":"https://api.github.com/users/ruhollah2/events{/privacy}","received_events_url":"https://api.github.com/users/ruhollah2/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-01-27T01:27:33Z","updated_at":"2021-05-27T09:49:51Z","closed_at":"2021-05-27T09:49:51Z","author_association":"NONE","active_lock_reason":null,"body":"- [x ] My Python version is 3.5 or higher\r\n- [ x] I have searched through the issues [Issues](https://github.com/autonomio/talos/issues) for a duplicate\r\n- [ x] I've tested that my Keras model works as a stand-alone\r\n\r\n#### 2) Include the output of:\r\n\r\n`talos.__version__`\r\n1.0.0\r\n\r\n#### 3) Explain clearly what you expect to happen\r\nI have the same problem as [here](https://github.com/autonomio/talos/issues/421). \r\n\r\n\r\n*A description of what you tried .*\r\nIn the following, I tried to access the best model via a dictionary (as suggested [here](https://github.com/autonomio/talos/issues/421) by the poster of the same issue):\r\n\r\nFirst, I ran `Analyze` with the `scan_object` to find the round w/ best result using `rounds2high`. Say we store the best model number into `model_no`:\r\n\r\n```\r\nanalyze_object_rh = talos.Analyze(scan_object)\r\nmodel_no = analyze_object_rh.rounds2high('out.reg.vae_func_correlation_coefficient')# get the round with the best result\r\n\r\n```\r\nThen I tried the following, but it failed:\r\n\r\n`ruh_best_model = talos.utils.best_model.activate_model({scan_object,{'myCsutomLayer': myCsutomLayer}} , model_no)`\r\ndue to `sytaxterr`:\r\n\r\n`SyntaxError: positional argument follows keyword argument`\r\n\r\n\r\n\r\nSo, then I tired another workaround suggested by the talos developer [here](https://github.com/autonomio/talos/blob/master/examples/Recover%20Best%20Models%20from%20Experiment%20Log.ipynb):\r\n\r\n```\r\nfrom talos.utils.recover_best_model import recover_best_model\r\nresults, models = recover_best_model( x_train = x_train\r\n                                     , y_train = y_train\r\n                                     , x_val= x_val\r\n                                     , y_val= y_val \r\n                                     , experiment_log = 'ruh_custom_vae_talos/012621170617.csv'\r\n                                     , input_model = ruh_func_customvae_maker\r\n                                     , n_models = 5\r\n                                     , task = 'continuous'\r\n                                    )\r\n```\r\n  It also did fail with the following err:\r\n\r\n`KeyError: 'val_acc'`\r\n\r\n(after all, how should I know which model is the best to choose the corresponding `.csv` file in the ?! Here I randomly chose `012621170617.csv` just to see if this workaround works, but it failed anyways)\r\n\r\n\r\nWell, here is my `model.compile()` (it is a multi-task learning model)\r\n```\r\n my_model_custom_vae.compile( loss ={'decoder.Model': 'mse' , 'out.reg.vae':'mse'}\r\n                                ,loss_weights = {'out.reg.vae': input_params['loss_wieghts_layer_outReg'], 'decoder.Model':input_params['loss_wieghts_layer_decoderModel']} \r\n                                ,optimizer = myoptimizer_adam\r\n                                , metrics= {'out.reg.vae':[func_correlation_coefficient], 'decoder.Model':[func_correlation_coefficient]}\r\n                               )\r\n\r\n```\r\n\r\n\r\n","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/534/timeline","performed_via_github_app":null,"state_reason":"completed"}