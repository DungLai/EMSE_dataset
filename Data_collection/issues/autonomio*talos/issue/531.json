{"url":"https://api.github.com/repos/autonomio/talos/issues/531","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/531/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/531/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/531/events","html_url":"https://github.com/autonomio/talos/issues/531","id":775048071,"node_id":"MDU6SXNzdWU3NzUwNDgwNzE=","number":531,"title":"ValueError: The `kernel_size` argument must be a tuple of 1 integers when use params for kernel size","user":{"login":"Yosafat1997","id":26406173,"node_id":"MDQ6VXNlcjI2NDA2MTcz","avatar_url":"https://avatars.githubusercontent.com/u/26406173?v=4","gravatar_id":"","url":"https://api.github.com/users/Yosafat1997","html_url":"https://github.com/Yosafat1997","followers_url":"https://api.github.com/users/Yosafat1997/followers","following_url":"https://api.github.com/users/Yosafat1997/following{/other_user}","gists_url":"https://api.github.com/users/Yosafat1997/gists{/gist_id}","starred_url":"https://api.github.com/users/Yosafat1997/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yosafat1997/subscriptions","organizations_url":"https://api.github.com/users/Yosafat1997/orgs","repos_url":"https://api.github.com/users/Yosafat1997/repos","events_url":"https://api.github.com/users/Yosafat1997/events{/privacy}","received_events_url":"https://api.github.com/users/Yosafat1997/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-12-27T14:30:50Z","updated_at":"2022-01-29T18:53:58Z","closed_at":"2022-01-29T18:53:58Z","author_association":"NONE","active_lock_reason":null,"body":"First off, make sure to check your [support options](https://github.com/autonomio/talos#-how-to-get-support).\r\n\r\nThe preferred way to resolve usage related matters is through the [docs](https://autonomio.github.io/talos/#/) which are maintained up-to-date with the latest version of Talos.\r\n\r\nIf you do end up asking for support in a new issue, make sure to follow the below steps carefully.\r\n\r\n#### 1) Confirm the below\r\n\r\n- [X] I have looked for an answer in the [Docs](https://autonomio.github.io/talos)\r\n- [X] My Python version is 3.5 or higher\r\n- [X] I have searched through the issues [Issues](https://github.com/autonomio/talos/issues) for a duplicate\r\n- [X] I've tested that my Keras model works as a stand-alone\r\n\r\n#### 2) Include the output of:\r\n\r\n`talos.__version__`\r\n\r\n1.0.0\r\n\r\n#### 3) Explain clearly what you are trying to achieve\r\nDear Developers,\r\nI want to use Talos with my pre-defined validation set. Let say i have three dataframe which i call Train, Test and Validation. I want to use my Validation dataset as validation for my model beside let talos make it for me.\r\n\r\n#### 4) Explain what you have already tried\r\nI have try to use Talos in a separate function and run it. It gives me error: ```ValueError: The `kernel_size` argument must be a tuple of 1 integers. Received: [3, 5, 7]```. I use Conv1D which is differ and not found any case with this in Talos Docs.\r\n\r\n#### 5) Provide a code-complete reference\r\nThis is how my params are made:\r\n```\r\ndropout_rate = [0.2, 0.5, 0.7]\r\nfeature_len = [64,128,256]\r\nwconv = [3,5,7]\r\nepc = [100,200,500]\r\npara = {'dropout_rate':dropout_rate,'feature_len':feature_len,'wconv':wconv,'epc':epc}\r\n```\r\nThis is how i make the model:\r\n```\r\ndef GetModel(trainX,trainY,validX,validY,params):\r\n   def GetModel(trainX,trainY,x_val,y_val,params):\r\n    model = tf.keras.Sequential([\r\n       Conv1D(filters=params['feature_len'],kernel_size=params['wconv'],activation='relu'),\r\n        Dropout(params['dropout_rate']),\r\n        MaxPooling1D(pool_size=2,strides=1),\r\n        Flatten(),\r\n        Dense(2,activation='softmax')\r\n    ])\r\n    model.compile(loss='categorical_crossentropy', optimizer='adam', metrics=['accuracy','mse'])\r\n    out=model.fit(x=trainX,\r\n                  y=trainY,\r\n                  epochs=params['epc'],\r\n                  validation_data=[x_val, y_val])\r\n    return model,out\r\n```\r\nThis is how i put talos in a different function:\r\n```\r\ndef training(trainX,validX,trainY,validY,params):\r\n    model,out = GetModel(trainX,validX,trainY,validY,params)\r\n    scan_object = talos.Scan(x=trainX,\r\n                             y=trainY, \r\n                             model=GetModel, \r\n                             x_val=validX,\r\n                             y_val=validY, \r\n                             params=para, \r\n                             experiment_name='ECG')\r\n    return model,scan_object,out\r\n```\r\nThis is how i run my model with a 100 times test:\r\n\r\n```\r\ndef experimental_test(n_exp,sddb,nsr,n_train,n_valid,n_test,start_normal,start_sddb,options):\r\n       ....\r\n        train = [A_train,B_train]\r\n        valid = [A_val,B_val]\r\n        tests = [A_test,B_test]\r\n        train_dt = pd.concat(train)\r\n        valid_dt = pd.concat(valid)\r\n        test_dt = pd.concat(tests)\r\n        trainX,validX,trainY,validY= dataset_maker(train_dt,valid_dt)\r\n        n_timesteps, n_features, n_outputs =trainX.shape[1], trainX.shape[2], trainY.shape[0]\r\n        model,scan_object,out=training(trainX,validX,trainY,validY,para)\r\n        pyplot.plot(out.history['loss'], label='train')\r\n        pyplot.plot(out.history['val_loss'], label='validation')\r\n        pyplot.legend()\r\n        pyplot.show()\r\n        pyplot.plot(out.history['accuracy'], label='train')\r\n        pyplot.plot(out.history['val_accuracy'], label='validation')\r\n        pyplot.legend()\r\n        pyplot.show()\r\n        test_seq(start_sddb,start_normal,test_dt,model)\r\n```\r\n\r\n- [ ] My support question includes an input model\r\n- [X] My support question includes a parameter dictionary\r\n- [X] My support question includes a `Scan()` command\r\n- [ ] My support question includes a link to a sample of the data\r\n\r\nNOTE: If the data is sensitive and can't be shared, [create dummy data](https://scikit-learn.org/stable/modules/classes.html#samples-generator) that mimics it.\r\n\r\n**A self-contained Jupyter Notebook, Google Colab, or similar is highly preferred and will speed up helping you with your issue.**\r\n\r\n---\r\n","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/531/timeline","performed_via_github_app":null,"state_reason":"completed"}