{"url":"https://api.github.com/repos/autonomio/talos/issues/410","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/410/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/410/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/410/events","html_url":"https://github.com/autonomio/talos/issues/410","id":495791496,"node_id":"MDU6SXNzdWU0OTU3OTE0OTY=","number":410,"title":"AttributeError: '_thread._local' object has no attribute 'value'","user":{"login":"guiscaranse","id":4432205,"node_id":"MDQ6VXNlcjQ0MzIyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/4432205?v=4","gravatar_id":"","url":"https://api.github.com/users/guiscaranse","html_url":"https://github.com/guiscaranse","followers_url":"https://api.github.com/users/guiscaranse/followers","following_url":"https://api.github.com/users/guiscaranse/following{/other_user}","gists_url":"https://api.github.com/users/guiscaranse/gists{/gist_id}","starred_url":"https://api.github.com/users/guiscaranse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guiscaranse/subscriptions","organizations_url":"https://api.github.com/users/guiscaranse/orgs","repos_url":"https://api.github.com/users/guiscaranse/repos","events_url":"https://api.github.com/users/guiscaranse/events{/privacy}","received_events_url":"https://api.github.com/users/guiscaranse/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-09-19T13:13:24Z","updated_at":"2019-09-19T15:22:47Z","closed_at":"2019-09-19T13:54:20Z","author_association":"NONE","active_lock_reason":null,"body":"#### 1) Confirm the below\r\n\r\n- [x] My Python version is 3.5 or higher\r\n- [x] I have searched through the issues [Issues](https://github.com/autonomio/talos/issues) for a duplicate\r\n- [x] I've tested that my Keras model works as a stand-alone\r\n\r\n#### 2) Include the output of:\r\n\r\n`talos.__version__` = `0.6.3`\r\n\r\n#### 3) Explain clearly what you expect to happen\r\n\r\n`ta.Restore` should return a Talos/Keras model.\r\n\r\n#### 4) Explain what actually happened\r\n\r\nI am getting this error after trying to restore and use a model using `ta.Restore(model_path)`\r\n\r\n#### 5) Provide a code-complete reference\r\n\r\nMy traceback contain all calls and further information is needed I can provide it.\r\n```\r\nTraceback (most recent call last):\r\n  File \"server.py\", line 105, in get\r\n    res = yield self.background_analyse(url)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/tornado/gen.py\", line 735, in run\r\n    value = future.result()\r\n  File \"/usr/lib/python3.6/concurrent/futures/thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"server.py\", line 97, in background_analyse\r\n    result = predict(i)\r\n  File \"/home/guiscaranse/Documentos/20-29 Pessoal/23 Repos/23.02 TCC/core/pales/controllers/BuilderController.py\", line 28, in predict\r\n    return keras.talos_model().model.predict_proba(translate_to_keras(url))[0]\r\n  File \"/home/guiscaranse/Documentos/20-29 Pessoal/23 Repos/23.02 TCC/core/pales/controllers/TalosController.py\", line 75, in talos_model\r\n    return ta.Restore(model_path)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/talos/commands/restore.py\", line 48, in __init__\r\n    self.model = load_model(self.file_prefix + '_model')\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/talos/utils/load_model.py\", line 20, in load_model\r\n    model = model_from_json(loaded_model_json)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/saving.py\", line 661, in model_from_json\r\n    return deserialize(config, custom_objects=custom_objects)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/layers/__init__.py\", line 168, in deserialize\r\n    printable_module_name='layer')\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/utils/generic_utils.py\", line 147, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/sequential.py\", line 298, in from_config\r\n    model = cls(name=name)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/sequential.py\", line 88, in __init__\r\n    super(Sequential, self).__init__(name=name)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/legacy/interfaces.py\", line 91, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/network.py\", line 97, in __init__\r\n    self._init_subclassed_network(**kwargs)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/network.py\", line 304, in _init_subclassed_network\r\n    self._base_init(name=name, **kwargs)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/network.py\", line 111, in _base_init\r\n    self.name = name\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/network.py\", line 323, in __setattr__\r\n    super(Network, self).__setattr__(name, value)\r\n  File \"/home/guiscaranse/.local/share/virtualenvs/core-vMLw6yVh/lib/python3.6/site-packages/keras/engine/base_layer.py\", line 1215, in __setattr__\r\n    if not _DISABLE_TRACKING.value:\r\nAttributeError: '_thread._local' object has no attribute 'value'\r\n```\r\n-------------------------------------------------------------------------\r\n","closed_by":{"login":"guiscaranse","id":4432205,"node_id":"MDQ6VXNlcjQ0MzIyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/4432205?v=4","gravatar_id":"","url":"https://api.github.com/users/guiscaranse","html_url":"https://github.com/guiscaranse","followers_url":"https://api.github.com/users/guiscaranse/followers","following_url":"https://api.github.com/users/guiscaranse/following{/other_user}","gists_url":"https://api.github.com/users/guiscaranse/gists{/gist_id}","starred_url":"https://api.github.com/users/guiscaranse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guiscaranse/subscriptions","organizations_url":"https://api.github.com/users/guiscaranse/orgs","repos_url":"https://api.github.com/users/guiscaranse/repos","events_url":"https://api.github.com/users/guiscaranse/events{/privacy}","received_events_url":"https://api.github.com/users/guiscaranse/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/410/timeline","performed_via_github_app":null,"state_reason":"completed"}