{"url":"https://api.github.com/repos/autonomio/talos/issues/122","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/122/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/122/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/122/events","html_url":"https://github.com/autonomio/talos/issues/122","id":377064644,"node_id":"MDU6SXNzdWUzNzcwNjQ2NDQ=","number":122,"title":"Functional API issue ","user":{"login":"FlorianBury","id":30235130,"node_id":"MDQ6VXNlcjMwMjM1MTMw","avatar_url":"https://avatars.githubusercontent.com/u/30235130?v=4","gravatar_id":"","url":"https://api.github.com/users/FlorianBury","html_url":"https://github.com/FlorianBury","followers_url":"https://api.github.com/users/FlorianBury/followers","following_url":"https://api.github.com/users/FlorianBury/following{/other_user}","gists_url":"https://api.github.com/users/FlorianBury/gists{/gist_id}","starred_url":"https://api.github.com/users/FlorianBury/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FlorianBury/subscriptions","organizations_url":"https://api.github.com/users/FlorianBury/orgs","repos_url":"https://api.github.com/users/FlorianBury/repos","events_url":"https://api.github.com/users/FlorianBury/events{/privacy}","received_events_url":"https://api.github.com/users/FlorianBury/received_events","type":"User","site_admin":false},"labels":[{"id":923120515,"node_id":"MDU6TGFiZWw5MjMxMjA1MTU=","url":"https://api.github.com/repos/autonomio/talos/labels/question","name":"question","color":"d3d3d3","default":true,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"assignees":[{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":12,"created_at":"2018-11-03T15:29:50Z","updated_at":"2018-11-21T14:15:36Z","closed_at":"2018-11-21T14:15:36Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI just started using Talos because it looked like a practical tool for hyperscans. However, instead of the Sequential() class I prefer to use the functional API. It is my only option given the kind of network that I use to build. \r\n\r\nI noticed an error when using the talos module : \r\n\r\n`  File \"/home/ucl/cp3/fbury/.local/lib/python3.6/site-packages/talos/metrics/score_model.py\", line 38, in get_score\r\n    y_pred = self.keras_model.predict_classes(self.x_val)\r\nAttributeError: 'Model' object has no attribute 'predict_classes'\r\n`\r\nSo I checked it out, and it turns out that Sequential() uses _predict_classes_ while the API with the Model() class uses _predict_ function instead. I went into the talos scripts to change it and got the following error : \r\n`  File \"/home/ucl/cp3/fbury/.local/lib/python3.6/site-packages/talos/metrics/performance.py\", line 36, in multi_class\r\n    self.y_pred = self.y_pred.flatten('F')\r\nAttributeError: 'list' object has no attribute 'flatten'\r\n`\r\nI figured the _predict_ function somehow returned a list instead of a numpy array.\r\n\r\nIn the end I replaced : \r\n`y_pred = self.keras_model.predict_classes(self.x_val)`\r\nby \r\n`y_pred = asarray(self.keras_model.predict(self.x_val))`\r\nin talos/metrics/score_model.py, and it seems to be working.\r\n\r\nSince it is a rather \"dirty\" fix, I'd like to know if this is viable or at least have your opinion on that.\r\n\r\nThanks\r\n\r\n","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/122/timeline","performed_via_github_app":null,"state_reason":"completed"}