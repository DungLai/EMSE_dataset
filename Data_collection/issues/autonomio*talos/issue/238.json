{"url":"https://api.github.com/repos/autonomio/talos/issues/238","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/238/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/238/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/238/events","html_url":"https://github.com/autonomio/talos/issues/238","id":414168195,"node_id":"MDU6SXNzdWU0MTQxNjgxOTU=","number":238,"title":"Running out of CPU memory","user":{"login":"iuria21","id":26438571,"node_id":"MDQ6VXNlcjI2NDM4NTcx","avatar_url":"https://avatars.githubusercontent.com/u/26438571?v=4","gravatar_id":"","url":"https://api.github.com/users/iuria21","html_url":"https://github.com/iuria21","followers_url":"https://api.github.com/users/iuria21/followers","following_url":"https://api.github.com/users/iuria21/following{/other_user}","gists_url":"https://api.github.com/users/iuria21/gists{/gist_id}","starred_url":"https://api.github.com/users/iuria21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iuria21/subscriptions","organizations_url":"https://api.github.com/users/iuria21/orgs","repos_url":"https://api.github.com/users/iuria21/repos","events_url":"https://api.github.com/users/iuria21/events{/privacy}","received_events_url":"https://api.github.com/users/iuria21/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2019-02-25T15:42:26Z","updated_at":"2019-03-01T09:49:30Z","closed_at":"2019-03-01T09:49:29Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, I'm trying to Scan a simple modelo with a CNN and a LSTM, with no so big parameters:\r\n\r\n```\r\ndef breast_cancer_model(x_train, y_train, x_val, y_val, params):\r\n    model = Sequential()\r\n    model.add(Embedding(len(w2idx), params['emb_size'], input_length=MAX_DOCUMENT_LENGTH))\r\n    model.add(Conv1D(params['first_neuron'],params['cn_shape'],padding='same', activation=relu))#original with 64\r\n    model.add(Dropout(params['do1']))\r\n    model.add((LSTM(params['second_neuron'],return_sequences=True)))#original with 100\r\n    model.add(Attention_tf())\r\n    model.add(Dropout(params['do1']))\r\n    model.add(Dense(len(int_idx2la), activation='softmax'))\r\n    parallel_model = multi_gpu_model(model, gpus=2)\r\n    \r\n    parallel_model.compile(optimizer=params['optimizer']\r\n                  (lr=lr_normalizer(params['lr'],\r\n                                    params['optimizer'])),\r\n                  loss=params['losses'],\r\n                  metrics=[fmeasure_acc])\r\n    #print(model.summary())\r\n    out = parallel_model.fit(x_train, y_train, validation_data=(x_val, y_val), batch_size=params['batch_size'], verbose=1, epochs=params['epochs'])\r\n    return out, parallel_model\r\n```\r\n\r\nwith \r\n\r\n```\r\np = {'lr': (0.5, 5, 4),\r\n     'second_neuron':[512,256,64],\r\n     'first_neuron': [512,256,64],\r\n     'cn_shape':[4,5],\r\n     'batch_size': [50, 100, 150],\r\n     'epochs': [1],\r\n     'do1': [0.5],\r\n     #'do2': (0.0, 1.0, 4),\r\n     'emb_size': [10000, 1000],\r\n     'optimizer': [Adam],\r\n     'losses': [binary_crossentropy],\r\n     'activation':[relu],\r\n     'last_activation': [softmax]}\r\n```\r\n\r\nAnd it's growing the cpu usage until it uses 64GB (my whole RAM memory). I tried to train the model with all of the parameters separately and no more than 5GB are used. Why is this? \r\nThanks","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/238/timeline","performed_via_github_app":null,"state_reason":"completed"}