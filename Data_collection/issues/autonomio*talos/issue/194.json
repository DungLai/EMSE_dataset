{"url":"https://api.github.com/repos/autonomio/talos/issues/194","repository_url":"https://api.github.com/repos/autonomio/talos","labels_url":"https://api.github.com/repos/autonomio/talos/issues/194/labels{/name}","comments_url":"https://api.github.com/repos/autonomio/talos/issues/194/comments","events_url":"https://api.github.com/repos/autonomio/talos/issues/194/events","html_url":"https://github.com/autonomio/talos/issues/194","id":409949008,"node_id":"MDU6SXNzdWU0MDk5NDkwMDg=","number":194,"title":"UnboundLocalError: local variable 'acc_entropy' referenced before assignment","user":{"login":"DerTunzel","id":22245890,"node_id":"MDQ6VXNlcjIyMjQ1ODkw","avatar_url":"https://avatars.githubusercontent.com/u/22245890?v=4","gravatar_id":"","url":"https://api.github.com/users/DerTunzel","html_url":"https://github.com/DerTunzel","followers_url":"https://api.github.com/users/DerTunzel/followers","following_url":"https://api.github.com/users/DerTunzel/following{/other_user}","gists_url":"https://api.github.com/users/DerTunzel/gists{/gist_id}","starred_url":"https://api.github.com/users/DerTunzel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DerTunzel/subscriptions","organizations_url":"https://api.github.com/users/DerTunzel/orgs","repos_url":"https://api.github.com/users/DerTunzel/repos","events_url":"https://api.github.com/users/DerTunzel/events{/privacy}","received_events_url":"https://api.github.com/users/DerTunzel/received_events","type":"User","site_admin":false},"labels":[{"id":994489876,"node_id":"MDU6TGFiZWw5OTQ0ODk4NzY=","url":"https://api.github.com/repos/autonomio/talos/labels/investigation","name":"investigation","color":"d3d3d3","default":false,"description":"gathering information"}],"state":"closed","locked":false,"assignee":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"assignees":[{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2019-02-13T18:49:22Z","updated_at":"2019-05-06T21:16:58Z","closed_at":"2019-02-14T10:59:34Z","author_association":"NONE","active_lock_reason":null,"body":"Hey, i hope it is okay to ask here for help. I could not find anything that helps my case.\r\n\r\n- [ x] I'm up-to-date with the latest release: Hey i am on release 0.47\r\n\r\n- [ x] I've confirmed that my Keras model works outside of Talos. Works perfectly fine with keras on a jupyter notebook\r\n\r\nHere is part of my code that i stitched together from some examples and my jupyter notebook where the model runs just fine. :\r\n\r\n```\r\n#Some imports \r\n\r\ndef minimal():\r\n\r\n    #some constants\r\n\r\n    #reading a file preprocessing data, vocabulary building and bringing it into a fitting structure\r\n    \r\n X = np.array(xs)\r\n     Y = np_utils.to_categorical(ys)\r\n\r\n     p = {'first_neuron':[25,50,75,100],\r\n          'lr': (0.8, 1.2, 3),\r\n          'first_neuron':[4, 8, 16, 32, 64],\r\n          'hidden_layers':[0, 1, 2, 3],\r\n          'batch_size': (32, 64, 5),\r\n          'epochs': [15, 20, 25, 30, 35],\r\n          'dropout': (0, 0.2, 3),\r\n          'weight_regulizer':[None],\r\n          'emb_output_dims': [None],\r\n          'shape':['brick','long_funnel'],\r\n          'kernel_initializer': ['uniform','normal'],\r\n          'optimizer': [Adam, Nadam, RMSprop],\r\n          'activation':['relu', 'elu', 'sigmoid'],\r\n          'last_activation': ['sigmoid','softmax']}\r\n\r\n     def my_model(x_train, y_train, x_val, y_val, params):\r\n\r\n          model = Sequential()\r\n         \r\n          model.add(LSTM(params['first_neuron'], input_shape=(NO_OF_SENTENCES, SENTENCE_LENGTH)))\r\n          model.add(Dropout(params['dropout']))\r\n\t \r\n          #hidden_layers(model, params)\r\n \r\n          #model.add(Dense(3, activation=params['last_activation'], kernel_initializer='normal'))\r\n          model.add(Dense(3, activation=params['last_activation']))\r\n\r\n          model.compile(loss=\"categorical_crossentropy\", optimizer=params['optimizer'](lr=lr_normalizer(params['lr'],params['optimizer'])), metrics=[\"accuracy\"])\r\n    \r\n          out = model.fit(x_train, y_train, validation_data=[x_val, y_val], batch_size=params['batch_size'], epochs=params['epochs'], verbose=0)\r\n          print('Ende vom model')\r\n          \r\n          return out, model\r\n\r\n     scan_object = ta.Scan(X, Y, model=my_model, params=p, grid_downsample=0.01)\r\n\r\n     return scan_object\r\n```\r\n\r\n\r\nThis is the error i get:\r\n \r\n```\r\n File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Users\\Matunzel\\Desktop\\PNL\\DeepLearning\\AdvancedLSTM-150articles-6votes\\optimization.py\", line 192, in minimal\r\n    scan_object = ta.Scan(X, Y, model=my_model, params=p, grid_downsample=0.01)\r\n  File \"C:\\ProgramData\\Miniconda3\\lib\\site-packages\\talos\\scan\\Scan.py\", line 165, in __init__\r\n    self._null = self.runtime()\r\n  File \"C:\\ProgramData\\Miniconda3\\lib\\site-packages\\talos\\scan\\Scan.py\", line 170, in runtime\r\n    self = scan_run(self)\r\n  File \"C:\\ProgramData\\Miniconda3\\lib\\site-packages\\talos\\scan\\scan_run.py\", line 20, in scan_run\r\n    self = scan_round(self)\r\n  File \"C:\\ProgramData\\Miniconda3\\lib\\site-packages\\talos\\scan\\scan_round.py\", line 47, in scan_round\r\n    self.epoch_entropy.append(epoch_entropy(_hr_out))\r\n  File \"C:\\ProgramData\\Miniconda3\\lib\\site-packages\\talos\\metrics\\entropy.py\", line 54, in epoch_entropy\r\n    return [acc_entropy, loss_entropy]\r\nUnboundLocalError: local variable 'acc_entropy' referenced before assignment\r\n```\r\n\r\n\r\n\r\n","closed_by":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/autonomio/talos/issues/194/timeline","performed_via_github_app":null,"state_reason":"completed"}