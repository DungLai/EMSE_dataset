[{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/544286380","html_url":"https://github.com/autonomio/talos/issues/423#issuecomment-544286380","issue_url":"https://api.github.com/repos/autonomio/talos/issues/423","id":544286380,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDI4NjM4MA==","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"created_at":"2019-10-20T19:55:41Z","updated_at":"2019-10-20T19:55:41Z","author_association":"NONE","body":"Welcome to Talos community! Thanks so much for creating your first issue :)","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/544286380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/544501633","html_url":"https://github.com/autonomio/talos/issues/423#issuecomment-544501633","issue_url":"https://api.github.com/repos/autonomio/talos/issues/423","id":544501633,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDUwMTYzMw==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-10-21T12:56:07Z","updated_at":"2019-10-21T12:56:36Z","author_association":"CONTRIBUTOR","body":"Great to hear you find Talos useful :) \r\n\r\nYou have to add those metrics into your input model before you can use it for reduction. So if you do `model.compile(...metrcs=['mae']...)` into your input model, then you can use it in reduction.","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/544501633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/544542775","html_url":"https://github.com/autonomio/talos/issues/423#issuecomment-544542775","issue_url":"https://api.github.com/repos/autonomio/talos/issues/423","id":544542775,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU0Mjc3NQ==","user":{"login":"PurenBITeam","id":33901701,"node_id":"MDQ6VXNlcjMzOTAxNzAx","avatar_url":"https://avatars.githubusercontent.com/u/33901701?v=4","gravatar_id":"","url":"https://api.github.com/users/PurenBITeam","html_url":"https://github.com/PurenBITeam","followers_url":"https://api.github.com/users/PurenBITeam/followers","following_url":"https://api.github.com/users/PurenBITeam/following{/other_user}","gists_url":"https://api.github.com/users/PurenBITeam/gists{/gist_id}","starred_url":"https://api.github.com/users/PurenBITeam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PurenBITeam/subscriptions","organizations_url":"https://api.github.com/users/PurenBITeam/orgs","repos_url":"https://api.github.com/users/PurenBITeam/repos","events_url":"https://api.github.com/users/PurenBITeam/events{/privacy}","received_events_url":"https://api.github.com/users/PurenBITeam/received_events","type":"User","site_admin":false},"created_at":"2019-10-21T14:33:01Z","updated_at":"2019-10-21T14:33:01Z","author_association":"NONE","body":"This eas the case in my code...see below:\r\n\r\n\r\np = {'optimizer': [Adam, Adamax, Nadam, Adagrad, Adadelta],\r\n     'first_neuron': [5120, 1024, 512, 128, 64, 32, 16],\r\n     'batch_size': [100, 1000, 5000, 10000],\r\n     'epochs': [25],\r\n     'hidden_layers':[0, 1, 2, 3, 4],\r\n     'kernel_initializer': ['uniform', 'normal', 'glorot_uniform'],\r\n     'dropout': [0.0, 0.25, 0.5, 0.65, 2, 3, 4, 5, 10],\r\n     'losses': [\"mape\", \"mse\"],\r\n     'shapes': ['brick', 'triangle', 'funnel'],\r\n     'activation': ['relu'],\r\n     'lr': [0.0001, 0.0002, 0.0005, 0.0009, 0.001, 0.002, 0.005, 0.009, 0.01, 0.02, 0.035, 0.05, 0.075, 0.09, 0.1,\r\n           0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9]\r\n    }\r\n\r\n\r\n\r\ndef fcmodel(X_train, y_train, x_val, y_val, params):\r\n    \r\n    model = Sequential()\r\n    \r\n    esr = 3\r\n    callbacks = [EarlyStopping(monitor=\"val_mean_absolute_error\", patience=esr, min_delta=0.0001, mode=\"min\",\r\n                               baseline=0.1)]\r\n    \r\n    model.add(Dense(params['first_neuron'], input_dim=X_train.shape[1],\r\n                    activation=\"relu\",\r\n                    kernel_initializer = params['kernel_initializer'] ))\r\n    model.add(Dropout(params['dropout']))\r\n    \r\n    ## hidden layers\r\n    hidden_layers(model, params, 1)\r\n    \r\n    model.add(Dense(1, activation=\"sigmoid\",\r\n                    kernel_initializer=params['kernel_initializer']))\r\n    \r\n    model.compile(loss=params[\"losses\"], \r\n                  optimizer=params['optimizer'](lr_normalizer(params['lr'], params['optimizer'])),\r\n                  metrics=['mae'])\r\n    \r\n    out = model.fit(X_train, y_train, \r\n                        validation_data=[x_val, y_val],\r\n                        batch_size=params['batch_size'],\r\n                        epochs=params['epochs'],\r\n                        callbacks=callbacks,\r\n                        verbose=2)\r\n    return out, model\r\n\r\nt = talos.Scan(x=X_df_train2.values,\r\n            y=y_df_train2.values,\r\n            model=fcmodel,\r\n            params=p,\r\n            x_val=X_df_val.values,\r\n            y_val=y_df_val.values,\r\n            seed=baseseed,\r\n            experiment_name=\"TalosPipeline2_Corr\",\r\n            print_params=True,\r\n            round_limit=250,\r\n            reduction_method=\"correlation\",\r\n            reduction_interval=1,\r\n            reduction_window=1,\r\n            reduction_threshold=0.2,\r\n            reduction_metric='mae',\r\n            minimize_loss=True)\r\n\r\nI still get the error message below: \r\n\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n<ipython-input-1-7a342f212e53> in <module>()\r\n     99             reduction_threshold=0.2,\r\n    100             reduction_metric='mae',\r\n--> 101             minimize_loss=True)\r\n    102 \r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/scan/Scan.py in __init__(self, x, y, params, model, experiment_name, x_val, y_val, val_split, random_method, seed, performance_target, fraction_limit, round_limit, time_limit, boolean_limit, reduction_method, reduction_interval, reduction_window, reduction_threshold, reduction_metric, minimize_loss, disable_progress_bar, print_params, clear_session, save_weights)\r\n    194         # input parameters section ends\r\n    195 \r\n--> 196         self._runtime()\r\n    197 \r\n    198     def _runtime(self):\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/scan/Scan.py in _runtime(self)\r\n    199 \r\n    200         from .scan_run import scan_run\r\n--> 201         self = scan_run(self)\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/scan/scan_run.py in scan_run(self)\r\n     24         # otherwise proceed with next permutation\r\n     25         from .scan_round import scan_round\r\n---> 26         self = scan_round(self)\r\n     27         self.pbar.update(1)\r\n     28 \r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/scan/scan_round.py in scan_round(self)\r\n     26     # apply reductions\r\n     27     from ..reducers.reduce_run import reduce_run\r\n---> 28     self = reduce_run(self)\r\n     29 \r\n     30     try:\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/reducers/reduce_run.py in reduce_run(self)\r\n     59         # check if correlation reducer can do something\r\n     60         if self.reduction_method == 'correlation':\r\n---> 61             self = correlation(self, 'spearman')\r\n     62 \r\n     63         # check if random forrest can do something\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/reducers/correlation.py in correlation(self, method)\r\n     18     # transform the data properly first\r\n     19     from .reduce_utils import cols_to_multilabel\r\n---> 20     data = cols_to_multilabel(self)\r\n     21 \r\n     22     # get the correlations\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/talos/reducers/reduce_utils.py in cols_to_multilabel(self)\r\n     15 \r\n     16     # drop all other metric columns except reduction_metric\r\n---> 17     data = data[[self.reduction_metric] + self._param_dict_keys]\r\n     18 \r\n     19     # convert all hyperparameter columns to multi label columns\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/pandas/core/frame.py in __getitem__(self, key)\r\n   2984             if is_iterator(key):\r\n   2985                 key = list(key)\r\n-> 2986             indexer = self.loc._convert_to_indexer(key, axis=1, raise_missing=True)\r\n   2987 \r\n   2988         # take() does not accept boolean indexers\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/pandas/core/indexing.py in _convert_to_indexer(self, obj, axis, is_setter, raise_missing)\r\n   1283                 # When setting, missing keys are not allowed, even with .loc:\r\n   1284                 kwargs = {\"raise_missing\": True if is_setter else raise_missing}\r\n-> 1285                 return self._get_listlike_indexer(obj, axis, **kwargs)[1]\r\n   1286         else:\r\n   1287             try:\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/pandas/core/indexing.py in _get_listlike_indexer(self, key, axis, raise_missing)\r\n   1090 \r\n   1091         self._validate_read_indexer(\r\n-> 1092             keyarr, indexer, o._get_axis_number(axis), raise_missing=raise_missing\r\n   1093         )\r\n   1094         return keyarr, indexer\r\n\r\n/data/anaconda/envs/py35/lib/python3.5/site-packages/pandas/core/indexing.py in _validate_read_indexer(self, key, indexer, axis, raise_missing)\r\n   1183             if not (self.name == \"loc\" and not raise_missing):\r\n   1184                 not_found = list(set(key) - set(ax))\r\n-> 1185                 raise KeyError(\"{} not in index\".format(not_found))\r\n   1186 \r\n   1187             # we skip the warning on Categorical/Interval\r\n\r\nKeyError: \"['mae'] not in index\"\r\n\r\nWhat did I do wrong?\r\n\r\nthanks and br","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/544542775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PurenBITeam","id":33901701,"node_id":"MDQ6VXNlcjMzOTAxNzAx","avatar_url":"https://avatars.githubusercontent.com/u/33901701?v=4","gravatar_id":"","url":"https://api.github.com/users/PurenBITeam","html_url":"https://github.com/PurenBITeam","followers_url":"https://api.github.com/users/PurenBITeam/followers","following_url":"https://api.github.com/users/PurenBITeam/following{/other_user}","gists_url":"https://api.github.com/users/PurenBITeam/gists{/gist_id}","starred_url":"https://api.github.com/users/PurenBITeam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PurenBITeam/subscriptions","organizations_url":"https://api.github.com/users/PurenBITeam/orgs","repos_url":"https://api.github.com/users/PurenBITeam/repos","events_url":"https://api.github.com/users/PurenBITeam/events{/privacy}","received_events_url":"https://api.github.com/users/PurenBITeam/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/564679004","html_url":"https://github.com/autonomio/talos/issues/423#issuecomment-564679004","issue_url":"https://api.github.com/repos/autonomio/talos/issues/423","id":564679004,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDY3OTAwNA==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T18:44:29Z","updated_at":"2019-12-11T18:44:29Z","author_association":"CONTRIBUTOR","body":"It might be that your results will not have 'mae' because that's a shorthand in Keras, but it will be 'mean_average_error' instead. \r\n\r\nAs part of the troubleshoot, you can also try removing all the reduction related arguments from `Scan()`:\r\n\r\n```\r\nreduction_method=\"correlation\",\r\nreduction_interval=1,\r\nreduction_window=1,\r\nreduction_threshold=0.2,\r\nreduction_metric='mae'\r\n```","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/564679004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/565745726","html_url":"https://github.com/autonomio/talos/issues/423#issuecomment-565745726","issue_url":"https://api.github.com/repos/autonomio/talos/issues/423","id":565745726,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTc0NTcyNg==","user":{"login":"PurenBITeam","id":33901701,"node_id":"MDQ6VXNlcjMzOTAxNzAx","avatar_url":"https://avatars.githubusercontent.com/u/33901701?v=4","gravatar_id":"","url":"https://api.github.com/users/PurenBITeam","html_url":"https://github.com/PurenBITeam","followers_url":"https://api.github.com/users/PurenBITeam/followers","following_url":"https://api.github.com/users/PurenBITeam/following{/other_user}","gists_url":"https://api.github.com/users/PurenBITeam/gists{/gist_id}","starred_url":"https://api.github.com/users/PurenBITeam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PurenBITeam/subscriptions","organizations_url":"https://api.github.com/users/PurenBITeam/orgs","repos_url":"https://api.github.com/users/PurenBITeam/repos","events_url":"https://api.github.com/users/PurenBITeam/events{/privacy}","received_events_url":"https://api.github.com/users/PurenBITeam/received_events","type":"User","site_admin":false},"created_at":"2019-12-14T19:33:12Z","updated_at":"2019-12-14T19:33:12Z","author_association":"NONE","body":"Thanks...It's working now. ","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/565745726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PurenBITeam","id":33901701,"node_id":"MDQ6VXNlcjMzOTAxNzAx","avatar_url":"https://avatars.githubusercontent.com/u/33901701?v=4","gravatar_id":"","url":"https://api.github.com/users/PurenBITeam","html_url":"https://github.com/PurenBITeam","followers_url":"https://api.github.com/users/PurenBITeam/followers","following_url":"https://api.github.com/users/PurenBITeam/following{/other_user}","gists_url":"https://api.github.com/users/PurenBITeam/gists{/gist_id}","starred_url":"https://api.github.com/users/PurenBITeam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PurenBITeam/subscriptions","organizations_url":"https://api.github.com/users/PurenBITeam/orgs","repos_url":"https://api.github.com/users/PurenBITeam/repos","events_url":"https://api.github.com/users/PurenBITeam/events{/privacy}","received_events_url":"https://api.github.com/users/PurenBITeam/received_events","type":"User","site_admin":false}},{"id":2883564122,"node_id":"MDExOkNsb3NlZEV2ZW50Mjg4MzU2NDEyMg==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2883564122","actor":{"login":"PurenBITeam","id":33901701,"node_id":"MDQ6VXNlcjMzOTAxNzAx","avatar_url":"https://avatars.githubusercontent.com/u/33901701?v=4","gravatar_id":"","url":"https://api.github.com/users/PurenBITeam","html_url":"https://github.com/PurenBITeam","followers_url":"https://api.github.com/users/PurenBITeam/followers","following_url":"https://api.github.com/users/PurenBITeam/following{/other_user}","gists_url":"https://api.github.com/users/PurenBITeam/gists{/gist_id}","starred_url":"https://api.github.com/users/PurenBITeam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PurenBITeam/subscriptions","organizations_url":"https://api.github.com/users/PurenBITeam/orgs","repos_url":"https://api.github.com/users/PurenBITeam/repos","events_url":"https://api.github.com/users/PurenBITeam/events{/privacy}","received_events_url":"https://api.github.com/users/PurenBITeam/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-12-14T19:33:12Z","state_reason":null,"performed_via_github_app":null}]