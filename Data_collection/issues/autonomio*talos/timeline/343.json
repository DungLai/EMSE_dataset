[{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/509573642","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-509573642","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":509573642,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTU3MzY0Mg==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T09:46:54Z","updated_at":"2019-07-09T09:46:54Z","author_association":"NONE","body":"Any suggestions?","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/509573642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"id":2470231274,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0NzAyMzEyNzQ=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2470231274","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-09T18:08:22Z","label":{"name":"investigation","color":"c5def5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/509747859","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-509747859","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":509747859,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTc0Nzg1OQ==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T18:09:56Z","updated_at":"2019-07-09T18:09:56Z","author_association":"CONTRIBUTOR","body":"One thing that immediately sticks out from your model, is that in each iteration you create the generator. That might have to do something with your problem. \r\n\r\nI suggest looking at #11 for examples on how you might want to do it instead.","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/509747859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/510014142","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-510014142","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":510014142,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDAxNDE0Mg==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-07-10T10:57:47Z","updated_at":"2019-07-10T10:57:47Z","author_association":"NONE","body":"Thanks for pointing out this potential problem. I've put the generator inside the function that builds the model because it is using one of the grid parameters (batch_size). I'll try to see if your suggestion helps by fixing the batch_size for now. ","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/510014142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/511858734","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-511858734","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":511858734,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTg1ODczNA==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-07-16T15:10:40Z","updated_at":"2019-07-16T15:10:40Z","author_association":"NONE","body":"Hi,\r\n\r\nSorry I could not work on this earlier. There is definitely a memory leak, and your suggestion to call the generator once outside the talos function helps reduce its impact. It seems that each time I call the generator class, the memory load increases more in comparison with the last call. However, if I remove the generator call from the talos function, I can no longer tune the batch size.  One thing that helped a little bit is to use one worker only:\r\n\r\nout = model.fit_generator(generator = train_gen,\r\n                                          validation_data = valid_gen,\r\n                                          epochs = params['epochs'],\r\n                                          use_multiprocessing = True,\r\n                                          verbose = 0,\r\n                                          workers = 1)\r\n\r\nBy doing so, I was able to run a few more iterations with talos, although the iterations were slower. But at a certain point, the program just stops producing outputs. Any thoughts?","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/511858734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/511948608","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-511948608","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":511948608,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTk0ODYwOA==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-07-16T19:15:01Z","updated_at":"2019-07-16T19:15:01Z","author_association":"CONTRIBUTOR","body":"Have you profiled your code in a loop without Talos? Just run it as a standalone Keras model with everything else the same, but run it in a for loop and see what happens.","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/511948608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/512746140","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-512746140","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":512746140,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjc0NjE0MA==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-07-18T09:47:14Z","updated_at":"2019-07-18T09:47:14Z","author_association":"NONE","body":"Not yet, but I'll do it and let you know. I am also thinking that maybe this has to do with Keras rather than talos, but let's see. \r\n\r\nThanks ","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/512746140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/514593669","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-514593669","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":514593669,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDU5MzY2OQ==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-07-24T11:28:17Z","updated_at":"2019-07-24T11:28:17Z","author_association":"CONTRIBUTOR","body":"Thanks. I will be very interested in knowing what you learn. I know there are a lot of issues people have reported regarding the use of generators in Keras models. Which is consistent with my own experience.","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/514593669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"id":2506001820,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1MDYwMDE4MjA=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2506001820","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-24T11:28:33Z","label":{"name":"keras","color":"000000"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/515784614","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-515784614","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":515784614,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTc4NDYxNA==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-07-28T18:32:40Z","updated_at":"2019-07-28T18:32:40Z","author_association":"CONTRIBUTOR","body":"@Adnane017 any updates on this?","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/515784614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"id":2514856518,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUxNDg1NjUxOA==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2514856518","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-28T18:32:40Z","performed_via_github_app":null},{"id":2514856519,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MTQ4NTY1MTk=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2514856519","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-28T18:32:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/515974726","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-515974726","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":515974726,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTk3NDcyNg==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-07-29T12:42:05Z","updated_at":"2019-07-29T12:42:05Z","author_association":"NONE","body":"Hi @mikkokotila. Really sorry for the delay in sending an update on this (and that you are pushing for a solution for this instead of me doing it). I was practically unavailable in the last two weeks (off to a conference). I noticed too that many Keras users have reported memory leaks. Someone told me he experienced the same problem with TensorFlow, so it might even have to do with TensorFlow rather than Keras or Talos . \r\n\r\nI will run the test you suggested and let you know later this week. \r\n\r\nMany thanks again.","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/515974726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"id":2516354186,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUxNjM1NDE4Ng==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2516354186","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-29T12:42:05Z","performed_via_github_app":null},{"id":2516354187,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MTYzNTQxODc=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2516354187","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-29T12:42:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/517959613","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-517959613","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":517959613,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzk1OTYxMw==","user":{"login":"Jair-Ai","id":35657024,"node_id":"MDQ6VXNlcjM1NjU3MDI0","avatar_url":"https://avatars.githubusercontent.com/u/35657024?v=4","gravatar_id":"","url":"https://api.github.com/users/Jair-Ai","html_url":"https://github.com/Jair-Ai","followers_url":"https://api.github.com/users/Jair-Ai/followers","following_url":"https://api.github.com/users/Jair-Ai/following{/other_user}","gists_url":"https://api.github.com/users/Jair-Ai/gists{/gist_id}","starred_url":"https://api.github.com/users/Jair-Ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jair-Ai/subscriptions","organizations_url":"https://api.github.com/users/Jair-Ai/orgs","repos_url":"https://api.github.com/users/Jair-Ai/repos","events_url":"https://api.github.com/users/Jair-Ai/events{/privacy}","received_events_url":"https://api.github.com/users/Jair-Ai/received_events","type":"User","site_admin":false},"created_at":"2019-08-03T22:45:19Z","updated_at":"2019-08-03T22:45:19Z","author_association":"NONE","body":"I have the same problem, the first iteration happens very fast, but the video memory does not empty and the second iteration starts already with the full video memory, and then begins the nightmare taking up to 3 days to improve the hyperparameters, already researched the internet and really don't think the solution","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/517959613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Jair-Ai","id":35657024,"node_id":"MDQ6VXNlcjM1NjU3MDI0","avatar_url":"https://avatars.githubusercontent.com/u/35657024?v=4","gravatar_id":"","url":"https://api.github.com/users/Jair-Ai","html_url":"https://github.com/Jair-Ai","followers_url":"https://api.github.com/users/Jair-Ai/followers","following_url":"https://api.github.com/users/Jair-Ai/following{/other_user}","gists_url":"https://api.github.com/users/Jair-Ai/gists{/gist_id}","starred_url":"https://api.github.com/users/Jair-Ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jair-Ai/subscriptions","organizations_url":"https://api.github.com/users/Jair-Ai/orgs","repos_url":"https://api.github.com/users/Jair-Ai/repos","events_url":"https://api.github.com/users/Jair-Ai/events{/privacy}","received_events_url":"https://api.github.com/users/Jair-Ai/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/517991667","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-517991667","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":517991667,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzk5MTY2Nw==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-08-04T10:28:40Z","updated_at":"2019-08-04T10:28:40Z","author_association":"CONTRIBUTOR","body":"@TraderJair sorry to hear that you have joined the sizable group of people with frustration regarding using generators with Keras on TensorFlow backend. \r\n\r\nIn the new Talos docs there is an [example you can try](https://autonomio.github.io/talos/#/Examples_Generator). Try it first with the example as it is, and if everything goes fine (works very well even in low end laptop), the replace with your own data (which I assume is much bigger). \r\n\r\n@Adnane017, could you try the same.\r\n","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/517991667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"id":2531701086,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUzMTcwMTA4Ng==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2531701086","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-04T10:28:41Z","performed_via_github_app":null},{"id":2531701087,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MzE3MDEwODc=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2531701087","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-04T10:28:41Z","performed_via_github_app":null},{"id":2531701089,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUzMTcwMTA4OQ==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2531701089","actor":{"login":"Jair-Ai","id":35657024,"node_id":"MDQ6VXNlcjM1NjU3MDI0","avatar_url":"https://avatars.githubusercontent.com/u/35657024?v=4","gravatar_id":"","url":"https://api.github.com/users/Jair-Ai","html_url":"https://github.com/Jair-Ai","followers_url":"https://api.github.com/users/Jair-Ai/followers","following_url":"https://api.github.com/users/Jair-Ai/following{/other_user}","gists_url":"https://api.github.com/users/Jair-Ai/gists{/gist_id}","starred_url":"https://api.github.com/users/Jair-Ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jair-Ai/subscriptions","organizations_url":"https://api.github.com/users/Jair-Ai/orgs","repos_url":"https://api.github.com/users/Jair-Ai/repos","events_url":"https://api.github.com/users/Jair-Ai/events{/privacy}","received_events_url":"https://api.github.com/users/Jair-Ai/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-04T10:28:41Z","performed_via_github_app":null},{"id":2531701090,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MzE3MDEwOTA=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2531701090","actor":{"login":"Jair-Ai","id":35657024,"node_id":"MDQ6VXNlcjM1NjU3MDI0","avatar_url":"https://avatars.githubusercontent.com/u/35657024?v=4","gravatar_id":"","url":"https://api.github.com/users/Jair-Ai","html_url":"https://github.com/Jair-Ai","followers_url":"https://api.github.com/users/Jair-Ai/followers","following_url":"https://api.github.com/users/Jair-Ai/following{/other_user}","gists_url":"https://api.github.com/users/Jair-Ai/gists{/gist_id}","starred_url":"https://api.github.com/users/Jair-Ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jair-Ai/subscriptions","organizations_url":"https://api.github.com/users/Jair-Ai/orgs","repos_url":"https://api.github.com/users/Jair-Ai/repos","events_url":"https://api.github.com/users/Jair-Ai/events{/privacy}","received_events_url":"https://api.github.com/users/Jair-Ai/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-04T10:28:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518258719","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-518258719","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":518258719,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODI1ODcxOQ==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-08-05T14:31:02Z","updated_at":"2019-08-05T14:31:02Z","author_association":"NONE","body":"Back to this: \r\n\r\n> Have you profiled your code in a loop without Talos? Just run it as a standalone Keras model with everything else the same, but run it in a for loop and see what happens.\r\n\r\nI have now run some tests with a toy example using (1) keras, (2) keras with manual memory release (del model + clear_session()) and (3) Talos with the clear_tf_session option 'on'. My model is a basic LSTM run on 1000 sentences 24 times. To profile memory usage, I used the memory_profiler package. Here are the results in graphs:\r\n\r\n**(1) Keras without memory release:**\r\n![Figure_profiling_keras_noreset](https://user-images.githubusercontent.com/31845955/62471066-bc601600-b793-11e9-87ec-f20ae680ed72.png)\r\n\r\n**(2) Keras with memory release:**\r\n![Figure_profiling_keras_withclear](https://user-images.githubusercontent.com/31845955/62471077-c3872400-b793-11e9-9bf7-7e0c423bb246.png)\r\n\r\n**(3) Talos with clear_tf_session:**\r\n![Figure_profiling_talos_withreset](https://user-images.githubusercontent.com/31845955/62471090-ce41b900-b793-11e9-9a17-bb2efc57d3d8.png)\r\n\r\nIt is clear that manually releasing memory when working with Keras helps. With Talos, there is definitely a memory leak (at least with the way I am using it), but the leak is smaller after a few iterations. Of course, all this depends on the model parameters in each iteration, which in turn determines the size of the model python will be working on. I am suspecting that what is causing the problem at large scale are those abrupt increases in memory usage after each new iteration. \r\n\r\nI have yet to try your new suggestion. It seems different to what I used in my example. I'll post the results once done. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518258719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518331247","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-518331247","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":518331247,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODMzMTI0Nw==","user":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"created_at":"2019-08-05T17:45:20Z","updated_at":"2019-08-05T17:45:20Z","author_association":"NONE","body":"Unfortunately, following the same structure as in the example did not help in my case (see the graph). For info, before running the new simulations, I updated Talos to the daily Github version (I noticed that you no longer offer the option to clear the TF session).  \r\n![Figure_profiling_talos_newgenerator_andtalosversion](https://user-images.githubusercontent.com/31845955/62483867-aa40a080-b7b0-11e9-8859-090be0fe2f73.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518331247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518834073","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-518834073","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":518834073,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODgzNDA3Mw==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-08-06T20:37:14Z","updated_at":"2019-08-06T20:37:14Z","author_association":"CONTRIBUTOR","body":"@Adnane017 This is really wonderful work. I love it :) \r\n\r\nThe name is changed to `clear_session` now, so that we support all the backends for Keras and not just TensorFlow. \r\n\r\nCan you share the text output from cProfile or similar, so we can see exactly what is eating the memory. That way there is no doubt. Ideally, given you already have put time to this, if you can create a repo with the codes you have and the proc/similar text outputs, and I will then repeat the exact same in two different systems. \r\n\r\nAbout your experiment, did I understand correct that you have done the following: \r\n\r\n- you have configured a model which is the same for Talos and Keras\r\n- that model is configured exactly the same for both cases\r\n- you run it in a loop (and in Talos by just changing a vanity hyperparameter) n times\r\n\r\ni.e. the three graphs above are \"apples-to-apples\". \r\n\r\nPerformance is definitely a key concern/focus, and we shall get to the bottom of this! :) \r\n\r\nThanks again so far. Great work. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518834073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"id":2538046878,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUzODA0Njg3OA==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2538046878","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-06T20:37:14Z","performed_via_github_app":null},{"id":2538046879,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MzgwNDY4Nzk=","url":"https://api.github.com/repos/autonomio/talos/issues/events/2538046879","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-08-06T20:37:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518834439","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-518834439","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":518834439,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODgzNDQzOQ==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-08-06T20:38:18Z","updated_at":"2019-08-06T20:38:18Z","author_association":"CONTRIBUTOR","body":">  I updated Talos to the daily Github version (I noticed that you no longer offer the option to clear the TF session).\r\n\r\nCan you try with `clear_session=True` and see how that looks like. ","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518834439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518836504","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-518836504","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":518836504,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODgzNjUwNA==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-08-06T20:44:00Z","updated_at":"2019-08-06T20:45:45Z","author_association":"CONTRIBUTOR","body":"...having looked at both of the graphs you had provided, neither of them imply a memory leak. The characteristics of a memory leak is continuously building memory pressure, as is with Keras example without manual release. That does not seem to be the case with either of the graphs with Talos. I kind of of \"know\" there is no memory leak because I have thousands of hours of use myself, zero reported issues on it, and my background is on high performance industry systems that handle hundreds of billions of events per day, and considerable attention have gone to this topic, including extensive profiling of memory use. \r\n\r\nWhat I'm alarmed about here, is that there is an added memory cost in comparison to Keras, which should be marginal at worst (which is not the case in your experiment). So if it indeed is that your experiment is apples to apples, and not that Talos changes the parameters for example, but Keras version does not, then this will definitely become a top priority in terms of fixes. ","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/518836504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/519014616","html_url":"https://github.com/autonomio/talos/issues/343#issuecomment-519014616","issue_url":"https://api.github.com/repos/autonomio/talos/issues/343","id":519014616,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTAxNDYxNg==","user":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false},"created_at":"2019-08-07T09:16:12Z","updated_at":"2019-08-07T09:28:21Z","author_association":"CONTRIBUTOR","body":"@Adnane017 I'm working on this currently, and indeed, with a `SequenceGenerator` there is a slight memory buildup in Talos vs. Keras using exactly same release method in both. This was a 5 minute test with mnist dataset and CNN. Will repeat once where all run in the same run, and then increase the time to 30 minutes and see what happens. This test is done pretty objectively given the ins and outs of non performance lab setting. \r\n\r\nThis might take a couple of days time as I also want to repeat the test with other OS (I'm on Mac OSX) as well as without data generator. After that I should be able to publish conclusive results, with hopefully also a fix for whatever is causing this.\r\n\r\nRegarding the added memory cost your plots imply, can you share the params dictionary you are sharing? I can't replicate that, but instead see that Keras with memory release and Talos with `clear_session` both consume the same base level of memory, on top of which there is a slight gradual build up in Talos.","reactions":{"url":"https://api.github.com/repos/autonomio/talos/issues/comments/519014616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mikkokotila","id":7943188,"node_id":"MDQ6VXNlcjc5NDMxODg=","avatar_url":"https://avatars.githubusercontent.com/u/7943188?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkokotila","html_url":"https://github.com/mikkokotila","followers_url":"https://api.github.com/users/mikkokotila/followers","following_url":"https://api.github.com/users/mikkokotila/following{/other_user}","gists_url":"https://api.github.com/users/mikkokotila/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkokotila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkokotila/subscriptions","organizations_url":"https://api.github.com/users/mikkokotila/orgs","repos_url":"https://api.github.com/users/mikkokotila/repos","events_url":"https://api.github.com/users/mikkokotila/events{/privacy}","received_events_url":"https://api.github.com/users/mikkokotila/received_events","type":"User","site_admin":false}},{"id":2539370402,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUzOTM3MDQwMg==","url":"https://api.github.com/repos/autonomio/talos/issues/events/2539370402","actor":{"login":"Adnane017","id":31845955,"node_id":"MDQ6VXNlcjMxODQ1OTU1","avatar_url":"https://avatars.githubusercontent.com/u/31845955?v=4","gravatar_id":"","url":"https://api.github.com/users/Adnane017","html_url":"https://github.com/Adnane017","followers_url":"https://api.github.com/users/Adnane017/followers","following_url":"https://api.github.com/users/Adnane017/following{/other_user}","gists_url":"https://api.github.com/users/Adnane017/gists{/gist_id}","starred_url":"https://api.github.com/users/Adnane017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adnane017/subscriptions","organizations_url":"https://api.github.com/users/Adnane017/orgs","repos_url":"https://api.github.com/users/Adnane017/repos","events_url":"https://api.github.com/users/Adnane017/events{/privacy}","received_events_url":"https://api.github.com/users/Adnane017/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-08-07T09:16:12Z","performed_via_github_app":null}]