{"url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8","repository_url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge","labels_url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8/labels{/name}","comments_url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8/comments","events_url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8/events","html_url":"https://github.com/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8","id":465798739,"node_id":"MDU6SXNzdWU0NjU3OTg3Mzk=","number":8,"title":"batch_xs[index, :, :] = imgs[128:384, 128:384] TypeError: 'NoneType' object is not subscriptable","user":{"login":"cihan55555","id":52419007,"node_id":"MDQ6VXNlcjUyNDE5MDA3","avatar_url":"https://avatars.githubusercontent.com/u/52419007?v=4","gravatar_id":"","url":"https://api.github.com/users/cihan55555","html_url":"https://github.com/cihan55555","followers_url":"https://api.github.com/users/cihan55555/followers","following_url":"https://api.github.com/users/cihan55555/following{/other_user}","gists_url":"https://api.github.com/users/cihan55555/gists{/gist_id}","starred_url":"https://api.github.com/users/cihan55555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cihan55555/subscriptions","organizations_url":"https://api.github.com/users/cihan55555/orgs","repos_url":"https://api.github.com/users/cihan55555/repos","events_url":"https://api.github.com/users/cihan55555/events{/privacy}","received_events_url":"https://api.github.com/users/cihan55555/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-07-09T14:00:48Z","updated_at":"2019-10-28T11:15:31Z","closed_at":"2019-10-28T11:15:31Z","author_association":"NONE","active_lock_reason":null,"body":"Here is my code:\r\nfrom model_vnet3d import Vnet3dModule\r\nfrom util import convertMetaModelToPbModel\r\nimport numpy as np\r\nimport pandas as pd\r\nimport cv2\r\nimport os\r\nos.environ[\"CUDA_DEVICE_ORDER\"] = \"PCI_BUS_ID\"\r\nos.environ[\"CUDA_VISIBLE_DEVICES\"] = \"0\"\r\n\r\ndef train():\r\n    '''\r\n    Preprocessing for dataset\r\n    '''\r\n    # Read  data set (Train data from CSV file)\r\n    csvmaskdata = pd.read_csv('E:/LiTS---Liver/LiTS/dataprocess/trainY.csv')\r\n    csvimagedata = pd.read_csv('E:/LiTS---Liver/LiTS/dataprocess/trainX.csv')\r\n    maskdata = csvmaskdata.iloc[:, :].values\r\n    imagedata = csvimagedata.iloc[:, :].values\r\n    # shuffle imagedata and maskdata together\r\n    perm = np.arange(len(csvimagedata))\r\n    np.random.shuffle(perm)\r\n    imagedata = imagedata[perm]\r\n    maskdata = maskdata[perm]\r\n\r\n    Vnet3d = Vnet3dModule(128, 128, 16, channels=1, costname=\"dice coefficient\")\r\n    Vnet3d.train(imagedata, maskdata, \"Vnet3dModule.pd\", \"E:/LiTS---Liver/LiTS/log2/diceVnet3d/model/\", 0.001, 0.7, 100000, 1)\r\n\r\n\r\ndef predict0():\r\n    Vnet3d = Vnet3dModule(128, 128, 16, inference=True, model_path=\"E:\\LiTS---Liver\\LiTS\\log2\\diceVnet3d\\model\\Vnet3d.pd\")\r\n    for filenumber in range(30):\r\n        batch_xs = np.zeros(shape=(16, 128, 128))\r\n        for index in range(16):\r\n            imgs = cv2.imread(\r\n                \"E:\\LiTS---Liver\\LiTS\\\\test\\image\\\\\" + str(filenumber) + \"\\\\\" + str(index) + \".bmp\", 0)\r\n            batch_xs[index, :, :] = imgs[128:384, 128:384]\r\n\r\n        predictvalue = Vnet3d.prediction(batch_xs)\r\n\r\n        for index in range(16):\r\n            result = np.zeros(shape=(512, 512), dtype=np.uint8)\r\n            result[128:384, 128:384] = predictvalue[index]\r\n            kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5, 5))\r\n            result = cv2.morphologyEx(result, cv2.MORPH_CLOSE, kernel)\r\n            cv2.imwrite(\r\n                \"E:\\LiTS---Liver\\LiTS\\\\test\\image\\\\\" + str(filenumber) + \"\\\\\" + str(index) + \"mask.bmp\",\r\n                result)\r\n\r\n\r\ndef meta2pd():\r\n    convertMetaModelToPbModel(meta_model=\"E:\\LiTS---Liver\\LiTS\\log2\\diceVnet3d\\model\\Vnet3d.pd\", pb_model=\"model\")\r\n\r\n\r\n#train()\r\npredict0()\r\n#meta2pd()","closed_by":{"login":"junqiangchen","id":28638716,"node_id":"MDQ6VXNlcjI4NjM4NzE2","avatar_url":"https://avatars.githubusercontent.com/u/28638716?v=4","gravatar_id":"","url":"https://api.github.com/users/junqiangchen","html_url":"https://github.com/junqiangchen","followers_url":"https://api.github.com/users/junqiangchen/followers","following_url":"https://api.github.com/users/junqiangchen/following{/other_user}","gists_url":"https://api.github.com/users/junqiangchen/gists{/gist_id}","starred_url":"https://api.github.com/users/junqiangchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junqiangchen/subscriptions","organizations_url":"https://api.github.com/users/junqiangchen/orgs","repos_url":"https://api.github.com/users/junqiangchen/repos","events_url":"https://api.github.com/users/junqiangchen/events{/privacy}","received_events_url":"https://api.github.com/users/junqiangchen/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/junqiangchen/LiTS---Liver-Tumor-Segmentation-Challenge/issues/8/timeline","performed_via_github_app":null,"state_reason":"completed"}