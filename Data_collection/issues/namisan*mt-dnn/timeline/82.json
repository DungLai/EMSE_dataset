[{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/521657747","html_url":"https://github.com/namisan/mt-dnn/issues/82#issuecomment-521657747","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/82","id":521657747,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTY1Nzc0Nw==","user":{"login":"mazicwong","id":17029801,"node_id":"MDQ6VXNlcjE3MDI5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/17029801?v=4","gravatar_id":"","url":"https://api.github.com/users/mazicwong","html_url":"https://github.com/mazicwong","followers_url":"https://api.github.com/users/mazicwong/followers","following_url":"https://api.github.com/users/mazicwong/following{/other_user}","gists_url":"https://api.github.com/users/mazicwong/gists{/gist_id}","starred_url":"https://api.github.com/users/mazicwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazicwong/subscriptions","organizations_url":"https://api.github.com/users/mazicwong/orgs","repos_url":"https://api.github.com/users/mazicwong/repos","events_url":"https://api.github.com/users/mazicwong/events{/privacy}","received_events_url":"https://api.github.com/users/mazicwong/received_events","type":"User","site_admin":false},"created_at":"2019-08-15T14:18:22Z","updated_at":"2019-08-15T14:18:22Z","author_association":"NONE","body":"Paste the complete error\r\n```\r\n08/15/2019 10:10:38 Task [ 0] updates[     1] train loss[1.20420] remaining[0:25:15]\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 396, in <module>\r\n    main()\r\n  File \"train.py\", line 351, in main\r\n    model.update(batch_meta, batch_data) \r\n  File \"/data1/zqhuang/mtdnn/mt-dnn-master/mt_dnn/model.py\", line 150, in update\r\n    logits = self.mnetwork(*inputs)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data1/zqhuang/mtdnn/mt-dnn-master/mt_dnn/matcher.py\", line 99, in forward\r\n    all_encoder_layers, pooled_output = self.bert(input_ids, token_type_ids, attention_mask)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 881, in forward\r\n    head_mask=head_mask)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 498, in forward\r\n    hidden_states = layer_module(hidden_states, attention_mask, head_mask[i])\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 480, in forward\r\n    layer_output = self.output(intermediate_output, attention_output)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 462, in forward\r\n    hidden_states = self.LayerNorm(hidden_states + input_tensor)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 493, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data1/zqhuang/anaconda3/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 289, in forward\r\n    x = (x - u) / torch.sqrt(s + self.variance_epsilon)\r\nRuntimeError: CUDA error: device-side assert triggered\r\n```","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/521657747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mazicwong","id":17029801,"node_id":"MDQ6VXNlcjE3MDI5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/17029801?v=4","gravatar_id":"","url":"https://api.github.com/users/mazicwong","html_url":"https://github.com/mazicwong","followers_url":"https://api.github.com/users/mazicwong/followers","following_url":"https://api.github.com/users/mazicwong/following{/other_user}","gists_url":"https://api.github.com/users/mazicwong/gists{/gist_id}","starred_url":"https://api.github.com/users/mazicwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazicwong/subscriptions","organizations_url":"https://api.github.com/users/mazicwong/orgs","repos_url":"https://api.github.com/users/mazicwong/repos","events_url":"https://api.github.com/users/mazicwong/events{/privacy}","received_events_url":"https://api.github.com/users/mazicwong/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/521661049","html_url":"https://github.com/namisan/mt-dnn/issues/82#issuecomment-521661049","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/82","id":521661049,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTY2MTA0OQ==","user":{"login":"mazicwong","id":17029801,"node_id":"MDQ6VXNlcjE3MDI5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/17029801?v=4","gravatar_id":"","url":"https://api.github.com/users/mazicwong","html_url":"https://github.com/mazicwong","followers_url":"https://api.github.com/users/mazicwong/followers","following_url":"https://api.github.com/users/mazicwong/following{/other_user}","gists_url":"https://api.github.com/users/mazicwong/gists{/gist_id}","starred_url":"https://api.github.com/users/mazicwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazicwong/subscriptions","organizations_url":"https://api.github.com/users/mazicwong/orgs","repos_url":"https://api.github.com/users/mazicwong/repos","events_url":"https://api.github.com/users/mazicwong/events{/privacy}","received_events_url":"https://api.github.com/users/mazicwong/received_events","type":"User","site_admin":false},"created_at":"2019-08-15T14:27:43Z","updated_at":"2019-08-15T14:27:43Z","author_association":"NONE","body":"Paste the data I used to train\r\n```\r\n$ head -n 3 data/canonical_data/mt_dnn_b_cased_lower/yesno_dev.json \r\n\r\n{\"uid\": \"0\", \"label\": 0, \"token_id\": [101, 1372, 6206, 860, 1798, 2345, 6655, 1166, 1920, 4638, 1922, 6814, 1146, 511, 1469, 818, 862, 1501, 4905, 6963, 1377, 809, 6981, 4905, 511, 102], \"type_id\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\r\n{\"uid\": \"1\", \"label\": 0, \"token_id\": [101, 1880, 5988, 3221, 4660, 6001, 117, 2124, 1391, 6011, 2094, 4638, 102], \"type_id\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\r\n{\"uid\": \"2\", \"label\": 3, \"token_id\": [101, 1880, 5988, 679, 3221, 6001, 8024, 3221, 4260, 6121, 1220, 4289, 800, 812, 1391, 6011, 2094, 5721, 6066, 784, 720, 4638, 8024, 3221, 3300, 4660, 4638, 102], \"type_id\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}\r\n```\r\n\r\nAnd supply more infomations:\r\n```\r\nSize of vocab.txt: 30522\r\nHas set --label_size=4 in train.py\r\n```\r\nThanks and waiting for your help :)","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/521661049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mazicwong","id":17029801,"node_id":"MDQ6VXNlcjE3MDI5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/17029801?v=4","gravatar_id":"","url":"https://api.github.com/users/mazicwong","html_url":"https://github.com/mazicwong","followers_url":"https://api.github.com/users/mazicwong/followers","following_url":"https://api.github.com/users/mazicwong/following{/other_user}","gists_url":"https://api.github.com/users/mazicwong/gists{/gist_id}","starred_url":"https://api.github.com/users/mazicwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazicwong/subscriptions","organizations_url":"https://api.github.com/users/mazicwong/orgs","repos_url":"https://api.github.com/users/mazicwong/repos","events_url":"https://api.github.com/users/mazicwong/events{/privacy}","received_events_url":"https://api.github.com/users/mazicwong/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/559666305","html_url":"https://github.com/namisan/mt-dnn/issues/82#issuecomment-559666305","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/82","id":559666305,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTY2NjMwNQ==","user":{"login":"Shi-ma","id":27803567,"node_id":"MDQ6VXNlcjI3ODAzNTY3","avatar_url":"https://avatars.githubusercontent.com/u/27803567?v=4","gravatar_id":"","url":"https://api.github.com/users/Shi-ma","html_url":"https://github.com/Shi-ma","followers_url":"https://api.github.com/users/Shi-ma/followers","following_url":"https://api.github.com/users/Shi-ma/following{/other_user}","gists_url":"https://api.github.com/users/Shi-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/Shi-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shi-ma/subscriptions","organizations_url":"https://api.github.com/users/Shi-ma/orgs","repos_url":"https://api.github.com/users/Shi-ma/repos","events_url":"https://api.github.com/users/Shi-ma/events{/privacy}","received_events_url":"https://api.github.com/users/Shi-ma/received_events","type":"User","site_admin":false},"created_at":"2019-11-29T05:42:23Z","updated_at":"2019-11-29T05:44:03Z","author_association":"NONE","body":"It's maybe same as following problem https://github.com/huggingface/transformers/issues/1805. The vocab size of BERT-Base-Chinese is 21128. Please check your vocab size of pre-trained model and training config. ","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/559666305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Shi-ma","id":27803567,"node_id":"MDQ6VXNlcjI3ODAzNTY3","avatar_url":"https://avatars.githubusercontent.com/u/27803567?v=4","gravatar_id":"","url":"https://api.github.com/users/Shi-ma","html_url":"https://github.com/Shi-ma","followers_url":"https://api.github.com/users/Shi-ma/followers","following_url":"https://api.github.com/users/Shi-ma/following{/other_user}","gists_url":"https://api.github.com/users/Shi-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/Shi-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shi-ma/subscriptions","organizations_url":"https://api.github.com/users/Shi-ma/orgs","repos_url":"https://api.github.com/users/Shi-ma/repos","events_url":"https://api.github.com/users/Shi-ma/events{/privacy}","received_events_url":"https://api.github.com/users/Shi-ma/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/570078419","html_url":"https://github.com/namisan/mt-dnn/issues/82#issuecomment-570078419","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/82","id":570078419,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDA3ODQxOQ==","user":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false},"created_at":"2020-01-01T19:46:13Z","updated_at":"2020-01-01T19:46:13Z","author_association":"OWNER","body":"@Shi-ma yes, when index is out of array, it gives similar errors. \r\n@mazicwong  make sure you used a correct tokenizer/vocab.","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/570078419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false}},{"id":2916678043,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjkxNjY3ODA0Mw==","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2916678043","actor":{"login":"mazicwong","id":17029801,"node_id":"MDQ6VXNlcjE3MDI5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/17029801?v=4","gravatar_id":"","url":"https://api.github.com/users/mazicwong","html_url":"https://github.com/mazicwong","followers_url":"https://api.github.com/users/mazicwong/followers","following_url":"https://api.github.com/users/mazicwong/following{/other_user}","gists_url":"https://api.github.com/users/mazicwong/gists{/gist_id}","starred_url":"https://api.github.com/users/mazicwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazicwong/subscriptions","organizations_url":"https://api.github.com/users/mazicwong/orgs","repos_url":"https://api.github.com/users/mazicwong/repos","events_url":"https://api.github.com/users/mazicwong/events{/privacy}","received_events_url":"https://api.github.com/users/mazicwong/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-01T19:46:13Z","performed_via_github_app":null},{"id":2916678044,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5MTY2NzgwNDQ=","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2916678044","actor":{"login":"mazicwong","id":17029801,"node_id":"MDQ6VXNlcjE3MDI5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/17029801?v=4","gravatar_id":"","url":"https://api.github.com/users/mazicwong","html_url":"https://github.com/mazicwong","followers_url":"https://api.github.com/users/mazicwong/followers","following_url":"https://api.github.com/users/mazicwong/following{/other_user}","gists_url":"https://api.github.com/users/mazicwong/gists{/gist_id}","starred_url":"https://api.github.com/users/mazicwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazicwong/subscriptions","organizations_url":"https://api.github.com/users/mazicwong/orgs","repos_url":"https://api.github.com/users/mazicwong/repos","events_url":"https://api.github.com/users/mazicwong/events{/privacy}","received_events_url":"https://api.github.com/users/mazicwong/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-01T19:46:13Z","performed_via_github_app":null},{"id":2916678045,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjkxNjY3ODA0NQ==","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2916678045","actor":{"login":"Shi-ma","id":27803567,"node_id":"MDQ6VXNlcjI3ODAzNTY3","avatar_url":"https://avatars.githubusercontent.com/u/27803567?v=4","gravatar_id":"","url":"https://api.github.com/users/Shi-ma","html_url":"https://github.com/Shi-ma","followers_url":"https://api.github.com/users/Shi-ma/followers","following_url":"https://api.github.com/users/Shi-ma/following{/other_user}","gists_url":"https://api.github.com/users/Shi-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/Shi-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shi-ma/subscriptions","organizations_url":"https://api.github.com/users/Shi-ma/orgs","repos_url":"https://api.github.com/users/Shi-ma/repos","events_url":"https://api.github.com/users/Shi-ma/events{/privacy}","received_events_url":"https://api.github.com/users/Shi-ma/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-01T19:46:13Z","performed_via_github_app":null},{"id":2916678047,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5MTY2NzgwNDc=","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2916678047","actor":{"login":"Shi-ma","id":27803567,"node_id":"MDQ6VXNlcjI3ODAzNTY3","avatar_url":"https://avatars.githubusercontent.com/u/27803567?v=4","gravatar_id":"","url":"https://api.github.com/users/Shi-ma","html_url":"https://github.com/Shi-ma","followers_url":"https://api.github.com/users/Shi-ma/followers","following_url":"https://api.github.com/users/Shi-ma/following{/other_user}","gists_url":"https://api.github.com/users/Shi-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/Shi-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shi-ma/subscriptions","organizations_url":"https://api.github.com/users/Shi-ma/orgs","repos_url":"https://api.github.com/users/Shi-ma/repos","events_url":"https://api.github.com/users/Shi-ma/events{/privacy}","received_events_url":"https://api.github.com/users/Shi-ma/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-01T19:46:13Z","performed_via_github_app":null},{"id":2916678196,"node_id":"MDExOkNsb3NlZEV2ZW50MjkxNjY3ODE5Ng==","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2916678196","actor":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-01-01T19:46:32Z","state_reason":null,"performed_via_github_app":null}]