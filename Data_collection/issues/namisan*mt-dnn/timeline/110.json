[{"id":2765154544,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjc2NTE1NDU0NA==","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2765154544","actor":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-11-02T10:38:47Z","performed_via_github_app":null},{"id":2765154545,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3NjUxNTQ1NDU=","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2765154545","actor":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-11-02T10:38:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/549084082","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-549084082","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":549084082,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTA4NDA4Mg==","user":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false},"created_at":"2019-11-02T21:46:30Z","updated_at":"2019-11-02T21:46:30Z","author_association":"NONE","body":"There are not json files for NER or pos or chunk. Am I suppose to produce them?\r\nfind . -name \"*json\"\r\n./data/domain_adaptation/snli_001_train.json\r\n./data/domain_adaptation/scitail_train_shuff.json\r\n./data/domain_adaptation/snli_test.json\r\n./data/domain_adaptation/scitail_1_train.json\r\n./data/domain_adaptation/snli_1_train.json\r\n./data/domain_adaptation/snli_5_train.json\r\n./data/domain_adaptation/snli_dev.json\r\n./data/domain_adaptation/scitail_train.json\r\n./data/domain_adaptation/scitail_01_train.json\r\n./data/domain_adaptation/scitail_dev.json\r\n./data/domain_adaptation/snli_train.json\r\n./data/domain_adaptation/scitail_001_train.json\r\n./data/domain_adaptation/snli_train_shuff.json\r\n./data/domain_adaptation/scitail_5_train.json\r\n./data/domain_adaptation/scitail_test.json\r\n./data/domain_adaptation/snli_01_train.json\r\n./data/canonical_data/bert_uncased_lower/qqp_dev.json\r\n./data/canonical_data/bert_uncased_lower/mnli_matched_test.json\r\n./data/canonical_data/bert_uncased_lower/qnli_train.json\r\n./data/canonical_data/bert_uncased_lower/snli_test.json\r\n./data/canonical_data/bert_uncased_lower/sst_dev.json\r\n./data/canonical_data/bert_uncased_lower/wnli_test.json\r\n./data/canonical_data/bert_uncased_lower/sst_test.json\r\n./data/canonical_data/bert_uncased_lower/mnli_train.json\r\n./data/canonical_data/bert_uncased_lower/mrpc_dev.json\r\n./data/canonical_data/bert_uncased_lower/wnli_train.json\r\n./data/canonical_data/bert_uncased_lower/stsb_dev.json\r\n./data/canonical_data/bert_uncased_lower/snli_dev.json\r\n./data/canonical_data/bert_uncased_lower/mnli_mismatched_test.json\r\n./data/canonical_data/bert_uncased_lower/cola_test.json\r\n./data/canonical_data/bert_uncased_lower/scitail_train.json\r\n./data/canonical_data/bert_uncased_lower/qqp_train.json\r\n./data/canonical_data/bert_uncased_lower/rte_test.json\r\n./data/canonical_data/bert_uncased_lower/scitail_dev.json\r\n./data/canonical_data/bert_uncased_lower/cola_dev.json\r\n./data/canonical_data/bert_uncased_lower/snli_train.json\r\n./data/canonical_data/bert_uncased_lower/mrpc_test.json\r\n./data/canonical_data/bert_uncased_lower/mrpc_train.json\r\n./data/canonical_data/bert_uncased_lower/qnli_dev.json\r\n./data/canonical_data/bert_uncased_lower/rte_train.json\r\n./data/canonical_data/bert_uncased_lower/qnli_test.json\r\n./data/canonical_data/bert_uncased_lower/rte_dev.json\r\n./data/canonical_data/bert_uncased_lower/sst_train.json\r\n./data/canonical_data/bert_uncased_lower/cola_train.json\r\n./data/canonical_data/bert_uncased_lower/qqp_test.json\r\n./data/canonical_data/bert_uncased_lower/stsb_train.json\r\n./data/canonical_data/bert_uncased_lower/wnli_dev.json\r\n./data/canonical_data/bert_uncased_lower/mnli_matched_dev.json\r\n./data/canonical_data/bert_uncased_lower/stsb_test.json\r\n./data/canonical_data/bert_uncased_lower/mnli_mismatched_dev.json\r\n./data/canonical_data/bert_uncased_lower/scitail_test.json\r\n./data/canonical_data/data/domain_adaptation/snli_001_train.json\r\n./data/canonical_data/data/domain_adaptation/scitail_train_shuff.json\r\n./data/canonical_data/data/domain_adaptation/snli_test.json\r\n./data/canonical_data/data/domain_adaptation/scitail_1_train.json\r\n./data/canonical_data/data/domain_adaptation/snli_1_train.json\r\n./data/canonical_data/data/domain_adaptation/snli_5_train.json\r\n./data/canonical_data/data/domain_adaptation/snli_dev.json\r\n./data/canonical_data/data/domain_adaptation/scitail_train.json\r\n./data/canonical_data/data/domain_adaptation/scitail_01_train.json\r\n./data/canonical_data/data/domain_adaptation/scitail_dev.json\r\n./data/canonical_data/data/domain_adaptation/snli_train.json\r\n./data/canonical_data/data/domain_adaptation/scitail_001_train.json\r\n./data/canonical_data/data/domain_adaptation/snli_train_shuff.json\r\n./data/canonical_data/data/domain_adaptation/scitail_5_train.json\r\n./data/canonical_data/data/domain_adaptation/scitail_test.json\r\n./data/canonical_data/data/domain_adaptation/snli_01_train.json\r\n./data/canonical_data/data/squad/dev.json\r\n./data/canonical_data/data/squad/train.json\r\n./data/canonical_data/data/squad_v2/dev.json\r\n./data/canonical_data/data/squad_v2/train.json\r\n./data/canonical_data/mt_dnn_models/roberta/encoder.json\r\n./data/squad/dev.json\r\n./data/squad/train.json\r\n./data/squad_v2/dev.json\r\n./data/squad_v2/train.json\r\n./hnn/script/hnn_config_large.json\r\n./sample_data/output/qqp_dev.json\r\n./sample_data/output/mnli_matched_test.json\r\n./sample_data/output/qnli_train.json\r\n./sample_data/output/snli_test.json\r\n./sample_data/output/sst_dev.json\r\n./sample_data/output/wnli_test.json\r\n./sample_data/output/sst_test.json\r\n./sample_data/output/mnli_train.json\r\n./sample_data/output/mrpc_dev.json\r\n./sample_data/output/wnli_train.json\r\n./sample_data/output/stsb_dev.json\r\n./sample_data/output/snli_dev.json\r\n./sample_data/output/mnli_mismatched_test.json\r\n./sample_data/output/cola_test.json\r\n./sample_data/output/scitail_train.json\r\n./sample_data/output/qqp_train.json\r\n./sample_data/output/rte_test.json\r\n./sample_data/output/scitail_dev.json\r\n./sample_data/output/cola_dev.json\r\n./sample_data/output/snli_train.json\r\n./sample_data/output/mrpc_test.json\r\n./sample_data/output/mrpc_train.json\r\n./sample_data/output/qnli_dev.json\r\n./sample_data/output/rte_train.json\r\n./sample_data/output/qnli_test.json\r\n./sample_data/output/rte_dev.json\r\n./sample_data/output/sst_train.json\r\n./sample_data/output/cola_train.json\r\n./sample_data/output/qqp_test.json\r\n./sample_data/output/stsb_train.json\r\n./sample_data/output/wnli_dev.json\r\n./sample_data/output/mnli_matched_dev.json\r\n./sample_data/output/stsb_test.json\r\n./sample_data/output/mnli_mismatched_dev.json\r\n./sample_data/output/scitail_test.json\r\n./sample_data/checkpoint/mnli_mismatched_test_scores_0.json\r\n./sample_data/checkpoint/mnli_matched_dev_scores_0.json\r\n./sample_data/checkpoint/config.json\r\n./sample_data/checkpoint/mnli_mismatched_dev_scores_0.json\r\n./sample_data/checkpoint/mnli_matched_test_scores_0.json\r\n./checkpoint/config.json\r\n./mt_dnn_models/roberta/encoder.json\r\n","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/549084082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/549084741","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-549084741","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":549084741,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTA4NDc0MQ==","user":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false},"created_at":"2019-11-02T21:56:10Z","updated_at":"2019-11-02T21:57:44Z","author_association":"NONE","body":"And if I change (in train.py)\r\n\\-        train_path = os.path.join(data_dir, '{}_train.json'.format(dataset))\r\n\\+        train_path = os.path.join(data_dir, '{}_train.tsv'.format(dataset))\r\nthen\r\nI still have have a new one:\r\n```\r\npython train.py --data_dir ner/ --init_checkpoint mt_dnn_models/bert_model_base_uncased.pt --train_dataset ner --test_dataset ner --task_def experiments/ner/ner_task_def.yml \r\nBetter speed can be achieved with apex installed from https://www.github.com/nvidia/apex.\r\nNamespace(adam_eps=1e-06, answer_att_hidden_size=128, answer_att_type='bilinear', answer_dropout_p=0.1, answer_mem_drop_p=0.1, answer_mem_type=1, answer_merge_opt=1, answer_num_turn=5, answer_opt=0, answer_rnn_type='gru', answer_sum_att_type='bilinear', answer_weight_norm_on=False, batch_size=8, batch_size_eval=8, bert_dropout_p=0.1, bert_l2norm=0.0, cuda=True, data_dir='ner/', data_sort_on=False, dropout_p=0.1, dropout_w=0.0, dump_state_on=False, ema_gamma=0.995, ema_opt=0, embedding_opt=0, encoder_type=<EncoderModelType.BERT: 1>, epochs=5, fp16=False, fp16_opt_level='O1', freeze_layers=-1, global_grad_clipping=1.0, glue_format_on=False, grad_accumulation_step=1, grad_clipping=0, have_lr_scheduler=True, init_checkpoint='mt_dnn_models/bert_model_base_uncased.pt', init_ratio=1, label_size='3', learning_rate=5e-05, log_file='mt-dnn-train.log', log_per_updates=500, lr_gamma=0.5, max_seq_len=512, mem_cum_type='simple', mix_opt=0, model_ckpt='checkpoints/model_0.pt', momentum=0, mtl_opt=0, multi_gpu_on=False, multi_step_lr='10,20,30', name='farmer', optimizer='adamax', output_dir='checkpoint', ratio=0, resume=False, save_per_updates=10000, save_per_updates_on=False, scheduler_type='ms', seed=2018, task_def='experiments/ner/ner_task_def.yml', tensorboard=False, tensorboard_logdir='tensorboard_logdir', test_datasets=['ner'], train_datasets=['ner'], update_bert_opt=0, vb_dropout=True, warmup=0.1, warmup_schedule='warmup_linear', weight_decay=0)\r\n11/02/2019 11:51:21 0\r\n11/02/2019 11:51:21 Launching the MT-DNN training\r\ndataset:  ner\r\nprefix:  ner\r\nprefix:  ner\r\ntask_defs.n_class_map:  {'ner': 12, 'pos': 49, 'chunk': 23}\r\n11/02/2019 11:51:21 Loading ner/ner_train.tsv as task 0\r\ntrain_path:  ner/ner_train.tsv\r\ntask_type:  TaskType.SeqenceLabeling\r\nargs.max_seq_len:  512\r\npath:  ner/ner_train.tsv\r\nline:  0\t['I-ORG', 'O', 'I-MISC', 'O', 'O', 'O', 'I-MISC', 'O', 'O']\t['EU', 'rejects', 'German', 'call', 'to', 'boycott', 'British', 'lamb', '.']\r\n\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 441, in <module>\r\n    main()\r\n  File \"train.py\", line 214, in main\r\n    train_data = BatchGen(BatchGen.load(train_path, True, task_type=task_type, maxlen=args.max_seq_len),\r\n  File \"/home/ant/multitask/mt-dnn/mt_dnn/batcher.py\", line 59, in load\r\n    sample = json.loads(line)\r\n  File \"/home/ant/anaconda3/envs/mt-dnn/lib/python3.7/json/__init__.py\", line 348, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/home/ant/anaconda3/envs/mt-dnn/lib/python3.7/json/decoder.py\", line 340, in decode\r\n    raise JSONDecodeError(\"Extra data\", s, end)\r\njson.decoder.JSONDecodeError: Extra data: line 1 column 3 (char 2)\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/549084741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/549512102","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-549512102","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":549512102,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTUxMjEwMg==","user":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false},"created_at":"2019-11-04T19:34:06Z","updated_at":"2019-11-04T19:34:06Z","author_association":"NONE","body":"Also, I tried to run prepro_std.py,\r\nbut I think that it does not support sequence tasks:\r\nValueError: DataFormat.Seqence\r\n\r\npython prepro_std.py --model bert-base-uncased --root_dir ner --task_def experiments/ner/ner_task_def.yml \r\nBetter speed can be achieved with apex installed from https://www.github.com/nvidia/apex.\r\n11/04/2019 09:31:52 Task ner\r\ndata_format:  DataFormat.Seqence\r\nTraceback (most recent call last):\r\n  File \"prepro_std.py\", line 551, in <module>\r\n    main(args)\r\n  File \"prepro_std.py\", line 536, in main\r\n    label_mapper)\r\n  File \"prepro_std.py\", line 433, in load_data\r\n    raise ValueError(data_format)\r\nValueError: DataFormat.Seqence\r\n\r\n","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/549512102/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/565703880","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-565703880","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":565703880,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTcwMzg4MA==","user":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false},"created_at":"2019-12-14T10:11:13Z","updated_at":"2019-12-14T10:11:13Z","author_association":"NONE","body":"So, I added the case ``` or data_format == DataFormat.Seqence ``` to have the same handling as premise:\r\n```\r\n+    import ast\r\n     for line in open(file_path, encoding=\"utf-8\"):\r\n         fields = line.strip(\"\\n\").split(\"\\t\")\r\n-        if data_format == DataFormat.PremiseOnly:\r\n+        if data_format == DataFormat.PremiseOnly or data_format == DataFormat.Seqence:\r\n             assert len(fields) == 3\r\n-            row = {\"uid\": fields[0], \"label\": fields[1], \"premise\": fields[2]}\r\n+            lab = ast.literal_eval(fields[1])\r\n+            prem = ast.literal_eval(fields[2])\r\n+            assert (len(lab) == len(prem))\r\n+            row = {\"uid\": fields[0], \"label\": lab, \"premise\": prem }\r\n```\r\nthen, I ran,\r\n```python prepro_std.py --model bert-base-uncased --root_dir ner --task_def experiments/ner/ner_task_def.yml```\r\nand the ner_train.json was created.\r\nHere are its first lines:\r\n```\r\n0\t['I-ORG', 'O', 'I-MISC', 'O', 'O', 'O', 'I-MISC', 'O', 'O']\t['EU', 'rejects', 'German', 'call', 'to', 'boycott', 'British', 'lamb', '.']\r\n1\t['I-PER', 'I-PER']\t['Peter', 'Blackburn']\r\n2\t['I-LOC', 'O']\t['BRUSSELS', '1996-08-22']\r\n3\t['O', 'I-ORG', 'I-ORG', 'O', 'O', 'O', 'O', 'O', 'O', 'I-MISC', 'O', 'O', 'O', 'O', 'O', 'I-MISC', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O', 'O']\t['The', 'European', 'Commission', 'said', 'on', 'Thursday', 'it', 'disagreed', 'with', 'German', 'advice', 'to', 'consumers', 'to', 'shun', 'British', 'lamb', 'until', 'scientists', 'determine', 'whether', 'mad', 'cow', 'disease', 'can', 'be', 'transmitted', 'to', 'sheep', '.']\r\n```\r\nI ran\r\n```python train.py --data_dir ner/bert_uncased/ --init_checkpoint mt_dnn_models/bert_model_base_uncased.pt --train_dataset ner --test_dataset ner --task_def experiments/ner/ner_task_def.yml```\r\nand a new error occurs:\r\n```\r\n12/12/2019 11:17:26 Total number of params: 109491468\r\n12/12/2019 11:17:26 At epoch 0\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 434, in <module>\r\n    main()\r\n  File \"train.py\", line 368, in main\r\n    batch_meta, batch_data = next(all_iters[task_id])\r\n  File \"/home/polykratis/mt-dnn/mt_dnn/batcher.py\", line 149, in __iter__\r\n    tlab[i, : ll] = torch.LongTensor(label)\r\nTypeError: an integer is required (got type str)\r\n```\r\nI changed symbols ``` 'I-ORG', 'O', etc ``` with numbers (using sed and substitute),\r\nbut this leads to gpu error (assert trigger).\r\n\r\nStill need help with that.","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/565703880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/565703962","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-565703962","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":565703962,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTcwMzk2Mg==","user":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false},"created_at":"2019-12-14T10:12:47Z","updated_at":"2019-12-14T10:12:47Z","author_association":"NONE","body":"Any one user of the library has implemented this, please contact me, and share how you did it if you want.","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/565703962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/569831151","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-569831151","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":569831151,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTgzMTE1MQ==","user":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false},"created_at":"2019-12-31T00:00:54Z","updated_at":"2019-12-31T00:00:54Z","author_association":"OWNER","body":"you need to give ner data. ","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/569831151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false}},{"id":2914887111,"node_id":"MDExOkNsb3NlZEV2ZW50MjkxNDg4NzExMQ==","url":"https://api.github.com/repos/namisan/mt-dnn/issues/events/2914887111","actor":{"login":"namisan","id":3060273,"node_id":"MDQ6VXNlcjMwNjAyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/3060273?v=4","gravatar_id":"","url":"https://api.github.com/users/namisan","html_url":"https://github.com/namisan","followers_url":"https://api.github.com/users/namisan/followers","following_url":"https://api.github.com/users/namisan/following{/other_user}","gists_url":"https://api.github.com/users/namisan/gists{/gist_id}","starred_url":"https://api.github.com/users/namisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namisan/subscriptions","organizations_url":"https://api.github.com/users/namisan/orgs","repos_url":"https://api.github.com/users/namisan/repos","events_url":"https://api.github.com/users/namisan/events{/privacy}","received_events_url":"https://api.github.com/users/namisan/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-12-31T00:00:54Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/569892930","html_url":"https://github.com/namisan/mt-dnn/issues/110#issuecomment-569892930","issue_url":"https://api.github.com/repos/namisan/mt-dnn/issues/110","id":569892930,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTg5MjkzMA==","user":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false},"created_at":"2019-12-31T09:06:15Z","updated_at":"2019-12-31T09:06:15Z","author_association":"NONE","body":"You are wrong. Show a running example","reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/comments/569892930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antgr","id":2175768,"node_id":"MDQ6VXNlcjIxNzU3Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2175768?v=4","gravatar_id":"","url":"https://api.github.com/users/antgr","html_url":"https://github.com/antgr","followers_url":"https://api.github.com/users/antgr/followers","following_url":"https://api.github.com/users/antgr/following{/other_user}","gists_url":"https://api.github.com/users/antgr/gists{/gist_id}","starred_url":"https://api.github.com/users/antgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antgr/subscriptions","organizations_url":"https://api.github.com/users/antgr/orgs","repos_url":"https://api.github.com/users/antgr/repos","events_url":"https://api.github.com/users/antgr/events{/privacy}","received_events_url":"https://api.github.com/users/antgr/received_events","type":"User","site_admin":false}}]