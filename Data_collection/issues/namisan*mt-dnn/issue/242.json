{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/242","repository_url":"https://api.github.com/repos/namisan/mt-dnn","labels_url":"https://api.github.com/repos/namisan/mt-dnn/issues/242/labels{/name}","comments_url":"https://api.github.com/repos/namisan/mt-dnn/issues/242/comments","events_url":"https://api.github.com/repos/namisan/mt-dnn/issues/242/events","html_url":"https://github.com/namisan/mt-dnn/issues/242","id":1423345398,"node_id":"I_kwDOCjnaNM5U1ob2","number":242,"title":"Project dependencies may have API risk issues","user":{"login":"PyDeps","id":109138844,"node_id":"U_kgDOBoFTnA","avatar_url":"https://avatars.githubusercontent.com/u/109138844?v=4","gravatar_id":"","url":"https://api.github.com/users/PyDeps","html_url":"https://github.com/PyDeps","followers_url":"https://api.github.com/users/PyDeps/followers","following_url":"https://api.github.com/users/PyDeps/following{/other_user}","gists_url":"https://api.github.com/users/PyDeps/gists{/gist_id}","starred_url":"https://api.github.com/users/PyDeps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PyDeps/subscriptions","organizations_url":"https://api.github.com/users/PyDeps/orgs","repos_url":"https://api.github.com/users/PyDeps/repos","events_url":"https://api.github.com/users/PyDeps/events{/privacy}","received_events_url":"https://api.github.com/users/PyDeps/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-10-26T02:34:46Z","updated_at":"2022-10-26T02:34:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, In **mt-dnn**, inappropriate dependency versioning constraints can cause risks.\r\n\r\nBelow are the dependencies and version constraints that the project is using\r\n\r\n```\r\nnumpy\r\ntorch==1.5.0\r\ntqdm\r\ncolorlog\r\nboto3\r\npytorch-pretrained-bert==v0.6.0\r\nregex\r\nscikit-learn\r\npyyaml\r\npytest\r\nsentencepiece\r\ntensorboardX\r\ntensorboard\r\nfuture\r\napex\r\nseqeval==0.0.12\r\ntransformers==4.6.0\r\n```\r\n\r\nThe version constraint **==** will introduce the risk of dependency conflicts because the scope of dependencies is too strict.\r\nThe version constraint **No Upper Bound** and **\\*** will introduce the risk of the missing API Error because the latest version of the dependencies may remove some APIs.\r\n\r\nAfter further analysis, in this project,\r\nThe version constraint of dependency **numpy** can be changed to *>=1.8.0,<=1.23.0rc3*.\r\nThe version constraint of dependency **tqdm** can be changed to *>=4.36.0,<=4.64.0*.\r\nThe version constraint of dependency **pytorch-pretrained-bert** can be changed to *>=0.1.1,<=0.3.0*.\r\nThe version constraint of dependency **scikit-learn** can be changed to *>=0.15.0,<=0.20.4*.\r\nThe version constraint of dependency **future** can be changed to *>=0.12.0,<=0.18.2*.\r\nThe version constraint of dependency **transformers** can be changed to *>=2.0.0,<=4.1.1*.\r\n\r\nThe above modification suggestions can reduce the dependency conflicts as much as possible, \r\nand introduce the latest version as much as possible without calling Error in the projects.\r\n\r\nThe invocation of the current project includes all the following methods.\r\n\r\n<details><summary>The calling methods from the numpy</summary>\r\n <pre>numpy.ma.masked_array\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the tqdm</summary>\r\n <pre>tqdm.tqdm\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the pytorch-pretrained-bert</summary>\r\n <pre>pytorch_pretrained_bert.modeling.BertLayerNorm\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the scikit-learn</summary>\r\n <pre>sklearn.metrics.f1_score\r\nrandom.choice\r\nsklearn.metrics.accuracy_score\r\nsklearn.metrics.matthews_corrcoef\r\nsklearn.metrics.roc_auc_score\r\nsklearn.metrics.confusion_matrix\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the future</summary>\r\n <pre>time.strftime\r\ndatetime.datetime.now\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the transformers</summary>\r\n <pre>transformers.AutoTokenizer.from_pretrained\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the all methods</summary>\r\n <pre>plt.clf\r\n_make_qid_to_has_ans\r\ngrad.abs.add_\r\nsorted.append\r\ntorch.nn.Tanh\r\nscore.reshape.tolist.numpy\r\nos.path.isdir\r\ntorch.erf\r\nlogging.StreamHandler.setFormatter\r\nself._task_def_dic.items\r\nlayer_module\r\nmodule.register_forward_pre_hook\r\nsubprocess.call.strip\r\niter\r\nmake_qid_to_has_ans.items\r\nself._prepare_model_input\r\nrnn_cls\r\nm.contiguous\r\nsrc.items\r\nset\r\ndata_utils.log_wrapper.create_logger.warning\r\nnumpy.ma.masked_array\r\nextra_indices.tolist.tolist\r\nmask.size\r\noutput_dir.os.path.join.open.read\r\nself.shadow.items\r\nfind_best_thresh\r\nself.qkv_head_dim.self.num_heads.bsz.src_len.k.contiguous.view.transpose\r\nfind_all_best_thresh\r\nmin\r\ntruncate_seq_pair\r\ndata.get.str.lower\r\nscore.numpy.numpy\r\nset_config\r\nself.dropout.transpose\r\ntransformers.get_polynomial_decay_schedule_with_warmup\r\nkey_padding_mask.unsqueeze.unsqueeze\r\ninput_lengths.append\r\nself.tok2ind.keys\r\nfinal_predict.append\r\npassage.replace.replace\r\nprefix.format.opt.get.upper\r\nlogging.StreamHandler\r\nf.readlines\r\nlogging.StreamHandler.setLevel\r\n_get_raw_scores\r\ntorch.nn.functional.cross_entropy\r\nline.strip.split\r\ntqdm.tqdm\r\nprepare_validation_features\r\nAttentionWrapper\r\nrange\r\nformat.startswith\r\nself._tokenizer.vocab.keys\r\ntokens_b.extend\r\nscores.data.masked_fill_\r\nqb.new_dict.cpu.numpy\r\nrnn_type.upper.upper\r\ndelattr\r\nscore.numpy.tolist\r\ndata_utils.task_def.EncoderModelType\r\nmlm_p.view.size\r\nshutil.rmtree\r\nload_stsb\r\nself.AdamaxW.super.__init__\r\nself.kd_task_loss_criterion.append\r\nself.dropout.bmm\r\npartial_feature\r\ndata_utils.log_wrapper.create_logger.error\r\nx.size\r\nself.SmartPerturbation.super.__init__\r\ntorch.tanh\r\nself.eff_perturb.update\r\ncopy.deepcopy.item\r\nrows.append\r\nkey_padding_mask.unsqueeze\r\nscore.reshape.tolist\r\nself.linear.contiguous\r\ntest_prefix.lower\r\nself.score_func\r\nload_qqp\r\nself.SimpleFlatSim.super.__init__\r\nself.BilinearSum.super.__init__\r\nmake_qid_to_has_ans.values\r\njson.dumps\r\nextract_answers_from_features\r\nx_flat.self.linear.view\r\nself.rnn.new\r\nos.path.exists\r\nTaskDef\r\ntext.lower\r\nround\r\nself.Pooler.super.__init__\r\nself.decoder\r\nself.dropout\r\ncopy.deepcopy.extend\r\nself.DropoutWrapper.super.__init__\r\nself.y_linear\r\nlogging.FileHandler\r\ninputs.append\r\ndata_utils.vocab.Vocabulary\r\nSanPooler\r\nnumpy.random.seed\r\nx1.contiguous.view\r\nargs.train_datasets.split\r\nself._global_map.get\r\ni.multi_task_train_data.len.i.start.datetime.now.str.split\r\nsearch_index\r\ntorch.float32.target.detach.F.softmax.sqrt_\r\nkb.new_dict.cpu.numpy\r\nmt_dnn.batcher.Collater\r\ntorch.device\r\nopen\r\nkey.transpose.size\r\nmasked_lm_positions.append\r\ncollections.OrderedDict\r\ntorch.max\r\ntorch.sum\r\ntext.split\r\nrandom.randint\r\nself.dropout.contiguous\r\ntorch.unbind\r\nx1_flat.self.proj_1.self.f.view.bmm\r\nself.qkv_head_dim.self.num_heads.bsz.src_len.v.contiguous.view.transpose.contiguous\r\nexperiments.superglue.superglue_utils.save\r\nall_encoder_layers.append\r\ny.unsqueeze.expand_as.unsqueeze\r\nself.optimizer.zero_grad\r\ndata_utils.tokenizer_utils.create_tokenizer\r\nself.encode\r\nqa.get\r\nmt_dnn.batcher.DistTaskDataset\r\nbatch_meta.batch_data.detach.cpu.numpy.tolist\r\nself.classifier\r\nsklearn.metrics.roc_auc_score\r\nself.SANBertNetwork.super.__init__\r\ngrad.abs.max\r\nself.optimizer.load_state_dict\r\nself.qkv_head_dim.self.num_heads.bsz.tgt_len.q.contiguous.view.transpose\r\nself.init\r\nself.setup\r\nself.qkv_head_dim.self.num_heads.bsz.src_len.k.contiguous.view.transpose.transpose\r\nself.alpha.data.new\r\ntorch.autograd.grad\r\ncommon.activation\r\nkb.new_dict.cpu\r\nload_json\r\nsuper\r\nlabels.append\r\ntasks.get_task_obj.train_forward\r\nsuper.__init__\r\nbeta2.exp_inf.mul_.unsqueeze\r\nlogits.size.logits.data.new.zero_.torch.diag.byte\r\ntrain_datasets.append\r\ntorch.nn.functional.kl_div\r\nself.f\r\nself.train_loss.update\r\nseqeval.metrics.classification_report\r\nFlatSimV2\r\nembed.detach.abs.mean\r\nsubprocess.check_output\r\nscipy.stats.spearmanr\r\nx.torch.std.expand_as\r\nnumpy.argmax\r\nmake_eval_dict\r\nmt_dnn.batcher.DistMultiTaskBatchSampler\r\nscore.reshape.tolist.reshape\r\nmt_dnn.model.MTDNNModel.update\r\nk.contiguous.view\r\ntoken.startswith\r\np.transpose\r\nmodule.my_optim.weight_norm\r\nnoise.detach.requires_grad_\r\nself.DotProduct.super.__init__\r\nmt_dnn.batcher.Collater.patch_data\r\nload_mrpc\r\nSimpleFlatSim\r\neff_noise.detach\r\nplt.hist\r\nadv_logits.view.view\r\nload_copa_mtdnn\r\nrun_precision_recall_analysis\r\ntrim\r\ntorch.zeros_like\r\nbatch_info.pin_memory.to\r\nself.DeepAttentionWrapper.super.__init__\r\ntarget.contiguous.view.view\r\nint\r\nself.parameters\r\nself.qkv_head_dim.self.num_heads.bsz.src_len.k.contiguous.view.transpose.contiguous\r\ntorch.manual_seed\r\nmerge_eval\r\nx2_flat.self.proj_2.self.f.view.transpose\r\nscores.items\r\nshutil.copytree\r\nplot_pr_curve\r\nself.__str__\r\ngrad.sign\r\njson.loads.get\r\ntime.strftime\r\nBilinearFlatSim\r\ncompute_f1\r\nreduce_features_to_examples.append\r\nclosure\r\nend.numpy.tolist.contiguous\r\ndata_utils.load_data\r\nself.bert\r\ncreate_bins\r\nself.SANClassifier.super.__init__\r\nget_tokens\r\nlogging.FileHandler.setLevel\r\nself._tokenizer.convert_tokens_to_ids.get\r\ny.x.torch.abs.y.x.y.x.torch.cat.contiguous\r\nx.size.idx.mask.view.expand_as\r\nself.rnn.size\r\nembedding_weights.size\r\ntorch.nn.functional.mse_loss\r\nuid.split\r\ntorch.LongTensor\r\nsample.get.strip\r\nos.getcwd\r\nself._rnn\r\natt_scores.F.softmax.unsqueeze\r\ntemp_answers.append\r\ntest_prepro_std\r\nself.MLPSelfAttn.super.__init__\r\nself.FlatSimV2.super.__init__\r\ntorch.nn.ModuleList\r\nmain\r\nload_data\r\nos.mkdir\r\nself.compute_weight\r\nself._setup_lossmap\r\nsetattr\r\nx1.size.x1.size.x1.contiguous.view.self.x_dot_linear.view.expand_as.bmm\r\nplt.savefig\r\nepsilon.epsilon.y.detach\r\nmodule.similarity.SelfAttnWrapper\r\ntorch.distributed.all_reduce\r\nground_truth.normalize_answer.split\r\nbatch_meta.batch_data.size\r\nself.mnetwork.bert\r\nself.query_wsum\r\nprediction.normalize_answer.split\r\ndim.p.transpose._norm.transpose\r\nself._norm_grad\r\ntorch.nn.Linear\r\nstart_scores.squeeze.squeeze\r\nadv_lc\r\nmodel_config\r\nremove_punc\r\nself.config.update\r\ntorch.isnan\r\nbatch_meta.batch_data.detach\r\npara.strip\r\ntensorboardX.SummaryWriter.close\r\ndata_utils.roberta_utils.update_roberta_keys\r\nsub_part.pin_memory.to\r\nstart.data.cpu\r\nself.x_dot_linear\r\nNotImplementedError\r\nself.attn\r\nset.add\r\nsequence_outputs.append\r\nslen.idx.yidx.embeddings.tolist\r\nself.load\r\nmodel.to.to\r\nexp_avg.mul_\r\nself.task_types.append\r\nself.encoder\r\nnumpy.array\r\ntask_id.self.scoring_list.split\r\nself.qkv_head_dim.self.num_heads.bsz.tgt_len.q.contiguous.view.transpose.contiguous\r\ntask_id.self.scoring_list\r\ny.x.torch.abs.y.x.y.x.torch.cat.contiguous.view\r\ny.view.view\r\nmodule.common.activation\r\nself.score_func.size\r\nexperiments.common_utils.dump_rows\r\nself.emb_val.update\r\nvalue.transpose.transpose\r\nlist.extend\r\ntasks.get_task_obj.train_build_task_layer\r\nstart.append\r\nvars.update\r\ntransformers.get_cosine_schedule_with_warmup\r\ntrain_data_list.append\r\ntransformers.get_linear_schedule_with_warmup\r\npredict.reshape.tolist\r\ndataset.get_task_id\r\nself._tokenizer.convert_tokens_to_ids\r\nend.append\r\nself.WeightNorm.super.__init__\r\nself.linear\r\nidx.lines.strip\r\ntorch.mean\r\nargparse.ArgumentParser.print_help\r\nmt_dnn.optim.AdamaxW\r\nscore.np.argmax.reshape\r\nqb.new_dict.cpu\r\nself._dataset.get_task_id\r\nplt.xlim\r\nline.strip\r\nself.network.eval\r\ndump_data\r\ntrain_config.parse_args\r\nvw.new_dict.cpu\r\nend.numpy.tolist.numpy\r\nload\r\nalpha.unsqueeze.bmm\r\ncollections.defaultdict\r\nself.num_hid.size.size.tmp_output.view.max\r\ndropout_layer\r\nquestion.strip\r\nself._get_param_groups\r\nbool\r\nnewbatch.append\r\ns.normalize_answer.split\r\nout_f.write\r\nself.qkv_head_dim.self.num_heads.bsz.src_len.v.contiguous.view.transpose\r\ninput_ids.index\r\nnormalize_answer\r\nany\r\nkey_padding_mask.size\r\ntorch.nn.utils.weight_norm.unsqueeze\r\nmachines.append\r\ntasks.get_task_obj.input_parse_label\r\nstable_kl\r\npred.pop\r\nadv_loss.item\r\ntensor.to\r\ndelta_grad.norm\r\ntorch.nn.utils.weight_norm\r\nissubclass\r\nself.FlatSimilarityWrapper.super.__init__\r\ne.to\r\nstart.numpy.tolist.numpy\r\nscore.data.cpu\r\nmax\r\nx.att_scores.F.softmax.unsqueeze.torch.bmm.squeeze\r\ntasks.get_task_obj\r\ntorch.nn.parallel.DistributedDataParallel\r\nself.config.get.backward\r\nself.Bilinear.super.__init__\r\ntask_id.self.task_loss_criterion\r\nlogging.FileHandler.setFormatter\r\nfloat\r\nexperiments.exp_def.TaskDefs.get_task_names\r\nload_multirc_mtdnn\r\nlen.get\r\nresult.strip.split\r\nmodel.to.parameters\r\n_norm\r\nself.dropout.size\r\ntorch.norm\r\nhasattr\r\ntorch.diag\r\ntemp_1.pop\r\nself.LinearSelfAttn.super.__init__\r\ndata_utils.mrc_eval.squadv2_evaluate_func\r\nTypeError\r\nself.scalar.expand_as\r\ninitialize_distributed\r\ntask_cls\r\nLinearSelfAttn\r\nsorted\r\nstart.numpy.tolist.contiguous\r\ntorch.utils.data.DataLoader\r\nmodel_class.from_pretrained\r\nstate.items\r\nenumerate\r\nsys.exit\r\nself.bert.generate\r\nself._setup_kd_lossmap\r\nself._gen_task_indices\r\nplt.title\r\ndata_utils.mrc_eval.squadv1_evaluate_func\r\nweight.cpu\r\njoin\r\nos.path.abspath\r\nnumpy.max\r\ntasks.get_task_obj.test_predict\r\ntarget.size.target.view.float\r\npdb.set_trace\r\nkey.transpose.transpose\r\ntorch.cat\r\nrandom.uniform\r\nliteral_model_type.lower.lower\r\nexp_inf.new\r\nget_raw_scores\r\nself.adv_task_loss_criterion.append\r\nepsilon.epsilon.p.detach.log\r\nemb_val.item\r\nfeatures.append\r\nx.torch.mean.expand_as\r\nnew_data.zero_.size\r\nqw.new_dict.cpu\r\nload_mlm_data\r\ntok_len.batch_size.torch.BoolTensor.fill_\r\nself.proj_1\r\ntorch.abs\r\njson.loads.split\r\ndump\r\nq.contiguous.view\r\neff_noise.detach.abs\r\nmetric_fn\r\nself.network.cuda\r\nbatch_meta.get\r\nsearch_bin\r\nbais.cpu.numpy\r\ntype_ids_list.append\r\nmake_precision_recall_eval\r\ncreate_masked_lm_predictions\r\nattn_weights.data.masked_fill_\r\nlogging.Formatter\r\ny.x.torch.cat.contiguous.view\r\nself.proj\r\nValueError\r\nlogits.size.logits.data.new.zero_.torch.diag.byte.unsqueeze.expand_as\r\ni.tgt.extend\r\nquery.replace\r\ntime.gmtime\r\nload_mnli\r\nhistogram_na_prob\r\ncollections.Counter\r\nlogit.size.logit.view.float.size\r\ngenerate_mask\r\nprint_message\r\nlocal_task_idx.self._datasets.get_task_id\r\ntorch.load.size\r\npart.pin_memory\r\npositions.append\r\nself.activation\r\ntorch.pow\r\nassert_file_equal\r\ntasks.get_task_obj.train_prepare_label\r\nattn_weights.size.attn_weights.data.new.zero_.torch.diag.byte\r\ntorch.isinf\r\nx1.size.x1.contiguous.view.self.x_dot_linear.view\r\nnumpy.array_equal\r\ntorch.nn.utils.clip_grad_norm_\r\ngrounds.items\r\nVocabulary\r\nattn_weights.float.masked_fill\r\nself.embed_encode\r\ntype\r\ncls\r\nmt_dnn.model.MTDNNModel.load\r\nmt_dnn.model.MTDNNModel.save\r\nself.__if_pair__\r\ntask.split\r\nformat\r\nmodule._parameters.keys\r\nmerge\r\nlogits.detach\r\nlogit.F.log_softmax.exp\r\nmodel.detach\r\nsubprocess.call\r\ndropout_wrapper.DropoutWrapper\r\neval\r\nconfig_class.from_dict\r\nisinstance\r\nscaled_loss.backward\r\ndatetime.datetime.now\r\nself.dropout.view\r\nself._get_max_len\r\nkd_lc\r\nargs.test_datasets.split\r\ndataset.items\r\ninput_ids_list.append\r\nlogits.size.logits.data.new.zero_.torch.diag.byte.unsqueeze\r\ntokenizer.vocab.keys\r\nload_record_mtdnn\r\nevaluate\r\nlogging.getLogger.addHandler\r\nbeta1.exp_avg.mul_.add_\r\nload_sst\r\nbatch_info.pin_memory\r\nlocals\r\nqw.new_dict.cpu.numpy\r\nnew_batch.append\r\nstate.keys\r\nbatch_data.append\r\nexpected_file.open.read\r\nend_position.append\r\nlaod_function\r\nFlatSim\r\nattn_weights.data.new\r\ntorch.nn.functional.log_softmax\r\ni.self.attn_list\r\nself.embeddings\r\nprocess_data\r\nplt.xlabel\r\nload_xnli\r\nmt_dnn.model.MTDNNModel.cuda\r\nmt_dnn.batcher.MultiTaskBatchSampler\r\nscores.extend\r\nmap\r\nscore.contiguous.view\r\nself.rnn\r\nself.proj_2\r\nvars\r\ndata_utils.load_score_file.keys\r\ntemp_1.append\r\nself._get_index_batches\r\nmt_dnn.model.MTDNNModel\r\ny.x.y.x.torch.cat.contiguous.view\r\ndata_utils.metrics.calc_metrics\r\nMultiheadAttentionWrapper\r\nfeature.example_id_to_index.features_per_example.append\r\npara.clone\r\nself.beta.expand_as\r\nopt.EncoderModelType.name.lower\r\nscores_for_ground_truths.append\r\nsentence.append\r\nself.pooler\r\nself.network.train\r\nnumpy.zeros\r\nlabel.append\r\nscores_list.append\r\nos.getenv\r\ncopy.deepcopy\r\ntokens.append\r\np.norm\r\nnumpy.exp\r\nloss.stable_kl\r\nself._dropout_p_map.get\r\nself.AttentionWrapper.super.__init__\r\njson.loads\r\nnew_sequence_outputs.append\r\nparse_args\r\nre.compile\r\ntransformers.AutoTokenizer.from_pretrained.tokenize\r\nprefix.format.opt.get.lower\r\nx_flat.self.FC.self.f.self.linear.view\r\nplt.ylabel\r\ndocs.append\r\ntorch.float32.input.detach.F.softmax.sqrt_\r\nry.rp.p.sum\r\ndata_config\r\nlist\r\nv.contiguous.view\r\npytorch_pretrained_bert.modeling.BertEmbeddings\r\nidx.mask.view\r\napply_no_ans_threshold\r\nself.adv_teacher.forward\r\nmodule.dropout_wrapper.DropoutWrapper\r\nv.cpu\r\nconfig.get\r\ndataset.split\r\nidx.all_encoder_layers.detach\r\ntrain_config.add_argument\r\nself.FC\r\nsample_id_2_label_dic.keys\r\nweight.reshape\r\nproj.unsqueeze.x.bmm.squeeze\r\nself.SelfAttnWrapper.super.__init__\r\nrng.randint\r\ndata_utils.load_score_file\r\nnumpy.exp.sum\r\nself.dropout_list.append\r\ndata_utils.log_wrapper.create_logger\r\ntorch.cuda.set_device\r\ndev_data_list.append\r\nquery.transpose.size\r\nmt_dnn.inference.eval_model\r\ntarget.contiguous.view\r\nh0.size.h0.new.zero_\r\nlocals.items\r\nTASK_REGISTRY.get\r\nplt.step\r\nn_best_size.start_logits.np.argsort.tolist\r\nVocabulary.add\r\nattn.transpose.transpose\r\ntokens.extend\r\ntemp_2.pop\r\nexperiments.ner.ner_utils.load_conll_pos\r\nself.Trilinear.super.__init__\r\nlogits.data.new\r\nnumpy.ones_like\r\np.nelement\r\nself.network.named_parameters\r\npool.map\r\nnumpy.power\r\nself.network.parameters\r\nrvl.append\r\nrandom.sample\r\nself.attn_list.append\r\ncompare_output\r\nself.FlatSim.super.__init__\r\nself.network.encode\r\ntorch.bernoulli\r\nassert_dir_equal\r\ntorch.save\r\njson.dump\r\nself.SimilarityWrapper.super.__init__\r\ny_pred.append\r\npooled_output.contiguous.view\r\ntorch.distributed.init_process_group\r\ntask_def.get\r\nargs.task.lower\r\nembed.data.new\r\nvw.new_dict.cpu.numpy\r\nxWy.data.masked_fill_\r\nself.DotProductProject.super.__init__\r\nnext\r\nbatch_meta.batch_data.detach.cpu\r\nMaskedLmInstance\r\nself.num_hid.size.size.tmp_output.view.max.view\r\nClassifier\r\nx2.x1.abs\r\nscore.np.argmax.tolist\r\npredict.strip.reshape\r\nself.reset\r\nquery.transpose.transpose\r\nDotProductProject\r\nself._setup_adv_lossmap\r\nvb.new_dict.cpu\r\ngenerate_noise\r\ntorch.cuda.device_count\r\nexperiments.mlm.mlm_utils.load_loose_json.append\r\nbatch_meta.batch_data.cuda\r\ntorch.optim.SGD\r\nmodel.state_dict.items\r\nlogit.size.logit.view.float\r\nself.x_linear\r\nrng.shuffle\r\ntask_id.self.dropout_list.size\r\nsum\r\ntensorboardX.SummaryWriter\r\nos.access\r\nsys.path.append\r\nencoding_0.size.input_length.torch.LongTensor.fill_\r\nx.size.x.size.x.data.new.zero_\r\nsigmoid\r\nuid.gold_map.append\r\nx2_flat.self.proj_2.self.f.view\r\nrng.random\r\ngolds.append\r\nweight.cpu.numpy\r\ntokenizer\r\nargparse.ArgumentParser\r\nWeightNorm\r\np.size.p.contiguous.view.norm\r\ntask_def_list.append\r\nself.qkv_head_dim.self.num_heads.bsz.src_len.k.contiguous.view.transpose.size\r\nexperiments.exp_def.TaskDefs\r\nself._setup_adv_training\r\nline.strip.startswith\r\nself.optimizer.step\r\nself.adv_loss.update\r\nlogit.size.logit.view.float.view\r\nargs.model.split\r\nTrainingInstance\r\ntorch.ones\r\nconfig_class.from_pretrained\r\nflat_scores.contiguous.view\r\ncollections.namedtuple\r\ntorch.log\r\nscipy.stats.pearsonr\r\nlogging.getLogger.info\r\ngrounds.append\r\nx1.size.x1.size.x1.contiguous.view.self.x_dot_linear.view.expand_as\r\nlang_map.items\r\ntasks.get_task_obj.input_is_valid_sample\r\nattn.transpose.contiguous\r\nself.att\r\ntorch.optim.AdamW\r\nmt_dnn.perturbation.SmartPerturbation\r\ndoc.split\r\ndata_utils.tokenizer_utils.create_tokenizer._convert_token_to_id\r\ntokenizer.append\r\nembed.size.embed.data.new.normal_\r\ntorch.load\r\nnumpy.concatenate\r\np.dim\r\ntorch.nn.functional.softmax\r\nbuild_data\r\ny.unsqueeze.expand_as\r\nself.Classifier.super.__init__\r\nSimilarityWrapper\r\nlogits.size.logits.data.new.zero_\r\nattn.transpose.contiguous.view\r\nattn_weights.size.attn_weights.data.new.zero_\r\nuid.predict_map.append\r\nkey_padding_mask.unsqueeze.expand_as\r\nself._layer_norm\r\nself.EMA.super.__init__\r\nstart_position.append\r\np.contiguous.view\r\nent_strs.append\r\ntorch.BoolTensor\r\nidx.lines.strip.split\r\nmultiprocessing.Pool\r\nload_qnli\r\ntorch.cuda.is_available\r\nsklearn.metrics.accuracy_score\r\nx.alpha.unsqueeze.bmm.squeeze\r\nlogging.getLogger\r\nlower\r\nmask.size.score.np.argmax.reshape.tolist\r\nscore.numpy.reshape\r\ngroup.setdefault\r\nmt_dnn.batcher.DistSingleTaskBatchSampler\r\nload_wnli\r\nhuman.items\r\nself.decoder_opt.append\r\ny.x.y.x.torch.cat.contiguous\r\nos.path.splitext\r\npred.items\r\npredictions.append\r\nrandom.Random\r\nself.rebatch\r\napex.amp.master_params\r\nnumpy.ma.masked_array.mean\r\nmt_dnn.model.MTDNNModel.extract\r\nend.numpy.tolist\r\nload_scitail\r\nnumpy.random.choice\r\ntest_encoder\r\ntokenizer.pop\r\nattn_weights.float.F.softmax.type_as\r\nMLPSelfAttn\r\ndata_utils.vocab.Vocabulary.add\r\ncompute\r\nwriter.write\r\nself.linear.unsqueeze\r\ntok_len.batch_size.torch.LongTensor.fill_\r\nself.mnetwork\r\nmodel.to.state_dict\r\nend.data.cpu\r\nmt_dnn.inference.extract_encoding\r\nWeightNorm.compute_weight\r\nsklearn.metrics.f1_score\r\ntarget.contiguous.view.float\r\ninstances.append\r\noutput_file.open.read\r\nload_squad\r\ntarget.contiguous.view.detach\r\nexperiments.glue.glue_utils.submit\r\nattention_mask_list.append\r\nmodel.encode\r\nload_qnnli\r\nself.nsp\r\nself.BilinearFlatSim.super.__init__\r\ntqdm.auto.tqdm\r\nproj\r\nself.AdamaxW.super.__setstate__\r\nmlm_y.view.view\r\nhyp_mask.size\r\nexpected_dir.os.path.join.open.read\r\nmasked_lm_labels.append\r\np.contiguous\r\nepsilon.epsilon.y.detach.log\r\ntest_metrics.items\r\nidx.all_encoder_layers.detach.cpu.numpy\r\nsub_part.pin_memory\r\nepsilon.epsilon.p.detach\r\ndata_utils.utils.set_environment\r\ncand_indexes.append\r\nself._to_cuda\r\nlen\r\ndata_utils.utils.AverageMeter\r\nhid_shape.weight.new.zero_\r\napex.amp.scale_loss\r\ntorch.no_grad\r\ntorch.nn.functional.dropout\r\nsklearn.metrics.matthews_corrcoef\r\nmodel_class\r\nmake_qid_to_has_ans\r\nremove_articles\r\nx1.size.x1.contiguous.view.self.x_linear.view.expand_as\r\ntest_data_list.append\r\nvb.new_dict.cpu.numpy\r\nself.self_att\r\ntask_id.self.dropout_list.contiguous\r\nx2.size.x2.contiguous.view.self.y_linear.view\r\nsuffix.split.upper\r\nself.encoder_type.EncoderModelType.name.lower\r\nself.init_hidden\r\nlogging.getLogger.setLevel\r\nself.tokenizer.batch_decode\r\nweight.size\r\nos.path.split\r\nself.scheduler.step\r\ninput.view.float\r\nrecalls.append\r\ntorch.zeros\r\nself.MaskLmHeader.super.__init__\r\nSanEncoder\r\np.data.mul_\r\nstart.numpy.tolist\r\ncurrent_chunk.append\r\nrandom.seed\r\np.size.p.contiguous.view.norm.view\r\nfilecmp.cmp\r\nsorted.insert\r\neval.split\r\nload_rte\r\nfunctools.partial\r\nself._rnn.flatten_parameters\r\nmodel.predict\r\nv.cuda.cuda\r\nself._get_shuffled_index_batches_bin\r\nmodule.similarity.FlatSimilarityWrapper\r\ntarget.contiguous.view.size\r\nscore.numpy.contiguous\r\nbuild_data_single\r\npositives.random.sample.pop\r\nqa_entry.get\r\ntorch.ones_like\r\ntorch.distributed.is_initialized\r\nkw.new_dict.cpu\r\nrandom.choice\r\ngenerate_decoder_opt\r\nencoding_0.size.input_lengths.max.input_lengths.len.torch.LongTensor.fill_\r\nDotProduct\r\ntorch.bmm\r\nmask.unsqueeze.expand_as\r\nformat.replace\r\ntrain_config\r\nmodule.pooler.Pooler\r\np.data.addcdiv_\r\nself._get_shuffled_index_batches\r\nself.alpha.expand_as\r\nattn_weights.size.attn_weights.data.new.zero_.torch.diag.byte.unsqueeze\r\nload_boolq\r\nmetric_max_over_ground_truths\r\ncs.LOSS_REGISTRY\r\nmask.sum\r\nself._get_batch_size\r\ngetattr.cuda\r\nself.optimizer.state_dict\r\nargparse.ArgumentParser.parse_args\r\nopt.get\r\nattn_weights.size.attn_weights.data.new.zero_.torch.diag.byte.unsqueeze.expand_as\r\nload_cb\r\nbin_idx.data.append\r\ngrad.abs\r\ndict\r\nargparse.ArgumentParser.add_argument\r\nexp_inf.mul_\r\nlen.pop\r\ndata_utils.utils_qa.postprocess_qa_predictions\r\nx.data.new\r\nyaml.safe_load\r\ntorch.nn.functional.softmax.unsqueeze\r\nWeightNorm.apply\r\ntransformers.get_constant_schedule_with_warmup\r\nexperiments.ner.ner_utils.load_conll_ner\r\n_mg\r\nRuntimeError\r\nnoise.detach.detach\r\nlabel_tokenize\r\nprepare_train_feature\r\nSanLayer\r\ncommon.init_wrapper\r\nargs.layers.split\r\ntemp_2.append\r\nself.dropout.float\r\nplt.fill_between\r\nnext.extend\r\npytorch_pretrained_bert.modeling.BertLayerNorm\r\nn_best_size.end_logits.np.argsort.tolist\r\nself.task_loss_criterion.append\r\nfloat.key_padding_mask.unsqueeze.unsqueeze.attn_weights.float.masked_fill.type_as\r\nfeature_extractor\r\npart.pin_memory.to\r\nload_cola\r\ninput.view.detach\r\nx1.size.x1.contiguous.view.self.x_linear.view\r\nsegment_ids.append\r\nsklearn.metrics.confusion_matrix\r\ntokens_a.extend\r\nexperiments.mlm.mlm_utils.load_loose_json\r\ntorch.cuda.manual_seed_all\r\nfeature_index.features.get\r\nWy.unsqueeze.x.bmm.squeeze\r\nstr\r\nencoding_1.encoding_0.abs\r\nself.score_func.view\r\ntorch.std\r\ny.x.torch.cat.contiguous\r\nself._task_type_map.keys\r\nembed.detach.abs\r\ntask_id.self.dropout_list\r\nexact_scores.values\r\nseqeval.metrics.f1_score\r\napex.amp.initialize\r\nplt.ylim\r\ntorch.nn.parameter.Parameter\r\nblocks.lang_dict.append\r\nself.dense\r\nself.bert.parameters\r\ntorch.nn.Parameter\r\nos.makedirs\r\nentry.get\r\nrandom.shuffle\r\nBilinearSum\r\ntasks.get_task_obj.test_prepare_label\r\nexperiments.exp_def.TaskDef.from_dict\r\nline.strip.split.split\r\nself.tok2ind.get\r\nx1_flat.self.proj_1.self.f.view\r\nf1_scores.values\r\nsample_id_2_label_dic.items\r\ngenerate_golds_predictions_scores\r\ncontext.strip\r\nre.sub\r\ntransformers.AutoTokenizer.from_pretrained.convert_tokens_to_ids\r\nself.config.get\r\nargs.model.split.split\r\nmask.sum.tolist\r\ntorch.nn.DataParallel\r\ninput.view.squeeze\r\ntransformers.AutoTokenizer.from_pretrained\r\nTrilinear\r\nregister_task\r\nx2.contiguous.view\r\nself.network.load_state_dict\r\nmodule.register_parameter\r\ntarget.contiguous.view.contiguous\r\nexperiments.exp_def.TaskDefs.get_task_def\r\ntorch.FloatTensor\r\ntensorboardX.SummaryWriter.add_scalar\r\nsizes.append\r\nself.rnn_type.nn.getattr\r\nmodule.san.SANClassifier\r\nmetric_func\r\nself.ind2tok.get\r\nself._setup_optim\r\nre.compile.findall\r\nkw.new_dict.cpu.numpy\r\nscore_path.open.read\r\nprelim_predictions.append\r\nmt_dnn.matcher.SANBertNetwork\r\nglob.glob\r\narch.config_class.from_pretrained.to_dict\r\ntorch.bernoulli.unsqueeze\r\nBilinear\r\nself.__random_select__\r\ntorch.distributed.get_rank\r\nself.model.named_parameters\r\ndata_utils.roberta_utils.patch_name_dict\r\nmodel\r\ninput.view.view\r\nline.strip.strip\r\nmax_answer_seq_len.batch_size.torch.LongTensor.fill_\r\nmt_dnn.batcher.MultiTaskDataset\r\ncollections.Counter.values\r\ngetattr\r\nmath.sqrt\r\nlogits.data.masked_fill_\r\nqa_sample\r\nImportError\r\nargs.transformer_cache.init_model.config_class.from_pretrained.to_dict\r\nexamples.append\r\nx2.size.x2.contiguous.view.self.y_linear.view.expand_as\r\nself.bert.embeddings\r\ndata_utils.log_wrapper.create_logger.info\r\nexperiments.mlm.mlm_utils.create_instances_from_document\r\neff_perturb.item\r\nwhite_space_fix\r\nreduce_features_to_examples\r\nend_scores.squeeze.squeeze\r\ncompute_acc\r\nfeature_index.features.get.get\r\nexperiments.ner.ner_utils.load_conll_chunk\r\nnext.new\r\npredict.strip.strip\r\nexp_inf.new.long\r\nnew_data.zero_.zero_\r\neff_noise.detach.abs.mean\r\ntorch.stack\r\njson.load\r\nevaluation\r\ntasks.get_task_obj.train_prepare_soft_labels\r\nmt_dnn.batcher.SingleTaskDataset\r\nidx.all_encoder_layers.detach.cpu\r\ntarget.F.log_softmax.exp\r\ntask_id.self.dropout_list.view\r\nself.config.get.item\r\nflat_squad\r\nload_wic_mtdnn\r\nbatch_meta.batch_data.detach.cpu.numpy\r\nattn.transpose.size\r\nzip\r\nself.LayerNorm.super.__init__\r\ntask_layer\r\np.size\r\nbais.cpu\r\ntokenizer.sequence_ids\r\ncompute_exact\r\nos.path.join\r\nprecisions.append\r\ny_true.append\r\neps.grad.abs.add_.unsqueeze_\r\nmlm_p.view.view\r\nrepr\r\nmodel.cuda\r\ntuple\r\nx.contiguous.view\r\nprint\r\nnumpy.argsort\r\nload_snli\r\nmodel.size\r\nself.scoring_list.append\r\n</pre>\r\n</details>\r\n\r\n@developer\r\nCould please help me check this issue?\r\nMay I pull a request to fix it?\r\nThank you very much.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/namisan/mt-dnn/issues/242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/namisan/mt-dnn/issues/242/timeline","performed_via_github_app":null,"state_reason":null}