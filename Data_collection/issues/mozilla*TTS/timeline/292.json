[{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536446305","html_url":"https://github.com/mozilla/TTS/issues/292#issuecomment-536446305","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/292","id":536446305,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQ0NjMwNQ==","user":{"login":"massimo1980","id":4678483,"node_id":"MDQ6VXNlcjQ2Nzg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4678483?v=4","gravatar_id":"","url":"https://api.github.com/users/massimo1980","html_url":"https://github.com/massimo1980","followers_url":"https://api.github.com/users/massimo1980/followers","following_url":"https://api.github.com/users/massimo1980/following{/other_user}","gists_url":"https://api.github.com/users/massimo1980/gists{/gist_id}","starred_url":"https://api.github.com/users/massimo1980/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massimo1980/subscriptions","organizations_url":"https://api.github.com/users/massimo1980/orgs","repos_url":"https://api.github.com/users/massimo1980/repos","events_url":"https://api.github.com/users/massimo1980/events{/privacy}","received_events_url":"https://api.github.com/users/massimo1980/received_events","type":"User","site_admin":false},"created_at":"2019-09-30T07:51:22Z","updated_at":"2019-09-30T07:51:22Z","author_association":"NONE","body":"Hi there.\r\ni'm not a contributor of this project but i faced the same problem. \r\nIt depends on how big is your dataset and the batch_size . for example M-AILABS italian dataset with a batch size of 32, it required 9.1 Gb of memory.\r\nTry reducing the batch size.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536446305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"massimo1980","id":4678483,"node_id":"MDQ6VXNlcjQ2Nzg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4678483?v=4","gravatar_id":"","url":"https://api.github.com/users/massimo1980","html_url":"https://github.com/massimo1980","followers_url":"https://api.github.com/users/massimo1980/followers","following_url":"https://api.github.com/users/massimo1980/following{/other_user}","gists_url":"https://api.github.com/users/massimo1980/gists{/gist_id}","starred_url":"https://api.github.com/users/massimo1980/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massimo1980/subscriptions","organizations_url":"https://api.github.com/users/massimo1980/orgs","repos_url":"https://api.github.com/users/massimo1980/repos","events_url":"https://api.github.com/users/massimo1980/events{/privacy}","received_events_url":"https://api.github.com/users/massimo1980/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536454662","html_url":"https://github.com/mozilla/TTS/issues/292#issuecomment-536454662","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/292","id":536454662,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQ1NDY2Mg==","user":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false},"created_at":"2019-09-30T08:16:42Z","updated_at":"2019-09-30T08:16:42Z","author_association":"NONE","body":"> Hi there.\r\n> i'm not a contributor of this project but i faced the same problem.\r\n> It depends on how big is your dataset and the batch_size . for example M-AILABS italian dataset with a batch size of 32, it required 9.1 Gb of memory.\r\n> Try reducing the batch size.\r\n\r\nThank you for the reply!\r\nIn fact, I used different batch sizes, and that problem started to happen recently, not sure what after, but maybe because I updated version of TTS from repository. Before that I used to be able to run Tacotron2 for more than 2 epoch with no problem and even with slightly bigger batch size. Anyway, the memory usage was around 7 gb by 1000nd step of 1027. So, amount of memory was sufficient for sure.\r\nWell, now I updated the CUDA to 10.1 and trying to see if it helps.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536454662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536458530","html_url":"https://github.com/mozilla/TTS/issues/292#issuecomment-536458530","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/292","id":536458530,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQ1ODUzMA==","user":{"login":"massimo1980","id":4678483,"node_id":"MDQ6VXNlcjQ2Nzg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4678483?v=4","gravatar_id":"","url":"https://api.github.com/users/massimo1980","html_url":"https://github.com/massimo1980","followers_url":"https://api.github.com/users/massimo1980/followers","following_url":"https://api.github.com/users/massimo1980/following{/other_user}","gists_url":"https://api.github.com/users/massimo1980/gists{/gist_id}","starred_url":"https://api.github.com/users/massimo1980/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massimo1980/subscriptions","organizations_url":"https://api.github.com/users/massimo1980/orgs","repos_url":"https://api.github.com/users/massimo1980/repos","events_url":"https://api.github.com/users/massimo1980/events{/privacy}","received_events_url":"https://api.github.com/users/massimo1980/received_events","type":"User","site_admin":false},"created_at":"2019-09-30T08:27:30Z","updated_at":"2019-09-30T08:27:30Z","author_association":"NONE","body":"I have also tried to update TTS from repository....but after upgrade i can't use the checkpoint anymore.\r\nalways there errors:\r\n\r\nRuntimeError: Error(s) in loading state_dict for Tacotron2:\r\n       Missing key(s) in state_dict: \"decoder.attention.query_layer.linear_layer.weight\", \"decoder.attention.inputs_layer.linear_layer.weight\", \"decoder.attention.v.linear_layer.weight\", \"decoder.attention.v.linear_layer.bias\".\r\n       Unexpected key(s) in state_dict: \"decoder.attention_layer.query_layer.linear_layer.weight\", \"decoder.attention_layer.inputs_layer.linear_layer.weight\", \"decoder.attention_layer.v.linear_layer.weight\", \"decoder.attention_layer.v.linear_layer.bias\".\r\n       size mismatch for embedding.weight: copying a param with shape torch.Size([130, 512]) from checkpoint, the shape in current model is torch.Size([129, 512]).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536458530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"massimo1980","id":4678483,"node_id":"MDQ6VXNlcjQ2Nzg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4678483?v=4","gravatar_id":"","url":"https://api.github.com/users/massimo1980","html_url":"https://github.com/massimo1980","followers_url":"https://api.github.com/users/massimo1980/followers","following_url":"https://api.github.com/users/massimo1980/following{/other_user}","gists_url":"https://api.github.com/users/massimo1980/gists{/gist_id}","starred_url":"https://api.github.com/users/massimo1980/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massimo1980/subscriptions","organizations_url":"https://api.github.com/users/massimo1980/orgs","repos_url":"https://api.github.com/users/massimo1980/repos","events_url":"https://api.github.com/users/massimo1980/events{/privacy}","received_events_url":"https://api.github.com/users/massimo1980/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536461938","html_url":"https://github.com/mozilla/TTS/issues/292#issuecomment-536461938","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/292","id":536461938,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQ2MTkzOA==","user":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false},"created_at":"2019-09-30T08:37:12Z","updated_at":"2019-09-30T08:37:12Z","author_association":"NONE","body":"With a newer version of driver and CUDA 10.1 now I clearly see how memory is being used. it goes up to 10.9, then drops half to ~6gb, then again rise consumption to ~10GB. Probably, CUDA 10.0 should now be used anymore.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536461938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536463240","html_url":"https://github.com/mozilla/TTS/issues/292#issuecomment-536463240","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/292","id":536463240,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQ2MzI0MA==","user":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false},"created_at":"2019-09-30T08:40:55Z","updated_at":"2019-09-30T08:40:55Z","author_association":"NONE","body":"> I have also tried to update TTS from repository....but after upgrade i can't use the checkpoint anymore.\r\n> always there errors:\r\n> \r\n> RuntimeError: Error(s) in loading state_dict for Tacotron2:\r\n> Missing key(s) in state_dict: \"decoder.attention.query_layer.linear_layer.weight\", \"decoder.attention.inputs_layer.linear_layer.weight\", \"decoder.attention.v.linear_layer.weight\", \"decoder.attention.v.linear_layer.bias\".\r\n> Unexpected key(s) in state_dict: \"decoder.attention_layer.query_layer.linear_layer.weight\", \"decoder.attention_layer.inputs_layer.linear_layer.weight\", \"decoder.attention_layer.v.linear_layer.weight\", \"decoder.attention_layer.v.linear_layer.bias\".\r\n> size mismatch for embedding.weight: copying a param with shape torch.Size([130, 512]) from checkpoint, the shape in current model is torch.Size([129, 512]).\r\n\r\nI haven't faced that issue, probably since I have no older checkpoint to use with newer version of the repository. \r\nI actually faced with something similar to _size mismatch for embedding.weight: copying a param with shape torch.Size([130, 512]) from checkpoint, the shape in current model is torch.Size([129, 512])._ . As I understood, the reason was in the utils/text/symbols.py file. I changed not only __characters_ , but __punctuations_ as well, which led to size mismatch problem. Did you change it by any chance as well? ","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536463240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536463907","html_url":"https://github.com/mozilla/TTS/issues/292#issuecomment-536463907","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/292","id":536463907,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNjQ2MzkwNw==","user":{"login":"massimo1980","id":4678483,"node_id":"MDQ6VXNlcjQ2Nzg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4678483?v=4","gravatar_id":"","url":"https://api.github.com/users/massimo1980","html_url":"https://github.com/massimo1980","followers_url":"https://api.github.com/users/massimo1980/followers","following_url":"https://api.github.com/users/massimo1980/following{/other_user}","gists_url":"https://api.github.com/users/massimo1980/gists{/gist_id}","starred_url":"https://api.github.com/users/massimo1980/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massimo1980/subscriptions","organizations_url":"https://api.github.com/users/massimo1980/orgs","repos_url":"https://api.github.com/users/massimo1980/repos","events_url":"https://api.github.com/users/massimo1980/events{/privacy}","received_events_url":"https://api.github.com/users/massimo1980/received_events","type":"User","site_admin":false},"created_at":"2019-09-30T08:42:47Z","updated_at":"2019-09-30T08:42:47Z","author_association":"NONE","body":"i'll give it a tryin as soon as possible!\r\ntnx for the advice!","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/536463907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"massimo1980","id":4678483,"node_id":"MDQ6VXNlcjQ2Nzg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4678483?v=4","gravatar_id":"","url":"https://api.github.com/users/massimo1980","html_url":"https://github.com/massimo1980","followers_url":"https://api.github.com/users/massimo1980/followers","following_url":"https://api.github.com/users/massimo1980/following{/other_user}","gists_url":"https://api.github.com/users/massimo1980/gists{/gist_id}","starred_url":"https://api.github.com/users/massimo1980/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massimo1980/subscriptions","organizations_url":"https://api.github.com/users/massimo1980/orgs","repos_url":"https://api.github.com/users/massimo1980/repos","events_url":"https://api.github.com/users/massimo1980/events{/privacy}","received_events_url":"https://api.github.com/users/massimo1980/received_events","type":"User","site_admin":false}},{"id":2672400064,"node_id":"MDExOkNsb3NlZEV2ZW50MjY3MjQwMDA2NA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/2672400064","actor":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-09-30T08:44:34Z","state_reason":null,"performed_via_github_app":null}]