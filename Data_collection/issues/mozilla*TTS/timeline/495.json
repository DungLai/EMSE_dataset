[{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673746815","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673746815","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673746815,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mzc0NjgxNQ==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-08-13T22:46:44Z","updated_at":"2020-08-13T22:46:44Z","author_association":"CONTRIBUTOR","body":"I don't understand the problem. Is it synthesis.py? How do you run the inference which works good?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673746815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673925118","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673925118","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673925118,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkyNTExOA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T07:08:51Z","updated_at":"2020-08-14T07:08:51Z","author_association":"CONTRIBUTOR","body":"Yeah, so during training, when the epoch ends, the same sentence is synthesized (after evaluation) using the same reference wav file that I use when I run synthesize.py outside training. And these two produce different results. If I scale down by 0.4 in `compute_gst` in `tacotron_abstact.py`, the results are closer to each other, but they are still different.\r\n\r\n![image](https://user-images.githubusercontent.com/25833833/90223118-5cb83400-de05-11ea-86da-05e66a8a84dc.png)\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673925118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673930225","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673930225","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673930225,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkzMDIyNQ==","user":{"login":"lexkoro","id":6319070,"node_id":"MDQ6VXNlcjYzMTkwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/6319070?v=4","gravatar_id":"","url":"https://api.github.com/users/lexkoro","html_url":"https://github.com/lexkoro","followers_url":"https://api.github.com/users/lexkoro/followers","following_url":"https://api.github.com/users/lexkoro/following{/other_user}","gists_url":"https://api.github.com/users/lexkoro/gists{/gist_id}","starred_url":"https://api.github.com/users/lexkoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexkoro/subscriptions","organizations_url":"https://api.github.com/users/lexkoro/orgs","repos_url":"https://api.github.com/users/lexkoro/repos","events_url":"https://api.github.com/users/lexkoro/events{/privacy}","received_events_url":"https://api.github.com/users/lexkoro/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T07:22:55Z","updated_at":"2020-08-14T07:31:55Z","author_association":"CONTRIBUTOR","body":"Can you share your config.json?\r\nChecking [this](https://github.com/mozilla/TTS/blob/1a45a6cd28e01140fd1081baa620b4cb01ddd232/TTS/bin/train_tts.py#L421) line in train_tts.py it tries to get they key \"_style_wav_for_test_\" which was replaced with \"_gst_style_input_\" in the config. So maybe you are not using a ref wav during training at all.\r\n\r\nAlso it's maybe better to use the dev branch since it has all the changes from dev-gst-embeddings + fixes","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673930225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lexkoro","id":6319070,"node_id":"MDQ6VXNlcjYzMTkwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/6319070?v=4","gravatar_id":"","url":"https://api.github.com/users/lexkoro","html_url":"https://github.com/lexkoro","followers_url":"https://api.github.com/users/lexkoro/followers","following_url":"https://api.github.com/users/lexkoro/following{/other_user}","gists_url":"https://api.github.com/users/lexkoro/gists{/gist_id}","starred_url":"https://api.github.com/users/lexkoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexkoro/subscriptions","organizations_url":"https://api.github.com/users/lexkoro/orgs","repos_url":"https://api.github.com/users/lexkoro/repos","events_url":"https://api.github.com/users/lexkoro/events{/privacy}","received_events_url":"https://api.github.com/users/lexkoro/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673934586","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673934586","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673934586,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkzNDU4Ng==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T07:34:04Z","updated_at":"2020-08-14T07:34:04Z","author_association":"CONTRIBUTOR","body":"\r\n    // AUDIO PARAMETERS\r\n    \"audio\":{\r\n        // stft parameters\r\n        \"fft_size\": 1100,         // number of stft frequency levels. Size of the linear spectogram frame.\r\n        \"win_length\": 1100,      // stft window length in ms.\r\n        \"hop_length\": 275,       // stft window hop-lengh in ms.\r\n        \"frame_length_ms\": null, // stft window length in ms.If null, 'win_length' is used.\r\n        \"frame_shift_ms\": null,  // stft window hop-lengh in ms. If null, 'hop_length' is used.\r\n\r\n        // Audio processing parameters\r\n        \"sample_rate\": 22050,   // DATASET-RELATED: wav sample-rate.\r\n        \"preemphasis\": 0.98,     // pre-emphasis to reduce spec noise and make it more structured. If 0.0, no -pre-emphasis.\r\n        \"ref_level_db\": 20,     // reference level db, theoretically 20db is the sound of air.\r\n\r\n        // Silence trimming\r\n        \"do_trim_silence\": false,\t// enable trimming of slience of audio as you load it. LJspeech (true), TWEB (false), Nancy (true)\r\n        \"trim_db\": 60,          // threshold for timming silence. Set this according to your dataset.\r\n\r\n        // Griffin-Lim\r\n        \"power\": 1.5,           // value to sharpen wav signals after GL algorithm.\r\n        \"griffin_lim_iters\": 60,// #griffin-lim iterations. 30-60 is a good range. Larger the value, slower the generation.\r\n\r\n        // MelSpectrogram parameters\r\n        \"num_mels\": 80,         // size of the mel spec frame.\r\n        \"mel_fmin\": 0.0,        // minimum freq level for mel-spec. ~50 for male and ~95 for female voices. Tune for dataset!!\r\n        \"mel_fmax\": 8000.0,     // maximum freq level for mel-spec. Tune for dataset!!\r\n        \"spec_gain\": 20.0,\r\n\r\n        // Normalization parameters\r\n        \"signal_norm\": true,    // normalize spec values. Mean-Var normalization if 'stats_path' is defined otherwise range normalization defined by the other params.\r\n        \"min_level_db\": -100,   // lower bound for normalization\r\n        \"symmetric_norm\": true, // move normalization to range [-1, 1]\r\n        \"max_norm\": 4.0,        // scale normalization to range [-max_norm, max_norm] or [0, max_norm]\r\n        \"clip_norm\": true,      // clip normalized values into the range.\r\n        \"stats_path\": null    // DO NOT USE WITH MULTI_SPEAKER MODEL. scaler stats file computed by 'compute_statistics.py'. If it is defined, mean-std based notmalization is used and other normalization params are ignored\r\n    },\r\n\r\n    // VOCABULARY PARAMETERS\r\n    // if custom character set is not defined,\r\n    // default set in symbols.py is used\r\n    // \"characters\":{\r\n    //     \"pad\": \"_\",\r\n    //     \"eos\": \"~\",\r\n    //     \"bos\": \"^\",\r\n    //     \"characters\": \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!'(),-.:;? \",\r\n    //     \"punctuations\":\"!'(),-.:;? \",\r\n    //     \"phonemes\":\"iyɨʉɯuɪʏʊeøɘəɵɤoɛœɜɞʌɔæɐaɶɑɒᵻʘɓǀɗǃʄǂɠǁʛpbtdʈɖcɟkɡqɢʔɴŋɲɳnɱmʙrʀⱱɾɽɸβfvθðszʃʒʂʐçʝxɣχʁħʕhɦɬɮʋɹɻjɰlɭʎʟˈˌːˑʍwɥʜʢʡɕʑɺɧɚ˞ɫ\"\r\n    // },\r\n\r\n    // DISTRIBUTED TRAINING\r\n    \"distributed\":{\r\n        \"backend\": \"nccl\",\r\n        \"url\": \"tcp:\\/\\/localhost:54321\"\r\n    },\r\n\r\n    \"reinit_layers\": [],    // give a list of layer names to restore from the given checkpoint. If not defined, it reloads all heuristically matching layers.\r\n\r\n    // TRAINING\r\n    \"batch_size\": 32,       // Batch size for training. Lower values than 32 might cause hard to learn attention. It is overwritten by 'gradual_training'.\r\n    \"eval_batch_size\":40,\r\n    \"r\": 7,                 // Number of decoder frames to predict per iteration. Set the initial values if gradual training is enabled.\r\n    \"gradual_training\": [[0, 7, 64], [1, 5, 64], [50000, 3, 32], [130000, 2, 32]], //set gradual training steps [first_step, r, batch_size]. If it is null, gradual training is disabled. For Tacotron, you might need to reduce the 'batch_size' as you proceeed.\r\n    \"loss_masking\": true,         // enable / disable loss masking against the sequence padding.\r\n    \"ga_alpha\": 10.0,        // weight for guided attention loss. If > 0, guided attention is enabled.\r\n    \"apex_amp_level\": null, // level of optimization with NVIDIA's apex feature for automatic mixed FP16/FP32 precision (AMP), NOTE: currently only O1 is supported, and use \"O1\" to activate.\r\n\r\n    // VALIDATION\r\n    \"run_eval\": true,\r\n    \"test_delay_epochs\": 3,  //Until attention is aligned, testing only wastes computation time.\r\n    \"test_sentences_file\": \"/home/georgios.roussos/tests.txt\",  // set a file to load sentences to be used for testing. If it is null then we use default english sentences.\r\n\r\n    // OPTIMIZER\r\n    \"noam_schedule\": false,        // use noam warmup and lr schedule.\r\n    \"grad_clip\": 1.0,              // upper limit for gradients for clipping.\r\n    \"epochs\": 1000,                // total number of epochs to train.\r\n    \"lr\": 0.0001,                  // Initial learning rate. If Noam decay is active, maximum learning rate.\r\n    \"wd\": 0.000001,                // Weight decay weight.\r\n    \"warmup_steps\": 4000,          // Noam decay steps to increase the learning rate from 0 to \"lr\"\r\n    \"seq_len_norm\": true,         // Normalize eash sample loss with its length to alleviate imbalanced datasets. Use it if your dataset is small or has skewed distribution of sequence lengths.\r\n\r\n    // TACOTRON PRENET\r\n    \"memory_size\": -1,             // ONLY TACOTRON - size of the memory queue used fro storing last decoder predictions for auto-regression. If < 0, memory queue is disabled and decoder only uses the last prediction frame.\r\n    \"prenet_type\": \"original\",           // \"original\" or \"bn\".\r\n    \"prenet_dropout\": true,       // enable/disable dropout at prenet.\r\n\r\n    // TACOTRON ATTENTION\r\n    \"attention_type\": \"original\",  // 'original' or 'graves'\r\n    \"attention_heads\": 4,          // number of attention heads (only for 'graves')\r\n    \"attention_norm\": \"softmax\",   // softmax or sigmoid.\r\n    \"windowing\": false,            // Enables attention windowing. Used only in eval mode.\r\n    \"use_forward_attn\": true,     // if it uses forward attention. In general, it aligns faster.\r\n    \"forward_attn_mask\": true,    // Additional masking forcing monotonicity only in eval mode.\r\n    \"transition_agent\": true,     // enable/disable transition agent of forward attention.\r\n    \"location_attn\": true,         // enable_disable location sensitive attention. It is enabled for TACOTRON by default.\r\n    \"bidirectional_decoder\": false,  // use https://arxiv.org/abs/1907.09006. Use it, if attention does not work well with your dataset.\r\n    \"double_decoder_consistency\": false,  // use DDC explained here https://erogol.com/solving-attention-problems-of-tts-models-with-double-decoder-consistency-draft/\r\n    \"ddc_r\": 7,                           // reduction rate for coarse decoder.\r\n\r\n    // STOPNET\r\n    \"stopnet\": true,               // Train stopnet predicting the end of synthesis.\r\n    \"separate_stopnet\": true,      // Train stopnet seperately if 'stopnet==true'. It prevents stopnet loss to influence the rest of the model. It causes a better model, but it trains SLOWER.\r\n\r\n    // TENSORBOARD and LOGGING\r\n    \"print_step\": 50,       // Number of steps to log training on console.\r\n    \"tb_plot_step\": 100,    // Number of steps to plot TB training figures.\r\n    \"print_eval\": false,     // If True, it prints intermediate loss values in evalulation.\r\n    \"save_step\": 10000,      // Number of training steps expected to save traninpg stats and checkpoints.\r\n    \"checkpoint\": true,     // If true, it saves checkpoints per \"save_step\"\r\n    \"tb_model_param_stats\": false,     // true, plots param stats per layer on tensorboard. Might be memory consuming, but good for debugging.\r\n\r\n    // DATA LOADING\r\n    \"text_cleaner\": \"swedish_cleaners\",\r\n    \"enable_eos_bos_chars\": false, // enable/disable beginning of sentence and end of sentence chars.\r\n    \"num_loader_workers\": 8,        // number of training data loader processes. Don't set it too big. 4-8 are good values.\r\n    \"num_val_loader_workers\": 8,    // number of evaluation data loader processes.\r\n    \"batch_group_size\": 0,  //Number of batches to shuffle after bucketing.\r\n    \"min_seq_len\": 1,       // DATASET-RELATED: minimum text length to use in training\r\n    \"max_seq_len\": 400,     // DATASET-RELATED: maximum text length\r\n\r\n    // PATHS\r\n    \"output_path\": \"/home/georgios.roussos/\",\r\n\r\n    // PHONEMES\r\n    \"phoneme_cache_path\": \"/home/georgios.roussos/TTS/karin_phones\",  // phoneme computation is slow, therefore, it caches results in the given folder.\r\n    \"use_phonemes\": true,           // use phonemes instead of raw characters. It is suggested for better pronounciation.\r\n    \"phoneme_language\": \"sv\",     // depending on your target language, pick one from  https://github.com/bootphon/phonemizer#languages\r\n\r\n    // MULTI-SPEAKER and GST\r\n    \"use_speaker_embedding\": false,      // use speaker embedding to enable multi-speaker learning.\r\n    \"use_external_speaker_embedding_file\": false, // if true, forces the model to use external embedding per sample instead of nn.embeddings, that is, it supports external embeddings such as those used at: https://arxiv.org/abs /1806.04558\r\n    \"external_speaker_embedding_file\": \"../../speakers-vctk-en.json\", // if not null and use_external_speaker_embedding_file is true, it is used to load a specific embedding file and thus uses these embeddings instead of nn.embeddings, that is, it supports external embeddings such as those used at: https://arxiv.org/abs /1806.04558\r\n    \"use_gst\": true,       \t\t\t    // use global style tokens\r\n    \"gst\":\t{\t\t\t                // gst parameter if gst is enabled\r\n        \"gst_style_input\": \"/Users/george.roussos/Desktop/gst_ref/59.wav\",        // Condition the style input either on a \r\n                                        // -> wave file [path to wave] or \r\n                                        // -> dictionary using the style tokens {'token1': 'value', 'token2': 'value'} example {\"0\": 0.15, \"1\": 0.15, \"5\": -0.15}  \r\n                                        // with the dictionary being len(dict) <= len(gst_style_tokens).\r\n        \"gst_embedding_dim\": 256,       \r\n        \"gst_num_heads\": 4,\r\n        \"gst_style_tokens\": 10\r\n\t},  \r\n\r\n    // DATASETS\r\n    \"datasets\":   // List of datasets. They all merged and they get different speaker_ids.\r\n        [\r\n            {\r\n                \"name\": \"ljspeech\",\r\n                \"path\": \"/home/georgios.roussos/karin_shortened_sils\",\r\n                \"meta_file_train\": \"metadata.csv\", // for vtck if list, ignore speakers id in list for train, its useful for test cloning with new speakers\r\n                \"meta_file_val\": \"val.csv\"\r\n            }\r\n        ]}\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673934586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673935044","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673935044","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673935044,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkzNTA0NA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T07:35:11Z","updated_at":"2020-08-14T07:37:43Z","author_association":"CONTRIBUTOR","body":"> Can you share your config.json?\r\n> Checking [this](https://github.com/mozilla/TTS/blob/1a45a6cd28e01140fd1081baa620b4cb01ddd232/TTS/bin/train_tts.py#L421) line in train_tts.py it tries to get they key \"_style_wav_for_test_\" which was replaced with \"_gst_style_input_\" in the config. So maybe you are not using a ref wav during training at all.\r\n> \r\n> Also it's maybe better to use the dev branch since it has all the changes from dev-gst-embeddings + fixes\r\n\r\nAha, that is interesting. I saw the value was changed. Does it mean it takes zeros as input? I couldn't figure it out, because the same setup yielded different results on the same dataset, as regards the GST learning. So the same wav file on the same sentence, gave different pitch and now it looks like any .wav file I provide `synthesize.py` with, the pitch is too high.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673935044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673939167","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673939167","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673939167,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkzOTE2Nw==","user":{"login":"lexkoro","id":6319070,"node_id":"MDQ6VXNlcjYzMTkwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/6319070?v=4","gravatar_id":"","url":"https://api.github.com/users/lexkoro","html_url":"https://github.com/lexkoro","followers_url":"https://api.github.com/users/lexkoro/followers","following_url":"https://api.github.com/users/lexkoro/following{/other_user}","gists_url":"https://api.github.com/users/lexkoro/gists{/gist_id}","starred_url":"https://api.github.com/users/lexkoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexkoro/subscriptions","organizations_url":"https://api.github.com/users/lexkoro/orgs","repos_url":"https://api.github.com/users/lexkoro/repos","events_url":"https://api.github.com/users/lexkoro/events{/privacy}","received_events_url":"https://api.github.com/users/lexkoro/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T07:45:27Z","updated_at":"2020-08-14T07:45:27Z","author_association":"CONTRIBUTOR","body":"Yes, if no style input is passed it uses zeros. So without passing a ref. wav the pitch is fine?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673939167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lexkoro","id":6319070,"node_id":"MDQ6VXNlcjYzMTkwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/6319070?v=4","gravatar_id":"","url":"https://api.github.com/users/lexkoro","html_url":"https://github.com/lexkoro","followers_url":"https://api.github.com/users/lexkoro/followers","following_url":"https://api.github.com/users/lexkoro/following{/other_user}","gists_url":"https://api.github.com/users/lexkoro/gists{/gist_id}","starred_url":"https://api.github.com/users/lexkoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexkoro/subscriptions","organizations_url":"https://api.github.com/users/lexkoro/orgs","repos_url":"https://api.github.com/users/lexkoro/repos","events_url":"https://api.github.com/users/lexkoro/events{/privacy}","received_events_url":"https://api.github.com/users/lexkoro/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673940463","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673940463","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673940463,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mzk0MDQ2Mw==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T07:48:40Z","updated_at":"2020-08-14T07:48:40Z","author_association":"CONTRIBUTOR","body":"> Yes, if no style input is passed it uses zeros. So without passing a ref. wav the pitch is fine?\r\n\r\nIt is! It is neutral but not too neutral. Providing a wav file (**any** wav file), makes the pitch too high. If I scale by 0.4, it is better. Conditioning on certain tokens is also fine, but the attention is a bit worse.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673940463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673999246","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673999246","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673999246,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mzk5OTI0Ng==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T10:05:31Z","updated_at":"2020-08-14T10:05:31Z","author_association":"CONTRIBUTOR","body":"maybe @Edresson can take a look?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673999246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"id":3655618873,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1NTYxODg3Mw==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3655618873","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-14T10:05:31Z","performed_via_github_app":null},{"id":3655618878,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTU2MTg4Nzg=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3655618878","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-14T10:05:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673999464","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-673999464","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":673999464,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mzk5OTQ2NA==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T10:06:02Z","updated_at":"2020-08-14T10:06:02Z","author_association":"CONTRIBUTOR","body":"> \r\n> \r\n> > Yes, if no style input is passed it uses zeros. So without passing a ref. wav the pitch is fine?\r\n> \r\n> It is! It is neutral but not too neutral. Providing a wav file (**any** wav file), makes the pitch too high. If I scale by 0.4, it is better. Conditioning on certain tokens is also fine, but the attention is a bit worse.\r\n\r\nwhy 0.4 ? how did you come up with that?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/673999464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674009123","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674009123","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674009123,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDAwOTEyMw==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T10:30:31Z","updated_at":"2020-08-14T10:30:31Z","author_association":"CONTRIBUTOR","body":"> > when the epoch ends,\r\n> \r\n> means in evaluate() function where the test sentences are synthesized?\r\n\r\nYes! This one.\r\n\r\n> why 0.4 ? how did you come up with that?\r\n\r\nI have been reading [this paper](https://google.github.io/tacotron/publications/global_style_tokens/Style%20Tokens%20Unsupervised%20Style%20Modeling%20Control%20and%20Transfer.pdf) and since they talked about scaling by multiplying and I think it is also how conditioning on specific tokens now happens on the dev branch, I thought I would try this. So I tried many values, from 0.05 to 0.9, but they were either too low pitched and there was a lot of glottalization, or the pitch was too high and the attention also broke. 0.4 gave me a nice middle ground. 0.4 produces natural speech with natural prosody and attention is retained almost wholly when synthesizing a text that is 2261 characters (approximately two pages off a book). But I think it depends on the voice. Before, I was training on @Edresson's voice-cloning branch of his TTS fork and my results were also great. Which is why I thought it was weird that the exact same config, the exact same text, with the same reference wav now gives a different prosody. Any wav file I am trying produces speech that is very high pitched, like my speaker is shouting.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674009123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"id":3655698234,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1NTY5ODIzNA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3655698234","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-14T10:30:31Z","performed_via_github_app":null},{"id":3655698238,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTU2OTgyMzg=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3655698238","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-14T10:30:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674027592","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674027592","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674027592,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDAyNzU5Mg==","user":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T11:22:58Z","updated_at":"2020-08-14T11:23:28Z","author_association":"CONTRIBUTOR","body":"@george-roussos I think that when you synthesized during training, as c.get(\"style_wav_for_test\") returns NONE the GST received a zero tensor as input. Hence the difference in training time and during synthesis. Try again now and let us know if the same wav style generates the same result.\r\n\r\n I checked the code and the only thing I found different between synthesis and training in GST is the conversion to float32 of the spectrogram and the wav. The dataloader does this and the compute_style_mel function did not, but I believe that this does not change much. But I sent PR #499  anyway.\r\n\r\n\r\nAre you training the multispeaker GST? Currently the GST with multispeaker is very unstable, as the GST learns characteristics of the speaker and this causes problems.\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674027592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false}},{"id":3655850214,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1NTg1MDIxNA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3655850214","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-14T11:22:58Z","performed_via_github_app":null},{"id":3655850218,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTU4NTAyMTg=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3655850218","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-14T11:22:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674043431","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674043431","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674043431,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDA0MzQzMQ==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T12:08:50Z","updated_at":"2020-08-14T12:08:50Z","author_association":"CONTRIBUTOR","body":"Nope, I am training single. I did a pull and tried to synthesize the speech again using `synthesis.py`, but the result is still the same (the speech sounds less natural without the scaling by 0.4, compared to the **voice-cloning** branch). I have always used the same dataset, with the same hparams and the same sentence. Has something changed in the way the GST layer learns prosody?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674043431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674052503","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674052503","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674052503,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDA1MjUwMw==","user":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T12:34:24Z","updated_at":"2020-08-14T12:34:24Z","author_association":"CONTRIBUTOR","body":"Can you supply two notebook colabs with the synthesis of the two models for debugging? it would help me find the problem. As far as I know the two implementations are exactly the same, gst_layers is the same embedding is concatenated in the same place, everything looks the same.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674052503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674059620","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674059620","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674059620,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDA1OTYyMA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T12:53:23Z","updated_at":"2020-08-14T12:53:23Z","author_association":"CONTRIBUTOR","body":"I made two notebooks, with `synthesis.py` of voice-cloning [here](https://colab.research.google.com/drive/1RZh-fBWNv7G7w2RVjwAcT_Sf1uvACWvc?usp=sharing) and dev-gst-embeddings [here](https://colab.research.google.com/drive/1ezl6Mqg-k-aLnd1AajEU-iDeOgG1Qw0H?usp=sharing). I can make notebooks with the `synthesize.py` instead if you need it, but I am not allowed to upload my model :(","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674059620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674064956","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674064956","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674064956,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDA2NDk1Ng==","user":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T13:06:00Z","updated_at":"2020-08-14T13:06:00Z","author_association":"CONTRIBUTOR","body":"Maybe you can use [this notebook](https://colab.research.google.com/drive/1JX29gDcsPHx5HlbwNkpHnPQkhhrSvrji?usp=sharing) to change the checkpoint and see if the model synthesizes correctly. In it the synthesis function is imported directly, so maybe we can try to find out where the problem is!\r\n\r\n\r\nThe checkpoint on that notebook is compatible with my voice-cloning branch, so you can change the branch and do the tests using the same checkpoint (an open checkpoint) so we can find the problem!\r\nSorry for not doing the tests myself, but I have little time available!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674064956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674091761","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674091761","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674091761,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDA5MTc2MQ==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-08-14T14:05:48Z","updated_at":"2020-08-14T14:05:48Z","author_association":"CONTRIBUTOR","body":"No problem! I tried to run inference on the voice-cloning branch, but it wouldn't work, first it kept complaining about some entries in the config.json file, but when I fixed these, I got errors about missing some keys:\r\n\r\n`Traceback (most recent call last):\r\n  File \"synthesize.py\", line 159, in <module>\r\n    model.load_state_dict(cp['model'])\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1045, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for Tacotron2:\r\n\tMissing key(s) in state_dict: \"encoder.convolutions.0.net.0.weight\", \"encoder.convolutions.0.net.0.bias\", \"encoder.convolutions.0.net.1.weight\", \"encoder.convolutions.0.net.1.bias\", \"encoder.convolutions.0.net.1.running_mean\", \"encoder.convolutions.0.net.1.running_var\", \"encoder.convolutions.1.net.0.weight\", \"encoder.convolutions.1.net.0.bias\", \"encoder.convolutions.1.net.1.weight\", \"encoder.convolutions.1.net.1.bias\", \"encoder.convolutions.1.net.1.running_mean\", \"encoder.convolutions.1.net.1.running_var\", \"encoder.convolutions.2.net.0.weight\", \"encoder.convolutions.2.net.0.bias\", \"encoder.convolutions.2.net.1.weight\", \"encoder.convolutions.2.net.1.bias\", \"encoder.convolutions.2.net.1.running_mean\", \"encoder.convolutions.2.net.1.running_var\", \"decoder.prenet.layers.0.linear_layer.weight\", \"decoder.prenet.layers.1.linear_layer.weight\", \"decoder.attention.location_layer.location_conv.weight\", \"postnet.convolutions.0.net.0.weight\", \"postnet.convolutions.0.net.0.bias\", \"postnet.convolutions.0.net.1.weight\", \"postnet.convolutions.0.net.1.bias\", \"postnet.convolutions.0.net.1.running_mean\", \"postnet.convolutions.0.net.1.running_var\", \"postnet.convolutions.1.net.0.weight\", \"postnet.convolutions.1.net.0.bias\", \"postnet.convolutions.1.net.1.weight\", \"postnet.convolutions.1.net.1.bias\", \"postnet.convolutions.1.net.1.running_mean\", \"postnet.convolutions.1.net.1.running_var\", \"postnet.convolutions.2.net.0.weight\", \"postnet.convolutions.2.net.0.bias\", \"postnet.convolutions.2.net.1.weight\", \"postnet.convolutions.2.net.1.bias\", \"postnet.convolutions.2.net.1.running_mean\", \"postnet.convolutions.2.net.1.running_var\", \"postnet.convolutions.3.net.0.weight\", \"postnet.convolutions.3.net.0.bias\", \"postnet.convolutions.3.net.1.weight\", \"postnet.convolutions.3.net.1.bias\", \"postnet.convolutions.3.net.1.running_mean\", \"postnet.convolutions.3.net.1.running_var\", \"postnet.convolutions.4.net.0.weight\", \"postnet.convolutions.4.net.0.bias\", \"postnet.convolutions.4.net.1.weight\", \"postnet.convolutions.4.net.1.bias\", \"postnet.convolutions.4.net.1.running_mean\", \"postnet.convolutions.4.net.1.running_var\". \r\n\tUnexpected key(s) in state_dict: \"encoder.convolutions.0.convolution1d.weight\", \"encoder.convolutions.0.convolution1d.bias\", \"encoder.convolutions.0.batch_normalization.weight\", \"encoder.convolutions.0.batch_normalization.bias\", \"encoder.convolutions.0.batch_normalization.running_mean\", \"encoder.convolutions.0.batch_normalization.running_var\", \"encoder.convolutions.0.batch_normalization.num_batches_tracked\", \"encoder.convolutions.1.convolution1d.weight\", \"encoder.convolutions.1.convolution1d.bias\", \"encoder.convolutions.1.batch_normalization.weight\", \"encoder.convolutions.1.batch_normalization.bias\", \"encoder.convolutions.1.batch_normalization.running_mean\", \"encoder.convolutions.1.batch_normalization.running_var\", \"encoder.convolutions.1.batch_normalization.num_batches_tracked\", \"encoder.convolutions.2.convolution1d.weight\", \"encoder.convolutions.2.convolution1d.bias\", \"encoder.convolutions.2.batch_normalization.weight\", \"encoder.convolutions.2.batch_normalization.bias\", \"encoder.convolutions.2.batch_normalization.running_mean\", \"encoder.convolutions.2.batch_normalization.running_var\", \"encoder.convolutions.2.batch_normalization.num_batches_tracked\", \"decoder.prenet.linear_layers.0.linear_layer.weight\", \"decoder.prenet.linear_layers.1.linear_layer.weight\", \"decoder.attention.location_layer.location_conv1d.weight\", \"postnet.convolutions.0.convolution1d.weight\", \"postnet.convolutions.0.convolution1d.bias\", \"postnet.convolutions.0.batch_normalization.weight\", \"postnet.convolutions.0.batch_normalization.bias\", \"postnet.convolutions.0.batch_normalization.running_mean\", \"postnet.convolutions.0.batch_normalization.running_var\", \"postnet.convolutions.0.batch_normalization.num_batches_tracked\", \"postnet.convolutions.1.convolution1d.weight\", \"postnet.convolutions.1.convolution1d.bias\", \"postnet.convolutions.1.batch_normalization.weight\", \"postnet.convolutions.1.batch_normalization.bias\", \"postnet.convolutions.1.batch_normalization.running_mean\", \"postnet.convolutions.1.batch_normalization.running_var\", \"postnet.convolutions.1.batch_normalization.num_batches_tracked\", \"postnet.convolutions.2.convolution1d.weight\", \"postnet.convolutions.2.convolution1d.bias\", \"postnet.convolutions.2.batch_normalization.weight\", \"postnet.convolutions.2.batch_normalization.bias\", \"postnet.convolutions.2.batch_normalization.running_mean\", \"postnet.convolutions.2.batch_normalization.running_var\", \"postnet.convolutions.2.batch_normalization.num_batches_tracked\", \"postnet.convolutions.3.convolution1d.weight\", \"postnet.convolutions.3.convolution1d.bias\", \"postnet.convolutions.3.batch_normalization.weight\", \"postnet.convolutions.3.batch_normalization.bias\", \"postnet.convolutions.3.batch_normalization.running_mean\", \"postnet.convolutions.3.batch_normalization.running_var\", \"postnet.convolutions.3.batch_normalization.num_batches_tracked\", \"postnet.convolutions.4.convolution1d.weight\", \"postnet.convolutions.4.convolution1d.bias\", \"postnet.convolutions.4.batch_normalization.weight\", \"postnet.convolutions.4.batch_normalization.bias\", \"postnet.convolutions.4.batch_normalization.running_mean\", \"postnet.convolutions.4.batch_normalization.running_var\", \"postnet.convolutions.4.batch_normalization.num_batches_tracked\". \r\n\tsize mismatch for decoder.attention_rnn.weight_ih: copying a param with shape torch.Size([4096, 1024]) from checkpoint, the shape in current model is torch.Size([4096, 896]).\r\n\tsize mismatch for decoder.attention.inputs_layer.linear_layer.weight: copying a param with shape torch.Size([128, 768]) from checkpoint, the shape in current model is torch.Size([128, 640]).\r\n\tsize mismatch for decoder.decoder_rnn.weight_ih: copying a param with shape torch.Size([4096, 1792]) from checkpoint, the shape in current model is torch.Size([4096, 1664]).\r\n\tsize mismatch for decoder.linear_projection.linear_layer.weight: copying a param with shape torch.Size([560, 1792]) from checkpoint, the shape in current model is torch.Size([560, 1664]).`","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674091761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674428685","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674428685","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674428685,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDQyODY4NQ==","user":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"created_at":"2020-08-15T17:47:27Z","updated_at":"2020-08-15T17:47:27Z","author_association":"CONTRIBUTOR","body":"@george-roussos I have 1 checkpoint compatible with both branchs and 2 configs. I actually checked the branch dev-gst-embeddings and my \"voice-cloning\" branch synthesizes different audios for the same GST sample, and on my branch the audio sounds much better. I believe we have a bug in the GST inference on that branch (on the dev branch too). I am looking for the problem again, as soon as I find and solve it I make a new PR and notice here.\r\n\r\nThanks for reporting the problem :).","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674428685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false}},{"id":3658720839,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1ODcyMDgzOQ==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3658720839","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-15T17:47:27Z","performed_via_github_app":null},{"id":3658720840,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTg3MjA4NDA=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3658720840","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-15T17:47:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674436661","html_url":"https://github.com/mozilla/TTS/issues/495#issuecomment-674436661","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/495","id":674436661,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDQzNjY2MQ==","user":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"created_at":"2020-08-15T19:07:44Z","updated_at":"2020-08-15T19:07:44Z","author_association":"CONTRIBUTOR","body":"> @george-roussos I have 1 checkpoint compatible with both branchs and 2 configs. I actually checked the branch dev-gst-embeddings and my \"voice-cloning\" branch synthesizes different audios for the same GST sample, and on my branch the audio sounds much better. I believe we have a bug in the GST inference on that branch (on the dev branch too). I am looking for the problem again, as soon as I find and solve it I make a new PR and notice here.\r\n> \r\n> Thanks for reporting the problem :).\r\n\r\nThis difference in my tests was caused by the conversion from db to amp and from amp to db. In the current version this has been changed, so checkpoints trained with gst before the update are incompatible. So if you try to load an old model, just updating config.json it will not work. This only applies to models trained with GST as the other models do not need to extract spectrograms in the synthesis time\r\n\r\n@george-roussos  I didn't find anything that could cause what you reported other than the change made by @SanjaESC . Without a replicable example it is very difficult to find the problem ..\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/674436661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false}},{"id":3658768130,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1ODc2ODEzMA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3658768130","actor":{"login":"lexkoro","id":6319070,"node_id":"MDQ6VXNlcjYzMTkwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/6319070?v=4","gravatar_id":"","url":"https://api.github.com/users/lexkoro","html_url":"https://github.com/lexkoro","followers_url":"https://api.github.com/users/lexkoro/followers","following_url":"https://api.github.com/users/lexkoro/following{/other_user}","gists_url":"https://api.github.com/users/lexkoro/gists{/gist_id}","starred_url":"https://api.github.com/users/lexkoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexkoro/subscriptions","organizations_url":"https://api.github.com/users/lexkoro/orgs","repos_url":"https://api.github.com/users/lexkoro/repos","events_url":"https://api.github.com/users/lexkoro/events{/privacy}","received_events_url":"https://api.github.com/users/lexkoro/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-15T19:07:44Z","performed_via_github_app":null},{"id":3658768131,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTg3NjgxMzE=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3658768131","actor":{"login":"lexkoro","id":6319070,"node_id":"MDQ6VXNlcjYzMTkwNzA=","avatar_url":"https://avatars.githubusercontent.com/u/6319070?v=4","gravatar_id":"","url":"https://api.github.com/users/lexkoro","html_url":"https://github.com/lexkoro","followers_url":"https://api.github.com/users/lexkoro/followers","following_url":"https://api.github.com/users/lexkoro/following{/other_user}","gists_url":"https://api.github.com/users/lexkoro/gists{/gist_id}","starred_url":"https://api.github.com/users/lexkoro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexkoro/subscriptions","organizations_url":"https://api.github.com/users/lexkoro/orgs","repos_url":"https://api.github.com/users/lexkoro/repos","events_url":"https://api.github.com/users/lexkoro/events{/privacy}","received_events_url":"https://api.github.com/users/lexkoro/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-15T19:07:45Z","performed_via_github_app":null},{"id":3658768134,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1ODc2ODEzNA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3658768134","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-15T19:07:45Z","performed_via_github_app":null},{"id":3658768135,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTg3NjgxMzU=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3658768135","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-15T19:07:45Z","performed_via_github_app":null}]