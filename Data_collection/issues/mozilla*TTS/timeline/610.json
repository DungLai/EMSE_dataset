[{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/751985405","html_url":"https://github.com/mozilla/TTS/issues/610#issuecomment-751985405","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/610","id":751985405,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MTk4NTQwNQ==","user":{"login":"thorstenMueller","id":9558265,"node_id":"MDQ6VXNlcjk1NTgyNjU=","avatar_url":"https://avatars.githubusercontent.com/u/9558265?v=4","gravatar_id":"","url":"https://api.github.com/users/thorstenMueller","html_url":"https://github.com/thorstenMueller","followers_url":"https://api.github.com/users/thorstenMueller/followers","following_url":"https://api.github.com/users/thorstenMueller/following{/other_user}","gists_url":"https://api.github.com/users/thorstenMueller/gists{/gist_id}","starred_url":"https://api.github.com/users/thorstenMueller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorstenMueller/subscriptions","organizations_url":"https://api.github.com/users/thorstenMueller/orgs","repos_url":"https://api.github.com/users/thorstenMueller/repos","events_url":"https://api.github.com/users/thorstenMueller/events{/privacy}","received_events_url":"https://api.github.com/users/thorstenMueller/received_events","type":"User","site_admin":false},"created_at":"2020-12-29T07:53:33Z","updated_at":"2020-12-29T07:53:49Z","author_association":"CONTRIBUTOR","body":"* Are you using latest dev branch?\r\n* Could you share your training config?\r\n* Did you already see this issue (https://github.com/mozilla/TTS/issues/282)?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/751985405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thorstenMueller","id":9558265,"node_id":"MDQ6VXNlcjk1NTgyNjU=","avatar_url":"https://avatars.githubusercontent.com/u/9558265?v=4","gravatar_id":"","url":"https://api.github.com/users/thorstenMueller","html_url":"https://github.com/thorstenMueller","followers_url":"https://api.github.com/users/thorstenMueller/followers","following_url":"https://api.github.com/users/thorstenMueller/following{/other_user}","gists_url":"https://api.github.com/users/thorstenMueller/gists{/gist_id}","starred_url":"https://api.github.com/users/thorstenMueller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorstenMueller/subscriptions","organizations_url":"https://api.github.com/users/thorstenMueller/orgs","repos_url":"https://api.github.com/users/thorstenMueller/repos","events_url":"https://api.github.com/users/thorstenMueller/events{/privacy}","received_events_url":"https://api.github.com/users/thorstenMueller/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/752014662","html_url":"https://github.com/mozilla/TTS/issues/610#issuecomment-752014662","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/610","id":752014662,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MjAxNDY2Mg==","user":{"login":"ysujiang","id":44495820,"node_id":"MDQ6VXNlcjQ0NDk1ODIw","avatar_url":"https://avatars.githubusercontent.com/u/44495820?v=4","gravatar_id":"","url":"https://api.github.com/users/ysujiang","html_url":"https://github.com/ysujiang","followers_url":"https://api.github.com/users/ysujiang/followers","following_url":"https://api.github.com/users/ysujiang/following{/other_user}","gists_url":"https://api.github.com/users/ysujiang/gists{/gist_id}","starred_url":"https://api.github.com/users/ysujiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ysujiang/subscriptions","organizations_url":"https://api.github.com/users/ysujiang/orgs","repos_url":"https://api.github.com/users/ysujiang/repos","events_url":"https://api.github.com/users/ysujiang/events{/privacy}","received_events_url":"https://api.github.com/users/ysujiang/received_events","type":"User","site_admin":false},"created_at":"2020-12-29T09:45:03Z","updated_at":"2020-12-29T09:45:03Z","author_association":"NONE","body":"> * Are you using latest dev branch?\r\n> * Could you share your training config?\r\n> * Did you already see this issue (#282)?\r\n\r\n1. yes, i used the latest dev branch\r\n2. here is the training config\r\n  {\r\n    \"run_name\": \"wavegrad-npy-libritts\",\r\n    \"run_description\": \"wavegrad libritts\",\r\n\r\n    \"audio\":{\r\n        \"fft_size\": 1024,         // number of stft frequency levels. Size of the linear spectogram frame.\r\n        \"win_length\": 1024,      // stft window length in ms.\r\n        \"hop_length\": 256,       // stft window hop-lengh in ms.\r\n        \"frame_length_ms\": null, // stft window length in ms.If null, 'win_length' is used.\r\n        \"frame_shift_ms\": null,  // stft window hop-lengh in ms. If null, 'hop_length' is used.\r\n\r\n        // Audio processing parameters\r\n        \"sample_rate\": 22050,//24000,   // DATASET-RELATED: wav sample-rate. If different than the original data, it is resampled.\r\n        \"preemphasis\": 0.98,//0.0,     // pre-emphasis to reduce spec noise and make it more structured. If 0.0, no -pre-emphasis.\r\n        \"ref_level_db\": 20,//0,     // reference level db, theoretically 20db is the sound of air.\r\n\r\n        // Silence trimming\r\n        \"do_trim_silence\": true,// enable trimming of slience of audio as you load it. LJspeech (false), TWEB (false), Nancy (true)\r\n        \"trim_db\": 30,//60,          // threshold for timming silence. Set this according to your dataset.\r\n\r\n        // MelSpectrogram parameters\r\n        \"num_mels\": 80,         // size of the mel spec frame.\r\n        \"mel_fmin\": 0.0,       // minimum freq level for mel-spec. ~50 for male and ~95 for female voices. Tune for dataset!!\r\n        \"mel_fmax\": 8000.0,    // maximum freq level for mel-spec. Tune for dataset!!\r\n        \"spec_gain\": 20.0,     // scaler value appplied after log transform of spectrogram.\r\n\r\n        // Normalization parameters\r\n        \"signal_norm\": true,    // normalize spec values. Mean-Var normalization if 'stats_path' is defined otherwise range normalization defined by the other params.\r\n        \"min_level_db\": -100,   // lower bound for normalization\r\n        \"symmetric_norm\": true, // move normalization to range [-1, 1]\r\n        \"max_norm\": 4.0,        // scale normalization to range [-max_norm, max_norm] or [0, max_norm]\r\n        \"clip_norm\": true,      // clip normalized values into the range.\r\n        \"stats_path\": \"./model/scale_stats.npy\"  //\"/home/erogol/Data/libritts/LibriTTS/scale_stats_wavegrad.npy\"    // DO NOT USE WITH MULTI_SPEAKER MODEL. scaler stats file computed by 'compute_statistics.py'. If it is defined, mean-std based notmalization is used and other normalization params are ignored\r\n    },\r\n\r\n    // DISTRIBUTED TRAINING\r\n    \"mixed_precision\": true,     // enable torch mixed precision training (true, false)\r\n    \"distributed\":{\r\n        \"backend\": \"nccl\",\r\n        \"url\": \"tcp:\\/\\/localhost:54322\"\r\n    },\r\n\r\n    \"target_loss\": \"avg_wavegrad_loss\",  // loss value to pick the best model to save after each epoch\r\n\r\n    // MODEL PARAMETERS\r\n    \"generator_model\": \"wavegrad\",\r\n    \"model_params\":{\r\n        \"use_weight_norm\": true,\r\n        \"y_conv_channels\":32,\r\n        \"x_conv_channels\":768,\r\n        \"ublock_out_channels\": [512, 512, 256, 128, 128],\r\n        \"dblock_out_channels\": [128, 128, 256, 512],\r\n        \"upsample_factors\": [4, 4, 4, 2, 2],\r\n        \"upsample_dilations\": [\r\n            [1, 2, 1, 2],\r\n            [1, 2, 1, 2],\r\n            [1, 2, 4, 8],\r\n            [1, 2, 4, 8],\r\n            [1, 2, 4, 8]]\r\n    },\r\n\r\n    // DATASET\r\n    \"data_path\": \"../data/wavs/\", //\"/home/erogol/Data/libritts/LibriTTS/train-clean-360/\",  // root data path. It finds all wav files recursively from there.\r\n    \"feature_path\": null,   // if you use precomputed features\r\n    \"seq_len\": 6144,        // 24 * hop_length\r\n    \"pad_short\": 0,      // additional padding for short wavs\r\n    \"conv_pad\": 0,          // additional padding against convolutions applied to spectrograms\r\n    \"use_noise_augment\": false,     // add noise to the audio signal for augmentation\r\n    \"use_cache\": false,      // use in memory cache to keep the computed features. This might cause OOM.\r\n\r\n    \"reinit_layers\": [],    // give a list of layer names to restore from the given checkpoint. If not defined, it reloads all heuristically matching layers.\r\n\r\n    // TRAINING\r\n    \"batch_size\": 96,      // Batch size for training.\r\n\r\n    // NOISE SCHEDULE PARAMS - Only effective at training time.\r\n    \"train_noise_schedule\":{\r\n        \"min_val\": 1e-6,\r\n        \"max_val\": 1e-2,\r\n        \"num_steps\": 1000\r\n    },\r\n    \"test_noise_schedule\":{\r\n        \"min_val\": 1e-6,\r\n        \"max_val\": 1e-2,\r\n        \"num_steps\": 50\r\n    },\r\n\r\n    // VALIDATION\r\n    \"run_eval\": true,       // enable/disable evaluation run\r\n\r\n    // OPTIMIZER\r\n    \"epochs\": 10000,                // total number of epochs to train.\r\n    \"clip_grad\": 1.0,                 // Generator gradient clipping threshold. Apply gradient clipping if > 0\r\n    \"lr_scheduler\": \"MultiStepLR\",  // one of the schedulers from https://pytorch.org/docs/stable/optim.html#how-to-adjust-learning-rate\r\n    \"lr_scheduler_params\": {\r\n        \"gamma\": 0.5,\r\n        \"milestones\": [100000, 200000, 300000, 400000, 500000, 600000]\r\n    },\r\n    \"lr\": 1e-4,                  // Initial learning rate. If Noam decay is active, maximum learning rate.\r\n\r\n    // TENSORBOARD and LOGGING\r\n    \"print_step\": 50,       // Number of steps to log traning on console.\r\n    \"print_eval\": false,     // If True, it prints loss values for each step in eval run.\r\n    \"save_step\": 5000,      // Number of training steps expected to plot training stats on TB and save model checkpoints.\r\n    \"checkpoint\": true,     // If true, it saves checkpoints per \"save_step\"\r\n    \"tb_model_param_stats\": true,     // true, plots param stats per layer on tensorboard. Might be memory consuming, but good for debugging.\r\n\r\n    // DATA LOADING\r\n    \"num_loader_workers\": 4,        // number of training data loader processes. Don't set it too big. 4-8 are good values.\r\n    \"num_val_loader_workers\": 4,    // number of evaluation data loader processes.\r\n    \"eval_split_size\": 256,\r\n\r\n    // PATHS\r\n    \"output_path\": \"./model/wavegrad/\"\r\n}\r\n\r\n3.  i saw the issue , and i used one gpu .  It also appeared at epoch 878.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/752014662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ysujiang","id":44495820,"node_id":"MDQ6VXNlcjQ0NDk1ODIw","avatar_url":"https://avatars.githubusercontent.com/u/44495820?v=4","gravatar_id":"","url":"https://api.github.com/users/ysujiang","html_url":"https://github.com/ysujiang","followers_url":"https://api.github.com/users/ysujiang/followers","following_url":"https://api.github.com/users/ysujiang/following{/other_user}","gists_url":"https://api.github.com/users/ysujiang/gists{/gist_id}","starred_url":"https://api.github.com/users/ysujiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ysujiang/subscriptions","organizations_url":"https://api.github.com/users/ysujiang/orgs","repos_url":"https://api.github.com/users/ysujiang/repos","events_url":"https://api.github.com/users/ysujiang/events{/privacy}","received_events_url":"https://api.github.com/users/ysujiang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/753594907","html_url":"https://github.com/mozilla/TTS/issues/610#issuecomment-753594907","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/610","id":753594907,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzU5NDkwNw==","user":{"login":"thorstenMueller","id":9558265,"node_id":"MDQ6VXNlcjk1NTgyNjU=","avatar_url":"https://avatars.githubusercontent.com/u/9558265?v=4","gravatar_id":"","url":"https://api.github.com/users/thorstenMueller","html_url":"https://github.com/thorstenMueller","followers_url":"https://api.github.com/users/thorstenMueller/followers","following_url":"https://api.github.com/users/thorstenMueller/following{/other_user}","gists_url":"https://api.github.com/users/thorstenMueller/gists{/gist_id}","starred_url":"https://api.github.com/users/thorstenMueller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorstenMueller/subscriptions","organizations_url":"https://api.github.com/users/thorstenMueller/orgs","repos_url":"https://api.github.com/users/thorstenMueller/repos","events_url":"https://api.github.com/users/thorstenMueller/events{/privacy}","received_events_url":"https://api.github.com/users/thorstenMueller/received_events","type":"User","site_admin":false},"created_at":"2021-01-03T10:13:20Z","updated_at":"2021-01-03T10:13:20Z","author_association":"CONTRIBUTOR","body":"I had a similar \"NaN\" issue using another wavegrad implementation repo.\r\nMaybe you can take a look to this issue discussion - maybe it's helpful in your case too:\r\n\r\nhttps://github.com/ivanvovk/WaveGrad/issues/8#issuecomment-706767562","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/753594907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thorstenMueller","id":9558265,"node_id":"MDQ6VXNlcjk1NTgyNjU=","avatar_url":"https://avatars.githubusercontent.com/u/9558265?v=4","gravatar_id":"","url":"https://api.github.com/users/thorstenMueller","html_url":"https://github.com/thorstenMueller","followers_url":"https://api.github.com/users/thorstenMueller/followers","following_url":"https://api.github.com/users/thorstenMueller/following{/other_user}","gists_url":"https://api.github.com/users/thorstenMueller/gists{/gist_id}","starred_url":"https://api.github.com/users/thorstenMueller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorstenMueller/subscriptions","organizations_url":"https://api.github.com/users/thorstenMueller/orgs","repos_url":"https://api.github.com/users/thorstenMueller/repos","events_url":"https://api.github.com/users/thorstenMueller/events{/privacy}","received_events_url":"https://api.github.com/users/thorstenMueller/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/780549440","html_url":"https://github.com/mozilla/TTS/issues/610#issuecomment-780549440","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/610","id":780549440,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MDU0OTQ0MA==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2021-02-17T13:17:26Z","updated_at":"2021-02-17T13:17:26Z","author_association":"CONTRIBUTOR","body":"reopen if needed ","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/780549440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"id":4341329094,"node_id":"MDExOkNsb3NlZEV2ZW50NDM0MTMyOTA5NA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/4341329094","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-02-17T13:17:26Z","state_reason":null,"performed_via_github_app":null}]