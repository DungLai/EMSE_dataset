[{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/589888954","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-589888954","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":589888954,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTg4ODk1NA==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-02-22T00:10:41Z","updated_at":"2020-02-22T00:10:41Z","author_association":"CONTRIBUTOR","body":"We had done some preliminary work on that. I was able to convert it with torch script but never tried onnx. However, I've lost the branch at some point. \r\n\r\n@reuben has even written C based inference code for TTS. He probably has more to say about this.\r\n\r\nIf you are willing to take this effort forward, I'd be happy to help. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/589888954/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"id":3062301349,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA2MjMwMTM0OQ==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3062301349","actor":{"login":"reuben","id":477142,"node_id":"MDQ6VXNlcjQ3NzE0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/477142?v=4","gravatar_id":"","url":"https://api.github.com/users/reuben","html_url":"https://github.com/reuben","followers_url":"https://api.github.com/users/reuben/followers","following_url":"https://api.github.com/users/reuben/following{/other_user}","gists_url":"https://api.github.com/users/reuben/gists{/gist_id}","starred_url":"https://api.github.com/users/reuben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reuben/subscriptions","organizations_url":"https://api.github.com/users/reuben/orgs","repos_url":"https://api.github.com/users/reuben/repos","events_url":"https://api.github.com/users/reuben/events{/privacy}","received_events_url":"https://api.github.com/users/reuben/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-22T00:10:41Z","performed_via_github_app":null},{"id":3062301354,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwNjIzMDEzNTQ=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3062301354","actor":{"login":"reuben","id":477142,"node_id":"MDQ6VXNlcjQ3NzE0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/477142?v=4","gravatar_id":"","url":"https://api.github.com/users/reuben","html_url":"https://github.com/reuben","followers_url":"https://api.github.com/users/reuben/followers","following_url":"https://api.github.com/users/reuben/following{/other_user}","gists_url":"https://api.github.com/users/reuben/gists{/gist_id}","starred_url":"https://api.github.com/users/reuben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reuben/subscriptions","organizations_url":"https://api.github.com/users/reuben/orgs","repos_url":"https://api.github.com/users/reuben/repos","events_url":"https://api.github.com/users/reuben/events{/privacy}","received_events_url":"https://api.github.com/users/reuben/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-22T00:10:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/589932517","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-589932517","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":589932517,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTkzMjUxNw==","user":{"login":"reuben","id":477142,"node_id":"MDQ6VXNlcjQ3NzE0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/477142?v=4","gravatar_id":"","url":"https://api.github.com/users/reuben","html_url":"https://github.com/reuben","followers_url":"https://api.github.com/users/reuben/followers","following_url":"https://api.github.com/users/reuben/following{/other_user}","gists_url":"https://api.github.com/users/reuben/gists{/gist_id}","starred_url":"https://api.github.com/users/reuben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reuben/subscriptions","organizations_url":"https://api.github.com/users/reuben/orgs","repos_url":"https://api.github.com/users/reuben/repos","events_url":"https://api.github.com/users/reuben/events{/privacy}","received_events_url":"https://api.github.com/users/reuben/received_events","type":"User","site_admin":false},"created_at":"2020-02-22T08:30:41Z","updated_at":"2020-02-22T08:30:41Z","author_association":"CONTRIBUTOR","body":"I was able to get a basic setup working by making TTS + Griffin-Lim work with TorchScript. Then from C++ I could get the PCM samples directly as output. You can see the changes here: https://github.com/mozilla/TTS/compare/master...reuben:native_inference_1.2_rebased_dev\r\n\r\nIt's outdated now. Maybe PyTorch 1.4 has made things easier, I haven't tried again. What I saw at the time is that it is not any faster than the Python code, so I stopped spending time on that.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/589932517/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"reuben","id":477142,"node_id":"MDQ6VXNlcjQ3NzE0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/477142?v=4","gravatar_id":"","url":"https://api.github.com/users/reuben","html_url":"https://github.com/reuben","followers_url":"https://api.github.com/users/reuben/followers","following_url":"https://api.github.com/users/reuben/following{/other_user}","gists_url":"https://api.github.com/users/reuben/gists{/gist_id}","starred_url":"https://api.github.com/users/reuben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reuben/subscriptions","organizations_url":"https://api.github.com/users/reuben/orgs","repos_url":"https://api.github.com/users/reuben/repos","events_url":"https://api.github.com/users/reuben/events{/privacy}","received_events_url":"https://api.github.com/users/reuben/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/590762279","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-590762279","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":590762279,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDc2MjI3OQ==","user":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T09:12:55Z","updated_at":"2020-02-25T12:19:18Z","author_association":"NONE","body":"> I was able to get a basic setup working by making TTS + Griffin-Lim work with TorchScript. Then from C++ I could get the PCM samples directly as output. You can see the changes here: [master...reuben:native_inference_1.2_rebased_dev](https://github.com/mozilla/TTS/compare/master...reuben:native_inference_1.2_rebased_dev)\r\n> \r\n> It's outdated now. Maybe PyTorch 1.4 has made things easier, I haven't tried again. What I saw at the time is that it is not any faster than the Python code, so I stopped spending time on that.\r\n\r\nThank you!\r\nI've tried to do the same changes, it didn't work, had errors with _ValueError: Unknown type annotation: 'typing_extensions.Final[float]_ for some reason. \r\nAnyway, I tried just trace complete model (making it input invariant), though that lead to increasing the inference time. I expected it to improve speed like 1.5 times at least or more. I find it strange. Maybe I did something wrong.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/590762279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vcjob","id":51916323,"node_id":"MDQ6VXNlcjUxOTE2MzIz","avatar_url":"https://avatars.githubusercontent.com/u/51916323?v=4","gravatar_id":"","url":"https://api.github.com/users/vcjob","html_url":"https://github.com/vcjob","followers_url":"https://api.github.com/users/vcjob/followers","following_url":"https://api.github.com/users/vcjob/following{/other_user}","gists_url":"https://api.github.com/users/vcjob/gists{/gist_id}","starred_url":"https://api.github.com/users/vcjob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vcjob/subscriptions","organizations_url":"https://api.github.com/users/vcjob/orgs","repos_url":"https://api.github.com/users/vcjob/repos","events_url":"https://api.github.com/users/vcjob/events{/privacy}","received_events_url":"https://api.github.com/users/vcjob/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/590815913","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-590815913","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":590815913,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDgxNTkxMw==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T11:14:28Z","updated_at":"2020-02-25T11:14:28Z","author_association":"CONTRIBUTOR","body":"> What I saw at the time is that it is not any faster than the Python code, so I stopped spending time on that.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/590815913/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"id":3117869709,"node_id":"MDEyOkxhYmVsZWRFdmVudDMxMTc4Njk3MDk=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3117869709","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-03-11T09:01:07Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597538857","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-597538857","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":597538857,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzUzODg1Nw==","user":{"login":"Kotsiopoulos","id":23268964,"node_id":"MDQ6VXNlcjIzMjY4OTY0","avatar_url":"https://avatars.githubusercontent.com/u/23268964?v=4","gravatar_id":"","url":"https://api.github.com/users/Kotsiopoulos","html_url":"https://github.com/Kotsiopoulos","followers_url":"https://api.github.com/users/Kotsiopoulos/followers","following_url":"https://api.github.com/users/Kotsiopoulos/following{/other_user}","gists_url":"https://api.github.com/users/Kotsiopoulos/gists{/gist_id}","starred_url":"https://api.github.com/users/Kotsiopoulos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kotsiopoulos/subscriptions","organizations_url":"https://api.github.com/users/Kotsiopoulos/orgs","repos_url":"https://api.github.com/users/Kotsiopoulos/repos","events_url":"https://api.github.com/users/Kotsiopoulos/events{/privacy}","received_events_url":"https://api.github.com/users/Kotsiopoulos/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T09:50:58Z","updated_at":"2020-03-11T09:51:48Z","author_association":"NONE","body":"> Hello everyone!\r\n> \r\n> I spent a few days trying to convert a tacotron2 model to torch.jit.script and onnx.\r\n> \r\n>     1. I did convert it to onnx, thought I couldn't convert the onnx model to TensorRT after all due to some errors.\r\n> \r\n>     2. I can only do tracing with torch.jit, but is works, obviously, for the same input length. I gave up changing the code for jit.script, even to script only the Decoder. No success so far.\r\n>        I read on the Nvidia's Tacotron2 repo, they say it must be not hard to export in jit.script.\r\n>        Did anyone successfully converted the model to jit.script? Maybe to onnx?\r\n>        If so, please, give some hints!!\r\n>        @ergol, any plans for special branch maybe for jit/onnx?\r\n> \r\n> \r\n> Thanks for any suggestions!\r\n\r\nCan you elaborate on how you successfully converted tacontron2 to onnx?\r\nI am trying to export tacotron2 checkpoint_261000 with:\r\n\r\ntext_cleaner = [CONFIG.text_cleaner]\r\n    if CONFIG.use_phonemes:\r\n        seq = np.asarray(\r\n            phoneme_to_sequence(text, text_cleaner, CONFIG.phoneme_language, enable_eos_bos_chars),\r\n            dtype=np.int32)\r\n    else:\r\n        seq = np.asarray(text_to_sequence(text, text_cleaner), dtype=np.int32)\r\n    chars_var = torch.from_numpy(seq).unsqueeze(0)\r\n    # synthesize voice\r\n    if use_cuda:\r\n        chars_var = chars_var.cuda()\r\n    if truncated:\r\n        decoder_output, postnet_output, alignments, stop_tokens = model.inference_truncated(\r\n            chars_var.long())\r\n        \r\n    else:\r\n        decoder_output, postnet_output, alignments, stop_tokens = model.inference(chars_var.long())\r\n        print('attempt to save model to onnx')\r\n        torch.onnx.export(model, chars_var.long(),location_to_save_model)\r\nbut i get the error:\r\nKeyError: '_thnn_fused_lstm_cell'","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597538857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Kotsiopoulos","id":23268964,"node_id":"MDQ6VXNlcjIzMjY4OTY0","avatar_url":"https://avatars.githubusercontent.com/u/23268964?v=4","gravatar_id":"","url":"https://api.github.com/users/Kotsiopoulos","html_url":"https://github.com/Kotsiopoulos","followers_url":"https://api.github.com/users/Kotsiopoulos/followers","following_url":"https://api.github.com/users/Kotsiopoulos/following{/other_user}","gists_url":"https://api.github.com/users/Kotsiopoulos/gists{/gist_id}","starred_url":"https://api.github.com/users/Kotsiopoulos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kotsiopoulos/subscriptions","organizations_url":"https://api.github.com/users/Kotsiopoulos/orgs","repos_url":"https://api.github.com/users/Kotsiopoulos/repos","events_url":"https://api.github.com/users/Kotsiopoulos/events{/privacy}","received_events_url":"https://api.github.com/users/Kotsiopoulos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/626303775","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-626303775","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":626303775,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjMwMzc3NQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"created_at":"2020-05-10T10:10:48Z","updated_at":"2020-05-10T10:10:48Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions. You might also look our discourse page for further help. https://discourse.mozilla.org/c/tts\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/626303775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false}},{"id":3320175168,"node_id":"MDEyOkxhYmVsZWRFdmVudDMzMjAxNzUxNjg=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3320175168","actor":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-05-10T10:10:49Z","label":{"name":"wontfix","color":"ffffff"},"performed_via_github_app":null},{"id":3344491350,"node_id":"MDExOkNsb3NlZEV2ZW50MzM0NDQ5MTM1MA==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3344491350","actor":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-05-17T12:22:55Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/717215949","html_url":"https://github.com/mozilla/TTS/issues/361#issuecomment-717215949","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/361","id":717215949,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzIxNTk0OQ==","user":{"login":"hengyeliu","id":37336300,"node_id":"MDQ6VXNlcjM3MzM2MzAw","avatar_url":"https://avatars.githubusercontent.com/u/37336300?v=4","gravatar_id":"","url":"https://api.github.com/users/hengyeliu","html_url":"https://github.com/hengyeliu","followers_url":"https://api.github.com/users/hengyeliu/followers","following_url":"https://api.github.com/users/hengyeliu/following{/other_user}","gists_url":"https://api.github.com/users/hengyeliu/gists{/gist_id}","starred_url":"https://api.github.com/users/hengyeliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hengyeliu/subscriptions","organizations_url":"https://api.github.com/users/hengyeliu/orgs","repos_url":"https://api.github.com/users/hengyeliu/repos","events_url":"https://api.github.com/users/hengyeliu/events{/privacy}","received_events_url":"https://api.github.com/users/hengyeliu/received_events","type":"User","site_admin":false},"created_at":"2020-10-27T12:40:48Z","updated_at":"2020-10-27T12:40:48Z","author_association":"NONE","body":"> > Hello everyone!\r\n> > I spent a few days trying to convert a tacotron2 model to torch.jit.script and onnx.\r\n> > ```\r\n> > 1. I did convert it to onnx, thought I couldn't convert the onnx model to TensorRT after all due to some errors.\r\n> > \r\n> > 2. I can only do tracing with torch.jit, but is works, obviously, for the same input length. I gave up changing the code for jit.script, even to script only the Decoder. No success so far.\r\n> >    I read on the Nvidia's Tacotron2 repo, they say it must be not hard to export in jit.script.\r\n> >    Did anyone successfully converted the model to jit.script? Maybe to onnx?\r\n> >    If so, please, give some hints!!\r\n> >    @ergol, any plans for special branch maybe for jit/onnx?\r\n> > ```\r\n> > \r\n> > \r\n> > Thanks for any suggestions!\r\n> \r\n> Can you elaborate on how you successfully converted tacontron2 to onnx?\r\n> I am trying to export tacotron2 checkpoint_261000 with:\r\n> \r\n> text_cleaner = [CONFIG.text_cleaner]\r\n> if CONFIG.use_phonemes:\r\n> seq = np.asarray(\r\n> phoneme_to_sequence(text, text_cleaner, CONFIG.phoneme_language, enable_eos_bos_chars),\r\n> dtype=np.int32)\r\n> else:\r\n> seq = np.asarray(text_to_sequence(text, text_cleaner), dtype=np.int32)\r\n> chars_var = torch.from_numpy(seq).unsqueeze(0)\r\n> # synthesize voice\r\n> if use_cuda:\r\n> chars_var = chars_var.cuda()\r\n> if truncated:\r\n> decoder_output, postnet_output, alignments, stop_tokens = model.inference_truncated(\r\n> chars_var.long())\r\n> \r\n> ```\r\n> else:\r\n>     decoder_output, postnet_output, alignments, stop_tokens = model.inference(chars_var.long())\r\n>     print('attempt to save model to onnx')\r\n>     torch.onnx.export(model, chars_var.long(),location_to_save_model)\r\n> ```\r\n> \r\n> but i get the error:\r\n> KeyError: '_thnn_fused_lstm_cell'\r\n\r\nhello，have you solved this error? I got same error.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/717215949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hengyeliu","id":37336300,"node_id":"MDQ6VXNlcjM3MzM2MzAw","avatar_url":"https://avatars.githubusercontent.com/u/37336300?v=4","gravatar_id":"","url":"https://api.github.com/users/hengyeliu","html_url":"https://github.com/hengyeliu","followers_url":"https://api.github.com/users/hengyeliu/followers","following_url":"https://api.github.com/users/hengyeliu/following{/other_user}","gists_url":"https://api.github.com/users/hengyeliu/gists{/gist_id}","starred_url":"https://api.github.com/users/hengyeliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hengyeliu/subscriptions","organizations_url":"https://api.github.com/users/hengyeliu/orgs","repos_url":"https://api.github.com/users/hengyeliu/repos","events_url":"https://api.github.com/users/hengyeliu/events{/privacy}","received_events_url":"https://api.github.com/users/hengyeliu/received_events","type":"User","site_admin":false}}]