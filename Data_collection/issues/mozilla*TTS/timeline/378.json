[{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597023668","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597023668","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597023668,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzAyMzY2OA==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-03-10T10:52:57Z","updated_at":"2020-03-10T10:52:57Z","author_association":"CONTRIBUTOR","body":"Embeddings you extracted from the encoder are sentence invariant and that is the essence of it. You can either provide embeddings per sentence or the mean vector at training time. Both should be fine.\r\n\r\nIn the inference time, you need to provide the right embedding vector to synthesize the corresponding voice. Or if you syn. voice for a new speaker you can generate its embedding vector with the encoder and provide it to the TTS model. In theory, TTS model should generalize well.\r\n\r\nUsing external embedding vectors is not supported yet in any of the released TTS versions. However, it should be easy to play with the code to do it.\r\n\r\n- You need to load the right vector in TTSDataset.py\r\n- Feed embed vec to the model in models/Tacotron.py (or Tacotron2.py)\r\n\r\nAnd probably couple of more buzzers. \r\n\r\nOr another way to implement it is to initialize the speaker embedding layer with the encoder embeddings and freeze the layer. It should be easier.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597023668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597032306","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597032306","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597032306,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzAzMjMwNg==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-10T11:15:06Z","updated_at":"2020-03-10T11:22:36Z","author_association":"CONTRIBUTOR","body":"Ah, okay, I thought it is not possible to provide with external embedding vectors, because there was no switch. Getting the mean of a speaker's voice embeddings seems trivial, then, however I think going the first way and modifying the code is probably only going to get me more headaches and I don't think hardcoding anything is a good idea either.  The second way sounds much more feasible, but I'd like some more pointers if you'd be so kind (this is my first time for many things for me). Do I do this (freeze the layer and feed my vectors of choice) during inference or training time?\r\n\r\n>Or if you syn. voice for a new speaker you can generate its embedding vector with the encoder and provide it to the TTS model. In theory, TTS model should generalize well.\r\n\r\nYes, that is what I want to do. But, if we train a multispeaker model and it has multispeaker support, we still cannot provide with new speakers.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597032306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597517008","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597517008","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597517008,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzUxNzAwOA==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T08:59:25Z","updated_at":"2020-03-11T08:59:25Z","author_association":"CONTRIBUTOR","body":"you can provide a new speaker. you need to compute its embedding vector at inference time and provide that to the network.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597517008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"id":3117871357,"node_id":"MDEyOkxhYmVsZWRFdmVudDMxMTc4NzEzNTc=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3117871357","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-03-11T09:01:36Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597521270","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597521270","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597521270,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzUyMTI3MA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T09:09:53Z","updated_at":"2020-03-11T09:10:15Z","author_association":"CONTRIBUTOR","body":"Thanks, but how can we provide new speakers to an already-trained model? We have to pass the ID of the speaker in the `speaker_id` flag, and these IDs get assigned during training time. Or are you talking about editing `synthesis.py`? In that way, I would guess we would have to edit `id_to_torch`, and give it our embedding, but wouldn't that require hardcoding the embedding? And, if this is correct, that means the model is not trained on these external embeddings.\r\n\r\nOtherwise, I took a look at the code and the suggestion about freezing the layer (thanks!) and I assume freezing is done in `TTS/models/tacotron2.py`, right? Because that is the only place I saw that the speaker embedding layer was initialized (line 42 — line 45). My question is whether it is initialized there, or at the end of the code.\r\n\r\nIf my first assumption (editing `synthesis.py`) is correct, I would be perfectly happy to try and make a multi-speaker version of the file in a pull request. 😀The second one, even.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597521270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597533067","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597533067","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597533067,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzUzMzA2Nw==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T09:37:26Z","updated_at":"2020-03-11T09:41:24Z","author_association":"CONTRIBUTOR","body":"At the inference, time ignore the embedding layer and provide the computed embedding vector manually.\r\n\r\nFreezing is done where you define the embedding layer. So it depends on your implementation. You basically set required_grad false for that layer. \r\n\r\nMaybe it is a good idea to write a small script that reads the whole embedding vectors and creates an embedding layer and saves it. Then at training time, your model can load that layer to freezes it if it is set in the config file.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597533067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597541830","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597541830","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597541830,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzU0MTgzMA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T09:57:47Z","updated_at":"2020-03-11T09:57:47Z","author_association":"CONTRIBUTOR","body":"The implementation I am trying to edit is the one in the dev branch. I want to try training with these embeddings and not only infer. I can only see weights initialised in `TTS/models/tacotron2.py`.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597541830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597545426","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597545426","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597545426,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzU0NTQyNg==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T10:06:00Z","updated_at":"2020-03-11T10:06:00Z","author_association":"CONTRIBUTOR","body":"I understand what you like to do. My suggestion was for only inference with a new speaker. ","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597545426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597546664","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597546664","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597546664,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzU0NjY2NA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T10:08:55Z","updated_at":"2020-03-11T10:12:04Z","author_association":"CONTRIBUTOR","body":"That one would also be great if it worked. Train a big multi-speaker model and then be able to adapt to a new speaker only using the external embeddings of them, extracted from Speaker Encoder.\r\n\r\nAs I understand it, the speaker embedding layer is initialized in where I mentioned (`TTS/models/tacotron2.py`), since an Embedding lookup is created there and the weights are initialized right after, then the embeddings variable is empty. Correct me if I am wrong. I am sorry if what I am saying sounds stupid, I am just trying to understand everything. 😀","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597546664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597557273","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-597557273","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":597557273,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzU1NzI3Mw==","user":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T10:32:39Z","updated_at":"2020-03-11T10:32:39Z","author_association":"CONTRIBUTOR","body":"It is right. initialization is done in Tacotron2.py.  \r\n\r\nhttps://github.com/mozilla/TTS/blob/master/models/tacotron2.py#L43","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/597557273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/598240284","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-598240284","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":598240284,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODI0MDI4NA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T15:07:46Z","updated_at":"2020-03-12T15:07:46Z","author_association":"CONTRIBUTOR","body":"Really sorry to be a bugger, but I cannot figure out for the life of me how to only initialize using my embeddings. Tried a lot of things but nothing seems to work. Any help from anyone would be greatly appreciated.","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/598240284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/600829164","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-600829164","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":600829164,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDgyOTE2NA==","user":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false},"created_at":"2020-03-18T19:55:37Z","updated_at":"2020-03-18T19:55:37Z","author_association":"CONTRIBUTOR","body":"@george-roussos  I'm working with multi-speaker on my branch I did the load embeddings for the nn.embedding layer (see here: https://github.com/Edresson/TTS/blob/dev-embedding/models/ tacotron.py), currently only supported tacotron.\r\nTo load your speaker embeddings you must pass the path of speakers.json in config.json (parameter speaker_embedding_file). \r\n\r\nThe expected format for the speakers.json file is:\r\n{name: {'id': id, 'embedding': embedding_list}, {...}, ...}\r\n\r\nAn example:\r\n{\"speaker_name_x\": {'id': 0, 'embedding': [1,2,3,4,5,5,65,76,7,78,9]},\r\n\"speaker_name_y\": {'id': 1, 'embedding': [5,2,3,4,5,5,65,76,7,78,9]}}\r\n","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/600829164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edresson","id":28763586,"node_id":"MDQ6VXNlcjI4NzYzNTg2","avatar_url":"https://avatars.githubusercontent.com/u/28763586?v=4","gravatar_id":"","url":"https://api.github.com/users/Edresson","html_url":"https://github.com/Edresson","followers_url":"https://api.github.com/users/Edresson/followers","following_url":"https://api.github.com/users/Edresson/following{/other_user}","gists_url":"https://api.github.com/users/Edresson/gists{/gist_id}","starred_url":"https://api.github.com/users/Edresson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edresson/subscriptions","organizations_url":"https://api.github.com/users/Edresson/orgs","repos_url":"https://api.github.com/users/Edresson/repos","events_url":"https://api.github.com/users/Edresson/events{/privacy}","received_events_url":"https://api.github.com/users/Edresson/received_events","type":"User","site_admin":false}},{"id":3142950839,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzE0Mjk1MDgzOQ==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3142950839","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-18T19:55:37Z","performed_via_github_app":null},{"id":3142950841,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMxNDI5NTA4NDE=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3142950841","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-18T19:55:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/600849994","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-600849994","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":600849994,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMDg0OTk5NA==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-18T20:46:15Z","updated_at":"2020-03-18T20:47:12Z","author_association":"CONTRIBUTOR","body":"> @george-roussos I'm working with multi-speaker on my branch I did the load embeddings for the nn.embedding layer (see here: https://github.com/Edresson/TTS/blob/dev-embedding/models/ tacotron.py), currently only supported tacotron.\r\n> To load your speaker embeddings you must pass the path of speakers.json in config.json (parameter speaker_embedding_file).\r\n> \r\n> The expected format for the speakers.json file is:\r\n> {name: {'id': id, 'embedding': embedding_list}, {...}, ...}\r\n> \r\n> An example:\r\n> {\"speaker_name_x\": {'id': 0, 'embedding': [1,2,3,4,5,5,65,76,7,78,9]},\r\n> \"speaker_name_y\": {'id': 1, 'embedding': [5,2,3,4,5,5,65,76,7,78,9]}}\r\n\r\nAmazing, thanks for the heads up! I managed to get them to load by modifying the model in the model dir directly, by initializing the speaker embedding layer for any amount of speakers and then freezing it. I did by creating a layer from pretrained weights, which was a torch float tensor I passed (dim 512). Since it freezes it is used for every speaker. The good thing about that approach is that it works both in Taco and Taco2 models. I do have to use a json file of speakers to make the synthesis use the embeddings.\r\n\r\nI just saw you did the same thing. Does it not work for Taco2?","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/600849994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"id":3143104853,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzE0MzEwNDg1Mw==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3143104853","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-18T20:46:15Z","performed_via_github_app":null},{"id":3143104855,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMxNDMxMDQ4NTU=","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3143104855","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-18T20:46:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/603107332","html_url":"https://github.com/mozilla/TTS/issues/378#issuecomment-603107332","issue_url":"https://api.github.com/repos/mozilla/TTS/issues/378","id":603107332,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzEwNzMzMg==","user":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"created_at":"2020-03-24T08:44:59Z","updated_at":"2020-03-24T08:44:59Z","author_association":"CONTRIBUTOR","body":"Discussion is now developed [here](https://discourse.mozilla.org/t/multispeaker-development-progress/55342/16)","reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/comments/603107332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false}},{"id":3158633666,"node_id":"MDExOkNsb3NlZEV2ZW50MzE1ODYzMzY2Ng==","url":"https://api.github.com/repos/mozilla/TTS/issues/events/3158633666","actor":{"login":"george-roussos","id":25833833,"node_id":"MDQ6VXNlcjI1ODMzODMz","avatar_url":"https://avatars.githubusercontent.com/u/25833833?v=4","gravatar_id":"","url":"https://api.github.com/users/george-roussos","html_url":"https://github.com/george-roussos","followers_url":"https://api.github.com/users/george-roussos/followers","following_url":"https://api.github.com/users/george-roussos/following{/other_user}","gists_url":"https://api.github.com/users/george-roussos/gists{/gist_id}","starred_url":"https://api.github.com/users/george-roussos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/george-roussos/subscriptions","organizations_url":"https://api.github.com/users/george-roussos/orgs","repos_url":"https://api.github.com/users/george-roussos/repos","events_url":"https://api.github.com/users/george-roussos/events{/privacy}","received_events_url":"https://api.github.com/users/george-roussos/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-24T08:45:03Z","state_reason":null,"performed_via_github_app":null}]