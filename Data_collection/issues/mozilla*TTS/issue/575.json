{"url":"https://api.github.com/repos/mozilla/TTS/issues/575","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/575/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/575/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/575/events","html_url":"https://github.com/mozilla/TTS/issues/575","id":748629958,"node_id":"MDU6SXNzdWU3NDg2Mjk5NTg=","number":575,"title":"ValueError: Unsupported dtype when calling self.dict_to_tb_figure","user":{"login":"WeberJulian","id":17219561,"node_id":"MDQ6VXNlcjE3MjE5NTYx","avatar_url":"https://avatars.githubusercontent.com/u/17219561?v=4","gravatar_id":"","url":"https://api.github.com/users/WeberJulian","html_url":"https://github.com/WeberJulian","followers_url":"https://api.github.com/users/WeberJulian/followers","following_url":"https://api.github.com/users/WeberJulian/following{/other_user}","gists_url":"https://api.github.com/users/WeberJulian/gists{/gist_id}","starred_url":"https://api.github.com/users/WeberJulian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WeberJulian/subscriptions","organizations_url":"https://api.github.com/users/WeberJulian/orgs","repos_url":"https://api.github.com/users/WeberJulian/repos","events_url":"https://api.github.com/users/WeberJulian/events{/privacy}","received_events_url":"https://api.github.com/users/WeberJulian/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2020-11-23T09:28:49Z","updated_at":"2020-11-25T14:04:45Z","closed_at":"2020-11-25T14:04:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I use the dev branch.\r\nAt the 5k step mark (which correspond to my save_step), I get this error:\r\n\r\n```   \r\n--> STEP: 71/703 -- GLOBAL_STEP: 5000\r\n     | > decoder_loss: 0.50926  (0.39530)\r\n     | > postnet_loss: 1.28198  (1.03700)\r\n     | > stopnet_loss: 0.21789  (0.21245)\r\n     | > decoder_coarse_loss: 0.61804  (0.53054)\r\n     | > decoder_ddc_loss: 0.00180  (0.00346)\r\n     | > decoder_diff_spec_loss: 0.30351  (0.25957)\r\n     | > postnet_diff_spec_loss: 1.08807  (0.90843)\r\n     | > decoder_ssim_loss: 0.47350  (0.34447)\r\n     | > postnet_ssim_loss: 0.53051  (0.40000)\r\n     | > loss: 1.48395  (1.20202)\r\n     | > align_error: 0.98525  (0.96950)\r\n     | > avg_spec_length: 136.6\r\n     | > avg_text_length: 39.6\r\n     | > step_time: 0.6146\r\n     | > loader_time: 0.00\r\n     | > current_lr: 0.0001\r\n > CHECKPOINT : /home/ubuntu/model_vm/fr-5-speakers-November-22-2020_09+55PM-8d3554d/checkpoint_5000.pth.tar\r\n ! Run is kept in /home/ubuntu/model_vm/fr-5-speakers-November-22-2020_09+55PM-8d3554d\r\nTraceback (most recent call last):\r\n  File \"train_tacotron.py\", line 691, in <module>\r\n    main(args)\r\n  File \"train_tacotron.py\", line 603, in main\r\n    global_step, epoch, scaler, scaler_st, speaker_mapping)\r\n  File \"train_tacotron.py\", line 305, in train\r\n    tb_logger.tb_train_figures(global_step, figures)\r\n  File \"/home/ubuntu/TTS/TTS/utils/tensorboard_logger.py\", line 60, in tb_train_figures\r\n    self.dict_to_tb_figure(f\"{self.model_name}_TrainFigures\", figures, step)\r\n  File \"/home/ubuntu/TTS/TTS/utils/tensorboard_logger.py\", line 44, in dict_to_tb_figure\r\n    self.writer.add_figure('{}/{}'.format(scope_name, key), value, step)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/tensorboardX/writer.py\", line 713, in add_figure\r\n    self.add_image(tag, figure_to_image(figure, close), global_step, walltime, dataformats='CHW')\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/tensorboardX/utils.py\", line 36, in figure_to_image\r\n    image = render_to_rgb(figures)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/tensorboardX/utils.py\", line 23, in render_to_rgb\r\n    canvas.draw()\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/backends/backend_agg.py\", line 407, in draw\r\n    self.figure.draw(self.renderer)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/artist.py\", line 41, in draw_wrapper\r\n    return draw(artist, renderer, *args, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/figure.py\", line 1864, in draw\r\n    renderer, self, artists, self.suppressComposite)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/image.py\", line 131, in _draw_list_compositing_images\r\n    a.draw(renderer)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/artist.py\", line 41, in draw_wrapper\r\n    return draw(artist, renderer, *args, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/cbook/deprecation.py\", line 411, in wrapper\r\n    return func(*inner_args, **inner_kwargs)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/axes/_base.py\", line 2747, in draw\r\n    mimage._draw_list_compositing_images(renderer, self, artists)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/image.py\", line 131, in _draw_list_compositing_images\r\n    a.draw(renderer)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/artist.py\", line 41, in draw_wrapper\r\n    return draw(artist, renderer, *args, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/image.py\", line 644, in draw\r\n    renderer, renderer.get_image_magnification())\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/image.py\", line 929, in make_image\r\n    magnification, unsampled=unsampled)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/image.py\", line 495, in _make_image\r\n    A_resampled = _resample(self, A_scaled, out_shape, t)\r\n  File \"/home/ubuntu/anaconda3/envs/TTS/lib/python3.6/site-packages/matplotlib/image.py\", line 197, in _resample\r\n    image_obj.get_filterrad())\r\nValueError: Unsupported dtype\r\n```\r\n\r\nhere is my [config](https://pastebin.com/ESGJ4gPy) (don't mind the run name and description, it's single speaker and m-ailabs)","closed_by":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/575/timeline","performed_via_github_app":null,"state_reason":"completed"}