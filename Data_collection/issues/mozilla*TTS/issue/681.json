{"url":"https://api.github.com/repos/mozilla/TTS/issues/681","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/681/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/681/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/681/events","html_url":"https://github.com/mozilla/TTS/issues/681","id":827908855,"node_id":"MDU6SXNzdWU4Mjc5MDg4NTU=","number":681,"title":"If validation set contains multiple files, ground truth is length of longest","user":{"login":"GuyPaddock","id":2631799,"node_id":"MDQ6VXNlcjI2MzE3OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2631799?v=4","gravatar_id":"","url":"https://api.github.com/users/GuyPaddock","html_url":"https://github.com/GuyPaddock","followers_url":"https://api.github.com/users/GuyPaddock/followers","following_url":"https://api.github.com/users/GuyPaddock/following{/other_user}","gists_url":"https://api.github.com/users/GuyPaddock/gists{/gist_id}","starred_url":"https://api.github.com/users/GuyPaddock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GuyPaddock/subscriptions","organizations_url":"https://api.github.com/users/GuyPaddock/orgs","repos_url":"https://api.github.com/users/GuyPaddock/repos","events_url":"https://api.github.com/users/GuyPaddock/events{/privacy}","received_events_url":"https://api.github.com/users/GuyPaddock/received_events","type":"User","site_admin":false},"labels":[{"id":813922298,"node_id":"MDU6TGFiZWw4MTM5MjIyOTg=","url":"https://api.github.com/repos/mozilla/TTS/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-10T15:24:59Z","updated_at":"2021-06-09T22:59:23Z","closed_at":"2021-06-09T22:59:23Z","author_association":"NONE","active_lock_reason":null,"body":"It seems as though the length of the ground truth is influenced by the length of the longest validation audio file, even if there are some audio files in the validation set that are shorter. In my testing, this seemed to cause a studder at the end of each prediction.\r\n\r\n- Is that behavior expected?\r\n- Should the validation set be all equal lengths? (My assumption is no).\r\n\r\n## Branch\r\nI'm using `dev`, checked out at `547bfc4ce99e7782f98d0403429d15ec23cdc91d`.\r\n\r\n## Background Information\r\nMy current data set is very small -- only about 158 files or so -- which means I'm not expecting great results. I'm doing transfer learning based on the LJSpeech Tacotron data set, though, to try to get what I can out of the data I have at the moment.\r\n\r\nWhile tinkering, I noticed that if I didn't provide a `meta_file_val`, only a single audio file out of the set of 158 was chosen by the training process to be used for validation. Looking at the following utility method, which generates the validation set from the training set if one is not provided, that makes sense because 10% of the data set is used for validation if a validation set is not provided, and 10% of 158 is 1.58 which rounds down to 1:\r\nhttps://github.com/mozilla/TTS/blob/d320ccf6c66671087ee69561b651f7f877a584af/TTS/tts/utils/generic_utils.py#L10\r\n\r\nI also noticed that when I created a validation set by moving a few of my training set audios to the validation set and ran training, the average error was higher throughout training (95% to 85% after 2,500 epochs) but also the ground truth and predictions for validation had a lot of space at the end:\r\n![image](https://user-images.githubusercontent.com/2631799/110651373-62061300-8189-11eb-9e06-21e3fa63707f.png)\r\n\r\nMy files have no silence before or after the audio. I've double-checked and there is no silence in any of the validation set files.\r\nThe lengths of the files are:\r\n- 2 seconds\r\n- 4 seconds\r\n- 1 seconds\r\n- 1 seconds\r\n- 3 seconds\r\n- 3 seconds\r\n- 2 seconds\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/681/timeline","performed_via_github_app":null,"state_reason":"completed"}