{"url":"https://api.github.com/repos/mozilla/TTS/issues/381","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/381/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/381/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/381/events","html_url":"https://github.com/mozilla/TTS/issues/381","id":578872346,"node_id":"MDU6SXNzdWU1Nzg4NzIzNDY=","number":381,"title":"Mismatch error occuring when using latest commit","user":{"login":"lauraadalmolin","id":13664151,"node_id":"MDQ6VXNlcjEzNjY0MTUx","avatar_url":"https://avatars.githubusercontent.com/u/13664151?v=4","gravatar_id":"","url":"https://api.github.com/users/lauraadalmolin","html_url":"https://github.com/lauraadalmolin","followers_url":"https://api.github.com/users/lauraadalmolin/followers","following_url":"https://api.github.com/users/lauraadalmolin/following{/other_user}","gists_url":"https://api.github.com/users/lauraadalmolin/gists{/gist_id}","starred_url":"https://api.github.com/users/lauraadalmolin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lauraadalmolin/subscriptions","organizations_url":"https://api.github.com/users/lauraadalmolin/orgs","repos_url":"https://api.github.com/users/lauraadalmolin/repos","events_url":"https://api.github.com/users/lauraadalmolin/events{/privacy}","received_events_url":"https://api.github.com/users/lauraadalmolin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-10T21:28:45Z","updated_at":"2020-03-11T08:56:36Z","closed_at":"2020-03-11T08:56:36Z","author_association":"NONE","active_lock_reason":null,"body":"I am working with this [example](https://colab.research.google.com/github/tugstugi/dl-colab-notebooks/blob/master/notebooks/Mozilla_TTS_WaveRNN.ipynb) and it was running fine, but it presented some issues regarding to punctuation and the beginning and end of sentences being cut off. That's when I realized maybe I could update to the latest commit and see if things got solved.\r\n\r\nAfter I pulled from the repo and ran setup.py again some errors started showing up, such as a parameter error (setup_model now has a new attribute, which I would gladly thank you if it could be cleared out since I only set it to zero to keep things going).\r\n\r\nI am using the same models as in the mentioned notebook and the config.json file from the latest commit. \r\n\r\nI would really appreciate any help,\r\n\r\nThanks in advance.\r\n\r\nIn this link you can find my [code](https://github.com/lauraadalmolin/at-home-tts/blob/master/working_example.py) and here follows the error:\r\n\r\n`python3 working_example.py\r\npygame 1.9.6\r\nHello from the pygame community. https://www.pygame.org/contribute.html\r\ntorch.cuda.is_available()=True\r\n > Using model: Tacotron2\r\n > Setting up Audio Processor...\r\n | > sample_rate:22050\r\n | > num_mels:80\r\n | > min_level_db:-100\r\n | > frame_shift_ms:None\r\n | > frame_length_ms:None\r\n | > ref_level_db:20\r\n | > num_freq:1025\r\n | > power:1.5\r\n | > preemphasis:0.98\r\n | > griffin_lim_iters:60\r\n | > signal_norm:True\r\n | > symmetric_norm:True\r\n | > mel_fmin:0\r\n | > mel_fmax:8000.0\r\n | > max_norm:4.0\r\n | > clip_norm:True\r\n | > do_trim_silence:True\r\n | > trim_db:60\r\n | > sound_norm:False\r\n | > hop_length:256\r\n | > win_length:1024\r\n | > n_fft:2048\r\nTraceback (most recent call last):\r\n  File \"working_example.py\", line 139, in <module>\r\n    model.load_state_dict(cp['model'])\r\n  File \"/home/at-home/.local/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 830, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for Tacotron2:\r\n\tMissing key(s) in state_dict: \"decoder.attention.query_layer.linear_layer.weight\", \"decoder.attention.inputs_layer.linear_layer.weight\", \"decoder.attention.v.linear_layer.weight\", \"decoder.attention.v.linear_layer.bias\". \r\n\tUnexpected key(s) in state_dict: \"decoder.attention_layer.query_layer.linear_layer.weight\", \"decoder.attention_layer.inputs_layer.linear_layer.weight\", \"decoder.attention_layer.v.linear_layer.weight\", \"decoder.attention_layer.v.linear_layer.bias\", \"decoder.attention_layer.location_layer.location_conv.weight\", \"decoder.attention_layer.location_layer.location_dense.linear_layer.weight\", \"decoder.attention_rnn_init.weight\", \"decoder.go_frame_init.weight\", \"decoder.decoder_rnn_inits.weight\", \"decoder.prenet.layers.0.bn.weight\", \"decoder.prenet.layers.0.bn.bias\", \"decoder.prenet.layers.0.bn.running_mean\", \"decoder.prenet.layers.0.bn.running_var\", \"decoder.prenet.layers.0.bn.num_batches_tracked\", \"decoder.prenet.layers.1.bn.weight\", \"decoder.prenet.layers.1.bn.bias\", \"decoder.prenet.layers.1.bn.running_mean\", \"decoder.prenet.layers.1.bn.running_var\", \"decoder.prenet.layers.1.bn.num_batches_tracked\". \r\n\tsize mismatch for embedding.weight: copying a param with shape torch.Size([62, 512]) from checkpoint, the shape in current model is torch.Size([129, 512]).\r\n\tsize mismatch for decoder.linear_projection.linear_layer.weight: copying a param with shape torch.Size([80, 1536]) from checkpoint, the shape in current model is torch.Size([560, 1536]).\r\n\tsize mismatch for decoder.linear_projection.linear_layer.bias: copying a param with shape torch.Size([80]) from checkpoint, the shape in current model is torch.Size([560]).\r\n\tsize mismatch for decoder.stopnet.1.linear_layer.weight: copying a param with shape torch.Size([1, 1104]) from checkpoint, the shape in current model is torch.Size([1, 1584]).\r\n`\r\n","closed_by":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/381/timeline","performed_via_github_app":null,"state_reason":"completed"}