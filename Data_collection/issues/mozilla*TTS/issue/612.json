{"url":"https://api.github.com/repos/mozilla/TTS/issues/612","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/612/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/612/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/612/events","html_url":"https://github.com/mozilla/TTS/issues/612","id":776272072,"node_id":"MDU6SXNzdWU3NzYyNzIwNzI=","number":612,"title":"Multi-speaker Tacotron model training from scratch","user":{"login":"oytunturk","id":5769255,"node_id":"MDQ6VXNlcjU3NjkyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/5769255?v=4","gravatar_id":"","url":"https://api.github.com/users/oytunturk","html_url":"https://github.com/oytunturk","followers_url":"https://api.github.com/users/oytunturk/followers","following_url":"https://api.github.com/users/oytunturk/following{/other_user}","gists_url":"https://api.github.com/users/oytunturk/gists{/gist_id}","starred_url":"https://api.github.com/users/oytunturk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oytunturk/subscriptions","organizations_url":"https://api.github.com/users/oytunturk/orgs","repos_url":"https://api.github.com/users/oytunturk/repos","events_url":"https://api.github.com/users/oytunturk/events{/privacy}","received_events_url":"https://api.github.com/users/oytunturk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":25,"created_at":"2020-12-30T05:25:41Z","updated_at":"2021-02-23T22:23:36Z","closed_at":"2021-02-18T16:38:59Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI'm trying to train a multi-speaker Tacotron model from scratch using VCTK + LibriTTS databases. The model trains fine until about 50K global steps but after that I start running into \"CUDA out of memory\", \"NaN loss with key=decoder_coarse_loss\", or \"NaN loss with key=decoder_loss\" errors. I tried reducing batch sizes, limiting input sequence lengths, and/or reducing learning rate but those didn't seem to help. I also tried training from scratch using VCTK only and ended up with similar errors. I'm training on a single Titan X GPU with 12GB memory. I didn't want to try multi-gpu training yet so I wonder if I should be setting some parameters differently in the config file. Any suggestions? Also, can someone explain the following parameters and how they should be set for single GPU training? Or, should I simply avoid single GPU training?\r\n\r\n    \"num_loader_workers\": 4,        // number of training data loader processes. Don't set it too big. 4-8 are good values.                                                                                 \r\n    \"num_val_loader_workers\": 4,    // number of evaluation data loader processes.                                                                                                                          \r\n    \"batch_group_size\": 4,  //Number of batches to shuffle after bucketing. \r\n\r\nThanks!\r\n\r\nAdditional info:\r\n- My branch is based on commit ea976b0543c7fa97628c41c4a936e3113896d18a\r\n- Config file [attached](https://drive.google.com/file/d/1_mpO_QMdKDorTGY5btAXxEGo_sKXV2x0/view?usp=sharing)\r\n- Tensorboard loss plots, attention alignments, output spectrograms, Griffin-Lim synthesized audio look/sound as expected before running into these errors\r\n- As far as I can tell, the errors occur pretty randomly. It could continue training a couple of thousands steps after 50K steps or fail after 500 steps. I don't also see any specific input files triggering these errors in a consistent manner.","closed_by":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/612/timeline","performed_via_github_app":null,"state_reason":"completed"}