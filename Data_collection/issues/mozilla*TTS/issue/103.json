{"url":"https://api.github.com/repos/mozilla/TTS/issues/103","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/103/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/103/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/103/events","html_url":"https://github.com/mozilla/TTS/issues/103","id":404526215,"node_id":"MDU6SXNzdWU0MDQ1MjYyMTU=","number":103,"title":"Trying to run server.py with pre-trained model.","user":{"login":"alugupta","id":3749088,"node_id":"MDQ6VXNlcjM3NDkwODg=","avatar_url":"https://avatars.githubusercontent.com/u/3749088?v=4","gravatar_id":"","url":"https://api.github.com/users/alugupta","html_url":"https://github.com/alugupta","followers_url":"https://api.github.com/users/alugupta/followers","following_url":"https://api.github.com/users/alugupta/following{/other_user}","gists_url":"https://api.github.com/users/alugupta/gists{/gist_id}","starred_url":"https://api.github.com/users/alugupta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alugupta/subscriptions","organizations_url":"https://api.github.com/users/alugupta/orgs","repos_url":"https://api.github.com/users/alugupta/repos","events_url":"https://api.github.com/users/alugupta/events{/privacy}","received_events_url":"https://api.github.com/users/alugupta/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-01-29T23:03:45Z","updated_at":"2019-04-06T02:09:41Z","closed_at":"2019-02-15T09:36:46Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI am researcher looking to better understand text-to-speech models for optimization opportunities on mobile systems. I am trying to get setup with the infrastructure but ran into a few issues running the scripts.\r\n\r\nI pulled the pre-trained weights along with the corresponding config.json from [here](https://drive.google.com/drive/folders/1A5Hr6aSvfGgIiE20mBkpzyn3vvbR2APj). When I run `python3.6 server.py -c server/conf.py` I get the following error: \r\n\r\n\r\n > Loading model ...                                                                                                                                                                                                             \r\n | > model config:  /group/vlsiarch/ugupta/git/TTS/pretrained/config.json                                                                                                                                                        \r\n | > model file:  /group/vlsiarch/ugupta/git/TTS/pretrained/best_model.pth.tar                                                                                                                                                   \r\n > Setting up Audio Processor...                                                                                                                                                                                                 \r\n | > fft size: 2048, hop length: 275, win length: 1100                                                                                                                                                                           \r\n | > Audio Processor attributes.                                                                                                                                                                                                 \r\n   | > bits:None                                                                                                                                                                                                                 \r\n   | > sample_rate:22000                                                                                                                                                                                                         \r\n   | > num_mels:80                                                                                                                                                                                                               \r\n   | > min_level_db:-100                                                                                                                                                                                                         \r\n   | > frame_shift_ms:12.5                                                                                                                                                                                                       \r\n   | > frame_length_ms:50                                                                                                                                                                                                        \r\n   | > ref_level_db:20                                                                                                                                                                                                           \r\n   | > num_freq:1025                                                                                                                                                                                                             \r\n   | > power:1.5                                                                                                                                                                                                                 \r\n   | > preemphasis:0.97                                                                                                                                                                                                          \r\n   | > griffin_lim_iters:60                                                                                                                                                                                                      \r\n   | > signal_norm:True                                                                                                                                                                                                          \r\n   | > symmetric_norm:False                                                                                                                                                                                                      \r\n   | > mel_fmin:0                                                                                                                                                                                                                \r\n   | > mel_fmax:None                                                                                                                                                                                                             \r\n   | > max_norm:1.0                                                                                                                                                                                                              \r\n   | > clip_norm:True                                                                                                                                                                                                            \r\n   | > do_trim_silence:True                                                                                                                                                                                                      \r\n   | > n_fft:2048                                                                                                                                                                                                                \r\n   | > hop_length:275                                                                                                                                                                                                            \r\n   | > win_length:1100                                                                                                                                                                                                           \r\n | > Number of characters : 149                                                                                                                                                                                                  \r\nTraceback (most recent call last):                                                                                                                                                                                               \r\n  File \"server/server.py\", line 16, in <module>                                                                                                                                                                                  \r\n    config.model_config, config.use_cuda)                                                                                                                                                                                        \r\n  File \"/group/vlsiarch/ugupta/git/TTS/server/synthesizer.py\", line 35, in load_model                                                                                                                                            \r\n    self.model.load_state_dict(cp['model'])                                                                                                                                                                                      \r\n  File \"/usr/local/lib/python3.6/dist-packages/torch-0.4.1-py3.6-linux-x86_64.egg/torch/nn/modules/module.py\", line 719, in load_state_dict                                                                                      \r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))                                                                                                                                                                           \r\nRuntimeError: Error(s) in loading state_dict for Tacotron:                                                                                                                                                                       \r\n  Unexpected key(s) in state_dict: \"decoder.stopnet.rnn.weight_ih\", \"decoder.stopnet.rnn.weight_hh\", \"decoder.stopnet.rnn.bias_ih\", \"decoder.stopnet.rnn.bias_hh\".                                                               \r\n  size mismatch for decoder.stopnet.linear.weight: copying a param of torch.Size([1, 656]) from checkpoint, where the shape is torch.Size([1, 400]) in current model.                                                            \r\n\r\nI was sure to change the model path, model name, and model config in the `server/conf.json` file. Is there something else I'm missing?\r\n\r\nAlso is running the server script necessary for evaluating the model or fine-tuning it?","closed_by":{"login":"erogol","id":1402048,"node_id":"MDQ6VXNlcjE0MDIwNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1402048?v=4","gravatar_id":"","url":"https://api.github.com/users/erogol","html_url":"https://github.com/erogol","followers_url":"https://api.github.com/users/erogol/followers","following_url":"https://api.github.com/users/erogol/following{/other_user}","gists_url":"https://api.github.com/users/erogol/gists{/gist_id}","starred_url":"https://api.github.com/users/erogol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erogol/subscriptions","organizations_url":"https://api.github.com/users/erogol/orgs","repos_url":"https://api.github.com/users/erogol/repos","events_url":"https://api.github.com/users/erogol/events{/privacy}","received_events_url":"https://api.github.com/users/erogol/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/103/timeline","performed_via_github_app":null,"state_reason":"completed"}