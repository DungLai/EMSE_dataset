{"url":"https://api.github.com/repos/mozilla/TTS/issues/754","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/754/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/754/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/754/events","html_url":"https://github.com/mozilla/TTS/issues/754","id":1286789052,"node_id":"I_kwDOBxIBp85Mste8","number":754,"title":"Trainer stops working without error messages","user":{"login":"rezareza007","id":72138796,"node_id":"MDQ6VXNlcjcyMTM4Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/72138796?v=4","gravatar_id":"","url":"https://api.github.com/users/rezareza007","html_url":"https://github.com/rezareza007","followers_url":"https://api.github.com/users/rezareza007/followers","following_url":"https://api.github.com/users/rezareza007/following{/other_user}","gists_url":"https://api.github.com/users/rezareza007/gists{/gist_id}","starred_url":"https://api.github.com/users/rezareza007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rezareza007/subscriptions","organizations_url":"https://api.github.com/users/rezareza007/orgs","repos_url":"https://api.github.com/users/rezareza007/repos","events_url":"https://api.github.com/users/rezareza007/events{/privacy}","received_events_url":"https://api.github.com/users/rezareza007/received_events","type":"User","site_admin":false},"labels":[{"id":813922298,"node_id":"MDU6TGFiZWw4MTM5MjIyOTg=","url":"https://api.github.com/repos/mozilla/TTS/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-06-28T05:21:37Z","updated_at":"2022-11-02T02:08:02Z","closed_at":"2022-11-02T02:08:02Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to train TTS for a custom dataset (style of LJSpeech) with non-English alphabet. Here is the command I use:\r\n\r\npython TTS\\Lib\\site-packages\\TTS\\bin\\train_tts.py --config_path data/config.json\r\n\r\nand here are the messages I get:\r\n\r\nC:\\Users\\user\\Desktop\\patents\\TTS\\TTS\\lib\\site-packages\\TTS\\tts\\models\\tacotron2.py:272: UserWarning: __floordiv__ is deprecated, and its behavior will change in a future version of pytorch. It currently rounds toward 0 (like the 'trunc' function NOT 'floor'). This results in incorrect rounding for negative values. To keep the current behavior, use torch.div(a, b, rounding_mode='trunc'), or for actual floor division, use torch.div(a, b, rounding_mode='floor').\r\n  alignment_lengths = (\r\nC:\\Users\\user\\Desktop\\patents\\TTS\\TTS\\lib\\site-packages\\torch\\functional.py:568: UserWarning: torch.meshgrid: in an upcoming release, it will be required to pass the indexing argument. (Triggered internally at  C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\native\\TensorShape.cpp:2228.)\r\n  return _VF.meshgrid(tensors, **kwargs)  # type: ignore[attr-defined]\r\n\r\n   --> STEP: 0/14 -- GLOBAL_STEP: 0\r\n     | > decoder_loss: 1.37356  (1.37356)\r\n     | > postnet_loss: 3.56385  (3.56385)\r\n     | > stopnet_loss: 1.32900  (1.32900)\r\n     | > decoder_coarse_loss: 1.37599  (1.37599)\r\n     | > decoder_ddc_loss: 0.00168  (0.00168)\r\n     | > ga_loss: 0.01330  (0.01330)\r\n     | > decoder_diff_spec_loss: 0.12558  (0.12558)\r\n     | > postnet_diff_spec_loss: 4.52326  (4.52326)\r\n     | > decoder_ssim_loss: 0.71161  (0.71161)\r\n     | > postnet_ssim_loss: 0.70824  (0.70824)\r\n     | > loss: 5.17926  (5.17926)\r\n     | > align_error: 0.99135  (0.99135)\r\n     | > grad_norm: 2.13356  (2.13356)\r\n     | > current_lr: 0.00000\r\n     | > step_time: 14.91710  (14.91709)\r\n     | > loader_time: 9.09470  (9.09466)\r\n\r\nC:\\Users\\user\\Desktop\\patents\\TTS\\TTS\\lib\\site-packages\\TTS\\tts\\models\\tacotron2.py:276: UserWarning: __floordiv__ is deprecated, and its behavior will change in a future version of pytorch. It currently rounds toward 0 (like the 'trunc' function NOT 'floor'). This results in incorrect rounding for negative values. To keep the current behavior, use torch.div(a, b, rounding_mode='trunc'), or for actual floor division, use torch.div(a, b, rounding_mode='floor').\r\n  alignment_lengths = mel_lengths // self.decoder.r\r\n\r\nBut then it stops working right after this, meaning that no new messages are posted and no checkpoints are saved, CPU usage goes to near-zero BUT the program does not exit.\r\n\r\nPS. Right after I posted this, it posted new output: \r\n\r\n> BEST MODEL : ./2nd-run\\videon-1-June-27-2022_06+24PM-0000000\\best_model_14.pth\r\n\r\n > Number of output frames: 5\r\n\r\n > EPOCH: 1/1000\r\n --> ./2nd-run\\videon-1-June-27-2022_06+24PM-0000000\r\n\r\n\r\n> DataLoader initialization\r\n| > Tokenizer:\r\n        | > add_blank: False\r\n        | > use_eos_bos: False\r\n        | > use_phonemes: False\r\n        | > 2 not found characters:\r\n        | >\r\n\r\n        | > â€Œ\r\n| > Number of instances : 857\r\n | > Preprocessing samples\r\n | > Max text length: 1128\r\n | > Min text length: 2\r\n | > Avg text length: 88.03733955659277\r\n |\r\n | > Max audio length: 1810702.0\r\n | > Min audio length: 22756.0\r\n | > Avg audio length: 170498.6674445741\r\n | > Num. instances discarded samples: 0\r\n | > Batch group size: 256.\r\n\r\n > TRAINING (2022-06-28 09:50:49)\r\n\r\n\r\nso maybe the issue is resolved, but training is very slow for such as small dataset (857 records).","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/754/timeline","performed_via_github_app":null,"state_reason":"completed"}