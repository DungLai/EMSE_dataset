{"url":"https://api.github.com/repos/mozilla/TTS/issues/232","repository_url":"https://api.github.com/repos/mozilla/TTS","labels_url":"https://api.github.com/repos/mozilla/TTS/issues/232/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/TTS/issues/232/comments","events_url":"https://api.github.com/repos/mozilla/TTS/issues/232/events","html_url":"https://github.com/mozilla/TTS/issues/232","id":469474172,"node_id":"MDU6SXNzdWU0Njk0NzQxNzI=","number":232,"title":"Potential use of espeak-ng as backend","user":{"login":"nmstoker","id":3694484,"node_id":"MDQ6VXNlcjM2OTQ0ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/3694484?v=4","gravatar_id":"","url":"https://api.github.com/users/nmstoker","html_url":"https://github.com/nmstoker","followers_url":"https://api.github.com/users/nmstoker/followers","following_url":"https://api.github.com/users/nmstoker/following{/other_user}","gists_url":"https://api.github.com/users/nmstoker/gists{/gist_id}","starred_url":"https://api.github.com/users/nmstoker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nmstoker/subscriptions","organizations_url":"https://api.github.com/users/nmstoker/orgs","repos_url":"https://api.github.com/users/nmstoker/repos","events_url":"https://api.github.com/users/nmstoker/events{/privacy}","received_events_url":"https://api.github.com/users/nmstoker/received_events","type":"User","site_admin":false},"labels":[{"id":813922298,"node_id":"MDU6TGFiZWw4MTM5MjIyOTg=","url":"https://api.github.com/repos/mozilla/TTS/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2019-07-17T22:18:17Z","updated_at":"2020-02-03T17:19:52Z","closed_at":"2020-02-03T17:19:52Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I was wondering whether it would be worth considering recommending people use [espeak-ng](https://github.com/espeak-ng/espeak-ng) as the backend over [espeak](http://espeak.sourceforge.net/)? Or if not _recommending_, clarifying that it's an option :slightly_smiling_face: \r\n\r\nIt's a near drop-in replacement with TTS (_see below for some relevant known differences_)\r\n\r\nGiven that espeak is no longer being developed (_since 2015_) it's likely to be worth moving to espeak-ng.\r\n\r\nIt appears easier to install on Windows (although I haven't personally tried this), the language coverage is greater (espeak's **69** languages/accents goes up to **100** under espeak-ng) and there's potential for developer improvements/issue resolution (eg if some security bug comes up, it's hard to know how that'll be handled with espeak).\r\n\r\nI wrote a simple script to show the output from text2phone() and ran it first under my existing espeak install and then replaced it with espeak-ng.  There were a few differences but it is only a few characters and I suspect they may actually be improvements.\r\n\r\n```` python\r\nfrom TTS.utils.text import text2phone\r\nfrom time import gmtime, strftime\r\n\r\ndefault_backend = 'espeak'\r\nbackend = input(f'enter backend [or press return to accept default: {default_backend}]')\r\nif len(backend) == 0 :\r\n    backend = default_backend\r\n\r\ndefault_language = 'en-uk-rp'\r\nlanguage = input(f'enter language [or press return to accept default: {default_language}]')\r\nif len(language) == 0 :\r\n    language = default_language\r\n\r\ntimestamp = strftime(\"%Y-%m-%d_%H-%M-%S\", gmtime())\r\noutput_filename = f'output_{backend}_{language}_{timestamp}.txt'\r\nprint(f'\\nOutput filename is: {output_filename}\\n')\r\nwith open(output_filename, 'w') as output:\r\n    with open('sentence_list.txt', 'r') as sentence_list:\r\n        for sentence in sentence_list:\r\n            output.write(text2phone(sentence, language) + '\\n')\r\nprint('\\nDone!\\n')\r\n````\r\n**Examples of the diff output:**\r\n```\r\n< ð|eɪ| |h|æ|v| |ɐ| |t|uː| |ɡ|ɐ|ɹ|ɑː|ʒ| |h|oʊ|m| |\r\n---\r\n> ð|eɪ| |h|æ|v| |ɐ| |t|uː| |ɡ|ɚ|ɹ|ɑː|ʒ| |h|oʊ|m| |\r\n31c31\r\n< w|ɪ|ð| |aɪ|z| |ɑː|n| |t|ɑːɹ|ɡ|ɪ|t| ,\r\n---\r\n> w|ɪ|ð| |aɪ|z| |ɔ|n| |t|ɑːɹ|ɡ|ɪ|t| ,\r\n\r\n```\r\n\r\n\r\nThe one change which would impact people using TTS for British English is that the language codes are now en-gb-... rather than en-uk-... In my case I've been using en-uk-rp, so I simply updated my config.json to be en-gb-x-rp and it was fine.\r\n\r\nRunning a test with the Demo Server, I detected no deterioration in the output.  The only point I would mention, but which appears to have had no impact, was that the Demo Server did report a warning:\r\n\r\n> OpenBLAS Warning : Detect OpenMP Loop and this application may hang. Please rebuild the library with USE_OPENMP=1 option.\r\n\r\nIf it does prove easier for Windows users to install (as there are compiled installers for both 32- & 64-bit), it looks like that would address #148.  It was easy to install the [package on Arch](https://www.archlinux.org/packages/community/x86_64/espeak-ng/) and is available on [Debian](https://salsa.debian.org/a11y-team/espeak-ng) and [Ubuntu](https://launchpad.net/ubuntu/+source/espeak-ng) as well as having clear instructions on [building it](https://github.com/espeak-ng/espeak-ng#linux-mac-bsd).\r\n\r\nAnyway, if this is okay @erogol I would happily put together to few lines for a PR to document it as an option in the README (espeak itself is not currently mentioned as a depedency, but is referenced in a few issues and three points in the code) or I'm happy to leave that to you if you prefer?","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/TTS/issues/232/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/TTS/issues/232/timeline","performed_via_github_app":null,"state_reason":"completed"}