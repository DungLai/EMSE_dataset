{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/580","repository_url":"https://api.github.com/repos/dmlc/gluon-nlp","labels_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/580/labels{/name}","comments_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/580/comments","events_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/580/events","html_url":"https://github.com/dmlc/gluon-nlp/issues/580","id":406618033,"node_id":"MDU6SXNzdWU0MDY2MTgwMzM=","number":580,"title":"Word language model has problematic performance","user":{"login":"szhengac","id":3960020,"node_id":"MDQ6VXNlcjM5NjAwMjA=","avatar_url":"https://avatars.githubusercontent.com/u/3960020?v=4","gravatar_id":"","url":"https://api.github.com/users/szhengac","html_url":"https://github.com/szhengac","followers_url":"https://api.github.com/users/szhengac/followers","following_url":"https://api.github.com/users/szhengac/following{/other_user}","gists_url":"https://api.github.com/users/szhengac/gists{/gist_id}","starred_url":"https://api.github.com/users/szhengac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szhengac/subscriptions","organizations_url":"https://api.github.com/users/szhengac/orgs","repos_url":"https://api.github.com/users/szhengac/repos","events_url":"https://api.github.com/users/szhengac/events{/privacy}","received_events_url":"https://api.github.com/users/szhengac/received_events","type":"User","site_admin":false},"labels":[{"id":890393502,"node_id":"MDU6TGFiZWw4OTAzOTM1MDI=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/duplicate","name":"duplicate","color":"cfd3d7","default":true,"description":"This issue or pull request already exists"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-02-05T03:44:30Z","updated_at":"2019-02-20T19:19:45Z","closed_at":"2019-02-20T19:19:45Z","author_association":"MEMBER","active_lock_reason":null,"body":"I ran the `word_language_model.py` on the current master branch with following cmd:\r\n\r\n`python word_language_model.py --gpu 0 --tied --ntasgd --lr_update_interval 50 --lr_update_factor 0.5 --save awd_lstm_lm_1150_wikitext-2`\r\n\r\nThe performance are significantly worse than the one shown in the log. The results are shown as follows. It seems the training is not correct.\r\n\r\n[Epoch 326 Batch 200/372] current loss 6.21, ppl 499.30, throughput 234.71 samples/s, lr 0.43\r\n[Epoch 326] throughput 16464.32 samples/s\r\n[Epoch 326] time cost 134.05s, valid loss 6.96, valid ppl 1055.76，lr 0.47\r\n[Epoch 327 Batch 200/372] current loss 6.21, ppl 498.77, throughput 239.18 samples/s, lr 0.45\r\n[Epoch 327] throughput 16279.53 samples/s\r\n[Epoch 327] time cost 135.56s, valid loss 6.96, valid ppl 1057.93，lr 0.47\r\n[Epoch 328 Batch 200/372] current loss 6.21, ppl 497.68, throughput 237.90 samples/s, lr 0.40\r\n[Epoch 328] throughput 16070.73 samples/s\r\n[Epoch 328] time cost 137.13s, valid loss 6.97, valid ppl 1060.08，lr 0.47\r\n[Epoch 329 Batch 200/372] current loss 6.22, ppl 500.59, throughput 241.20 samples/s, lr 0.20\r\n[Epoch 329] throughput 16449.73 samples/s\r\n[Epoch 329] time cost 134.20s, valid loss 6.97, valid ppl 1062.16，lr 0.47\r\n[Epoch 330 Batch 200/372] current loss 6.22, ppl 500.81, throughput 245.66 samples/s, lr 0.50\r\n[Epoch 330] throughput 16533.50 samples/s\r\n[Epoch 330] time cost 133.68s, valid loss 6.97, valid ppl 1064.21，lr 0.47\r\n[Epoch 331 Batch 200/372] current loss 6.22, ppl 501.55, throughput 247.52 samples/s, lr 0.49\r\n[Epoch 331] throughput 16659.26 samples/s\r\n[Epoch 331] time cost 132.51s, valid loss 6.97, valid ppl 1066.25，lr 0.47\r\n[Epoch 332 Batch 200/372] current loss 6.21, ppl 496.57, throughput 251.29 samples/s, lr 0.45\r\n[Epoch 332] throughput 16314.63 samples/s\r\n[Epoch 332] time cost 135.29s, valid loss 6.97, valid ppl 1068.32，lr 0.47\r\n[Epoch 333 Batch 200/372] current loss 6.22, ppl 500.40, throughput 243.31 samples/s, lr 0.48\r\n[Epoch 333] throughput 16411.81 samples/s\r\n[Epoch 333] time cost 134.50s, valid loss 6.98, valid ppl 1070.33，lr 0.47\r\n[Epoch 334 Batch 200/372] current loss 6.21, ppl 498.75, throughput 242.56 samples/s, lr 0.48\r\n[Epoch 334] throughput 16247.07 samples/s\r\n[Epoch 334] time cost 135.67s, valid loss 6.98, valid ppl 1072.37，lr 0.47\r\n[Epoch 335 Batch 200/372] current loss 6.21, ppl 498.41, throughput 235.91 samples/s, lr 0.42\r\n[Epoch 335] throughput 16232.91 samples/s\r\n[Epoch 335] time cost 135.87s, valid loss 6.98, valid ppl 1074.41，lr 0.47\r\n[Epoch 336 Batch 200/372] current loss 6.22, ppl 500.23, throughput 234.02 samples/s, lr 0.38\r\n[Epoch 336] throughput 16084.55 samples/s\r\n[Epoch 336] time cost 137.03s, valid loss 6.98, valid ppl 1076.43，lr 0.47\r\n[Epoch 337 Batch 200/372] current loss 6.22, ppl 502.17, throughput 234.21 samples/s, lr 0.21\r\n[Epoch 337] throughput 15950.04 samples/s\r\n[Epoch 337] time cost 138.05s, valid loss 6.98, valid ppl 1078.42，lr 0.47\r\n[Epoch 338 Batch 200/372] current loss 6.21, ppl 496.63, throughput 234.94 samples/s, lr 0.46\r\n[Epoch 338] throughput 15970.70 samples/s\r\n[Epoch 338] time cost 137.94s, valid loss 6.99, valid ppl 1080.42，lr 0.47\r\n[Epoch 339 Batch 200/372] current loss 6.21, ppl 497.47, throughput 247.33 samples/s, lr 0.44\r\n[Epoch 339] throughput 16786.18 samples/s\r\n[Epoch 339] time cost 131.77s, valid loss 6.99, valid ppl 1082.41，lr 0.47\r\n[Epoch 340 Batch 200/372] current loss 6.21, ppl 498.09, throughput 240.05 samples/s, lr 0.44","closed_by":{"login":"cgraywang","id":25714264,"node_id":"MDQ6VXNlcjI1NzE0MjY0","avatar_url":"https://avatars.githubusercontent.com/u/25714264?v=4","gravatar_id":"","url":"https://api.github.com/users/cgraywang","html_url":"https://github.com/cgraywang","followers_url":"https://api.github.com/users/cgraywang/followers","following_url":"https://api.github.com/users/cgraywang/following{/other_user}","gists_url":"https://api.github.com/users/cgraywang/gists{/gist_id}","starred_url":"https://api.github.com/users/cgraywang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgraywang/subscriptions","organizations_url":"https://api.github.com/users/cgraywang/orgs","repos_url":"https://api.github.com/users/cgraywang/repos","events_url":"https://api.github.com/users/cgraywang/events{/privacy}","received_events_url":"https://api.github.com/users/cgraywang/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/580/timeline","performed_via_github_app":null,"state_reason":"completed"}