{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1097","repository_url":"https://api.github.com/repos/dmlc/gluon-nlp","labels_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1097/labels{/name}","comments_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1097/comments","events_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1097/events","html_url":"https://github.com/dmlc/gluon-nlp/issues/1097","id":545781336,"node_id":"MDU6SXNzdWU1NDU3ODEzMzY=","number":1097,"title":"Undefined name: long() was removed in Python 3","user":{"login":"cclauss","id":3709715,"node_id":"MDQ6VXNlcjM3MDk3MTU=","avatar_url":"https://avatars.githubusercontent.com/u/3709715?v=4","gravatar_id":"","url":"https://api.github.com/users/cclauss","html_url":"https://github.com/cclauss","followers_url":"https://api.github.com/users/cclauss/followers","following_url":"https://api.github.com/users/cclauss/following{/other_user}","gists_url":"https://api.github.com/users/cclauss/gists{/gist_id}","starred_url":"https://api.github.com/users/cclauss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cclauss/subscriptions","organizations_url":"https://api.github.com/users/cclauss/orgs","repos_url":"https://api.github.com/users/cclauss/repos","events_url":"https://api.github.com/users/cclauss/events{/privacy}","received_events_url":"https://api.github.com/users/cclauss/received_events","type":"User","site_admin":false},"labels":[{"id":890393501,"node_id":"MDU6TGFiZWw4OTAzOTM1MDE=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-06T15:20:12Z","updated_at":"2020-01-06T15:20:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Description\r\n(A clear and concise description of what the bug is.)\r\n\r\n[flake8](http://flake8.pycqa.org) testing of https://github.com/dmlc/gluon-nlp on Python 3.8.0\r\n\r\n$ __flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics__\r\n```\r\n238./ci/batch/wait-job.py:56:15: F821 undefined name 'long'\r\n239    endTime = long(total_seconds(datetime.utcnow() - datetime(1970, 1, 1))) * 1000\r\n240              ^\r\n241./ci/batch/submit-job.py:87:15: F821 undefined name 'long'\r\n242    endTime = long(total_seconds(datetime.utcnow() - datetime(1970, 1, 1))) * 1000\r\n243              ^\r\n2442     F821 undefined name 'long'\r\n2452\r\n```\r\nhttps://flake8.pycqa.org/en/latest/user/error-codes.html\r\n\r\nOn the flake8 test selection, this PR does _not_ focus on \"_style violations_\" (the majority of flake8 error codes that [__psf/black__](https://github.com/psf/black) can autocorrect).  Instead these tests are focus on runtime safety and correctness:\r\n* E9 tests are about Python syntax errors usually raised because flake8 can not build an Abstract Syntax Tree (AST).  Often these issues are a sign of unused code or code that has not been ported to Python 3.  These would be compile-time errors in a compiled language but in a dynamic language like Python they result in the script halting/crashing on the user.\r\n* F63 tests are usually about the confusion between identity and equality in Python.  Use ==/!= to compare str, bytes, and int literals is the classic case.  These are areas where __a == b__ is True but __a is b__ is False (or vice versa).  Python >= 3.8 will raise SyntaxWarnings on these instances.\r\n* F7 tests logic errors and syntax errors in type hints\r\n* F82 tests are almost always _undefined names_ which are usually a sign of a typo, missing imports, or code that has not been ported to Python 3.  These also would be compile-time errors in a compiled language but in Python a __NameError__ is raised which will halt/crash the script on the user.\r\n\r\n### Error Message\r\n(Paste the complete error message, including stack trace.)\r\n\r\n## To Reproduce\r\n(If you developed your own code, please provide a short script that reproduces the error. For existing examples, please provide link.)\r\n\r\nRemove the __--exclude__ option from the flake8 tests in Jenkinsfile.\r\n\r\n### Steps to reproduce\r\n(Paste the commands you ran that produced the error.)\r\n\r\n1.\r\n2.\r\n\r\n## What have you tried to solve it?\r\n\r\n1.\r\n2.\r\n\r\n## Environment\r\n\r\nWe recommend using our script for collecting the diagnositc information. Run the following command and paste the outputs below:\r\n```\r\ncurl --retry 10 -s https://raw.githubusercontent.com/dmlc/gluon-nlp/master/tools/diagnose.py | python\r\n\r\n# paste outputs here\r\n```\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1097/timeline","performed_via_github_app":null,"state_reason":null}