{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/948","repository_url":"https://api.github.com/repos/dmlc/gluon-nlp","labels_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/948/labels{/name}","comments_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/948/comments","events_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/948/events","html_url":"https://github.com/dmlc/gluon-nlp/issues/948","id":499646979,"node_id":"MDU6SXNzdWU0OTk2NDY5Nzk=","number":948,"title":"TypeError: 'NoneType' object is not iterable, when using bilm_encoder","user":{"login":"mingwei82","id":11762821,"node_id":"MDQ6VXNlcjExNzYyODIx","avatar_url":"https://avatars.githubusercontent.com/u/11762821?v=4","gravatar_id":"","url":"https://api.github.com/users/mingwei82","html_url":"https://github.com/mingwei82","followers_url":"https://api.github.com/users/mingwei82/followers","following_url":"https://api.github.com/users/mingwei82/following{/other_user}","gists_url":"https://api.github.com/users/mingwei82/gists{/gist_id}","starred_url":"https://api.github.com/users/mingwei82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mingwei82/subscriptions","organizations_url":"https://api.github.com/users/mingwei82/orgs","repos_url":"https://api.github.com/users/mingwei82/repos","events_url":"https://api.github.com/users/mingwei82/events{/privacy}","received_events_url":"https://api.github.com/users/mingwei82/received_events","type":"User","site_admin":false},"labels":[{"id":890393501,"node_id":"MDU6TGFiZWw4OTAzOTM1MDE=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":997120945,"node_id":"MDU6TGFiZWw5OTcxMjA5NDU=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/release%20focus","name":"release focus","color":"fbca04","default":false,"description":"Progress focus for release"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-09-27T20:56:58Z","updated_at":"2019-10-08T23:49:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI'm learning how to use the gluon-nlp package to learn nlp development step-by-step.\r\nI've decoupled parts of the model-zoo language model, where I replaced the encoder layer with my own RNN (e.g. instead of the standard or awd lstm, try doing the encoder layer by myself).\r\n\r\nHowever, when I tried to replace the encoder layer (2-layer LSTM) with the bilm encoder block, I get an error that's in the hybrid forward itself that I don't understand (can't find much help or guidance on how to use the bilm encoder block, https://gluon-nlp.mxnet.io/_modules/gluonnlp/model/bilm_encoder.html)\r\n\r\nError excerpt:\r\n```\r\n<ipython-input-183-85eeb2083f33> in hybrid_forward(self, F, data, valid_length)\r\n     43         #print(embedded.shape)\r\n---> 44         encoded = self.encoder(embedded)  # Shape(T, N, C)\r\n     45 \r\n     46         print(encoded.shape)\r\n\r\n~/anaconda3/envs/mxnet_nlp_p36/lib/python3.6/site-packages/mxnet/gluon/block.py in __call__(self, *args)\r\n    538             hook(self, args)\r\n    539 \r\n--> 540         out = self.forward(*args)\r\n    541 \r\n    542         for hook in self._forward_hooks.values():\r\n\r\n~/anaconda3/envs/mxnet_nlp_p36/lib/python3.6/site-packages/mxnet/gluon/block.py in forward(self, x, *args)\r\n    915                     params = {i: j.data(ctx) for i, j in self._reg_params.items()}\r\n    916 \r\n--> 917                 return self.hybrid_forward(ndarray, x, *args, **params)\r\n    918 \r\n    919         assert isinstance(x, Symbol), \\\r\n\r\n~/anaconda3/envs/mxnet_nlp_p36/lib/python3.6/site-packages/gluonnlp/model/bilm_encoder.py in hybrid_forward(self, F, inputs, states, mask)\r\n    163             which has the same structure with *states[1]*.\r\n    164         \"\"\"\r\n--> 165         states_forward, states_backward = states\r\n    166         if mask is not None:\r\n    167             sequence_length = mask.sum(axis=1)\r\n\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\nThanks\r\nMike","closed_by":null,"reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/948/timeline","performed_via_github_app":null,"state_reason":null}