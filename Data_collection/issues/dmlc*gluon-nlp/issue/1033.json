{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1033","repository_url":"https://api.github.com/repos/dmlc/gluon-nlp","labels_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1033/labels{/name}","comments_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1033/comments","events_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1033/events","html_url":"https://github.com/dmlc/gluon-nlp/issues/1033","id":531410005,"node_id":"MDU6SXNzdWU1MzE0MTAwMDU=","number":1033,"title":"Cannot run text_generation sample script","user":{"login":"zeeshansayyed","id":543495,"node_id":"MDQ6VXNlcjU0MzQ5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/543495?v=4","gravatar_id":"","url":"https://api.github.com/users/zeeshansayyed","html_url":"https://github.com/zeeshansayyed","followers_url":"https://api.github.com/users/zeeshansayyed/followers","following_url":"https://api.github.com/users/zeeshansayyed/following{/other_user}","gists_url":"https://api.github.com/users/zeeshansayyed/gists{/gist_id}","starred_url":"https://api.github.com/users/zeeshansayyed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeeshansayyed/subscriptions","organizations_url":"https://api.github.com/users/zeeshansayyed/orgs","repos_url":"https://api.github.com/users/zeeshansayyed/repos","events_url":"https://api.github.com/users/zeeshansayyed/events{/privacy}","received_events_url":"https://api.github.com/users/zeeshansayyed/received_events","type":"User","site_admin":false},"labels":[{"id":890393501,"node_id":"MDU6TGFiZWw4OTAzOTM1MDE=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-12-02T18:31:32Z","updated_at":"2019-12-02T19:38:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Description\r\nI am trying text generation example with GTP2 as shown [here](http://gluon-nlp-staging.s3-accelerate.dualstack.amazonaws.com/PR-1010/8/model_zoo/text_generation/index.html):\r\n\r\nI am using the latest dev version of gluon-nlp (a fresh git pull)\r\nMxnet-version = mxnet-cu100==1.5.1.post0\r\n\r\nThe command I am using is  `python sequence_sampling.py random-sample --bos 'Deep learning and natural language processing' --beam-size 1 --lm-model gpt2_117m --max-length 1024 --print-num 1`\r\n\r\n### Error Message\r\n```\r\nNamespace(beam_size=1, bos='alexa', command='random-sample', gpu=0, lm_model='gpt2_117m', max_length=1024, print_num=1, temperature=1.0, use_top_k=None)\r\nSampling Parameters: beam_size=1, temperature=1.0, use_top_k=None\r\nTraceback (most recent call last):\r\n  File \"sequence_sampling.py\", line 222, in <module>\r\n    generate()\r\n  File \"sequence_sampling.py\", line 202, in generate\r\n    inputs, begin_states = get_initial_input_state(decoder, bos_ids)\r\n  File \"sequence_sampling.py\", line 157, in get_initial_input_state\r\n    mx.nd.array([bos_ids], dtype=np.int32, ctx=ctx), None\r\n  File \"/home/ec2-user/anaconda3/envs/devnlp/lib/python3.7/site-packages/mxnet/gluon/block.py\", line 548, in __call__\r\n    out = self.forward(*args)\r\n  File \"/home/ec2-user/anaconda3/envs/devnlp/lib/python3.7/site-packages/mxnet/gluon/block.py\", line 925, in forward\r\n    return self.hybrid_forward(ndarray, x, *args, **params)\r\n  File \"/home/ec2-user/projects/gluon-nlp/scripts/text_generation/model/gpt.py\", line 275, in hybrid_forward\r\n    data_pos = F.contrib.arange_like(data, axis=1).astype('int32')\r\nAttributeError: module 'mxnet.ndarray.contrib' has no attribute 'arange_like'\r\n```\r\n\r\n## Environment\r\n```\r\n----------Python Info----------\r\nVersion      : 3.7.5\r\nCompiler     : GCC 7.3.0\r\nBuild        : ('default', 'Oct 25 2019 15:51:11')\r\nArch         : ('64bit', '')\r\n------------Pip Info-----------\r\nVersion      : 19.3.1\r\nDirectory    : /home/ec2-user/anaconda3/envs/devnlp/lib/python3.7/site-packages/pip\r\n----------MXNet Info-----------\r\nVersion      : 1.5.1\r\nDirectory    : /home/ec2-user/anaconda3/envs/devnlp/lib/python3.7/site-packages/mxnet\r\nNum GPUs     : 1\r\nCommit Hash   : c9818480680f84daa6e281a974ab263691302ba8\r\n----------System Info----------\r\nPlatform     : Linux-4.14.146-93.123.amzn1.x86_64-x86_64-with-glibc2.10\r\nsystem       : Linux\r\nnode         : ip-172-31-18-232\r\nrelease      : 4.14.146-93.123.amzn1.x86_64\r\nversion      : #1 SMP Tue Sep 24 00:45:23 UTC 2019\r\n----------Hardware Info----------\r\nmachine      : x86_64\r\nprocessor    : x86_64\r\nArchitecture:          x86_64\r\nCPU op-mode(s):        32-bit, 64-bit\r\nByte Order:            Little Endian\r\nCPU(s):                8\r\nOn-line CPU(s) list:   0-7\r\nThread(s) per core:    2\r\nCore(s) per socket:    4\r\nSocket(s):             1\r\nNUMA node(s):          1\r\nVendor ID:             GenuineIntel\r\nCPU family:            6\r\nModel:                 79\r\nModel name:            Intel(R) Xeon(R) CPU E5-2686 v4 @ 2.30GHz\r\nStepping:              1\r\nCPU MHz:               2701.607\r\nCPU max MHz:           3000.0000\r\nCPU min MHz:           1200.0000\r\nBogoMIPS:              4600.12\r\nHypervisor vendor:     Xen\r\nVirtualization type:   full\r\nL1d cache:             32K\r\nL1i cache:             32K\r\nL2 cache:              256K\r\nL3 cache:              46080K\r\nNUMA node0 CPU(s):     0-7\r\nFlags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch cpuid_fault invpcid_single pti fsgsbase bmi1 hle avx2 smep bmi2 erms invpcid rtm rdseed adx xsaveopt\r\n----------Network Test----------\r\nSetting timeout: 10\r\nTiming for MXNet: https://github.com/apache/incubator-mxnet, DNS: 0.0024 sec, LOAD: 0.8949 sec.\r\nTiming for GluonNLP GitHub: https://github.com/dmlc/gluon-nlp, DNS: 0.0004 sec, LOAD: 0.7312 sec.\r\nTiming for GluonNLP: http://gluon-nlp.mxnet.io, DNS: 0.0821 sec, LOAD: 0.2978 sec.\r\nTiming for D2L: http://d2l.ai, DNS: 0.0134 sec, LOAD: 0.2999 sec.\r\nTiming for D2L (zh-cn): http://zh.d2l.ai, DNS: 0.0170 sec, LOAD: 0.1823 sec.\r\nTiming for FashionMNIST: https://repo.mxnet.io/gluon/dataset/fashion-mnist/train-labels-idx1-ubyte.gz, DNS: 0.1048 sec, LOAD: 0.6563 sec.\r\nTiming for PYPI: https://pypi.python.org/pypi/pip, DNS: 0.0040 sec, LOAD: 0.4681 sec.\r\nTiming for Conda: https://repo.continuum.io/pkgs/free/, DNS: 0.0036 sec, LOAD: 0.2458 sec.\r\n```\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1033/timeline","performed_via_github_app":null,"state_reason":null}