{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1299","repository_url":"https://api.github.com/repos/dmlc/gluon-nlp","labels_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1299/labels{/name}","comments_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1299/comments","events_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1299/events","html_url":"https://github.com/dmlc/gluon-nlp/issues/1299","id":679049642,"node_id":"MDU6SXNzdWU2NzkwNDk2NDI=","number":1299,"title":"[Good First Issue] Add test cases for Truncated Gumbel","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"labels":[{"id":890393504,"node_id":"MDU6TGFiZWw4OTAzOTM1MDQ=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/help%20wanted","name":"help wanted","color":"b0f22e","default":true,"description":"Extra attention is needed"},{"id":890393505,"node_id":"MDU6TGFiZWw4OTAzOTM1MDU=","url":"https://api.github.com/repos/dmlc/gluon-nlp/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-08-14T10:03:48Z","updated_at":"2021-08-24T19:11:28Z","closed_at":"2021-08-24T19:11:28Z","author_association":"MEMBER","active_lock_reason":null,"body":"Well, [Gumbel Distribution](https://numpy.org/doc/stable/reference/random/generated/numpy.random.gumbel.html) is *magical*. Basically, given a sequence of K logits, i.e., \"\\log a_1, \\log a_2, ..., \\log a_K\" and K **independent** gumbel random variables, i.e., \"g_1, g_2, ..., g_K\". We have\r\n```\r\n\\argmax_i \\log a_i + g_i ~ Categorical({a_i / sum(a)})\r\n```\r\n\r\nThis gives you a very simple way to sample from categorical distribution:\r\n- Just draw a bunch of gumble variables with the same shape as the input logits. You may do that with `np.random.gumble()` as implemented in the source code: \r\nhttps://github.com/dmlc/gluon-nlp/blob/32e87d4d4aa20a6eb658ee90d765ccffbd160571/src/gluonnlp/op.py#L187\r\n- Add the gumbels to the logits\r\n- Perform an argmax on the correct axis (i.e., the one that you will need to enumerate the classes).\r\n\r\nNow, let's understand the meaning of *TruncatedGumbel*. The definition is that you need to sample from a distribution that has the same cumulative density function as Gumbel, but is **truncated** at the given threshold \\tau, meaning that it will never exceed \\tau.\r\n\r\nHere, we implement the TruncatedGumbel via the inverse CDF technique, which is also used in [A* sampling](https://papers.nips.cc/paper/5449-a-sampling.pdf) (See footnote 1 on Page 3):\r\nhttps://github.com/dmlc/gluon-nlp/blob/32e87d4d4aa20a6eb658ee90d765ccffbd160571/src/gluonnlp/op.py#L200-L228\r\n\r\nThe question is **how would you verify that the implementation is correct?** Basically, it relates to how you may conduct statistical testing and the author of this piece of codes has not implemented the test case well  (he's not sure about how to do it well...):\r\nhttps://github.com/dmlc/gluon-nlp/blob/32e87d4d4aa20a6eb658ee90d765ccffbd160571/tests/test_op.py#L106-L113\r\n\r\nWe will need your help and this will be a great contribution to GluonNLP!\r\n\r\nJust FYI @xidulu @aashiqmuhamed  @GomuGomuGo @liangliannie\r\n","closed_by":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1299/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1299/timeline","performed_via_github_app":null,"state_reason":"completed"}