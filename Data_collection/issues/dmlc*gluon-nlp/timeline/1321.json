[{"id":3698426554,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2OTg0MjY1NTQ=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3698426554","actor":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-27T08:44:21Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/681810121","html_url":"https://github.com/dmlc/gluon-nlp/issues/1321#issuecomment-681810121","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1321","id":681810121,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTgxMDEyMQ==","user":{"login":"zheyuye","id":37728728,"node_id":"MDQ6VXNlcjM3NzI4NzI4","avatar_url":"https://avatars.githubusercontent.com/u/37728728?v=4","gravatar_id":"","url":"https://api.github.com/users/zheyuye","html_url":"https://github.com/zheyuye","followers_url":"https://api.github.com/users/zheyuye/followers","following_url":"https://api.github.com/users/zheyuye/following{/other_user}","gists_url":"https://api.github.com/users/zheyuye/gists{/gist_id}","starred_url":"https://api.github.com/users/zheyuye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheyuye/subscriptions","organizations_url":"https://api.github.com/users/zheyuye/orgs","repos_url":"https://api.github.com/users/zheyuye/repos","events_url":"https://api.github.com/users/zheyuye/events{/privacy}","received_events_url":"https://api.github.com/users/zheyuye/received_events","type":"User","site_admin":false},"created_at":"2020-08-27T08:49:02Z","updated_at":"2020-08-27T08:49:02Z","author_association":"MEMBER","body":"This issue finds a fatal problem that makes` valid_candidates` invalidated","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/681810121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zheyuye","id":37728728,"node_id":"MDQ6VXNlcjM3NzI4NzI4","avatar_url":"https://avatars.githubusercontent.com/u/37728728?v=4","gravatar_id":"","url":"https://api.github.com/users/zheyuye","html_url":"https://github.com/zheyuye","followers_url":"https://api.github.com/users/zheyuye/followers","following_url":"https://api.github.com/users/zheyuye/following{/other_user}","gists_url":"https://api.github.com/users/zheyuye/gists{/gist_id}","starred_url":"https://api.github.com/users/zheyuye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheyuye/subscriptions","organizations_url":"https://api.github.com/users/zheyuye/orgs","repos_url":"https://api.github.com/users/zheyuye/repos","events_url":"https://api.github.com/users/zheyuye/events{/privacy}","received_events_url":"https://api.github.com/users/zheyuye/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/681816616","html_url":"https://github.com/dmlc/gluon-nlp/issues/1321#issuecomment-681816616","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1321","id":681816616,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTgxNjYxNg==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2020-08-27T08:53:13Z","updated_at":"2020-08-27T08:53:13Z","author_association":"MEMBER","body":"For a quick fix, we may change this section\r\n\r\nhttps://github.com/dmlc/gluon-nlp/blob/970318d5fcafd48843abdbaeb7aab0fc1061c901/scripts/pretraining/pretraining_utils.py#L497-L503\r\n\r\nWe can change that to\r\n```python\r\nvalid_candidates = F.np.ones_like(input_ids, dtype=np.bool) \r\nfor ignore_token in ignore_tokens: \r\n    valid_candidates = valid_candidates - F.np.equal(input_ids, ignore_token)\r\n```\r\n\r\nIn addition, I think it will be better to move it to the preprocessing phase.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/681816616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/681838133","html_url":"https://github.com/dmlc/gluon-nlp/issues/1321#issuecomment-681838133","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1321","id":681838133,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTgzODEzMw==","user":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false},"created_at":"2020-08-27T09:34:09Z","updated_at":"2020-08-27T09:34:09Z","author_association":"CONTRIBUTOR","body":"> For a quick fix, we may change this section\r\n> \r\n> https://github.com/dmlc/gluon-nlp/blob/970318d5fcafd48843abdbaeb7aab0fc1061c901/scripts/pretraining/pretraining_utils.py#L497-L503\r\n> \r\n> We can change that to\r\n> \r\n> ```python\r\n> valid_candidates = F.np.ones_like(input_ids, dtype=np.bool) \r\n> for ignore_token in ignore_tokens: \r\n>     valid_candidates = valid_candidates - F.np.equal(input_ids, ignore_token)\r\n> ```\r\n> \r\n> In addition, I think it will be better to move it to the preprocessing phase.\r\n\r\nYou cannot use minus here, some of values may end being negative numbers after that. Use multiply will solve the problem.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/681838133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false}},{"id":3713196393,"node_id":"MDExOkNsb3NlZEV2ZW50MzcxMzE5NjM5Mw==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3713196393","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-09-01T07:08:04Z","state_reason":null,"performed_via_github_app":null}]