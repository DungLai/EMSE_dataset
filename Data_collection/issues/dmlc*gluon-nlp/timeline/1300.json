[{"id":3658924796,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2NTg5MjQ3OTY=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658924796","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-16T00:23:44Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/674463221","html_url":"https://github.com/dmlc/gluon-nlp/issues/1300#issuecomment-674463221","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1300","id":674463221,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDQ2MzIyMQ==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2020-08-16T00:48:57Z","updated_at":"2020-08-16T00:48:57Z","author_association":"MEMBER","body":"@hannw Would you provide some profiling scripts that arrive at these numbers? In the new version, we use the default dictionary for storing the mapping: https://github.com/dmlc/gluon-nlp/blob/32e87d4d4aa20a6eb658ee90d765ccffbd160571/src/gluonnlp/data/vocab.py#L114. Also, we are doing a series of benchmarks to analyze the speed of GluonNLP: https://github.com/dmlc/gluon-nlp/tree/master/scripts/benchmarks. If you can provide some profiling scripts, it will be super helpful for us to speed up GluonNLP.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/674463221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"id":3658934185,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1ODkzNDE4NQ==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658934185","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-16T00:48:57Z","performed_via_github_app":null},{"id":3658934187,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTg5MzQxODc=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658934187","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-16T00:48:57Z","performed_via_github_app":null},{"id":3658934247,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2NTg5MzQyNDc=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658934247","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-16T00:49:08Z","label":{"name":"performance","color":"e99695"},"performed_via_github_app":null},{"id":3658934263,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MzY1ODkzNDI2Mw==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658934263","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-08-16T00:49:10Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/674464777","html_url":"https://github.com/dmlc/gluon-nlp/issues/1300#issuecomment-674464777","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1300","id":674464777,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDQ2NDc3Nw==","user":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"created_at":"2020-08-16T01:12:56Z","updated_at":"2020-08-16T01:12:56Z","author_association":"NONE","body":"@sxjscience for profiling, we use the default python cProfiler while running the training script and [snakeviz](https://jiffyclub.github.io/snakeviz/) to visualize the breakdown.\r\n\r\nWe are currently using 0.8.x of gluon-nlp, so maybe that's why the `get` is slow. Let us test the bleeding edge and see if it speed things up.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/674464777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false}},{"id":3658943154,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1ODk0MzE1NA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658943154","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-16T01:12:56Z","performed_via_github_app":null},{"id":3658943155,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTg5NDMxNTU=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658943155","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-16T01:12:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/674474826","html_url":"https://github.com/dmlc/gluon-nlp/issues/1300#issuecomment-674474826","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1300","id":674474826,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDQ3NDgyNg==","user":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false},"created_at":"2020-08-16T03:46:35Z","updated_at":"2020-08-16T03:46:35Z","author_association":"MEMBER","body":"@hannw thanks for the interest. note that the master branch is now used for numpy-compatible version of gluonnlp (#1298) which relies on mxnet 2.0 nightly builds (available to developers at https://dist.mxnet.io/python).","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/674474826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false}},{"id":3658998054,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY1ODk5ODA1NA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658998054","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-08-16T03:46:35Z","performed_via_github_app":null},{"id":3658998055,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NTg5OTgwNTU=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658998055","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-08-16T03:46:35Z","performed_via_github_app":null},{"id":3658998147,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2NTg5OTgxNDc=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3658998147","actor":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-16T03:46:54Z","label":{"name":"v0.x","color":"269115"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/693904685","html_url":"https://github.com/dmlc/gluon-nlp/issues/1300#issuecomment-693904685","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1300","id":693904685,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzkwNDY4NQ==","user":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false},"created_at":"2020-09-17T05:38:16Z","updated_at":"2020-09-17T20:11:02Z","author_association":"MEMBER","body":"@hannw I think the above comparison is not apple to apple in our supported use cases. The Vocab class is designed to handle both the cases on whether unknown token is set. If the unknown token is not set, then it should throw an error according to the definition of the class.\r\n\r\nIf you know beforehand that you always have unknown token, a good option may be to directly use the built-in dictionary instead of Vocab.\r\n\r\nI did a comparison among the vocab class on 0.x, 0.8.3, and the one on 1.x and ~I don't see a significant difference, most likely due to the fact that there's a condition check in the new logic on whether unknown token is set~. I see mixed performance for two implementation in the cases of w/ and w/o unknown_token:\r\n\r\n```python\r\n# Tests done on python3.7 OSX 10.15.6\r\n# GluonNLP 0.x\r\n# w/ unknown token\r\nv = Vocab({k:1 for k in ['a', 'b', 'c']})\r\n%timeit v['a']\r\n530 ns ± 17.9 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\n%timeit v['abc']\r\n565 ns ± 24 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b']\r\n%timeit v[keys]\r\n3.32 µs ± 149 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b'] * 1000\r\n%timeit v[keys]\r\n2.67 ms ± 144 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\n# w/o unknown token\r\nv = Vocab({k:1 for k in ['a', 'b', 'c']}, unknown_token=None)\r\n%timeit v['a']\r\n362 ns ± 16.7 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b']\r\n%timeit v[keys]\r\n1.17 µs ± 28.9 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b'] * 1000\r\n%timeit v[keys]\r\n582 µs ± 18.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\r\n\r\n\r\n# GluonNLP 0.8.3\r\n# w/ unknown token\r\nv = Vocab({k:1 for k in ['a', 'b', 'c']})\r\n%timeit v['a']\r\n530 ns ± 17.9 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\n%timeit v['abc']\r\n550 ns ± 18.4 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b']\r\n%timeit v[keys]\r\n3.2 µs ± 166 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b'] * 1000\r\n%timeit v[keys]\r\n2.65 ms ± 121 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)\r\n\r\n# w/o unknown token\r\nv = Vocab({k:1 for k in ['a', 'b', 'c']}, unknown_token=None)\r\n%timeit v['a']\r\n362 ns ± 16.7 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b']\r\n%timeit v[keys]\r\n1.13 µs ± 14.4 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b'] * 1000\r\n%timeit v[keys]\r\n618 µs ± 51.3 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\r\n\r\n\r\n# GluonNLP master\r\n# w/ unknown token\r\nv = Vocab({k:1 for k in ['a', 'b', 'c']})\r\n%timeit v['a']\r\n598 ns ± 14.6 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\n%timeit v['abc']\r\n646 ns ± 34.2 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b']\r\n%timeit v[keys]\r\n2.34 µs ± 200 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b'] * 1000\r\n%timeit v[keys]\r\n1.34 ms ± 24.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)\r\n\r\n# w/o unknown token\r\nv = Vocab({k:1 for k in ['a', 'b', 'c']}, unknown_token=None)\r\n%timeit v['a']\r\n641 ns ± 14.3 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b']\r\n%timeit v[keys]\r\n2.37 µs ± 89.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)\r\nkeys=['a', 'c', 'c', 'b', 'c', 'c', 'c', 'c', 'a', 'b'] * 1000\r\n%timeit v[keys]\r\n1.34 ms ± 27.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/693904685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false}},{"id":3776143690,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzc3NjE0MzY5MA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3776143690","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-17T05:38:16Z","performed_via_github_app":null},{"id":3776143692,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3NzYxNDM2OTI=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3776143692","actor":{"login":"hannw","id":4380470,"node_id":"MDQ6VXNlcjQzODA0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4380470?v=4","gravatar_id":"","url":"https://api.github.com/users/hannw","html_url":"https://github.com/hannw","followers_url":"https://api.github.com/users/hannw/followers","following_url":"https://api.github.com/users/hannw/following{/other_user}","gists_url":"https://api.github.com/users/hannw/gists{/gist_id}","starred_url":"https://api.github.com/users/hannw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hannw/subscriptions","organizations_url":"https://api.github.com/users/hannw/orgs","repos_url":"https://api.github.com/users/hannw/repos","events_url":"https://api.github.com/users/hannw/events{/privacy}","received_events_url":"https://api.github.com/users/hannw/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-17T05:38:16Z","performed_via_github_app":null}]