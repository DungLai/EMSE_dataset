[{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487658582","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-487658582","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":487658582,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzY1ODU4Mg==","user":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T16:55:49Z","updated_at":"2019-04-29T16:56:06Z","author_association":"MEMBER","body":"When ratio is 0, there's still the case where `num_samples % batch_size != 0`. In this case, for the last batch in each bucket, we'd have the choice of 1) drop the batch, 2) pad samples 3) leave as is. There likely are scenarios that each of these options are good for. @sxjscience @szhengac how do you recommend we handle these cases?","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487658582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false}},{"id":2307302579,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwNzMwMjU3OQ==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2307302579","actor":{"login":"szhengac","id":3960020,"node_id":"MDQ6VXNlcjM5NjAwMjA=","avatar_url":"https://avatars.githubusercontent.com/u/3960020?v=4","gravatar_id":"","url":"https://api.github.com/users/szhengac","html_url":"https://github.com/szhengac","followers_url":"https://api.github.com/users/szhengac/followers","following_url":"https://api.github.com/users/szhengac/following{/other_user}","gists_url":"https://api.github.com/users/szhengac/gists{/gist_id}","starred_url":"https://api.github.com/users/szhengac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szhengac/subscriptions","organizations_url":"https://api.github.com/users/szhengac/orgs","repos_url":"https://api.github.com/users/szhengac/repos","events_url":"https://api.github.com/users/szhengac/events{/privacy}","received_events_url":"https://api.github.com/users/szhengac/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-29T16:55:49Z","performed_via_github_app":null},{"id":2307302582,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDczMDI1ODI=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2307302582","actor":{"login":"szhengac","id":3960020,"node_id":"MDQ6VXNlcjM5NjAwMjA=","avatar_url":"https://avatars.githubusercontent.com/u/3960020?v=4","gravatar_id":"","url":"https://api.github.com/users/szhengac","html_url":"https://github.com/szhengac","followers_url":"https://api.github.com/users/szhengac/followers","following_url":"https://api.github.com/users/szhengac/following{/other_user}","gists_url":"https://api.github.com/users/szhengac/gists{/gist_id}","starred_url":"https://api.github.com/users/szhengac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szhengac/subscriptions","organizations_url":"https://api.github.com/users/szhengac/orgs","repos_url":"https://api.github.com/users/szhengac/repos","events_url":"https://api.github.com/users/szhengac/events{/privacy}","received_events_url":"https://api.github.com/users/szhengac/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-29T16:55:49Z","performed_via_github_app":null},{"id":2307302586,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwNzMwMjU4Ng==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2307302586","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-29T16:55:49Z","performed_via_github_app":null},{"id":2307302587,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDczMDI1ODc=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2307302587","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-29T16:55:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487671555","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-487671555","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":487671555,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzY3MTU1NQ==","user":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T17:31:43Z","updated_at":"2019-04-29T17:37:40Z","author_association":"NONE","body":"@szha Thanks for the comments. \r\n\r\nI did not find the `last_batch` parameter for the sampler since the `last_batch` is disabled in `data_loader` if a `batch_sampler` is used.\r\n\r\nI totally agree that there might exist, if not always, remaining data points which are not enough for a batch (e.g., due to bucket). The point is that, the user should be able to configure it explicitly. Alternatively, some warnings or  explaination in the documentation as reminders might be also helpful. ","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487671555/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false}},{"id":2307391402,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwNzM5MTQwMg==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2307391402","actor":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-29T17:31:43Z","performed_via_github_app":null},{"id":2307391403,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDczOTE0MDM=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2307391403","actor":{"login":"szha","id":2626883,"node_id":"MDQ6VXNlcjI2MjY4ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2626883?v=4","gravatar_id":"","url":"https://api.github.com/users/szha","html_url":"https://github.com/szha","followers_url":"https://api.github.com/users/szha/followers","following_url":"https://api.github.com/users/szha/following{/other_user}","gists_url":"https://api.github.com/users/szha/gists{/gist_id}","starred_url":"https://api.github.com/users/szha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szha/subscriptions","organizations_url":"https://api.github.com/users/szha/orgs","repos_url":"https://api.github.com/users/szha/repos","events_url":"https://api.github.com/users/szha/events{/privacy}","received_events_url":"https://api.github.com/users/szha/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-29T17:31:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487800459","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-487800459","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":487800459,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzgwMDQ1OQ==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T01:55:12Z","updated_at":"2019-04-30T01:55:12Z","author_association":"MEMBER","body":"The current design is that the data are loaded without any padding. The user may pad the data/drop the batch after it’s loaded. I agree it should be added to the document.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487800459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487849535","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-487849535","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":487849535,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Nzg0OTUzNQ==","user":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T07:42:09Z","updated_at":"2019-04-30T07:54:43Z","author_association":"NONE","body":"@sxjscience\r\nThanks! You mean padding to the incomplete batch, right?\r\n\r\nAlternatively, is that possible to merge the buckets that are with fewer samples into one? IMHO, since the purpose of the batchify, sampler, and dataloader is to simply the input pipeline and box the data feeding component, do we really want the users to handle the leftover?\r\n\r\nAkin to `Tensorflow`, when using the input function, one may only need the [.repeat()](https://www.tensorflow.org/api_docs/python/tf/data/Dataset#repeat) to get the batch of data (for certain epoch). ","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487849535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false}},{"id":2308684812,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwODY4NDgxMg==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2308684812","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-30T07:42:09Z","performed_via_github_app":null},{"id":2308684813,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDg2ODQ4MTM=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2308684813","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-30T07:42:09Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487859159","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-487859159","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":487859159,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Nzg1OTE1OQ==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T08:20:36Z","updated_at":"2019-04-30T08:21:00Z","author_association":"MEMBER","body":"@khui Thanks for the question.\r\n\r\n1) Yes, I mean the current implementation will not pad the incomplete batches. There are multiple ways to handle those incomplete batches, e.g., padding with zeros, padding by repeating the last few samples, padding by feeding in samples in a round-robin order, or just drop the batch.\r\n\r\n   We chose not to handle these cases and just implemented the very basic strategy (no padding) because it simplifies the API and can satisfy the requirement of most users. Now we can think if we could add an additional API that deals with these scenarios.\r\n\r\n2) I haven't fully understood the second question. Would you provide an example about how TF handles that?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/487859159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"id":2308763488,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwODc2MzQ4OA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2308763488","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-30T08:20:36Z","performed_via_github_app":null},{"id":2308763490,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDg3NjM0OTA=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2308763490","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-30T08:20:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/489087836","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-489087836","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":489087836,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTA4NzgzNg==","user":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"created_at":"2019-05-03T13:03:41Z","updated_at":"2019-05-03T13:21:18Z","author_association":"NONE","body":"@sxjscience \r\nThanks for the answers. \r\n\r\nAs for 1), I am not sure why padding zeros to complete the batch. Could you provide examples? The sampler basically randomlly samples (sampling with replacement) the data points to generate batch, thereby, IMHO, one might assume there wont be not enough data. Namely, even when I only have 10 data point, one should still be able to generate many batches with 32 data points.\r\n\r\nFor 2), please refer to the `repeat()` in the dataset api. \r\n https://www.tensorflow.org/api_docs/python/tf/data/Dataset#repeat.\r\nThe use of repeat is something like that:\r\n```\r\ndef input_func(...):\r\n    dataset = tf.data.Dataset.from_generator(...)\r\n    dataset=dataset.apply(lambda X, y:(transformation_func(X), y))\r\n    dataset=dataset.shuffle(buffer_size=10000)\r\n    dataset=dataset.repeat() \r\n    iterator = dataset.make_one_shot_iterator()\r\n    nxt_X, nxt_y = iterator.get_next()\r\n    return nxt_X, nxt_y\r\n\r\nwith tf.Graph():\r\n    nxt_X, nxt_y = input_func(...)\r\n    X, y = tf.place_holder(), tf.place_holder()\r\n    pred=model(X)\r\n    loss = loss_func(pred, y)\r\n    opt = tf.train.Optimizer.GradientDescentOptimizer(learning_rate=0.1)\r\n    opt_op = opt.minimize(loss, var_list=<list of variables>)\r\n    for batch_id in range(num_batch_to_run):\r\n         _, loss_np = sess.run([opt_op, loss], feed_dict={X: nxt_X, y: nxt_y})\r\n```\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/489087836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false}},{"id":2317307289,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMxNzMwNzI4OQ==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2317307289","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-03T13:03:41Z","performed_via_github_app":null},{"id":2317307291,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMTczMDcyOTE=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2317307291","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-03T13:03:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/489123865","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-489123865","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":489123865,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTEyMzg2NQ==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2019-05-03T14:54:57Z","updated_at":"2019-05-03T14:54:57Z","author_association":"MEMBER","body":"Sometimes the data/label are all padded to zero to mimic a masking behavior, although that’s not necessary in our case. I think adding a padding by samples/drop/no_padding option would be feasible in our case.\n\nBTW,  would the performance be downgraded if the batchsize are not always the same? Since Gluon support dynamic shapes, I assumed that we would no longer require to pad the data.\n\nGet Outlook for iOS<https://aka.ms/o0ukef>\n\n________________________________\nFrom: Kai Hui <notifications@github.com>\nSent: Friday, May 3, 2019 9:03 PM\nTo: dmlc/gluon-nlp\nCc: Xingjian SHI; Mention\nSubject: Re: [dmlc/gluon-nlp] FixedBucketSampler may return batch with varied length (setting ratio=0) (#683)\n\n\n@sxjscience<https://github.com/sxjscience>\nThanks for the answers.\nAs for 1, I am not sure why people will pad zeros to complete the batch. Could you provide examples? The sampler basically randomlly sample (random sample with replacement) the data points to generate batch, thereby, one might assume there wont be not enough data. Namely, even when I only have 10 data point, I should still generate batch with 32 data points, by simply repeating some of the data points.\n\nFor 2), please refer to the repeat() in the dataset api.\nhttps://www.tensorflow.org/api_docs/python/tf/data/Dataset#repeat.\nThe use of repeat is something like that:\n\ndataset = tf.data.Dataset.from_generator(...)\ndataset=dataset.apply(lambda X, _:(transformation_func(X), y))\ndataset=dataset.shuffle(buffer_size=10000)\ndataset=dataset.repeat()\niterator = dataset.make_one_shot_iterator()\nnxt_X, nxt_y = iterator.get_next()\n\n....\nfor batch_id in range(num_batch_to_run):\n    loss_np = sess.run(loss, feed_dict={X: nxt_X, y: nxt_y})\n\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-489087836>, or mute the thread<https://github.com/notifications/unsubscribe-auth/ABHQH3VUFCVBY4QG6HSLQS3PTQZ3BANCNFSM4HJDVIFA>.\n","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/489123865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"id":2317622850,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMxNzYyMjg1MA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2317622850","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-05-03T14:54:57Z","performed_via_github_app":null},{"id":2317622851,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMTc2MjI4NTE=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2317622851","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-05-03T14:54:57Z","performed_via_github_app":null},{"id":2320572868,"node_id":"MDExOkNsb3NlZEV2ZW50MjMyMDU3Mjg2OA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/2320572868","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-05-06T10:21:53Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/489574875","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-489574875","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":489574875,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTU3NDg3NQ==","user":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false},"created_at":"2019-05-06T10:28:21Z","updated_at":"2019-05-06T10:32:06Z","author_association":"NONE","body":"I am not sure about the influcences of the variant batch size on the performance. My point is that the behavior should align with the expectation and the convention as well. Especially notice that, the `batch_size` (together with the `learning rate`) is among the important hyperparameters to govern the learning process.  Up to the distribution of the data, however, it is possible that significant amount of batches are with different size then the configured one (use big bucket number and big batch size).\r\n\r\nMore importantly, for those bucket that includes not enough samples for a batch, there exist no sampling mechanism when the bucket is chosen, this could be **harmful** to the performance. Thereby, some measurements beyond documentation, e.g., merging those incompleted buckets make more sense, to 1) get enough sampling per batch; 2) actually do the sampling and introduce randomness, might be desirable.\r\n\r\n\r\nGood point that the `FixedBucketSampler` actually supports the varied batch sizes, which has been clearly introduced in the documentation. Thereby, at this moment, some better documentations could at least remind the users to pay attention to the behaviors of the samplers. I think the discussions have been adequate here. I might be able to help if the mentioned behavior sounds desirable to you. Close the issue for now.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/489574875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"khui","id":5355226,"node_id":"MDQ6VXNlcjUzNTUyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5355226?v=4","gravatar_id":"","url":"https://api.github.com/users/khui","html_url":"https://github.com/khui","followers_url":"https://api.github.com/users/khui/followers","following_url":"https://api.github.com/users/khui/following{/other_user}","gists_url":"https://api.github.com/users/khui/gists{/gist_id}","starred_url":"https://api.github.com/users/khui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khui/subscriptions","organizations_url":"https://api.github.com/users/khui/orgs","repos_url":"https://api.github.com/users/khui/repos","events_url":"https://api.github.com/users/khui/events{/privacy}","received_events_url":"https://api.github.com/users/khui/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/594223317","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-594223317","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":594223317,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDIyMzMxNw==","user":{"login":"Arhamna","id":16595900,"node_id":"MDQ6VXNlcjE2NTk1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/16595900?v=4","gravatar_id":"","url":"https://api.github.com/users/Arhamna","html_url":"https://github.com/Arhamna","followers_url":"https://api.github.com/users/Arhamna/followers","following_url":"https://api.github.com/users/Arhamna/following{/other_user}","gists_url":"https://api.github.com/users/Arhamna/gists{/gist_id}","starred_url":"https://api.github.com/users/Arhamna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arhamna/subscriptions","organizations_url":"https://api.github.com/users/Arhamna/orgs","repos_url":"https://api.github.com/users/Arhamna/repos","events_url":"https://api.github.com/users/Arhamna/events{/privacy}","received_events_url":"https://api.github.com/users/Arhamna/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T23:24:33Z","updated_at":"2020-03-03T23:24:50Z","author_association":"NONE","body":"I am facing a similar issue:\r\n\r\nSET UP:\r\n-------------------\r\n\r\n> train_batch_sampler = nlp.data.FixedBucketSampler(lengths=data_train_lengths,\r\n                                                      batch_size=500,\r\n                                                      num_buckets=1,\r\n                                                      ratio=0.0,\r\n                                                      shuffle=True,\r\n                                                      use_average_length=True,\r\n                                                      num_shards=1,\r\n                                                      bucket_scheme=bucket_scheme)\r\n\r\nWhere,\r\n\r\nlen(data_train_lengths) is 3560\r\nbucket_scheme is obtained using \"nlp.data.ConstWidthBucket()\"\r\n\r\n\r\nISSUE:\r\n-------------------\r\n\r\n With the above settings, the number of batches should be 3530/500 = 7.\r\n\r\nI, however, see the total number of batches (as returned by the data loader) to be 118!\r\n\r\nAdditionally, train_batch_sampler.stats() gives a batch size of 30! Not sure why.\r\n\r\n> train_batch_sampler.stats():\r\n  sample_num=3530, batch_num=118\r\n  key=[(31, 32)]\r\n  cnt=[3530]\r\n  batch_size=[30]\r\n\r\n> train_batch_sampler._batch_size  \r\n500","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/594223317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Arhamna","id":16595900,"node_id":"MDQ6VXNlcjE2NTk1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/16595900?v=4","gravatar_id":"","url":"https://api.github.com/users/Arhamna","html_url":"https://github.com/Arhamna","followers_url":"https://api.github.com/users/Arhamna/followers","following_url":"https://api.github.com/users/Arhamna/following{/other_user}","gists_url":"https://api.github.com/users/Arhamna/gists{/gist_id}","starred_url":"https://api.github.com/users/Arhamna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arhamna/subscriptions","organizations_url":"https://api.github.com/users/Arhamna/orgs","repos_url":"https://api.github.com/users/Arhamna/repos","events_url":"https://api.github.com/users/Arhamna/events{/privacy}","received_events_url":"https://api.github.com/users/Arhamna/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/594228096","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-594228096","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":594228096,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDIyODA5Ng==","user":{"login":"szhengac","id":3960020,"node_id":"MDQ6VXNlcjM5NjAwMjA=","avatar_url":"https://avatars.githubusercontent.com/u/3960020?v=4","gravatar_id":"","url":"https://api.github.com/users/szhengac","html_url":"https://github.com/szhengac","followers_url":"https://api.github.com/users/szhengac/followers","following_url":"https://api.github.com/users/szhengac/following{/other_user}","gists_url":"https://api.github.com/users/szhengac/gists{/gist_id}","starred_url":"https://api.github.com/users/szhengac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szhengac/subscriptions","organizations_url":"https://api.github.com/users/szhengac/orgs","repos_url":"https://api.github.com/users/szhengac/repos","events_url":"https://api.github.com/users/szhengac/events{/privacy}","received_events_url":"https://api.github.com/users/szhengac/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T23:40:06Z","updated_at":"2020-03-03T23:40:06Z","author_association":"MEMBER","body":"@Arhamna. When `use_average_length=True`, `batch_size` means the approximate number of tokens in a mini-batch.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/594228096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"szhengac","id":3960020,"node_id":"MDQ6VXNlcjM5NjAwMjA=","avatar_url":"https://avatars.githubusercontent.com/u/3960020?v=4","gravatar_id":"","url":"https://api.github.com/users/szhengac","html_url":"https://github.com/szhengac","followers_url":"https://api.github.com/users/szhengac/followers","following_url":"https://api.github.com/users/szhengac/following{/other_user}","gists_url":"https://api.github.com/users/szhengac/gists{/gist_id}","starred_url":"https://api.github.com/users/szhengac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szhengac/subscriptions","organizations_url":"https://api.github.com/users/szhengac/orgs","repos_url":"https://api.github.com/users/szhengac/repos","events_url":"https://api.github.com/users/szhengac/events{/privacy}","received_events_url":"https://api.github.com/users/szhengac/received_events","type":"User","site_admin":false}},{"id":3094329364,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA5NDMyOTM2NA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3094329364","actor":{"login":"Arhamna","id":16595900,"node_id":"MDQ6VXNlcjE2NTk1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/16595900?v=4","gravatar_id":"","url":"https://api.github.com/users/Arhamna","html_url":"https://github.com/Arhamna","followers_url":"https://api.github.com/users/Arhamna/followers","following_url":"https://api.github.com/users/Arhamna/following{/other_user}","gists_url":"https://api.github.com/users/Arhamna/gists{/gist_id}","starred_url":"https://api.github.com/users/Arhamna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arhamna/subscriptions","organizations_url":"https://api.github.com/users/Arhamna/orgs","repos_url":"https://api.github.com/users/Arhamna/repos","events_url":"https://api.github.com/users/Arhamna/events{/privacy}","received_events_url":"https://api.github.com/users/Arhamna/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-03T23:40:06Z","performed_via_github_app":null},{"id":3094329368,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwOTQzMjkzNjg=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3094329368","actor":{"login":"Arhamna","id":16595900,"node_id":"MDQ6VXNlcjE2NTk1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/16595900?v=4","gravatar_id":"","url":"https://api.github.com/users/Arhamna","html_url":"https://github.com/Arhamna","followers_url":"https://api.github.com/users/Arhamna/followers","following_url":"https://api.github.com/users/Arhamna/following{/other_user}","gists_url":"https://api.github.com/users/Arhamna/gists{/gist_id}","starred_url":"https://api.github.com/users/Arhamna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arhamna/subscriptions","organizations_url":"https://api.github.com/users/Arhamna/orgs","repos_url":"https://api.github.com/users/Arhamna/repos","events_url":"https://api.github.com/users/Arhamna/events{/privacy}","received_events_url":"https://api.github.com/users/Arhamna/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-03T23:40:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/594229127","html_url":"https://github.com/dmlc/gluon-nlp/issues/683#issuecomment-594229127","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/683","id":594229127,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDIyOTEyNw==","user":{"login":"Arhamna","id":16595900,"node_id":"MDQ6VXNlcjE2NTk1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/16595900?v=4","gravatar_id":"","url":"https://api.github.com/users/Arhamna","html_url":"https://github.com/Arhamna","followers_url":"https://api.github.com/users/Arhamna/followers","following_url":"https://api.github.com/users/Arhamna/following{/other_user}","gists_url":"https://api.github.com/users/Arhamna/gists{/gist_id}","starred_url":"https://api.github.com/users/Arhamna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arhamna/subscriptions","organizations_url":"https://api.github.com/users/Arhamna/orgs","repos_url":"https://api.github.com/users/Arhamna/repos","events_url":"https://api.github.com/users/Arhamna/events{/privacy}","received_events_url":"https://api.github.com/users/Arhamna/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T23:43:41Z","updated_at":"2020-03-03T23:43:41Z","author_association":"NONE","body":"I see. Yes setting use_average_length=False gives the desired batch size. Thank you so much!","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/594229127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Arhamna","id":16595900,"node_id":"MDQ6VXNlcjE2NTk1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/16595900?v=4","gravatar_id":"","url":"https://api.github.com/users/Arhamna","html_url":"https://github.com/Arhamna","followers_url":"https://api.github.com/users/Arhamna/followers","following_url":"https://api.github.com/users/Arhamna/following{/other_user}","gists_url":"https://api.github.com/users/Arhamna/gists{/gist_id}","starred_url":"https://api.github.com/users/Arhamna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arhamna/subscriptions","organizations_url":"https://api.github.com/users/Arhamna/orgs","repos_url":"https://api.github.com/users/Arhamna/repos","events_url":"https://api.github.com/users/Arhamna/events{/privacy}","received_events_url":"https://api.github.com/users/Arhamna/received_events","type":"User","site_admin":false}}]