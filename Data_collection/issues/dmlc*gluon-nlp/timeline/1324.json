[{"id":3703018874,"node_id":"MDEyOkxhYmVsZWRFdmVudDM3MDMwMTg4NzQ=","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3703018874","actor":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-28T08:55:01Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":3703098087,"node_id":"MDExOlBpbm5lZEV2ZW50MzcwMzA5ODA4Nw==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3703098087","actor":{"login":"zheyuye","id":37728728,"node_id":"MDQ6VXNlcjM3NzI4NzI4","avatar_url":"https://avatars.githubusercontent.com/u/37728728?v=4","gravatar_id":"","url":"https://api.github.com/users/zheyuye","html_url":"https://github.com/zheyuye","followers_url":"https://api.github.com/users/zheyuye/followers","following_url":"https://api.github.com/users/zheyuye/following{/other_user}","gists_url":"https://api.github.com/users/zheyuye/gists{/gist_id}","starred_url":"https://api.github.com/users/zheyuye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheyuye/subscriptions","organizations_url":"https://api.github.com/users/zheyuye/orgs","repos_url":"https://api.github.com/users/zheyuye/repos","events_url":"https://api.github.com/users/zheyuye/events{/privacy}","received_events_url":"https://api.github.com/users/zheyuye/received_events","type":"User","site_admin":false},"event":"pinned","commit_id":null,"commit_url":null,"created_at":"2020-08-28T09:17:12Z","performed_via_github_app":null},{"id":3703098521,"node_id":"MDEzOlVucGlubmVkRXZlbnQzNzAzMDk4NTIx","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3703098521","actor":{"login":"zheyuye","id":37728728,"node_id":"MDQ6VXNlcjM3NzI4NzI4","avatar_url":"https://avatars.githubusercontent.com/u/37728728?v=4","gravatar_id":"","url":"https://api.github.com/users/zheyuye","html_url":"https://github.com/zheyuye","followers_url":"https://api.github.com/users/zheyuye/followers","following_url":"https://api.github.com/users/zheyuye/following{/other_user}","gists_url":"https://api.github.com/users/zheyuye/gists{/gist_id}","starred_url":"https://api.github.com/users/zheyuye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheyuye/subscriptions","organizations_url":"https://api.github.com/users/zheyuye/orgs","repos_url":"https://api.github.com/users/zheyuye/repos","events_url":"https://api.github.com/users/zheyuye/events{/privacy}","received_events_url":"https://api.github.com/users/zheyuye/received_events","type":"User","site_admin":false},"event":"unpinned","commit_id":null,"commit_url":null,"created_at":"2020-08-28T09:17:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682424184","html_url":"https://github.com/dmlc/gluon-nlp/issues/1324#issuecomment-682424184","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1324","id":682424184,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjQyNDE4NA==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2020-08-28T09:22:12Z","updated_at":"2020-08-28T09:22:12Z","author_association":"MEMBER","body":"I think the intention is to use topk(logp + Gumbel) to mimic sampling without replacement from the categorical distribution.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682424184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682425629","html_url":"https://github.com/dmlc/gluon-nlp/issues/1324#issuecomment-682425629","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1324","id":682425629,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjQyNTYyOQ==","user":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false},"created_at":"2020-08-28T09:25:09Z","updated_at":"2020-08-28T09:25:09Z","author_association":"CONTRIBUTOR","body":"> I think the intention is to use topk(logp + Gumbel) to mimic sampling without replacement from the categorical distribution.\r\n\r\nlog p is right.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682425629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false}},{"id":3703152709,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzcwMzE1MjcwOQ==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3703152709","actor":{"login":"liuzh47","id":12567586,"node_id":"MDQ6VXNlcjEyNTY3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/12567586?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzh47","html_url":"https://github.com/liuzh47","followers_url":"https://api.github.com/users/liuzh47/followers","following_url":"https://api.github.com/users/liuzh47/following{/other_user}","gists_url":"https://api.github.com/users/liuzh47/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzh47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzh47/subscriptions","organizations_url":"https://api.github.com/users/liuzh47/orgs","repos_url":"https://api.github.com/users/liuzh47/repos","events_url":"https://api.github.com/users/liuzh47/events{/privacy}","received_events_url":"https://api.github.com/users/liuzh47/received_events","type":"User","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2020-08-28T09:32:36Z","rename":{"from":"Use of Gumbel Variable in dynamic masked position sampling of Electra","to":"Dynamic masked position sampling of Electra"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682434283","html_url":"https://github.com/dmlc/gluon-nlp/issues/1324#issuecomment-682434283","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1324","id":682434283,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjQzNDI4Mw==","user":{"login":"zheyuye","id":37728728,"node_id":"MDQ6VXNlcjM3NzI4NzI4","avatar_url":"https://avatars.githubusercontent.com/u/37728728?v=4","gravatar_id":"","url":"https://api.github.com/users/zheyuye","html_url":"https://github.com/zheyuye","followers_url":"https://api.github.com/users/zheyuye/followers","following_url":"https://api.github.com/users/zheyuye/following{/other_user}","gists_url":"https://api.github.com/users/zheyuye/gists{/gist_id}","starred_url":"https://api.github.com/users/zheyuye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheyuye/subscriptions","organizations_url":"https://api.github.com/users/zheyuye/orgs","repos_url":"https://api.github.com/users/zheyuye/repos","events_url":"https://api.github.com/users/zheyuye/events{/privacy}","received_events_url":"https://api.github.com/users/zheyuye/received_events","type":"User","site_admin":false},"created_at":"2020-08-28T09:45:49Z","updated_at":"2020-08-28T09:45:49Z","author_association":"MEMBER","body":"Following https://github.com/google-research/electra/issues/41,   F.npx.topk(sample_probs + gumbels ` was used to aviod deduplicated samples. During the pre-training, all the training corpora were processed into sentences with a length of `max_seq_length` (usually 512), so that there is no padding at the end of sentence in most cases. Therefore, it is my negligence that this issue you pointed out above were not covered.","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682434283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zheyuye","id":37728728,"node_id":"MDQ6VXNlcjM3NzI4NzI4","avatar_url":"https://avatars.githubusercontent.com/u/37728728?v=4","gravatar_id":"","url":"https://api.github.com/users/zheyuye","html_url":"https://github.com/zheyuye","followers_url":"https://api.github.com/users/zheyuye/followers","following_url":"https://api.github.com/users/zheyuye/following{/other_user}","gists_url":"https://api.github.com/users/zheyuye/gists{/gist_id}","starred_url":"https://api.github.com/users/zheyuye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheyuye/subscriptions","organizations_url":"https://api.github.com/users/zheyuye/orgs","repos_url":"https://api.github.com/users/zheyuye/repos","events_url":"https://api.github.com/users/zheyuye/events{/privacy}","received_events_url":"https://api.github.com/users/zheyuye/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682435279","html_url":"https://github.com/dmlc/gluon-nlp/issues/1324#issuecomment-682435279","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1324","id":682435279,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjQzNTI3OQ==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2020-08-28T09:48:12Z","updated_at":"2020-08-28T09:48:12Z","author_association":"MEMBER","body":"Basically, you should use logp instead of P to use the gumbel trick.\n\nGet Outlook for iOS<https://aka.ms/o0ukef>\n________________________________\nFrom: Zheyu Ye <notifications@github.com>\nSent: Friday, August 28, 2020 2:46:03 AM\nTo: dmlc/gluon-nlp <gluon-nlp@noreply.github.com>\nCc: Xingjian SHI <xshiab@connect.ust.hk>; Comment <comment@noreply.github.com>\nSubject: Re: [dmlc/gluon-nlp] Dynamic masked position sampling of Electra (#1324)\n\n\nFollowing google-research/electra#41<https://github.com/google-research/electra/issues/41>, F.npx.topk(sample_probs + gumbels was used to aviod deduplicated samples. During the pre-training, all the training corpora were processed into sentences with a length ofmax_seq_length` (usually 512), so that there is no padding at the end of sentence in most cases. Therefore, it is my negligence that this issue you pointed out above were not covered.\n\n—\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<https://github.com/dmlc/gluon-nlp/issues/1324#issuecomment-682434283>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/ABHQH3UTTFHJEMSS5UP3VH3SC54FXANCNFSM4QN4W25A>.\n","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/682435279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/684502808","html_url":"https://github.com/dmlc/gluon-nlp/issues/1324#issuecomment-684502808","issue_url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/1324","id":684502808,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDUwMjgwOA==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T07:07:35Z","updated_at":"2020-09-01T07:07:35Z","author_association":"MEMBER","body":"Closed by https://github.com/dmlc/gluon-nlp/pull/1323","reactions":{"url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/comments/684502808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false}},{"id":3713193588,"node_id":"MDExOkNsb3NlZEV2ZW50MzcxMzE5MzU4OA==","url":"https://api.github.com/repos/dmlc/gluon-nlp/issues/events/3713193588","actor":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-09-01T07:07:36Z","state_reason":null,"performed_via_github_app":null}]