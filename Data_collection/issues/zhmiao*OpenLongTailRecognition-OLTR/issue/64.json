{"url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR/issues/64","repository_url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR","labels_url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR/issues/64/labels{/name}","comments_url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR/issues/64/comments","events_url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR/issues/64/events","html_url":"https://github.com/zhmiao/OpenLongTailRecognition-OLTR/issues/64","id":685931083,"node_id":"MDU6SXNzdWU2ODU5MzEwODM=","number":64,"title":" Many_shot_accuracy_top1: nan on my own dataset","user":{"login":"rajanieprabha","id":17781524,"node_id":"MDQ6VXNlcjE3NzgxNTI0","avatar_url":"https://avatars.githubusercontent.com/u/17781524?v=4","gravatar_id":"","url":"https://api.github.com/users/rajanieprabha","html_url":"https://github.com/rajanieprabha","followers_url":"https://api.github.com/users/rajanieprabha/followers","following_url":"https://api.github.com/users/rajanieprabha/following{/other_user}","gists_url":"https://api.github.com/users/rajanieprabha/gists{/gist_id}","starred_url":"https://api.github.com/users/rajanieprabha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajanieprabha/subscriptions","organizations_url":"https://api.github.com/users/rajanieprabha/orgs","repos_url":"https://api.github.com/users/rajanieprabha/repos","events_url":"https://api.github.com/users/rajanieprabha/events{/privacy}","received_events_url":"https://api.github.com/users/rajanieprabha/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-26T01:12:06Z","updated_at":"2020-08-26T01:28:30Z","closed_at":"2020-08-26T01:28:30Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI am using your code to run on my custom dataset. However, I am getting nan on Many_shpt_accuracy_top1 on val set. I tried changing the learning rate too, but it doesn't seem to work. \r\n\r\n```\r\n{'criterions': {'PerformanceLoss': {'def_file': 'loss/SoftmaxLoss.py',\r\n                                    'loss_params': {},\r\n                                    'optim_params': None,\r\n                                    'weight': 1.0}},\r\n 'memory': {'centroids': False, 'init_centroids': False},\r\n 'networks': {'classifier': {'def_file': 'models/DotProductClassifier.py',\r\n                             'optim_params': {'lr': 1,\r\n                                              'momentum': 0.9,\r\n                                              'weight_decay': 0},\r\n                             'params': {'dataset': 'ImageNet_LT',\r\n                                        'in_dim': 512,\r\n                                        'num_classes': 201,\r\n                                        'stage1_weights': False}},\r\n              'feat_model': {'def_file': 'models/ResNet10Feature.py',\r\n                             'fix': False,\r\n                             'optim_params': {'lr': 1,\r\n                                              'momentum': 0.1,\r\n                                              'weight_decay': 0},\r\n                             'params': {'caffe': False,\r\n                                        'dataset': 'ImageNet_LT',\r\n                                        'dropout': None,\r\n                                        'stage1_weights': False,\r\n                                        'use_fc': False,\r\n                                        'use_modulatedatt': False}}},\r\n 'training_opt': {'batch_size': 128,\r\n                  'dataset': 'ImageNet_LT',\r\n                  'display_step': 10,\r\n                  'feature_dim': 512,\r\n                  'log_dir': 'logs/ImageNet_LT/stage1',\r\n                  'num_classes': 201,\r\n                  'num_epochs': 500,\r\n                  'num_workers': 4,\r\n                  'open_threshold': 0.01,\r\n                  'sampler': None,\r\n                  'scheduler_params': {'gamma': 0.1, 'step_size': 1000}}}\r\nLoading data from /pylon5/pscstaff/rajanie/MLStamps/long-tail/OpenLongTailRecognition-OLTR/OLTRDataset/OLTRDataset_1/train.txt\r\nUse data transformation: Compose(\r\n    RandomResizedCrop(size=(224, 224), scale=(0.08, 1.0), ratio=(0.75, 1.3333), interpolation=PIL.Image.BILINEAR)\r\n    RandomHorizontalFlip(p=0.5)\r\n    ColorJitter(brightness=0.4, contrast=0.4, saturation=0.4, hue=0)\r\n    ToTensor()\r\n    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])\r\n)\r\nNo sampler.\r\nShuffle is True.\r\nLoading data from /pylon5/pscstaff/rajanie/MLStamps/long-tail/OpenLongTailRecognition-OLTR/OLTRDataset/OLTRDataset_1/val.txt\r\nUse data transformation: Compose(\r\n    Resize(size=256, interpolation=PIL.Image.BILINEAR)\r\n    CenterCrop(size=(224, 224))\r\n    ToTensor()\r\n    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])\r\n)\r\nNo sampler.\r\nShuffle is True.\r\nUsing 1 GPUs.\r\nLoading Scratch ResNet 10 Feature Model.\r\nNo Pretrained Weights For Feature Model.\r\nLoading Dot Product Classifier.\r\nRandom initialized classifier weights.\r\nUsing steps for training.\r\nInitializing model optimizer.\r\nLoading Softmax Loss.\r\n\r\n```\r\n```\r\n Phase: val \r\n\r\n Evaluation_accuracy_micro_top1: 0.312 \r\n Averaged F-measure: 0.100 \r\n Many_shot_accuracy_top1: nan Median_shot_accuracy_top1: 0.630 Low_shot_accuracy_top1: 0.096 \r\n\r\nEpoch: [72/500] Step: 1  Minibatch_loss_performance: 2.645 Minibatch_accuracy_micro: 0.344\r\nEpoch: [72/500] Step: 2  Minibatch_loss_performance: 2.499 Minibatch_accuracy_micro: 0.344\r\nEpoch: [72/500] Step: 3  Minibatch_loss_performance: 2.736 Minibatch_accuracy_micro: 0.305\r\nEpoch: [72/500] Step: 4  Minibatch_loss_performance: 2.587 Minibatch_accuracy_micro: 0.336\r\nEpoch: [72/500] Step: 5  Minibatch_loss_performance: 2.884 Minibatch_accuracy_micro: 0.289\r\nEpoch: [72/500] Step: 6  Minibatch_loss_performance: 2.863 Minibatch_accuracy_micro: 0.281\r\nEpoch: [72/500] Step: 7  Minibatch_loss_performance: 2.513 Minibatch_accuracy_micro: 0.367\r\nEpoch: [72/500] Step: 8  Minibatch_loss_performance: 2.918 Minibatch_accuracy_micro: 0.312\r\nEpoch: [72/500] Step: 9  Minibatch_loss_performance: 2.623 Minibatch_accuracy_micro: 0.352\r\n\r\n```\r\n\r\nCan you give me any pointers to debug this? I didn't make any changes to the code.\r\n\r\n","closed_by":{"login":"rajanieprabha","id":17781524,"node_id":"MDQ6VXNlcjE3NzgxNTI0","avatar_url":"https://avatars.githubusercontent.com/u/17781524?v=4","gravatar_id":"","url":"https://api.github.com/users/rajanieprabha","html_url":"https://github.com/rajanieprabha","followers_url":"https://api.github.com/users/rajanieprabha/followers","following_url":"https://api.github.com/users/rajanieprabha/following{/other_user}","gists_url":"https://api.github.com/users/rajanieprabha/gists{/gist_id}","starred_url":"https://api.github.com/users/rajanieprabha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajanieprabha/subscriptions","organizations_url":"https://api.github.com/users/rajanieprabha/orgs","repos_url":"https://api.github.com/users/rajanieprabha/repos","events_url":"https://api.github.com/users/rajanieprabha/events{/privacy}","received_events_url":"https://api.github.com/users/rajanieprabha/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR/issues/64/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/zhmiao/OpenLongTailRecognition-OLTR/issues/64/timeline","performed_via_github_app":null,"state_reason":"completed"}