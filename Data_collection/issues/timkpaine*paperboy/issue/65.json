{"url":"https://api.github.com/repos/timkpaine/paperboy/issues/65","repository_url":"https://api.github.com/repos/timkpaine/paperboy","labels_url":"https://api.github.com/repos/timkpaine/paperboy/issues/65/labels{/name}","comments_url":"https://api.github.com/repos/timkpaine/paperboy/issues/65/comments","events_url":"https://api.github.com/repos/timkpaine/paperboy/issues/65/events","html_url":"https://github.com/timkpaine/paperboy/issues/65","id":441669633,"node_id":"MDU6SXNzdWU0NDE2Njk2MzM=","number":65,"title":"Unable to create schedule","user":{"login":"abhai2k","id":36784,"node_id":"MDQ6VXNlcjM2Nzg0","avatar_url":"https://avatars.githubusercontent.com/u/36784?v=4","gravatar_id":"","url":"https://api.github.com/users/abhai2k","html_url":"https://github.com/abhai2k","followers_url":"https://api.github.com/users/abhai2k/followers","following_url":"https://api.github.com/users/abhai2k/following{/other_user}","gists_url":"https://api.github.com/users/abhai2k/gists{/gist_id}","starred_url":"https://api.github.com/users/abhai2k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhai2k/subscriptions","organizations_url":"https://api.github.com/users/abhai2k/orgs","repos_url":"https://api.github.com/users/abhai2k/repos","events_url":"https://api.github.com/users/abhai2k/events{/privacy}","received_events_url":"https://api.github.com/users/abhai2k/received_events","type":"User","site_admin":false},"labels":[{"id":1089205876,"node_id":"MDU6TGFiZWwxMDg5MjA1ODc2","url":"https://api.github.com/repos/timkpaine/paperboy/labels/ready","name":"ready","color":"0e8a16","default":false,"description":""},{"id":1089206267,"node_id":"MDU6TGFiZWwxMDg5MjA2MjY3","url":"https://api.github.com/repos/timkpaine/paperboy/labels/bug","name":"bug","color":"ee0701","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-05-08T10:43:52Z","updated_at":"2019-06-01T18:17:37Z","closed_at":"2019-06-01T18:17:37Z","author_association":"NONE","active_lock_reason":null,"body":"When trying to create a schedule for notebook, nothing happens. \r\nDeveloper tools in chrome gives below error\r\n```\r\nbundle.js:8 POST http://localhost:8080/api/v1/jobs?action=save 500 (Internal Server Error)\r\n(anonymous) @ bundle.js:8\r\nt.requestFormData @ bundle.js:8\r\n(anonymous) @ bundle.js:8\r\nn.onsubmit @ bundle.js:8\r\nbundle.js:8 Uncaught (in promise) SyntaxError: Unexpected token < in JSON at position 0\r\n    at JSON.parse (<anonymous>)\r\n    at Object.json (bundle.js:8)\r\n    at bundle.js:8\r\n\r\n```\r\nLogs:\r\n```\r\n[2019-05-08 09:28:11 +0000] [10] [INFO] Booting worker with pid: 10\r\nCRITICAL:root:Storing user admin eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjEiLCJuYW1lIjoiYWRtaW4ifQ.aS8njo_SfV2FlfoJe1w-5BVR23o8s7vWZYEuYWx6L8M 1\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.notebook.NotebookSQL'>, result : 0 - 0\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.job.JobSQL'>, result : 0 - 0\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.report.ReportSQL'>, result : 0 - 0\r\nCRITICAL:root:Storing notebook <Notebook(name='Test', user='<User(name='admin')>', privacy='public', level='production'>\r\nCRITICAL:root:Storing job <Job(name='Test Job', user='<User(name='admin')>', notebook='<Notebook(name='Test', user='<User(name='admin')>', privacy='public', level='production'>', start='2019-05-08 09:28:00', interval='hourly'>\r\n[2019-05-08 09:29:08 +0000] [10] [ERROR] Error handling request /api/v1/jobs?action=save\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/gunicorn-19.9.0-py3.6.egg/gunicorn/workers/sync.py\", line 135, in handle\r\n    self.handle_request(listener, req, client, addr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/gunicorn-19.9.0-py3.6.egg/gunicorn/workers/sync.py\", line 176, in handle_request\r\n    respiter = self.wsgi(environ, resp.start_response)\r\n  File \"falcon/api.py\", line 274, in falcon.api.API.__call__\r\n  File \"falcon/api.py\", line 269, in falcon.api.API.__call__\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/resources/job.py\", line 19, in on_post\r\n    resp.body = json.dumps(self.db.jobs.store(req.context['user'], req.params, self.session, self.scheduler))\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/storage/sqla/job.py\", line 79, in store\r\n    report_configs = self.db.reports.generate(user, params, session, job=job_config, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/storage/sqla/report.py\", line 102, in generate\r\n    report_params = parameters.file.read().decode('utf-8')\r\nAttributeError: 'bytes' object has no attribute 'file'\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.job.JobSQL'>, result : 0 - 0\r\nCRITICAL:root:Storing job <Job(name='Test Job', user='<User(name='admin')>', notebook='<Notebook(name='Test', user='<User(name='admin')>', privacy='public', level='production'>', start='2019-05-08 09:28:00', interval='hourly'>\r\n[2019-05-08 09:32:42 +0000] [10] [ERROR] Error handling request /api/v1/jobs?action=save\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/gunicorn-19.9.0-py3.6.egg/gunicorn/workers/sync.py\", line 135, in handle\r\n    self.handle_request(listener, req, client, addr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/gunicorn-19.9.0-py3.6.egg/gunicorn/workers/sync.py\", line 176, in handle_request\r\n    respiter = self.wsgi(environ, resp.start_response)\r\n  File \"falcon/api.py\", line 274, in falcon.api.API.__call__\r\n  File \"falcon/api.py\", line 269, in falcon.api.API.__call__\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/resources/job.py\", line 19, in on_post\r\n    resp.body = json.dumps(self.db.jobs.store(req.context['user'], req.params, self.session, self.scheduler))\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/storage/sqla/job.py\", line 79, in store\r\n    report_configs = self.db.reports.generate(user, params, session, job=job_config, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/storage/sqla/report.py\", line 102, in generate\r\n    report_params = parameters.file.read().decode('utf-8')\r\nAttributeError: 'bytes' object has no attribute 'file'\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.job.JobSQL'>, result : 0 - 0\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.notebook.NotebookSQL'>, result : 1 - 1\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.job.JobSQL'>, result : 0 - 0\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.report.ReportSQL'>, result : 0 - 0\r\nCRITICAL:root:Storing job <Job(name='5tel', user='<User(name='admin')>', notebook='<Notebook(name='Test', user='<User(name='admin')>', privacy='public', level='production'>', start='2019-05-08 09:32:00', interval='hourly'>\r\n[2019-05-08 09:33:18 +0000] [10] [ERROR] Error handling request /api/v1/jobs?action=save\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/gunicorn-19.9.0-py3.6.egg/gunicorn/workers/sync.py\", line 135, in handle\r\n    self.handle_request(listener, req, client, addr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/gunicorn-19.9.0-py3.6.egg/gunicorn/workers/sync.py\", line 176, in handle_request\r\n    respiter = self.wsgi(environ, resp.start_response)\r\n  File \"falcon/api.py\", line 274, in falcon.api.API.__call__\r\n  File \"falcon/api.py\", line 269, in falcon.api.API.__call__\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/resources/job.py\", line 19, in on_post\r\n    resp.body = json.dumps(self.db.jobs.store(req.context['user'], req.params, self.session, self.scheduler))\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/storage/sqla/job.py\", line 79, in store\r\n    report_configs = self.db.reports.generate(user, params, session, job=job_config, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/paperboy-0.0.2-py3.6.egg/paperboy/storage/sqla/report.py\", line 102, in generate\r\n    report_params = parameters.file.read().decode('utf-8')\r\nAttributeError: 'bytes' object has no attribute 'file'\r\nCRITICAL:root:list : <class 'paperboy.storage.sqla.models.job.JobSQL'>, result : 0 - 0\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Add -> Schedule\r\n2. Provide details - schedule name, notebook, date at default, set interval to hourly, Level production, every thing else at default. \r\n3. Click save\r\n\r\n**Expected behavior**\r\nScheduler gets saved\r\n\r\n**Installation notes**\r\n - Container OS - Ubuntu. Installed dependencies then ran make install. CMD - python3 -m paperboy.server\r\n -  Python version - 3.7\r\n - Client - Mac os\r\n - Browser - Chrome 74.0.3729.131 (Official Build) (64-bit)","closed_by":{"login":"timkpaine","id":3105306,"node_id":"MDQ6VXNlcjMxMDUzMDY=","avatar_url":"https://avatars.githubusercontent.com/u/3105306?v=4","gravatar_id":"","url":"https://api.github.com/users/timkpaine","html_url":"https://github.com/timkpaine","followers_url":"https://api.github.com/users/timkpaine/followers","following_url":"https://api.github.com/users/timkpaine/following{/other_user}","gists_url":"https://api.github.com/users/timkpaine/gists{/gist_id}","starred_url":"https://api.github.com/users/timkpaine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timkpaine/subscriptions","organizations_url":"https://api.github.com/users/timkpaine/orgs","repos_url":"https://api.github.com/users/timkpaine/repos","events_url":"https://api.github.com/users/timkpaine/events{/privacy}","received_events_url":"https://api.github.com/users/timkpaine/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/timkpaine/paperboy/issues/65/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/timkpaine/paperboy/issues/65/timeline","performed_via_github_app":null,"state_reason":"completed"}