{"url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2","repository_url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model","labels_url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2/comments","events_url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2/events","html_url":"https://github.com/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2","id":484515788,"node_id":"MDU6SXNzdWU0ODQ1MTU3ODg=","number":2,"title":"data read","user":{"login":"banchuangliangyue","id":32380996,"node_id":"MDQ6VXNlcjMyMzgwOTk2","avatar_url":"https://avatars.githubusercontent.com/u/32380996?v=4","gravatar_id":"","url":"https://api.github.com/users/banchuangliangyue","html_url":"https://github.com/banchuangliangyue","followers_url":"https://api.github.com/users/banchuangliangyue/followers","following_url":"https://api.github.com/users/banchuangliangyue/following{/other_user}","gists_url":"https://api.github.com/users/banchuangliangyue/gists{/gist_id}","starred_url":"https://api.github.com/users/banchuangliangyue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/banchuangliangyue/subscriptions","organizations_url":"https://api.github.com/users/banchuangliangyue/orgs","repos_url":"https://api.github.com/users/banchuangliangyue/repos","events_url":"https://api.github.com/users/banchuangliangyue/events{/privacy}","received_events_url":"https://api.github.com/users/banchuangliangyue/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-08-23T12:55:01Z","updated_at":"2020-10-16T01:23:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"First of all, thank you very much for your code! When I read your code, I found the process of generating ECG sequence in the original code is as follows.\r\n    Firstly, the heartbeat segmented by ECG records in the training set is stored into a two-dimensional\r\n array, then the heartbeats of each kind (one of N S V) are selected and shuffled to get three smaller\r\n two-dimensional arrays. Next, the three two-dimensional arrays are concatenated by rows to get a \r\nlarger two-dimensional array. Finally, the array is split into a sequence every max_time(the default is \r\n10) line.\r\n    So I would like to ask why you want to group all the heartbeats according to categories in advance?\r\n If you do this, the labels of each sequence are almost the same, and the heartbeats contained in each \r\nsequence are not split from the same record at all (due to shuffle). This seems very different from the\r\n actual situation, where the sequences should be composed of heartbeats from the same ECG record. \r\nI wonder if this is a hidden trick of data processing? Why do we do that? Thank you very much for your reply! Here are some of the code that puzzles me.\r\n   data = np.asarray(data)\r\n    shape_v = data.shape\r\n    data = np.reshape(data, [shape_v[0], -1])\r\n    t_lables = np.array(t_lables)\r\n    _data  = np.asarray([],dtype=np.float64).reshape(0,shape_v[1])\r\n    _labels = np.asarray([],dtype=np.dtype('|S1')).reshape(0,)\r\n    for cl in classes:\r\n        _label = np.where(t_lables == cl)\r\n        permute = np.random.permutation(len(_label[0]))\r\n        _label = _label[0][permute[:max_nlabel]]\r\n        _data = np.concatenate((_data, data[_label]))\r\n        _labels = np.concatenate((_labels, t_lables[_label]))\r\n\r\n    data = _data[:(len(_data)// max_time) * max_time, :]\r\n    _labels = _labels[:(len(_data) // max_time) * max_time]\r\n    data = [data[i:i + max_time] for i in range(0, len(data), max_time)]\r\n    labels = [_labels[i:i + max_time] for i in range(0, len(_labels), max_time)]\r\n    permute = np.random.permutation(len(labels))\r\n    data = np.asarray(data)\r\n    labels = np.asarray(labels)\r\n    data= data[permute]\r\n    labels = labels[permute]","closed_by":{"login":"banchuangliangyue","id":32380996,"node_id":"MDQ6VXNlcjMyMzgwOTk2","avatar_url":"https://avatars.githubusercontent.com/u/32380996?v=4","gravatar_id":"","url":"https://api.github.com/users/banchuangliangyue","html_url":"https://github.com/banchuangliangyue","followers_url":"https://api.github.com/users/banchuangliangyue/followers","following_url":"https://api.github.com/users/banchuangliangyue/following{/other_user}","gists_url":"https://api.github.com/users/banchuangliangyue/gists{/gist_id}","starred_url":"https://api.github.com/users/banchuangliangyue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/banchuangliangyue/subscriptions","organizations_url":"https://api.github.com/users/banchuangliangyue/orgs","repos_url":"https://api.github.com/users/banchuangliangyue/repos","events_url":"https://api.github.com/users/banchuangliangyue/events{/privacy}","received_events_url":"https://api.github.com/users/banchuangliangyue/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/MousaviSajad/ECG-Heartbeat-Classification-seq2seq-model/issues/2/timeline","performed_via_github_app":null,"state_reason":null}