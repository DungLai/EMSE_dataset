[{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508603403","html_url":"https://github.com/xiongma/transformer-pointer-generator/issues/7#issuecomment-508603403","issue_url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/7","id":508603403,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODYwMzQwMw==","user":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T01:46:47Z","updated_at":"2019-07-05T01:46:47Z","author_association":"OWNER","body":"first question: second is target sentence length or it can say as timestep, just like this [batch_size, timestep, timestep], the element of attn_dists is attention of every time_step for every sample in this batch.\r\nsecond question: can u write more detail about this question, thx\r\nthird question: yes\r\nfourth: probability, shape [batch_size, timestep, vocab_size], every element is the probability of vocab.","reactions":{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508603403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508738699","html_url":"https://github.com/xiongma/transformer-pointer-generator/issues/7#issuecomment-508738699","issue_url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/7","id":508738699,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODczODY5OQ==","user":{"login":"yjyGo","id":39528655,"node_id":"MDQ6VXNlcjM5NTI4NjU1","avatar_url":"https://avatars.githubusercontent.com/u/39528655?v=4","gravatar_id":"","url":"https://api.github.com/users/yjyGo","html_url":"https://github.com/yjyGo","followers_url":"https://api.github.com/users/yjyGo/followers","following_url":"https://api.github.com/users/yjyGo/following{/other_user}","gists_url":"https://api.github.com/users/yjyGo/gists{/gist_id}","starred_url":"https://api.github.com/users/yjyGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjyGo/subscriptions","organizations_url":"https://api.github.com/users/yjyGo/orgs","repos_url":"https://api.github.com/users/yjyGo/repos","events_url":"https://api.github.com/users/yjyGo/events{/privacy}","received_events_url":"https://api.github.com/users/yjyGo/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T12:11:46Z","updated_at":"2019-07-05T12:19:15Z","author_association":"NONE","body":" @policeme  First, thank you so much for writing the nice coding. I want to add embedding matrix (obtained from vgae-variational graph auto encoder model) into attn_dists variable, but is hard, it cost me two weeks, I failed to get a good result finally). So I want to understand _calc_final_dist method deeply. Sorry to disturb you again,\r\nIn the first question I ever asked youï¼ŒI ever printed the shape about \"attn_dists\", but just get (?.?,?), and then I found the third dimension of attn_dists is source sequence length (When I ran program, I found from the error messages), maybe \"attn_dists\" shape is (batch_size, time_step, source sequence length).\r\nIn the fourth question: I made some changes, and found sometimes attn_dist_projected variable's second dimension(\"dec_t\") was 4330 larger than max_len,  vocab_dists's sencond dimesion is 4331, they should all be time_step yes ? Why not is time_step?","reactions":{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508738699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yjyGo","id":39528655,"node_id":"MDQ6VXNlcjM5NTI4NjU1","avatar_url":"https://avatars.githubusercontent.com/u/39528655?v=4","gravatar_id":"","url":"https://api.github.com/users/yjyGo","html_url":"https://github.com/yjyGo","followers_url":"https://api.github.com/users/yjyGo/followers","following_url":"https://api.github.com/users/yjyGo/following{/other_user}","gists_url":"https://api.github.com/users/yjyGo/gists{/gist_id}","starred_url":"https://api.github.com/users/yjyGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjyGo/subscriptions","organizations_url":"https://api.github.com/users/yjyGo/orgs","repos_url":"https://api.github.com/users/yjyGo/repos","events_url":"https://api.github.com/users/yjyGo/events{/privacy}","received_events_url":"https://api.github.com/users/yjyGo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508740391","html_url":"https://github.com/xiongma/transformer-pointer-generator/issues/7#issuecomment-508740391","issue_url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/7","id":508740391,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODc0MDM5MQ==","user":{"login":"yjyGo","id":39528655,"node_id":"MDQ6VXNlcjM5NTI4NjU1","avatar_url":"https://avatars.githubusercontent.com/u/39528655?v=4","gravatar_id":"","url":"https://api.github.com/users/yjyGo","html_url":"https://github.com/yjyGo","followers_url":"https://api.github.com/users/yjyGo/followers","following_url":"https://api.github.com/users/yjyGo/following{/other_user}","gists_url":"https://api.github.com/users/yjyGo/gists{/gist_id}","starred_url":"https://api.github.com/users/yjyGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjyGo/subscriptions","organizations_url":"https://api.github.com/users/yjyGo/orgs","repos_url":"https://api.github.com/users/yjyGo/repos","events_url":"https://api.github.com/users/yjyGo/events{/privacy}","received_events_url":"https://api.github.com/users/yjyGo/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T12:18:46Z","updated_at":"2019-07-05T12:18:46Z","author_association":"NONE","body":"  @policeme In the second question,  I just want to know why you modify dec_t's dimensions and x's dimensions in the _calc_final_dist(), you extend their's dimension in order to get the attn_dist_projected variable? ","reactions":{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508740391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yjyGo","id":39528655,"node_id":"MDQ6VXNlcjM5NTI4NjU1","avatar_url":"https://avatars.githubusercontent.com/u/39528655?v=4","gravatar_id":"","url":"https://api.github.com/users/yjyGo","html_url":"https://github.com/yjyGo","followers_url":"https://api.github.com/users/yjyGo/followers","following_url":"https://api.github.com/users/yjyGo/following{/other_user}","gists_url":"https://api.github.com/users/yjyGo/gists{/gist_id}","starred_url":"https://api.github.com/users/yjyGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjyGo/subscriptions","organizations_url":"https://api.github.com/users/yjyGo/orgs","repos_url":"https://api.github.com/users/yjyGo/repos","events_url":"https://api.github.com/users/yjyGo/events{/privacy}","received_events_url":"https://api.github.com/users/yjyGo/received_events","type":"User","site_admin":false}},{"id":2462591188,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ2MjU5MTE4OA==","url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/events/2462591188","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-05T12:18:46Z","performed_via_github_app":null},{"id":2462591189,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0NjI1OTExODk=","url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/events/2462591189","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-05T12:18:46Z","performed_via_github_app":null},{"id":2462592203,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ2MjU5MjIwMw==","url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/events/2462592203","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-05T12:19:15Z","performed_via_github_app":null},{"id":2462592204,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0NjI1OTIyMDQ=","url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/events/2462592204","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-05T12:19:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508890686","html_url":"https://github.com/xiongma/transformer-pointer-generator/issues/7#issuecomment-508890686","issue_url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/7","id":508890686,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODg5MDY4Ng==","user":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"created_at":"2019-07-06T02:29:28Z","updated_at":"2019-07-06T02:29:28Z","author_association":"OWNER","body":"for calc final dist, the x contain vocab index in vocab dict, the atten_dists contain probability of vocab, but in atten_dists, the index of probability is index of timestep, it should be index of vocab, so it should map to vocab probability into the vocab dict, like the [https://github.com/policeme/transformer-pointer-generator/blob/a9d113dec58dc6a2871f2fa8929feaabdc6c5017/model.py#L113](before calc final dist of vocab ),  so I use x to get the true index of vocab. u should this paper[https://arxiv.org/abs/1704.04368](Pointer) to understand deeper","reactions":{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508890686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508891071","html_url":"https://github.com/xiongma/transformer-pointer-generator/issues/7#issuecomment-508891071","issue_url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/7","id":508891071,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODg5MTA3MQ==","user":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"created_at":"2019-07-06T02:36:35Z","updated_at":"2019-07-06T02:36:35Z","author_association":"OWNER","body":"yes, the attn_dists shape is (batch_size, time_step, source sequence length).\r\nfor the fourth question, I think it should be max_len, because, in data_load, if the length of source, or length of abstract greater than maxlen1 or maxlen2, I will drop it. so, I think, the error could be from your code, check you code.","reactions":{"url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/comments/508891071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false}},{"id":2463739967,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ2MzczOTk2Nw==","url":"https://api.github.com/repos/xiongma/transformer-pointer-generator/issues/events/2463739967","actor":{"login":"xiongma","id":30991932,"node_id":"MDQ6VXNlcjMwOTkxOTMy","avatar_url":"https://avatars.githubusercontent.com/u/30991932?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongma","html_url":"https://github.com/xiongma","followers_url":"https://api.github.com/users/xiongma/followers","following_url":"https://api.github.com/users/xiongma/following{/other_user}","gists_url":"https://api.github.com/users/xiongma/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongma/subscriptions","organizations_url":"https://api.github.com/users/xiongma/orgs","repos_url":"https://api.github.com/users/xiongma/repos","events_url":"https://api.github.com/users/xiongma/events{/privacy}","received_events_url":"https://api.github.com/users/xiongma/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-06T02:36:39Z","state_reason":null,"performed_via_github_app":null}]