[{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/519738088","html_url":"https://github.com/nabeel-oz/qlik-py-tools/issues/41#issuecomment-519738088","issue_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/41","id":519738088,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTczODA4OA==","user":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false},"created_at":"2019-08-09T00:54:14Z","updated_at":"2019-08-09T00:58:53Z","author_association":"OWNER","body":"Hi Lachlan, \r\n\r\nDoes your container have any resource limitations? If it does it could be killed even while the system has enough resources.\r\n\r\nFor the SSE logs you can store them to a volume or a bind mount so you can view them after a container is lost. \r\n\r\n```\r\n# Store log files to a bind mount on the host machine\r\ndocker run -p 50055:50055 -it -v ~/Documents/logs:/qlik-py-tools/core/logs nabeeloz/qlik-py-tools\r\n```\r\n\r\nBut if it's a resource issue you'll need to investigate why the docker container was killed. Some help on that [here](https://stackoverflow.com/questions/38112968/how-to-know-the-reason-why-a-docker-container-exits).\r\n\r\nI tested the app by just running the association rules function on the full dataset. I left everything else to run via the attached QVD files. You can do this by changing line 5 in the section `Apriori Association Rules`:\r\n\r\n```\r\n// We use a condition to control if the SSE needs to be called or if we just use a QVD file from the last execution\r\nLET vApriori = 0;\r\n```\r\n\r\nUsing `docker stats` I saw a maximum memory usage of 238 MB while the function was being executed:\r\n![image](https://user-images.githubusercontent.com/21298843/62746410-c1261200-ba92-11e9-87a8-cc2d4bec12b1.png)\r\n\r\nThe load completed in 2mins and 28 secs:\r\n![image](https://user-images.githubusercontent.com/21298843/62746427-d13df180-ba92-11e9-9df6-4d62a315fd1e.png)\r\n","reactions":{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/519738088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/519780833","html_url":"https://github.com/nabeel-oz/qlik-py-tools/issues/41#issuecomment-519780833","issue_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/41","id":519780833,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTc4MDgzMw==","user":{"login":"lachlanwwells","id":26990992,"node_id":"MDQ6VXNlcjI2OTkwOTky","avatar_url":"https://avatars.githubusercontent.com/u/26990992?v=4","gravatar_id":"","url":"https://api.github.com/users/lachlanwwells","html_url":"https://github.com/lachlanwwells","followers_url":"https://api.github.com/users/lachlanwwells/followers","following_url":"https://api.github.com/users/lachlanwwells/following{/other_user}","gists_url":"https://api.github.com/users/lachlanwwells/gists{/gist_id}","starred_url":"https://api.github.com/users/lachlanwwells/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lachlanwwells/subscriptions","organizations_url":"https://api.github.com/users/lachlanwwells/orgs","repos_url":"https://api.github.com/users/lachlanwwells/repos","events_url":"https://api.github.com/users/lachlanwwells/events{/privacy}","received_events_url":"https://api.github.com/users/lachlanwwells/received_events","type":"User","site_admin":false},"created_at":"2019-08-09T05:13:30Z","updated_at":"2019-08-09T05:13:30Z","author_association":"NONE","body":"Hi Nabeel,\r\n\r\nThanks for the quick response!\r\nI have completed the steps as you mention and it works successfully when running only the Apriori function\r\nIt seems to only crash when running all the functions in the app (both NEF and Apriori)\r\n\r\nThe error message displayed in the console is:\r\n\r\n[libprotobuf FATAL google/protobuf/wire_format.cc:740] CHECK failed: (output->ByteCount()) == (expected_endpoint): : Protocol message serialized to a size different from what was originally expected.  Perhaps it was modified by another thread during serialization?\r\nterminate called after throwing an instance of 'google::protobuf::FatalException'\r\n  what():  CHECK failed: (output->ByteCount()) == (expected_endpoint): : Protocol message serialized to a size different from what was originally expected.  Perhaps it was modified by another thread during serialization?\r\n\r\nThe memory usage is similar to yours, 280mb","reactions":{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/519780833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lachlanwwells","id":26990992,"node_id":"MDQ6VXNlcjI2OTkwOTky","avatar_url":"https://avatars.githubusercontent.com/u/26990992?v=4","gravatar_id":"","url":"https://api.github.com/users/lachlanwwells","html_url":"https://github.com/lachlanwwells","followers_url":"https://api.github.com/users/lachlanwwells/followers","following_url":"https://api.github.com/users/lachlanwwells/following{/other_user}","gists_url":"https://api.github.com/users/lachlanwwells/gists{/gist_id}","starred_url":"https://api.github.com/users/lachlanwwells/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lachlanwwells/subscriptions","organizations_url":"https://api.github.com/users/lachlanwwells/orgs","repos_url":"https://api.github.com/users/lachlanwwells/repos","events_url":"https://api.github.com/users/lachlanwwells/events{/privacy}","received_events_url":"https://api.github.com/users/lachlanwwells/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/519881159","html_url":"https://github.com/nabeel-oz/qlik-py-tools/issues/41#issuecomment-519881159","issue_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/41","id":519881159,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTg4MTE1OQ==","user":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false},"created_at":"2019-08-09T11:15:03Z","updated_at":"2019-08-09T11:15:03Z","author_association":"OWNER","body":"Hi Lachlan, \r\n\r\nI just ran the app with all functions successfully, so I can't reproduce the issue on my Ubuntu VM. Running all the functions took up ~530MB of memory and the load ran for ~10 mins. \r\n\r\nThe error you are getting has to do with the gRPC protocol rather than a specific point of failure in one of the functions. So I can't guess at what's going wrong.\r\n\r\nFrom the SSE logs are you able to see at what point the crash occurs? Two of the functions have debugging turned off, but if you search for `debug=false` in the load script and change it to `debug=true` before you run the full load you should be able to trace exactly where things go awry.\r\n\r\nAlso, you may know this, but you should be able to get your killed container's ID with `docker ps -a` and then do a `docker inspect <container id>` to see if there is an exit code that helps.  ","reactions":{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/519881159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/548996826","html_url":"https://github.com/nabeel-oz/qlik-py-tools/issues/41#issuecomment-548996826","issue_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/41","id":548996826,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODk5NjgyNg==","user":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false},"created_at":"2019-11-02T01:21:03Z","updated_at":"2019-11-02T01:21:03Z","author_association":"OWNER","body":"Closing this issue as it has been inactive for ~3 months.","reactions":{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/comments/548996826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false}},{"id":2764839354,"node_id":"MDExOkNsb3NlZEV2ZW50Mjc2NDgzOTM1NA==","url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/events/2764839354","actor":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-11-02T01:21:03Z","state_reason":null,"performed_via_github_app":null}]