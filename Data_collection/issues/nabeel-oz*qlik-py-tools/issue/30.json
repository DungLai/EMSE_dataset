{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/30","repository_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools","labels_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/30/labels{/name}","comments_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/30/comments","events_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/30/events","html_url":"https://github.com/nabeel-oz/qlik-py-tools/issues/30","id":450132531,"node_id":"MDU6SXNzdWU0NTAxMzI1MzE=","number":30,"title":"Classification Modeling issue - logistic regression model: Connector reply error: grpc::StatusCode::UNKNOWN: 'Exception iterating responses: n_features must be integral, got '2' (<class 'str'>).'","user":{"login":"subash28kumar","id":49568152,"node_id":"MDQ6VXNlcjQ5NTY4MTUy","avatar_url":"https://avatars.githubusercontent.com/u/49568152?v=4","gravatar_id":"","url":"https://api.github.com/users/subash28kumar","html_url":"https://github.com/subash28kumar","followers_url":"https://api.github.com/users/subash28kumar/followers","following_url":"https://api.github.com/users/subash28kumar/following{/other_user}","gists_url":"https://api.github.com/users/subash28kumar/gists{/gist_id}","starred_url":"https://api.github.com/users/subash28kumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subash28kumar/subscriptions","organizations_url":"https://api.github.com/users/subash28kumar/orgs","repos_url":"https://api.github.com/users/subash28kumar/repos","events_url":"https://api.github.com/users/subash28kumar/events{/privacy}","received_events_url":"https://api.github.com/users/subash28kumar/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-05-30T05:08:32Z","updated_at":"2019-05-30T14:36:13Z","closed_at":"2019-05-30T14:36:12Z","author_association":"NONE","active_lock_reason":null,"body":"Hi Nabeel,\r\n\r\nHope you doing great, just tried to implement the actual sample data for Logistic regression model alone, but when tired fitting the data \r\nEXTENSION PyTools.sklearn_Fit(TEMP_SAMPLES{Model_Name, N_Features});\r\n\r\ngetting the below error\"\r\nThe following error occurred:\r\nConnector reply error: grpc::StatusCode::UNKNOWN: 'Exception iterating responses: n_features must be integral, got '2' (<class 'str'>).'\r\n\r\nNot sure, what am missing here, the actual data set is this, just thought to check with you.\r\n\r\nIRN | Paying_Regularly | Age | Gender | Marital_Status | Employment_Ind | Num_Dependents | Receive_Benefits_Ind | Receive_Alimony_Ind | Receive_Child_Support_Ind | Med_exp_ind | Incarceration_Ind\r\n2098 | Yes | 35 | M | Single | Yes | 0 | Yes | No | Yes | No | 0\r\n8765 | No | 46 | M | Single | Yes | 2 | Yes | No | Yes | Yes | 1\r\n4536 | Yes | 27 | F | Single | Yes | 0 | No | No | Yes | No | 0\r\n4219 | No | 65 | F | Single | No | 3 | No | No | Yes | Yes | 1\r\n7699 | No | 54 | F | Married | No | 2 | No | Yes | Yes | No | 1\r\n9123 | No | 44 | M | Married | No | 1 | No | Yes | No | No | 1\r\n5647 | No | 32 | F | Single | No | 0 | Yes | Yes | Yes | No | 0\r\n3189 | Yes | 65 | M | Married | Yes | 0 | Yes | Yes | No | No | 0\r\n6123 | No | 49 | M | Married | No | 3 | No | No | No | No | 1\r\n4912 | No | 37 | M | Married | No | 3 | No | No | No | No | 1\r\n5812 | Yes | 43 | F | Married | Yes | 0 | Yes | No | Yes | No | 0\r\n8213 | No | 58 | F | Married | No | 1 | No | No | Yes | Yes | 0\r\n5678 | No | 29 | M | Single | No | 2 | Yes | Yes | No | No | 1\r\n2987 | No | 36 | M | Single | No | 3 | No | No | Yes | Yes | 1\r\n6219 | No | 47 | F | Married | No | 2 | No | Yes | Yes | No | 1\r\n6231 | Yes | 35 | F | Single | Yes | 0 | No | No | No | No | 0\r\n8812 | No | 54 | M | Married | No | 1 | No | No | No | No | 1\r\n7034 | No | 58 | M | Single | No | 2 | No | No | No | Yes | 0\r\n8518 | No | 42 | F | Single | No | 1 | No | No | Yes | No | 1\r\n4745 | No | 31 | M | Single | No | 0 | No | Yes | No | No | 1\r\n\r\n[Estimators]:\r\nLOAD * INLINE \r\n[\r\nModel Name;Estimator;Hyperparameters\r\nHR-Attrition-LR;LogisticRegression;\r\n](delimiter is ';');\r\n\r\n[Scaler]:\r\nLOAD\r\n\t[Scaler],\r\n\t[Null Value Handling],\r\n\t[Scale Hashed Features],\r\n\t[Hyperparameters] AS [Scaler.Hyperparameters];\r\nLOAD * INLINE \r\n[\r\nScaler;Null Value Handling;Scale Hashed Features;Hyperparameters\r\nStandardScaler;zeros;true;with_mean=True|bool, with_std=True|bool\r\n](delimiter is ';');\r\n\r\n[Feature Definitions]:\r\nLOAD\r\n    Name,\r\n    Variable_Type,\r\n    Data_Type,\r\n    Feature_Strategy,\r\n    Hash_Features\r\nFROM [lib://Feature Definitions/SampleDataforPrediction_V1.1 (1).xlsx]\r\n(ooxml, embedded labels, table is Feature_Definitions);\r\n\r\n[Train-Test]:\r\nLOAD\r\n    IRN,\r\n    \"Paying_Regularly\",\r\n    \"Age\",\r\n    Gender,\r\n    Marital_Status,\r\n    Employment_Ind,\r\n    Num_Dependents,\r\n    Receive_Benefits_Ind,\r\n    Receive_Alimony_Ind,\r\n    Receive_Child_Support_Ind,\r\n    Med_exp_ind,\r\n    Incarceration_Ind\r\nFROM [lib://Feature Definitions/SampleDataforPrediction_V1.1 (1).xlsx]\r\n(ooxml, embedded labels, table is LR_Classification_Results_1);\r\n\r\n\r\n// Set up a variable for the scaler parameters\r\nLET vScalerArgs = 'scaler=' & peek('Scaler', 0, 'Scaler') & ',' & \r\n\t\t\t\t\t'missing=' & peek('Null Value Handling', 0, 'Scaler') & ',' & \r\n                    'scale_hashed=' & peek('Scale Hashed Features', 0, 'Scaler') & ',' & \r\n                    peek('Scaler.Hyperparameters', 0, 'Scaler');\r\n                    \r\n\r\n// Set up a variable for execution parameters\r\nLET vExecutionArgs = 'overwrite=true,test_size=0.3,calculate_importances=true';\r\n\r\nLET i = 0;\r\n\r\n// Create a model for each estimator\r\nFor Each vModel in FieldValueList('Model Name')\r\n    \r\n    // Set up a variable for this estimator's parameters\r\n    LET vEstimatorArgs = 'estimator=' & peek('Estimator', $(i), 'Estimators') & ',' & peek('Hyperparameters', $(i), 'Estimators');\r\n    \r\n    // Set up a temporary table for the model parameters\r\n    [MODEL_INIT]:\r\n    LOAD\r\n        [Model Name] as Model_Name,\r\n        '$(vEstimatorArgs)' as EstimatorArgs,\r\n        '$(vScalerArgs)' as ScalerArgs,\r\n        '$(vExecutionArgs)' as ExecutionArgs    \r\n    RESIDENT Estimators\r\n    WHERE [Model Name] = '$(vModel)';\r\n    \r\n    // Use the LOAD...EXTENSION syntax to call the Setup function\r\n    [Result-Setup]:\r\n    LOAD\r\n        model_name,\r\n        result,\r\n        timestamp\r\n    EXTENSION PyTools.sklearn_Setup(MODEL_INIT{Model_Name, EstimatorArgs, ScalerArgs, ExecutionArgs});\r\n    \r\n    [FEATURES]:\r\n    LOAD\r\n    \t'$(vModel)' as Model_Name,\r\n        Name,\r\n        Variable_Type,\r\n        Data_Type,\r\n        Feature_Strategy,\r\n        Hash_Features\r\n    RESIDENT [Feature Definitions];\r\n    \r\n    // Use the LOAD...EXTENSION syntax to call the Set_Features function\r\n    [Result-Setup]:\r\n    LOAD\r\n        model_name,\r\n        result,\r\n        timestamp\r\n    EXTENSION PyTools.sklearn_Set_Features(FEATURES{Model_Name, Name, Variable_Type, Data_Type, Feature_Strategy, Hash_Features});\r\n\r\n    Drop table MODEL_INIT, FEATURES;   \r\n    \r\n    LET i = $(i) + 1;\r\n  \r\nNext vModel;\r\n\r\n\r\n[TEMP_TRAIN_TEST]:\r\nLOAD\r\nIRN &'|'&\r\nPaying_Regularly &'|'&\r\nAge &'|'&\r\nGender &'|'&\r\nMarital_Status &'|'&\r\nEmployment_Ind &'|'&\r\nNum_Dependents &'|'&\r\nReceive_Benefits_Ind &'|'&\r\nReceive_Alimony_Ind &'|'&\r\nReceive_Child_Support_Ind &'|'&\r\nMed_exp_ind &'|'&\r\nIncarceration_Ind As N_Features\r\nRESIDENT [Train-Test];\r\n\r\nLET i = 0;\r\n\r\n// Train and Test each model\r\nFor Each vModel in FieldValueList('Model Name')\r\n\r\n    [TEMP_SAMPLES]:\r\n    LOAD\r\n    \t'$(vModel)' as Model_Name,\r\n        N_Features\r\n    RESIDENT [TEMP_TRAIN_TEST];\r\n    \r\n    // Use the LOAD...EXTENSION syntax to call the Fit function\r\n    [Result-Fit]:\r\n    LOAD\r\n        model_name,\r\n        result as fit_result, \r\n        time_stamp as fit_timestamp, \r\n        score_result, \r\n        score\r\n    EXTENSION PyTools.sklearn_Fit(TEMP_SAMPLES{Model_Name, N_Features});","closed_by":{"login":"subash28kumar","id":49568152,"node_id":"MDQ6VXNlcjQ5NTY4MTUy","avatar_url":"https://avatars.githubusercontent.com/u/49568152?v=4","gravatar_id":"","url":"https://api.github.com/users/subash28kumar","html_url":"https://github.com/subash28kumar","followers_url":"https://api.github.com/users/subash28kumar/followers","following_url":"https://api.github.com/users/subash28kumar/following{/other_user}","gists_url":"https://api.github.com/users/subash28kumar/gists{/gist_id}","starred_url":"https://api.github.com/users/subash28kumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subash28kumar/subscriptions","organizations_url":"https://api.github.com/users/subash28kumar/orgs","repos_url":"https://api.github.com/users/subash28kumar/repos","events_url":"https://api.github.com/users/subash28kumar/events{/privacy}","received_events_url":"https://api.github.com/users/subash28kumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/30/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/30/timeline","performed_via_github_app":null,"state_reason":"completed"}