{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/77","repository_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools","labels_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/77/labels{/name}","comments_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/77/comments","events_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/77/events","html_url":"https://github.com/nabeel-oz/qlik-py-tools/issues/77","id":536656070,"node_id":"MDU6SXNzdWU1MzY2NTYwNzA=","number":77,"title":"Breaking change for Prophet Weekly Seasonality","user":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false},"labels":[{"id":1644668256,"node_id":"MDU6TGFiZWwxNjQ0NjY4MjU2","url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/labels/usage%20exception","name":"usage exception","color":"f9bdc7","default":false,"description":"Exception during a SSE function call from Qlik"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2019-12-11T22:45:42Z","updated_at":"2019-12-23T20:49:43Z","closed_at":"2019-12-23T20:49:43Z","author_association":"OWNER","active_lock_reason":null,"body":"**Function**\r\nProphet_Seasonality\r\n\r\n**Describe the bug**\r\nRelease 6.0 included changes to the usage of the `Prophet_Seasonality` function when calculating Weekly seasonality (commit 72034a9024c4dc56666493f0b13266b19bc412c5). Expressions using this capability will stop working until the fix described below is applied.\r\n\r\n**Fix**\r\nThe weekly seasonality now requires the Weekday function to be used in the dimension and the measure. This change allows the result to always be returned in the correct order.\r\n\r\nThe documentation and sample app were updated to reflect the changes: https://github.com/nabeel-oz/qlik-py-tools/blob/master/docs/Prophet.md#seasonality\r\n\r\nIn short, you'll need to update the dimension for your chart to:\r\n\r\n```\r\nWeekday(FORECAST_DATE)\r\n```\r\n\r\nAnd the measure will be:\r\n\r\n```\r\nPyTools.Prophet_Seasonality(Max(Weekday(FORECAST_DATE)), $(vAccidentsByDate), '', 'freq=D, return=weekly, seasonality=weekly')\r\n```\r\n\r\n\r\n","closed_by":{"login":"nabeel-oz","id":21298843,"node_id":"MDQ6VXNlcjIxMjk4ODQz","avatar_url":"https://avatars.githubusercontent.com/u/21298843?v=4","gravatar_id":"","url":"https://api.github.com/users/nabeel-oz","html_url":"https://github.com/nabeel-oz","followers_url":"https://api.github.com/users/nabeel-oz/followers","following_url":"https://api.github.com/users/nabeel-oz/following{/other_user}","gists_url":"https://api.github.com/users/nabeel-oz/gists{/gist_id}","starred_url":"https://api.github.com/users/nabeel-oz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabeel-oz/subscriptions","organizations_url":"https://api.github.com/users/nabeel-oz/orgs","repos_url":"https://api.github.com/users/nabeel-oz/repos","events_url":"https://api.github.com/users/nabeel-oz/events{/privacy}","received_events_url":"https://api.github.com/users/nabeel-oz/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/77/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nabeel-oz/qlik-py-tools/issues/77/timeline","performed_via_github_app":null,"state_reason":"completed"}