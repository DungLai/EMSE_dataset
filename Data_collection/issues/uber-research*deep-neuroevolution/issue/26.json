{"url":"https://api.github.com/repos/uber-research/deep-neuroevolution/issues/26","repository_url":"https://api.github.com/repos/uber-research/deep-neuroevolution","labels_url":"https://api.github.com/repos/uber-research/deep-neuroevolution/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/uber-research/deep-neuroevolution/issues/26/comments","events_url":"https://api.github.com/repos/uber-research/deep-neuroevolution/issues/26/events","html_url":"https://github.com/uber-research/deep-neuroevolution/issues/26","id":451174220,"node_id":"MDU6SXNzdWU0NTExNzQyMjA=","number":26,"title":"how to run gpu_implementation on GPU","user":{"login":"ZaneH1992","id":38309495,"node_id":"MDQ6VXNlcjM4MzA5NDk1","avatar_url":"https://avatars.githubusercontent.com/u/38309495?v=4","gravatar_id":"","url":"https://api.github.com/users/ZaneH1992","html_url":"https://github.com/ZaneH1992","followers_url":"https://api.github.com/users/ZaneH1992/followers","following_url":"https://api.github.com/users/ZaneH1992/following{/other_user}","gists_url":"https://api.github.com/users/ZaneH1992/gists{/gist_id}","starred_url":"https://api.github.com/users/ZaneH1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZaneH1992/subscriptions","organizations_url":"https://api.github.com/users/ZaneH1992/orgs","repos_url":"https://api.github.com/users/ZaneH1992/repos","events_url":"https://api.github.com/users/ZaneH1992/events{/privacy}","received_events_url":"https://api.github.com/users/ZaneH1992/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-06-02T09:58:13Z","updated_at":"2019-10-05T16:02:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When I used nvidia 1080ti, I was able to compile gym_tensorflow.so and run the exp. The env is tensorflow-gpu 1.8.0 and cuda version is 9.0. But when I switch to 2080ti, the exp run into  trouble as follow:\r\n\r\n\r\n2019-06-02 18:03:10.727082: E tensorflow/stream_executor/cuda/cuda_blas.cc:654] failed to run cuBLAS routine cublasSgemmBatched: CUBLAS_STATUS_EXECUTION_FAILED\r\n2019-06-02 18:03:10.727109: E tensorflow/stream_executor/cuda/cuda_blas.cc:2413] Internal: failed BLAS call, see log for details\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1322, in _do_call\r\n    return fn(*args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1307, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1409, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InternalError: Blas xGEMMBatched launch failed : a.shape=[1,441,256], b.shape=[64,256,16], idx.shape=[1], m=441, n=16, k=256, batch_size=1\r\n         [[Node: model/Model/conv1/IndexedBatchMatMul = IndexedBatchMatMul[T=DT_FLOAT, adj_x=false, adj_y=false, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](model/Model/conv1/Reshape_2, model/Model/conv1/Reshape, _arg_model/Placeholder_0_0/_37)]]\r\n         [[Node: model/Identity_1/_59 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_210_model/Identity_1\", tensor_type=DT_BOOL, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/root/hz/deep-neuroevolution/gpu_implementation/neuroevolution/concurrent_worker.py\", line 94, in _loop\r\n    rews, is_done, _ = self.sess.run([self.rew_op, self.done_op, self.incr_counter], {self.placeholder_indices: indices})\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 900, in run\r\n    run_metadata_ptr)\r\n\r\n\r\n\r\nI tried to upgrade tensorflow-gpu  version to 1. 12,1.13, but under that env , gym_tensorflow.so could not be compiled. I also found a similar issue in [https://github.com/qqwweee/keras-yolo3/issues/332](url) , but still no luck after I take action to Install patchs for cuda9,\r\nI wonder if there is a solution.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/uber-research/deep-neuroevolution/issues/26/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/uber-research/deep-neuroevolution/issues/26/timeline","performed_via_github_app":null,"state_reason":null}