{"url":"https://api.github.com/repos/kororo/excelcy/issues/16","repository_url":"https://api.github.com/repos/kororo/excelcy","labels_url":"https://api.github.com/repos/kororo/excelcy/issues/16/labels{/name}","comments_url":"https://api.github.com/repos/kororo/excelcy/issues/16/comments","events_url":"https://api.github.com/repos/kororo/excelcy/issues/16/events","html_url":"https://github.com/kororo/excelcy/issues/16","id":661708771,"node_id":"MDU6SXNzdWU2NjE3MDg3NzE=","number":16,"title":"Custom Entities Overlapping with Pre defined Entities","user":{"login":"Parth09P","id":45395023,"node_id":"MDQ6VXNlcjQ1Mzk1MDIz","avatar_url":"https://avatars.githubusercontent.com/u/45395023?v=4","gravatar_id":"","url":"https://api.github.com/users/Parth09P","html_url":"https://github.com/Parth09P","followers_url":"https://api.github.com/users/Parth09P/followers","following_url":"https://api.github.com/users/Parth09P/following{/other_user}","gists_url":"https://api.github.com/users/Parth09P/gists{/gist_id}","starred_url":"https://api.github.com/users/Parth09P/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Parth09P/subscriptions","organizations_url":"https://api.github.com/users/Parth09P/orgs","repos_url":"https://api.github.com/users/Parth09P/repos","events_url":"https://api.github.com/users/Parth09P/events{/privacy}","received_events_url":"https://api.github.com/users/Parth09P/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-07-20T11:27:04Z","updated_at":"2020-08-23T10:59:07Z","closed_at":"2020-08-23T10:59:06Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to train a NER model using the given .xlsx sheet. This was working well before when the Spacy version was lower than 2.1.0. However, after upgrading to Spacy 2.3.3, I'm getting the following error:\r\n\r\nValueError: [E103] Trying to set conflicting doc.ents: '(0, 2, 'ORG')' and '(0, 2, 'Runbook')'. A token can only be part of one entity, so make sure the entities you're setting don't overlap.\r\n\r\n\r\nThe entire Traceback is as follows:\r\n\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-8-22706727b401> in <module>\r\n----> 1 excelcy = ExcelCy.execute(file_path='C:/Train17.xlsx')\r\n\r\n~\\Anaconda3\\envs\\Env1\\lib\\site-packages\\excelcy\\excelcy.py in execute(cls, file_path)\r\n     38             if phase.enabled:\r\n     39                 fno = getattr(excelcy, phase.fn)\r\n---> 40                 fno(**phase.args)\r\n     41 \r\n     42         return excelcy\r\n\r\n~\\Anaconda3\\envs\\Env1\\lib\\site-packages\\excelcy\\excelcy.py in prepare(self)\r\n    190             # identify sentences\r\n    191             for _, train in self.storage.train.items.items():\r\n--> 192                 self._prepare_parse(train=train)\r\n    193         return self\r\n    194 \r\n\r\n~\\Anaconda3\\envs\\Env1\\lib\\site-packages\\excelcy\\excelcy.py in _prepare_parse(self, train)\r\n    169     def _prepare_parse(self, train: Train):\r\n    170         # parsing pre-identified Entity based on current data model\r\n--> 171         doc = self.nlp(train.text)\r\n    172         for ent in doc.ents:\r\n    173             subtext, offset, label = ent.text, '%s,%s' % (ent.start_char, ent.end_char), ent.label_\r\n\r\n~\\Anaconda3\\envs\\Env1\\lib\\site-packages\\spacy\\language.py in __call__(self, text, disable, component_cfg)\r\n    444             if not hasattr(proc, \"__call__\"):\r\n    445                 raise ValueError(Errors.E003.format(component=type(proc), name=name))\r\n--> 446             doc = proc(doc, **component_cfg.get(name, {}))\r\n    447             if doc is None:\r\n    448                 raise ValueError(Errors.E005.format(name=name))\r\n\r\n~\\Anaconda3\\envs\\Env1\\lib\\site-packages\\excelcy\\pipe.py in __call__(self, doc)\r\n     75             # start add them into entities list\r\n     76             entity = (match_id, start, end)\r\n---> 77             doc.ents += (entity,)\r\n     78 \r\n     79         return doc\r\n\r\ndoc.pyx in spacy.tokens.doc.Doc.ents.__set__()\r\n\r\n\r\nAny ideas how I can workaround or bypass this one? Or maybe am I erring to input correct values? Suggestions would be greatly appreciated.","closed_by":{"login":"kororo","id":689528,"node_id":"MDQ6VXNlcjY4OTUyOA==","avatar_url":"https://avatars.githubusercontent.com/u/689528?v=4","gravatar_id":"","url":"https://api.github.com/users/kororo","html_url":"https://github.com/kororo","followers_url":"https://api.github.com/users/kororo/followers","following_url":"https://api.github.com/users/kororo/following{/other_user}","gists_url":"https://api.github.com/users/kororo/gists{/gist_id}","starred_url":"https://api.github.com/users/kororo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kororo/subscriptions","organizations_url":"https://api.github.com/users/kororo/orgs","repos_url":"https://api.github.com/users/kororo/repos","events_url":"https://api.github.com/users/kororo/events{/privacy}","received_events_url":"https://api.github.com/users/kororo/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/kororo/excelcy/issues/16/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/kororo/excelcy/issues/16/timeline","performed_via_github_app":null,"state_reason":"completed"}