{"url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/114","repository_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter","labels_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/114/labels{/name}","comments_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/114/comments","events_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/114/events","html_url":"https://github.com/HunterMcGushion/hyperparameter_hunter/issues/114","id":398119132,"node_id":"MDU6SXNzdWUzOTgxMTkxMzI=","number":114,"title":"AttributeError hashing `Metric` when `Environment.root_results_path` is None","user":{"login":"HunterMcGushion","id":11300915,"node_id":"MDQ6VXNlcjExMzAwOTE1","avatar_url":"https://avatars.githubusercontent.com/u/11300915?v=4","gravatar_id":"","url":"https://api.github.com/users/HunterMcGushion","html_url":"https://github.com/HunterMcGushion","followers_url":"https://api.github.com/users/HunterMcGushion/followers","following_url":"https://api.github.com/users/HunterMcGushion/following{/other_user}","gists_url":"https://api.github.com/users/HunterMcGushion/gists{/gist_id}","starred_url":"https://api.github.com/users/HunterMcGushion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HunterMcGushion/subscriptions","organizations_url":"https://api.github.com/users/HunterMcGushion/orgs","repos_url":"https://api.github.com/users/HunterMcGushion/repos","events_url":"https://api.github.com/users/HunterMcGushion/events{/privacy}","received_events_url":"https://api.github.com/users/HunterMcGushion/received_events","type":"User","site_admin":false},"labels":[{"id":951977098,"node_id":"MDU6TGFiZWw5NTE5NzcwOTg=","url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/labels/Bug","name":"Bug","color":"d73a4a","default":false,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-01-11T03:38:58Z","updated_at":"2019-01-11T08:11:50Z","closed_at":"2019-01-11T08:11:50Z","author_association":"OWNER","active_lock_reason":null,"body":"# Problem\r\n- `AttributeError: 'Metric' object has no attribute '__name__'` is raised when attempting to use an `Environment` with `root_results_path=None`\r\n- This is a problem because it disables using `Environment` without `root_results_path`, which needs to be allowed in order to run experiments without saving any result files\r\n\r\n# Code to reproduce error\r\n```python\r\nfrom hyperparameter_hunter import Environment, CVExperiment\r\nfrom hyperparameter_hunter.utils.learning_utils import get_breast_cancer_data\r\nfrom xgboost import XGBClassifier\r\n\r\nenv = Environment(\r\n        train_dataset=get_breast_cancer_data(target='target'),\r\n        # root_results_path=\"HyperparameterHunterAssets\",\r\n        metrics_map=[\"roc_auc_score\"],\r\n        cross_validation_params=dict(n_splits=5),\r\n)\r\n\r\nexp = CVExperiment(model_initializer=XGBClassifier, model_init_params=dict())\r\n```\r\n\r\n# Error traceback\r\n\r\n```\r\n'Metric' object has no attribute '__name__'\r\nTraceback (most recent call last):\r\n  File \"temp_hunter_trace.py\", line 42, in <module>\r\n    _execute()\r\n  File \"temp_hunter_trace.py\", line 27, in _execute\r\n    cross_validation_params=dict(n_splits=5),\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/environment.py\", line 395, in __init__\r\n    self.environment_workflow()\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/environment.py\", line 418, in environment_workflow\r\n    self.generate_cross_experiment_key()\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/environment.py\", line 614, in generate_cross_experiment_key\r\n    self.cross_experiment_key = CrossExperimentKeyMaker(parameters)\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 310, in __init__\r\n    KeyMaker.__init__(self, parameters, **kwargs)\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 104, in __init__\r\n    self.make_key()\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 256, in make_key\r\n    self.key = make_hash_sha256(self._filter_parameters_to_hash(deepcopy(self.parameters)))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 476, in make_hash_sha256\r\n    hasher.update(repr(to_hashable(obj, **kwargs)).encode())\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in to_hashable\r\n    return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in <genexpr>\r\n    return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in to_hashable\r\n    return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in <genexpr>\r\n    return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in to_hashable\r\n    return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in <genexpr>\r\n    return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 495, in to_hashable\r\n    return hash_callable(obj, **kwargs)\r\n  File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 555, in hash_callable\r\n    name = None if ignore_name else obj.__name__\r\nAttributeError: 'Metric' object has no attribute '__name__'\r\n```","closed_by":{"login":"HunterMcGushion","id":11300915,"node_id":"MDQ6VXNlcjExMzAwOTE1","avatar_url":"https://avatars.githubusercontent.com/u/11300915?v=4","gravatar_id":"","url":"https://api.github.com/users/HunterMcGushion","html_url":"https://github.com/HunterMcGushion","followers_url":"https://api.github.com/users/HunterMcGushion/followers","following_url":"https://api.github.com/users/HunterMcGushion/following{/other_user}","gists_url":"https://api.github.com/users/HunterMcGushion/gists{/gist_id}","starred_url":"https://api.github.com/users/HunterMcGushion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HunterMcGushion/subscriptions","organizations_url":"https://api.github.com/users/HunterMcGushion/orgs","repos_url":"https://api.github.com/users/HunterMcGushion/repos","events_url":"https://api.github.com/users/HunterMcGushion/events{/privacy}","received_events_url":"https://api.github.com/users/HunterMcGushion/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/114/timeline","performed_via_github_app":null,"state_reason":"completed"}