{"url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/191","repository_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter","labels_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/191/labels{/name}","comments_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/191/comments","events_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/191/events","html_url":"https://github.com/HunterMcGushion/hyperparameter_hunter/issues/191","id":491352510,"node_id":"MDU6SXNzdWU0OTEzNTI1MTA=","number":191,"title":"OSError: could not get source code","user":{"login":"jmrichardson","id":6565528,"node_id":"MDQ6VXNlcjY1NjU1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6565528?v=4","gravatar_id":"","url":"https://api.github.com/users/jmrichardson","html_url":"https://github.com/jmrichardson","followers_url":"https://api.github.com/users/jmrichardson/followers","following_url":"https://api.github.com/users/jmrichardson/following{/other_user}","gists_url":"https://api.github.com/users/jmrichardson/gists{/gist_id}","starred_url":"https://api.github.com/users/jmrichardson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmrichardson/subscriptions","organizations_url":"https://api.github.com/users/jmrichardson/orgs","repos_url":"https://api.github.com/users/jmrichardson/repos","events_url":"https://api.github.com/users/jmrichardson/events{/privacy}","received_events_url":"https://api.github.com/users/jmrichardson/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-09-09T22:14:40Z","updated_at":"2019-09-12T22:48:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI am getting the following error when trying to follow along this article: \r\n\r\nhttps://towardsdatascience.com/hyperparameter-hunter-feature-engineering-958966818b6e\r\n\r\n```\r\nexp_1 = CVExperiment(AdaBoostRegressor, feature_engineer=[euclidean_norm])\r\n<18:12:03> Uncaught exception!   OSError: could not get source code\r\nTraceback (most recent call last):\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\code.py\", line 91, in runcode\r\n    exec(code, self.locals)\r\n  File \"<input>\", line 1, in <module>\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\experiment_core.py\", line 165, in __call__\r\n    return super().__call__(*args, **kwargs)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\experiments.py\", line 752, in __init__\r\n    target_metric=target_metric,\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\experiments.py\", line 598, in __init__\r\n    target_metric=target_metric,\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\experiments.py\", line 251, in __init__\r\n    self.feature_engineer = FeatureEngineer(self.feature_engineer)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\feature_engineering.py\", line 915, in __init__\r\n    self.add_step(step)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\feature_engineering.py\", line 1024, in add_step\r\n    self._steps.append(self._to_step(step, stage=stage, name=name))\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\feature_engineering.py\", line 1051, in _to_step\r\n    return EngineerStep(step, name=name, stage=stage, do_validate=self.do_validate)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\feature_engineering.py\", line 508, in __init__\r\n    self.params = params\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\feature_engineering.py\", line 643, in params\r\n    self._params = value if value is not None else get_engineering_step_params(self.f)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\site-packages\\hyperparameter_hunter\\feature_engineering.py\", line 1170, in get_engineering_step_params\r\n    source_code = getsource(f)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\inspect.py\", line 973, in getsource\r\n    lines, lnum = getsourcelines(object)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\inspect.py\", line 955, in getsourcelines\r\n    lines, lnum = findsource(object)\r\n  File \"D:\\Anaconda3\\envs\\autoquant\\lib\\inspect.py\", line 786, in findsource\r\n    raise OSError('could not get source code')\r\nOSError: could not get source code\r\n```\r\n\r\nHere is the code:\r\n\r\n```\r\nfrom hyperparameter_hunter.utils.learning_utils import get_boston_data\r\nfrom hyperparameter_hunter import Environment, CVExperiment\r\nfrom sklearn.ensemble import AdaBoostRegressor\r\nfrom sklearn.model_selection import train_test_split\r\nimport numpy as np\r\nfrom sklearn.preprocessing import StandardScaler, QuantileTransformer\r\n\r\ndef standard_scale(train_inputs, non_train_inputs):\r\n    s = StandardScaler()\r\n    train_inputs[train_inputs.columns] = s.fit_transform(train_inputs.values)\r\n    non_train_inputs[train_inputs.columns] = s.transform(non_train_inputs.values)\r\n    return train_inputs, non_train_inputs\r\n\r\ndef euclidean_norm(all_inputs):\r\n    all_inputs[\"euclidean_norm\"] = all_inputs.agg(\r\n        lambda row: np.sqrt(np.sum([np.square(_) for _ in row])), axis=\"columns\",\r\n    )\r\n    return all_inputs\r\n\r\ndef quantile_transform(train_targets, non_train_targets):\r\n    t = QuantileTransformer(output_distribution=\"normal\", n_quantiles=100)\r\n    train_targets[train_targets.columns] = t.fit_transform(train_targets.values)\r\n    non_train_targets[train_targets.columns] = t.transform(non_train_targets.values)\r\n    return train_targets, non_train_targets, t\r\n\r\nenv = Environment(\r\n    train_dataset=get_boston_data(),\r\n    results_path=\"HyperparameterHunterAssets\",\r\n    holdout_dataset=lambda train, _: train_test_split(train, test_size=0.1, random_state=1),\r\n    target_column=\"DIS\",\r\n    metrics={\"mae\": \"median_absolute_error\"},\r\n    cv_type=\"KFold\",\r\n    cv_params=dict(n_splits=5, random_state=1),\r\n)\r\n\r\nexp_0 = CVExperiment(AdaBoostRegressor, model_init_params={})\r\n\r\nexp_1 = CVExperiment(AdaBoostRegressor, feature_engineer=[euclidean_norm])\r\n```\r\n\r\nCVExperiment exp_0 works but not exp_1\r\n\r\nThanks for any help.\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/191/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/HunterMcGushion/hyperparameter_hunter/issues/191/timeline","performed_via_github_app":null,"state_reason":null}