{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/26","repository_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras","labels_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/26/comments","events_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/26/events","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/26","id":454365099,"node_id":"MDU6SXNzdWU0NTQzNjUwOTk=","number":26,"title":"seq2seq confused with shape","user":{"login":"thomasyue","id":43042527,"node_id":"MDQ6VXNlcjQzMDQyNTI3","avatar_url":"https://avatars.githubusercontent.com/u/43042527?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasyue","html_url":"https://github.com/thomasyue","followers_url":"https://api.github.com/users/thomasyue/followers","following_url":"https://api.github.com/users/thomasyue/following{/other_user}","gists_url":"https://api.github.com/users/thomasyue/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasyue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasyue/subscriptions","organizations_url":"https://api.github.com/users/thomasyue/orgs","repos_url":"https://api.github.com/users/thomasyue/repos","events_url":"https://api.github.com/users/thomasyue/events{/privacy}","received_events_url":"https://api.github.com/users/thomasyue/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-06-10T20:47:11Z","updated_at":"2019-06-13T15:20:24Z","closed_at":"2019-06-13T15:20:24Z","author_association":"NONE","active_lock_reason":null,"body":"want to play around with the transformer, but I'm confused with shapes.\r\n\r\n`print(train[0])\r\n[  2   4   1 283  51 283 986   6 284   8 226 227   0   0   0   0   0   0\r\n   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0\r\n   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0\r\n   0   0   0]\r\n`\r\ntrain.shape is (1000, 57)\r\n\r\n```__________________________________________________________________________________________________\r\nLayer (type)                    Output Shape         Param #     Connected to                     \r\n==================================================================================================\r\ninput_1 (InputLayer)            (None, 57)           0                                            \r\n__________________________________________________________________________________________________\r\nembedding_2 (Embedding)         (None, 57, 300)      865200      input_1[0][0]                    \r\n__________________________________________________________________________________________________\r\ndense_1 (Dense)                 (None, 57, 300)      90000       embedding_2[0][0]                \r\n__________________________________________________________________________________________________\r\ndense_2 (Dense)                 (None, 57, 300)      90000       embedding_2[0][0]                \r\n__________________________________________________________________________________________________\r\nlambda_3 (Lambda)               (None, 57)           0           input_1[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_4 (Lambda)               (None, None, None)   0           dense_1[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_5 (Lambda)               (None, None, None)   0           dense_2[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_7 (Lambda)               (None, 57)           0           lambda_3[0][0]                   \r\n__________________________________________________________________________________________________\r\ninput_2 (InputLayer)            (None, 57)           0                                            \r\n__________________________________________________________________________________________________\r\nlambda_8 (Lambda)               (None, None, None)   0           lambda_4[0][0]                   \r\n                                                                 lambda_5[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_9 (Lambda)               (None, 57)           0           lambda_7[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_1 (Lambda)               (None, 56)           0           input_2[0][0]                    \r\n__________________________________________________________________________________________________\r\nadd_1 (Add)                     (None, None, None)   0           lambda_8[0][0]                   \r\n                                                                 lambda_9[0][0]                   \r\n__________________________________________________________________________________________________\r\nembedding_3 (Embedding)         (None, 56, 300)      865200      lambda_1[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_12 (Lambda)              (None, 56, 56)       0           lambda_1[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_13 (Lambda)              (None, None, None)   0           lambda_1[0][0]                   \r\n__________________________________________________________________________________________________\r\nactivation_1 (Activation)       (None, None, None)   0           add_1[0][0]                      \r\n__________________________________________________________________________________________________\r\ndense_3 (Dense)                 (None, 57, 300)      90000       embedding_2[0][0]                \r\n__________________________________________________________________________________________________\r\ndense_5 (Dense)                 (None, 56, 300)      90000       embedding_3[0][0]                \r\n__________________________________________________________________________________________________\r\ndense_6 (Dense)                 (None, 56, 300)      90000       embedding_3[0][0]                \r\n__________________________________________________________________________________________________\r\nlambda_14 (Lambda)              (None, 56, 56)       0           lambda_12[0][0]                  \r\n                                                                 lambda_13[0][0]                  \r\n__________________________________________________________________________________________________\r\ndropout_1 (Dropout)             (None, None, None)   0           activation_1[0][0]               \r\n__________________________________________________________________________________________________\r\nlambda_6 (Lambda)               (None, None, None)   0           dense_3[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_16 (Lambda)              (None, None, None)   0           dense_5[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_17 (Lambda)              (None, None, None)   0           dense_6[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_19 (Lambda)              (None, 56, 56)       0           lambda_14[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_10 (Lambda)              (None, None, None)   0           dropout_1[0][0]                  \r\n                                                                 lambda_6[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_20 (Lambda)              (None, None, None)   0           lambda_16[0][0]                  \r\n                                                                 lambda_17[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_21 (Lambda)              (None, 56, 56)       0           lambda_19[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_11 (Lambda)              (None, None, 300)    0           lambda_10[0][0]                  \r\n__________________________________________________________________________________________________\r\nadd_4 (Add)                     (None, None, None)   0           lambda_20[0][0]                  \r\n                                                                 lambda_21[0][0]                  \r\n__________________________________________________________________________________________________\r\ntime_distributed_1 (TimeDistrib (None, None, 300)    90300       lambda_11[0][0]                  \r\n__________________________________________________________________________________________________\r\nactivation_2 (Activation)       (None, None, None)   0           add_4[0][0]                      \r\n__________________________________________________________________________________________________\r\ndense_7 (Dense)                 (None, 56, 300)      90000       embedding_3[0][0]                \r\n__________________________________________________________________________________________________\r\ndropout_6 (Dropout)             (None, None, 300)    0           time_distributed_1[0][0]         \r\n__________________________________________________________________________________________________\r\ndropout_3 (Dropout)             (None, None, None)   0           activation_2[0][0]               \r\n__________________________________________________________________________________________________\r\nlambda_18 (Lambda)              (None, None, None)   0           dense_7[0][0]                    \r\n__________________________________________________________________________________________________\r\nadd_2 (Add)                     (None, None, 300)    0           embedding_2[0][0]                \r\n                                                                 dropout_6[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_22 (Lambda)              (None, None, None)   0           dropout_3[0][0]                  \r\n                                                                 lambda_18[0][0]                  \r\n__________________________________________________________________________________________________\r\nlayer_normalization_2 (LayerNor (None, None, 300)    600         add_2[0][0]                      \r\n__________________________________________________________________________________________________\r\nlambda_23 (Lambda)              (None, None, 300)    0           lambda_22[0][0]                  \r\n__________________________________________________________________________________________________\r\nconv1d_1 (Conv1D)               (None, None, 512)    154112      layer_normalization_2[0][0]      \r\n__________________________________________________________________________________________________\r\ntime_distributed_2 (TimeDistrib (None, None, 300)    90300       lambda_23[0][0]                  \r\n__________________________________________________________________________________________________\r\nconv1d_2 (Conv1D)               (None, None, 300)    153900      conv1d_1[0][0]                   \r\n__________________________________________________________________________________________________\r\ndropout_7 (Dropout)             (None, None, 300)    0           time_distributed_2[0][0]         \r\n__________________________________________________________________________________________________\r\ndropout_2 (Dropout)             (None, None, 300)    0           conv1d_2[0][0]                   \r\n__________________________________________________________________________________________________\r\nadd_5 (Add)                     (None, None, 300)    0           embedding_3[0][0]                \r\n                                                                 dropout_7[0][0]                  \r\n__________________________________________________________________________________________________\r\nadd_3 (Add)                     (None, None, 300)    0           dropout_2[0][0]                  \r\n                                                                 layer_normalization_2[0][0]      \r\n__________________________________________________________________________________________________\r\nlayer_normalization_4 (LayerNor (None, None, 300)    600         add_5[0][0]                      \r\n__________________________________________________________________________________________________\r\nlayer_normalization_1 (LayerNor (None, None, 300)    600         add_3[0][0]                      \r\n__________________________________________________________________________________________________\r\ndense_9 (Dense)                 (None, None, 300)    90000       layer_normalization_4[0][0]      \r\n__________________________________________________________________________________________________\r\ndense_10 (Dense)                (None, None, 300)    90000       layer_normalization_1[0][0]      \r\n__________________________________________________________________________________________________\r\nlambda_15 (Lambda)              (None, 56, 57)       0           lambda_1[0][0]                   \r\n                                                                 input_1[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_24 (Lambda)              (None, None, None)   0           dense_9[0][0]                    \r\n__________________________________________________________________________________________________\r\nlambda_25 (Lambda)              (None, None, None)   0           dense_10[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_27 (Lambda)              (None, 56, 57)       0           lambda_15[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_28 (Lambda)              (None, None, None)   0           lambda_24[0][0]                  \r\n                                                                 lambda_25[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_29 (Lambda)              (None, 56, 57)       0           lambda_27[0][0]                  \r\n__________________________________________________________________________________________________\r\nadd_6 (Add)                     (None, None, None)   0           lambda_28[0][0]                  \r\n                                                                 lambda_29[0][0]                  \r\n__________________________________________________________________________________________________\r\nactivation_3 (Activation)       (None, None, None)   0           add_6[0][0]                      \r\n__________________________________________________________________________________________________\r\ndense_11 (Dense)                (None, None, 300)    90000       layer_normalization_1[0][0]      \r\n__________________________________________________________________________________________________\r\ndropout_4 (Dropout)             (None, None, None)   0           activation_3[0][0]               \r\n__________________________________________________________________________________________________\r\nlambda_26 (Lambda)              (None, None, None)   0           dense_11[0][0]                   \r\n__________________________________________________________________________________________________\r\nlambda_30 (Lambda)              (None, None, None)   0           dropout_4[0][0]                  \r\n                                                                 lambda_26[0][0]                  \r\n__________________________________________________________________________________________________\r\nlambda_31 (Lambda)              (None, None, 300)    0           lambda_30[0][0]                  \r\n__________________________________________________________________________________________________\r\ntime_distributed_3 (TimeDistrib (None, None, 300)    90300       lambda_31[0][0]                  \r\n__________________________________________________________________________________________________\r\ndropout_8 (Dropout)             (None, None, 300)    0           time_distributed_3[0][0]         \r\n__________________________________________________________________________________________________\r\nadd_7 (Add)                     (None, None, 300)    0           layer_normalization_4[0][0]      \r\n                                                                 dropout_8[0][0]                  \r\n__________________________________________________________________________________________________\r\nlayer_normalization_5 (LayerNor (None, None, 300)    600         add_7[0][0]                      \r\n__________________________________________________________________________________________________\r\nconv1d_3 (Conv1D)               (None, None, 512)    154112      layer_normalization_5[0][0]      \r\n__________________________________________________________________________________________________\r\nconv1d_4 (Conv1D)               (None, None, 300)    153900      conv1d_3[0][0]                   \r\n__________________________________________________________________________________________________\r\ndropout_5 (Dropout)             (None, None, 300)    0           conv1d_4[0][0]                   \r\n__________________________________________________________________________________________________\r\nadd_8 (Add)                     (None, None, 300)    0           dropout_5[0][0]                  \r\n                                                                 layer_normalization_5[0][0]      \r\n__________________________________________________________________________________________________\r\nlayer_normalization_3 (LayerNor (None, None, 300)    600         add_8[0][0]                      \r\n__________________________________________________________________________________________________\r\ntime_distributed_4 (TimeDistrib (None, None, 57)     17100       layer_normalization_3[0][0]      \r\n==================================================================================================\r\nTotal params: 3,447,424\r\nTrainable params: 3,447,424\r\nNon-trainable params: 0\r\n__________________________________________________________________________________________________```\r\n\r\nI wanna input the train data and output the exact same sentence as input.\r\nhow do I do it?","closed_by":{"login":"thomasyue","id":43042527,"node_id":"MDQ6VXNlcjQzMDQyNTI3","avatar_url":"https://avatars.githubusercontent.com/u/43042527?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasyue","html_url":"https://github.com/thomasyue","followers_url":"https://api.github.com/users/thomasyue/followers","following_url":"https://api.github.com/users/thomasyue/following{/other_user}","gists_url":"https://api.github.com/users/thomasyue/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasyue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasyue/subscriptions","organizations_url":"https://api.github.com/users/thomasyue/orgs","repos_url":"https://api.github.com/users/thomasyue/repos","events_url":"https://api.github.com/users/thomasyue/events{/privacy}","received_events_url":"https://api.github.com/users/thomasyue/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/26/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/26/timeline","performed_via_github_app":null,"state_reason":"completed"}