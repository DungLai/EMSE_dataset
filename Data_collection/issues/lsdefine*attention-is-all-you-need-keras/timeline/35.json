[{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/621581123","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-621581123","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":621581123,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTU4MTEyMw==","user":{"login":"banayoyo","id":40681095,"node_id":"MDQ6VXNlcjQwNjgxMDk1","avatar_url":"https://avatars.githubusercontent.com/u/40681095?v=4","gravatar_id":"","url":"https://api.github.com/users/banayoyo","html_url":"https://github.com/banayoyo","followers_url":"https://api.github.com/users/banayoyo/followers","following_url":"https://api.github.com/users/banayoyo/following{/other_user}","gists_url":"https://api.github.com/users/banayoyo/gists{/gist_id}","starred_url":"https://api.github.com/users/banayoyo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/banayoyo/subscriptions","organizations_url":"https://api.github.com/users/banayoyo/orgs","repos_url":"https://api.github.com/users/banayoyo/repos","events_url":"https://api.github.com/users/banayoyo/events{/privacy}","received_events_url":"https://api.github.com/users/banayoyo/received_events","type":"User","site_admin":false},"created_at":"2020-04-30T02:49:37Z","updated_at":"2020-04-30T02:49:37Z","author_association":"NONE","body":"do u have solve it? I meet the same error","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/621581123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"banayoyo","id":40681095,"node_id":"MDQ6VXNlcjQwNjgxMDk1","avatar_url":"https://avatars.githubusercontent.com/u/40681095?v=4","gravatar_id":"","url":"https://api.github.com/users/banayoyo","html_url":"https://github.com/banayoyo","followers_url":"https://api.github.com/users/banayoyo/followers","following_url":"https://api.github.com/users/banayoyo/following{/other_user}","gists_url":"https://api.github.com/users/banayoyo/gists{/gist_id}","starred_url":"https://api.github.com/users/banayoyo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/banayoyo/subscriptions","organizations_url":"https://api.github.com/users/banayoyo/orgs","repos_url":"https://api.github.com/users/banayoyo/repos","events_url":"https://api.github.com/users/banayoyo/events{/privacy}","received_events_url":"https://api.github.com/users/banayoyo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/622361963","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-622361963","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":622361963,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjM2MTk2Mw==","user":{"login":"salihgunduz","id":38071762,"node_id":"MDQ6VXNlcjM4MDcxNzYy","avatar_url":"https://avatars.githubusercontent.com/u/38071762?v=4","gravatar_id":"","url":"https://api.github.com/users/salihgunduz","html_url":"https://github.com/salihgunduz","followers_url":"https://api.github.com/users/salihgunduz/followers","following_url":"https://api.github.com/users/salihgunduz/following{/other_user}","gists_url":"https://api.github.com/users/salihgunduz/gists{/gist_id}","starred_url":"https://api.github.com/users/salihgunduz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salihgunduz/subscriptions","organizations_url":"https://api.github.com/users/salihgunduz/orgs","repos_url":"https://api.github.com/users/salihgunduz/repos","events_url":"https://api.github.com/users/salihgunduz/events{/privacy}","received_events_url":"https://api.github.com/users/salihgunduz/received_events","type":"User","site_admin":false},"created_at":"2020-05-01T12:06:18Z","updated_at":"2020-05-01T12:06:18Z","author_association":"NONE","body":"no. not yet.\n\n\n30 Nis 2020 Per 05:49 tarihinde banayoyo <notifications@github.com> şunu\nyazdı:\n\n> do u have solve it? I meet the same error\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/Lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-621581123>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJCO3UTUC6DCCK6JFDUCP3TRPDRNBANCNFSM4LFUNUVQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/622361963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"salihgunduz","id":38071762,"node_id":"MDQ6VXNlcjM4MDcxNzYy","avatar_url":"https://avatars.githubusercontent.com/u/38071762?v=4","gravatar_id":"","url":"https://api.github.com/users/salihgunduz","html_url":"https://github.com/salihgunduz","followers_url":"https://api.github.com/users/salihgunduz/followers","following_url":"https://api.github.com/users/salihgunduz/following{/other_user}","gists_url":"https://api.github.com/users/salihgunduz/gists{/gist_id}","starred_url":"https://api.github.com/users/salihgunduz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salihgunduz/subscriptions","organizations_url":"https://api.github.com/users/salihgunduz/orgs","repos_url":"https://api.github.com/users/salihgunduz/repos","events_url":"https://api.github.com/users/salihgunduz/events{/privacy}","received_events_url":"https://api.github.com/users/salihgunduz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/918099403","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-918099403","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":918099403,"node_id":"IC_kwDOB3qKqc42uRXL","user":{"login":"WangLi2019Gt","id":57512982,"node_id":"MDQ6VXNlcjU3NTEyOTgy","avatar_url":"https://avatars.githubusercontent.com/u/57512982?v=4","gravatar_id":"","url":"https://api.github.com/users/WangLi2019Gt","html_url":"https://github.com/WangLi2019Gt","followers_url":"https://api.github.com/users/WangLi2019Gt/followers","following_url":"https://api.github.com/users/WangLi2019Gt/following{/other_user}","gists_url":"https://api.github.com/users/WangLi2019Gt/gists{/gist_id}","starred_url":"https://api.github.com/users/WangLi2019Gt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WangLi2019Gt/subscriptions","organizations_url":"https://api.github.com/users/WangLi2019Gt/orgs","repos_url":"https://api.github.com/users/WangLi2019Gt/repos","events_url":"https://api.github.com/users/WangLi2019Gt/events{/privacy}","received_events_url":"https://api.github.com/users/WangLi2019Gt/received_events","type":"User","site_admin":false},"created_at":"2021-09-13T11:27:45Z","updated_at":"2021-09-13T11:27:45Z","author_association":"NONE","body":"do u have solve it? I meet the same error","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/918099403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"WangLi2019Gt","id":57512982,"node_id":"MDQ6VXNlcjU3NTEyOTgy","avatar_url":"https://avatars.githubusercontent.com/u/57512982?v=4","gravatar_id":"","url":"https://api.github.com/users/WangLi2019Gt","html_url":"https://github.com/WangLi2019Gt","followers_url":"https://api.github.com/users/WangLi2019Gt/followers","following_url":"https://api.github.com/users/WangLi2019Gt/following{/other_user}","gists_url":"https://api.github.com/users/WangLi2019Gt/gists{/gist_id}","starred_url":"https://api.github.com/users/WangLi2019Gt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WangLi2019Gt/subscriptions","organizations_url":"https://api.github.com/users/WangLi2019Gt/orgs","repos_url":"https://api.github.com/users/WangLi2019Gt/repos","events_url":"https://api.github.com/users/WangLi2019Gt/events{/privacy}","received_events_url":"https://api.github.com/users/WangLi2019Gt/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/957074775","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-957074775","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":957074775,"node_id":"IC_kwDOB3qKqc45C81X","user":{"login":"xux1984-china","id":80081217,"node_id":"MDQ6VXNlcjgwMDgxMjE3","avatar_url":"https://avatars.githubusercontent.com/u/80081217?v=4","gravatar_id":"","url":"https://api.github.com/users/xux1984-china","html_url":"https://github.com/xux1984-china","followers_url":"https://api.github.com/users/xux1984-china/followers","following_url":"https://api.github.com/users/xux1984-china/following{/other_user}","gists_url":"https://api.github.com/users/xux1984-china/gists{/gist_id}","starred_url":"https://api.github.com/users/xux1984-china/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xux1984-china/subscriptions","organizations_url":"https://api.github.com/users/xux1984-china/orgs","repos_url":"https://api.github.com/users/xux1984-china/repos","events_url":"https://api.github.com/users/xux1984-china/events{/privacy}","received_events_url":"https://api.github.com/users/xux1984-china/received_events","type":"User","site_admin":false},"created_at":"2021-11-02T03:44:09Z","updated_at":"2021-11-02T03:44:09Z","author_association":"NONE","body":"do you solve the error,I have the same problem","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/957074775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xux1984-china","id":80081217,"node_id":"MDQ6VXNlcjgwMDgxMjE3","avatar_url":"https://avatars.githubusercontent.com/u/80081217?v=4","gravatar_id":"","url":"https://api.github.com/users/xux1984-china","html_url":"https://github.com/xux1984-china","followers_url":"https://api.github.com/users/xux1984-china/followers","following_url":"https://api.github.com/users/xux1984-china/following{/other_user}","gists_url":"https://api.github.com/users/xux1984-china/gists{/gist_id}","starred_url":"https://api.github.com/users/xux1984-china/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xux1984-china/subscriptions","organizations_url":"https://api.github.com/users/xux1984-china/orgs","repos_url":"https://api.github.com/users/xux1984-china/repos","events_url":"https://api.github.com/users/xux1984-china/events{/privacy}","received_events_url":"https://api.github.com/users/xux1984-china/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/957075698","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-957075698","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":957075698,"node_id":"IC_kwDOB3qKqc45C9Dy","user":{"login":"xux1984-china","id":80081217,"node_id":"MDQ6VXNlcjgwMDgxMjE3","avatar_url":"https://avatars.githubusercontent.com/u/80081217?v=4","gravatar_id":"","url":"https://api.github.com/users/xux1984-china","html_url":"https://github.com/xux1984-china","followers_url":"https://api.github.com/users/xux1984-china/followers","following_url":"https://api.github.com/users/xux1984-china/following{/other_user}","gists_url":"https://api.github.com/users/xux1984-china/gists{/gist_id}","starred_url":"https://api.github.com/users/xux1984-china/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xux1984-china/subscriptions","organizations_url":"https://api.github.com/users/xux1984-china/orgs","repos_url":"https://api.github.com/users/xux1984-china/repos","events_url":"https://api.github.com/users/xux1984-china/events{/privacy}","received_events_url":"https://api.github.com/users/xux1984-china/received_events","type":"User","site_admin":false},"created_at":"2021-11-02T03:46:34Z","updated_at":"2021-11-02T03:46:34Z","author_association":"NONE","body":"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\python.exe F:/reaserch/Dlearning/attention-is-all-you-need-keras-master/pinyin_main.py\r\n2021-11-02 11:35:20.786849: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cudart64_101.dll\r\nloading data/pinyin_word.txt\r\nseq 1 words: 198\r\nseq 2 words: 218\r\n2021-11-02 11:35:22.790685: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library nvcuda.dll\r\n2021-11-02 11:35:22.822934: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1716] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce RTX 2070 Super computeCapability: 7.5\r\ncoreClock: 1.38GHz coreCount: 40 deviceMemorySize: 8.00GiB deviceMemoryBandwidth: 417.29GiB/s\r\n2021-11-02 11:35:22.823133: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cudart64_101.dll\r\n2021-11-02 11:35:22.826677: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cublas64_10.dll\r\n2021-11-02 11:35:22.829716: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cufft64_10.dll\r\n2021-11-02 11:35:22.831096: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library curand64_10.dll\r\n2021-11-02 11:35:22.834603: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cusolver64_10.dll\r\n2021-11-02 11:35:22.836756: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cusparse64_10.dll\r\n2021-11-02 11:35:22.843372: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cudnn64_7.dll\r\n2021-11-02 11:35:22.843524: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1858] Adding visible gpu devices: 0\r\n2021-11-02 11:35:22.843780: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN)to use the following CPU instructions in performance-critical operations:  AVX2\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2021-11-02 11:35:22.850462: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x296289b0a10 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2021-11-02 11:35:22.850703: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2021-11-02 11:35:22.850868: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1716] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce RTX 2070 Super computeCapability: 7.5\r\ncoreClock: 1.38GHz coreCount: 40 deviceMemorySize: 8.00GiB deviceMemoryBandwidth: 417.29GiB/s\r\n2021-11-02 11:35:22.851063: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cudart64_101.dll\r\n2021-11-02 11:35:22.851157: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cublas64_10.dll\r\n2021-11-02 11:35:22.851249: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cufft64_10.dll\r\n2021-11-02 11:35:22.851343: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library curand64_10.dll\r\n2021-11-02 11:35:22.851436: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cusolver64_10.dll\r\n2021-11-02 11:35:22.851529: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cusparse64_10.dll\r\n2021-11-02 11:35:22.851621: I tensorflow/stream_executor/platform/default/dso_loader.cc:48] Successfully opened dynamic library cudnn64_7.dll\r\n2021-11-02 11:35:22.851731: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1858] Adding visible gpu devices: 0\r\n2021-11-02 11:35:23.321532: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1257] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2021-11-02 11:35:23.321709: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1263]      0 \r\n2021-11-02 11:35:23.321789: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1276] 0:   N \r\n2021-11-02 11:35:23.321964: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1402] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6613 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2070 Super, pci bus id: 0000:01:00.0, compute capability: 7.5)\r\n2021-11-02 11:35:23.324097: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x2964d88f920 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:\r\n2021-11-02 11:35:23.324220: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce RTX 2070 Super, Compute Capability 7.5\r\nTraceback (most recent call last):\r\n  File \"F:/reaserch/Dlearning/attention-is-all-you-need-keras-master/pinyin_main.py\", line 23, in <module>\r\n    s2s.compile(opt)\r\n  File \"F:\\reaserch\\Dlearning\\attention-is-all-you-need-keras-master\\transformer.py\", line 453, in compile\r\n    loss = get_loss(final_output, tgt_true)\r\n  File \"F:\\reaserch\\Dlearning\\attention-is-all-you-need-keras-master\\transformer.py\", line 441, in get_loss\r\n    loss = tf.nn.sparse_softmax_cross_entropy_with_logits(labels=y_true, logits=y_pred)\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\util\\dispatch.py\", line 201, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\ops\\nn_ops.py\", line 4176, in sparse_softmax_cross_entropy_with_logits_v2\r\n    labels=labels, logits=logits, name=name)\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\util\\dispatch.py\", line 201, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\ops\\nn_ops.py\", line 4108, in sparse_softmax_cross_entropy_with_logits\r\n    array_ops.shape(logits)[:-1]))\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\util\\dispatch.py\", line 201, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\ops\\check_ops.py\", line 671, in assert_equal\r\n    data, summarize, message, name)\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\ops\\check_ops.py\", line 335, in _binary_assert\r\n    if condition:\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 877, in __bool__\r\n    self._disallow_bool_casting()\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 490, in _disallow_bool_casting\r\n    self._disallow_in_graph_mode(\"using a `tf.Tensor` as a Python `bool`\")\r\n  File \"E:\\ProgramData\\Anaconda3\\envs\\Dlearning\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 479, in _disallow_in_graph_mode\r\n    \" this function with @tf.function.\".format(task))\r\ntensorflow.python.framework.errors_impl.OperatorNotAllowedInGraphError: using a `tf.Tensor` as a Python `bool` is not allowed in Graph execution. Use Eager execution or decorate this function with @tf.function.","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/957075698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xux1984-china","id":80081217,"node_id":"MDQ6VXNlcjgwMDgxMjE3","avatar_url":"https://avatars.githubusercontent.com/u/80081217?v=4","gravatar_id":"","url":"https://api.github.com/users/xux1984-china","html_url":"https://github.com/xux1984-china","followers_url":"https://api.github.com/users/xux1984-china/followers","following_url":"https://api.github.com/users/xux1984-china/following{/other_user}","gists_url":"https://api.github.com/users/xux1984-china/gists{/gist_id}","starred_url":"https://api.github.com/users/xux1984-china/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xux1984-china/subscriptions","organizations_url":"https://api.github.com/users/xux1984-china/orgs","repos_url":"https://api.github.com/users/xux1984-china/repos","events_url":"https://api.github.com/users/xux1984-china/events{/privacy}","received_events_url":"https://api.github.com/users/xux1984-china/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/967852299","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-967852299","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":967852299,"node_id":"IC_kwDOB3qKqc45sEEL","user":{"login":"yqw123","id":41365797,"node_id":"MDQ6VXNlcjQxMzY1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41365797?v=4","gravatar_id":"","url":"https://api.github.com/users/yqw123","html_url":"https://github.com/yqw123","followers_url":"https://api.github.com/users/yqw123/followers","following_url":"https://api.github.com/users/yqw123/following{/other_user}","gists_url":"https://api.github.com/users/yqw123/gists{/gist_id}","starred_url":"https://api.github.com/users/yqw123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqw123/subscriptions","organizations_url":"https://api.github.com/users/yqw123/orgs","repos_url":"https://api.github.com/users/yqw123/repos","events_url":"https://api.github.com/users/yqw123/events{/privacy}","received_events_url":"https://api.github.com/users/yqw123/received_events","type":"User","site_admin":false},"created_at":"2021-11-13T08:52:47Z","updated_at":"2021-11-13T08:52:47Z","author_association":"NONE","body":"I have the same error","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/967852299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yqw123","id":41365797,"node_id":"MDQ6VXNlcjQxMzY1Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/41365797?v=4","gravatar_id":"","url":"https://api.github.com/users/yqw123","html_url":"https://github.com/yqw123","followers_url":"https://api.github.com/users/yqw123/followers","following_url":"https://api.github.com/users/yqw123/following{/other_user}","gists_url":"https://api.github.com/users/yqw123/gists{/gist_id}","starred_url":"https://api.github.com/users/yqw123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqw123/subscriptions","organizations_url":"https://api.github.com/users/yqw123/orgs","repos_url":"https://api.github.com/users/yqw123/repos","events_url":"https://api.github.com/users/yqw123/events{/privacy}","received_events_url":"https://api.github.com/users/yqw123/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/968200656","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-968200656","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":968200656,"node_id":"IC_kwDOB3qKqc45tZHQ","user":{"login":"lsdefine","id":3377819,"node_id":"MDQ6VXNlcjMzNzc4MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3377819?v=4","gravatar_id":"","url":"https://api.github.com/users/lsdefine","html_url":"https://github.com/lsdefine","followers_url":"https://api.github.com/users/lsdefine/followers","following_url":"https://api.github.com/users/lsdefine/following{/other_user}","gists_url":"https://api.github.com/users/lsdefine/gists{/gist_id}","starred_url":"https://api.github.com/users/lsdefine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lsdefine/subscriptions","organizations_url":"https://api.github.com/users/lsdefine/orgs","repos_url":"https://api.github.com/users/lsdefine/repos","events_url":"https://api.github.com/users/lsdefine/events{/privacy}","received_events_url":"https://api.github.com/users/lsdefine/received_events","type":"User","site_admin":false},"created_at":"2021-11-14T03:47:39Z","updated_at":"2021-11-14T03:47:39Z","author_association":"OWNER","body":"I can run the code in tf=2.6.0. \r\nPlease provide the environments. \r\n\r\nOr using a lambda layer to package the tf function may help, like this:\r\ntransformer.py     453-457\r\n\t\t#loss = get_loss(final_output, tgt_true)\r\n\t\tloss = Lambda(lambda x:get_loss(x[0], x[1]))([final_output, tgt_true])\r\n\t\tself.ppl = K.exp(loss)\r\n\t\t#self.accu = get_accu(final_output, tgt_true)\r\n\t\tself.accu = Lambda(lambda x:get_accu(x[0], x[1]))([final_output, tgt_true])\r\n\r\nThis is also runable in my env. ","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/968200656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lsdefine","id":3377819,"node_id":"MDQ6VXNlcjMzNzc4MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3377819?v=4","gravatar_id":"","url":"https://api.github.com/users/lsdefine","html_url":"https://github.com/lsdefine","followers_url":"https://api.github.com/users/lsdefine/followers","following_url":"https://api.github.com/users/lsdefine/following{/other_user}","gists_url":"https://api.github.com/users/lsdefine/gists{/gist_id}","starred_url":"https://api.github.com/users/lsdefine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lsdefine/subscriptions","organizations_url":"https://api.github.com/users/lsdefine/orgs","repos_url":"https://api.github.com/users/lsdefine/repos","events_url":"https://api.github.com/users/lsdefine/events{/privacy}","received_events_url":"https://api.github.com/users/lsdefine/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/972993701","html_url":"https://github.com/lsdefine/attention-is-all-you-need-keras/issues/35#issuecomment-972993701","issue_url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/35","id":972993701,"node_id":"IC_kwDOB3qKqc45_rSl","user":{"login":"thibault-roux","id":59691321,"node_id":"MDQ6VXNlcjU5NjkxMzIx","avatar_url":"https://avatars.githubusercontent.com/u/59691321?v=4","gravatar_id":"","url":"https://api.github.com/users/thibault-roux","html_url":"https://github.com/thibault-roux","followers_url":"https://api.github.com/users/thibault-roux/followers","following_url":"https://api.github.com/users/thibault-roux/following{/other_user}","gists_url":"https://api.github.com/users/thibault-roux/gists{/gist_id}","starred_url":"https://api.github.com/users/thibault-roux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thibault-roux/subscriptions","organizations_url":"https://api.github.com/users/thibault-roux/orgs","repos_url":"https://api.github.com/users/thibault-roux/repos","events_url":"https://api.github.com/users/thibault-roux/events{/privacy}","received_events_url":"https://api.github.com/users/thibault-roux/received_events","type":"User","site_admin":false},"created_at":"2021-11-18T15:51:39Z","updated_at":"2021-11-18T15:51:39Z","author_association":"NONE","body":"I had the same problem but correct it by upgrading tensorflow to 2.7.0 :)","reactions":{"url":"https://api.github.com/repos/lsdefine/attention-is-all-you-need-keras/issues/comments/972993701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thibault-roux","id":59691321,"node_id":"MDQ6VXNlcjU5NjkxMzIx","avatar_url":"https://avatars.githubusercontent.com/u/59691321?v=4","gravatar_id":"","url":"https://api.github.com/users/thibault-roux","html_url":"https://github.com/thibault-roux","followers_url":"https://api.github.com/users/thibault-roux/followers","following_url":"https://api.github.com/users/thibault-roux/following{/other_user}","gists_url":"https://api.github.com/users/thibault-roux/gists{/gist_id}","starred_url":"https://api.github.com/users/thibault-roux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thibault-roux/subscriptions","organizations_url":"https://api.github.com/users/thibault-roux/orgs","repos_url":"https://api.github.com/users/thibault-roux/repos","events_url":"https://api.github.com/users/thibault-roux/events{/privacy}","received_events_url":"https://api.github.com/users/thibault-roux/received_events","type":"User","site_admin":false}}]