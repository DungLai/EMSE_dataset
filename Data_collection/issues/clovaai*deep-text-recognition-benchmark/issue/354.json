{"url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark/issues/354","repository_url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark","labels_url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark/issues/354/labels{/name}","comments_url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark/issues/354/comments","events_url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark/issues/354/events","html_url":"https://github.com/clovaai/deep-text-recognition-benchmark/issues/354","id":1298739439,"node_id":"I_kwDOCq7kDM5NaTDv","number":354,"title":"Confidence score with 'CTC' prediction","user":{"login":"rafaelagrc","id":78483081,"node_id":"MDQ6VXNlcjc4NDgzMDgx","avatar_url":"https://avatars.githubusercontent.com/u/78483081?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelagrc","html_url":"https://github.com/rafaelagrc","followers_url":"https://api.github.com/users/rafaelagrc/followers","following_url":"https://api.github.com/users/rafaelagrc/following{/other_user}","gists_url":"https://api.github.com/users/rafaelagrc/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelagrc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelagrc/subscriptions","organizations_url":"https://api.github.com/users/rafaelagrc/orgs","repos_url":"https://api.github.com/users/rafaelagrc/repos","events_url":"https://api.github.com/users/rafaelagrc/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelagrc/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-07-08T09:25:35Z","updated_at":"2022-07-08T09:27:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi. Does anyone know how to extract the confidence score of the prediction in a model trained with the 'CTC' module?\r\nI only found the example with 'Attn'  in this repo:\r\n\r\n```\r\nconfidence_score_list = []\r\nfor gt, pred, pred_max_prob in zip(labels, preds_str, preds_max_prob):\r\n    if 'Attn' in opt.Prediction:\r\n        gt = gt[:gt.find('[s]')]\r\n        pred_EOS = pred.find('[s]')\r\n        pred = pred[:pred_EOS]  # prune after \"end of sentence\" token ([s])\r\n        pred_max_prob = pred_max_prob[:pred_EOS]\r\n\r\n # calculate confidence score (= multiply of pred_max_prob)\r\ntry:\r\n    confidence_score = pred_max_prob.cumprod(dim=0)[-1]\r\nexcept:\r\n    confidence_score = 0  # for empty pred case, when prune after \"end of sentence\" token ([s])\r\nconfidence_score_list.append(confidence_score)\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark/issues/354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/clovaai/deep-text-recognition-benchmark/issues/354/timeline","performed_via_github_app":null,"state_reason":null}