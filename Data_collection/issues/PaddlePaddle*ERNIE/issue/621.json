{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/621","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/621/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/621/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/621/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/621","id":795761544,"node_id":"MDU6SXNzdWU3OTU3NjE1NDQ=","number":621,"title":"ERNIE-GEN无法安装","user":{"login":"Green-li","id":11475982,"node_id":"MDQ6VXNlcjExNDc1OTgy","avatar_url":"https://avatars.githubusercontent.com/u/11475982?v=4","gravatar_id":"","url":"https://api.github.com/users/Green-li","html_url":"https://github.com/Green-li","followers_url":"https://api.github.com/users/Green-li/followers","following_url":"https://api.github.com/users/Green-li/following{/other_user}","gists_url":"https://api.github.com/users/Green-li/gists{/gist_id}","starred_url":"https://api.github.com/users/Green-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Green-li/subscriptions","organizations_url":"https://api.github.com/users/Green-li/orgs","repos_url":"https://api.github.com/users/Green-li/repos","events_url":"https://api.github.com/users/Green-li/events{/privacy}","received_events_url":"https://api.github.com/users/Green-li/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-01-28T07:51:48Z","updated_at":"2021-04-10T20:13:38Z","closed_at":"2021-04-10T20:13:38Z","author_association":"NONE","active_lock_reason":null,"body":"更新之后，ERNIE-GEN就无法运行了。\r\n之前运行以下命令：\r\n在paddle1.8\r\n```\r\n!pip install --upgrade paddlehub\r\n!pip install paddle-ernie\r\n!hub install ernie_gen==1.0.2\r\n```\r\n然后代码：\r\n```\r\nimport paddlehub as hub\r\n\r\n# 加载ernie_gen模型\r\nmodule = hub.Module(name=\"ernie_gen\")\r\n```\r\n直接报错：\r\n```\r\n[2021-01-28 15:46:50,362] [    INFO] - Installing ernie_gen module\r\n---------------------------------------------------------------------------RuntimeError                              Traceback (most recent call last)~/.paddlehub/modules/ernie_gen/module.py in <module>\r\n     24 try:\r\n---> 25     from ernie.modeling_ernie import ErnieModelForGeneration\r\n     26     from ernie.tokenizing_ernie import ErnieTokenizer\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/ernie/__init__.py in <module>\r\n     22     raise RuntimeError('propeller 0.2 requires paddle 2.0+, got %s' %\r\n---> 23                        paddle.__version__)\r\n     24 \r\nRuntimeError: propeller 0.2 requires paddle 2.0+, got 1.8.4\r\nDuring handling of the above exception, another exception occurred:\r\nImportError                               Traceback (most recent call last)<ipython-input-6-7a5911e08702> in <module>\r\n      2 \r\n      3 # 加载ernie_gen模型\r\n----> 4 module = hub.Module(name=\"ernie_gen\")\r\n      5 \r\n      6 train_data_file = os.path.join(new_dataset_dir, \"lcsts_train_500k.txt\")\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/module.py in __new__(cls, name, directory, module_dir, version, **kwargs)\r\n    100             if name:\r\n    101                 module = cls.init_with_name(\r\n--> 102                     name=name, version=version, **kwargs)\r\n    103             elif directory:\r\n    104                 module = cls.init_with_directory(directory=directory, **kwargs)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/module.py in init_with_name(cls, name, version, **kwargs)\r\n    169         extra = {\"command\": \"install\"}\r\n    170         result, tips, module_dir = default_module_manager.install_module(\r\n--> 171             module_name=name, module_version=version, extra=extra)\r\n    172         if not result:\r\n    173             logger.error(tips)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/manager.py in install_module(self, module_name, module_dir, module_package, module_version, upgrade, extra)\r\n    125         with tmp_dir() as _dir:\r\n    126             if module_name:\r\n--> 127                 self.all_modules(update=True)\r\n    128                 module_info = self.modules_dict.get(module_name, None)\r\n    129                 if module_info:\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/manager.py in all_modules(self, update)\r\n    103                     shutil.move(sub_dir_path, new_sub_dir_path)\r\n    104                     sub_dir_path = new_sub_dir_path\r\n--> 105                 valid, info = self.check_module_valid(sub_dir_path)\r\n    106                 if valid:\r\n    107                     module_name = info['name']\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages/paddlehub/module/manager.py in check_module_valid(self, module_path)\r\n     70                     sys.path.insert(0, dirname)\r\n     71                     _module = importlib.import_module(\r\n---> 72                         \"{}.module\".format(basename))\r\n     73                     for _item, _cls in inspect.getmembers(\r\n     74                             _module, inspect.isclass):\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/__init__.py in import_module(name, package)\r\n    125                 break\r\n    126             level += 1\r\n--> 127     return _bootstrap._gcd_import(name[level:], package, level)\r\n    128 \r\n    129 \r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _gcd_import(name, package, level)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _find_and_load(name, import_)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _find_and_load_unlocked(name, import_)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _load_unlocked(spec)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap_external.py in exec_module(self, module)\r\n/opt/conda/envs/python35-paddle120-env/lib/python3.7/importlib/_bootstrap.py in _call_with_frames_removed(f, *args, **kwds)\r\n~/.paddlehub/modules/ernie_gen/module.py in <module>\r\n     28 except:\r\n     29     raise ImportError(\r\n---> 30         \"The module requires additional dependencies: ernie. You can install ernie via 'pip install paddle-ernie'\"\r\n     31     )\r\n     32 import paddlehub as hub\r\nImportError: The module requires additional dependencies: ernie. You can install ernie via 'pip install paddle-ernie'\r\n```\r\n这报错信息也是醉了，能再迷惑一些？？？\r\n版本更新，不兼容没关系，连以前的代码也用不了了，这是什么操作？\r\n这还是在baidu的AIStudio上有运行。\r\n\r\n在paddle2.0下就更别说了，根本连pip install都安装不了。","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/621/timeline","performed_via_github_app":null,"state_reason":"completed"}