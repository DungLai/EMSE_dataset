{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/183","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/183/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/183/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/183/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/183","id":462540212,"node_id":"MDU6SXNzdWU0NjI1NDAyMTI=","number":183,"title":"用ERINE训练自己的NER数据集时，F1和precision都是0","user":{"login":"SuMarsss","id":45394577,"node_id":"MDQ6VXNlcjQ1Mzk0NTc3","avatar_url":"https://avatars.githubusercontent.com/u/45394577?v=4","gravatar_id":"","url":"https://api.github.com/users/SuMarsss","html_url":"https://github.com/SuMarsss","followers_url":"https://api.github.com/users/SuMarsss/followers","following_url":"https://api.github.com/users/SuMarsss/following{/other_user}","gists_url":"https://api.github.com/users/SuMarsss/gists{/gist_id}","starred_url":"https://api.github.com/users/SuMarsss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SuMarsss/subscriptions","organizations_url":"https://api.github.com/users/SuMarsss/orgs","repos_url":"https://api.github.com/users/SuMarsss/repos","events_url":"https://api.github.com/users/SuMarsss/events{/privacy}","received_events_url":"https://api.github.com/users/SuMarsss/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-07-01T06:47:03Z","updated_at":"2020-05-28T11:52:51Z","closed_at":"2020-05-28T11:52:51Z","author_association":"NONE","active_lock_reason":null,"body":"跑测试的[msra_ner](https://ernie.bj.bcebos.com/task_data.tgz)可以跑通，f1能达到95，但是当我用ERINE跑自己的NER数据时，f1和precision都是0\r\n测试结果：\r\n> epoch: 6, progress: 5248/6144, step: 2580, loss: 0.269858, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 3.507191 steps/s\r\n> epoch: 6, progress: 5408/6144, step: 2590, loss: 0.245142, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 2.484499 steps/s\r\n> epoch: 6, progress: 5568/6144, step: 2600, loss: 0.295873, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 2.440172 steps/s\r\n> [dev evaluation] f1: 0.000000, precision: 0.000000, recall: 0.000000, elapsed time: 6.710833 s\r\n> [test evaluation] f1: 0.000000, precision: 0.000000, recall: 0.000000, elapsed time: 6.444398 s\r\n> epoch: 6, progress: 5728/6144, step: 2610, loss: 0.175324, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 0.579638 steps/s\r\n> epoch: 6, progress: 5888/6144, step: 2620, loss: 0.284426, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 3.364358 steps/s\r\n> epoch: 6, progress: 6048/6144, step: 2630, loss: 0.073127, f1: 0.000000, precision: 0.000000, recall: 0.000000, speed: 2.896042 steps/s\r\n\r\n我已经按照教程里的ner数据格式整理过自己的数据集了，字符之间的特殊符号也教程里的'\\x02'。\r\n以下是我的tsv数据还有label_map.json.\r\n\r\n> 胸\u0002部\u0002C\u0002T\u0002未\u0002见\u0002转\u0002移\u0002征\u0002象\tB-Radiology\u0002I-Radiology\u0002I-Radiology\u0002I-Radiology\u0002O\u0002O\u0002O\u0002O\u0002O\u0002O\r\n\r\n> {\r\n>   \"B-AnatomyPart\": 0,\r\n>   \"I-AnatomyPart\": 1,\r\n>   \"B-Diagnosis\": 2,\r\n>   \"I-Diagnosis\": 3,\r\n>   \"B-Drug\": 4,\r\n>   \"I-Drug\": 5,\r\n>   \"B-Lab\": 6,\r\n>   \"I-Lab\": 7,\r\n>   \"B-Procedure\": 8,\r\n>   \"I-Procedure\": 9,\r\n>   \"B-Radiology\": 10,\r\n>   \"I-Radiology\": 11,\r\n>   \"O\": 12\r\n> }\r\n\r\n![image](https://user-images.githubusercontent.com/45394577/60415826-e3647e80-9c0e-11e9-9b15-acef8dfbe1b5.png)\r\n![360截图18060115626665](https://user-images.githubusercontent.com/45394577/60415889-0c850f00-9c0f-11e9-8bc0-6333b7879aad.png)\r\n\r\n![image](https://user-images.githubusercontent.com/45394577/60415836-ebbcb980-9c0e-11e9-8dd4-60ea1f649509.png)\r\n\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/183/timeline","performed_via_github_app":null,"state_reason":"completed"}