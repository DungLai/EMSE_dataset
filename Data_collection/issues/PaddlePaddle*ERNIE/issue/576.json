{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/576","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/576/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/576/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/576/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/576","id":709677657,"node_id":"MDU6SXNzdWU3MDk2Nzc2NTc=","number":576,"title":"ERNIE-GAN迁移学习，无法读取自制数据集","user":{"login":"herb711","id":38155482,"node_id":"MDQ6VXNlcjM4MTU1NDgy","avatar_url":"https://avatars.githubusercontent.com/u/38155482?v=4","gravatar_id":"","url":"https://api.github.com/users/herb711","html_url":"https://github.com/herb711","followers_url":"https://api.github.com/users/herb711/followers","following_url":"https://api.github.com/users/herb711/following{/other_user}","gists_url":"https://api.github.com/users/herb711/gists{/gist_id}","starred_url":"https://api.github.com/users/herb711/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herb711/subscriptions","organizations_url":"https://api.github.com/users/herb711/orgs","repos_url":"https://api.github.com/users/herb711/repos","events_url":"https://api.github.com/users/herb711/events{/privacy}","received_events_url":"https://api.github.com/users/herb711/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-09-27T06:19:01Z","updated_at":"2020-10-16T12:57:35Z","closed_at":"2020-10-16T12:57:35Z","author_association":"NONE","active_lock_reason":null,"body":"在进行迁移学习时，使用官网的 NLPCC2016问答数据集 ，可以正常进行迁移学习\r\n\r\n但是使用同样格式的自制数据集，进行训练时，就会报错。（**特别强调**，自制数据集已经调整到用txt打开后从肉眼上看，和官网数据集一模一样）\r\n\r\n对比过自制数据集和# NLPCC2016问答数据集 的格式和区别。感觉没有不同。\r\n\r\n将 # NLPCC2016问答数据集 重新读入，再写成文件，也会报错。\r\n\r\n当然，这个不是ERNIE-GAN本身的问题。但是格式一致的文件。为什么，读取的时候，会有区别呢？希望帮忙答复。\r\n\r\n这是读写数据的代码（将NLPCC2016里的数据读出来，一点不改，然后写到新的文件里面去）\r\n```\r\ndef readdata(myfile, data_name):\r\n    with open(data_name, 'w', encoding='utf-8') as fw:\r\n        with open(myfile, 'r', encoding='utf-8') as f:\r\n            line = f.readline()\r\n            print(line)\r\n            while line:\r\n                fw.writelines(line)\r\n                line = f.readline()\r\n```\r\n\r\n这是自制数据集时的程序（也是用过直接读取文件的方法，但是也是不行）\r\n```\r\nimport json, random\r\nimport codecs\r\n\r\ndef makedata_zhongyi(json_dir, data_name):\r\n    with open(json_dir, 'r', encoding='UTF-8') as f:\r\n        train_datas = json.load(f)\r\n\r\n        with codecs.open(data_name, 'w', \"utf-8\") as f:\r\n            for data in train_datas:\r\n                for text in data['annotations']:\r\n                    Q = text['Q'].replace('\\n', '')\r\n                    A = text['A'].replace('\\n', '')         \r\n                    rows = '1' +'\\t'+ Q +'\\t'+ A +'\\n'\r\n                    f.writelines(rows.replace(' ', ''))\r\n```\r\n","closed_by":{"login":"herb711","id":38155482,"node_id":"MDQ6VXNlcjM4MTU1NDgy","avatar_url":"https://avatars.githubusercontent.com/u/38155482?v=4","gravatar_id":"","url":"https://api.github.com/users/herb711","html_url":"https://github.com/herb711","followers_url":"https://api.github.com/users/herb711/followers","following_url":"https://api.github.com/users/herb711/following{/other_user}","gists_url":"https://api.github.com/users/herb711/gists{/gist_id}","starred_url":"https://api.github.com/users/herb711/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herb711/subscriptions","organizations_url":"https://api.github.com/users/herb711/orgs","repos_url":"https://api.github.com/users/herb711/repos","events_url":"https://api.github.com/users/herb711/events{/privacy}","received_events_url":"https://api.github.com/users/herb711/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/576/timeline","performed_via_github_app":null,"state_reason":"completed"}