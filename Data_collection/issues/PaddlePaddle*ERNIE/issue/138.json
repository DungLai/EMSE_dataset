{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/138","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/138/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/138/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/138/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/138","id":445691805,"node_id":"MDU6SXNzdWU0NDU2OTE4MDU=","number":138,"title":"ERNIE 中finetuning遇到一个index out of range的问题","user":{"login":"fw339wj","id":7874954,"node_id":"MDQ6VXNlcjc4NzQ5NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/7874954?v=4","gravatar_id":"","url":"https://api.github.com/users/fw339wj","html_url":"https://github.com/fw339wj","followers_url":"https://api.github.com/users/fw339wj/followers","following_url":"https://api.github.com/users/fw339wj/following{/other_user}","gists_url":"https://api.github.com/users/fw339wj/gists{/gist_id}","starred_url":"https://api.github.com/users/fw339wj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fw339wj/subscriptions","organizations_url":"https://api.github.com/users/fw339wj/orgs","repos_url":"https://api.github.com/users/fw339wj/repos","events_url":"https://api.github.com/users/fw339wj/events{/privacy}","received_events_url":"https://api.github.com/users/fw339wj/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-05-18T08:05:22Z","updated_at":"2019-06-17T03:47:09Z","closed_at":"2019-06-17T03:47:09Z","author_association":"NONE","active_lock_reason":null,"body":"在finetuning的文件夹下面的classifier中，遇到一个这样的问题：\r\n\r\nTraceback (most recent call last):\r\n  File \"C:/Users/wxc/Desktop/NLP/NLPCC2019/LARK/ERNIE/run_classifier.py\", line 282, in <module>\r\n    main(args)\r\n  File \"C:/Users/wxc/Desktop/NLP/NLPCC2019/LARK/ERNIE/run_classifier.py\", line 202, in main\r\n    graph_vars, \"train\")\r\n  File \"C:\\Users\\wxc\\Desktop\\NLP\\NLPCC2019\\LARK\\ERNIE\\finetune\\classifier.py\", line 259, in evaluate\r\n    ret[\"learning_rate\"] = float(outputs[4][0])\r\nIndexError: list index out of range\r\nW0518 13:45:05.752697 14328 graph.h:204] WARN: After a series of passes, the current graph can be quite different from OriginProgram. So, please avoid using the `OriginProgram()` method!\r\nI0518 13:45:10.330855 14328 build_strategy.cc:285] SeqOnlyAllReduceOps:0, num_trainers:1\r\n\r\n\r\n代码如下：\r\n\r\n`def evaluate(exe, test_program, test_pyreader, graph_vars, eval_phase):\r\n    train_fetch_list = [\r\n        graph_vars[\"loss\"].name, graph_vars[\"accuracy\"].name,\r\n        graph_vars[\"num_seqs\"].name\r\n    ]\r\n\r\n    if eval_phase == \"train\":\r\n        if \"learning_rate\" in graph_vars:\r\n            train_fetch_list.append(graph_vars[\"learning_rate\"].name)\r\n        outputs = exe.run(fetch_list=train_fetch_list)\r\n        ret = {\"loss\": np.mean(outputs[0]), \"accuracy\": np.mean(outputs[1])}\r\n        print(\"outputs:\", outputs)\r\n\r\n        if \"learning_rate\" in graph_vars:\r\n            ret[\"learning_rate\"] = float(outputs[4][0])\r\n        return ret\r\n\r\n我认为 ret[\"learning_rate\"] = float(outputs[4][0])中应该outputs为[3][0],请确认。","closed_by":{"login":"tianxin1860","id":6829601,"node_id":"MDQ6VXNlcjY4Mjk2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6829601?v=4","gravatar_id":"","url":"https://api.github.com/users/tianxin1860","html_url":"https://github.com/tianxin1860","followers_url":"https://api.github.com/users/tianxin1860/followers","following_url":"https://api.github.com/users/tianxin1860/following{/other_user}","gists_url":"https://api.github.com/users/tianxin1860/gists{/gist_id}","starred_url":"https://api.github.com/users/tianxin1860/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tianxin1860/subscriptions","organizations_url":"https://api.github.com/users/tianxin1860/orgs","repos_url":"https://api.github.com/users/tianxin1860/repos","events_url":"https://api.github.com/users/tianxin1860/events{/privacy}","received_events_url":"https://api.github.com/users/tianxin1860/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/138/timeline","performed_via_github_app":null,"state_reason":"completed"}