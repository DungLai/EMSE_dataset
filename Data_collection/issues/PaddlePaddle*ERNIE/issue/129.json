{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/129","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/129/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/129/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/129/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/129","id":442225105,"node_id":"MDU6SXNzdWU0NDIyMjUxMDU=","number":129,"title":"用自己数据多卡做ERNIE语言模型任务的fine tune的时候，没有规律卡在某一步","user":{"login":"fyubang","id":25549892,"node_id":"MDQ6VXNlcjI1NTQ5ODky","avatar_url":"https://avatars.githubusercontent.com/u/25549892?v=4","gravatar_id":"","url":"https://api.github.com/users/fyubang","html_url":"https://github.com/fyubang","followers_url":"https://api.github.com/users/fyubang/followers","following_url":"https://api.github.com/users/fyubang/following{/other_user}","gists_url":"https://api.github.com/users/fyubang/gists{/gist_id}","starred_url":"https://api.github.com/users/fyubang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fyubang/subscriptions","organizations_url":"https://api.github.com/users/fyubang/orgs","repos_url":"https://api.github.com/users/fyubang/repos","events_url":"https://api.github.com/users/fyubang/events{/privacy}","received_events_url":"https://api.github.com/users/fyubang/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":{"login":"kuke","id":3064195,"node_id":"MDQ6VXNlcjMwNjQxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/3064195?v=4","gravatar_id":"","url":"https://api.github.com/users/kuke","html_url":"https://github.com/kuke","followers_url":"https://api.github.com/users/kuke/followers","following_url":"https://api.github.com/users/kuke/following{/other_user}","gists_url":"https://api.github.com/users/kuke/gists{/gist_id}","starred_url":"https://api.github.com/users/kuke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kuke/subscriptions","organizations_url":"https://api.github.com/users/kuke/orgs","repos_url":"https://api.github.com/users/kuke/repos","events_url":"https://api.github.com/users/kuke/events{/privacy}","received_events_url":"https://api.github.com/users/kuke/received_events","type":"User","site_admin":false},"assignees":[{"login":"kuke","id":3064195,"node_id":"MDQ6VXNlcjMwNjQxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/3064195?v=4","gravatar_id":"","url":"https://api.github.com/users/kuke","html_url":"https://github.com/kuke","followers_url":"https://api.github.com/users/kuke/followers","following_url":"https://api.github.com/users/kuke/following{/other_user}","gists_url":"https://api.github.com/users/kuke/gists{/gist_id}","starred_url":"https://api.github.com/users/kuke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kuke/subscriptions","organizations_url":"https://api.github.com/users/kuke/orgs","repos_url":"https://api.github.com/users/kuke/repos","events_url":"https://api.github.com/users/kuke/events{/privacy}","received_events_url":"https://api.github.com/users/kuke/received_events","type":"User","site_admin":false},{"login":"chengduoZH","id":30176695,"node_id":"MDQ6VXNlcjMwMTc2Njk1","avatar_url":"https://avatars.githubusercontent.com/u/30176695?v=4","gravatar_id":"","url":"https://api.github.com/users/chengduoZH","html_url":"https://github.com/chengduoZH","followers_url":"https://api.github.com/users/chengduoZH/followers","following_url":"https://api.github.com/users/chengduoZH/following{/other_user}","gists_url":"https://api.github.com/users/chengduoZH/gists{/gist_id}","starred_url":"https://api.github.com/users/chengduoZH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengduoZH/subscriptions","organizations_url":"https://api.github.com/users/chengduoZH/orgs","repos_url":"https://api.github.com/users/chengduoZH/repos","events_url":"https://api.github.com/users/chengduoZH/events{/privacy}","received_events_url":"https://api.github.com/users/chengduoZH/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-05-09T13:02:28Z","updated_at":"2020-05-28T12:52:59Z","closed_at":"2020-05-28T12:52:59Z","author_association":"NONE","active_lock_reason":null,"body":"多卡做ernie语言模型任务的fine tune的时候，经常遇到，运行到一定步数就卡住的情况，卡住的时候，多卡中的部分卡依旧100%，部分卡0%。并且卡的步数没有规律。同步并不报错，怀疑是nccl的问题。运行坏境是8卡p40。\r\n卡住时，gpu这样：\r\n<img width=\"523\" alt=\"github1\" src=\"https://user-images.githubusercontent.com/25549892/57455387-9a8eea00-729d-11e9-90f5-245652a1e218.png\">\r\n日志：\r\n<img width=\"1279\" alt=\"github2\" src=\"https://user-images.githubusercontent.com/25549892/57455393-9cf14400-729d-11e9-9971-5b9f57531147.png\">\r\n脚本的超参：\r\n![github3](https://user-images.githubusercontent.com/25549892/57455400-9f539e00-729d-11e9-8a3e-6f8eca5b8dd7.png)\r\n挺多人遇到类似问题的。\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/129/timeline","performed_via_github_app":null,"state_reason":"completed"}