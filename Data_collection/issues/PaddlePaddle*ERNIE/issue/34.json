{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/34","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/34/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/34/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/34/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/34","id":422059359,"node_id":"MDU6SXNzdWU0MjIwNTkzNTk=","number":34,"title":"运行run_ChnSentiCorp.sh报错","user":{"login":"MrRace","id":10300313,"node_id":"MDQ6VXNlcjEwMzAwMzEz","avatar_url":"https://avatars.githubusercontent.com/u/10300313?v=4","gravatar_id":"","url":"https://api.github.com/users/MrRace","html_url":"https://github.com/MrRace","followers_url":"https://api.github.com/users/MrRace/followers","following_url":"https://api.github.com/users/MrRace/following{/other_user}","gists_url":"https://api.github.com/users/MrRace/gists{/gist_id}","starred_url":"https://api.github.com/users/MrRace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrRace/subscriptions","organizations_url":"https://api.github.com/users/MrRace/orgs","repos_url":"https://api.github.com/users/MrRace/repos","events_url":"https://api.github.com/users/MrRace/events{/privacy}","received_events_url":"https://api.github.com/users/MrRace/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2019-03-18T06:39:05Z","updated_at":"2020-05-28T13:52:40Z","closed_at":"2020-05-28T13:52:40Z","author_association":"NONE","active_lock_reason":null,"body":"在下载完模型和任务数据之后，运行` bash script/run_ChnSentiCorp.sh`。之后报错如下：\r\n```\r\nTheoretical memory usage in training: 10522.327 - 11023.390 MB\r\nW0318 14:37:05.017385 13682 device_context.cc:263] Please NOTE: device: 0, CUDA Capability: 75, Driver API Version: 10.0, Runtime API Version: 9.0\r\nW0318 14:37:05.017417 13682 device_context.cc:271] device: 0, cuDNN Version: 7.0.\r\nLoad pretraining parameters from /home/lab/liujiepeng/Framework/LARK/ERNIE/model/model_data/params.\r\nTraceback (most recent call last):\r\n  File \"run_classifier.py\", line 283, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 204, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/parallel_executor.py\", line 303, in run\r\n    self.executor.run(fetch_list, fetch_var_name)\r\npaddle.fluid.core.EnforceNotMet: Invoke operator softmax error.\r\nPython Callstacks: \r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/framework.py\", line 1317, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/layer_helper.py\", line 56, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/venv_paddle/lib/python3.5/site-packages/paddle/fluid/layers/nn.py\", line 1788, in softmax\r\n    attrs={\"use_cudnn\": use_cudnn})\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 120, in scaled_dot_product_attention\r\n    weights = layers.softmax(product)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 148, in multi_head_attention\r\n    dropout_rate)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 274, in encoder_layer\r\n    name=name + '_multi_head_att')\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/transformer_encoder.py\", line 337, in encoder\r\n    name=name + '_layer_' + str(i))\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/ernie.py\", line 136, in _build_model\r\n    name='encoder')\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/model/ernie.py\", line 81, in __init__\r\n    self._build_model(src_ids, position_ids, sentence_ids, self_attn_mask)\r\n  File \"/home/lab/liujiepeng/Framework/LARK/ERNIE/finetune/classifier.py\", line 49, in create_model\r\n    use_fp16=args.use_fp16)\r\n  File \"run_classifier.py\", line 97, in main\r\n    ernie_config=ernie_config)\r\n  File \"run_classifier.py\", line 283, in <module>\r\n    main(args)\r\nC++ Callstacks: \r\nCUDNN_STATUS_EXECUTION_FAILED at [/paddle/paddle/fluid/operators/math/softmax.cu:56]\r\nPaddlePaddle Call Stacks: \r\n0       0x7fc944af6dbdp void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 365\r\n1       0x7fc944af7107p paddle::platform::EnforceNotMet::EnforceNotMet(std::string const&, char const*, int) + 87\r\n2       0x7fc94628bd8ep paddle::operators::math::SoftmaxCUDNNFunctor<float>::operator()(paddle::platform::CUDADeviceContext const&, paddle::framework::Tensor const*, paddle::framework::Tensor*) + 830\r\n3       0x7fc9450ec423p paddle::operators::SoftmaxCUDNNKernel<float>::Compute(paddle::framework::ExecutionContext const&) const + 595\r\n4       0x7fc9450ec4d3p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::SoftmaxCUDNNKernel<float>, paddle::operators::SoftmaxCUDNNKernel<double>, paddle::operators::SoftmaxCUDNNKernel<paddle::platform::float16> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n5       0x7fc946504c33p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 659\r\n6       0x7fc9465024a5p paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 341\r\n7       0x7fc94637881ap paddle::framework::details::ComputationOpHandle::RunImpl() + 250\r\n8       0x7fc946371ef6p paddle::framework::details::OpHandleBase::Run(bool) + 118\r\n9       0x7fc94630a10dp\r\n10      0x7fc94630ab0dp paddle::framework::details::ThreadedSSAGraphExecutor::RunOp(std::shared_ptr<paddle::framework::BlockingQueue<paddle::framework::details::VarHandleBase*> > const&, paddle::framework::details::OpHandleBase*) + 1309\r\n11      0x7fc94630c784p paddle::framework::details::ThreadedSSAGraphExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&) + 2324\r\n12      0x7fc94630380ap paddle::framework::details::ScopeBufferedSSAGraphExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&) + 394\r\n13      0x7fc944c31ca2p paddle::framework::ParallelExecutor::Run(std::vector<std::string, std::allocator<std::string> > const&, std::string const&) + 562\r\n14      0x7fc944ae712ep\r\n15      0x7fc944b21c4ep\r\n16            0x4ea137p PyCFunction_Call + 119\r\n17            0x53c176p PyEval_EvalFrameEx + 23030\r\n18            0x5401efp\r\n19            0x53b83fp PyEval_EvalFrameEx + 20671\r\n20            0x53b294p PyEval_EvalFrameEx + 19220\r\n21            0x53fc97p\r\n22            0x5409bfp PyEval_EvalCode + 31\r\n23            0x60cb42p\r\n24            0x60efeap PyRun_FileExFlags + 154\r\n25            0x60f7dcp PyRun_SimpleFileExFlags + 444\r\n26            0x640256p Py_Main + 1110\r\n27            0x4d0001p main + 225\r\n28      0x7fc976ec5830p __libc_start_main + 240\r\n29            0x5d6999p _start + 41\r\n```\r\n请问如何解决？谢谢！","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/34/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/34/timeline","performed_via_github_app":null,"state_reason":"completed"}