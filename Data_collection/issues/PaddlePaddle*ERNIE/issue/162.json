{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/162","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/162/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/162/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/162/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/162","id":454980739,"node_id":"MDU6SXNzdWU0NTQ5ODA3Mzk=","number":162,"title":"利用docker安裝paddle環境後跑bash script/pretrain.sh報錯","user":{"login":"karta282950","id":17952772,"node_id":"MDQ6VXNlcjE3OTUyNzcy","avatar_url":"https://avatars.githubusercontent.com/u/17952772?v=4","gravatar_id":"","url":"https://api.github.com/users/karta282950","html_url":"https://github.com/karta282950","followers_url":"https://api.github.com/users/karta282950/followers","following_url":"https://api.github.com/users/karta282950/following{/other_user}","gists_url":"https://api.github.com/users/karta282950/gists{/gist_id}","starred_url":"https://api.github.com/users/karta282950/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karta282950/subscriptions","organizations_url":"https://api.github.com/users/karta282950/orgs","repos_url":"https://api.github.com/users/karta282950/repos","events_url":"https://api.github.com/users/karta282950/events{/privacy}","received_events_url":"https://api.github.com/users/karta282950/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-06-12T02:18:37Z","updated_at":"2020-05-28T12:52:52Z","closed_at":"2020-05-28T12:52:52Z","author_association":"NONE","active_lock_reason":null,"body":"您好，第一次問問題，請大家多多指教；我運行bash script/pretrain.sh報錯，具體錯誤訊息如下:\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"./train.py\", line 357, in <module>\r\n    train(args)\r\n  File \"./train.py\", line 173, in train\r\n    pyreader_name='train_reader', ernie_config=ernie_config)\r\n  File \"./train.py\", line 66, in create_model\r\n    mask_label, mask_pos, labels)\r\n  File \"/paddle/pytorch/pytorch-pretrained-BERT-master/LARK/ERNIE/model/ernie.py\", line 168, in get_pretraining_output\r\n    mask_feat = fluid.layers.gather(input=reshaped_emb_out, index=mask_pos)\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/layers/nn.py\", line 5751, in gather\r\n    outputs={\"Out\": out})\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/layer_helper.py\", line 50, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/framework.py\", line 1207, in append_op\r\n    op = Operator(block=self, desc=op_desc, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/paddle/fluid/framework.py\", line 656, in __init__\r\n    self.desc.infer_shape(self.block.desc)\r\npaddle.fluid.core.EnforceNotMet:  at [/paddle/paddle/fluid/operators/gather_op.cc:34]\r\nPaddlePaddle Call Stacks:\r\n0       0x7fefc69a6d06p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 486\r\n1       0x7fefc6bbd335p paddle::operators::GatherOp::InferShape(paddle::framework::InferShapeContext*) const + 1365\r\n2       0x7fefc6a5ce56p paddle::framework::OpDesc::InferShape(paddle::framework::BlockDesc const&) const + 886\r\n3       0x7fefc6a09145p void pybind11::cpp_function::initialize<pybind11::cpp_function::initialize<void, paddle::framework::OpDesc, paddle::framework::BlockDesc const&, pybind11::name, pybind11::is_method, pybind11::sibling>(void (paddle::framework::OpDesc::*)(paddle::framework::BlockDesc const&) const, pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&)#1}, void, paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&, pybind11::name, pybind11::is_method, pybind11::sibling>(pybind11::cpp_function::initialize<void, paddle::framework::OpDesc, paddle::framework::BlockDesc const&, pybind11::name, pybind11::is_method, pybind11::sibling>(void (paddle::framework::OpDesc::*)(paddle::framework::BlockDesc const&) const, pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&)#1}&&, void (*)(paddle::framework::OpDesc const*, paddle::framework::BlockDesc const&), pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(pybind11::detail::function_call&)#3}::_FUN(pybind11::detail::function_call) + 213\r\n```\r\n安裝環境如下:\r\n```shell\r\ndocker安裝GPU版本的PaddlePaddle，cuda=9.0，cudnn=7，Paddle:1.1.0(後來升級為Paddle:1.3.1.post97)\r\n```\r\n想問看看如何解決?謝謝","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/162/timeline","performed_via_github_app":null,"state_reason":"completed"}