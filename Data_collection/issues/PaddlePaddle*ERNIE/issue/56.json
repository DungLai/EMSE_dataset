{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/56","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/56/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/56/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/56/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/56","id":423604450,"node_id":"MDU6SXNzdWU0MjM2MDQ0NTA=","number":56,"title":"使用CPU进行predict过程的问题","user":{"login":"XinLiu-cs","id":24541403,"node_id":"MDQ6VXNlcjI0NTQxNDAz","avatar_url":"https://avatars.githubusercontent.com/u/24541403?v=4","gravatar_id":"","url":"https://api.github.com/users/XinLiu-cs","html_url":"https://github.com/XinLiu-cs","followers_url":"https://api.github.com/users/XinLiu-cs/followers","following_url":"https://api.github.com/users/XinLiu-cs/following{/other_user}","gists_url":"https://api.github.com/users/XinLiu-cs/gists{/gist_id}","starred_url":"https://api.github.com/users/XinLiu-cs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XinLiu-cs/subscriptions","organizations_url":"https://api.github.com/users/XinLiu-cs/orgs","repos_url":"https://api.github.com/users/XinLiu-cs/repos","events_url":"https://api.github.com/users/XinLiu-cs/events{/privacy}","received_events_url":"https://api.github.com/users/XinLiu-cs/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-03-21T07:47:49Z","updated_at":"2019-03-28T08:39:17Z","closed_at":"2019-03-28T08:39:17Z","author_association":"NONE","active_lock_reason":null,"body":"用GPU进行了finetune过程的模型想用CPU进行推理是否还需要指定CUDA_VISIBLE_DEVICES，若不指定，将use_cuda设定为False后报错为：\r\n```\r\nTraceback (most recent call last):\r\n  File \"predict_classifier.py\", line 153, in <module>\r\n    main(args)\r\n  File \"predict_classifier.py\", line 104, in main\r\n    exe.run(predict_startup)\r\n  File \"/****/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 472, in run\r\n    self.executor.run(program.desc, scope, 0, True, True)\r\npaddle.fluid.core.EnforceNotMet: cudaGetDeviceCount failed in paddle::platform::GetCUDADeviceCount: no CUDA-capable device is detected at [/paddle/paddle/fluid/platform/gpu_info.cc:65]\r\n```\r\n若指定CUDA_VISIBLE_DEVICES，在预测过程中predict_pyreader直接抛出fluid.core.EOFException，不对数据进行处理。","closed_by":{"login":"tianxin1860","id":6829601,"node_id":"MDQ6VXNlcjY4Mjk2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/6829601?v=4","gravatar_id":"","url":"https://api.github.com/users/tianxin1860","html_url":"https://github.com/tianxin1860","followers_url":"https://api.github.com/users/tianxin1860/followers","following_url":"https://api.github.com/users/tianxin1860/following{/other_user}","gists_url":"https://api.github.com/users/tianxin1860/gists{/gist_id}","starred_url":"https://api.github.com/users/tianxin1860/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tianxin1860/subscriptions","organizations_url":"https://api.github.com/users/tianxin1860/orgs","repos_url":"https://api.github.com/users/tianxin1860/repos","events_url":"https://api.github.com/users/tianxin1860/events{/privacy}","received_events_url":"https://api.github.com/users/tianxin1860/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/56/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/56/timeline","performed_via_github_app":null,"state_reason":"completed"}