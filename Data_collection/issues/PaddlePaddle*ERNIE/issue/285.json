{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/285","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/285/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/285/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/285/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/285","id":481964546,"node_id":"MDU6SXNzdWU0ODE5NjQ1NDY=","number":285,"title":"运行时报错run_ChnSentiCorp.sh:  paddle.fluid.core_avx.EnforceNotMet: Invoke operator mul error.","user":{"login":"SSHLR","id":9816941,"node_id":"MDQ6VXNlcjk4MTY5NDE=","avatar_url":"https://avatars.githubusercontent.com/u/9816941?v=4","gravatar_id":"","url":"https://api.github.com/users/SSHLR","html_url":"https://github.com/SSHLR","followers_url":"https://api.github.com/users/SSHLR/followers","following_url":"https://api.github.com/users/SSHLR/following{/other_user}","gists_url":"https://api.github.com/users/SSHLR/gists{/gist_id}","starred_url":"https://api.github.com/users/SSHLR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SSHLR/subscriptions","organizations_url":"https://api.github.com/users/SSHLR/orgs","repos_url":"https://api.github.com/users/SSHLR/repos","events_url":"https://api.github.com/users/SSHLR/events{/privacy}","received_events_url":"https://api.github.com/users/SSHLR/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-08-18T07:41:07Z","updated_at":"2019-08-25T15:43:45Z","closed_at":"2019-08-25T15:43:45Z","author_association":"NONE","active_lock_reason":null,"body":"Traceback (most recent call last):\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\n  File \"run_classifier.py\", line 221, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 280, in run\r\n    return_numpy=return_numpy)\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 666, in run\r\n    return_numpy=return_numpy)\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 528, in _run_parallel\r\n    exe.run(fetch_var_names, fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: Invoke operator mul error.\r\n\r\nPython Callstacks:\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1771, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/data/home/user/anaconda3/lib/python3.6/site-packages/paddle/fluid/layers/nn.py\", line 334, in fc\r\n    \"y_num_col_dims\": 1})\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 60, in __compute_qkv\r\n    bias_attr=name + '_query_fc.b_0')\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 129, in multi_head_attention\r\n    q, k, v = __compute_qkv(queries, keys, values, n_head, d_key, d_value)\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 273, in encoder_layer\r\n    name=name + '_multi_head_att')\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/transformer_encoder.py\", line 336, in encoder\r\n    name=name + '_layer_' + str(i))\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/ernie.py\", line 165, in _build_model\r\n    name='encoder')\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/model/ernie.py\", line 93, in __init__\r\n    input_mask)\r\n  File \"/data/home/user/ERNIE/ERNIE-develop/finetune/classifier.py\", line 74, in create_model\r\n    use_fp16=args.use_fp16)\r\n  File \"run_classifier.py\", line 114, in main\r\n    is_regression=args.is_regression)\r\n  File \"run_classifier.py\", line 403, in <module>\r\n    main(args)\r\n\r\nC++ Callstacks:\r\nEnforce failed. Expected posix_memalign(&p, alignment, size) == 0, but received posix_memalign(&p, alignment, size):12 != 0:0.\r\nAlloc 524288000 error! at [/paddle/paddle/fluid/memory/detail/system_allocator.cc:57]\r\nPaddlePaddle Call Stacks:\r\n0       0x7f63d4c2db78p void paddle::platform::EnforceNotMet::Init<std::string>(std::string, char const*, int) + 360\r\n1       0x7f63d5ff7337p paddle::memory::detail::AlignedMalloc(unsigned long) + 295\r\n2       0x7f63d5ff75f7p paddle::memory::detail::CPUAllocator::Alloc(unsigned long*, unsigned long) + 39\r\n3       0x7f63d5ff4a0ap paddle::memory::detail::BuddyAllocator::RefillPool(unsigned long) + 58\r\n4       0x7f63d5ff521fp paddle::memory::detail::BuddyAllocator::Alloc(unsigned long) + 719\r\n5       0x7f63d5fd5f05p void* paddle::memory::legacy::Alloc<paddle::platform::CPUPlace>(paddle::platform::CPUPlace const&, unsigned long) + 181\r\n6       0x7f63d5fd6c35p paddle::memory::allocation::LegacyAllocator::AllocateImpl(unsigned long) + 405\r\n\r\n情感分类Finetuning时报错，机器配置较差，只用CPU  (6核， 32G内存)， 跑的1.0版本，这里报错是因为配置不够吗？可以通过设置降低参数把代码跑通吗？","closed_by":{"login":"zhanghan1992","id":40751364,"node_id":"MDQ6VXNlcjQwNzUxMzY0","avatar_url":"https://avatars.githubusercontent.com/u/40751364?v=4","gravatar_id":"","url":"https://api.github.com/users/zhanghan1992","html_url":"https://github.com/zhanghan1992","followers_url":"https://api.github.com/users/zhanghan1992/followers","following_url":"https://api.github.com/users/zhanghan1992/following{/other_user}","gists_url":"https://api.github.com/users/zhanghan1992/gists{/gist_id}","starred_url":"https://api.github.com/users/zhanghan1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhanghan1992/subscriptions","organizations_url":"https://api.github.com/users/zhanghan1992/orgs","repos_url":"https://api.github.com/users/zhanghan1992/repos","events_url":"https://api.github.com/users/zhanghan1992/events{/privacy}","received_events_url":"https://api.github.com/users/zhanghan1992/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/285/timeline","performed_via_github_app":null,"state_reason":"completed"}