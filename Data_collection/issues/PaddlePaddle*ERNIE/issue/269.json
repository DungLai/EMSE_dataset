{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/269","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/269/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/269/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/269/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/269","id":478037431,"node_id":"MDU6SXNzdWU0NzgwMzc0MzE=","number":269,"title":"paddle.fluid.core.EnforceNotMet: ptr_ should not be null","user":{"login":"liuguolian","id":29907880,"node_id":"MDQ6VXNlcjI5OTA3ODgw","avatar_url":"https://avatars.githubusercontent.com/u/29907880?v=4","gravatar_id":"","url":"https://api.github.com/users/liuguolian","html_url":"https://github.com/liuguolian","followers_url":"https://api.github.com/users/liuguolian/followers","following_url":"https://api.github.com/users/liuguolian/following{/other_user}","gists_url":"https://api.github.com/users/liuguolian/gists{/gist_id}","starred_url":"https://api.github.com/users/liuguolian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuguolian/subscriptions","organizations_url":"https://api.github.com/users/liuguolian/orgs","repos_url":"https://api.github.com/users/liuguolian/repos","events_url":"https://api.github.com/users/liuguolian/events{/privacy}","received_events_url":"https://api.github.com/users/liuguolian/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-08-07T16:51:57Z","updated_at":"2020-05-28T11:52:46Z","closed_at":"2020-05-28T11:52:46Z","author_association":"NONE","active_lock_reason":null,"body":"在gpu环境执行获取embedding的脚本报错如下：\r\nTraceback (most recent call last):\r\nFile \"ernie_encoder.py\", line 187, in <module>\r\nmain(args)\r\nFile \"ernie_encoder.py\", line 163, in main\r\nreturn_numpy=False)\r\nFile \"/home/slurm/job/tmp/job-120971/python/lib/python2.7/site-packages/paddle/fluid/executor.py\", line 470, in run\r\nself.executor.run(program.desc, scope, 0, True, True)\r\npaddle.fluid.core.EnforceNotMet: ptr_ should not be null\r\nInsufficient GPU memory to allocation. at [/paddle/paddle/fluid/framework/tensor.h:180]\r\nPaddlePaddle Call Stacks: \r\n0 0x7f9e8e8bad06p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 486\r\n1 0x7f9e8fec262cp paddle::framework::Tensor::mutable_data(boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_>, std::type_index, unsigned long) + 2428\r\n2 0x7f9e8edc1641p paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, float>::Compute(paddle::framework::ExecutionContext const&) const + 225\r\n3 0x7f9e8edc1cd3p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CUDAPlace, false, 0ul, paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, float>, paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, paddle::platform::float16>, paddle::operators::GPUDropoutKernel<paddle::platform::CUDADeviceContext, double> >::operator()(char const*, char const*) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n4 0x7f9e8fe44bbcp paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 492\r\n5 0x7f9e8fe413ffp paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 463\r\n6 0x7f9e8e9889cbp paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool, bool) + 219\r\n7 0x7f9e8e989620p paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool) + 128\r\n8 0x7f9e8e89dfedp\r\n9 0x7f9e8e8d1414p pybind11::cpp_function::dispatcher(_object*, _object*, _object*) + 2596\r\n10 0x7f9eeffa855fp PyEval_EvalFrameEx + 29855\r\n11 0x7f9eeffaa86dp PyEval_EvalCodeEx + 2061\r\n12 0x7f9eeffa79fcp PyEval_EvalFrameEx + 26940\r\n13 0x7f9eeffaa86dp PyEval_EvalCodeEx + 2061\r\n14 0x7f9eeffa79fcp PyEval_EvalFrameEx + 26940\r\n15 0x7f9eeffaa86dp PyEval_EvalCodeEx + 2061\r\n16 0x7f9eeffaa9a2p PyEval_EvalCode + 50\r\n17 0x7f9eeffd3782p PyRun_FileExFlags + 146\r\n18 0x7f9eeffd4af9p PyRun_SimpleFileExFlags + 217\r\n19 0x7f9eeffea82dp Py_Main + 3149\r\n20 0x7f9eef1e7bd5p __libc_start_main + 245\r\n21 0x4007a1p","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/269/timeline","performed_via_github_app":null,"state_reason":"completed"}