{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/800","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/800/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/800/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/800/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/800","id":1220260783,"node_id":"I_kwDOClgT-M5Iu7Ov","number":800,"title":"复现ERNIE-GEN的Persona-chat数据集时出现错误","user":{"login":"xiang-xiang-zhu","id":70831496,"node_id":"MDQ6VXNlcjcwODMxNDk2","avatar_url":"https://avatars.githubusercontent.com/u/70831496?v=4","gravatar_id":"","url":"https://api.github.com/users/xiang-xiang-zhu","html_url":"https://github.com/xiang-xiang-zhu","followers_url":"https://api.github.com/users/xiang-xiang-zhu/followers","following_url":"https://api.github.com/users/xiang-xiang-zhu/following{/other_user}","gists_url":"https://api.github.com/users/xiang-xiang-zhu/gists{/gist_id}","starred_url":"https://api.github.com/users/xiang-xiang-zhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiang-xiang-zhu/subscriptions","organizations_url":"https://api.github.com/users/xiang-xiang-zhu/orgs","repos_url":"https://api.github.com/users/xiang-xiang-zhu/repos","events_url":"https://api.github.com/users/xiang-xiang-zhu/events{/privacy}","received_events_url":"https://api.github.com/users/xiang-xiang-zhu/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-04-29T08:47:09Z","updated_at":"2022-07-14T07:41:14Z","closed_at":"2022-07-14T07:41:14Z","author_association":"NONE","active_lock_reason":null,"body":"当我执行\r\n```\r\nMODEL=\"base\"      # base or large or large_430g\r\nTASK=\"personachat\"   # cnndm, coqa, gigaword, squad_qg or persona-chat\r\nsh run_seq2seq.sh ./configs/${MODEL}/${TASK}_conf\r\n```\r\n这是log文件的输出\r\n```\r\n-----------  Configuration Arguments -----------\r\ncurrent_node_ip: 127.0.1.1\r\nlog_prefix: \r\nnode_id: 0\r\nnode_ips: 127.0.1.1\r\nprint_config: True\r\nsplit_log_path: log\r\ntraining_script: ./run_seq2seq.py\r\ntraining_script_args: ['--use_cuda', 'true', '--do_train', 'true', '--do_val', 'true', '--do_test', 'true', '--do_pred', 'false', '--train_set', 'datasets/persona_chat/train.tsv', '--dev_set', 'datasets/persona_chat/dev.2k.tsv', '--test_set', 'datasets/persona_chat/test.tsv', '--pred_set', 'datasets/persona_chat/', '--epoch', '10', '--tokenizer', 'FullTokenizer', '--tokenized_input', 'true', '--task_type', 'normal', '--role_type_size', '0', '--turn_type_size', '0', '--max_src_len', '192', '--max_tgt_len', '64', '--max_dec_len', '32', '--hidden_dropout_prob', '0.1', '--attention_probs_dropout_prob', '-1', '--random_noise', 'true', '--noise_prob', '0.5', '--continuous_position', 'true', '--tgt_type_id', '3', '--batch_size', '16', '--learning_rate', '3e-5', '--lr_scheduler', 'linear_warmup_decay', '--warmup_proportion', '0.1', '--weight_decay', '0.01', '--weight_sharing', 'True', '--label_smooth', '0.1', '--do_decode', 'true', '--beam_size', '5', '--length_penalty', '0.6', '--init_pretraining_params', 'ernie_gen_base/params', '--vocab_path', 'ernie_gen_base/vocab.txt', '--ernie_config_path', 'ernie_gen_base/ernie_config.json', '--checkpoints', './checkpoints', '--save_and_valid_by_epoch', 'true', '--eval_script', 'sh', './eval/tasks/persona_chat/eval.sh', '--eval_mertrics', 'rouge-1,rouge-2,rouge-l', '--random_seed', '38956']\r\n------------------------------------------------\r\nall_trainer_endpoints:  127.0.1.1:6170,127.0.1.1:6171,127.0.1.1:6172 , node_id:  0 , current_ip:  127.0.1.1 , num_nodes:  1 , node_ips:  ['127.0.1.1'] , gpus_per_proc:  1 , selected_gpus_per_proc:  [[0], [1], [2]] , nranks:  3\r\n```\r\n\r\n这是conf文件\r\n```\r\n#load model\r\nvocab_path=\"ernie_gen_base/vocab.txt\"\r\nconfig_path=\"ernie_gen_base/ernie_config.json\"\r\ninit_model=\"ernie_gen_base/params\"\r\n\r\n#input\r\nmax_src_len=192\r\nmax_tgt_len=64\r\ntokenized_input=\"true\"\r\ncontinuous_position=\"true\"\r\nbatch_size=16\r\nin_tokens=\"false\"\r\ntgt_type_id=3\r\n\r\n#decode\r\ndo_decode=\"true\"\r\nmax_dec_len=32\r\nbeam_size=5\r\nlength_penalty=0.6\r\nuse_multi_gpu_test=\"true\"\r\n\r\n#train\r\nepoch=10\r\nweight_decay=0.01\r\nlabel_smooth=0.1\r\nhidden_dropout_prob=0.1\r\nsave_and_valid_by_epoch=\"true\"\r\n#lr\r\nwarmup_proportion=0.1\r\nlr_scheduler=\"linear_warmup_decay\"\r\nlearning_rate=3e-5\r\n#noise\r\nrandom_noise=\"true\"\r\nnoise_prob=0.5\r\n\r\n#dataset\r\ndata_path=\"datasets/persona_chat\"\r\ntrain_set=\"train.tsv\"\r\ndev_set=\"dev.2k.tsv\"\r\ntest_set=\"test.tsv\"\r\ndo_train=\"true\"\r\ndo_val=\"true\"\r\ndo_test=\"true\"\r\ndo_pred=\"false\"\r\n\r\n#evaluate\r\neval_script=\"sh ./eval/tasks/persona_chat/eval.sh\"\r\n#eval_mertrics=\"rouge-1,rouge-2,rouge-l,bleu-1,bleu-2,bleu-3,bleu-4,dist-1,dis-2,dist-3,dist-4\"\r\neval_mertrics=\"rouge-1,rouge-2,rouge-l\"\r\n```","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/800/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/800/timeline","performed_via_github_app":null,"state_reason":"completed"}