{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/674","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/674/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/674/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/674/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/674","id":899031397,"node_id":"MDU6SXNzdWU4OTkwMzEzOTc=","number":674,"title":"ernie-doc的文本分类效果不理想","user":{"login":"Phoebe0126","id":43496733,"node_id":"MDQ6VXNlcjQzNDk2NzMz","avatar_url":"https://avatars.githubusercontent.com/u/43496733?v=4","gravatar_id":"","url":"https://api.github.com/users/Phoebe0126","html_url":"https://github.com/Phoebe0126","followers_url":"https://api.github.com/users/Phoebe0126/followers","following_url":"https://api.github.com/users/Phoebe0126/following{/other_user}","gists_url":"https://api.github.com/users/Phoebe0126/gists{/gist_id}","starred_url":"https://api.github.com/users/Phoebe0126/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Phoebe0126/subscriptions","organizations_url":"https://api.github.com/users/Phoebe0126/orgs","repos_url":"https://api.github.com/users/Phoebe0126/repos","events_url":"https://api.github.com/users/Phoebe0126/events{/privacy}","received_events_url":"https://api.github.com/users/Phoebe0126/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-05-23T14:22:13Z","updated_at":"2021-05-27T08:46:38Z","closed_at":"2021-05-27T08:46:38Z","author_association":"NONE","active_lock_reason":null,"body":"具体参数配置如下：\r\nbatch_size: 16\r\ncheckpoints: ./output\r\ndecr_every_n_nan_or_inf: 2\r\ndecr_ratio: 0.8\r\ndev_set: ./data/THUCNews/dev.txt\r\ndo_lower_case: True\r\ndo_test: False\r\ndo_train: True\r\ndo_val: True\r\ndoc_stride: 128\r\nepoch: 5\r\nernie_config_path: ./configs/base/zh/ernie_config.json\r\neval_all: False\r\nfor_cn: True\r\nin_tokens: False\r\nincr_every_n_steps: 100\r\nincr_ratio: 5.0\r\ninit_checkpoint: \r\ninit_loss_scaling: 1.0\r\ninit_pretraining_params: \r\nis_distributed: False\r\nis_zh: True\r\nlabel_map_config: \r\nlayer_decay_ratio: 0.8\r\nlearning_rate: 0.00015\r\nlr_scheduler: linear_warmup_decay\r\nmax_answer_length: 100\r\nmax_query_length: 64\r\nmax_seq_len: 100\r\nmetrics: True\r\nn_best_size: 20\r\nnum_iteration_per_drop_scope: 10\r\nnum_labels: 10\r\nrandom_seed: 1\r\nrel_pos_params_sharing: False\r\nrepeat_input: False\r\nsave_steps: 10000\r\nskip_steps: 10\r\nstream_job: None\r\ntest_set: ./data/THUCNews/test.txt\r\ntokenizer: FullTokenizer\r\ntrain_all: False\r\ntrain_set: ./data/THUCNews/train.txt\r\nuse_amp: False\r\nuse_cuda: True\r\nuse_dynamic_loss_scaling: False\r\nuse_fast_executor: True\r\nuse_recompute: False\r\nuse_vars: False\r\nvalidation_steps: 100\r\nverbose: False\r\nvocab_path: ./configs/base/zh/vocab.txt\r\nwarmup_proportion: 0.1\r\nweight_decay: 0.01\r\nweight_sharing: True\r\n\r\nfinetuning start\r\nattention_probs_dropout_prob: 0.1\r\nepsilon: 1e-12\r\nhidden_act: gelu\r\nhidden_dropout_prob: 0.1\r\nhidden_size: 768\r\ninitializer_range: 0.02\r\nmax_position_embeddings: 512\r\nmemory_len: 128\r\nnum_attention_heads: 12\r\nnum_hidden_layers: 12\r\nsent_type_vocab_size: 4\r\ntask_type_vocab_size: 3\r\nvocab_size: 28000\r\n\r\nargs.is_distributed: False\r\nDevice count 4, trainer_id:0\r\nargs.vocab_path ./configs/base/zh/vocab.txt\r\nDevice count: 4, trainer_id: 0\r\nNum train examples: 180000\r\nMax train steps: 14062\r\nNum warmup steps: 1406\r\n\r\nW0523 22:12:34.754221 14073 device_context.cc:404] Please NOTE: device: 0, GPU Compute Capability: 6.1, Driver API Version: 10.2, Runtime API Version: 10.2\r\nW0523 22:12:34.758791 14073 device_context.cc:422] device: 0, cuDNN Version: 7.6.\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 5248/180000, step: 10, ave loss: 2.280549, ave acc: 0.176471, time cost: 4.076458, speed: 2.453110 steps/s, learning_rate: 0.000001\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 5888/180000, step: 20, ave loss: 2.332018, ave acc: 0.000000, time cost: 3.281870, speed: 3.047043 steps/s, learning_rate: 0.000002\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 6528/180000, step: 30, ave loss: 2.327189, ave acc: 0.058824, time cost: 3.284722, speed: 3.044398 steps/s, learning_rate: 0.000003\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 7168/180000, step: 40, ave loss: 2.282611, ave acc: 0.117647, time cost: 3.292336, speed: 3.037358 steps/s, learning_rate: 0.000004\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 7808/180000, step: 50, ave loss: 2.297273, ave acc: 0.117647, time cost: 3.289208, speed: 3.040246 steps/s, learning_rate: 0.000005\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 8448/180000, step: 60, ave loss: 2.354424, ave acc: 0.058824, time cost: 3.298677, speed: 3.031518 steps/s, learning_rate: 0.000006\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 9088/180000, step: 70, ave loss: 2.271231, ave acc: 0.117647, time cost: 3.301912, speed: 3.028548 steps/s, learning_rate: 0.000007\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 9728/180000, step: 80, ave loss: 2.345518, ave acc: 0.058824, time cost: 3.331487, speed: 3.001663 steps/s, learning_rate: 0.000008\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 10368/180000, step: 90, ave loss: 2.306730, ave acc: 0.000000, time cost: 3.303587, speed: 3.027012 steps/s, learning_rate: 0.000009\r\ntrain pyreader queue size: 70, \r\nepoch: 0, worker_index: 0, progress: 11008/180000, step: 100, ave loss: 2.327241, ave acc: 0.058824, time cost: 3.320735, speed: 3.011382 steps/s, learning_rate: 0.000011\r\nprocessining example: 1000\r\nprocessining example: 2000\r\ndata num: 2512\r\n[100_eval evaluation] ave loss: 2.302494, ave acc: 0.104299, data_num: 2512, elapsed time: 19.938949 s","closed_by":{"login":"dingsiyu","id":21340925,"node_id":"MDQ6VXNlcjIxMzQwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/21340925?v=4","gravatar_id":"","url":"https://api.github.com/users/dingsiyu","html_url":"https://github.com/dingsiyu","followers_url":"https://api.github.com/users/dingsiyu/followers","following_url":"https://api.github.com/users/dingsiyu/following{/other_user}","gists_url":"https://api.github.com/users/dingsiyu/gists{/gist_id}","starred_url":"https://api.github.com/users/dingsiyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dingsiyu/subscriptions","organizations_url":"https://api.github.com/users/dingsiyu/orgs","repos_url":"https://api.github.com/users/dingsiyu/repos","events_url":"https://api.github.com/users/dingsiyu/events{/privacy}","received_events_url":"https://api.github.com/users/dingsiyu/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/674/timeline","performed_via_github_app":null,"state_reason":"completed"}