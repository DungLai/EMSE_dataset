{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/380","repository_url":"https://api.github.com/repos/PaddlePaddle/ERNIE","labels_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/380/labels{/name}","comments_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/380/comments","events_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/380/events","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/380","id":533235640,"node_id":"MDU6SXNzdWU1MzMyMzU2NDA=","number":380,"title":"Error in using the CPU version of paddlepaddle-1.5.2","user":{"login":"veridone","id":6941942,"node_id":"MDQ6VXNlcjY5NDE5NDI=","avatar_url":"https://avatars.githubusercontent.com/u/6941942?v=4","gravatar_id":"","url":"https://api.github.com/users/veridone","html_url":"https://github.com/veridone","followers_url":"https://api.github.com/users/veridone/followers","following_url":"https://api.github.com/users/veridone/following{/other_user}","gists_url":"https://api.github.com/users/veridone/gists{/gist_id}","starred_url":"https://api.github.com/users/veridone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/veridone/subscriptions","organizations_url":"https://api.github.com/users/veridone/orgs","repos_url":"https://api.github.com/users/veridone/repos","events_url":"https://api.github.com/users/veridone/events{/privacy}","received_events_url":"https://api.github.com/users/veridone/received_events","type":"User","site_admin":false},"labels":[{"id":1256169225,"node_id":"MDU6TGFiZWwxMjU2MTY5MjI1","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-12-05T09:44:33Z","updated_at":"2020-05-28T09:52:55Z","closed_at":"2020-05-28T09:52:55Z","author_association":"NONE","active_lock_reason":null,"body":"My environment is Python3.6 and paddlepaddle-1.5.2(cpu version) \r\nI download the model of \"ERNIE 1.0 Base for Chinese(max-len-512)\"\r\nI run the example of lcqmc task and I got a Exception :\r\n\r\n\"I1205 17:34:24.159621 28051 parallel_executor.cc:334] The number of CPUPlace, which is used in ParallelExecutor, is 32. And the Program will be copied 32 copies\r\nI1205 17:34:59.254444 28051 build_strategy.cc:340] SeqOnlyAllReduceOps:0, num_trainers:1\r\nTraceback (most recent call last):\r\n  File \"./ernie/run_classifier.py\", line 447, in <module>\r\n    main(args)\r\n  File \"./ernie/run_classifier.py\", line 257, in main\r\n    train_exe.run(fetch_list=[])\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/parallel_executor.py\", line 280, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 672, in run\r\n    return_numpy=return_numpy)\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/executor.py\", line 534, in _run_parallel\r\n    exe.run(fetch_var_names, fetch_var_name)\r\npaddle.fluid.core_avx.EnforceNotMet: Invoke operator softmax_with_cross_entropy error.\r\nPython Call stacks: \r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/framework.py\", line 1774, in append_op\r\n    attrs=kwargs.get(\"attrs\", None))\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/layer_helper.py\", line 43, in append_op\r\n    return self.main_program.current_block().append_op(*args, **kwargs)\r\n  File \"/home/work/.jumbo/lib/python3.6/site-packages/paddle/fluid/layers/nn.py\", line 6425, in softmax_with_cross_entropy\r\n    'axis': axis\r\n  File \"~/ERNIE/ernie/finetune/classifier.py\", line 111, in create_model\r\n    logits=logits, label=labels, return_softmax=True)\r\n  File \"./ernie/run_classifier.py\", line 119, in main\r\n    is_regression=args.is_regression)\r\n  File \"./ernie/run_classifier.py\", line 447, in <module>\r\n    main(args)\r\nC++ Call stacks: \r\n at [/paddle/paddle/fluid/operators/math/cross_entropy.cc:56]\r\nPaddlePaddle Call Stacks: \r\n0       0x7f91ea0b3270p void paddle::platform::EnforceNotMet::Init<char const*>(char const*, char const*, int) + 352\r\n1       0x7f91ea0b35e9p paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 137\r\n2       0x7f91eb110473p paddle::operators::math::CrossEntropyFunctor<paddle::platform::CPUDeviceContext, float>::operator()(paddle::platform::CPUDeviceContext const&, paddle::framework::Tensor*, paddle::framework::Tensor const*, paddle::framework::Tensor const*, bool, int, int) + 739\r\n3       0x7f91ea4861cep paddle::operators::SoftmaxWithCrossEntropyKernel<float>::Compute(paddle::framework::ExecutionContext const&) const + 1566\r\n4       0x7f91ea486413p std::_Function_handler<void (paddle::framework::ExecutionContext const&), paddle::framework::OpKernelRegistrarFunctor<paddle::platform::CPUPlace, false, 0ul, paddle::operators::SoftmaxWithCrossEntropyKernel<float>, paddle::operators::SoftmaxWithCrossEntropyKernel<double> >::operator()(char const*, char const*, int) const::{lambda(paddle::framework::ExecutionContext const&)#1}>::_M_invoke(std::_Any_data const&, paddle::framework::ExecutionContext const&) + 35\r\n5       0x7f91eb410ae7p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&, paddle::framework::RuntimeContext*) const + 375\r\n6       0x7f91eb411251p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 529\r\n7       0x7f91eb40c1f4p paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, paddle::platform::CUDAPinnedPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 260\r\n8       0x7f91eb1fcf13p\r\n9       0x7f91eb1fcbacp paddle::framework::details::ComputationOpHandle::RunImpl() + 124\r\n10      0x7f91eb1eec4cp paddle::framework::details::OpHandleBase::Run(bool) + 28\r\n11      0x7f91eb1d31a6p paddle::framework::details::FastThreadedSSAGraphExecutor::RunOpSync(paddle::framework::details::OpHandleBase*) + 310\r\n12      0x7f91eb1d1f0fp paddle::framework::details::FastThreadedSSAGraphExecutor::RunOp(paddle::framework::details::OpHandleBase*, std::shared_ptr<paddle::framework::BlockingQueue<unsigned long> > const&, unsigned long*) + 47\r\n13      0x7f91eb1d22cfp\r\n14      0x7f91ea2c6353p std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, void> >::_M_invoke(std::_Any_data const&) + 35\r\n15      0x7f91ea1738a7p std::__future_base::_State_base::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>&, bool&) + 39\r\n16        0x318b20cb23p pthread_once + 83\r\n17      0x7f91eb1cdb72p\r\n18      0x7f91ea174e64p ThreadPool::ThreadPool(unsigned long)::{lambda()#1}::operator()() const + 404\r\n19      0x7f91f692a6e0p\r\n20        0x318b207851p\r\n21        0x318aee767dp clone + 109\r\n\r\nterminate called without an active exception\"","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/380/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/380/timeline","performed_via_github_app":null,"state_reason":"completed"}