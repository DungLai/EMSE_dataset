[{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/968089621","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/765#issuecomment-968089621","issue_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/765","id":968089621,"node_id":"IC_kwDOClgT-M45s-AV","user":{"login":"peppocola","id":45401861,"node_id":"MDQ6VXNlcjQ1NDAxODYx","avatar_url":"https://avatars.githubusercontent.com/u/45401861?v=4","gravatar_id":"","url":"https://api.github.com/users/peppocola","html_url":"https://github.com/peppocola","followers_url":"https://api.github.com/users/peppocola/followers","following_url":"https://api.github.com/users/peppocola/following{/other_user}","gists_url":"https://api.github.com/users/peppocola/gists{/gist_id}","starred_url":"https://api.github.com/users/peppocola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peppocola/subscriptions","organizations_url":"https://api.github.com/users/peppocola/orgs","repos_url":"https://api.github.com/users/peppocola/repos","events_url":"https://api.github.com/users/peppocola/events{/privacy}","received_events_url":"https://api.github.com/users/peppocola/received_events","type":"User","site_admin":false},"created_at":"2021-11-13T15:52:47Z","updated_at":"2021-11-13T15:52:47Z","author_association":"NONE","body":"full trace here: \r\n```\r\n/content/ERNIE/propeller/paddle/__init__.py:41: DeprecationWarning: The 'warn' method is deprecated, use 'warning' instead\r\n  log.warn('enabling old_styled_ckpt')\r\n[WARNING] 2021-11-13 15:47:54,621 [ __init__.py:   41]:\tenabling old_styled_ckpt\r\n[INFO] 2021-11-13 15:47:55,016 [tokenizing_ernie.py:  102]:    get pretrain dir from https://ernie-github.cdn.bcebos.com/model-ernie2.0-en.1.tar.gz\r\nDEBUG:filelock:Attempting to acquire lock 140395529425936 on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\nDEBUG:filelock:Lock 140395529425936 acquired on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\n[DEBUG] 2021-11-13 15:47:55,019 [file_utils.py:   48]:    https://ernie-github.cdn.bcebos.com/model-ernie2.0-en.1.tar.gz cached in /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e\r\nDEBUG:filelock:Attempting to release lock 140395529425936 on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\nDEBUG:filelock:Lock 140395529425936 released on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\n[DEBUG] 2021-11-13 15:47:55,039 [tokenizing_ernie.py:  157]:    regex: (\\[CLS\\])|(\\[PAD\\])|(\\[MASK\\])|(\\[SEP\\])|(\\[UNK\\])|([a-zA-Z0-9]+|\\S)\r\n[INFO] 2021-11-13 15:47:55,040 [ pretrain.py:  158]:\tread from /content/drive/MyDrive/hate_data/train_data.gz\r\n[INFO] 2021-11-13 15:47:55,041 [modeling_ernie.py:  267]:    get pretrain dir from https://ernie-github.cdn.bcebos.com/model-ernie2.0-en.1.tar.gz\r\nDEBUG:filelock:Attempting to acquire lock 140395527800208 on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\nDEBUG:filelock:Lock 140395527800208 acquired on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\n[DEBUG] 2021-11-13 15:47:55,041 [file_utils.py:   48]:    https://ernie-github.cdn.bcebos.com/model-ernie2.0-en.1.tar.gz cached in /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e\r\nDEBUG:filelock:Attempting to release lock 140395527800208 on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\nDEBUG:filelock:Lock 140395527800208 released on /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e.lock\r\n[DEBUG] 2021-11-13 15:47:55,042 [modeling_ernie.py:  310]:    init ErnieModel with config: {'attention_probs_dropout_prob': 0.1, 'hidden_act': 'gelu', 'hidden_dropout_prob': 0.1, 'hidden_size': 768, 'initializer_range': 0.02, 'max_position_embeddings': 512, 'num_attention_heads': 12, 'num_hidden_layers': 12, 'sent_type_vocab_size': 4, 'task_type_vocab_size': 16, 'vocab_size': 30522}\r\nW1113 15:47:55.043432   725 device_context.cc:447] Please NOTE: device: 0, GPU Compute Capability: 3.7, Driver API Version: 11.2, Runtime API Version: 11.1\r\nW1113 15:47:55.047025   725 device_context.cc:465] device: 0, cuDNN Version: 7.6.\r\nW1113 15:47:55.409149   725 device_context.h:397] WARNING: device: 0. The installed Paddle is compiled with CUDNN 8.1, but CUDNN version in your machine is 7.6, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.\r\n[INFO] 2021-11-13 15:47:56,428 [modeling_ernie.py:  285]:    loading pretrained model from /root/.paddle-ernie-cache/43cf6490a67bdc70e4423b84cf0bf82e\r\n/usr/local/lib/python3.7/dist-packages/paddle/distributed/parallel.py:136: UserWarning: Currently not a parallel execution environment, `paddle.distributed.init_parallel_env` will not do anything.\r\n  \"Currently not a parallel execution environment, `paddle.distributed.init_parallel_env` will not do anything.\"\r\nTraceback (most recent call last):\r\n  File \"./demo/pretrain/pretrain.py\", line 346, in <module>\r\n    model = ErnieModelForPretraining.from_pretrained(args.from_pretrained)\r\n  File \"/content/ERNIE/ernie/modeling_ernie.py\", line 293, in from_pretrained\r\n    m = P.load(state_dict_path)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/framework/io.py\", line 928, in load\r\n    with _open_file_buffer(path, 'rb') as f:\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/io.py\", line 111, in _open_file_buffer\r\n    return _buffer_reader(path_or_buffer)\r\n  File \"/usr/local/lib/python3.7/dist-packages/paddle/fluid/io.py\", line 86, in __init__\r\n    self.initial_tell = self.buffer.tell()\r\nAttributeError: 'PosixPath' object has no attribute 'tell'\r\n```","reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/968089621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peppocola","id":45401861,"node_id":"MDQ6VXNlcjQ1NDAxODYx","avatar_url":"https://avatars.githubusercontent.com/u/45401861?v=4","gravatar_id":"","url":"https://api.github.com/users/peppocola","html_url":"https://github.com/peppocola","followers_url":"https://api.github.com/users/peppocola/followers","following_url":"https://api.github.com/users/peppocola/following{/other_user}","gists_url":"https://api.github.com/users/peppocola/gists{/gist_id}","starred_url":"https://api.github.com/users/peppocola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peppocola/subscriptions","organizations_url":"https://api.github.com/users/peppocola/orgs","repos_url":"https://api.github.com/users/peppocola/repos","events_url":"https://api.github.com/users/peppocola/events{/privacy}","received_events_url":"https://api.github.com/users/peppocola/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/968488761","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/765#issuecomment-968488761","issue_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/765","id":968488761,"node_id":"IC_kwDOClgT-M45ufc5","user":{"login":"Meiyim","id":10281949,"node_id":"MDQ6VXNlcjEwMjgxOTQ5","avatar_url":"https://avatars.githubusercontent.com/u/10281949?v=4","gravatar_id":"","url":"https://api.github.com/users/Meiyim","html_url":"https://github.com/Meiyim","followers_url":"https://api.github.com/users/Meiyim/followers","following_url":"https://api.github.com/users/Meiyim/following{/other_user}","gists_url":"https://api.github.com/users/Meiyim/gists{/gist_id}","starred_url":"https://api.github.com/users/Meiyim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Meiyim/subscriptions","organizations_url":"https://api.github.com/users/Meiyim/orgs","repos_url":"https://api.github.com/users/Meiyim/repos","events_url":"https://api.github.com/users/Meiyim/events{/privacy}","received_events_url":"https://api.github.com/users/Meiyim/received_events","type":"User","site_admin":false},"created_at":"2021-11-15T03:01:06Z","updated_at":"2021-11-15T03:01:06Z","author_association":"COLLABORATOR","body":"this is a paddle 2.2 issue, `paddle.load` / `paddle.save`, no longer accept `pathlib.Path` object as argument.\r\nthis is fixed in #763 .","reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/968488761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Meiyim","id":10281949,"node_id":"MDQ6VXNlcjEwMjgxOTQ5","avatar_url":"https://avatars.githubusercontent.com/u/10281949?v=4","gravatar_id":"","url":"https://api.github.com/users/Meiyim","html_url":"https://github.com/Meiyim","followers_url":"https://api.github.com/users/Meiyim/followers","following_url":"https://api.github.com/users/Meiyim/following{/other_user}","gists_url":"https://api.github.com/users/Meiyim/gists{/gist_id}","starred_url":"https://api.github.com/users/Meiyim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Meiyim/subscriptions","organizations_url":"https://api.github.com/users/Meiyim/orgs","repos_url":"https://api.github.com/users/Meiyim/repos","events_url":"https://api.github.com/users/Meiyim/events{/privacy}","received_events_url":"https://api.github.com/users/Meiyim/received_events","type":"User","site_admin":false}},{"id":5616787165,"node_id":"CE_lADOClgT-M4-vxRlzwAAAAFOyV7d","url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/events/5616787165","actor":{"login":"peppocola","id":45401861,"node_id":"MDQ6VXNlcjQ1NDAxODYx","avatar_url":"https://avatars.githubusercontent.com/u/45401861?v=4","gravatar_id":"","url":"https://api.github.com/users/peppocola","html_url":"https://github.com/peppocola","followers_url":"https://api.github.com/users/peppocola/followers","following_url":"https://api.github.com/users/peppocola/following{/other_user}","gists_url":"https://api.github.com/users/peppocola/gists{/gist_id}","starred_url":"https://api.github.com/users/peppocola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peppocola/subscriptions","organizations_url":"https://api.github.com/users/peppocola/orgs","repos_url":"https://api.github.com/users/peppocola/repos","events_url":"https://api.github.com/users/peppocola/events{/privacy}","received_events_url":"https://api.github.com/users/peppocola/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-11-15T09:28:43Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/1047862875","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/765#issuecomment-1047862875","issue_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/765","id":1047862875,"node_id":"IC_kwDOClgT-M4-dR5b","user":{"login":"musitafa0032","id":55053337,"node_id":"MDQ6VXNlcjU1MDUzMzM3","avatar_url":"https://avatars.githubusercontent.com/u/55053337?v=4","gravatar_id":"","url":"https://api.github.com/users/musitafa0032","html_url":"https://github.com/musitafa0032","followers_url":"https://api.github.com/users/musitafa0032/followers","following_url":"https://api.github.com/users/musitafa0032/following{/other_user}","gists_url":"https://api.github.com/users/musitafa0032/gists{/gist_id}","starred_url":"https://api.github.com/users/musitafa0032/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/musitafa0032/subscriptions","organizations_url":"https://api.github.com/users/musitafa0032/orgs","repos_url":"https://api.github.com/users/musitafa0032/repos","events_url":"https://api.github.com/users/musitafa0032/events{/privacy}","received_events_url":"https://api.github.com/users/musitafa0032/received_events","type":"User","site_admin":false},"created_at":"2022-02-22T14:38:19Z","updated_at":"2022-02-22T14:38:19Z","author_association":"NONE","body":"I still have this issue, how do you solve it?","reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/1047862875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"musitafa0032","id":55053337,"node_id":"MDQ6VXNlcjU1MDUzMzM3","avatar_url":"https://avatars.githubusercontent.com/u/55053337?v=4","gravatar_id":"","url":"https://api.github.com/users/musitafa0032","html_url":"https://github.com/musitafa0032","followers_url":"https://api.github.com/users/musitafa0032/followers","following_url":"https://api.github.com/users/musitafa0032/following{/other_user}","gists_url":"https://api.github.com/users/musitafa0032/gists{/gist_id}","starred_url":"https://api.github.com/users/musitafa0032/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/musitafa0032/subscriptions","organizations_url":"https://api.github.com/users/musitafa0032/orgs","repos_url":"https://api.github.com/users/musitafa0032/repos","events_url":"https://api.github.com/users/musitafa0032/events{/privacy}","received_events_url":"https://api.github.com/users/musitafa0032/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/1112945515","html_url":"https://github.com/PaddlePaddle/ERNIE/issues/765#issuecomment-1112945515","issue_url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/765","id":1112945515,"node_id":"IC_kwDOClgT-M5CVjNr","user":{"login":"l-i-p-f","id":18002343,"node_id":"MDQ6VXNlcjE4MDAyMzQz","avatar_url":"https://avatars.githubusercontent.com/u/18002343?v=4","gravatar_id":"","url":"https://api.github.com/users/l-i-p-f","html_url":"https://github.com/l-i-p-f","followers_url":"https://api.github.com/users/l-i-p-f/followers","following_url":"https://api.github.com/users/l-i-p-f/following{/other_user}","gists_url":"https://api.github.com/users/l-i-p-f/gists{/gist_id}","starred_url":"https://api.github.com/users/l-i-p-f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l-i-p-f/subscriptions","organizations_url":"https://api.github.com/users/l-i-p-f/orgs","repos_url":"https://api.github.com/users/l-i-p-f/repos","events_url":"https://api.github.com/users/l-i-p-f/events{/privacy}","received_events_url":"https://api.github.com/users/l-i-p-f/received_events","type":"User","site_admin":false},"created_at":"2022-04-29T07:17:56Z","updated_at":"2022-04-29T07:17:56Z","author_association":"NONE","body":"Assuming you have error like this : \r\n```\r\n  File \"/content/ERNIE/ernie/modeling_ernie.py\", line 293, in from_pretrained\r\n    m = P.load(state_dict_path)\r\n```\r\nOne way you can try : \r\n1. vi /content/ERNIE/ernie/modeling_ernie.py\r\n2. change line 293 from `m = P.load(state_dict_path)` to `m = P.load(state_dict_path.as_posix())`","reactions":{"url":"https://api.github.com/repos/PaddlePaddle/ERNIE/issues/comments/1112945515/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"l-i-p-f","id":18002343,"node_id":"MDQ6VXNlcjE4MDAyMzQz","avatar_url":"https://avatars.githubusercontent.com/u/18002343?v=4","gravatar_id":"","url":"https://api.github.com/users/l-i-p-f","html_url":"https://github.com/l-i-p-f","followers_url":"https://api.github.com/users/l-i-p-f/followers","following_url":"https://api.github.com/users/l-i-p-f/following{/other_user}","gists_url":"https://api.github.com/users/l-i-p-f/gists{/gist_id}","starred_url":"https://api.github.com/users/l-i-p-f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l-i-p-f/subscriptions","organizations_url":"https://api.github.com/users/l-i-p-f/orgs","repos_url":"https://api.github.com/users/l-i-p-f/repos","events_url":"https://api.github.com/users/l-i-p-f/events{/privacy}","received_events_url":"https://api.github.com/users/l-i-p-f/received_events","type":"User","site_admin":false}}]