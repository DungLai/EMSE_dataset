[{"url":"https://api.github.com/repos/CSAILVision/gandissect/issues/comments/626872261","html_url":"https://github.com/CSAILVision/gandissect/issues/18#issuecomment-626872261","issue_url":"https://api.github.com/repos/CSAILVision/gandissect/issues/18","id":626872261,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjg3MjI2MQ==","user":{"login":"davidbau","id":3458792,"node_id":"MDQ6VXNlcjM0NTg3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3458792?v=4","gravatar_id":"","url":"https://api.github.com/users/davidbau","html_url":"https://github.com/davidbau","followers_url":"https://api.github.com/users/davidbau/followers","following_url":"https://api.github.com/users/davidbau/following{/other_user}","gists_url":"https://api.github.com/users/davidbau/gists{/gist_id}","starred_url":"https://api.github.com/users/davidbau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidbau/subscriptions","organizations_url":"https://api.github.com/users/davidbau/orgs","repos_url":"https://api.github.com/users/davidbau/repos","events_url":"https://api.github.com/users/davidbau/events{/privacy}","received_events_url":"https://api.github.com/users/davidbau/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T18:21:48Z","updated_at":"2020-05-11T18:21:48Z","author_association":"CONTRIBUTOR","body":"For the segmenter to work, you need to be able to JIT compile pytorch\nmodules, which means that you need a bunch of dependencies.\n\nThe conda environment described here works for me.\nhttps://github.com/davidbau/envs/blob/master/script/p3t14.yml\n\nOn Sun, May 10, 2020 at 10:35 AM Neo-Zhangjiajie <notifications@github.com>\nwrote:\n\n> Windows10\n> cudatoolkit 9.0\n> python 3.6\n> pytorch 1.1.0\n> torchvision 0.3.0\n>\n> C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\utils\\cpp_extension.py:184:\n> UserWarning: Error checking compiler version for cl: Command 'cl' returned\n> non-zero exit status 1.\n> warnings.warn('Error checking compiler version for {}:\n> {}'.format(compiler, error))\n> Traceback (most recent call last):\n> File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\utils\\cpp_extension.py\",\n> line 949, in _build_extension_module\n> check=True)\n> File \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\subprocess.py\", line 438, in\n> run\n> output=stdout, stderr=stderr)\n> subprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero\n> exit status 1.\n>\n> During handling of the above exception, another exception occurred:\n>\n> Traceback (most recent call last):\n> File \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\runpy.py\", line 193, in\n>\n>\n>\n>\n>\n> *run_module_as_main \"main\", mod_spec) File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\runpy.py\", line 85, in run_code\n> exec(code, run_globals) File\n> \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect_main.py\", line 410, in\n> main() File \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect_main*.py\",\n> line 220, in main\n> segrunner = GeneratorSegRunner(autoimport_eval(args.segmenter))\n> File \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\autoeval.py\", line\n> 36, in autoimport_eval\n> return eval(term, {}, AutoImportDict())\n> File \"\", line 1, in\n> File \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\segmenter.py\", line\n> 68, in *init*\n> segarch, segvocab, epoch)\n> File \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\segmenter.py\", line\n> 502, in load_unified_parsing_segmentation_model\n> weights=os.path.join(segmodel_dir, 'decoder_epoch_%d.pth' % epoch))\n> File\n> \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\models.py\",\n> line 215, in build_decoder\n> fpn_dim=512)\n> File\n> \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\models.py\",\n> line 271, in *init*\n> from .prroi_pool import PrRoIPool2D\n> File\n> \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool_\n> *init*_.py\", line 12, in\n> from .prroi_pool import *\n> File\n> \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool\\prroi_pool.py\",\n> line 14, in\n> from .functional import prroi_pool2d\n> File\n> \"C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool\\functional.py\",\n> line 22, in\n> verbose=False\n> File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\utils\\cpp_extension.py\",\n> line 644, in load\n> is_python_module)\n> File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\utils\\cpp_extension.py\",\n> line 813, in\n>\n>\n>\n>\n>\n>\n>\n>\n>\n> *jit_compile with_cuda=with_cuda) File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\utils\\cpp_extension.py\",\n> line 866, in write_ninja_file_and_build build_extension_module(name,\n> build_directory, verbose) File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\utils\\cpp_extension.py\",\n> line 962, in build_extension_module raise RuntimeError(message)\n> RuntimeError: Error building extension 'prroi_pooling': b'[1/3] cl\n> /showIncludes -DTORCH_EXTENSION_NAME=prroi_pooling\n> -DTORCH_API_INCLUDE_EXTENSION_H\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\torch\\csrc\\api\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\TH\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\THC\n> \"-IC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\include\"\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\Include -D_GLIBCXX_USE_CXX11_ABI=0\n> -fPIC -std=c++11 -c\n> C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool\\src\\prroi_pooling_gpu.c\n> /Foprroi_pooling_gpu.o\\r\\nFAILED: prroi_pooling_gpu.o \\r\\ncl /showIncludes\n> -DTORCH_EXTENSION_NAME=prroi_pooling -DTORCH_API_INCLUDE_EXTENSION_H\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\torch\\csrc\\api\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\TH\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\THC\n> \"-IC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\include\"\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\Include -D_GLIBCXX_USE_CXX11_ABI=0\n> -fPIC -std=c++11 -c\n> C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool\\src\\prroi_pooling_gpu.c\n> /Foprroi_pooling_gpu.o\\r\\nTraceback (most recent call last):\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\runpy.py\", line 193, in\n> run_module_as_main\\n \"main\", mod_spec)\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\runpy.py\", line 85, in\n> run_code\\n exec(code, run_globals)\\n File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\pytorch\\Scripts\\cl.exe\\main.py\", line 4, in\n> \\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\cl\\bin\\cl.py\",\n> line 5, in \\n from kombu import Connection\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\kombu\\init.py\",\n> line 81, in getattr\\n module = import(object_origins[name], None, None,\n> [name])\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\kombu\\connection.py\",\n> line 23, in \\n from kombu import exceptions\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\kombu\\exceptions.py\",\n> line 6, in \\n from amqp import ChannelError, ConnectionError,\n> ResourceError\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\amqp\\init.py\",\n> line 33, in \\n from .connection import Connection # noqa\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\amqp\\connection.py\",\n> line 21, in \\n from .transport import Transport\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\amqp\\transport.py\",\n> line 8, in \\n import ssl\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\ssl.py\", line 98, in \\n import\n> ssl # if we can't import it, let the error propagate\\nImportError: DLL load\n> failed:\n> \\xd5\\xd2\\xb2\\xbb\\xb5\\xbd\\xd6\\xb8\\xb6\\xa8\\xb5\\xc4\\xc4\\xa3\\xbf\\xe9\\xa1\\xa3\\n[2/3]\n> C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\bin\\nvcc\n> -DTORCH_EXTENSION_NAME=prroi_pooling -DTORCH_API_INCLUDE_EXTENSION_H\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\torch\\csrc\\api\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\TH\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\THC\n> \"-IC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\include\"\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\Include -D_GLIBCXX_USE_CXX11_ABI=0\n> -D__CUDA_NO_HALF_OPERATORS -D__CUDA_NO_HALF_CONVERSIONS\n> -D__CUDA_NO_HALF2_OPERATORS -c\n> C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool\\src\\prroi_pooling_gpu_impl.cu\n> <http://prroi_pooling_gpu_impl.cu> -o\n> prroi_pooling_gpu_impl.cuda.o\\r\\nFAILED: prroi_pooling_gpu_impl.cuda.o\n> \\r\\nC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\bin\\nvcc\n> -DTORCH_EXTENSION_NAME=prroi_pooling -DTORCH_API_INCLUDE_EXTENSION_H\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\torch\\csrc\\api\\include\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\TH\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\lib\\site-packages\\torch\\include\\THC\n> \"-IC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.1\\include\"\n> -IC:\\Users\\86189\\Anaconda3\\envs\\py36\\Include -D_GLIBCXX_USE_CXX11_ABI=0\n> -D__CUDA_NO_HALF_OPERATORS -D__CUDA_NO_HALF_CONVERSIONS\n> -D__CUDA_NO_HALF2_OPERATORS* -c\n> C:\\Users\\86189\\Desktop\\GANDissection\\netdissect\\upsegmodel\\prroi_pool\\src\\\n> prroi_pooling_gpu_impl.cu -o prroi_pooling_gpu_impl.cuda.o\\r\\nTraceback\n> (most recent call last):\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\runpy.py\", line 193, in\n> _run_module_as_main\\r\\n \"*main*\", mod_spec)\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\runpy.py\", line 85, in\n> _run_code\\r\\n exec(code, run_globals)\\r\\n File\n> \"C:\\Users\\86189\\Anaconda3\\envs\\pytorch\\Scripts\\cl.exe\\*main*.py\", line 4,\n> in \\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\cl\\bin\\cl.py\",\n> line 5, in \\r\\n from kombu import Connection\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\kombu\\*init*.py\",\n> line 81, in *getattr*\\r\\n module = *import*(object_origins[name], None,\n> None, [name])\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\kombu\\connection.py\",\n> line 23, in \\r\\n from kombu import exceptions\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\kombu\\exceptions.py\",\n> line 6, in \\r\\n from amqp import ChannelError, ConnectionError,\n> ResourceError\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\amqp\\*init*.py\",\n> line 33, in \\r\\n from .connection import Connection # noqa\\r\\n\n> File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\amqp\\connection.py\",\n> line 21, in \\r\\n from .transport import Transport\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\site-packages\\amqp\\transport.py\",\n> line 8, in \\r\\n import ssl\\r\\n File\n> \"c:\\users\\86189\\anaconda3\\envs\\pytorch\\lib\\ssl.py\", line 98, in \\r\\n import\n> _ssl # if we can't import it, let the error propagate\\r\\nImportError: DLL\n> load failed:\n> \\xd5\\xd2\\xb2\\xbb\\xb5\\xbd\\xd6\\xb8\\xb6\\xa8\\xb5\\xc4\\xc4\\xa3\\xbf\\xe9\\xa1\\xa3\\r\\nninja:\n> build stopped: subcommand failed.\\r\\n'\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/CSAILVision/gandissect/issues/18>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AA2MN2HHV72MWOGLQFDNXF3RQ23UNANCNFSM4M5IR3CQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/CSAILVision/gandissect/issues/comments/626872261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"davidbau","id":3458792,"node_id":"MDQ6VXNlcjM0NTg3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3458792?v=4","gravatar_id":"","url":"https://api.github.com/users/davidbau","html_url":"https://github.com/davidbau","followers_url":"https://api.github.com/users/davidbau/followers","following_url":"https://api.github.com/users/davidbau/following{/other_user}","gists_url":"https://api.github.com/users/davidbau/gists{/gist_id}","starred_url":"https://api.github.com/users/davidbau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidbau/subscriptions","organizations_url":"https://api.github.com/users/davidbau/orgs","repos_url":"https://api.github.com/users/davidbau/repos","events_url":"https://api.github.com/users/davidbau/events{/privacy}","received_events_url":"https://api.github.com/users/davidbau/received_events","type":"User","site_admin":false}}]