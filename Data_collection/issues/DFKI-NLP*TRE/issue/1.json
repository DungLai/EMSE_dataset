{"url":"https://api.github.com/repos/DFKI-NLP/TRE/issues/1","repository_url":"https://api.github.com/repos/DFKI-NLP/TRE","labels_url":"https://api.github.com/repos/DFKI-NLP/TRE/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/DFKI-NLP/TRE/issues/1/comments","events_url":"https://api.github.com/repos/DFKI-NLP/TRE/issues/1/events","html_url":"https://github.com/DFKI-NLP/TRE/issues/1","id":431299000,"node_id":"MDU6SXNzdWU0MzEyOTkwMDA=","number":1,"title":"UnboundLocalError for Semeval training","user":{"login":"BrambleXu","id":10768193,"node_id":"MDQ6VXNlcjEwNzY4MTkz","avatar_url":"https://avatars.githubusercontent.com/u/10768193?v=4","gravatar_id":"","url":"https://api.github.com/users/BrambleXu","html_url":"https://github.com/BrambleXu","followers_url":"https://api.github.com/users/BrambleXu/followers","following_url":"https://api.github.com/users/BrambleXu/following{/other_user}","gists_url":"https://api.github.com/users/BrambleXu/gists{/gist_id}","starred_url":"https://api.github.com/users/BrambleXu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BrambleXu/subscriptions","organizations_url":"https://api.github.com/users/BrambleXu/orgs","repos_url":"https://api.github.com/users/BrambleXu/repos","events_url":"https://api.github.com/users/BrambleXu/events{/privacy}","received_events_url":"https://api.github.com/users/BrambleXu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-04-10T04:30:27Z","updated_at":"2019-04-10T07:53:01Z","closed_at":"2019-04-10T07:51:53Z","author_association":"NONE","active_lock_reason":null,"body":"The training command works well for the tacred dataset. But it didn't work for the semeval dataset.\r\n\r\nI run the command below. `datasets/semeval_jsonl` stores the data.\r\n```\r\npython relation_extraction.py train \\\r\n  --write-model True \\\r\n  --masking-mode grammar_and_ner \\\r\n  --batch-size 8 \\\r\n  --max-epochs 3 \\\r\n  --lm-coef 0.5 \\\r\n  --learning-rate 5.25e-5 \\\r\n  --learning-rate-warmup 0.002 \\\r\n  --clf-pdrop 0.1 \\\r\n  --attn-pdrop 0.1 \\\r\n  --word-pdrop 0.0 \\\r\n  --dataset semeval_2010_task8 \\\r\n  --data-dir datasets/semeval_jsonl \\\r\n  --seed=0 \\\r\n  --log-dir ./logs/\r\n```\r\nThe error shows:\r\n```\r\nTraceback (most recent call last):\r\n  File \"relation_extraction.py\", line 453, in <module>\r\n    'evaluate': evaluate\r\n  File \"/anaconda3/envs/py36/lib/python3.6/site-packages/fire/core.py\", line 127, in Fire\r\n    component_trace = _Fire(component, args, context, name)\r\n  File \"/anaconda3/envs/py36/lib/python3.6/site-packages/fire/core.py\", line 366, in _Fire\r\n    component, remaining_args)\r\n  File \"/anaconda3/envs/py36/lib/python3.6/site-packages/fire/core.py\", line 542, in _CallCallable\r\n    result = fn(*varargs, **kwargs)\r\n  File \"relation_extraction.py\", line 302, in train\r\n    dev_file=dev_file)\r\n  File \"/Users/smap10/Project/RE-Task/TRE/datasets/semeval_2010_task8.py\", line 113, in fetch\r\n    SemEval2010Task8._load_from_jsonl(join(path_to_data, train_file), is_test=False, masking_mode=masking_mode)\r\n  File \"/Users/smap10/Project/RE-Task/TRE/datasets/semeval_2010_task8.py\", line 88, in _load_from_jsonl\r\n    example = SemEval2010Task8.apply_masking_mode(example, masking_mode)\r\n  File \"/Users/smap10/Project/RE-Task/TRE/datasets/semeval_2010_task8.py\", line 259, in apply_masking_mode\r\n    first_entity_replace, second_entity_replace = [f'{g}-{n}' for g, n in zip(grammar_type, ner_type)]\r\nUnboundLocalError: local variable 'grammar_type' referenced before assignment\r\n```\r\n","closed_by":{"login":"BrambleXu","id":10768193,"node_id":"MDQ6VXNlcjEwNzY4MTkz","avatar_url":"https://avatars.githubusercontent.com/u/10768193?v=4","gravatar_id":"","url":"https://api.github.com/users/BrambleXu","html_url":"https://github.com/BrambleXu","followers_url":"https://api.github.com/users/BrambleXu/followers","following_url":"https://api.github.com/users/BrambleXu/following{/other_user}","gists_url":"https://api.github.com/users/BrambleXu/gists{/gist_id}","starred_url":"https://api.github.com/users/BrambleXu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BrambleXu/subscriptions","organizations_url":"https://api.github.com/users/BrambleXu/orgs","repos_url":"https://api.github.com/users/BrambleXu/repos","events_url":"https://api.github.com/users/BrambleXu/events{/privacy}","received_events_url":"https://api.github.com/users/BrambleXu/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/DFKI-NLP/TRE/issues/1/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/DFKI-NLP/TRE/issues/1/timeline","performed_via_github_app":null,"state_reason":"completed"}