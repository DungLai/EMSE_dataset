[{"id":3397646207,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMzOTc2NDYyMDc=","url":"https://api.github.com/repos/Koziev/chatbot/issues/events/3397646207","actor":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"076489b0b93ed02509a6094fe9855546b2fa517b","commit_url":"https://api.github.com/repos/Koziev/chatbot/commits/076489b0b93ed02509a6094fe9855546b2fa517b","created_at":"2020-06-02T13:24:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/637543691","html_url":"https://github.com/Koziev/chatbot/issues/26#issuecomment-637543691","issue_url":"https://api.github.com/repos/Koziev/chatbot/issues/26","id":637543691,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzU0MzY5MQ==","user":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T13:30:33Z","updated_at":"2020-06-02T13:30:33Z","author_association":"OWNER","body":"Привет,\r\n\r\n>Не могли бы Вы поправить, чтобы образ можно было собрать самостоятельно? \r\n\r\nСпасибо за сообщение. Я забыл закомитить изменения в исходниках, поэтому была ошибка. Сейчас закомитил. Попробуйте собрать.\r\n\r\nНо есть еще один нюанс. В [строке 34](https://github.com/Koziev/chatbot/blob/master/dockerfile#L34) в образ добавляется содержимое архива с репозиторием [ruword2tags](https://github.com/Koziev/ruword2tags). То есть надо этот реп заранее выкачать локально и как-то так:\r\n\r\n```\r\ntar -cvzf ruword2tags.tar.gz --exclude \"ruword2tags/.git/*\"  -C /home/inkoziev/github/ ruword2tags\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/637543691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/637581524","html_url":"https://github.com/Koziev/chatbot/issues/26#issuecomment-637581524","issue_url":"https://api.github.com/repos/Koziev/chatbot/issues/26","id":637581524,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzU4MTUyNA==","user":{"login":"aqqosh","id":56831982,"node_id":"MDQ6VXNlcjU2ODMxOTgy","avatar_url":"https://avatars.githubusercontent.com/u/56831982?v=4","gravatar_id":"","url":"https://api.github.com/users/aqqosh","html_url":"https://github.com/aqqosh","followers_url":"https://api.github.com/users/aqqosh/followers","following_url":"https://api.github.com/users/aqqosh/following{/other_user}","gists_url":"https://api.github.com/users/aqqosh/gists{/gist_id}","starred_url":"https://api.github.com/users/aqqosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aqqosh/subscriptions","organizations_url":"https://api.github.com/users/aqqosh/orgs","repos_url":"https://api.github.com/users/aqqosh/repos","events_url":"https://api.github.com/users/aqqosh/events{/privacy}","received_events_url":"https://api.github.com/users/aqqosh/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T14:31:57Z","updated_at":"2020-06-02T14:31:57Z","author_association":"NONE","body":"Спасибо! \r\nТеперь ошибка поменялась: \r\n\r\n```\r\nUsing TensorFlow backend.\r\n2020-06-02 14:25:55 DEBUG    root  - Bot loading...\r\n2020-06-02 14:25:55 INFO     Wordchar2VectorModel  - Loading Wordchar2VectorModel model files\r\n2020-06-02 14:25:55 WARNING  tensorflow  - From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:517: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.\r\n\r\n2020-06-02 14:25:55 WARNING  tensorflow  - From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:74: The name tf.get_default_graph is deprecated. Please use tf.compat.v1.get_default_graph instead.\r\n\r\n2020-06-02 14:25:55 WARNING  tensorflow  - From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:4138: The name tf.random_uniform is deprecated. Please use tf.random.uniform instead.\r\n\r\n2020-06-02 14:25:55 WARNING  tensorflow  - From /usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py:3976: The name tf.nn.max_pool is deprecated. Please use tf.nn.max_pool2d instead.\r\n\r\nTraceback (most recent call last):\r\n  File \"../ruchatbot/frontend/console_chatbot.py\", line 165, in <module>\r\n    main()\r\n  File \"../ruchatbot/frontend/console_chatbot.py\", line 91, in main\r\n    text_utils.load_embeddings(w2v_dir=w2v_folder, wc2v_dir=models_folder)\r\n  File \"/chatbot/ruchatbot/bot/text_utils.py\", line 68, in load_embeddings\r\n    self.word_embeddings.load_models(w2v_dir)\r\n  File \"/chatbot/ruchatbot/bot/word_embeddings.py\", line 35, in load_models\r\n    self.wordchar2vector_model.load(models_folder)\r\n  File \"/chatbot/ruchatbot/bot/wordchar2vector_model.py\", line 39, in load\r\n    self.model.load_weights(weights_path)\r\n  File \"/usr/local/lib/python3.6/dist-packages/keras/engine/network.py\", line 1157, in load_weights\r\n    with h5py.File(filepath, mode='r') as f:\r\n  File \"/usr/local/lib/python3.6/dist-packages/h5py/_hl/files.py\", line 394, in __init__\r\n    swmr=swmr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/h5py/_hl/files.py\", line 170, in make_fid\r\n    fid = h5f.open(name, flags, fapl=fapl)\r\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\r\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\r\n  File \"h5py/h5f.pyx\", line 85, in h5py.h5f.open\r\nOSError: Unable to open file (unable to open file: name = '../tmp/wordchar2vector.model', errno = 2, error message = 'No such file or directory', flags = 0, o_flags = 0)\r\n```\r\nГде взять **wordchar2vector.model**?","reactions":{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/637581524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aqqosh","id":56831982,"node_id":"MDQ6VXNlcjU2ODMxOTgy","avatar_url":"https://avatars.githubusercontent.com/u/56831982?v=4","gravatar_id":"","url":"https://api.github.com/users/aqqosh","html_url":"https://github.com/aqqosh","followers_url":"https://api.github.com/users/aqqosh/followers","following_url":"https://api.github.com/users/aqqosh/following{/other_user}","gists_url":"https://api.github.com/users/aqqosh/gists{/gist_id}","starred_url":"https://api.github.com/users/aqqosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aqqosh/subscriptions","organizations_url":"https://api.github.com/users/aqqosh/orgs","repos_url":"https://api.github.com/users/aqqosh/repos","events_url":"https://api.github.com/users/aqqosh/events{/privacy}","received_events_url":"https://api.github.com/users/aqqosh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/637589082","html_url":"https://github.com/Koziev/chatbot/issues/26#issuecomment-637589082","issue_url":"https://api.github.com/repos/Koziev/chatbot/issues/26","id":637589082,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzU4OTA4Mg==","user":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T14:43:49Z","updated_at":"2020-06-02T14:43:49Z","author_association":"OWNER","body":">Где взять wordchar2vector.model?\r\n\r\nПроще всего вытащить их из [образа](https://github.com/Koziev/chatbot/releases/download/0.0.2.10-alpha/chatbot.tar.gz). Там еще куча моделей будет нужна, всё лежит в папке tmp.\r\n","reactions":{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/637589082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/638103815","html_url":"https://github.com/Koziev/chatbot/issues/26#issuecomment-638103815","issue_url":"https://api.github.com/repos/Koziev/chatbot/issues/26","id":638103815,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODEwMzgxNQ==","user":{"login":"aqqosh","id":56831982,"node_id":"MDQ6VXNlcjU2ODMxOTgy","avatar_url":"https://avatars.githubusercontent.com/u/56831982?v=4","gravatar_id":"","url":"https://api.github.com/users/aqqosh","html_url":"https://github.com/aqqosh","followers_url":"https://api.github.com/users/aqqosh/followers","following_url":"https://api.github.com/users/aqqosh/following{/other_user}","gists_url":"https://api.github.com/users/aqqosh/gists{/gist_id}","starred_url":"https://api.github.com/users/aqqosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aqqosh/subscriptions","organizations_url":"https://api.github.com/users/aqqosh/orgs","repos_url":"https://api.github.com/users/aqqosh/repos","events_url":"https://api.github.com/users/aqqosh/events{/privacy}","received_events_url":"https://api.github.com/users/aqqosh/received_events","type":"User","site_admin":false},"created_at":"2020-06-03T10:21:27Z","updated_at":"2020-06-03T10:21:27Z","author_association":"NONE","body":"Отлично, образ собрался и запустился, Вика начинает разговаривать.\r\nНа некоторых ответах вываливается ошибка с cuDNN.\r\n\r\nB:> Предлагаю заняться спортом\r\nH:> Давай\r\n\r\n```\r\n2020-06-03 10:15:25 INFO     SimpleAnsweringMachine  - push_phrase interlocutor=\"test\" phrase=\"Давай\"\r\n2020-06-03 10:15:26.117265: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2020-06-03 10:15:26.245631: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2020-06-03 10:15:26.611224: E tensorflow/stream_executor/cuda/cuda_dnn.cc:329] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\n2020-06-03 10:15:26.615839: E tensorflow/stream_executor/cuda/cuda_dnn.cc:329] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\n2020-06-03 10:15:26.619779: E tensorflow/stream_executor/cuda/cuda_dnn.cc:329] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\n2020-06-03 10:15:26.623461: E tensorflow/stream_executor/cuda/cuda_dnn.cc:329] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\nTraceback (most recent call last):\r\n  File \"../ruchatbot/frontend/console_chatbot.py\", line 165, in <module>\r\n    main()\r\n  File \"../ruchatbot/frontend/console_chatbot.py\", line 161, in main\r\n    bot.push_phrase(user_id, question)\r\n  File \"/chatbot/ruchatbot/bot/bot_personality.py\", line 63, in push_phrase\r\n    force_question_answering=self.force_question_answering)\r\n  File \"/chatbot/ruchatbot/bot/simple_answering_machine.py\", line 814, in push_phrase\r\n    interpreted_phrase = self.interpret_phrase(bot, session, question, internal_issuer)\r\n  File \"/chatbot/ruchatbot/bot/simple_answering_machine.py\", line 288, in interpret_phrase\r\n    if self.req_interpretation.require_interpretation(raw_phrase, self.text_utils):\r\n  File \"/chatbot/ruchatbot/bot/nn_req_interpretation.py\", line 65, in require_interpretation\r\n    y_pred = self.model.predict(x=X_batch, verbose=0)\r\n  File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training.py\", line 1169, in predict\r\n    steps=steps)\r\n  File \"/usr/local/lib/python3.6/dist-packages/keras/engine/training_arrays.py\", line 294, in predict_loop\r\n    batch_outs = f(ins_batch)\r\n  File \"/usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py\", line 2715, in __call__\r\n    return self._call(inputs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/keras/backend/tensorflow_backend.py\", line 2675, in _call\r\n    fetched = self._callable_fn(*array_vals)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1458, in __call__\r\n    run_metadata_ptr)\r\ntensorflow.python.framework.errors_impl.UnknownError: 2 root error(s) found.\r\n  (0) Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n         [[{{node shared_conv_2_1/convolution}}]]\r\n         [[output/Softmax/_1151]]\r\n  (1) Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n         [[{{node shared_conv_2_1/convolution}}]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n```","reactions":{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/638103815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aqqosh","id":56831982,"node_id":"MDQ6VXNlcjU2ODMxOTgy","avatar_url":"https://avatars.githubusercontent.com/u/56831982?v=4","gravatar_id":"","url":"https://api.github.com/users/aqqosh","html_url":"https://github.com/aqqosh","followers_url":"https://api.github.com/users/aqqosh/followers","following_url":"https://api.github.com/users/aqqosh/following{/other_user}","gists_url":"https://api.github.com/users/aqqosh/gists{/gist_id}","starred_url":"https://api.github.com/users/aqqosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aqqosh/subscriptions","organizations_url":"https://api.github.com/users/aqqosh/orgs","repos_url":"https://api.github.com/users/aqqosh/repos","events_url":"https://api.github.com/users/aqqosh/events{/privacy}","received_events_url":"https://api.github.com/users/aqqosh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/638132488","html_url":"https://github.com/Koziev/chatbot/issues/26#issuecomment-638132488","issue_url":"https://api.github.com/repos/Koziev/chatbot/issues/26","id":638132488,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODEzMjQ4OA==","user":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false},"created_at":"2020-06-03T11:21:56Z","updated_at":"2020-06-03T11:21:56Z","author_association":"OWNER","body":">На некоторых ответах вываливается ошибка с cuDNN.\r\n\r\nвыглядит так, будто tensorflow-gpu не дружит с установленной версией либы cuda dnn","reactions":{"url":"https://api.github.com/repos/Koziev/chatbot/issues/comments/638132488/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Koziev","id":5499222,"node_id":"MDQ6VXNlcjU0OTkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5499222?v=4","gravatar_id":"","url":"https://api.github.com/users/Koziev","html_url":"https://github.com/Koziev","followers_url":"https://api.github.com/users/Koziev/followers","following_url":"https://api.github.com/users/Koziev/following{/other_user}","gists_url":"https://api.github.com/users/Koziev/gists{/gist_id}","starred_url":"https://api.github.com/users/Koziev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Koziev/subscriptions","organizations_url":"https://api.github.com/users/Koziev/orgs","repos_url":"https://api.github.com/users/Koziev/repos","events_url":"https://api.github.com/users/Koziev/events{/privacy}","received_events_url":"https://api.github.com/users/Koziev/received_events","type":"User","site_admin":false}}]