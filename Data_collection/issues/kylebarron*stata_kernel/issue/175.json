{"url":"https://api.github.com/repos/kylebarron/stata_kernel/issues/175","repository_url":"https://api.github.com/repos/kylebarron/stata_kernel","labels_url":"https://api.github.com/repos/kylebarron/stata_kernel/issues/175/labels{/name}","comments_url":"https://api.github.com/repos/kylebarron/stata_kernel/issues/175/comments","events_url":"https://api.github.com/repos/kylebarron/stata_kernel/issues/175/events","html_url":"https://github.com/kylebarron/stata_kernel/issues/175","id":360163180,"node_id":"MDU6SXNzdWUzNjAxNjMxODA=","number":175,"title":"Send (svg or png) AND (pdf) image representations to frontend","user":{"login":"kylebarron","id":15164633,"node_id":"MDQ6VXNlcjE1MTY0NjMz","avatar_url":"https://avatars.githubusercontent.com/u/15164633?v=4","gravatar_id":"","url":"https://api.github.com/users/kylebarron","html_url":"https://github.com/kylebarron","followers_url":"https://api.github.com/users/kylebarron/followers","following_url":"https://api.github.com/users/kylebarron/following{/other_user}","gists_url":"https://api.github.com/users/kylebarron/gists{/gist_id}","starred_url":"https://api.github.com/users/kylebarron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylebarron/subscriptions","organizations_url":"https://api.github.com/users/kylebarron/orgs","repos_url":"https://api.github.com/users/kylebarron/repos","events_url":"https://api.github.com/users/kylebarron/events{/privacy}","received_events_url":"https://api.github.com/users/kylebarron/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/kylebarron/stata_kernel/milestones/2","html_url":"https://github.com/kylebarron/stata_kernel/milestone/2","labels_url":"https://api.github.com/repos/kylebarron/stata_kernel/milestones/2/labels","id":3631064,"node_id":"MDk6TWlsZXN0b25lMzYzMTA2NA==","number":2,"title":"1.6","description":null,"creator":{"login":"kylebarron","id":15164633,"node_id":"MDQ6VXNlcjE1MTY0NjMz","avatar_url":"https://avatars.githubusercontent.com/u/15164633?v=4","gravatar_id":"","url":"https://api.github.com/users/kylebarron","html_url":"https://github.com/kylebarron","followers_url":"https://api.github.com/users/kylebarron/followers","following_url":"https://api.github.com/users/kylebarron/following{/other_user}","gists_url":"https://api.github.com/users/kylebarron/gists{/gist_id}","starred_url":"https://api.github.com/users/kylebarron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylebarron/subscriptions","organizations_url":"https://api.github.com/users/kylebarron/orgs","repos_url":"https://api.github.com/users/kylebarron/repos","events_url":"https://api.github.com/users/kylebarron/events{/privacy}","received_events_url":"https://api.github.com/users/kylebarron/received_events","type":"User","site_admin":false},"open_issues":1,"closed_issues":9,"state":"open","created_at":"2018-09-07T02:16:58Z","updated_at":"2018-12-19T16:41:31Z","due_on":null,"closed_at":null},"comments":13,"created_at":"2018-09-14T05:37:47Z","updated_at":"2018-09-17T03:51:09Z","closed_at":"2018-09-17T03:51:09Z","author_association":"OWNER","active_lock_reason":null,"body":"## Overview \r\nThe quagmire of image formats is such:\r\n\r\n### SVG\r\n\r\n**Pro**\r\n- Vector format\r\n- Low file size\r\n- Viewable in all rich frontends\r\n\r\n**Con**\r\n- Can't be used with LaTeX without converting\r\n- Can't be created with earlier versions of Stata\r\n\r\n### PDF\r\n\r\n**Pro**\r\n- Possible to create on any platform and any version of Stata\r\n- Vector format\r\n- Low file size\r\n- Can be exported to LaTeX without conversion\r\n\r\n**Con**\r\n- Not viewable in _any_ frontend\r\n\r\n### PNG\r\n\r\n**Pro**\r\n- Possible to create in earlier versions of Stata\r\n- Viewable in all rich frontends\r\n\r\n**Con**\r\n- Not vector image format\r\n- Can't be created on Linux\r\n\r\n## Proposal\r\n\r\nI propose that `stata_kernel` always returns both the (SVG or PNG) _and_ the PDF representation of all images back to the frontend.\r\n\r\n1. When multiple mimetypes of the data are sent to Jupyter Notebook, it chooses which to show based on an internal preference hierarchy of mimetypes. But crucially, it doesn't discard alternate data. So when I send a `display_data` object that has _both_ `image/svg+xml` _and_ `application/pdf` mimetype objects, both are stored inside the `.ipynb` file. This means that when I export the Notebook to an HTML file, it uses the SVG version, but when I export to a PDF, it uses the PDF version of the image and doesn't touch the SVG data.\r\n\r\n  This means that on a Linux server without inkscape, I was able to view the SVG image in the Notebook and in the exported HTML, but I was still able to compile a LaTeX document with the image:\r\n![image](https://user-images.githubusercontent.com/15164633/45577105-6109fa00-b848-11e8-84df-4292bec517d1.png)\r\n\r\n2. Time to export an already-created image is negligible. With `rmsg` on, the time to export an SVG or PDF never reached 0.01s, for PNG it was between 0.02 and 0.04s. So the marginal time cost of exporting the PDF as well should be negligible.\r\n3. Image sizes are small. For the export of `scatter price mpg`, the PDF was 9.7KB, the SVG was 16KB, and the PNG was 22KB.","closed_by":{"login":"kylebarron","id":15164633,"node_id":"MDQ6VXNlcjE1MTY0NjMz","avatar_url":"https://avatars.githubusercontent.com/u/15164633?v=4","gravatar_id":"","url":"https://api.github.com/users/kylebarron","html_url":"https://github.com/kylebarron","followers_url":"https://api.github.com/users/kylebarron/followers","following_url":"https://api.github.com/users/kylebarron/following{/other_user}","gists_url":"https://api.github.com/users/kylebarron/gists{/gist_id}","starred_url":"https://api.github.com/users/kylebarron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylebarron/subscriptions","organizations_url":"https://api.github.com/users/kylebarron/orgs","repos_url":"https://api.github.com/users/kylebarron/repos","events_url":"https://api.github.com/users/kylebarron/events{/privacy}","received_events_url":"https://api.github.com/users/kylebarron/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/kylebarron/stata_kernel/issues/175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/kylebarron/stata_kernel/issues/175/timeline","performed_via_github_app":null,"state_reason":"completed"}