[{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/comments/702136693","html_url":"https://github.com/nanoporetech/taiyaki/issues/97#issuecomment-702136693","issue_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/97","id":702136693,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjEzNjY5Mw==","user":{"login":"tmassingham-ont","id":19410440,"node_id":"MDQ6VXNlcjE5NDEwNDQw","avatar_url":"https://avatars.githubusercontent.com/u/19410440?v=4","gravatar_id":"","url":"https://api.github.com/users/tmassingham-ont","html_url":"https://github.com/tmassingham-ont","followers_url":"https://api.github.com/users/tmassingham-ont/followers","following_url":"https://api.github.com/users/tmassingham-ont/following{/other_user}","gists_url":"https://api.github.com/users/tmassingham-ont/gists{/gist_id}","starred_url":"https://api.github.com/users/tmassingham-ont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmassingham-ont/subscriptions","organizations_url":"https://api.github.com/users/tmassingham-ont/orgs","repos_url":"https://api.github.com/users/tmassingham-ont/repos","events_url":"https://api.github.com/users/tmassingham-ont/events{/privacy}","received_events_url":"https://api.github.com/users/tmassingham-ont/received_events","type":"User","site_admin":false},"created_at":"2020-10-01T13:31:07Z","updated_at":"2020-10-01T13:31:07Z","author_association":"CONTRIBUTOR","body":"While the underlying model and algorithms are the same, the parameters of the model differ between Guppy and Taiyaki and there will be minor differences in the implementation.  Base calls are expected to be close, but not identical, as you say :smiley: \r\n\r\nThe flip-flop models in Taiyaki produce a structured output, more akin to a HMM than the independent positions model of the CTC, and needs to be decoded differently -- the algorithms in the [Fast CTC Decoder](https://github.com/nanoporetech/fast-ctc-decode) package aren't appropriate.   \"Viterbi\" for CTC is fast since you can take the maximum call at each position, whereas the flip-flop models require a dynamic programming pass.\r\n\r\nThe output of the network parameterises a conditional random field over flip-flop transitions.  Representing flop states by low-case and 'x' meaning appropriate flop state, the transition structure for the flip-flop CRF is:\r\n```\r\nTo \\ From  A C G T a c g t  \r\nA          0     ...     7\r\nC          8     ...    15\r\nG         16     ...    23\r\nT         24     ...    31\r\nx         32     ...    39\r\n```\r\nRather than directly finding the best-path through this CRF, we first calculate the posterior probability for each transition for each time point and decode through the result.","reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/comments/702136693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tmassingham-ont","id":19410440,"node_id":"MDQ6VXNlcjE5NDEwNDQw","avatar_url":"https://avatars.githubusercontent.com/u/19410440?v=4","gravatar_id":"","url":"https://api.github.com/users/tmassingham-ont","html_url":"https://github.com/tmassingham-ont","followers_url":"https://api.github.com/users/tmassingham-ont/followers","following_url":"https://api.github.com/users/tmassingham-ont/following{/other_user}","gists_url":"https://api.github.com/users/tmassingham-ont/gists{/gist_id}","starred_url":"https://api.github.com/users/tmassingham-ont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmassingham-ont/subscriptions","organizations_url":"https://api.github.com/users/tmassingham-ont/orgs","repos_url":"https://api.github.com/users/tmassingham-ont/repos","events_url":"https://api.github.com/users/tmassingham-ont/events{/privacy}","received_events_url":"https://api.github.com/users/tmassingham-ont/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/comments/706032070","html_url":"https://github.com/nanoporetech/taiyaki/issues/97#issuecomment-706032070","issue_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/97","id":706032070,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjAzMjA3MA==","user":{"login":"organic-chemistry","id":29305032,"node_id":"MDQ6VXNlcjI5MzA1MDMy","avatar_url":"https://avatars.githubusercontent.com/u/29305032?v=4","gravatar_id":"","url":"https://api.github.com/users/organic-chemistry","html_url":"https://github.com/organic-chemistry","followers_url":"https://api.github.com/users/organic-chemistry/followers","following_url":"https://api.github.com/users/organic-chemistry/following{/other_user}","gists_url":"https://api.github.com/users/organic-chemistry/gists{/gist_id}","starred_url":"https://api.github.com/users/organic-chemistry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/organic-chemistry/subscriptions","organizations_url":"https://api.github.com/users/organic-chemistry/orgs","repos_url":"https://api.github.com/users/organic-chemistry/repos","events_url":"https://api.github.com/users/organic-chemistry/events{/privacy}","received_events_url":"https://api.github.com/users/organic-chemistry/received_events","type":"User","site_admin":false},"created_at":"2020-10-09T07:56:55Z","updated_at":"2020-10-09T07:56:55Z","author_association":"NONE","body":"Hello,\r\nThank you for explaining these details.\r\nHave you documented somewhere the effect on the flipflop pass on the quality of the final result?\r\n![image](https://user-images.githubusercontent.com/29305032/95557273-dbe87380-0a14-11eb-8d68-a929e2589b36.png)\r\nThis graph which comes from [Performance of neural network basecalling tools for Oxford Nanopore sequencing](https://genomebiology.biomedcentral.com/articles/10.1186/s13059-019-1727-y) compare several networks.\r\nIf I understand correctly Taiyaki is similar to Flappie and with respect to the basic version of guppy obtain better read qscore,\r\nat the expense of beiing about 100 times slowers.\r\nBut the version of guppy with flipflop is 10 times faster than flappie. Is it related to the weight size of guppy which are smaller ?\r\n","reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/comments/706032070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"organic-chemistry","id":29305032,"node_id":"MDQ6VXNlcjI5MzA1MDMy","avatar_url":"https://avatars.githubusercontent.com/u/29305032?v=4","gravatar_id":"","url":"https://api.github.com/users/organic-chemistry","html_url":"https://github.com/organic-chemistry","followers_url":"https://api.github.com/users/organic-chemistry/followers","following_url":"https://api.github.com/users/organic-chemistry/following{/other_user}","gists_url":"https://api.github.com/users/organic-chemistry/gists{/gist_id}","starred_url":"https://api.github.com/users/organic-chemistry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/organic-chemistry/subscriptions","organizations_url":"https://api.github.com/users/organic-chemistry/orgs","repos_url":"https://api.github.com/users/organic-chemistry/repos","events_url":"https://api.github.com/users/organic-chemistry/events{/privacy}","received_events_url":"https://api.github.com/users/organic-chemistry/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/comments/706044567","html_url":"https://github.com/nanoporetech/taiyaki/issues/97#issuecomment-706044567","issue_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/97","id":706044567,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjA0NDU2Nw==","user":{"login":"tmassingham-ont","id":19410440,"node_id":"MDQ6VXNlcjE5NDEwNDQw","avatar_url":"https://avatars.githubusercontent.com/u/19410440?v=4","gravatar_id":"","url":"https://api.github.com/users/tmassingham-ont","html_url":"https://github.com/tmassingham-ont","followers_url":"https://api.github.com/users/tmassingham-ont/followers","following_url":"https://api.github.com/users/tmassingham-ont/following{/other_user}","gists_url":"https://api.github.com/users/tmassingham-ont/gists{/gist_id}","starred_url":"https://api.github.com/users/tmassingham-ont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmassingham-ont/subscriptions","organizations_url":"https://api.github.com/users/tmassingham-ont/orgs","repos_url":"https://api.github.com/users/tmassingham-ont/repos","events_url":"https://api.github.com/users/tmassingham-ont/events{/privacy}","received_events_url":"https://api.github.com/users/tmassingham-ont/received_events","type":"User","site_admin":false},"created_at":"2020-10-09T08:23:40Z","updated_at":"2020-10-09T08:23:40Z","author_association":"CONTRIBUTOR","body":"The base calling accuracy of the ONT platform has been improving rapidly and, through no fault of the authors, that paper was out of date before it was published.\r\n\r\nTaiyaki is intended for training and experimenting with new base calling models, and can be used as base caller if necessary.  Guppy is a carefully optimised production-quality implementation of base calling and should be used in preference, Flappie is a stand-alone research implementation of some networks and does not have GPU acceleration.","reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/comments/706044567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tmassingham-ont","id":19410440,"node_id":"MDQ6VXNlcjE5NDEwNDQw","avatar_url":"https://avatars.githubusercontent.com/u/19410440?v=4","gravatar_id":"","url":"https://api.github.com/users/tmassingham-ont","html_url":"https://github.com/tmassingham-ont","followers_url":"https://api.github.com/users/tmassingham-ont/followers","following_url":"https://api.github.com/users/tmassingham-ont/following{/other_user}","gists_url":"https://api.github.com/users/tmassingham-ont/gists{/gist_id}","starred_url":"https://api.github.com/users/tmassingham-ont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmassingham-ont/subscriptions","organizations_url":"https://api.github.com/users/tmassingham-ont/orgs","repos_url":"https://api.github.com/users/tmassingham-ont/repos","events_url":"https://api.github.com/users/tmassingham-ont/events{/privacy}","received_events_url":"https://api.github.com/users/tmassingham-ont/received_events","type":"User","site_admin":false}},{"id":3859023159,"node_id":"MDExOkNsb3NlZEV2ZW50Mzg1OTAyMzE1OQ==","url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/events/3859023159","actor":{"login":"tmassingham-ont","id":19410440,"node_id":"MDQ6VXNlcjE5NDEwNDQw","avatar_url":"https://avatars.githubusercontent.com/u/19410440?v=4","gravatar_id":"","url":"https://api.github.com/users/tmassingham-ont","html_url":"https://github.com/tmassingham-ont","followers_url":"https://api.github.com/users/tmassingham-ont/followers","following_url":"https://api.github.com/users/tmassingham-ont/following{/other_user}","gists_url":"https://api.github.com/users/tmassingham-ont/gists{/gist_id}","starred_url":"https://api.github.com/users/tmassingham-ont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmassingham-ont/subscriptions","organizations_url":"https://api.github.com/users/tmassingham-ont/orgs","repos_url":"https://api.github.com/users/tmassingham-ont/repos","events_url":"https://api.github.com/users/tmassingham-ont/events{/privacy}","received_events_url":"https://api.github.com/users/tmassingham-ont/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-10-09T08:23:48Z","state_reason":null,"performed_via_github_app":null}]