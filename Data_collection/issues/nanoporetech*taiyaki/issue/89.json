{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/89","repository_url":"https://api.github.com/repos/nanoporetech/taiyaki","labels_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/89/labels{/name}","comments_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/89/comments","events_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/89/events","html_url":"https://github.com/nanoporetech/taiyaki/issues/89","id":682526416,"node_id":"MDU6SXNzdWU2ODI1MjY0MTY=","number":89,"title":"error with newly created checkpoint file","user":{"login":"DeanH10","id":67422002,"node_id":"MDQ6VXNlcjY3NDIyMDAy","avatar_url":"https://avatars.githubusercontent.com/u/67422002?v=4","gravatar_id":"","url":"https://api.github.com/users/DeanH10","html_url":"https://github.com/DeanH10","followers_url":"https://api.github.com/users/DeanH10/followers","following_url":"https://api.github.com/users/DeanH10/following{/other_user}","gists_url":"https://api.github.com/users/DeanH10/gists{/gist_id}","starred_url":"https://api.github.com/users/DeanH10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DeanH10/subscriptions","organizations_url":"https://api.github.com/users/DeanH10/orgs","repos_url":"https://api.github.com/users/DeanH10/repos","events_url":"https://api.github.com/users/DeanH10/events{/privacy}","received_events_url":"https://api.github.com/users/DeanH10/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-08-20T08:30:10Z","updated_at":"2021-02-10T00:06:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello\r\nI am trying to create a checkpoint file from the guppy V4011 jsn model.  I adapted the JSON_to_checkpoint.py to not use tanh activations anymore but swish activations. This resulted in the creation of a checkpoint file. However, when running the checkpoint in taiyaki I recieved the following error:\r\nAssertionError: Attempted to load unversioned model checkpoint.\r\n            Please run misc/upgrade_model.py\r\n\r\nWhen running upgrade_model.py with my previously created checkpoint file I receive the following output and error:\r\nUpgrading to version 1\r\nAdded metadata.  Assumed reads are standardized and not reversed\r\nChecking convolution layer\r\nChecking convolution layer\r\nChecking convolution layer\r\nChecking GlobalNormFlipFlop layer\r\nUpgrading to version 2\r\nAdding activation (tanh) and scale (5.0) to GlobalNormFlipFlop\r\nTraceback (most recent call last):\r\n  File \"/opt/taiyaki/misc/upgrade_model.py\", line 96, in <module>\r\n    main()\r\n  File \"/opt/taiyaki/misc/upgrade_model.py\", line 87, in main\r\n    upgraded |= convert_1_to_2(net)\r\n  File \"/opt/taiyaki/misc/upgrade_model.py\", line 70, in convert_1_to_2\r\n    assert not hasattr(layer, 'activation'), 'Inconsistent model!' \r\n\r\nI would like to know how to avoid all these errors to create a usable checkpoint file.\r\nI would also like to know what upgrade_model.py actually does and what the errors mean because those things are rather unclear to me.\r\n\r\nlooking forward to your response.\r\nCheers,\r\nDean\r\n\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/89/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/89/timeline","performed_via_github_app":null,"state_reason":null}