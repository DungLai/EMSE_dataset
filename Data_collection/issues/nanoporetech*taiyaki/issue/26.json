{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/26","repository_url":"https://api.github.com/repos/nanoporetech/taiyaki","labels_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/26/labels{/name}","comments_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/26/comments","events_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/26/events","html_url":"https://github.com/nanoporetech/taiyaki/issues/26","id":454223766,"node_id":"MDU6SXNzdWU0NTQyMjM3NjY=","number":26,"title":"Reads reported by taiyaki basecall.py are close to random while guppy with same model works as expected","user":{"login":"lpryszcz","id":988152,"node_id":"MDQ6VXNlcjk4ODE1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/988152?v=4","gravatar_id":"","url":"https://api.github.com/users/lpryszcz","html_url":"https://github.com/lpryszcz","followers_url":"https://api.github.com/users/lpryszcz/followers","following_url":"https://api.github.com/users/lpryszcz/following{/other_user}","gists_url":"https://api.github.com/users/lpryszcz/gists{/gist_id}","starred_url":"https://api.github.com/users/lpryszcz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lpryszcz/subscriptions","organizations_url":"https://api.github.com/users/lpryszcz/orgs","repos_url":"https://api.github.com/users/lpryszcz/repos","events_url":"https://api.github.com/users/lpryszcz/events{/privacy}","received_events_url":"https://api.github.com/users/lpryszcz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-06-10T15:18:34Z","updated_at":"2019-06-25T10:57:59Z","closed_at":"2019-06-25T10:57:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi, I've observed weird behaviour of `basecall.py` trained on RNA reads with modifications - the accuracy of base-calling is close to random (1). Interestingly, Guppy works pretty well with the same model (2), better than with the default model shipped with Guppy (3). I'm expecting reads with lengths around 2.2-2.7 kb. \r\nCan you please explain this? \r\nI guess it makes no sense to look at modifications in hdf5 file produced by `basecall.py`, since the sequence prediction isn't accurate, right? \r\n\r\n1. basecall.py from taiyaki v4.1.0 using new model\r\n```\r\nbasecall.py --device cuda:0 --alphabet ACGU --modified_base_output taiyaki.$s/$n.hdf5 $d $s.train2/model_final.checkpoint >  taiyaki.$s/$n.fa\r\n```\r\n![image](https://user-images.githubusercontent.com/988152/59204996-25674b00-8ba2-11e9-855a-0da744ed2b1f.png)\r\n\r\n2. Guppy 3.1.5 using the same model trained with taiyaki v4.1.0\r\n```\r\nm=$s.train2/model_final.checkpoint; dump_json.py $m > $m.json\r\nguppy_basecaller --device cuda:0 -c rna_r9.4.1_70bps_hac.cfg -m $m.json --compress_fastq --fast5_out -ri $d -s guppy3.$s/$n\r\n```\r\n![image](https://user-images.githubusercontent.com/988152/59204953-12ed1180-8ba2-11e9-94c3-4faa75349bcd.png)\r\n\r\n3. Guppy 3.1.5 using default RNA model\r\n```\r\nguppy_basecaller --device cuda:0 -c rna_r9.4.1_70bps_hac.cfg --num_callers 4 --compress_fastq --fast5_out -ri $d -s guppy3/$d\r\n```\r\n![image](https://user-images.githubusercontent.com/988152/59205414-277dd980-8ba3-11e9-99ed-934f91ddf751.png)\r\n\r\n","closed_by":{"login":"lpryszcz","id":988152,"node_id":"MDQ6VXNlcjk4ODE1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/988152?v=4","gravatar_id":"","url":"https://api.github.com/users/lpryszcz","html_url":"https://github.com/lpryszcz","followers_url":"https://api.github.com/users/lpryszcz/followers","following_url":"https://api.github.com/users/lpryszcz/following{/other_user}","gists_url":"https://api.github.com/users/lpryszcz/gists{/gist_id}","starred_url":"https://api.github.com/users/lpryszcz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lpryszcz/subscriptions","organizations_url":"https://api.github.com/users/lpryszcz/orgs","repos_url":"https://api.github.com/users/lpryszcz/repos","events_url":"https://api.github.com/users/lpryszcz/events{/privacy}","received_events_url":"https://api.github.com/users/lpryszcz/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/26/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/26/timeline","performed_via_github_app":null,"state_reason":"completed"}