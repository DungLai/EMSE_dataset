{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/111","repository_url":"https://api.github.com/repos/nanoporetech/taiyaki","labels_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/111/labels{/name}","comments_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/111/comments","events_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/111/events","html_url":"https://github.com/nanoporetech/taiyaki/issues/111","id":844824987,"node_id":"MDU6SXNzdWU4NDQ4MjQ5ODc=","number":111,"title":"Scripts to extract mod info from hdf5 files","user":{"login":"callumparr","id":41637575,"node_id":"MDQ6VXNlcjQxNjM3NTc1","avatar_url":"https://avatars.githubusercontent.com/u/41637575?v=4","gravatar_id":"","url":"https://api.github.com/users/callumparr","html_url":"https://github.com/callumparr","followers_url":"https://api.github.com/users/callumparr/followers","following_url":"https://api.github.com/users/callumparr/following{/other_user}","gists_url":"https://api.github.com/users/callumparr/gists{/gist_id}","starred_url":"https://api.github.com/users/callumparr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/callumparr/subscriptions","organizations_url":"https://api.github.com/users/callumparr/orgs","repos_url":"https://api.github.com/users/callumparr/repos","events_url":"https://api.github.com/users/callumparr/events{/privacy}","received_events_url":"https://api.github.com/users/callumparr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-03-30T16:20:46Z","updated_at":"2021-04-12T17:57:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Is there any scripts or example code to extract mod probabilities outputted to hdf5 by the basecaller.py script using h5py. I do not have any experience with python code and I remember seeing some snippet about this but no longer can find. \r\n\r\nSomething about importing with h5py and then extracting.\r\n```\r\nimport h5py\r\nimport numpy as np\r\n\r\nwith h5py.File('/home/minion/Documents/multi_reads/taiyaki_output/5EU_RNA_only_fastq/5EU_RNA_only_modbase_basecalls.hdf5', 'r') as h5:\r\n        cond_logprobs = h5['/Reads/ffff85d3-dc1e-42d5-8ce8-2357112c1d86'][:120]\r\n        print(h5['mod_long_names'][()]\r\n\r\nprint(np.where(~np.isnan(cond_longprobs))[0])\r\n\r\nprint(np.where(cond_probs[:,1] > np.log(0.5)))\r\n\r\nprint(np.where(cond_probs[:,1] > np.log(0.9)))\r\n\r\nprint(np.exp(np.nanmax(cond_probs[:,0])))\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/111/timeline","performed_via_github_app":null,"state_reason":null}