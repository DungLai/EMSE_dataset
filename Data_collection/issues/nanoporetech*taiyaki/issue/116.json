{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/116","repository_url":"https://api.github.com/repos/nanoporetech/taiyaki","labels_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/116/labels{/name}","comments_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/116/comments","events_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/116/events","html_url":"https://github.com/nanoporetech/taiyaki/issues/116","id":940023876,"node_id":"MDU6SXNzdWU5NDAwMjM4NzY=","number":116,"title":"Error during training","user":{"login":"gmoneyomics","id":47872912,"node_id":"MDQ6VXNlcjQ3ODcyOTEy","avatar_url":"https://avatars.githubusercontent.com/u/47872912?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoneyomics","html_url":"https://github.com/gmoneyomics","followers_url":"https://api.github.com/users/gmoneyomics/followers","following_url":"https://api.github.com/users/gmoneyomics/following{/other_user}","gists_url":"https://api.github.com/users/gmoneyomics/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoneyomics/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoneyomics/subscriptions","organizations_url":"https://api.github.com/users/gmoneyomics/orgs","repos_url":"https://api.github.com/users/gmoneyomics/repos","events_url":"https://api.github.com/users/gmoneyomics/events{/privacy}","received_events_url":"https://api.github.com/users/gmoneyomics/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-07-08T16:20:10Z","updated_at":"2021-07-08T21:11:03Z","closed_at":"2021-07-08T21:11:03Z","author_association":"NONE","active_lock_reason":null,"body":"Hi I am trying to generate a basecalling model that replaces modified U with canonical U. Every U in my sample is modified and I would like to train the basecaller to just detect it as a canonical U. I created a 100% modified E. Coli IVT training set and I planned on training the mGru_flipflop.py model replaces modified U with canonical U. When I run the training I get the following error. Is there reason so few chunks are passing filters?\r\n\r\n```\r\n* \"/home/dnanexus/taiyaki/venv/bin/train_flipflop.py --device 0 /home/dnanexus/taiyaki/models/mGru_flipflop.py --outdir /home/dnanexus/out/training /home/dnanexus/out/mapped_reads.hdf5\"\r\n* Started on 2021-07-08 05:39:23.256639\r\n* Loading data from /home/dnanexus/out/mapped_reads.hdf5\r\n* Per read file MD5 faf432310514d50476ece5e4fdd17536\r\n* Reads not filtered by id\r\n* Using alphabet definition: canonical alphabet ACGU and no modified bases\r\n* Loaded 3788 reads.\r\n* Reading network from /home/dnanexus/taiyaki/models/mGru_flipflop.py\r\n* Network has 4458280 parameters.\r\n* Loaded standard (canonical bases-only) model.\r\n* Dumping initial model\r\n* Loading model onto device\r\n* Estimating filter parameters from training data\r\n* Learning rate increases from 1.00e-04 to 4.00e-03 over 200 iterations using cosine schedule.\r\n* Then learning rate decreases from 4.00e-03 to 1.00e-04 over 149800 iterations using cosine schedule.\r\n* Gradients will be clipped (by value) at 0.00 MADs above the median of the last 1000 gradient maximums.\r\n* Sampled 100000 chunks: median(mean_dwell)=66.27, mad(mean_dwell)=47.37\r\n* Standard loss reporting from 37 validation reads held out of training. \r\n* Warning: only 2 chunks passed filters (asked for 128).\r\n* Warning: only 1 chunks passed filters (asked for 128).\r\n* Warning: only 2 chunks passed filters (asked for 128).\r\n* Warning: only 4 chunks passed filters (asked for 128).\r\n* Warning: only 0 chunks passed filters (asked for 128).\r\nTraceback (most recent call last):\r\n  File \"/home/dnanexus/taiyaki/venv/bin/train_flipflop.py\", line 7, in <module>\r\n    exec(compile(f.read(), __file__, 'exec'))\r\n  File \"/home/dnanexus/taiyaki/bin/train_flipflop.py\", line 703, in <module>\r\n    main(get_train_flipflop_parser().parse_args())\r\n  File \"/home/dnanexus/taiyaki/bin/train_flipflop.py\", line 695, in main\r\n    logs.main)\r\n```\r\n","closed_by":{"login":"gmoneyomics","id":47872912,"node_id":"MDQ6VXNlcjQ3ODcyOTEy","avatar_url":"https://avatars.githubusercontent.com/u/47872912?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoneyomics","html_url":"https://github.com/gmoneyomics","followers_url":"https://api.github.com/users/gmoneyomics/followers","following_url":"https://api.github.com/users/gmoneyomics/following{/other_user}","gists_url":"https://api.github.com/users/gmoneyomics/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoneyomics/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoneyomics/subscriptions","organizations_url":"https://api.github.com/users/gmoneyomics/orgs","repos_url":"https://api.github.com/users/gmoneyomics/repos","events_url":"https://api.github.com/users/gmoneyomics/events{/privacy}","received_events_url":"https://api.github.com/users/gmoneyomics/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nanoporetech/taiyaki/issues/116/timeline","performed_via_github_app":null,"state_reason":"completed"}