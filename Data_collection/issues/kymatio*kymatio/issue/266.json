{"url":"https://api.github.com/repos/kymatio/kymatio/issues/266","repository_url":"https://api.github.com/repos/kymatio/kymatio","labels_url":"https://api.github.com/repos/kymatio/kymatio/issues/266/labels{/name}","comments_url":"https://api.github.com/repos/kymatio/kymatio/issues/266/comments","events_url":"https://api.github.com/repos/kymatio/kymatio/issues/266/events","html_url":"https://github.com/kymatio/kymatio/issues/266","id":391788498,"node_id":"MDU6SXNzdWUzOTE3ODg0OTg=","number":266,"title":"ENH+REF backend logistics + mechanics","user":{"login":"eickenberg","id":1306635,"node_id":"MDQ6VXNlcjEzMDY2MzU=","avatar_url":"https://avatars.githubusercontent.com/u/1306635?v=4","gravatar_id":"","url":"https://api.github.com/users/eickenberg","html_url":"https://github.com/eickenberg","followers_url":"https://api.github.com/users/eickenberg/followers","following_url":"https://api.github.com/users/eickenberg/following{/other_user}","gists_url":"https://api.github.com/users/eickenberg/gists{/gist_id}","starred_url":"https://api.github.com/users/eickenberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eickenberg/subscriptions","organizations_url":"https://api.github.com/users/eickenberg/orgs","repos_url":"https://api.github.com/users/eickenberg/repos","events_url":"https://api.github.com/users/eickenberg/events{/privacy}","received_events_url":"https://api.github.com/users/eickenberg/received_events","type":"User","site_admin":false},"labels":[{"id":1076176420,"node_id":"MDU6TGFiZWwxMDc2MTc2NDIw","url":"https://api.github.com/repos/kymatio/kymatio/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-12-17T16:23:57Z","updated_at":"2019-07-23T14:29:47Z","closed_at":"2019-07-23T14:29:47Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"Currently, our backend structure is set up at import and cannot be changed after import. This is because at import, the `backend/__init__.py` checks which backend is being used, and just imports `*` from the corresponding backend file. This is then fixed for the whole runtime.\r\n\r\nWays of implementing backends: It's basically about when the decision is made:\r\n- at install\r\n- at import\r\n- at instantiation\r\n\r\nI'd like to advocate changing to the latter. This would have the advantage of being able to load whichever backend we wanted, and even used two at the same time. That might come in handy. It would be especially good for testing, because then we could compare things within one script.\r\n\r\nOf course, having backend choice at instantiation can be pushed even further to having a different backend for each piece of the scattering transform. This might be pushing it a bit, but I see it as a way of implementing the above.\r\n\r\nKey points for being able to do this:\r\n- everything backend-specific must be confined to the backend files. The backend package is only ever imported in there.\r\n- we need a very smart `check_array` function that can figure out which type of array we are getting as input, perform conversion if requested or raise an error if wrong format is received. This function will take some work to write\r\n- Without noticing, I think our code is infused with pytorch-specific commands. We'd need to clean that up.\r\n- we can also easily say for some functionality \"hey this isn't implemented yet for this backend\"\r\n\r\nAdvantages of doing this:\r\n- our software doesn't die when a framework becomes unpopular\r\n- it can be used with the major frameworks\r\n- we are forced to think about semantics of the subcomponents of the transforms and to keep our files tidy\r\n\r\nDisadvantages:\r\n- it might not be super stable if coded in a rushed manner\r\n\r\n","closed_by":{"login":"edouardoyallon","id":4263222,"node_id":"MDQ6VXNlcjQyNjMyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/4263222?v=4","gravatar_id":"","url":"https://api.github.com/users/edouardoyallon","html_url":"https://github.com/edouardoyallon","followers_url":"https://api.github.com/users/edouardoyallon/followers","following_url":"https://api.github.com/users/edouardoyallon/following{/other_user}","gists_url":"https://api.github.com/users/edouardoyallon/gists{/gist_id}","starred_url":"https://api.github.com/users/edouardoyallon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edouardoyallon/subscriptions","organizations_url":"https://api.github.com/users/edouardoyallon/orgs","repos_url":"https://api.github.com/users/edouardoyallon/repos","events_url":"https://api.github.com/users/edouardoyallon/events{/privacy}","received_events_url":"https://api.github.com/users/edouardoyallon/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/kymatio/kymatio/issues/266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/kymatio/kymatio/issues/266/timeline","performed_via_github_app":null,"state_reason":"completed"}