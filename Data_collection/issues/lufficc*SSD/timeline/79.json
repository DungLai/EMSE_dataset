[{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510158312","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-510158312","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":510158312,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDE1ODMxMg==","user":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"created_at":"2019-07-10T17:37:59Z","updated_at":"2019-07-10T17:37:59Z","author_association":"OWNER","body":"Since the return values are not  tuples or lists, it cannot be directly exported. But a model wrapper will solve this(You can ignore some warnings).\r\n\r\n```python\r\nfrom ssd.config import cfg\r\nfrom ssd.modeling.detector import build_detection_model\r\nimport torch\r\nfrom torch import nn\r\n\r\n\r\nclass ONNXExportableModel(torch.nn.Module):\r\n    def __init__(self, model):\r\n        super().__init__()\r\n        self.model = model\r\n\r\n    def forward(self, *args, **kwargs):\r\n        detections = self.model(*args, **kwargs)\r\n        detections = [(det['boxes'], det['labels'], det['scores']) for det in detections]\r\n        return detections\r\n\r\n\r\nif __name__ == '__main__':\r\n    cfg.merge_from_file('configs/vgg_ssd300_voc0712.yaml')\r\n    model = build_detection_model(cfg)\r\n    state_dict = torch.load('weights/vgg_ssd300_voc0712.pth', map_location=lambda storage, loc: storage)['model']\r\n    model.load_state_dict(state_dict)\r\n    dummy_input = torch.randn(1, 3, 300, 300, device='cpu')\r\n    torch.onnx.export(ONNXExportableModel(model), dummy_input, 'ssdpytorch.onnx', verbose=True)\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510158312/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false}},{"id":2473359631,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0NzMzNTk2MzE=","url":"https://api.github.com/repos/lufficc/SSD/issues/events/2473359631","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-10T17:39:18Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510233450","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-510233450","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":510233450,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDIzMzQ1MA==","user":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false},"created_at":"2019-07-10T21:20:33Z","updated_at":"2019-07-10T21:20:33Z","author_association":"NONE","body":"Thanks for your solution, @lufficc . I suppose, that you speak about these warnings:\r\n\r\nSSD/ssd/modeling/anchors/prior_box.py:51: TracerWarning: torch.tensor results are registered as constants in the trace. You can safely ignore this warning if you use this function to create tensors out of constant variables that would be the same every time you call this function. In any other case, this might cause the trace to be incorrect.\r\n\r\n  priors = torch.tensor(priors)\r\n\r\nSSD/ssd/modeling/box_head/inference.py:19: TracerWarning: Converting a tensor to a Python index might cause the trace to be incorrect. We can't record the data flow of Python values, so this value will be treated as a constant in the future. This means that the trace might not generalize to other inputs!\r\n\r\n  for batch_id in range(batch_size):\r\n\r\nSSD/ssd/modeling/box_head/inference.py:25: TracerWarning: Converting a tensor to a Python index might cause the trace to be incorrect. We can't record the data flow of Python values, so this value will be treated as a constant in the future. This means that the trace might not generalize to other inputs!\r\n\r\n  for class_id in range(1, per_img_scores.size(1)):  # skip background\r\n\r\nSSD/ssd/modeling/box_head/inference.py:29: TracerWarning: Converting a tensor to a Python boolean might cause the trace to be incorrect. We can't record the data flow of Python values, so this value will be treated as a constant in the future. This means that the trace might not generalize to other inputs!\r\n\r\n  if scores.size(0) == 0:\r\n\r\nSSD/ssd/modeling/box_head/inference.py:54: TracerWarning: Converting a tensor to a Python boolean might cause the trace to be incorrect. We can't record the data flow of Python values, so this value will be treated as a constant in the future. This means that the trace might not generalize to other inputs!\r\n\r\n  if processed_boxes.size(0) > self.cfg.TEST.MAX_PER_IMAGE > 0:\r\n\r\nUnfortunately, they can't be ignored, just visualize obtained ONNX model using [Netron](https://lutzroeder.github.io/netron/)","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510233450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false}},{"id":2473927548,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ3MzkyNzU0OA==","url":"https://api.github.com/repos/lufficc/SSD/issues/events/2473927548","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-10T21:20:33Z","performed_via_github_app":null},{"id":2473927549,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0NzM5Mjc1NDk=","url":"https://api.github.com/repos/lufficc/SSD/issues/events/2473927549","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-10T21:20:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510322384","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-510322384","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":510322384,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDMyMjM4NA==","user":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T04:15:48Z","updated_at":"2019-07-11T04:16:40Z","author_association":"OWNER","body":"I think the `PostProcessor` destroy the graph, since it's dynamic. After commented this line, I got the correct graph(ONNXExportableModel is no needed). https://github.com/lufficc/SSD/blob/a567ada6b441c027042ff2fb990d80ed60b18054/ssd/modeling/box_head/box_head.py#L48\r\n\r\n```python\r\n# detections = self.post_processor(detections) \r\n```\r\n\r\n![ssdpytorch onnx](https://user-images.githubusercontent.com/20706332/61021681-16f49500-a3d5-11e9-8c23-7f10f4a125e3.png)\r\n","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510322384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510351998","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-510351998","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":510351998,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDM1MTk5OA==","user":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T06:42:09Z","updated_at":"2019-07-11T06:42:49Z","author_association":"NONE","body":"That works fine with SSD300, with SSD512 got the following:\r\n` File \"SSD/ssd/modeling/box_head/box_head.py\", line 27, in forward\r\n    return self._forward_test(cls_logits, bbox_pred)\r\n  File \"SSD/ssd/modeling/box_head/box_head.py\", line 44, in _forward_test\r\n    bbox_pred, self.priors, self.cfg.MODEL.CENTER_VARIANCE, self.cfg.MODEL.SIZE_VARIANCE\r\n  File \"SSD/ssd/utils/box_utils.py\", line 26, in convert_locations_to_boxes\r\n    locations[..., :2] * center_variance * priors[..., 2:] + priors[..., :2],\r\nRuntimeError: The size of tensor a (8766) must match the size of tensor b (24564) at non-singleton dimension 1`\r\nAre there CENTER_VARIANCE and SIZE_VARIANCE in ssd/config/defaults.py that should be changed?","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510351998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510353629","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-510353629","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":510353629,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDM1MzYyOQ==","user":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T06:48:35Z","updated_at":"2019-07-11T06:48:35Z","author_association":"OWNER","body":"try `dummy_input = torch.randn(1, 3, 512, 512, device='cpu')`","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510353629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510371684","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-510371684","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":510371684,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDM3MTY4NA==","user":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false},"created_at":"2019-07-11T07:48:19Z","updated_at":"2019-07-11T07:48:19Z","author_association":"NONE","body":"Thanks a lot! That works, though onnx model has two outputs with shapes `float32[1,24564,8]` for scores (I use 7 classes + background) and `float32[1,24564,4]` for boxes, so no NonMaxSupression and classes and scores are put into one array.   ","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/510371684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false}},{"id":2475649595,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ3NTY0OTU5NQ==","url":"https://api.github.com/repos/lufficc/SSD/issues/events/2475649595","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-11T11:51:22Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/511489122","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-511489122","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":511489122,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTQ4OTEyMg==","user":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false},"created_at":"2019-07-15T17:12:37Z","updated_at":"2019-07-15T17:12:37Z","author_association":"NONE","body":"Hello, unfortunately, model doesn't pass onnx checker. \r\n\r\nimport onnx\r\nimport onnxruntime\r\nmodel = onnx.load_model('ssdpytorch.onnx')\r\nonnx.checker.check_model(model)\r\n\r\nThis gives the following error:\r\n\r\nValidationError                           Traceback (most recent call last)\r\n<ipython-input-9-b6beadd98bdc> in <module>()\r\n----> 1 onnx.checker.check_model(model)\r\n\r\n//anaconda/lib/python3.6/site-packages/onnx/checker.py in check_model(model)\r\n     84         C.check_model_path(model)\r\n     85     else:\r\n---> 86         C.check_model(model.SerializeToString())\r\n     87 \r\n     88 \r\n\r\nValidationError: Node () has input size 1 not in range [min=3, max=5].\r\n\r\n==> Context: Bad node spec: input: \"306\" output: \"308\" op_type: \"Slice\" attribute { name: \"axes\" ints: 2 type: INTS } attribute { name: \"ends\" ints: 2 type: INTS } attribute { name: \"starts\" ints: 0 type: INTS }","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/511489122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/513134339","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-513134339","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":513134339,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzEzNDMzOQ==","user":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"created_at":"2019-07-19T08:01:59Z","updated_at":"2019-07-19T08:01:59Z","author_association":"OWNER","body":"What's your onnx version? Everything is OK on my side. (onnx==1.5.0, torch==1.1.0, MacOS)\r\n```python\r\nimport onnx\r\nimport onnxruntime\r\n\r\nif __name__ == '__main__':\r\n    model = onnx.load_model('ssdpytorch.onnx')\r\n    onnx.checker.check_model(model)\r\n    print(onnx.helper.printable_graph(model.graph))\r\n\r\n```\r\n\r\n```\r\ngraph torch-jit-export (\r\n  %0[FLOAT, 1x3x300x300]\r\n) initializers (\r\n  %backbone.vgg.0.weight[FLOAT, 64x3x3x3]\r\n  %backbone.vgg.0.bias[FLOAT, 64]\r\n  %backbone.vgg.2.weight[FLOAT, 64x64x3x3]\r\n  %backbone.vgg.2.bias[FLOAT, 64]\r\n  %backbone.vgg.5.weight[FLOAT, 128x64x3x3]\r\n  %backbone.vgg.5.bias[FLOAT, 128]\r\n  %backbone.vgg.7.weight[FLOAT, 128x128x3x3]\r\n  %backbone.vgg.7.bias[FLOAT, 128]\r\n  %backbone.vgg.10.weight[FLOAT, 256x128x3x3]\r\n  %backbone.vgg.10.bias[FLOAT, 256]\r\n  %backbone.vgg.12.weight[FLOAT, 256x256x3x3]\r\n  %backbone.vgg.12.bias[FLOAT, 256]\r\n  %backbone.vgg.14.weight[FLOAT, 256x256x3x3]\r\n  %backbone.vgg.14.bias[FLOAT, 256]\r\n  %backbone.vgg.17.weight[FLOAT, 512x256x3x3]\r\n  %backbone.vgg.17.bias[FLOAT, 512]\r\n  %backbone.vgg.19.weight[FLOAT, 512x512x3x3]\r\n  %backbone.vgg.19.bias[FLOAT, 512]\r\n  %backbone.vgg.21.weight[FLOAT, 512x512x3x3]\r\n  %backbone.vgg.21.bias[FLOAT, 512]\r\n  %backbone.vgg.24.weight[FLOAT, 512x512x3x3]\r\n  %backbone.vgg.24.bias[FLOAT, 512]\r\n  %backbone.vgg.26.weight[FLOAT, 512x512x3x3]\r\n  %backbone.vgg.26.bias[FLOAT, 512]\r\n  %backbone.vgg.28.weight[FLOAT, 512x512x3x3]\r\n  %backbone.vgg.28.bias[FLOAT, 512]\r\n  %backbone.vgg.31.weight[FLOAT, 1024x512x3x3]\r\n  %backbone.vgg.31.bias[FLOAT, 1024]\r\n  %backbone.vgg.33.weight[FLOAT, 1024x1024x1x1]\r\n  %backbone.vgg.33.bias[FLOAT, 1024]\r\n  %backbone.extras.0.weight[FLOAT, 256x1024x1x1]\r\n  %backbone.extras.0.bias[FLOAT, 256]\r\n  %backbone.extras.1.weight[FLOAT, 512x256x3x3]\r\n  %backbone.extras.1.bias[FLOAT, 512]\r\n  %backbone.extras.2.weight[FLOAT, 128x512x1x1]\r\n  %backbone.extras.2.bias[FLOAT, 128]\r\n  %backbone.extras.3.weight[FLOAT, 256x128x3x3]\r\n  %backbone.extras.3.bias[FLOAT, 256]\r\n  %backbone.extras.4.weight[FLOAT, 128x256x1x1]\r\n  %backbone.extras.4.bias[FLOAT, 128]\r\n  %backbone.extras.5.weight[FLOAT, 256x128x3x3]\r\n  %backbone.extras.5.bias[FLOAT, 256]\r\n  %backbone.extras.6.weight[FLOAT, 128x256x1x1]\r\n  %backbone.extras.6.bias[FLOAT, 128]\r\n  %backbone.extras.7.weight[FLOAT, 256x128x3x3]\r\n  %backbone.extras.7.bias[FLOAT, 256]\r\n  %backbone.l2_norm.weight[FLOAT, 512]\r\n  %box_head.predictor.cls_headers.0.weight[FLOAT, 84x512x3x3]\r\n  %box_head.predictor.cls_headers.0.bias[FLOAT, 84]\r\n  %box_head.predictor.cls_headers.1.weight[FLOAT, 126x1024x3x3]\r\n  %box_head.predictor.cls_headers.1.bias[FLOAT, 126]\r\n  %box_head.predictor.cls_headers.2.weight[FLOAT, 126x512x3x3]\r\n  %box_head.predictor.cls_headers.2.bias[FLOAT, 126]\r\n  %box_head.predictor.cls_headers.3.weight[FLOAT, 126x256x3x3]\r\n  %box_head.predictor.cls_headers.3.bias[FLOAT, 126]\r\n  %box_head.predictor.cls_headers.4.weight[FLOAT, 84x256x3x3]\r\n  %box_head.predictor.cls_headers.4.bias[FLOAT, 84]\r\n  %box_head.predictor.cls_headers.5.weight[FLOAT, 84x256x3x3]\r\n  %box_head.predictor.cls_headers.5.bias[FLOAT, 84]\r\n  %box_head.predictor.reg_headers.0.weight[FLOAT, 16x512x3x3]\r\n  %box_head.predictor.reg_headers.0.bias[FLOAT, 16]\r\n  %box_head.predictor.reg_headers.1.weight[FLOAT, 24x1024x3x3]\r\n  %box_head.predictor.reg_headers.1.bias[FLOAT, 24]\r\n  %box_head.predictor.reg_headers.2.weight[FLOAT, 24x512x3x3]\r\n  %box_head.predictor.reg_headers.2.bias[FLOAT, 24]\r\n  %box_head.predictor.reg_headers.3.weight[FLOAT, 24x256x3x3]\r\n  %box_head.predictor.reg_headers.3.bias[FLOAT, 24]\r\n  %box_head.predictor.reg_headers.4.weight[FLOAT, 16x256x3x3]\r\n  %box_head.predictor.reg_headers.4.bias[FLOAT, 16]\r\n  %box_head.predictor.reg_headers.5.weight[FLOAT, 16x256x3x3]\r\n  %box_head.predictor.reg_headers.5.bias[FLOAT, 16]\r\n) {\r\n  %72 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%0, %backbone.vgg.0.weight, %backbone.vgg.0.bias)\r\n  %73 = Relu(%72)\r\n  %74 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%73, %backbone.vgg.2.weight, %backbone.vgg.2.bias)\r\n  %75 = Relu(%74)\r\n  %76 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 0, 0], strides = [2, 2]](%75)\r\n  %77 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%76, %backbone.vgg.5.weight, %backbone.vgg.5.bias)\r\n  %78 = Relu(%77)\r\n  %79 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%78, %backbone.vgg.7.weight, %backbone.vgg.7.bias)\r\n  %80 = Relu(%79)\r\n  %81 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 0, 0], strides = [2, 2]](%80)\r\n  %82 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%81, %backbone.vgg.10.weight, %backbone.vgg.10.bias)\r\n  %83 = Relu(%82)\r\n  %84 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%83, %backbone.vgg.12.weight, %backbone.vgg.12.bias)\r\n  %85 = Relu(%84)\r\n  %86 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%85, %backbone.vgg.14.weight, %backbone.vgg.14.bias)\r\n  %87 = Relu(%86)\r\n  %88 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 1, 1], strides = [2, 2]](%87)\r\n  %89 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%88, %backbone.vgg.17.weight, %backbone.vgg.17.bias)\r\n  %90 = Relu(%89)\r\n  %91 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%90, %backbone.vgg.19.weight, %backbone.vgg.19.bias)\r\n  %92 = Relu(%91)\r\n  %93 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%92, %backbone.vgg.21.weight, %backbone.vgg.21.bias)\r\n  %94 = Relu(%93)\r\n  %95 = Constant[value = <Scalar Tensor []>]()\r\n  %96 = Pow(%94, %95)\r\n  %97 = ReduceSum[axes = [1], keepdims = 1](%96)\r\n  %98 = Sqrt(%97)\r\n  %99 = Constant[value = <Scalar Tensor []>]()\r\n  %100 = Add(%98, %99)\r\n  %101 = Div(%94, %100)\r\n  %102 = Unsqueeze[axes = [0]](%backbone.l2_norm.weight)\r\n  %103 = Unsqueeze[axes = [2]](%102)\r\n  %104 = Unsqueeze[axes = [3]](%103)\r\n  %105 = Shape(%101)\r\n  %106 = Expand(%104, %105)\r\n  %107 = Mul(%106, %101)\r\n  %108 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 0, 0], strides = [2, 2]](%94)\r\n  %109 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%108, %backbone.vgg.24.weight, %backbone.vgg.24.bias)\r\n  %110 = Relu(%109)\r\n  %111 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%110, %backbone.vgg.26.weight, %backbone.vgg.26.bias)\r\n  %112 = Relu(%111)\r\n  %113 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%112, %backbone.vgg.28.weight, %backbone.vgg.28.bias)\r\n  %114 = Relu(%113)\r\n  %115 = MaxPool[kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%114)\r\n  %116 = Conv[dilations = [6, 6], group = 1, kernel_shape = [3, 3], pads = [6, 6, 6, 6], strides = [1, 1]](%115, %backbone.vgg.31.weight, %backbone.vgg.31.bias)\r\n  %117 = Relu(%116)\r\n  %118 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%117, %backbone.vgg.33.weight, %backbone.vgg.33.bias)\r\n  %119 = Relu(%118)\r\n  %120 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%119, %backbone.extras.0.weight, %backbone.extras.0.bias)\r\n  %121 = Relu(%120)\r\n  %122 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [2, 2]](%121, %backbone.extras.1.weight, %backbone.extras.1.bias)\r\n  %123 = Relu(%122)\r\n  %124 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%123, %backbone.extras.2.weight, %backbone.extras.2.bias)\r\n  %125 = Relu(%124)\r\n  %126 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [2, 2]](%125, %backbone.extras.3.weight, %backbone.extras.3.bias)\r\n  %127 = Relu(%126)\r\n  %128 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%127, %backbone.extras.4.weight, %backbone.extras.4.bias)\r\n  %129 = Relu(%128)\r\n  %130 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [0, 0, 0, 0], strides = [1, 1]](%129, %backbone.extras.5.weight, %backbone.extras.5.bias)\r\n  %131 = Relu(%130)\r\n  %132 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%131, %backbone.extras.6.weight, %backbone.extras.6.bias)\r\n  %133 = Relu(%132)\r\n  %134 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [0, 0, 0, 0], strides = [1, 1]](%133, %backbone.extras.7.weight, %backbone.extras.7.bias)\r\n  %135 = Relu(%134)\r\n  %136 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%107, %box_head.predictor.cls_headers.0.weight, %box_head.predictor.cls_headers.0.bias)\r\n  %137 = Transpose[perm = [0, 2, 3, 1]](%136)\r\n  %138 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%107, %box_head.predictor.reg_headers.0.weight, %box_head.predictor.reg_headers.0.bias)\r\n  %139 = Transpose[perm = [0, 2, 3, 1]](%138)\r\n  %140 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%119, %box_head.predictor.cls_headers.1.weight, %box_head.predictor.cls_headers.1.bias)\r\n  %141 = Transpose[perm = [0, 2, 3, 1]](%140)\r\n  %142 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%119, %box_head.predictor.reg_headers.1.weight, %box_head.predictor.reg_headers.1.bias)\r\n  %143 = Transpose[perm = [0, 2, 3, 1]](%142)\r\n  %144 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%123, %box_head.predictor.cls_headers.2.weight, %box_head.predictor.cls_headers.2.bias)\r\n  %145 = Transpose[perm = [0, 2, 3, 1]](%144)\r\n  %146 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%123, %box_head.predictor.reg_headers.2.weight, %box_head.predictor.reg_headers.2.bias)\r\n  %147 = Transpose[perm = [0, 2, 3, 1]](%146)\r\n  %148 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%127, %box_head.predictor.cls_headers.3.weight, %box_head.predictor.cls_headers.3.bias)\r\n  %149 = Transpose[perm = [0, 2, 3, 1]](%148)\r\n  %150 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%127, %box_head.predictor.reg_headers.3.weight, %box_head.predictor.reg_headers.3.bias)\r\n  %151 = Transpose[perm = [0, 2, 3, 1]](%150)\r\n  %152 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%131, %box_head.predictor.cls_headers.4.weight, %box_head.predictor.cls_headers.4.bias)\r\n  %153 = Transpose[perm = [0, 2, 3, 1]](%152)\r\n  %154 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%131, %box_head.predictor.reg_headers.4.weight, %box_head.predictor.reg_headers.4.bias)\r\n  %155 = Transpose[perm = [0, 2, 3, 1]](%154)\r\n  %156 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%135, %box_head.predictor.cls_headers.5.weight, %box_head.predictor.cls_headers.5.bias)\r\n  %157 = Transpose[perm = [0, 2, 3, 1]](%156)\r\n  %158 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%135, %box_head.predictor.reg_headers.5.weight, %box_head.predictor.reg_headers.5.bias)\r\n  %159 = Transpose[perm = [0, 2, 3, 1]](%158)\r\n  %160 = Constant[value = <Scalar Tensor []>]()\r\n  %161 = Shape(%107)\r\n  %162 = Gather[axis = 0](%161, %160)\r\n  %163 = Constant[value = <Scalar Tensor []>]()\r\n  %164 = Shape(%137)\r\n  %165 = Gather[axis = 0](%164, %163)\r\n  %166 = Constant[value = <Scalar Tensor []>]()\r\n  %167 = Unsqueeze[axes = [0]](%165)\r\n  %168 = Unsqueeze[axes = [0]](%166)\r\n  %169 = Concat[axis = 0](%167, %168)\r\n  %170 = Reshape(%137, %169)\r\n  %171 = Constant[value = <Scalar Tensor []>]()\r\n  %172 = Shape(%141)\r\n  %173 = Gather[axis = 0](%172, %171)\r\n  %174 = Constant[value = <Scalar Tensor []>]()\r\n  %175 = Unsqueeze[axes = [0]](%173)\r\n  %176 = Unsqueeze[axes = [0]](%174)\r\n  %177 = Concat[axis = 0](%175, %176)\r\n  %178 = Reshape(%141, %177)\r\n  %179 = Constant[value = <Scalar Tensor []>]()\r\n  %180 = Shape(%145)\r\n  %181 = Gather[axis = 0](%180, %179)\r\n  %182 = Constant[value = <Scalar Tensor []>]()\r\n  %183 = Unsqueeze[axes = [0]](%181)\r\n  %184 = Unsqueeze[axes = [0]](%182)\r\n  %185 = Concat[axis = 0](%183, %184)\r\n  %186 = Reshape(%145, %185)\r\n  %187 = Constant[value = <Scalar Tensor []>]()\r\n  %188 = Shape(%149)\r\n  %189 = Gather[axis = 0](%188, %187)\r\n  %190 = Constant[value = <Scalar Tensor []>]()\r\n  %191 = Unsqueeze[axes = [0]](%189)\r\n  %192 = Unsqueeze[axes = [0]](%190)\r\n  %193 = Concat[axis = 0](%191, %192)\r\n  %194 = Reshape(%149, %193)\r\n  %195 = Constant[value = <Scalar Tensor []>]()\r\n  %196 = Shape(%153)\r\n  %197 = Gather[axis = 0](%196, %195)\r\n  %198 = Constant[value = <Scalar Tensor []>]()\r\n  %199 = Unsqueeze[axes = [0]](%197)\r\n  %200 = Unsqueeze[axes = [0]](%198)\r\n  %201 = Concat[axis = 0](%199, %200)\r\n  %202 = Reshape(%153, %201)\r\n  %203 = Constant[value = <Scalar Tensor []>]()\r\n  %204 = Shape(%157)\r\n  %205 = Gather[axis = 0](%204, %203)\r\n  %206 = Constant[value = <Scalar Tensor []>]()\r\n  %207 = Unsqueeze[axes = [0]](%205)\r\n  %208 = Unsqueeze[axes = [0]](%206)\r\n  %209 = Concat[axis = 0](%207, %208)\r\n  %210 = Reshape(%157, %209)\r\n  %211 = Concat[axis = 1](%170, %178, %186, %194, %202, %210)\r\n  %212 = Constant[value = <Scalar Tensor []>]()\r\n  %213 = Constant[value = <Scalar Tensor []>]()\r\n  %214 = Unsqueeze[axes = [0]](%162)\r\n  %215 = Unsqueeze[axes = [0]](%212)\r\n  %216 = Unsqueeze[axes = [0]](%213)\r\n  %217 = Concat[axis = 0](%214, %215, %216)\r\n  %218 = Reshape(%211, %217)\r\n  %219 = Constant[value = <Scalar Tensor []>]()\r\n  %220 = Shape(%139)\r\n  %221 = Gather[axis = 0](%220, %219)\r\n  %222 = Constant[value = <Scalar Tensor []>]()\r\n  %223 = Unsqueeze[axes = [0]](%221)\r\n  %224 = Unsqueeze[axes = [0]](%222)\r\n  %225 = Concat[axis = 0](%223, %224)\r\n  %226 = Reshape(%139, %225)\r\n  %227 = Constant[value = <Scalar Tensor []>]()\r\n  %228 = Shape(%143)\r\n  %229 = Gather[axis = 0](%228, %227)\r\n  %230 = Constant[value = <Scalar Tensor []>]()\r\n  %231 = Unsqueeze[axes = [0]](%229)\r\n  %232 = Unsqueeze[axes = [0]](%230)\r\n  %233 = Concat[axis = 0](%231, %232)\r\n  %234 = Reshape(%143, %233)\r\n  %235 = Constant[value = <Scalar Tensor []>]()\r\n  %236 = Shape(%147)\r\n  %237 = Gather[axis = 0](%236, %235)\r\n  %238 = Constant[value = <Scalar Tensor []>]()\r\n  %239 = Unsqueeze[axes = [0]](%237)\r\n  %240 = Unsqueeze[axes = [0]](%238)\r\n  %241 = Concat[axis = 0](%239, %240)\r\n  %242 = Reshape(%147, %241)\r\n  %243 = Constant[value = <Scalar Tensor []>]()\r\n  %244 = Shape(%151)\r\n  %245 = Gather[axis = 0](%244, %243)\r\n  %246 = Constant[value = <Scalar Tensor []>]()\r\n  %247 = Unsqueeze[axes = [0]](%245)\r\n  %248 = Unsqueeze[axes = [0]](%246)\r\n  %249 = Concat[axis = 0](%247, %248)\r\n  %250 = Reshape(%151, %249)\r\n  %251 = Constant[value = <Scalar Tensor []>]()\r\n  %252 = Shape(%155)\r\n  %253 = Gather[axis = 0](%252, %251)\r\n  %254 = Constant[value = <Scalar Tensor []>]()\r\n  %255 = Unsqueeze[axes = [0]](%253)\r\n  %256 = Unsqueeze[axes = [0]](%254)\r\n  %257 = Concat[axis = 0](%255, %256)\r\n  %258 = Reshape(%155, %257)\r\n  %259 = Constant[value = <Scalar Tensor []>]()\r\n  %260 = Shape(%159)\r\n  %261 = Gather[axis = 0](%260, %259)\r\n  %262 = Constant[value = <Scalar Tensor []>]()\r\n  %263 = Unsqueeze[axes = [0]](%261)\r\n  %264 = Unsqueeze[axes = [0]](%262)\r\n  %265 = Concat[axis = 0](%263, %264)\r\n  %266 = Reshape(%159, %265)\r\n  %267 = Concat[axis = 1](%226, %234, %242, %250, %258, %266)\r\n  %268 = Constant[value = <Scalar Tensor []>]()\r\n  %269 = Constant[value = <Scalar Tensor []>]()\r\n  %270 = Unsqueeze[axes = [0]](%162)\r\n  %271 = Unsqueeze[axes = [0]](%268)\r\n  %272 = Unsqueeze[axes = [0]](%269)\r\n  %273 = Concat[axis = 0](%270, %271, %272)\r\n  %274 = Reshape(%267, %273)\r\n  %275 = Softmax[axis = 2](%218)\r\n  %276 = Slice[axes = [2], ends = [2], starts = [0]](%274)\r\n  %277 = Constant[value = <Scalar Tensor []>]()\r\n  %278 = Mul(%276, %277)\r\n  %279 = Constant[value = <Tensor>]()\r\n  %280 = Mul(%278, %279)\r\n  %281 = Constant[value = <Tensor>]()\r\n  %282 = Add(%280, %281)\r\n  %283 = Slice[axes = [2], ends = [9223372036854775807], starts = [2]](%274)\r\n  %284 = Constant[value = <Scalar Tensor []>]()\r\n  %285 = Mul(%283, %284)\r\n  %286 = Exp(%285)\r\n  %287 = Constant[value = <Tensor>]()\r\n  %288 = Mul(%286, %287)\r\n  %289 = Concat[axis = 2](%282, %288)\r\n  %290 = Slice[axes = [2], ends = [2], starts = [0]](%289)\r\n  %291 = Slice[axes = [2], ends = [9223372036854775807], starts = [2]](%289)\r\n  %292 = Constant[value = <Scalar Tensor []>]()\r\n  %293 = Div(%291, %292)\r\n  %294 = Sub(%290, %293)\r\n  %295 = Slice[axes = [2], ends = [2], starts = [0]](%289)\r\n  %296 = Slice[axes = [2], ends = [9223372036854775807], starts = [2]](%289)\r\n  %297 = Constant[value = <Scalar Tensor []>]()\r\n  %298 = Div(%296, %297)\r\n  %299 = Add(%295, %298)\r\n  %300 = Concat[axis = 2](%294, %299)\r\n  return %275, %300\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/513134339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/513224818","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-513224818","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":513224818,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzIyNDgxOA==","user":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false},"created_at":"2019-07-19T13:17:26Z","updated_at":"2019-07-19T13:17:26Z","author_association":"NONE","body":"just checked your SSD300 model, got the same result:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"onnxconvertor.py\", line 18, in <module>\r\n    onnx.checker.check_model(model)\r\n  File \"//anaconda/lib/python3.6/site-packages/onnx/checker.py\", line 86, in check_model\r\n    C.check_model(model.SerializeToString())\r\nonnx.onnx_cpp2py_export.checker.ValidationError: Node () has input size 1 not in range [min=3, max=5].\r\n\r\n==> Context: Bad node spec: input: \"274\" output: \"276\" op_type: \"Slice\" attribute { name: \"axes\" ints: 2 type: INTS } attribute { name: \"ends\" ints: 2 type: INTS } attribute { name: \"starts\" ints: 0 type: INTS }\r\n```\r\nonnx==1.5.0, torch=1.1.0, onnxruntime==0.4.0\r\n\r\nAnd here is my graph:\r\n\r\n```\r\ngraph torch-jit-export (\r\n  %0[FLOAT, 1x3x300x300]\r\n) initializers (\r\n  %1[FLOAT, 64x3x3x3]\r\n  %2[FLOAT, 64]\r\n  %3[FLOAT, 64x64x3x3]\r\n  %4[FLOAT, 64]\r\n  %5[FLOAT, 128x64x3x3]\r\n  %6[FLOAT, 128]\r\n  %7[FLOAT, 128x128x3x3]\r\n  %8[FLOAT, 128]\r\n  %9[FLOAT, 256x128x3x3]\r\n  %10[FLOAT, 256]\r\n  %11[FLOAT, 256x256x3x3]\r\n  %12[FLOAT, 256]\r\n  %13[FLOAT, 256x256x3x3]\r\n  %14[FLOAT, 256]\r\n  %15[FLOAT, 512x256x3x3]\r\n  %16[FLOAT, 512]\r\n  %17[FLOAT, 512x512x3x3]\r\n  %18[FLOAT, 512]\r\n  %19[FLOAT, 512x512x3x3]\r\n  %20[FLOAT, 512]\r\n  %21[FLOAT, 512x512x3x3]\r\n  %22[FLOAT, 512]\r\n  %23[FLOAT, 512x512x3x3]\r\n  %24[FLOAT, 512]\r\n  %25[FLOAT, 512x512x3x3]\r\n  %26[FLOAT, 512]\r\n  %27[FLOAT, 1024x512x3x3]\r\n  %28[FLOAT, 1024]\r\n  %29[FLOAT, 1024x1024x1x1]\r\n  %30[FLOAT, 1024]\r\n  %31[FLOAT, 256x1024x1x1]\r\n  %32[FLOAT, 256]\r\n  %33[FLOAT, 512x256x3x3]\r\n  %34[FLOAT, 512]\r\n  %35[FLOAT, 128x512x1x1]\r\n  %36[FLOAT, 128]\r\n  %37[FLOAT, 256x128x3x3]\r\n  %38[FLOAT, 256]\r\n  %39[FLOAT, 128x256x1x1]\r\n  %40[FLOAT, 128]\r\n  %41[FLOAT, 256x128x3x3]\r\n  %42[FLOAT, 256]\r\n  %43[FLOAT, 128x256x1x1]\r\n  %44[FLOAT, 128]\r\n  %45[FLOAT, 256x128x3x3]\r\n  %46[FLOAT, 256]\r\n  %47[FLOAT, 512]\r\n  %48[FLOAT, 84x512x3x3]\r\n  %49[FLOAT, 84]\r\n  %50[FLOAT, 126x1024x3x3]\r\n  %51[FLOAT, 126]\r\n  %52[FLOAT, 126x512x3x3]\r\n  %53[FLOAT, 126]\r\n  %54[FLOAT, 126x256x3x3]\r\n  %55[FLOAT, 126]\r\n  %56[FLOAT, 84x256x3x3]\r\n  %57[FLOAT, 84]\r\n  %58[FLOAT, 84x256x3x3]\r\n  %59[FLOAT, 84]\r\n  %60[FLOAT, 16x512x3x3]\r\n  %61[FLOAT, 16]\r\n  %62[FLOAT, 24x1024x3x3]\r\n  %63[FLOAT, 24]\r\n  %64[FLOAT, 24x512x3x3]\r\n  %65[FLOAT, 24]\r\n  %66[FLOAT, 24x256x3x3]\r\n  %67[FLOAT, 24]\r\n  %68[FLOAT, 16x256x3x3]\r\n  %69[FLOAT, 16]\r\n  %70[FLOAT, 16x256x3x3]\r\n  %71[FLOAT, 16]\r\n) {\r\n  %72 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%0, %1, %2)\r\n  %73 = Relu(%72)\r\n  %74 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%73, %3, %4)\r\n  %75 = Relu(%74)\r\n  %76 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 0, 0], strides = [2, 2]](%75)\r\n  %77 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%76, %5, %6)\r\n  %78 = Relu(%77)\r\n  %79 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%78, %7, %8)\r\n  %80 = Relu(%79)\r\n  %81 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 0, 0], strides = [2, 2]](%80)\r\n  %82 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%81, %9, %10)\r\n  %83 = Relu(%82)\r\n  %84 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%83, %11, %12)\r\n  %85 = Relu(%84)\r\n  %86 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%85, %13, %14)\r\n  %87 = Relu(%86)\r\n  %88 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 1, 1], strides = [2, 2]](%87)\r\n  %89 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%88, %15, %16)\r\n  %90 = Relu(%89)\r\n  %91 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%90, %17, %18)\r\n  %92 = Relu(%91)\r\n  %93 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%92, %19, %20)\r\n  %94 = Relu(%93)\r\n  %95 = Constant[value = <Scalar Tensor []>]()\r\n  %96 = Pow(%94, %95)\r\n  %97 = ReduceSum[axes = [1], keepdims = 1](%96)\r\n  %98 = Sqrt(%97)\r\n  %99 = Constant[value = <Scalar Tensor []>]()\r\n  %100 = Add(%98, %99)\r\n  %101 = Div(%94, %100)\r\n  %102 = Unsqueeze[axes = [0]](%47)\r\n  %103 = Unsqueeze[axes = [2]](%102)\r\n  %104 = Unsqueeze[axes = [3]](%103)\r\n  %105 = Shape(%101)\r\n  %106 = Expand(%104, %105)\r\n  %107 = Mul(%106, %101)\r\n  %108 = MaxPool[kernel_shape = [2, 2], pads = [0, 0, 0, 0], strides = [2, 2]](%94)\r\n  %109 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%108, %21, %22)\r\n  %110 = Relu(%109)\r\n  %111 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%110, %23, %24)\r\n  %112 = Relu(%111)\r\n  %113 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%112, %25, %26)\r\n  %114 = Relu(%113)\r\n  %115 = MaxPool[kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%114)\r\n  %116 = Conv[dilations = [6, 6], group = 1, kernel_shape = [3, 3], pads = [6, 6, 6, 6], strides = [1, 1]](%115, %27, %28)\r\n  %117 = Relu(%116)\r\n  %118 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%117, %29, %30)\r\n  %119 = Relu(%118)\r\n  %120 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%119, %31, %32)\r\n  %121 = Relu(%120)\r\n  %122 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [2, 2]](%121, %33, %34)\r\n  %123 = Relu(%122)\r\n  %124 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%123, %35, %36)\r\n  %125 = Relu(%124)\r\n  %126 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [2, 2]](%125, %37, %38)\r\n  %127 = Relu(%126)\r\n  %128 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%127, %39, %40)\r\n  %129 = Relu(%128)\r\n  %130 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [0, 0, 0, 0], strides = [1, 1]](%129, %41, %42)\r\n  %131 = Relu(%130)\r\n  %132 = Conv[dilations = [1, 1], group = 1, kernel_shape = [1, 1], pads = [0, 0, 0, 0], strides = [1, 1]](%131, %43, %44)\r\n  %133 = Relu(%132)\r\n  %134 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [0, 0, 0, 0], strides = [1, 1]](%133, %45, %46)\r\n  %135 = Relu(%134)\r\n  %136 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%107, %48, %49)\r\n  %137 = Transpose[perm = [0, 2, 3, 1]](%136)\r\n  %138 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%107, %60, %61)\r\n  %139 = Transpose[perm = [0, 2, 3, 1]](%138)\r\n  %140 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%119, %50, %51)\r\n  %141 = Transpose[perm = [0, 2, 3, 1]](%140)\r\n  %142 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%119, %62, %63)\r\n  %143 = Transpose[perm = [0, 2, 3, 1]](%142)\r\n  %144 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%123, %52, %53)\r\n  %145 = Transpose[perm = [0, 2, 3, 1]](%144)\r\n  %146 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%123, %64, %65)\r\n  %147 = Transpose[perm = [0, 2, 3, 1]](%146)\r\n  %148 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%127, %54, %55)\r\n  %149 = Transpose[perm = [0, 2, 3, 1]](%148)\r\n  %150 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%127, %66, %67)\r\n  %151 = Transpose[perm = [0, 2, 3, 1]](%150)\r\n  %152 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%131, %56, %57)\r\n  %153 = Transpose[perm = [0, 2, 3, 1]](%152)\r\n  %154 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%131, %68, %69)\r\n  %155 = Transpose[perm = [0, 2, 3, 1]](%154)\r\n  %156 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%135, %58, %59)\r\n  %157 = Transpose[perm = [0, 2, 3, 1]](%156)\r\n  %158 = Conv[dilations = [1, 1], group = 1, kernel_shape = [3, 3], pads = [1, 1, 1, 1], strides = [1, 1]](%135, %70, %71)\r\n  %159 = Transpose[perm = [0, 2, 3, 1]](%158)\r\n  %160 = Constant[value = <Scalar Tensor []>]()\r\n  %161 = Shape(%107)\r\n  %162 = Gather[axis = 0](%161, %160)\r\n  %163 = Constant[value = <Scalar Tensor []>]()\r\n  %164 = Shape(%137)\r\n  %165 = Gather[axis = 0](%164, %163)\r\n  %166 = Constant[value = <Scalar Tensor []>]()\r\n  %167 = Unsqueeze[axes = [0]](%165)\r\n  %168 = Unsqueeze[axes = [0]](%166)\r\n  %169 = Concat[axis = 0](%167, %168)\r\n  %170 = Reshape(%137, %169)\r\n  %171 = Constant[value = <Scalar Tensor []>]()\r\n  %172 = Shape(%141)\r\n  %173 = Gather[axis = 0](%172, %171)\r\n  %174 = Constant[value = <Scalar Tensor []>]()\r\n  %175 = Unsqueeze[axes = [0]](%173)\r\n  %176 = Unsqueeze[axes = [0]](%174)\r\n  %177 = Concat[axis = 0](%175, %176)\r\n  %178 = Reshape(%141, %177)\r\n  %179 = Constant[value = <Scalar Tensor []>]()\r\n  %180 = Shape(%145)\r\n  %181 = Gather[axis = 0](%180, %179)\r\n  %182 = Constant[value = <Scalar Tensor []>]()\r\n  %183 = Unsqueeze[axes = [0]](%181)\r\n  %184 = Unsqueeze[axes = [0]](%182)\r\n  %185 = Concat[axis = 0](%183, %184)\r\n  %186 = Reshape(%145, %185)\r\n  %187 = Constant[value = <Scalar Tensor []>]()\r\n  %188 = Shape(%149)\r\n  %189 = Gather[axis = 0](%188, %187)\r\n  %190 = Constant[value = <Scalar Tensor []>]()\r\n  %191 = Unsqueeze[axes = [0]](%189)\r\n  %192 = Unsqueeze[axes = [0]](%190)\r\n  %193 = Concat[axis = 0](%191, %192)\r\n  %194 = Reshape(%149, %193)\r\n  %195 = Constant[value = <Scalar Tensor []>]()\r\n  %196 = Shape(%153)\r\n  %197 = Gather[axis = 0](%196, %195)\r\n  %198 = Constant[value = <Scalar Tensor []>]()\r\n  %199 = Unsqueeze[axes = [0]](%197)\r\n  %200 = Unsqueeze[axes = [0]](%198)\r\n  %201 = Concat[axis = 0](%199, %200)\r\n  %202 = Reshape(%153, %201)\r\n  %203 = Constant[value = <Scalar Tensor []>]()\r\n  %204 = Shape(%157)\r\n  %205 = Gather[axis = 0](%204, %203)\r\n  %206 = Constant[value = <Scalar Tensor []>]()\r\n  %207 = Unsqueeze[axes = [0]](%205)\r\n  %208 = Unsqueeze[axes = [0]](%206)\r\n  %209 = Concat[axis = 0](%207, %208)\r\n  %210 = Reshape(%157, %209)\r\n  %211 = Concat[axis = 1](%170, %178, %186, %194, %202, %210)\r\n  %212 = Constant[value = <Scalar Tensor []>]()\r\n  %213 = Constant[value = <Scalar Tensor []>]()\r\n  %214 = Unsqueeze[axes = [0]](%162)\r\n  %215 = Unsqueeze[axes = [0]](%212)\r\n  %216 = Unsqueeze[axes = [0]](%213)\r\n  %217 = Concat[axis = 0](%214, %215, %216)\r\n  %218 = Reshape(%211, %217)\r\n  %219 = Constant[value = <Scalar Tensor []>]()\r\n  %220 = Shape(%139)\r\n  %221 = Gather[axis = 0](%220, %219)\r\n  %222 = Constant[value = <Scalar Tensor []>]()\r\n  %223 = Unsqueeze[axes = [0]](%221)\r\n  %224 = Unsqueeze[axes = [0]](%222)\r\n  %225 = Concat[axis = 0](%223, %224)\r\n  %226 = Reshape(%139, %225)\r\n  %227 = Constant[value = <Scalar Tensor []>]()\r\n  %228 = Shape(%143)\r\n  %229 = Gather[axis = 0](%228, %227)\r\n  %230 = Constant[value = <Scalar Tensor []>]()\r\n  %231 = Unsqueeze[axes = [0]](%229)\r\n  %232 = Unsqueeze[axes = [0]](%230)\r\n  %233 = Concat[axis = 0](%231, %232)\r\n  %234 = Reshape(%143, %233)\r\n  %235 = Constant[value = <Scalar Tensor []>]()\r\n  %236 = Shape(%147)\r\n  %237 = Gather[axis = 0](%236, %235)\r\n  %238 = Constant[value = <Scalar Tensor []>]()\r\n  %239 = Unsqueeze[axes = [0]](%237)\r\n  %240 = Unsqueeze[axes = [0]](%238)\r\n  %241 = Concat[axis = 0](%239, %240)\r\n  %242 = Reshape(%147, %241)\r\n  %243 = Constant[value = <Scalar Tensor []>]()\r\n  %244 = Shape(%151)\r\n  %245 = Gather[axis = 0](%244, %243)\r\n  %246 = Constant[value = <Scalar Tensor []>]()\r\n  %247 = Unsqueeze[axes = [0]](%245)\r\n  %248 = Unsqueeze[axes = [0]](%246)\r\n  %249 = Concat[axis = 0](%247, %248)\r\n  %250 = Reshape(%151, %249)\r\n  %251 = Constant[value = <Scalar Tensor []>]()\r\n  %252 = Shape(%155)\r\n  %253 = Gather[axis = 0](%252, %251)\r\n  %254 = Constant[value = <Scalar Tensor []>]()\r\n  %255 = Unsqueeze[axes = [0]](%253)\r\n  %256 = Unsqueeze[axes = [0]](%254)\r\n  %257 = Concat[axis = 0](%255, %256)\r\n  %258 = Reshape(%155, %257)\r\n  %259 = Constant[value = <Scalar Tensor []>]()\r\n  %260 = Shape(%159)\r\n  %261 = Gather[axis = 0](%260, %259)\r\n  %262 = Constant[value = <Scalar Tensor []>]()\r\n  %263 = Unsqueeze[axes = [0]](%261)\r\n  %264 = Unsqueeze[axes = [0]](%262)\r\n  %265 = Concat[axis = 0](%263, %264)\r\n  %266 = Reshape(%159, %265)\r\n  %267 = Concat[axis = 1](%226, %234, %242, %250, %258, %266)\r\n  %268 = Constant[value = <Scalar Tensor []>]()\r\n  %269 = Constant[value = <Scalar Tensor []>]()\r\n  %270 = Unsqueeze[axes = [0]](%162)\r\n  %271 = Unsqueeze[axes = [0]](%268)\r\n  %272 = Unsqueeze[axes = [0]](%269)\r\n  %273 = Concat[axis = 0](%270, %271, %272)\r\n  %274 = Reshape(%267, %273)\r\n  %275 = Softmax[axis = 2](%218)\r\n  %276 = Slice[axes = [2], ends = [2], starts = [0]](%274)\r\n  %277 = Constant[value = <Scalar Tensor []>]()\r\n  %278 = Mul(%276, %277)\r\n  %279 = Constant[value = <Tensor>]()\r\n  %280 = Mul(%278, %279)\r\n  %281 = Constant[value = <Tensor>]()\r\n  %282 = Add(%280, %281)\r\n  %283 = Slice[axes = [2], ends = [9223372036854775807], starts = [2]](%274)\r\n  %284 = Constant[value = <Scalar Tensor []>]()\r\n  %285 = Mul(%283, %284)\r\n  %286 = Exp(%285)\r\n  %287 = Constant[value = <Tensor>]()\r\n  %288 = Mul(%286, %287)\r\n  %289 = Concat[axis = 2](%282, %288)\r\n  %290 = Slice[axes = [2], ends = [2], starts = [0]](%289)\r\n  %291 = Slice[axes = [2], ends = [9223372036854775807], starts = [2]](%289)\r\n  %292 = Constant[value = <Scalar Tensor []>]()\r\n  %293 = Div(%291, %292)\r\n  %294 = Sub(%290, %293)\r\n  %295 = Slice[axes = [2], ends = [2], starts = [0]](%289)\r\n  %296 = Slice[axes = [2], ends = [9223372036854775807], starts = [2]](%289)\r\n  %297 = Constant[value = <Scalar Tensor []>]()\r\n  %298 = Div(%296, %297)\r\n  %299 = Add(%295, %298)\r\n  %300 = Concat[axis = 2](%294, %299)\r\n  return %275, %300\r\n}```","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/513224818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antonfr","id":7860380,"node_id":"MDQ6VXNlcjc4NjAzODA=","avatar_url":"https://avatars.githubusercontent.com/u/7860380?v=4","gravatar_id":"","url":"https://api.github.com/users/antonfr","html_url":"https://github.com/antonfr","followers_url":"https://api.github.com/users/antonfr/followers","following_url":"https://api.github.com/users/antonfr/following{/other_user}","gists_url":"https://api.github.com/users/antonfr/gists{/gist_id}","starred_url":"https://api.github.com/users/antonfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antonfr/subscriptions","organizations_url":"https://api.github.com/users/antonfr/orgs","repos_url":"https://api.github.com/users/antonfr/repos","events_url":"https://api.github.com/users/antonfr/events{/privacy}","received_events_url":"https://api.github.com/users/antonfr/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/514855468","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-514855468","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":514855468,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDg1NTQ2OA==","user":{"login":"ierturk","id":1481831,"node_id":"MDQ6VXNlcjE0ODE4MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1481831?v=4","gravatar_id":"","url":"https://api.github.com/users/ierturk","html_url":"https://github.com/ierturk","followers_url":"https://api.github.com/users/ierturk/followers","following_url":"https://api.github.com/users/ierturk/following{/other_user}","gists_url":"https://api.github.com/users/ierturk/gists{/gist_id}","starred_url":"https://api.github.com/users/ierturk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ierturk/subscriptions","organizations_url":"https://api.github.com/users/ierturk/orgs","repos_url":"https://api.github.com/users/ierturk/repos","events_url":"https://api.github.com/users/ierturk/events{/privacy}","received_events_url":"https://api.github.com/users/ierturk/received_events","type":"User","site_admin":false},"created_at":"2019-07-25T01:12:46Z","updated_at":"2019-07-25T01:12:46Z","author_association":"NONE","body":"I'm able to export the model `MobileNetV2_SSD320` with the custom dataset to `ONNX` and `TorchScript`. The produced `ONNX` model has been checked on `Caffe2` and `TorchScript` model has been checked on `LibTorch` on `Windows x64` machine. The results are OK.\r\nHowever, when I produce models with `dummy input` the net doesn't work. So I inserted the code for `ONNX` exporter and `Torch JIT Tracer` into `demo.py` and provide images from my custom dataset everything is OK. Hope this helps.\r\n","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/514855468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ierturk","id":1481831,"node_id":"MDQ6VXNlcjE0ODE4MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1481831?v=4","gravatar_id":"","url":"https://api.github.com/users/ierturk","html_url":"https://github.com/ierturk","followers_url":"https://api.github.com/users/ierturk/followers","following_url":"https://api.github.com/users/ierturk/following{/other_user}","gists_url":"https://api.github.com/users/ierturk/gists{/gist_id}","starred_url":"https://api.github.com/users/ierturk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ierturk/subscriptions","organizations_url":"https://api.github.com/users/ierturk/orgs","repos_url":"https://api.github.com/users/ierturk/repos","events_url":"https://api.github.com/users/ierturk/events{/privacy}","received_events_url":"https://api.github.com/users/ierturk/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/569268610","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-569268610","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":569268610,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTI2ODYxMA==","user":{"login":"pawopawo","id":38682321,"node_id":"MDQ6VXNlcjM4NjgyMzIx","avatar_url":"https://avatars.githubusercontent.com/u/38682321?v=4","gravatar_id":"","url":"https://api.github.com/users/pawopawo","html_url":"https://github.com/pawopawo","followers_url":"https://api.github.com/users/pawopawo/followers","following_url":"https://api.github.com/users/pawopawo/following{/other_user}","gists_url":"https://api.github.com/users/pawopawo/gists{/gist_id}","starred_url":"https://api.github.com/users/pawopawo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawopawo/subscriptions","organizations_url":"https://api.github.com/users/pawopawo/orgs","repos_url":"https://api.github.com/users/pawopawo/repos","events_url":"https://api.github.com/users/pawopawo/events{/privacy}","received_events_url":"https://api.github.com/users/pawopawo/received_events","type":"User","site_admin":false},"created_at":"2019-12-27T13:22:07Z","updated_at":"2019-12-27T13:25:22Z","author_association":"NONE","body":"> I'm able to export the model `MobileNetV2_SSD320` with the custom dataset to `ONNX` and `TorchScript`. The produced `ONNX` model has been checked on `Caffe2` and `TorchScript` model has been checked on `LibTorch` on `Windows x64` machine. The results are OK.\r\n> However, when I produce models with `dummy input` the net doesn't work. So I inserted the code for `ONNX` exporter and `Torch JIT Tracer` into `demo.py` and provide images from my custom dataset everything is OK. Hope this helps.\r\n\r\nHi, I also encountered the same problem, could you open source the modified demo.py? Thanks\r\n","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/569268610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pawopawo","id":38682321,"node_id":"MDQ6VXNlcjM4NjgyMzIx","avatar_url":"https://avatars.githubusercontent.com/u/38682321?v=4","gravatar_id":"","url":"https://api.github.com/users/pawopawo","html_url":"https://github.com/pawopawo","followers_url":"https://api.github.com/users/pawopawo/followers","following_url":"https://api.github.com/users/pawopawo/following{/other_user}","gists_url":"https://api.github.com/users/pawopawo/gists{/gist_id}","starred_url":"https://api.github.com/users/pawopawo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawopawo/subscriptions","organizations_url":"https://api.github.com/users/pawopawo/orgs","repos_url":"https://api.github.com/users/pawopawo/repos","events_url":"https://api.github.com/users/pawopawo/events{/privacy}","received_events_url":"https://api.github.com/users/pawopawo/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/569270851","html_url":"https://github.com/lufficc/SSD/issues/79#issuecomment-569270851","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/79","id":569270851,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTI3MDg1MQ==","user":{"login":"pawopawo","id":38682321,"node_id":"MDQ6VXNlcjM4NjgyMzIx","avatar_url":"https://avatars.githubusercontent.com/u/38682321?v=4","gravatar_id":"","url":"https://api.github.com/users/pawopawo","html_url":"https://github.com/pawopawo","followers_url":"https://api.github.com/users/pawopawo/followers","following_url":"https://api.github.com/users/pawopawo/following{/other_user}","gists_url":"https://api.github.com/users/pawopawo/gists{/gist_id}","starred_url":"https://api.github.com/users/pawopawo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawopawo/subscriptions","organizations_url":"https://api.github.com/users/pawopawo/orgs","repos_url":"https://api.github.com/users/pawopawo/repos","events_url":"https://api.github.com/users/pawopawo/events{/privacy}","received_events_url":"https://api.github.com/users/pawopawo/received_events","type":"User","site_admin":false},"created_at":"2019-12-27T13:35:30Z","updated_at":"2019-12-27T13:35:30Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/38682321/71519043-ad1f6780-28f0-11ea-8a2a-ab054c62b916.png)\r\nI converted the onnx file as shown in the picture. Does anyone know what is wrong? Hope for help","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/569270851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pawopawo","id":38682321,"node_id":"MDQ6VXNlcjM4NjgyMzIx","avatar_url":"https://avatars.githubusercontent.com/u/38682321?v=4","gravatar_id":"","url":"https://api.github.com/users/pawopawo","html_url":"https://github.com/pawopawo","followers_url":"https://api.github.com/users/pawopawo/followers","following_url":"https://api.github.com/users/pawopawo/following{/other_user}","gists_url":"https://api.github.com/users/pawopawo/gists{/gist_id}","starred_url":"https://api.github.com/users/pawopawo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawopawo/subscriptions","organizations_url":"https://api.github.com/users/pawopawo/orgs","repos_url":"https://api.github.com/users/pawopawo/repos","events_url":"https://api.github.com/users/pawopawo/events{/privacy}","received_events_url":"https://api.github.com/users/pawopawo/received_events","type":"User","site_admin":false}}]