[{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/455011336","html_url":"https://github.com/lufficc/SSD/issues/26#issuecomment-455011336","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/26","id":455011336,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTAxMTMzNg==","user":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"created_at":"2019-01-17T01:46:36Z","updated_at":"2019-01-17T01:46:36Z","author_association":"OWNER","body":"In fact, you don't need to make a 'VOC-like' dataset. You can parse any dataset by defining your own custom dataset.\r\n\r\nBut be sure that:\r\n- `get_image` return a numpy array of shape `(height, width, 3)` with RGB layout.\r\n- `boxes` 's shape should be `(N, 4)`\r\n- `labels` 's shape should be `(N,)`\r\n```python\r\nclass YourDataset(torch.utils.data.Dataset):\r\n  class_names = ('__background__',\r\n                 'name1', 'name2', 'name3', ...)\r\n  def __getitem__(self, index):\r\n      .......\r\n      return image, boxes, labels\r\n\r\n  def get_image(self, index):\r\n      image_id = self.ids[index]\r\n      ...\r\n      return image\r\n\r\n  def get_annotation(self, index):\r\n      image_id = self.ids[index]\r\n      ...\r\n      return image_id, annotation\r\n```","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/455011336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false}},{"id":2079045526,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwNzkwNDU1MjY=","url":"https://api.github.com/repos/lufficc/SSD/issues/events/2079045526","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-01-17T01:55:05Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"id":2179691514,"node_id":"MDExOkNsb3NlZEV2ZW50MjE3OTY5MTUxNA==","url":"https://api.github.com/repos/lufficc/SSD/issues/events/2179691514","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-03-05T02:25:21Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/692919159","html_url":"https://github.com/lufficc/SSD/issues/26#issuecomment-692919159","issue_url":"https://api.github.com/repos/lufficc/SSD/issues/26","id":692919159,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjkxOTE1OQ==","user":{"login":"priteshgohil","id":43172056,"node_id":"MDQ6VXNlcjQzMTcyMDU2","avatar_url":"https://avatars.githubusercontent.com/u/43172056?v=4","gravatar_id":"","url":"https://api.github.com/users/priteshgohil","html_url":"https://github.com/priteshgohil","followers_url":"https://api.github.com/users/priteshgohil/followers","following_url":"https://api.github.com/users/priteshgohil/following{/other_user}","gists_url":"https://api.github.com/users/priteshgohil/gists{/gist_id}","starred_url":"https://api.github.com/users/priteshgohil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priteshgohil/subscriptions","organizations_url":"https://api.github.com/users/priteshgohil/orgs","repos_url":"https://api.github.com/users/priteshgohil/repos","events_url":"https://api.github.com/users/priteshgohil/events{/privacy}","received_events_url":"https://api.github.com/users/priteshgohil/received_events","type":"User","site_admin":false},"created_at":"2020-09-15T19:07:59Z","updated_at":"2020-09-15T19:07:59Z","author_association":"CONTRIBUTOR","body":"I was getting a similar error initially. \r\n```\r\n  File \"/home/pgohil/code/ssd/data/transforms/transforms.py\", line 370, in __call__\r\n    boxes[:, :2] += (int(left), int(top))\r\nIndexError: too many indices for array\r\n```\r\n\r\nThe solution to this problem is very simple. In your dataset, you will have many images that don't have any annotations. So there are two solution, \r\n1. As @lufficc  mentioned [here](https://github.com/lufficc/SSD/issues/167#issuecomment-691768929), either filter out images which has no annotation or\r\n2. This is what I did. Check if Image has annotations before applying transforms. Do it at all the places in [transforms.py](https://github.com/lufficc/SSD/blob/master/ssd/data/transforms/transforms.py) where boxes are modified without checking if its empty or not.\r\n```\r\n        if (boxes is not None) and (boxes.shape[0] != 0):\r\n            boxes = boxes.copy()\r\n            boxes[:, :2] += (int(left), int(top))\r\n            boxes[:, 2:] += (int(left), int(top))\r\n```","reactions":{"url":"https://api.github.com/repos/lufficc/SSD/issues/comments/692919159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"priteshgohil","id":43172056,"node_id":"MDQ6VXNlcjQzMTcyMDU2","avatar_url":"https://avatars.githubusercontent.com/u/43172056?v=4","gravatar_id":"","url":"https://api.github.com/users/priteshgohil","html_url":"https://github.com/priteshgohil","followers_url":"https://api.github.com/users/priteshgohil/followers","following_url":"https://api.github.com/users/priteshgohil/following{/other_user}","gists_url":"https://api.github.com/users/priteshgohil/gists{/gist_id}","starred_url":"https://api.github.com/users/priteshgohil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priteshgohil/subscriptions","organizations_url":"https://api.github.com/users/priteshgohil/orgs","repos_url":"https://api.github.com/users/priteshgohil/repos","events_url":"https://api.github.com/users/priteshgohil/events{/privacy}","received_events_url":"https://api.github.com/users/priteshgohil/received_events","type":"User","site_admin":false}},{"id":3769897523,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzc2OTg5NzUyMw==","url":"https://api.github.com/repos/lufficc/SSD/issues/events/3769897523","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-15T19:07:59Z","performed_via_github_app":null},{"id":3769897528,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM3Njk4OTc1Mjg=","url":"https://api.github.com/repos/lufficc/SSD/issues/events/3769897528","actor":{"login":"lufficc","id":20706332,"node_id":"MDQ6VXNlcjIwNzA2MzMy","avatar_url":"https://avatars.githubusercontent.com/u/20706332?v=4","gravatar_id":"","url":"https://api.github.com/users/lufficc","html_url":"https://github.com/lufficc","followers_url":"https://api.github.com/users/lufficc/followers","following_url":"https://api.github.com/users/lufficc/following{/other_user}","gists_url":"https://api.github.com/users/lufficc/gists{/gist_id}","starred_url":"https://api.github.com/users/lufficc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lufficc/subscriptions","organizations_url":"https://api.github.com/users/lufficc/orgs","repos_url":"https://api.github.com/users/lufficc/repos","events_url":"https://api.github.com/users/lufficc/events{/privacy}","received_events_url":"https://api.github.com/users/lufficc/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-15T19:07:59Z","performed_via_github_app":null},{"id":4518681098,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1MTg2ODEwOTg=","url":"https://api.github.com/repos/lufficc/SSD/issues/events/4518681098","actor":{"login":"ekoops","id":41296180,"node_id":"MDQ6VXNlcjQxMjk2MTgw","avatar_url":"https://avatars.githubusercontent.com/u/41296180?v=4","gravatar_id":"","url":"https://api.github.com/users/ekoops","html_url":"https://github.com/ekoops","followers_url":"https://api.github.com/users/ekoops/followers","following_url":"https://api.github.com/users/ekoops/following{/other_user}","gists_url":"https://api.github.com/users/ekoops/gists{/gist_id}","starred_url":"https://api.github.com/users/ekoops/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekoops/subscriptions","organizations_url":"https://api.github.com/users/ekoops/orgs","repos_url":"https://api.github.com/users/ekoops/repos","events_url":"https://api.github.com/users/ekoops/events{/privacy}","received_events_url":"https://api.github.com/users/ekoops/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"f1979deee37e7d80efee294b9857f73ef1292c56","commit_url":"https://api.github.com/repos/ekoops/SSD/commits/f1979deee37e7d80efee294b9857f73ef1292c56","created_at":"2021-03-28T23:36:09Z","performed_via_github_app":null}]