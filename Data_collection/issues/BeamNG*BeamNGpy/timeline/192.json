[{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1277279938","html_url":"https://github.com/BeamNG/BeamNGpy/issues/192#issuecomment-1277279938","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/192","id":1277279938,"node_id":"IC_kwDOCEke6s5MIb7C","user":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false},"created_at":"2022-10-13T09:04:37Z","updated_at":"2022-10-13T09:04:37Z","author_association":"COLLABORATOR","body":"Hello, there were some small issues with the code, try this, it should work as intended by you:\r\n```python\r\nscenario = Scenario('smallgrid', 'test')\r\n\r\nveh_control = Vehicle('ego_vehicle', model='etk800', licence='control')\r\nveh_ai = Vehicle('ai_vehicle', model='etki', licence='auto')\r\n\r\nelectrics = Electrics()\r\nveh_control.attach_sensor('electrics', electrics)\r\n\r\ntimer = Timer()\r\nveh_control.attach_sensor('timer', timer)\r\n\r\nposControl = (0, -100, 0.4)\r\nposAi = (0, -100 + 10, 0.4)\r\n\r\nscenario.add_vehicle(veh_control, pos=(0, 0, 1), rot=(0, 0, 0))\r\nscenario.add_vehicle(veh_ai, pos=(0, 10, 1), rot=(0, 0, 0))\r\n\r\nscenario.make(beamng)\r\n```\r\n```python\r\nbeamng.load_scenario(scenario)\r\nbeamng.teleport_vehicle(veh_control.vid, posControl, rot=(0, 0, 0))\r\nbeamng.teleport_vehicle(veh_ai.vid, posAi, rot=(0, 0, 0))\r\nbeamng.switch_vehicle(veh_control)\r\nbeamng.start_scenario()\r\n\r\ndef getAiScript(orig=(0, -10, 0), tt=0):\r\n    script = list()\r\n    for i in range(60):\r\n        node = { 'x': orig[0], 'y': -i * 30 + orig[1], 'z': orig[2], 't': i+tt, }\r\n        script.append(node)\r\n    return script\r\n\r\ntimeList = []\r\n\r\nwhile True:    \r\n    veh_control.poll_sensors()\r\n    sensors = veh_control.sensors\r\n    pos0 = veh_control.state['pos']\r\n    timeNow = sensors['timer'].data['time']\r\n    if pos0[1] < -100:\r\n        timeList.append(timeNow)\r\n        tt = timeList[0]\r\n        script = getAiScript(posAi, tt)\r\n        veh_ai.ai_set_script(script)\r\n    if timeNow > 20:\r\n        break\r\n```\r\n\r\nIf this doesn't work, please let me know the specific issue you are having.","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1277279938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1277643896","html_url":"https://github.com/BeamNG/BeamNGpy/issues/192#issuecomment-1277643896","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/192","id":1277643896,"node_id":"IC_kwDOCEke6s5MJ0x4","user":{"login":"sainan-zhang","id":53167747,"node_id":"MDQ6VXNlcjUzMTY3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/53167747?v=4","gravatar_id":"","url":"https://api.github.com/users/sainan-zhang","html_url":"https://github.com/sainan-zhang","followers_url":"https://api.github.com/users/sainan-zhang/followers","following_url":"https://api.github.com/users/sainan-zhang/following{/other_user}","gists_url":"https://api.github.com/users/sainan-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/sainan-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sainan-zhang/subscriptions","organizations_url":"https://api.github.com/users/sainan-zhang/orgs","repos_url":"https://api.github.com/users/sainan-zhang/repos","events_url":"https://api.github.com/users/sainan-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/sainan-zhang/received_events","type":"User","site_admin":false},"created_at":"2022-10-13T13:47:41Z","updated_at":"2022-10-13T13:47:41Z","author_association":"NONE","body":"Hi, the code works well in the scenario where there is only one ai vehicle and one controlled vehicle. But if I set up two ai vehicles to start moving together when the controlled vehicle reaches a specific position, the problem arises. Two ai vehicles start moving normally, but as time goes on, they end up slowing down to a very slow and audible speed. Then, if I terminate the python process, the two ai vehicles will suddenly speed up, as if they were back to normal speed. I'm exceedingly confused and don't know what's wrong. Besides, I don't know the meaning of each key in script and how it relates to the vehicle movement. Can you help me? My code is shown as follows. Looking forward to your reply. Thanks!\r\n\r\n```\r\nfrom beamngpy import BeamNGpy, Scenario, Vehicle\r\nfrom beamngpy.sensors import Electrics, Timer\r\n\r\ndef getAiScript(orig=(0, -10, 0),tt=0):\r\n    script = list()\r\n    for i in range(3600):\r\n        node = {\r\n            'x': orig[0],\r\n            'y': -i * 30 + orig[1],\r\n            'z': orig[2],\r\n            't': i+tt,\r\n        }\r\n        script.append(node)\r\n    return script\r\n\r\n\r\nbeamng = BeamNGpy('localhost', 64256,\r\n                          home=r'D:\\software\\BeamNG.tech-0.25.0.0.14000\\BeamNG.tech-0.25.0.0.14000',\r\n                          user=r'D:\\software\\BeamNG.tech-0.25.0.0.14000\\user')\r\nbeamng.open()\r\n\r\nscenario = Scenario('smallgrid','test')\r\n\r\nveh_cont = Vehicle('ego_vehicle', model='etk800', licence='control')\r\nveh_auto = Vehicle('ai_vehicle', model='etki', licence='auto', colour=\"Red\")\r\nveh_auto2 = Vehicle('ai_vehicle2', model='etki', licence='auto2', colour=\"Green\")\r\n\r\nelectrics = Electrics()\r\nelectrics1 = Electrics()\r\nelectrics2 = Electrics()\r\nveh_cont.attach_sensor('electrics', electrics)\r\nveh_auto.attach_sensor('electrics', electrics1)\r\nveh_auto2.attach_sensor('electrics', electrics2)\r\n\r\ntimer = Timer()\r\ntimer1 = Timer()\r\ntimer2 = Timer()\r\nveh_cont.attach_sensor('timer', timer)\r\nveh_auto.attach_sensor('timer1', timer1)\r\nveh_auto2.attach_sensor('timer2', timer2)\r\n\r\nposCon = (-80, -4000, 0.40)\r\nposAuto = (0, -4000 - 40, 0.40)\r\nposAuto2 = (0, -4000 - 30, 0.40)\r\nscenario.add_vehicle(veh_cont, pos=(0, 0, 1), rot=(0, 0, 0))\r\nscenario.add_vehicle(veh_auto, pos=(0, 10, 1), rot=(0, 0, 0))\r\nscenario.add_vehicle(veh_auto2, pos=(0, 100, 1), rot=(0, 0, 0))\r\n\r\nscenario.make(beamng)\r\nbeamng.load_scenario(scenario)\r\n\r\nbeamng.teleport_vehicle(veh_cont.vid, posCon, rot=(0, 0, 0))\r\nbeamng.teleport_vehicle(veh_auto.vid, posAuto, rot=(0, 0, 0))\r\nbeamng.teleport_vehicle(veh_auto2.vid, posAuto2, rot=(0, 0, 0))\r\nbeamng.switch_vehicle(veh_cont)\r\nbeamng.start_scenario()\r\n\r\ntForBegin = []\r\nwhile True:\r\n    timeLocalList = []\r\n    veh_cont.poll_sensors()\r\n    sensors = veh_cont.sensors\r\n\r\n    veh_auto.poll_sensors()\r\n    sensors1 = veh_auto.sensors\r\n\r\n    veh_auto2.poll_sensors()\r\n    sensors2 = veh_auto2.sensors\r\n\r\n    pos0 = veh_cont.state['pos']\r\n\r\n    timeNow = sensors['timer'].data['time']\r\n\r\n    if pos0[1] < -4040:\r\n        tForBegin.append(timeNow)\r\n        script1 = getAiScript0(posAuto,tForBegin[0])\r\n        veh_auto.ai_set_script(script1)\r\n        script2 = getAiScript0(posAuto2,tForBegin[0])\r\n        veh_auto2.ai_set_script(script2)\r\n```","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1277643896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sainan-zhang","id":53167747,"node_id":"MDQ6VXNlcjUzMTY3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/53167747?v=4","gravatar_id":"","url":"https://api.github.com/users/sainan-zhang","html_url":"https://github.com/sainan-zhang","followers_url":"https://api.github.com/users/sainan-zhang/followers","following_url":"https://api.github.com/users/sainan-zhang/following{/other_user}","gists_url":"https://api.github.com/users/sainan-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/sainan-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sainan-zhang/subscriptions","organizations_url":"https://api.github.com/users/sainan-zhang/orgs","repos_url":"https://api.github.com/users/sainan-zhang/repos","events_url":"https://api.github.com/users/sainan-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/sainan-zhang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1278626546","html_url":"https://github.com/BeamNG/BeamNGpy/issues/192#issuecomment-1278626546","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/192","id":1278626546,"node_id":"IC_kwDOCEke6s5MNkry","user":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false},"created_at":"2022-10-14T07:53:03Z","updated_at":"2022-10-14T07:53:03Z","author_association":"COLLABORATOR","body":"Hi, the `poll_sensors()` call blocks the simulation and you are running it continuously in a loop, so it may look like the simulator is lagging. Try to add some delay between the calls, for example using `time.sleep`, so they don't happen so often. Also, after the vehicle passes, you can stop polling the sensors.\r\n\r\n```python\r\nimport time\r\ntForBegin = []\r\nwhile True:\r\n    timeLocalList = []\r\n    veh_cont.poll_sensors()\r\n    sensors = veh_cont.sensors\r\n\r\n    veh_auto.poll_sensors()\r\n    sensors1 = veh_auto.sensors\r\n\r\n    veh_auto2.poll_sensors()\r\n    sensors2 = veh_auto2.sensors\r\n\r\n    pos0 = veh_cont.state['pos']\r\n\r\n    timeNow = sensors['timer'].data['time']\r\n\r\n    if pos0[1] < -4040:\r\n        tForBegin.append(timeNow)\r\n        script1 = getAiScript(posAuto,tForBegin[0])\r\n        veh_auto.ai_set_script(script1)\r\n        script2 = getAiScript(posAuto2,tForBegin[0])\r\n        veh_auto2.ai_set_script(script2)\r\n        break # stop polling sensors when the vehicle passed the location\r\n    time.sleep(0.1) # add delay so `poll_sensors` is not called continuously\r\n\r\ninput('Press Enter to exit...')\r\n```\r\n\r\nYou can find information about the vehicle script here: https://beamngpy.readthedocs.io/en/latest/beamngpy.html#beamngpy.vehicle.Vehicle.ai_set_script\r\n\r\nIt is a list of `(x, y, z, t)` nodes, where `x, y, z` specify the desired location of the vehicle at time `t` (in seconds).","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1278626546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1278740622","html_url":"https://github.com/BeamNG/BeamNGpy/issues/192#issuecomment-1278740622","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/192","id":1278740622,"node_id":"IC_kwDOCEke6s5MOAiO","user":{"login":"sainan-zhang","id":53167747,"node_id":"MDQ6VXNlcjUzMTY3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/53167747?v=4","gravatar_id":"","url":"https://api.github.com/users/sainan-zhang","html_url":"https://github.com/sainan-zhang","followers_url":"https://api.github.com/users/sainan-zhang/followers","following_url":"https://api.github.com/users/sainan-zhang/following{/other_user}","gists_url":"https://api.github.com/users/sainan-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/sainan-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sainan-zhang/subscriptions","organizations_url":"https://api.github.com/users/sainan-zhang/orgs","repos_url":"https://api.github.com/users/sainan-zhang/repos","events_url":"https://api.github.com/users/sainan-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/sainan-zhang/received_events","type":"User","site_admin":false},"created_at":"2022-10-14T09:29:03Z","updated_at":"2022-10-14T09:29:03Z","author_association":"NONE","body":"Hi, thank you for your detailed and patient response. The problem is solved with your advice. I truly appreciate your timely helpï¼","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1278740622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sainan-zhang","id":53167747,"node_id":"MDQ6VXNlcjUzMTY3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/53167747?v=4","gravatar_id":"","url":"https://api.github.com/users/sainan-zhang","html_url":"https://github.com/sainan-zhang","followers_url":"https://api.github.com/users/sainan-zhang/followers","following_url":"https://api.github.com/users/sainan-zhang/following{/other_user}","gists_url":"https://api.github.com/users/sainan-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/sainan-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sainan-zhang/subscriptions","organizations_url":"https://api.github.com/users/sainan-zhang/orgs","repos_url":"https://api.github.com/users/sainan-zhang/repos","events_url":"https://api.github.com/users/sainan-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/sainan-zhang/received_events","type":"User","site_admin":false}},{"id":7588666499,"node_id":"CE_lADOCEke6s5T3dL_zwAAAAHEUdyD","url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/events/7588666499","actor":{"login":"sainan-zhang","id":53167747,"node_id":"MDQ6VXNlcjUzMTY3NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/53167747?v=4","gravatar_id":"","url":"https://api.github.com/users/sainan-zhang","html_url":"https://github.com/sainan-zhang","followers_url":"https://api.github.com/users/sainan-zhang/followers","following_url":"https://api.github.com/users/sainan-zhang/following{/other_user}","gists_url":"https://api.github.com/users/sainan-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/sainan-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sainan-zhang/subscriptions","organizations_url":"https://api.github.com/users/sainan-zhang/orgs","repos_url":"https://api.github.com/users/sainan-zhang/repos","events_url":"https://api.github.com/users/sainan-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/sainan-zhang/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-10-14T09:29:07Z","state_reason":null,"performed_via_github_app":null}]