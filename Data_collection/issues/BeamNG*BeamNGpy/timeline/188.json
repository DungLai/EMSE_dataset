[{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1250699467","html_url":"https://github.com/BeamNG/BeamNGpy/issues/188#issuecomment-1250699467","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/188","id":1250699467,"node_id":"IC_kwDOCEke6s5KjCjL","user":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false},"created_at":"2022-09-19T08:08:26Z","updated_at":"2022-09-19T08:08:26Z","author_association":"COLLABORATOR","body":"Hi, unfortunately this is not possible with pure BeamNGpy yet. `bng.pause()` and `bng.resume()` is a workaround, but as you say, it limits the player.\r\n\r\nThe best current solution would be to use a vehicle Lua controller which dumps the data. You can have a look into the `lua/vehicle/controller/` folder of the simulator to see examples of these controllers, namely `lua/vehicle/controller/loggerTemplate.lua`.\r\n\r\nIf you provide information about what exact data you need I can assist you with creating such a controller and give you instructions how to use it.","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1250699467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1251725055","html_url":"https://github.com/BeamNG/BeamNGpy/issues/188#issuecomment-1251725055","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/188","id":1251725055,"node_id":"IC_kwDOCEke6s5Km87_","user":{"login":"purple-mesh","id":110892114,"node_id":"U_kgDOBpwUUg","avatar_url":"https://avatars.githubusercontent.com/u/110892114?v=4","gravatar_id":"","url":"https://api.github.com/users/purple-mesh","html_url":"https://github.com/purple-mesh","followers_url":"https://api.github.com/users/purple-mesh/followers","following_url":"https://api.github.com/users/purple-mesh/following{/other_user}","gists_url":"https://api.github.com/users/purple-mesh/gists{/gist_id}","starred_url":"https://api.github.com/users/purple-mesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purple-mesh/subscriptions","organizations_url":"https://api.github.com/users/purple-mesh/orgs","repos_url":"https://api.github.com/users/purple-mesh/repos","events_url":"https://api.github.com/users/purple-mesh/events{/privacy}","received_events_url":"https://api.github.com/users/purple-mesh/received_events","type":"User","site_admin":false},"created_at":"2022-09-20T01:15:05Z","updated_at":"2022-09-20T01:15:05Z","author_association":"NONE","body":"Hi @aivora-beamng,\r\n\r\nThanks for your response.\r\nThe data that I am currently gathering are as follows, and I save them to a `.csv` file at the end of each scenario.\r\n\r\n```\r\ntime\r\npos (x, y, z)\r\ndirection (dir x, dir y, dir z)\r\nwheelspeed \r\nthrottle\r\nsteering\r\nbrake\r\ndamage\r\ndamage_ext\r\nvehicle bounding box\r\n```\r\n\r\nIf I understand your suggestion correctly, do I need add this for each individual vehicle? or does this vehicle Lua controller apply to **all the vehicles** that are added?","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1251725055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"purple-mesh","id":110892114,"node_id":"U_kgDOBpwUUg","avatar_url":"https://avatars.githubusercontent.com/u/110892114?v=4","gravatar_id":"","url":"https://api.github.com/users/purple-mesh","html_url":"https://github.com/purple-mesh","followers_url":"https://api.github.com/users/purple-mesh/followers","following_url":"https://api.github.com/users/purple-mesh/following{/other_user}","gists_url":"https://api.github.com/users/purple-mesh/gists{/gist_id}","starred_url":"https://api.github.com/users/purple-mesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purple-mesh/subscriptions","organizations_url":"https://api.github.com/users/purple-mesh/orgs","repos_url":"https://api.github.com/users/purple-mesh/repos","events_url":"https://api.github.com/users/purple-mesh/events{/privacy}","received_events_url":"https://api.github.com/users/purple-mesh/received_events","type":"User","site_admin":false}},{"id":7417939543,"node_id":"MEE_lADOCEke6s5SF49WzwAAAAG6JMZX","url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/events/7417939543","actor":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-20T01:15:05Z","performed_via_github_app":null},{"id":7417939553,"node_id":"SE_lADOCEke6s5SF49WzwAAAAG6JMZh","url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/events/7417939553","actor":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-20T01:15:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1262318420","html_url":"https://github.com/BeamNG/BeamNGpy/issues/188#issuecomment-1262318420","issue_url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/188","id":1262318420,"node_id":"IC_kwDOCEke6s5LPXNU","user":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T13:53:19Z","updated_at":"2022-09-29T14:07:23Z","author_association":"COLLABORATOR","body":"Hi again,\r\nUnfortunately there is not a simply way to do this that meets your requirements. The problem is that every individual vehicle is an independent Lua process - there is no easy way for timestamps to align at the moment, as the vehicle processes would need a way to synchronize between each other, which would hurt performance. This is a limitation of the engine, and cannot be circumvented easily (one of the possible options is to use the `bng.pause()` and `bng.resume()` methods, but this is not possible for real-time logging).\r\n\r\nThe \"best\" way that I can think of is provided below. The timestamps from the main process (which calculates the bounding boxes) and the vehicles' processes still do not match, but the difference between them could be potentially neglected, depending on your specific use case.\r\n\r\nYou can try and see yourself. This example works only for BeamNG.drive/tech 0.26 and later.\r\n\r\n1. Download the .zip file [vehicle_logger.zip](https://github.com/BeamNG/BeamNGpy/files/9675232/vehicle_logger.zip) with the mod and copy it to your mods folder (default is `%localappdata%/BeamNG.{drive/tech}/0.26/mods`. You can unpack the mod using the in-game menu to see the included files `vehicleLogger.lua` and `boundingBoxLogger.lua`.\r\n2. Run the following BeamNGpy code (you'll need BeamNGpy 1.24, as it's compatible with BeamNG.tech 0.26):\r\n```python\r\nimport time\r\n\r\nfrom beamngpy import BeamNGpy, Scenario, Vehicle\r\n\r\nbeamng = BeamNGpy('localhost', 64256)\r\nbeamng.open()\r\n\r\nscenario = Scenario('italy', 'logging_test')\r\n\r\nego = Vehicle('ego', model='etk800', color='White', licence='PYTHON')\r\nego2 = Vehicle('ego2', model='etk800', color='Red', licence='PYTHON')\r\nscenario.add_vehicle(ego, pos=(245.11, -906.94, 247.46),\r\n                     rot_quat=(0.0010, 0.1242, 0.9884, -0.0872))\r\nscenario.add_vehicle(ego2, pos=(250.11, -906.94, 247.46),\r\n                     rot_quat=(0.0010, 0.1242, 0.9884, -0.0872))\r\n\r\nscenario.make(beamng)\r\n\r\nbeamng.load_scenario(scenario)\r\nbeamng.start_scenario()\r\nbeamng.switch_vehicle(ego)\r\n\r\nego.ai_set_mode('span')\r\n\r\n\r\ndef start_logging(extension_name='boundingBoxLogger', controller_name='vehicleLogger'):\r\n    command = f'''\r\n        extensions.load('{extension_name}')\r\n        local time = scenario_scenarios.getScenario().timer\r\n        be:queueAllObjectLua(\r\n            string.format([[\r\n                local data = {{time = %d}}\r\n                controller.loadControllerExternal('{controller_name}', '{controller_name}_' .. objectId, data)\r\n            ]], time)\r\n        )\r\n    '''\r\n    beamng.queue_lua_command(command)\r\n\r\n\r\ndef stop_logging(extension_name='boundingBoxLogger', controller_name='vehicleLogger'):\r\n    command = f'''\r\n    be:queueAllObjectLua([[\r\n        controller.getController('{controller_name}_' .. objectId).saveLogToCSV()\r\n        controller.unloadControllerExternal('{controller_name}_' .. objectId)\r\n    ]])\r\n    extensions.unload('{extension_name}')\r\n    '''\r\n    beamng.queue_lua_command(command)\r\n\r\n\r\nprint('Starting logging...')\r\nstart_logging()\r\n\r\ntime.sleep(10)\r\nstop_logging()\r\nprint(f'Stopped logging. The logs were saved to {beamng.user}\\\\0.26.')\r\n```\r\n\r\n3. Look at the content of the three `.csv` files that were created in your userfolder.\r\n\r\nIf you have any questions, then let me know! As you see, the code is not exactly trivial, so in future versions we may provide some helper wrappers to make this whole process easier.","reactions":{"url":"https://api.github.com/repos/BeamNG/BeamNGpy/issues/comments/1262318420/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aivora-beamng","id":93574498,"node_id":"U_kgDOBZPVYg","avatar_url":"https://avatars.githubusercontent.com/u/93574498?v=4","gravatar_id":"","url":"https://api.github.com/users/aivora-beamng","html_url":"https://github.com/aivora-beamng","followers_url":"https://api.github.com/users/aivora-beamng/followers","following_url":"https://api.github.com/users/aivora-beamng/following{/other_user}","gists_url":"https://api.github.com/users/aivora-beamng/gists{/gist_id}","starred_url":"https://api.github.com/users/aivora-beamng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aivora-beamng/subscriptions","organizations_url":"https://api.github.com/users/aivora-beamng/orgs","repos_url":"https://api.github.com/users/aivora-beamng/repos","events_url":"https://api.github.com/users/aivora-beamng/events{/privacy}","received_events_url":"https://api.github.com/users/aivora-beamng/received_events","type":"User","site_admin":false}}]