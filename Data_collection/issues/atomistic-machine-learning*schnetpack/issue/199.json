{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/199","repository_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack","labels_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/199/labels{/name}","comments_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/199/comments","events_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/199/events","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/199","id":544994748,"node_id":"MDU6SXNzdWU1NDQ5OTQ3NDg=","number":199,"title":"GPU performance tuning","user":{"login":"stanos4","id":24731018,"node_id":"MDQ6VXNlcjI0NzMxMDE4","avatar_url":"https://avatars.githubusercontent.com/u/24731018?v=4","gravatar_id":"","url":"https://api.github.com/users/stanos4","html_url":"https://github.com/stanos4","followers_url":"https://api.github.com/users/stanos4/followers","following_url":"https://api.github.com/users/stanos4/following{/other_user}","gists_url":"https://api.github.com/users/stanos4/gists{/gist_id}","starred_url":"https://api.github.com/users/stanos4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stanos4/subscriptions","organizations_url":"https://api.github.com/users/stanos4/orgs","repos_url":"https://api.github.com/users/stanos4/repos","events_url":"https://api.github.com/users/stanos4/events{/privacy}","received_events_url":"https://api.github.com/users/stanos4/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-01-03T13:32:52Z","updated_at":"2020-01-08T07:31:23Z","closed_at":"2020-01-07T09:58:56Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nI'm looking for performance advice. I try to reproduce your results with QM9 database. So if I understand correctly, this should reproduce the results and performance as published at your paper \"SchNetPack: A Deep Learning Toolbox For Atomistic Systems\" (https://arxiv.org/pdf/1809.01072v1.pdf):\r\n\r\n     spk_run.py train schnet qm9 ./qm9.db ./ --split 109000 1000 --cuda --batch_size=100 --lr_decay=0.5\r\n\r\nHowever, my timing is around 50s/epoch vs <6s in your case (Fig. 4). \r\nsystem: Xeon E5-2660v4 at ~3GHz; Tesla P100 (16GB) with CUDA 10.1.105; Conda installation of Numpy and several other things and pip installation of the Schnetpack (schnetpack-0.3-py3-none-any.whl)\r\nnvidia-smi reports <~80% GPU-Util\r\n\r\nI also tried system with V100 GPUs, but the reported GPU utilization goes down to ~50%, with time/epoch going down a bit (maybe 30-50s)\r\nI run directly from memory (to avoid access to HDD).\r\n\r\nDo you have any suggestions for improving the performance closer to what you got? Or any ideas to narrow down possible root-causes?\r\n(p.s., it may be a problem with my system/installation, as this is an offline system where packages have to be downloaded manually and so some things can get tricky/messy with python)\r\nThank you!","closed_by":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/199/timeline","performed_via_github_app":null,"state_reason":"completed"}