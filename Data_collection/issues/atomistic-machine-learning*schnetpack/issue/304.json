{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/304","repository_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack","labels_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/304/labels{/name}","comments_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/304/comments","events_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/304/events","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/304","id":938033716,"node_id":"MDU6SXNzdWU5MzgwMzM3MTY=","number":304,"title":"Applying torch.autograd.grad with less memory","user":{"login":"OMalenfantThuot","id":38050649,"node_id":"MDQ6VXNlcjM4MDUwNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38050649?v=4","gravatar_id":"","url":"https://api.github.com/users/OMalenfantThuot","html_url":"https://github.com/OMalenfantThuot","followers_url":"https://api.github.com/users/OMalenfantThuot/followers","following_url":"https://api.github.com/users/OMalenfantThuot/following{/other_user}","gists_url":"https://api.github.com/users/OMalenfantThuot/gists{/gist_id}","starred_url":"https://api.github.com/users/OMalenfantThuot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OMalenfantThuot/subscriptions","organizations_url":"https://api.github.com/users/OMalenfantThuot/orgs","repos_url":"https://api.github.com/users/OMalenfantThuot/repos","events_url":"https://api.github.com/users/OMalenfantThuot/events{/privacy}","received_events_url":"https://api.github.com/users/OMalenfantThuot/received_events","type":"User","site_admin":false},"labels":[{"id":1044272337,"node_id":"MDU6TGFiZWwxMDQ0MjcyMzM3","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Extra attention is needed"},{"id":1507563117,"node_id":"MDU6TGFiZWwxNTA3NTYzMTE3","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/labels/feature%20request","name":"feature request","color":"fcf480","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-07-06T15:46:45Z","updated_at":"2022-02-10T13:07:57Z","closed_at":"2022-02-10T13:07:57Z","author_association":"NONE","active_lock_reason":null,"body":"Hi all!\r\nThis is not really an issue, more of a question.\r\nWe've been applying some Schnet networks to very large supercells (5000+ atoms), but we were hoping to go even higher.\r\nAt a certain point, the CUDA memory runs out when calculating forces or higher order derivatives using torch.autograd.grad.\r\nThe memory requirements scale linearly with the number of atoms as a computational graph must be remembered for each atom, so we hit a wall pretty fast.\r\nI was wondering if you ever looked into that limitation and if some tool already exist that would calculate derivatives individually for each atom instead of for the system as a whole, even tough it would come at the expanse of speed.\r\nI'll be working on this in any case and see what I can achieve.\r\n\r\nThanks a lot!\r\nOlivier","closed_by":{"login":"ktschuett","id":6585114,"node_id":"MDQ6VXNlcjY1ODUxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6585114?v=4","gravatar_id":"","url":"https://api.github.com/users/ktschuett","html_url":"https://github.com/ktschuett","followers_url":"https://api.github.com/users/ktschuett/followers","following_url":"https://api.github.com/users/ktschuett/following{/other_user}","gists_url":"https://api.github.com/users/ktschuett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktschuett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktschuett/subscriptions","organizations_url":"https://api.github.com/users/ktschuett/orgs","repos_url":"https://api.github.com/users/ktschuett/repos","events_url":"https://api.github.com/users/ktschuett/events{/privacy}","received_events_url":"https://api.github.com/users/ktschuett/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/304/timeline","performed_via_github_app":null,"state_reason":"completed"}