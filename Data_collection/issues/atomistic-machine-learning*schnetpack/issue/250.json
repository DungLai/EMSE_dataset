{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/250","repository_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack","labels_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/250/labels{/name}","comments_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/250/comments","events_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/250/events","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/250","id":753981804,"node_id":"MDU6SXNzdWU3NTM5ODE4MDQ=","number":250,"title":"validation batch using more memory than training batch","user":{"login":"Dankomaister","id":14222532,"node_id":"MDQ6VXNlcjE0MjIyNTMy","avatar_url":"https://avatars.githubusercontent.com/u/14222532?v=4","gravatar_id":"","url":"https://api.github.com/users/Dankomaister","html_url":"https://github.com/Dankomaister","followers_url":"https://api.github.com/users/Dankomaister/followers","following_url":"https://api.github.com/users/Dankomaister/following{/other_user}","gists_url":"https://api.github.com/users/Dankomaister/gists{/gist_id}","starred_url":"https://api.github.com/users/Dankomaister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dankomaister/subscriptions","organizations_url":"https://api.github.com/users/Dankomaister/orgs","repos_url":"https://api.github.com/users/Dankomaister/repos","events_url":"https://api.github.com/users/Dankomaister/events{/privacy}","received_events_url":"https://api.github.com/users/Dankomaister/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-12-01T03:47:21Z","updated_at":"2021-02-26T15:18:41Z","closed_at":"2021-02-26T15:18:41Z","author_association":"NONE","active_lock_reason":null,"body":"Hi!\r\nI was looking into the memory usage of schnetpack to find where it can be optimized and I found that the validation batches are using much more memory than the training batches.\r\nIs this an expected behaviour? or is there something strange going on?\r\n\r\nMy tests use the same .db file for both training and validation (for the sake of testing) and on a Nvidia GTX 1070 with 8GB of VRAM I could use a maximum training batch size of 55 while the maximum validation batch size I could use was only 30 (while keeping the other batch size at 5, respectively).\r\n\r\nI attached an MWE where there are 5 different sets of training batch, `T_batch_size`, and validation batch, `V_batch_size` sizes for testing.\r\n\r\n/Daniel\r\n[mem_test.zip](https://github.com/atomistic-machine-learning/schnetpack/files/5620169/mem_test.zip)\r\n","closed_by":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/250/timeline","performed_via_github_app":null,"state_reason":"completed"}