{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/308","repository_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack","labels_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/308/labels{/name}","comments_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/308/comments","events_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/308/events","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/308","id":950235320,"node_id":"MDU6SXNzdWU5NTAyMzUzMjA=","number":308,"title":"Bug with optional DataLoader args","user":{"login":"Divide-By-0","id":4804438,"node_id":"MDQ6VXNlcjQ4MDQ0Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/4804438?v=4","gravatar_id":"","url":"https://api.github.com/users/Divide-By-0","html_url":"https://github.com/Divide-By-0","followers_url":"https://api.github.com/users/Divide-By-0/followers","following_url":"https://api.github.com/users/Divide-By-0/following{/other_user}","gists_url":"https://api.github.com/users/Divide-By-0/gists{/gist_id}","starred_url":"https://api.github.com/users/Divide-By-0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Divide-By-0/subscriptions","organizations_url":"https://api.github.com/users/Divide-By-0/orgs","repos_url":"https://api.github.com/users/Divide-By-0/repos","events_url":"https://api.github.com/users/Divide-By-0/events{/privacy}","received_events_url":"https://api.github.com/users/Divide-By-0/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-07-22T01:58:36Z","updated_at":"2021-07-27T22:02:26Z","closed_at":"2021-07-27T22:02:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"It would be great if the AtomsLoader accepted a **kwargs for extra named arguments; currently, as DataLoader added an optional 'generator' argument in Pytorch-Lightning 1.3.5, I can no longer compile AtomsLoader objects such as the val_dataloader.\r\n\r\nThe full error is as follows:\r\n```\r\nin train_and_eval\r\n    trainer.fit(model, data)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 458, in fit\r\n    self._run(model)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 756, in _run\r\n    self.dispatch()\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 797, in dispatch\r\n    self.accelerator.start_training(self)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/accelerators/accelerator.py\", line 96, in start_training\r\n    self.training_type_plugin.start_training(trainer)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/plugins/training_type/training_type_plugin.py\", line 144, in start_training\r\n    self._results = trainer.run_stage()\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 807, in run_stage\r\n    return self.run_train()\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 842, in run_train\r\n    self.run_sanity_check(self.lightning_module)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 1107, in run_sanity_check\r\n    self.run_evaluation()\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 920, in run_evaluation\r\n    dataloaders, max_batches = self.evaluation_loop.get_evaluation_dataloaders()\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/evaluation_loop.py\", line 63, in get_evaluation_dataloaders\r\n    self.trainer.reset_val_dataloader(model)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/data_loading.py\", line 409, in reset_val_dataloader\r\n    self.num_val_batches, self.val_dataloaders = self._reset_eval_dataloader(model, 'val')\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/data_loading.py\", line 357, in _reset_eval_dataloader\r\n    dataloaders = [\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/data_loading.py\", line 358, in <listcomp>\r\n    self.auto_add_sampler(dl, shuffle=False, mode=self.state.stage) for dl in dataloaders if dl is not None\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/data_loading.py\", line 142, in auto_add_sampler\r\n    dataloader = self.replace_sampler(dataloader, sampler, mode=mode)\r\n  File \"/home/aayush/.local/lib/python3.8/site-packages/pytorch_lightning/trainer/data_loading.py\", line 213, in replace_sampler\r\n    dataloader = type(dataloader)(**dl_args)\r\nTypeError: __init__() got an unexpected keyword argument 'generator'\r\n```\r\n\r\nSimilarly I also get an error sometimes like\r\n`TypeError: __init__() got an unexpected keyword argument 'prefetch_factor'   `","closed_by":{"login":"Divide-By-0","id":4804438,"node_id":"MDQ6VXNlcjQ4MDQ0Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/4804438?v=4","gravatar_id":"","url":"https://api.github.com/users/Divide-By-0","html_url":"https://github.com/Divide-By-0","followers_url":"https://api.github.com/users/Divide-By-0/followers","following_url":"https://api.github.com/users/Divide-By-0/following{/other_user}","gists_url":"https://api.github.com/users/Divide-By-0/gists{/gist_id}","starred_url":"https://api.github.com/users/Divide-By-0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Divide-By-0/subscriptions","organizations_url":"https://api.github.com/users/Divide-By-0/orgs","repos_url":"https://api.github.com/users/Divide-By-0/repos","events_url":"https://api.github.com/users/Divide-By-0/events{/privacy}","received_events_url":"https://api.github.com/users/Divide-By-0/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/308/timeline","performed_via_github_app":null,"state_reason":"completed"}