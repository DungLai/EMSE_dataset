[{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/923840220","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/338#issuecomment-923840220","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/338","id":923840220,"node_id":"IC_kwDOCMZ5Ls43EK7c","user":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"created_at":"2021-09-21T10:19:17Z","updated_at":"2021-09-21T10:19:17Z","author_association":"COLLABORATOR","body":"Hey @Manyi-Yang ,\r\nthis looks like your model is overfitting. This can be related to the rather small set of training points in your dataset. If you can not increase the dataset, you could still try to use a smaller model. I would maybe try to change the following settings: `n_interactions=3, n_features=64, n_layers=1`. (Question1)\r\nRegarding question 2: This could also be related to overfitting on the energy labels. You could change the loss-tradeoff and see if this helps. Therefore you can change `rho`. Maybe you could try the following values: `rho=0` (training on forces only), `rho=1` (training on energy only) and `rho=0.01` (stronger weight towards forces). Aftwerwards you can compare the results and see how good a training on only 1 property can get.\r\nI would also recommend a bigger batchsize, because this could help to reduce overfitting. If I remember correctly, you are using big systems, so you will have to check where the memory limits of your hardware are.\r\nIf this does not help to solve the problem, you can still try to use the PaiNN model in the dev branch. This will be released and merged to master in some weeks.","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/923840220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false}},{"id":5334400054,"node_id":"MEE_lADOCMZ5Ls47qsGTzwAAAAE99Hw2","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5334400054","actor":{"login":"Manyi-Yang","id":50021753,"node_id":"MDQ6VXNlcjUwMDIxNzUz","avatar_url":"https://avatars.githubusercontent.com/u/50021753?v=4","gravatar_id":"","url":"https://api.github.com/users/Manyi-Yang","html_url":"https://github.com/Manyi-Yang","followers_url":"https://api.github.com/users/Manyi-Yang/followers","following_url":"https://api.github.com/users/Manyi-Yang/following{/other_user}","gists_url":"https://api.github.com/users/Manyi-Yang/gists{/gist_id}","starred_url":"https://api.github.com/users/Manyi-Yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manyi-Yang/subscriptions","organizations_url":"https://api.github.com/users/Manyi-Yang/orgs","repos_url":"https://api.github.com/users/Manyi-Yang/repos","events_url":"https://api.github.com/users/Manyi-Yang/events{/privacy}","received_events_url":"https://api.github.com/users/Manyi-Yang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-21T10:19:17Z","performed_via_github_app":null},{"id":5334400063,"node_id":"SE_lADOCMZ5Ls47qsGTzwAAAAE99Hw_","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5334400063","actor":{"login":"Manyi-Yang","id":50021753,"node_id":"MDQ6VXNlcjUwMDIxNzUz","avatar_url":"https://avatars.githubusercontent.com/u/50021753?v=4","gravatar_id":"","url":"https://api.github.com/users/Manyi-Yang","html_url":"https://github.com/Manyi-Yang","followers_url":"https://api.github.com/users/Manyi-Yang/followers","following_url":"https://api.github.com/users/Manyi-Yang/following{/other_user}","gists_url":"https://api.github.com/users/Manyi-Yang/gists{/gist_id}","starred_url":"https://api.github.com/users/Manyi-Yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manyi-Yang/subscriptions","organizations_url":"https://api.github.com/users/Manyi-Yang/orgs","repos_url":"https://api.github.com/users/Manyi-Yang/repos","events_url":"https://api.github.com/users/Manyi-Yang/events{/privacy}","received_events_url":"https://api.github.com/users/Manyi-Yang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-21T10:19:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/924733782","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/338#issuecomment-924733782","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/338","id":924733782,"node_id":"IC_kwDOCMZ5Ls43HlFW","user":{"login":"Manyi-Yang","id":50021753,"node_id":"MDQ6VXNlcjUwMDIxNzUz","avatar_url":"https://avatars.githubusercontent.com/u/50021753?v=4","gravatar_id":"","url":"https://api.github.com/users/Manyi-Yang","html_url":"https://github.com/Manyi-Yang","followers_url":"https://api.github.com/users/Manyi-Yang/followers","following_url":"https://api.github.com/users/Manyi-Yang/following{/other_user}","gists_url":"https://api.github.com/users/Manyi-Yang/gists{/gist_id}","starred_url":"https://api.github.com/users/Manyi-Yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manyi-Yang/subscriptions","organizations_url":"https://api.github.com/users/Manyi-Yang/orgs","repos_url":"https://api.github.com/users/Manyi-Yang/repos","events_url":"https://api.github.com/users/Manyi-Yang/events{/privacy}","received_events_url":"https://api.github.com/users/Manyi-Yang/received_events","type":"User","site_admin":false},"created_at":"2021-09-22T09:08:37Z","updated_at":"2021-09-22T09:08:37Z","author_association":"NONE","body":"Hey @Stefaanhess \r\nThank you very much. \r\n### Test results\r\nI have tried the parameters that you suggested  `n_interactions=3, n_features=64, n_layers=1 roh=0.01`\r\nI got the following results. It seems the overfitting problem has been solved but the MAE Error for both the energy and force are increased. \r\n```\r\nNumber of points in val_dataset :124\r\nMAE:val_dataset\r\n    energy:    4.08493 meV/atom \r\n     forces:    193.834 meV/Å \r\nNumber of points in train_dataset :2100\r\nMAE:train_dataset\r\n    energy:    2.38001 meV/atom \r\n     forces:    178.906 meV/Å\r\n```\r\nI also did the tests that only trained on force `roh=0.0 `and energy` roh=10 ` :  \r\nif` roh=0.0,` the force becomes slightly better. The energy has a shift, which is easy to understand.\r\nif` roh=1.0`, the result is a mess.  it means the force is necessary. \r\nIt seems at the moment it is difficult to improve the accuracy of the force, right?\r\n```\r\n### **roh=0.0** \r\nNumber of points in val_dataset :124\r\nMAE:val_dataset\r\n    energy:  329.24504 meV/atom \r\n     forces:    178.936 meV/Å \r\nNumber of points in train_dataset :2100\r\nMAE:train_dataset\r\n    energy:  329.58044 meV/atom \r\n     forces:    169.168 meV/Å \r\n\r\n### **roh=1.0** \r\nNumber of points in val_dataset :124\r\nMAE:val_dataset\r\n    energy:    6.47760 meV/atom \r\n     forces:    705.361 meV/Å \r\nNumber of points in train_dataset :2100\r\nMAE:train_dataset\r\n    energy:    0.91868 meV/atom \r\n     forces:    699.444 meV/Å \r\n```\r\n Maybe I really need a large set of training points in my dataset. \r\nActually,  I also trained a model with about  35K training points in the dataset(coved more complicated configurational space than which I test above), which is super slow. The MEA energy and force of this model are too big. So this is the reason I did the test with only a small part of the configurational space as above. \r\nAnyway, I will try to use the PaiNN model.  Thanks again.","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/924733782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Manyi-Yang","id":50021753,"node_id":"MDQ6VXNlcjUwMDIxNzUz","avatar_url":"https://avatars.githubusercontent.com/u/50021753?v=4","gravatar_id":"","url":"https://api.github.com/users/Manyi-Yang","html_url":"https://github.com/Manyi-Yang","followers_url":"https://api.github.com/users/Manyi-Yang/followers","following_url":"https://api.github.com/users/Manyi-Yang/following{/other_user}","gists_url":"https://api.github.com/users/Manyi-Yang/gists{/gist_id}","starred_url":"https://api.github.com/users/Manyi-Yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manyi-Yang/subscriptions","organizations_url":"https://api.github.com/users/Manyi-Yang/orgs","repos_url":"https://api.github.com/users/Manyi-Yang/repos","events_url":"https://api.github.com/users/Manyi-Yang/events{/privacy}","received_events_url":"https://api.github.com/users/Manyi-Yang/received_events","type":"User","site_admin":false}},{"id":5341699104,"node_id":"MEE_lADOCMZ5Ls47qsGTzwAAAAE-Y9wg","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5341699104","actor":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-22T09:08:37Z","performed_via_github_app":null},{"id":5341699107,"node_id":"SE_lADOCMZ5Ls47qsGTzwAAAAE-Y9wj","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5341699107","actor":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-22T09:08:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/934306916","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/338#issuecomment-934306916","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/338","id":934306916,"node_id":"IC_kwDOCMZ5Ls43sGRk","user":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"created_at":"2021-10-05T11:08:01Z","updated_at":"2021-10-05T11:08:01Z","author_association":"COLLABORATOR","body":"Hey @Manyi-Yang \r\nit is hard to tell the optimal settings for your model, but the train-loss being a bit better than the val-loss should be ok.\r\nI would suggest to try if PaiNN works better for you :)","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/934306916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false}},{"id":5409956551,"node_id":"CE_lADOCMZ5Ls47qsGTzwAAAAFCdWLH","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5409956551","actor":{"login":"Stefaanhess","id":23171261,"node_id":"MDQ6VXNlcjIzMTcxMjYx","avatar_url":"https://avatars.githubusercontent.com/u/23171261?v=4","gravatar_id":"","url":"https://api.github.com/users/Stefaanhess","html_url":"https://github.com/Stefaanhess","followers_url":"https://api.github.com/users/Stefaanhess/followers","following_url":"https://api.github.com/users/Stefaanhess/following{/other_user}","gists_url":"https://api.github.com/users/Stefaanhess/gists{/gist_id}","starred_url":"https://api.github.com/users/Stefaanhess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stefaanhess/subscriptions","organizations_url":"https://api.github.com/users/Stefaanhess/orgs","repos_url":"https://api.github.com/users/Stefaanhess/repos","events_url":"https://api.github.com/users/Stefaanhess/events{/privacy}","received_events_url":"https://api.github.com/users/Stefaanhess/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-10-05T11:08:01Z","state_reason":null,"performed_via_github_app":null},{"id":5409956563,"node_id":"MEE_lADOCMZ5Ls47qsGTzwAAAAFCdWLT","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5409956563","actor":{"login":"Manyi-Yang","id":50021753,"node_id":"MDQ6VXNlcjUwMDIxNzUz","avatar_url":"https://avatars.githubusercontent.com/u/50021753?v=4","gravatar_id":"","url":"https://api.github.com/users/Manyi-Yang","html_url":"https://github.com/Manyi-Yang","followers_url":"https://api.github.com/users/Manyi-Yang/followers","following_url":"https://api.github.com/users/Manyi-Yang/following{/other_user}","gists_url":"https://api.github.com/users/Manyi-Yang/gists{/gist_id}","starred_url":"https://api.github.com/users/Manyi-Yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manyi-Yang/subscriptions","organizations_url":"https://api.github.com/users/Manyi-Yang/orgs","repos_url":"https://api.github.com/users/Manyi-Yang/repos","events_url":"https://api.github.com/users/Manyi-Yang/events{/privacy}","received_events_url":"https://api.github.com/users/Manyi-Yang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-10-05T11:08:01Z","performed_via_github_app":null},{"id":5409956569,"node_id":"SE_lADOCMZ5Ls47qsGTzwAAAAFCdWLZ","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5409956569","actor":{"login":"Manyi-Yang","id":50021753,"node_id":"MDQ6VXNlcjUwMDIxNzUz","avatar_url":"https://avatars.githubusercontent.com/u/50021753?v=4","gravatar_id":"","url":"https://api.github.com/users/Manyi-Yang","html_url":"https://github.com/Manyi-Yang","followers_url":"https://api.github.com/users/Manyi-Yang/followers","following_url":"https://api.github.com/users/Manyi-Yang/following{/other_user}","gists_url":"https://api.github.com/users/Manyi-Yang/gists{/gist_id}","starred_url":"https://api.github.com/users/Manyi-Yang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manyi-Yang/subscriptions","organizations_url":"https://api.github.com/users/Manyi-Yang/orgs","repos_url":"https://api.github.com/users/Manyi-Yang/repos","events_url":"https://api.github.com/users/Manyi-Yang/events{/privacy}","received_events_url":"https://api.github.com/users/Manyi-Yang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-10-05T11:08:01Z","performed_via_github_app":null}]