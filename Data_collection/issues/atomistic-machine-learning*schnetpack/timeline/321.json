[{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912448778","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/321#issuecomment-912448778","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/321","id":912448778,"node_id":"IC_kwDOCMZ5Ls42Yt0K","user":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"created_at":"2021-09-03T10:54:22Z","updated_at":"2021-09-03T10:54:22Z","author_association":"COLLABORATOR","body":"Sorry for the late reply. The full pressure can be computed from the stress tensor as:\r\n<a href=\"https://www.codecogs.com/eqnedit.php?latex=p&space;=&space;\\frac{2&space;E_\\mathrm{kin}}{3V}&space;-&space;\\frac{1}{3}\\mathrm{Tr}[\\sigma]\" target=\"_blank\"><img src=\"https://latex.codecogs.com/svg.latex?p&space;=&space;\\frac{2&space;E_\\mathrm{kin}}{3V}&space;-&space;\\frac{1}{3}\\mathrm{Tr}[\\sigma]\" title=\"p = \\frac{2 E_\\mathrm{kin}}{3V} - \\frac{1}{3}\\mathrm{Tr}[\\sigma]\" /></a>\r\nThe first term depends on the kinetic energy and the volume of the cell, which can be extracted from the hdf5 file (e.g. with `HDF5Loader.get_kinetic_energy()`) and computed from the cell.\r\nThe second term is the average of the diagonal terms in the stress tensor.\r\n\r\nWe are currently working on a new iteration of the package, where these things will be much easier to access.","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912448778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912599418","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/321#issuecomment-912599418","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/321","id":912599418,"node_id":"IC_kwDOCMZ5Ls42ZSl6","user":{"login":"siddharth-ncl-work","id":43916742,"node_id":"MDQ6VXNlcjQzOTE2NzQy","avatar_url":"https://avatars.githubusercontent.com/u/43916742?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharth-ncl-work","html_url":"https://github.com/siddharth-ncl-work","followers_url":"https://api.github.com/users/siddharth-ncl-work/followers","following_url":"https://api.github.com/users/siddharth-ncl-work/following{/other_user}","gists_url":"https://api.github.com/users/siddharth-ncl-work/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharth-ncl-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharth-ncl-work/subscriptions","organizations_url":"https://api.github.com/users/siddharth-ncl-work/orgs","repos_url":"https://api.github.com/users/siddharth-ncl-work/repos","events_url":"https://api.github.com/users/siddharth-ncl-work/events{/privacy}","received_events_url":"https://api.github.com/users/siddharth-ncl-work/received_events","type":"User","site_admin":false},"created_at":"2021-09-03T14:53:57Z","updated_at":"2021-09-03T14:53:57Z","author_association":"NONE","body":"@mgastegger , thanks a lot for getting back to me, I really appreciate taking time to help me out.\r\n\r\nI have two questions:\r\n1. What units are length/volume and pressure values reported in hdf5 and evenfiles?\r\n2. I tried calculating the pressure through hdf5 file using the formula as well as from tensorboard eventfile, unfortunately they are not matching.\r\n\r\n![download](https://user-images.githubusercontent.com/43916742/132023990-41245586-6ff6-4b5d-bef1-f4a061361778.png)\r\n\r\n[hdf5_and_eventfile.zip](https://github.com/atomistic-machine-learning/schnetpack/files/7106739/hdf5_and_eventfile.zip)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912599418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"siddharth-ncl-work","id":43916742,"node_id":"MDQ6VXNlcjQzOTE2NzQy","avatar_url":"https://avatars.githubusercontent.com/u/43916742?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharth-ncl-work","html_url":"https://github.com/siddharth-ncl-work","followers_url":"https://api.github.com/users/siddharth-ncl-work/followers","following_url":"https://api.github.com/users/siddharth-ncl-work/following{/other_user}","gists_url":"https://api.github.com/users/siddharth-ncl-work/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharth-ncl-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharth-ncl-work/subscriptions","organizations_url":"https://api.github.com/users/siddharth-ncl-work/orgs","repos_url":"https://api.github.com/users/siddharth-ncl-work/repos","events_url":"https://api.github.com/users/siddharth-ncl-work/events{/privacy}","received_events_url":"https://api.github.com/users/siddharth-ncl-work/received_events","type":"User","site_admin":false}},{"id":5253991531,"node_id":"MEE_lADOCMZ5Ls46WwV3zwAAAAE5KYxr","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5253991531","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-03T14:53:58Z","performed_via_github_app":null},{"id":5253991534,"node_id":"SE_lADOCMZ5Ls46WwV3zwAAAAE5KYxu","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5253991534","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-03T14:53:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912617135","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/321#issuecomment-912617135","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/321","id":912617135,"node_id":"IC_kwDOCMZ5Ls42ZW6v","user":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"created_at":"2021-09-03T15:20:30Z","updated_at":"2021-09-03T15:20:30Z","author_association":"COLLABORATOR","body":"The length volume/values in the hdf5 file use nanometers. The pressure in the event file is reported in bar.\r\nThe stress tensor is currently logged in model units, which probably is the reason for the difference.\r\n\r\nIf I use kcal/mol/A^3 for the stress tensor, I get something better resembling the event file pressure.\r\n```\r\nfrom schnetpack.md import HDF5Loader\r\nfrom schnetpack.md import MDUnits\r\n\r\ndata = HDF5Loader(\"simulation.hdf5\")\r\n\r\nekin = data.get_kinetic_energy()\r\nstress = data.get_property(\"stress\")\r\ncell = data.get_property(\"_cell\")\r\n\r\nvol = np.linalg.det(cell)\r\nstress_iso = 1./3. * np.einsum(\"bii->b\", stress)\r\n\r\n# Convert to internal units assuming stress is kcal/mol/A^3\r\nstress_iso = stress_iso * MDUnits.unit2internal(\"kcal/mol/A/A/A\")\r\n\r\n# Compute pressure\r\np = 2./3. * ekin / vol - stress_iso\r\n\r\n# Convert to bar\r\np = p / MDUnits.bar2internal\r\n```\r\n![image](https://user-images.githubusercontent.com/36198330/132028363-bf9bc3b0-384b-4ac6-ace8-6a009d33db1b.png)\r\n","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912617135/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912644061","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/321#issuecomment-912644061","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/321","id":912644061,"node_id":"IC_kwDOCMZ5Ls42Zdfd","user":{"login":"siddharth-ncl-work","id":43916742,"node_id":"MDQ6VXNlcjQzOTE2NzQy","avatar_url":"https://avatars.githubusercontent.com/u/43916742?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharth-ncl-work","html_url":"https://github.com/siddharth-ncl-work","followers_url":"https://api.github.com/users/siddharth-ncl-work/followers","following_url":"https://api.github.com/users/siddharth-ncl-work/following{/other_user}","gists_url":"https://api.github.com/users/siddharth-ncl-work/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharth-ncl-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharth-ncl-work/subscriptions","organizations_url":"https://api.github.com/users/siddharth-ncl-work/orgs","repos_url":"https://api.github.com/users/siddharth-ncl-work/repos","events_url":"https://api.github.com/users/siddharth-ncl-work/events{/privacy}","received_events_url":"https://api.github.com/users/siddharth-ncl-work/received_events","type":"User","site_admin":false},"created_at":"2021-09-03T15:57:02Z","updated_at":"2021-09-03T15:57:02Z","author_association":"NONE","body":"I did use \"kcal/mol/A^3\" for the stress tensor in my model. After converting pressure to internal units plots are matching quite well at my end. Again, thanks a lot for the help.\r\n\r\n![download (2)](https://user-images.githubusercontent.com/43916742/132033988-93049d96-2d68-493c-b482-660ca3b38e96.png)\r\n","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/912644061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"siddharth-ncl-work","id":43916742,"node_id":"MDQ6VXNlcjQzOTE2NzQy","avatar_url":"https://avatars.githubusercontent.com/u/43916742?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharth-ncl-work","html_url":"https://github.com/siddharth-ncl-work","followers_url":"https://api.github.com/users/siddharth-ncl-work/followers","following_url":"https://api.github.com/users/siddharth-ncl-work/following{/other_user}","gists_url":"https://api.github.com/users/siddharth-ncl-work/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharth-ncl-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharth-ncl-work/subscriptions","organizations_url":"https://api.github.com/users/siddharth-ncl-work/orgs","repos_url":"https://api.github.com/users/siddharth-ncl-work/repos","events_url":"https://api.github.com/users/siddharth-ncl-work/events{/privacy}","received_events_url":"https://api.github.com/users/siddharth-ncl-work/received_events","type":"User","site_admin":false}},{"id":5254587053,"node_id":"CE_lADOCMZ5Ls46WwV3zwAAAAE5MqKt","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/5254587053","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-09-03T16:52:05Z","state_reason":null,"performed_via_github_app":null}]