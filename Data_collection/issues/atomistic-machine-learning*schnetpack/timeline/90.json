[{"id":2248827138,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyMjQ4ODI3MTM4","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/2248827138","actor":{"login":"ktschuett","id":6585114,"node_id":"MDQ6VXNlcjY1ODUxMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6585114?v=4","gravatar_id":"","url":"https://api.github.com/users/ktschuett","html_url":"https://github.com/ktschuett","followers_url":"https://api.github.com/users/ktschuett/followers","following_url":"https://api.github.com/users/ktschuett/following{/other_user}","gists_url":"https://api.github.com/users/ktschuett/gists{/gist_id}","starred_url":"https://api.github.com/users/ktschuett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktschuett/subscriptions","organizations_url":"https://api.github.com/users/ktschuett/orgs","repos_url":"https://api.github.com/users/ktschuett/repos","events_url":"https://api.github.com/users/ktschuett/events{/privacy}","received_events_url":"https://api.github.com/users/ktschuett/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-04-03T06:55:35Z","assignee":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/481591687","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/90#issuecomment-481591687","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/90","id":481591687,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTU5MTY4Nw==","user":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T08:26:47Z","updated_at":"2019-04-10T08:26:47Z","author_association":"COLLABORATOR","body":"Sorry for the long wait. The functionality is not implemented yet.\r\n\r\nHowever, what one could do is to iterate over the data once using the initialized BehlerSFBlock and store the computed symmetry functions directly in the db.\r\n\r\nI will have a look at it.","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/481591687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/482556436","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/90#issuecomment-482556436","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/90","id":482556436,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjU1NjQzNg==","user":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"created_at":"2019-04-12T12:30:05Z","updated_at":"2019-04-12T12:30:05Z","author_association":"COLLABORATOR","body":"After comparing the GPU training times with stored symmetry functions and the on the fly computation currently implemented, I found the following:\r\n\r\nUnfortunately, storing the SFs does not lead to a better performance. Due to the I/O overhead, the algorithm computing them on the fly is significantly faster, even for small molecules. Moreover, even when ignoring the above issue, storing the SFs is only feasible if no derivatives (forces) should be computed. In the case of forces, one needs to evaluate\r\n<a href=\"https://www.codecogs.com/eqnedit.php?latex=\\mathbf{F}_\\alpha&space;=&space;-\\sum_i^{N_\\mathrm{Atoms}}&space;\\sum_\\sigma^{N_\\mathrm{SF}}&space;\\frac{\\partial&space;E_i}{\\partial&space;G^i_\\sigma}&space;\\frac{\\partial&space;G^i_\\sigma}{\\mathbf{R}_\\alpha}\" target=\"_blank\"><img src=\"https://latex.codecogs.com/gif.latex?\\mathbf{F}_\\alpha&space;=&space;-\\sum_i^{N_\\mathrm{Atoms}}&space;\\sum_\\sigma^{N_\\mathrm{SF}}&space;\\frac{\\partial&space;E_i}{\\partial&space;G^i_\\sigma}&space;\\frac{\\partial&space;G^i_\\sigma}{\\mathbf{R}_\\alpha}\" title=\"\\mathbf{F}_\\alpha = -\\sum_i^{N_\\mathrm{Atoms}} \\sum_\\sigma^{N_\\mathrm{SF}} \\frac{\\partial E_i}{\\partial G^i_\\sigma} \\frac{\\partial G^i_\\sigma}{\\mathbf{R}_\\alpha}\" /></a>\r\nfor every atom, where G is the SF vector on each atom. If the SFs are stored, one would also need to store the <a href=\"https://www.codecogs.com/eqnedit.php?latex={\\partial&space;G^i_\\sigma}&space;/&space;{\\mathbf{R}_\\alpha}\" target=\"_blank\"><img src=\"https://latex.codecogs.com/gif.latex?{\\partial&space;G^i_\\sigma}&space;/&space;{\\mathbf{R}_\\alpha}\" title=\"{\\partial G^i_\\sigma} / {\\mathbf{R}_\\alpha}\" /></a>, which amounts to <a href=\"https://www.codecogs.com/eqnedit.php?latex=3&space;\\times&space;{N_\\mathrm{Atoms}}^2&space;\\times&space;{N_\\mathrm{SF}}\" target=\"_blank\"><img src=\"https://latex.codecogs.com/gif.latex?3&space;\\times&space;{N_\\mathrm{Atoms}}^2&space;\\times&space;{N_\\mathrm{SF}}\" title=\"3 \\times {N_\\mathrm{Atoms}}^2 \\times {N_\\mathrm{SF}}\" /></a> elements per molecule. This will definitively lead to massive I/O problems. As such, storing symmetry functions is not really practical.\r\n\r\nIf the calculation is slow due to the number of atoms in the system, it might help to choose a suitable cutoff and exchange the basic environment provider `schnetpack.environment.SimpleEnvironmentProvider` to `schnetpack.environment.AseEnvironmentProvider`, as this reduces the number of neighbors considered in the SFs to the relevant cutoff regions.","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/482556436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false}},{"id":2272295441,"node_id":"MDExOkNsb3NlZEV2ZW50MjI3MjI5NTQ0MQ==","url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/events/2272295441","actor":{"login":"mgastegger","id":36198330,"node_id":"MDQ6VXNlcjM2MTk4MzMw","avatar_url":"https://avatars.githubusercontent.com/u/36198330?v=4","gravatar_id":"","url":"https://api.github.com/users/mgastegger","html_url":"https://github.com/mgastegger","followers_url":"https://api.github.com/users/mgastegger/followers","following_url":"https://api.github.com/users/mgastegger/following{/other_user}","gists_url":"https://api.github.com/users/mgastegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mgastegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgastegger/subscriptions","organizations_url":"https://api.github.com/users/mgastegger/orgs","repos_url":"https://api.github.com/users/mgastegger/repos","events_url":"https://api.github.com/users/mgastegger/events{/privacy}","received_events_url":"https://api.github.com/users/mgastegger/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-04-12T12:30:05Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/487618418","html_url":"https://github.com/atomistic-machine-learning/schnetpack/issues/90#issuecomment-487618418","issue_url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/90","id":487618418,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzYxODQxOA==","user":{"login":"lmj1029123","id":34913961,"node_id":"MDQ6VXNlcjM0OTEzOTYx","avatar_url":"https://avatars.githubusercontent.com/u/34913961?v=4","gravatar_id":"","url":"https://api.github.com/users/lmj1029123","html_url":"https://github.com/lmj1029123","followers_url":"https://api.github.com/users/lmj1029123/followers","following_url":"https://api.github.com/users/lmj1029123/following{/other_user}","gists_url":"https://api.github.com/users/lmj1029123/gists{/gist_id}","starred_url":"https://api.github.com/users/lmj1029123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmj1029123/subscriptions","organizations_url":"https://api.github.com/users/lmj1029123/orgs","repos_url":"https://api.github.com/users/lmj1029123/repos","events_url":"https://api.github.com/users/lmj1029123/events{/privacy}","received_events_url":"https://api.github.com/users/lmj1029123/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T15:08:52Z","updated_at":"2019-04-29T15:08:52Z","author_association":"CONTRIBUTOR","body":"I see. Thanks a lot for the detailed reply. ","reactions":{"url":"https://api.github.com/repos/atomistic-machine-learning/schnetpack/issues/comments/487618418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lmj1029123","id":34913961,"node_id":"MDQ6VXNlcjM0OTEzOTYx","avatar_url":"https://avatars.githubusercontent.com/u/34913961?v=4","gravatar_id":"","url":"https://api.github.com/users/lmj1029123","html_url":"https://github.com/lmj1029123","followers_url":"https://api.github.com/users/lmj1029123/followers","following_url":"https://api.github.com/users/lmj1029123/following{/other_user}","gists_url":"https://api.github.com/users/lmj1029123/gists{/gist_id}","starred_url":"https://api.github.com/users/lmj1029123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmj1029123/subscriptions","organizations_url":"https://api.github.com/users/lmj1029123/orgs","repos_url":"https://api.github.com/users/lmj1029123/repos","events_url":"https://api.github.com/users/lmj1029123/events{/privacy}","received_events_url":"https://api.github.com/users/lmj1029123/received_events","type":"User","site_admin":false}}]