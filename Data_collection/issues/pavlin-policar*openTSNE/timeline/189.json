[{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/880801192","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-880801192","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":880801192,"node_id":"MDEyOklzc3VlQ29tbWVudDg4MDgwMTE5Mg==","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-07-15T15:40:05Z","updated_at":"2021-07-15T15:40:05Z","author_association":"NONE","body":"I'm also getting this issue while calling `fit_transform` from the opentsne.sklearn submodule. Any thoughts on this @pavlin-policar ?","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/880801192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"id":5026229860,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAyNjIyOTg2MA==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5026229860","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-15T15:40:05Z","performed_via_github_app":null},{"id":5026229867,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMjYyMjk4Njc=","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5026229867","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-15T15:40:05Z","performed_via_github_app":null},{"id":5140787040,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NTE0MDc4NzA0MA==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5140787040","actor":{"login":"jnboehm","id":12418563,"node_id":"MDQ6VXNlcjEyNDE4NTYz","avatar_url":"https://avatars.githubusercontent.com/u/12418563?v=4","gravatar_id":"","url":"https://api.github.com/users/jnboehm","html_url":"https://github.com/jnboehm","followers_url":"https://api.github.com/users/jnboehm/followers","following_url":"https://api.github.com/users/jnboehm/following{/other_user}","gists_url":"https://api.github.com/users/jnboehm/gists{/gist_id}","starred_url":"https://api.github.com/users/jnboehm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnboehm/subscriptions","organizations_url":"https://api.github.com/users/jnboehm/orgs","repos_url":"https://api.github.com/users/jnboehm/repos","events_url":"https://api.github.com/users/jnboehm/events{/privacy}","received_events_url":"https://api.github.com/users/jnboehm/received_events","type":"User","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2021-08-11T09:31:17Z","rename":{"from":"Cannot pass random state PerplexityBasedNN when using Annoy","to":"Cannot pass random_state to PerplexityBasedNN when using Annoy"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949435119","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949435119","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949435119,"node_id":"IC_kwDOCCUuTM44lzrv","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T09:11:28Z","updated_at":"2021-10-22T09:11:28Z","author_association":"OWNER","body":"Hi, thanks for reporting this. This is an issue with hnswlib and annoy, which do not support being called with a `RandomState` instance. I've implemented a workaround, so this will be fixed in the next release.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949435119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"id":5503596518,"node_id":"REFE_lADOCCUuTM43VKVvzwAAAAFICjfm","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5503596518","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"a7a46c68b5886117ab52d8bce40f40d30a6d50cd","commit_url":"https://api.github.com/repos/pavlin-policar/openTSNE/commits/a7a46c68b5886117ab52d8bce40f40d30a6d50cd","created_at":"2021-10-22T09:14:47Z","performed_via_github_app":null},{"id":5503643654,"node_id":"REFE_lADOCCUuTM43VKVvzwAAAAFICvAG","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5503643654","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"c8a2dcbde449f1ed528e84153a31785e186f705d","commit_url":"https://api.github.com/repos/pavlin-policar/openTSNE/commits/c8a2dcbde449f1ed528e84153a31785e186f705d","created_at":"2021-10-22T09:23:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949449480","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949449480","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949449480,"node_id":"IC_kwDOCCUuTM44l3MI","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T09:28:15Z","updated_at":"2021-10-22T09:28:15Z","author_association":"NONE","body":"@pavlin-policar I think it would be great if the new commit would support the `Generator` interface as well since it is not very different from `RandomState`.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949449480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"id":5503671443,"node_id":"MEE_lADOCCUuTM43VKVvzwAAAAFIC1yT","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5503671443","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-10-22T09:28:15Z","performed_via_github_app":null},{"id":5503671452,"node_id":"SE_lADOCCUuTM43VKVvzwAAAAFIC1yc","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5503671452","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-10-22T09:28:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949452408","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949452408","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949452408,"node_id":"IC_kwDOCCUuTM44l354","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T09:31:21Z","updated_at":"2021-10-22T09:31:21Z","author_association":"OWNER","body":"Hmm, could you please link to this `Generator`? I've never heard of it before. Is it standard in Python?","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949452408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949457088","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949457088","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949457088,"node_id":"IC_kwDOCCUuTM44l5DA","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T09:37:56Z","updated_at":"2021-10-22T09:37:56Z","author_association":"NONE","body":"> Hmm, could you please link to this `Generator`? I've never heard of it before. Is it standard in Python?\r\n\r\nYes, this is the new Numpy random generator interface that replaces `RandomState`. It was introduced in numpy v1.17 and is to be used going forward. The `RandomState` class development has stopped and only exists now for backwards compatibility.\r\n\r\nSee:\r\nhttps://numpy.org/neps/nep-0019-rng-policy.html\r\nhttps://numpy.org/doc/stable/reference/random/generator.html","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949457088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949457928","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949457928","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949457928,"node_id":"IC_kwDOCCUuTM44l5QI","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T09:39:07Z","updated_at":"2021-10-22T09:40:18Z","author_association":"NONE","body":"Also see this recent discussion on the scikit-learn issue tracker: https://github.com/scikit-learn/scikit-learn/issues/20669","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949457928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949464901","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949464901","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949464901,"node_id":"IC_kwDOCCUuTM44l69F","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T09:48:22Z","updated_at":"2021-10-22T09:48:22Z","author_association":"OWNER","body":"Hmm, do you know if there's any way to extract the seed from the `Generator` class? I don't see one.\r\n\r\n`RandomState` also doesn't have such an option, but I managed to come up with a hacky solution [here](https://github.com/pavlin-policar/openTSNE/pull/196/files#diff-83dd5a228cce8d671f834d1f7233d5193257b0428940da82bd8b846cf5d13859R618).\r\n\r\nWe can always just generate a random int and use that for the seed in Annoy and hnswlib, but that could cause confusion. ","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949464901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"id":5503799488,"node_id":"CE_lADOCCUuTM43VKVvzwAAAAFIDVDA","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/5503799488","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":"c8a2dcbde449f1ed528e84153a31785e186f705d","commit_url":"https://api.github.com/repos/pavlin-policar/openTSNE/commits/c8a2dcbde449f1ed528e84153a31785e186f705d","created_at":"2021-10-22T09:52:10Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949473661","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949473661","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949473661,"node_id":"IC_kwDOCCUuTM44l9F9","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T10:00:06Z","updated_at":"2021-10-22T10:00:06Z","author_association":"OWNER","body":"I've closed this issue now, because the original issue is now fixed. I will add support for `Generator` in a future PR if I think it makes sense. It seems as though RandomState will eventually be deprecated, so we'll have to do this eventually.\r\n\r\nBut in a more big-picture view, this isn't really a problem with openTSNE. All this is to accommodate for the fact that neither Annoy nor hnswlib play nice with numpy's RNG classes. openTSNE now has a number of workarounds that \"fix\" incorrect behaviour from our dependent libraries. I do not like this at all, since this means that every time these downstream dependencies make a change to their behaviour, we have adapt the workaround. I would much rather we open this issue with Annoy and hnswlib and encourage them to make their libraries play nice with the Python ecosystem.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949473661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949484766","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949484766","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949484766,"node_id":"IC_kwDOCCUuTM44l_ze","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T10:14:22Z","updated_at":"2021-10-22T10:14:40Z","author_association":"NONE","body":"> Hmm, do you know if there's any way to extract the seed from the `Generator` class? I don't see one.\r\n> \r\n> `RandomState` also doesn't have such an option, but I managed to come up with a hacky solution [here](https://github.com/pavlin-policar/openTSNE/pull/196/files#diff-83dd5a228cce8d671f834d1f7233d5193257b0428940da82bd8b846cf5d13859R618).\r\n> \r\n> We can always just generate a random int and use that for the seed in Annoy and hnswlib, but that could cause confusion.\r\n\r\nThe method you used is common for manipulating state in `RandomState`. In `Generator` you can used something like the following example:\r\n\r\n```python\r\n>>> g = numpy.random.default_rng(12345)\r\n>>> seed = g.bit_generator.state\r\n>>> seed\r\n{'bit_generator': 'PCG64', 'state': {'state': 33261208707367790463622745601869196757, 'inc': 268209174141567072605526753992732310247}, 'has_uint32': 0, 'uinteger': 0}\r\n>>> new_g = numpy.random.default_rng()\r\n>>> new_g.__setstate__(seed)\r\n>>> new_g.bit_generator.state\r\n{'bit_generator': 'PCG64', 'state': {'state': 33261208707367790463622745601869196757, 'inc': 268209174141567072605526753992732310247}, 'has_uint32': 0, 'uinteger': 0}\r\n```\r\n\r\nI do agree that there real issue should be fixed in the Annoy package, but it doesn't look like the package is actively being developed anymore. I will poke around the repo and see if someone has brought up the issue before.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949484766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949492869","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949492869","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949492869,"node_id":"IC_kwDOCCUuTM44mByF","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T10:25:27Z","updated_at":"2021-10-22T10:25:27Z","author_association":"OWNER","body":"This isn't really what I'm looking for. I would want to be able to extract the original seed from the random state -- in this case 12345. The reason being that if I call openTSNE with random_seed=12345, I would expect this to give me the same results as calling Annoy on its own with 12345. This isn't really what happens, but it's what I would expect.\r\n\r\nCome to think of this now, my workaround probably doesn't really work because invoking the RNG will change the state, e.g.\r\n```python\r\n>>> random_state = np.random.RandomState(42)\r\n>>> random_state.get_state()[1][0]\r\n42\r\n>>> random_state.randint(10)\r\n6\r\n>>> random_state.get_state()[1][0]\r\n723970371\r\n```\r\nIn which case I see no solution to this problem, except generating a random int and seeding annoy with that.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949492869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949497936","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949497936","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949497936,"node_id":"IC_kwDOCCUuTM44mDBQ","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T10:32:29Z","updated_at":"2021-10-22T10:37:21Z","author_association":"NONE","body":"This is what you'd be looking for in `Generator`\r\n```python\r\n>>> g.bit_generator._seed_seq.entropy\r\n12345\r\n```\r\n\r\nHowever this is bad practice to have multiple rng's initialized with the same state. It would make sense to pass a random value to Annoy that is governed by the generator initialized by `12345`.\r\n\r\n\r\n\r\n> This isn't really what I'm looking for. I would want to be able to extract the original seed from the random state -- in this case 12345. The reason being that if I call openTSNE with random_seed=12345, I would expect this to give me the same results as calling Annoy on its own with 12345. This isn't really what happens, but it's what I would expect.\r\n> \r\n> Come to think of this now, my workaround probably doesn't really work because invoking the RNG will change the state, e.g.\r\n> \r\n> ```python\r\n> >>> random_state = np.random.RandomState(42)\r\n> >>> random_state.get_state()[1][0]\r\n> 42\r\n> >>> random_state.randint(10)\r\n> 6\r\n> >>> random_state.get_state()[1][0]\r\n> 723970371\r\n> ```\r\n> \r\n> In which case I see no solution to this problem, except generating a random int and seeding annoy with that.\r\n\r\n`get_state` only gets the current state of the bitgenerator, not the entropy used to initialize it. To get the entropy you could just use the same approach outlined for `generator` but instead use `_bit_generator` instead of `bit_generator`:\r\n```python\r\ng._bit_generator._seed_seq.entropy\r\n```","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949497936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949503325","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949503325","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949503325,"node_id":"IC_kwDOCCUuTM44mEVd","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T10:40:15Z","updated_at":"2021-10-22T10:40:15Z","author_association":"OWNER","body":"Yes, generating a random integer to seed annoy seems like the way to go then. The problem is now shifted to backwards compatibility. We rely on `check_random_state` from scikit-learn to take care of the RNG and always get a RandomState instance. I don't think I want to add extra code to support `Generator` until scikit-learn supports it as well. The big issue is that this was added in numpy 1.17, but I build my wheels on 1.16. Obviously, I can bump up the minimum numpy version, but I'd like to avoid this as much as possible.\r\n\r\nI think I'll keep this as is for the time being, or at least until scikit-learn incorporates this as well. It seems like added complexity for almost no benefit for the time being.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949503325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949512553","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-949512553","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":949512553,"node_id":"IC_kwDOCCUuTM44mGlp","user":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false},"created_at":"2021-10-22T10:50:35Z","updated_at":"2021-10-22T10:53:43Z","author_association":"NONE","body":"> Yes, generating a random integer to seed annoy seems like the way to go then. The problem is now shifted to backwards compatibility. We rely on `check_random_state` from scikit-learn to take care of the RNG and always get a RandomState instance. I don't think I want to add extra code to support `Generator` until scikit-learn supports it as well. The big issue is that this was added in numpy 1.17, but I build my wheels on 1.16. Obviously, I can bump up the minimum numpy version, but I'd like to avoid this as much as possible.\r\n> \r\n> I think I'll keep this as is for the time being, or at least until scikit-learn incorporates this as well. It seems like added complexity for almost no benefit for the time being.\r\n\r\nThat is understandable. I would like to also bring to your attention the proposed [Recommend Python and NumPy version support as a community policy standard](https://numpy.org/neps/nep-0029-deprecation_policy.html) introduced by NEP29. This is intended to help reduce compatibility issues for downstream packages that depend on numpy and other core package packages in the python eco-system.\r\n\r\nI did implement a workaround for small project of mine that depends on scikit-learn. Here is the simple implementation that allows users to pass in both generator interfaces without worrying about support. Essentially, when a user passes in an RNG, it gets converted to a `Generator` instance internally through the `check_random_state` function. When that instance needs to be passed to scikit-learn classes, I convert it to a `RandomState` with the `safe_random_state` function. This approach keeps the same bit generator the user passed in and does not have to use hacks to make things work. See:\r\nhttps://github.com/zoj613/pyloras/blob/9f27e7e25eb62dd90ca9883e3ee60f9c2ce348dd/pyloras/_common.py#L4-L19\r\n\r\nExamples:\r\nhttps://github.com/zoj613/pyloras/blob/9f27e7e25eb62dd90ca9883e3ee60f9c2ce348dd/pyloras/_gamus.py#L142\r\nhttps://github.com/zoj613/pyloras/blob/9f27e7e25eb62dd90ca9883e3ee60f9c2ce348dd/pyloras/_gamus.py#L136","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/949512553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zoj613","id":44142765,"node_id":"MDQ6VXNlcjQ0MTQyNzY1","avatar_url":"https://avatars.githubusercontent.com/u/44142765?v=4","gravatar_id":"","url":"https://api.github.com/users/zoj613","html_url":"https://github.com/zoj613","followers_url":"https://api.github.com/users/zoj613/followers","following_url":"https://api.github.com/users/zoj613/following{/other_user}","gists_url":"https://api.github.com/users/zoj613/gists{/gist_id}","starred_url":"https://api.github.com/users/zoj613/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoj613/subscriptions","organizations_url":"https://api.github.com/users/zoj613/orgs","repos_url":"https://api.github.com/users/zoj613/repos","events_url":"https://api.github.com/users/zoj613/events{/privacy}","received_events_url":"https://api.github.com/users/zoj613/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/950308749","html_url":"https://github.com/pavlin-policar/openTSNE/issues/189#issuecomment-950308749","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/189","id":950308749,"node_id":"IC_kwDOCCUuTM44pI-N","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2021-10-24T11:41:22Z","updated_at":"2021-10-24T11:41:22Z","author_association":"OWNER","body":"Thanks for this link to the numpy deprecation cycle -- I wasn't aware of this, and I'll try to keep openTSNE up to date with this. By the looks of things, since officially, only numpy v1.18 is supported, the `Generator` interface you're proposing should be completely fine to use, since it was added in 1.17.\r\n\r\nYour workaround seems great, and I would be happy to review and incorporate this here if you open up a PR. It seems to me that since numpy is eventually going to deprecate `RandomState`, scikit-learn will probably also go through a similar cycle, where they will have to support both `RandomState` and `Generator` at the same time. I mention this only because I want openTSNE to behave as similarly as possible to scikit-learn, since that's what everybody's used to.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/950308749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}}]