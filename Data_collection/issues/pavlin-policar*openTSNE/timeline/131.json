[{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/626122549","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-626122549","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":626122549,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjEyMjU0OQ==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-05-09T07:35:42Z","updated_at":"2020-05-09T07:35:42Z","author_association":"OWNER","body":"The API is written so that this kind of stuff is fairly simple. You can define a class like this (I haven't tested this at all, but it should be something like this) and pass this as a parameter to the `TSNEEmbedding` constructor. \r\n\r\n```python\r\nclass KNNGAffinities(openTSNE.affinity.Affinities):\r\n    def __init__(\r\n        self,\r\n        data,\r\n        k_neighbors=30,\r\n        method=\"auto\",\r\n        metric=\"euclidean\",\r\n        metric_params=None,\r\n        symmetrize=True,\r\n        n_jobs=1,\r\n        random_state=None,\r\n        verbose=False,\r\n    ):\r\n        self.n_samples = data.shape[0]\r\n        self.k_neighbors = k_neighbors\r\n        self.verbose = verbose\r\n        self.n_jobs = n_jobs\r\n\r\n        self.knn_index, neighbors, distances = openTSNE.affinity.build_knn_index(\r\n            data, method, k_neighbors, metric, metric_params, n_jobs, random_state, verbose\r\n        )\r\n        A = sp.csr_matrix(\r\n            (\r\n                np.ones_like(distances).ravel(),\r\n                neighbors.ravel(),\r\n                range(0, self.n_samples * self.k_neighbors + 1, self.k_neighbors),\r\n            ),\r\n            shape=(self.n_samples, self.n_samples),\r\n        )\r\n\r\n        # Symmetrize + normalize the probability matrix\r\n        P = (A + A.T) / 2\r\n        P /= np.sum(P)\r\n        self.P = P\r\n```\r\n\r\nI am a bit hesitant about just adding a bunch of affinity models because they haven't really been shown to work. I had also played around with an affinity model that took any undirected graph, which is also interesting. Perhaps it might be better to start a wiki page here on the GH repository and add code snippets there.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/626122549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/626151497","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-626151497","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":626151497,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjE1MTQ5Nw==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-05-09T11:13:32Z","updated_at":"2020-05-09T11:13:32Z","author_association":"CONTRIBUTOR","body":"For me this one is important because for high-dimensional data using kNN with k=90 becomes a major bottleneck. T-SNE usually produces almost the same result with perplexity 30 (meaning k=90) and uniform kNN kernel with k=10--15 (some evidence here: https://twitter.com/hippopedoid/status/1232698023253303298). In most cases I do not care much about it because I reduce the dimensionality with PCA and then it's not expensive to find k=90 neighbors. But now when playing with sparse data and cosine distances, I am not using PCA first, and so end up needing to find kNN with Pynndescent directly on a pretty large matrix. Finding k=90 neighbors makes it ridiculously long, compared to k=15 or k=10 neighbors. And of course UMAP ends up much faster because it only uses k=15 neighbors.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/626151497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/630428849","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-630428849","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":630428849,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMDQyODg0OQ==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-05-18T20:52:10Z","updated_at":"2020-05-19T15:36:44Z","author_association":"CONTRIBUTOR","body":"An alternative idea that came to my mind today is to add a `n_neighbors` parameter that would explicitly define the k in the kNN graph, separate from perplexity. The default setting would be `n_neighbors = 'auto'` that is interpreted as `n_neighbors = 3 * perplexity`. But this does not need to be set in stone, and one could use `2 * perplexity` or `10 * perplexity` if one chooses. In particular, one could use `n_neighbors = perplexity`, in which case the sigma becomes infinite and the distribution uniform, i.e. it's the kNN kernel. So this would allow to specify a kNN affinity kernel using e.g. `perplexity=15, n_neighbors=15`. Or one could use something like `perplexity=10, n_neighbors=15` which will be slightly decaying but still restricted to 15 nearest neighbors.\r\n\r\nI actually like this quite a lot.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/630428849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/631264318","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-631264318","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":631264318,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTI2NDMxOA==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-05-20T06:26:05Z","updated_at":"2020-05-20T06:26:05Z","author_association":"OWNER","body":"I really don't want to put this into the standard, public API. This is quite different from what we currently do, and I don't really see the benefits of this for the average user, who just wants a pretty picture. I also don't think this would have a very drastic effect on the embeddings (you said once that the uniform kernel produces very similar results to the standard gaussian, and this seems to be a kind of middle ground). So I definitely don't want to add that into the public API.\r\n\r\nThat said, it seems like an interesting thing to try out, and this is exactly the kind of stuff openTSNE was designed to make easy to test. It should be easy to put together an affinity model that would do this. And if this ends up being useful, we can put it into `openTSNE.affinity`. This way people would still be able to access it, but they would know what they're getting into.\r\n\r\nI don't really see what the benefit of this is though. Why would setting `k_neighbors=10*perplexity` be a good idea? Since these are put into the Gaussian, these decay exponentially, and anything over `3*perplexity` would be virtually zero. Or would you also change how the kernel bandwidth is calculated? In that case, perplexity wouldn't make that much sense anymore. As for the uniform kernel, I like this, but it feels like it should be its own affinity model. I also like the idea of being able to pass in any graph since t-SNE is just a force-directed layout and compare that to graph-layout algorithms. Maybe these could be combined in some way.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/631264318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/631715448","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-631715448","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":631715448,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTcxNTQ0OA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-05-20T20:42:52Z","updated_at":"2020-05-20T20:42:52Z","author_association":"CONTRIBUTOR","body":"My main point was that it can take a lot more time to build kNN graph with k=90 compared to k=15 for large sparse matrices. E.g. analyzing a 100000x9630 sparse matrix with prime factorizations on an old laptop now, I got the following runtimes (after numba precompilation):\r\n```\r\nUMAP(metric='cosine', init='random').fit_transform(X)    # 8 min\r\nTSNE(metric='cosine', n_jobs=-1, initialization='random').fit(X)   # 24 min\r\n```\r\nso deafult t-SNE is a lot slower. How to make it faster? Use smaller k. My go-to approach is to use uniform kernel with k=15 (or even 10), like this:\r\n```\r\nA = affinity.FixedSigmaNN(X, sigma=1e+6, k=15, metric=\"cosine\", n_jobs=-1)\r\nI = initialization.random(X)\r\nE = TSNEEmbedding(I, A, n_jobs=-1)\r\nE = E.optimize(n_iter=250, exaggeration=12, momentum=0.5)\r\nE = E.optimize(n_iter=500, exaggeration=1,  momentum=0.8)\r\n```\r\n(4.5 min), but I think it's pretty cumbersome for any normal user. Note that it will not become much less cumbersome even if uniform affinity kernel gets its own class. My suggestion to include `n_neighbors` parameter would allow a one-liner `fit()` call with 15 neighbors and either a uniform affinity kernel (perplexity=15) or a slightly decaying kernel (perplexity=10). Based on my experiments, the result should be very similar to the default perplexity=30.\r\n\r\nOf course there is an alternative approach, which is to use perplexity=5. It would use k=15:\r\n```\r\nTSNE(metric='cosine', perplexity=5, n_jobs=-1, initialization='random').fit(X)\r\n```\r\n(4.5 min). Maybe this is fine, but I am usually a bit reluctant to use so small perplexity values.\r\n\r\nThis was just to explain my reasoning here. ","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/631715448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632000469","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-632000469","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":632000469,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjAwMDQ2OQ==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T10:05:11Z","updated_at":"2020-05-21T10:05:11Z","author_association":"OWNER","body":"Oh, I see, that makes sense then. I didn't think you were coming at it from an execution-time perspective.\r\n\r\nYeah, the long way of writing it out is a bit annoying, I notice it when I want to do multiscale kernels as well. Then having to call optimize every time can get tedious. I still think adding a `k_neighors` parameter to the default implementation is a bad idea. We could make this a whole lot less annoying by adding an `affinities` parameter to the constructor and then the 5-line t-SNE call would be reduced to 2 lines. I like this a lot more than adapting the default API to the uniform kernel. What do you think?","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632000469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632001554","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-632001554","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":632001554,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjAwMTU1NA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T10:07:44Z","updated_at":"2020-05-21T10:07:44Z","author_association":"CONTRIBUTOR","body":"Sounds good but I am not sure I fully understand the idea. Can you show how the call would look like then?","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632001554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632003777","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-632003777","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":632003777,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjAwMzc3Nw==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T10:13:02Z","updated_at":"2020-05-21T10:13:02Z","author_association":"OWNER","body":"Sure thing, a call would then look something like\r\n\r\n```python\r\naffinity = openTSNE.affinity.UniformKernel(X, k_neighbors=15, n_jobs=-1)\r\nembedding = openTSNE.TSNE(affinity=affinity, n_jobs=-1).fit(X)\r\n```\r\n\r\nThis still requires `n_jobs` to be specified twice, but we might be able to figure a way around that. This is a lot nicer than the 5-liner that we usually have to write out and it makes it easy to use any affinity model.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632003777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632013552","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-632013552","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":632013552,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjAxMzU1Mg==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T10:36:20Z","updated_at":"2020-05-25T11:36:10Z","author_association":"CONTRIBUTOR","body":"Yes, I like this a lot. This would be a huge improvement to the API because currently one needs to know all these default `optimize()` parameters by heart. Specifying `n_jobs` twice is okay.\r\n\r\nAdding uniform kNN affinity model class would also be great.\r\n\r\nAnd we could still add `n_neighbors` to the `PerplexityBasedNN` class or maybe something like `n_neighbors_factor` to replace `3` in https://github.com/pavlin-policar/openTSNE/blob/master/openTSNE/affinity.py#L136, but this is then not really necessary (but could be nice for completeness).","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/632013552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/652554619","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-652554619","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":652554619,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjU1NDYxOQ==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T17:35:38Z","updated_at":"2020-07-01T17:35:38Z","author_association":"CONTRIBUTOR","body":"Should we go ahead with this? Do you want me to prepare a PR?","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/652554619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"id":3512383738,"node_id":"MDExOkNsb3NlZEV2ZW50MzUxMjM4MzczOA==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3512383738","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-07-04T08:16:08Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/653817010","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-653817010","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":653817010,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzgxNzAxMA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-07-04T21:59:36Z","updated_at":"2020-07-04T21:59:36Z","author_association":"CONTRIBUTOR","body":"Great that it's done now. Are you planning to put a 0.4.4 tag?","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/653817010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/653849689","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-653849689","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":653849689,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Mzg0OTY4OQ==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-07-05T06:48:05Z","updated_at":"2020-07-05T06:48:05Z","author_association":"OWNER","body":"Yeah, for sure. I'm just working on some figures and am making sure everything is working as intended. I am holding off a release in case any bugs pop up, but I'll definitely release a 0.4.4 in a few days or so.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/653849689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/653882153","html_url":"https://github.com/pavlin-policar/openTSNE/issues/131#issuecomment-653882153","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/131","id":653882153,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Mzg4MjE1Mw==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-07-05T12:21:53Z","updated_at":"2020-07-05T12:21:53Z","author_association":"CONTRIBUTOR","body":"Great!","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/653882153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}}]