[{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598125973","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-598125973","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":598125973,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODEyNTk3Mw==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T10:58:22Z","updated_at":"2020-03-12T10:58:22Z","author_association":"OWNER","body":"This is a really good idea. Is this what UMAP uses? I am a bit rusty, but I thought spectral embeddings were the top two eigenvectors of the graph Laplacian (A.T * A - D, where A is the adjacency matrix and D is the diagonal degree matrix), or is this some fancier spectral initialization?\r\n\r\nI am totally for adding this though. I finally returned home, so I'll try to get a release out within the next few days.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598125973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"id":3122499823,"node_id":"MDEyOkxhYmVsZWRFdmVudDMxMjI0OTk4MjM=","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3122499823","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-03-12T11:47:40Z","label":{"name":"enhancement","color":"0799f4"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598145226","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-598145226","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":598145226,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODE0NTIyNg==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T11:51:09Z","updated_at":"2020-03-12T11:51:09Z","author_association":"CONTRIBUTOR","body":"I'm not entirely sure what exactly UMAP is doing. I think we can do any sensible thing here, it does not have to be 100% equivalent to UMAP's choices.\r\n\r\nThere are several variants of spectral embeddings and several equivalent ways in which many can be defined. See this https://jlmelville.github.io/smallvis/spectral.html for a useful concise overview. If W is a symmetric (weighted) affinity matrix and D are its row/column sums, then one way to define Laplacian eigenmaps is to take the 2nd/3rd largest eigenvectors of D^{-1}W. \r\n\r\nIn t-SNE's case, the directional affinities are row-normalized by construction but are not symmetric (so it's a Markov matrix). The final affinities P are symmetric but not row-normalized... So I guess one could take the largest eigenvectors of D^{-1}P, and not of P itself (as I wrote initially). Still very easy to implement.\r\n\r\nActually I would multiply the eigenvectors by their eigenvalues, as in diffusion maps: https://jlmelville.github.io/smallvis/spectral.html#diffusion_maps. Otherwise if you embed a line, then it will look like a parabola, even though the second eigenvalue is ~0. That's what https://scikit-learn.org/stable/modules/generated/sklearn.manifold.SpectralEmbedding.html does on a 1D line (because it does not multiply by the eigenvalues).\r\n\r\nI think good checks would be to try it on a line and on a circle. It should recover the line and the circle.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598145226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598257930","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-598257930","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":598257930,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODI1NzkzMA==","user":{"login":"jlmelville","id":1936393,"node_id":"MDQ6VXNlcjE5MzYzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1936393?v=4","gravatar_id":"","url":"https://api.github.com/users/jlmelville","html_url":"https://github.com/jlmelville","followers_url":"https://api.github.com/users/jlmelville/followers","following_url":"https://api.github.com/users/jlmelville/following{/other_user}","gists_url":"https://api.github.com/users/jlmelville/gists{/gist_id}","starred_url":"https://api.github.com/users/jlmelville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlmelville/subscriptions","organizations_url":"https://api.github.com/users/jlmelville/orgs","repos_url":"https://api.github.com/users/jlmelville/repos","events_url":"https://api.github.com/users/jlmelville/events{/privacy}","received_events_url":"https://api.github.com/users/jlmelville/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T15:40:27Z","updated_at":"2020-03-12T15:40:27Z","author_association":"NONE","body":"UMAP uses the \"symmetrized\" normalized Laplacian, i.e. the one that isn't the Laplacian Eigenmaps graph Laplacian. I have never noticed any consistent advantage of one over the other, so my advice would be to choose the one that tends to lead to the most successful and quickest convergence over a range of datasets, which could be dependent on the solver used, e.g. there might be an advantage to using a symmetric matrix for some routines.\r\n\r\nAlso, have a fallback plan if the spectral routine fails, e.g. PCA. You probably do want the default convergence settings to be quite lax, but again this depends on the solver you use. I use RSpectra for uwot and it can unpredictably take an exceptionally long time to finish during which time the user can't cancel, which is a horrible user experience. Hopefully the Python routines are better for this. If not, it's probably better for it to finish quickly by default even if it fails to converge. Convergence issues can also be caused if the nearest neighbor graph isn't a single component. This isn't a big risk with default t-SNE settings, but I think I have seen it happen.\r\n","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598257930/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jlmelville","id":1936393,"node_id":"MDQ6VXNlcjE5MzYzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1936393?v=4","gravatar_id":"","url":"https://api.github.com/users/jlmelville","html_url":"https://github.com/jlmelville","followers_url":"https://api.github.com/users/jlmelville/followers","following_url":"https://api.github.com/users/jlmelville/following{/other_user}","gists_url":"https://api.github.com/users/jlmelville/gists{/gist_id}","starred_url":"https://api.github.com/users/jlmelville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlmelville/subscriptions","organizations_url":"https://api.github.com/users/jlmelville/orgs","repos_url":"https://api.github.com/users/jlmelville/repos","events_url":"https://api.github.com/users/jlmelville/events{/privacy}","received_events_url":"https://api.github.com/users/jlmelville/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598262499","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-598262499","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":598262499,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODI2MjQ5OQ==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T15:48:50Z","updated_at":"2020-03-12T15:48:50Z","author_association":"CONTRIBUTOR","body":"Thanks for joining this discussion, James! These are good tips. That said, my suggestion was to keep using PCA as the default initialization, at least for the time being, so it won't be as critical as in UMAP if the spectral init takes a long time to converge or is somehow unstable.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598262499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598283735","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-598283735","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":598283735,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODI4MzczNQ==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T16:29:14Z","updated_at":"2020-03-12T16:29:14Z","author_association":"OWNER","body":"All great tips, thanks! Will definitely keep them in mind.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/598283735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599036181","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-599036181","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":599036181,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTAzNjE4MQ==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T10:09:48Z","updated_at":"2020-03-14T10:09:48Z","author_association":"CONTRIBUTOR","body":"Are you planning to include this into the upcoming release? It would be great, I think. Let me know if you want a PR or prefer to implement it yourself.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599036181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599043671","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-599043671","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":599043671,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTA0MzY3MQ==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T11:29:07Z","updated_at":"2020-03-14T11:29:07Z","author_association":"OWNER","body":"Yeah, I think it would be a cool addition. I've been playing around with this for a little bit now, but I can't seem to get the line to work properly... I would appreciate it if you took a crack at it.\r\n\r\n```python\r\nimport numpy as np\r\nfrom sklearn.utils.extmath import svd_flip\r\nfrom openTSNE.affinity import PerplexityBasedNN\r\nimport scipy.sparse as sp\r\nimport matplotlib.pyplot as plt\r\n\r\n# Generate a line\r\nn = 10000; X = np.zeros((n, 3)); X[:, 0] = np.arange(n)\r\n\r\naffinities = PerplexityBasedNN(X, verbose=True)\r\nW = affinities.P\r\n\r\nD = np.sum(W, axis=1)\r\nD = sp.diags(np.ravel(D), offsets=0)\r\n\r\nU, S, VT = sp.linalg.svds((D.power(-1) @ W), k=3, solver=\"arpack\")\r\nS = S[::-1]\r\nU, VT = svd_flip(U[:, ::-1], VT[::-1])\r\n\r\nfig, ax = plt.subplots(ncols=2, figsize=(9, 4))\r\nax[0].scatter(U[:, 0], U[:, 1], s=1, c=np.arange(n))\r\nax[1].scatter(U[:, 1], U[:, 2], s=1, c=np.arange(n))\r\nplt.show()\r\n```\r\n\r\nPlotting the first and second (left) and second and third eigenvectors (right)...\r\n![image](https://user-images.githubusercontent.com/5758119/76681049-c3cf8380-65ee-11ea-977d-11e99ffe3757.png)\r\n\r\nneither of which seems to be correct. The circle, however, appears to work, but only if I use the second and third eigenvectors, and not the first and second, as is written in the post.\r\n![image](https://user-images.githubusercontent.com/5758119/76681068-15780e00-65ef-11ea-96c8-8dfd39a611a8.png)\r\n\r\nI did also try using the lobpcg solver and TruncatedSVD from sklearn, which are much faster, but produce meaningless results, so go figure.\r\n","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599043671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599044839","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-599044839","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":599044839,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTA0NDgzOQ==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T11:37:34Z","updated_at":"2020-03-14T11:37:34Z","author_association":"CONTRIBUTOR","body":"The D^{-1}W matrix should have constant row sums, so the first eigenvector should be trivial and is supposed to be ignored. For the circle it works exactly as it should.\r\n\r\nNot sure right now what happens with the line. The 1st eigenvector does not look trivial, which is strange.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599044839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599045323","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-599045323","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":599045323,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTA0NTMyMw==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T11:40:42Z","updated_at":"2020-03-14T11:40:42Z","author_association":"CONTRIBUTOR","body":"Not sure if it matters but I would put 1/D inside the diags.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599045323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599065579","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-599065579","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":599065579,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTA2NTU3OQ==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T14:04:11Z","updated_at":"2020-03-14T14:04:11Z","author_association":"CONTRIBUTOR","body":"> The 1st eigenvector does not look trivial, which is strange.\r\n\r\nI think it's a convergence issue. I tried \r\n```\r\nS,U = sp.linalg.eigsh(W, M=D, k=3)\r\n```\r\nand it works fine in this example. This might be numerically more stable (?). \r\n\r\nAlso, I must have been wrong that in this case the 3rd eigenvalue should be very small (because the manifold is 1-dimensional); it seems it's almost the same as the 2nd one. Then there is nothing gained by multiplying the eigenvectors with the eigenvalues. I am a bit surprised by this though. @jlmelville What do you think?\r\n","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599065579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"id":3129407003,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzEyOTQwNzAwMw==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3129407003","actor":{"login":"jlmelville","id":1936393,"node_id":"MDQ6VXNlcjE5MzYzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1936393?v=4","gravatar_id":"","url":"https://api.github.com/users/jlmelville","html_url":"https://github.com/jlmelville","followers_url":"https://api.github.com/users/jlmelville/followers","following_url":"https://api.github.com/users/jlmelville/following{/other_user}","gists_url":"https://api.github.com/users/jlmelville/gists{/gist_id}","starred_url":"https://api.github.com/users/jlmelville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlmelville/subscriptions","organizations_url":"https://api.github.com/users/jlmelville/orgs","repos_url":"https://api.github.com/users/jlmelville/repos","events_url":"https://api.github.com/users/jlmelville/events{/privacy}","received_events_url":"https://api.github.com/users/jlmelville/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-14T14:04:12Z","performed_via_github_app":null},{"id":3129407007,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMxMjk0MDcwMDc=","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3129407007","actor":{"login":"jlmelville","id":1936393,"node_id":"MDQ6VXNlcjE5MzYzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1936393?v=4","gravatar_id":"","url":"https://api.github.com/users/jlmelville","html_url":"https://github.com/jlmelville","followers_url":"https://api.github.com/users/jlmelville/followers","following_url":"https://api.github.com/users/jlmelville/following{/other_user}","gists_url":"https://api.github.com/users/jlmelville/gists{/gist_id}","starred_url":"https://api.github.com/users/jlmelville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlmelville/subscriptions","organizations_url":"https://api.github.com/users/jlmelville/orgs","repos_url":"https://api.github.com/users/jlmelville/repos","events_url":"https://api.github.com/users/jlmelville/events{/privacy}","received_events_url":"https://api.github.com/users/jlmelville/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-14T14:04:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599120757","html_url":"https://github.com/pavlin-policar/openTSNE/issues/110#issuecomment-599120757","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/110","id":599120757,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTEyMDc1Nw==","user":{"login":"jlmelville","id":1936393,"node_id":"MDQ6VXNlcjE5MzYzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1936393?v=4","gravatar_id":"","url":"https://api.github.com/users/jlmelville","html_url":"https://github.com/jlmelville","followers_url":"https://api.github.com/users/jlmelville/followers","following_url":"https://api.github.com/users/jlmelville/following{/other_user}","gists_url":"https://api.github.com/users/jlmelville/gists{/gist_id}","starred_url":"https://api.github.com/users/jlmelville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlmelville/subscriptions","organizations_url":"https://api.github.com/users/jlmelville/orgs","repos_url":"https://api.github.com/users/jlmelville/repos","events_url":"https://api.github.com/users/jlmelville/events{/privacy}","received_events_url":"https://api.github.com/users/jlmelville/received_events","type":"User","site_admin":false},"created_at":"2020-03-14T18:51:36Z","updated_at":"2020-03-14T18:51:36Z","author_association":"NONE","body":"@dkobak, I'm afraid I don't have any intuition about the ratio of the eigenvalues in the 1D line case (or in any case for that matter).\r\n\r\nIn general, I don't know if this is an issue, but you have to be a bit careful about the ordering of eigenvectors if you use P instead of L_rw because you need to use one minus the eigenvalue before sorting them. Or ask for the largest instead of smallest eigenvectors and then ignore the top rather than the bottom eigenvector. It's confusing.\r\n\r\nI always have to play around with some simple toy examples to persuade myself I know what's going on. In that spirit, if it's helpful, I have added a Python version of the R code I used for exploring the relationship between the graph Laplacians (for dense matrices only for now): <https://gist.github.com/jlmelville/8b7655fb4803ce49e4f560d316b04a46>\r\n\r\nIf you use a smaller `n`, you can combine that gist with your current experiments to play around a bit more without worrying about convergence issues and ordering and ensure that the correct eigenvector is the trivial one, e.g.:\r\n\r\n```python\r\nimport matplotlib.pyplot as plt\r\nimport scipy.sparse as sp\r\n\r\nfrom openTSNE.affinity import PerplexityBasedNN\r\n\r\nn = 100; X = np.zeros((n, 3)); X[:, 0] = np.arange(n)\r\n\r\naffinities = PerplexityBasedNN(X)\r\nW = affinities.P\r\ndW = np.array(sp.csr_matrix.todense(W))\r\nWD = AffDeg(dW, degmat(dW))\r\nlap = lapm(WD)\r\n\r\n# effectively laplacian eigenmaps\r\nle = eig(lap.Lrw)\r\n\r\nfig, ax = plt.subplots(ncols=2, figsize=(9, 4))\r\nax[0].scatter(le.vectors[:, 1], le.vectors[:, 2], s=1, c=np.arange(n))\r\nax[1].scatter(le.vectors[:, 1] * le.values[1], le.vectors[:, 2] * le.values[2], s=1, c=np.arange(n))\r\nplt.show()\r\n```\r\n\r\nAnyway, some of this might help with ensuring that the sparse version is returning the eigenvectors you want and it's not a convergence issue.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599120757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jlmelville","id":1936393,"node_id":"MDQ6VXNlcjE5MzYzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/1936393?v=4","gravatar_id":"","url":"https://api.github.com/users/jlmelville","html_url":"https://github.com/jlmelville","followers_url":"https://api.github.com/users/jlmelville/followers","following_url":"https://api.github.com/users/jlmelville/following{/other_user}","gists_url":"https://api.github.com/users/jlmelville/gists{/gist_id}","starred_url":"https://api.github.com/users/jlmelville/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlmelville/subscriptions","organizations_url":"https://api.github.com/users/jlmelville/orgs","repos_url":"https://api.github.com/users/jlmelville/repos","events_url":"https://api.github.com/users/jlmelville/events{/privacy}","received_events_url":"https://api.github.com/users/jlmelville/received_events","type":"User","site_admin":false}},{"id":3129695262,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzEyOTY5NTI2Mg==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3129695262","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-14T18:51:36Z","performed_via_github_app":null},{"id":3129695264,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMxMjk2OTUyNjQ=","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3129695264","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-14T18:51:36Z","performed_via_github_app":null},{"id":3135092452,"node_id":"MDExOkNsb3NlZEV2ZW50MzEzNTA5MjQ1Mg==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3135092452","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-16T21:54:56Z","state_reason":null,"performed_via_github_app":null}]