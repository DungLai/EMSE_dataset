[{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578555748","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-578555748","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":578555748,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODU1NTc0OA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-01-26T23:46:43Z","updated_at":"2020-01-26T23:46:43Z","author_association":"CONTRIBUTOR","body":"Hmm. Seems like it *is* a convergence issue: if I run it for 20000 (!) iterations, then two out of three do unwrap:\r\n\r\n![line_opentsne_20k](https://user-images.githubusercontent.com/8970231/73143759-3f588e00-409e-11ea-82ee-5515e69b398c.png)\r\n\r\nNot sure why openTSNE converges so much slower in this particular test case, even though all optimisation parameters should be the same.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578555748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578639360","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-578639360","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":578639360,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODYzOTM2MA==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-01-27T08:23:38Z","updated_at":"2020-01-27T08:23:38Z","author_association":"OWNER","body":"Hmm, that's strange. I do think it's initialization specific, because picking some other random seeds, openTSNE is able to unwrap what line. Seeds 2, 5, and 6 all result in an untangled line.\r\n\r\nUsing the same random seed in FIt-SNE and openTSNE is probably not going to actually use the same init because I pass this through to numpy, while FIt-SNE just seeds the random number generator with it. I would be surprised if the internals were exactly the same, so the initializations are probably different. I don't have FIt-SNE set up at the moment, so could you check if there is a difference if you actually pass the initialization to both methods? You can use [`openTSNE.initialization.random`](https://github.com/pavlin-policar/openTSNE/blob/master/openTSNE/initialization.py#L6-L30) for initialization, or modify it to have 0.0001 std.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578639360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578660123","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-578660123","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":578660123,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODY2MDEyMw==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-01-27T09:24:12Z","updated_at":"2020-01-27T09:24:51Z","author_association":"CONTRIBUTOR","body":"Fair enough. I modified the code to use exact same initialization, and tried other three random seeds:\r\n\r\n```\r\nn = 10000\r\nX = np.zeros((n,3))\r\nX[:,0] = np.arange(n)\r\n\r\nZs_fitsne = []\r\nZs_opentsne = []\r\nfor i in range(3):\r\n    np.random.seed(i)\r\n    init = np.random.randn(n,2)\r\n    init = init / np.std(init, axis=0) * 0.0001\r\n\r\n    Z = fast_tsne(X, initialization=init, learning_rate=1, early_exag_coeff=n/10, \r\n                  stop_early_exag_iter=2000, max_iter=2000)\r\n    Zs_fitsne.append(Z)\r\n    \r\n    Z = TSNE(n_jobs=-1, initialization=init, random_state=40, learning_rate=1, \r\n             early_exaggeration=n/10, early_exaggeration_iter=2000, n_iter=0).fit(X)\r\n    Zs_opentsne.append(Z)\r\n\r\nplt.figure(figsize=(9,6))\r\nfor i,Z in enumerate(Zs_fitsne + Zs_opentsne, 1):\r\n    plt.subplot(2,3,i)\r\n    plt.scatter(Z[:,0], Z[:,1], s=1, c=np.arange(n))\r\nsns.despine()\r\nplt.tight_layout()\r\nplt.savefig('line_fitsne_opentsne.png')\r\n```\r\n\r\n![line_fitsne_opentsne](https://user-images.githubusercontent.com/8970231/73162557-51fab380-40ee-11ea-94f7-26c41924b7cd.png)\r\n\r\nLooks like FIt-SNE also sometimes fails to untangle with these particular parameter values, while openTSNE does work for some seeds. Overall it still seems like openTSNE is converging slower though, and curiously the spans of the embeddings are quite different (10 times difference), despite the same initialization. This must be due to some subtle differences in the optimisation, and I wonder what they can be. That said, given that this line example is arguably rather pathological and only has theoretical interest, this might not be worth investigating any further...","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578660123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578926043","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-578926043","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":578926043,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODkyNjA0Mw==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-01-27T20:01:23Z","updated_at":"2020-01-27T20:01:23Z","author_association":"OWNER","body":"I know there are very minor differences in the optimization, but I really wouldn't expect them to be this big. I have noticed the thing with the spans as well, and I'll definitely be investigating this in the next couple of days. Even if it is such an edge case, it's worth getting to the bottom of it.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/578926043/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/585164028","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-585164028","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":585164028,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTE2NDAyOA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-02-12T11:34:03Z","updated_at":"2020-02-12T11:34:03Z","author_association":"CONTRIBUTOR","body":"Have you already had a chance to look into this?.. I'm preparing some animations for a talk with this line embedding using openTSNE right now :) Might post on twitter :)","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/585164028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/585216209","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-585216209","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":585216209,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTIxNjIwOQ==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-02-12T13:56:04Z","updated_at":"2020-02-12T13:56:04Z","author_association":"OWNER","body":"Hey, I did spend a little bit looking into it but didn't really figure out why this was happening. I did find that when initializing the embeddings at 0.0001 variance, the span of the embedding after optimization was very small, which was puzzling. I did, however, determine that the difference is not in the subtle difference in the momentum implementation between FIt-SNE and openTSNE. So, in all, I was left with more questions than answers. I'll look into this again when I can, but we've got a couple of deadlines to hit right now.\r\n\r\nI'd definitely be interested in seeing those animations as well. The few ones I did when implementing this were pretty cool to look at :)","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/585216209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"id":3122505041,"node_id":"MDEyOkxhYmVsZWRFdmVudDMxMjI1MDUwNDE=","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3122505041","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-03-12T11:49:27Z","label":{"name":"discussion","color":"54e589"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599805927","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-599805927","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":599805927,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTgwNTkyNw==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-16T23:39:49Z","updated_at":"2020-03-16T23:39:49Z","author_association":"CONTRIBUTOR","body":"> Hey, I did spend a little bit looking into it but didn't really figure out why this was happening.\r\n\r\nI think I might have figured it out. FIt-SNE has `mom_switch_iter=250` by default and this value (currently) does not change when one supplies a non-default `stop_early_exag_iter`. Whereas openTSNE rather sensibly uses initial momentum for the whole early exaggeration phase. Turns out, this is what makes FIt-SNE converge faster in this case!\r\n\r\nHere is a demonstration:\r\n\r\n```\r\nn = 10000\r\nX = np.zeros((n,3))\r\nX[:,0] = np.arange(n)\r\n\r\nnp.random.seed(0)\r\ninit = np.random.randn(n,2)\r\ninit = init / np.std(init, axis=0) * 0.0001\r\n\r\nn_iter = 500\r\n\r\nZ1 = fast_tsne(X, initialization=init, learning_rate=1, early_exag_coeff=n/10, \r\n              stop_early_exag_iter=n_iter, max_iter=n_iter)\r\n\r\nZ2 = fast_tsne(X, initialization=init, learning_rate=1, early_exag_coeff=n/10, \r\n              stop_early_exag_iter=n_iter, max_iter=n_iter, mom_switch_iter=n_iter)\r\n  \r\nZ3 = TSNE(n_jobs=-1, initialization=init, random_state=40, learning_rate=1, \r\n        early_exaggeration=n/10, early_exaggeration_iter=n_iter, n_iter=0).fit(X)\r\n\r\n\r\nplt.figure(figsize=(9,3))\r\nfor i,Z in enumerate([Z1,Z2,Z3], 1):\r\n    plt.subplot(1,3,i)\r\n    plt.scatter(Z[:,0], Z[:,1], s=1, c=np.arange(n))\r\n    plt.xlim([np.min(Z), np.max(Z)])\r\n    plt.ylim([np.min(Z), np.max(Z)])\r\nsns.despine()\r\nplt.tight_layout()\r\n```\r\n\r\n![tmp](https://user-images.githubusercontent.com/8970231/76808246-6a7e7480-67e7-11ea-8b08-355ae35e7de7.png)\r\n\r\nFirst panel: FIt-SNE with 500 early exaggeration iterations and momentum switching at 250. Second: FIt-SNE with 500 ee iterations and momentum not switching. Third: openTSNE. The second = the third, so case closed.\r\n\r\nI think what openTSNE does makes more sense so we can close this issue.\r\n\r\nI am wondering if we should change it in openTSNE, but this is such an edge case that I think it does not really matter.","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599805927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599809573","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-599809573","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":599809573,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTgwOTU3Mw==","user":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"created_at":"2020-03-16T23:54:57Z","updated_at":"2020-03-16T23:54:57Z","author_association":"OWNER","body":"Wow, great job figuring this out!\r\n\r\n> I am wondering if we should change it in openTSNE, but this is such an edge case that I think it does not really matter.\r\n\r\nNo, what openTSNE does makes sense, and this feels more like a bug in FIt-SNE, which should be fixed. While the momentum switch is not necessarily tied to the early exaggeration phase, this is not what I would at all expect (but maybe that's just me and George has his own explanation).","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599809573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false}},{"id":3135338246,"node_id":"MDExOkNsb3NlZEV2ZW50MzEzNTMzODI0Ng==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3135338246","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-16T23:54:57Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599811678","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-599811678","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":599811678,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTgxMTY3OA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-17T00:02:50Z","updated_at":"2020-03-17T00:02:50Z","author_association":"CONTRIBUTOR","body":"> I am wondering if we should change it in openTSNE\r\n\r\nSorry -- I meant \"FIt-SNE\" here. It's getting late :)\r\n\r\nSo yes -- I am wondering if we should change it in FIt-SNE, which would be a very easy fix in wrappers. It does converge faster as it currently is though ;-)","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/599811678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/602241708","html_url":"https://github.com/pavlin-policar/openTSNE/issues/106#issuecomment-602241708","issue_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/106","id":602241708,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjI0MTcwOA==","user":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false},"created_at":"2020-03-22T17:16:00Z","updated_at":"2020-03-22T17:16:00Z","author_association":"CONTRIBUTOR","body":"FYI @pavlin-policar see the discussion here https://github.com/KlugerLab/FIt-SNE/issues/94","reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/comments/602241708/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dkobak","id":8970231,"node_id":"MDQ6VXNlcjg5NzAyMzE=","avatar_url":"https://avatars.githubusercontent.com/u/8970231?v=4","gravatar_id":"","url":"https://api.github.com/users/dkobak","html_url":"https://github.com/dkobak","followers_url":"https://api.github.com/users/dkobak/followers","following_url":"https://api.github.com/users/dkobak/following{/other_user}","gists_url":"https://api.github.com/users/dkobak/gists{/gist_id}","starred_url":"https://api.github.com/users/dkobak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkobak/subscriptions","organizations_url":"https://api.github.com/users/dkobak/orgs","repos_url":"https://api.github.com/users/dkobak/repos","events_url":"https://api.github.com/users/dkobak/events{/privacy}","received_events_url":"https://api.github.com/users/dkobak/received_events","type":"User","site_admin":false}},{"id":3152877492,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzE1Mjg3NzQ5Mg==","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3152877492","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-03-22T17:16:00Z","performed_via_github_app":null},{"id":3152877494,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMxNTI4Nzc0OTQ=","url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/events/3152877494","actor":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-03-22T17:16:00Z","performed_via_github_app":null}]