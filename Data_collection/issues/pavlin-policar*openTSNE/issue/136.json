{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/136","repository_url":"https://api.github.com/repos/pavlin-policar/openTSNE","labels_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/136/labels{/name}","comments_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/136/comments","events_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/136/events","html_url":"https://github.com/pavlin-policar/openTSNE/issues/136","id":638286840,"node_id":"MDU6SXNzdWU2MzgyODY4NDA=","number":136,"title":"Input matrix format / pandas 1.0.4 compatibility","user":{"login":"jr-leary7","id":49326251,"node_id":"MDQ6VXNlcjQ5MzI2MjUx","avatar_url":"https://avatars.githubusercontent.com/u/49326251?v=4","gravatar_id":"","url":"https://api.github.com/users/jr-leary7","html_url":"https://github.com/jr-leary7","followers_url":"https://api.github.com/users/jr-leary7/followers","following_url":"https://api.github.com/users/jr-leary7/following{/other_user}","gists_url":"https://api.github.com/users/jr-leary7/gists{/gist_id}","starred_url":"https://api.github.com/users/jr-leary7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jr-leary7/subscriptions","organizations_url":"https://api.github.com/users/jr-leary7/orgs","repos_url":"https://api.github.com/users/jr-leary7/repos","events_url":"https://api.github.com/users/jr-leary7/events{/privacy}","received_events_url":"https://api.github.com/users/jr-leary7/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-06-14T05:22:22Z","updated_at":"2020-06-14T21:40:18Z","closed_at":"2020-06-14T05:53:25Z","author_association":"NONE","active_lock_reason":null,"body":"##### Expected behavior\r\nI've formatted the input to the `tsne.fit()` call as a `pandas` dataframe, with principal components as columns and cells as rows. I expected the function to execute as detailed in the tutorial, but I received an error having to do with `pandas`. \r\n\r\n##### Actual behaviour\r\nI'm not entirely sure if the error is due to the way I formatted the input dataframe, or if it's a problem with `v1.0.4` of `pandas`. This is the error (apologies in advance for the text wall):\r\n\r\n```\r\nFile \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pandas/core/indexes/base.py\", line 2646, in get_loc\r\n    return self._engine.get_loc(key)\r\n  File \"pandas/_libs/index.pyx\", line 111, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas/_libs/index.pyx\", line 138, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 1619, in pandas._libs.hashtable.PyObjectHashTable.get_item\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 1627, in pandas._libs.hashtable.PyObjectHashTable.get_item\r\nKeyError: 0\r\n```\r\n\r\nWhich in turn causes another `KeyError`, which is:\r\n\r\n```\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/openTSNE/tsne.py\", line 1156, in fit\r\n    embedding = self.prepare_initial(X)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/openTSNE/tsne.py\", line 1209, in prepare_initial\r\n    verbose=self.verbose,\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/openTSNE/affinity.py\", line 138, in __init__\r\n    data, method, k_neighbors, metric, metric_params, n_jobs, random_state, verbose\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/openTSNE/affinity.py\", line 319, in build_knn_index\r\n    neighbors, distances = knn_index.build(data, k=k)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/openTSNE/nearest_neighbors.py\", line 211, in build\r\n    self.index.add_item(i, data[i])\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pandas/core/frame.py\", line 2800, in __getitem__\r\n    indexer = self.columns.get_loc(key)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pandas/core/indexes/base.py\", line 2648, in get_loc\r\n    return self._engine.get_loc(self._maybe_cast_indexer(key))\r\n  File \"pandas/_libs/index.pyx\", line 111, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas/_libs/index.pyx\", line 138, in pandas._libs.index.IndexEngine.get_loc\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 1619, in pandas._libs.hashtable.PyObjectHashTable.get_item\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 1627, in pandas._libs.hashtable.PyObjectHashTable.get_item\r\nKeyError: 0\r\n```\r\n##### Steps to reproduce the behavior\r\nI'm using `pandas v1.0.4` and `openTSNE v0.4.3`. Any advice on how to proceed? ","closed_by":{"login":"jr-leary7","id":49326251,"node_id":"MDQ6VXNlcjQ5MzI2MjUx","avatar_url":"https://avatars.githubusercontent.com/u/49326251?v=4","gravatar_id":"","url":"https://api.github.com/users/jr-leary7","html_url":"https://github.com/jr-leary7","followers_url":"https://api.github.com/users/jr-leary7/followers","following_url":"https://api.github.com/users/jr-leary7/following{/other_user}","gists_url":"https://api.github.com/users/jr-leary7/gists{/gist_id}","starred_url":"https://api.github.com/users/jr-leary7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jr-leary7/subscriptions","organizations_url":"https://api.github.com/users/jr-leary7/orgs","repos_url":"https://api.github.com/users/jr-leary7/repos","events_url":"https://api.github.com/users/jr-leary7/events{/privacy}","received_events_url":"https://api.github.com/users/jr-leary7/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/136/timeline","performed_via_github_app":null,"state_reason":"completed"}