{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/139","repository_url":"https://api.github.com/repos/pavlin-policar/openTSNE","labels_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/139/labels{/name}","comments_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/139/comments","events_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/139/events","html_url":"https://github.com/pavlin-policar/openTSNE/issues/139","id":674300596,"node_id":"MDU6SXNzdWU2NzQzMDA1OTY=","number":139,"title":"FutureWarning/AttributeError for parameter neighbors","user":{"login":"VGalata","id":5700085,"node_id":"MDQ6VXNlcjU3MDAwODU=","avatar_url":"https://avatars.githubusercontent.com/u/5700085?v=4","gravatar_id":"","url":"https://api.github.com/users/VGalata","html_url":"https://github.com/VGalata","followers_url":"https://api.github.com/users/VGalata/followers","following_url":"https://api.github.com/users/VGalata/following{/other_user}","gists_url":"https://api.github.com/users/VGalata/gists{/gist_id}","starred_url":"https://api.github.com/users/VGalata/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VGalata/subscriptions","organizations_url":"https://api.github.com/users/VGalata/orgs","repos_url":"https://api.github.com/users/VGalata/repos","events_url":"https://api.github.com/users/VGalata/events{/privacy}","received_events_url":"https://api.github.com/users/VGalata/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-06T13:08:22Z","updated_at":"2020-10-17T08:56:35Z","closed_at":"2020-10-17T08:56:35Z","author_association":"NONE","active_lock_reason":null,"body":"First of all, thank you for the great package!\r\n\r\nBecause I used `warnings.filterwarnings('error')` I ran into an issue which might become problematic in the future.\r\nI am not sure whether it has an impact on the results in the current version of the package.\r\n\r\n#### Issue description\r\n\r\nThe attribute `neighbors` in the `TSNE` class is not set because the parameter `neighbors` are saved into the attribute `neighbors_method`: [see here](https://github.com/pavlin-policar/openTSNE/blob/master/openTSNE/tsne.py#L1160).\r\nHowever, the attribute `neighbors` is expected and `scikit-learn` raises a warning which will become an error in version `2.24`:\r\n```\r\nFrom version 0.24, get_params will raise an AttributeError if a parameter cannot be retrieved as an instance attribute. Previously it would return None.\r\n```\r\n\r\n#### Steps to reproduce the behavior\r\n\r\nThe warning can be raised with the provided example call:\r\n```python\r\nfrom sklearn import datasets\r\niris = datasets.load_iris()\r\nx, y = iris[\"data\"], iris[\"target\"]\r\nfrom openTSNE import TSNE\r\nembedding = TSNE(verbose=True).fit(x)\r\n```\r\n\r\nUsed `conda` environment:\r\n```yaml\r\nchannels:\r\n  - conda-forge\r\n  - defaults\r\ndependencies:\r\n  - _libgcc_mutex=0.1=conda_forge\r\n  - _openmp_mutex=4.5=1_gnu\r\n  - ca-certificates=2020.6.20=hecda079_0\r\n  - certifi=2020.6.20=py38h32f6830_0\r\n  - joblib=0.16.0=py_0\r\n  - ld_impl_linux-64=2.34=hc38a660_9\r\n  - libblas=3.8.0=17_openblas\r\n  - libcblas=3.8.0=17_openblas\r\n  - libffi=3.2.1=he1b5a44_1007\r\n  - libgcc-ng=9.3.0=h24d8f2e_14\r\n  - libgfortran-ng=7.5.0=hdf63c60_14\r\n  - libgomp=9.3.0=h24d8f2e_14\r\n  - liblapack=3.8.0=17_openblas\r\n  - libopenblas=0.3.10=pthreads_hb3c22a3_4\r\n  - libstdcxx-ng=9.3.0=hdf63c60_14\r\n  - ncurses=6.2=he1b5a44_1\r\n  - numpy=1.19.1=py38h8854b6b_0\r\n  - openssl=1.1.1g=h516909a_1\r\n  - opentsne=0.4.4=py38hbf85e49_0\r\n  - pandas=1.1.0=py38h950e882_0\r\n  - pip=20.2.1=py_0\r\n  - python=3.8.5=h4d41432_2_cpython\r\n  - python-dateutil=2.8.1=py_0\r\n  - python_abi=3.8=1_cp38\r\n  - pytz=2020.1=pyh9f0ad1d_0\r\n  - readline=8.0=he28a2e2_2\r\n  - scikit-learn=0.23.2=py38hee58b96_0\r\n  - scipy=1.5.2=py38h8c5af15_0\r\n  - setuptools=49.2.1=py38h32f6830_0\r\n  - six=1.15.0=pyh9f0ad1d_0\r\n  - sqlite=3.32.3=hcee41ef_1\r\n  - threadpoolctl=2.1.0=pyh5ca1d4c_0\r\n  - tk=8.6.10=hed695b0_0\r\n  - wheel=0.34.2=py_1\r\n  - xz=5.2.5=h516909a_1\r\n  - zlib=1.2.11=h516909a_1006\r\n```","closed_by":{"login":"pavlin-policar","id":5758119,"node_id":"MDQ6VXNlcjU3NTgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/5758119?v=4","gravatar_id":"","url":"https://api.github.com/users/pavlin-policar","html_url":"https://github.com/pavlin-policar","followers_url":"https://api.github.com/users/pavlin-policar/followers","following_url":"https://api.github.com/users/pavlin-policar/following{/other_user}","gists_url":"https://api.github.com/users/pavlin-policar/gists{/gist_id}","starred_url":"https://api.github.com/users/pavlin-policar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavlin-policar/subscriptions","organizations_url":"https://api.github.com/users/pavlin-policar/orgs","repos_url":"https://api.github.com/users/pavlin-policar/repos","events_url":"https://api.github.com/users/pavlin-policar/events{/privacy}","received_events_url":"https://api.github.com/users/pavlin-policar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pavlin-policar/openTSNE/issues/139/timeline","performed_via_github_app":null,"state_reason":"completed"}