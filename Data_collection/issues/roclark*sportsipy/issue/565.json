{"url":"https://api.github.com/repos/roclark/sportsipy/issues/565","repository_url":"https://api.github.com/repos/roclark/sportsipy","labels_url":"https://api.github.com/repos/roclark/sportsipy/issues/565/labels{/name}","comments_url":"https://api.github.com/repos/roclark/sportsipy/issues/565/comments","events_url":"https://api.github.com/repos/roclark/sportsipy/issues/565/events","html_url":"https://github.com/roclark/sportsipy/issues/565","id":776578534,"node_id":"MDU6SXNzdWU3NzY1Nzg1MzQ=","number":565,"title":"Quinn Cook messing up my code?","user":{"login":"raiavincent","id":61218788,"node_id":"MDQ6VXNlcjYxMjE4Nzg4","avatar_url":"https://avatars.githubusercontent.com/u/61218788?v=4","gravatar_id":"","url":"https://api.github.com/users/raiavincent","html_url":"https://github.com/raiavincent","followers_url":"https://api.github.com/users/raiavincent/followers","following_url":"https://api.github.com/users/raiavincent/following{/other_user}","gists_url":"https://api.github.com/users/raiavincent/gists{/gist_id}","starred_url":"https://api.github.com/users/raiavincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raiavincent/subscriptions","organizations_url":"https://api.github.com/users/raiavincent/orgs","repos_url":"https://api.github.com/users/raiavincent/repos","events_url":"https://api.github.com/users/raiavincent/events{/privacy}","received_events_url":"https://api.github.com/users/raiavincent/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-12-30T18:18:24Z","updated_at":"2020-12-30T20:29:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nSo what I am trying to do is create a dataset of NBA players and their stats. The code works fine until it gets to Quinn Cook.\r\n\r\nThe code returns \"TypeError: 'NoneType' object is not iterable\" as it runs through LAL. When I go to the Lakers sports ref page, Cook is double entered AND his page doesn't load. Is there anything I can do to fix this or do I pretty much have to wait?\r\n\r\nHere is the code:\r\n\r\n```\r\n`from sportsreference.nba.teams import Teams\r\nfrom sportsreference.nba.schedule import Schedule\r\nfrom sportsreference.nba.boxscore import Boxscores\r\nfrom sportsreference.nba.roster import Player\r\nfrom sportsreference.nba.roster import Roster\r\nimport pandas as pd\r\nfrom datetime import datetime\r\n\r\n# Function to get player info from Player class object.\r\ndef get_player_df(player):\r\n        \r\n    # helper function to get year for each row and denote\r\n    # rows that contain career totals.\r\n    def get_year(ix):\r\n        if ix[0] == \"Career\":\r\n            return \"Career\"\r\n        elif ix[0] == \"1999-00\":\r\n            return \"2000\"\r\n        else:\r\n            return ix[0][0:2] + ix[0][-2:]\r\n    \r\n    # get player df and add some extra info\r\n    player_df = player.dataframe\r\n    player_df['birth_date'] = player.birth_date\r\n    player_df['player_id'] = player.player_id\r\n    player_df['name'] = player.name\r\n    player_df['year'] = [get_year(ix) for ix in player_df.index]\r\n    player_df['id'] = [player_id + ' ' + year for player_id,\r\n                       year in zip(player_df['player_id'],\r\n                       player_df['year'])]\r\n    player_df.set_index('id', drop = True, inplace = True)\r\n    \r\n    return player_df\r\n\r\n# initialize a list of players that we have pulled data for\r\nplayers_collected = []\r\nseason_df_init = 0\r\ncareer_df_init = 0\r\nseason_df = 0\r\ncareer_df = 0\r\n# iterate through years.\r\nfor year in range(2021, 1999, -1):\r\n    print('\\n' + str(year))\r\n        \r\n    # iterate through all teams in that year.\r\n    for team in Teams(year = str(year)).dataframes.index:\r\n        print('\\n' + team + '\\n')\r\n        \r\n        # iterate through every player on a team roster.\r\n        for player_id in Roster(team, year = year,\r\n                         slim = True).players.keys():\r\n            \r\n            # only pull player info if that player hasn't\r\n            # been pulled already.\r\n            if player_id not in players_collected:\r\n                \r\n                player = Player(player_id)\r\n                player_info = get_player_df(player)\r\n                player_seasons = player_info[\r\n                                 player_info['year'] != \"Career\"]\r\n                player_career = player_info[\r\n                                player_info['year'] == \"Career\"]\r\n                \r\n                # create season_df if not initialized\r\n                if not season_df_init:\r\n                    season_df = player_seasons\r\n                    season_df_init = 1\r\n                \r\n                # else concatenate to season_df\r\n                else:\r\n                    season_df = pd.concat([season_df,\r\n                                   player_seasons], axis = 0)\r\n                    \r\n                if not career_df_init:\r\n                    career_df = player_career\r\n                    career_df_init = 1\r\n                \r\n                # else concatenate to career_df\r\n                else:\r\n                    career_df = pd.concat([career_df,\r\n                                   player_career], axis = 0)\r\n                \r\n                # add player to players_collected\r\n                players_collected.append(player_id)\r\n                print(player.name)`\r\n\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/roclark/sportsipy/issues/565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/roclark/sportsipy/issues/565/timeline","performed_via_github_app":null,"state_reason":null}