{"url":"https://api.github.com/repos/roclark/sportsipy/issues/654","repository_url":"https://api.github.com/repos/roclark/sportsipy","labels_url":"https://api.github.com/repos/roclark/sportsipy/issues/654/labels{/name}","comments_url":"https://api.github.com/repos/roclark/sportsipy/issues/654/comments","events_url":"https://api.github.com/repos/roclark/sportsipy/issues/654/events","html_url":"https://github.com/roclark/sportsipy/issues/654","id":988621211,"node_id":"MDU6SXNzdWU5ODg2MjEyMTE=","number":654,"title":"FBRef roster pulls broken due to bad suffixes","user":{"login":"safog111","id":72712164,"node_id":"MDQ6VXNlcjcyNzEyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72712164?v=4","gravatar_id":"","url":"https://api.github.com/users/safog111","html_url":"https://github.com/safog111","followers_url":"https://api.github.com/users/safog111/followers","following_url":"https://api.github.com/users/safog111/following{/other_user}","gists_url":"https://api.github.com/users/safog111/gists{/gist_id}","starred_url":"https://api.github.com/users/safog111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/safog111/subscriptions","organizations_url":"https://api.github.com/users/safog111/orgs","repos_url":"https://api.github.com/users/safog111/repos","events_url":"https://api.github.com/users/safog111/events{/privacy}","received_events_url":"https://api.github.com/users/safog111/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-05T23:18:17Z","updated_at":"2021-09-05T23:18:17Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nPulling the Roster for the larger premier league clubs doesn't work.\r\n\r\n**To Reproduce**\r\nSample code which causes an issue.\r\n```python\r\nman_utd = Roster(sportsipy.fb.fb_utils.lookup_squad_id('Manchester United'))\r\n# Returns empty\r\nprint(man_utd)\r\n```\r\n\r\n**Expected behavior**\r\nExpect to see all the players who play for Manchester United.\r\n\r\n**Screenshots**\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Ubuntu 20.04\r\n - Sportsipy Version: 0.6.0\r\n\r\n**Additional context**\r\nAfter some debugging, I think the error might be caused by a bad / incorrect league-ids file. https://github.com/roclark/sportsipy/blob/master/sportsipy/fb/league_ids.py\r\n\r\nWe run a LEAGUE_IDS.get() here: https://github.com/roclark/sportsipy/blob/master/sportsipy/fb/roster.py#L1654\r\n\r\n(As a side note, The input param seems to be a squad id rather than a league id. I assume the entries in LEAGUE_IDS.py are squad ids as well).\r\n\r\nI went through and manually checked the tables on FBRef for the big four PL clubs and it looks like the postfix is common and should be 11160. \r\n\r\nAdding something manual like\r\n\r\n```\r\n'19538871': '11160', # United\r\n'822bd0ba': '11160', # City\r\n'b8fd03ef': '11160', # Liverpool\r\n'cff3d9bb': '11160', # Chelsea\r\n```\r\nworks but isn't scalable. It seems like a league wide suffix should work, so maybe plumbing in a league-id into roster.py would be the right fix.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/roclark/sportsipy/issues/654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/roclark/sportsipy/issues/654/timeline","performed_via_github_app":null,"state_reason":null}