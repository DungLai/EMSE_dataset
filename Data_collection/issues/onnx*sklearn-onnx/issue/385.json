{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/385","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/385/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/385/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/385/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/385","id":555446537,"node_id":"MDU6SXNzdWU1NTU0NDY1Mzc=","number":385,"title":"Support for HashingVectorizer","user":{"login":"mont-blanc","id":3740017,"node_id":"MDQ6VXNlcjM3NDAwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/3740017?v=4","gravatar_id":"","url":"https://api.github.com/users/mont-blanc","html_url":"https://github.com/mont-blanc","followers_url":"https://api.github.com/users/mont-blanc/followers","following_url":"https://api.github.com/users/mont-blanc/following{/other_user}","gists_url":"https://api.github.com/users/mont-blanc/gists{/gist_id}","starred_url":"https://api.github.com/users/mont-blanc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mont-blanc/subscriptions","organizations_url":"https://api.github.com/users/mont-blanc/orgs","repos_url":"https://api.github.com/users/mont-blanc/repos","events_url":"https://api.github.com/users/mont-blanc/events{/privacy}","received_events_url":"https://api.github.com/users/mont-blanc/received_events","type":"User","site_admin":false},"labels":[{"id":2011467357,"node_id":"MDU6TGFiZWwyMDExNDY3MzU3","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/ONNX%20Change","name":"ONNX Change","color":"afffd3","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-01-27T09:18:46Z","updated_at":"2020-04-24T12:57:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi! \r\nDo you know if there are any plans to support [HashingVectorizer](https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.HashingVectorizer.html)?\r\n\r\nAs a workaround, I hashed the features as a pre-processing and used Dictvectorizer but it appears to be really inefficient (ONNX runtime super slow compared to native sklearn pipeline).\r\nBut it might be because my ONNX pipelines seems to loose the sparse representation of the data and model.\r\n\r\nFYI, my simple pipeline looks like this:\r\n\r\nThe original one that cannot be converted to ONNX:\r\n\r\n```\r\nmodel_pipeline_simple = Pipeline(steps=[\r\n  ( \"features\", HashingVectorizer(n_features=2**20, analyzer='word')),\r\n  (\"classifiers\",  LogisticRegression())\r\n])\r\n``` \r\n\r\nThe alternative where intput data is pre-hashed into 2**20 features:\r\n\r\n```\r\nmodel_pipeline_simple = Pipeline(steps=[\r\n  (\"features\", DictVectorizer()),\r\n  (\"classifiers\",  LogisticRegression())\r\n])\r\n``` \r\n\r\nThanks you!!","closed_by":null,"reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/385/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/385/timeline","performed_via_github_app":null,"state_reason":null}