{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/663","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/663/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/663/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/663/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/663","id":916088210,"node_id":"MDU6SXNzdWU5MTYwODgyMTA=","number":663,"title":"RuntimeError(\"Parameter 'min' must be a string or a float.\") when converting AdaBoostClassifier","user":{"login":"chernovars","id":20386782,"node_id":"MDQ6VXNlcjIwMzg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/20386782?v=4","gravatar_id":"","url":"https://api.github.com/users/chernovars","html_url":"https://github.com/chernovars","followers_url":"https://api.github.com/users/chernovars/followers","following_url":"https://api.github.com/users/chernovars/following{/other_user}","gists_url":"https://api.github.com/users/chernovars/gists{/gist_id}","starred_url":"https://api.github.com/users/chernovars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chernovars/subscriptions","organizations_url":"https://api.github.com/users/chernovars/orgs","repos_url":"https://api.github.com/users/chernovars/repos","events_url":"https://api.github.com/users/chernovars/events{/privacy}","received_events_url":"https://api.github.com/users/chernovars/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-06-09T11:19:34Z","updated_at":"2021-08-19T11:44:51Z","closed_at":"2021-08-19T11:44:51Z","author_association":"NONE","active_lock_reason":null,"body":"During conversion of an AdaBoostClassifier, the error was thrown:\r\n\r\nTraceback (most recent call last):\r\n  File \"...\\onnx_test.py\", line 51, in <module>\r\n    onnx(initial_type, e)\r\n  File \"...\\onnx_test.py\", line 25, in onnx\r\n    onx = convert_sklearn(clr, initial_types=initial_type)\r\n  File \"C:\\Users\\Arseniy\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\skl2onnx\\convert.py\", line 160, in convert_sklearn\r\n    onnx_model = convert_topology(topology, name, doc_string, target_opset,\r\n  File \"C:\\Users\\Arseniy\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\skl2onnx\\common\\_topology.py\", line 1087, in convert_topology        \r\n    conv(scope, operator, container)\r\n  File \"C:\\Users\\Arseniy\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\skl2onnx\\common\\_registration.py\", line 29, in __call__\r\n    return self._fct(*args)\r\n  File \"C:\\Users\\Arseniy\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\skl2onnx\\operator_converters\\ada_boost.py\", line 299, in convert_sklearn_ada_boost_classifier\r\n    cur_proba_name = _samme_r_proba(\r\n  File \"C:\\Users\\Arseniy\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\skl2onnx\\operator_converters\\ada_boost.py\", line 82, in _samme_r_proba\r\n    apply_clip(\r\n  File \"C:\\Users\\Arseniy\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\onnxconverter_common\\onnx_ops.py\", line 251, in apply_clip\r\n    raise RuntimeError(\"Parameter 'min' must be a string or a float.\")\r\nRuntimeError: Parameter 'min' must be a string or a float.\r\n\r\n\r\nSo i tried to debug it, and 'min' in my case was of type np.float32 which is not in the list of allowed types: (np.ndarray, float, int)\r\n\r\nI changed the library-code so that allowed types are  (np.ndarray, float, int, np.float32) and the error was gone. The conversion finished successfully then, and prediction worked without errors. Did not check if it predicted something meaningful though.\r\n\r\nHave a nice day!","closed_by":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/663/timeline","performed_via_github_app":null,"state_reason":"completed"}