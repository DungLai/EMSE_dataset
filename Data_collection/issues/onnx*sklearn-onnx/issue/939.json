{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/939","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/939/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/939/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/939/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/939","id":1453375467,"node_id":"I_kwDOCa0gS85WoL_r","number":939,"title":"DeprecationWarning: Please use `csr_matrix` from the `scipy.sparse` namespace, the `scipy.sparse.csr` namespace is deprecated.","user":{"login":"jonathanunderwood","id":992114,"node_id":"MDQ6VXNlcjk5MjExNA==","avatar_url":"https://avatars.githubusercontent.com/u/992114?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathanunderwood","html_url":"https://github.com/jonathanunderwood","followers_url":"https://api.github.com/users/jonathanunderwood/followers","following_url":"https://api.github.com/users/jonathanunderwood/following{/other_user}","gists_url":"https://api.github.com/users/jonathanunderwood/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathanunderwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathanunderwood/subscriptions","organizations_url":"https://api.github.com/users/jonathanunderwood/orgs","repos_url":"https://api.github.com/users/jonathanunderwood/repos","events_url":"https://api.github.com/users/jonathanunderwood/events{/privacy}","received_events_url":"https://api.github.com/users/jonathanunderwood/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"xiaowuhu","id":19218188,"node_id":"MDQ6VXNlcjE5MjE4MTg4","avatar_url":"https://avatars.githubusercontent.com/u/19218188?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaowuhu","html_url":"https://github.com/xiaowuhu","followers_url":"https://api.github.com/users/xiaowuhu/followers","following_url":"https://api.github.com/users/xiaowuhu/following{/other_user}","gists_url":"https://api.github.com/users/xiaowuhu/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaowuhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaowuhu/subscriptions","organizations_url":"https://api.github.com/users/xiaowuhu/orgs","repos_url":"https://api.github.com/users/xiaowuhu/repos","events_url":"https://api.github.com/users/xiaowuhu/events{/privacy}","received_events_url":"https://api.github.com/users/xiaowuhu/received_events","type":"User","site_admin":false},"assignees":[{"login":"xiaowuhu","id":19218188,"node_id":"MDQ6VXNlcjE5MjE4MTg4","avatar_url":"https://avatars.githubusercontent.com/u/19218188?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaowuhu","html_url":"https://github.com/xiaowuhu","followers_url":"https://api.github.com/users/xiaowuhu/followers","following_url":"https://api.github.com/users/xiaowuhu/following{/other_user}","gists_url":"https://api.github.com/users/xiaowuhu/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaowuhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaowuhu/subscriptions","organizations_url":"https://api.github.com/users/xiaowuhu/orgs","repos_url":"https://api.github.com/users/xiaowuhu/repos","events_url":"https://api.github.com/users/xiaowuhu/events{/privacy}","received_events_url":"https://api.github.com/users/xiaowuhu/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-11-17T13:43:52Z","updated_at":"2022-11-18T04:05:57Z","closed_at":"2022-11-18T04:05:57Z","author_association":"NONE","active_lock_reason":null,"body":"Installing skl2onnx and running a simple:\r\n```python\r\nfrom skl2onnx import to_onnx\r\n```\r\n\r\nresults in:\r\n```python \r\n---------------------------------------------------------------------------\r\nDeprecationWarning                        Traceback (most recent call last)\r\nCell In [4], line 1\r\n----> 1 from skl2onnx import to_onnx\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/__init__.py:15\r\n     11 __model_version__ = 0\r\n     12 __max_supported_opset__ = 17  # Converters are tested up to this version.\r\n---> 15 from .convert import convert_sklearn, to_onnx, wrap_as_onnx_mixin  # noqa\r\n     16 from ._supported_operators import (  # noqa\r\n     17     update_registered_converter, get_model_alias\r\n     18 )\r\n     19 from ._parse import update_registered_parser  # noqa\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/convert.py:12\r\n     10 # Invoke the registration of all our converters and shape calculators.\r\n     11 from . import shape_calculators  # noqa\r\n---> 12 from . import operator_converters  # noqa\r\n     15 def convert_sklearn(model, name=None, initial_types=None, doc_string='',\r\n     16                     target_opset=None, custom_conversion_functions=None,\r\n     17                     custom_shape_calculators=None,\r\n   (...)\r\n     20                     white_op=None, black_op=None, final_types=None,\r\n     21                     dtype=None, naming=None, verbose=0):\r\n     22     \"\"\"\r\n     23     This function produces an equivalent\r\n     24     ONNX model of the given scikit-learn model.\r\n   (...)\r\n    151         Parameter *naming* was added.\r\n    152     \"\"\"\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/operator_converters/__init__.py:14\r\n     12 from . import class_labels\r\n     13 from . import concat_op\r\n---> 14 from . import cross_decomposition\r\n     15 from . import decision_tree\r\n     16 from . import decomposition\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/operator_converters/cross_decomposition.py:10\r\n      7 from ..common._container import ModelComponentContainer\r\n      8 from ..common.data_types import (\r\n      9     Int64TensorType, guess_numpy_type, guess_proto_type)\r\n---> 10 from ..algebra.onnx_ops import (\r\n     11     OnnxAdd, OnnxCast, OnnxDiv, OnnxMatMul, OnnxSub)\r\n     14 def convert_pls_regression(scope: Scope, operator: Operator,\r\n     15                            container: ModelComponentContainer):\r\n     16     X = operator.inputs[0]\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/algebra/__init__.py:4\r\n      1 # SPDX-License-Identifier: Apache-2.0\r\n----> 4 from .onnx_operator import OnnxOperator  # noqa\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/algebra/onnx_operator.py:21\r\n     19 from ..proto import get_latest_tested_opset_version, onnx_proto\r\n     20 from ..proto.onnx_helper_modified import make_graph, make_model, from_array\r\n---> 21 from ..helpers.onnx_helper import infer_outputs\r\n     22 from .graph_state import GraphState, GraphStateVar\r\n     23 from .type_helper import _guess_type\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/helpers/__init__.py:4\r\n      1 # SPDX-License-Identifier: Apache-2.0\r\n----> 4 from .investigate import collect_intermediate_steps, compare_objects  # noqa\r\n      5 from .investigate import enumerate_pipeline_models  # noqa\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/skl2onnx/helpers/investigate.py:8\r\n      6 import numpy\r\n      7 from numpy.testing import assert_almost_equal\r\n----> 8 from scipy.sparse.csr import csr_matrix\r\n      9 from sklearn.base import TransformerMixin, ClassifierMixin\r\n     10 from sklearn.base import RegressorMixin, BaseEstimator\r\n\r\nFile ~/Projects/pyecba/.venv/lib/python3.10/site-packages/scipy/sparse/csr.py:32, in __getattr__(name)\r\n     27 if name not in __all__:\r\n     28     raise AttributeError(\r\n     29         \"scipy.sparse.csr is deprecated and has no attribute \"\r\n     30         f\"{name}. Try looking in scipy.sparse instead.\")\r\n---> 32 warnings.warn(f\"Please use `{name}` from the `scipy.sparse` namespace, \"\r\n     33               \"the `scipy.sparse.csr` namespace is deprecated.\",\r\n     34               category=DeprecationWarning, stacklevel=2)\r\n     36 return getattr(_csr, name)\r\n\r\nDeprecationWarning: Please use `csr_matrix` from the `scipy.sparse` namespace, the `scipy.sparse.csr` namespace is deprecated.\r\n```\r\nThis is on OSX with Python 3.10 and these packages:\r\n```\r\nPackage              Version\r\n-------------------- ------------\r\nanyio                3.6.2\r\nappnope              0.1.3\r\nargon2-cffi          21.3.0\r\nargon2-cffi-bindings 21.2.0\r\nastroid              2.11.6\r\nasttokens            2.1.0\r\nattrs                21.4.0\r\nautoflake            1.4\r\nautopep8             1.6.0\r\nbackcall             0.2.0\r\nbeautifulsoup4       4.11.1\r\nblack                22.6.0\r\nbleach               5.0.1\r\ncffi                 1.15.1\r\nclick                8.1.3\r\ncolorama             0.4.5\r\nCython               0.29.32\r\ndebugpy              1.6.3\r\ndecorator            5.1.1\r\ndefusedxml           0.7.1\r\ndill                 0.3.5.1\r\ndunamai              1.14.1\r\necba                 0.1.0\r\nentrypoints          0.4\r\nepc                  0.0.5\r\nexecuting            1.2.0\r\nfastapi              0.87.0\r\nfastjsonschema       2.16.2\r\nflake8               4.0.1\r\nh11                  0.14.0\r\nidna                 3.4\r\nimportmagic          0.1.7\r\niniconfig            1.1.1\r\nipykernel            6.17.1\r\nipython              8.6.0\r\nipython-genutils     0.2.0\r\nipywidgets           8.0.2\r\nisort                5.10.1\r\njedi                 0.18.1\r\nJinja2               3.1.2\r\njoblib               1.1.0\r\njsonschema           4.17.0\r\njupyter              1.0.0\r\njupyter_client       7.4.7\r\njupyter-console      6.4.4\r\njupyter_core         5.0.0\r\njupyter-server       1.23.2\r\njupyterlab-pygments  0.2.2\r\njupyterlab-widgets   3.0.3\r\nlazy-object-proxy    1.7.1\r\nMarkupSafe           2.1.1\r\nmatplotlib-inline    0.1.6\r\nmccabe               0.6.1\r\nmistune              2.0.4\r\nmlprodict            0.9.1883\r\nmypy                 0.941\r\nmypy-extensions      0.4.3\r\nnbclassic            0.4.8\r\nnbclient             0.7.0\r\nnbconvert            7.2.5\r\nnbformat             5.7.0\r\nnest-asyncio         1.5.6\r\nnotebook             6.5.2\r\nnotebook_shim        0.2.2\r\nnumpy                1.23.0\r\nonnx                 1.12.0\r\nonnxconverter-common 1.13.0\r\npackaging            21.3\r\npandas               1.4.3\r\npandas-stubs         1.4.3.220703\r\npandera              0.12.0\r\npandocfilters        1.5.0\r\nparso                0.8.3\r\npathspec             0.9.0\r\npexpect              4.8.0\r\npickleshare          0.7.5\r\npip                  22.3.1\r\nplatformdirs         2.5.2\r\npluggy               1.0.0\r\nprometheus-client    0.15.0\r\nprompt-toolkit       3.0.32\r\nprotobuf             3.20.1\r\npsutil               5.9.4\r\nptyprocess           0.7.0\r\npure-eval            0.2.2\r\npy                   1.11.0\r\npyarrow              9.0.0\r\npybind11             2.10.1\r\npycodestyle          2.8.0\r\npycparser            2.21\r\npydantic             1.10.2\r\npydocstyle           6.1.1\r\npyflakes             2.4.0\r\nPygments             2.13.0\r\npylint               2.14.4\r\npyparsing            3.0.9\r\npyquicksetup         0.2.4\r\npyrsistent           0.19.2\r\npytest               7.1.2\r\npython-dateutil      2.8.2\r\npython-lsp-jsonrpc   1.0.0\r\npython-lsp-server    1.4.0\r\npytz                 2022.1\r\npyzmq                24.0.1\r\nqtconsole            5.4.0\r\nQtPy                 2.3.0\r\nrope                 0.23.0\r\nscikit-learn         1.1.1\r\nscipy                1.8.1\r\nSend2Trash           1.8.0\r\nsetuptools           65.4.1\r\nsexpdata             0.0.3\r\nshellingham          1.4.0\r\nsix                  1.16.0\r\nskl2onnx             1.13\r\nsniffio              1.3.0\r\nsnowballstemmer      2.2.0\r\nsoupsieve            2.3.2.post1\r\nstack-data           0.6.1\r\nstarlette            0.21.0\r\nterminado            0.17.0\r\nthreadpoolctl        3.1.0\r\ntinycss2             1.2.1\r\ntomli                2.0.1\r\ntomlkit              0.11.0\r\ntornado              6.2\r\ntraitlets            5.5.0\r\ntyper                0.4.2\r\ntyping_extensions    4.3.0\r\ntyping-inspect       0.8.0\r\nujson                5.1.0\r\nuvicorn              0.19.0\r\nwcwidth              0.2.5\r\nwebencodings         0.5.1\r\nwebsocket-client     1.4.2\r\nwheel                0.37.1\r\nwidgetsnbextension   4.0.3\r\nwrapt                1.14.1\r\nyapf                 0.32.0\r\n```\r\n\r\n\r\n","closed_by":{"login":"xiaowuhu","id":19218188,"node_id":"MDQ6VXNlcjE5MjE4MTg4","avatar_url":"https://avatars.githubusercontent.com/u/19218188?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaowuhu","html_url":"https://github.com/xiaowuhu","followers_url":"https://api.github.com/users/xiaowuhu/followers","following_url":"https://api.github.com/users/xiaowuhu/following{/other_user}","gists_url":"https://api.github.com/users/xiaowuhu/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaowuhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaowuhu/subscriptions","organizations_url":"https://api.github.com/users/xiaowuhu/orgs","repos_url":"https://api.github.com/users/xiaowuhu/repos","events_url":"https://api.github.com/users/xiaowuhu/events{/privacy}","received_events_url":"https://api.github.com/users/xiaowuhu/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/939/timeline","performed_via_github_app":null,"state_reason":"completed"}