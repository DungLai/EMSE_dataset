{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/482","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/482/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/482/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/482/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/482","id":636009167,"node_id":"MDU6SXNzdWU2MzYwMDkxNjc=","number":482,"title":"Error converting KNeighborsClassifier with numeric features","user":{"login":"marinagre-px","id":59528768,"node_id":"MDQ6VXNlcjU5NTI4NzY4","avatar_url":"https://avatars.githubusercontent.com/u/59528768?v=4","gravatar_id":"","url":"https://api.github.com/users/marinagre-px","html_url":"https://github.com/marinagre-px","followers_url":"https://api.github.com/users/marinagre-px/followers","following_url":"https://api.github.com/users/marinagre-px/following{/other_user}","gists_url":"https://api.github.com/users/marinagre-px/gists{/gist_id}","starred_url":"https://api.github.com/users/marinagre-px/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marinagre-px/subscriptions","organizations_url":"https://api.github.com/users/marinagre-px/orgs","repos_url":"https://api.github.com/users/marinagre-px/repos","events_url":"https://api.github.com/users/marinagre-px/events{/privacy}","received_events_url":"https://api.github.com/users/marinagre-px/received_events","type":"User","site_admin":false},"labels":[{"id":2128126959,"node_id":"MDU6TGFiZWwyMTI4MTI2OTU5","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/cannot%20replicate","name":"cannot replicate","color":"6e16b7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-06-10T07:37:20Z","updated_at":"2020-06-11T05:38:26Z","closed_at":"2020-06-11T05:38:26Z","author_association":"NONE","active_lock_reason":null,"body":"When converting KNN Classifier with numeric features, i.e.\r\n```python\r\n    numeric_features = ['path_len']\r\n    numeric_transformer = Pipeline(steps=[\r\n        ('imputer', SimpleImputer(strategy='median')),\r\n        ('scaler', StandardScaler())])\r\n```\r\nAND\r\n\r\n```python\r\n classifier = KNeighborsClassifier(n_neighbors=5, weights='distance')\r\n```\r\n\r\nthe following error is thrown:\r\n```\r\n2020-06-09 14:12:16.709549 [E:onnxruntime:, sequential_executor.cc:281 Execute] Non-zero status code returned while running Scan node. Name:'Sc_Scan' Status Message: Subgraph must have the shape set for all outputs but next_out did not.\r\nTraceback (most recent call last):\r\n  File \"/Users/marinagrechuhin/Development/Development-Tests/test_onnx/plot_complex_pipeline.py\", line 349, in <module>\r\n    pred_onx = sess.run(None, inputs)\r\n  File \"/Users/marinagrechuhin/Development/Development-Tests/test_onnx/venv/lib/python3.8/site-packages/onnxruntime/capi/session.py\", line 111, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.Fail: [ONNXRuntimeError] : 1 : FAIL : Non-zero status code returned while running Scan node. Name:'Sc_Scan' Status Message: Subgraph must have the shape set for all outputs but next_out did not.\r\n```\r\nIf using LinearRegression classifier, it works","closed_by":{"login":"marinagre-px","id":59528768,"node_id":"MDQ6VXNlcjU5NTI4NzY4","avatar_url":"https://avatars.githubusercontent.com/u/59528768?v=4","gravatar_id":"","url":"https://api.github.com/users/marinagre-px","html_url":"https://github.com/marinagre-px","followers_url":"https://api.github.com/users/marinagre-px/followers","following_url":"https://api.github.com/users/marinagre-px/following{/other_user}","gists_url":"https://api.github.com/users/marinagre-px/gists{/gist_id}","starred_url":"https://api.github.com/users/marinagre-px/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marinagre-px/subscriptions","organizations_url":"https://api.github.com/users/marinagre-px/orgs","repos_url":"https://api.github.com/users/marinagre-px/repos","events_url":"https://api.github.com/users/marinagre-px/events{/privacy}","received_events_url":"https://api.github.com/users/marinagre-px/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/482/timeline","performed_via_github_app":null,"state_reason":"completed"}