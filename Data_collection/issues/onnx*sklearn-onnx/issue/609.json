{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/609","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/609/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/609/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/609/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/609","id":801917786,"node_id":"MDU6SXNzdWU4MDE5MTc3ODY=","number":609,"title":"FunctionTransformer is not supported","user":{"login":"HamzaSaouli","id":58631820,"node_id":"MDQ6VXNlcjU4NjMxODIw","avatar_url":"https://avatars.githubusercontent.com/u/58631820?v=4","gravatar_id":"","url":"https://api.github.com/users/HamzaSaouli","html_url":"https://github.com/HamzaSaouli","followers_url":"https://api.github.com/users/HamzaSaouli/followers","following_url":"https://api.github.com/users/HamzaSaouli/following{/other_user}","gists_url":"https://api.github.com/users/HamzaSaouli/gists{/gist_id}","starred_url":"https://api.github.com/users/HamzaSaouli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HamzaSaouli/subscriptions","organizations_url":"https://api.github.com/users/HamzaSaouli/orgs","repos_url":"https://api.github.com/users/HamzaSaouli/repos","events_url":"https://api.github.com/users/HamzaSaouli/events{/privacy}","received_events_url":"https://api.github.com/users/HamzaSaouli/received_events","type":"User","site_admin":false},"labels":[{"id":2673847808,"node_id":"MDU6TGFiZWwyNjczODQ3ODA4","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/pending%20user%20response","name":"pending user response","color":"2465AA","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-02-05T07:14:02Z","updated_at":"2021-08-19T11:47:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-166-79eb1b0d84fa> in <module>\r\n      1 # Export the model\r\n      2 initial_type = [('numfeat', FloatTensorType([None, 30]))] \r\n----> 3 model_onnx = convert_sklearn(model, initial_types=initial_type)\r\n      4 \r\n      5 # Save it into wanted file\r\n\r\n~/.local/lib/python3.6/site-packages/skl2onnx/convert.py in convert_sklearn(model, name, initial_types, doc_string, target_opset, custom_conversion_functions, custom_shape_calculators, custom_parsers, options, dtype, intermediate, white_op, black_op, final_types)\r\n    148 \r\n    149     # Infer variable shapes\r\n--> 150     topology.compile()\r\n    151 \r\n    152     # Convert our Topology object into ONNX. The outcome is an ONNX model.\r\n\r\n~/.local/lib/python3.6/site-packages/skl2onnx/common/_topology.py in compile(self)\r\n    901         self._resolve_duplicates()\r\n    902         self._fix_shapes()\r\n--> 903         self._infer_all_types()\r\n    904         self._check_structure()\r\n    905 \r\n\r\n~/.local/lib/python3.6/site-packages/skl2onnx/common/_topology.py in _infer_all_types(self)\r\n    754                 shape_calc(operator)\r\n    755             else:\r\n--> 756                 operator.infer_types()\r\n    757 \r\n    758     def _resolve_duplicates(self):\r\n\r\n~/.local/lib/python3.6/site-packages/skl2onnx/common/_topology.py in infer_types(self)\r\n    220                 \"Unable to find a shape calculator for alias '{}' \"\r\n    221                 \"and type '{}'.\".format(self.type, type(self.raw_operator)))\r\n--> 222         shape_calc(self)\r\n    223 \r\n    224     @property\r\n\r\n~/.local/lib/python3.6/site-packages/skl2onnx/shape_calculators/function_transformer.py in calculate_sklearn_function_transformer_output_shapes(operator)\r\n     15     \"\"\"\r\n     16     if operator.raw_operator.func is not None:\r\n---> 17         raise RuntimeError(\"FunctionTransformer is not supported unless the \"\r\n     18                            \"transform function is None (= identity). \"\r\n     19                            \"You may raise an issue at \"\r\n\r\nRuntimeError: FunctionTransformer is not supported unless the transform function is None (= identity). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/609/timeline","performed_via_github_app":null,"state_reason":null}