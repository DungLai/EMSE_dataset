{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/520","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/520/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/520/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/520/events","html_url":"https://github.com/onnx/sklearn-onnx/issues/520","id":677467402,"node_id":"MDU6SXNzdWU2Nzc0Njc0MDI=","number":520,"title":"Can't create an onnx model with OnnxMatMulInteger","user":{"login":"lszinv","id":1141648,"node_id":"MDQ6VXNlcjExNDE2NDg=","avatar_url":"https://avatars.githubusercontent.com/u/1141648?v=4","gravatar_id":"","url":"https://api.github.com/users/lszinv","html_url":"https://github.com/lszinv","followers_url":"https://api.github.com/users/lszinv/followers","following_url":"https://api.github.com/users/lszinv/following{/other_user}","gists_url":"https://api.github.com/users/lszinv/gists{/gist_id}","starred_url":"https://api.github.com/users/lszinv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lszinv/subscriptions","organizations_url":"https://api.github.com/users/lszinv/orgs","repos_url":"https://api.github.com/users/lszinv/repos","events_url":"https://api.github.com/users/lszinv/events{/privacy}","received_events_url":"https://api.github.com/users/lszinv/received_events","type":"User","site_admin":false},"labels":[{"id":1165979599,"node_id":"MDU6TGFiZWwxMTY1OTc5NTk5","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1165979605,"node_id":"MDU6TGFiZWwxMTY1OTc5NjA1","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2673847808,"node_id":"MDU6TGFiZWwyNjczODQ3ODA4","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/pending%20user%20response","name":"pending user response","color":"2465AA","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-08-12T07:34:42Z","updated_at":"2021-08-23T16:46:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm trying to create an ONNX model that uses MatMulInteger. However, when I do, I get an \"Unsupported data_Type 'int8'\" error. \r\nPerhaps I'm not creating things correctly and would appreciate if someone could help me identify what I'm doing wrong. \r\n\r\nI've set the output to an int32 tensor because the [onnx operators doc](https://github.com/onnx/onnx/blob/master/docs/Operators.md#MatMulInteger) states that it can overflow into int32 and there was not int8 tensor type function.\r\n\r\nHere's the code I'm trying to run:\r\n```\r\nfrom skl2onnx.algebra.onnx_ops import OnnxMatMulInteger\r\nfrom skl2onnx.common.data_types import Int32TensorType\r\nimport numpy as np\r\n\r\nop = OnnxMatMulInteger('X', 'Y')\r\nop = OnnxMatMulInteger('X', 'Y', output_names='Z')\r\nX = np.ones((320,320), dtype=np.int8)\r\nY = np.ones((320), dtype=np.int8)\r\nonx = op.to_onnx({'X':X, 'Y':Y}, outputs=[('Z', Int32TensorType())])\r\nwith open('int32matmul.onnx', 'wb') as f:\r\n    f.write(onx.SerializeToString())\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/520/timeline","performed_via_github_app":null,"state_reason":null}