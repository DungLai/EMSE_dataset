[{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1026769766","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1026769766","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1026769766,"node_id":"IC_kwDOCa0gS849M0Nm","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-02-01T12:03:30Z","updated_at":"2022-02-01T12:03:30Z","author_association":"COLLABORATOR","body":"Which version of scikit-learn are you using?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1026769766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-02-01T12:18:18Z","updated_at":"2022-02-01T12:18:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/820","repository_url":"https://api.github.com/repos/onnx/sklearn-onnx","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/820/labels{/name}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/820/comments","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/820/events","html_url":"https://github.com/onnx/sklearn-onnx/pull/820","id":1120599432,"node_id":"PR_kwDOCa0gS84x5fJl","number":820,"title":"Fixes issue #817 and method _propagation_status","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"labels":[{"id":2011487547,"node_id":"MDU6TGFiZWwyMDExNDg3NTQ3","url":"https://api.github.com/repos/onnx/sklearn-onnx/labels/Investigation","name":"Investigation","color":"c96edd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-02-01T12:18:18Z","updated_at":"2022-02-24T09:32:04Z","closed_at":"2022-02-09T16:08:53Z","author_association":"COLLABORATOR","active_lock_reason":null,"draft":false,"repository":{"id":162340939,"node_id":"MDEwOlJlcG9zaXRvcnkxNjIzNDA5Mzk=","name":"sklearn-onnx","full_name":"onnx/sklearn-onnx","private":false,"owner":{"login":"onnx","id":31675368,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMxNjc1MzY4","avatar_url":"https://avatars.githubusercontent.com/u/31675368?v=4","gravatar_id":"","url":"https://api.github.com/users/onnx","html_url":"https://github.com/onnx","followers_url":"https://api.github.com/users/onnx/followers","following_url":"https://api.github.com/users/onnx/following{/other_user}","gists_url":"https://api.github.com/users/onnx/gists{/gist_id}","starred_url":"https://api.github.com/users/onnx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onnx/subscriptions","organizations_url":"https://api.github.com/users/onnx/orgs","repos_url":"https://api.github.com/users/onnx/repos","events_url":"https://api.github.com/users/onnx/events{/privacy}","received_events_url":"https://api.github.com/users/onnx/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/onnx/sklearn-onnx","description":"Convert scikit-learn models and pipelines to ONNX","fork":false,"url":"https://api.github.com/repos/onnx/sklearn-onnx","forks_url":"https://api.github.com/repos/onnx/sklearn-onnx/forks","keys_url":"https://api.github.com/repos/onnx/sklearn-onnx/keys{/key_id}","collaborators_url":"https://api.github.com/repos/onnx/sklearn-onnx/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/onnx/sklearn-onnx/teams","hooks_url":"https://api.github.com/repos/onnx/sklearn-onnx/hooks","issue_events_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events{/number}","events_url":"https://api.github.com/repos/onnx/sklearn-onnx/events","assignees_url":"https://api.github.com/repos/onnx/sklearn-onnx/assignees{/user}","branches_url":"https://api.github.com/repos/onnx/sklearn-onnx/branches{/branch}","tags_url":"https://api.github.com/repos/onnx/sklearn-onnx/tags","blobs_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/refs{/sha}","trees_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/trees{/sha}","statuses_url":"https://api.github.com/repos/onnx/sklearn-onnx/statuses/{sha}","languages_url":"https://api.github.com/repos/onnx/sklearn-onnx/languages","stargazers_url":"https://api.github.com/repos/onnx/sklearn-onnx/stargazers","contributors_url":"https://api.github.com/repos/onnx/sklearn-onnx/contributors","subscribers_url":"https://api.github.com/repos/onnx/sklearn-onnx/subscribers","subscription_url":"https://api.github.com/repos/onnx/sklearn-onnx/subscription","commits_url":"https://api.github.com/repos/onnx/sklearn-onnx/commits{/sha}","git_commits_url":"https://api.github.com/repos/onnx/sklearn-onnx/git/commits{/sha}","comments_url":"https://api.github.com/repos/onnx/sklearn-onnx/comments{/number}","issue_comment_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments{/number}","contents_url":"https://api.github.com/repos/onnx/sklearn-onnx/contents/{+path}","compare_url":"https://api.github.com/repos/onnx/sklearn-onnx/compare/{base}...{head}","merges_url":"https://api.github.com/repos/onnx/sklearn-onnx/merges","archive_url":"https://api.github.com/repos/onnx/sklearn-onnx/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/onnx/sklearn-onnx/downloads","issues_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues{/number}","pulls_url":"https://api.github.com/repos/onnx/sklearn-onnx/pulls{/number}","milestones_url":"https://api.github.com/repos/onnx/sklearn-onnx/milestones{/number}","notifications_url":"https://api.github.com/repos/onnx/sklearn-onnx/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/onnx/sklearn-onnx/labels{/name}","releases_url":"https://api.github.com/repos/onnx/sklearn-onnx/releases{/id}","deployments_url":"https://api.github.com/repos/onnx/sklearn-onnx/deployments","created_at":"2018-12-18T20:18:48Z","updated_at":"2023-01-15T03:42:06Z","pushed_at":"2023-01-19T03:36:47Z","git_url":"git://github.com/onnx/sklearn-onnx.git","ssh_url":"git@github.com:onnx/sklearn-onnx.git","clone_url":"https://github.com/onnx/sklearn-onnx.git","svn_url":"https://github.com/onnx/sklearn-onnx","homepage":"","size":72005,"stargazers_count":399,"watchers_count":399,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":85,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":54,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["onnx","scikit-learn"],"visibility":"public","forks":85,"open_issues":54,"watchers":399,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/pulls/820","html_url":"https://github.com/onnx/sklearn-onnx/pull/820","diff_url":"https://github.com/onnx/sklearn-onnx/pull/820.diff","patch_url":"https://github.com/onnx/sklearn-onnx/pull/820.patch","merged_at":"2022-02-09T16:08:53Z"},"body":"Investigate #817.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/820/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1026784276","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1026784276","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1026784276,"node_id":"IC_kwDOCa0gS849M3wU","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-02-01T12:19:34Z","updated_at":"2022-02-01T16:18:57Z","author_association":"COLLABORATOR","body":"I tried to cover your example by adding two unit tests but it did not fail for me. What are the differences between your model and the ones I added in PR #820?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1026784276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1027331036","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1027331036","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1027331036,"node_id":"IC_kwDOCa0gS849O9Pc","user":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false},"created_at":"2022-02-01T22:03:51Z","updated_at":"2022-02-01T22:50:36Z","author_association":"NONE","body":"Hello, huge thanks for your reply!\r\n\r\nI'm using sklearn version: 1.0.1.\r\n\r\n[Attached](https://github.com/onnx/sklearn-onnx/files/7982204/graph.txt) is the graph of the pipeline. But first, let me clarify the pipeline from above:\r\n\r\n```\r\npipeline = Pipeline(steps=[\r\n    ('cbe', ColTransformer()),\r\n    ('sc', stacking_ensemble),\r\n])\r\n```\r\n\r\nIn the above, `ColTransformer` is a transformer used for converting a dataframe or numpy matrix of mixed types (strings, ints, floats) into the same shaped output of floats. Its specific name (in the attached graph) is `CatColEncoder` and its main purpose is for encoding categorical columns. Some notes:\r\n- The output shape of the `CatColEncoder` is the same as its input shape. \r\n- The _type_ of the input data to `CatColEncoder` can be a matrix of mixed types (strings, floats, ints), and the output type of `CatColEncoder` will be a float matrix.\r\n\r\n\r\nRegarding the attached:\r\n\r\nOn line 122 is this: `Identity: ['index1'] -> ['column_index']`. \r\n- If you look at the graph, `index1` is the **first** label-encoded column of CatColEncoder\r\n  - This appears out of nowhere it seems (?)\r\n- The variable name `column_index` is defined on line 74 of `stacking.py` (inside operator_converters dir):\r\n\r\n```\r\ncolumn_index_name = scope.get_unique_variable_name('column_index')\r\n```\r\n - However, the **identity** operation itself is defined on line 28 of `pipelines.py`:\r\n\r\n```\r\n    for fr, to in zip(outputs, operator.outputs):\r\n        container.add_node(\r\n            'Identity', fr.full_name, to.full_name,\r\n            name=scope.get_unique_operator_name(\"Id\" + operator.onnx_name))\r\n\r\n```\r\n\r\n  - There is another identity operation in `stacking.py` but ironically, I don't think it's responsible this operation: `Identity: ['index1'] -> ['column_index']`\r\n\r\nI'm at a bit of a loss, not sure where this error is originating or what's causing the graph to break.  The output of CatColEncoder successfully flows through every step of the pipeline - and conversion to onnx is successful when a voting classifier is used instead of a stacking classifier.\r\n\r\nAny thoughts, hints, suggestions are very appreciated.\r\n\r\nThank you,\r\nEB\r\n","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1027331036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1027971091","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1027971091","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1027971091,"node_id":"IC_kwDOCa0gS849RZgT","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-02-02T14:02:34Z","updated_at":"2022-02-02T14:02:41Z","author_association":"COLLABORATOR","body":"I'm puzzled. I tried to use a dataframe as an input but it still works (see last commit in the PR). And if `ColTransformer` is a custom transformer, the conversion should have failed telling there is no converter for this class unless you did. How do you convert the model?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1027971091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1028489097","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1028489097","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1028489097,"node_id":"IC_kwDOCa0gS849TX-J","user":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false},"created_at":"2022-02-03T00:33:58Z","updated_at":"2022-02-03T00:33:58Z","author_association":"NONE","body":"I'm puzzled too, and I really want to get this to work. Attached is a zip file that contains a demo notebook that you can run. The converter is inside `cce_onnx_converter.py`.\r\n\r\n[catcol_demo.zip](https://github.com/onnx/sklearn-onnx/files/7990929/catcol_demo.zip)\r\n \r\nThanks again,\r\nEB","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1028489097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1029991602","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1029991602","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1029991602,"node_id":"IC_kwDOCa0gS849ZGyy","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-02-04T13:35:44Z","updated_at":"2022-02-04T13:35:44Z","author_association":"COLLABORATOR","body":"I tried your notebook but nothing fails for me. I then tried the following pipeline but still no failure. I did not find any model with StackingClassifier. Did I miss something?\r\n\r\n```\r\npipeline = Pipeline(steps=[\r\n    ('cbe', CatColEncoder(all_col_names=x_df.columns)),\r\n    ('nan', SimpleImputer()),\r\n    ('sc', LogisticRegression()),\r\n])\r\npipeline.fit(x_df, y)\r\n```","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1029991602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1030337784","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1030337784","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1030337784,"node_id":"IC_kwDOCa0gS849abT4","user":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false},"created_at":"2022-02-04T20:48:04Z","updated_at":"2022-02-04T20:48:04Z","author_association":"NONE","body":"Hi, thanks for responding! Attached is a new notebook that fully demonstrates the bug (titled `sc_bug.ipynb`). The traceback is at the bottom. Notice 2 things from the traceback graph:\r\n* the final operator is set to `is_eval=None`\r\n* This identity appears out of nowhere (or atleast unintentionally): `Identity: ['index1'] -> ['column_index']`\r\n\r\nAnd to reiterate: the problem is specifically with a pipeline that contains the StackingClassifier (other classifiers work fine):\r\n\r\n[catcol_demo.zip](https://github.com/onnx/sklearn-onnx/files/8006088/catcol_demo.zip)\r\n\r\nMuch appreciated,\r\nEB","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1030337784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1033769908","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1033769908","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1033769908,"node_id":"IC_kwDOCa0gS849nhO0","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-02-09T13:37:29Z","updated_at":"2022-02-09T13:37:29Z","author_association":"COLLABORATOR","body":"I was finally able to replicate the bug and found the cause. I updated the PR to fix the bug. I should release a new version by the end of week.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1033769908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"id":6035570948,"node_id":"REFE_lADOCa0gS85Ckm7SzwAAAAFnv4EE","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/6035570948","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"8f5e6e2e3007aa28135b5e7600326c0c70abbd12","commit_url":"https://api.github.com/repos/onnx/sklearn-onnx/commits/8f5e6e2e3007aa28135b5e7600326c0c70abbd12","created_at":"2022-02-09T16:08:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1034209257","html_url":"https://github.com/onnx/sklearn-onnx/issues/817#issuecomment-1034209257","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/817","id":1034209257,"node_id":"IC_kwDOCa0gS849pMfp","user":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false},"created_at":"2022-02-09T21:28:56Z","updated_at":"2022-02-09T21:28:56Z","author_association":"NONE","body":"Excellent, glad that you've solved it!! I look forward to the next version and will test again!\r\n\r\nThanks much,\r\nEB","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1034209257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false}},{"id":6037449827,"node_id":"CE_lADOCa0gS85Ckm7SzwAAAAFn3Cxj","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/6037449827","actor":{"login":"ebolotin6","id":42818860,"node_id":"MDQ6VXNlcjQyODE4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/42818860?v=4","gravatar_id":"","url":"https://api.github.com/users/ebolotin6","html_url":"https://github.com/ebolotin6","followers_url":"https://api.github.com/users/ebolotin6/followers","following_url":"https://api.github.com/users/ebolotin6/following{/other_user}","gists_url":"https://api.github.com/users/ebolotin6/gists{/gist_id}","starred_url":"https://api.github.com/users/ebolotin6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebolotin6/subscriptions","organizations_url":"https://api.github.com/users/ebolotin6/orgs","repos_url":"https://api.github.com/users/ebolotin6/repos","events_url":"https://api.github.com/users/ebolotin6/events{/privacy}","received_events_url":"https://api.github.com/users/ebolotin6/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-02-09T21:28:56Z","state_reason":null,"performed_via_github_app":null}]