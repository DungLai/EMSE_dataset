[{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891045487","html_url":"https://github.com/onnx/sklearn-onnx/issues/693#issuecomment-891045487","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/693","id":891045487,"node_id":"IC_kwDOCa0gS841HEZv","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2021-08-02T13:52:32Z","updated_at":"2021-08-02T13:52:32Z","author_association":"COLLABORATOR","body":"If the model works in python, this might be an issue for the java binding of onnxruntime. Is it possible to share the onnx file?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891045487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891461649","html_url":"https://github.com/onnx/sklearn-onnx/issues/693#issuecomment-891461649","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/693","id":891461649,"node_id":"IC_kwDOCa0gS841IqAR","user":{"login":"aakashveera","id":54843933,"node_id":"MDQ6VXNlcjU0ODQzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/54843933?v=4","gravatar_id":"","url":"https://api.github.com/users/aakashveera","html_url":"https://github.com/aakashveera","followers_url":"https://api.github.com/users/aakashveera/followers","following_url":"https://api.github.com/users/aakashveera/following{/other_user}","gists_url":"https://api.github.com/users/aakashveera/gists{/gist_id}","starred_url":"https://api.github.com/users/aakashveera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aakashveera/subscriptions","organizations_url":"https://api.github.com/users/aakashveera/orgs","repos_url":"https://api.github.com/users/aakashveera/repos","events_url":"https://api.github.com/users/aakashveera/events{/privacy}","received_events_url":"https://api.github.com/users/aakashveera/received_events","type":"User","site_admin":false},"created_at":"2021-08-03T02:20:52Z","updated_at":"2021-08-03T02:20:52Z","author_association":"NONE","body":"Hi @xadupre,\r\n\r\nThe zip file has the both Logistic Regression as well as SVC model.\r\n\r\n[models.zip](https://github.com/onnx/sklearn-onnx/files/6920585/models.zip)","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891461649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aakashveera","id":54843933,"node_id":"MDQ6VXNlcjU0ODQzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/54843933?v=4","gravatar_id":"","url":"https://api.github.com/users/aakashveera","html_url":"https://github.com/aakashveera","followers_url":"https://api.github.com/users/aakashveera/followers","following_url":"https://api.github.com/users/aakashveera/following{/other_user}","gists_url":"https://api.github.com/users/aakashveera/gists{/gist_id}","starred_url":"https://api.github.com/users/aakashveera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aakashveera/subscriptions","organizations_url":"https://api.github.com/users/aakashveera/orgs","repos_url":"https://api.github.com/users/aakashveera/repos","events_url":"https://api.github.com/users/aakashveera/events{/privacy}","received_events_url":"https://api.github.com/users/aakashveera/received_events","type":"User","site_admin":false}},{"id":5102114603,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTEwMjExNDYwMw==","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/5102114603","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-08-03T02:20:52Z","performed_via_github_app":null},{"id":5102114604,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUxMDIxMTQ2MDQ=","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/5102114604","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-08-03T02:20:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891689225","html_url":"https://github.com/onnx/sklearn-onnx/issues/693#issuecomment-891689225","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/693","id":891689225,"node_id":"IC_kwDOCa0gS841JhkJ","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2021-08-03T09:27:39Z","updated_at":"2021-08-03T09:27:39Z","author_association":"COLLABORATOR","body":"The SVC model outputs two arrays (label, predictions), the logistic regression outputs one array, one map (the ONNX graph contains a ZipMap node). The SVC models was converted with the option `{SVC: {'zipmap': False}}`. In one of your comments, you say the error happens when a java array is printed. Could these two facts be related?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891689225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891724312","html_url":"https://github.com/onnx/sklearn-onnx/issues/693#issuecomment-891724312","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/693","id":891724312,"node_id":"IC_kwDOCa0gS841JqIY","user":{"login":"aakashveera","id":54843933,"node_id":"MDQ6VXNlcjU0ODQzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/54843933?v=4","gravatar_id":"","url":"https://api.github.com/users/aakashveera","html_url":"https://github.com/aakashveera","followers_url":"https://api.github.com/users/aakashveera/followers","following_url":"https://api.github.com/users/aakashveera/following{/other_user}","gists_url":"https://api.github.com/users/aakashveera/gists{/gist_id}","starred_url":"https://api.github.com/users/aakashveera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aakashveera/subscriptions","organizations_url":"https://api.github.com/users/aakashveera/orgs","repos_url":"https://api.github.com/users/aakashveera/repos","events_url":"https://api.github.com/users/aakashveera/events{/privacy}","received_events_url":"https://api.github.com/users/aakashveera/received_events","type":"User","site_admin":false},"created_at":"2021-08-03T10:18:54Z","updated_at":"2021-08-03T10:18:54Z","author_association":"NONE","body":"Seems its returning label and predictions zipped. zipmap:True and False both has no effect in scala. how to get only the predictions? ","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891724312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aakashveera","id":54843933,"node_id":"MDQ6VXNlcjU0ODQzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/54843933?v=4","gravatar_id":"","url":"https://api.github.com/users/aakashveera","html_url":"https://github.com/aakashveera","followers_url":"https://api.github.com/users/aakashveera/followers","following_url":"https://api.github.com/users/aakashveera/following{/other_user}","gists_url":"https://api.github.com/users/aakashveera/gists{/gist_id}","starred_url":"https://api.github.com/users/aakashveera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aakashveera/subscriptions","organizations_url":"https://api.github.com/users/aakashveera/orgs","repos_url":"https://api.github.com/users/aakashveera/repos","events_url":"https://api.github.com/users/aakashveera/events{/privacy}","received_events_url":"https://api.github.com/users/aakashveera/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891741486","html_url":"https://github.com/onnx/sklearn-onnx/issues/693#issuecomment-891741486","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/693","id":891741486,"node_id":"IC_kwDOCa0gS841JuUu","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2021-08-03T10:45:50Z","updated_at":"2021-08-03T10:45:50Z","author_association":"COLLABORATOR","body":"It should have some effect, it changes the ONNX graph. The effect should be the same in any language: https://onnx.ai/sklearn-onnx/parameterized.html#zipmap, https://onnx.ai/sklearn-onnx/auto_tutorial/plot_dbegin_options.html#option-zipmap.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/891741486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/900448275","html_url":"https://github.com/onnx/sklearn-onnx/issues/693#issuecomment-900448275","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/693","id":900448275,"node_id":"IC_kwDOCa0gS841q8AT","user":{"login":"Craigacp","id":729696,"node_id":"MDQ6VXNlcjcyOTY5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/729696?v=4","gravatar_id":"","url":"https://api.github.com/users/Craigacp","html_url":"https://github.com/Craigacp","followers_url":"https://api.github.com/users/Craigacp/followers","following_url":"https://api.github.com/users/Craigacp/following{/other_user}","gists_url":"https://api.github.com/users/Craigacp/gists{/gist_id}","starred_url":"https://api.github.com/users/Craigacp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Craigacp/subscriptions","organizations_url":"https://api.github.com/users/Craigacp/orgs","repos_url":"https://api.github.com/users/Craigacp/repos","events_url":"https://api.github.com/users/Craigacp/events{/privacy}","received_events_url":"https://api.github.com/users/Craigacp/received_events","type":"User","site_admin":false},"created_at":"2021-08-17T16:31:32Z","updated_at":"2021-08-17T16:33:02Z","author_association":"NONE","body":"I responded to this issue on ONNX Runtime (https://github.com/microsoft/onnxruntime/issues/8525), but it looks like the predicted output is a 2d Java array, and it can be indexed just fine. I loaded the model up in ORT via jshell and inspected the output without issue.\r\n\r\n```java\r\njshell> import ai.onnxruntime.*\r\n\r\njshell> var env = OrtEnvironment.getEnvironment()\r\nenv ==> OrtEnvironment(name=ort-java,logLevel=ORT_LOGGING_LEVEL_WARNING)\r\n\r\njshell> var session = env.createSession(\"svc_iris.onnx\", new OrtSession.SessionOptions())\r\nsession ==> OrtSession(numInputs=1,numOutputs=2)\r\n\r\njshell> session.getOutputInfo()\r\n$4 ==> {label=NodeInfo(name=label,info=TensorInfo(javaType=INT64,onnxType=ONNX_TENSOR_ELEMENT_DATA_TYPE_INT64,shape=[-1])), probabilities=NodeInfo(name=probabilities,info=TensorInfo(javaType=FLOAT,onnxType=ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT,shape=[-1, 3]))}\r\n\r\njshell> var inputArr = new float[1][4]\r\ninputArr ==> float[1][] { float[4] { 0.0, 0.0, 0.0, 0.0 } }\r\n\r\njshell> var tensor = OnnxTensor.createTensor(env,inputArr)\r\ntensor ==> OnnxTensor(info=TensorInfo(javaType=FLOAT,onnxTyp ... _TYPE_FLOAT,shape=[1, 4]))\r\n\r\njshell> var result = session.run(Map.of(\"float_input\",tensor))\r\nresult ==> ai.onnxruntime.OrtSession$Result@2d363fb3\r\n\r\njshell> var first_output = result.get(0)\r\nfirst_output ==> OnnxTensor(info=TensorInfo(javaType=INT64,onnxTyp ... ATA_TYPE_INT64,shape=[1]))\r\n\r\njshell> var second_output = result.get(1)\r\nsecond_output ==> OnnxTensor(info=TensorInfo(javaType=FLOAT,onnxTyp ... _TYPE_FLOAT,shape=[1, 3]))\r\n\r\njshell> first_output.getValue()\r\n$14 ==> long[1] { 0 }\r\n\r\njshell> second_output.getValue()\r\n$15 ==> float[1][] { float[3] { 2.086214, -0.08464867, 0.9971936 } }\r\n```","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/900448275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Craigacp","id":729696,"node_id":"MDQ6VXNlcjcyOTY5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/729696?v=4","gravatar_id":"","url":"https://api.github.com/users/Craigacp","html_url":"https://github.com/Craigacp","followers_url":"https://api.github.com/users/Craigacp/followers","following_url":"https://api.github.com/users/Craigacp/following{/other_user}","gists_url":"https://api.github.com/users/Craigacp/gists{/gist_id}","starred_url":"https://api.github.com/users/Craigacp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Craigacp/subscriptions","organizations_url":"https://api.github.com/users/Craigacp/orgs","repos_url":"https://api.github.com/users/Craigacp/repos","events_url":"https://api.github.com/users/Craigacp/events{/privacy}","received_events_url":"https://api.github.com/users/Craigacp/received_events","type":"User","site_admin":false}},{"id":5173135554,"node_id":"MDExOkNsb3NlZEV2ZW50NTE3MzEzNTU1NA==","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/5173135554","actor":{"login":"aakashveera","id":54843933,"node_id":"MDQ6VXNlcjU0ODQzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/54843933?v=4","gravatar_id":"","url":"https://api.github.com/users/aakashveera","html_url":"https://github.com/aakashveera","followers_url":"https://api.github.com/users/aakashveera/followers","following_url":"https://api.github.com/users/aakashveera/following{/other_user}","gists_url":"https://api.github.com/users/aakashveera/gists{/gist_id}","starred_url":"https://api.github.com/users/aakashveera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aakashveera/subscriptions","organizations_url":"https://api.github.com/users/aakashveera/orgs","repos_url":"https://api.github.com/users/aakashveera/repos","events_url":"https://api.github.com/users/aakashveera/events{/privacy}","received_events_url":"https://api.github.com/users/aakashveera/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-08-18T07:51:44Z","state_reason":null,"performed_via_github_app":null}]