[{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/537542165","html_url":"https://github.com/onnx/sklearn-onnx/issues/278#issuecomment-537542165","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/278","id":537542165,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU0MjE2NQ==","user":{"login":"prabhat00155","id":7043157,"node_id":"MDQ6VXNlcjcwNDMxNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7043157?v=4","gravatar_id":"","url":"https://api.github.com/users/prabhat00155","html_url":"https://github.com/prabhat00155","followers_url":"https://api.github.com/users/prabhat00155/followers","following_url":"https://api.github.com/users/prabhat00155/following{/other_user}","gists_url":"https://api.github.com/users/prabhat00155/gists{/gist_id}","starred_url":"https://api.github.com/users/prabhat00155/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prabhat00155/subscriptions","organizations_url":"https://api.github.com/users/prabhat00155/orgs","repos_url":"https://api.github.com/users/prabhat00155/repos","events_url":"https://api.github.com/users/prabhat00155/events{/privacy}","received_events_url":"https://api.github.com/users/prabhat00155/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T15:17:24Z","updated_at":"2019-10-02T15:17:24Z","author_association":"COLLABORATOR","body":"I think what you need is to add a Log node which processes the input, this would be followed by StandardScaler. \r\n@xadupre: Do you know how to add a custom node to the graph?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/537542165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"prabhat00155","id":7043157,"node_id":"MDQ6VXNlcjcwNDMxNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7043157?v=4","gravatar_id":"","url":"https://api.github.com/users/prabhat00155","html_url":"https://github.com/prabhat00155","followers_url":"https://api.github.com/users/prabhat00155/followers","following_url":"https://api.github.com/users/prabhat00155/following{/other_user}","gists_url":"https://api.github.com/users/prabhat00155/gists{/gist_id}","starred_url":"https://api.github.com/users/prabhat00155/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prabhat00155/subscriptions","organizations_url":"https://api.github.com/users/prabhat00155/orgs","repos_url":"https://api.github.com/users/prabhat00155/repos","events_url":"https://api.github.com/users/prabhat00155/events{/privacy}","received_events_url":"https://api.github.com/users/prabhat00155/received_events","type":"User","site_admin":false}},{"id":2680998293,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjY4MDk5ODI5Mw==","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/2680998293","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-02T15:17:24Z","performed_via_github_app":null},{"id":2680998297,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2ODA5OTgyOTc=","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/2680998297","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-02T15:17:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/537551971","html_url":"https://github.com/onnx/sklearn-onnx/issues/278#issuecomment-537551971","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/278","id":537551971,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU1MTk3MQ==","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T15:38:58Z","updated_at":"2019-10-02T15:38:58Z","author_association":"COLLABORATOR","body":"FunctionTransformer is tricky because the function to convert may be impossible to convert into ONNX. Assuming you want to use existing onnx nodes (so with a dedicated runtime), it requires to convert python code into ONNX. I started to look into that direction (http://www.xavierdupre.fr/app/mlprodict/helpsphinx/i_ex.html#index-exref-0-4) but the coverage of numpy functions it supports is small.\r\n\r\nThe best option now is to create your own transformer, to implement the corresponding converter, to register it so that skl2onnx can pick it up. The only example I wrote is the following https://github.com/onnx/sklearn-onnx/blob/master/docs/examples/plot_custom_model.py but that's not the easiest one.\r\n","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/537551971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"id":3269271478,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyNjkyNzE0Nzg=","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/3269271478","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-24T12:52:15Z","label":{"name":"0.23","color":"fcf2ba"},"performed_via_github_app":null},{"id":3269301219,"node_id":"MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQzMjY5MzAxMjE5","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/3269301219","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"added_to_project","commit_id":null,"commit_url":null,"created_at":"2020-04-24T13:00:16Z","project_card":{"id":36946858,"url":"https://api.github.com/projects/columns/cards/36946858","project_id":4372824,"project_url":"https://api.github.com/projects/4372824","column_name":"To do"},"performed_via_github_app":null},{"id":3288618570,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MzI4ODYxODU3MA==","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/3288618570","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2020-04-30T10:27:51Z","label":{"name":"0.23","color":"fcf2ba"},"performed_via_github_app":null},{"id":3288618573,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyODg2MTg1NzM=","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/3288618573","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-30T10:27:51Z","label":{"name":"Agility","color":"109641"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/684847553","html_url":"https://github.com/onnx/sklearn-onnx/issues/278#issuecomment-684847553","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/278","id":684847553,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg0NzU1Mw==","user":{"login":"mnp","id":881925,"node_id":"MDQ6VXNlcjg4MTkyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/881925?v=4","gravatar_id":"","url":"https://api.github.com/users/mnp","html_url":"https://github.com/mnp","followers_url":"https://api.github.com/users/mnp/followers","following_url":"https://api.github.com/users/mnp/following{/other_user}","gists_url":"https://api.github.com/users/mnp/gists{/gist_id}","starred_url":"https://api.github.com/users/mnp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mnp/subscriptions","organizations_url":"https://api.github.com/users/mnp/orgs","repos_url":"https://api.github.com/users/mnp/repos","events_url":"https://api.github.com/users/mnp/events{/privacy}","received_events_url":"https://api.github.com/users/mnp/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T13:19:50Z","updated_at":"2020-09-01T13:19:50Z","author_association":"NONE","body":"So we've met this issue doing exactly what OP above is doing.  I'm investigating the two approaches above, but also encountered [this post](https://stackoverflow.com/questions/39406539/sklearn-function-transformer-in-pipeline) suggesting `sklearn-pandas.DataFrameMapper` might be an option.  Forgive me if it's far from the mark here, but does anyone have an opinion about that approach and how it compares to the other two?  Thanks!","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/684847553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mnp","id":881925,"node_id":"MDQ6VXNlcjg4MTkyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/881925?v=4","gravatar_id":"","url":"https://api.github.com/users/mnp","html_url":"https://github.com/mnp","followers_url":"https://api.github.com/users/mnp/followers","following_url":"https://api.github.com/users/mnp/following{/other_user}","gists_url":"https://api.github.com/users/mnp/gists{/gist_id}","starred_url":"https://api.github.com/users/mnp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mnp/subscriptions","organizations_url":"https://api.github.com/users/mnp/orgs","repos_url":"https://api.github.com/users/mnp/repos","events_url":"https://api.github.com/users/mnp/events{/privacy}","received_events_url":"https://api.github.com/users/mnp/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/684867509","html_url":"https://github.com/onnx/sklearn-onnx/issues/278#issuecomment-684867509","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/278","id":684867509,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg2NzUwOQ==","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T13:49:09Z","updated_at":"2021-06-03T09:50:20Z","author_association":"COLLABORATOR","body":"This example is part of the documentation: http://onnx.ai/sklearn-onnx/auto_tutorial/plot_icustom_converter.html. It is an end to end example which creates a custom transformer and its own converter. Converting custom python code is still difficult unless you use pytorch or tensorflow.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/684867509/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"id":4836575262,"node_id":"MDExOkNsb3NlZEV2ZW50NDgzNjU3NTI2Mg==","url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/events/4836575262","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-06-03T09:50:25Z","state_reason":null,"performed_via_github_app":null}]