[{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1271663873","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1271663873","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1271663873,"node_id":"IC_kwDOCa0gS85LzA0B","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-10-07T14:22:39Z","updated_at":"2022-10-07T14:22:39Z","author_association":"COLLABORATOR","body":"Could you use this example as a reference https://onnx.ai/sklearn-onnx/auto_tutorial/plot_gexternal_lightgbm.html ?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1271663873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1272892780","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1272892780","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1272892780,"node_id":"IC_kwDOCa0gS85L3s1s","user":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false},"created_at":"2022-10-10T07:32:25Z","updated_at":"2022-10-10T07:32:25Z","author_association":"NONE","body":"Hi, when i try that method, I get the following error:\r\n\r\nMissingShapeCalculator: Unable to find a shape calculator for type '<class 'lightgbm.basic.Booster'>'.\r\nIt usually means the pipeline being converted contains a\r\ntransformer or a predictor with no corresponding converter\r\nimplemented in sklearn-onnx. If the converted is implemented\r\nin another library, you need to register\r\nthe converted so that it can be used by sklearn-onnx (function\r\nupdate_registered_converter). If the model is not yet covered\r\nby sklearn-onnx, you may raise an issue to\r\nhttps://github.com/onnx/sklearn-onnx/issues\r\nto get the converter implemented or even contribute to the\r\nproject. If the model is a custom model, a new converter must\r\nbe implemented. Examples can be found in the gallery.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1272892780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1273010973","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1273010973","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1273010973,"node_id":"IC_kwDOCa0gS85L4Jsd","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-10-10T09:09:27Z","updated_at":"2022-10-10T09:09:27Z","author_association":"COLLABORATOR","body":"This case is not exposed as an example but is tested in a unit test: https://github.com/onnx/sklearn-onnx/blob/main/tests_onnxmltools/test_lightgbm.py. You should find the missing pieces in that file.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1273010973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1274151688","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1274151688","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1274151688,"node_id":"IC_kwDOCa0gS85L8gMI","user":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false},"created_at":"2022-10-11T06:32:47Z","updated_at":"2022-10-11T06:32:47Z","author_association":"NONE","body":"Hi, I have tried to execute the same code that is mentioned in above link. \r\nI get the same error as mentioned in the subject of this issue. I have attached the python notebook and error trace in following repo. Please let me know how to resolve this. \r\nhttps://github.com/Bhuvanamitra/LightGBMToONNX/tree/main","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1274151688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1277312416","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1277312416","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1277312416,"node_id":"IC_kwDOCa0gS85MIj2g","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-10-13T09:30:56Z","updated_at":"2022-10-13T09:30:56Z","author_association":"COLLABORATOR","body":"I tried the following example and it worked. This issue comes from a feature your tree is using and which is not supported by the converter. Given the error you mention, it might be caused by an unexpected rule in a node (usually only `<` is used).\r\n\r\n```python\r\nimport pickle\r\nimport numpy\r\nimport pandas as pd\r\nfrom onnxruntime import InferenceSession\r\nimport onnxruntime as rt\r\nfrom sklearn.base import ClassifierMixin\r\nfrom lightgbm import LGBMClassifier, LGBMRegressor, Dataset, train, Booster\r\nfrom skl2onnx import update_registered_converter\r\nfrom skl2onnx.common.data_types import FloatTensorType\r\nfrom skl2onnx.common.shape_calculator import (\r\n    calculate_linear_classifier_output_shapes,  # noqa\r\n    calculate_linear_regressor_output_shapes,\r\n)\r\nfrom onnxmltools.convert.lightgbm.operator_converters.LightGbm import (\r\n    convert_lightgbm  # noqa\r\n)\r\nimport onnxmltools\r\nfrom onnxmltools.convert.lightgbm._parse import WrappedBooster  # noqa\r\nfrom skl2onnx import to_onnx\r\nfrom skl2onnx._parse import (\r\n    _parse_sklearn_classifier, _parse_sklearn_simple_model)\r\n\r\n\r\ndef calculate_lightgbm_output_shapes(operator):\r\n    op = operator.raw_operator\r\n    if hasattr(op, \"_model_dict\"):\r\n        objective = op._model_dict['objective']\r\n    elif hasattr(op, 'objective_'):\r\n        objective = op.objective_\r\n    else:\r\n        raise RuntimeError(  # pragma: no cover\r\n            \"Unable to find attributes '_model_dict' or 'objective_' in \"\r\n            \"instance of type %r (list of attributes=%r).\" % (\r\n                type(op), dir(op)))\r\n    if objective.startswith('binary') or objective.startswith('multiclass'):\r\n        return calculate_linear_classifier_output_shapes(operator)\r\n    if objective.startswith('regression'):  # pragma: no cover\r\n        return calculate_linear_regressor_output_shapes(operator)\r\n    raise NotImplementedError(  # pragma: no cover\r\n        \"Objective '{}' is not implemented yet.\".format(objective))\r\n    \r\n    \r\ndef lightgbm_parser(scope, model, inputs, custom_parsers=None):\r\n    if hasattr(model, \"fit\"):\r\n        raise TypeError(  # pragma: no cover\r\n            \"This converter does not apply on type '{}'.\"\r\n            \"\".format(type(model)))\r\n\r\n    if len(inputs) == 1:\r\n        wrapped = WrappedBooster(model)\r\n        objective = wrapped.get_objective()\r\n        if objective.startswith('binary'):\r\n            wrapped = WrappedLightGbmBoosterClassifier(wrapped)\r\n            return _parse_sklearn_classifier(\r\n                scope, wrapped, inputs, custom_parsers=custom_parsers)\r\n        if objective.startswith('multiclass'):\r\n            wrapped = WrappedLightGbmBoosterClassifier(wrapped)\r\n            return _parse_sklearn_classifier(\r\n                scope, wrapped, inputs, custom_parsers=custom_parsers)\r\n        if objective.startswith('regression'):  # pragma: no cover\r\n            return _parse_sklearn_simple_model(\r\n                scope, wrapped, inputs, custom_parsers=custom_parsers)\r\n        raise NotImplementedError(  # pragma: no cover\r\n            \"Objective '{}' is not implemented yet.\".format(objective))\r\n\r\n    # Multiple columns\r\n    this_operator = scope.declare_local_operator('LightGBMConcat')\r\n    this_operator.raw_operator = model\r\n    this_operator.inputs = inputs\r\n    var = scope.declare_local_variable(\r\n        'Xlgbm', inputs[0].type.__class__([None, None]))\r\n    this_operator.outputs.append(var)\r\n    return lightgbm_parser(scope, model, this_operator.outputs,\r\n                           custom_parsers=custom_parsers)\r\n        \r\n        \r\nclass WrappedLightGbmBoosterClassifier(ClassifierMixin):\r\n    \"\"\"\r\n    Trick to wrap a LGBMClassifier into a class.\r\n    \"\"\"\r\n\r\n    def __init__(self, wrapped):  # pylint: disable=W0231\r\n        for k in {'boosting_type', '_model_dict', '_model_dict_info',\r\n                  'operator_name', 'classes_', 'booster_', 'n_features_',\r\n                  'objective_', 'boosting_type', 'n_features_'}:\r\n            if hasattr(wrapped, k):\r\n                setattr(self, k, getattr(wrapped, k))\r\n\r\n\r\nupdate_registered_converter(\r\n            WrappedLightGbmBoosterClassifier,\r\n            'WrappedLightGbmBoosterClassifier',\r\n            calculate_lightgbm_output_shapes,\r\n            convert_lightgbm, parser=lightgbm_parser,\r\n            options={'zipmap': [False, True], 'nocl': [False, True]})\r\nupdate_registered_converter(\r\n            WrappedBooster, 'WrappedBooster',\r\n            calculate_lightgbm_output_shapes,\r\n            convert_lightgbm, parser=lightgbm_parser,\r\n            options={'zipmap': [False, True], 'nocl': [False, True]})\r\nupdate_registered_converter(\r\n            Booster, 'LightGbmBooster', calculate_lightgbm_output_shapes,\r\n            convert_lightgbm, parser=lightgbm_parser)\r\n        \r\n\r\n\r\n\r\nX = [[0, 1], [1, 1], [2, 0], [1, 2], [-1, 2], [1, -2]]\r\nX = numpy.array(X, dtype=numpy.float32)\r\ny = [0, 1, 0, 1, 2, 2]\r\ndata = Dataset(X, label=y)\r\nmodel = train(\r\n    {'boosting_type': 'gbdt', 'objective': 'multiclass',\r\n     'n_estimators': 3, 'min_child_samples': 1, 'num_class': 3},\r\n    data)\r\n\r\n\r\nonnx_model = to_onnx(\r\n    model,\r\n    initial_types=[('feature_input', FloatTensorType([None, 2021]))],\r\n    options={WrappedLightGbmBoosterClassifier: {'zipmap': False}},\r\n             target_opset={'': 15, 'ai.onnx.ml': 2})\r\n```","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1277312416/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1277340593","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1277340593","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1277340593,"node_id":"IC_kwDOCa0gS85MIqux","user":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false},"created_at":"2022-10-13T09:45:12Z","updated_at":"2022-10-13T10:14:56Z","author_association":"NONE","body":"> This issue comes from a feature your tree is using and which is not supported by the converter. Given the error you mention, it might be caused by an unexpected rule in a node (usually only < is used).\r\n\r\nThank you for the reply. I have split the dataset into parts and tried with models generated using split datasets, and yes, the conversions worked. And in this case 1943 out of 2021 features were used by lightGBM.\r\n\r\nBut when I generate model out of whole data, I am unable to convert that model. \r\nIn this case 1975 out of 2021 features were used.\r\n\r\nIs there a way to identify which feature is causing this issue? \r\nCan you throw some light on how to handle these kind of issues in conversion?","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1277340593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1278002725","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1278002725","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1278002725,"node_id":"IC_kwDOCa0gS85MLMYl","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-10-13T18:20:33Z","updated_at":"2022-10-13T18:20:33Z","author_association":"COLLABORATOR","body":"It is difficult without knowing the tree. I don't have a way to replicate. However, if you are willing to write some code, you probably modify onnxmltools in the lightgbm just before it calls container.add_node, search for the first value in attrs['nodes_values'] which is not a float and then looks into the corresponding value in attrs['nodes_modes'].","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1278002725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1278501002","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1278501002","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1278501002,"node_id":"IC_kwDOCa0gS85MNGCK","user":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false},"created_at":"2022-10-14T05:25:49Z","updated_at":"2022-10-14T05:25:49Z","author_association":"NONE","body":"[lightGBM_model.txt](https://github.com/onnx/sklearn-onnx/files/9782632/lightGBM_model.txt)\r\nThis is the lightGBM model file. \r\n\r\n[lightgbm_conf.txt](https://github.com/onnx/sklearn-onnx/files/9782726/lightgbm_conf.txt)\r\nThis is the configuration used in building the lightGBM model. \r\n\r\nI will try to debug from my end using your suggestion, I request you to go through these and with your expertise, please do the necessary help in handling this. ","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1278501002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1279941786","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1279941786","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1279941786,"node_id":"IC_kwDOCa0gS85MSlya","user":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false},"created_at":"2022-10-16T10:35:39Z","updated_at":"2022-10-16T10:35:39Z","author_association":"COLLABORATOR","body":"Thanks for sharing your model. Lightgbm create list with mixed integers and floats for nodes values and ONNX checks there is only one type. I created a PR to fix it: https://github.com/onnx/onnxmltools/pull/591. It works for me on your tree.","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1279941786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xadupre","id":22452781,"node_id":"MDQ6VXNlcjIyNDUyNzgx","avatar_url":"https://avatars.githubusercontent.com/u/22452781?v=4","gravatar_id":"","url":"https://api.github.com/users/xadupre","html_url":"https://github.com/xadupre","followers_url":"https://api.github.com/users/xadupre/followers","following_url":"https://api.github.com/users/xadupre/following{/other_user}","gists_url":"https://api.github.com/users/xadupre/gists{/gist_id}","starred_url":"https://api.github.com/users/xadupre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xadupre/subscriptions","organizations_url":"https://api.github.com/users/xadupre/orgs","repos_url":"https://api.github.com/users/xadupre/repos","events_url":"https://api.github.com/users/xadupre/events{/privacy}","received_events_url":"https://api.github.com/users/xadupre/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1280334220","html_url":"https://github.com/onnx/sklearn-onnx/issues/919#issuecomment-1280334220","issue_url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/919","id":1280334220,"node_id":"IC_kwDOCa0gS85MUFmM","user":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false},"created_at":"2022-10-17T06:06:48Z","updated_at":"2022-10-17T10:00:13Z","author_association":"NONE","body":"Thanks a lot. The conversion worked. \r\nWhen can we expect this to be pushed into a stable release? ","reactions":{"url":"https://api.github.com/repos/onnx/sklearn-onnx/issues/comments/1280334220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Bhuvanamitra","id":7961570,"node_id":"MDQ6VXNlcjc5NjE1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/7961570?v=4","gravatar_id":"","url":"https://api.github.com/users/Bhuvanamitra","html_url":"https://github.com/Bhuvanamitra","followers_url":"https://api.github.com/users/Bhuvanamitra/followers","following_url":"https://api.github.com/users/Bhuvanamitra/following{/other_user}","gists_url":"https://api.github.com/users/Bhuvanamitra/gists{/gist_id}","starred_url":"https://api.github.com/users/Bhuvanamitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bhuvanamitra/subscriptions","organizations_url":"https://api.github.com/users/Bhuvanamitra/orgs","repos_url":"https://api.github.com/users/Bhuvanamitra/repos","events_url":"https://api.github.com/users/Bhuvanamitra/events{/privacy}","received_events_url":"https://api.github.com/users/Bhuvanamitra/received_events","type":"User","site_admin":false}}]