[{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463332882","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463332882","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463332882,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzMzMjg4Mg==","user":{"login":"us","id":22618852,"node_id":"MDQ6VXNlcjIyNjE4ODUy","avatar_url":"https://avatars.githubusercontent.com/u/22618852?v=4","gravatar_id":"","url":"https://api.github.com/users/us","html_url":"https://github.com/us","followers_url":"https://api.github.com/users/us/followers","following_url":"https://api.github.com/users/us/following{/other_user}","gists_url":"https://api.github.com/users/us/gists{/gist_id}","starred_url":"https://api.github.com/users/us/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/us/subscriptions","organizations_url":"https://api.github.com/users/us/orgs","repos_url":"https://api.github.com/users/us/repos","events_url":"https://api.github.com/users/us/events{/privacy}","received_events_url":"https://api.github.com/users/us/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T19:24:59Z","updated_at":"2019-02-13T19:24:59Z","author_association":"CONTRIBUTOR","body":"Please try this commands:\r\n\r\n```\r\npip uninstall tensorflow\r\npip install tensorflow-gpu\r\n```","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463332882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"us","id":22618852,"node_id":"MDQ6VXNlcjIyNjE4ODUy","avatar_url":"https://avatars.githubusercontent.com/u/22618852?v=4","gravatar_id":"","url":"https://api.github.com/users/us","html_url":"https://github.com/us","followers_url":"https://api.github.com/users/us/followers","following_url":"https://api.github.com/users/us/following{/other_user}","gists_url":"https://api.github.com/users/us/gists{/gist_id}","starred_url":"https://api.github.com/users/us/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/us/subscriptions","organizations_url":"https://api.github.com/users/us/orgs","repos_url":"https://api.github.com/users/us/repos","events_url":"https://api.github.com/users/us/events{/privacy}","received_events_url":"https://api.github.com/users/us/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463338373","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463338373","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463338373,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzMzODM3Mw==","user":{"login":"athlonshi","id":204295,"node_id":"MDQ6VXNlcjIwNDI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/204295?v=4","gravatar_id":"","url":"https://api.github.com/users/athlonshi","html_url":"https://github.com/athlonshi","followers_url":"https://api.github.com/users/athlonshi/followers","following_url":"https://api.github.com/users/athlonshi/following{/other_user}","gists_url":"https://api.github.com/users/athlonshi/gists{/gist_id}","starred_url":"https://api.github.com/users/athlonshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athlonshi/subscriptions","organizations_url":"https://api.github.com/users/athlonshi/orgs","repos_url":"https://api.github.com/users/athlonshi/repos","events_url":"https://api.github.com/users/athlonshi/events{/privacy}","received_events_url":"https://api.github.com/users/athlonshi/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T19:39:33Z","updated_at":"2019-02-13T19:39:33Z","author_association":"NONE","body":"> Please try this commands:\r\n> \r\n> ```\r\n> pip uninstall tensorflow\r\n> pip install tensorflow-gpu\r\n> ```\r\n\r\nThis did not solve the problem. The GPU was still not fired up except the memory occupation. ","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463338373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"athlonshi","id":204295,"node_id":"MDQ6VXNlcjIwNDI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/204295?v=4","gravatar_id":"","url":"https://api.github.com/users/athlonshi","html_url":"https://github.com/athlonshi","followers_url":"https://api.github.com/users/athlonshi/followers","following_url":"https://api.github.com/users/athlonshi/following{/other_user}","gists_url":"https://api.github.com/users/athlonshi/gists{/gist_id}","starred_url":"https://api.github.com/users/athlonshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athlonshi/subscriptions","organizations_url":"https://api.github.com/users/athlonshi/orgs","repos_url":"https://api.github.com/users/athlonshi/repos","events_url":"https://api.github.com/users/athlonshi/events{/privacy}","received_events_url":"https://api.github.com/users/athlonshi/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463349808","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463349808","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463349808,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzM0OTgwOA==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T20:11:17Z","updated_at":"2019-02-13T20:11:17Z","author_association":"COLLABORATOR","body":"The fact the the GPU memory is fully utilized by TesnorFlow means that the model is running on GPU.\r\nTry to run the same model from the command line instead of using the API and you should see the TensorFlow messaged printed on stderr.\r\nThe fact that the utilization of the GPU is low may have to do with a couple things: your model is really small so there's not much computation per batch to be done, or your batch is really small and so again there's not much computation to be done per batch. To test for this, try to increase the batch size considerably.\r\nFinally, the process that reads data and provides it to TensorFlow at the moment is not super optimized, we are working on improving it, but you may be hitting an i/o bottleneck if your computation per batch is too small.","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463349808/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"id":2137811539,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxMzc4MTE1Mzk=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/2137811539","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-02-13T20:11:30Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463358886","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463358886","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463358886,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzM1ODg4Ng==","user":{"login":"athlonshi","id":204295,"node_id":"MDQ6VXNlcjIwNDI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/204295?v=4","gravatar_id":"","url":"https://api.github.com/users/athlonshi","html_url":"https://github.com/athlonshi","followers_url":"https://api.github.com/users/athlonshi/followers","following_url":"https://api.github.com/users/athlonshi/following{/other_user}","gists_url":"https://api.github.com/users/athlonshi/gists{/gist_id}","starred_url":"https://api.github.com/users/athlonshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athlonshi/subscriptions","organizations_url":"https://api.github.com/users/athlonshi/orgs","repos_url":"https://api.github.com/users/athlonshi/repos","events_url":"https://api.github.com/users/athlonshi/events{/privacy}","received_events_url":"https://api.github.com/users/athlonshi/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T20:36:50Z","updated_at":"2019-02-13T20:36:50Z","author_association":"NONE","body":"Thanks, I had a similar thought about it. I had the same setup with keras/tensorflow and its runs much faster and with higher GPU utilization rate. I am thinking the overhead communication cost is quite high between ludwig and tensorflow.  \r\n\r\n\r\n\r\n> The fact the the GPU memory is fully utilized by TesnorFlow means that the model is running on GPU.\r\n> Try to run the same model from the command line instead of using the API and you should see the TensorFlow messaged printed on stderr.\r\n> The fact that the utilization of the GPU is low may have to do with a couple things: your model is really small so there's not much computation per batch to be done, or your batch is really small and so again there's not much computation to be done per batch. To test for this, try to increase the batch size considerably.\r\n> Finally, the process that reads data and provides it to TensorFlow at the moment is not super optimized, we are working on improving it, but you may be hitting an i/o bottleneck if your computation per batch is too small.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463358886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"athlonshi","id":204295,"node_id":"MDQ6VXNlcjIwNDI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/204295?v=4","gravatar_id":"","url":"https://api.github.com/users/athlonshi","html_url":"https://github.com/athlonshi","followers_url":"https://api.github.com/users/athlonshi/followers","following_url":"https://api.github.com/users/athlonshi/following{/other_user}","gists_url":"https://api.github.com/users/athlonshi/gists{/gist_id}","starred_url":"https://api.github.com/users/athlonshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athlonshi/subscriptions","organizations_url":"https://api.github.com/users/athlonshi/orgs","repos_url":"https://api.github.com/users/athlonshi/repos","events_url":"https://api.github.com/users/athlonshi/events{/privacy}","received_events_url":"https://api.github.com/users/athlonshi/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463409100","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463409100","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463409100,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzQwOTEwMA==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T22:54:07Z","updated_at":"2019-02-13T22:54:17Z","author_association":"COLLABORATOR","body":"You you can confirm it's running on GPU right? If you run through the command line you get the tf GPU prints and the speed is the same as running it through the API, right?\r\nYes the communication overhead is one thing we really need to optimize. I'd be curious to take a look at the specifics of this and run some comparisons, would you be willing to share your tf/keras scripts and your Ludwig model definition or something that replicates it?","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463409100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"id":2138179379,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxMzgxNzkzNzk=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/2138179379","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-02-13T22:54:28Z","label":{"name":"enhancement","color":"a2eeef"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463425803","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463425803","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463425803,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzQyNTgwMw==","user":{"login":"athlonshi","id":204295,"node_id":"MDQ6VXNlcjIwNDI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/204295?v=4","gravatar_id":"","url":"https://api.github.com/users/athlonshi","html_url":"https://github.com/athlonshi","followers_url":"https://api.github.com/users/athlonshi/followers","following_url":"https://api.github.com/users/athlonshi/following{/other_user}","gists_url":"https://api.github.com/users/athlonshi/gists{/gist_id}","starred_url":"https://api.github.com/users/athlonshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athlonshi/subscriptions","organizations_url":"https://api.github.com/users/athlonshi/orgs","repos_url":"https://api.github.com/users/athlonshi/repos","events_url":"https://api.github.com/users/athlonshi/events{/privacy}","received_events_url":"https://api.github.com/users/athlonshi/received_events","type":"User","site_admin":false},"created_at":"2019-02-13T23:57:29Z","updated_at":"2019-02-13T23:57:29Z","author_association":"NONE","body":"I did not have luck with the yaml file input so I did not run through command line. I’d like to see an example yaml file model definition so I can try. \r\nBut I tried to change the batch sizes with 32, 64, 128, 256, and 512. The performances were very different, which indicates the GPU was actually working. For my problem, it appeared that the batch size of 64 gave me the best efficiency, which was several times faster than using 32. \r\nWith batch size of 64, the performance got closer to keras/tensorflow, but it was still slower. \r\nI have a simple regression problem. With the same network structure and optimizer setup, I had very different results from using Ludwig and keras. I found Ludwig was very sensitive to the initializer parameters. \r\nMy data has proprietary information, so I will need to consolidate my scripts and trim the proprietary information before I can share it. But I will work on it in a day or two. Thanks and congratulations on the great tool! \r\n","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463425803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"athlonshi","id":204295,"node_id":"MDQ6VXNlcjIwNDI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/204295?v=4","gravatar_id":"","url":"https://api.github.com/users/athlonshi","html_url":"https://github.com/athlonshi","followers_url":"https://api.github.com/users/athlonshi/followers","following_url":"https://api.github.com/users/athlonshi/following{/other_user}","gists_url":"https://api.github.com/users/athlonshi/gists{/gist_id}","starred_url":"https://api.github.com/users/athlonshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athlonshi/subscriptions","organizations_url":"https://api.github.com/users/athlonshi/orgs","repos_url":"https://api.github.com/users/athlonshi/repos","events_url":"https://api.github.com/users/athlonshi/events{/privacy}","received_events_url":"https://api.github.com/users/athlonshi/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463430686","html_url":"https://github.com/ludwig-ai/ludwig/issues/73#issuecomment-463430686","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/73","id":463430686,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzQzMDY4Ng==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2019-02-14T00:17:22Z","updated_at":"2019-02-14T00:17:22Z","author_association":"COLLABORATOR","body":"As for the YAML examples, you find a bunch [here](https://uber.github.io/ludwig/examples/). Be mindful of the `-` and the indentation.\r\nGlad you were able to make it work decently fast with a bigger batch size.\r\nRegarding the initialization, you can specify which initializer to use, so playing around with that may give you some better results.\r\nRegarding the reproducible example, you can use the `data_synthesyzer` script in `ludwig/data` co create a dataset that looks like yours pretty easily, we use it for integration tests. That should resolve the data issue.\r\nI'm closing the issue, but feel free to either open another one or reach out in private if you can provide me with the comparison script.\r\nYou're welcome.","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/463430686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"id":2138318190,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MjEzODMxODE5MA==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/2138318190","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2019-02-14T00:17:44Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"id":2138318302,"node_id":"MDExOkNsb3NlZEV2ZW50MjEzODMxODMwMg==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/2138318302","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-02-14T00:17:49Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"smiraldr","id":42693530,"node_id":"MDQ6VXNlcjQyNjkzNTMw","avatar_url":"https://avatars.githubusercontent.com/u/42693530?v=4","gravatar_id":"","url":"https://api.github.com/users/smiraldr","html_url":"https://github.com/smiraldr","followers_url":"https://api.github.com/users/smiraldr/followers","following_url":"https://api.github.com/users/smiraldr/following{/other_user}","gists_url":"https://api.github.com/users/smiraldr/gists{/gist_id}","starred_url":"https://api.github.com/users/smiraldr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smiraldr/subscriptions","organizations_url":"https://api.github.com/users/smiraldr/orgs","repos_url":"https://api.github.com/users/smiraldr/repos","events_url":"https://api.github.com/users/smiraldr/events{/privacy}","received_events_url":"https://api.github.com/users/smiraldr/received_events","type":"User","site_admin":false},"created_at":"2022-01-10T13:12:40Z","updated_at":"2022-01-10T13:12:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1664","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1664/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1664/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1664/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/1664","id":1097885980,"node_id":"I_kwDOCbx2hs5BcGkc","number":1664,"title":"Ludwig serve reserves gpu memory but doesn't utilize gpu (tf-inference pip install Ludwig 0.4)","user":{"login":"smiraldr","id":42693530,"node_id":"MDQ6VXNlcjQyNjkzNTMw","avatar_url":"https://avatars.githubusercontent.com/u/42693530?v=4","gravatar_id":"","url":"https://api.github.com/users/smiraldr","html_url":"https://github.com/smiraldr","followers_url":"https://api.github.com/users/smiraldr/followers","following_url":"https://api.github.com/users/smiraldr/following{/other_user}","gists_url":"https://api.github.com/users/smiraldr/gists{/gist_id}","starred_url":"https://api.github.com/users/smiraldr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smiraldr/subscriptions","organizations_url":"https://api.github.com/users/smiraldr/orgs","repos_url":"https://api.github.com/users/smiraldr/repos","events_url":"https://api.github.com/users/smiraldr/events{/privacy}","received_events_url":"https://api.github.com/users/smiraldr/received_events","type":"User","site_admin":false},"labels":[{"id":1174068769,"node_id":"MDU6TGFiZWwxMTc0MDY4NzY5","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1434966350,"node_id":"MDU6TGFiZWwxNDM0OTY2MzUw","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/looking%20into%20it","name":"looking into it","color":"ffa54f","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2022-01-10T13:12:40Z","updated_at":"2022-06-25T20:03:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"repository":{"id":163346054,"node_id":"MDEwOlJlcG9zaXRvcnkxNjMzNDYwNTQ=","name":"ludwig","full_name":"ludwig-ai/ludwig","private":false,"owner":{"login":"ludwig-ai","id":65477820,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1NDc3ODIw","avatar_url":"https://avatars.githubusercontent.com/u/65477820?v=4","gravatar_id":"","url":"https://api.github.com/users/ludwig-ai","html_url":"https://github.com/ludwig-ai","followers_url":"https://api.github.com/users/ludwig-ai/followers","following_url":"https://api.github.com/users/ludwig-ai/following{/other_user}","gists_url":"https://api.github.com/users/ludwig-ai/gists{/gist_id}","starred_url":"https://api.github.com/users/ludwig-ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ludwig-ai/subscriptions","organizations_url":"https://api.github.com/users/ludwig-ai/orgs","repos_url":"https://api.github.com/users/ludwig-ai/repos","events_url":"https://api.github.com/users/ludwig-ai/events{/privacy}","received_events_url":"https://api.github.com/users/ludwig-ai/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/ludwig-ai/ludwig","description":"Data-centric declarative deep learning framework","fork":false,"url":"https://api.github.com/repos/ludwig-ai/ludwig","forks_url":"https://api.github.com/repos/ludwig-ai/ludwig/forks","keys_url":"https://api.github.com/repos/ludwig-ai/ludwig/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ludwig-ai/ludwig/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ludwig-ai/ludwig/teams","hooks_url":"https://api.github.com/repos/ludwig-ai/ludwig/hooks","issue_events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events{/number}","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/events","assignees_url":"https://api.github.com/repos/ludwig-ai/ludwig/assignees{/user}","branches_url":"https://api.github.com/repos/ludwig-ai/ludwig/branches{/branch}","tags_url":"https://api.github.com/repos/ludwig-ai/ludwig/tags","blobs_url":"https://api.github.com/repos/ludwig-ai/ludwig/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ludwig-ai/ludwig/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ludwig-ai/ludwig/git/refs{/sha}","trees_url":"https://api.github.com/repos/ludwig-ai/ludwig/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ludwig-ai/ludwig/statuses/{sha}","languages_url":"https://api.github.com/repos/ludwig-ai/ludwig/languages","stargazers_url":"https://api.github.com/repos/ludwig-ai/ludwig/stargazers","contributors_url":"https://api.github.com/repos/ludwig-ai/ludwig/contributors","subscribers_url":"https://api.github.com/repos/ludwig-ai/ludwig/subscribers","subscription_url":"https://api.github.com/repos/ludwig-ai/ludwig/subscription","commits_url":"https://api.github.com/repos/ludwig-ai/ludwig/commits{/sha}","git_commits_url":"https://api.github.com/repos/ludwig-ai/ludwig/git/commits{/sha}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/comments{/number}","issue_comment_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments{/number}","contents_url":"https://api.github.com/repos/ludwig-ai/ludwig/contents/{+path}","compare_url":"https://api.github.com/repos/ludwig-ai/ludwig/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ludwig-ai/ludwig/merges","archive_url":"https://api.github.com/repos/ludwig-ai/ludwig/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ludwig-ai/ludwig/downloads","issues_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues{/number}","pulls_url":"https://api.github.com/repos/ludwig-ai/ludwig/pulls{/number}","milestones_url":"https://api.github.com/repos/ludwig-ai/ludwig/milestones{/number}","notifications_url":"https://api.github.com/repos/ludwig-ai/ludwig/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/labels{/name}","releases_url":"https://api.github.com/repos/ludwig-ai/ludwig/releases{/id}","deployments_url":"https://api.github.com/repos/ludwig-ai/ludwig/deployments","created_at":"2018-12-27T23:58:12Z","updated_at":"2023-01-19T21:01:40Z","pushed_at":"2023-01-19T23:08:58Z","git_url":"git://github.com/ludwig-ai/ludwig.git","ssh_url":"git@github.com:ludwig-ai/ludwig.git","clone_url":"https://github.com/ludwig-ai/ludwig.git","svn_url":"https://github.com/ludwig-ai/ludwig","homepage":"http://ludwig.ai","size":29868,"stargazers_count":8712,"watchers_count":8712,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":1027,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":241,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["computer-vision","data-centric","data-science","datascience","deep","deep-learning","deeplearning","learning","machine","machine-learning","machinelearning","ml","natural-language","natural-language-processing","neural-network","python","pytorch"],"visibility":"public","forks":1027,"open_issues":241,"watchers":8712,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Describe the bug**\r\nUsing ludwig serve from the cmd , Model reserves gpu memory but does not utilize gpu at all. Although unlike https://github.com/ludwig-ai/ludwig/issues/73 , training works well on gpu (speed difference for training on gpu and cpu is significantly different) on the same instance and same environment.\r\nInference speed remains equal on gpu or cpu and even batch size (single inference or batch of 50) seems to have no effect for inference.\r\nAlso I feel the overhead for tf and ludwig is still considerable as mentioned in #73 , have we made any new optimizations for that?\r\n\r\n**Logs**\r\n\r\n2021-12-27 08:25:23.778011: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 AVX512F FMA\r\nTo enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2021-12-27 08:25:24.398823: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1525] Created device /job:localhost/replica:0/task:0/device:GPU:0 with 13793 MB memory:  -> device: 0, name: Tesla T4, pci bus id: 0000:00:1e.0, compute capability: 7.5\r\n/opt/conda/lib/python3.8/site-packages/cryptography/hazmat/backends/openssl/x509.py:15: CryptographyDeprecationWarning: This version of cryptography contains a temporary pyOpenSSL fallback path. Upgrade pyOpenSSL now.\r\n  warnings.warn(\r\nDownloading: 100%|██████████| 570/570 [00:00<00:00, 595kB/s]\r\nDownloading: 100%|██████████| 511M/511M [00:09<00:00, 55.4MB/s]2021-12-27 08:25:38.408429: W tensorflow/core/framework/cpu_allocator_impl.cc:82] Allocation of 93763584 exceeds 10% of free system memory.\r\nSome layers from the model checkpoint at bert-base-uncased were not used when initializing TFBertModel: ['mlm___cls', 'nsp___cls']\r\n- This IS expected if you are initializing TFBertModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).\r\n- This IS NOT expected if you are initializing TFBertModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).\r\nAll the layers of TFBertModel were initialized from the model checkpoint at bert-base-uncased.\r\nIf your task is similar to the task the model of the checkpoint was trained on, you can already use TFBertModel for predictions without further training.\r\n2021-12-27 08:25:39.003222: W tensorflow/core/framework/cpu_allocator_impl.cc:82] Allocation of 93763584 exceeds 10% of free system memory.\r\nDownloading: 100%|██████████| 28.0/28.0 [00:00<00:00, 21.7kB/s]\r\nDownloading: 100%|██████████| 226k/226k [00:00<00:00, 315kB/s]\r\nDownloading: 100%|██████████| 455k/455k [00:00<00:00, 506kB/s]\r\nPrediction: 100%|██████████| 1/1 [00:06<00:00,  6.26s/it]\r\n\r\n**Expected behavior**\r\nFaster inference and gpu utilization.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n- OS: Ubuntu 18.04\r\n Version \r\n- Python version - 3.8.10\r\n- Ludwig version - 0.4 tf inference (installed using pip install ludwig)\r\n","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1664/timeline","performed_via_github_app":null,"state_reason":"reopened"}},"event":"cross-referenced"}]