[{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/464141463","html_url":"https://github.com/ludwig-ai/ludwig/issues/92#issuecomment-464141463","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/92","id":464141463,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDE0MTQ2Mw==","user":{"login":"ksteinfe","id":2659599,"node_id":"MDQ6VXNlcjI2NTk1OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2659599?v=4","gravatar_id":"","url":"https://api.github.com/users/ksteinfe","html_url":"https://github.com/ksteinfe","followers_url":"https://api.github.com/users/ksteinfe/followers","following_url":"https://api.github.com/users/ksteinfe/following{/other_user}","gists_url":"https://api.github.com/users/ksteinfe/gists{/gist_id}","starred_url":"https://api.github.com/users/ksteinfe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksteinfe/subscriptions","organizations_url":"https://api.github.com/users/ksteinfe/orgs","repos_url":"https://api.github.com/users/ksteinfe/repos","events_url":"https://api.github.com/users/ksteinfe/events{/privacy}","received_events_url":"https://api.github.com/users/ksteinfe/received_events","type":"User","site_admin":false},"created_at":"2019-02-15T17:57:19Z","updated_at":"2019-02-15T17:59:10Z","author_association":"NONE","body":"\r\nI had a similar issue, and tried the --gpu_fraction setting to no avail. Ended up addressing it by adjusting the batch size, like this (note the lack of dashes in the training section)...\r\n```\r\ninput_features:\r\n  -\r\n    name: image_path\r\n    type: image\r\n    encoder: stacked_cnn\r\n  -\r\n    name: some_number\r\n    type: numerical\r\n\r\noutput_features:\r\n  -\r\n    name: label\r\n    type: category\r\n\r\ntraining:\r\n    batch_size: 64\r\n```","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/464141463/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ksteinfe","id":2659599,"node_id":"MDQ6VXNlcjI2NTk1OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2659599?v=4","gravatar_id":"","url":"https://api.github.com/users/ksteinfe","html_url":"https://github.com/ksteinfe","followers_url":"https://api.github.com/users/ksteinfe/followers","following_url":"https://api.github.com/users/ksteinfe/following{/other_user}","gists_url":"https://api.github.com/users/ksteinfe/gists{/gist_id}","starred_url":"https://api.github.com/users/ksteinfe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksteinfe/subscriptions","organizations_url":"https://api.github.com/users/ksteinfe/orgs","repos_url":"https://api.github.com/users/ksteinfe/repos","events_url":"https://api.github.com/users/ksteinfe/events{/privacy}","received_events_url":"https://api.github.com/users/ksteinfe/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/464163044","html_url":"https://github.com/ludwig-ai/ludwig/issues/92#issuecomment-464163044","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/92","id":464163044,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDE2MzA0NA==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2019-02-15T19:05:19Z","updated_at":"2019-02-15T19:05:19Z","author_association":"COLLABORATOR","body":"So, TensorFlow by default allocates all the memory on the GPU, and then has an internal allocation system. The fact that it runs out of memory means that there is not enough memory on your GPU for the size of both weights and activation tensors you are computing.\r\n\r\n`--gpu_fraction` instructs TensorFlow to allocate only that fraction of the memory at the beginning of the training, but then it can increase that amount elastically as needed. In your case it need more than your full memory, so it obviously needs also more than the fraction you specify.\r\n\r\nYou have a few solutions, to use in combination:\r\n1. Resize your images\r\n2. decrease the number of filters of the convolutional stack (admittedly the default values are a bit high for most GPUs, in the next release I'm going to decrease them)\r\n3. decrease the batch size\r\nA combination of these will decrease memory consumption and let you train your model.\r\n\r\nI'm closing this, let me know if this doesn't solve your problem.","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/464163044/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"id":2143301198,"node_id":"MDExOkNsb3NlZEV2ZW50MjE0MzMwMTE5OA==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/2143301198","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-02-15T19:05:19Z","state_reason":null,"performed_via_github_app":null},{"id":2143301475,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxNDMzMDE0NzU=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/2143301475","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-02-15T19:05:26Z","label":{"name":"good first issue","color":"7057ff"},"performed_via_github_app":null}]