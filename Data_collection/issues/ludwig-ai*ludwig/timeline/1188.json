[{"id":4822248478,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4MjIyNDg0Nzg=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4822248478","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-31T22:44:33Z","label":{"name":"discussion","color":"008500"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/851709245","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-851709245","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":851709245,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTcwOTI0NQ==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2021-05-31T22:55:41Z","updated_at":"2021-05-31T22:55:41Z","author_association":"COLLABORATOR","body":"Hi @farazk86 , you may be right and the dealing with the class imbalance of the mode can potentially improve your results.\r\n\r\nMy suggestions in that case would be to do either of two things:\r\n1. use oversampling on the training set for obtaining more datapoints belonging to rare classes. This you should do outside Ludwig. You can make all classes equal in count for instance, or you may just oversample a bit without reaching parity. One issue with this is that in your case there is also another target, and so you may be influencing the distribution of the other target in unexpected ways.\r\n2. 2. as you noticed you can use the `class_weights` parameter. Regarding the association, you can provide them in the same order, from more to least frequent class, that Ludwig figures out when mapping string to integer. To recover it check the `training_set_metadata.json` file, which contains `idx2str`. An alternative is to provide a dictionary instead, like: `{\"class_1\": 2, \"class_2\": 0.3, ...}` so that the mapping is explicit. Regarding figuring out what those values should actually be, there's no exact way. If you want to compensate for the long tail distribution, you could assign a `min(frequencies)/class_frequency` weight for each class, but it maybe a bit too strong for very frequent classes. I would say that ideally what you want to do though is to give smaller weights to more frequent classes.\r\n\r\nHopefully this helps!","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/851709245/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"id":4822262431,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDgyMjI2MjQzMQ==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4822262431","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-31T22:55:41Z","performed_via_github_app":null},{"id":4822262432,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4MjIyNjI0MzI=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4822262432","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-31T22:55:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854255595","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-854255595","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":854255595,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDI1NTU5NQ==","user":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"created_at":"2021-06-03T23:45:24Z","updated_at":"2021-06-03T23:45:24Z","author_association":"NONE","body":"Thanks for the reply @w4nderlust \r\n\r\nI calculated the ``class_weights`` for each class using the following formula for each ``mode`` value:\r\n\r\n`wj=total_samples / (n_classes * n_samplesj)`\r\n\r\nand provided the weights in a dictionary format as suggested:\r\n\r\n```python\r\nclass_weights: { '2': 0.49280872871549014, '1': 0.24099794654550746, '4': 0.46074900693982906, '8': 0.2038193043751752, '6': 1.3486856987739222, '5': 0.9558163396178018, '7': 0.2783691916928134, '2T': 4.64547296244351, '3': 0.5978260869565217, '7T': 33.2329988851728, '1T': 2.4454470877768664, '4S': 11.077666295057599, '6T': 2.993272416909328, 'r': 6.142592211003503, '8S': 8.471156578573458, '4T': 2.2423649766812095, '7S': 11.077666295057599, '5T': 36.0024154589372, '3S': 8.471156578573458, '1S': 2.8611191093195125, '2S': 8.151490292589555, '5S': 12.000805152979066, '6S': 10.537292329445034}\r\n```\r\n\r\nThis was calculated from a cleaned dataset that does not have any empty rows or columns and does not have any nan values (to the best of my knowledge, but its a very large dataset)\r\n\r\nBut still I was told that I need to provide a ``class weight`` for ``<UNK>``, So I just set ``<UNK>: 1`` \r\n\r\n```python\r\nclass_weights: {'<UNK>': 1, '2': 0.49280872871549014, '1': 0.24099794654550746, '4': 0.46074900693982906, '8': 0.2038193043751752, '6': 1.3486856987739222, '5': 0.9558163396178018, '7': 0.2783691916928134, '2T': 4.64547296244351, '3': 0.5978260869565217, '7T': 33.2329988851728, '1T': 2.4454470877768664, '4S': 11.077666295057599, '6T': 2.993272416909328, 'r': 6.142592211003503, '8S': 8.471156578573458, '4T': 2.2423649766812095, '7S': 11.077666295057599, '5T': 36.0024154589372, '3S': 8.471156578573458, '1S': 2.8611191093195125, '2S': 8.151490292589555, '5S': 12.000805152979066, '6S': 10.537292329445034}\r\n```\r\n\r\nIs this the correct way to go about this and adding weight for ``<UNK>``, even if there are some ``<UNK>`` values, having a weight of ` should not skew the training in any way?\r\n\r\nThanks","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854255595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false}},{"id":4840325782,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg0MDMyNTc4Mg==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4840325782","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-03T23:45:24Z","performed_via_github_app":null},{"id":4840325783,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NDAzMjU3ODM=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4840325783","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-03T23:45:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854278603","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-854278603","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":854278603,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDI3ODYwMw==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2021-06-04T00:55:14Z","updated_at":"2021-06-04T00:55:14Z","author_association":"COLLABORATOR","body":"@farazk86 this looks good to me, I would have computed the weight in a slightly different way as I reported above, but if the logic of ho the weights are computed, then go for it.\r\nRegurding UNK, the importance of it depends on how big the vocabulary of classes is and how many missing ones your dataset contains, but setting it to 1 is definitely a reasonable default.","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854278603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"id":4840476777,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg0MDQ3Njc3Nw==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4840476777","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-04T00:55:14Z","performed_via_github_app":null},{"id":4840476779,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NDA0NzY3Nzk=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4840476779","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-04T00:55:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854604853","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-854604853","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":854604853,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDYwNDg1Mw==","user":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"created_at":"2021-06-04T10:33:53Z","updated_at":"2021-06-04T10:33:53Z","author_association":"NONE","body":"> @farazk86 this looks good to me, I would have computed the weight in a slightly different way as I reported above, but if the logic of ho the weights are computed, then go for it.\r\n> Regurding UNK, the importance of it depends on how big the vocabulary of classes is and how many missing ones your dataset contains, but setting it to 1 is definitely a reasonable default.\r\n\r\n@w4nderlust  Thanks for the reply.\r\n\r\nI got the formula mentioned above from a medium article talking about how to handle class imbalance.\r\n\r\nCan you please suggest an alternative better way?  :)\r\n\r\nThanks","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854604853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false}},{"id":4842454352,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg0MjQ1NDM1Mg==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4842454352","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-04T10:33:53Z","performed_via_github_app":null},{"id":4842454355,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NDI0NTQzNTU=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4842454355","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-04T10:33:53Z","performed_via_github_app":null},{"id":4842454358,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg0MjQ1NDM1OA==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4842454358","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-04T10:33:54Z","performed_via_github_app":null},{"id":4842454359,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NDI0NTQzNTk=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4842454359","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-04T10:33:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854982431","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-854982431","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":854982431,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDk4MjQzMQ==","user":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"created_at":"2021-06-04T20:30:24Z","updated_at":"2021-06-04T20:30:24Z","author_association":"COLLABORATOR","body":"No that sounds totally fine to me :) I was suggesting `min(class_frequencies)/class_frequency` just because that has an upper bound of 1 for rare classes and all others would have a score less than 1, but I didn't have a specific theory to support it, I was just following intuition.\r\nWould actually be great if you could post the source of that formula here so that otehr people with the same problem would find it too!","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/854982431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/855832482","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-855832482","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":855832482,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTgzMjQ4Mg==","user":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false},"created_at":"2021-06-07T11:06:27Z","updated_at":"2021-06-07T12:28:54Z","author_association":"NONE","body":"Yes, sure.\r\n\r\nBelow is the code I used to print out a dictionary with the calculated weight of each class in the ``mode`` column, and then just copied this dictionary into the model configuration file.\r\n\r\n```python\r\nimport pandas as pd\r\n\r\ndf = pd.read_csv('training_file.csv')\r\n\r\n# now calculating weight of each mode using formula:\r\n#           wj=n_samples / (n_classes * n_samplesj)\r\n\r\n#       wj is the weight for each class(j signifies the class)\r\n#       n_samples is the total number of samples or rows in the dataset\r\n#       n_classes is the total number of unique classes in the target\r\n#       n_samplesj is the total number of rows of the respective class\r\n\r\nmodes_all = df['mode'].unique()\r\nweights_dict = {}\r\n\r\nfor m in modes_all:\r\n    n_samples = len(df)\r\n    n_classes = len(modes_all)\r\n    n_samplesj = (df['mode'] == m).sum()\r\n    weightj = n_samples / (n_classes * n_samplesj)\r\n    weights_dict[m] = weightj\r\n\r\nprint(weights_dict)\r\n```\r\n\r\nAlthough I would like to add that you were right in your analysis @w4nderlust, using the above class weight code skewed the dataset in some way as I got poorer results compared to without using the weights... so in conclusion, I still dont know how to use class_weghts :/","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/855832482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"farazk86","id":33456896,"node_id":"MDQ6VXNlcjMzNDU2ODk2","avatar_url":"https://avatars.githubusercontent.com/u/33456896?v=4","gravatar_id":"","url":"https://api.github.com/users/farazk86","html_url":"https://github.com/farazk86","followers_url":"https://api.github.com/users/farazk86/followers","following_url":"https://api.github.com/users/farazk86/following{/other_user}","gists_url":"https://api.github.com/users/farazk86/gists{/gist_id}","starred_url":"https://api.github.com/users/farazk86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farazk86/subscriptions","organizations_url":"https://api.github.com/users/farazk86/orgs","repos_url":"https://api.github.com/users/farazk86/repos","events_url":"https://api.github.com/users/farazk86/events{/privacy}","received_events_url":"https://api.github.com/users/farazk86/received_events","type":"User","site_admin":false}},{"id":4851673137,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg1MTY3MzEzNw==","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4851673137","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-07T12:26:17Z","performed_via_github_app":null},{"id":4851673141,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NTE2NzMxNDE=","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/4851673141","actor":{"login":"w4nderlust","id":349256,"node_id":"MDQ6VXNlcjM0OTI1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/349256?v=4","gravatar_id":"","url":"https://api.github.com/users/w4nderlust","html_url":"https://github.com/w4nderlust","followers_url":"https://api.github.com/users/w4nderlust/followers","following_url":"https://api.github.com/users/w4nderlust/following{/other_user}","gists_url":"https://api.github.com/users/w4nderlust/gists{/gist_id}","starred_url":"https://api.github.com/users/w4nderlust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/w4nderlust/subscriptions","organizations_url":"https://api.github.com/users/w4nderlust/orgs","repos_url":"https://api.github.com/users/w4nderlust/repos","events_url":"https://api.github.com/users/w4nderlust/events{/privacy}","received_events_url":"https://api.github.com/users/w4nderlust/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-07T12:26:17Z","performed_via_github_app":null},{"id":7074505725,"node_id":"ATPE_lADOCbx2hs42CZT9zwAAAAGlrGP9","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/7074505725","actor":{"login":"dalianaliu","id":33500844,"node_id":"MDQ6VXNlcjMzNTAwODQ0","avatar_url":"https://avatars.githubusercontent.com/u/33500844?v=4","gravatar_id":"","url":"https://api.github.com/users/dalianaliu","html_url":"https://github.com/dalianaliu","followers_url":"https://api.github.com/users/dalianaliu/followers","following_url":"https://api.github.com/users/dalianaliu/following{/other_user}","gists_url":"https://api.github.com/users/dalianaliu/gists{/gist_id}","starred_url":"https://api.github.com/users/dalianaliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dalianaliu/subscriptions","organizations_url":"https://api.github.com/users/dalianaliu/orgs","repos_url":"https://api.github.com/users/dalianaliu/repos","events_url":"https://api.github.com/users/dalianaliu/events{/privacy}","received_events_url":"https://api.github.com/users/dalianaliu/received_events","type":"User","site_admin":false},"event":"added_to_project","commit_id":null,"commit_url":null,"created_at":"2022-07-27T16:31:28Z","project_card":{"id":84563766,"url":"https://api.github.com/projects/columns/cards/84563766","project_id":14599557,"project_url":"https://api.github.com/projects/14599557","column_name":"Needs triage"},"performed_via_github_app":null},{"id":7074506998,"node_id":"MCIPE_lADOCbx2hs42CZT9zwAAAAGlrGj2","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/7074506998","actor":{"login":"dalianaliu","id":33500844,"node_id":"MDQ6VXNlcjMzNTAwODQ0","avatar_url":"https://avatars.githubusercontent.com/u/33500844?v=4","gravatar_id":"","url":"https://api.github.com/users/dalianaliu","html_url":"https://github.com/dalianaliu","followers_url":"https://api.github.com/users/dalianaliu/followers","following_url":"https://api.github.com/users/dalianaliu/following{/other_user}","gists_url":"https://api.github.com/users/dalianaliu/gists{/gist_id}","starred_url":"https://api.github.com/users/dalianaliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dalianaliu/subscriptions","organizations_url":"https://api.github.com/users/dalianaliu/orgs","repos_url":"https://api.github.com/users/dalianaliu/repos","events_url":"https://api.github.com/users/dalianaliu/events{/privacy}","received_events_url":"https://api.github.com/users/dalianaliu/received_events","type":"User","site_admin":false},"event":"moved_columns_in_project","commit_id":null,"commit_url":null,"created_at":"2022-07-27T16:31:39Z","project_card":{"id":84563766,"url":"https://api.github.com/projects/columns/cards/84563766","project_id":14599557,"project_url":"https://api.github.com/projects/14599557","column_name":">3 months","previous_column_name":"Needs triage"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/1198618019","html_url":"https://github.com/ludwig-ai/ludwig/issues/1188#issuecomment-1198618019","issue_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1188","id":1198618019,"node_id":"IC_kwDOCbx2hs5HcXWj","user":{"login":"connor-mccorm","id":97468934,"node_id":"U_kgDOBc9CBg","avatar_url":"https://avatars.githubusercontent.com/u/97468934?v=4","gravatar_id":"","url":"https://api.github.com/users/connor-mccorm","html_url":"https://github.com/connor-mccorm","followers_url":"https://api.github.com/users/connor-mccorm/followers","following_url":"https://api.github.com/users/connor-mccorm/following{/other_user}","gists_url":"https://api.github.com/users/connor-mccorm/gists{/gist_id}","starred_url":"https://api.github.com/users/connor-mccorm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connor-mccorm/subscriptions","organizations_url":"https://api.github.com/users/connor-mccorm/orgs","repos_url":"https://api.github.com/users/connor-mccorm/repos","events_url":"https://api.github.com/users/connor-mccorm/events{/privacy}","received_events_url":"https://api.github.com/users/connor-mccorm/received_events","type":"User","site_admin":false},"created_at":"2022-07-28T20:49:24Z","updated_at":"2022-07-28T20:49:24Z","author_association":"COLLABORATOR","body":"Closing this issue since original issue is resolved.","reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/comments/1198618019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"connor-mccorm","id":97468934,"node_id":"U_kgDOBc9CBg","avatar_url":"https://avatars.githubusercontent.com/u/97468934?v=4","gravatar_id":"","url":"https://api.github.com/users/connor-mccorm","html_url":"https://github.com/connor-mccorm","followers_url":"https://api.github.com/users/connor-mccorm/followers","following_url":"https://api.github.com/users/connor-mccorm/following{/other_user}","gists_url":"https://api.github.com/users/connor-mccorm/gists{/gist_id}","starred_url":"https://api.github.com/users/connor-mccorm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connor-mccorm/subscriptions","organizations_url":"https://api.github.com/users/connor-mccorm/orgs","repos_url":"https://api.github.com/users/connor-mccorm/repos","events_url":"https://api.github.com/users/connor-mccorm/events{/privacy}","received_events_url":"https://api.github.com/users/connor-mccorm/received_events","type":"User","site_admin":false}},{"id":7084814294,"node_id":"CE_lADOCbx2hs42CZT9zwAAAAGmSa_W","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/7084814294","actor":{"login":"connor-mccorm","id":97468934,"node_id":"U_kgDOBc9CBg","avatar_url":"https://avatars.githubusercontent.com/u/97468934?v=4","gravatar_id":"","url":"https://api.github.com/users/connor-mccorm","html_url":"https://github.com/connor-mccorm","followers_url":"https://api.github.com/users/connor-mccorm/followers","following_url":"https://api.github.com/users/connor-mccorm/following{/other_user}","gists_url":"https://api.github.com/users/connor-mccorm/gists{/gist_id}","starred_url":"https://api.github.com/users/connor-mccorm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connor-mccorm/subscriptions","organizations_url":"https://api.github.com/users/connor-mccorm/orgs","repos_url":"https://api.github.com/users/connor-mccorm/repos","events_url":"https://api.github.com/users/connor-mccorm/events{/privacy}","received_events_url":"https://api.github.com/users/connor-mccorm/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-07-28T20:49:24Z","state_reason":null,"performed_via_github_app":null},{"id":7084814407,"node_id":"MCIPE_lADOCbx2hs42CZT9zwAAAAGmSbBH","url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/events/7084814407","actor":{"login":"connor-mccorm","id":97468934,"node_id":"U_kgDOBc9CBg","avatar_url":"https://avatars.githubusercontent.com/u/97468934?v=4","gravatar_id":"","url":"https://api.github.com/users/connor-mccorm","html_url":"https://github.com/connor-mccorm","followers_url":"https://api.github.com/users/connor-mccorm/followers","following_url":"https://api.github.com/users/connor-mccorm/following{/other_user}","gists_url":"https://api.github.com/users/connor-mccorm/gists{/gist_id}","starred_url":"https://api.github.com/users/connor-mccorm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connor-mccorm/subscriptions","organizations_url":"https://api.github.com/users/connor-mccorm/orgs","repos_url":"https://api.github.com/users/connor-mccorm/repos","events_url":"https://api.github.com/users/connor-mccorm/events{/privacy}","received_events_url":"https://api.github.com/users/connor-mccorm/received_events","type":"User","site_admin":false},"event":"moved_columns_in_project","commit_id":null,"commit_url":null,"created_at":"2022-07-28T20:49:25Z","project_card":{"id":84563766,"url":"https://api.github.com/projects/columns/cards/84563766","project_id":14599557,"project_url":"https://api.github.com/projects/14599557","column_name":"Resolved","previous_column_name":">3 months"},"performed_via_github_app":null}]