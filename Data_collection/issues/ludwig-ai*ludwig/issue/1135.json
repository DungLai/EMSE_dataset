{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1135","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1135/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1135/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1135/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/1135","id":842837748,"node_id":"MDU6SXNzdWU4NDI4Mzc3NDg=","number":1135,"title":"The `self.reshape_features` is empty when working on petfinder dataset","user":{"login":"zhisbug","id":1654062,"node_id":"MDQ6VXNlcjE2NTQwNjI=","avatar_url":"https://avatars.githubusercontent.com/u/1654062?v=4","gravatar_id":"","url":"https://api.github.com/users/zhisbug","html_url":"https://github.com/zhisbug","followers_url":"https://api.github.com/users/zhisbug/followers","following_url":"https://api.github.com/users/zhisbug/following{/other_user}","gists_url":"https://api.github.com/users/zhisbug/gists{/gist_id}","starred_url":"https://api.github.com/users/zhisbug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhisbug/subscriptions","organizations_url":"https://api.github.com/users/zhisbug/orgs","repos_url":"https://api.github.com/users/zhisbug/repos","events_url":"https://api.github.com/users/zhisbug/events{/privacy}","received_events_url":"https://api.github.com/users/zhisbug/received_events","type":"User","site_admin":false},"labels":[{"id":1174068775,"node_id":"MDU6TGFiZWwxMTc0MDY4Nzc1","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/waiting%20for%20answer","name":"waiting for answer","color":"fff36b","default":false,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-03-28T21:40:39Z","updated_at":"2021-04-01T18:19:05Z","closed_at":"2021-04-01T18:19:05Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\nThis issue is related with #1134.\r\n\r\nI tried to replace the `reshape_features` with `features` to workaround the bug caused by `IteratableBatcher` (see #1134  for the detailed descriptions about the issue), but when working on the petfinder dataset, the `self.reshapes_features` is empty after applying the following code between L35-L39 of [parquet.py](https://github.com/ludwig-ai/ludwig/blob/master/ludwig/data/dataset/parquet.py#L35):\r\n\r\n```python\r\nself.reshape_features = {\r\n    feature[PROC_COLUMN]: list((-1, *training_set_metadata[feature[NAME]]['reshape']))\r\n    for feature in features\r\n    if 'reshape' in training_set_metadata[feature[NAME]]\r\n}\r\n```\r\n\r\n**To Reproduce**\r\nUse my experiment script on petfinder dataset here: https://github.com/zhisbug/ludwig-petfinder/blob/master/petfinder-adoption-prediction/train.py\r\n\r\nTry to print `self.reshaped_features` and you will see it is an empty dict.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: [e.g. iOS]\r\n - Version [e.g. 22]\r\n- Python version\r\n- Ludwig version\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","closed_by":{"login":"zhisbug","id":1654062,"node_id":"MDQ6VXNlcjE2NTQwNjI=","avatar_url":"https://avatars.githubusercontent.com/u/1654062?v=4","gravatar_id":"","url":"https://api.github.com/users/zhisbug","html_url":"https://github.com/zhisbug","followers_url":"https://api.github.com/users/zhisbug/followers","following_url":"https://api.github.com/users/zhisbug/following{/other_user}","gists_url":"https://api.github.com/users/zhisbug/gists{/gist_id}","starred_url":"https://api.github.com/users/zhisbug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhisbug/subscriptions","organizations_url":"https://api.github.com/users/zhisbug/orgs","repos_url":"https://api.github.com/users/zhisbug/repos","events_url":"https://api.github.com/users/zhisbug/events{/privacy}","received_events_url":"https://api.github.com/users/zhisbug/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1135/timeline","performed_via_github_app":null,"state_reason":"completed"}