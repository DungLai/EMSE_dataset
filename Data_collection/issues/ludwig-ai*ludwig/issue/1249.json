{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1249","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1249/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1249/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1249/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/1249","id":957629493,"node_id":"MDU6SXNzdWU5NTc2Mjk0OTM=","number":1249,"title":"mpirun/horovod not using multiple GPUs","user":{"login":"Losbal","id":64136537,"node_id":"MDQ6VXNlcjY0MTM2NTM3","avatar_url":"https://avatars.githubusercontent.com/u/64136537?v=4","gravatar_id":"","url":"https://api.github.com/users/Losbal","html_url":"https://github.com/Losbal","followers_url":"https://api.github.com/users/Losbal/followers","following_url":"https://api.github.com/users/Losbal/following{/other_user}","gists_url":"https://api.github.com/users/Losbal/gists{/gist_id}","starred_url":"https://api.github.com/users/Losbal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Losbal/subscriptions","organizations_url":"https://api.github.com/users/Losbal/orgs","repos_url":"https://api.github.com/users/Losbal/repos","events_url":"https://api.github.com/users/Losbal/events{/privacy}","received_events_url":"https://api.github.com/users/Losbal/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"tgaddair","id":1742912,"node_id":"MDQ6VXNlcjE3NDI5MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1742912?v=4","gravatar_id":"","url":"https://api.github.com/users/tgaddair","html_url":"https://github.com/tgaddair","followers_url":"https://api.github.com/users/tgaddair/followers","following_url":"https://api.github.com/users/tgaddair/following{/other_user}","gists_url":"https://api.github.com/users/tgaddair/gists{/gist_id}","starred_url":"https://api.github.com/users/tgaddair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgaddair/subscriptions","organizations_url":"https://api.github.com/users/tgaddair/orgs","repos_url":"https://api.github.com/users/tgaddair/repos","events_url":"https://api.github.com/users/tgaddair/events{/privacy}","received_events_url":"https://api.github.com/users/tgaddair/received_events","type":"User","site_admin":false},"assignees":[{"login":"tgaddair","id":1742912,"node_id":"MDQ6VXNlcjE3NDI5MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1742912?v=4","gravatar_id":"","url":"https://api.github.com/users/tgaddair","html_url":"https://github.com/tgaddair","followers_url":"https://api.github.com/users/tgaddair/followers","following_url":"https://api.github.com/users/tgaddair/following{/other_user}","gists_url":"https://api.github.com/users/tgaddair/gists{/gist_id}","starred_url":"https://api.github.com/users/tgaddair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgaddair/subscriptions","organizations_url":"https://api.github.com/users/tgaddair/orgs","repos_url":"https://api.github.com/users/tgaddair/repos","events_url":"https://api.github.com/users/tgaddair/events{/privacy}","received_events_url":"https://api.github.com/users/tgaddair/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-08-02T00:31:17Z","updated_at":"2021-08-02T17:40:08Z","closed_at":"2021-08-02T01:46:08Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to run an experiment via the CLI on a single node of a remote HPC cluster with 4 Tesla K80 GPUs, but running nvidia-smi shows that only of the GPUs is actually being utilized, even though I do see 4 PIDs listed for each of the GPUs in the list of processes. I am aware of previous issues with Horovod -- namely [https://github.com/ludwig-ai/ludwig/issues/143](https://github.com/ludwig-ai/ludwig/issues/143) -- but I really thought the command below would check all the boxes, including the instructions to also run mpirun:\r\n\r\n`mpirun -np 4 --oversubscribe -bind-to none -map-by slot -x LD_LIBRARY_PATH -x PATH ludwig experiment --dataset /home/lfp/Master_Data.csv --data_format csv --experiment_name XP1 --eval_split test --model_name LTT_6 --config_file /home/lfp/LTT_6_config.yaml --output_directory /home/lfp/Out3/ -uh -g 0 1 2 3`\r\n\r\nI have also included backend: type: horovod in my config file. \r\n\r\nIn short, the experiment will run, albeit on only one GPU even though Tensorflow does recognize all 4 CUDA-enabled devices. Any help would be extremely appreciated and many thanks in advance!!\r\n\r\n","closed_by":{"login":"Losbal","id":64136537,"node_id":"MDQ6VXNlcjY0MTM2NTM3","avatar_url":"https://avatars.githubusercontent.com/u/64136537?v=4","gravatar_id":"","url":"https://api.github.com/users/Losbal","html_url":"https://github.com/Losbal","followers_url":"https://api.github.com/users/Losbal/followers","following_url":"https://api.github.com/users/Losbal/following{/other_user}","gists_url":"https://api.github.com/users/Losbal/gists{/gist_id}","starred_url":"https://api.github.com/users/Losbal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Losbal/subscriptions","organizations_url":"https://api.github.com/users/Losbal/orgs","repos_url":"https://api.github.com/users/Losbal/repos","events_url":"https://api.github.com/users/Losbal/events{/privacy}","received_events_url":"https://api.github.com/users/Losbal/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1249/timeline","performed_via_github_app":null,"state_reason":"completed"}