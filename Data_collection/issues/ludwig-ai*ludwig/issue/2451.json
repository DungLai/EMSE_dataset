{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2451","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2451/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2451/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2451/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/2451","id":1362330623,"node_id":"I_kwDOCbx2hs5RM4P_","number":2451,"title":"[tests] Ray nightly tests fail due to OOMs","user":{"login":"tgaddair","id":1742912,"node_id":"MDQ6VXNlcjE3NDI5MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1742912?v=4","gravatar_id":"","url":"https://api.github.com/users/tgaddair","html_url":"https://github.com/tgaddair","followers_url":"https://api.github.com/users/tgaddair/followers","following_url":"https://api.github.com/users/tgaddair/following{/other_user}","gists_url":"https://api.github.com/users/tgaddair/gists{/gist_id}","starred_url":"https://api.github.com/users/tgaddair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgaddair/subscriptions","organizations_url":"https://api.github.com/users/tgaddair/orgs","repos_url":"https://api.github.com/users/tgaddair/repos","events_url":"https://api.github.com/users/tgaddair/events{/privacy}","received_events_url":"https://api.github.com/users/tgaddair/received_events","type":"User","site_admin":false},"labels":[{"id":4500524094,"node_id":"LA_kwDOCbx2hs8AAAABDECMPg","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/tests","name":"tests","color":"B3B475","default":false,"description":"Issue with the tests"}],"state":"closed","locked":false,"assignee":{"login":"ShreyaR","id":5787923,"node_id":"MDQ6VXNlcjU3ODc5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/5787923?v=4","gravatar_id":"","url":"https://api.github.com/users/ShreyaR","html_url":"https://github.com/ShreyaR","followers_url":"https://api.github.com/users/ShreyaR/followers","following_url":"https://api.github.com/users/ShreyaR/following{/other_user}","gists_url":"https://api.github.com/users/ShreyaR/gists{/gist_id}","starred_url":"https://api.github.com/users/ShreyaR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShreyaR/subscriptions","organizations_url":"https://api.github.com/users/ShreyaR/orgs","repos_url":"https://api.github.com/users/ShreyaR/repos","events_url":"https://api.github.com/users/ShreyaR/events{/privacy}","received_events_url":"https://api.github.com/users/ShreyaR/received_events","type":"User","site_admin":false},"assignees":[{"login":"ShreyaR","id":5787923,"node_id":"MDQ6VXNlcjU3ODc5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/5787923?v=4","gravatar_id":"","url":"https://api.github.com/users/ShreyaR","html_url":"https://github.com/ShreyaR","followers_url":"https://api.github.com/users/ShreyaR/followers","following_url":"https://api.github.com/users/ShreyaR/following{/other_user}","gists_url":"https://api.github.com/users/ShreyaR/gists{/gist_id}","starred_url":"https://api.github.com/users/ShreyaR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShreyaR/subscriptions","organizations_url":"https://api.github.com/users/ShreyaR/orgs","repos_url":"https://api.github.com/users/ShreyaR/repos","events_url":"https://api.github.com/users/ShreyaR/events{/privacy}","received_events_url":"https://api.github.com/users/ShreyaR/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-09-05T17:41:46Z","updated_at":"2022-10-12T23:36:17Z","closed_at":"2022-10-12T23:36:17Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"Ray nightly tests are failing for the Horovod + Hyperopt tests due to OOMs. These tests are the longest running and most resource intensive (7 CPUs per Ray cluster), so it is not surprising that if any tests would fail due to resource issues, these would be the ones.\r\n\r\n```\r\n(run_experiment_trial pid=23448) \r\nEvaluation test :   0%|          | 0/1 [00:00<?, ?it/s]\r\n(run_experiment_trial pid=23448) \r\nEvaluation test : 100%|██████████| 1/1 [00:00<00:00,  9.14it/s]\r\nEvaluation test : 100%|██████████| 1/1 [00:00<00:00,  8.19it/s]\r\n(PipelineSplitExecutorCoordinator pid=23995) \r\nStage 0: : 6it [00:22,  1.72s/it]\r\n(raylet) [2022-09-04 16:20:51,029 E 17085 17125] (raylet) node_manager.cc:2963: System memory low at node with IP 10.1.0.153. Used memory (6.13GB) / total capacity (6.78GB) (0.904609) exceeds threshold 0.9, killing latest task with name _map_block_nosplit() and task ID ba3bc8179d50d2f3d8870fc35f6238456f07268601000000 to avoid running out of memory.\r\n(raylet) This may indicate a memory leak in a task or actor, or that too many tasks are running in parallel.\r\n(raylet) To find the highest memory consumers, use `ray logs raylet.out -ip 10.1.0.153`.\r\n(raylet) Consider provisioning more memory on this node or reducing task parallelism by requesting more CPUs per task. To adjust the eviction threshold, set the environment variable `RAY_memory_usage_threshold_fraction` when starting Ray. To disable worker eviction, set the environment variable `RAY_memory_monitor_interval_ms` to zero.\r\n```\r\n\r\nNote the issues do not repro locally, where we have more memory.\r\n\r\nhttps://github.com/ludwig-ai/ludwig/runs/8177672264?check_suite_focus=true#step:10:7153","closed_by":{"login":"arnavgarg1","id":106701836,"node_id":"U_kgDOBlwkDA","avatar_url":"https://avatars.githubusercontent.com/u/106701836?v=4","gravatar_id":"","url":"https://api.github.com/users/arnavgarg1","html_url":"https://github.com/arnavgarg1","followers_url":"https://api.github.com/users/arnavgarg1/followers","following_url":"https://api.github.com/users/arnavgarg1/following{/other_user}","gists_url":"https://api.github.com/users/arnavgarg1/gists{/gist_id}","starred_url":"https://api.github.com/users/arnavgarg1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arnavgarg1/subscriptions","organizations_url":"https://api.github.com/users/arnavgarg1/orgs","repos_url":"https://api.github.com/users/arnavgarg1/repos","events_url":"https://api.github.com/users/arnavgarg1/events{/privacy}","received_events_url":"https://api.github.com/users/arnavgarg1/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2451/timeline","performed_via_github_app":null,"state_reason":"completed"}