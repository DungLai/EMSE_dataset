{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2279","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2279/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2279/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2279/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/2279","id":1305180271,"node_id":"I_kwDOCbx2hs5Ny3hv","number":2279,"title":"\"Error parsing date...\"","user":{"login":"noahlh","id":113276,"node_id":"MDQ6VXNlcjExMzI3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/113276?v=4","gravatar_id":"","url":"https://api.github.com/users/noahlh","html_url":"https://github.com/noahlh","followers_url":"https://api.github.com/users/noahlh/followers","following_url":"https://api.github.com/users/noahlh/following{/other_user}","gists_url":"https://api.github.com/users/noahlh/gists{/gist_id}","starred_url":"https://api.github.com/users/noahlh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noahlh/subscriptions","organizations_url":"https://api.github.com/users/noahlh/orgs","repos_url":"https://api.github.com/users/noahlh/repos","events_url":"https://api.github.com/users/noahlh/events{/privacy}","received_events_url":"https://api.github.com/users/noahlh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"justinxzhao","id":3459541,"node_id":"MDQ6VXNlcjM0NTk1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/3459541?v=4","gravatar_id":"","url":"https://api.github.com/users/justinxzhao","html_url":"https://github.com/justinxzhao","followers_url":"https://api.github.com/users/justinxzhao/followers","following_url":"https://api.github.com/users/justinxzhao/following{/other_user}","gists_url":"https://api.github.com/users/justinxzhao/gists{/gist_id}","starred_url":"https://api.github.com/users/justinxzhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinxzhao/subscriptions","organizations_url":"https://api.github.com/users/justinxzhao/orgs","repos_url":"https://api.github.com/users/justinxzhao/repos","events_url":"https://api.github.com/users/justinxzhao/events{/privacy}","received_events_url":"https://api.github.com/users/justinxzhao/received_events","type":"User","site_admin":false},"assignees":[{"login":"justinxzhao","id":3459541,"node_id":"MDQ6VXNlcjM0NTk1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/3459541?v=4","gravatar_id":"","url":"https://api.github.com/users/justinxzhao","html_url":"https://github.com/justinxzhao","followers_url":"https://api.github.com/users/justinxzhao/followers","following_url":"https://api.github.com/users/justinxzhao/following{/other_user}","gists_url":"https://api.github.com/users/justinxzhao/gists{/gist_id}","starred_url":"https://api.github.com/users/justinxzhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinxzhao/subscriptions","organizations_url":"https://api.github.com/users/justinxzhao/orgs","repos_url":"https://api.github.com/users/justinxzhao/repos","events_url":"https://api.github.com/users/justinxzhao/events{/privacy}","received_events_url":"https://api.github.com/users/justinxzhao/received_events","type":"User","site_admin":false},{"login":"dalianaliu","id":33500844,"node_id":"MDQ6VXNlcjMzNTAwODQ0","avatar_url":"https://avatars.githubusercontent.com/u/33500844?v=4","gravatar_id":"","url":"https://api.github.com/users/dalianaliu","html_url":"https://github.com/dalianaliu","followers_url":"https://api.github.com/users/dalianaliu/followers","following_url":"https://api.github.com/users/dalianaliu/following{/other_user}","gists_url":"https://api.github.com/users/dalianaliu/gists{/gist_id}","starred_url":"https://api.github.com/users/dalianaliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dalianaliu/subscriptions","organizations_url":"https://api.github.com/users/dalianaliu/orgs","repos_url":"https://api.github.com/users/dalianaliu/repos","events_url":"https://api.github.com/users/dalianaliu/events{/privacy}","received_events_url":"https://api.github.com/users/dalianaliu/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2022-07-14T19:04:52Z","updated_at":"2022-07-15T04:26:39Z","closed_at":"2022-07-15T04:22:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nI'm attempting to train a model from data in a large JSON array.  An example of the relevant slice looks like:\r\n\r\n```json\r\n[\r\n  {\r\n    \"date\": \"1941-03-01\",\r\n    \"foo\": \"foo\"\r\n    \"bar\": \"bar\"\r\n  },\r\n  {\r\n    \"date\": \"2001-05-15\",\r\n    \"foo\": \"foo\"\r\n    \"bar\": \"bar\"\r\n  }\r\n]\r\n```\r\n\r\nWhen I run the following command:\r\n\r\n`ludwig train --dataset input.json --data_format json -c config.yaml`\r\n\r\nAfter a few moments, I get the following output for every element of the array:\r\n\r\n```\r\nError parsing date: 1941-03-01 00:00:00 with error strptime() argument 1 must be str, not Timestamp Please provide a datetime format that parses it in the preprocessing section of the date feature in the config. The preprocessing fill in value will be used.For more details: https://ludwig-ai.github.io/ludwig-docs/0.5/configuration/features/date_features/\r\n\r\nError parsing date: 2001-05-15 00:00:00 with error strptime() argument 1 must be str, not Timestamp Please provide a datetime format that parses it in the preprocessing section of the date feature in the config. The preprocessing fill in value will be used.For more details: https://ludwig-ai.github.io/ludwig-docs/0.5/configuration/features/date_features/\r\n```\r\n\r\nI've tried this with several config options in `config.yaml`, including each of the following:\r\n\r\n```yaml\r\ninput_features:\r\n  - name: date\r\n    type: date\r\n    preprocessing:\r\n      datetime_format: \"%Y-%m-%d %H:%M:%S\"\r\n```\r\n\r\n```yaml\r\ninput_features:\r\n  - name: date\r\n    type: date\r\n    preprocessing:\r\n      datetime_format: \"%Y-%m-%d\"\r\n```\r\n\r\n```yaml\r\ninput_features:\r\n  - name: date\r\n    type: date\r\n```\r\n\r\nAll 3 result in the same error message.\r\n\r\nIt seems to me what's happening is that the date string is being parsed too soon in the process -- it's being turned into a Timestamp object BEFORE being fed into strptime(), hence the error.\r\n\r\nI'm not familiar enough with the codebase to know if this is a bug, an issue with JSON as the input source, or something else, but some guidance would be appreciated!\r\n\r\n**Expected behavior**\r\nThe date should parse according to the provided format.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n- OS: MacOS\r\n- Version 12.3.1\r\n- Python version 3.10.5\r\n- Ludwig version 0.5.4","closed_by":{"login":"justinxzhao","id":3459541,"node_id":"MDQ6VXNlcjM0NTk1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/3459541?v=4","gravatar_id":"","url":"https://api.github.com/users/justinxzhao","html_url":"https://github.com/justinxzhao","followers_url":"https://api.github.com/users/justinxzhao/followers","following_url":"https://api.github.com/users/justinxzhao/following{/other_user}","gists_url":"https://api.github.com/users/justinxzhao/gists{/gist_id}","starred_url":"https://api.github.com/users/justinxzhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinxzhao/subscriptions","organizations_url":"https://api.github.com/users/justinxzhao/orgs","repos_url":"https://api.github.com/users/justinxzhao/repos","events_url":"https://api.github.com/users/justinxzhao/events{/privacy}","received_events_url":"https://api.github.com/users/justinxzhao/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2279/timeline","performed_via_github_app":null,"state_reason":"completed"}