{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/965","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/965/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/965/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/965/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/965","id":726366353,"node_id":"MDU6SXNzdWU3MjYzNjYzNTM=","number":965,"title":"Assertion Error while running hyperopt notebook","user":{"login":"Juggernaut1997","id":38181043,"node_id":"MDQ6VXNlcjM4MTgxMDQz","avatar_url":"https://avatars.githubusercontent.com/u/38181043?v=4","gravatar_id":"","url":"https://api.github.com/users/Juggernaut1997","html_url":"https://github.com/Juggernaut1997","followers_url":"https://api.github.com/users/Juggernaut1997/followers","following_url":"https://api.github.com/users/Juggernaut1997/following{/other_user}","gists_url":"https://api.github.com/users/Juggernaut1997/gists{/gist_id}","starred_url":"https://api.github.com/users/Juggernaut1997/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Juggernaut1997/subscriptions","organizations_url":"https://api.github.com/users/Juggernaut1997/orgs","repos_url":"https://api.github.com/users/Juggernaut1997/repos","events_url":"https://api.github.com/users/Juggernaut1997/events{/privacy}","received_events_url":"https://api.github.com/users/Juggernaut1997/received_events","type":"User","site_admin":false},"labels":[{"id":1174068769,"node_id":"MDU6TGFiZWwxMTc0MDY4NzY5","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2020-10-21T10:52:00Z","updated_at":"2020-10-27T23:41:21Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, From last couple of weeks I am exploring Ludwig. While exploring I came across the Hyper-parameter optimization visualization done in Ludwig. So, I forked the repo and start looking into it. While doing that I got an error related to multiprocessing pool which I am not sure what it is. So I am mentioning the error below, please look into it and guide me what's causing this error and how I can resolve it. The notebook I am using is [**hyperopt notebook**](https://github.com/uber/ludwig/blob/master/examples/hyperopt/model_hyperopt_example.ipynb).\r\n> ---------------------------------------------------------------------------\r\n> RemoteTraceback                           Traceback (most recent call last)\r\n> RemoteTraceback: \r\n> \"\"\"\r\n> Traceback (most recent call last):\r\n>   File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 119, in worker\r\n>     result = (True, func(*args, **kwds))\r\n>   File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 44, in mapstar\r\n>     return list(map(*args))\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/hyperopt/execution.py\", line 202, in _run_experiment\r\n>     train_stats, eval_stats = run_experiment(**hyperopt_dict)\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/hyperopt/execution.py\", line 703, in run_experiment\r\n>     debug=debug,\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/api.py\", line 1035, in experiment\r\n>     debug=debug,\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/api.py\", line 397, in train\r\n>     random_seed=random_seed\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/data/preprocessing.py\", line 1208, in preprocess_for_training\r\n>     random_seed=random_seed\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/data/preprocessing.py\", line 169, in preprocess_for_training\r\n>     random_seed=random_seed\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/data/preprocessing.py\", line 1423, in _preprocess_df_for_training\r\n>     random_seed=random_seed\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/data/preprocessing.py\", line 925, in build_dataset\r\n>     metadata\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/data/preprocessing.py\", line 1014, in build_data\r\n>     preprocessing_parameters\r\n>   File \"/usr/local/lib/python3.6/dist-packages/ludwig/features/image_feature.py\", line 298, in add_feature_data\r\n>     with Pool(num_processes) as pool:\r\n>   File \"/usr/lib/python3.6/multiprocessing/context.py\", line 119, in Pool\r\n>     context=self.get_context())\r\n>   File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 174, in __init__\r\n>     self._repopulate_pool()\r\n>   File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 239, in _repopulate_pool\r\n>     w.start()\r\n>   File \"/usr/lib/python3.6/multiprocessing/process.py\", line 103, in start\r\n>     'daemonic processes are not allowed to have children'\r\n> AssertionError: daemonic processes are not allowed to have children\r\n> \"\"\"\r\n> \r\n> The above exception was the direct cause of the following exception:\r\n> \r\n> AssertionError                            Traceback (most recent call last)\r\n> <ipython-input-33-bc6d50616684> in <module>()\r\n>      10     config,\r\n>      11     dataset=train_df.sample(4000, random_state=42),\r\n> ---> 12     output_directory='results_random_parallel'\r\n>      13 )\r\n> \r\n> 3 frames\r\n> /usr/local/lib/python3.6/dist-packages/ludwig/hyperopt/run.py in hyperopt(config, dataset, training_set, validation_set, test_set, training_set_metadata, data_format, experiment_name, model_name, skip_save_training_description, skip_save_training_statistics, skip_save_model, skip_save_progress, skip_save_log, skip_save_processed_input, skip_save_unprocessed_output, skip_save_predictions, skip_save_eval_stats, skip_save_hyperopt_statistics, output_directory, gpus, gpu_memory_limit, allow_parallel_threads, use_horovod, random_seed, debug, **kwargs)\r\n>     289         random_seed=random_seed,\r\n>     290         debug=debug,\r\n> --> 291         **kwargs\r\n>     292     )\r\n>     293 \r\n> \r\n> /usr/local/lib/python3.6/dist-packages/ludwig/hyperopt/execution.py in execute(self, config, dataset, training_set, validation_set, test_set, training_set_metadata, data_format, experiment_name, model_name, skip_save_training_description, skip_save_training_statistics, skip_save_model, skip_save_progress, skip_save_log, skip_save_processed_input, skip_save_unprocessed_output, skip_save_predictions, skip_save_eval_stats, output_directory, gpus, gpu_memory_limit, allow_parallel_threads, use_horovod, random_seed, debug, **kwargs)\r\n>     425                 else:\r\n>     426                     batch_results = pool.map(self._run_experiment,\r\n> --> 427                                              hyperopt_parameters)\r\n>     428 \r\n>     429                 self.hyperopt_sampler.update_batch(\r\n> \r\n> /usr/lib/python3.6/multiprocessing/pool.py in map(self, func, iterable, chunksize)\r\n>     264         in a list that is returned.\r\n>     265         '''\r\n> --> 266         return self._map_async(func, iterable, mapstar, chunksize).get()\r\n>     267 \r\n>     268     def starmap(self, func, iterable, chunksize=None):\r\n> \r\n> /usr/lib/python3.6/multiprocessing/pool.py in get(self, timeout)\r\n>     642             return self._value\r\n>     643         else:\r\n> --> 644             raise self._value\r\n>     645 \r\n>     646     def _set(self, i, obj):\r\n> \r\n> AssertionError: daemonic processes are not allowed to have children","closed_by":null,"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/965/timeline","performed_via_github_app":null,"state_reason":null}