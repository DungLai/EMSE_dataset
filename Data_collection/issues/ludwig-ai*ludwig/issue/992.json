{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/992","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/992/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/992/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/992/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/992","id":735664069,"node_id":"MDU6SXNzdWU3MzU2NjQwNjk=","number":992,"title":"Large dataset causes error in hdf5 generation during training","user":{"login":"carlogrisetti","id":4464640,"node_id":"MDQ6VXNlcjQ0NjQ2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4464640?v=4","gravatar_id":"","url":"https://api.github.com/users/carlogrisetti","html_url":"https://github.com/carlogrisetti","followers_url":"https://api.github.com/users/carlogrisetti/followers","following_url":"https://api.github.com/users/carlogrisetti/following{/other_user}","gists_url":"https://api.github.com/users/carlogrisetti/gists{/gist_id}","starred_url":"https://api.github.com/users/carlogrisetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlogrisetti/subscriptions","organizations_url":"https://api.github.com/users/carlogrisetti/orgs","repos_url":"https://api.github.com/users/carlogrisetti/repos","events_url":"https://api.github.com/users/carlogrisetti/events{/privacy}","received_events_url":"https://api.github.com/users/carlogrisetti/received_events","type":"User","site_admin":false},"labels":[{"id":1174068776,"node_id":"MDU6TGFiZWwxMTc0MDY4Nzc2","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2020-11-03T22:02:36Z","updated_at":"2022-05-30T20:58:26Z","closed_at":"2020-11-07T21:55:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"While training a big dataset (25GB unprocessed, I suppose around 30GB in hdf5 format), during the preprocessing phase when hdf5 generation should occur, Ludwig allocates some memory, peaks (well below any resource limit) and then spits out this message:\r\n[CLI-output-1.txt](https://github.com/uber/ludwig/files/5484242/CLI-output-1.txt)\r\nOne CTRL+C after, this gets out\r\n[CLI-output-2.txt](https://github.com/uber/ludwig/files/5484268/CLI-output-2.txt)\r\nMemory goes down, then ramps up with the same pattern as before, like it tries to re-do the same data load.\r\nOne CTRL+C after, this gets out\r\n[CLI-output-3.txt](https://github.com/uber/ludwig/files/5484270/CLI-output-3.txt)\r\nMemory slowly ramps up again in the same fashion, reaches a peak, and the same happens again\r\nCTRL+C and...\r\n[CLI-output-4.txt](https://github.com/uber/ludwig/files/5484293/CLI-output-4.txt)\r\nCTRL+C and...\r\n[CLI-output-5.txt](https://github.com/uber/ludwig/files/5484304/CLI-output-5.txt)\r\n\r\nAfter this last one, each CTRL+C returns the same exact trace as the last one. The only way to get out of this is to terminate the shell, with an increasing SpawnPoolWorker-NN number\r\n\r\nThis is the model I'm using: [model_definition_v1.yaml.txt](https://github.com/uber/ludwig/files/5484203/model_definition_v1.yaml.txt)\r\n\r\nI also tried downgrading to tensorflow 2.2.0 and upgrading to python 3.8.6. All the traces up here have been done with tensorflow 2.3.1, python 3.8.6 and the latest ludwig from master","closed_by":{"login":"tgaddair","id":1742912,"node_id":"MDQ6VXNlcjE3NDI5MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1742912?v=4","gravatar_id":"","url":"https://api.github.com/users/tgaddair","html_url":"https://github.com/tgaddair","followers_url":"https://api.github.com/users/tgaddair/followers","following_url":"https://api.github.com/users/tgaddair/following{/other_user}","gists_url":"https://api.github.com/users/tgaddair/gists{/gist_id}","starred_url":"https://api.github.com/users/tgaddair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgaddair/subscriptions","organizations_url":"https://api.github.com/users/tgaddair/orgs","repos_url":"https://api.github.com/users/tgaddair/repos","events_url":"https://api.github.com/users/tgaddair/events{/privacy}","received_events_url":"https://api.github.com/users/tgaddair/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/992/timeline","performed_via_github_app":null,"state_reason":"completed"}