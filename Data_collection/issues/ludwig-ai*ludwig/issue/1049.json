{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1049","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1049/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1049/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1049/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/1049","id":760531676,"node_id":"MDU6SXNzdWU3NjA1MzE2NzY=","number":1049,"title":"Can't split set features by comma","user":{"login":"anakin87","id":44616784,"node_id":"MDQ6VXNlcjQ0NjE2Nzg0","avatar_url":"https://avatars.githubusercontent.com/u/44616784?v=4","gravatar_id":"","url":"https://api.github.com/users/anakin87","html_url":"https://github.com/anakin87","followers_url":"https://api.github.com/users/anakin87/followers","following_url":"https://api.github.com/users/anakin87/following{/other_user}","gists_url":"https://api.github.com/users/anakin87/gists{/gist_id}","starred_url":"https://api.github.com/users/anakin87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anakin87/subscriptions","organizations_url":"https://api.github.com/users/anakin87/orgs","repos_url":"https://api.github.com/users/anakin87/repos","events_url":"https://api.github.com/users/anakin87/events{/privacy}","received_events_url":"https://api.github.com/users/anakin87/received_events","type":"User","site_admin":false},"labels":[{"id":1174068775,"node_id":"MDU6TGFiZWwxMTc0MDY4Nzc1","url":"https://api.github.com/repos/ludwig-ai/ludwig/labels/waiting%20for%20answer","name":"waiting for answer","color":"fff36b","default":false,"description":"Further information is requested"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-12-09T17:37:25Z","updated_at":"2020-12-10T17:01:06Z","closed_at":"2020-12-10T17:01:06Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nIn python, while defining set feature (with format='comma'), can't split it by comma.\r\n\r\n**To Reproduce**\r\n\r\n    import pandas as pd\r\n    df=pd.DataFrame({'feat': ['di maio, salvini', 'conte, della loggia'], 'target': [0, 1]})\r\n\r\n    import ludwig\r\n    from ludwig.api import LudwigModel\r\n    model_definition={'input_features':[ {'name':'feat','type':'set', 'format':'comma'}],\r\n                  'output_features':[{'name':'target','type':'binary'}],\r\n                  'training':{'learning_rate':0.01,\r\n                                  'batch_size': 10,\r\n                                  'epochs': 1000,\r\n                                  'early_stop': 5,\r\n                              'validation_measure':'loss','validation_field':'target'}}\r\n\r\n\r\n    model = LudwigModel(model_definition)\r\n\r\n    train_stats = model.train(df)\r\n\r\nObtained training_set_metadata.json is the following:\r\n\r\n    {\r\n        \"feat\": {\r\n            \"idx2str\": [\r\n                \"<PAD>\",\r\n                \"<UNK>\",\r\n                \"di\",\r\n                \"maio,\",\r\n                \"salvini\",\r\n                \"conte,\",\r\n                \"della\",\r\n                \"loggia\"\r\n            ],\r\n            \"max_set_size\": 3,\r\n            \"preprocessing\": {\r\n                \"computed_fill_value\": \"<UNK>\",\r\n                \"fill_value\": \"<UNK>\",\r\n                \"lowercase\": false,\r\n                \"missing_value_strategy\": \"fill_with_const\",\r\n                \"most_common\": 10000,\r\n                \"tokenizer\": \"space\"\r\n            },\r\n            \"str2freq\": {\r\n                \"<PAD>\": 0,\r\n                \"<UNK>\": 0,\r\n                \"conte,\": 1,\r\n                \"della\": 1,\r\n                \"di\": 1,\r\n                \"loggia\": 1,\r\n                \"maio,\": 1,\r\n                \"salvini\": 1\r\n            },\r\n            \"str2idx\": {\r\n                \"<PAD>\": 0,\r\n                \"<UNK>\": 1,\r\n                \"conte,\": 5,\r\n                \"della\": 6,\r\n                \"di\": 2,\r\n                \"loggia\": 7,\r\n                \"maio,\": 3,\r\n                \"salvini\": 4\r\n            },\r\n            \"vocab_size\": 8\r\n        },\r\n        \"target\": {\r\n            \"preprocessing\": {\r\n                \"computed_fill_value\": 0,\r\n                \"fill_value\": 0,\r\n                \"missing_value_strategy\": \"fill_with_const\"\r\n            }\r\n        }\r\n    }\r\n\r\nSet feature is splitted by space, not by comma.\r\n\r\n**Expected behavior**\r\nSet feature should be splitted by comma, when specified with format parameter.\r\n\r\n\r\n**Environment**\r\n\r\n- OS: Google Colab\r\n- Python version: 3.6.9\r\n- ludwig version: 0.3.1\r\n- pandas version: 1.1.4\r\n\r\n\r\nI tried to understand why this happen...\r\nCOMMA_SPLITTER works properly...","closed_by":{"login":"tgaddair","id":1742912,"node_id":"MDQ6VXNlcjE3NDI5MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1742912?v=4","gravatar_id":"","url":"https://api.github.com/users/tgaddair","html_url":"https://github.com/tgaddair","followers_url":"https://api.github.com/users/tgaddair/followers","following_url":"https://api.github.com/users/tgaddair/following{/other_user}","gists_url":"https://api.github.com/users/tgaddair/gists{/gist_id}","starred_url":"https://api.github.com/users/tgaddair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tgaddair/subscriptions","organizations_url":"https://api.github.com/users/tgaddair/orgs","repos_url":"https://api.github.com/users/tgaddair/repos","events_url":"https://api.github.com/users/tgaddair/events{/privacy}","received_events_url":"https://api.github.com/users/tgaddair/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/1049/timeline","performed_via_github_app":null,"state_reason":"completed"}