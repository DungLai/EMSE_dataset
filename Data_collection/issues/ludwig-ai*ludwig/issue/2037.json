{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2037","repository_url":"https://api.github.com/repos/ludwig-ai/ludwig","labels_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2037/labels{/name}","comments_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2037/comments","events_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2037/events","html_url":"https://github.com/ludwig-ai/ludwig/issues/2037","id":1237971396,"node_id":"I_kwDOCbx2hs5JyfHE","number":2037,"title":"Windows run MNIST example gets `AttributeError: module 'torch' has no attribute 'torch_version'`","user":{"login":"houluy","id":11565649,"node_id":"MDQ6VXNlcjExNTY1NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/11565649?v=4","gravatar_id":"","url":"https://api.github.com/users/houluy","html_url":"https://github.com/houluy","followers_url":"https://api.github.com/users/houluy/followers","following_url":"https://api.github.com/users/houluy/following{/other_user}","gists_url":"https://api.github.com/users/houluy/gists{/gist_id}","starred_url":"https://api.github.com/users/houluy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/houluy/subscriptions","organizations_url":"https://api.github.com/users/houluy/orgs","repos_url":"https://api.github.com/users/houluy/repos","events_url":"https://api.github.com/users/houluy/events{/privacy}","received_events_url":"https://api.github.com/users/houluy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-05-17T02:34:54Z","updated_at":"2022-05-19T05:18:44Z","closed_at":"2022-05-19T05:18:16Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nOn windows 10 platform, try to run MNIST example, got an error `AttributeError: module 'torch' has no attribute 'torch_version'`. The error is located at file `utils/tokenizers.py`, line 892, as follows,\r\n\r\n```python\r\n# utils/tokenizers.py\r\n892 if torch.torch_version.TorchVersion(torchtext.__version__) >= (0, 12, 0):\r\n```\r\n\r\n**To Reproduce**\r\nOn windows, use `pipenv install ludwig` to install the ludwig(v0.5). Then, use `ludwig datasets download mnist` to download the MNIST dataset and process. There are actually some issues related to Windows paths, but I've avoided them. After that, create the `config.yaml` to configure the model and training exactly same as shown in the official docs. Finally, when use 'ludwig train --datasets mnist_datasets.csv --config config.yaml`, I got the error above.\r\n\r\n`config.yaml` is exactly the same as in the official docs.\r\n```yaml\r\ninput_features:\r\n- name: image_path\r\n  type: image\r\n  encoder: stacked_cnn\r\n  conv_layers:\r\n    - num_filters: 32\r\n      filter_size: 3\r\n      pool_size: 2\r\n      pool_stride: 2\r\n    - num_filters: 64\r\n      filter_size: 3\r\n      pool_size: 2\r\n      pool_stride: 2\r\n      dropout: 0.4\r\n  fc_layers:\r\n    - output_size: 128\r\n      dropout: 0.4\r\n\r\noutput_features:\r\n  - name: label\r\n    type: category\r\n\r\ntrainer:\r\n  epochs: 5\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n- OS: Windows\r\n- Version: 10\r\n- Python version: 3.9\r\n- Ludwig version: 0.5\r\n\r\n**Additional context**\r\n\r\nFull Error Stack:\r\n```\r\nTraceback (most recent call last):\r\n  File \"D:\\Program Files\\Python39\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"D:\\Program Files\\Python39\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\Scripts\\ludwig.exe\\__main__.py\", line 7, in <module>\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\cli.py\", line 158, in main\r\n    CLI()\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\cli.py\", line 63, in __init__\r\n    getattr(self, args.command)()\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\cli.py\", line 66, in train\r\n    from ludwig import train\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\train.py\", line 23, in <module>\r\n    from ludwig.api import LudwigModel\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\api.py\", line 38, in <module>\r\n    from ludwig.backend import Backend, initialize_backend\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\backend\\__init__.py\", line 20, in <module>\r\n    from ludwig.backend.base import Backend, LocalBackend\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\backend\\base.py\", line 25, in <module>\r\n    from ludwig.models.ecd import ECD\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\models\\ecd.py\", line 10, in <module>\r\n    from ludwig.combiners.combiners import Combiner, get_combiner_class\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\combiners\\combiners.py\", line 25, in <module>\r\n    import ludwig.marshmallow.marshmallow_schema_utils as schema\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\marshmallow\\marshmallow_schema_utils.py\", line 8, in <module>\r\n    from ludwig.modules.reduction_modules import reduce_mode_registry\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\modules\\reduction_modules.py\", line 19, in <module>\r\n    from ludwig.modules.attention_modules import FeedForwardAttentionReducer\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\modules\\attention_modules.py\", line 21, in <module>\r\n    from ludwig.utils.torch_utils import get_activation, LudwigModule\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\utils\\torch_utils.py\", line 12, in <module>\r\n    from ludwig.utils.strings_utils import SpecialSymbol\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\utils\\strings_utils.py\", line 30, in <module>\r\n    from ludwig.utils.tokenizers import tokenizer_registry\r\n  File \"C:\\Users\\houlu\\.virtualenvs\\Ludwig-APhWrIpG\\lib\\site-packages\\ludwig\\utils\\tokenizers.py\", line 893, in <module>\r\n    if torch.torch_version.TorchVersion(torchtext.__version__) >= (0, 12, 0):\r\nAttributeError: module 'torch' has no attribute 'torch_version'\r\n```\r\n","closed_by":{"login":"houluy","id":11565649,"node_id":"MDQ6VXNlcjExNTY1NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/11565649?v=4","gravatar_id":"","url":"https://api.github.com/users/houluy","html_url":"https://github.com/houluy","followers_url":"https://api.github.com/users/houluy/followers","following_url":"https://api.github.com/users/houluy/following{/other_user}","gists_url":"https://api.github.com/users/houluy/gists{/gist_id}","starred_url":"https://api.github.com/users/houluy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/houluy/subscriptions","organizations_url":"https://api.github.com/users/houluy/orgs","repos_url":"https://api.github.com/users/houluy/repos","events_url":"https://api.github.com/users/houluy/events{/privacy}","received_events_url":"https://api.github.com/users/houluy/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2037/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ludwig-ai/ludwig/issues/2037/timeline","performed_via_github_app":null,"state_reason":"completed"}