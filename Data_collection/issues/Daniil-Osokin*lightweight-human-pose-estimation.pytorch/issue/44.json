{"url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44","repository_url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch","labels_url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44/labels{/name}","comments_url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44/comments","events_url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44/events","html_url":"https://github.com/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44","id":490642564,"node_id":"MDU6SXNzdWU0OTA2NDI1NjQ=","number":44,"title":"Why set person mask = 0 ?","user":{"login":"Shuai-Xie","id":18352713,"node_id":"MDQ6VXNlcjE4MzUyNzEz","avatar_url":"https://avatars.githubusercontent.com/u/18352713?v=4","gravatar_id":"","url":"https://api.github.com/users/Shuai-Xie","html_url":"https://github.com/Shuai-Xie","followers_url":"https://api.github.com/users/Shuai-Xie/followers","following_url":"https://api.github.com/users/Shuai-Xie/following{/other_user}","gists_url":"https://api.github.com/users/Shuai-Xie/gists{/gist_id}","starred_url":"https://api.github.com/users/Shuai-Xie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shuai-Xie/subscriptions","organizations_url":"https://api.github.com/users/Shuai-Xie/orgs","repos_url":"https://api.github.com/users/Shuai-Xie/repos","events_url":"https://api.github.com/users/Shuai-Xie/events{/privacy}","received_events_url":"https://api.github.com/users/Shuai-Xie/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-09-07T14:37:53Z","updated_at":"2019-09-16T14:26:26Z","closed_at":"2019-09-16T14:26:26Z","author_association":"NONE","active_lock_reason":null,"body":"When preprocessing the COCO data,\r\n\r\n```py\r\nmask = np.ones(shape=(label['img_height'], label['img_width']), dtype=np.float32)\r\nmask = get_mask(label['segmentations'], mask)\r\n\r\ndef get_mask(segmentations, mask):\r\n    for segmentation in segmentations:  # RLE, multi person\r\n        rle = pycocotools.mask.frPyObjects(segmentation, mask.shape[0], mask.shape[1])\r\n        mask[pycocotools.mask.decode(rle) > 0.5] = 0\r\n    return mask\r\n```\r\n` mask[pycocotools.mask.decode(rle) > 0.5] = 0` will make person masks equal to 0, while bg pixels are still 1.\r\n\r\n**I mean, why reverse 0 and 1 ?**\r\n\r\n**And in loss function, this mask will just choose the background ???**\r\n\r\n```py\r\ndef l2_loss(input, target, mask, batch_size):\r\n    loss = (input - target) * mask\r\n    loss = (loss * loss) / 2 / batch_size\r\n    return loss.sum()\r\n```","closed_by":{"login":"Daniil-Osokin","id":2491976,"node_id":"MDQ6VXNlcjI0OTE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2491976?v=4","gravatar_id":"","url":"https://api.github.com/users/Daniil-Osokin","html_url":"https://github.com/Daniil-Osokin","followers_url":"https://api.github.com/users/Daniil-Osokin/followers","following_url":"https://api.github.com/users/Daniil-Osokin/following{/other_user}","gists_url":"https://api.github.com/users/Daniil-Osokin/gists{/gist_id}","starred_url":"https://api.github.com/users/Daniil-Osokin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Daniil-Osokin/subscriptions","organizations_url":"https://api.github.com/users/Daniil-Osokin/orgs","repos_url":"https://api.github.com/users/Daniil-Osokin/repos","events_url":"https://api.github.com/users/Daniil-Osokin/events{/privacy}","received_events_url":"https://api.github.com/users/Daniil-Osokin/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Daniil-Osokin/lightweight-human-pose-estimation.pytorch/issues/44/timeline","performed_via_github_app":null,"state_reason":"completed"}