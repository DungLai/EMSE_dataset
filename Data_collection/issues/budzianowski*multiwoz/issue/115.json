{"url":"https://api.github.com/repos/budzianowski/multiwoz/issues/115","repository_url":"https://api.github.com/repos/budzianowski/multiwoz","labels_url":"https://api.github.com/repos/budzianowski/multiwoz/issues/115/labels{/name}","comments_url":"https://api.github.com/repos/budzianowski/multiwoz/issues/115/comments","events_url":"https://api.github.com/repos/budzianowski/multiwoz/issues/115/events","html_url":"https://github.com/budzianowski/multiwoz/issues/115","id":1423347630,"node_id":"I_kwDOCQJb5c5U1o-u","number":115,"title":"Project dependencies may have API risk issues","user":{"login":"PyDeps","id":109138844,"node_id":"U_kgDOBoFTnA","avatar_url":"https://avatars.githubusercontent.com/u/109138844?v=4","gravatar_id":"","url":"https://api.github.com/users/PyDeps","html_url":"https://github.com/PyDeps","followers_url":"https://api.github.com/users/PyDeps/followers","following_url":"https://api.github.com/users/PyDeps/following{/other_user}","gists_url":"https://api.github.com/users/PyDeps/gists{/gist_id}","starred_url":"https://api.github.com/users/PyDeps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PyDeps/subscriptions","organizations_url":"https://api.github.com/users/PyDeps/orgs","repos_url":"https://api.github.com/users/PyDeps/repos","events_url":"https://api.github.com/users/PyDeps/events{/privacy}","received_events_url":"https://api.github.com/users/PyDeps/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-10-26T02:38:33Z","updated_at":"2022-10-26T02:38:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, In **multiwoz**, inappropriate dependency versioning constraints can cause risks.\r\n\r\nBelow are the dependencies and version constraints that the project is using\r\n\r\n```\r\ntorch\r\nnumpy\r\nnltk==3.4.5\r\nscipy\r\ntqdm\r\n```\r\n\r\nThe version constraint **==** will introduce the risk of dependency conflicts because the scope of dependencies is too strict.\r\nThe version constraint **No Upper Bound** and **\\*** will introduce the risk of the missing API Error because the latest version of the dependencies may remove some APIs.\r\n\r\nAfter further analysis, in this project,\r\nThe version constraint of dependency **nltk** can be changed to *>=3.2.2,<=3.7*.\r\nThe version constraint of dependency **tqdm** can be changed to *>=4.36.0,<=4.64.0*.\r\n\r\nThe above modification suggestions can reduce the dependency conflicts as much as possible, \r\nand introduce the latest version as much as possible without calling Error in the projects.\r\n\r\nThe invocation of the current project includes all the following methods.\r\n\r\n<details><summary>The calling methods from the nltk</summary>\r\n <pre>nltk.util.ngrams\r\ncollections.OrderedDict\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the tqdm</summary>\r\n <pre>tqdm.tqdm\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the all methods</summary>\r\n <pre>max_counts.get\r\nnumpy.array\r\nself.labels.append\r\nmodel.model.Model.gen_criterion\r\nrange\r\nidx2words.append\r\nvalues.items\r\nself.policy\r\nutils.util.loadDialogue\r\nre.compile\r\nnumpy.set_printoptions\r\nself.Attn.super.__init__\r\ntorch.nn.Embedding\r\ntorch.no_grad\r\nh_t.repeat.transpose\r\njoin.replace\r\ntorch.save\r\nos.path.join\r\nmodel_turns.append\r\ndict.values\r\nslot_name.service_name.join.lower\r\nval.replace\r\ndic.append\r\ndic.extend\r\ndomains_in_goal.append\r\nself.loss.item\r\nMultiWozDB\r\nself.policy.state_dict\r\nsys.exit\r\nmodel.model.Model.train\r\nmath.floor\r\nturn.items\r\nvalListFile.append\r\nfixDelex.append\r\ninput.self.embedding.transpose\r\nopen.write\r\nself.output_lang_index2word.has_key\r\ndivideData\r\nself.policy.load_state_dict\r\nword_freqs.values\r\ntorch.nn.RNN\r\ntorch.nn.functional.dropout\r\nrandom.random\r\ndomain.self.dbs.execute\r\nanalyze_dialogue\r\ntorch.nn.utils.rnn.pad_packed_sequence\r\ntuple\r\nloadDictionaries\r\nself.v.data.normal_\r\nglob.glob\r\nzipfile.ZipFile\r\nself._parseGoal.keys\r\nself.gen_criterion\r\nself.decoder\r\nBeamSearchNode\r\nDecoderRNN\r\ntime.time\r\ncorpus.extend\r\nval.replace.replace\r\ndb_tensor.append\r\nself.v.repeat\r\nnextnodes.append\r\nunicode_to_utf8\r\nopen\r\ntestListFile.append\r\nQueue.PriorityQueue\r\nbooking.append\r\nself.encoder.load_state_dict\r\nlist\r\nall\r\nidx.decoder_hiddens.unsqueeze\r\ngen_stats.keys\r\nmax\r\nutils.nlp.BLEUScorer.score\r\ntorch.nn.functional.dropout.transpose\r\nself.SeqAttnDecoderRNN.super.__init__\r\nmax_len.hidden.repeat.transpose\r\nself.decoder.load_state_dict\r\nget_summary_bstate\r\nabsl.flags.mark_flags_as_required\r\nl.l.ih_b.data.fill_\r\nself.output_index2word\r\nhyp.split\r\ndic_area.append\r\nnumpy.zeros\r\nself.clipGradients\r\nMultiWozEvaluator\r\nsys_turns.append\r\nabsl.app.run\r\nself.embedding\r\nwhatCellType\r\nBeamSearchNode.eval\r\nos.path.dirname\r\nabs\r\nstates_to_correct.items\r\nsql_query.domain.dbs.execute.fetchall\r\nind.item\r\ntorch.cat\r\nself.attn\r\ndomain.turn.items\r\ncell_type.strip.strip\r\nmodel.output_word2index\r\nfilter\r\nsqlite3.connect\r\nnumpy.append\r\nself.parameters\r\nmodel.model.Model.loadModel\r\nhh.size\r\ndic_food.append\r\nfin.readlines\r\nself.loss.backward\r\nself.dropout.self.depth.self.cell_type.self.hid_size_enc.self.emb_size.self.input_lang_index2word.len.EncoderRNN.to\r\nargparse.ArgumentTypeError\r\ntorch.nn.Linear\r\ntorch.optim.Adadelta\r\nself.out\r\nself.EncoderRNN.super.__init__\r\nencoder_outputs.transpose.transpose\r\nSeqAttnDecoderRNN\r\nsuper\r\nutils.nlp.normalize\r\nmin\r\nself.input_lang_word2index.has_key\r\nargparse.ArgumentParser.add_argument\r\nself.getCount\r\nself.DefaultPolicy.super.__init__\r\nunsort_idx.hidden.transpose.transpose\r\nsent.append\r\nencoder_outputs.transpose.size\r\nself.forward\r\nself.optimizer.step\r\ntype\r\nl.l.hh_b.data.fill_\r\ntqdm.tqdm\r\nself.rnn\r\nprint\r\nself.greedy_decode.append\r\nzip\r\njson.load.items\r\nself.decode\r\nself.encoder.state_dict\r\nusr_turns.append\r\ntrain\r\ntorch.nn.GRU\r\ntorch.nn.init.orthogonal_\r\nself._evaluateGeneratedDialogue\r\nself.greedy_decode\r\nEncoderRNN\r\nos.makedirs\r\nos.path.abspath\r\nunsort_idx.outputs.transpose.transpose.contiguous\r\nline.replace\r\ntorch.nn.LSTM\r\nidx.data.replace\r\nloadData\r\ni.d.split\r\nmodel.model.Model.saveModel\r\nself._parseGoal\r\nfixDelex\r\njson.load.keys\r\nself.DecoderRNN.super.__init__\r\ntorch.zeros.view\r\ninsertSpace\r\nutils.delexicalize.prepareSlotValuesIndependent\r\nt.target_tensor.view\r\nio.open\r\nself.max_len.self.dropout.self.cell_type.self.output_lang_index2word.len.self.hid_size_dec.self.emb_size.SeqAttnDecoderRNN.to\r\nmodel.input_word2index\r\nutterances.append\r\nord\r\nnlp.normalize\r\nself.output_lang_word2index.has_key\r\nself.bleuscorer.score\r\ninit_gru\r\ncorpus_turns.append\r\ntorch.bmm\r\nMultiWozEvaluator.evaluateModel\r\nentities.append\r\nbs_tensor.append\r\ndic_price.append\r\nmodel.gen_criterion.item\r\nunsort_idx.hidden.transpose.transpose.contiguous\r\nsys.strip\r\ntarget_tensor.size\r\nnew_k.log_prob.item\r\nre.sub\r\nunsort_idx.outputs.transpose.transpose\r\njoin.split\r\nself.decoder.state_dict\r\nint\r\nutils.nlp.BLEUScorer\r\ncreateDict\r\ntorch.topk\r\ntopi.view.squeeze\r\njoin.lower\r\nself.hyps.append\r\nnltk.util.ngrams\r\nf.write\r\nmodel.model.Model\r\ntorch.optim.Adam\r\nself.v.size\r\nutils.util.padSequence\r\nunsort_idx.outputs.transpose.transpose.contiguous.transpose\r\nasMinutes\r\nmodel_corpus.extend\r\ntorch.optim.SGD\r\ntorch.nn.Parameter\r\ncreateDelexData\r\nprepareSlotValuesIndependent\r\nnumpy.random.seed\r\ntorch.manual_seed\r\nutils.dbPointer.oneHotVector\r\ntopi.view.detach\r\nself.W_bs\r\nunsort_idx.hidden.transpose.transpose.contiguous.repeat\r\nisinstance\r\ntopi.squeeze.detach\r\nself.optimizer.zero_grad\r\nproba.view.view\r\ncPickle.load\r\ninput_tensor.size\r\nget_dial\r\nself.W_u\r\nutils.delexicalize.delexicalise\r\ndomain.goal.append\r\nmodel.optimizer.zero_grad\r\ndecoder_output.topk\r\nline.strip\r\ninput_seqs.transpose.transpose\r\naddBookingPointer.tolist\r\njson.dumps\r\npolicy.DefaultPolicy\r\nstr.items\r\nos.path.exists\r\nmodel.model.Model.parameters\r\ntorch.nn.functional.log_softmax\r\ntrainIters\r\nword_freqs.keys\r\nself.dropout.self.cell_type.self.output_lang_index2word.len.self.hid_size_dec.self.emb_size.DecoderRNN.to\r\nmodel.model.Model.forward\r\nn.wordid.item\r\nline.strip.split\r\nmath.log\r\nsort_idx.embedded.transpose\r\njoin.find\r\ndomain.dbs.execute\r\nencoder_outputs.data.shape.self.v.repeat.unsqueeze\r\nrnn_input.transpose.transpose\r\nsqlite3.connect.cursor\r\nzip_ref.close\r\nattn_energies.F.softmax.unsqueeze\r\nvars\r\nargparse.ArgumentParser.parse_args\r\nusr.strip\r\ndictionary.items\r\nre.sub.replace\r\nnumpy.asarray\r\nnumpy.argsort\r\njson.dump\r\njoin\r\nencoder_outputs.size.self.v.repeat.unsqueeze\r\nsorted\r\nstr.keys\r\nsum\r\naddDBPointer\r\nself.encoder\r\ndomains.index\r\nd.items\r\nrandom.sample\r\nabsl.logging.info\r\ncollections.Counter.values\r\nutils.util.timeSince\r\nargparse.ArgumentParser\r\nusr.strip.split\r\ndicts.append\r\nkey.encode\r\nzip_ref.extractall\r\ncollections.Counter.items\r\nself._evaluateRealDialogue\r\ntorch.nn.NLLLoss\r\ntorch.bmm.transpose\r\ntorch.zeros\r\nutterance.append\r\ndecoder_output.data.topk\r\nself.input_lang_index2word.has_key\r\nself.bs_size.self.db_size.self.hid_size_enc.self.hid_size_pol.policy.DefaultPolicy.to\r\nfloat\r\ntopi.view.view\r\nget_dial.append\r\nreplacements.append\r\nmath.fsum\r\nshutil.copy\r\nreduce\r\nabsl.flags.DEFINE_string\r\naddBookingPointer\r\nself.Model.super.__init__\r\nset\r\ninput_tensor.append\r\nBLEUScorer\r\ntopi.detach.view\r\nre.sub.split\r\nclean_states.update\r\ndelexicaliseReferenceNumber\r\nnumpy.ones\r\nsys.stderr.write\r\nslot.split.replace\r\nnew_k.indexes.view\r\ndomain.provided_requestables.append\r\nunsort_idx.hidden.transpose.transpose.contiguous.transpose\r\ntorch.bmm.squeeze\r\nslot.split\r\nbuildDictionaries\r\ntorch.nn.utils.clip_grad_norm_\r\nsql_query.domain.self.dbs.execute.fetchall\r\ntorch.tanh.unsqueeze\r\nmodel.optimizer_policy.zero_grad\r\nutils.dbPointer.queryResult\r\ngru.reset_parameters\r\nstr\r\nv.lower\r\noperator.itemgetter\r\nref.split\r\ntorch.nn.functional.softmax\r\nidx.encoder_outputs.unsqueeze\r\nself.db.queryResultVenues\r\nmath.sqrt\r\ntorch.nn.Dropout\r\nQueue.PriorityQueue.get\r\nself.W_db\r\nQueue.PriorityQueue.put\r\ntorch.tanh\r\nline.replace.split\r\nformat_states\r\ncollections.Counter\r\nent.items\r\ndict\r\nis_ascii\r\nself.setOptimizers\r\ntorch.nn.utils.rnn.pack_padded_sequence\r\nUserWarning\r\nmath.exp\r\ntarget_tensor.view\r\ntorch.rand\r\nget_slot_name\r\nenumerate\r\nfrozenset\r\nfilename.strip\r\nself.build_model\r\nmodel.policy.parameters\r\nvar.cuda\r\nnodes.get.append\r\ncollections.OrderedDict\r\nformat\r\ntorch.cuda.is_available\r\nsys.strip.split\r\ntarget_tensor.append\r\ninit_lstm\r\ntorch.device\r\njson.load\r\ntorch.load\r\nlen\r\nself.score\r\ntorch.LongTensor\r\nh_t.repeat.repeat\r\ntorch.nn.functional.log_softmax.squeeze\r\ntorch.tensor\r\nre.findall\r\nmain\r\ndomain.bstate.keys\r\nre.match\r\nutt.replace.replace\r\ndialogues.items\r\nrandom.shuffle\r\nunicode\r\n</pre>\r\n</details>\r\n\r\n@developer\r\nCould please help me check this issue?\r\nMay I pull a request to fix it?\r\nThank you very much.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/budzianowski/multiwoz/issues/115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/budzianowski/multiwoz/issues/115/timeline","performed_via_github_app":null,"state_reason":null}