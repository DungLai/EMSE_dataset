{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/347","repository_url":"https://api.github.com/repos/NRCan/geo-deep-learning","labels_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/347/labels{/name}","comments_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/347/comments","events_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/347/events","html_url":"https://github.com/NRCan/geo-deep-learning/issues/347","id":1394981774,"node_id":"I_kwDOCNASdM5TJbuO","number":347,"title":"JaccardIndex: Torchmetrics v0.9 \"average\" argument replaces \"reduction\"","user":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-10-03T16:09:03Z","updated_at":"2022-10-18T19:34:42Z","closed_at":"2022-10-18T19:34:16Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"Though new conda environments created with GDL's [environment.yml](https://github.com/NRCan/geo-deep-learning/blob/develop/environment.yml) will install torchmetrics > 0.9 (see screenshot below), this library **and** version requirement is not explicit in this file since torchmetrics is a requirement of an already-required [torchgeo](https://github.com/NRCan/geo-deep-learning/blob/develop/environment.yml#L19). Unfortunately, torchgeo only requires [torchmetrics >0.7](https://github.com/microsoft/torchgeo/blob/main/environment.yml#L49).\r\n\r\nWith the recently added unit tests, we've experienced some problems with a change in argument name for [torchmetrics' JaccardIndex](https://github.com/Lightning-AI/metrics/pull/874) before and after v0.9. The \"reduction\" parameter has been changed to \"average\", causing failure of IoU unit tests with older pre-existing conda environments.\r\n\r\nThough we'd prefer minimizing the amount of libraries explicitly required in GDL, it seems necessary at this point to force the installation of torchmetrics > 0.9\r\n\r\n![ksnip_20220929-100635](https://user-images.githubusercontent.com/34774759/193625166-60766d5f-7e22-4a5a-ae49-a1a709e44fe9.png)","closed_by":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/347/timeline","performed_via_github_app":null,"state_reason":"completed"}