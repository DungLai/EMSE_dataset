{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/158","repository_url":"https://api.github.com/repos/NRCan/geo-deep-learning","labels_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/158/labels{/name}","comments_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/158/comments","events_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/158/events","html_url":"https://github.com/NRCan/geo-deep-learning/issues/158","id":685857592,"node_id":"MDU6SXNzdWU2ODU4NTc1OTI=","number":158,"title":"During validation and test loops, GDL may bust GPU's RAM when using random crop","user":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"labels":[{"id":1070498720,"node_id":"MDU6TGFiZWwxMDcwNDk4NzIw","url":"https://api.github.com/repos/NRCan/geo-deep-learning/labels/P2","name":"P2","color":"bcbddc","default":false,"description":"Medium priority"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/milestones/12","html_url":"https://github.com/NRCan/geo-deep-learning/milestone/12","labels_url":"https://api.github.com/repos/NRCan/geo-deep-learning/milestones/12/labels","id":7680216,"node_id":"MI_kwDOCNASdM4AdTDY","number":12,"title":"Training enhancements","description":"","creator":{"login":"ymoisan","id":7468595,"node_id":"MDQ6VXNlcjc0Njg1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/7468595?v=4","gravatar_id":"","url":"https://api.github.com/users/ymoisan","html_url":"https://github.com/ymoisan","followers_url":"https://api.github.com/users/ymoisan/followers","following_url":"https://api.github.com/users/ymoisan/following{/other_user}","gists_url":"https://api.github.com/users/ymoisan/gists{/gist_id}","starred_url":"https://api.github.com/users/ymoisan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymoisan/subscriptions","organizations_url":"https://api.github.com/users/ymoisan/orgs","repos_url":"https://api.github.com/users/ymoisan/repos","events_url":"https://api.github.com/users/ymoisan/events{/privacy}","received_events_url":"https://api.github.com/users/ymoisan/received_events","type":"User","site_admin":false},"open_issues":2,"closed_issues":1,"state":"open","created_at":"2022-02-15T13:01:32Z","updated_at":"2022-03-01T16:48:21Z","due_on":null,"closed_at":null},"comments":1,"created_at":"2020-08-25T22:00:56Z","updated_at":"2022-03-01T16:48:21Z","closed_at":"2022-03-01T16:48:21Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"When using random crop at train time as a data augmentation technique, the samples seen during validation and test time can require more memory than GPUs actually have, since the dimensions of uncropped samples can be much larger (depending on hdf5 samples created by images_to_samples.py).\r\n\r\nFor example, we've previously created 2048x2048 samples and randomly cropped those to 512x512 during train time. With a batch size of 12 (on v100 with 16 Gb of RAM), training went fine, but validation saturated the GPU's RAM, since GPU's were receiving 12 2048x2048 samples.\r\n\r\nAn easy solution is to make smaller samples (ex.: 1024). Since validation and test time compute only the forward pass, even if samples are slighly bigger, it should be fine. A note in README would be a good idea in that case.\r\nOther solutions integrated into GDL could also be envisionned (warning, exception handling, etc.)","closed_by":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/158/timeline","performed_via_github_app":null,"state_reason":"completed"}