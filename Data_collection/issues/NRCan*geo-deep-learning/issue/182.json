{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/182","repository_url":"https://api.github.com/repos/NRCan/geo-deep-learning","labels_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/182/labels{/name}","comments_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/182/comments","events_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/182/events","html_url":"https://github.com/NRCan/geo-deep-learning/issues/182","id":816727822,"node_id":"MDU6SXNzdWU4MTY3Mjc4MjI=","number":182,"title":"Inference: ability to parallelize (multi-gpu) inference on a single image","user":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"labels":[{"id":1049334786,"node_id":"MDU6TGFiZWwxMDQ5MzM0Nzg2","url":"https://api.github.com/repos/NRCan/geo-deep-learning/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1070498720,"node_id":"MDU6TGFiZWwxMDcwNDk4NzIw","url":"https://api.github.com/repos/NRCan/geo-deep-learning/labels/P2","name":"P2","color":"bcbddc","default":false,"description":"Medium priority"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-02-25T19:27:55Z","updated_at":"2022-03-24T15:26:51Z","closed_at":"2022-03-24T15:02:53Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"Currently GDL doesn't have the capacity to infer a single image on multiple GPUs (i.e. parallel forward pass). \r\n\r\nThe issue becomes urgent the moment we infer on very large images, which has been the case lately at NRCan with images over 48k x 48k pixels (BC_16).\r\n\r\nFor AI as a service, this feature will be either helpful or necessery to offer a better \"user experience\" (@ymoisan)\r\n\r\nSome suggestions for implementation:\r\n1. Read image --> split --> save into temporary thdf5s --> use dataloaders the same way we use them for training, allowing inference on 2+ gpus.\r\n2. Read image and keep in memory until inference is finished --> feed bits of it (not sure how exactly) to our model. Is there a pytorch dataloader that can deal with this more \"dynamic\" approach? This second approach needs some further thinking but could help infer more quickly than approach 1.\r\n\r\nAny thoughts?","closed_by":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/182/timeline","performed_via_github_app":null,"state_reason":"completed"}