[{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/comments/1341635512","html_url":"https://github.com/NRCan/geo-deep-learning/issues/419#issuecomment-1341635512","issue_url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/419","id":1341635512,"node_id":"IC_kwDOCNASdM5P97u4","user":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false},"created_at":"2022-12-07T21:45:16Z","updated_at":"2022-12-07T21:47:01Z","author_association":"COLLABORATOR","body":"After discussion with @mpelchat04 , ground truths that were acquired only partially from imagery and for which that acquisition extent is not rectangular could cause problems. \r\nIn an example like BC37, the extent is a \"L\" shape:\r\n![image](https://user-images.githubusercontent.com/34774759/206301802-ef1792c0-e542-4a32-959d-e5048e4e1c8f.png)\r\n\r\nIf buildings were acquired inside that entire extent, the current tiling script would also tile in the lower left corner, where there could also be buildings on imagery, but no corresponding footprints on gt. This becomes problematic as models would train on imagery where buildings are present, but they'd be associated to \"background\" class in ground truth. \r\n\r\nIf we use the \"extent\" layer inside a gpkg, this wouldn't fix this issue unless we assure tiling can cover a non-rectangular polygon, which is not easy. Why? It's not easy to pass a polygon as a dataset extent in torchgeo's GeoDatasets rather than a bounding box. The rtree library which deals with this extent in torchgeo expects only bounding boxes.\r\n\r\nPotential solution: \r\n1. use \"extent\" layer as nodata mask on imagery instead of source nodata mask (see #346 )\r\n2. make sure we don't acquire gt in non-rectangular extents\r\n\r\nSolution 1 seems easier to implement, though it's more a workaround than a solution... The downside compared to ideal solution (ie clip with extent's polygon), is that many patches would be created with \"black\" imagery patches (outside nodata mask). To be discussed.\r\n\r\nI'd also like to know in our datasets, how many extent polygon significantly differ from a rectangular shape.","reactions":{"url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/comments/1341635512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"remtav","id":34774759,"node_id":"MDQ6VXNlcjM0Nzc0NzU5","avatar_url":"https://avatars.githubusercontent.com/u/34774759?v=4","gravatar_id":"","url":"https://api.github.com/users/remtav","html_url":"https://github.com/remtav","followers_url":"https://api.github.com/users/remtav/followers","following_url":"https://api.github.com/users/remtav/following{/other_user}","gists_url":"https://api.github.com/users/remtav/gists{/gist_id}","starred_url":"https://api.github.com/users/remtav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remtav/subscriptions","organizations_url":"https://api.github.com/users/remtav/orgs","repos_url":"https://api.github.com/users/remtav/repos","events_url":"https://api.github.com/users/remtav/events{/privacy}","received_events_url":"https://api.github.com/users/remtav/received_events","type":"User","site_admin":false}},{"id":7982287276,"node_id":"MEE_lADOCNASdM5YYou3zwAAAAHbyAms","url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/events/7982287276","actor":{"login":"mpelchat04","id":38693210,"node_id":"MDQ6VXNlcjM4NjkzMjEw","avatar_url":"https://avatars.githubusercontent.com/u/38693210?v=4","gravatar_id":"","url":"https://api.github.com/users/mpelchat04","html_url":"https://github.com/mpelchat04","followers_url":"https://api.github.com/users/mpelchat04/followers","following_url":"https://api.github.com/users/mpelchat04/following{/other_user}","gists_url":"https://api.github.com/users/mpelchat04/gists{/gist_id}","starred_url":"https://api.github.com/users/mpelchat04/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpelchat04/subscriptions","organizations_url":"https://api.github.com/users/mpelchat04/orgs","repos_url":"https://api.github.com/users/mpelchat04/repos","events_url":"https://api.github.com/users/mpelchat04/events{/privacy}","received_events_url":"https://api.github.com/users/mpelchat04/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-07T21:45:17Z","performed_via_github_app":null},{"id":7982287290,"node_id":"SE_lADOCNASdM5YYou3zwAAAAHbyAm6","url":"https://api.github.com/repos/NRCan/geo-deep-learning/issues/events/7982287290","actor":{"login":"mpelchat04","id":38693210,"node_id":"MDQ6VXNlcjM4NjkzMjEw","avatar_url":"https://avatars.githubusercontent.com/u/38693210?v=4","gravatar_id":"","url":"https://api.github.com/users/mpelchat04","html_url":"https://github.com/mpelchat04","followers_url":"https://api.github.com/users/mpelchat04/followers","following_url":"https://api.github.com/users/mpelchat04/following{/other_user}","gists_url":"https://api.github.com/users/mpelchat04/gists{/gist_id}","starred_url":"https://api.github.com/users/mpelchat04/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpelchat04/subscriptions","organizations_url":"https://api.github.com/users/mpelchat04/orgs","repos_url":"https://api.github.com/users/mpelchat04/repos","events_url":"https://api.github.com/users/mpelchat04/events{/privacy}","received_events_url":"https://api.github.com/users/mpelchat04/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-07T21:45:17Z","performed_via_github_app":null}]