[{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/530305267","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-530305267","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":530305267,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDMwNTI2Nw==","user":{"login":"isaac-dunn","id":7963620,"node_id":"MDQ6VXNlcjc5NjM2MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7963620?v=4","gravatar_id":"","url":"https://api.github.com/users/isaac-dunn","html_url":"https://github.com/isaac-dunn","followers_url":"https://api.github.com/users/isaac-dunn/followers","following_url":"https://api.github.com/users/isaac-dunn/following{/other_user}","gists_url":"https://api.github.com/users/isaac-dunn/gists{/gist_id}","starred_url":"https://api.github.com/users/isaac-dunn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isaac-dunn/subscriptions","organizations_url":"https://api.github.com/users/isaac-dunn/orgs","repos_url":"https://api.github.com/users/isaac-dunn/repos","events_url":"https://api.github.com/users/isaac-dunn/events{/privacy}","received_events_url":"https://api.github.com/users/isaac-dunn/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T09:41:31Z","updated_at":"2019-09-11T09:41:31Z","author_association":"NONE","body":"Hi, I think this is a problem at your end rather than with this repo - when I first tried, I was making a mistake which also caused training to collapse, so I'd probably try to check carefully that everything is set up and run properly! (Sorry if that's vague.)","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/530305267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"isaac-dunn","id":7963620,"node_id":"MDQ6VXNlcjc5NjM2MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7963620?v=4","gravatar_id":"","url":"https://api.github.com/users/isaac-dunn","html_url":"https://github.com/isaac-dunn","followers_url":"https://api.github.com/users/isaac-dunn/followers","following_url":"https://api.github.com/users/isaac-dunn/following{/other_user}","gists_url":"https://api.github.com/users/isaac-dunn/gists{/gist_id}","starred_url":"https://api.github.com/users/isaac-dunn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isaac-dunn/subscriptions","organizations_url":"https://api.github.com/users/isaac-dunn/orgs","repos_url":"https://api.github.com/users/isaac-dunn/repos","events_url":"https://api.github.com/users/isaac-dunn/events{/privacy}","received_events_url":"https://api.github.com/users/isaac-dunn/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/530315734","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-530315734","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":530315734,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDMxNTczNA==","user":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T10:11:43Z","updated_at":"2019-09-11T10:11:43Z","author_association":"NONE","body":"Thanks.  I am checking one by one. It is vary helpful if you can point which parts.  In fact, I also reset Lr(G, D) to 0., and only train one batch, the generated images still surfer from the same problem. ","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/530315734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547463514","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-547463514","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":547463514,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzQ2MzUxNA==","user":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"created_at":"2019-10-29T14:58:43Z","updated_at":"2019-10-29T14:58:43Z","author_association":"NONE","body":"@yaxingwang  im wondering how did you solve the problem that the imagenet has 1000 classes? Did you created a dataset of yours with 1000 clases as well. Otherwise im getting an error, while loading the weights and dont know what will be the best way to solve it, since training from scratch is pain in the a... Thank you for any suggestion","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547463514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false}},{"id":2752510614,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjc1MjUxMDYxNA==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2752510614","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-29T14:58:44Z","performed_via_github_app":null},{"id":2752510615,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3NTI1MTA2MTU=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2752510615","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-29T14:58:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547490881","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-547490881","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":547490881,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzQ5MDg4MQ==","user":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"created_at":"2019-10-29T15:49:41Z","updated_at":"2019-10-29T15:49:41Z","author_association":"NONE","body":"@VincieD, I have fixed it. In _get_data_loaders_ of utils.py, you should set  **start_itr = 0** when you use pretrained model, since using pretrained model, it is not 0.  I guess **start_itr** refer to batchnorm or something.  I didnot create 1000 clalsses, in fact you do not need.   In generator the label is projected into vector by word2vector if I understand well,  you can set the number of class. \r\n","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547490881/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false}},{"id":2752727962,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjc1MjcyNzk2Mg==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2752727962","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-29T15:49:44Z","performed_via_github_app":null},{"id":2752727964,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3NTI3Mjc5NjQ=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2752727964","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-29T15:49:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547502574","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-547502574","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":547502574,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzUwMjU3NA==","user":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"created_at":"2019-10-29T16:12:06Z","updated_at":"2019-10-29T16:12:06Z","author_association":"NONE","body":"@yaxingwang  Thank you for your reply, ive did as you proposed and hardcoded in BigGAN.py number of classes to 1000. Weights are loaded and lets see what will be the result. Did you experimented with hyper-parametr settings, or just left the original ones?\r\n","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547502574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false}},{"id":2752820734,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjc1MjgyMDczNA==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2752820734","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-29T16:12:08Z","performed_via_github_app":null},{"id":2752820735,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3NTI4MjA3MzU=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2752820735","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-29T16:12:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547506382","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-547506382","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":547506382,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzUwNjM4Mg==","user":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"created_at":"2019-10-29T16:19:27Z","updated_at":"2019-10-29T16:19:27Z","author_association":"NONE","body":"The original setting is fine-tunning. The key point is about computing resource. If you conduct papally it with Multi-GPUs, results is interesting. Otherwise, using one GPU(12G) is difficulty. In fact, we compare the same setting with one GPU and 8*V100 in DGX1, the gap is larger.  To be honest, it also rely on your data size. ","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547506382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547506914","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-547506914","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":547506914,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzUwNjkxNA==","user":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false},"created_at":"2019-10-29T16:20:33Z","updated_at":"2019-10-29T16:20:33Z","author_association":"NONE","body":"Let me know if you have new insight when you train.","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/547506914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yaxingwang","id":16056485,"node_id":"MDQ6VXNlcjE2MDU2NDg1","avatar_url":"https://avatars.githubusercontent.com/u/16056485?v=4","gravatar_id":"","url":"https://api.github.com/users/yaxingwang","html_url":"https://github.com/yaxingwang","followers_url":"https://api.github.com/users/yaxingwang/followers","following_url":"https://api.github.com/users/yaxingwang/following{/other_user}","gists_url":"https://api.github.com/users/yaxingwang/gists{/gist_id}","starred_url":"https://api.github.com/users/yaxingwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaxingwang/subscriptions","organizations_url":"https://api.github.com/users/yaxingwang/orgs","repos_url":"https://api.github.com/users/yaxingwang/repos","events_url":"https://api.github.com/users/yaxingwang/events{/privacy}","received_events_url":"https://api.github.com/users/yaxingwang/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/559071781","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-559071781","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":559071781,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTA3MTc4MQ==","user":{"login":"janzd","id":5581222,"node_id":"MDQ6VXNlcjU1ODEyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5581222?v=4","gravatar_id":"","url":"https://api.github.com/users/janzd","html_url":"https://github.com/janzd","followers_url":"https://api.github.com/users/janzd/followers","following_url":"https://api.github.com/users/janzd/following{/other_user}","gists_url":"https://api.github.com/users/janzd/gists{/gist_id}","starred_url":"https://api.github.com/users/janzd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janzd/subscriptions","organizations_url":"https://api.github.com/users/janzd/orgs","repos_url":"https://api.github.com/users/janzd/repos","events_url":"https://api.github.com/users/janzd/events{/privacy}","received_events_url":"https://api.github.com/users/janzd/received_events","type":"User","site_admin":false},"created_at":"2019-11-27T12:41:59Z","updated_at":"2019-11-27T12:41:59Z","author_association":"NONE","body":"@VincieD Do you get a mismatch error? It's caused by the embedding layer. The embedding layer in the pretrained model has a shape of (1000, 128), so you can't use it if you use a different dataset. First, I removed the layer from the state dict that is loaded (the weights of the networks). PyTorch has a `strict` argument that allows you to load weights only for layers that are in both the pretrained model and your target model, which is useful for transferring weights, but here both models contain the embedding layer so it tries to load it. The `strict` argument only checks for the name of the layer, not the shape. But the shape is different so it will throw an error.\r\nRemoving the layer from the state dict wasn't enough. The `load_weights` function also loads the state of the optimizer and the optimizer uses a running average of gradients, which is tied to the parameters, that is the shape of the layers. So I just disabled the loading of the optimizer state and use a freshly initialized Adam.\r\nFinally, when you use the `resume` flag, the network parameters are not initialized because it expects that they will all be loaded from the checkpoint. Since I don't load the weights for the embedding layers, they are not initialized. I don't know what values they hold when you just declare them in the model declaration and don't initialize their weights, but when they are not initialized it seems to totally cripple the network.\r\nI'm still figuring out the code and have just started some experiments so I don't know how the changes I made affect the performance when finetuning, but at least I'm able to run it on my own dataset with an arbitrary number of classes. By the way, the scores (IS and FID) will probably be meaningless if you use a different dataset and use the InceptionV3 network trained on ImageNet. Swapping that with a network trained on my dataset is another thing I plan to do.\r\nI didn't change `start_itr` to 0. I don't know if that's necessary. It seems to affect the decay and I'm not sure if it's better to reset it when finetuning or leave it as it is.\r\n\r\nHere is my version of the `load_weights` function. Argument `strict` is set to False and `skip_load_optim` is set True. In `train.py`, I make sure that `skip_init` is not set True. There are various ways you could do it. For example, I defined a new argument `finetune` in addition to `resume` to differentiate between the two processes and modified the code accordingly.\r\n\r\n```\r\ndef load_weights(G, D, state_dict, weights_root, experiment_name,\r\n                 name_suffix=None, G_ema=None, strict=True, skip_load_optim=False):\r\n  root = '/'.join([weights_root, experiment_name])\r\n  if name_suffix:\r\n    print('Loading %s weights from %s...' % (name_suffix, root))\r\n  else:\r\n    print('Loading weights from %s...' % root)\r\n  if G is not None:\r\n    pretrained_model = torch.load('%s/%s.pth' % (root, join_strings('_', ['G', name_suffix])))\r\n    pretrained_model = {k: v for k, v in pretrained_model.items() if (k in G.state_dict()) and (G.state_dict()[k].shape == pretrained_model[k].shape)}\r\n    G.load_state_dict(pretrained_model, strict=strict)\r\n    if not skip_load_optim:\r\n      G.optim.load_state_dict(\r\n        torch.load('%s/%s.pth' % (root, join_strings('_', ['G_optim', name_suffix]))))\r\n  if D is not None:\r\n    pretrained_model = torch.load('%s/%s.pth' % (root, join_strings('_', ['D', name_suffix])))\r\n    pretrained_model = {k: v for k, v in pretrained_model.items() if (k in D.state_dict()) and (D.state_dict()[k].shape == pretrained_model[k].shape)}\r\n    D.load_state_dict(pretrained_model, strict=strict)\r\n    if not skip_load_optim:\r\n      D.optim.load_state_dict(\r\n        torch.load('%s/%s.pth' % (root, join_strings('_', ['D_optim', name_suffix]))))\r\n  # Load state dict  \r\n  for item in state_dict:\r\n    state_dict[item] = torch.load('%s/%s.pth' % (root, join_strings('_', ['state_dict', name_suffix])))[item]\r\n  if G_ema is not None:\r\n    pretrained_model = torch.load('%s/%s.pth' % (root, join_strings('_', ['G_ema', name_suffix])))\r\n    pretrained_model = {k: v for k, v in pretrained_model.items() if (k in G_ema.state_dict()) and (G_ema.state_dict()[k].shape == pretrained_model[k].shape)}\r\n    G_ema.load_state_dict(pretrained_model, strict=strict)\r\n```","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/559071781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"janzd","id":5581222,"node_id":"MDQ6VXNlcjU1ODEyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5581222?v=4","gravatar_id":"","url":"https://api.github.com/users/janzd","html_url":"https://github.com/janzd","followers_url":"https://api.github.com/users/janzd/followers","following_url":"https://api.github.com/users/janzd/following{/other_user}","gists_url":"https://api.github.com/users/janzd/gists{/gist_id}","starred_url":"https://api.github.com/users/janzd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janzd/subscriptions","organizations_url":"https://api.github.com/users/janzd/orgs","repos_url":"https://api.github.com/users/janzd/repos","events_url":"https://api.github.com/users/janzd/events{/privacy}","received_events_url":"https://api.github.com/users/janzd/received_events","type":"User","site_admin":false}},{"id":2835501175,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjgzNTUwMTE3NQ==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2835501175","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-11-27T12:41:59Z","performed_via_github_app":null},{"id":2835501180,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4MzU1MDExODA=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2835501180","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-11-27T12:41:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/574536901","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-574536901","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":574536901,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDUzNjkwMQ==","user":{"login":"tobschu94","id":49389272,"node_id":"MDQ6VXNlcjQ5Mzg5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/49389272?v=4","gravatar_id":"","url":"https://api.github.com/users/tobschu94","html_url":"https://github.com/tobschu94","followers_url":"https://api.github.com/users/tobschu94/followers","following_url":"https://api.github.com/users/tobschu94/following{/other_user}","gists_url":"https://api.github.com/users/tobschu94/gists{/gist_id}","starred_url":"https://api.github.com/users/tobschu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobschu94/subscriptions","organizations_url":"https://api.github.com/users/tobschu94/orgs","repos_url":"https://api.github.com/users/tobschu94/repos","events_url":"https://api.github.com/users/tobschu94/events{/privacy}","received_events_url":"https://api.github.com/users/tobschu94/received_events","type":"User","site_admin":false},"created_at":"2020-01-15T07:45:06Z","updated_at":"2020-01-15T07:45:06Z","author_association":"NONE","body":"Hello,\r\nI'm trying to finetune BigGAN together with @VincieD. We use the weights at 100k iterations provided by the author and try to finetune it on the [INRIA person dataset](http://pascal.inrialpes.fr/data/human/) but only on the pedestrian class, so we have one class. We fixed the mismatch error by hardcoding the number of classes to 1000 as mentioned earlier, disregarding how many classes our new dataset has. We train on 128x128 images on 2 RTX 2070. So we are able to use a `batch_size=24`, `num_G_accumulations=8` and also 8 for the discriminator. Here is our full hyperparameter setting\r\n\r\n![Screenshot from 2020-01-15 08-39-16](https://user-images.githubusercontent.com/49389272/72414548-ca6a8780-3772-11ea-9c26-eb56d61a02da.png)\r\n\r\n\r\nAfter a few tests we figured out that we get the best results after only 3k more iterations, see first figure. Some pedestrians are identifiable.\r\n\r\nIteration 3000\r\n![fixed_samples103000](https://user-images.githubusercontent.com/49389272/72414546-ca6a8780-3772-11ea-97d2-28e26c589977.jpg)\r\n\r\nSo we started using `ema` for another 6k iterations to develope the finer structures better, but then it starts to generate always he same image looking like mode collapse or something.\r\nAnyone an idea how to get better results?\r\n\r\niteration 9000\r\n![fixed_samples109000](https://user-images.githubusercontent.com/49389272/72414547-ca6a8780-3772-11ea-971a-8222cf15363a.jpg)\r\n\r\nAnd thanks @kurapan for your ideas, how are your results looking? have you any new information about your approach with the embedding layer?\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/574536901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tobschu94","id":49389272,"node_id":"MDQ6VXNlcjQ5Mzg5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/49389272?v=4","gravatar_id":"","url":"https://api.github.com/users/tobschu94","html_url":"https://github.com/tobschu94","followers_url":"https://api.github.com/users/tobschu94/followers","following_url":"https://api.github.com/users/tobschu94/following{/other_user}","gists_url":"https://api.github.com/users/tobschu94/gists{/gist_id}","starred_url":"https://api.github.com/users/tobschu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobschu94/subscriptions","organizations_url":"https://api.github.com/users/tobschu94/orgs","repos_url":"https://api.github.com/users/tobschu94/repos","events_url":"https://api.github.com/users/tobschu94/events{/privacy}","received_events_url":"https://api.github.com/users/tobschu94/received_events","type":"User","site_admin":false}},{"id":2949790038,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjk0OTc5MDAzOA==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2949790038","actor":{"login":"janzd","id":5581222,"node_id":"MDQ6VXNlcjU1ODEyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5581222?v=4","gravatar_id":"","url":"https://api.github.com/users/janzd","html_url":"https://github.com/janzd","followers_url":"https://api.github.com/users/janzd/followers","following_url":"https://api.github.com/users/janzd/following{/other_user}","gists_url":"https://api.github.com/users/janzd/gists{/gist_id}","starred_url":"https://api.github.com/users/janzd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janzd/subscriptions","organizations_url":"https://api.github.com/users/janzd/orgs","repos_url":"https://api.github.com/users/janzd/repos","events_url":"https://api.github.com/users/janzd/events{/privacy}","received_events_url":"https://api.github.com/users/janzd/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-15T07:45:06Z","performed_via_github_app":null},{"id":2949790039,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5NDk3OTAwMzk=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2949790039","actor":{"login":"janzd","id":5581222,"node_id":"MDQ6VXNlcjU1ODEyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5581222?v=4","gravatar_id":"","url":"https://api.github.com/users/janzd","html_url":"https://github.com/janzd","followers_url":"https://api.github.com/users/janzd/followers","following_url":"https://api.github.com/users/janzd/following{/other_user}","gists_url":"https://api.github.com/users/janzd/gists{/gist_id}","starred_url":"https://api.github.com/users/janzd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janzd/subscriptions","organizations_url":"https://api.github.com/users/janzd/orgs","repos_url":"https://api.github.com/users/janzd/repos","events_url":"https://api.github.com/users/janzd/events{/privacy}","received_events_url":"https://api.github.com/users/janzd/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-15T07:45:06Z","performed_via_github_app":null},{"id":2949790040,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjk0OTc5MDA0MA==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2949790040","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-15T07:45:06Z","performed_via_github_app":null},{"id":2949790041,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5NDk3OTAwNDE=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/2949790041","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-15T07:45:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/700401095","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-700401095","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":700401095,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDQwMTA5NQ==","user":{"login":"JanineCHEN","id":37527041,"node_id":"MDQ6VXNlcjM3NTI3MDQx","avatar_url":"https://avatars.githubusercontent.com/u/37527041?v=4","gravatar_id":"","url":"https://api.github.com/users/JanineCHEN","html_url":"https://github.com/JanineCHEN","followers_url":"https://api.github.com/users/JanineCHEN/followers","following_url":"https://api.github.com/users/JanineCHEN/following{/other_user}","gists_url":"https://api.github.com/users/JanineCHEN/gists{/gist_id}","starred_url":"https://api.github.com/users/JanineCHEN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JanineCHEN/subscriptions","organizations_url":"https://api.github.com/users/JanineCHEN/orgs","repos_url":"https://api.github.com/users/JanineCHEN/repos","events_url":"https://api.github.com/users/JanineCHEN/events{/privacy}","received_events_url":"https://api.github.com/users/JanineCHEN/received_events","type":"User","site_admin":false},"created_at":"2020-09-29T03:17:44Z","updated_at":"2020-09-29T03:17:44Z","author_association":"NONE","body":"> Hello,\r\n> I'm trying to finetune BigGAN together with @VincieD. We use the weights at 100k iterations provided by the author and try to finetune it on the [INRIA person dataset](http://pascal.inrialpes.fr/data/human/) but only on the pedestrian class, so we have one class. We fixed the mismatch error by hardcoding the number of classes to 1000 as mentioned earlier, disregarding how many classes our new dataset has. We train on 128x128 images on 2 RTX 2070. So we are able to use a `batch_size=24`, `num_G_accumulations=8` and also 8 for the discriminator. Here is our full hyperparameter setting\r\n> \r\n> ![Screenshot from 2020-01-15 08-39-16](https://user-images.githubusercontent.com/49389272/72414548-ca6a8780-3772-11ea-9c26-eb56d61a02da.png)\r\n> \r\n> After a few tests we figured out that we get the best results after only 3k more iterations, see first figure. Some pedestrians are identifiable.\r\n> \r\n> Iteration 3000\r\n> ![fixed_samples103000](https://user-images.githubusercontent.com/49389272/72414546-ca6a8780-3772-11ea-97d2-28e26c589977.jpg)\r\n> \r\n> So we started using `ema` for another 6k iterations to develope the finer structures better, but then it starts to generate always he same image looking like mode collapse or something.\r\n> Anyone an idea how to get better results?\r\n> \r\n> iteration 9000\r\n> ![fixed_samples109000](https://user-images.githubusercontent.com/49389272/72414547-ca6a8780-3772-11ea-971a-8222cf15363a.jpg)\r\n> \r\n> And thanks @kurapan for your ideas, how are your results looking? have you any new information about your approach with the embedding layer?\r\n\r\n@tobschu94 Hi, I am having the same issue as yours, I am training with my own dataset which has fixed number of arbitrary classes which I cannot alter, so I tried to train from scratch with the following parameter settings:\r\n```\r\n#!/bin/bash\r\npython train.py \\\r\n--dataset I128_hdf5 --parallel --shuffle  --num_workers 8 --batch_size 128 --load_in_mem \\\r\n--num_G_accumulations 16 --num_D_accumulations 16 --num_epochs 10000 \\\r\n--num_D_steps 1 --G_lr 5e-5 --D_lr 2e-4 --D_B2 0.999 --G_B2 0.999 \\\r\n--G_attn 32 --D_attn 32 \\\r\n--G_nl inplace_relu --D_nl inplace_relu \\\r\n--SN_eps 1e-6 --BN_eps 1e-5 --adam_eps 1e-6 \\\r\n--G_ortho 0.0 \\\r\n--G_shared \\\r\n--G_init ortho --D_init ortho \\\r\n--hier --dim_z 120 --shared_dim 128 \\\r\n--G_eval_mode \\\r\n--which_best FID \\\r\n--G_ch 32 --D_ch 32 \\\r\n--ema --use_ema --ema_start 200 \\\r\n--test_every 50 --save_every 50 --num_best_copies 5 --num_save_copies 2 --seed 0 \\\r\n--use_multiepoch_sampler\r\n```\r\nThe generated images also seem to have mode collapse issue after 13k iteration:\r\n![Screenshot from 2020-09-29 11-15-32](https://user-images.githubusercontent.com/37527041/94508731-2f083c80-0245-11eb-8e64-5d20376559c2.png)\r\n\r\nI am not sure if be a bit more patient and wait for training for a bit longer would help, or it would just stuck at the mode collapse status...","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/700401095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JanineCHEN","id":37527041,"node_id":"MDQ6VXNlcjM3NTI3MDQx","avatar_url":"https://avatars.githubusercontent.com/u/37527041?v=4","gravatar_id":"","url":"https://api.github.com/users/JanineCHEN","html_url":"https://github.com/JanineCHEN","followers_url":"https://api.github.com/users/JanineCHEN/followers","following_url":"https://api.github.com/users/JanineCHEN/following{/other_user}","gists_url":"https://api.github.com/users/JanineCHEN/gists{/gist_id}","starred_url":"https://api.github.com/users/JanineCHEN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JanineCHEN/subscriptions","organizations_url":"https://api.github.com/users/JanineCHEN/orgs","repos_url":"https://api.github.com/users/JanineCHEN/repos","events_url":"https://api.github.com/users/JanineCHEN/events{/privacy}","received_events_url":"https://api.github.com/users/JanineCHEN/received_events","type":"User","site_admin":false}},{"id":3817265928,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzgxNzI2NTkyOA==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3817265928","actor":{"login":"janzd","id":5581222,"node_id":"MDQ6VXNlcjU1ODEyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5581222?v=4","gravatar_id":"","url":"https://api.github.com/users/janzd","html_url":"https://github.com/janzd","followers_url":"https://api.github.com/users/janzd/followers","following_url":"https://api.github.com/users/janzd/following{/other_user}","gists_url":"https://api.github.com/users/janzd/gists{/gist_id}","starred_url":"https://api.github.com/users/janzd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janzd/subscriptions","organizations_url":"https://api.github.com/users/janzd/orgs","repos_url":"https://api.github.com/users/janzd/repos","events_url":"https://api.github.com/users/janzd/events{/privacy}","received_events_url":"https://api.github.com/users/janzd/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-29T03:17:45Z","performed_via_github_app":null},{"id":3817265933,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4MTcyNjU5MzM=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3817265933","actor":{"login":"janzd","id":5581222,"node_id":"MDQ6VXNlcjU1ODEyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/5581222?v=4","gravatar_id":"","url":"https://api.github.com/users/janzd","html_url":"https://github.com/janzd","followers_url":"https://api.github.com/users/janzd/followers","following_url":"https://api.github.com/users/janzd/following{/other_user}","gists_url":"https://api.github.com/users/janzd/gists{/gist_id}","starred_url":"https://api.github.com/users/janzd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janzd/subscriptions","organizations_url":"https://api.github.com/users/janzd/orgs","repos_url":"https://api.github.com/users/janzd/repos","events_url":"https://api.github.com/users/janzd/events{/privacy}","received_events_url":"https://api.github.com/users/janzd/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-29T03:17:45Z","performed_via_github_app":null},{"id":3817265935,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzgxNzI2NTkzNQ==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3817265935","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-29T03:17:45Z","performed_via_github_app":null},{"id":3817265938,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4MTcyNjU5Mzg=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3817265938","actor":{"login":"VincieD","id":10423833,"node_id":"MDQ6VXNlcjEwNDIzODMz","avatar_url":"https://avatars.githubusercontent.com/u/10423833?v=4","gravatar_id":"","url":"https://api.github.com/users/VincieD","html_url":"https://github.com/VincieD","followers_url":"https://api.github.com/users/VincieD/followers","following_url":"https://api.github.com/users/VincieD/following{/other_user}","gists_url":"https://api.github.com/users/VincieD/gists{/gist_id}","starred_url":"https://api.github.com/users/VincieD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VincieD/subscriptions","organizations_url":"https://api.github.com/users/VincieD/orgs","repos_url":"https://api.github.com/users/VincieD/repos","events_url":"https://api.github.com/users/VincieD/events{/privacy}","received_events_url":"https://api.github.com/users/VincieD/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-29T03:17:45Z","performed_via_github_app":null},{"id":3817265943,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzgxNzI2NTk0Mw==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3817265943","actor":{"login":"tobschu94","id":49389272,"node_id":"MDQ6VXNlcjQ5Mzg5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/49389272?v=4","gravatar_id":"","url":"https://api.github.com/users/tobschu94","html_url":"https://github.com/tobschu94","followers_url":"https://api.github.com/users/tobschu94/followers","following_url":"https://api.github.com/users/tobschu94/following{/other_user}","gists_url":"https://api.github.com/users/tobschu94/gists{/gist_id}","starred_url":"https://api.github.com/users/tobschu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobschu94/subscriptions","organizations_url":"https://api.github.com/users/tobschu94/orgs","repos_url":"https://api.github.com/users/tobschu94/repos","events_url":"https://api.github.com/users/tobschu94/events{/privacy}","received_events_url":"https://api.github.com/users/tobschu94/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-09-29T03:17:45Z","performed_via_github_app":null},{"id":3817265946,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4MTcyNjU5NDY=","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3817265946","actor":{"login":"tobschu94","id":49389272,"node_id":"MDQ6VXNlcjQ5Mzg5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/49389272?v=4","gravatar_id":"","url":"https://api.github.com/users/tobschu94","html_url":"https://github.com/tobschu94","followers_url":"https://api.github.com/users/tobschu94/followers","following_url":"https://api.github.com/users/tobschu94/following{/other_user}","gists_url":"https://api.github.com/users/tobschu94/gists{/gist_id}","starred_url":"https://api.github.com/users/tobschu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobschu94/subscriptions","organizations_url":"https://api.github.com/users/tobschu94/orgs","repos_url":"https://api.github.com/users/tobschu94/repos","events_url":"https://api.github.com/users/tobschu94/events{/privacy}","received_events_url":"https://api.github.com/users/tobschu94/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-09-29T03:17:45Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/702716214","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/43#issuecomment-702716214","issue_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/43","id":702716214,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMjcxNjIxNA==","user":{"login":"tobschu94","id":49389272,"node_id":"MDQ6VXNlcjQ5Mzg5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/49389272?v=4","gravatar_id":"","url":"https://api.github.com/users/tobschu94","html_url":"https://github.com/tobschu94","followers_url":"https://api.github.com/users/tobschu94/followers","following_url":"https://api.github.com/users/tobschu94/following{/other_user}","gists_url":"https://api.github.com/users/tobschu94/gists{/gist_id}","starred_url":"https://api.github.com/users/tobschu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobschu94/subscriptions","organizations_url":"https://api.github.com/users/tobschu94/orgs","repos_url":"https://api.github.com/users/tobschu94/repos","events_url":"https://api.github.com/users/tobschu94/events{/privacy}","received_events_url":"https://api.github.com/users/tobschu94/received_events","type":"User","site_admin":false},"created_at":"2020-10-02T12:51:33Z","updated_at":"2020-10-02T12:51:33Z","author_association":"NONE","body":"@JanineCHEN Neither fixing the number of classes, training from scratch or fine tuning BigGAN worked in my case. At some point it is collapsing. Also training it for a long time and more than 120k iterations did not improve the results. So I switched to a different GAN made by [NVIDIA,] called [ProGAN](https://github.com/tkarras/progressive_growing_of_gans). This GAN worked quite well in my case. The structure of their code is very well to understand and also the principle of their GAN.\r\n\r\nI hope this will help to achieve your desired results.","reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/comments/702716214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tobschu94","id":49389272,"node_id":"MDQ6VXNlcjQ5Mzg5Mjcy","avatar_url":"https://avatars.githubusercontent.com/u/49389272?v=4","gravatar_id":"","url":"https://api.github.com/users/tobschu94","html_url":"https://github.com/tobschu94","followers_url":"https://api.github.com/users/tobschu94/followers","following_url":"https://api.github.com/users/tobschu94/following{/other_user}","gists_url":"https://api.github.com/users/tobschu94/gists{/gist_id}","starred_url":"https://api.github.com/users/tobschu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobschu94/subscriptions","organizations_url":"https://api.github.com/users/tobschu94/orgs","repos_url":"https://api.github.com/users/tobschu94/repos","events_url":"https://api.github.com/users/tobschu94/events{/privacy}","received_events_url":"https://api.github.com/users/tobschu94/received_events","type":"User","site_admin":false}},{"id":3833832222,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzgzMzgzMjIyMg==","url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/events/3833832222","actor":{"login":"JanineCHEN","id":37527041,"node_id":"MDQ6VXNlcjM3NTI3MDQx","avatar_url":"https://avatars.githubusercontent.com/u/37527041?v=4","gravatar_id":"","url":"https://api.github.com/users/JanineCHEN","html_url":"https://github.com/JanineCHEN","followers_url":"https://api.github.com/users/JanineCHEN/followers","following_url":"https://api.github.com/users/JanineCHEN/following{/other_user}","gists_url":"https://api.github.com/users/JanineCHEN/gists{/gist_id}","starred_url":"https://api.github.com/users/JanineCHEN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JanineCHEN/subscriptions","organizations_url":"https://api.github.com/users/JanineCHEN/orgs","repos_url":"https://api.github.com/users/JanineCHEN/repos","events_url":"https://api.github.com/users/JanineCHEN/events{/privacy}","received_events_url":"https://api.github.com/users/JanineCHEN/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-02T12:51:33Z","performed_via_github_app":null}]