{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/14","repository_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch","labels_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/14/labels{/name}","comments_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/14/comments","events_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/14/events","html_url":"https://github.com/ajbrock/BigGAN-PyTorch/issues/14","id":429723830,"node_id":"MDU6SXNzdWU0Mjk3MjM4MzA=","number":14,"title":"Question about truncation trick in Big GAN.","user":{"login":"ShenYujun","id":20898797,"node_id":"MDQ6VXNlcjIwODk4Nzk3","avatar_url":"https://avatars.githubusercontent.com/u/20898797?v=4","gravatar_id":"","url":"https://api.github.com/users/ShenYujun","html_url":"https://github.com/ShenYujun","followers_url":"https://api.github.com/users/ShenYujun/followers","following_url":"https://api.github.com/users/ShenYujun/following{/other_user}","gists_url":"https://api.github.com/users/ShenYujun/gists{/gist_id}","starred_url":"https://api.github.com/users/ShenYujun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShenYujun/subscriptions","organizations_url":"https://api.github.com/users/ShenYujun/orgs","repos_url":"https://api.github.com/users/ShenYujun/repos","events_url":"https://api.github.com/users/ShenYujun/events{/privacy}","received_events_url":"https://api.github.com/users/ShenYujun/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-04-05T12:09:59Z","updated_at":"2019-04-05T12:20:48Z","closed_at":"2019-04-05T12:20:48Z","author_association":"NONE","active_lock_reason":null,"body":"I think the PyTorch implementation slightly differs from that from Tensorflow Hub w.r.t. truncation trick. Here is the situation: when I set truncation as 1, these two models (tf model v.s. pth model converted from tf model) produce same results. However, it no longer holds when truncation is less than 1.\r\n\r\nAccording to the code on `https://colab.research.google.com/github/tensorflow/hub/blob/master/examples/colab/biggan_generation_with_tf_hub.ipynb`, the truncation factor not only works on the input latent vector, but is also passed to the module by a placeholder. Differently, in this PyTorch version, truncation factor only affects the input noise `z` in `sample.py`.\r\n\r\nI have also found that the following two settings give same outputs:\r\n(1) With Tensorflow Hub,\r\n```\r\nz = 0.02 * truncnorm.rvs(-2, 2, size=(1, dim_z), random_state=np.random.RandomState(0))\r\ntruncation = 1.0\r\n```\r\n(2) With PyTorch,\r\n```\r\nz = 0.02 * truncnorm.rvs(-2, 2, size=(1, dim_z), random_state=np.random.RandomState(0))\r\n```\r\n\r\nBut the following two settings give different syntheses:\r\n(3) With Tensorflow Hub,\r\n```\r\nz = 0.02 * truncnorm.rvs(-2, 2, size=(1, dim_z), random_state=np.random.RandomState(0))\r\ntruncation = 0.02\r\n```\r\n(4) With PyTorch,\r\n```\r\nz = 0.02 * truncnorm.rvs(-2, 2, size=(1, dim_z), random_state=np.random.RandomState(0))\r\n```\r\n\r\nWould you please help me figure this thing out? I want to know how the official Big GAN play the truncation trick besides truncating the latent code. BTW, I experimented on the 512x512 BigGAN model (`https://tfhub.dev/deepmind/biggan-512/2`).","closed_by":{"login":"ajbrock","id":7751273,"node_id":"MDQ6VXNlcjc3NTEyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/7751273?v=4","gravatar_id":"","url":"https://api.github.com/users/ajbrock","html_url":"https://github.com/ajbrock","followers_url":"https://api.github.com/users/ajbrock/followers","following_url":"https://api.github.com/users/ajbrock/following{/other_user}","gists_url":"https://api.github.com/users/ajbrock/gists{/gist_id}","starred_url":"https://api.github.com/users/ajbrock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajbrock/subscriptions","organizations_url":"https://api.github.com/users/ajbrock/orgs","repos_url":"https://api.github.com/users/ajbrock/repos","events_url":"https://api.github.com/users/ajbrock/events{/privacy}","received_events_url":"https://api.github.com/users/ajbrock/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/14/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ajbrock/BigGAN-PyTorch/issues/14/timeline","performed_via_github_app":null,"state_reason":"completed"}