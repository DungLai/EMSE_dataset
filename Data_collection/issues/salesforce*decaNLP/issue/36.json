{"url":"https://api.github.com/repos/salesforce/decaNLP/issues/36","repository_url":"https://api.github.com/repos/salesforce/decaNLP","labels_url":"https://api.github.com/repos/salesforce/decaNLP/issues/36/labels{/name}","comments_url":"https://api.github.com/repos/salesforce/decaNLP/issues/36/comments","events_url":"https://api.github.com/repos/salesforce/decaNLP/issues/36/events","html_url":"https://github.com/salesforce/decaNLP/issues/36","id":369559951,"node_id":"MDU6SXNzdWUzNjk1NTk5NTE=","number":36,"title":"UnboundLocalError: local variable 'wikisql_ids' referenced before assignment","user":{"login":"dfenglei","id":16026145,"node_id":"MDQ6VXNlcjE2MDI2MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16026145?v=4","gravatar_id":"","url":"https://api.github.com/users/dfenglei","html_url":"https://github.com/dfenglei","followers_url":"https://api.github.com/users/dfenglei/followers","following_url":"https://api.github.com/users/dfenglei/following{/other_user}","gists_url":"https://api.github.com/users/dfenglei/gists{/gist_id}","starred_url":"https://api.github.com/users/dfenglei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfenglei/subscriptions","organizations_url":"https://api.github.com/users/dfenglei/orgs","repos_url":"https://api.github.com/users/dfenglei/repos","events_url":"https://api.github.com/users/dfenglei/events{/privacy}","received_events_url":"https://api.github.com/users/dfenglei/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-10-12T13:49:10Z","updated_at":"2018-10-25T23:06:40Z","closed_at":"2018-10-25T23:06:40Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"An UnboundLocalError occurred when executing the following command.\r\nnvidia-docker run -it --rm -v `pwd`:/decaNLP/  decanlp bash -c \"python /decaNLP/predict.py --evaluate validation --path /decaNLP/mqan_wikisql --checkpoint_name model.pth --gpu 0 --tasks wikisql\"\r\n\r\nArguments:\r\n{'best_checkpoint': '/decaNLP/mqan_wikisql/model.pth',\r\n 'bleu': False,\r\n 'checkpoint_name': 'model.pth',\r\n 'cove': None,\r\n 'data': '/decaNLP/.data/',\r\n 'dimension': 200,\r\n 'dropout_ratio': 0.0,\r\n 'embeddings': '/decaNLP/.embeddings',\r\n 'evaluate': 'validation',\r\n 'gpus': 0,\r\n 'intermediate_cove': None,\r\n 'load': None,\r\n 'lower': True,\r\n 'max_generative_vocab': 50000,\r\n 'max_output_length': 100,\r\n 'max_val_context_length': 400,\r\n 'model': 'MultitaskQuestionAnsweringNetwork',\r\n 'overwrite_predictions': False,\r\n 'path': '/decaNLP/mqan_wikisql',\r\n 'rnn_layers': 1,\r\n 'rouge': False,\r\n 'seed': 123,\r\n 'silent': False,\r\n 'task_to_metric': {'cnn_dailymail': 'avg_rouge',\r\n                    'iwslt.en.de': 'bleu',\r\n                    'multinli.in.out': 'em',\r\n                    'schema': 'em',\r\n                    'squad': 'nf1',\r\n                    'srl': 'nf1',\r\n                    'sst': 'em',\r\n                    'wikisql': 'lfem',\r\n                    'woz.en': 'joint_goal_em',\r\n                    'zre': 'corpus_f1'},\r\n 'tasks': ['wikisql'],\r\n 'transformer_heads': 3,\r\n 'transformer_hidden': 150,\r\n 'transformer_layers': 2,\r\n 'val_batch_size': [256]}\r\nLoading from /decaNLP/mqan_wikisql/model.pth\r\nInitializing Model\r\nLoading wikisql\r\nLoading cached data from /decaNLP/.data/wikisql/data/.cache/query_as_context/dev.jsonl/None\r\nVocabulary has 33414 tokens from training\r\nVocabulary has expanded to 33414 tokens\r\n100% 2196017/2196017 [03:05<00:00, 11823.34it/s]\r\nLoading wikisql\r\nLoading cached data from /decaNLP/.data/wikisql/data/.cache/query_as_context/dev.jsonl/None\r\ndevice: 0\r\nPreparing iterators\r\nMultitaskQuestionAnsweringNetwork has 11,136,116 parameters\r\n**  /decaNLP/mqan_wikisql/model/validation/wikisql.txt  already exists -- this is where predictions are stored **\r\n**  /decaNLP/mqan_wikisql/model/validation/wikisql.gold.txt  already exists -- this is where ground truth answers are stored **\r\n**  /decaNLP/mqan_wikisql/model/validation/wikisql.results.txt  already exists -- this is where metrics are stored **\r\n{\"lfem\":76.0954755967,\"em\":73.4829592685,\"nf1\":97.4454620976,\"nem\":74.2192138701}\r\n\r\nTraceback (most recent call last):\r\n  File \"/decaNLP/predict.py\", line 267, in <module>\r\n    run(args, field, splits, model)\r\n  File \"/decaNLP/predict.py\", line 123, in run\r\n    for i in wikisql_ids:\r\nUnboundLocalError: local variable 'wikisql_ids' referenced before assignment\r\ntest@ubuntu:~/decaNLP$ \r\n","closed_by":{"login":"bmccann","id":3359909,"node_id":"MDQ6VXNlcjMzNTk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3359909?v=4","gravatar_id":"","url":"https://api.github.com/users/bmccann","html_url":"https://github.com/bmccann","followers_url":"https://api.github.com/users/bmccann/followers","following_url":"https://api.github.com/users/bmccann/following{/other_user}","gists_url":"https://api.github.com/users/bmccann/gists{/gist_id}","starred_url":"https://api.github.com/users/bmccann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmccann/subscriptions","organizations_url":"https://api.github.com/users/bmccann/orgs","repos_url":"https://api.github.com/users/bmccann/repos","events_url":"https://api.github.com/users/bmccann/events{/privacy}","received_events_url":"https://api.github.com/users/bmccann/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/salesforce/decaNLP/issues/36/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/salesforce/decaNLP/issues/36/timeline","performed_via_github_app":null,"state_reason":"completed"}