{"url":"https://api.github.com/repos/diffgram/diffgram/issues/1185","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/1185/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/1185/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/1185/events","html_url":"https://github.com/diffgram/diffgram/issues/1185","id":1458648515,"node_id":"I_kwDOCM48Rc5W8TXD","number":1185,"title":"Event table queries are slow","user":{"login":"anthony-sarkis","id":18080164,"node_id":"MDQ6VXNlcjE4MDgwMTY0","avatar_url":"https://avatars.githubusercontent.com/u/18080164?v=4","gravatar_id":"","url":"https://api.github.com/users/anthony-sarkis","html_url":"https://github.com/anthony-sarkis","followers_url":"https://api.github.com/users/anthony-sarkis/followers","following_url":"https://api.github.com/users/anthony-sarkis/following{/other_user}","gists_url":"https://api.github.com/users/anthony-sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/anthony-sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anthony-sarkis/subscriptions","organizations_url":"https://api.github.com/users/anthony-sarkis/orgs","repos_url":"https://api.github.com/users/anthony-sarkis/repos","events_url":"https://api.github.com/users/anthony-sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/anthony-sarkis/received_events","type":"User","site_admin":false},"labels":[{"id":3214748822,"node_id":"MDU6TGFiZWwzMjE0NzQ4ODIy","url":"https://api.github.com/repos/diffgram/diffgram/labels/performance","name":"performance","color":"5E763D","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-11-21T22:01:30Z","updated_at":"2022-11-21T22:01:30Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Event table queries seem to be unusually slow compared to others\r\n\r\nThere is a high volume of data, but 1/20 of instance tables\r\nInstance tables have larger index size and still run fairly fast on inserts\r\nSo perhaps event table needs more indexes? \r\nIndexes can slow insert but not by that much... \r\n\r\nAnother idea is a rolling window for how long we keep events before deletion. for example default to 90 days or something, that would limit the event table size\r\n\r\nWe could move to other event storage concepts but I think there's some fairly clear paths within current setup\r\n\r\nProbably a lower priority then the related https://github.com/diffgram/diffgram/issues/1182","closed_by":null,"reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/1185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/1185/timeline","performed_via_github_app":null,"state_reason":null}