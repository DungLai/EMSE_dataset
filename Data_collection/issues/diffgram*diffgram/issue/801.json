{"url":"https://api.github.com/repos/diffgram/diffgram/issues/801","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/801/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/801/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/801/events","html_url":"https://github.com/diffgram/diffgram/issues/801","id":1194633952,"node_id":"I_kwDOCM48Rc5HNKrg","number":801,"title":"E2E Tests in Parallel Sometimes Fail to Upload to Azure","user":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"labels":[{"id":1048365660,"node_id":"MDU6TGFiZWwxMDQ4MzY1NjYw","url":"https://api.github.com/repos/diffgram/diffgram/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2935242619,"node_id":"MDU6TGFiZWwyOTM1MjQyNjE5","url":"https://api.github.com/repos/diffgram/diffgram/labels/lowpriority","name":"lowpriority","color":"397733","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-06T13:39:03Z","updated_at":"2022-04-06T13:39:03Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"We get this error from time to time on the cypress dashboard when running tests in parallel:\r\n\r\n```\r\n2022-04-06T13:06:41.3295954Z Traceback (most recent call last):\r\n2022-04-06T13:06:41.3296453Z   File \"/__w/diffgram/diffgram/walrus/methods/input/upload.py\", line 270, in process_chunk\r\n2022-04-06T13:06:41.3296849Z     input = self.input,\r\n2022-04-06T13:06:41.3297271Z   File \"/__w/diffgram/shared/data_tools_core_azure.py\", line 108, in transmit_chunk_of_resumable_upload\r\n2022-04-06T13:06:41.3297688Z     blob_client.commit_block_list(blocks)\r\n2022-04-06T13:06:41.3298267Z   File \"/usr/local/lib/python3.7/site-packages/azure/core/tracing/decorator.py\", line 73, in wrapper_use_tracer\r\n2022-04-06T13:06:41.3298660Z     return func(*args, **kwargs)\r\n2022-04-06T13:06:41.3299217Z   File \"/usr/local/lib/python3.7/site-packages/azure/storage/blob/_blob_client.py\", line 2480, in commit_block_list\r\n2022-04-06T13:06:41.3299608Z     process_storage_error(error)\r\n2022-04-06T13:06:41.3300200Z   File \"/usr/local/lib/python3.7/site-packages/azure/storage/blob/_shared/response_handlers.py\", line 150, in process_storage_error\r\n2022-04-06T13:06:41.3300635Z     error.raise_with_traceback()\r\n2022-04-06T13:06:41.3301362Z   File \"/usr/local/lib/python3.7/site-packages/azure/core/exceptions.py\", line 247, in raise_with_traceback\r\n2022-04-06T13:06:41.3301849Z     raise super(AzureError, self).with_traceback(self.exc_traceback)\r\n2022-04-06T13:06:41.3302566Z   File \"/usr/local/lib/python3.7/site-packages/azure/storage/blob/_blob_client.py\", line 2478, in commit_block_list\r\n2022-04-06T13:06:41.3303047Z     return self._client.block_blob.commit_block_list(**options) # type: ignore\r\n2022-04-06T13:06:41.3303756Z   File \"/usr/local/lib/python3.7/site-packages/azure/storage/blob/_generated/operations/_block_blob_operations.py\", line 987, in commit_block_list\r\n2022-04-06T13:06:41.3304255Z     raise HttpResponseError(response=response, model=error)\r\n2022-04-06T13:06:41.3304758Z azure.core.exceptions.HttpResponseError: The specified block list is invalid.\r\n2022-04-06T13:06:41.3305296Z RequestId:ea8de83b-801e-0065-0ab7-49712b000000\r\n2022-04-06T13:06:41.3305693Z Time:2022-04-06T13:06:41.2805971Z\r\n2022-04-06T13:06:41.3305995Z ErrorCode:InvalidBlockList\r\n2022-04-06T13:06:41.3306245Z Error:None\r\n2022-04-06T13:06:41.3306873Z Content: <?xml version=\"1.0\" encoding=\"utf-8\"?><Error><Code>InvalidBlockList</Code><Message>The specified block list is invalid.\r\n2022-04-06T13:06:41.3307427Z RequestId:ea8de83b-801e-0065-0ab7-49712b000000\r\n2022-04-06T13:06:41.3307866Z Time:2022-04-06T13:06:41.2805971Z</Message></Error>\r\n\r\n```\r\n\r\nWe'll need to see what's causing this and how can we prevent it since it sometimes give false alarms on the e2e tests.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/801/timeline","performed_via_github_app":null,"state_reason":null}