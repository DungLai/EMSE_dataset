{"url":"https://api.github.com/repos/diffgram/diffgram/issues/226","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/226/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/226/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/226/events","html_url":"https://github.com/diffgram/diffgram/issues/226","id":969344452,"node_id":"MDU6SXNzdWU5NjkzNDQ0NTI=","number":226,"title":"Duplicate Instance Data Detection and Discarding","user":{"login":"anthony-sarkis","id":18080164,"node_id":"MDQ6VXNlcjE4MDgwMTY0","avatar_url":"https://avatars.githubusercontent.com/u/18080164?v=4","gravatar_id":"","url":"https://api.github.com/users/anthony-sarkis","html_url":"https://github.com/anthony-sarkis","followers_url":"https://api.github.com/users/anthony-sarkis/followers","following_url":"https://api.github.com/users/anthony-sarkis/following{/other_user}","gists_url":"https://api.github.com/users/anthony-sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/anthony-sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anthony-sarkis/subscriptions","organizations_url":"https://api.github.com/users/anthony-sarkis/orgs","repos_url":"https://api.github.com/users/anthony-sarkis/repos","events_url":"https://api.github.com/users/anthony-sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/anthony-sarkis/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-12T18:33:38Z","updated_at":"2021-08-13T19:30:24Z","closed_at":"2021-08-13T19:30:24Z","author_association":"MEMBER","active_lock_reason":null,"body":"https://github.com/diffgram/diffgram-enterprise/issues/120\r\n\r\nWhen an instance has the same hash (everything except ids), and we try to save it, it creates unexpected states.\r\nFor example, deletion expects only one hash to delete at a time. This causes other validations to fail\r\nsince an instance may be available in the database, but isn't saved to the cache (because it should have been deleted).\r\n\r\nThe main question here is \"How do we want to handle the case when two instances has exactly the same hash data (spatial, attributes, labels, etc.)?\"\r\n\r\nThe proposed new answer is: \"We will accept the latest version and drop rest\".\r\n\r\nBecuase there's no clear value to having an active (not deleted), perfectly identical, duplicate instance.\r\nI think it also could lead to many unexpected states eg counts being off, visually confusing, etc.\r\n \r\nExample cases\r\n* User sends duplicates instances at ingest\r\n* System processes duplicates instances (diffgram error, including rare issues like code merge after tests had passed etc)\r\n* User copy and pastes quickly\r\n\r\nContext\r\nThe “deduplication” feature we already have works on IDs (for versioning) not instance data \r\n\r\nMore context in enterprise ticket but putting here for public reference\r\nhttps://github.com/diffgram/diffgram-enterprise/issues/120","closed_by":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/226/timeline","performed_via_github_app":null,"state_reason":"completed"}