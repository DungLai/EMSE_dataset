{"url":"https://api.github.com/repos/diffgram/diffgram/issues/970","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/970/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/970/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/970/events","html_url":"https://github.com/diffgram/diffgram/issues/970","id":1301139775,"node_id":"I_kwDOCM48Rc5NjdE_","number":970,"title":"Refactor passing user email to the events","user":{"login":"vitalii-bulyzhyn","id":46309116,"node_id":"MDQ6VXNlcjQ2MzA5MTE2","avatar_url":"https://avatars.githubusercontent.com/u/46309116?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalii-bulyzhyn","html_url":"https://github.com/vitalii-bulyzhyn","followers_url":"https://api.github.com/users/vitalii-bulyzhyn/followers","following_url":"https://api.github.com/users/vitalii-bulyzhyn/following{/other_user}","gists_url":"https://api.github.com/users/vitalii-bulyzhyn/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalii-bulyzhyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalii-bulyzhyn/subscriptions","organizations_url":"https://api.github.com/users/vitalii-bulyzhyn/orgs","repos_url":"https://api.github.com/users/vitalii-bulyzhyn/repos","events_url":"https://api.github.com/users/vitalii-bulyzhyn/events{/privacy}","received_events_url":"https://api.github.com/users/vitalii-bulyzhyn/received_events","type":"User","site_admin":false},"labels":[{"id":3008085806,"node_id":"MDU6TGFiZWwzMDA4MDg1ODA2","url":"https://api.github.com/repos/diffgram/diffgram/labels/refactor","name":"refactor","color":"CF5312","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-07-11T19:40:36Z","updated_at":"2022-07-11T22:24:15Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"Now we are passing user email to the events as following:\r\n\r\n```\r\nEvent.new(\r\n            session = session,\r\n            kind = \"new_attribute_template_group\",\r\n            member = user.member if user else None,\r\n            success = True,\r\n            project_id = project.id,\r\n            email = user.email\r\n        )\r\n```\r\n\r\nNow, if we want to trigger this (or I assume any other) endpoint directly with generated credentials, this will though the error becase \"user\" won't exist\r\n\r\nThe idea is to move getting user inside the new method of Event class, so we don't pass it as a parameter all the time (as @PJEstrada mentioned that may not work for all the events, so we need to check them all)","closed_by":null,"reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/970/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/970/timeline","performed_via_github_app":null,"state_reason":null}