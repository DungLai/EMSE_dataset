{"url":"https://api.github.com/repos/diffgram/diffgram/issues/1145","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/1145/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/1145/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/1145/events","html_url":"https://github.com/diffgram/diffgram/issues/1145","id":1433973149,"node_id":"I_kwDOCM48Rc5VeLGd","number":1145,"title":"Pre-load data in task context","user":{"login":"anthony-sarkis","id":18080164,"node_id":"MDQ6VXNlcjE4MDgwMTY0","avatar_url":"https://avatars.githubusercontent.com/u/18080164?v=4","gravatar_id":"","url":"https://api.github.com/users/anthony-sarkis","html_url":"https://github.com/anthony-sarkis","followers_url":"https://api.github.com/users/anthony-sarkis/followers","following_url":"https://api.github.com/users/anthony-sarkis/following{/other_user}","gists_url":"https://api.github.com/users/anthony-sarkis/gists{/gist_id}","starred_url":"https://api.github.com/users/anthony-sarkis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anthony-sarkis/subscriptions","organizations_url":"https://api.github.com/users/anthony-sarkis/orgs","repos_url":"https://api.github.com/users/anthony-sarkis/repos","events_url":"https://api.github.com/users/anthony-sarkis/events{/privacy}","received_events_url":"https://api.github.com/users/anthony-sarkis/received_events","type":"User","site_admin":false},"labels":[{"id":3214748822,"node_id":"MDU6TGFiZWwzMjE0NzQ4ODIy","url":"https://api.github.com/repos/diffgram/diffgram/labels/performance","name":"performance","color":"5E763D","default":false,"description":""},{"id":4646893256,"node_id":"LA_kwDOCM48Rc8AAAABFPn2yA","url":"https://api.github.com/repos/diffgram/diffgram/labels/annotation","name":"annotation","color":"0052CC","default":false,"description":""},{"id":4755017262,"node_id":"LA_kwDOCM48Rc8AAAABG2vOLg","url":"https://api.github.com/repos/diffgram/diffgram/labels/perception","name":"perception","color":"54E59F","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"vitalii-bulyzhyn","id":46309116,"node_id":"MDQ6VXNlcjQ2MzA5MTE2","avatar_url":"https://avatars.githubusercontent.com/u/46309116?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalii-bulyzhyn","html_url":"https://github.com/vitalii-bulyzhyn","followers_url":"https://api.github.com/users/vitalii-bulyzhyn/followers","following_url":"https://api.github.com/users/vitalii-bulyzhyn/following{/other_user}","gists_url":"https://api.github.com/users/vitalii-bulyzhyn/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalii-bulyzhyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalii-bulyzhyn/subscriptions","organizations_url":"https://api.github.com/users/vitalii-bulyzhyn/orgs","repos_url":"https://api.github.com/users/vitalii-bulyzhyn/repos","events_url":"https://api.github.com/users/vitalii-bulyzhyn/events{/privacy}","received_events_url":"https://api.github.com/users/vitalii-bulyzhyn/received_events","type":"User","site_admin":false},"assignees":[{"login":"vitalii-bulyzhyn","id":46309116,"node_id":"MDQ6VXNlcjQ2MzA5MTE2","avatar_url":"https://avatars.githubusercontent.com/u/46309116?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalii-bulyzhyn","html_url":"https://github.com/vitalii-bulyzhyn","followers_url":"https://api.github.com/users/vitalii-bulyzhyn/followers","following_url":"https://api.github.com/users/vitalii-bulyzhyn/following{/other_user}","gists_url":"https://api.github.com/users/vitalii-bulyzhyn/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalii-bulyzhyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalii-bulyzhyn/subscriptions","organizations_url":"https://api.github.com/users/vitalii-bulyzhyn/orgs","repos_url":"https://api.github.com/users/vitalii-bulyzhyn/repos","events_url":"https://api.github.com/users/vitalii-bulyzhyn/events{/privacy}","received_events_url":"https://api.github.com/users/vitalii-bulyzhyn/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-11-03T01:13:43Z","updated_at":"2022-11-17T16:58:03Z","closed_at":"2022-11-17T16:58:03Z","author_association":"MEMBER","active_lock_reason":null,"body":"Main idea is to preload some or all of the data needed so that switching tasks has user perception of feeling faster.\r\n\r\nAnalogy is like app loading on early iphones where it appeared to load like magic (and it was just a screenshot).\r\n\r\nIn theory it would take the user's perception of something that's 2-3 seconds down to <100 ms or whatever time it takes to swap items in memory and re-render.\r\n\r\nBefore we resisted this becuase usually it was more of a \"micro\" optimization but a few things have changed:\r\n\r\n1. larger Schema's, meaning a different Schema by itself may take some loading time\r\n2. more annotations, instances, attributes etc.\r\n3. more config choices, like the custom url signer etc.\r\n\r\nCould start with just images UI. (But concepts would carry over)\r\nNaively one implementation could be something like\r\n\r\n1. After load, start pre-loader:\r\n2. Auto fetch next task, as if user clicked next\r\n3. Store in a new cache. fetching the image data itself may require making a separate request.\r\n4. When clicking next, check cache\r\n5. If user exits and cache exists, try to un-assign maybe?\r\n6. other risks /edge cases\r\n\r\nThere's some concerns here around reserving the next task, and then if the user doesn't complete it un-assigning it or something like that.\r\n\r\nFeels like some edge cases but maybe for now the benefits to user perception maybe worth it.\r\n\r\nOther ideas from call\r\n* Like video frame buffer, getting previous 3, storing them next 3 etc. \r\ne.g. then can cycle forward or backwards\r\n* Trigger to auto fetch would be moving forward like video buffer\r\n* Better use property of assign/or not\r\ne.g. API /next-task auto assigns users\r\ne.g. query param assign_user : bool, \r\nso in prefetch context set to false, if user clicks button set true to the one task\r\nReuse assign call\r\n\r\n* assignment ways multiple ways, maybe end user config\r\ne.g. assigning and asking if user wants to do more\r\nor the admin wants to control it\r\n\r\n* main thing with assignment is blocking to prevent two people working on the same file\r\n\r\n* seperate assignment from sent by pre-fetch?\r\n\r\nSimple\r\n1) V1 Fetch n number of tasks and assign them\r\nV1 Avoid back word fetching for now since assignment problem\r\nV2 which is if it is already assigned it can still fetch it, but don't assign it\r\nConfigurable number of pre-fetch\r\n\r\n2) As needed we add features for detection of dead tasks \r\nCould be part of workflow\r\nExample actions could be alert on performance, unassign tasks,\r\nExample when backend fetches next task,\r\nit could check if any tasks are no updated, and not completed, and then un-assigns user,\r\nlike walrus\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n","closed_by":{"login":"vitalii-bulyzhyn","id":46309116,"node_id":"MDQ6VXNlcjQ2MzA5MTE2","avatar_url":"https://avatars.githubusercontent.com/u/46309116?v=4","gravatar_id":"","url":"https://api.github.com/users/vitalii-bulyzhyn","html_url":"https://github.com/vitalii-bulyzhyn","followers_url":"https://api.github.com/users/vitalii-bulyzhyn/followers","following_url":"https://api.github.com/users/vitalii-bulyzhyn/following{/other_user}","gists_url":"https://api.github.com/users/vitalii-bulyzhyn/gists{/gist_id}","starred_url":"https://api.github.com/users/vitalii-bulyzhyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitalii-bulyzhyn/subscriptions","organizations_url":"https://api.github.com/users/vitalii-bulyzhyn/orgs","repos_url":"https://api.github.com/users/vitalii-bulyzhyn/repos","events_url":"https://api.github.com/users/vitalii-bulyzhyn/events{/privacy}","received_events_url":"https://api.github.com/users/vitalii-bulyzhyn/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/1145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/1145/timeline","performed_via_github_app":null,"state_reason":"completed"}