{"url":"https://api.github.com/repos/diffgram/diffgram/issues/1075","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/1075/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/1075/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/1075/events","html_url":"https://github.com/diffgram/diffgram/issues/1075","id":1390180976,"node_id":"I_kwDOCM48Rc5S3Hpw","number":1075,"title":"upload EntityTooSmall","user":{"login":"lackray","id":19989329,"node_id":"MDQ6VXNlcjE5OTg5MzI5","avatar_url":"https://avatars.githubusercontent.com/u/19989329?v=4","gravatar_id":"","url":"https://api.github.com/users/lackray","html_url":"https://github.com/lackray","followers_url":"https://api.github.com/users/lackray/followers","following_url":"https://api.github.com/users/lackray/following{/other_user}","gists_url":"https://api.github.com/users/lackray/gists{/gist_id}","starred_url":"https://api.github.com/users/lackray/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lackray/subscriptions","organizations_url":"https://api.github.com/users/lackray/orgs","repos_url":"https://api.github.com/users/lackray/repos","events_url":"https://api.github.com/users/lackray/events{/privacy}","received_events_url":"https://api.github.com/users/lackray/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2022-09-29T03:02:21Z","updated_at":"2022-10-03T21:09:21Z","closed_at":"2022-10-03T21:03:22Z","author_association":"NONE","active_lock_reason":null,"body":"After #1070,now i can upload.During uploading,comes another exception.\r\n**this is my console error:**\r\n![image](https://user-images.githubusercontent.com/19989329/192928061-09051543-ccf8-4cb5-a266-38068fd84858.png)\r\n**so,i go to check the docker-walrus,it gives me this:**\r\n![image](https://user-images.githubusercontent.com/19989329/192928346-db1af355-8027-4557-8b25-644195f594da.png)\r\n\r\nThere is no minimum limitation of multipart upload on S3 API of minio server. \r\n![image](https://user-images.githubusercontent.com/19989329/192930779-2e5c7b1b-9c32-40ff-95e3-c27f3e7cc4f9.png)\r\n\r\nHow can i change the code inside `shared/data_tools_core_s3.py` line 153? @PJEstrada \r\n\r\nHere is my temporary solution,i comment out the `MultipartUpload` inside `shared/data_tools_core_s3.py` line 148-154 related.\r\nWhen i start to run the upload script,minio server connection error occurs.This is werid,i dont know why.Is this about message queue jam issue?Sometimes when i start upload script,the message queue dont handle it.MQ always do the heartbeat check,just miss the real job!\r\n![image](https://user-images.githubusercontent.com/19989329/192987176-aacf6236-3e3e-4d76-a052-fe3058db8a75.png)\r\n\r\nAfter several tries,finally i get upload worked.I dont do anything except restarting all diffgram docker services.\r\n![image](https://user-images.githubusercontent.com/19989329/192988377-15be162e-3977-4ec6-bd93-c5fbdd44f0e7.png)\r\n\r\nSaddly there is always a but,here comes an error.\r\n![image](https://user-images.githubusercontent.com/19989329/192989043-dda1c1bf-a1a7-43dd-8fc1-b85a0751f2fd.png)\r\ndocker hosted diffgram view:\r\n![image](https://user-images.githubusercontent.com/19989329/192989244-598399ac-d6a2-4a8c-8297-f3bbdc520a25.png)\r\nI go to check the minio buckets page,there is no uploaded file.\r\n![image](https://user-images.githubusercontent.com/19989329/192989956-5d8cb17d-5f1f-4357-800b-ad3ec547125f.png)\r\n\r\nDoes it mean my file uploading fail?I dont know how to edit code inside `shared/data_tools_core_s3.py`,it seems that my temporary solution will lead to unexpected errors.\r\n\r\n\r\n","closed_by":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/1075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/1075/timeline","performed_via_github_app":null,"state_reason":"completed"}