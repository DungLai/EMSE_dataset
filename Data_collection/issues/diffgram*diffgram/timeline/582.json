[{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1033299353","html_url":"https://github.com/diffgram/diffgram/issues/582#issuecomment-1033299353","issue_url":"https://api.github.com/repos/diffgram/diffgram/issues/582","id":1033299353,"node_id":"IC_kwDOCM48Rc49luWZ","user":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"created_at":"2022-02-09T03:12:14Z","updated_at":"2022-02-10T19:19:24Z","author_association":"CONTRIBUTOR","body":"To get this issue a bit more clear, I got it sort of working by butchering the https://github.com/diffgram/diffgram/blob/5d2d4e3/default/db-init.sh file.\r\n\r\n```\r\n#!/bin/sh\r\n# db-init.sh\r\n\r\nset -e\r\n\r\nhost=\"$1\"\r\nshift\r\ncmd=\"$@\"\r\n\r\nPGPASSWORD=MySecurePassword psql -h \"X.X.X.X\" -U \"postgres\" -c '\\q';\r\n\r\ncd shared; alembic upgrade head\r\nexec $cmd\r\n```\r\n\r\nSo somewhere the host (and maybe even password) for the external db doesn't arrive to the diffgram_default_1 container.\r\n\r\nEdit:\r\nI should probably mention that I am using an external hosted Postgres database at Google cloud","reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1033299353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036113741","html_url":"https://github.com/diffgram/diffgram/issues/582#issuecomment-1036113741","issue_url":"https://api.github.com/repos/diffgram/diffgram/issues/582","id":1036113741,"node_id":"IC_kwDOCM48Rc49wddN","user":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"created_at":"2022-02-11T11:36:50Z","updated_at":"2022-02-11T11:36:50Z","author_association":"CONTRIBUTOR","body":"I think I found the problem. The docker-compose file has this line:\r\n```\r\ncommand: [\"/app/db-init.sh\", \"db\", \"python3\", \"-u\", \"/app/main.py\"]\r\n```\r\n\r\nThis means the host will be db, which does not translate into the external host set earlier.\r\n\r\n@PJEstrada What would you think is the proper place to fix this? All that needs to be adjusted would be the https://github.com/diffgram/diffgram/blob/master/default/db-init.sh to get the proper hostname and postgres password from the DATABASE_URL. Let me know if you have other thoughts and I will happily make a proposition for a change so local and external DB will work for everyone.","reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036113741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false}},{"id":6050616663,"node_id":"MEE_lADOCM48Rc5DO2pfzwAAAAFopRVX","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6050616663","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-11T11:36:50Z","performed_via_github_app":null},{"id":6050616668,"node_id":"SE_lADOCM48Rc5DO2pfzwAAAAFopRVc","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6050616668","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-11T11:36:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036299038","html_url":"https://github.com/diffgram/diffgram/issues/582#issuecomment-1036299038","issue_url":"https://api.github.com/repos/diffgram/diffgram/issues/582","id":1036299038,"node_id":"IC_kwDOCM48Rc49xKse","user":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"created_at":"2022-02-11T14:57:51Z","updated_at":"2022-02-11T14:59:07Z","author_association":"MEMBER","body":"Hi @MathijsNL,\r\n\r\nGood catch on this one!\r\n\r\nI think what we can do for this is just replace the `\"db\"` string on the command to the ENV variable that includes only the postgres host. \r\n\r\nTo do this I think these ideas can work:\r\n\r\n1. On the `install.py` script. We can modify the function:\r\n```\r\n    def database_config(self):\r\n        local_database = bcolors.inputcolor(\r\n            'Do you want to use the local database? Y/N [Press Enter to use Local DB]: ')\r\n        local_database = local_database.lower()\r\n        if local_database == 'y' or local_database == '':\r\n            self.local_database = True\r\n        else:\r\n            self.local_database = False\r\n            valid = False\r\n            while not valid:\r\n                database_url = bcolors.inputcolor(\r\n                    '\\n\\n >> Please enter the Remote Postgres Database URL\\n    NOTE: The syntax for URL is: \"postgresql+psycopg2://<db_username>:<db_pass>@/<db_name>?host=<db_host>\": ',\r\n                    bcolors.OKBLUE)\r\n\r\n                bcolors.printcolor('Testing DB Connection...', bcolors.WARNING)\r\n                try:\r\n                    # Testing connection\r\n                    engine = create_engine(database_url)\r\n                    conn = engine.connect()\r\n                    conn.close()\r\n                    valid = True\r\n                    self.database_url = database_url\r\n                    bcolors.printcolor('âœ“ DB connection succesful!', bcolors.OKGREEN)\r\n                    time.sleep(2)\r\n                except Exception as e:\r\n                    bcolors.printcolor(\r\n                        'Connection test failed: Please check that your DB URL has the correct values and try again.',\r\n                        bcolors.FAIL)\r\n                    bcolors.printcolor('Error data: {}'.format(str(e)), bcolors.FAIL)\r\n                    valid = False\r\n```\r\n\r\nSo that we can extract the host_name from the `self.database_url` and save it on a new attribute `self.db_host`.\r\n\r\nThen on the  `populate_env()` function in `install.py` we can add a new line similar to this:\r\n\r\n`            env_file += 'DATABASE_HOST={}\\n'.format(self.db_host)`\r\n\r\nThis would allow us to have the host on a separate env variable.\r\n\r\nWe can the just reference this on the command like this:\r\n`\r\ncommand: [\"/app/db-init.sh\", ${DATABASE_HOST} \"python3\", \"-u\", \"/app/main.py\"]`\r\n\r\nI'm not quire sure if we have to add the double quotes or not to the env variable reference but the would be the main idea. Also for the password. we would have to implement something similar.\r\n\r\nLet me know your thoughts on this ","reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036299038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false}},{"id":6051889280,"node_id":"MEE_lADOCM48Rc5DO2pfzwAAAAFouICA","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6051889280","actor":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-11T14:57:52Z","performed_via_github_app":null},{"id":6051889287,"node_id":"SE_lADOCM48Rc5DO2pfzwAAAAFouICH","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6051889287","actor":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-11T14:57:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036319397","html_url":"https://github.com/diffgram/diffgram/issues/582#issuecomment-1036319397","issue_url":"https://api.github.com/repos/diffgram/diffgram/issues/582","id":1036319397,"node_id":"IC_kwDOCM48Rc49xPql","user":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"created_at":"2022-02-11T15:14:33Z","updated_at":"2022-02-11T15:14:33Z","author_association":"CONTRIBUTOR","body":"Hey @PJEstrada,\r\n\r\nNice ideas there.\r\n\r\nI was thinking of asking for a few more questions if you choose external DB instead of the connection url.\r\n\r\n- db_username\r\n- db_pass\r\n- db_name\r\n- db_host\r\n\r\nThen it is very simple to create the database url:\r\n```\r\ndatabase_url  = f\"postgresql+psycopg2://{db_username}:{db_pass}@/{db_name}?host={db_host}\"\r\n```\r\nThe variables will be separated from the start, and the env variables can be set accordingly. Escaping passwords might be something to look into as well to make sure it always works.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036319397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false}},{"id":6052008365,"node_id":"MEE_lADOCM48Rc5DO2pfzwAAAAFoulGt","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6052008365","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-11T15:14:33Z","performed_via_github_app":null},{"id":6052008372,"node_id":"SE_lADOCM48Rc5DO2pfzwAAAAFoulG0","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6052008372","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-11T15:14:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036465680","html_url":"https://github.com/diffgram/diffgram/issues/582#issuecomment-1036465680","issue_url":"https://api.github.com/repos/diffgram/diffgram/issues/582","id":1036465680,"node_id":"IC_kwDOCM48Rc49xzYQ","user":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"created_at":"2022-02-11T17:54:33Z","updated_at":"2022-02-11T17:54:59Z","author_association":"MEMBER","body":"Sure those are great ideas too,\r\n\r\nFor the URL I think there might be 2 types of syntax for it. I've seen users also use this:\r\n\r\n`connector + \"://\" + db_username + \":\" + db_pass + \"@\" + db_host + \"/\" + db_name`\r\n\r\nI'm not completely sure if they are equivalent or not but I think we can try both and see if the systems behave correctly, or we need to follow the above syntax always.\r\n","reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/comments/1036465680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false}},{"actor":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"created_at":"2022-02-12T00:07:16Z","updated_at":"2022-02-12T00:07:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/591","repository_url":"https://api.github.com/repos/diffgram/diffgram","labels_url":"https://api.github.com/repos/diffgram/diffgram/issues/591/labels{/name}","comments_url":"https://api.github.com/repos/diffgram/diffgram/issues/591/comments","events_url":"https://api.github.com/repos/diffgram/diffgram/issues/591/events","html_url":"https://github.com/diffgram/diffgram/pull/591","id":1133350390,"node_id":"PR_kwDOCM48Rc4ykEJb","number":591,"title":"Fix external database settings","user":{"login":"MathijsNL","id":1612886,"node_id":"MDQ6VXNlcjE2MTI4ODY=","avatar_url":"https://avatars.githubusercontent.com/u/1612886?v=4","gravatar_id":"","url":"https://api.github.com/users/MathijsNL","html_url":"https://github.com/MathijsNL","followers_url":"https://api.github.com/users/MathijsNL/followers","following_url":"https://api.github.com/users/MathijsNL/following{/other_user}","gists_url":"https://api.github.com/users/MathijsNL/gists{/gist_id}","starred_url":"https://api.github.com/users/MathijsNL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MathijsNL/subscriptions","organizations_url":"https://api.github.com/users/MathijsNL/orgs","repos_url":"https://api.github.com/users/MathijsNL/repos","events_url":"https://api.github.com/users/MathijsNL/events{/privacy}","received_events_url":"https://api.github.com/users/MathijsNL/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-02-12T00:07:16Z","updated_at":"2022-02-16T14:53:24Z","closed_at":"2022-02-16T14:53:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":147733573,"node_id":"MDEwOlJlcG9zaXRvcnkxNDc3MzM1NzM=","name":"diffgram","full_name":"diffgram/diffgram","private":false,"owner":{"login":"diffgram","id":41310671,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQxMzEwNjcx","avatar_url":"https://avatars.githubusercontent.com/u/41310671?v=4","gravatar_id":"","url":"https://api.github.com/users/diffgram","html_url":"https://github.com/diffgram","followers_url":"https://api.github.com/users/diffgram/followers","following_url":"https://api.github.com/users/diffgram/following{/other_user}","gists_url":"https://api.github.com/users/diffgram/gists{/gist_id}","starred_url":"https://api.github.com/users/diffgram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diffgram/subscriptions","organizations_url":"https://api.github.com/users/diffgram/orgs","repos_url":"https://api.github.com/users/diffgram/repos","events_url":"https://api.github.com/users/diffgram/events{/privacy}","received_events_url":"https://api.github.com/users/diffgram/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/diffgram/diffgram","description":"Training Data (Annotation, Catalog, Workflow) for all Data Types (Image, Video, 3D, Text, Geo, Audio, more) at scale.","fork":false,"url":"https://api.github.com/repos/diffgram/diffgram","forks_url":"https://api.github.com/repos/diffgram/diffgram/forks","keys_url":"https://api.github.com/repos/diffgram/diffgram/keys{/key_id}","collaborators_url":"https://api.github.com/repos/diffgram/diffgram/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/diffgram/diffgram/teams","hooks_url":"https://api.github.com/repos/diffgram/diffgram/hooks","issue_events_url":"https://api.github.com/repos/diffgram/diffgram/issues/events{/number}","events_url":"https://api.github.com/repos/diffgram/diffgram/events","assignees_url":"https://api.github.com/repos/diffgram/diffgram/assignees{/user}","branches_url":"https://api.github.com/repos/diffgram/diffgram/branches{/branch}","tags_url":"https://api.github.com/repos/diffgram/diffgram/tags","blobs_url":"https://api.github.com/repos/diffgram/diffgram/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/diffgram/diffgram/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/diffgram/diffgram/git/refs{/sha}","trees_url":"https://api.github.com/repos/diffgram/diffgram/git/trees{/sha}","statuses_url":"https://api.github.com/repos/diffgram/diffgram/statuses/{sha}","languages_url":"https://api.github.com/repos/diffgram/diffgram/languages","stargazers_url":"https://api.github.com/repos/diffgram/diffgram/stargazers","contributors_url":"https://api.github.com/repos/diffgram/diffgram/contributors","subscribers_url":"https://api.github.com/repos/diffgram/diffgram/subscribers","subscription_url":"https://api.github.com/repos/diffgram/diffgram/subscription","commits_url":"https://api.github.com/repos/diffgram/diffgram/commits{/sha}","git_commits_url":"https://api.github.com/repos/diffgram/diffgram/git/commits{/sha}","comments_url":"https://api.github.com/repos/diffgram/diffgram/comments{/number}","issue_comment_url":"https://api.github.com/repos/diffgram/diffgram/issues/comments{/number}","contents_url":"https://api.github.com/repos/diffgram/diffgram/contents/{+path}","compare_url":"https://api.github.com/repos/diffgram/diffgram/compare/{base}...{head}","merges_url":"https://api.github.com/repos/diffgram/diffgram/merges","archive_url":"https://api.github.com/repos/diffgram/diffgram/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/diffgram/diffgram/downloads","issues_url":"https://api.github.com/repos/diffgram/diffgram/issues{/number}","pulls_url":"https://api.github.com/repos/diffgram/diffgram/pulls{/number}","milestones_url":"https://api.github.com/repos/diffgram/diffgram/milestones{/number}","notifications_url":"https://api.github.com/repos/diffgram/diffgram/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/diffgram/diffgram/labels{/name}","releases_url":"https://api.github.com/repos/diffgram/diffgram/releases{/id}","deployments_url":"https://api.github.com/repos/diffgram/diffgram/deployments","created_at":"2018-09-06T21:04:23Z","updated_at":"2023-01-19T12:20:49Z","pushed_at":"2023-01-19T20:27:21Z","git_url":"git://github.com/diffgram/diffgram.git","ssh_url":"git@github.com:diffgram/diffgram.git","clone_url":"https://github.com/diffgram/diffgram.git","svn_url":"https://github.com/diffgram/diffgram","homepage":"https://diffgram.com","size":55216,"stargazers_count":1611,"watchers_count":1611,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":98,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":365,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["annotation","annotation-tool","annotations","data","data-analytics","data-annotation","data-science","datasets","deep-learning","helm","image-annotation","kubernetes","labeling","machine-learning","mlops","object-detection","segmentation","training-data","training-data-storage","video-annotation"],"visibility":"public","forks":98,"open_issues":365,"watchers":1611,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/diffgram/diffgram/pulls/591","html_url":"https://github.com/diffgram/diffgram/pull/591","diff_url":"https://github.com/diffgram/diffgram/pull/591.diff","patch_url":"https://github.com/diffgram/diffgram/pull/591.patch","merged_at":"2022-02-16T14:53:24Z"},"body":"This will fix #582\r\n\r\nMost things discussed there are included I think, also the different variation of the connection url.\r\n\r\nI tested it and it works for external db, didn't test it for internal db.\r\n\r\nThe db-init.sh might need some cleaning up, not sure if we need the parameters and I am unsure what the following lines are doing in there:\r\n\r\n```\r\nshift\r\ncmd=\"$@\"\r\n```\r\n\r\n$host parameter can be replaced by $DATABASE_HOST","reactions":{"url":"https://api.github.com/repos/diffgram/diffgram/issues/591/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/diffgram/diffgram/issues/591/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6083415162,"node_id":"CE_lADOCM48Rc5DO2pfzwAAAAFqmYx6","url":"https://api.github.com/repos/diffgram/diffgram/issues/events/6083415162","actor":{"login":"PJEstrada","id":6606958,"node_id":"MDQ6VXNlcjY2MDY5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6606958?v=4","gravatar_id":"","url":"https://api.github.com/users/PJEstrada","html_url":"https://github.com/PJEstrada","followers_url":"https://api.github.com/users/PJEstrada/followers","following_url":"https://api.github.com/users/PJEstrada/following{/other_user}","gists_url":"https://api.github.com/users/PJEstrada/gists{/gist_id}","starred_url":"https://api.github.com/users/PJEstrada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PJEstrada/subscriptions","organizations_url":"https://api.github.com/users/PJEstrada/orgs","repos_url":"https://api.github.com/users/PJEstrada/repos","events_url":"https://api.github.com/users/PJEstrada/events{/privacy}","received_events_url":"https://api.github.com/users/PJEstrada/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-02-16T14:53:24Z","state_reason":null,"performed_via_github_app":null}]