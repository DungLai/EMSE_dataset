[{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/607794878","html_url":"https://github.com/Cartucho/mAP/issues/104#issuecomment-607794878","issue_url":"https://api.github.com/repos/Cartucho/mAP/issues/104","id":607794878,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzc5NDg3OA==","user":{"login":"PaulZhangIsing","id":27721543,"node_id":"MDQ6VXNlcjI3NzIxNTQz","avatar_url":"https://avatars.githubusercontent.com/u/27721543?v=4","gravatar_id":"","url":"https://api.github.com/users/PaulZhangIsing","html_url":"https://github.com/PaulZhangIsing","followers_url":"https://api.github.com/users/PaulZhangIsing/followers","following_url":"https://api.github.com/users/PaulZhangIsing/following{/other_user}","gists_url":"https://api.github.com/users/PaulZhangIsing/gists{/gist_id}","starred_url":"https://api.github.com/users/PaulZhangIsing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PaulZhangIsing/subscriptions","organizations_url":"https://api.github.com/users/PaulZhangIsing/orgs","repos_url":"https://api.github.com/users/PaulZhangIsing/repos","events_url":"https://api.github.com/users/PaulZhangIsing/events{/privacy}","received_events_url":"https://api.github.com/users/PaulZhangIsing/received_events","type":"User","site_admin":false},"created_at":"2020-04-02T11:44:07Z","updated_at":"2020-04-02T11:44:07Z","author_association":"NONE","body":"In python, I found that\r\n`  iw = bi[2] - bi[0] + 1\r\n                    ih = bi[3] - bi[1] + 1\r\n                    if iw > 0 and ih > 0:\r\n                        # compute overlap (IoU) = area of intersection / area of union\r\n                        ua = (bb[2] - bb[0] + 1) * (bb[3] - bb[1] + 1) + (bbgt[2] - bbgt[0]\r\n                                        + 1) * (bbgt[3] - bbgt[1] + 1) - iw * ih\r\n                        ov = iw * ih / ua\r\n                        if ov > ovmax:\r\n                            ovmax = ov\r\n                            gt_match = obj`\r\n\r\nI wonder why the +1 in the end is necessary?","reactions":{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/607794878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PaulZhangIsing","id":27721543,"node_id":"MDQ6VXNlcjI3NzIxNTQz","avatar_url":"https://avatars.githubusercontent.com/u/27721543?v=4","gravatar_id":"","url":"https://api.github.com/users/PaulZhangIsing","html_url":"https://github.com/PaulZhangIsing","followers_url":"https://api.github.com/users/PaulZhangIsing/followers","following_url":"https://api.github.com/users/PaulZhangIsing/following{/other_user}","gists_url":"https://api.github.com/users/PaulZhangIsing/gists{/gist_id}","starred_url":"https://api.github.com/users/PaulZhangIsing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PaulZhangIsing/subscriptions","organizations_url":"https://api.github.com/users/PaulZhangIsing/orgs","repos_url":"https://api.github.com/users/PaulZhangIsing/repos","events_url":"https://api.github.com/users/PaulZhangIsing/events{/privacy}","received_events_url":"https://api.github.com/users/PaulZhangIsing/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/616912291","html_url":"https://github.com/Cartucho/mAP/issues/104#issuecomment-616912291","issue_url":"https://api.github.com/repos/Cartucho/mAP/issues/104","id":616912291,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjkxMjI5MQ==","user":{"login":"zjZSTU","id":13742735,"node_id":"MDQ6VXNlcjEzNzQyNzM1","avatar_url":"https://avatars.githubusercontent.com/u/13742735?v=4","gravatar_id":"","url":"https://api.github.com/users/zjZSTU","html_url":"https://github.com/zjZSTU","followers_url":"https://api.github.com/users/zjZSTU/followers","following_url":"https://api.github.com/users/zjZSTU/following{/other_user}","gists_url":"https://api.github.com/users/zjZSTU/gists{/gist_id}","starred_url":"https://api.github.com/users/zjZSTU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zjZSTU/subscriptions","organizations_url":"https://api.github.com/users/zjZSTU/orgs","repos_url":"https://api.github.com/users/zjZSTU/repos","events_url":"https://api.github.com/users/zjZSTU/events{/privacy}","received_events_url":"https://api.github.com/users/zjZSTU/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T02:25:41Z","updated_at":"2020-04-21T03:33:49Z","author_association":"NONE","body":"> In python, I found that\r\n> ` iw = bi[2] - bi[0] + 1 ih = bi[3] - bi[1] + 1 if iw > 0 and ih > 0: # compute overlap (IoU) = area of intersection / area of union ua = (bb[2] - bb[0] + 1) * (bb[3] - bb[1] + 1) + (bbgt[2] - bbgt[0] + 1) * (bbgt[3] - bbgt[1] + 1) - iw * ih ov = iw * ih / ua if ov > ovmax: ovmax = ov gt_match = obj`\r\n> \r\n> I wonder why the +1 in the end is necessary?\r\n\r\nfor example, one bbox is like this \r\n\r\n```\r\n[xmin, ymin, xmax, ymax] = [3, 4, 5, 6]\r\n```\r\n\r\nso compute the witdth like this\r\n\r\n```\r\n# 3 4 5\r\nwidth = 5 - 3 + 1 = 3\r\n```","reactions":{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/616912291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zjZSTU","id":13742735,"node_id":"MDQ6VXNlcjEzNzQyNzM1","avatar_url":"https://avatars.githubusercontent.com/u/13742735?v=4","gravatar_id":"","url":"https://api.github.com/users/zjZSTU","html_url":"https://github.com/zjZSTU","followers_url":"https://api.github.com/users/zjZSTU/followers","following_url":"https://api.github.com/users/zjZSTU/following{/other_user}","gists_url":"https://api.github.com/users/zjZSTU/gists{/gist_id}","starred_url":"https://api.github.com/users/zjZSTU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zjZSTU/subscriptions","organizations_url":"https://api.github.com/users/zjZSTU/orgs","repos_url":"https://api.github.com/users/zjZSTU/repos","events_url":"https://api.github.com/users/zjZSTU/events{/privacy}","received_events_url":"https://api.github.com/users/zjZSTU/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/628532521","html_url":"https://github.com/Cartucho/mAP/issues/104#issuecomment-628532521","issue_url":"https://api.github.com/repos/Cartucho/mAP/issues/104","id":628532521,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODUzMjUyMQ==","user":{"login":"tuobameng","id":33777858,"node_id":"MDQ6VXNlcjMzNzc3ODU4","avatar_url":"https://avatars.githubusercontent.com/u/33777858?v=4","gravatar_id":"","url":"https://api.github.com/users/tuobameng","html_url":"https://github.com/tuobameng","followers_url":"https://api.github.com/users/tuobameng/followers","following_url":"https://api.github.com/users/tuobameng/following{/other_user}","gists_url":"https://api.github.com/users/tuobameng/gists{/gist_id}","starred_url":"https://api.github.com/users/tuobameng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuobameng/subscriptions","organizations_url":"https://api.github.com/users/tuobameng/orgs","repos_url":"https://api.github.com/users/tuobameng/repos","events_url":"https://api.github.com/users/tuobameng/events{/privacy}","received_events_url":"https://api.github.com/users/tuobameng/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T10:04:14Z","updated_at":"2020-05-14T10:04:14Z","author_association":"NONE","body":"> in main.py, function, voc_ap();\r\n> I tried to add the following lines of codes there\r\n> `auc_ap = metrics.auc(rec, prec) print(ap, auc_ap)`\r\n> However, I found the result is hugely different.\r\n\r\nsame question","reactions":{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/628532521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tuobameng","id":33777858,"node_id":"MDQ6VXNlcjMzNzc3ODU4","avatar_url":"https://avatars.githubusercontent.com/u/33777858?v=4","gravatar_id":"","url":"https://api.github.com/users/tuobameng","html_url":"https://github.com/tuobameng","followers_url":"https://api.github.com/users/tuobameng/followers","following_url":"https://api.github.com/users/tuobameng/following{/other_user}","gists_url":"https://api.github.com/users/tuobameng/gists{/gist_id}","starred_url":"https://api.github.com/users/tuobameng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuobameng/subscriptions","organizations_url":"https://api.github.com/users/tuobameng/orgs","repos_url":"https://api.github.com/users/tuobameng/repos","events_url":"https://api.github.com/users/tuobameng/events{/privacy}","received_events_url":"https://api.github.com/users/tuobameng/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/628986534","html_url":"https://github.com/Cartucho/mAP/issues/104#issuecomment-628986534","issue_url":"https://api.github.com/repos/Cartucho/mAP/issues/104","id":628986534,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODk4NjUzNA==","user":{"login":"zjZSTU","id":13742735,"node_id":"MDQ6VXNlcjEzNzQyNzM1","avatar_url":"https://avatars.githubusercontent.com/u/13742735?v=4","gravatar_id":"","url":"https://api.github.com/users/zjZSTU","html_url":"https://github.com/zjZSTU","followers_url":"https://api.github.com/users/zjZSTU/followers","following_url":"https://api.github.com/users/zjZSTU/following{/other_user}","gists_url":"https://api.github.com/users/zjZSTU/gists{/gist_id}","starred_url":"https://api.github.com/users/zjZSTU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zjZSTU/subscriptions","organizations_url":"https://api.github.com/users/zjZSTU/orgs","repos_url":"https://api.github.com/users/zjZSTU/repos","events_url":"https://api.github.com/users/zjZSTU/events{/privacy}","received_events_url":"https://api.github.com/users/zjZSTU/received_events","type":"User","site_admin":false},"created_at":"2020-05-15T02:19:03Z","updated_at":"2020-05-15T02:19:03Z","author_association":"NONE","body":"> > in main.py, function, voc_ap();\r\n> > I tried to add the following lines of codes there\r\n> > `auc_ap = metrics.auc(rec, prec) print(ap, auc_ap)`\r\n> > However, I found the result is hugely different.\r\n> \r\n> same question\r\n\r\nsklearn.metric.auc works for ROC-curve\r\n\r\n```\r\nimport numpy as np\r\nfrom sklearn import metrics\r\ny = np.array([1, 1, 2, 2])\r\npred = np.array([0.1, 0.4, 0.35, 0.8])\r\nfpr, tpr, thresholds = metrics.roc_curve(y, pred, pos_label=2)\r\nmetrics.auc(fpr, tpr)\r\n```\r\n\r\nrefer to [sklearn.metrics.auc](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.auc.html?highlight=auc#sklearn.metrics.auc)","reactions":{"url":"https://api.github.com/repos/Cartucho/mAP/issues/comments/628986534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zjZSTU","id":13742735,"node_id":"MDQ6VXNlcjEzNzQyNzM1","avatar_url":"https://avatars.githubusercontent.com/u/13742735?v=4","gravatar_id":"","url":"https://api.github.com/users/zjZSTU","html_url":"https://github.com/zjZSTU","followers_url":"https://api.github.com/users/zjZSTU/followers","following_url":"https://api.github.com/users/zjZSTU/following{/other_user}","gists_url":"https://api.github.com/users/zjZSTU/gists{/gist_id}","starred_url":"https://api.github.com/users/zjZSTU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zjZSTU/subscriptions","organizations_url":"https://api.github.com/users/zjZSTU/orgs","repos_url":"https://api.github.com/users/zjZSTU/repos","events_url":"https://api.github.com/users/zjZSTU/events{/privacy}","received_events_url":"https://api.github.com/users/zjZSTU/received_events","type":"User","site_admin":false}}]