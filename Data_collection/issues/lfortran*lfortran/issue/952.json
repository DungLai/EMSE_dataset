{"url":"https://api.github.com/repos/lfortran/lfortran/issues/952","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/952/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/952/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/952/events","html_url":"https://github.com/lfortran/lfortran/issues/952","id":1421826473,"node_id":"I_kwDOCpMuHc5Uv1mp","number":952,"title":"Type finalization unit tests","user":{"login":"rouson","id":13108868,"node_id":"MDQ6VXNlcjEzMTA4ODY4","avatar_url":"https://avatars.githubusercontent.com/u/13108868?v=4","gravatar_id":"","url":"https://api.github.com/users/rouson","html_url":"https://github.com/rouson","followers_url":"https://api.github.com/users/rouson/followers","following_url":"https://api.github.com/users/rouson/following{/other_user}","gists_url":"https://api.github.com/users/rouson/gists{/gist_id}","starred_url":"https://api.github.com/users/rouson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rouson/subscriptions","organizations_url":"https://api.github.com/users/rouson/orgs","repos_url":"https://api.github.com/users/rouson/repos","events_url":"https://api.github.com/users/rouson/events{/privacy}","received_events_url":"https://api.github.com/users/rouson/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-10-25T04:27:08Z","updated_at":"2022-10-25T05:51:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Subsequent to discussion with Ondrej (@certik) , I'm submitting this issue for future reference when work begins on LFortran supporting type finalization.   William Phan, Brad Richardson (@everythingfunctional), and I developed a set of compiler tests intended to be exhaustive: there is one test for each scenario in which the Fortran 2018 standard requires the invocation of a final subroutine.   The tests are available under the LLVM license [here] along with the results for eight Fortran compilers.  Please feel free to incorporate these tests into the LFortran test suite at the appropriate time.\r\n\r\nAt the time of testing, only the NAG and IBM compilers passed all tests.  However, the more recent 2022.3 release of the Intel compiler passes all tests too.  This test suite was inspired by the [Smart-Pointers] library, the test suite for which contains additional usage tests.  If I recall correctly, only the NAG compiler passes the usage tests.  \r\n\r\n[here]: https://github.com/BerkeleyLab/llvm-test-suite/tree/fortran-type-finalization/Fortran/UnitTests/finalization\r\n[Smart-Pointers]: https://github.com/sourceryinstitute/smart-pointers","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/952/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/952/timeline","performed_via_github_app":null,"state_reason":null}