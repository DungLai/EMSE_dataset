{"url":"https://api.github.com/repos/lfortran/lfortran/issues/454","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/454/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/454/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/454/events","html_url":"https://github.com/lfortran/lfortran/issues/454","id":1338776667,"node_id":"I_kwDOCpMuHc5PzBxb","number":454,"title":"CMake throwing error when compiling stdlib with LFortran","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-08-15T09:53:08Z","updated_at":"2022-08-15T09:53:08Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"*Original issue*: https://gitlab.com/lfortran/lfortran/-/issues/596\n\n**Output**\n\n```cpp\n-- The Fortran compiler identification is unknown\n-- Checking whether Fortran compiler has -isysroot\n-- Checking whether Fortran compiler has -isysroot - no\n-- Checking whether Fortran compiler supports OSX deployment target flag\n-- Checking whether Fortran compiler supports OSX deployment target flag - no\n-- Detecting Fortran compiler ABI info\n-- Detecting Fortran compiler ABI info - failed\n-- Check for working Fortran compiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran\n-- Check for working Fortran compiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran - works\n-- Checking whether /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran supports Fortran 90\n-- Checking whether /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran supports Fortran 90 - yes\nCMake Warning (dev) at /Users/czgdp1807/mambaforge/envs/lf/share/cmake-3.21/Modules/GNUInstallDirs.cmake:236 (message):\n  Unable to determine default CMAKE_INSTALL_LIBDIR directory because no\n  target architecture is known.  Please enable at least one language before\n  including GNUInstallDirs.\nCall Stack (most recent call first):\n  CMakeLists.txt:10 (include)\nThis warning is for project developers.  Use -Wno-dev to suppress it.\n\nCMake Error at CMakeLists.txt:20 (message):\n  GCC Version 9 or newer required\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeOutput.log\".\nSee also \"/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeError.log\".\n```\n\n<details><summary> /Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeOutput.log</summary>\nThe system is: Darwin - 20.6.0 - arm64\nDetermining if the Fortran compiler is GNU succeeded with the following output:\n#if defined(__GNUC__) &&                                                      \\\n  !(defined(__INTEL_COMPILER) || defined(__INTEL_LLVM_COMPILER))\nvoid THIS_IS_GNU();\n#endif\n#ifdef __MINGW32__\nvoid THIS_IS_MINGW();\n#endif\n#ifdef __CYGWIN__\nvoid THIS_IS_CYGWIN();\n#endif\n\n\nDetermining if the Fortran compiler works passed with the following output:\nChange Dir: /Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/Users/czgdp1807/mambaforge/envs/lf/bin/make -f Makefile cmTC_5c96d/fast && /Users/czgdp1807/mambaforge/envs/lf/bin/make  -f CMakeFiles/cmTC_5c96d.dir/build.make CMakeFiles/cmTC_5c96d.dir/build\nmake[1]: Entering directory '/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp'\nBuilding Fortran object CMakeFiles/cmTC_5c96d.dir/testFortranCompiler.f.o\n/Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran    -c /Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp/testFortranCompiler.f -o CMakeFiles/cmTC_5c96d.dir/testFortranCompiler.f.o\nLinking Fortran executable cmTC_5c96d\n/Users/czgdp1807/mambaforge/envs/lf/bin/cmake -E cmake_link_script CMakeFiles/cmTC_5c96d.dir/link.txt --verbose=1\n/Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran CMakeFiles/cmTC_5c96d.dir/testFortranCompiler.f.o -o cmTC_5c96d \nmake[1]: Leaving directory '/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp'\n\n\n\nDetermining if the Fortran compiler supports Fortran 90 passed with the following output:\nChange Dir: /Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/Users/czgdp1807/mambaforge/envs/lf/bin/make -f Makefile cmTC_a670d/fast && /Users/czgdp1807/mambaforge/envs/lf/bin/make  -f CMakeFiles/cmTC_a670d.dir/build.make CMakeFiles/cmTC_a670d.dir/build\nmake[1]: Entering directory '/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp'\nBuilding Fortran object CMakeFiles/cmTC_a670d.dir/testFortranCompilerF90.f90.o\n/Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran    -c /Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp/testFortranCompilerF90.f90 -o CMakeFiles/cmTC_a670d.dir/testFortranCompilerF90.f90.o\nLinking Fortran executable cmTC_a670d\n/Users/czgdp1807/mambaforge/envs/lf/bin/cmake -E cmake_link_script CMakeFiles/cmTC_a670d.dir/link.txt --verbose=1\n/Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran CMakeFiles/cmTC_a670d.dir/testFortranCompilerF90.f90.o -o cmTC_a670d \nmake[1]: Leaving directory '/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp'\n</details>\n\n<details><summary>/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeError.log</summary>\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags: -v \n\nThe output was:\n10\nerror: invalid value 'f95-cpp-input' in '-x f95-cpp-input'\nThe command 'clang -o a.out CMakeFortranCompilerId.F  -L\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -Wl,-rpath,\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -llfortran_runtime -lm' failed.\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags:  \n\nThe output was:\n10\nerror: invalid value 'f95-cpp-input' in '-x f95-cpp-input'\nThe command 'clang -o a.out CMakeFortranCompilerId.F  -L\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -Wl,-rpath,\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -llfortran_runtime -lm' failed.\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags: -c \n\nThe output was:\n1\ninput:166:44 semantic error: Variable '__frt_version__' not declared\n        PRINT *, 'INFO:compiler_version['//__FRT_version__//']'\n                                           ^~~~~~~~~~~~~~~\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags: -fpp \n\nThe output was:\n109\nThe following argument was not expected: -fpp\nRun with --help for more information.\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags: -v \n\nThe output was:\n10\nerror: invalid value 'f95-cpp-input' in '-x f95-cpp-input'\nThe command 'clang -o a.out CMakeFortranCompilerId.F  -L\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -Wl,-rpath,\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -llfortran_runtime -lm' failed.\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags:  \n\nThe output was:\n10\nerror: invalid value 'f95-cpp-input' in '-x f95-cpp-input'\nThe command 'clang -o a.out CMakeFortranCompilerId.F  -L\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -Wl,-rpath,\"/Users/czgdp1807/lfortran_project/lfortran/src/bin/../runtime\" -llfortran_runtime -lm' failed.\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags: -c \n\nThe output was:\n1\ninput:166:44 semantic error: Variable '__frt_version__' not declared\n        PRINT *, 'INFO:compiler_version['//__FRT_version__//']'\n                                           ^~~~~~~~~~~~~~~\n\n\nCompiling the Fortran compiler identification source file \"CMakeFortranCompilerId.F\" failed.\nCompiler: /Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran \nBuild flags: \nId flags: -fpp \n\nThe output was:\n109\nThe following argument was not expected: -fpp\nRun with --help for more information.\n\n\nChecking whether the Fortran compiler is Compaq using \"-what\" did not match \"Compaq Visual Fortran\":\nThe following argument was not expected: -what\nRun with --help for more information.\nChecking whether the Fortran compiler is NAG using \"-V\" did not match \"NAG Fortran Compiler\":\nThe following argument was not expected: -V\nRun with --help for more information.\nChecking whether the Fortran compiler is Compaq using \"-what\" did not match \"Compaq Visual Fortran\":\nThe following argument was not expected: -what\nRun with --help for more information.\nChecking whether the Fortran compiler is NAG using \"-V\" did not match \"NAG Fortran Compiler\":\nThe following argument was not expected: -V\nRun with --help for more information.\nDetecting Fortran compiler ABI info failed to compile with the following output:\nChange Dir: /Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/Users/czgdp1807/mambaforge/envs/lf/bin/make -f Makefile cmTC_67bdb/fast && /Users/czgdp1807/mambaforge/envs/lf/bin/make  -f CMakeFiles/cmTC_67bdb.dir/build.make CMakeFiles/cmTC_67bdb.dir/build\nmake[1]: Entering directory '/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp'\nBuilding Fortran object CMakeFiles/cmTC_67bdb.dir/CMakeFortranCompilerABI.F.o\n/Users/czgdp1807/lfortran_project/lfortran/src/bin/lfortran   -v -Wl,-v -c /Users/czgdp1807/mambaforge/envs/lf/share/cmake-3.21/Modules/CMakeFortranCompilerABI.F -o CMakeFiles/cmTC_67bdb.dir/CMakeFortranCompilerABI.F.o\nThe following argument was not expected: -Wl,-v\nRun with --help for more information.\nmake[1]: *** [CMakeFiles/cmTC_67bdb.dir/build.make:78: CMakeFiles/cmTC_67bdb.dir/CMakeFortranCompilerABI.F.o] Error 109\nmake[1]: Leaving directory '/Users/czgdp1807/lfortran_project/stdlib/CMakeFiles/CMakeTmp'\nmake: *** [Makefile:127: cmTC_67bdb/fast] Error 2\n</details>","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/454/timeline","performed_via_github_app":null,"state_reason":null}