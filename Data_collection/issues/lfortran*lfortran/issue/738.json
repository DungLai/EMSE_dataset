{"url":"https://api.github.com/repos/lfortran/lfortran/issues/738","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/738/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/738/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/738/events","html_url":"https://github.com/lfortran/lfortran/issues/738","id":1383069518,"node_id":"I_kwDOCpMuHc5Sb_dO","number":738,"title":"macOS: fails to compile with gcc","user":{"login":"Nicholaswogan","id":18489667,"node_id":"MDQ6VXNlcjE4NDg5NjY3","avatar_url":"https://avatars.githubusercontent.com/u/18489667?v=4","gravatar_id":"","url":"https://api.github.com/users/Nicholaswogan","html_url":"https://github.com/Nicholaswogan","followers_url":"https://api.github.com/users/Nicholaswogan/followers","following_url":"https://api.github.com/users/Nicholaswogan/following{/other_user}","gists_url":"https://api.github.com/users/Nicholaswogan/gists{/gist_id}","starred_url":"https://api.github.com/users/Nicholaswogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nicholaswogan/subscriptions","organizations_url":"https://api.github.com/users/Nicholaswogan/orgs","repos_url":"https://api.github.com/users/Nicholaswogan/repos","events_url":"https://api.github.com/users/Nicholaswogan/events{/privacy}","received_events_url":"https://api.github.com/users/Nicholaswogan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-09-22T22:07:25Z","updated_at":"2022-09-24T16:26:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm trying to build LFortran on MacOS ARM following: https://docs.lfortran.org/en/installation/#build-from-git\r\n\r\nWhen I run `./build0.sh` I get an error\r\n\r\n```sh\r\n(lf) nicholas@Nicholass-MacBook-Air lfortran % ./build0.sh \r\n+ ci/version.sh\r\n++ git describe --tags --dirty\r\nfatal: No names found, cannot describe anything.\r\n+ version=\r\n```\r\n\r\nThis has something to do with `ci/version.sh`. I can just put in a fake version, which allows `build0.sh` to work.\r\n\r\nNext I try to build with cmake.\r\n\r\n```sh\r\nmkdir build\r\ncd build\r\ncmake -DCMAKE_BUILD_TYPE=Debug -DWITH_LLVM=yes -DCMAKE_INSTALL_PREFIX=`pwd`/inst ..\r\nmake -j\r\n```\r\n\r\nThe build works until \r\n\r\n```sh\r\n[ 83%] Linking CXX executable test_stacktrace\r\n[ 83%] Built target test_stacktrace\r\n[ 84%] Linking CXX executable parse\r\n[ 84%] Built target parse\r\n[ 85%] Linking CXX executable parse2\r\n[ 85%] Built target parse2\r\n[ 86%] Linking CXX executable test_lfortran\r\nUndefined symbols for architecture arm64:\r\n  \"__ZN4llvm11StringErrorC1ERKNS_5TwineESt10error_code\", referenced from:\r\n      __ZSt11make_uniqueIN4llvm11StringErrorEJNS0_9StringRefESt10error_codeEENSt8__detail9_MakeUniqIT_E15__single_objectEDpOT0_ in libasr.a(evaluator.cpp.o)\r\n  \"__ZN4llvm14TargetRegistry12lookupTargetERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERS6_\", referenced from:\r\n      __ZN8LFortran13LLVMEvaluatorC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE in libasr.a(evaluator.cpp.o)\r\n      __ZN8LFortran13LLVMEvaluatorC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE in libasr.a(evaluator.cpp.o)\r\n# error continues for many lines\r\n```\r\n\r\nWhat might be the cause? I've tried both GCC and clang compilers.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/738/timeline","performed_via_github_app":null,"state_reason":null}