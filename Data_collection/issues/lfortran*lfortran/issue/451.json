{"url":"https://api.github.com/repos/lfortran/lfortran/issues/451","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/451/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/451/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/451/events","html_url":"https://github.com/lfortran/lfortran/issues/451","id":1338776421,"node_id":"I_kwDOCpMuHc5PzBtl","number":451,"title":"Include comments after & in AST","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-08-15T09:52:51Z","updated_at":"2022-08-15T09:52:51Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"*Original issue*: https://gitlab.com/lfortran/lfortran/-/issues/593\n\nThe comments after & are excluded by the prescanner. We need to include them in AST. The way to do it is by the prescanner to store them in some data structure, indexed by the position in the code.\n\nThen after AST is constructed, we write code that iterates over this data structure and figures out which AST nodes correspond to a given comment based on location information and attaches the comment to it.\n\nThe performance of this operation will linearly depend on the number of such comments. Most codes have 0 such comments, so there will be no performance penalty, and some codes have some such comments, so the overhead will be small.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/451/timeline","performed_via_github_app":null,"state_reason":null}