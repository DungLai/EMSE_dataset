{"url":"https://api.github.com/repos/lfortran/lfortran/issues/482","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/482/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/482/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/482/events","html_url":"https://github.com/lfortran/lfortran/issues/482","id":1338779039,"node_id":"I_kwDOCpMuHc5PzCWf","number":482,"title":"Cannot install with lfortran-0.14.0-1016-gd53a3b83.tar.gz","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-08-15T09:55:46Z","updated_at":"2022-08-15T09:55:46Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"*Original issue*: https://gitlab.com/lfortran/lfortran/-/issues/631\n\nFollowing the instructions at https://docs.lfortran.org/installation/ to Build From a Source Tarball , using \nlfortran-0.14.0-1016-gd53a3b83.tar.gz , the command `make -j8` fails for me on WSL 2 \n\n```\n(lf) /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83$ make -j8\n[  1%] Building C object src/runtime/legacy/CMakeFiles/lfortran_runtime_static.dir/__/impure/lfortran_intrinsics.c.o\n[  2%] Building C object src/runtime/legacy/CMakeFiles/lfortran_runtime.dir/__/impure/lfortran_intrinsics.c.o\n[  3%] Building CXX object src/tests/CMakeFiles/doctest.dir/doctest.cpp.o\n[  6%] Linking C static library liblfortran_runtime_static.a\n[  6%] Linking C shared library ../liblfortran_runtime.so\n[  6%] Built target lfortran_runtime_static\n[  6%] Built target lfortran_runtime\n[  7%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/parser/preprocessor.cpp.o\n[  9%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/parser/tokenizer.cpp.o\n[  9%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/parser/parser.tab.cc.o\n[ 12%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/semantics/ast_symboltable_visitor.cpp.o\n[ 12%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/parser/parser.cpp.o\n[ 13%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/semantics/ast_body_visitor.cpp.o\n[ 14%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/semantics/ast_to_asr.cpp.o\n[ 15%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/semantics/asr_scopes.cpp.o\n[ 17%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/fortran_evaluator.cpp.o\n[ 18%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/asr_to_cpp.cpp.o\n[ 19%] Linking CXX static library libdoctest.a\n[ 19%] Built target doctest\n[ 20%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/asr_to_py.cpp.o\n[ 21%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/x86_assembler.cpp.o\n[ 23%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/asr_to_x86.cpp.o\n[ 24%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/param_to_const.cpp.o\n[ 25%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/do_loops.cpp.o\n[ 26%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/for_all.cpp.o\n[ 28%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/global_stmts.cpp.o\n[ 29%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/select_case.cpp.o\n[ 30%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/implied_do_loops.cpp.o\n[ 31%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/array_op.cpp.o\n[ 32%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/class_constructor.cpp.o\n[ 34%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/arr_slice.cpp.o\n[ 35%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/print_arr.cpp.o\n[ 36%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/pass_utils.cpp.o\n[ 37%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pass/unused_functions.cpp.o\n[ 39%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/asr_verify.cpp.o\n[ 40%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/asr_utils.cpp.o\n[ 41%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/modfile.cpp.o\n[ 42%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/pickle.cpp.o\n[ 43%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/serialization.cpp.o\n[ 45%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/cwrapper.cpp.o\n[ 46%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/diagnostics.cpp.o\n[ 47%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/ast_to_src.cpp.o\n[ 48%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/ast_to_openmp.cpp.o\n[ 50%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/mod_to_asr.cpp.o\n[ 51%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/string_utils.cpp.o\n[ 52%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/utils.cpp.o\n[ 53%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/stacktrace.cpp.o\n[ 54%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/__/bin/tpl/whereami/whereami.cpp.o\n[ 56%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/evaluator.cpp.o\n[ 57%] Building CXX object src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/asr_to_llvm.cpp.o\nIn file included from /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/evaluator.cpp:53:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/KaleidoscopeJIT.h:22:10: fatal error: llvm/ExecutionEngine/Orc/LambdaResolver.h: No such file or directory\n   22 | #include \"llvm/ExecutionEngine/Orc/LambdaResolver.h\"\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\nmake[2]: *** [src/lfortran/CMakeFiles/lfortran_lib.dir/build.make:622: src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/evaluator.cpp.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp: In member function ‘std::vector<llvm::Type*, std::allocator<llvm::Type*> > LFortran::ASRToLLVMVisitor::convert_args(const T&)’:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:1626:120: error: no matching function for call to ‘llvm::VectorType::get(llvm::Type*, int)’\n 1626 |                                         llvm::Type* type_fx2 = llvm::VectorType::get(llvm::Type::getFloatTy(context), 2);\n      |                                                                                                                        ^\nIn file included from /home/bingy/miniconda3/envs/lf/include/llvm/IR/DataLayout.h:26,\n                 from /home/bingy/miniconda3/envs/lf/include/llvm/ExecutionEngine/ExecutionEngine.h:25,\n                 from /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:10:\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:424:22: note: candidate: ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, llvm::ElementCount)’\n  424 |   static VectorType *get(Type *ElementType, ElementCount EC);\n      |                      ^~~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:424:58: note:   no known conversion for argument 2 from ‘int’ to ‘llvm::ElementCount’\n  424 |   static VectorType *get(Type *ElementType, ElementCount EC);\n      |                                             ~~~~~~~~~~~~~^~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:426:22: note: candidate: ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, unsigned int, bool)’\n  426 |   static VectorType *get(Type *ElementType, unsigned NumElements,\n      |                      ^~~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:426:22: note:   candidate expects 3 arguments, 2 provided\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:22: note: candidate: ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, const llvm::VectorType*)’ <near match>\n  432 |   static VectorType *get(Type *ElementType, const VectorType *Other) {\n      |                      ^~~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:22: note:   conversion of argument 2 would be ill-formed:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp: In member function ‘llvm::FunctionType* LFortran::ASRToLLVMVisitor::get_function_type(const LFortran::ASR::Function_t&)’:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:2083:98: error: invalid conversion from ‘int’ to ‘const llvm::VectorType*’ [-fpermissive]\n 2083 |                             return_type = llvm::VectorType::get(llvm::Type::getFloatTy(context), 2);\n      |                                                                                                  ^\n      |                                                                                                  |\n      |                                                                                                  int\nIn file included from /home/bingy/miniconda3/envs/lf/include/llvm/IR/DataLayout.h:26,\n                 from /home/bingy/miniconda3/envs/lf/include/llvm/ExecutionEngine/ExecutionEngine.h:25,\n                 from /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:10:\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:63: note:   initializing argument 2 of ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, const llvm::VectorType*)’\n  432 |   static VectorType *get(Type *ElementType, const VectorType *Other) {\n      |                                             ~~~~~~~~~~~~~~~~~~^~~~~\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp: In member function ‘void LFortran::ASRToLLVMVisitor::define_function_exit(const LFortran::ASR::Function_t&)’:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:2230:104: error: invalid conversion from ‘int’ to ‘const llvm::VectorType*’ [-fpermissive]\n 2230 |                         llvm::Type* type_fx2p = llvm::VectorType::get(llvm::Type::getFloatTy(context), 2)->getPointerTo();\n      |                                                                                                        ^\n      |                                                                                                        |\n      |                                                                                                        int\nIn file included from /home/bingy/miniconda3/envs/lf/include/llvm/IR/DataLayout.h:26,\n                 from /home/bingy/miniconda3/envs/lf/include/llvm/ExecutionEngine/ExecutionEngine.h:25,\n                 from /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:10:\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:63: note:   initializing argument 2 of ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, const llvm::VectorType*)’\n  432 |   static VectorType *get(Type *ElementType, const VectorType *Other) {\n      |                                             ~~~~~~~~~~~~~~~~~~^~~~~\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp: In member function ‘std::vector<llvm::Value*, std::allocator<llvm::Value*> > LFortran::ASRToLLVMVisitor::convert_call_args(const T&, std::string)’:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:3581:137: error: no matching function for call to ‘llvm::VectorType::get(llvm::Type*, int)’\n 3581 |                                                         llvm::Type* type_fx2p = llvm::VectorType::get(llvm::Type::getFloatTy(context), 2)->getPointerTo();\n      |                                                                                                                                         ^\nIn file included from /home/bingy/miniconda3/envs/lf/include/llvm/IR/DataLayout.h:26,\n                 from /home/bingy/miniconda3/envs/lf/include/llvm/ExecutionEngine/ExecutionEngine.h:25,\n                 from /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:10:\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:424:22: note: candidate: ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, llvm::ElementCount)’\n  424 |   static VectorType *get(Type *ElementType, ElementCount EC);\n      |                      ^~~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:424:58: note:   no known conversion for argument 2 from ‘int’ to ‘llvm::ElementCount’\n  424 |   static VectorType *get(Type *ElementType, ElementCount EC);\n      |                                             ~~~~~~~~~~~~~^~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:426:22: note: candidate: ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, unsigned int, bool)’\n  426 |   static VectorType *get(Type *ElementType, unsigned NumElements,\n      |                      ^~~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:426:22: note:   candidate expects 3 arguments, 2 provided\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:22: note: candidate: ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, const llvm::VectorType*)’ <near match>\n  432 |   static VectorType *get(Type *ElementType, const VectorType *Other) {\n      |                      ^~~\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:22: note:   conversion of argument 2 would be ill-formed:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp: In member function ‘void LFortran::ASRToLLVMVisitor::visit_FunctionCall(const LFortran::ASR::FunctionCall_t&)’:\n/mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:3910:103: error: invalid conversion from ‘int’ to ‘const llvm::VectorType*’ [-fpermissive]\n 3910 |                         llvm::Type* type_fx2 = llvm::VectorType::get(llvm::Type::getFloatTy(context), 2);\n      |                                                                                                       ^\n      |                                                                                                       |\n      |                                                                                                       int\nIn file included from /home/bingy/miniconda3/envs/lf/include/llvm/IR/DataLayout.h:26,\n                 from /home/bingy/miniconda3/envs/lf/include/llvm/ExecutionEngine/ExecutionEngine.h:25,\n                 from /mnt/c/downloads/lfortran-0.14.0-1016-gd53a3b83/src/lfortran/codegen/asr_to_llvm.cpp:10:\n/home/bingy/miniconda3/envs/lf/include/llvm/IR/DerivedTypes.h:432:63: note:   initializing argument 2 of ‘static llvm::VectorType* llvm::VectorType::get(llvm::Type*, const llvm::VectorType*)’\n  432 |   static VectorType *get(Type *ElementType, const VectorType *Other) {\n      |                                             ~~~~~~~~~~~~~~~~~~^~~~~\nmake[2]: *** [src/lfortran/CMakeFiles/lfortran_lib.dir/build.make:636: src/lfortran/CMakeFiles/lfortran_lib.dir/codegen/asr_to_llvm.cpp.o] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:305: src/lfortran/CMakeFiles/lfortran_lib.dir/all] Error 2\nmake: *** [Makefile:166: all] Error 2\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/482/timeline","performed_via_github_app":null,"state_reason":null}