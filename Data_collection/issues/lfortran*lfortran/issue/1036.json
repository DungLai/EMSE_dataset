{"url":"https://api.github.com/repos/lfortran/lfortran/issues/1036","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/1036/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/1036/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/1036/events","html_url":"https://github.com/lfortran/lfortran/issues/1036","id":1464126336,"node_id":"I_kwDOCpMuHc5XRMuA","number":1036,"title":"Finding the source line and column number for AST nodes?","user":{"login":"plevold","id":10157556,"node_id":"MDQ6VXNlcjEwMTU3NTU2","avatar_url":"https://avatars.githubusercontent.com/u/10157556?v=4","gravatar_id":"","url":"https://api.github.com/users/plevold","html_url":"https://github.com/plevold","followers_url":"https://api.github.com/users/plevold/followers","following_url":"https://api.github.com/users/plevold/following{/other_user}","gists_url":"https://api.github.com/users/plevold/gists{/gist_id}","starred_url":"https://api.github.com/users/plevold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plevold/subscriptions","organizations_url":"https://api.github.com/users/plevold/orgs","repos_url":"https://api.github.com/users/plevold/repos","events_url":"https://api.github.com/users/plevold/events{/privacy}","received_events_url":"https://api.github.com/users/plevold/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":33,"created_at":"2022-11-25T07:10:32Z","updated_at":"2023-01-06T16:49:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm looking into using the `--show-ast` feature of LFortran to analyze some of my Fortran source files (hopefully it will turn into something useful that can be published at some point). Would it be possible to have LFortran write information needed to determine the corresponding line/column number in the source file that an AST node originates from?\r\n\r\nI did have a look at the source code and found some structs named `Location` and `locationManager`, but my experience with writing compilers are totally non-existent so I couldn't figure out how it's used.\r\n\r\nFor example, the code\r\n\r\n```fortran\r\nsubroutine sub(i)\r\n    integer, intent(in) :: i\r\n    \r\n    print *, i\r\nend subroutine\r\n```\r\n\r\nGive me the following syntax tree:\r\n\r\n```\r\n(TranslationUnit \r\n    [(Subroutine \r\n        sub \r\n        [(i)] \r\n        [] \r\n        () \r\n        () \r\n        [] \r\n        [] \r\n        [] \r\n        [(Declaration \r\n            (AttrType \r\n                TypeInteger \r\n                [] \r\n                () \r\n                None\r\n            ) \r\n            [(AttrIntent \r\n                In\r\n            )] \r\n            [(i \r\n            [] \r\n            [] \r\n            () \r\n            None \r\n            ())] \r\n            (TriviaNode \r\n                [] \r\n                [(EndOfLine)\r\n                (EndOfLine)]\r\n            )\r\n        )] \r\n        [(Print \r\n            0 \r\n            () \r\n            [i] \r\n            ()\r\n        )] \r\n        []\r\n    )]\r\n)\r\n```\r\n\r\nI am looking for a way to determine that `Print` originates from line 4, columns 4 to 14 in the original source file.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/1036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/1036/timeline","performed_via_github_app":null,"state_reason":null}