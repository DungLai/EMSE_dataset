{"url":"https://api.github.com/repos/lfortran/lfortran/issues/573","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/573/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/573/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/573/events","html_url":"https://github.com/lfortran/lfortran/issues/573","id":1338787171,"node_id":"I_kwDOCpMuHc5PzEVj","number":573,"title":"[SciPy] semantic error: Variable 'k' is not declared","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"labels":[{"id":4432142216,"node_id":"LA_kwDOCpMuHc8AAAABCC0fiA","url":"https://api.github.com/repos/lfortran/lfortran/labels/SciPy","name":"SciPy","color":"d4c5f9","default":false,"description":"issues related to enable LFortran to compile the entire FORTRAN codebase in SciPy"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-08-15T10:04:22Z","updated_at":"2022-08-17T19:18:36Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"*Original issue*: https://gitlab.com/lfortran/lfortran/-/issues/744\n\n```\n% lfortran scipy/linalg/src/lu.f --show-asr --fixed-form\nsemantic error: Variable 'k' is not declared\n --> scipy/linalg/src/lu.f:9:23\n  |\n9 |       integer m,n,piv(k),i,j,k,permute_l,m1,info\n  |                       ^ 'k' is undeclared\n```\n\nI fixed this error with a small workaround:\n```diff\ndiff --git a/scipy/linalg/src/lu.f b/scipy/linalg/src/lu.f\nindex 27834fc84..00e091e01 100644\n--- a/scipy/linalg/src/lu.f\n+++ b/scipy/linalg/src/lu.f\n@@ -6,7 +6,7 @@ c     prefixes: d,z,s,c   (double,complex double,float,complex float)\n c     suffixes: _c,_r     (column major order,row major order)\n \n       subroutine dlu_c(p,l,u,a,m,n,k,piv,info,permute_l,m1)\n-      integer m,n,piv(k),i,j,k,permute_l,m1,info\n+      integer m,n,k,piv(k),i,j,permute_l,m1,info\n       double precision l(m,k),u(k,n),a(m,n)\n       double precision p(m1,m1)\n```\n\nAfter that, I get the same error as in https://gitlab.com/lfortran/lfortran/-/issues/742.\n```\n% lfortran scipy/linalg/src/lu.f --show-asr --fixed-form\nsemantic error: Attribute declaration not supported\n  --> scipy/linalg/src/lu.f:26:7\n   |\n26 |       external dgetrf,dlaswp\n   |       ^^^^^^^^^^^^^^^^^^^^^^ \n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/573/timeline","performed_via_github_app":null,"state_reason":null}