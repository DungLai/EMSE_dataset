[{"id":7324640750,"node_id":"MEE_lADOCpMuHc5RMpPtzwAAAAG0lSXu","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7324640750","actor":{"login":"HaoZeke","id":4336207,"node_id":"MDQ6VXNlcjQzMzYyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/4336207?v=4","gravatar_id":"","url":"https://api.github.com/users/HaoZeke","html_url":"https://github.com/HaoZeke","followers_url":"https://api.github.com/users/HaoZeke/followers","following_url":"https://api.github.com/users/HaoZeke/following{/other_user}","gists_url":"https://api.github.com/users/HaoZeke/gists{/gist_id}","starred_url":"https://api.github.com/users/HaoZeke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HaoZeke/subscriptions","organizations_url":"https://api.github.com/users/HaoZeke/orgs","repos_url":"https://api.github.com/users/HaoZeke/repos","events_url":"https://api.github.com/users/HaoZeke/events{/privacy}","received_events_url":"https://api.github.com/users/HaoZeke/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-05T16:35:14Z","performed_via_github_app":null},{"id":7324640758,"node_id":"SE_lADOCpMuHc5RMpPtzwAAAAG0lSX2","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7324640758","actor":{"login":"HaoZeke","id":4336207,"node_id":"MDQ6VXNlcjQzMzYyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/4336207?v=4","gravatar_id":"","url":"https://api.github.com/users/HaoZeke","html_url":"https://github.com/HaoZeke","followers_url":"https://api.github.com/users/HaoZeke/followers","following_url":"https://api.github.com/users/HaoZeke/following{/other_user}","gists_url":"https://api.github.com/users/HaoZeke/gists{/gist_id}","starred_url":"https://api.github.com/users/HaoZeke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HaoZeke/subscriptions","organizations_url":"https://api.github.com/users/HaoZeke/orgs","repos_url":"https://api.github.com/users/HaoZeke/repos","events_url":"https://api.github.com/users/HaoZeke/events{/privacy}","received_events_url":"https://api.github.com/users/HaoZeke/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-05T16:35:14Z","performed_via_github_app":null},{"id":7324641526,"node_id":"LE_lADOCpMuHc5RMpPtzwAAAAG0lSj2","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7324641526","actor":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-09-05T16:35:23Z","label":{"name":"SciPy","color":"d4c5f9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1239116803","html_url":"https://github.com/lfortran/lfortran/issues/704#issuecomment-1239116803","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/704","id":1239116803,"node_id":"IC_kwDOCpMuHc5J22wD","user":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"created_at":"2022-09-07T09:06:08Z","updated_at":"2022-09-07T09:06:08Z","author_association":"MEMBER","body":"Are we able to compile SciPy's fortran code base with LFortran?","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1239116803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1239127024","html_url":"https://github.com/lfortran/lfortran/issues/704#issuecomment-1239127024","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/704","id":1239127024,"node_id":"IC_kwDOCpMuHc5J25Pw","user":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false},"created_at":"2022-09-07T09:15:05Z","updated_at":"2022-09-07T09:15:05Z","author_association":"CONTRIBUTOR","body":"No. That's why I introduced the \"SciPy\" tag to provide an overview what needs to be done to enable LFortran to compile SciPy.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1239127024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false}},{"actor":{"login":"pkgw","id":59598,"node_id":"MDQ6VXNlcjU5NTk4","avatar_url":"https://avatars.githubusercontent.com/u/59598?v=4","gravatar_id":"","url":"https://api.github.com/users/pkgw","html_url":"https://github.com/pkgw","followers_url":"https://api.github.com/users/pkgw/followers","following_url":"https://api.github.com/users/pkgw/following{/other_user}","gists_url":"https://api.github.com/users/pkgw/gists{/gist_id}","starred_url":"https://api.github.com/users/pkgw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkgw/subscriptions","organizations_url":"https://api.github.com/users/pkgw/orgs","repos_url":"https://api.github.com/users/pkgw/repos","events_url":"https://api.github.com/users/pkgw/events{/privacy}","received_events_url":"https://api.github.com/users/pkgw/received_events","type":"User","site_admin":false},"created_at":"2022-10-20T03:04:18Z","updated_at":"2022-10-20T03:04:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/213","repository_url":"https://api.github.com/repos/conda-forge/scipy-feedstock","labels_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/213/labels{/name}","comments_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/213/comments","events_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/213/events","html_url":"https://github.com/conda-forge/scipy-feedstock/issues/213","id":1414834958,"node_id":"I_kwDOA4lyas5UVKsO","number":213,"title":"Meson integration on windows - discussion about compiler stack","user":{"login":"h-vetinari","id":33685575,"node_id":"MDQ6VXNlcjMzNjg1NTc1","avatar_url":"https://avatars.githubusercontent.com/u/33685575?v=4","gravatar_id":"","url":"https://api.github.com/users/h-vetinari","html_url":"https://github.com/h-vetinari","followers_url":"https://api.github.com/users/h-vetinari/followers","following_url":"https://api.github.com/users/h-vetinari/following{/other_user}","gists_url":"https://api.github.com/users/h-vetinari/gists{/gist_id}","starred_url":"https://api.github.com/users/h-vetinari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h-vetinari/subscriptions","organizations_url":"https://api.github.com/users/h-vetinari/orgs","repos_url":"https://api.github.com/users/h-vetinari/repos","events_url":"https://api.github.com/users/h-vetinari/events{/privacy}","received_events_url":"https://api.github.com/users/h-vetinari/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-10-19T11:52:13Z","updated_at":"2022-10-26T09:43:06Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"repository":{"id":59339370,"node_id":"MDEwOlJlcG9zaXRvcnk1OTMzOTM3MA==","name":"scipy-feedstock","full_name":"conda-forge/scipy-feedstock","private":false,"owner":{"login":"conda-forge","id":11897326,"node_id":"MDEyOk9yZ2FuaXphdGlvbjExODk3MzI2","avatar_url":"https://avatars.githubusercontent.com/u/11897326?v=4","gravatar_id":"","url":"https://api.github.com/users/conda-forge","html_url":"https://github.com/conda-forge","followers_url":"https://api.github.com/users/conda-forge/followers","following_url":"https://api.github.com/users/conda-forge/following{/other_user}","gists_url":"https://api.github.com/users/conda-forge/gists{/gist_id}","starred_url":"https://api.github.com/users/conda-forge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/conda-forge/subscriptions","organizations_url":"https://api.github.com/users/conda-forge/orgs","repos_url":"https://api.github.com/users/conda-forge/repos","events_url":"https://api.github.com/users/conda-forge/events{/privacy}","received_events_url":"https://api.github.com/users/conda-forge/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/conda-forge/scipy-feedstock","description":"A conda-smithy repository for scipy.","fork":false,"url":"https://api.github.com/repos/conda-forge/scipy-feedstock","forks_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/forks","keys_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/keys{/key_id}","collaborators_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/teams","hooks_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/hooks","issue_events_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/events{/number}","events_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/events","assignees_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/assignees{/user}","branches_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/branches{/branch}","tags_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/tags","blobs_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/git/refs{/sha}","trees_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/git/trees{/sha}","statuses_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/statuses/{sha}","languages_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/languages","stargazers_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/stargazers","contributors_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/contributors","subscribers_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/subscribers","subscription_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/subscription","commits_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/commits{/sha}","git_commits_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/git/commits{/sha}","comments_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/comments{/number}","issue_comment_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/comments{/number}","contents_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/contents/{+path}","compare_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/compare/{base}...{head}","merges_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/merges","archive_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/downloads","issues_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues{/number}","pulls_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/pulls{/number}","milestones_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/milestones{/number}","notifications_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/labels{/name}","releases_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/releases{/id}","deployments_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/deployments","created_at":"2016-05-21T03:16:54Z","updated_at":"2021-12-17T05:28:49Z","pushed_at":"2023-01-04T08:00:49Z","git_url":"git://github.com/conda-forge/scipy-feedstock.git","ssh_url":"git@github.com:conda-forge/scipy-feedstock.git","clone_url":"https://github.com/conda-forge/scipy-feedstock.git","svn_url":"https://github.com/conda-forge/scipy-feedstock","homepage":null,"size":441,"stargazers_count":2,"watchers_count":2,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":36,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":14,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":36,"open_issues":14,"watchers":2,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Scipy has switched to meson as of scipy 1.9, and I know from conversation with @rgommers that upstream is eager to drop support for the old distutils builds.\r\n\r\nAs things stand, conda-forge is not yet able to build scipy using meson, especially on windows, and as such this would put is in a big enough pickle that we'd probably plead with upstream not to drop distutils support yet - I think it's likely that this would be heard, but at the same time, I discussed opening this issue with Ralf so that we can at least plan the necessary steps forward on conda-forge side.\r\n\r\nThe main issue being that meson relies on having a [coherent](https://github.com/conda-forge/scipy-feedstock/pull/205#issuecomment-1168450780) compiler stack for C/C++/Fortran, and the msvc+gfortran mix that was heroically hacked [together](https://github.com/conda-forge/scipy-feedstock/pull/146) by @isuruf (not having had windows-builds for scipy in conda-forge before) is not supported, and will not be.\r\n\r\nOn windows this is problematic, because we don't have a lot of fortran compiler options, or at least we _didn't_ for a long time. Possible options nowadays:\r\n* MinGW (w/ gfortran)\r\n  * I could imagine that this won't work for ABI reasons with the rest of the MSVC-derived conda-forge ecosystem, though notably, upstream scipy [uses](https://github.com/scipy/scipy/blob/main/.github/workflows/wheels.yml#L123-L126) a  full mingw stack.\r\n  * Upsides: ?\r\n  * Downsides: might be ABI-incompatible\r\n* MSVC (or LLVM?) + flang\r\n  * fortran support in LLVM has been a long time coming; so long, that some people have lost faith in it. However, things are progressing, and now there's experimental code generation support in LLVM 15. Indicatively, Fujitsu recently let flang loose on one of their test suites and [found](https://discourse.llvm.org/t/request-advice-on-reporting-many-errors-found-in-fortran-test-sets/65868) that 3447/8247 programs failed. There's still a lot of work to do, but it might be usable, especially because the fortran in scipy is rather old and doesn't use features from newer fortran standards. In particular, raising bugs in LLVM would probably make it possible to sort most things out by LLVM 16.\r\n  * Upsides: LLVM is ABI-compatible with MSVC, license-compatible with redistribution & we use llvm-openmp on windows in various places already\r\n  * Downsides: LLVM 15 (and especially flang) hasn't been built in conda-forge yet (infra changes, lack of time on my side), maturity of compiler might be unsatisfactory\r\n* MSVC (or LLVM?) + lfortran\r\n  * LFortran aims to be a general-purpose Fortran compiler, and is particularly putting [emphasis](https://fortran-lang.discourse.group/t/conda-toolchain-for-fortran-on-windows/3206/2) on supporting the compilation of scipy.\r\n  * Upsides: it's in conda-forge [already](https://github.com/conda-forge/lfortran-feedstock) and actively maintained (CC @conda-forge/lfortran)\r\n  * Downsides: support for compiling scipy is unclear, and I'm assuming meson would need to be taught to recognise LFortran (at least, it doesn't really [show up](https://cs.github.com/mesonbuild/meson?q=lfortran) in the repo; CC @eli-schwartz), ABI impact is unclear to me (but probably fine since LLVM-based), maturity of compiler might be unsatisfactory\r\n*  MSVC + ifort\r\n    * Ralf pointed out to me that Intel's ifort is now much more available since it moved under the oneAPI umbrella. It's [licensing](https://community.intel.com/t5/Intel-Fortran-Compiler/Intel-Fortran-2022-0-077-licensing/m-p/1352004) situation doesn't allow redistribution of the compiler though, so AFAICT we'd be in a similar situation as with nvcc - meaning we'd have to do this in the ci setup (downloading binaries). Not sure if there have been thoughts about packaging ifort for conda-forge, similar to what's happening for MKL (CC @conda-forge/intel_repack).\r\n    * Upsides: mature compiler, interaction with MSVC/MKL works\r\n    * Downsides: not easy to integrate with conda-forge, might need checking with Intel re:license in any case\r\n\r\nOther issues:\r\n* [ ] cross-compiling osx-arm64, linux-aarch64, linux-ppc64le\r\n* [ ] [support](https://github.com/scipy/scipy/issues/17244) for alternative BLAS/LAPACK implementations in meson\r\n* [ ] Being able to match MKL's Fortran ABI, see e.g. [here](https://github.com/conda-forge/scipy-feedstock/blob/main/recipe/bld.bat#L12-L14) and [here](https://github.com/scipy/scipy/blob/main/scipy/_build_utils/_fortran.py#L96-L102)\r\n\r\nCC @conda-forge/core","reactions":{"url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/conda-forge/scipy-feedstock/issues/213/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]