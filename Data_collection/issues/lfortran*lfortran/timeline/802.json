[{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261493083","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1261493083","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1261493083,"node_id":"IC_kwDOCpMuHc5LMNtb","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-28T21:39:44Z","updated_at":"2022-09-28T21:42:12Z","author_association":"CONTRIBUTOR","body":"Thanks for opening up an issue about this. We hit this issue a few times.\r\n\r\nWhat's the best solution? Just like with the modules, we can figure out the dependencies, and have a list of dependencies as part of the symbol table. We could just use \"ordered\" map, but I suspect fragility with that approach, as I like to think of dictionaries as unordered, and if we need order, we should explicitly add a list with order; that way our algorithms can process the symbol table in any order when the order does not matter, or use the dependency list when the order does matter.\r\n\r\n@lucifer1004 if you discover other such ideas as you are developing the Julia backend, please open up issues.\r\n\r\nCC @czgdp1807 ","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261493083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"id":7481627615,"node_id":"MEE_lADOCpMuHc5S1cwxzwAAAAG98JPf","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7481627615","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-28T21:39:45Z","performed_via_github_app":null},{"id":7481627618,"node_id":"SE_lADOCpMuHc5S1cwxzwAAAAG98JPi","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7481627618","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-28T21:39:45Z","performed_via_github_app":null},{"id":7481639513,"node_id":"MEE_lADOCpMuHc5S1cwxzwAAAAG98MJZ","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7481639513","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-28T21:42:12Z","performed_via_github_app":null},{"id":7481639515,"node_id":"SE_lADOCpMuHc5S1cwxzwAAAAG98MJb","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7481639515","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-28T21:42:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261700909","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1261700909","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1261700909,"node_id":"IC_kwDOCpMuHc5LNAct","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T03:27:21Z","updated_at":"2022-09-29T03:28:12Z","author_association":"MEMBER","body":"I think we can keep the current map and add a list that includes the order. This way, the behavior of the existing code that uses scope maps will not be affected.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261700909/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261704901","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1261704901","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1261704901,"node_id":"IC_kwDOCpMuHc5LNBbF","user":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T03:34:35Z","updated_at":"2022-09-29T03:34:35Z","author_association":"MEMBER","body":"I have been facing this issue since a long time. Since @lucifer1004 and other folks are facing this as well, so we should fix this. To be noted that I won't recommend figuring out the order on our own by using some sorting algorithm like topological sort. Instead I would store the order in SymbolTable as a list as @lucifer1004 said. We should store the variables in that list in the same order in which they are declared by the user. Its easy I think, just insert the variable to the list when you are calling `SymbolTable::add_symbol`. In fact, this is the same pattern used in `DerivedType`, a symtab and a list of names. See below, \r\n\r\nhttps://github.com/lcompilers/lpython/blob/2f30facb474a2c655b3d2b4a2db5bf15d8165fd5/src/libasr/ASR.asdl#L98-L99","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261704901/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false}},{"id":7482891734,"node_id":"MEE_lADOCpMuHc5S1cwxzwAAAAG-A93W","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7482891734","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-29T03:34:35Z","performed_via_github_app":null},{"id":7482891736,"node_id":"SE_lADOCpMuHc5S1cwxzwAAAAG-A93Y","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7482891736","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-29T03:34:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261714813","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1261714813","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1261714813,"node_id":"IC_kwDOCpMuHc5LND19","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T03:41:23Z","updated_at":"2022-09-29T03:41:23Z","author_association":"MEMBER","body":"@czgdp1807 I see you pasted a link from the `LPython` project. And I also saw you make a sync in #705. What is the state of the libasr in `LFortran` and `LPython`? Since there is already a standalone libasr repository, can we share it between `LFortran` and `LPython` using Git submodules?","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261714813/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false}},{"id":7482913405,"node_id":"MEE_lADOCpMuHc5S1cwxzwAAAAG-BDJ9","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7482913405","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-29T03:41:23Z","performed_via_github_app":null},{"id":7482913409,"node_id":"SE_lADOCpMuHc5S1cwxzwAAAAG-BDKB","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7482913409","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-29T03:41:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261718513","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1261718513","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1261718513,"node_id":"IC_kwDOCpMuHc5LNEvx","user":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T03:47:19Z","updated_at":"2022-09-29T03:47:19Z","author_association":"MEMBER","body":"Well many people ask this same question. Quoting my response from https://github.com/lfortran/lfortran/pull/705#issuecomment-1238044610,\r\n\r\n> The reasons for following the syncing approach are listed in https://github.com/lcompilers/libasr/pull/2#issuecomment-1174829287 and @certik’s experience from symengine in https://github.com/lcompilers/libasr/pull/2#issuecomment-1175582830 is also worth reading to understand the situation better.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261718513/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false}},{"id":7482931064,"node_id":"MEE_lADOCpMuHc5S1cwxzwAAAAG-BHd4","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7482931064","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-29T03:47:20Z","performed_via_github_app":null},{"id":7482931069,"node_id":"SE_lADOCpMuHc5S1cwxzwAAAAG-BHd9","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7482931069","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-29T03:47:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261728992","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1261728992","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1261728992,"node_id":"IC_kwDOCpMuHc5LNHTg","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T04:09:06Z","updated_at":"2022-09-29T04:09:06Z","author_association":"CONTRIBUTOR","body":"Right now LFortran and LPython is in heavy development, so I suggest we keep the friction low and use the current approach. Once LFortran reaches beta, then the frontend is pretty much done (modulo bugs), in which case we can switch to using libasr as a dependency, because we won't be modifying it in every PR.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1261728992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T05:45:48Z","updated_at":"2022-09-30T05:45:48Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/819","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/819/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/819/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/819/events","html_url":"https://github.com/lfortran/lfortran/pull/819","id":1391862858,"node_id":"PR_kwDOCpMuHc4_6H59","number":819,"title":"[ASR] Add scope_vec to record decl order","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"labels":[{"id":4362097645,"node_id":"LA_kwDOCpMuHc8AAAABBABT7Q","url":"https://api.github.com/repos/lfortran/lfortran/labels/asr","name":"asr","color":"52F0F7","default":false,"description":"ASR Related changes"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-09-30T05:45:48Z","updated_at":"2022-10-04T23:17:30Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"draft":true,"repository":{"id":177417757,"node_id":"MDEwOlJlcG9zaXRvcnkxNzc0MTc3NTc=","name":"lfortran","full_name":"lfortran/lfortran","private":false,"owner":{"login":"lfortran","id":40613057,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwNjEzMDU3","avatar_url":"https://avatars.githubusercontent.com/u/40613057?v=4","gravatar_id":"","url":"https://api.github.com/users/lfortran","html_url":"https://github.com/lfortran","followers_url":"https://api.github.com/users/lfortran/followers","following_url":"https://api.github.com/users/lfortran/following{/other_user}","gists_url":"https://api.github.com/users/lfortran/gists{/gist_id}","starred_url":"https://api.github.com/users/lfortran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfortran/subscriptions","organizations_url":"https://api.github.com/users/lfortran/orgs","repos_url":"https://api.github.com/users/lfortran/repos","events_url":"https://api.github.com/users/lfortran/events{/privacy}","received_events_url":"https://api.github.com/users/lfortran/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/lfortran/lfortran","description":"Official main repository for LFortran","fork":false,"url":"https://api.github.com/repos/lfortran/lfortran","forks_url":"https://api.github.com/repos/lfortran/lfortran/forks","keys_url":"https://api.github.com/repos/lfortran/lfortran/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lfortran/lfortran/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lfortran/lfortran/teams","hooks_url":"https://api.github.com/repos/lfortran/lfortran/hooks","issue_events_url":"https://api.github.com/repos/lfortran/lfortran/issues/events{/number}","events_url":"https://api.github.com/repos/lfortran/lfortran/events","assignees_url":"https://api.github.com/repos/lfortran/lfortran/assignees{/user}","branches_url":"https://api.github.com/repos/lfortran/lfortran/branches{/branch}","tags_url":"https://api.github.com/repos/lfortran/lfortran/tags","blobs_url":"https://api.github.com/repos/lfortran/lfortran/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lfortran/lfortran/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lfortran/lfortran/git/refs{/sha}","trees_url":"https://api.github.com/repos/lfortran/lfortran/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lfortran/lfortran/statuses/{sha}","languages_url":"https://api.github.com/repos/lfortran/lfortran/languages","stargazers_url":"https://api.github.com/repos/lfortran/lfortran/stargazers","contributors_url":"https://api.github.com/repos/lfortran/lfortran/contributors","subscribers_url":"https://api.github.com/repos/lfortran/lfortran/subscribers","subscription_url":"https://api.github.com/repos/lfortran/lfortran/subscription","commits_url":"https://api.github.com/repos/lfortran/lfortran/commits{/sha}","git_commits_url":"https://api.github.com/repos/lfortran/lfortran/git/commits{/sha}","comments_url":"https://api.github.com/repos/lfortran/lfortran/comments{/number}","issue_comment_url":"https://api.github.com/repos/lfortran/lfortran/issues/comments{/number}","contents_url":"https://api.github.com/repos/lfortran/lfortran/contents/{+path}","compare_url":"https://api.github.com/repos/lfortran/lfortran/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lfortran/lfortran/merges","archive_url":"https://api.github.com/repos/lfortran/lfortran/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lfortran/lfortran/downloads","issues_url":"https://api.github.com/repos/lfortran/lfortran/issues{/number}","pulls_url":"https://api.github.com/repos/lfortran/lfortran/pulls{/number}","milestones_url":"https://api.github.com/repos/lfortran/lfortran/milestones{/number}","notifications_url":"https://api.github.com/repos/lfortran/lfortran/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lfortran/lfortran/labels{/name}","releases_url":"https://api.github.com/repos/lfortran/lfortran/releases{/id}","deployments_url":"https://api.github.com/repos/lfortran/lfortran/deployments","created_at":"2019-03-24T13:22:20Z","updated_at":"2023-01-19T07:32:40Z","pushed_at":"2023-01-19T19:07:25Z","git_url":"git://github.com/lfortran/lfortran.git","ssh_url":"git@github.com:lfortran/lfortran.git","clone_url":"https://github.com/lfortran/lfortran.git","svn_url":"https://github.com/lfortran/lfortran","homepage":"https://lfortran.org/","size":19098,"stargazers_count":504,"watchers_count":504,"language":"C++","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":52,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":582,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["compiler","fortran","interactive","jupyter","jupyter-kernels","jupyter-notebook","library","repl"],"visibility":"public","forks":52,"open_issues":582,"watchers":504,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/lfortran/lfortran/pulls/819","html_url":"https://github.com/lfortran/lfortran/pull/819","diff_url":"https://github.com/lfortran/lfortran/pull/819.diff","patch_url":"https://github.com/lfortran/lfortran/pull/819.patch","merged_at":null},"body":"This should fix #802.\r\n\r\nI modified the Julia backend locally and it worked. But maybe I should make that a successive PR after this is reviewed and merged?","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/819/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/819/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263788712","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263788712","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263788712,"node_id":"IC_kwDOCpMuHc5LU-Ko","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T16:38:14Z","updated_at":"2022-09-30T16:38:14Z","author_association":"CONTRIBUTOR","body":"This brings an interesting observation. The reason the SymbolTable is a dictionary is to help the frontend quickly lookup a symbol by name. However, we now require the table to be ordered, the PR #819 adds an initial implementation. So in ASR we could just use a list of symbols, that is `symbol* symbol_table` is all that is needed (since each symbol has a name anyway), it provides an order, and our C++ implementation can still create a hash table as part of the SymbolTable class. The hash table is needed by the frontend (AST->ASR) to lookup symbols, and also when serializing / deserializing, where each symbol is saved by the ID number of the symbol table it is in, and by its name; when reading it, we need to use a hashtable to quickly look it up. However, for speed reasons, we could just store two integers, one the symbol table ID, the other one the symbol ID.\r\n\r\nIn other words, why not do the following change:\r\n```diff\r\ndiff --git a/src/libasr/ASR.asdl b/src/libasr/ASR.asdl\r\nindex 2f120d29e..73323cc02 100644\r\n--- a/src/libasr/ASR.asdl\r\n+++ b/src/libasr/ASR.asdl\r\n@@ -21,15 +21,12 @@\r\n -- We extend these by:\r\n --   * bool (.true. / .false.)\r\n --   * float (floating point number of infinite precision)\r\n---   * symbol_table (scoped Symbol Table implementation)\r\n --   * node (any ASR node)\r\n---\r\n--- Note: `symbol_table` contains `identifier` -> `symbol` mappings.\r\n \r\n module ASR {\r\n \r\n unit\r\n-    = TranslationUnit(symbol_table global_scope, node* items)\r\n+    = TranslationUnit(symbol* global_symtab, node* items)\r\n \r\n -- # Documentation for the symbol type\r\n \r\n@@ -80,31 +77,31 @@ unit\r\n \r\n \r\n symbol\r\n-    = Program(symbol_table symtab, identifier name, identifier* dependencies,\r\n+    = Program(symbol* symtab, identifier name, identifier* dependencies,\r\n         stmt* body)\r\n-    | Module(symbol_table symtab, identifier name, identifier* dependencies,\r\n+    | Module(symbol* symtab, identifier name, identifier* dependencies,\r\n         bool loaded_from_mod, bool intrinsic)\r\n-    | Function(symbol_table symtab, identifier name, expr* args,\r\n+    | Function(symbol* symtab, identifier name, expr* args,\r\n         ttype* type_params, stmt* body, expr? return_var, abi abi,\r\n         access access, deftype deftype, string? bindc_name, bool elemental,\r\n         bool pure, bool module, bool inline)\r\n-    | GenericProcedure(symbol_table parent_symtab, identifier name,\r\n+    | GenericProcedure(symbol* parent_symtab, identifier name,\r\n         symbol* procs, access access)\r\n-    | CustomOperator(symbol_table parent_symtab, identifier name,\r\n+    | CustomOperator(symbol* parent_symtab, identifier name,\r\n         symbol* procs, access access)\r\n-    | ExternalSymbol(symbol_table parent_symtab, identifier name,\r\n+    | ExternalSymbol(symbol* parent_symtab, identifier name,\r\n         symbol external, identifier module_name, identifier* scope_names,\r\n         identifier original_name, access access)\r\n-    | DerivedType(symbol_table symtab, identifier name, identifier* members,\r\n+    | DerivedType(symbol* symtab, identifier name, identifier* members,\r\n         abi abi, access access, symbol? parent)\r\n-    | Variable(symbol_table parent_symtab, identifier name, intent intent,\r\n+    | Variable(symbol* parent_symtab, identifier name, intent intent,\r\n         expr? symbolic_value, expr? value, storage_type storage, ttype type,\r\n         abi abi, access access, presence presence, bool value_attr)\r\n-    | ClassType(symbol_table symtab, identifier name, abi abi, access access)\r\n-    | ClassProcedure(symbol_table parent_symtab, identifier name, identifier\r\n+    | ClassType(symbol* symtab, identifier name, abi abi, access access)\r\n+    | ClassProcedure(symbol* parent_symtab, identifier name, identifier\r\n         proc_name, symbol proc, abi abi)\r\n-    | AssociateBlock(symbol_table symtab, identifier name, stmt* body)\r\n-    | Block(symbol_table symtab, identifier name, stmt* body)\r\n+    | AssociateBlock(symbol* symtab, identifier name, stmt* body)\r\n+    | Block(symbol* symtab, identifier name, stmt* body)\r\n \r\n storage_type = Default | Save | Parameter | Allocatable\r\n access = Public | Private\r\n```\r\n\r\nBecause there are a few other nodes that contain `symbol*` in them, such as:\r\n```\r\n    | ExplicitDeallocate(symbol* vars)\r\n    | ImplicitDeallocate(symbol* vars)                                       \r\n    | Nullify(symbol* vars)\r\n    | GenericProcedure(...\r\n        symbol* procs, access access)\r\n    | CustomOperator(...\r\n        symbol* procs, access access)\r\n\r\n```\r\nWe should always put `symtab` into the name of the argument if it is an actual symbol table that holds the data, and all other `symbol*` is just a pointer to it. Furthermore, we can then do:\r\n```diff\r\n-    | Function(symbol* symtab, identifier name, expr* args,\r\n-        ttype* type_params, stmt* body, expr? return_var, abi abi,\r\n+    | Function(symbol* symtab, identifier name, symbol* args,\r\n+        ttype* type_params, stmt* body, symbol? return_var, abi abi,\r\n         access access, deftype deftype, string? bindc_name, bool elemental,\r\n         bool pure, bool module, bool inline)\r\n```\r\nSince there is no need to reference it using strings, we can just point to the symbols, and we can always obtain the name using `symbol_name()`. In the same spirit:\r\n```diff\r\n-    | DerivedType(symbol* symtab, identifier name, identifier* members,\r\n+    | DerivedType(symbol* symtab, identifier name,\r\n         abi abi, access access, symbol? parent)\r\n```\r\n\r\nEssentially, the `symbol* symtab` is just a list (which is ordered), and for efficiency reasons we also maintain a hashtable in C++ of symbol_name->symbol. But semantically it's just a list.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263788712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263792263","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263792263","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263792263,"node_id":"IC_kwDOCpMuHc5LU_CH","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T16:42:08Z","updated_at":"2022-09-30T16:42:08Z","author_association":"MEMBER","body":"If we use `symbol*`, do we need an extra variable to keep the length?","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263792263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263792576","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263792576","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263792576,"node_id":"IC_kwDOCpMuHc5LU_HA","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T16:42:27Z","updated_at":"2022-09-30T16:43:03Z","author_association":"CONTRIBUTOR","body":"P.S. to make it explicit when its owning and when not: by default everything in ASDL is by \"value\", that is, owning. So if we want just a pointer, such as in `ExplicitDeallocate(symbol* vars)`, then we should change it to `ExplicitDeallocate(symbol_ptr* vars)` to make this explicit. The convention would be that if there is `_ptr` in the name, it is meant to be a pointer.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263792576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263792912","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263792912","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263792912,"node_id":"IC_kwDOCpMuHc5LU_MQ","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T16:42:51Z","updated_at":"2022-09-30T16:42:51Z","author_association":"CONTRIBUTOR","body":"> If we use `symbol*`, do we need an extra variable to keep the length?\r\n\r\nYes, the C++ code keeps an extra variable for all lists already.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263792912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263794366","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263794366","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263794366,"node_id":"IC_kwDOCpMuHc5LU_i-","user":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T16:44:30Z","updated_at":"2022-09-30T16:45:43Z","author_association":"MEMBER","body":"Makes sense. I think lists will also perform equally well, because it doesn't have much overhead. Hash table which we are using i.e., `std::map` has a lookup time of O(lg(n)) but I think has a higher constant. For list the lookup time is O(n) but the constant is lower. So for not so large number of symbols (less than 100ish in a given scope), list will perform well enough. The difference starts to show up when we move to 1000s of symbols in a given scope. This is just speculation, we can benchmark and figure out how much slower lists are.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263794366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"czgdp1807","id":36567889,"node_id":"MDQ6VXNlcjM2NTY3ODg5","avatar_url":"https://avatars.githubusercontent.com/u/36567889?v=4","gravatar_id":"","url":"https://api.github.com/users/czgdp1807","html_url":"https://github.com/czgdp1807","followers_url":"https://api.github.com/users/czgdp1807/followers","following_url":"https://api.github.com/users/czgdp1807/following{/other_user}","gists_url":"https://api.github.com/users/czgdp1807/gists{/gist_id}","starred_url":"https://api.github.com/users/czgdp1807/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/czgdp1807/subscriptions","organizations_url":"https://api.github.com/users/czgdp1807/orgs","repos_url":"https://api.github.com/users/czgdp1807/repos","events_url":"https://api.github.com/users/czgdp1807/events{/privacy}","received_events_url":"https://api.github.com/users/czgdp1807/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263821355","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263821355","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263821355,"node_id":"IC_kwDOCpMuHc5LVGIr","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T17:14:58Z","updated_at":"2022-09-30T17:14:58Z","author_association":"MEMBER","body":"Then this would become a major refactor instead of a minor add-on. Do we need more discussion on the design?","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263821355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263994992","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1263994992","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1263994992,"node_id":"IC_kwDOCpMuHc5LVwhw","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T20:29:53Z","updated_at":"2022-09-30T20:29:53Z","author_association":"CONTRIBUTOR","body":"Yes, we need more discussion. \r\n\r\nI discussed with @rebcabin, and I think just regular list is not the right abstraction, nor is an ordered dictionary. The right abstraction is an unordered dictionary, but for each symbol add a list of dependencies (that would be checked by `verify()`), just like Module and Program works:\r\n```diff\r\ndiff --git a/src/libasr/ASR.asdl b/src/libasr/ASR.asdl\r\nindex 2f120d29e..88d2c4eca 100644\r\n--- a/src/libasr/ASR.asdl\r\n+++ b/src/libasr/ASR.asdl\r\n@@ -84,27 +84,27 @@ symbol\r\n         stmt* body)\r\n     | Module(symbol_table symtab, identifier name, identifier* dependencies,\r\n         bool loaded_from_mod, bool intrinsic)\r\n-    | Function(symbol_table symtab, identifier name, expr* args,\r\n+    | Function(symbol_table symtab, identifier name, identifier* dependencies, expr* args,\r\n         ttype* type_params, stmt* body, expr? return_var, abi abi,\r\n         access access, deftype deftype, string? bindc_name, bool elemental,\r\n         bool pure, bool module, bool inline)\r\n-    | GenericProcedure(symbol_table parent_symtab, identifier name,\r\n+    | GenericProcedure(symbol_table parent_symtab, identifier name, identifier* dependencies,\r\n         symbol* procs, access access)\r\n-    | CustomOperator(symbol_table parent_symtab, identifier name,\r\n+    | CustomOperator(symbol_table parent_symtab, identifier name, identifier* dependencies,\r\n         symbol* procs, access access)\r\n-    | ExternalSymbol(symbol_table parent_symtab, identifier name,\r\n+    | ExternalSymbol(symbol_table parent_symtab, identifier name, identifier* dependencies,\r\n         symbol external, identifier module_name, identifier* scope_names,\r\n         identifier original_name, access access)\r\n-    | DerivedType(symbol_table symtab, identifier name, identifier* members,\r\n+    | DerivedType(symbol_table symtab, identifier name, identifier* dependencies, identifier* members,\r\n         abi abi, access access, symbol? parent)\r\n-    | Variable(symbol_table parent_symtab, identifier name, intent intent,\r\n+    | Variable(symbol_table parent_symtab, identifier name, identifier* dependencies, intent intent,\r\n         expr? symbolic_value, expr? value, storage_type storage, ttype type,\r\n         abi abi, access access, presence presence, bool value_attr)\r\n-    | ClassType(symbol_table symtab, identifier name, abi abi, access access)\r\n-    | ClassProcedure(symbol_table parent_symtab, identifier name, identifier\r\n+    | ClassType(symbol_table symtab, identifier name, identifier* dependencies, abi abi, access access)\r\n+    | ClassProcedure(symbol_table parent_symtab, identifier name, identifier* dependencies, identifier\r\n         proc_name, symbol proc, abi abi)\r\n-    | AssociateBlock(symbol_table symtab, identifier name, stmt* body)\r\n-    | Block(symbol_table symtab, identifier name, stmt* body)\r\n+    | AssociateBlock(symbol_table symtab, identifier name, identifier* dependencies, stmt* body)\r\n+    | Block(symbol_table symtab, identifier name, identifier* dependencies, stmt* body)\r\n \r\n storage_type = Default | Save | Parameter | Allocatable\r\n access = Public | Private\r\n```\r\nIn fact, as you can see, `Module` and `Program` already have this new field `identifier* dependencies`.\r\n\r\nWe already have the topological sort implemented: https://github.com/lfortran/lfortran/blob/807ac45503c99af7241aa53765ff71d8e8f07a48/src/libasr/asr_utils.h#L879, so it can be used.\r\n\r\nWhat remains is to specify (and `verify()`) what symbol can depend on what other symbol and from what table.\r\n\r\nCurrently:\r\n\r\n* Program and Module nodes can depend on other Module node from the same symbol table (which in this case is always the global scope)\r\n\r\nProposed:\r\n\r\n* Any symbol can depend on any other symbol from the same symbol table. \r\n* Only immediate dependencies are specified.\r\n* ExternalSymbol is special, it already has `identifier module_name` which is the (single) module dependency from the global scope, so it probably does not need the new `dependencies` argument\r\n\r\nAs an example: a function `f` uses another module. In ASR those other module dependencies are specified using ExternalSymbol. So the ExternalSymbol depends on the (one) module where the symbol is defined, and the function `f` depends on this ExternalSymbol.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1263994992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"id":7498482198,"node_id":"MEE_lADOCpMuHc5S1cwxzwAAAAG-8cIW","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7498482198","actor":{"login":"rebcabin","id":207047,"node_id":"MDQ6VXNlcjIwNzA0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/207047?v=4","gravatar_id":"","url":"https://api.github.com/users/rebcabin","html_url":"https://github.com/rebcabin","followers_url":"https://api.github.com/users/rebcabin/followers","following_url":"https://api.github.com/users/rebcabin/following{/other_user}","gists_url":"https://api.github.com/users/rebcabin/gists{/gist_id}","starred_url":"https://api.github.com/users/rebcabin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rebcabin/subscriptions","organizations_url":"https://api.github.com/users/rebcabin/orgs","repos_url":"https://api.github.com/users/rebcabin/repos","events_url":"https://api.github.com/users/rebcabin/events{/privacy}","received_events_url":"https://api.github.com/users/rebcabin/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-30T20:29:53Z","performed_via_github_app":null},{"id":7498482203,"node_id":"SE_lADOCpMuHc5S1cwxzwAAAAG-8cIb","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7498482203","actor":{"login":"rebcabin","id":207047,"node_id":"MDQ6VXNlcjIwNzA0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/207047?v=4","gravatar_id":"","url":"https://api.github.com/users/rebcabin","html_url":"https://github.com/rebcabin","followers_url":"https://api.github.com/users/rebcabin/followers","following_url":"https://api.github.com/users/rebcabin/following{/other_user}","gists_url":"https://api.github.com/users/rebcabin/gists{/gist_id}","starred_url":"https://api.github.com/users/rebcabin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rebcabin/subscriptions","organizations_url":"https://api.github.com/users/rebcabin/orgs","repos_url":"https://api.github.com/users/rebcabin/repos","events_url":"https://api.github.com/users/rebcabin/events{/privacy}","received_events_url":"https://api.github.com/users/rebcabin/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-30T20:29:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1264026041","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1264026041","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1264026041,"node_id":"IC_kwDOCpMuHc5LV4G5","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-30T21:08:50Z","updated_at":"2022-09-30T21:08:50Z","author_association":"CONTRIBUTOR","body":"The idea of distinguishing pointers and values in ASR.asdl however still stays, so I opened up a dedicated issue just for that: https://github.com/lcompilers/lpython/issues/1167","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1264026041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1264149721","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1264149721","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1264149721,"node_id":"IC_kwDOCpMuHc5LWWTZ","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-10-01T00:18:59Z","updated_at":"2022-10-01T00:18:59Z","author_association":"MEMBER","body":"I have not checked the code, but can the current ASR handle the case that a symbol is at first an ExternalSymbol in scope, but then declared within the scope? This can happen in many languages, e.g., Julia, Python.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1264149721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1264222850","html_url":"https://github.com/lfortran/lfortran/issues/802#issuecomment-1264222850","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/802","id":1264222850,"node_id":"IC_kwDOCpMuHc5LWoKC","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-10-01T03:38:26Z","updated_at":"2022-10-01T03:38:26Z","author_association":"CONTRIBUTOR","body":"Can you give an example? You can shadow a symbol from a parent scope if that is what you ask.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1264222850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}},{"actor":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"created_at":"2022-10-01T04:38:10Z","updated_at":"2022-10-01T04:38:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/824","repository_url":"https://api.github.com/repos/lfortran/lfortran","labels_url":"https://api.github.com/repos/lfortran/lfortran/issues/824/labels{/name}","comments_url":"https://api.github.com/repos/lfortran/lfortran/issues/824/comments","events_url":"https://api.github.com/repos/lfortran/lfortran/issues/824/events","html_url":"https://github.com/lfortran/lfortran/issues/824","id":1393234640,"node_id":"I_kwDOCpMuHc5TCxLQ","number":824,"title":"To declare always at first might cause issues","user":{"login":"lucifer1004","id":13583761,"node_id":"MDQ6VXNlcjEzNTgzNzYx","avatar_url":"https://avatars.githubusercontent.com/u/13583761?v=4","gravatar_id":"","url":"https://api.github.com/users/lucifer1004","html_url":"https://github.com/lucifer1004","followers_url":"https://api.github.com/users/lucifer1004/followers","following_url":"https://api.github.com/users/lucifer1004/following{/other_user}","gists_url":"https://api.github.com/users/lucifer1004/gists{/gist_id}","starred_url":"https://api.github.com/users/lucifer1004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucifer1004/subscriptions","organizations_url":"https://api.github.com/users/lucifer1004/orgs","repos_url":"https://api.github.com/users/lucifer1004/repos","events_url":"https://api.github.com/users/lucifer1004/events{/privacy}","received_events_url":"https://api.github.com/users/lucifer1004/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-10-01T04:38:10Z","updated_at":"2022-10-01T05:17:53Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"repository":{"id":177417757,"node_id":"MDEwOlJlcG9zaXRvcnkxNzc0MTc3NTc=","name":"lfortran","full_name":"lfortran/lfortran","private":false,"owner":{"login":"lfortran","id":40613057,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQwNjEzMDU3","avatar_url":"https://avatars.githubusercontent.com/u/40613057?v=4","gravatar_id":"","url":"https://api.github.com/users/lfortran","html_url":"https://github.com/lfortran","followers_url":"https://api.github.com/users/lfortran/followers","following_url":"https://api.github.com/users/lfortran/following{/other_user}","gists_url":"https://api.github.com/users/lfortran/gists{/gist_id}","starred_url":"https://api.github.com/users/lfortran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfortran/subscriptions","organizations_url":"https://api.github.com/users/lfortran/orgs","repos_url":"https://api.github.com/users/lfortran/repos","events_url":"https://api.github.com/users/lfortran/events{/privacy}","received_events_url":"https://api.github.com/users/lfortran/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/lfortran/lfortran","description":"Official main repository for LFortran","fork":false,"url":"https://api.github.com/repos/lfortran/lfortran","forks_url":"https://api.github.com/repos/lfortran/lfortran/forks","keys_url":"https://api.github.com/repos/lfortran/lfortran/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lfortran/lfortran/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lfortran/lfortran/teams","hooks_url":"https://api.github.com/repos/lfortran/lfortran/hooks","issue_events_url":"https://api.github.com/repos/lfortran/lfortran/issues/events{/number}","events_url":"https://api.github.com/repos/lfortran/lfortran/events","assignees_url":"https://api.github.com/repos/lfortran/lfortran/assignees{/user}","branches_url":"https://api.github.com/repos/lfortran/lfortran/branches{/branch}","tags_url":"https://api.github.com/repos/lfortran/lfortran/tags","blobs_url":"https://api.github.com/repos/lfortran/lfortran/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lfortran/lfortran/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lfortran/lfortran/git/refs{/sha}","trees_url":"https://api.github.com/repos/lfortran/lfortran/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lfortran/lfortran/statuses/{sha}","languages_url":"https://api.github.com/repos/lfortran/lfortran/languages","stargazers_url":"https://api.github.com/repos/lfortran/lfortran/stargazers","contributors_url":"https://api.github.com/repos/lfortran/lfortran/contributors","subscribers_url":"https://api.github.com/repos/lfortran/lfortran/subscribers","subscription_url":"https://api.github.com/repos/lfortran/lfortran/subscription","commits_url":"https://api.github.com/repos/lfortran/lfortran/commits{/sha}","git_commits_url":"https://api.github.com/repos/lfortran/lfortran/git/commits{/sha}","comments_url":"https://api.github.com/repos/lfortran/lfortran/comments{/number}","issue_comment_url":"https://api.github.com/repos/lfortran/lfortran/issues/comments{/number}","contents_url":"https://api.github.com/repos/lfortran/lfortran/contents/{+path}","compare_url":"https://api.github.com/repos/lfortran/lfortran/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lfortran/lfortran/merges","archive_url":"https://api.github.com/repos/lfortran/lfortran/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lfortran/lfortran/downloads","issues_url":"https://api.github.com/repos/lfortran/lfortran/issues{/number}","pulls_url":"https://api.github.com/repos/lfortran/lfortran/pulls{/number}","milestones_url":"https://api.github.com/repos/lfortran/lfortran/milestones{/number}","notifications_url":"https://api.github.com/repos/lfortran/lfortran/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lfortran/lfortran/labels{/name}","releases_url":"https://api.github.com/repos/lfortran/lfortran/releases{/id}","deployments_url":"https://api.github.com/repos/lfortran/lfortran/deployments","created_at":"2019-03-24T13:22:20Z","updated_at":"2023-01-19T07:32:40Z","pushed_at":"2023-01-19T19:07:25Z","git_url":"git://github.com/lfortran/lfortran.git","ssh_url":"git@github.com:lfortran/lfortran.git","clone_url":"https://github.com/lfortran/lfortran.git","svn_url":"https://github.com/lfortran/lfortran","homepage":"https://lfortran.org/","size":19098,"stargazers_count":504,"watchers_count":504,"language":"C++","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":52,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":582,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["compiler","fortran","interactive","jupyter","jupyter-kernels","jupyter-notebook","library","repl"],"visibility":"public","forks":52,"open_issues":582,"watchers":504,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"```fortran\r\nprogram a\r\n   integer :: i = 2\r\n\r\n   block\r\n      print *, i\r\n      integer :: i\r\n      i = 3\r\n      print *, i\r\n   end block\r\n\r\n   print *, i\r\nend program\r\n```\r\n\r\ncan be compiled with `lfortran` but the output is not as expected since the variable declarations are raised to the top of each block. The first print should output 2 which is defined in the outer scope, but instead it outputs an undefined value.\r\n\r\nAlso happens with C/C++/Julia backend.\r\n\r\n@certik This is an example of what I meant in https://github.com/lfortran/lfortran/issues/802#issuecomment-1264149721","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lfortran/lfortran/issues/824/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]