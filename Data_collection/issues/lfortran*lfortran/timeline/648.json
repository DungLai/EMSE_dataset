[{"id":7233008498,"node_id":"LE_lADOCpMuHc5QQTBlzwAAAAGvHvNy","url":"https://api.github.com/repos/lfortran/lfortran/issues/events/7233008498","actor":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-08-22T13:43:37Z","label":{"name":"SciPy","color":"d4c5f9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1247952230","html_url":"https://github.com/lfortran/lfortran/issues/648#issuecomment-1247952230","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/648","id":1247952230,"node_id":"IC_kwDOCpMuHc5KYj1m","user":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false},"created_at":"2022-09-15T11:10:02Z","updated_at":"2022-09-15T11:10:02Z","author_association":"CONTRIBUTOR","body":"Some notes:\r\n\r\nThe problematic function seems to be `CreateGEP` in `libasr/codegen/llvm_utils.cpp` . There seems to be a bug in how a `double precision` variable is initialized that is named identical to an intrinsic:\r\n\r\n```bash\r\n(value)     %zexp = alloca double, align 8\r\n(wrapped) i32 0 i32 2 \r\n```\r\n\r\n(`zexp` is an intrinsic; `ZEXP` in `swilk.f` is a double precision variable; the \"wrapped\" value are the content of the `idx` container in `CreateGEP`).","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1247952230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1248029278","html_url":"https://github.com/lfortran/lfortran/issues/648#issuecomment-1248029278","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/648","id":1248029278,"node_id":"IC_kwDOCpMuHc5KY2pe","user":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false},"created_at":"2022-09-15T12:23:06Z","updated_at":"2022-09-15T12:24:32Z","author_association":"CONTRIBUTOR","body":"So here's the minimal reproducer called t_llvmir_double.f:\r\n\r\n```fortran\r\n      program main\r\n      double precision zexp,z\r\n      zexp(z) = dexp(z)\r\n      end program\r\n\r\n```\r\n\r\n`gfortran -fdump-parse-tree t_llvmir_double.f` yields\r\n\r\n```bash\r\nNamespace: A-H: (REAL 4) I-N: (INTEGER 4) O-Z: (REAL 4)\r\nprocedure name = main\r\n  symtree: 'dexp'        || symbol: 'dexp'         \r\n    type spec : (REAL 4)\r\n    attributes: (PROCEDURE INTRINSIC-PROC  FUNCTION IMPLICIT-TYPE ARRAY-OUTER-DEPENDENCY)\r\n    result: dexp\r\n  symtree: 'main'        || symbol: 'main'         \r\n    type spec : (UNKNOWN 0)\r\n    attributes: (PROGRAM PUBLIC  SUBROUTINE IS-MAIN-PROGRAM)\r\n  symtree: 'z'           || symbol: 'z'            \r\n    type spec : (REAL 8)\r\n    attributes: (VARIABLE )\r\n  symtree: 'zexp'        || symbol: 'zexp'         \r\n    type spec : (REAL 8)\r\n    attributes: (PROCEDURE STATEMENT-PROC  FUNCTION)\r\n    value: __exp_r8[[((main:z))]]\r\n    Formal arglist: z\r\n\r\n  code:\r\n  \r\n```\r\n\r\nand LFortran's corresponding ASR looks like this:\r\n\r\n```bash\r\n(TranslationUnit \r\n    (SymbolTable\r\n        1\r\n        {\r\n            iso_c_binding:\r\n                (IntrinsicModule lfortran_intrinsic_iso_c_binding), \r\n            iso_fortran_env:\r\n                (IntrinsicModule lfortran_intrinsic_iso_fortran_env), \r\n            lfortran_intrinsic_builtin:\r\n                (IntrinsicModule lfortran_intrinsic_builtin), \r\n            lfortran_intrinsic_math:\r\n                (IntrinsicModule lfortran_intrinsic_math), \r\n            main:\r\n                (Program \r\n                    (SymbolTable\r\n                        2\r\n                        {\r\n                            dexp:\r\n                                (ExternalSymbol \r\n                                    2 \r\n                                    dexp \r\n                                    4 dexp \r\n                                    lfortran_intrinsic_math \r\n                                    [] \r\n                                    dexp \r\n                                    Private\r\n                                ), \r\n                            z:\r\n                                (Variable \r\n                                    2 \r\n                                    z \r\n                                    Local \r\n                                    () \r\n                                    () \r\n                                    Default \r\n                                    (Real 8 []) \r\n                                    Source \r\n                                    Public \r\n                                    Required \r\n                                    .false.\r\n                                ), \r\n                            zexp:\r\n                                (Variable \r\n                                    2 \r\n                                    zexp \r\n                                    Local \r\n                                    () \r\n                                    () \r\n                                    Default \r\n                                    (Real 8 []) \r\n                                    Source \r\n                                    Public \r\n                                    Required \r\n                                    .false.\r\n                                )\r\n                            \r\n                        }) \r\n                    main \r\n                    [] \r\n                    [(= \r\n                        (ArrayItem \r\n                            (Var 2 zexp) \r\n                            [(() \r\n                            (Var 2 z) \r\n                            ())] \r\n                            (Real 8 []) \r\n                            ()\r\n                        ) \r\n                        (FunctionCall \r\n                            2 dexp \r\n                            () \r\n                            [((Var 2 z))] \r\n                            (Real 8 []) \r\n                            () \r\n                            ()\r\n                        ) \r\n                        ()\r\n                    )]\r\n                )\r\n            \r\n        }) \r\n    []\r\n)\r\n```","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1248029278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"konradha","id":9871746,"node_id":"MDQ6VXNlcjk4NzE3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/9871746?v=4","gravatar_id":"","url":"https://api.github.com/users/konradha","html_url":"https://github.com/konradha","followers_url":"https://api.github.com/users/konradha/followers","following_url":"https://api.github.com/users/konradha/following{/other_user}","gists_url":"https://api.github.com/users/konradha/gists{/gist_id}","starred_url":"https://api.github.com/users/konradha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradha/subscriptions","organizations_url":"https://api.github.com/users/konradha/orgs","repos_url":"https://api.github.com/users/konradha/repos","events_url":"https://api.github.com/users/konradha/events{/privacy}","received_events_url":"https://api.github.com/users/konradha/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1262553585","html_url":"https://github.com/lfortran/lfortran/issues/648#issuecomment-1262553585","issue_url":"https://api.github.com/repos/lfortran/lfortran/issues/648","id":1262553585,"node_id":"IC_kwDOCpMuHc5LQQnx","user":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false},"created_at":"2022-09-29T16:59:31Z","updated_at":"2022-09-29T16:59:31Z","author_association":"CONTRIBUTOR","body":"I think this is an example of a statement function, which we need to implement according to https://github.com/lfortran/lfortran/issues/814.","reactions":{"url":"https://api.github.com/repos/lfortran/lfortran/issues/comments/1262553585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"certik","id":20568,"node_id":"MDQ6VXNlcjIwNTY4","avatar_url":"https://avatars.githubusercontent.com/u/20568?v=4","gravatar_id":"","url":"https://api.github.com/users/certik","html_url":"https://github.com/certik","followers_url":"https://api.github.com/users/certik/followers","following_url":"https://api.github.com/users/certik/following{/other_user}","gists_url":"https://api.github.com/users/certik/gists{/gist_id}","starred_url":"https://api.github.com/users/certik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/certik/subscriptions","organizations_url":"https://api.github.com/users/certik/orgs","repos_url":"https://api.github.com/users/certik/repos","events_url":"https://api.github.com/users/certik/events{/privacy}","received_events_url":"https://api.github.com/users/certik/received_events","type":"User","site_admin":false}}]