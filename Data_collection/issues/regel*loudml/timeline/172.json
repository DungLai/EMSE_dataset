[{"url":"https://api.github.com/repos/regel/loudml/issues/comments/570895167","html_url":"https://github.com/regel/loudml/issues/172#issuecomment-570895167","issue_url":"https://api.github.com/repos/regel/loudml/issues/172","id":570895167,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDg5NTE2Nw==","user":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"created_at":"2020-01-05T09:56:22Z","updated_at":"2020-01-05T09:56:22Z","author_association":"OWNER","body":"This could be the base path. I never used this environment variable before.\r\n\r\nAny logs in the Docker console?\r\n\r\nThe chronograf server is written in Go and encapsulates the React App in addition to reverse proxy.\r\n\r\nCan you share a snippet of the new docker compose file with Nginx?","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/570895167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/570928726","html_url":"https://github.com/regel/loudml/issues/172#issuecomment-570928726","issue_url":"https://api.github.com/repos/regel/loudml/issues/172","id":570928726,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDkyODcyNg==","user":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false},"created_at":"2020-01-05T16:54:39Z","updated_at":"2020-01-05T16:54:39Z","author_association":"NONE","body":"Hello,\r\n\r\nAs I understand according the documentation the BASE_PATH is the URL path prefix under which all chronograf routes will be mounted.\r\n\r\nI’m using Ansible to deploy the current setup. The snippet you’ve mentioned (with discussed env variable):\r\n```\r\n- name: Install/Uninstall 'loudml/chronograf' container\r\n  docker_container:\r\n    name: chronograf\r\n    image: \"loudml/chronograf\"\r\n    ports:\r\n      - 8888:8888/tcp\r\n    volumes:\r\n      - \"../../roles/chronograf/var/chronograf:/var/lib/chronograf\"\r\n    networks:\r\n      - name: capture\r\n        aliases:\r\n          - chronograf\r\n    env:\r\n      BASE_PATH: \"/chronograf\"\r\n      INFLUXDB_URL: \"http://influxdb:8086\"\r\n      LOUDML_URL: \"http://loudml:8077\"\r\n    restart: yes\r\n    state: \"{{state}}\"\r\n```\r\n The _docker logs chronograf_ command shows just the following:\r\n```\r\ntime=\"2020-01-05T16:39:33Z\" level=info msg=\"Serving chronograf at http://[::]:8888\" component=server\r\ntime=\"2020-01-05T16:39:33Z\" level=info msg=\"Reporting usage stats\" component=usage freq=24h reporting_addr=\"https://usage.influxdata.com\" stats=\"os,arch,version,cluster_id,uptime\"\r\n```\r\n\r\nWhat other logs (dumps of network traffic, chronograf's logs inside its container maybe) will be useful for the analysis?","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/570928726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/580740235","html_url":"https://github.com/regel/loudml/issues/172#issuecomment-580740235","issue_url":"https://api.github.com/repos/regel/loudml/issues/172","id":580740235,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MDc0MDIzNQ==","user":{"login":"gilangcp","id":1003224,"node_id":"MDQ6VXNlcjEwMDMyMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1003224?v=4","gravatar_id":"","url":"https://api.github.com/users/gilangcp","html_url":"https://github.com/gilangcp","followers_url":"https://api.github.com/users/gilangcp/followers","following_url":"https://api.github.com/users/gilangcp/following{/other_user}","gists_url":"https://api.github.com/users/gilangcp/gists{/gist_id}","starred_url":"https://api.github.com/users/gilangcp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gilangcp/subscriptions","organizations_url":"https://api.github.com/users/gilangcp/orgs","repos_url":"https://api.github.com/users/gilangcp/repos","events_url":"https://api.github.com/users/gilangcp/events{/privacy}","received_events_url":"https://api.github.com/users/gilangcp/received_events","type":"User","site_admin":false},"created_at":"2020-01-31T13:48:47Z","updated_at":"2020-01-31T13:51:42Z","author_association":"NONE","body":"Hi @sve71 , I believe I got similar issue, However I also have a workaround. The thing is that the       `LOUDML_URL` not working if you have custom base path. For example, I use `https://myurl.com/loudml/chronograf `as the base url, The Chronograf always look at this URL: `https://myurl.com/loudml/chronograf/loudml/api/buckets` not the `LOUDML_URL` when I click the LoudML tab.\r\n\r\nThe workaround is that you need to add a new location directive in nginx  to LoudML. for example, I add this to my nginx.conf\r\n\r\n```\r\n        location ^~ /loudml/chronograf/loudml/api/ {\r\n                rewrite /loudml/chronograf/loudml/api/(.*) /$1 break; #Only pass LoudML path eg: /buckets\r\n                proxy_ignore_client_abort on;\r\n                proxy_pass http://localhost:8077; #LoudML location\r\n                proxy_set_header Host $host;\r\n        }\r\n\r\n```\r\n\r\nChronograf & LoudML version that I use:\r\n\r\n```\r\nREPOSITORY          TAG                 DIGEST                                                                    IMAGE ID            CREATED             SIZE\r\nloudml/loudml       latest-devel        sha256:5c024207f2fa91f71e71e9ef76ba893dfc7454e893047d66c70076b0c09ee3d9   c4ff414668fd        4 days ago          1.32GB\r\nloudml/chronograf   latest              sha256:b9bb4f969b42e733daa3b9cb2f2586a94fa2033652153dc39021b5867e077936   358746164cda        2 weeks ago         48.4MB\r\n\r\n```\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/580740235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gilangcp","id":1003224,"node_id":"MDQ6VXNlcjEwMDMyMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1003224?v=4","gravatar_id":"","url":"https://api.github.com/users/gilangcp","html_url":"https://github.com/gilangcp","followers_url":"https://api.github.com/users/gilangcp/followers","following_url":"https://api.github.com/users/gilangcp/following{/other_user}","gists_url":"https://api.github.com/users/gilangcp/gists{/gist_id}","starred_url":"https://api.github.com/users/gilangcp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gilangcp/subscriptions","organizations_url":"https://api.github.com/users/gilangcp/orgs","repos_url":"https://api.github.com/users/gilangcp/repos","events_url":"https://api.github.com/users/gilangcp/events{/privacy}","received_events_url":"https://api.github.com/users/gilangcp/received_events","type":"User","site_admin":false}},{"id":2997137374,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjk5NzEzNzM3NA==","url":"https://api.github.com/repos/regel/loudml/issues/events/2997137374","actor":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-01-31T13:48:47Z","performed_via_github_app":null},{"id":2997137376,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI5OTcxMzczNzY=","url":"https://api.github.com/repos/regel/loudml/issues/events/2997137376","actor":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-01-31T13:48:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/582772889","html_url":"https://github.com/regel/loudml/issues/172#issuecomment-582772889","issue_url":"https://api.github.com/repos/regel/loudml/issues/172","id":582772889,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mjc3Mjg4OQ==","user":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false},"created_at":"2020-02-06T07:28:27Z","updated_at":"2020-02-06T07:30:16Z","author_association":"NONE","body":"Hi, @gilangcp\r\nThx a lot for your feedback.\r\n\r\nThe location directive\r\n`location ^~ /loudml/chronograf/loudml/api/`\r\nThis is exactly what I needed. With the configuration you wrote above everything works well.\r\n\r\nLet’s make a conclusion for other participants for the future.\r\nIf it’s needed to deploy LoudML installation with using proxy server, such as nginx, we may to do the next steps:\r\n- define how our URL has to look like. For example,\r\n`http://192.168.0.100/cronograf`\r\n- configure the BASE_PATH environment variable in the docker-compose.yml file. For example,\r\n```\r\nenvironment:\r\n  BASE_PATH: “/chronograf”\r\n  INFLUXDB_URL: http://influxdb:8086\r\n  LOUDML_URL: http://loudml:8077\r\n  KAPACITOR_URL: http://kapacitor:9092\r\n```\r\n- in a proxy (nginx) configuration file it’s needed to add the following location\r\n```\r\nlocation /chronograf {\r\n  proxy_set_header   Host $host;\r\n  proxy_pass http://chronograf:8888;\r\n}\r\n\r\nlocation ^~ /chronograf/loudml/api/ {\r\n  rewrite /chronograf/loudml/api/(.*) /$1 break;\r\n  proxy_ignore_client_abort on;\r\n  proxy_set_header Host $host;\r\n  proxy_pass http://loudml:8077;\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/582772889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false}},{"id":3012777117,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzAxMjc3NzExNw==","url":"https://api.github.com/repos/regel/loudml/issues/events/3012777117","actor":{"login":"gilangcp","id":1003224,"node_id":"MDQ6VXNlcjEwMDMyMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1003224?v=4","gravatar_id":"","url":"https://api.github.com/users/gilangcp","html_url":"https://github.com/gilangcp","followers_url":"https://api.github.com/users/gilangcp/followers","following_url":"https://api.github.com/users/gilangcp/following{/other_user}","gists_url":"https://api.github.com/users/gilangcp/gists{/gist_id}","starred_url":"https://api.github.com/users/gilangcp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gilangcp/subscriptions","organizations_url":"https://api.github.com/users/gilangcp/orgs","repos_url":"https://api.github.com/users/gilangcp/repos","events_url":"https://api.github.com/users/gilangcp/events{/privacy}","received_events_url":"https://api.github.com/users/gilangcp/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-06T07:28:28Z","performed_via_github_app":null},{"id":3012777120,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwMTI3NzcxMjA=","url":"https://api.github.com/repos/regel/loudml/issues/events/3012777120","actor":{"login":"gilangcp","id":1003224,"node_id":"MDQ6VXNlcjEwMDMyMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1003224?v=4","gravatar_id":"","url":"https://api.github.com/users/gilangcp","html_url":"https://github.com/gilangcp","followers_url":"https://api.github.com/users/gilangcp/followers","following_url":"https://api.github.com/users/gilangcp/following{/other_user}","gists_url":"https://api.github.com/users/gilangcp/gists{/gist_id}","starred_url":"https://api.github.com/users/gilangcp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gilangcp/subscriptions","organizations_url":"https://api.github.com/users/gilangcp/orgs","repos_url":"https://api.github.com/users/gilangcp/repos","events_url":"https://api.github.com/users/gilangcp/events{/privacy}","received_events_url":"https://api.github.com/users/gilangcp/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-06T07:28:28Z","performed_via_github_app":null},{"id":3012788533,"node_id":"MDExOkNsb3NlZEV2ZW50MzAxMjc4ODUzMw==","url":"https://api.github.com/repos/regel/loudml/issues/events/3012788533","actor":{"login":"sve71","id":39119140,"node_id":"MDQ6VXNlcjM5MTE5MTQw","avatar_url":"https://avatars.githubusercontent.com/u/39119140?v=4","gravatar_id":"","url":"https://api.github.com/users/sve71","html_url":"https://github.com/sve71","followers_url":"https://api.github.com/users/sve71/followers","following_url":"https://api.github.com/users/sve71/following{/other_user}","gists_url":"https://api.github.com/users/sve71/gists{/gist_id}","starred_url":"https://api.github.com/users/sve71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sve71/subscriptions","organizations_url":"https://api.github.com/users/sve71/orgs","repos_url":"https://api.github.com/users/sve71/repos","events_url":"https://api.github.com/users/sve71/events{/privacy}","received_events_url":"https://api.github.com/users/sve71/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-02-06T07:33:37Z","state_reason":null,"performed_via_github_app":null}]