[{"url":"https://api.github.com/repos/regel/loudml/issues/comments/657988797","html_url":"https://github.com/regel/loudml/issues/358#issuecomment-657988797","issue_url":"https://api.github.com/repos/regel/loudml/issues/358","id":657988797,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk4ODc5Nw==","user":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"created_at":"2020-07-14T06:10:04Z","updated_at":"2020-07-14T06:10:04Z","author_association":"OWNER","body":"The 'ssl' parameter is explicitly given to influxdb python library during initialization. At first glance, it's hard to see if something is missing. The 'chronograf' database is a secondary database used to insert so-called tagged annotations for abnormal data points, and can be renamed in bucket settings.\r\n\r\nfrom influxdb client library:\r\n```\r\n    :param ssl: use https instead of http to connect to InfluxDB, defaults to\r\n        False\r\n    :type ssl: bool\r\n```","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/657988797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/659374014","html_url":"https://github.com/regel/loudml/issues/358#issuecomment-659374014","issue_url":"https://api.github.com/repos/regel/loudml/issues/358","id":659374014,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTM3NDAxNA==","user":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false},"created_at":"2020-07-16T12:19:23Z","updated_at":"2020-07-16T12:19:23Z","author_association":"NONE","body":"Err, I can't quite follow you.\r\n\r\nSo how do I configure loudml to use the correct url and ssl settings if it doesn't seem to use the ones in loudml.yml?","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/659374014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/672913582","html_url":"https://github.com/regel/loudml/issues/358#issuecomment-672913582","issue_url":"https://api.github.com/repos/regel/loudml/issues/358","id":672913582,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MjkxMzU4Mg==","user":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false},"created_at":"2020-08-12T14:41:41Z","updated_at":"2020-08-12T14:41:41Z","author_association":"NONE","body":"Still not getting anywhere with this. \r\n\r\nLoudml still tries to talk HTTP to the influxdb server url (with HTTPS!) that is configured in the chronograf docker. The chronograf docker does talk HTTPS to influx, that part works fine. But loudml strips off the HTTPS part for some reason.","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/672913582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/688080341","html_url":"https://github.com/regel/loudml/issues/358#issuecomment-688080341","issue_url":"https://api.github.com/repos/regel/loudml/issues/358","id":688080341,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODA4MDM0MQ==","user":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false},"created_at":"2020-09-07T06:57:31Z","updated_at":"2020-09-07T06:57:31Z","author_association":"NONE","body":"This is still a thing. \r\n\r\nJust updated to latest and tried again. Loudml is still trying to talk HTTP to my influxdb while every link to that influxdb is explicitly configured as HTTPS.\r\n\r\nloudml_1      | INFO:root:job[f0c4359e-4efa-4b0b-b574-5beb762eb748] starting, nice=5\r\nloudml_1      | INFO:root:connecting to influxdb on domainname:8086, using database 'chronograf'\r\nloudml_1      | ERROR:root:400: Client sent an HTTP request to an HTTPS server.\r\nloudml_1      | Traceback (most recent call last):\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/loudml/worker.py\", line 53, in run\r\nloudml_1      |     res = getattr(self, func_name)(*args, **kwargs)\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/loudml/worker.py\", line 90, in train\r\nloudml_1      |     tags={'model': model_name},\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/loudml/influx.py\", line 682, in list_anomalies\r\nloudml_1      |     result = self.annotationdb.query(query)\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/loudml/influx.py\", line 417, in annotationdb\r\nloudml_1      |     self._annotationdb.create_database(db)\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/influxdb/client.py\", line 626, in create_database\r\nloudml_1      |     method=\"POST\")\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/influxdb/client.py\", line 450, in query\r\nloudml_1      |     expected_response_code=expected_response_code\r\nloudml_1      |   File \"/opt/vendor/lib/python3.5/site-packages/influxdb/client.py\", line 302, in request\r\nloudml_1      |     raise InfluxDBClientError(response.content, response.status_code)\r\nloudml_1      | influxdb.exceptions.InfluxDBClientError: 400: Client sent an HTTP request to an HTTPS server.\r\nloudml_1      | \r\nloudml_1      | 172.19.0.1 - - [2020-09-07 06:51:30] \"POST /models/telegraf_disk_mean_used_percent_host_detritus_5m/_train?from=now-30d&to=now&output_bucket=loudml&save_output_data=true&flag_abnormal_data=true HTTP/1.1\" 202 153 0.041317\r\nloudml_1      | ERROR:root:job[f0c4359e-4efa-4b0b-b574-5beb762eb748] failed: 400: Client sent an HTTP request to an HTTPS server.\r\nloudml_1      | \r\n","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/688080341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/701467373","html_url":"https://github.com/regel/loudml/issues/358#issuecomment-701467373","issue_url":"https://api.github.com/repos/regel/loudml/issues/358","id":701467373,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTQ2NzM3Mw==","user":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false},"created_at":"2020-09-30T15:31:54Z","updated_at":"2020-09-30T15:31:54Z","author_association":"NONE","body":"Looked into this a bit deeper.\r\n\r\nIn 'loudml/influx.py', a cfg var shows up in this line:\r\n    \r\n    def __init__(self, cfg):\r\n\r\nIt seems to contain some influxdb connection info that it's getting from chronograf when you click the \"Create Baseline\" button, but fields are mismatched or incomplete.\r\n\r\nIt contains a 'username' field but the influx.py code seems to expect 'dbuser'.  It does not contain a password at all, nor is the 'use_ssl' field set which defaults to 'False'.\r\n\r\nIf I edit influx.py and hardcode the above cfg fields with some appropriate config values it all starts working, but that clearly isn't how this is meant to work.\r\n\r\nI'm running this in docker, with the latest images:\r\n- loudml/loudml:latest\r\n- loudml/chronograf:latest\r\n","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/701467373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/regel/loudml/issues/comments/883184630","html_url":"https://github.com/regel/loudml/issues/358#issuecomment-883184630","issue_url":"https://api.github.com/repos/regel/loudml/issues/358","id":883184630,"node_id":"IC_kwDOBwPMHM40pFP2","user":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false},"created_at":"2021-07-20T08:00:14Z","updated_at":"2021-07-20T08:00:14Z","author_association":"NONE","body":"Hey, is anything still happening with loudml or is this project dead?","reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/comments/883184630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tubemeister","id":91840,"node_id":"MDQ6VXNlcjkxODQw","avatar_url":"https://avatars.githubusercontent.com/u/91840?v=4","gravatar_id":"","url":"https://api.github.com/users/tubemeister","html_url":"https://github.com/tubemeister","followers_url":"https://api.github.com/users/tubemeister/followers","following_url":"https://api.github.com/users/tubemeister/following{/other_user}","gists_url":"https://api.github.com/users/tubemeister/gists{/gist_id}","starred_url":"https://api.github.com/users/tubemeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tubemeister/subscriptions","organizations_url":"https://api.github.com/users/tubemeister/orgs","repos_url":"https://api.github.com/users/tubemeister/repos","events_url":"https://api.github.com/users/tubemeister/events{/privacy}","received_events_url":"https://api.github.com/users/tubemeister/received_events","type":"User","site_admin":false}}]