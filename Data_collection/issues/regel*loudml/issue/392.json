{"url":"https://api.github.com/repos/regel/loudml/issues/392","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/392/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/392/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/392/events","html_url":"https://github.com/regel/loudml/issues/392","id":674603842,"node_id":"MDU6SXNzdWU2NzQ2MDM4NDI=","number":392,"title":"[Error on create model] \"invalid field features.0.measurement: not a valid value\" (name limited by config \"^[a-zA-Z0-9-_@]+$\") ??","user":{"login":"toni-moreno","id":5883405,"node_id":"MDQ6VXNlcjU4ODM0MDU=","avatar_url":"https://avatars.githubusercontent.com/u/5883405?v=4","gravatar_id":"","url":"https://api.github.com/users/toni-moreno","html_url":"https://github.com/toni-moreno","followers_url":"https://api.github.com/users/toni-moreno/followers","following_url":"https://api.github.com/users/toni-moreno/following{/other_user}","gists_url":"https://api.github.com/users/toni-moreno/gists{/gist_id}","starred_url":"https://api.github.com/users/toni-moreno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toni-moreno/subscriptions","organizations_url":"https://api.github.com/users/toni-moreno/orgs","repos_url":"https://api.github.com/users/toni-moreno/repos","events_url":"https://api.github.com/users/toni-moreno/events{/privacy}","received_events_url":"https://api.github.com/users/toni-moreno/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-08-06T21:11:25Z","updated_at":"2020-08-07T11:54:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello @regel , sorry for this new  issue.\r\n\r\nI'm trying to create a model with this definition.\r\n```\r\n{\r\n   \"bucket_interval\":\"1m\",\r\n   \"default_bucket\":\"output-influx1\",\r\n   \"features\":[\r\n      {\r\n         \"anomaly_type\":\"low_high\",\r\n         \"default\":0,\r\n         \"field\":\"value\",\r\n         \"io\":\"io\",\r\n         \"match_all\":[\r\n            {\r\n               \"tag\":\"metric_id\",\r\n               \"value\":\"XXXXX\"\r\n            }\r\n         ],\r\n         \"measurement\":\"traffic.rxt_et-1/0/0\", <-------------------------------SEE HERE\r\n         \"metric\":\"mean\",\r\n         \"name\":\"mean_value\"\r\n      }\r\n   ],\r\n   \"grace_period\":0,\r\n   \"interval\":\"60s\",\r\n   \"max_evals\":20,\r\n   \"max_threshold\":70,\r\n   \"min_threshold\":50,\r\n   \"name\":\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\r\n   \"offset\":\"10s\",\r\n   \"seasonality\":{\r\n      \"daytime\":false,\r\n      \"weekday\":false\r\n   },\r\n   \"span\":256,\r\n   \"type\":\"donut\"\r\n}\r\n```\r\nit seems like doesn't like `traffic.rxt_et-1/0/0` as measurement maybe character validation?\r\n\r\n\r\n\r\nhttps://github.com/regel/loudml/blob/2d05a3e292954346fa9fd35c5fec7ced90428f4a/loudml/influx.py#L315\r\n\r\n\r\nhttps://github.com/regel/loudml/blob/2d05a3e292954346fa9fd35c5fec7ced90428f4a/loudml/schemas.py#L28-L32\r\n\r\n\r\n@regel IMHO is really important add as many characters in the measurement name as posibles in the influxdb database\r\n\r\nAs explained in the following doc \r\n* https://docs.influxdata.com/influxdb/v1.8/troubleshooting/frequently-asked-questions/#what-words-and-characters-should-i-avoid-when-writing-data-to-influxdb  \r\n* https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_reference/#special-characters\r\n* https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_reference/#data-types\r\n\r\n`\"',;:-/\\.[]{}` are valid characters and should be only scaped \"\\\" if conflicting with regex to use them, also key length limit should be 64Kb length\r\n\r\nWould you accept a PR  to fix this error?\r\n\r\nThank you in advance\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/392/timeline","performed_via_github_app":null,"state_reason":null}