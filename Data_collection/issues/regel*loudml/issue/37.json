{"url":"https://api.github.com/repos/regel/loudml/issues/37","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/37/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/37/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/37/events","html_url":"https://github.com/regel/loudml/issues/37","id":351020971,"node_id":"MDU6SXNzdWUzNTEwMjA5NzE=","number":37,"title":"Incomplete documentation information","user":{"login":"asvinours","id":7212609,"node_id":"MDQ6VXNlcjcyMTI2MDk=","avatar_url":"https://avatars.githubusercontent.com/u/7212609?v=4","gravatar_id":"","url":"https://api.github.com/users/asvinours","html_url":"https://github.com/asvinours","followers_url":"https://api.github.com/users/asvinours/followers","following_url":"https://api.github.com/users/asvinours/following{/other_user}","gists_url":"https://api.github.com/users/asvinours/gists{/gist_id}","starred_url":"https://api.github.com/users/asvinours/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asvinours/subscriptions","organizations_url":"https://api.github.com/users/asvinours/orgs","repos_url":"https://api.github.com/users/asvinours/repos","events_url":"https://api.github.com/users/asvinours/events{/privacy}","received_events_url":"https://api.github.com/users/asvinours/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/regel/loudml/milestones/7","html_url":"https://github.com/regel/loudml/milestone/7","labels_url":"https://api.github.com/repos/regel/loudml/milestones/7/labels","id":3603360,"node_id":"MDk6TWlsZXN0b25lMzYwMzM2MA==","number":7,"title":"1.4.0","description":null,"creator":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":5,"state":"closed","created_at":"2018-08-28T08:42:38Z","updated_at":"2018-10-25T08:21:42Z","due_on":null,"closed_at":"2018-10-25T08:21:42Z"},"comments":6,"created_at":"2018-08-16T01:14:42Z","updated_at":"2018-10-25T07:39:13Z","closed_at":"2018-10-25T07:39:13Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI have two main questions, tried to search everywhere in the documentation and I can't find the answers:\r\n`offset | (duration) The time offset used when querying the data source`\r\nI am having a really hard time understand what this mean. Could you provide more information?\r\n\r\n`One or more match_all conditions can be added and will automatically change the queries to your data sources with the right filters.`\r\nIs this feature only available for InfluxDB datasource? I tried to get it to work for elasticsearch and the filter doesn 't seem to work properly. When using the predict API, the observed count doesn't match the expected value if the filter was working properly.\r\n```\r\n{\r\n  \"bucket_interval\": \"5m\",\r\n  \"default_datasource\": \"elastic\",\r\n  \"timestamp_field\": \"createddate\",\r\n  \"features\": [\r\n    {\r\n      \"default\": 0,\r\n      \"metric\": \"count\",\r\n      \"field\": \"attempted\",\r\n      \"measurement\": \"item\",\r\n      \"name\": \"count_all_submitted_jobs\",\r\n      \"anomaly_type\": \"low_high\",\r\n      \"match_all\": [\r\n        {\"tag\": \"extra.submit_type\", \"value\": \"submit\"}\r\n      ]\r\n    }\r\n  ],\r\n  \"seasonality\": {\r\n      \"daytime\": true,\r\n      \"weekday\": true\r\n  },\r\n  \"interval\": 300,\r\n  \"max_evals\": 10,\r\n  \"name\": \"submitted-lh-model\",\r\n  \"offset\": 120,\r\n  \"forecast\": 30,\r\n  \"span\": 30,\r\n  \"max_threshold\": 25,\r\n  \"min_threshold\": 10,\r\n  \"type\": \"timeseries\"\r\n}\r\n```\r\n\r\nI used strace while running the predict API and I cansee there is no filter in the elasticsearch query:\r\n```\r\n{\\\"query\\\":{\\\"bool\\\":{\\\"must\\\":[{\\\"range\\\":{\\\"createddate\\\":{\\\"lt\\\":1534382700000,\\\"gte\\\":1534290300000}}}]}},\\\"aggs\\\":{\\\"histogram\\\":{\\\"date_histogram\\\":{\\\"extended_bounds\\\":{\\\"min\\\":1534290300000,\\\"max\\\":1534382400000.0},\\\"min_doc_count\\\":0,\\\"field\\\":\\\"createddate\\\",\\\"interval\\\":\\\"300s\\\",\\\"order\\\":{\\\"_key\\\":\\\"asc\\\"}},\\\"aggs\\\":{\\\"count_all_submitted_jobs\\\":{\\\"stats\\\":{\\\"field\\\":\\\"attempted\\\"}}}}}\r\n```","closed_by":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/37/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/37/timeline","performed_via_github_app":null,"state_reason":"completed"}