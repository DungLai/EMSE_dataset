{"url":"https://api.github.com/repos/regel/loudml/issues/117","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/117/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/117/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/117/events","html_url":"https://github.com/regel/loudml/issues/117","id":445828803,"node_id":"MDU6SXNzdWU0NDU4Mjg4MDM=","number":117,"title":"Cannot save prediction if parameter if \"match_all\" is defined for elastic datasource","user":{"login":"nonostar","id":39908308,"node_id":"MDQ6VXNlcjM5OTA4MzA4","avatar_url":"https://avatars.githubusercontent.com/u/39908308?v=4","gravatar_id":"","url":"https://api.github.com/users/nonostar","html_url":"https://github.com/nonostar","followers_url":"https://api.github.com/users/nonostar/followers","following_url":"https://api.github.com/users/nonostar/following{/other_user}","gists_url":"https://api.github.com/users/nonostar/gists{/gist_id}","starred_url":"https://api.github.com/users/nonostar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nonostar/subscriptions","organizations_url":"https://api.github.com/users/nonostar/orgs","repos_url":"https://api.github.com/users/nonostar/repos","events_url":"https://api.github.com/users/nonostar/events{/privacy}","received_events_url":"https://api.github.com/users/nonostar/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-05-19T14:56:28Z","updated_at":"2019-09-30T12:37:17Z","closed_at":"2019-09-30T12:37:17Z","author_association":"NONE","active_lock_reason":null,"body":"If I define a match section in my model, for example:\r\n`\"match_all\": [ {\"tag\": \"event.dataset.keyword\", \"value\": \"system.cpu\"} ]`\r\n\r\nCreation and training run both fine but writing prediction fails in elastic datasource:\r\n`curl -X POST \"http://localhost:8077/models/model_test/_start?save_prediction=true`\r\n\r\nwill result:\r\n`elasticsearch.helpers.BulkIndexError:` ('1 document(s) failed to index [...]\r\n'error': {'type': 'mapper_parsing_exception', 'reason': 'Could not dynamically add mapping for field [event.dataset.keyword]. Existing mapping for [event.dataset] must be of type object but found [text].'}`\r\n\r\nloudmld is trying to write to a json object as text...\r\n\r\n","closed_by":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/117/timeline","performed_via_github_app":null,"state_reason":"completed"}