{"url":"https://api.github.com/repos/regel/loudml/issues/105","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/105/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/105/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/105/events","html_url":"https://github.com/regel/loudml/issues/105","id":420989271,"node_id":"MDU6SXNzdWU0MjA5ODkyNzE=","number":105,"title":"AssertionError when training","user":{"login":"tommy-couzens","id":30808129,"node_id":"MDQ6VXNlcjMwODA4MTI5","avatar_url":"https://avatars.githubusercontent.com/u/30808129?v=4","gravatar_id":"","url":"https://api.github.com/users/tommy-couzens","html_url":"https://github.com/tommy-couzens","followers_url":"https://api.github.com/users/tommy-couzens/followers","following_url":"https://api.github.com/users/tommy-couzens/following{/other_user}","gists_url":"https://api.github.com/users/tommy-couzens/gists{/gist_id}","starred_url":"https://api.github.com/users/tommy-couzens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tommy-couzens/subscriptions","organizations_url":"https://api.github.com/users/tommy-couzens/orgs","repos_url":"https://api.github.com/users/tommy-couzens/repos","events_url":"https://api.github.com/users/tommy-couzens/events{/privacy}","received_events_url":"https://api.github.com/users/tommy-couzens/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-03-14T12:24:40Z","updated_at":"2020-02-19T07:18:59Z","closed_at":"2020-02-19T07:18:59Z","author_association":"NONE","active_lock_reason":null,"body":"This is my model:\r\n```\r\n---\r\noffset: 0s # set to from 30s\r\nfeatures:\r\n  io:\r\n  - metric: avg\r\n    field: usage_system\r\n    name: used\r\n    default: 0\r\n    measurement: cpu\r\n    anomaly_type: high\r\nbucket_interval: 1m\r\nname: diskio_reads\r\ndefault_datasource: influx\r\ninterval: 1m\r\nmax_evals: 25 # increased a lot\r\ntype: donut\r\nspan: 50 # increased a lot\r\n```\r\n\r\nThis is my output when training:\r\n\r\n```\r\nroot@919535c3b6bc:/tmp# loudml train --from \"now-1d\" --to \"now\" diskio_reads\r\nINFO:root:connecting to influxdb on influxdb:8086, using database 'chronograf'\r\nINFO:root:train(diskio_reads) range=2019-03-13T12:19:00.000Z-2019-03-14T12:20:00.000Z train_size=0.670000 batch_size=256 epochs=100)\r\nINFO:root:connecting to influxdb on influxdb:8086, using database 'telegraf'\r\nINFO:root:found 1441 time periods\r\nINFO:hyperopt.tpe:tpe_transform took 0.001963 seconds\r\nINFO:hyperopt.tpe:TPE using 0 trials\r\nINFO:hyperopt.tpe:tpe_transform took 0.002229 seconds\r\nINFO:hyperopt.tpe:TPE using 1/1 trials with best loss 45.880120\r\nINFO:hyperopt.tpe:tpe_transform took 0.002181 seconds\r\nINFO:hyperopt.tpe:TPE using 2/2 trials with best loss 45.660960\r\nINFO:hyperopt.tpe:tpe_transform took 0.002181 seconds\r\nINFO:hyperopt.tpe:TPE using 3/3 trials with best loss 45.660960\r\nINFO:hyperopt.tpe:tpe_transform took 0.002152 seconds\r\nINFO:hyperopt.tpe:TPE using 4/4 trials with best loss 45.442393\r\nINFO:hyperopt.tpe:tpe_transform took 0.002964 seconds\r\nINFO:hyperopt.tpe:TPE using 5/5 trials with best loss 45.442393\r\nINFO:hyperopt.tpe:tpe_transform took 0.002162 seconds\r\nINFO:hyperopt.tpe:TPE using 5/6 trials with best loss 45.442393\r\nINFO:hyperopt.tpe:tpe_transform took 0.002238 seconds\r\nINFO:hyperopt.tpe:TPE using 6/7 trials with best loss 44.001617\r\nINFO:hyperopt.tpe:tpe_transform took 0.002155 seconds\r\nINFO:hyperopt.tpe:TPE using 7/8 trials with best loss 44.001617\r\nINFO:hyperopt.tpe:tpe_transform took 0.002178 seconds\r\nINFO:hyperopt.tpe:TPE using 8/9 trials with best loss 44.001617\r\nINFO:hyperopt.tpe:tpe_transform took 0.002143 seconds\r\nINFO:hyperopt.tpe:TPE using 9/10 trials with best loss 44.001617\r\nINFO:hyperopt.tpe:tpe_transform took 0.002227 seconds\r\nINFO:hyperopt.tpe:TPE using 10/11 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002201 seconds\r\nINFO:hyperopt.tpe:TPE using 11/12 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002162 seconds\r\nINFO:hyperopt.tpe:TPE using 12/13 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002192 seconds\r\nINFO:hyperopt.tpe:TPE using 13/14 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002185 seconds\r\nINFO:hyperopt.tpe:TPE using 14/15 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002181 seconds\r\nINFO:hyperopt.tpe:TPE using 15/16 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002181 seconds\r\nINFO:hyperopt.tpe:TPE using 15/17 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002178 seconds\r\nINFO:hyperopt.tpe:TPE using 16/18 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002230 seconds\r\nINFO:hyperopt.tpe:TPE using 17/19 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002136 seconds\r\nINFO:hyperopt.tpe:TPE using 17/20 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002180 seconds\r\nINFO:hyperopt.tpe:TPE using 18/21 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002157 seconds\r\nINFO:hyperopt.tpe:TPE using 19/22 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002191 seconds\r\nINFO:hyperopt.tpe:TPE using 20/23 trials with best loss 41.591958\r\nINFO:hyperopt.tpe:tpe_transform took 0.002150 seconds\r\nINFO:hyperopt.tpe:TPE using 20/24 trials with best loss 41.591958\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/loudml\", line 11, in <module>\r\n    load_entry_point('loudml==1.5.0', 'console_scripts', 'loudml')()\r\n  File \"/usr/lib/python3/dist-packages/loudml/cli.py\", line 867, in main\r\n    args.exec(args)\r\n  File \"/usr/lib/python3/dist-packages/loudml/cli.py\", line 538, in exec\r\n    windows=windows,\r\n  File \"/usr/lib/python3/dist-packages/loudml/donut.py\", line 974, in train\r\n    abnormal=abnormal,\r\n  File \"/usr/lib/python3/dist-packages/loudml/donut.py\", line 736, in _train_on_dataset\r\n    trials=trials,\r\n  File \"/usr/lib/loudml/vendor/hyperopt/fmin.py\", line 307, in fmin\r\n    return_argmin=return_argmin,\r\n  File \"/usr/lib/loudml/vendor/hyperopt/base.py\", line 635, in fmin\r\n    return_argmin=return_argmin)\r\n  File \"/usr/lib/loudml/vendor/hyperopt/fmin.py\", line 322, in fmin\r\n    return trials.argmin\r\n  File \"/usr/lib/loudml/vendor/hyperopt/base.py\", line 590, in argmin\r\n    best_trial = self.best_trial\r\n  File \"/usr/lib/loudml/vendor/hyperopt/base.py\", line 584, in best_trial\r\n    assert not np.any(np.isnan(losses))\r\nAssertionError\r\n```","closed_by":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/105/timeline","performed_via_github_app":null,"state_reason":"completed"}