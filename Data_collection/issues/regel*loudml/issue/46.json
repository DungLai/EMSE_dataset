{"url":"https://api.github.com/repos/regel/loudml/issues/46","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/46/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/46/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/46/events","html_url":"https://github.com/regel/loudml/issues/46","id":365538060,"node_id":"MDU6SXNzdWUzNjU1MzgwNjA=","number":46,"title":"match_all field applies filters to all features instead of just its own","user":{"login":"daradermody","id":7104356,"node_id":"MDQ6VXNlcjcxMDQzNTY=","avatar_url":"https://avatars.githubusercontent.com/u/7104356?v=4","gravatar_id":"","url":"https://api.github.com/users/daradermody","html_url":"https://github.com/daradermody","followers_url":"https://api.github.com/users/daradermody/followers","following_url":"https://api.github.com/users/daradermody/following{/other_user}","gists_url":"https://api.github.com/users/daradermody/gists{/gist_id}","starred_url":"https://api.github.com/users/daradermody/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daradermody/subscriptions","organizations_url":"https://api.github.com/users/daradermody/orgs","repos_url":"https://api.github.com/users/daradermody/repos","events_url":"https://api.github.com/users/daradermody/events{/privacy}","received_events_url":"https://api.github.com/users/daradermody/received_events","type":"User","site_admin":false},"labels":[{"id":806419193,"node_id":"MDU6TGFiZWw4MDY0MTkxOTM=","url":"https://api.github.com/repos/regel/loudml/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-10-01T16:19:24Z","updated_at":"2019-02-25T08:11:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"This issue now tracks the issue where using `match_all` in a feature applies the filters to all features when querying Elasticsearch. Original comment preserved below.\r\n___\r\nIs it (or will it be) possible to create and train a model for a single time series, and apply the prediction and anomaly detection to other time series?\r\n\r\nFor example, if I have create a model that studied the traffic from a single IP address over the course of a day, can I apply that same model to 1000 other IP addresses without having to individually create and train a new model for each (which would be resource heavy). This use case would apply if I knew the different IP addresses should produce very similar traffic patterns.\r\n\r\nI tried to do this with the following features:\r\n```\r\n  \"features\": {\r\n    \"io\": [\r\n      {\r\n        \"field\": \"traffic\",\r\n        \"measurement\": \"log\",\r\n        \"metric\": \"avg\",\r\n        \"name\": \"traffic_pattern_to_analyse\",\r\n        \"match_all\": [\r\n          {\r\n            \"tag\": \"ip\",\r\n            \"value\": \"192.168.0.123\"\r\n          }\r\n        ]\r\n      }\r\n    ],\r\n    \"o\": [\r\n      {\r\n        \"field\": \"traffic\",\r\n        \"measurement\": \"log\",\r\n        \"metric\": \"avg\",\r\n        \"name\": \"traffic_pattern_to_predict\",\r\n        \"match_all\": [\r\n          {\r\n            \"tag\": \"id\",\r\n            \"value\": \"192.168.0.10\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n```\r\nI was thinking that the `traffic_pattern_to_analyse` feature would be used as the input to the model, and the prediction result (and anomaly detection) would be applied to both as outputs. This didn't work because the Elasticsearch query uses the both `match_all` filters on the entire query, so no results were returned.\r\n\r\nWill this be possible in future, or maybe something like what the [multi-metric feature](https://www.elastic.co/guide/en/x-pack/current/ml-gs-multi-jobs.html) in X-pack does where it splits a single time series into multiple time series based on a categorical field?","closed_by":null,"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/46/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/46/timeline","performed_via_github_app":null,"state_reason":null}