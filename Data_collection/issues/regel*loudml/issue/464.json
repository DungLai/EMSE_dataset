{"url":"https://api.github.com/repos/regel/loudml/issues/464","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/464/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/464/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/464/events","html_url":"https://github.com/regel/loudml/issues/464","id":735497728,"node_id":"MDU6SXNzdWU3MzU0OTc3Mjg=","number":464,"title":"predicted weekly demand skewed by one day","user":{"login":"andycarlsonuk","id":13467577,"node_id":"MDQ6VXNlcjEzNDY3NTc3","avatar_url":"https://avatars.githubusercontent.com/u/13467577?v=4","gravatar_id":"","url":"https://api.github.com/users/andycarlsonuk","html_url":"https://github.com/andycarlsonuk","followers_url":"https://api.github.com/users/andycarlsonuk/followers","following_url":"https://api.github.com/users/andycarlsonuk/following{/other_user}","gists_url":"https://api.github.com/users/andycarlsonuk/gists{/gist_id}","starred_url":"https://api.github.com/users/andycarlsonuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andycarlsonuk/subscriptions","organizations_url":"https://api.github.com/users/andycarlsonuk/orgs","repos_url":"https://api.github.com/users/andycarlsonuk/repos","events_url":"https://api.github.com/users/andycarlsonuk/events{/privacy}","received_events_url":"https://api.github.com/users/andycarlsonuk/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-11-03T17:13:13Z","updated_at":"2020-11-06T16:43:18Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I've recently set up a loudml model to forecast demand on a system that I work on.\r\n\r\nI trained it with data for one calendar month - 1st to 30th August.\r\n\r\nForecasting for October I see that it has predicted the shape of the 7 day variation in our usual demand curve quite nicely... with one problem - the curve is 1 day behind where it should be. 11th Oct was a Sunday for example and should have the smallest daytime demand peak but the forecast has the smallest peak on Monday 12th.\r\n\r\n![weekly-demand](https://user-images.githubusercontent.com/13467577/98015676-f683f180-1df4-11eb-9895-e2e62fcacf40.png)\r\n\r\nMy model json is below. The data store is influxdb and the input measurement is the hourly total HTTP elapsed time across all servers. The 'mean_' prefix for the feature name is misleading - sorry about that.\r\n\r\n```\r\n{\r\n    \"default_bucket\": \"barprod\",\r\n    \"name\": \"http_conc_foo\",\r\n    \"type\": \"donut\",\r\n    \"features\": [\r\n        {\r\n            \"name\": \"mean_http_secs\",\r\n            \"metric\": \"sum\",\r\n            \"field\": \"http_total_secs\",\r\n            \"measurement\": \"time_model\",\r\n            \"match_all\": [\r\n                {\"tag\": \"instance\", \"value\": \"foo.com\"}\r\n            ],\r\n            \"anomaly_type\": \"low_high\",\r\n            \"default\":0 \r\n        }\r\n    ],\r\n    \"run\": {\r\n        \"detect-anomalies\": true,\r\n        \"datasink\": \"loudmlout\"\r\n    },\r\n    \"bucket_interval\": \"1h\",\r\n    \"interval\": \"1h\",\r\n    \"offset\": \"2h\",\r\n    \"max_evals\": 10,\r\n    \"forecast\": 24,\r\n    \"seasonality\": {\r\n        \"daytime\": true,\r\n        \"weekday\": true\r\n    },\r\n    \"span\": 24\r\n}\r\n```\r\n\r\nThanks in advance.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/464/timeline","performed_via_github_app":null,"state_reason":null}