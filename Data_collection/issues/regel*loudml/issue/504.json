{"url":"https://api.github.com/repos/regel/loudml/issues/504","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/504/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/504/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/504/events","html_url":"https://github.com/regel/loudml/issues/504","id":773950202,"node_id":"MDU6SXNzdWU3NzM5NTAyMDI=","number":504,"title":"LoudML not saving data to output_bucket","user":{"login":"carbapetusa","id":76530410,"node_id":"MDQ6VXNlcjc2NTMwNDEw","avatar_url":"https://avatars.githubusercontent.com/u/76530410?v=4","gravatar_id":"","url":"https://api.github.com/users/carbapetusa","html_url":"https://github.com/carbapetusa","followers_url":"https://api.github.com/users/carbapetusa/followers","following_url":"https://api.github.com/users/carbapetusa/following{/other_user}","gists_url":"https://api.github.com/users/carbapetusa/gists{/gist_id}","starred_url":"https://api.github.com/users/carbapetusa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carbapetusa/subscriptions","organizations_url":"https://api.github.com/users/carbapetusa/orgs","repos_url":"https://api.github.com/users/carbapetusa/repos","events_url":"https://api.github.com/users/carbapetusa/events{/privacy}","received_events_url":"https://api.github.com/users/carbapetusa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-12-23T17:32:43Z","updated_at":"2021-01-02T20:10:48Z","closed_at":"2021-01-02T20:10:48Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nI got stuck with TICK-L stack and saving data to output bucket.\r\n\r\nAll is set up with docker compose. I am able to train model, start the predictions.\r\n\r\nThe issue is have is that no data is saved to defined output bucket.\r\n\r\nloudml.yml:\r\n\r\n---\r\nbuckets:\r\n - name: output\r\n   type: influxdb\r\n   addr: influxdb:8086\r\n   database: loudml\r\n   retention_policy: autogen   \r\n   measurement: loudml\r\n - name: data\r\n   type: influxdb\r\n   addr: influxdb:8086\r\n   database: esp8266_test\r\n   retention_policy: autogen\r\n   measurement: data_test\r\n\r\nstorage:\r\n  path: /var/lib/loudml\r\n\r\nserver:\r\n  listen: 0.0.0.0:8077\r\n\r\nEverything seems to work fine. Just no data saved.\r\n\r\nLoudML log:\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:43] \"POST /buckets HTTP/1.1\" 201 115 0.000602\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:43] \"GET /buckets/telegraf_autogen_cpu HTTP/1.1\" 200 255 0.000624\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:43] \"POST /models HTTP/1.1\" 201 123 0.004820\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:43] \"POST /models/telegraf_cpu_mean_usage_system__10s/hooks HTTP/1.1\" 201 123 0.005261\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:43] \"POST /models/telegraf_cpu_mean_usage_system__10s/_train?from=now-1h&to=now&output_bucket=loudml&save_output_data=true&flag_abnormal_data=true HTTP/1.1\" 202 153 0.002463\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:45] \"GET /models HTTP/1.1\" 200 700 0.003778\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:50] \"GET /jobs/2664c27f-f5ca-41bb-8a91-b43d00a62577 HTTP/1.1\" 200 421 0.000659\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:55] \"GET /models/telegraf_cpu_mean_usage_system__10s HTTP/1.1\" 200 698 0.001536\r\n\r\n172.20.0.6 - - [2020-12-23 16:30:55] \"GET /jobs/2664c27f-f5ca-41bb-8a91-b43d00a62577 HTTP/1.1\" 200 422 0.001438\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:00] \"GET /jobs/2664c27f-f5ca-41bb-8a91-b43d00a62577 HTTP/1.1\" 200 414 0.000866\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:00] \"GET /models/telegraf_cpu_mean_usage_system__10s HTTP/1.1\" 200 698 0.001963\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:05] \"GET /jobs/2664c27f-f5ca-41bb-8a91-b43d00a62577 HTTP/1.1\" 200 414 0.000736\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:05] \"GET /models/telegraf_cpu_mean_usage_system__10s HTTP/1.1\" 200 698 0.002308\r\n\r\nINFO:root:job[2664c27f-f5ca-41bb-8a91-b43d00a62577] done. Took 0:00:25.143977\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:10] \"GET /jobs/2664c27f-f5ca-41bb-8a91-b43d00a62577 HTTP/1.1\" 200 477 0.000776\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:10] \"GET /models/telegraf_cpu_mean_usage_system__10s HTTP/1.1\" 200 720 0.002937\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:15] \"GET /jobs/2664c27f-f5ca-41bb-8a91-b43d00a62577 HTTP/1.1\" 200 477 0.001132\r\n\r\n172.20.0.6 - - [2020-12-23 16:31:15] \"GET /models/telegraf_cpu_mean_usage_system__10s HTTP/1.1\" 200 720 0.003972\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:30:24, next run: 2020-12-23 16:31:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:31:24, next run: 2020-12-23 16:32:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:32:24, next run: 2020-12-23 16:33:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:33:24, next run: 2020-12-23 16:34:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:34:24, next run: 2020-12-23 16:35:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:35:24, next run: 2020-12-23 16:36:24)\r\n\r\n172.20.0.6 - - [2020-12-23 16:36:51] \"GET /models HTTP/1.1\" 200 720 0.004987\r\n\r\n172.20.0.6 - - [2020-12-23 16:36:53] \"POST /models/telegraf_cpu_mean_usage_system__10s/_start?output_bucket=loudml&save_output_data=true&flag_abnormal_data=true HTTP/1.1\" 204 104 0.018604\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: [never], next run: 2020-12-23 16:37:03)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:37:04, next run: 2020-12-23 16:37:14)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:37:14, next run: 2020-12-23 16:37:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:36:24, next run: 2020-12-23 16:37:24)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:37:24, next run: 2020-12-23 16:37:34)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:37:34, next run: 2020-12-23 16:37:44)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:37:44, next run: 2020-12-23 16:37:54)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:37:54, next run: 2020-12-23 16:38:04)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:38:04, next run: 2020-12-23 16:38:14)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:38:14, next run: 2020-12-23 16:38:24)\r\n\r\nINFO:schedule:Running job Every 1 minute do daemon_clear_jobs() (last run: 2020-12-23 16:37:25, next run: 2020-12-23 16:38:25)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:38:24, next run: 2020-12-23 16:38:34)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:38:34, next run: 2020-12-23 16:38:44)\r\n\r\nINFO:schedule:Running job Every 10.0 seconds do daemon_exec_scheduled_job('_eval(telegraf_cpu_mean_usage_system__10s)') (last run: 2020-12-23 16:38:44, next run: 2020-12-23 16:38:54)\r\n\r\nTraceback (most recent call last):\r\n\r\nFile \"/opt/vendor/lib/python3.5/site-packages/loudml/server.py\", line 105, in wrapper\r\n\r\nreturn job_func(*args, **kwargs)\r\n\r\nFile \"/opt/vendor/lib/python3.5/site-packages/loudml/server.py\", line 178, in daemon_exec_scheduled_job\r\n\r\n'loudmld {}'.format(pkg_resources.require(\"loudml\")[0].version)\r\n\r\nFile \"/usr/lib/python3/dist-packages/pkg_resources/__init__.py\", line 963, in require\r\n\r\nneeded = self.resolve(parse_requirements(requirements))\r\n\r\nFile \"/usr/lib/python3/dist-packages/pkg_resources/__init__.py\", line 849, in resolve\r\n\r\nraise DistributionNotFound(req, requirers)\r\n\r\npkg_resources.DistributionNotFound: The 'pycrypto>=2.6.1' distribution was not found and is required by loudml\r\n\r\n","closed_by":{"login":"carbapetusa","id":76530410,"node_id":"MDQ6VXNlcjc2NTMwNDEw","avatar_url":"https://avatars.githubusercontent.com/u/76530410?v=4","gravatar_id":"","url":"https://api.github.com/users/carbapetusa","html_url":"https://github.com/carbapetusa","followers_url":"https://api.github.com/users/carbapetusa/followers","following_url":"https://api.github.com/users/carbapetusa/following{/other_user}","gists_url":"https://api.github.com/users/carbapetusa/gists{/gist_id}","starred_url":"https://api.github.com/users/carbapetusa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carbapetusa/subscriptions","organizations_url":"https://api.github.com/users/carbapetusa/orgs","repos_url":"https://api.github.com/users/carbapetusa/repos","events_url":"https://api.github.com/users/carbapetusa/events{/privacy}","received_events_url":"https://api.github.com/users/carbapetusa/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/504/timeline","performed_via_github_app":null,"state_reason":"completed"}