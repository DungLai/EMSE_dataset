{"url":"https://api.github.com/repos/regel/loudml/issues/220","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/220/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/220/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/220/events","html_url":"https://github.com/regel/loudml/issues/220","id":571517848,"node_id":"MDU6SXNzdWU1NzE1MTc4NDg=","number":220,"title":"training failed","user":{"login":"langerma","id":6053589,"node_id":"MDQ6VXNlcjYwNTM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/6053589?v=4","gravatar_id":"","url":"https://api.github.com/users/langerma","html_url":"https://github.com/langerma","followers_url":"https://api.github.com/users/langerma/followers","following_url":"https://api.github.com/users/langerma/following{/other_user}","gists_url":"https://api.github.com/users/langerma/gists{/gist_id}","starred_url":"https://api.github.com/users/langerma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/langerma/subscriptions","organizations_url":"https://api.github.com/users/langerma/orgs","repos_url":"https://api.github.com/users/langerma/repos","events_url":"https://api.github.com/users/langerma/events{/privacy}","received_events_url":"https://api.github.com/users/langerma/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2020-02-26T16:44:52Z","updated_at":"2021-02-04T18:42:30Z","closed_at":"2021-02-04T18:42:30Z","author_association":"NONE","active_lock_reason":null,"body":"Good Evening,\r\n\r\nI tried to train a model on opentsdb but somehow it ends up with an error:\r\n`127.0.0.1 - - [2020-02-26 17:36:35] \"POST /models/opentsdb-test/_train?epochs=100&max_evals=10&from=now-90d&to=now&continue=False HTTP/1.1\" 202 153 0.041613\r\nI0226 17:36:35.877790 548386684944 worker.py:45] job[8b36f0c9-7093-4251-81f6-09e75beba377] starting, nice=5\r\nI0226 17:36:35.946151 548386684944 donut.py:1028] train(opentsdb-test) range=2019-11-28T16:36:00.000Z-2020-02-26T16:37:00.000Z train_size=0.670000 batch_size=64 epochs=100)\r\nI0226 17:36:35.946992 548386684944 opentsdb.py:269] connecting to opentsdb on x.x.x.x:4242\r\n127.0.0.1 - - [2020-02-26 17:36:36] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.006920\r\n127.0.0.1 - - [2020-02-26 17:36:37] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.007675\r\n127.0.0.1 - - [2020-02-26 17:36:38] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.009050\r\n127.0.0.1 - - [2020-02-26 17:36:39] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.003500\r\n127.0.0.1 - - [2020-02-26 17:36:40] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.005847\r\n127.0.0.1 - - [2020-02-26 17:36:41] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.002524\r\n127.0.0.1 - - [2020-02-26 17:36:42] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.002218\r\n127.0.0.1 - - [2020-02-26 17:36:43] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 312 0.002239\r\n127.0.0.1 - - [2020-02-26 17:36:45] \"GET /jobs/8b36f0c9-7093-4251-81f6-09e75beba377?fields=result&include_fields=false HTTP/1.1\" 200 313 0.002196\r\nI0226 17:36:45.679394 548386684944 donut.py:1064] found 129602 time periods\r\nE0226 17:36:45.691788 548386684944 worker.py:57] 'generator' object is not subscriptable\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/loudml-1.6.0-py3.6.egg/loudml/worker.py\", line 53, in run\r\n    res = getattr(self, func_name)(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/loudml-1.6.0-py3.6.egg/loudml/worker.py\", line 101, in train\r\n    **kwargs\r\n  File \"/usr/local/lib/python3.6/dist-packages/loudml-1.6.0-py3.6.egg/loudml/donut.py\", line 1091, in train\r\n    abnormal=abnormal,\r\n  File \"/usr/local/lib/python3.6/dist-packages/loudml-1.6.0-py3.6.egg/loudml/donut.py\", line 843, in _train_on_dataset\r\n    rstate=fmin_state,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hyperopt/fmin.py\", line 307, in fmin\r\n    return_argmin=return_argmin,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hyperopt/base.py\", line 635, in fmin\r\n    return_argmin=return_argmin)\r\n  File \"/usr/local/lib/python3.6/dist-packages/hyperopt/fmin.py\", line 314, in fmin\r\n    pass_expr_memo_ctrl=pass_expr_memo_ctrl)\r\n  File \"/usr/local/lib/python3.6/dist-packages/hyperopt/base.py\", line 786, in __init__\r\n    pyll.toposort(self.expr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/hyperopt/pyll/base.py\", line 715, in toposort\r\n    assert order[-1] == expr\r\nTypeError: 'generator' object is not subscriptable\r\nE0226 17:36:45.697966 548348031472 server.py:389] job[8b36f0c9-7093-4251-81f6-09e75beba377] failed: 'generator' object is not subscriptable`\r\n\r\nthe model i used:\r\n`{\r\n        \"bucket_interval\": \"60s\",\r\n        \"default_bucket\": \"opentsdb\",\r\n        \"features\":\r\n        [\r\n                {\r\n                        \"name\": \"avg_load1\",\r\n                        \"measurement\": \"system_load1\",\r\n                        \"field\": \"system_load1\",\r\n                        \"metric\": \"avg\",\r\n                        \"default\": null,\r\n                        \"anomaly_type\": \"low_high\"\r\n                }\r\n        ],\r\n        \"interval\": \"60s\",\r\n        \"max_evals\": 10,\r\n        \"offset\": \"10s\",\r\n        \"span\": 10,\r\n        \"type\": \"donut\",\r\n        \"name\": \"opentsdb-test\"\r\n}`","closed_by":{"login":"langerma","id":6053589,"node_id":"MDQ6VXNlcjYwNTM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/6053589?v=4","gravatar_id":"","url":"https://api.github.com/users/langerma","html_url":"https://github.com/langerma","followers_url":"https://api.github.com/users/langerma/followers","following_url":"https://api.github.com/users/langerma/following{/other_user}","gists_url":"https://api.github.com/users/langerma/gists{/gist_id}","starred_url":"https://api.github.com/users/langerma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/langerma/subscriptions","organizations_url":"https://api.github.com/users/langerma/orgs","repos_url":"https://api.github.com/users/langerma/repos","events_url":"https://api.github.com/users/langerma/events{/privacy}","received_events_url":"https://api.github.com/users/langerma/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/220/timeline","performed_via_github_app":null,"state_reason":"completed"}