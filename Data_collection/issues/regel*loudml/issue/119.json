{"url":"https://api.github.com/repos/regel/loudml/issues/119","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/119/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/119/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/119/events","html_url":"https://github.com/regel/loudml/issues/119","id":456533062,"node_id":"MDU6SXNzdWU0NTY1MzMwNjI=","number":119,"title":"1-click ML button not available in Chronograf","user":{"login":"yolkhovyy","id":9390324,"node_id":"MDQ6VXNlcjkzOTAzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/9390324?v=4","gravatar_id":"","url":"https://api.github.com/users/yolkhovyy","html_url":"https://github.com/yolkhovyy","followers_url":"https://api.github.com/users/yolkhovyy/followers","following_url":"https://api.github.com/users/yolkhovyy/following{/other_user}","gists_url":"https://api.github.com/users/yolkhovyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yolkhovyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yolkhovyy/subscriptions","organizations_url":"https://api.github.com/users/yolkhovyy/orgs","repos_url":"https://api.github.com/users/yolkhovyy/repos","events_url":"https://api.github.com/users/yolkhovyy/events{/privacy}","received_events_url":"https://api.github.com/users/yolkhovyy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2019-06-15T12:27:14Z","updated_at":"2020-02-19T07:17:23Z","closed_at":"2020-02-19T07:17:23Z","author_association":"NONE","active_lock_reason":null,"body":"![Screenshot from 2019-06-15 13-01-40](https://user-images.githubusercontent.com/9390324/59551387-0d644280-8f79-11e9-8a0d-8835e7930a34.png)\r\n\r\nThe 1-click ML button is not available, please see attached screenshot.\r\n\r\nHave followed a tutorial here: https://medium.com/loud-ml/a-devops-tutorial-to-setup-intelligent-machine-learning-driven-alerts-c4de93cf6d66\r\n\r\nInfluxDB/Telegraf/Kapacitor run on a Raspberry Pi 3B:\r\nKapacitor OSS 1.5.2 (git: HEAD 3086452d00830e01d932838d8c6d1df818648ad3)\r\nInfluxdb OSS 1.7.6 de0528dc-8f69-11e9-847f-b827eb200a4c\r\nTelegraf 1.10.3 (git: HEAD 294bb666)\r\n\r\n\r\nChronograf/LoudML - on Ubuntu 2018.4:\r\nDocker version 18.09.6, build 481bc77\r\n```\r\nf6400ffb5415        loudml/chronograf   \"/usr/bin/chronograf…\"   2 hours ago         Up 2 hours          0.0.0.0:8888->8888/tcp   compose_chronograf_1\r\nd1d044d237ce        loudml/community    \"/bin/sh -c /usr/bin…\"   2 hours ago         Up 2 hours          0.0.0.0:8077->8077/tcp   compose_loudml_1\r\n```\r\n\r\nloudml.yml:\r\n```\r\ndatasources:\r\n  - name: influx\r\n    type: influxdb\r\n    addr: 192.168.1.211:8086\r\n    database: telegraf\r\n  - name: kapacitor\r\n    type: influxdb\r\n    addr: 192.168.1.211:9092\r\n    database: from_loudml\r\n\r\nstorage:\r\n  path: /var/lib/loudml\r\n\r\nserver:\r\n  listen: 0.0.0.0:8077\r\n```\r\n\r\n\r\ndocker-compose:\r\n```\r\n# This is a Docker Compose file to work with Loud ML and an InfluxDB stack.\r\n\r\nversion: \"2\"\r\n\r\nservices:\r\n  loudml:\r\n    image: loudml/community\r\n    volumes:\r\n      - ./etc/loudml.yml:/etc/loudml/config.yml:ro\r\n      - ./var/loudml:/var/lib/loudml\r\n    ports:\r\n      - \"8077:8077\"\r\n\r\n  chronograf:\r\n    image: loudml/chronograf\r\n    depends_on:\r\n      - loudml\r\n    ports:\r\n      - \"8888:8888\"\r\n    volumes:\r\n      - ./var/chronograf:/var/lib/chronograf\r\n    environment:\r\n      INFLUXDB_URL: http://192.168.1.211:8086\r\n      LOUDML_URL: http://localhost:8077\r\n      KAPACITOR_URL: http://192.168.1.211:9092\r\n```\r\nSome log:\r\n```\r\nStarting compose_loudml_1 ... done\r\nStarting compose_chronograf_1 ... done\r\nAttaching to compose_loudml_1, compose_chronograf_1\r\nloudml_1      | ERROR:root:detected development environment - incremental training disabled\r\nloudml_1      | INFO:root:starting Loud ML server on 0.0.0.0:8077\r\nchronograf_1  | time=\"2019-06-15T14:44:18Z\" level=info msg=\"Running migration 59b0cda4fc7909ff84ee5c4f9cb4b655b6a26620\" \r\nchronograf_1  | time=\"2019-06-15T14:44:18Z\" level=info msg=\"Serving chronograf at http://[::]:8888\" component=server \r\nchronograf_1  | time=\"2019-06-15T14:44:18Z\" level=info msg=\"Reporting usage stats\" component=usage freq=24h reporting_addr=\"https://usage.influxdata.com\" stats=\"os,arch,version,cluster_id,uptime\" \r\n\r\nchronograf_1  | time=\"2019-06-15T14:44:42Z\" level=info msg=\"Serving assets\" component=server method=GET remote_addr=\"172.20.0.1:37192\" url=/ \r\n```\r\n\r\nThis might be important:\r\n```\r\nchronograf_1  | 2019/06/15 14:45:46 http: proxy error: dial tcp 127.0.0.1:8077: connect: connection refused\r\nchronograf_1  | time=\"2019-06-15T14:45:46Z\" level=info msg=\"Response: Bad Gateway\" component=server method=GET remote_addr=\"172.20.0.1:37226\" response_time=10.004400907s status=502 \r\nchronograf_1  | 2019/06/15 14:45:46 http: proxy error: dial tcp 127.0.0.1:8077: connect: connection refused\r\nchronograf_1  | time=\"2019-06-15T14:45:46Z\" level=info msg=\"Response: Bad Gateway\" component=server method=GET remote_addr=\"172.20.0.1:37218\" response_time=10.008969819s status=502 \r\n```\r\n\r\nJust noticed that `linear` fill is not supported, have tried `previous` - no change. \r\n\r\nWhen mouse is over the button I see a pop up with the following message (among other things that look ok):\r\n```\r\nUnable to find LoadML datasource for selected database. Check configuration.\r\n```\r\n\r\nlocalhost:8077 returns:\r\n```\r\n{\"host_id\":\"52b5926e7a3120d537f86eff37162d2c\",\"tagline\":\"The Disruptive Machine Learning API\",\"version\":\"1.5.0\"}\r\n```\r\n\r\n\r\n","closed_by":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/119/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/119/timeline","performed_via_github_app":null,"state_reason":"completed"}