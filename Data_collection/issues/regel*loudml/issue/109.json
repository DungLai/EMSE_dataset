{"url":"https://api.github.com/repos/regel/loudml/issues/109","repository_url":"https://api.github.com/repos/regel/loudml","labels_url":"https://api.github.com/repos/regel/loudml/issues/109/labels{/name}","comments_url":"https://api.github.com/repos/regel/loudml/issues/109/comments","events_url":"https://api.github.com/repos/regel/loudml/issues/109/events","html_url":"https://github.com/regel/loudml/issues/109","id":424594913,"node_id":"MDU6SXNzdWU0MjQ1OTQ5MTM=","number":109,"title":"Error while training model that elasticsearch index data ","user":{"login":"kang589","id":48878624,"node_id":"MDQ6VXNlcjQ4ODc4NjI0","avatar_url":"https://avatars.githubusercontent.com/u/48878624?v=4","gravatar_id":"","url":"https://api.github.com/users/kang589","html_url":"https://github.com/kang589","followers_url":"https://api.github.com/users/kang589/followers","following_url":"https://api.github.com/users/kang589/following{/other_user}","gists_url":"https://api.github.com/users/kang589/gists{/gist_id}","starred_url":"https://api.github.com/users/kang589/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kang589/subscriptions","organizations_url":"https://api.github.com/users/kang589/orgs","repos_url":"https://api.github.com/users/kang589/repos","events_url":"https://api.github.com/users/kang589/events{/privacy}","received_events_url":"https://api.github.com/users/kang589/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-03-24T09:57:41Z","updated_at":"2019-09-30T08:59:25Z","closed_at":"2019-09-30T08:59:25Z","author_association":"NONE","active_lock_reason":null,"body":"Hi @regel. \r\nI have a elasticsearch problem with loudml-1.4.3. My model is below.\r\n\r\n```\r\n{\r\n  \"bucket_interval\": \"10m\",\r\n  \"default_datasource\": \"weblog\",\r\n  \"features\": [\r\n    {\r\n      \"default\": 0,\r\n      \"field\": \"var_len\",\r\n      \"metric\": \"max\",\r\n      \"name\": \"test\"\r\n    }\r\n  ],\r\n  \"interval\": 60,\r\n  \"max_evals\": 10,\r\n  \"name\": \"varlen-model\",\r\n  \"offset\": 30,\r\n  \"span\": 5,\r\n  \"max_threshold\": 0,\r\n  \"min_threshold\": 0,\r\n  \"type\": \"timeseries\"\r\n}\r\n```\r\n\r\nBut training is not working.\r\n\r\n```\r\n[root@Centos7 ~]# loudml create-model /etc/loudml/model.yml\r\n/usr/lib64/python3.4/importlib/_bootstrap.py:321: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  return f(*args, **kwds)\r\nINFO:root:model 'varlen-model' created\r\n[root@Centos7 ~]# loudml train --from \"2011-01-10T00:00:00Z\" --to \"2011-01-11T00:00:00Z\" varlen-model\r\n/usr/lib64/python3.4/importlib/_bootstrap.py:321: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  return f(*args, **kwds)\r\nINFO:root:train(varlen-model) range=2011-01-10T00:00:00.000Z-2011-01-11T00:00:00.000Z train_size=0.670000 batch_size=64 epochs=100)\r\nINFO:root:connecting to elasticsearch on 192.168.31.247:9200\r\nERROR:root:RequestError(400, 'search_phase_execution_exception', 'Fielddata is disabled on text fields by default. Set fielddata=true on [timestamp] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead.')\r\n```\r\n\r\nWhat exact means this error? \r\nData type of 'var_len' field is number.\r\nData type of 'timestamp' field is date.\r\nwhat should I do?\r\n\r\nAnd i want to use loudml-elastic-1.5. Thanks.:)","closed_by":{"login":"regel","id":355557,"node_id":"MDQ6VXNlcjM1NTU1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/355557?v=4","gravatar_id":"","url":"https://api.github.com/users/regel","html_url":"https://github.com/regel","followers_url":"https://api.github.com/users/regel/followers","following_url":"https://api.github.com/users/regel/following{/other_user}","gists_url":"https://api.github.com/users/regel/gists{/gist_id}","starred_url":"https://api.github.com/users/regel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/regel/subscriptions","organizations_url":"https://api.github.com/users/regel/orgs","repos_url":"https://api.github.com/users/regel/repos","events_url":"https://api.github.com/users/regel/events{/privacy}","received_events_url":"https://api.github.com/users/regel/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/regel/loudml/issues/109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/regel/loudml/issues/109/timeline","performed_via_github_app":null,"state_reason":"completed"}