[{"id":3037258614,"node_id":"MDEyOkxhYmVsZWRFdmVudDMwMzcyNTg2MTQ=","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3037258614","actor":{"login":"crobibero","id":24963659,"node_id":"MDQ6VXNlcjI0OTYzNjU5","avatar_url":"https://avatars.githubusercontent.com/u/24963659?v=4","gravatar_id":"","url":"https://api.github.com/users/crobibero","html_url":"https://github.com/crobibero","followers_url":"https://api.github.com/users/crobibero/followers","following_url":"https://api.github.com/users/crobibero/following{/other_user}","gists_url":"https://api.github.com/users/crobibero/gists{/gist_id}","starred_url":"https://api.github.com/users/crobibero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crobibero/subscriptions","organizations_url":"https://api.github.com/users/crobibero/orgs","repos_url":"https://api.github.com/users/crobibero/repos","events_url":"https://api.github.com/users/crobibero/events{/privacy}","received_events_url":"https://api.github.com/users/crobibero/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-02-14T02:48:52Z","label":{"name":"enhancement","color":"a2eeef"},"performed_via_github_app":null},{"id":3037258625,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQzMDM3MjU4NjI1","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3037258625","actor":{"login":"crobibero","id":24963659,"node_id":"MDQ6VXNlcjI0OTYzNjU5","avatar_url":"https://avatars.githubusercontent.com/u/24963659?v=4","gravatar_id":"","url":"https://api.github.com/users/crobibero","html_url":"https://github.com/crobibero","followers_url":"https://api.github.com/users/crobibero/followers","following_url":"https://api.github.com/users/crobibero/following{/other_user}","gists_url":"https://api.github.com/users/crobibero/gists{/gist_id}","starred_url":"https://api.github.com/users/crobibero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crobibero/subscriptions","organizations_url":"https://api.github.com/users/crobibero/orgs","repos_url":"https://api.github.com/users/crobibero/repos","events_url":"https://api.github.com/users/crobibero/events{/privacy}","received_events_url":"https://api.github.com/users/crobibero/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2020-02-14T02:48:52Z","assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/586081572","html_url":"https://github.com/k4yt3x/video2x/issues/201#issuecomment-586081572","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/201","id":586081572,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjA4MTU3Mg==","user":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"created_at":"2020-02-14T03:32:10Z","updated_at":"2020-02-14T03:32:10Z","author_association":"OWNER","body":"This is really cool. Thanks for showing me this.\r\nUnfortunately, and really unluckily, I have to deal with a huge amount of due dates right now and I can't test this myself. However, I'll take a look at it whenever possible.\r\n\r\nHere's something one of the repo contributor has written. It's a docker file for Ubuntu 19. Take a look  if you're interested. Maybe you can use this to enhance your DockerFile or enhance this DockerFile. Credit goes to @ddouglas87.\r\n\r\n```dockerfile\r\nFROM ubuntu:19.04\r\n#FROM nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04\r\nMAINTAINER Danielle Douglas <ddouglas87@gmail.com>\r\n\r\n# Don't ask questions during image setup.\r\nENV DEBIAN_FRONTEND noninteractive\r\n\r\n# Install apt-fast, because we got gigs to download.\r\nRUN apt-get update &&\\\r\n    apt-get install -y --no-install-recommends software-properties-common &&\\\r\n    add-apt-repository ppa:apt-fast/stable &&\\\r\n    apt-get install -y --no-install-recommends apt-fast\r\n\r\n\r\n## Install Video2X ##\r\n\r\n# Dependencies for Video2X\r\nRUN apt-fast install -y --no-install-recommends git-core python3-pip python3-setuptools python3-wheel python3-psutil ffmpeg &&\\\r\n # Note: intel-media-va-driver-non-free and libva2 may or may not accelerate ffmpeg video encoding and decoding.  I'm uncertain which, if any, packages to install for intel hw enc and dec acceleration.\r\n # Install Video2X\r\n cd / &&\\\r\n git clone --progress --branch=2.11.0 https://github.com/k4yt3x/video2x.git &&\\\r\n pip3 install -r video2x/bin/requirements.txt\r\n\r\n\r\n## Install CUDA, cuDNN devel, and cuDNN runtime.\r\nRUN if [ \"$driver\" != \"anime4k\" ] ;\\\r\nthen \\\r\n    apt-fast install -y --no-install-recommends gnupg2 curl ca-certificates &&\\\r\n    curl -fsSL https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub | apt-key add - &&\\\r\n    echo \"deb https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64 /\" > /etc/apt/sources.list.d/nvidia-ml.list &&\\\r\n    apt-fast update &&\\\r\n    apt-fast install -y --no-install-recommends nvidia-cuda-toolkit libcudnn7 libcudnn7-dev ;\\\r\nfi\r\n## nvidia-container-runtime\r\nENV NVIDIA_DRIVER_CAPABILITIES compute,utility\r\n\r\n\r\n# RUN apt-fast install -y --no-install-recommends nvidia-cuda-toolkit\r\n\r\n## Install Drivers ##\r\n\r\n# Chooses which driver to build.\r\n# eg: docker build -t video2x . --build-arg driver=waifu2x-ncnn-vulkan\r\nARG driver=all\r\n\r\n# Check if driver exists.\r\nSHELL [\"/bin/bash\", \"-c\"]\r\nRUN drivers=(all anime4k waifu2x_caffe waifu2x_converter waifu2x_ncnn_vulkan) &&\\\r\ncase ${drivers[@]} in (*${driver,,}*) true ;; (*)\\\r\n    echo \"ERROR: Unrecognized driver.\" >&2 &&\\\r\n    printf \"%s \" \"Choices are: ${drivers[@]}\" >&2 | printf \"\\n\" >&2 &&\\\r\n    exit 1 ;;\\\r\nesac\r\n\r\n# Install CUDA, cuDNN devel, and cuDNN runtime\r\n#RUN if [ \"$driver\" != \"anime4k\" ] ;\\\r\n#then \\\r\n#    apt-fast install -y --no-install-recommends gnupg2 curl ca-certificates &&\\\r\n#    curl -fsSL https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub | apt-key add - &&\\\r\n#    echo \"deb https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64 /\" > /etc/apt/sources.list.d/nvidia-ml.list &&\\\r\n#    apt-fast update &&\\\r\n#    apt-fast install -y --no-install-recommends nvidia-cuda-toolkit libcudnn7 libcudnn7-dev ;\\\r\n#fi\r\n\r\n# nvidia-container-runtime\r\nENV NVIDIA_DRIVER_CAPABILITIES compute,utility\r\n\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"anime4k\" ] ;\\\r\nthen \\\r\n    # Anime4k prerequisits\r\n    apt-fast install -y --no-install-recommends git-core maven openjdk-12-jdk ocl-icd-opencl-dev &&\\\r\n    # Build Anime4k\r\n    git clone --progress https://github.com/bloc97/Anime4K.git &&\\\r\n    cd Anime4K/java &&\\\r\n    mvn install &&\\\r\n    mvn package &&\\\r\n    # Install Anime4k\r\n    mv target anime4k &&\\\r\n    mv anime4k /video2x/ &&\\\r\n    rm -rf ../../Anime4K ;\\\r\nfi\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"waifu2x_caffe\" ] ;\\\r\nthen \\\r\n    # nagadomi/caffe prerequisites\r\n    apt-fast install -y --no-install-recommends git-core build-essential cmake libboost-system-dev libboost-thread-dev libboost-filesystem-dev libboost-chrono-dev libboost-date-time-dev libboost-atomic-dev libboost-python-dev libprotobuf-dev protobuf-compiler libhdf5-dev liblmdb-dev libleveldb-dev libsnappy-dev libopencv-dev libatlas-base-dev python-numpy libgflags-dev libgoogle-glog-dev &&\\\r\n    # nagadomi/waifu2x-caffee-ubuntu prerequisites\r\n    apt-fast install -y --no-install-recommends libboost-iostreams-dev &&\\\r\n    # build waifu2x-caffe && install caffe\r\n    git clone --progress --recurse-submodules https://github.com/nagadomi/waifu2x-caffe-ubuntu.git &&\\\r\n    cd waifu2x-caffe-ubuntu &&\\\r\n    git clone --progress https://github.com/nagadomi/caffe.git &&\\\r\n    cd /waifu2x-caffe-ubuntu &&\\\r\n    mkdir build &&\\\r\n    cd build &&\\\r\n    cmake .. -DCMAKE_INSTALL_PREFIX=/usr &&\\\r\n    make -j$(nproc) install &&\\\r\n    # install waifu2x-caffe\r\n    cp waifu2x-caffe ../bin/ &&\\\r\n    mv ../bin tempname &&\\\r\n    mv tempname /video2x/ &&\\\r\n    mv /video2x/tempname /video2x/waifu2x-caffe &&\\ \r\n    rm -rf ../waifu2x-caffe-ubuntu ;\\\r\nfi\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"waifu2x_ncnn_vulkan\" ] ;\\\r\nthen \\\r\n    # In Docker Vulkan requires NVIDIA drivers installed within the container. \r\n    # For whatever reason nvidia-driver-XXX older than 435 doesn't work.\r\n    apt-fast install -y --no-install-recommends software-properties-common &&\\\r\n    add-apt-repository -y ppa:graphics-drivers/ppa &&\\\r\n    apt-fast install -y --no-install-recommends nvidia-driver-435 &&\\\r\n    # waifu2x-ncnn-vulkan prerequisites\r\n    apt-fast install -y --no-install-recommends git-core build-essential cmake libvulkan-dev glslang-tools &&\\\r\n    # Build ncnn\r\n    apt-fast install -y --no-install-recommends libprotobuf-dev protobuf-compiler &&\\\r\n    git clone --progress https://github.com/Tencent/ncnn.git &&\\\r\n    cd ncnn &&\\\r\n    mkdir -p build &&\\\r\n    cd build &&\\\r\n    cmake -DCMAKE_INSTALL_PREFIX=/usr -DNCNN_VULKAN=ON .. &&\\\r\n    make -j$(nproc) install &&\\\r\n    rm -rf ../../ncnn &&\\\r\n    cd / &&\\\r\n    # Compile waifu2x-ncnn-vulkan\r\n    git clone --progress https://github.com/nihui/waifu2x-ncnn-vulkan.git &&\\\r\n    cd waifu2x-ncnn-vulkan &&\\\r\n    mkdir -p build &&\\\r\n    cd build &&\\\r\n    cmake ../src &&\\\r\n    make -j$(nproc) &&\\\r\n    # Incall waifu2x-ncnn-vulkan\r\n    cd /waifu2x-ncnn-vulkan &&\\\r\n    mkdir waifu2x-ncnn-vulkan &&\\\r\n    mv models/models-cunet waifu2x-ncnn-vulkan/ &&\\\r\n    mv build/waifu2x-ncnn-vulkan waifu2x-ncnn-vulkan/ &&\\\r\n    mv waifu2x-ncnn-vulkan /video2x/ &&\\\r\n    rm -rf ../waifu2x-ncnn-vulkan ;\\\r\nfi\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"waifu2x_converter\" ] ;\\\r\nthen \\\r\n    # Prerequisits for waifu2x-converter-cpp\r\n    apt-fast install -y --no-install-recommends git-core build-essential cmake libopencv-dev ocl-icd-opencl-dev &&\\\r\n    # Compile & Install\r\n    git clone --progress https://github.com/DeadSix27/waifu2x-converter-cpp &&\\\r\n    cd waifu2x-converter-cpp &&\\\r\n    mkdir build &&\\\r\n    cd build &&\\\r\n    cmake .. &&\\\r\n    make -j$(nproc) &&\\\r\n    #ldconfig &&\\\r\n    #cp -a ../models_rgb /\r\n    cd / ;\\\r\nfi\r\n\r\n\r\n# Go!\r\n#COPY entrypoint.sh /\r\n#ENTRYPOINT [\"/entrypoint.sh\"]\r\n\r\nWORKDIR /host\r\nENTRYPOINT [\"python3\", \"/video2x/bin/video2x.py\"]\r\n\r\n# Docker image can ask questions now, if needed.\r\nENV DEBIAN_FRONTEND teletype\r\n```","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/586081572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}},{"id":3037322998,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzAzNzMyMjk5OA==","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3037322998","actor":{"login":"ddouglas87","id":16354856,"node_id":"MDQ6VXNlcjE2MzU0ODU2","avatar_url":"https://avatars.githubusercontent.com/u/16354856?v=4","gravatar_id":"","url":"https://api.github.com/users/ddouglas87","html_url":"https://github.com/ddouglas87","followers_url":"https://api.github.com/users/ddouglas87/followers","following_url":"https://api.github.com/users/ddouglas87/following{/other_user}","gists_url":"https://api.github.com/users/ddouglas87/gists{/gist_id}","starred_url":"https://api.github.com/users/ddouglas87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddouglas87/subscriptions","organizations_url":"https://api.github.com/users/ddouglas87/orgs","repos_url":"https://api.github.com/users/ddouglas87/repos","events_url":"https://api.github.com/users/ddouglas87/events{/privacy}","received_events_url":"https://api.github.com/users/ddouglas87/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-14T03:32:10Z","performed_via_github_app":null},{"id":3037322999,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwMzczMjI5OTk=","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3037322999","actor":{"login":"ddouglas87","id":16354856,"node_id":"MDQ6VXNlcjE2MzU0ODU2","avatar_url":"https://avatars.githubusercontent.com/u/16354856?v=4","gravatar_id":"","url":"https://api.github.com/users/ddouglas87","html_url":"https://github.com/ddouglas87","followers_url":"https://api.github.com/users/ddouglas87/followers","following_url":"https://api.github.com/users/ddouglas87/following{/other_user}","gists_url":"https://api.github.com/users/ddouglas87/gists{/gist_id}","starred_url":"https://api.github.com/users/ddouglas87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddouglas87/subscriptions","organizations_url":"https://api.github.com/users/ddouglas87/orgs","repos_url":"https://api.github.com/users/ddouglas87/repos","events_url":"https://api.github.com/users/ddouglas87/events{/privacy}","received_events_url":"https://api.github.com/users/ddouglas87/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-14T03:32:10Z","performed_via_github_app":null},{"id":3107498733,"node_id":"MDExOkNsb3NlZEV2ZW50MzEwNzQ5ODczMw==","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3107498733","actor":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-03-07T06:11:49Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/906872442","html_url":"https://github.com/k4yt3x/video2x/issues/201#issuecomment-906872442","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/201","id":906872442,"node_id":"IC_kwDOB1EkMc42DcZ6","user":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false},"created_at":"2021-08-27T02:13:59Z","updated_at":"2021-08-27T02:31:29Z","author_association":"NONE","body":"2021 update:\r\n\r\n```Dockerfile\r\nFROM ubuntu:19.04\r\n#FROM nvidia/cuda:10.1-cudnn7-devel-ubuntu18.04\r\nMAINTAINER Danielle Douglas <ddouglas87@gmail.com>\r\n\r\n# Don't ask questions during image setup.\r\nENV DEBIAN_FRONTEND noninteractive\r\n\r\n# Install apt-fast, because we got gigs to download.\r\nRUN sed -i -re 's/([a-z]{2}\\.)?archive.ubuntu.com|security.ubuntu.com/old-releases.ubuntu.com/g' /etc/apt/sources.list &&\\\r\n    apt-get update &&\\\r\n    apt-get install -y --no-install-recommends software-properties-common &&\\\r\n    add-apt-repository ppa:apt-fast/stable &&\\\r\n    apt-get install -y --no-install-recommends apt-fast\r\n\r\n\r\n## Install Video2X ##\r\n\r\n# Dependencies for Video2X\r\nRUN apt-fast install -y --no-install-recommends git-core python3-pip python3-setuptools python3-wheel python3-psutil ffmpeg &&\\\r\n # Note: intel-media-va-driver-non-free and libva2 may or may not accelerate ffmpeg video encoding and decoding.  I'm uncertain which, if any, packages to install for intel hw enc and dec acceleration.\r\n # Install Video2X\r\n cd / &&\\\r\n git clone --progress --branch=3.0.0 https://github.com/k4yt3x/video2x.git &&\\\r\n pip3 install avalon_framework colorama GPUtil psutil requests tqdm\r\n\r\n\r\n## Install CUDA, cuDNN devel, and cuDNN runtime.\r\nRUN if [ \"$driver\" != \"anime4k\" ] ;\\\r\nthen \\\r\n    apt-fast install -y --no-install-recommends gnupg2 curl ca-certificates &&\\\r\n    curl -fsSL https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub | apt-key add - &&\\\r\n    echo \"deb https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64 /\" > /etc/apt/sources.list.d/nvidia-ml.list &&\\\r\n    apt-fast update &&\\\r\n    apt-fast install -y --no-install-recommends nvidia-cuda-toolkit libcudnn7 libcudnn7-dev ;\\\r\nfi\r\n## nvidia-container-runtime\r\nENV NVIDIA_DRIVER_CAPABILITIES compute,utility\r\n\r\n\r\n# RUN apt-fast install -y --no-install-recommends nvidia-cuda-toolkit\r\n\r\n## Install Drivers ##\r\n\r\n# Chooses which driver to build.\r\n# eg: docker build -t video2x . --build-arg driver=waifu2x-ncnn-vulkan\r\nARG driver=all\r\n\r\n# Check if driver exists.\r\nSHELL [\"/bin/bash\", \"-c\"]\r\nRUN drivers=(all anime4k waifu2x_caffe waifu2x_converter waifu2x_ncnn_vulkan) &&\\\r\ncase ${drivers[@]} in (*${driver,,}*) true ;; (*)\\\r\n    echo \"ERROR: Unrecognized driver.\" >&2 &&\\\r\n    printf \"%s \" \"Choices are: ${drivers[@]}\" >&2 | printf \"\\n\" >&2 &&\\\r\n    exit 1 ;;\\\r\nesac\r\n\r\n# Install CUDA, cuDNN devel, and cuDNN runtime\r\n#RUN if [ \"$driver\" != \"anime4k\" ] ;\\\r\n#then \\\r\n#    apt-fast install -y --no-install-recommends gnupg2 curl ca-certificates &&\\\r\n#    curl -fsSL https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub | apt-key add - &&\\\r\n#    echo \"deb https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64 /\" > /etc/apt/sources.list.d/nvidia-ml.list &&\\\r\n#    apt-fast update &&\\\r\n#    apt-fast install -y --no-install-recommends nvidia-cuda-toolkit libcudnn7 libcudnn7-dev ;\\\r\n#fi\r\n\r\n# nvidia-container-runtime\r\nENV NVIDIA_DRIVER_CAPABILITIES compute,utility\r\n\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"anime4k\" ] ;\\\r\nthen \\\r\n    # Anime4k prerequisits\r\n    apt-fast install -y --no-install-recommends git-core maven openjdk-12-jdk ocl-icd-opencl-dev &&\\\r\n    # Build Anime4k\r\n    git clone --progress https://github.com/bloc97/Anime4K.git &&\\\r\n    cd Anime4K && git checkout 2a7a486be13f586d8993d36c1e958b7230431030 &&\\\r\n    cd java &&\\\r\n    mvn install &&\\\r\n    mvn package &&\\\r\n    # Install Anime4k\r\n    mv target anime4k &&\\\r\n    mv anime4k /video2x/ &&\\\r\n    rm -rf ../../Anime4K ;\\\r\nfi\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"waifu2x_caffe\" ] ;\\\r\nthen \\\r\n    # nagadomi/caffe prerequisites\r\n    apt-fast install -y --no-install-recommends git-core build-essential cmake libboost-system-dev libboost-thread-dev libboost-filesystem-dev libboost-chrono-dev libboost-date-time-dev libboost-atomic-dev libboost-python-dev libprotobuf-dev protobuf-compiler libhdf5-dev liblmdb-dev libleveldb-dev libsnappy-dev libopencv-dev libatlas-base-dev python-numpy libgflags-dev libgoogle-glog-dev &&\\\r\n    # nagadomi/waifu2x-caffee-ubuntu prerequisites\r\n    apt-fast install -y --no-install-recommends libboost-iostreams-dev &&\\\r\n    # build waifu2x-caffe && install caffe\r\n    git clone --progress --recurse-submodules https://github.com/nagadomi/waifu2x-caffe-ubuntu.git &&\\\r\n    cd waifu2x-caffe-ubuntu &&\\\r\n    git clone --progress https://github.com/nagadomi/caffe.git &&\\\r\n    cd /waifu2x-caffe-ubuntu &&\\\r\n    mkdir build &&\\\r\n    cd build &&\\\r\n    cmake .. -DCMAKE_INSTALL_PREFIX=/usr &&\\\r\n    make -j$(nproc) install &&\\\r\n    # install waifu2x-caffe\r\n    cp waifu2x-caffe ../bin/ &&\\\r\n    mv ../bin tempname &&\\\r\n    mv tempname /video2x/ &&\\\r\n    mv /video2x/tempname /video2x/waifu2x-caffe &&\\ \r\n    rm -rf ../waifu2x-caffe-ubuntu ;\\\r\nfi\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"waifu2x_ncnn_vulkan\" ] ;\\\r\nthen \\\r\n    # In Docker Vulkan requires NVIDIA drivers installed within the container. \r\n    # For whatever reason nvidia-driver-XXX older than 435 doesn't work.\r\n    apt-fast install -y --no-install-recommends software-properties-common &&\\\r\n    add-apt-repository -y ppa:graphics-drivers/ppa &&\\\r\n    apt-fast install -y --no-install-recommends nvidia-driver-435 &&\\\r\n    # waifu2x-ncnn-vulkan prerequisites\r\n    apt-fast install -y --no-install-recommends git-core build-essential cmake libvulkan-dev glslang-tools &&\\\r\n    # Build ncnn\r\n    apt-fast install -y --no-install-recommends libprotobuf-dev protobuf-compiler &&\\\r\n    git clone --progress https://github.com/Tencent/ncnn.git &&\\\r\n    cd ncnn &&\\\r\n    mkdir -p build &&\\\r\n    cd build &&\\\r\n    cmake -DCMAKE_INSTALL_PREFIX=/usr -DNCNN_VULKAN=ON .. &&\\\r\n    make -j$(nproc) install &&\\\r\n    rm -rf ../../ncnn &&\\\r\n    cd / &&\\\r\n    # Compile waifu2x-ncnn-vulkan\r\n    git clone --progress https://github.com/nihui/waifu2x-ncnn-vulkan.git &&\\\r\n    cd waifu2x-ncnn-vulkan &&\\\r\n    mkdir -p build &&\\\r\n    cd build &&\\\r\n    cmake ../src &&\\\r\n    make -j$(nproc) &&\\\r\n    # Incall waifu2x-ncnn-vulkan\r\n    cd /waifu2x-ncnn-vulkan &&\\\r\n    mkdir waifu2x-ncnn-vulkan &&\\\r\n    mv models/models-cunet waifu2x-ncnn-vulkan/ &&\\\r\n    mv build/waifu2x-ncnn-vulkan waifu2x-ncnn-vulkan/ &&\\\r\n    mv waifu2x-ncnn-vulkan /video2x/ &&\\\r\n    rm -rf ../waifu2x-ncnn-vulkan ;\\\r\nfi\r\n\r\nRUN if [ \"$driver\" = \"all\" ] || [ \"$driver\" = \"waifu2x_converter\" ] ;\\\r\nthen \\\r\n    # Prerequisits for waifu2x-converter-cpp\r\n    apt-fast install -y --no-install-recommends git-core build-essential cmake libopencv-dev ocl-icd-opencl-dev &&\\\r\n    # Compile & Install\r\n    git clone --progress https://github.com/DeadSix27/waifu2x-converter-cpp &&\\\r\n    cd waifu2x-converter-cpp &&\\\r\n    mkdir build &&\\\r\n    cd build &&\\\r\n    cmake .. &&\\\r\n    make -j$(nproc) &&\\\r\n    #ldconfig &&\\\r\n    #cp -a ../models_rgb /\r\n    cd / ;\\\r\nfi\r\n\r\n\r\n# Go!\r\n#COPY entrypoint.sh /\r\n#ENTRYPOINT [\"/entrypoint.sh\"]\r\n\r\nWORKDIR /host\r\nENTRYPOINT [\"python3\", \"/video2x/bin/video2x.py\"]\r\n\r\n# Docker image can ask questions now, if needed.\r\nENV DEBIAN_FRONTEND teletype\r\n","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/906872442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/906883681","html_url":"https://github.com/k4yt3x/video2x/issues/201#issuecomment-906883681","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/201","id":906883681,"node_id":"IC_kwDOB1EkMc42DfJh","user":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"created_at":"2021-08-27T02:49:11Z","updated_at":"2021-08-27T02:49:11Z","author_association":"OWNER","body":"@dmgolembiowski Thanks for your time in this. I hate to say \"but,\" but there's version 5.0 on the horizon. We're finishing up some FFIs such as [this one](https://github.com/media2x/waifu2x-ncnn-vulkan-python/) so we can import them as python modules. When that's done, 5.0 will require a completely redesigned Dockerfile.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/906883681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}},{"id":5216227328,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTIxNjIyNzMyOA==","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/5216227328","actor":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-08-27T02:49:11Z","performed_via_github_app":null},{"id":5216227331,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUyMTYyMjczMzE=","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/5216227331","actor":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-08-27T02:49:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/913919565","html_url":"https://github.com/k4yt3x/video2x/issues/201#issuecomment-913919565","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/201","id":913919565,"node_id":"IC_kwDOB1EkMc42eU5N","user":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false},"created_at":"2021-09-07T01:03:47Z","updated_at":"2021-09-07T01:03:47Z","author_association":"NONE","body":"> @dmgolembiowski Thanks for your time in this. I hate to say \"but,\" but there's version 5.0 on the horizon. We're finishing up some FFIs such as [this one](https://github.com/media2x/waifu2x-ncnn-vulkan-python/) so we can import them as python modules. When that's done, 5.0 will require a completely redesigned Dockerfile.\r\n\r\nYou're welcome! It's a relief to hear, because my inclusion wasn't sustainable. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/913919565/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false}},{"id":5262901665,"node_id":"MEE_lADOB1EkMc4hrkjxzwAAAAE5sYGh","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/5262901665","actor":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-09-07T01:03:48Z","performed_via_github_app":null},{"id":5262901667,"node_id":"SE_lADOB1EkMc4hrkjxzwAAAAE5sYGj","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/5262901667","actor":{"login":"dmgolembiowski","id":38993137,"node_id":"MDQ6VXNlcjM4OTkzMTM3","avatar_url":"https://avatars.githubusercontent.com/u/38993137?v=4","gravatar_id":"","url":"https://api.github.com/users/dmgolembiowski","html_url":"https://github.com/dmgolembiowski","followers_url":"https://api.github.com/users/dmgolembiowski/followers","following_url":"https://api.github.com/users/dmgolembiowski/following{/other_user}","gists_url":"https://api.github.com/users/dmgolembiowski/gists{/gist_id}","starred_url":"https://api.github.com/users/dmgolembiowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmgolembiowski/subscriptions","organizations_url":"https://api.github.com/users/dmgolembiowski/orgs","repos_url":"https://api.github.com/users/dmgolembiowski/repos","events_url":"https://api.github.com/users/dmgolembiowski/events{/privacy}","received_events_url":"https://api.github.com/users/dmgolembiowski/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-09-07T01:03:48Z","performed_via_github_app":null}]