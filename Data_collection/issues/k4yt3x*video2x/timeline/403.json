[{"id":3945207639,"node_id":"MDEyOkxhYmVsZWRFdmVudDM5NDUyMDc2Mzk=","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3945207639","actor":{"login":"28598519a","id":33422418,"node_id":"MDQ6VXNlcjMzNDIyNDE4","avatar_url":"https://avatars.githubusercontent.com/u/33422418?v=4","gravatar_id":"","url":"https://api.github.com/users/28598519a","html_url":"https://github.com/28598519a","followers_url":"https://api.github.com/users/28598519a/followers","following_url":"https://api.github.com/users/28598519a/following{/other_user}","gists_url":"https://api.github.com/users/28598519a/gists{/gist_id}","starred_url":"https://api.github.com/users/28598519a/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/28598519a/subscriptions","organizations_url":"https://api.github.com/users/28598519a/orgs","repos_url":"https://api.github.com/users/28598519a/repos","events_url":"https://api.github.com/users/28598519a/events{/privacy}","received_events_url":"https://api.github.com/users/28598519a/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-11-01T14:02:10Z","label":{"name":"type:Bug","color":"d80000"},"performed_via_github_app":null},{"id":3945207644,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQzOTQ1MjA3NjQ0","url":"https://api.github.com/repos/k4yt3x/video2x/issues/events/3945207644","actor":{"login":"28598519a","id":33422418,"node_id":"MDQ6VXNlcjMzNDIyNDE4","avatar_url":"https://avatars.githubusercontent.com/u/33422418?v=4","gravatar_id":"","url":"https://api.github.com/users/28598519a","html_url":"https://github.com/28598519a","followers_url":"https://api.github.com/users/28598519a/followers","following_url":"https://api.github.com/users/28598519a/following{/other_user}","gists_url":"https://api.github.com/users/28598519a/gists{/gist_id}","starred_url":"https://api.github.com/users/28598519a/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/28598519a/subscriptions","organizations_url":"https://api.github.com/users/28598519a/orgs","repos_url":"https://api.github.com/users/28598519a/repos","events_url":"https://api.github.com/users/28598519a/events{/privacy}","received_events_url":"https://api.github.com/users/28598519a/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2020-11-01T14:02:10Z","assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/720116305","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-720116305","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":720116305,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDExNjMwNQ==","user":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"created_at":"2020-11-01T16:42:18Z","updated_at":"2020-11-01T16:42:18Z","author_association":"OWNER","body":"Thanks for the issue. I'll review this after I'm over the midterm week.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/720116305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/726443050","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-726443050","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":726443050,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjQ0MzA1MA==","user":{"login":"28598519a","id":33422418,"node_id":"MDQ6VXNlcjMzNDIyNDE4","avatar_url":"https://avatars.githubusercontent.com/u/33422418?v=4","gravatar_id":"","url":"https://api.github.com/users/28598519a","html_url":"https://github.com/28598519a","followers_url":"https://api.github.com/users/28598519a/followers","following_url":"https://api.github.com/users/28598519a/following{/other_user}","gists_url":"https://api.github.com/users/28598519a/gists{/gist_id}","starred_url":"https://api.github.com/users/28598519a/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/28598519a/subscriptions","organizations_url":"https://api.github.com/users/28598519a/orgs","repos_url":"https://api.github.com/users/28598519a/repos","events_url":"https://api.github.com/users/28598519a/events{/privacy}","received_events_url":"https://api.github.com/users/28598519a/received_events","type":"User","site_admin":false},"created_at":"2020-11-13T01:13:28Z","updated_at":"2020-11-13T01:15:55Z","author_association":"COLLABORATOR","body":"[Video Example smpte170m](http://one-1up.com/babylon/demo_babylon.mp4)\r\n\r\nPlease check this, too. Not sure why, but this may cause the original inference to be modify.\r\n(960x540 -> 1920x1080；ffmpeg -ss 00:00:50 -t 00:00:01)\r\n**I specify smpte170m -> color difference**\r\n**I specify bt709           -> correct**","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/726443050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"28598519a","id":33422418,"node_id":"MDQ6VXNlcjMzNDIyNDE4","avatar_url":"https://avatars.githubusercontent.com/u/33422418?v=4","gravatar_id":"","url":"https://api.github.com/users/28598519a","html_url":"https://github.com/28598519a","followers_url":"https://api.github.com/users/28598519a/followers","following_url":"https://api.github.com/users/28598519a/following{/other_user}","gists_url":"https://api.github.com/users/28598519a/gists{/gist_id}","starred_url":"https://api.github.com/users/28598519a/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/28598519a/subscriptions","organizations_url":"https://api.github.com/users/28598519a/orgs","repos_url":"https://api.github.com/users/28598519a/repos","events_url":"https://api.github.com/users/28598519a/events{/privacy}","received_events_url":"https://api.github.com/users/28598519a/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/907629567","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-907629567","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":907629567,"node_id":"IC_kwDOB1EkMc42GVP_","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2021-08-28T13:53:48Z","updated_at":"2021-08-28T13:54:18Z","author_association":"NONE","body":"> Not sure which of the three tags is the key.\r\n\r\nGod... It is matrix (-colorspace bt709). `ffmpeg.exe -i file.mp4 -vf scale=out_color_matrix=bt709:out_range=tv,format=yuv420p -color_primaries bt709 -colorspace bt709 -color_trc bt709 -color_range pc out.mp4\r\n`","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/907629567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1012683319","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1012683319","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1012683319,"node_id":"IC_kwDOB1EkMc48XFI3","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T02:07:24Z","updated_at":"2022-02-14T23:14:14Z","author_association":"NONE","body":"I think I have what's happening here, after checking the temporary frames too and trying every input combination (thanks for your videos).\r\n\r\nFfmpeg is pretty nice and dandy in just about everything, acknowledging the h264 colorspace bits when they are there, and somehow even being able to write color profiles to [png](https://github.com/FFmpeg/FFmpeg/commit/888a33c070f1e96b683e13e7b0b6af891428c6c3) if you wanted (too bad the upscalers are just dumb as a rock, and would wipe out every extra chunk/field from there, just like they do with physical pixel dimensions). \r\n[There](https://github.com/felx/ffmbc/issues/114#issuecomment-213794071)'s [just](https://ffmpeg-user.ffmpeg.narkive.com/kyjUT8Ox/rgb-yuv-color-shift) [one](https://ffmpeg-user.ffmpeg.narkive.com/GWQG61UD/ffmpeg-introduces-color-shift-to-dnxhd-movs) [problem](https://lists.libav.org/pipermail/ffmpeg-user/2010-February/024095.html): every time you do yuv2rgb it uses a bt.601 color space. It's not just the [fallback](https://github.com/FFmpeg/FFmpeg/blob/n4.4.1/libavfilter/vf_scale.c#L385) matrix, it really is the [only](https://github.com/FFmpeg/FFmpeg/blob/n4.4.1/libswscale/utils.c#L1215L1217) one supported (funnily enough they even [dropped](https://github.com/FFmpeg/FFmpeg/commit/37f4aa133d0a0daa04661f65a016451525df7d0f) a FIXME that should have kind of reminded this.. sigh). \r\n\r\nThis isn't incorrect per se, these conversions are still ([at](https://trac.ffmpeg.org/ticket/3345) [least](https://trac.ffmpeg.org/ticket/4805) [more](https://trac.ffmpeg.org/ticket/7978) [or](https://trac.ffmpeg.org/ticket/6694) [less](https://trac.ffmpeg.org/ticket/1582)) all according to the spec. But you have no \"tag\" anymore in the final file to inform the video player on the right details, requiring it to take a blind guess. \r\nAnd so they follow an old ass [broadcast](https://books.google.com/books?id=Sa-cEY_ZeEQC&pg=PA178&lpg=PA178&dq=atsc+bt709&source=bl&ots=uQW_v48xxM&sig=ACfU3U1HeRcIodEkSWCZhQJ-SG4Bp0Z52g) [convention](https://books.google.com/books?id=t-ICCW4J80UC&pg=PA604&lpg=PA604&dq=mpeg2+bt709&source=bl&ots=4qA_1wC03p&sig=ACfU3U3LCu6ValvcU3hHbtxj6eJ0UHNAjQ), whereas if you classify above a certain arbitrary \"HD\" resolution you are rendered with bt.709, otherwise you are assumed to have been mastered with bt601. \r\n\r\nThis is also why your second case gets screwed too: regardless of what the thing was previously, being FHD with no color information attached it will always be read as bt709. Smpte170m is just an useless waste of CPU cycles to the same rec.601 color space which players still won't be aware of - meanwhile bt709 is finally matching the implicit expectations. \r\n\r\nMost people here are doing something like this later scenario (you would need very small source resolutions not to surpass SD dimensions after even the tiniest 2x scaling), so I'm quite astonished it wasn't noticed earlier. \r\n\r\nWhat I found out to work:\r\n* adding `scale=out_color_matrix=bt709` to vf as already said above (note that some people argue [other](https://medium.com/invideo-io/talking-about-colorspaces-and-ffmpeg-f6d0b037cc2f) [parameters](https://forum.videohelp.com/threads/395345-ffmpeg-yuv-colorspace-is-BT-601-or-BT-709#post2567990) are needed for best precision)\r\n* [using](https://video.stackexchange.com/questions/19944/ffmpeg-bmp-to-yuv-x264-color-shift#comment38936_19944) `libx264rgb` as vcodec (final file size is awfully high though)\r\n* Playing with [`in_color_matrix=bt709`](https://forum.videohelp.com/threads/396362-ffplay-playback-BT-709-yuv) so as to \"overcompensate\" for whatever playback may reserve later\r\n\r\nBut all of these are a chore in their own right, if not any just to think. \r\nWhat fixes everything easily and plainly 100% of times now that we understood the issue, is simply setting `'-bsf:v': 'h264_metadata=matrix_coefficients=6'` into the assemble_video output_options. \r\nMaybe image extraction to some YUV lossless format could also do the trick (whatever the latest hip JPEG flavour, or TIFF?) but I didn't try. \r\n\r\np.s. on top of all of this, take also note there is https://github.com/nihui/realsr-ncnn-vulkan/issues/16","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1012683319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1012816247","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1012816247","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1012816247,"node_id":"IC_kwDOB1EkMc48Xll3","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T06:44:27Z","updated_at":"2022-01-14T06:48:58Z","author_association":"NONE","body":"> [There](https://github.com/felx/ffmbc/issues/114#issuecomment-213794071)'s [just](https://ffmpeg-user.ffmpeg.narkive.com/kyjUT8Ox/rgb-yuv-color-shift) [one](https://ffmpeg-user.ffmpeg.narkive.com/GWQG61UD/ffmpeg-introduces-color-shift-to-dnxhd-movs) [problem](https://lists.libav.org/pipermail/ffmpeg-user/2010-February/024095.html): every time\r\n\r\nThat is not a problem. The default is always 601 limited mtrix if input and output are untagged. JPEG uses full 601 only, and if you have tagged input it is propagated. There is an open bug about not tagging scale matrix indeed. RGB does work though.\r\n\r\n> simply setting `'-bsf:v': 'h264_metadata=matrix_coefficients=6'` into the assemble_video output_options\r\n\r\nIt does not, this is internal stuff not to be used and it does not convert anything just tags. You must use -colorspace bt709 instead with all correct out_color_matrix.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1012816247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1012827722","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1012827722","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1012827722,"node_id":"IC_kwDOB1EkMc48XoZK","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T06:56:00Z","updated_at":"2022-01-14T06:56:36Z","author_association":"NONE","body":"> being able to write color profiles to [png](https://github.com/FFmpeg/FFmpeg/commit/888a33c070f1e96b683e13e7b0b6af891428c6c3) if you wanted\r\n\r\nThat did not work for a long time due to  bug in sidedata of png. It is wrong anyway, like 709 is tagged as gamma 2.2, but it is actually 2.4 on OLED.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1012827722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013251613","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1013251613","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1013251613,"node_id":"IC_kwDOB1EkMc48ZP4d","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T16:03:00Z","updated_at":"2022-01-15T15:55:36Z","author_association":"NONE","body":"> The default is always 601 limited mtrix if input and output are untagged.\r\n\r\nToo bad it is also converted to 601 if the input is 709 tagged? (see the very first example of this thread for example)\r\n\r\n> There is an open bug about not tagging scale matrix indeed. RGB does work though.\r\n\r\n[This one](https://trac.ffmpeg.org/ticket/3643)? And if there is a bug how can it work lol?\r\n\r\n> It does not, this is internal stuff not to be used and it does not convert anything just tags. \r\n\r\nI guess sample_aspect_ratio could be also added through the -sar switch, but what's the matter?\r\n\r\n> You must use -colorspace bt709 instead with all correct out_color_matrix.\r\n\r\nThe problem isn't that video colorspace is different (I mean, every useless conversion is if we want to be anal, but then here you are again doing another one). It's that video playback will suck with the wrong colors because there's no formal agreement on what the rules are. \r\nAfter ffmpeg [managing](https://trac.ffmpeg.org/ticket/9167) to specify the thing itself, forcing the tags really seems like the second best solution. \r\nAs I said, it's the only \"fire and forget\" fix, not last because it really matches the reality of what's happening under the hood. \r\n\r\n> It is wrong anyway, like 709 is tagged as gamma 2.2, but it is actually 2.4 on OLED.\r\n\r\n[Because](http://mediatechnology.io/blog/2013/5/12/recommendations-for-display-gamma.html) they follow BT.1886? That sounds like their own business to care tbh. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013251613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013444772","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1013444772","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1013444772,"node_id":"IC_kwDOB1EkMc48Z_Ck","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T20:15:33Z","updated_at":"2022-01-14T20:37:19Z","author_association":"NONE","body":"> Too bad it is also converted to 601 if the input is 701 tagged?\r\n\r\nI does not if you have all input primaries, transfer and matrix set. Just checked. Maybe you have old version.\r\n\r\n> [This one](https://trac.ffmpeg.org/ticket/3643)? And\r\n\r\nXYZ though using identity matrix too is defined by different primaries (not transfer, because transfer can be 2.6 gamma by definition or in RAW it can be linear gamma). See my patch here but there I use the opposite approach, transfer is what doing it (because of pixel format concept, I do not think different primaries will even work). https://patchwork.ffmpeg.org/project/ffmpeg/patch/20210606051612.89211-1-val.zapod.vz@gmail.com/ No, 2 other issues. It works because there is only 1 RGB, while YCbCr are 3 types and should be set in swscale. Use manual tagging.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013444772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013446917","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1013446917","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1013446917,"node_id":"IC_kwDOB1EkMc48Z_kF","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T20:19:28Z","updated_at":"2022-01-14T20:19:28Z","author_association":"NONE","body":"Here are those 2 bugs https://trac.ffmpeg.org/ticket/9374 https://trac.ffmpeg.org/ticket/9132","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013446917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013482958","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1013482958","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1013482958,"node_id":"IC_kwDOB1EkMc48aIXO","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-01-14T21:23:39Z","updated_at":"2022-01-14T21:25:56Z","author_association":"NONE","body":"Idk about those issues, the colours here aren't basically revolted, and nobody is touching 4:4:4 YCbCr or complaining about colour levels. \r\nI would in fact argue there's nothing really wrong with reading inputs (except perhaps the wish that pngs could be color managed if necessary). [Bug 9167](https://trac.ffmpeg.org/ticket/9167) (in turn tracking its origins into two decades of \"handwaving users can eventually workaround it somehow, so there's nothing else to do here\") is the thing AFAICT. \r\n\r\n> I does not if you have all input primaries, transfer and matrix set. Just checked. Maybe you have old version.\r\n\r\nI just tested all the three meaningful combinations, again, with the last git. \r\n\r\n    ffmpeg -i ..\\xxx.mkv -pix_fmt rgb24 extracted_%0d.png\r\n\r\nThere's no difference in the resulting images, between 601 (untagged), 601 (tagged, only color_space and color_range tbh tho) and 709 (tagged, ditto). \r\nSource is yuv420p, if it can matter. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013482958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013683236","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1013683236","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1013683236,"node_id":"IC_kwDOB1EkMc48a5Qk","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-15T13:33:14Z","updated_at":"2022-01-15T13:33:14Z","author_association":"NONE","body":"> nothing really wrong with reading inputs (except perhaps the wish that pngs could be color managed if necessary)\r\n\r\nThere are so many ways to color manage PNGs. gAMA chunk (pure gamma), cHRM primaries or ICC profile. Ffmpeg is not really color managed like that.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013683236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013705656","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1013705656","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1013705656,"node_id":"IC_kwDOB1EkMc48a-u4","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-01-15T15:55:13Z","updated_at":"2022-01-15T15:55:13Z","author_association":"NONE","body":"I was just spitballing there, in an ideal world you'd never colour convert as far as technically allowed by the output formats. \r\nAnyhow, putting aside this aspirational goal (and since I think we already agreed on the actual issue), just for the records I just wanted to make clear tagged 709 is properly converted and parsed to the same expected rgb24 results of 601. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1013705656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1024236309","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1024236309","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1024236309,"node_id":"IC_kwDOB1EkMc49DJsV","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-28T13:41:26Z","updated_at":"2022-02-08T05:51:39Z","author_association":"NONE","body":"> JPEG uses full 601 only,\r\n\r\nHaha, I did not age well, apparently you can still f this up! https://github.com/mpv-player/mpv/issues/9053#event-5970260312\r\nYes, it disallows writing limited range data, but autoconvert does not work.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1024236309/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1024855144","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1024855144","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1024855144,"node_id":"IC_kwDOB1EkMc49Fgxo","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-01-29T07:19:47Z","updated_at":"2022-01-29T07:19:47Z","author_association":"NONE","body":"Oh, and also https://forum.videohelp.com/threads/395345-ffmpeg-yuv-colorspace-is-BT-601-or-BT-709#post2567990 is wrong, you can see it even in 1 color if it is bgr to yuv420p conversion or vice versa. That conversion is buggy while rgb is not. Crazy bug: use  -vf scale=flags=accurate_rnd to fix that. All BMP is affected.\r\n\r\nhttps://trac.ffmpeg.org/ticket/979","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1024855144/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102343937","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102343937","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102343937,"node_id":"IC_kwDOB1EkMc5BtG8B","user":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T09:03:21Z","updated_at":"2022-04-19T09:03:21Z","author_association":"NONE","body":"I tried this option: -vf scale=out_color_matrix=bt709, but sometimes it works, and sometimes it doesn't work (the colors are screwed up) , which is really confusing. \r\nSo i turn to use zscale filter, and it always works: -vf \"zscale=m=709:min=709:r=limited,format=yuv420p10le\" -colorspace bt709 -color_primaries bt709 -color_trc bt709 -color_range tv\r\nNote also that some SD movies use bt601 colorspace. So when you convert yuv movie to rgb pictures you should specify the correct colorspace, or the colors will be screwed up at the first step.\r\n","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102343937/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102359392","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102359392","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102359392,"node_id":"IC_kwDOB1EkMc5BtKtg","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T09:13:30Z","updated_at":"2022-04-19T09:13:30Z","author_association":"NONE","body":"> but sometimes it works, and sometimes it doesn't work (the colors are screwed up) ,\r\n\r\nYes, for example if you go from 709 full range to jpeg (since that is full range bt.601 and what happens it thing input is also bt.601, LOL). See my new bug https://trac.ffmpeg.org/ticket/9693#comment:7\r\n\r\n>So when you convert yuv movie to rgb pictures you should specify the correct colorspace,\r\n\r\nYou should specify correct input matrix, but there is no MATRIX IN R'G'B' (you can argue it is Identity, but still). So if you go to png...","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102359392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102630423","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102630423","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102630423,"node_id":"IC_kwDOB1EkMc5BuM4X","user":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T13:07:31Z","updated_at":"2022-04-19T13:07:31Z","author_association":"NONE","body":"Yes, that's what i mean. If you specify bt709 for a bt601 movie, or the other way round, it will cause color difference. \r\nFor yuv2rgb, this page may be helpful https://tieba.baidu.com/p/6597249102","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102630423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102638815","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102638815","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102638815,"node_id":"IC_kwDOB1EkMc5BuO7f","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T13:16:11Z","updated_at":"2022-04-19T13:16:29Z","author_association":"NONE","body":"Sigh.. you write long thorough explanations and then people just skip them over. \r\nVideo2x already uses png (well, at least by default in version 4.8.1), so ffmpeg should already be *good enough* to properly understand and process colorspace. \r\n\r\nI'm very skeptical that something that forces the input matrix (min) to be bt709 could always work. \r\nIf it happens with your samples, it must be because not only they aren't tagged, but they also implicitly expect bt709. \r\n\r\nAnd alas there's no escape when the source obliges you to play the guess game (maybe ffmpeg could implement some resolution-based heuristics, but I'm sure there would still be plenty of edge cases). The only sensible idea if any could be just to throw a warning when tags are missing. \r\n\r\nBut putting aside the worst case scenario of an ignorant encoder, this is what you need in your video2x.yaml\r\n```\r\n assemble_video:\r\n    output_options:\r\n      ....\r\n      '-bsf:v': 'h264_metadata=matrix_coefficients=6'\r\n```\r\nWhen you know the source input, you may instead tinker with adding an extra option to `extract_frames:`. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102638815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102712052","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102712052","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102712052,"node_id":"IC_kwDOB1EkMc5Bugz0","user":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T14:16:33Z","updated_at":"2022-04-19T14:16:33Z","author_association":"NONE","body":"The author of that article is not me LOL","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102712052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102749420","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102749420","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102749420,"node_id":"IC_kwDOB1EkMc5Bup7s","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T14:49:43Z","updated_at":"2022-04-19T14:49:43Z","author_association":"NONE","body":"I had already started typing the comment when you posted...\r\n\r\nThe article may have a point though, as I had half-way [hinted](https://trac.ffmpeg.org/ticket/7978) above (but then omitted because it wasn't the night and day difference that OP was noticing) conversion isn't 100% accurate. \r\nIs there some way to force zscale without specifying any other extra non-default operation to it?\r\n\r\nThe second point that is risen up is not a problem with ffmpeg then. The input image is 1080p, I refuse to believe no color information could be attached to the image. If that is missing, you should fault and complain with the ripper. \r\n\r\nThe third makes no sense to me then.. I don't see why anybody in their right mind would use \"packed RGB 16:16:16, 48bpp\". \r\nJust force the yuv420p10le pixel format and you are done, if you want 10-bit video. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102749420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102765442","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102765442","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102765442,"node_id":"IC_kwDOB1EkMc5But2C","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T15:04:18Z","updated_at":"2022-04-19T15:09:57Z","author_association":"NONE","body":"> I don't see why anybody in their right mind would use \"packed RGB 16:16:16, 48bpp\".\r\n\r\nIt is not 48 bit. It is RGBA, so 64 bit. What does it mean why? Because that is the only thing png supports. It does not support 30 bit (10*3), that is only AVIF, and anyway because it is only RGB, it cannot preserve original YCbCr data, that is only AVIF. Same about 8 bit, 8 bit YCbCr cannot be preserved in 8 bit RGB (just as vice versa, though vice versa is worse, much worse).\r\n\r\nAs to why use R'G'B', some anime geniouses use RGB images to upscale stuff. See: https://www.reddit.com/r/ffmpeg/comments/o1vvke/ffmpeg_raw_rgb_to_h264_slight_brightness/\r\n\r\n>I'm have to convert to rgb because i have this project ( https://github.com/amadeok/Dainfux ) where i'm using ffmpeg, DAIN interpolation and waifu2x upscaling to process videos. and I don't think DAIN and waifu2x can process data in YCbCr format,\r\n\r\n​","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102765442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102851111","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102851111","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102851111,"node_id":"IC_kwDOB1EkMc5BvCwn","user":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T16:27:01Z","updated_at":"2022-04-19T16:27:19Z","author_association":"NONE","body":"> Is there some way to force zscale without specifying any other extra non-default operation to it?\r\n\r\nWhich extra non-default operation? \r\n\r\n\r\n> I don't see why anybody in their right mind would use \"packed RGB 16:16:16, 48bpp\".\r\n\r\nThat's because directly yuv420p->RGB24 will result in reduced color quality. And directly yuv10bit->RGB24 will result in banding. So yuv420p->yuv444p10le->RGB48be->RGB24. Then you can get RGB pics which are very close to origin video in color (not sure 100% accuracy) .","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102851111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102857508","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102857508","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102857508,"node_id":"IC_kwDOB1EkMc5BvEUk","user":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T16:34:01Z","updated_at":"2022-04-19T16:34:01Z","author_association":"NONE","body":"> I'm very skeptical that something that forces the input matrix (min) to be bt709 could always work.\r\n\r\nFor RGB pics->yuv video, min=709 is actually no use at all. FFmpeg will ignore it since RGB have no bt709 colorspace. The input format will be gbr(pc). But if you drop \"min=709\", it will cause an error. :(","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102857508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102883675","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102883675","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102883675,"node_id":"IC_kwDOB1EkMc5BvKtb","user":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T17:02:41Z","updated_at":"2022-04-19T17:07:56Z","author_association":"NONE","body":"> FFmpeg will ignore it since RGB have no bt709 colorspace.\r\n\r\nIt does not have any matrix at all, what is called Identity matrix. You can just use min=input, no? And undocumented min=bgr. https://github.com/FFmpeg/FFmpeg/blob/b2823333d580e18fbb60733bea8ed2ccdc68f7f4/libavfilter/vf_zscale.c#L1040\r\n\r\n>Then you can get RGB pics which are very close to origin video in color (not sure 100% accuracy) .\r\n\r\nIt will be 100% accurate in RGB space, but YCbCr is 6 times bigger than RGB space. For limited range all out of limited range values, and for full range still a lot of values inside. Those are just clipped, irreversibly unless you go to HDR and WCG space.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102883675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ValZapod","id":31514790,"node_id":"MDQ6VXNlcjMxNTE0Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/31514790?v=4","gravatar_id":"","url":"https://api.github.com/users/ValZapod","html_url":"https://github.com/ValZapod","followers_url":"https://api.github.com/users/ValZapod/followers","following_url":"https://api.github.com/users/ValZapod/following{/other_user}","gists_url":"https://api.github.com/users/ValZapod/gists{/gist_id}","starred_url":"https://api.github.com/users/ValZapod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ValZapod/subscriptions","organizations_url":"https://api.github.com/users/ValZapod/orgs","repos_url":"https://api.github.com/users/ValZapod/repos","events_url":"https://api.github.com/users/ValZapod/events{/privacy}","received_events_url":"https://api.github.com/users/ValZapod/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102958471","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1102958471","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1102958471,"node_id":"IC_kwDOB1EkMc5Bvc-H","user":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T18:29:32Z","updated_at":"2022-04-19T18:29:32Z","author_association":"NONE","body":"min=input is a good idea, I never thought of it lol. But min=709 seems all right though. Does zscale automatically convert RGB to yuv? \r\nThe method I mentioned is only applicable to bt601/bt709. As for bt2020, rgb24 is obviously not enough.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1102958471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CuteZombie7","id":48387243,"node_id":"MDQ6VXNlcjQ4Mzg3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/48387243?v=4","gravatar_id":"","url":"https://api.github.com/users/CuteZombie7","html_url":"https://github.com/CuteZombie7","followers_url":"https://api.github.com/users/CuteZombie7/followers","following_url":"https://api.github.com/users/CuteZombie7/following{/other_user}","gists_url":"https://api.github.com/users/CuteZombie7/gists{/gist_id}","starred_url":"https://api.github.com/users/CuteZombie7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CuteZombie7/subscriptions","organizations_url":"https://api.github.com/users/CuteZombie7/orgs","repos_url":"https://api.github.com/users/CuteZombie7/repos","events_url":"https://api.github.com/users/CuteZombie7/events{/privacy}","received_events_url":"https://api.github.com/users/CuteZombie7/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1103348260","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1103348260","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1103348260,"node_id":"IC_kwDOB1EkMc5Bw8Ik","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-04-20T01:38:50Z","updated_at":"2022-04-20T01:38:50Z","author_association":"NONE","body":"> Which extra non-default operation?\r\n\r\nI mean just using zscale in place of scale. Could ` -vf zscale` already do it? I'm not sure. \r\nOf course if you want to manually add some other option you are free to do so, but my concern was what the program should have to ship out of the box. \r\n\r\n> That's because directly yuv420p->RGB24 will result in reduced color quality. And directly yuv10bit->RGB24 will result in banding. \r\n\r\nRight, for as much as I still haven't seen any great examples of the former downsides. \r\n***ON THE OTHER HAND*** after picking up some academical curiosity for this academical concern... I'm afraid all this care is placebo. \r\nhttps://github.com/nihui/waifu2x-ncnn-vulkan/blob/20220419/src/webp_image.h#L27\r\nhttps://github.com/nihui/waifu2x-ncnn-vulkan/blob/20220419/src/stb_image.h#L1369\r\nhttps://github.com/nihui/waifu2x-ncnn-vulkan/blob/20220419/src/wic_image.h#L59\r\nIt's RGB24 all the way down. \r\n\r\nMaybe waifu2x-caffe (which maybe uses opencv internally.. the source isn't a walk in the park to parse) could still preserve more information, but I really wouldn't bet on it. ","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1103348260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1117105409","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1117105409","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1117105409,"node_id":"IC_kwDOB1EkMc5Cla0B","user":{"login":"thekryz","id":10432441,"node_id":"MDQ6VXNlcjEwNDMyNDQx","avatar_url":"https://avatars.githubusercontent.com/u/10432441?v=4","gravatar_id":"","url":"https://api.github.com/users/thekryz","html_url":"https://github.com/thekryz","followers_url":"https://api.github.com/users/thekryz/followers","following_url":"https://api.github.com/users/thekryz/following{/other_user}","gists_url":"https://api.github.com/users/thekryz/gists{/gist_id}","starred_url":"https://api.github.com/users/thekryz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thekryz/subscriptions","organizations_url":"https://api.github.com/users/thekryz/orgs","repos_url":"https://api.github.com/users/thekryz/repos","events_url":"https://api.github.com/users/thekryz/events{/privacy}","received_events_url":"https://api.github.com/users/thekryz/received_events","type":"User","site_admin":false},"created_at":"2022-05-04T09:30:30Z","updated_at":"2022-05-04T09:32:28Z","author_association":"NONE","body":"> But putting aside the worst case scenario of an ignorant encoder, this is what you need in your video2x.yaml\r\n> \r\n> ```\r\n>  assemble_video:\r\n>     output_options:\r\n>       ....\r\n>       '-bsf:v': 'h264_metadata=matrix_coefficients=6'\r\n> ```\r\n> \r\n\r\nDoes this work accordingly for x265 by using `'-bsf:v': 'hevc_metadata=matrix_coefficients=6'` ?\r\nAccording to the [H.265 specification](https://www.itu.int/rec/T-REC-H.265-202108-I/en) in Table E.5 (p. 451) I guess it should, right?","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1117105409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thekryz","id":10432441,"node_id":"MDQ6VXNlcjEwNDMyNDQx","avatar_url":"https://avatars.githubusercontent.com/u/10432441?v=4","gravatar_id":"","url":"https://api.github.com/users/thekryz","html_url":"https://github.com/thekryz","followers_url":"https://api.github.com/users/thekryz/followers","following_url":"https://api.github.com/users/thekryz/following{/other_user}","gists_url":"https://api.github.com/users/thekryz/gists{/gist_id}","starred_url":"https://api.github.com/users/thekryz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thekryz/subscriptions","organizations_url":"https://api.github.com/users/thekryz/orgs","repos_url":"https://api.github.com/users/thekryz/repos","events_url":"https://api.github.com/users/thekryz/events{/privacy}","received_events_url":"https://api.github.com/users/thekryz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1117127611","html_url":"https://github.com/k4yt3x/video2x/issues/403#issuecomment-1117127611","issue_url":"https://api.github.com/repos/k4yt3x/video2x/issues/403","id":1117127611,"node_id":"IC_kwDOB1EkMc5ClgO7","user":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false},"created_at":"2022-05-04T09:53:27Z","updated_at":"2022-05-04T09:53:27Z","author_association":"NONE","body":"Yes, Table E.5 is identical to H.264.","reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/comments/1117127611/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mirh","id":9366725,"node_id":"MDQ6VXNlcjkzNjY3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/9366725?v=4","gravatar_id":"","url":"https://api.github.com/users/mirh","html_url":"https://github.com/mirh","followers_url":"https://api.github.com/users/mirh/followers","following_url":"https://api.github.com/users/mirh/following{/other_user}","gists_url":"https://api.github.com/users/mirh/gists{/gist_id}","starred_url":"https://api.github.com/users/mirh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirh/subscriptions","organizations_url":"https://api.github.com/users/mirh/orgs","repos_url":"https://api.github.com/users/mirh/repos","events_url":"https://api.github.com/users/mirh/events{/privacy}","received_events_url":"https://api.github.com/users/mirh/received_events","type":"User","site_admin":false}}]