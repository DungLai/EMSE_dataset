{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/570","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/570/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/570/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/570/events","html_url":"https://github.com/k4yt3x/video2x/issues/570","id":1061515910,"node_id":"I_kwDOB1EkMc4_RXKG","number":570,"title":"invalid graphics card","user":{"login":"arch-user-france1","id":72965843,"node_id":"MDQ6VXNlcjcyOTY1ODQz","avatar_url":"https://avatars.githubusercontent.com/u/72965843?v=4","gravatar_id":"","url":"https://api.github.com/users/arch-user-france1","html_url":"https://github.com/arch-user-france1","followers_url":"https://api.github.com/users/arch-user-france1/followers","following_url":"https://api.github.com/users/arch-user-france1/following{/other_user}","gists_url":"https://api.github.com/users/arch-user-france1/gists{/gist_id}","starred_url":"https://api.github.com/users/arch-user-france1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arch-user-france1/subscriptions","organizations_url":"https://api.github.com/users/arch-user-france1/orgs","repos_url":"https://api.github.com/users/arch-user-france1/repos","events_url":"https://api.github.com/users/arch-user-france1/events{/privacy}","received_events_url":"https://api.github.com/users/arch-user-france1/received_events","type":"User","site_admin":false},"labels":[{"id":1025498623,"node_id":"MDU6TGFiZWwxMDI1NDk4NjIz","url":"https://api.github.com/repos/k4yt3x/video2x/labels/state:timedOut","name":"state:timedOut","color":"ff8235","default":false,"description":"The issue owner isn't responding to questions"}],"state":"closed","locked":false,"assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"assignees":[{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2021-11-23T16:59:59Z","updated_at":"2022-02-06T20:14:26Z","closed_at":"2022-02-06T20:14:26Z","author_association":"NONE","active_lock_reason":null,"body":"```\r\nsudo docker run --rm -it --gpus all -v /dev/dri:/dev/dri -v $PWD:/host k4yt3x/video2x:4.6.0 -d waifu2x_ncnn_vulkan -r 2 -i CrimsonDesert.mp4 -o output-vid.mp4 \r\n\r\n    __      __  _       _                  ___   __   __\r\n    \\ \\    / / (_)     | |                |__ \\  \\ \\ / /\r\n     \\ \\  / /   _    __| |   ___    ___      ) |  \\ V /\r\n      \\ \\/ /   | |  / _` |  / _ \\  / _ \\    / /    > <\r\n       \\  /    | | | (_| | |  __/ | (_) |  / /_   / . \\\r\n        \\/     |_|  \\__,_|  \\___|  \\___/  |____| /_/ \\_\\\r\n\r\n\r\n                  Video2X Video Enlarger\r\n\r\n                       Version 4.1.1\r\n\r\n2021-11-23 12:25:07.798741 [+] INFO: Redirecting console logs to /video2x/src/video2x_2021-11-23_12-25-07.log\r\n[+] INFO: Loading files into processing queue\r\n2021-11-23 12:25:07.824257 [+] INFO: Input path(s): CrimsonDesert.mp4\r\n[+] INFO: Loaded files into processing queue\r\n2021-11-23 12:25:07.895153 [+] INFO: Input file: /host/CrimsonDesert.mp4\r\n2021-11-23 12:25:07.895272 [+] INFO: Creating cache directory /tmp/video2x\r\n2021-11-23 12:25:07.895539 [+] INFO: Extracted frames are being saved to: /tmp/video2x/tmpv3w80eh_\r\n2021-11-23 12:25:07.895646 [+] INFO: Upscaled frames are being saved to: /tmp/video2x/tmpxlr4nhh1\r\n[+] INFO: Reading video information\r\n2021-11-23 12:25:07.895730 [+] INFO: Executing: /usr/bin/ffprobe -v quiet -print_format json -show_format -show_streams -i /host/CrimsonDesert.mp4\r\n[+] INFO: Framerate: 29.97002997002997\r\n2021-11-23 12:25:09.554639 [+] INFO: Executing: /usr/bin/ffmpeg -hwaccel auto -y -i /host/CrimsonDesert.mp4 -pix_fmt rgba64be /tmp/video2x/tmpv3w80eh_/extracted_%0d.png\r\n2021-11-23 12:25:09.579748 [+] INFO: Main process waiting for subprocesses to exit\r\nffmpeg version 4.1.4-1build2 Copyright (c) 2000-2019 the FFmpeg developers\r\n  built with gcc 9 (Ubuntu 9.2.1-4ubuntu1)\r\n  configuration: --prefix=/usr --extra-version=1build2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --arch=amd64 --enable-gpl --disable-stripping --enable-avresample --disable-filter=resample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libaom --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libjack --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librsvg --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-lv2 --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libx264 --enable-shared\r\n  libavutil      56. 22.100 / 56. 22.100\r\n  libavcodec     58. 35.100 / 58. 35.100\r\n  libavformat    58. 20.100 / 58. 20.100\r\n  libavdevice    58.  5.100 / 58.  5.100\r\n  libavfilter     7. 40.101 /  7. 40.101\r\n  libavresample   4.  0.  0 /  4.  0.  0\r\n  libswscale      5.  3.100 /  5.  3.100\r\n  libswresample   3.  3.100 /  3.  3.100\r\n  libpostproc    55.  3.100 / 55.  3.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '/host/CrimsonDesert.mp4':\r\n  Metadata:\r\n    major_brand     : mp42\r\n    minor_version   : 0\r\n    compatible_brands: isommp42\r\n    creation_time   : 2020-12-11T18:08:04.000000Z\r\n  Duration: 00:05:27.98, start: 0.000000, bitrate: 1488 kb/s\r\n    Stream #0:0(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p(tv, bt709), 1280x720 [SAR 1:1 DAR 16:9], 1356 kb/s, 29.97 fps, 29.97 tbr, 30k tbn, 59.94 tbc (default)\r\n    Metadata:\r\n      creation_time   : 2020-12-11T18:08:04.000000Z\r\n      handler_name    : ISO Media file produced by Google Inc. Created on: 12/11/2020.\r\n    Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2020-12-11T18:08:04.000000Z\r\n      handler_name    : ISO Media file produced by Google Inc. Created on: 12/11/2020.\r\n[AVHWDeviceContext @ 0x55e04520c580] No VA display found for device: .\r\nDevice creation failed: -22.\r\n[AVHWDeviceContext @ 0x55e045207e40] Cannot open the X11 display .\r\nDevice creation failed: -1313558101.\r\n[h264 @ 0x55e04520a500] Auto hwaccel disabled: no device found.\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (h264 (native) -> png (native))\r\nPress [q] to stop, [?] for help\r\n[swscaler @ 0x55e045477e80] No accelerated colorspace conversion found from yuv420p to rgba64be.\r\nOutput #0, image2, to '/tmp/video2x/tmpv3w80eh_/extracted_%0d.png':\r\n  Metadata:\r\n    major_brand     : mp42\r\n    minor_version   : 0\r\n    compatible_brands: isommp42\r\n    encoder         : Lavf58.20.100\r\n    Stream #0:0(und): Video: png, rgba64be, 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 29.97 fps, 29.97 tbn, 29.97 tbc (default)\r\n    Metadata:\r\n      creation_time   : 2020-12-11T18:08:04.000000Z\r\n      handler_name    : ISO Media file produced by Google Inc. Created on: 12/11/2020.\r\n      encoder         : Lavc58.35.100 png\r\nframe= 9829 fps=6.5 q=-0.0 Lsize=N/A time=00:05:27.96 bitrate=N/A speed=0.217x    \r\nvideo:25829588kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\r\n2021-11-23 12:50:18.965173 [+] INFO: Subprocess 10 exited with code 0\r\n[+] INFO: Starting to upscale extracted frames\r\n2021-11-23 12:50:19.206673 [+] INFO: [upscaler] Subprocess 1 executing: /video2x/src/dependencies/waifu2x-ncnn-vulkan/waifu2x-ncnn-vulkan -g 0 -j 1:1:1 -n 2 -s 2 -t 400 -i /tmp/video2x/tmpv3w80eh_ -o /tmp/video2x/tmpxlr4nhh1\r\n2021-11-23 12:50:19.221837 [+] INFO: Starting progress monitor\r\n2021-11-23 12:50:19.222296 [+] INFO: Starting upscaled image cleaner\r\n2021-11-23 12:50:19.222663 [+] INFO: Main process waiting for subprocesses to exit\r\nUpscaling Progress:   0%|          | 0/9829 [00:00<?, ?it/s]vkCreateInstance failed -9\r\ninvalid gpu device\r\n[!] ERROR: Subprocess 24 exited with code 255\r\n[!] ERROR: Subprocess execution ran into an error\r\n[!] WARNING: Terminating all processes\r\n2021-11-23 12:50:20.041485 [+] INFO: Killing progress monitor\r\nUpscaling Progress:   0%|          | 0/9829 [00:01<?, ?it/s]\r\n2021-11-23 12:50:20.948690 [+] INFO: Killing upscaled image cleaner\r\nCleaning up cache directory: /tmp/video2x/tmpv3w80eh_\r\nCleaning up cache directory: /tmp/video2x/tmpxlr4nhh1\r\nCleaning up cache directory: /tmp/video2x\r\n[!] ERROR: An exception has occurred\r\nTraceback (most recent call last):\r\n  File \"/video2x/src/video2x.py\", line 259, in <module>\r\n    upscaler.run()\r\n  File \"/video2x/src/upscaler.py\", line 667, in run\r\n    raise e\r\n  File \"/video2x/src/upscaler.py\", line 596, in run\r\n    self._upscale_frames()\r\n  File \"/video2x/src/upscaler.py\", line 339, in _upscale_frames\r\n    raise e\r\n  File \"/video2x/src/upscaler.py\", line 331, in _upscale_frames\r\n    self._wait()\r\n  File \"/video2x/src/upscaler.py\", line 401, in _wait\r\n    raise e\r\n  File \"/video2x/src/upscaler.py\", line 385, in _wait\r\n    raise subprocess.CalledProcessError(process_status, process.args)\r\nsubprocess.CalledProcessError: Command '['/video2x/src/dependencies/waifu2x-ncnn-vulkan/waifu2x-ncnn-vulkan', '-g', '0', '-j', '1:1:1', '-n', '2', '-s', '2', '-t', '400', '-i', '/tmp/video2x/tmpv3w80eh_', '-o', '/tmp/video2x/tmpxlr4nhh1']' returned non-zero exit status 255.\r\n```\r\n\r\nThere's an intel iGPU (not connected to any screen) and nvidia geforce gtx 1660 super","closed_by":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/570/timeline","performed_via_github_app":null,"state_reason":"completed"}