{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/90","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/90/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/90/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/90/events","html_url":"https://github.com/k4yt3x/video2x/issues/90","id":438987414,"node_id":"MDU6SXNzdWU0Mzg5ODc0MTQ=","number":90,"title":"Upscaling Progress:   0%","user":{"login":"Mirrorman95","id":2261216,"node_id":"MDQ6VXNlcjIyNjEyMTY=","avatar_url":"https://avatars.githubusercontent.com/u/2261216?v=4","gravatar_id":"","url":"https://api.github.com/users/Mirrorman95","html_url":"https://github.com/Mirrorman95","followers_url":"https://api.github.com/users/Mirrorman95/followers","following_url":"https://api.github.com/users/Mirrorman95/following{/other_user}","gists_url":"https://api.github.com/users/Mirrorman95/gists{/gist_id}","starred_url":"https://api.github.com/users/Mirrorman95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mirrorman95/subscriptions","organizations_url":"https://api.github.com/users/Mirrorman95/orgs","repos_url":"https://api.github.com/users/Mirrorman95/repos","events_url":"https://api.github.com/users/Mirrorman95/events{/privacy}","received_events_url":"https://api.github.com/users/Mirrorman95/received_events","type":"User","site_admin":false},"labels":[{"id":847238628,"node_id":"MDU6TGFiZWw4NDcyMzg2Mjg=","url":"https://api.github.com/repos/k4yt3x/video2x/labels/type:Bug","name":"type:Bug","color":"d80000","default":false,"description":"Something isn't working"},{"id":847238631,"node_id":"MDU6TGFiZWw4NDcyMzg2MzE=","url":"https://api.github.com/repos/k4yt3x/video2x/labels/help%20wanted","name":"help wanted","color":"008672","default":true,"description":"Extra attention is needed"}],"state":"closed","locked":false,"assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"assignees":[{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}],"milestone":null,"comments":19,"created_at":"2019-04-30T21:34:35Z","updated_at":"2019-05-09T02:06:26Z","closed_at":"2019-05-09T02:06:26Z","author_association":"NONE","active_lock_reason":null,"body":"## Environment Information\r\n\r\n|Module|Version|\r\n|-|-|\r\n|`video2x`|commit a7d41cafdfb478ee620ae33764d4bc13cee9f288 (4/30/2019)\r\n|`ffmpeg`|ffmpeg-20190315-def18ac-win64-static\r\n|`waifu2x-caffe`|ver 1.2.0.2 (January 2019)\r\n|`waifu2x-converter-cpp`|DeadSix27's waifu2x-converter-cpp v5.2.4 (Mar 25 2019)\r\n\r\n## Symptom\r\n\r\nSimilar symptoms to issue #54. Every time I try to upscale any video, it encounters a fatal error and stops because it can't upscale the extracted images. Based on the logs, I think it's because the process can't even extract them successfully. Earlier versions of video2x and/or waifu2x and/or ffmpeg I used didn't use to do this and could successfully upscale videos. But since updating everything sometime after 1/17/2019, it hasn't worked for me at all. I tried switching my Python and pip versions to 3.7.3 and reinstalling tqdm, avalon_framework, colorama, GPUtil, and psutil, but none of it helped. I can upscale images just fine using waifu2x-caffe.exe with cuDNN, so I don't think that's the issue. Is there a way to fix this problem?\r\n\r\n## Error Messages\r\n\r\n```\r\nE:\\Downloads\\video2x-master\\bin>python video2x.py -i treas.rm -o treas.mp4 --width=1600 --height=1200 --method cudnn -y upconv_7_anime_style_art_rgb -t 2\r\n__      __  _       _                  ___   __   __\r\n\\ \\    / / (_)     | |                |__ \\  \\ \\ / /\r\n \\ \\  / /   _    __| |   ___    ___      ) |  \\ V /\r\n  \\ \\/ /   | |  / _` |  / _ \\  / _ \\    / /    > <\r\n   \\  /    | | | (_| | |  __/ | (_) |  / /_   / . \\\r\n    \\/     |_|  \\__,_|  \\___|  \\___/  |____| /_/ \\_\\\r\n\r\n               Video2X Video Enlarger\r\n\r\n                   Version 2.7.1\r\n\r\n[!] WARNING: Specified cache directory C:\\Users\\Owner\\AppData\\Local\\Temp\\video2x does not exist\r\n[?] USER: Create directory? [Y/n]: y\r\n[+] INFO: C:\\Users\\Owner\\AppData\\Local\\Temp\\video2x created\r\n[+] INFO: Upscaling single video file: treas.rm\r\n2019-05-01 02:37:09.331010 [+] INFO: Extracted frames are being saved to: C:\\Users\\Owner\\AppData\\Local\\Temp\\video2x\\tmpj80k67w9\r\n2019-05-01 02:37:09.333001 [+] INFO: Upscaled frames are being saved to: C:\\Users\\Owner\\AppData\\Local\\Temp\\video2x\\tmpbno1kge2\r\n2019-05-01 02:37:09.335001 [+] INFO: Executing: ['C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\video2x\\\\ffmpeg-latest-win64-static\\\\bin\\\\ffmpeg.exe', '-i', 'E:\\\\Downloads\\\\video2x-master\\\\bin\\\\treas.rm', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpj80k67w9\\\\extracted_%0d.png', '-hwaccel', 'auto', '-y']\r\nffmpeg version N-93710-gac551c54b1 Copyright (c) 2000-2019 the FFmpeg developers\r\n  built with gcc 8.3.1 (GCC) 20190414\r\n  configuration: --enable-gpl --enable-version3 --enable-sdl2 --enable-fontconfig --enable-gnutls --enable-iconv --enable-libass --enable-libdav1d --enable-libbluray --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libtheora --enable-libtwolame --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libzimg --enable-lzma --enable-zlib --enable-gmp --enable-libvidstab --enable-libvorbis --enable-libvo-amrwbenc --enable-libmysofa --enable-libspeex --enable-libxvid --enable-libaom --enable-libmfx --enable-amf --enable-ffnvcodec --enable-cuvid --enable-d3d11va --enable-nvenc --enable-nvdec --enable-dxva2 --enable-avisynth --enable-libopenmpt\r\n  libavutil      56. 26.100 / 56. 26.100\r\n  libavcodec     58. 52.100 / 58. 52.100\r\n  libavformat    58. 27.103 / 58. 27.103\r\n  libavdevice    58.  7.100 / 58.  7.100\r\n  libavfilter     7. 50.100 /  7. 50.100\r\n  libswscale      5.  4.100 /  5.  4.100\r\n  libswresample   3.  4.100 /  3.  4.100\r\n  libpostproc    55.  4.100 / 55.  4.100\r\nTrailing options were found on the commandline.\r\n[rm @ 0000020f0aa39f40] Invalid stream index 2 for index at pos 3987316\r\nInput #0, rm, from 'E:\\Downloads\\video2x-master\\bin\\treas.rm':\r\n  Metadata:\r\n    Target Audiences: 256K DSL/Cable Modem (225 Kbps);\r\n    Audio Format    : Voice with Background Music\r\n    Video Quality   : Sharpest Image Video\r\n    Creation Date   : 12/12/2000 21:03:52\r\n    Modification Date: 12/12/2000 21:03:52\r\n    Generated By    : RealProducer 8.0.0.45 Windows\r\n    Keywords        :\r\n    Abstract        :\r\n    Content Rating  : (PICS-1.1 \"http://www.classify.org/safesurf\" labels comment \"RealProducer 8.0.0.45 Windows\" ratings (SS~~000 1))\r\n    File ID         : 75111e8e-805e-9fa4-f1cb-ec790b4a6489\r\n    title           : TREAS\r\n  Duration: 00:02:20.43, start: 0.000000, bitrate: 227 kb/s\r\n    Stream #0:0: Audio: cook (cook / 0x6B6F6F63), 22050 Hz, mono, fltp, 32 kb/s\r\n    Stream #0:1: Video: rv30 (RV30 / 0x30335652), yuv420p, 160x120, 192 kb/s, 14.87 fps, 14.87 tbr, 1k tbn, 1k tbc\r\nStream mapping:\r\n  Stream #0:1 -> #0:0 (rv30 (native) -> png (native))\r\nPress [q] to stop, [?] for help\r\nOutput #0, image2, to 'C:\\Users\\Owner\\AppData\\Local\\Temp\\video2x\\tmpj80k67w9\\extracted_%0d.png':\r\n  Metadata:\r\n    Target Audiences: 256K DSL/Cable Modem (225 Kbps);\r\n    Audio Format    : Voice with Background Music\r\n    Video Quality   : Sharpest Image Video\r\n    Creation Date   : 12/12/2000 21:03:52\r\n    Modification Date: 12/12/2000 21:03:52\r\n    Generated By    : RealProducer 8.0.0.45 Windows\r\n    Keywords        :\r\n    Abstract        :\r\n    Content Rating  : (PICS-1.1 \"http://www.classify.org/safesurf\" labels comment \"RealProducer 8.0.0.45 Windows\" ratings (SS~~000 1))\r\n    File ID         : 75111e8e-805e-9fa4-f1cb-ec790b4a6489\r\n    title           : TREAS\r\n    encoder         : Lavf58.27.103\r\n    Stream #0:0: Video: png, rgb24, 160x120, q=2-31, 200 kb/s, 14.87 fps, 14.87 tbn, 14.87 tbc\r\n    Metadata:\r\n      encoder         : Lavc58.52.100 png\r\nframe= 2080 fps=756 q=-0.0 Lsize=N/A time=00:02:19.83 bitrate=N/A dup=3 drop=0 speed=50.8x\r\nvideo:94337kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\r\n[+] INFO: Reading video information\r\n2019-05-01 02:37:12.194862 [+] INFO: Executing: C:\\Users\\Owner\\AppData\\Local\\video2x\\ffmpeg-latest-win64-static\\bin\\ffprobe.exe -v quiet -print_format json -show_format -show_streams -i E:\\Downloads\\video2x-master\\bin\\treas.rm\r\n[+] INFO: Framerate: 14.874267578125\r\n[+] INFO: Starting to upscale extracted images\r\n2019-05-01 02:37:14.124863 [+] INFO: Starting upscaled image cleaner\r\n2019-05-01 02:37:14.126865 [+] INFO: [upscaler] Thread 0 started\r\n2019-05-01 02:37:14.127864 [+] INFO: Executing: ['C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\video2x\\\\waifu2x-caffe\\\\waifu2x-caffe-cui.exe', '--output_extention', 'png', '--mode', 'noise_scale', '--scale_width', '1600', '--scale_height', '1200', '--noise_level', '3', '--process', 'cudnn', '--crop_size', '128', '--output_quality', '-1', '--output_depth', '8', '--batch_size', '1', '--gpu', '0', '--tta', '0', '--input_path', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpj80k67w9\\\\1', '--output_path', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpbno1kge2', '--model_dir', 'upconv_7_anime_style_art_rgb']2019-05-01 02:37:14.127864 [+] INFO: [upscaler] Thread 1 started\r\n\r\n2019-05-01 02:37:14.130863 [+] INFO: Executing: ['C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\video2x\\\\waifu2x-caffe\\\\waifu2x-caffe-cui.exe', '--output_extention', 'png', '--mode', 'noise_scale', '--scale_width', '1600', '--scale_height', '1200', '--noise_level', '3', '--process', 'cudnn', '--crop_size', '128', '--output_quality', '-1', '--output_depth', '8', '--batch_size', '1', '--gpu', '0', '--tta', '0', '--input_path', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpj80k67w9\\\\1', '--output_path', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpbno1kge2', '--model_dir', 'upconv_7_anime_style_art_rgb']\r\nUpscaling Progress:   0%|                                                                     | 0/2080 [00:01<?, ?it/s] エラー: モデルファイルが開けませんでした\r\nエラー: モデルファイルが開けませんでした\r\n2019-05-01 02:37:15.482861 [+] INFO: Killing upscaled image cleaner\r\nUpscaling Progress:   0%|                                                                     | 0/2080 [00:02<?, ?it/s][!] ERROR: An exception has occurred\r\nTraceback (most recent call last):\r\n  File \"video2x.py\", line 318, in <module>\r\n    upscaler.run()\r\n  File \"E:\\Downloads\\video2x-master\\bin\\upscaler.py\", line 295, in run\r\n    self._upscale_frames(w2)\r\n  File \"E:\\Downloads\\video2x-master\\bin\\upscaler.py\", line 234, in _upscale_frames\r\n    raise(self.upscaler_exceptions[0])\r\n  File \"E:\\Downloads\\video2x-master\\bin\\waifu2x_caffe.py\", line 83, in upscale\r\n    completed_command = subprocess.run(execute, check=True)\r\n  File \"C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python37_64\\lib\\subprocess.py\", line 487, in run\r\n    output=stdout, stderr=stderr)\r\nsubprocess.CalledProcessError: Command '['C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\video2x\\\\waifu2x-caffe\\\\waifu2x-caffe-cui.exe', '--output_extention', 'png', '--mode', 'noise_scale', '--scale_width', '1600', '--scale_height', '1200', '--noise_level', '3', '--process', 'cudnn', '--crop_size', '128', '--output_quality', '-1', '--output_depth', '8', '--batch_size', '1', '--gpu', '0', '--tta', '0', '--input_path', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpj80k67w9\\\\1', '--output_path', 'C:\\\\Users\\\\Owner\\\\AppData\\\\Local\\\\Temp\\\\video2x\\\\tmpbno1kge2', '--model_dir', 'upconv_7_anime_style_art_rgb']' returned non-zero exit status 1.\r\n```","closed_by":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/90/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/90/timeline","performed_via_github_app":null,"state_reason":"completed"}