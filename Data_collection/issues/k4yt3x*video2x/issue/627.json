{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/627","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/627/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/627/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/627/events","html_url":"https://github.com/k4yt3x/video2x/issues/627","id":1193822227,"node_id":"I_kwDOB1EkMc5HKEgT","number":627,"title":"Setting env={\"AV_LOG_FORCE_COLOR\": \"TRUE\"} in subprocess.Popen calls overwrites system path on Linux","user":{"login":"snixon","id":1184344,"node_id":"MDQ6VXNlcjExODQzNDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1184344?v=4","gravatar_id":"","url":"https://api.github.com/users/snixon","html_url":"https://github.com/snixon","followers_url":"https://api.github.com/users/snixon/followers","following_url":"https://api.github.com/users/snixon/following{/other_user}","gists_url":"https://api.github.com/users/snixon/gists{/gist_id}","starred_url":"https://api.github.com/users/snixon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snixon/subscriptions","organizations_url":"https://api.github.com/users/snixon/orgs","repos_url":"https://api.github.com/users/snixon/repos","events_url":"https://api.github.com/users/snixon/events{/privacy}","received_events_url":"https://api.github.com/users/snixon/received_events","type":"User","site_admin":false},"labels":[{"id":847238628,"node_id":"MDU6TGFiZWw4NDcyMzg2Mjg=","url":"https://api.github.com/repos/k4yt3x/video2x/labels/type:Bug","name":"type:Bug","color":"d80000","default":false,"description":"Something isn't working"},{"id":3804517236,"node_id":"LA_kwDOB1EkMc7ixFN0","url":"https://api.github.com/repos/k4yt3x/video2x/labels/state:inProgress","name":"state:inProgress","color":"0052CC","default":false,"description":"This issue is being worked on"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-04-05T23:02:43Z","updated_at":"2022-04-12T04:04:37Z","closed_at":"2022-04-09T18:40:48Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi there, I was running into some trouble playing around with video2x on an Ubuntu machine today and noticed this.\r\n\r\nWhen subprocess.Popen is used to invoke ffmpeg the env settings on Linux are overwritten, leading to video2k complaining about 'ffmpeg not found' \r\n\r\nI think this may be due to differences in how subprocess.Popen behaves between Windows and Linux, or perhaps changes between versions of python?\r\n\r\nI see this note here: https://docs.python.org/3/library/subprocess.html\r\n```\r\nNew in version 3.9.\r\n\r\nIf env is not None, it must be a mapping that defines the environment variables for the new process; these are used instead of the default behavior of inheriting the current processâ€™ environment.\r\n```\r\n\r\nFWIW I'm on an ubuntu box running a clean virtualenv of python 3.10.4 with a fresh git clone of the video2x repo.\r\n\r\nRemoving the env settings from the Popen calls lets the app run normally.","closed_by":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/627/timeline","performed_via_github_app":null,"state_reason":"completed"}