{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/397","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/397/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/397/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/397/events","html_url":"https://github.com/k4yt3x/video2x/issues/397","id":728745927,"node_id":"MDU6SXNzdWU3Mjg3NDU5Mjc=","number":397,"title":"invalid literal for int() with base 10: ''","user":{"login":"ewedel","id":5893759,"node_id":"MDQ6VXNlcjU4OTM3NTk=","avatar_url":"https://avatars.githubusercontent.com/u/5893759?v=4","gravatar_id":"","url":"https://api.github.com/users/ewedel","html_url":"https://github.com/ewedel","followers_url":"https://api.github.com/users/ewedel/followers","following_url":"https://api.github.com/users/ewedel/following{/other_user}","gists_url":"https://api.github.com/users/ewedel/gists{/gist_id}","starred_url":"https://api.github.com/users/ewedel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewedel/subscriptions","organizations_url":"https://api.github.com/users/ewedel/orgs","repos_url":"https://api.github.com/users/ewedel/repos","events_url":"https://api.github.com/users/ewedel/events{/privacy}","received_events_url":"https://api.github.com/users/ewedel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"assignees":[{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2020-10-24T09:06:40Z","updated_at":"2022-02-06T21:45:12Z","closed_at":"2022-02-06T20:43:49Z","author_association":"NONE","active_lock_reason":null,"body":"## Component Versions\r\n\r\nPlease at least fill in the release version and GUI or CLI version.\r\n\r\n- **Video2X release version**: 4.7.0\r\n- **Upscaler version**:\r\n- **GUI version**: 2.8.0\r\n- **CLI version**: 4.3.1\r\n\r\nInstalled by unzipping video2x-4.7.0-win32-full.zip\r\n\r\n## Symptom\r\n\r\nIn this section, briefly describe what's going on.\r\n\r\nSimply launched a run attempt via the gui, using a 90 second clip from the front of an mpeg. Clip was extracted using ffmpeg like so:\r\n\r\n    ...\\ffmpeg.exe -i VTS_02.mpg -ss 0 -t 90 -c:a copy -c:v copy -y -target ntsc-dvd 90_vts_02.mpg\r\n\r\nvideo2x run through gui with these settings:\r\ndriver: Waifu2X NCNN Vulkan\r\nprocs: 1\r\nscale: 2.00\r\nwidth: 0\r\nheight: 0\r\n\r\n\"show preview\" and \"keep aspect ration\" both are ticked.\r\n\r\n### Other info\r\nPoked around and found the ffprobe command used by wrappers/ffmpeg.py.\r\nLooks like this, which with my target 90 second file runs like so:\r\n\r\n    ...\\ffprobe.exe -v quiet -count_frames -select_streams v:0 -show_entries stream=nb_read_frames -of default=nokey=1:noprint_wrappers=1 90_vts_02.mpg\r\n    2698\r\n\r\nso it seems like that 2698 should be getting returned, instead of an empty string.\r\n\r\nNote that my own copies of ffmpeg and ffprobe are not on the path. If it matters, they are from this daily build:\r\n\r\n2020-10-21-git-289e964873-full_build-www.gyan.dev\r\n## Error Log or Screenshots\r\n\u001B[32m[+] INFO: Loading files into processing queue\u001B[0m\r\n\u001B[90m2020-10-24 01:02:04.793698 [+] INFO: Input path(s): D:\\works\\video\\hd_conv\\video2x\\try1\\90_vts_02.mpg\u001B[0m\r\n\u001B[90m2020-10-24 01:02:04.797694 [+] INFO: File MIME type: video/mpeg\u001B[0m\r\n\u001B[32m[+] INFO: Loaded files into processing queue\u001B[0m\r\n\u001B[90m2020-10-24 01:02:04.800693 [+] INFO: Input file: D:\\works\\video\\hd_conv\\video2x\\try1\\90_vts_02.mpg\u001B[0m\r\n\u001B[32m[+] INFO: Reading file information\u001B[0m\r\n\u001B[90m2020-10-24 01:02:04.803692 [+] INFO: Executing: d:\\works\\video\\hd_conv\\video2x\\video2x-4.7.0-win32-full\\dependencies\\ffmpeg-latest-win64-static\\bin\\ffprobe -v quiet -print_format json -show_format -show_streams -i D:\\works\\video\\hd_conv\\video2x\\try1\\90_vts_02.mpg\u001B[0m\r\n\u001B[90m2020-10-24 01:02:05.390936 [+] INFO: Creating cache directory C:\\Users\\eric\\AppData\\Local\\Temp\\video2x\u001B[0m\r\n\u001B[90m2020-10-24 01:02:05.394934 [+] INFO: Extracted frames are being saved to: C:\\Users\\eric\\AppData\\Local\\Temp\\video2x\\tmpbhr6d37l\u001B[0m\r\n\u001B[90m2020-10-24 01:02:05.395933 [+] INFO: Upscaled frames are being saved to: C:\\Users\\eric\\AppData\\Local\\Temp\\video2x\\tmp3fs1mfuh\u001B[0m\r\n\u001B[32m[+] INFO: Starting upscaling video/GIF\u001B[0m\r\n\u001B[32m[+] INFO: Getting total number of frames in the file\u001B[0m\r\n\u001B[90m2020-10-24 01:02:05.397932 [+] INFO: Executing: d:\\works\\video\\hd_conv\\video2x\\video2x-4.7.0-win32-full\\dependencies\\ffmpeg-latest-win64-static\\bin\\ffprobe -v quiet -count_frames -select_streams v:1 -show_entries stream=nb_read_frames -of default=nokey=1:noprint_wrappers=1 D:\\works\\video\\hd_conv\\video2x\\try1\\90_vts_02.mpg\u001B[0m\r\nCleaning up cache directory: C:\\Users\\eric\\AppData\\Local\\Temp\\video2x\\tmpbhr6d37l\r\nCleaning up cache directory: C:\\Users\\eric\\AppData\\Local\\Temp\\video2x\\tmp3fs1mfuh\r\nCleaning up cache directory: C:\\Users\\eric\\AppData\\Local\\Temp\\video2x\r\nTraceback (most recent call last):\r\n  File \"video2x_gui.py\", line 106, in run\r\n  File \"upscaler.py\", line 802, in run\r\n  File \"upscaler.py\", line 589, in run\r\n  File \"wrappers\\ffmpeg.py\", line 106, in get_number_of_frames\r\nValueError: invalid literal for int() with base 10: ''\r\n","closed_by":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/397/timeline","performed_via_github_app":null,"state_reason":"completed"}