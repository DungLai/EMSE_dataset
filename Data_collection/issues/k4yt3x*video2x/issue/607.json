{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/607","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/607/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/607/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/607/events","html_url":"https://github.com/k4yt3x/video2x/issues/607","id":1158396331,"node_id":"I_kwDOB1EkMc5FC7mr","number":607,"title":"llvmpipe used instead of actual GPU, despite Vulkan-capable hardware GPU being detected.","user":{"login":"Cat-Lady","id":6075406,"node_id":"MDQ6VXNlcjYwNzU0MDY=","avatar_url":"https://avatars.githubusercontent.com/u/6075406?v=4","gravatar_id":"","url":"https://api.github.com/users/Cat-Lady","html_url":"https://github.com/Cat-Lady","followers_url":"https://api.github.com/users/Cat-Lady/followers","following_url":"https://api.github.com/users/Cat-Lady/following{/other_user}","gists_url":"https://api.github.com/users/Cat-Lady/gists{/gist_id}","starred_url":"https://api.github.com/users/Cat-Lady/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cat-Lady/subscriptions","organizations_url":"https://api.github.com/users/Cat-Lady/orgs","repos_url":"https://api.github.com/users/Cat-Lady/repos","events_url":"https://api.github.com/users/Cat-Lady/events{/privacy}","received_events_url":"https://api.github.com/users/Cat-Lady/received_events","type":"User","site_admin":false},"labels":[{"id":3804515323,"node_id":"LA_kwDOB1EkMc7ixEv7","url":"https://api.github.com/repos/k4yt3x/video2x/labels/state:Queued","name":"state:Queued","color":"F9D0C4","default":false,"description":"This issue is already scheduled to be worked on"}],"state":"open","locked":false,"assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"assignees":[{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2022-03-03T13:15:11Z","updated_at":"2022-07-15T02:54:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nJudging by the logs and CPU usage (100%) vs GPU usage (1%), video2x tries to use `lavapipe` instead of actual GPU, when trying to upscale via CLI (notice the `WARNING: lavapipe is not a conformant vulkan implementation, testing use only.` before actual upscale process starts):\r\n\r\n```\r\n12:47:58.881069 | INFO     | Video2X 5.0.0-beta5\r\n12:47:58.881224 | INFO     | Copyright (C) 2018-2022 K4YT3X and contributors.\r\n12:47:58.881312 | INFO     | Reading input video information\r\n12:47:59.002920 | INFO     | Starting video decoder\r\n12:47:59.008225 | INFO     | Starting video encoder\r\n12:47:59.014432 | INFO     | Upscaler process 0 initiating\r\n12:47:59.015706 | INFO     | Upscaler process 1 initiating\r\n12:47:59.017466 | INFO     | Upscaler process 2 initiating\r\n12:47:59.019731 | INFO     | Upscaler process 3 initiating\r\n12:47:59.021330 | INFO     | Upscaler process 4 initiating\r\n[0 llvmpipe (LLVM 13.0.1, 256 bits)]  queueC=0[1]  queueG=0[1]  queueT=0[1]\r\n[0 llvmpipe (LLVM 13.0.1, 256 bits)]  bugsbn1=0  bugbilz=0  bugcopc=0  bugihfa=0\r\n[0 llvmpipe (LLVM 13.0.1, 256 bits)]  fp16-p/s/a=1/1/1  int8-p/s/a=1/1/1\r\n[0 llvmpipe (LLVM 13.0.1, 256 bits)]  subgroup=8  basic=1  vote=1  ballot=1  shuffle=0\r\n[1 NVIDIA GeForce GTX 1660 Ti]  queueC=2[8]  queueG=0[16]  queueT=1[2]\r\n[1 NVIDIA GeForce GTX 1660 Ti]  bugsbn1=0  bugbilz=0  bugcopc=0  bugihfa=0\r\n[1 NVIDIA GeForce GTX 1660 Ti]  fp16-p/s/a=1/1/1  int8-p/s/a=1/1/1\r\n[1 NVIDIA GeForce GTX 1660 Ti]  subgroup=32  basic=1  vote=1  ballot=1  shuffle=1\r\n\r\nWARNING: lavapipe is not a conformant vulkan implementation, testing use only.\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':\r\n  Metadata:\r\n    major_brand     : mp42\r\n    minor_version   : 1\r\n    compatible_brands: isomiso2avc1mp41mp423gp5\r\n    encoder         : Lavf55.33.100\r\n  Duration: 00:07:47.37, start: 0.000000, bitrate: 501 kb/s\r\n  Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 400x300, 375 kb/s, 24 fps, 24 tbr, 12288 tbn, 48 tbc (default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n      vendor_id       : [0][0][0][0]\r\n  Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 22050 Hz, stereo, fltp, 96 kb/s (default)\r\n    Metadata:\r\n      handler_name    : SoundHandler\r\n      vendor_id       : [0][0][0][0]\r\n  Stream #0:2(und): Data: none (mp4s / 0x7334706D), 0 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2015-04-01T19:11:05.000000Z\r\n      handler_name    : GPAC MPEG-4 OD Handler\r\n  Stream #0:3(und): Data: none (mp4s / 0x7334706D), 0 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2015-04-01T19:11:05.000000Z\r\n      handler_name    : GPAC MPEG-4 Scene Description Handler\r\n  Stream #0:4(und): Data: none (rtp  / 0x20707472), 20 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2015-04-01T19:11:05.000000Z\r\n      handler_name    : GPAC ISO Hint Handler\r\n  Stream #0:5(und): Data: none (rtp  / 0x20707472), 5 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2015-04-01T19:11:05.000000Z\r\n      handler_name    : GPAC ISO Hint Handler\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (h264 (native) -> rawvideo (native))\r\nPress [q] to stop, [?] for help\r\nOutput #0, rawvideo, to 'pipe:1':\r\n  Metadata:\r\n    major_brand     : mp42\r\n    minor_version   : 1\r\n    compatible_brands: isomiso2avc1mp41mp423gp5\r\n    encoder         : Lavf58.76.100\r\n  Stream #0:0(und): Video: rawvideo (RGB[24] / 0x18424752), rgb24(pc, gbr/unknown/unknown, progressive), 400x300, q=2-31, 69120 kb/s, 24 fps, 24 tbn \r\n(default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n      vendor_id       : [0][0][0][0]\r\n      encoder         : Lavc58.134.100 rawvideo\r\n```\r\n      \r\nI tried to find any documentation on how to pass which GPU to use, but found absolutely no info about it (the documentation is \"lacking\", to say it very, very kindly). I also tried to get info about arguments accepted for upscale algorithm `python -m video2x -a waifu2x -- --help` as per documentation (also tried `python -m video2x -a upscale -- --help`, but none of it works as \"advertised\", throwing errors about \"invalid choice\".\r\n\r\nI am specifically interested in using ``video2x`` locally on the linux machine (not through Google colab), docker-less.\r\n\r\nCheers,\r\n/CatLady","closed_by":null,"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/607/timeline","performed_via_github_app":null,"state_reason":null}