{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/809","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/809/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/809/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/809/events","html_url":"https://github.com/k4yt3x/video2x/issues/809","id":1515891059,"node_id":"I_kwDOB1EkMc5aWqlz","number":809,"title":"5.0.0-beta-6 is working, but I'm getting awful fps. ","user":{"login":"jsly8672","id":76494338,"node_id":"MDQ6VXNlcjc2NDk0MzM4","avatar_url":"https://avatars.githubusercontent.com/u/76494338?v=4","gravatar_id":"","url":"https://api.github.com/users/jsly8672","html_url":"https://github.com/jsly8672","followers_url":"https://api.github.com/users/jsly8672/followers","following_url":"https://api.github.com/users/jsly8672/following{/other_user}","gists_url":"https://api.github.com/users/jsly8672/gists{/gist_id}","starred_url":"https://api.github.com/users/jsly8672/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsly8672/subscriptions","organizations_url":"https://api.github.com/users/jsly8672/orgs","repos_url":"https://api.github.com/users/jsly8672/repos","events_url":"https://api.github.com/users/jsly8672/events{/privacy}","received_events_url":"https://api.github.com/users/jsly8672/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-01-01T23:09:57Z","updated_at":"2023-01-01T23:09:57Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"After tinkering with this thing for hours, getting docker and nvidia-docker2 set up, the thing finally appears to be running, with the following command:\r\n\r\n`sudo docker run -it --rm --privileged --gpus='all,\"capabilities=compute,utility,graphics,display\"' --env DISPLAY:$DISPLAY -v $PWD:/host ghcr.io/k4yt3x/video2x:5.0.0-beta6 -i input.mp4 -o output.mp4 -p1 upscale -h 720 -a waifu2x -n3`\r\n\r\n ...but I'm getting a lousy frame rate, like between .17 and .56 fps. My laptop's 3070 is not engaging at all. \r\n\r\n```\r\n`(base) krovas@thievesguild:~/Archive/temp1$ sudo docker run -it --rm --privileged --gpus='all,\"capabilities=compute,utility,graphics,display\"' --env DISPLAY:$DISPLAY -v $PWD:/host ghcr.io/k4yt3x/video2x:5.0.0-beta6 -i rmvhsm.mp4 -o output.mp4 -p1 upscale -h 720 -a waifu2x -n3\r\n22:39:54.057817 | INFO     | Video2X 5.0.0-beta6\r\n22:39:54.057944 | INFO     | Copyright (C) 2018-2022 K4YT3X and contributors.\r\n22:39:54.058000 | INFO     | Reading input video information\r\n22:39:54.108182 | INFO     | Starting video decoder\r\n22:39:54.110863 | INFO     | Starting video encoder\r\n[0 Intel(R) UHD Graphics (TGL GT1)]  queueC=0[1]  queueG=0[1]  queueT=0[1]\r\n[0 Intel(R) UHD Graphics (TGL GT1)]  bugsbn1=0  bugbilz=0  bugcopc=0  bugihfa=0\r\n[0 Intel(R) UHD Graphics (TGL GT1)]  fp16-p/s/a=1/1/1  int8-p/s/a=1/1/1\r\n[0 Intel(R) UHD Graphics (TGL GT1)]  subgroup=32  basic=1  vote=1  ballot=1  shuffle=1\r\n[1 NVIDIA GeForce RTX 3070 Laptop GPU]  queueC=2[8]  queueG=0[16]  queueT=1[2]\r\n[1 NVIDIA GeForce RTX 3070 Laptop GPU]  bugsbn1=0  bugbilz=0  bugcopc=0  bugihfa=0\r\n[1 NVIDIA GeForce RTX 3070 Laptop GPU]  fp16-p/s/a=1/1/1  int8-p/s/a=1/1/1\r\n[1 NVIDIA GeForce RTX 3070 Laptop GPU]  subgroup=32  basic=1  vote=1  ballot=1  shuffle=1\r\n../src/intel/isl/isl.c:2105: FINISHME: ../src/intel/isl/isl.c:isl_surf_supports_ccs: CCS for 3D textures is disabled, but a workaround is available.\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'rmvhsm.mp4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf56.36.100\r\n  Duration: 00:05:00.05, start: 0.000000, bitrate: 266 kb/s\r\n    Stream #0:0(eng): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), \r\nyuv420p, 768x432 [SAR 1:1 DAR 16:9], 207 kb/s, 25 fps, 25 tbr, 12800 tbn, 50 tbc\r\n(default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n    Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 22050 Hz, stereo, \r\nfltp, 55 kb/s (default)\r\n    Metadata:\r\n      handler_name    : SoundHandler\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (h264 (native) -> rawvideo (native))\r\nOutput #0, rawvideo, to 'pipe:1':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf58.29.100\r\n    Stream #0:0(eng): Video: rawvideo (RGB[24] / 0x18424752), rgb24, 768x432 \r\n[SAR 1:1 DAR 16:9], q=2-31, 199065 kb/s, 25 fps, 25 tbn, 25 tbc (default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n      encoder         : Lavc58.54.100 rawvideo\r\n\r\nInput #0, rawvideo, from 'pipe:0':\r\n  Duration: N/A, start: 0.000000, bitrate: 552960 kb/s\r\n    Stream #0:0: Video: rawvideo (RGB[24] / 0x18424752), rgb24, 1280x720, 552960\r\nkb/s, 25 tbr, 25 tbn, 25 tbc\r\nInput #1, mov,mp4,m4a,3gp,3g2,mj2, from 'rmvhsm.mp4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf56.36.100\r\n  Duration: 00:05:00.05, start: 0.000000, bitrate: 266 kb/s\r\n    Stream #1:0(eng): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), \r\nyuv420p, 768x432 [SAR 1:1 DAR 16:9], 207 kb/s, 25 fps, 25 tbr, 12800 tbn, 50 tbc\r\n(default)\r\n    Metadata:\r\n      handler_name    : VideoHandler\r\n    Stream #1:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 22050 Hz, stereo, \r\nfltp, 55 kb/s (default)\r\n    Metadata:\r\n      handler_name    : SoundHandler\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (rawvideo (native) -> h264 (libx264))\r\n  Stream #1:1 -> #0:1 (aac (native) -> aac (native))\r\n[libx264 @ 0x559f0452a4c0] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 \r\nAVX FMA3 BMI2 AVX2 AVX512\r\n[libx264 @ 0x559f0452a4c0] profile High, level 5.0\r\n[libx264 @ 0x559f0452a4c0] 264 - core 155 r2917 0a84d98 - H.264/MPEG-4 AVC codec\r\n- Copyleft 2003-2018 - http://www.videolan.org/x264.html - options: cabac=1 \r\nref=16 deblock=1:0:0 analyse=0x3:0x133 me=umh subme=10 psy=1 psy_rd=1.00:0.00 \r\nmixed_ref=1 me_range=24 chroma_me=1 trellis=2 8x8dct=1 cqm=0 deadzone=21,11 \r\nfast_pskip=1 chroma_qp_offset=-2 threads=22 lookahead_threads=3 sliced_threads=0\r\nnr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=8 \r\nb_pyramid=2 b_adapt=2 b_bias=0 direct=3 weightb=1 open_gop=0 weightp=2 \r\nkeyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=60 rc=crf \r\nmbtree=1 crf=17.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\r\nOutput #0, mp4, to 'output.mp4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    comment         : Processed with Video2X\r\n    encoder         : Lavf58.29.100\r\n    Stream #0:0: Video: h264 (libx264) (avc1 / 0x31637661), \r\nyuv420p(progressive), 1280x720, q=-1--1, 25 fps, 12800 tbn, 25 tbc\r\n    Metadata:\r\n      encoder         : Lavc58.54.100 libx264\r\n    Side data:\r\n      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1\r\n    Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 22050 Hz, stereo, \r\nfltp, 128 kb/s (default)\r\n    Metadata:\r\n      handler_name    : SoundHandler\r\n      encoder         : Lavc58.54.100 aac\r\n\r\nUpscaling ━╸━━━━━━━━━━━━━━━━━━━━━━━━━   7% (546/7500) 0.56 FPS 0:16:22 < 3:27:42`\r\n```\r\n\r\nAny assistance would be appreciated. Thanks.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/809/timeline","performed_via_github_app":null,"state_reason":null}