{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/260","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/260/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/260/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/260/events","html_url":"https://github.com/k4yt3x/video2x/issues/260","id":621416201,"node_id":"MDU6SXNzdWU2MjE0MTYyMDE=","number":260,"title":"Frame upscaling fails due to \"The process cannot access the file because it is being used by another process\"","user":{"login":"HunterAP23","id":14364070,"node_id":"MDQ6VXNlcjE0MzY0MDcw","avatar_url":"https://avatars.githubusercontent.com/u/14364070?v=4","gravatar_id":"","url":"https://api.github.com/users/HunterAP23","html_url":"https://github.com/HunterAP23","followers_url":"https://api.github.com/users/HunterAP23/followers","following_url":"https://api.github.com/users/HunterAP23/following{/other_user}","gists_url":"https://api.github.com/users/HunterAP23/gists{/gist_id}","starred_url":"https://api.github.com/users/HunterAP23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HunterAP23/subscriptions","organizations_url":"https://api.github.com/users/HunterAP23/orgs","repos_url":"https://api.github.com/users/HunterAP23/repos","events_url":"https://api.github.com/users/HunterAP23/events{/privacy}","received_events_url":"https://api.github.com/users/HunterAP23/received_events","type":"User","site_admin":false},"labels":[{"id":847238628,"node_id":"MDU6TGFiZWw4NDcyMzg2Mjg=","url":"https://api.github.com/repos/k4yt3x/video2x/labels/type:Bug","name":"type:Bug","color":"d80000","default":false,"description":"Something isn't working"},{"id":1025498623,"node_id":"MDU6TGFiZWwxMDI1NDk4NjIz","url":"https://api.github.com/repos/k4yt3x/video2x/labels/state:timedOut","name":"state:timedOut","color":"ff8235","default":false,"description":"The issue owner isn't responding to questions"},{"id":1317577858,"node_id":"MDU6TGFiZWwxMzE3NTc3ODU4","url":"https://api.github.com/repos/k4yt3x/video2x/labels/state:waitingForCreator","name":"state:waitingForCreator","color":"540777","default":false,"description":"Further information required"},{"id":1341562324,"node_id":"MDU6TGFiZWwxMzQxNTYyMzI0","url":"https://api.github.com/repos/k4yt3x/video2x/labels/cannot%20reproduce","name":"cannot reproduce","color":"e0186f","default":false,"description":"Unable to reproduce this issue"}],"state":"closed","locked":false,"assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"assignees":[{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-05-20T02:42:59Z","updated_at":"2020-05-29T13:28:44Z","closed_at":"2020-05-29T13:28:44Z","author_association":"NONE","active_lock_reason":null,"body":"## Environment Information\r\n\r\n|Module|Version|\r\n|-|-|\r\n|`Video2X`|4.2.0 Win32|\r\n|`FFmpeg`|git-2020-05-15-b18fd2b|\r\n|`waifu2x-caffe`|1.0.0|\r\n|`waifu2x-converter-cpp`|v5.3.3 (master-b45498b)|\r\n\r\n## Symptom\r\n\r\nAttempting to upscale a video using different models for some testing. After decoding the frames and saving them as PNG's inside my cache folder, the upscaling portion fails due to one of the frames being \"in use by another process\". Curious part is that I'm only running this with a single process thread, so not sure what is holding that file.\r\n\r\nI did have this exact same issue before when I used v2.10, and I ended up fixing it by changing line 289 in upscaler.py:\r\n```py\r\nfor image in frames:\r\n    # move image\r\n    try:\r\n            image.rename(process_directories[0] / image.name)\r\n    except FileExistsError as fee:\r\n        continue\r\n    except PermissionError as pe:\r\n        pass\r\n    # rotate list\r\n    process_directories = process_directories[-1:] + process_directories[:-1]\r\n```\r\n\r\nThis will skip the file if it somehow already exists (meaning another thread is handling the renaming process) or if the file is currently in use (since renaming it will throw a permission error).\r\n\r\n## Screenshots or Error Messages\r\n\r\nSettings I use when this error occurs:\r\n![video2x_gui_2020-05-19_22-32-03](https://user-images.githubusercontent.com/14364070/82398324-9fde5300-9a20-11ea-96c4-4729dc68f196.png)\r\n![video2x_gui_2020-05-19_22-32-14](https://user-images.githubusercontent.com/14364070/82398332-a40a7080-9a20-11ea-8165-f4f4a02084c0.png)\r\n\r\nThis is the actual error message I am met with:\r\n![video2x_gui_2020-05-19_22-24-01](https://user-images.githubusercontent.com/14364070/82398344-ac62ab80-9a20-11ea-9dec-8a3fc5a316f3.png)\r\n\r\nScreenshot of the console output when this error occurs:\r\n![video2x_gui_2020-05-19_22-24-24](https://user-images.githubusercontent.com/14364070/82398369-b7b5d700-9a20-11ea-8dd2-30192912da50.png)\r\n\r\n```\r\nCleaning up cache directory: D:\\Downloads\\CompTools\\Media\\video2x-4.2.0-win32-full\\cache\\tmpsl2y_xj1\r\nCleaning up cache directory: D:\\Downloads\\CompTools\\Media\\video2x-4.2.0-win32-full\\cache\\tmpwwb9l7ug\r\nCleaning up cache directory: D:\\Downloads\\CompTools\\Media\\video2x-4.2.0-win32-full\\cache\r\nTraceback (most recent call last):\r\n  File \"video2x_gui.py\", line 99, in run\r\n  File \"upscaler.py\", line 607, in run\r\n  File \"upscaler.py\", line 527, in run\r\n  File \"upscaler.py\", line 291, in _upscale_frames\r\n  File \"pathlib.py\", line 1353, in rename\r\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\Downloads\\\\CompTools\\\\Media\\\\video2x-4.2.0-win32-full\\\\cache\\\\tmpsl2y_xj1\\\\extracted_135.png' -> 'D:\\\\Downloads\\\\CompTools\\\\Media\\\\video2x-4.2.0-win32-full\\\\cache\\\\tmpsl2y_xj1\\\\0\\\\extracted_135.png'\r\n```","closed_by":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/260/timeline","performed_via_github_app":null,"state_reason":"completed"}