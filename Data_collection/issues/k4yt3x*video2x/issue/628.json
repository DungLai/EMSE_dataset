{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/628","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/628/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/628/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/628/events","html_url":"https://github.com/k4yt3x/video2x/issues/628","id":1193918354,"node_id":"I_kwDOB1EkMc5HKb-S","number":628,"title":"Docker image issues (documentation out of date?)","user":{"login":"RyanHakurei","id":5086636,"node_id":"MDQ6VXNlcjUwODY2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5086636?v=4","gravatar_id":"","url":"https://api.github.com/users/RyanHakurei","html_url":"https://github.com/RyanHakurei","followers_url":"https://api.github.com/users/RyanHakurei/followers","following_url":"https://api.github.com/users/RyanHakurei/following{/other_user}","gists_url":"https://api.github.com/users/RyanHakurei/gists{/gist_id}","starred_url":"https://api.github.com/users/RyanHakurei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RyanHakurei/subscriptions","organizations_url":"https://api.github.com/users/RyanHakurei/orgs","repos_url":"https://api.github.com/users/RyanHakurei/repos","events_url":"https://api.github.com/users/RyanHakurei/events{/privacy}","received_events_url":"https://api.github.com/users/RyanHakurei/received_events","type":"User","site_admin":false},"labels":[{"id":3804557898,"node_id":"LA_kwDOB1EkMc7ixPJK","url":"https://api.github.com/repos/k4yt3x/video2x/labels/component:Container","name":"component:Container","color":"ad2f0f","default":false,"description":"Container related issue"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":41,"created_at":"2022-04-06T02:09:55Z","updated_at":"2022-09-04T22:38:05Z","closed_at":"2022-09-04T22:38:05Z","author_association":"NONE","active_lock_reason":null,"body":"I cannot get the Docker image to work. The syntax given is `docker run -it --rm -v $PWD:/host ghcr.io/k4yt3x/video2x:5.0.0-beta5 -i input.mp4 -o output.mp4 -p6 upscale -h 720 -a waifu2x -n3` but this fails:\r\n\r\n```\r\n02:03:57.090768 | INFO     | Video2X 5.0.0-beta5\r\n02:03:57.091053 | INFO     | Copyright (C) 2018-2022 K4YT3X and contributors.\r\n02:03:57.091141 | INFO     | Reading input video information\r\n02:03:57.149865 | INFO     | Starting video decoder\r\n02:03:57.153863 | INFO     | Starting video encoder\r\n02:03:57.158673 | INFO     | Upscaler process 0 initiating\r\n02:03:57.159748 | INFO     | Upscaler process 1 initiating\r\n02:03:57.160937 | INFO     | Upscaler process 2 initiating\r\n02:03:57.162194 | INFO     | Upscaler process 3 initiating\r\n02:03:57.163585 | INFO     | Upscaler process 4 initiating\r\n02:03:57.165077 | INFO     | Upscaler process 5 initiating\r\nvkEnumeratePhysicalDevices failed -3\r\nvkEnumeratePhysicalDevices failed -3\r\nvkEnumeratePhysicalDevices failed -3\r\nvkEnumeratePhysicalDevices failed -3\r\nvkEnumeratePhysicalDevices failed -3\r\nvkEnumeratePhysicalDevices failed -3\r\nInput #0, avi, from 'input.mp4':\r\n  Metadata:\r\n    encoder         : VirtualDubMod 1.5.10.2 (build 2540/release)\r\n  Duration: 00:20:52.92, start: 0.000000, bitrate: 1169 kb/s\r\n    Stream #0:0: Video: mpeg4 (Advanced Simple Profile) (XVID / 0x44495658), yuv420p, 512x384 [SAR 1:1 DAR 4:3], 1050 kb/s, 29.97 fps, 29.97 tbr, 29.97 tbn, 29.98 tbc\r\n    Stream #0:1: Audio: mp3 (U[0][0][0] / 0x0055), 48000 Hz, stereo, fltp, 104 kb/s\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (mpeg4 (native) -> rawvideo (native))\r\n[mpeg4 @ 0x55dc4d40d000] Video uses a non-standard and wasteful way to store B-frames ('packed B-frames'). Consider using the mpeg4_unpack_bframes bitstream filter without encoding but stream copy\r\nto fix it.\r\nOutput #0, rawvideo, to 'pipe:1':\r\n  Metadata:\r\n    encoder         : Lavf58.29.100\r\n    Stream #0:0: Video: rawvideo (RGB[24] / 0x18424752), rgb24, 512x384 [SAR 1:1 DAR 4:3], q=2-31, 141416 kb/s, 29.97 fps, 29.97 tbn, 29.97 tbc\r\n    Metadata:\r\n      encoder         : Lavc58.54.100 rawvideo\r\n\r\n02:03:58.165428 | ERROR    | process died unexpectedly\r\nTraceback (most recent call last):\r\n\r\n  File \"/usr/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n           |         |     -> {'__name__': '__main__', '__doc__': '\\nCopyright (C) 2018-2022 K4YT3X and contributors.\\n\\nThis program is free software: you...\r\n           |         -> <code object <module> at 0x7fe30b2d5f50, file \"/usr/local/lib/python3.8/dist-packages/video2x/__main__.py\", line 3>\r\n           -> <function _run_code at 0x7fe31af25040>\r\n  File \"/usr/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n         |     -> {'__name__': '__main__', '__doc__': '\\nCopyright (C) 2018-2022 K4YT3X and contributors.\\n\\nThis program is free software: you...\r\n         -> <code object <module> at 0x7fe30b2d5f50, file \"/usr/local/lib/python3.8/dist-packages/video2x/__main__.py\", line 3>\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/__main__.py\", line 30, in <module>\r\n    sys.exit(main())\r\n    |   |    -> <function main at 0x7fe30b2db040>\r\n    |   -> <built-in function exit>\r\n    -> <module 'sys' (built-in)>\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 612, in main\r\n    video2x.upscale(\r\n    |       -> <function Video2X.upscale at 0x7fe30b371ee0>\r\n    -> <video2x.video2x.Video2X object at 0x7fe30b2e5040>\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 412, in upscale\r\n    self._run(\r\n    |    -> <function Video2X._run at 0x7fe30b371e50>\r\n    -> <video2x.video2x.Video2X object at 0x7fe30b2e5040>\r\n\r\n> File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 308, in _run\r\n    raise Exception(\"process died unexpectedly\")\r\n\r\nException: process died unexpectedly\r\n02:03:58.170521 | INFO     | Stopping processor processes\r\n02:03:58.171151 | INFO     | Stopping decoder and encoder threads\r\n02:03:58.171693 | DEBUG    | Encoding queue depleted\r\n02:03:58.270920 | DEBUG    | Decoding queue depleted\r\n02:03:58.657832 | INFO     | Encoder thread exiting\r\n02:03:58.658722 | INFO     | Decoder thread exiting\r\n02:03:58.659135 | ERROR    | process died unexpectedly\r\nTraceback (most recent call last):\r\n\r\n  File \"/usr/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n           |         |     -> {'__name__': '__main__', '__doc__': '\\nCopyright (C) 2018-2022 K4YT3X and contributors.\\n\\nThis program is free software: you...\r\n           |         -> <code object <module> at 0x7fe30b2d5f50, file \"/usr/local/lib/python3.8/dist-packages/video2x/__main__.py\", line 3>\r\n           -> <function _run_code at 0x7fe31af25040>\r\n  File \"/usr/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n         |     -> {'__name__': '__main__', '__doc__': '\\nCopyright (C) 2018-2022 K4YT3X and contributors.\\n\\nThis program is free software: you...\r\n         -> <code object <module> at 0x7fe30b2d5f50, file \"/usr/local/lib/python3.8/dist-packages/video2x/__main__.py\", line 3>\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/__main__.py\", line 30, in <module>\r\n    sys.exit(main())\r\n    |   |    -> <function main at 0x7fe30b2db040>\r\n    |   -> <built-in function exit>\r\n    -> <module 'sys' (built-in)>\r\n\r\n> File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 612, in main\r\n    video2x.upscale(\r\n    |       -> <function Video2X.upscale at 0x7fe30b371ee0>\r\n    -> <video2x.video2x.Video2X object at 0x7fe30b2e5040>\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 412, in upscale\r\n    self._run(\r\n    |    -> <function Video2X._run at 0x7fe30b371e50>\r\n    -> <video2x.video2x.Video2X object at 0x7fe30b2e5040>\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 375, in _run\r\n    raise exception[0]\r\n          -> [Exception('process died unexpectedly')]\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/video2x/video2x.py\", line 308, in _run\r\n    raise Exception(\"process died unexpectedly\")\r\n\r\nException: process died unexpectedly\r\n```\r\nUpon running --help to see if I can mess around and get things to work,\r\n\r\n```\r\nusage: video2x [-h] [--version] -i INPUT -o OUTPUT [-p PROCESSES] [-l {trace,debug,info,success,warning,error,critical}] {upscale,interpolate} ...\r\n\r\npositional arguments:\r\n  {upscale,interpolate}\r\n                        action to perform\r\n    upscale             upscale a file\r\n    interpolate         interpolate frames for file\r\n\r\noptional arguments:\r\n  -h, --help            show this help message and exit\r\n  --version             show version information and exit (default: False)\r\n  -i INPUT, --input INPUT\r\n                        input file/directory path (default: None)\r\n  -o OUTPUT, --output OUTPUT\r\n                        output file/directory path (default: None)\r\n  -p PROCESSES, --processes PROCESSES\r\n                        number of processes to launch (default: 1)\r\n  -l {trace,debug,info,success,warning,error,critical}, --loglevel {trace,debug,info,success,warning,error,critical}\r\n```\r\n\r\nAlmost none of the flags given in the documentation actually exist, and ones that do are wrong. For example `-h` prints the help message, it does not set height (as it does in 4.3.1).\r\n\r\n","closed_by":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/628/timeline","performed_via_github_app":null,"state_reason":"completed"}