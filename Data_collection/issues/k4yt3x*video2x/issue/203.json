{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/203","repository_url":"https://api.github.com/repos/k4yt3x/video2x","labels_url":"https://api.github.com/repos/k4yt3x/video2x/issues/203/labels{/name}","comments_url":"https://api.github.com/repos/k4yt3x/video2x/issues/203/comments","events_url":"https://api.github.com/repos/k4yt3x/video2x/issues/203/events","html_url":"https://github.com/k4yt3x/video2x/issues/203","id":565302306,"node_id":"MDU6SXNzdWU1NjUzMDIzMDY=","number":203,"title":"YAML and JSON Related Errors","user":{"login":"qmouadcart","id":61051532,"node_id":"MDQ6VXNlcjYxMDUxNTMy","avatar_url":"https://avatars.githubusercontent.com/u/61051532?v=4","gravatar_id":"","url":"https://api.github.com/users/qmouadcart","html_url":"https://github.com/qmouadcart","followers_url":"https://api.github.com/users/qmouadcart/followers","following_url":"https://api.github.com/users/qmouadcart/following{/other_user}","gists_url":"https://api.github.com/users/qmouadcart/gists{/gist_id}","starred_url":"https://api.github.com/users/qmouadcart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qmouadcart/subscriptions","organizations_url":"https://api.github.com/users/qmouadcart/orgs","repos_url":"https://api.github.com/users/qmouadcart/repos","events_url":"https://api.github.com/users/qmouadcart/events{/privacy}","received_events_url":"https://api.github.com/users/qmouadcart/received_events","type":"User","site_admin":false},"labels":[{"id":847238628,"node_id":"MDU6TGFiZWw4NDcyMzg2Mjg=","url":"https://api.github.com/repos/k4yt3x/video2x/labels/type:Bug","name":"type:Bug","color":"d80000","default":false,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false},"assignees":[{"login":"k4yt3x","id":21986859,"node_id":"MDQ6VXNlcjIxOTg2ODU5","avatar_url":"https://avatars.githubusercontent.com/u/21986859?v=4","gravatar_id":"","url":"https://api.github.com/users/k4yt3x","html_url":"https://github.com/k4yt3x","followers_url":"https://api.github.com/users/k4yt3x/followers","following_url":"https://api.github.com/users/k4yt3x/following{/other_user}","gists_url":"https://api.github.com/users/k4yt3x/gists{/gist_id}","starred_url":"https://api.github.com/users/k4yt3x/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4yt3x/subscriptions","organizations_url":"https://api.github.com/users/k4yt3x/orgs","repos_url":"https://api.github.com/users/k4yt3x/repos","events_url":"https://api.github.com/users/k4yt3x/events{/privacy}","received_events_url":"https://api.github.com/users/k4yt3x/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-02-14T12:37:16Z","updated_at":"2020-02-15T03:34:51Z","closed_at":"2020-02-15T03:34:51Z","author_association":"NONE","active_lock_reason":null,"body":"## Environment Information\r\n\r\n|Installed Modules||\r\n|-|-|\r\n|`Video2X`|| Latest\r\n|`FFmpeg`|| Latest\r\n|`waifu2x-caffe`|| Latest\r\n|`waifu2x-converter-cpp`|| Latest\r\n|`waifu2x-ncnn-vulkan`|| Latest\r\n|`Anime4K`|| \r\n|`All Dependencies I forgot to mention, the setup was completely satisfied.`|| \r\n\r\nAll versions are on latest\r\n\r\n## Description:\r\nWhen running video2x with the following video2x.yaml:\r\n\r\n```\r\n---\r\nwaifu2x_caffe:\r\n  path: C:\\Users\\MyUsername\\AppData\\Local\\video2x\\waifu2x-caffe\\waifu2x-caffe-cui\r\n  input_extention_list:\r\n  output_extention:\r\n  mode: noise_scale\r\n  scale_ratio:\r\n  scale_width:\r\n  scale_height:\r\n  noise_level: 3\r\n  process: gpu\r\n  crop_size: 128\r\n  output_quality: -1\r\n  output_depth: 8\r\n  batch_size: 1\r\n  gpu: 0\r\n  tta: 0\r\n  input_path:\r\n  output_path:\r\n  model_dir:\r\n  crop_w:\r\n  crop_h:\r\nwaifu2x_converter:\r\n  path: C:\\Users\\MyUsername\\AppData\\Local\\video2x\\waifu2x-converter-cpp\r\n  output-format:\r\n  png-compression:\r\n  image-quality:\r\n  block-size:\r\n  disable-gpu:\r\n  force-OpenCL:\r\n  processor:\r\n  jobs:\r\n  model-dir:\r\n  scale-ratio:\r\n  noise-level: 3\r\n  mode: noise-scale\r\n  silent: true\r\n  output:\r\n  input:\r\nwaifu2x_ncnn_vulkan:\r\n  path: C:\\Users\\MyUsername\\AppData\\Local\\video2x\\waifu2x-ncnn-vulkan\\waifu2x-ncnn-vulkan\r\n  v:\r\n  i:\r\n  o:\r\n  n: 2\r\n  s: 2\r\n  t: 400\r\n  m: models-cunet\r\n  g: 0\r\n  j: \"1:2:2\"\r\nanime4k:\r\n  path: C:\\Users\\MyUsername\\AppData\\Local\\video2x\\anime4k\\Anime4K.jar\r\n  java_path:C:\\Program Files\\Java\\jdk-13.0.2\\bin\\java.exe\r\nffmpeg:\r\n  ffmpeg_path: C:\\Users\\MyUsername\\AppData\\Local\\video2x\\ffmpeg-latest-win64-static\\bin\r\n  video_to_frames:\r\n    output_options:\r\n      \"-qscale:v\":\r\n      \"-pix_fmt\": rgba64be\r\n    \"-hwaccel\": auto\r\n    \"-y\": true\r\n  frames_to_video:\r\n    input_options:\r\n      \"-qscale:v\":\r\n      \"-qscale:a\":\r\n      \"-f\": image2\r\n    output_options:\r\n      \"-vcodec\": libx264\r\n      \"-crf\": 17\r\n      \"-b:v\":\r\n      \"-pix_fmt\":\r\n    \"-hwaccel\": auto\r\n    \"-y\": true\r\n  migrating_tracks:\r\n    output_options:\r\n      \"-map\":\r\n        - 0:v?\r\n        - 1:a?\r\n        - 1:s?\r\n        - 1:d?\r\n        - 1:t?\r\n      \"-c\": copy\r\n      \"-pix_fmt\":\r\n    \"-hwaccel\": auto\r\n    \"-y\": true\r\nvideo2x:\r\n  video2x_cache_directory:cache\r\n  image_format: png\r\n  preserve_frames: false\r\n\r\n```\r\n\r\nI am met with the following in the CLI:\r\n\r\n```\r\nG:\\Projects\\Upscaling\\video2x-master\\src>python video2x.py -i in.mkv -o out.mkv -r 2 -d anime4k\r\n\r\n\r\n    __      __  _       _                  ___   __   __\r\n    \\ \\    / / (_)     | |                |__ \\  \\ \\ / /\r\n     \\ \\  / /   _    __| |   ___    ___      ) |  \\ V /\r\n      \\ \\/ /   | |  / _` |  / _ \\  / _ \\    / /    > <\r\n       \\  /    | | | (_| | |  __/ | (_) |  / /_   / . \\\r\n        \\/     |_|  \\__,_|  \\___|  \\___/  |____| /_/ \\_\\\r\n\r\n\r\n                  Video2X Video Enlarger\r\n\r\n                       Version 3.0.0\r\n\r\n[!] WARNING: Anime4K runs significantly faster with more threads\r\n[?] USER: Use more threads of Anime4K? [Y/n]: Y\r\n[?] USER: Amount of threads to use [5]: 5\r\nTraceback (most recent call last):\r\n  File \"video2x.py\", line 304, in <module>\r\n    config = read_config(args.config)\r\n  File \"video2x.py\", line 201, in read_config\r\n    return yaml.load(config, Loader=yaml.FullLoader)\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\__init__.py\", line 114, in load\r\n    return loader.get_single_data()\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\constructor.py\", line 41, in get_single_data\r\n    node = self.get_single_node()\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\composer.py\", line 36, in get_single_node\r\n    document = self.compose_document()\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\composer.py\", line 55, in compose_document\r\n    node = self.compose_node(None, None)\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\composer.py\", line 133, in compose_mapping_node\r\n    item_value = self.compose_node(node, item_key)\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\composer.py\", line 84, in compose_node\r\n    node = self.compose_mapping_node(anchor)\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\composer.py\", line 127, in compose_mapping_node\r\n    while not self.check_event(MappingEndEvent):\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\parser.py\", line 98, in check_event\r\n    self.current_event = self.state()\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\parser.py\", line 428, in parse_block_mapping_key\r\n    if self.check_token(KeyToken):\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\scanner.py\", line 115, in check_token\r\n    while self.need_more_tokens():\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\scanner.py\", line 152, in need_more_tokens\r\n    self.stale_possible_simple_keys()\r\n  File \"C:\\Users\\MyUsername\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\yaml\\scanner.py\", line 292, in stale_possible_simple_keys\r\n    \"could not find expected ':'\", self.get_mark())\r\nyaml.scanner.ScannerError: while scanning a simple key\r\n  in \"G:\\Projects\\Upscaling\\video2x-master\\src\\video2x.yaml\", line 53, column 3\r\ncould not find expected ':'\r\n  in \"G:\\Projects\\Upscaling\\video2x-master\\src\\video2x.yaml\", line 54, column 1\r\n\r\nG:\\Projects\\Upscaling\\video2x-master\\src>\r\n```\r\n\r\nIn GUI:\r\n\r\n```\r\nUpscaler ran into an error:\r\nwhile scanning a simple key\r\n  in \"G:\\Projects\\Upscaling\\video2x-master\\src\\video2x.yaml\", line 53, column 3\r\ncould not find expected ':'\r\n  in \"G:\\Projects\\Upscaling\\video2x-master\\src\\video2x.yaml\", line 54, column 1\r\n```\r\n\r\nWith -c video2x.json:\r\n\r\n```\r\nG:\\Projects\\Upscaling\\video2x-master\\src>python video2x.py -i in.mkv -o out.mkv -r 2 -d anime4k -c video2x.json\r\n\r\n    __      __  _       _                  ___   __   __\r\n    \\ \\    / / (_)     | |                |__ \\  \\ \\ / /\r\n     \\ \\  / /   _    __| |   ___    ___      ) |  \\ V /\r\n      \\ \\/ /   | |  / _` |  / _ \\  / _ \\    / /    > <\r\n       \\  /    | | | (_| | |  __/ | (_) |  / /_   / . \\\r\n        \\/     |_|  \\__,_|  \\___|  \\___/  |____| /_/ \\_\\\r\n\r\n\r\n                  Video2X Video Enlarger\r\n\r\n                       Version 3.0.0\r\n\r\n[!] WARNING: Anime4K runs significantly faster with more threads\r\n[?] USER: Use more threads of Anime4K? [Y/n]: Y\r\n[?] USER: Amount of threads to use [5]: 5\r\nTraceback (most recent call last):\r\n  File \"video2x.py\", line 312, in <module>\r\n    if not pathlib.Path(driver_settings['path']).is_file():\r\nKeyError: 'path'\r\n\r\nG:\\Projects\\Upscaling\\video2x-master\\src>\r\n```\r\n\r\nSaid JSON:\r\n```\r\n{\r\n  \"waifu2x_caffe\": {\r\n    \"waifu2x_caffe_path\": \"C:\\\\Users\\\\MyUsername\\\\AppData\\\\Local\\\\video2x\\\\waifu2x-caffe\\\\waifu2x-caffe-cui.exe\",\r\n    \"input_extention_list\": null,\r\n    \"output_extention\": null,\r\n    \"mode\": \"noise_scale\",\r\n    \"scale_ratio\": null,\r\n    \"scale_width\": null,\r\n    \"scale_height\": null,\r\n    \"noise_level\": 3,\r\n    \"process\": \"gpu\",\r\n    \"crop_size\": 128,\r\n    \"output_quality\": -1,\r\n    \"output_depth\": 8,\r\n    \"batch_size\": 1,\r\n    \"gpu\": 0,\r\n    \"tta\": 0,\r\n    \"input_path\": null,\r\n    \"output_path\": null,\r\n    \"model_dir\": null,\r\n    \"crop_w\": null,\r\n    \"crop_h\": null\r\n  },\r\n  \"waifu2x_converter\": {\r\n    \"waifu2x_converter_path\": \"C:\\\\Users\\\\MyUsername\\\\AppData\\\\Local\\\\video2x\\\\waifu2x-converter-cpp\",\r\n    \"output-format\": null,\r\n    \"png-compression\": null,\r\n    \"image-quality\": null,\r\n    \"block-size\": null,\r\n    \"disable-gpu\": null,\r\n    \"force-OpenCL\": null,\r\n    \"processor\": null,\r\n    \"jobs\": null,\r\n    \"model-dir\": null,\r\n    \"scale-ratio\": null,\r\n    \"noise-level\": 3,\r\n    \"mode\": \"noise-scale\",\r\n    \"silent\": true,\r\n    \"output\": null,\r\n    \"input\": null\r\n  },\r\n  \"waifu2x_ncnn_vulkan\": {\r\n    \"waifu2x_ncnn_vulkan_path\": \"C:\\\\Users\\\\MyUsername\\\\AppData\\\\Local\\\\video2x\\\\waifu2x-ncnn-vulkan\\\\waifu2x-ncnn-vulkan.exe\",\r\n    \"v\": null,\r\n    \"i\": null,\r\n    \"o\": null,\r\n    \"n\": 2,\r\n    \"s\": 2,\r\n    \"t\": 400,\r\n    \"m\": \"models-cunet\",\r\n    \"g\": 0,\r\n    \"j\": \"1:2:2\"\r\n  },\r\n  \"anime4k\": {\r\n    \"anime4k_path\": \"C:\\\\Users\\\\MyUsername\\\\AppData\\\\Local\\\\video2x\\\\anime4k\\\\Anime4K.jar\",\r\n    \"java_path\": \"C:\\\\Program Files\\\\Java\\\\jdk-13.0.2\\\\bin\\\\java.exe\"\r\n  },\r\n  \"ffmpeg\": {\r\n    \"ffmpeg_path\": \"C:\\\\Users\\\\MyUsername\\\\AppData\\\\Local\\\\video2x\\\\ffmpeg-latest-win64-static\\\\bin\",\r\n    \"video_to_frames\": {\r\n      \"output_options\": {\r\n        \"-qscale:v\": null,\r\n        \"-pix_fmt\": \"rgba64be\"\r\n      },\r\n      \"-hwaccel\": \"auto\",\r\n      \"-y\": true\r\n    },\r\n    \"frames_to_video\": {\r\n      \"input_options\": {\r\n        \"-qscale:v\": null,\r\n        \"-qscale:a\": null,\r\n        \"-f\": \"image2\"\r\n      },\r\n      \"output_options\": {\r\n        \"-vcodec\": \"libx264\",\r\n        \"-crf\": 17,\r\n        \"-b:v\": null,\r\n        \"-pix_fmt\": null\r\n      },\r\n      \"-hwaccel\": \"auto\",\r\n      \"-y\": true\r\n    },\r\n    \"migrating_tracks\": {\r\n      \"output_options\": {\r\n        \"-map\": [\r\n          \"0:v:0?\",\r\n          \"1?\",\r\n          \"-1:v?\"\r\n        ],\r\n        \"-c\": \"copy\",\r\n        \"-pix_fmt\": null\r\n      },\r\n      \"-hwaccel\": \"auto\",\r\n      \"-y\": true\r\n    }\r\n  },\r\n  \"video2x\": {\r\n    \"video2x_cache_directory\": \"cache\",\r\n    \"image_format\": \"png\",\r\n    \"preserve_frames\": false\r\n  }\r\n}\r\n```\r\n\r\nHappens with all upscalers, sizes etc. I have a cache path on the root of the drive I'm on, and also in the folder. input and output files are valid, replaced my real username with MyUsername.","closed_by":{"login":"qmouadcart","id":61051532,"node_id":"MDQ6VXNlcjYxMDUxNTMy","avatar_url":"https://avatars.githubusercontent.com/u/61051532?v=4","gravatar_id":"","url":"https://api.github.com/users/qmouadcart","html_url":"https://github.com/qmouadcart","followers_url":"https://api.github.com/users/qmouadcart/followers","following_url":"https://api.github.com/users/qmouadcart/following{/other_user}","gists_url":"https://api.github.com/users/qmouadcart/gists{/gist_id}","starred_url":"https://api.github.com/users/qmouadcart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qmouadcart/subscriptions","organizations_url":"https://api.github.com/users/qmouadcart/orgs","repos_url":"https://api.github.com/users/qmouadcart/repos","events_url":"https://api.github.com/users/qmouadcart/events{/privacy}","received_events_url":"https://api.github.com/users/qmouadcart/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/k4yt3x/video2x/issues/203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/k4yt3x/video2x/issues/203/timeline","performed_via_github_app":null,"state_reason":"completed"}