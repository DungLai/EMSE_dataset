{"url":"https://api.github.com/repos/spcl/ncc/issues/21","repository_url":"https://api.github.com/repos/spcl/ncc","labels_url":"https://api.github.com/repos/spcl/ncc/issues/21/labels{/name}","comments_url":"https://api.github.com/repos/spcl/ncc/issues/21/comments","events_url":"https://api.github.com/repos/spcl/ncc/issues/21/events","html_url":"https://github.com/spcl/ncc/issues/21","id":571175274,"node_id":"MDU6SXNzdWU1NzExNzUyNzQ=","number":21,"title":"Train task classifyapp on same data as for training the embedding","user":{"login":"dinhi","id":11942856,"node_id":"MDQ6VXNlcjExOTQyODU2","avatar_url":"https://avatars.githubusercontent.com/u/11942856?v=4","gravatar_id":"","url":"https://api.github.com/users/dinhi","html_url":"https://github.com/dinhi","followers_url":"https://api.github.com/users/dinhi/followers","following_url":"https://api.github.com/users/dinhi/following{/other_user}","gists_url":"https://api.github.com/users/dinhi/gists{/gist_id}","starred_url":"https://api.github.com/users/dinhi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dinhi/subscriptions","organizations_url":"https://api.github.com/users/dinhi/orgs","repos_url":"https://api.github.com/users/dinhi/repos","events_url":"https://api.github.com/users/dinhi/events{/privacy}","received_events_url":"https://api.github.com/users/dinhi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-02-26T09:05:04Z","updated_at":"2021-08-12T21:23:31Z","closed_at":"2021-08-12T21:23:31Z","author_association":"NONE","active_lock_reason":null,"body":"Hello together,\r\nwe want to train a Keras model with the **train_task_classifyapp.py** script to make a simple binary classification: \r\n\r\n1. class: Applications which **perform a stencil** operation\r\n2. class: Applications which do **not perform a stencil** operation\r\n\r\nFor this purpose we created a dataset based on your synthetic datasets \r\n- Eigen-synthetic [https://polybox.ethz.ch/index.php/s/52wWiK5fjRGHLJR](url)\r\n- GEMM-synthetic [https://polybox.ethz.ch/index.php/s/Bm6cwAY3eVkR6v3](url)\r\n- Stencil-synthetic [https://polybox.ethz.ch/index.php/s/OOmylxGcBxQM1D3](url)\r\n\r\nThe dataset has the following directory structure so the python script can handle it:\r\n```bash\r\n.\r\n├── ncc\r\n│   ├── train\r\n│   │   ├── classifyapp\r\n│   │   │   ├── ir_train\r\n│   │   │   │   ├── 1\r\n│   │   │   │   ├── 2\r\n│   │   │   ├── ir_val\r\n│   │   │   │   ├── 1\r\n│   │   │   │   ├── 2\r\n│   │   │   ├── ir_test\r\n│   │   │   │   ├── 1\r\n│   │   │   │   ├── 2\r\n```\r\n\r\nFolder 2 is a mixture of applications from the Eigen- and GEMM-synthetic dataset, folder 1 has only applications from the Stencil-synthetic dataset.\r\n\r\nMy questions are the following:\r\n- Since the Eigen-, GEMM- and Stencil-synthetic dataset have been used for training the **inst2vec** embedding, will this affect the training for classifyapp Keras model (positive or negative way)?\r\n- What was your setup for training and how long did it take? In our current setup, each folder for class 1 and 2 has 80 randomly picked applications, **batch size** is 4, **epochs** is 20 and number of  **training samples per class**is 20. We are running the training on a Nvidia 1080 Ti. Only with this setup we could train the network in an affordable time (45 minutes per epoch). We are aware that this can yield in bad accuracy. \r\nIn another setup, we had 2000 sample applications for each class in each set (train, val and test). The batch size was 4, number of training samples per class were 30 and 20 epochs. With this setup, the training time for each epoch went up to 55 hours (Keras ETA)! Using larger batch sizes leads to an error within Cuda since it can not allocate enough memory.\r\nDo you have any experience with these parameters for training? What could be the reason for such a high training time? In your script, you are using 64 batch size and 1500 training samples for class. Did it also take so much time for training 104 classes?","closed_by":{"login":"tbennun","id":8348955,"node_id":"MDQ6VXNlcjgzNDg5NTU=","avatar_url":"https://avatars.githubusercontent.com/u/8348955?v=4","gravatar_id":"","url":"https://api.github.com/users/tbennun","html_url":"https://github.com/tbennun","followers_url":"https://api.github.com/users/tbennun/followers","following_url":"https://api.github.com/users/tbennun/following{/other_user}","gists_url":"https://api.github.com/users/tbennun/gists{/gist_id}","starred_url":"https://api.github.com/users/tbennun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbennun/subscriptions","organizations_url":"https://api.github.com/users/tbennun/orgs","repos_url":"https://api.github.com/users/tbennun/repos","events_url":"https://api.github.com/users/tbennun/events{/privacy}","received_events_url":"https://api.github.com/users/tbennun/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/spcl/ncc/issues/21/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/spcl/ncc/issues/21/timeline","performed_via_github_app":null,"state_reason":"completed"}