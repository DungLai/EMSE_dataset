{"url":"https://api.github.com/repos/spcl/ncc/issues/23","repository_url":"https://api.github.com/repos/spcl/ncc","labels_url":"https://api.github.com/repos/spcl/ncc/issues/23/labels{/name}","comments_url":"https://api.github.com/repos/spcl/ncc/issues/23/comments","events_url":"https://api.github.com/repos/spcl/ncc/issues/23/events","html_url":"https://github.com/spcl/ncc/issues/23","id":606480530,"node_id":"MDU6SXNzdWU2MDY0ODA1MzA=","number":23,"title":"ValueError: GraphDef cannot be larger than 2GB.","user":{"login":"vladimirtelepov","id":58958811,"node_id":"MDQ6VXNlcjU4OTU4ODEx","avatar_url":"https://avatars.githubusercontent.com/u/58958811?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirtelepov","html_url":"https://github.com/vladimirtelepov","followers_url":"https://api.github.com/users/vladimirtelepov/followers","following_url":"https://api.github.com/users/vladimirtelepov/following{/other_user}","gists_url":"https://api.github.com/users/vladimirtelepov/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirtelepov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirtelepov/subscriptions","organizations_url":"https://api.github.com/users/vladimirtelepov/orgs","repos_url":"https://api.github.com/users/vladimirtelepov/repos","events_url":"https://api.github.com/users/vladimirtelepov/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirtelepov/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-04-24T17:46:20Z","updated_at":"2020-06-08T07:38:10Z","closed_at":"2020-06-08T07:38:10Z","author_association":"NONE","active_lock_reason":null,"body":"Hello, i run train_task_classifyapp.py to learn model myself, its differ only in last dense layer: i removed sigmoid activation function. Train was failed on last batch as i understand, but i cant unsderstand why.\r\nAttached log:\r\n\r\n Tensor(\"l2_normalize:0\", shape=(8565, 200), dtype=float32)\r\n\r\n--- Initializing model...\r\n        built Keras model\r\n\r\n--- Training model...\r\nEpoch 1/50\r\n2436/2437 [============================>.] - ETA: 8s - loss: 8.2014 - acc: 0.0107 Traceback (most recent call last):\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/utils/data_utils.py\", line 578, in get\r\n    inputs = self.queue.get(block=True).get()\r\n  File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 644, in get\r\n    raise self._value\r\n  File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 119, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/utils/data_utils.py\", line 401, in get_index\r\n    return _SHARED_SEQUENCES[uid][i]\r\n  File \"train_task_classifyapp.py\", line 152, in __getitem__\r\n    emb_x = tf.nn.embedding_lookup(self.emb, x).eval(session=self.sess)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 656, in eval\r\n    return _eval_using_default_session(self, feed_dict, self.graph, session)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 5016, in _eval_using_default_session\r\n    return session.run(tensors, feed_dict)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 905, in run\r\n    run_metadata_ptr)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1140, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1321, in _do_run\r\n    run_metadata)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1327, in _do_call\r\n    return fn(*args)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1310, in _run_fn\r\n    self._extend_graph()\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1353, in _extend_graph\r\n    from_version=self._current_version, add_shapes=self._add_shapes)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3094, in _as_graph_def\r\n    raise ValueError(\"GraphDef cannot be larger than 2GB.\")\r\nValueError: GraphDef cannot be larger than 2GB.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"train_task_classifyapp.py\", line 572, in <module>\r\n    app.run(switch)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"train_task_classifyapp.py\", line 569, in switch\r\n    main(argv)\r\n  File \"train_task_classifyapp.py\", line 558, in main\r\n    dense_layer_size, print_summary, num_epochs, batch_size)\r\n  File \"train_task_classifyapp.py\", line 429, in evaluate\r\n    epochs=num_epochs)\r\n  File \"train_task_classifyapp.py\", line 243, in train_gen\r\n    shuffle=True, callbacks=[checkpoint])\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/legacy/interfaces.py\", line 91, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/engine/training.py\", line 1426, in fit_generator\r\n    initial_epoch=initial_epoch)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/engine/training_generator.py\", line 211, in fit_generator\r\n    max_queue_size=max_queue_size)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/legacy/interfaces.py\", line 91, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/engine/training.py\", line 1480, in evaluate_generator\r\n    verbose=verbose)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/engine/training_generator.py\", line 309, in evaluate_generator\r\n    generator_output = next(output_generator)\r\n  File \"/home/vtelepov/tmp/env/lib/python3.6/site-packages/keras/utils/data_utils.py\", line 584, in get\r\n    six.raise_from(StopIteration(e), e)\r\n  File \"<string>\", line 3, in raise_from\r\nStopIteration: GraphDef cannot be larger than 2GB.","closed_by":{"login":"vladimirtelepov","id":58958811,"node_id":"MDQ6VXNlcjU4OTU4ODEx","avatar_url":"https://avatars.githubusercontent.com/u/58958811?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirtelepov","html_url":"https://github.com/vladimirtelepov","followers_url":"https://api.github.com/users/vladimirtelepov/followers","following_url":"https://api.github.com/users/vladimirtelepov/following{/other_user}","gists_url":"https://api.github.com/users/vladimirtelepov/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirtelepov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirtelepov/subscriptions","organizations_url":"https://api.github.com/users/vladimirtelepov/orgs","repos_url":"https://api.github.com/users/vladimirtelepov/repos","events_url":"https://api.github.com/users/vladimirtelepov/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirtelepov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/spcl/ncc/issues/23/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/spcl/ncc/issues/23/timeline","performed_via_github_app":null,"state_reason":"completed"}