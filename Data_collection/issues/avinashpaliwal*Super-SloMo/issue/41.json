{"url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/issues/41","repository_url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo","labels_url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/issues/41/labels{/name}","comments_url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/issues/41/comments","events_url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/issues/41/events","html_url":"https://github.com/avinashpaliwal/Super-SloMo/issues/41","id":434030941,"node_id":"MDU6SXNzdWU0MzQwMzA5NDE=","number":41,"title":"create_dataset.py issues on Google Colab","user":{"login":"iocfinc","id":24967258,"node_id":"MDQ6VXNlcjI0OTY3MjU4","avatar_url":"https://avatars.githubusercontent.com/u/24967258?v=4","gravatar_id":"","url":"https://api.github.com/users/iocfinc","html_url":"https://github.com/iocfinc","followers_url":"https://api.github.com/users/iocfinc/followers","following_url":"https://api.github.com/users/iocfinc/following{/other_user}","gists_url":"https://api.github.com/users/iocfinc/gists{/gist_id}","starred_url":"https://api.github.com/users/iocfinc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iocfinc/subscriptions","organizations_url":"https://api.github.com/users/iocfinc/orgs","repos_url":"https://api.github.com/users/iocfinc/repos","events_url":"https://api.github.com/users/iocfinc/events{/privacy}","received_events_url":"https://api.github.com/users/iocfinc/received_events","type":"User","site_admin":false},"labels":[{"id":1172098997,"node_id":"MDU6TGFiZWwxMTcyMDk4OTk3","url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"avinashpaliwal","id":43282710,"node_id":"MDQ6VXNlcjQzMjgyNzEw","avatar_url":"https://avatars.githubusercontent.com/u/43282710?v=4","gravatar_id":"","url":"https://api.github.com/users/avinashpaliwal","html_url":"https://github.com/avinashpaliwal","followers_url":"https://api.github.com/users/avinashpaliwal/followers","following_url":"https://api.github.com/users/avinashpaliwal/following{/other_user}","gists_url":"https://api.github.com/users/avinashpaliwal/gists{/gist_id}","starred_url":"https://api.github.com/users/avinashpaliwal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avinashpaliwal/subscriptions","organizations_url":"https://api.github.com/users/avinashpaliwal/orgs","repos_url":"https://api.github.com/users/avinashpaliwal/repos","events_url":"https://api.github.com/users/avinashpaliwal/events{/privacy}","received_events_url":"https://api.github.com/users/avinashpaliwal/received_events","type":"User","site_admin":false},"assignees":[{"login":"avinashpaliwal","id":43282710,"node_id":"MDQ6VXNlcjQzMjgyNzEw","avatar_url":"https://avatars.githubusercontent.com/u/43282710?v=4","gravatar_id":"","url":"https://api.github.com/users/avinashpaliwal","html_url":"https://github.com/avinashpaliwal","followers_url":"https://api.github.com/users/avinashpaliwal/followers","following_url":"https://api.github.com/users/avinashpaliwal/following{/other_user}","gists_url":"https://api.github.com/users/avinashpaliwal/gists{/gist_id}","starred_url":"https://api.github.com/users/avinashpaliwal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avinashpaliwal/subscriptions","organizations_url":"https://api.github.com/users/avinashpaliwal/orgs","repos_url":"https://api.github.com/users/avinashpaliwal/repos","events_url":"https://api.github.com/users/avinashpaliwal/events{/privacy}","received_events_url":"https://api.github.com/users/avinashpaliwal/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-04-16T23:44:11Z","updated_at":"2019-05-22T12:50:00Z","closed_at":"2019-05-22T12:50:00Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nI am trying to train the model via Google Colab and I am encountering issues about the creation of the dataset. I am receiving multiple errors when using ffmpeg to extract the frames of the Adobe240fps dataset.\r\n\r\nSample Output:\r\n\r\n``` python\r\nOutput #0, image2, to './data/extracted/GOPR9641/%04d.jpg':\r\n  Metadata:\r\n    major_brand     : mp42\r\n    minor_version   : 1\r\n    compatible_brands: mp41mp42isom\r\n    encoder         : Lavf57.83.100\r\n    Stream #0:0(und): Video: mjpeg, yuvj420p(pc), 640x360 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 59.94 fps, 59.94 tbn, 59.94 tbc (default)\r\n    Metadata:\r\n      creation_time   : 2016-08-27T23:13:56.000000Z\r\n      handler_name    : Core Media Video\r\n      encoder         : Lavc57.107.100 mjpeg\r\n    Side data:\r\n      cpb: bitrate max/min/avg: 0/0/200000 buffer size: 0 vbv_delay: -1\r\n[mov,mp4,m4a,3gp,3g2,mj2 @ 0x55f598cd6000] DTS 4248335 < 4272693 out of order\r\n[image2 @ 0x55f598cd7800] Application provided invalid, non monotonically increasing dts to muxer in stream 0: 1062 >= 1062\r\n[image2 @ 0x55f598cd7800] Application provided invalid, non monotonically increasing dts to muxer in stream 0: 1063 >= 1063\r\n[image2 @ 0x55f598cd7800] Application provided invalid, non monotonically increasing dts to muxer in stream 0: 1064 >= 1064\r\n[mjpeg @ 0x55f599c04000] Invalid pts (1066) <= last (1066)\r\n[image2 @ 0x55f598cd7800] Application provided invalid, non monotonically increasing dts to muxer in stream 0: 1066 >= 1066\r\nVideo encoding failed\r\nConversion failed!\r\nError converting file:GOPR9641.mp4. Exiting.\r\n```\r\n**To Reproduce**\r\n\r\nI am running the code below:\r\n`! python3 './data/create_dataset.py' --ffmpeg 'ffmpeg' --dataset 'adobe240fps' --videos_folder './unzipfile/original_high_fps_videos' --dataset_folder './data/'`\r\n\r\nI did edit the create_dataset.py. I still retained the --ffmpeg argument but it is already hardcoded into the os.system run so the line in the extract_frames function has been changed to:\r\n\r\n`retn = os.system('ffmpeg -i {} -vf scale={}:{} -vsync 0 -qscale:v 2 {}/%04d.jpg'.format( os.path.join(inDir, video), args.img_width, args.img_height, os.path.join(outDir, os.path.splitext(video)[0])))`\r\n\r\nAside from that I changed the os.mkdir to os.makedirs although I don't think that should affect anything.\r\n\r\n**Additional context**\r\n\r\nI did try to run the code in a smaller and selected dataset.\r\nIMG_0181.m4v, IMG_0180.m4v and IMG_0174.m4v and it seemed to extract the frames correctly and I was able to train the model. I am not sure if there is a compatibility issue with Colab's version of dependencies?\r\n\r\nAlso, I just completed running the script in Colab and I added a checker to see which videos were extracted and which failed.\r\n\r\n```text\r\nFailed: ['GOPR9636.mp4', 'GOPR9640.mp4', 'GOPR9641.mp4', 'GOPR9643.mp4', 'GOPR9644.mp4', 'GOPR9645.mp4', 'GOPR9646.mp4', 'GOPR9648.mp4', 'GOPR9649.mp4', 'GOPR9652.mp4', 'GOPR9659.mp4', 'IMG_0003.mov', 'IMG_0004b.mov', 'IMG_0006.mov', 'IMG_0007.mov', 'IMG_0008.mov', 'IMG_0010.mov', 'IMG_0011.mov', 'IMG_0018.mov', 'IMG_0021.mov', 'IMG_0025.mov', 'IMG_0026.mov', 'IMG_0033.mov', 'IMG_0034.mov', 'IMG_0034a.mov', 'IMG_0036.mov', 'IMG_0037a.mov', 'IMG_0042.mov', 'IMG_0046.mov', 'IMG_0047.mov', 'IMG_0054a.mov', 'IMG_0054b.mov', 'IMG_0055.mov', 'IMG_0150.m4v', 'IMG_0151.m4v', 'IMG_0152.m4v', 'IMG_0153.m4v', 'IMG_0154.m4v', 'IMG_0155.m4v', 'IMG_0156.m4v', 'IMG_0157.m4v', 'IMG_0160.m4v', 'IMG_0161.m4v', 'IMG_0162.m4v', 'IMG_0163.m4v', 'IMG_0164.m4v', 'IMG_0167.m4v', 'IMG_0169.m4v', 'IMG_0170.m4v', 'IMG_0171.m4v', 'IMG_0172.m4v', 'IMG_0173.m4v', 'IMG_0174.m4v', 'IMG_0175.m4v', 'IMG_0176.m4v', 'IMG_0177.m4v', 'IMG_0178.m4v', 'IMG_0180.m4v'] \r\nExtracted:['720p_240fps_2.mov', '720p_240fps_3.mov', '720p_240fps_5.mov', '720p_240fps_6.mov', 'GOPR9633.mp4', 'GOPR9634.mp4', 'GOPR9637b.mp4', 'GOPR9638.mp4', 'GOPR9639.mp4', 'GOPR9642.mp4', 'GOPR9647.mp4', 'GOPR9650.mp4', 'GOPR9651.mp4', 'GOPR9653.mp4', 'GOPR9654a.mp4', 'GOPR9654b.mp4', 'GOPR9655a.mp4', 'GOPR9655b.mp4', 'GOPR9656.mp4', 'GOPR9657.mp4', 'GOPR9658.MP4', 'GOPR9660.MP4', 'IMG_0001.mov', 'IMG_0002.mov', 'IMG_0005.mov', 'IMG_0009.mov', 'IMG_0012.mov', 'IMG_0013.mov', 'IMG_0014.mov', 'IMG_0016.mov', 'IMG_0017.mov', 'IMG_0019.mov', 'IMG_0020.mov', 'IMG_0022.mov', 'IMG_0024.mov', 'IMG_0028.mov', 'IMG_0029.mov', 'IMG_0030.mov', 'IMG_0031.mov', 'IMG_0032.mov', 'IMG_0035.mov', 'IMG_0037.mov', 'IMG_0038.mov', 'IMG_0039.mov', 'IMG_0040.mov', 'IMG_0041.mov', 'IMG_0043.mov', 'IMG_0044.mov', 'IMG_0045.mov', 'IMG_0052.mov', 'IMG_0056.mov', 'IMG_0058.mov', 'IMG_0200.MOV', 'IMG_0212.MOV']\r\n```","closed_by":{"login":"iocfinc","id":24967258,"node_id":"MDQ6VXNlcjI0OTY3MjU4","avatar_url":"https://avatars.githubusercontent.com/u/24967258?v=4","gravatar_id":"","url":"https://api.github.com/users/iocfinc","html_url":"https://github.com/iocfinc","followers_url":"https://api.github.com/users/iocfinc/followers","following_url":"https://api.github.com/users/iocfinc/following{/other_user}","gists_url":"https://api.github.com/users/iocfinc/gists{/gist_id}","starred_url":"https://api.github.com/users/iocfinc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iocfinc/subscriptions","organizations_url":"https://api.github.com/users/iocfinc/orgs","repos_url":"https://api.github.com/users/iocfinc/repos","events_url":"https://api.github.com/users/iocfinc/events{/privacy}","received_events_url":"https://api.github.com/users/iocfinc/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/issues/41/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/avinashpaliwal/Super-SloMo/issues/41/timeline","performed_via_github_app":null,"state_reason":"completed"}