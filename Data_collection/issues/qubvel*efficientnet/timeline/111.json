[{"url":"https://api.github.com/repos/qubvel/efficientnet/issues/comments/625882436","html_url":"https://github.com/qubvel/efficientnet/issues/111#issuecomment-625882436","issue_url":"https://api.github.com/repos/qubvel/efficientnet/issues/111","id":625882436,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTg4MjQzNg==","user":{"login":"soham1024","id":42044105,"node_id":"MDQ6VXNlcjQyMDQ0MTA1","avatar_url":"https://avatars.githubusercontent.com/u/42044105?v=4","gravatar_id":"","url":"https://api.github.com/users/soham1024","html_url":"https://github.com/soham1024","followers_url":"https://api.github.com/users/soham1024/followers","following_url":"https://api.github.com/users/soham1024/following{/other_user}","gists_url":"https://api.github.com/users/soham1024/gists{/gist_id}","starred_url":"https://api.github.com/users/soham1024/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soham1024/subscriptions","organizations_url":"https://api.github.com/users/soham1024/orgs","repos_url":"https://api.github.com/users/soham1024/repos","events_url":"https://api.github.com/users/soham1024/events{/privacy}","received_events_url":"https://api.github.com/users/soham1024/received_events","type":"User","site_admin":false},"created_at":"2020-05-08T15:53:03Z","updated_at":"2020-05-08T15:53:03Z","author_association":"NONE","body":"ValueError                                Traceback (most recent call last)\r\n<ipython-input-14-57d89a6da06b> in <module>\r\n     22             input_shape=(512, 512, 3),\r\n     23             weights='noisy-student',\r\n---> 24             include_top=False\r\n     25         ),\r\n     26         L.GlobalAveragePooling2D(),\r\n\r\n/opt/conda/lib/python3.6/site-packages/efficientnet/__init__.py in wrapper(*args, **kwargs)\r\n     55         kwargs['models'] = tfkeras.models\r\n     56         kwargs['utils'] = tfkeras.utils\r\n---> 57         return func(*args, **kwargs)\r\n     58 \r\n     59     return wrapper\r\n\r\n/opt/conda/lib/python3.6/site-packages/efficientnet/model.py in EfficientNetL2(include_top, weights, input_tensor, input_shape, pooling, classes, **kwargs)\r\n    623         input_tensor=input_tensor, input_shape=input_shape,\r\n    624         pooling=pooling, classes=classes,\r\n--> 625         **kwargs\r\n    626     )\r\n    627 \r\n\r\n/opt/conda/lib/python3.6/site-packages/efficientnet/model.py in EfficientNet(width_coefficient, depth_coefficient, default_resolution, dropout_rate, drop_connect_rate, depth_divisor, blocks_args, model_name, include_top, weights, input_tensor, input_shape, pooling, classes, **kwargs)\r\n    386                                   activation=activation,\r\n    387                                   drop_rate=drop_rate,\r\n--> 388                                   prefix=block_prefix)\r\n    389                 block_num += 1\r\n    390 \r\n\r\n/opt/conda/lib/python3.6/site-packages/efficientnet/model.py in mb_conv_block(inputs, block_args, activation, drop_rate, prefix)\r\n    240             x = Dropout(drop_rate,\r\n    241                         noise_shape=(None, 1, 1, 1),\r\n--> 242                         name=prefix + 'drop')(x)\r\n    243         x = layers.add([x, inputs], name=prefix + 'add')\r\n    244 \r\n\r\n/opt/conda/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/base_layer.py in __call__(self, inputs, *args, **kwargs)\r\n    771                     not base_layer_utils.is_in_eager_or_tf_function()):\r\n    772                   with auto_control_deps.AutomaticControlDependencies() as acd:\r\n--> 773                     outputs = call_fn(cast_inputs, *args, **kwargs)\r\n    774                     # Wrap Tensors in `outputs` in `tf.identity` to avoid\r\n    775                     # circular dependencies.\r\n\r\n/opt/conda/lib/python3.6/site-packages/tensorflow_core/python/autograph/impl/api.py in wrapper(*args, **kwargs)\r\n    235       except Exception as e:  # pylint:disable=broad-except\r\n    236         if hasattr(e, 'ag_error_metadata'):\r\n--> 237           raise e.ag_error_metadata.to_exception(e)\r\n    238         else:\r\n    239           raise\r\n\r\nValueError: in converted code:\r\n\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/keras/layers/core.py:183 call\r\n        lambda: array_ops.identity(inputs))\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/keras/utils/tf_utils.py:59 smart_cond\r\n        pred, true_fn=true_fn, false_fn=false_fn, name=name)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/framework/smart_cond.py:59 smart_cond\r\n        name=name)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/util/deprecation.py:507 new_func\r\n        return func(*args, **kwargs)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/ops/control_flow_ops.py:1174 cond\r\n        return cond_v2.cond_v2(pred, true_fn, false_fn, name)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/ops/cond_v2.py:83 cond_v2\r\n        op_return_value=pred)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/framework/func_graph.py:978 func_graph_from_py_func\r\n        func_outputs = python_func(*func_args, **func_kwargs)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/keras/layers/core.py:179 dropped_inputs\r\n        rate=self.rate)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/util/deprecation.py:507 new_func\r\n        return func(*args, **kwargs)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/ops/nn_ops.py:4289 dropout\r\n        return dropout_v2(x, rate, noise_shape=noise_shape, seed=seed, name=name)\r\n    /opt/conda/lib/python3.6/site-packages/tensorflow_core/python/ops/nn_ops.py:4367 dropout_v2\r\n        \"range [0, 1), got %g\" % rate)\r\n\r\n    ValueError: rate must be a scalar tensor or a float in the range [0, 1), got 1","reactions":{"url":"https://api.github.com/repos/qubvel/efficientnet/issues/comments/625882436/reactions","total_count":11,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":11},"performed_via_github_app":null,"event":"commented","actor":{"login":"soham1024","id":42044105,"node_id":"MDQ6VXNlcjQyMDQ0MTA1","avatar_url":"https://avatars.githubusercontent.com/u/42044105?v=4","gravatar_id":"","url":"https://api.github.com/users/soham1024","html_url":"https://github.com/soham1024","followers_url":"https://api.github.com/users/soham1024/followers","following_url":"https://api.github.com/users/soham1024/following{/other_user}","gists_url":"https://api.github.com/users/soham1024/gists{/gist_id}","starred_url":"https://api.github.com/users/soham1024/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soham1024/subscriptions","organizations_url":"https://api.github.com/users/soham1024/orgs","repos_url":"https://api.github.com/users/soham1024/repos","events_url":"https://api.github.com/users/soham1024/events{/privacy}","received_events_url":"https://api.github.com/users/soham1024/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/qubvel/efficientnet/issues/comments/888810539","html_url":"https://github.com/qubvel/efficientnet/issues/111#issuecomment-888810539","issue_url":"https://api.github.com/repos/qubvel/efficientnet/issues/111","id":888810539,"node_id":"IC_kwDOC0sxAM40-iwr","user":{"login":"CodingChapati","id":75537178,"node_id":"MDQ6VXNlcjc1NTM3MTc4","avatar_url":"https://avatars.githubusercontent.com/u/75537178?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingChapati","html_url":"https://github.com/CodingChapati","followers_url":"https://api.github.com/users/CodingChapati/followers","following_url":"https://api.github.com/users/CodingChapati/following{/other_user}","gists_url":"https://api.github.com/users/CodingChapati/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingChapati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingChapati/subscriptions","organizations_url":"https://api.github.com/users/CodingChapati/orgs","repos_url":"https://api.github.com/users/CodingChapati/repos","events_url":"https://api.github.com/users/CodingChapati/events{/privacy}","received_events_url":"https://api.github.com/users/CodingChapati/received_events","type":"User","site_admin":false},"created_at":"2021-07-29T05:17:36Z","updated_at":"2021-07-30T09:21:47Z","author_association":"NONE","body":"I took efn l2  from [xhlulu's github post](https://github.com/xhlulu/keras-noisy-student).\r\nHe has given instructions on how to load the model.\r\nHe has also said :-\r\n\r\n>For tensorflow<=2.3.1, there's a bug that would cause the L2 model to not load correctly. To use it, apply the following hack:\r\n\r\n>```\r\n>model = efn.EfficientNetL2(\r\n > weights=\"./efficientnet-l2_noisy-student_notop.h5\", \r\n > include_top=False,\r\n > drop_connect_rate=0  # the hack\r\n >)\r\n>```\r\n\r\nthe bug is related to the dropout layers in the efn l2.\r\nthis bug actually applies for the latest version too.\r\nso you have to add the `drop_connect_rate=0` line when loading the model.","reactions":{"url":"https://api.github.com/repos/qubvel/efficientnet/issues/comments/888810539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CodingChapati","id":75537178,"node_id":"MDQ6VXNlcjc1NTM3MTc4","avatar_url":"https://avatars.githubusercontent.com/u/75537178?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingChapati","html_url":"https://github.com/CodingChapati","followers_url":"https://api.github.com/users/CodingChapati/followers","following_url":"https://api.github.com/users/CodingChapati/following{/other_user}","gists_url":"https://api.github.com/users/CodingChapati/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingChapati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingChapati/subscriptions","organizations_url":"https://api.github.com/users/CodingChapati/orgs","repos_url":"https://api.github.com/users/CodingChapati/repos","events_url":"https://api.github.com/users/CodingChapati/events{/privacy}","received_events_url":"https://api.github.com/users/CodingChapati/received_events","type":"User","site_admin":false}}]