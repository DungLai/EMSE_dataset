{"url":"https://api.github.com/repos/qubvel/efficientnet/issues/78","repository_url":"https://api.github.com/repos/qubvel/efficientnet","labels_url":"https://api.github.com/repos/qubvel/efficientnet/issues/78/labels{/name}","comments_url":"https://api.github.com/repos/qubvel/efficientnet/issues/78/comments","events_url":"https://api.github.com/repos/qubvel/efficientnet/issues/78/events","html_url":"https://github.com/qubvel/efficientnet/issues/78","id":506253774,"node_id":"MDU6SXNzdWU1MDYyNTM3NzQ=","number":78,"title":"Importing keras backend fails when using preprocess_input","user":{"login":"rstml","id":589231,"node_id":"MDQ6VXNlcjU4OTIzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/589231?v=4","gravatar_id":"","url":"https://api.github.com/users/rstml","html_url":"https://github.com/rstml","followers_url":"https://api.github.com/users/rstml/followers","following_url":"https://api.github.com/users/rstml/following{/other_user}","gists_url":"https://api.github.com/users/rstml/gists{/gist_id}","starred_url":"https://api.github.com/users/rstml/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rstml/subscriptions","organizations_url":"https://api.github.com/users/rstml/orgs","repos_url":"https://api.github.com/users/rstml/repos","events_url":"https://api.github.com/users/rstml/events{/privacy}","received_events_url":"https://api.github.com/users/rstml/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-10-13T00:07:50Z","updated_at":"2019-10-13T07:24:34Z","closed_at":"2019-10-13T07:24:34Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to use `efficientnet.model.preprocess_input` as `ImageDataGenerator(preprocessing_function=preprocess_input, ...)`. However, getting following error:\r\n\r\n```\r\n~/.virtualenvs/venv1/lib/python3.7/site-packages/keras_applications/imagenet_utils.py in preprocess_input(x, data_format, mode, **kwargs)\r\n    184 \r\n    185     if data_format is None:\r\n--> 186         data_format = backend.image_data_format()\r\n    187     if data_format not in {'channels_first', 'channels_last'}:\r\n    188         raise ValueError('Unknown data_format ' + str(data_format))\r\n\r\nAttributeError: 'NoneType' object has no attribute 'image_data_format'\r\n```\r\n\r\nSymptoms look very similar to keras-team/keras-applications#54 and it seems that solution can be also similar to https://github.com/keras-team/keras-applications/issues/54#issuecomment-445129490_ , i.e. replacing `keras_applications` with `keras.applications` here:\r\nhttps://github.com/qubvel/efficientnet/blob/91366f5101270f505c982cfa125fefc982986bf1/efficientnet/model.py#L39","closed_by":{"login":"rstml","id":589231,"node_id":"MDQ6VXNlcjU4OTIzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/589231?v=4","gravatar_id":"","url":"https://api.github.com/users/rstml","html_url":"https://github.com/rstml","followers_url":"https://api.github.com/users/rstml/followers","following_url":"https://api.github.com/users/rstml/following{/other_user}","gists_url":"https://api.github.com/users/rstml/gists{/gist_id}","starred_url":"https://api.github.com/users/rstml/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rstml/subscriptions","organizations_url":"https://api.github.com/users/rstml/orgs","repos_url":"https://api.github.com/users/rstml/repos","events_url":"https://api.github.com/users/rstml/events{/privacy}","received_events_url":"https://api.github.com/users/rstml/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/qubvel/efficientnet/issues/78/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/qubvel/efficientnet/issues/78/timeline","performed_via_github_app":null,"state_reason":"completed"}