[{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/808856943","html_url":"https://github.com/gjy3035/C-3-Framework/issues/105#issuecomment-808856943","issue_url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/105","id":808856943,"node_id":"MDEyOklzc3VlQ29tbWVudDgwODg1Njk0Mw==","user":{"login":"feixuedudiao","id":1230847,"node_id":"MDQ6VXNlcjEyMzA4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1230847?v=4","gravatar_id":"","url":"https://api.github.com/users/feixuedudiao","html_url":"https://github.com/feixuedudiao","followers_url":"https://api.github.com/users/feixuedudiao/followers","following_url":"https://api.github.com/users/feixuedudiao/following{/other_user}","gists_url":"https://api.github.com/users/feixuedudiao/gists{/gist_id}","starred_url":"https://api.github.com/users/feixuedudiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feixuedudiao/subscriptions","organizations_url":"https://api.github.com/users/feixuedudiao/orgs","repos_url":"https://api.github.com/users/feixuedudiao/repos","events_url":"https://api.github.com/users/feixuedudiao/events{/privacy}","received_events_url":"https://api.github.com/users/feixuedudiao/received_events","type":"User","site_admin":false},"created_at":"2021-03-28T06:58:18Z","updated_at":"2021-03-28T06:58:18Z","author_association":"NONE","body":"我也遇到这样的问题，需要对test部分数据做Padding，保持crop_image和crop_den在每次验证时stack到一起。","reactions":{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/808856943/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"feixuedudiao","id":1230847,"node_id":"MDQ6VXNlcjEyMzA4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1230847?v=4","gravatar_id":"","url":"https://api.github.com/users/feixuedudiao","html_url":"https://github.com/feixuedudiao","followers_url":"https://api.github.com/users/feixuedudiao/followers","following_url":"https://api.github.com/users/feixuedudiao/following{/other_user}","gists_url":"https://api.github.com/users/feixuedudiao/gists{/gist_id}","starred_url":"https://api.github.com/users/feixuedudiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feixuedudiao/subscriptions","organizations_url":"https://api.github.com/users/feixuedudiao/orgs","repos_url":"https://api.github.com/users/feixuedudiao/repos","events_url":"https://api.github.com/users/feixuedudiao/events{/privacy}","received_events_url":"https://api.github.com/users/feixuedudiao/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/870216900","html_url":"https://github.com/gjy3035/C-3-Framework/issues/105#issuecomment-870216900","issue_url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/105","id":870216900,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MDIxNjkwMA==","user":{"login":"liuliu96","id":49831356,"node_id":"MDQ6VXNlcjQ5ODMxMzU2","avatar_url":"https://avatars.githubusercontent.com/u/49831356?v=4","gravatar_id":"","url":"https://api.github.com/users/liuliu96","html_url":"https://github.com/liuliu96","followers_url":"https://api.github.com/users/liuliu96/followers","following_url":"https://api.github.com/users/liuliu96/following{/other_user}","gists_url":"https://api.github.com/users/liuliu96/gists{/gist_id}","starred_url":"https://api.github.com/users/liuliu96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuliu96/subscriptions","organizations_url":"https://api.github.com/users/liuliu96/orgs","repos_url":"https://api.github.com/users/liuliu96/repos","events_url":"https://api.github.com/users/liuliu96/events{/privacy}","received_events_url":"https://api.github.com/users/liuliu96/received_events","type":"User","site_admin":false},"created_at":"2021-06-29T04:13:24Z","updated_at":"2021-06-29T04:13:24Z","author_association":"NONE","body":"> 我也遇到这样的问题，需要对test部分数据做Padding，保持crop_image和crop_den在每次验证时stack到一起。\r\n\r\n请问大佬在哪做padding呀\r\n","reactions":{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/870216900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liuliu96","id":49831356,"node_id":"MDQ6VXNlcjQ5ODMxMzU2","avatar_url":"https://avatars.githubusercontent.com/u/49831356?v=4","gravatar_id":"","url":"https://api.github.com/users/liuliu96","html_url":"https://github.com/liuliu96","followers_url":"https://api.github.com/users/liuliu96/followers","following_url":"https://api.github.com/users/liuliu96/following{/other_user}","gists_url":"https://api.github.com/users/liuliu96/gists{/gist_id}","starred_url":"https://api.github.com/users/liuliu96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuliu96/subscriptions","organizations_url":"https://api.github.com/users/liuliu96/orgs","repos_url":"https://api.github.com/users/liuliu96/repos","events_url":"https://api.github.com/users/liuliu96/events{/privacy}","received_events_url":"https://api.github.com/users/liuliu96/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/950126968","html_url":"https://github.com/gjy3035/C-3-Framework/issues/105#issuecomment-950126968","issue_url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/105","id":950126968,"node_id":"IC_kwDOCbOvls44ocl4","user":{"login":"BoltenWang-Meta","id":77950065,"node_id":"MDQ6VXNlcjc3OTUwMDY1","avatar_url":"https://avatars.githubusercontent.com/u/77950065?v=4","gravatar_id":"","url":"https://api.github.com/users/BoltenWang-Meta","html_url":"https://github.com/BoltenWang-Meta","followers_url":"https://api.github.com/users/BoltenWang-Meta/followers","following_url":"https://api.github.com/users/BoltenWang-Meta/following{/other_user}","gists_url":"https://api.github.com/users/BoltenWang-Meta/gists{/gist_id}","starred_url":"https://api.github.com/users/BoltenWang-Meta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BoltenWang-Meta/subscriptions","organizations_url":"https://api.github.com/users/BoltenWang-Meta/orgs","repos_url":"https://api.github.com/users/BoltenWang-Meta/repos","events_url":"https://api.github.com/users/BoltenWang-Meta/events{/privacy}","received_events_url":"https://api.github.com/users/BoltenWang-Meta/received_events","type":"User","site_admin":false},"created_at":"2021-10-23T09:57:57Z","updated_at":"2021-10-23T09:57:57Z","author_association":"NONE","body":"是因为MCNN最后的4倍上采样，如果输入图像尺寸不是4的倍数的话gt和pred尺寸不一样，可以这样更改：\r\ndef get_min_size(self, batch):\r\n        min_ht = 1e5\r\n        min_wd = 1e5\r\n        for i_sample in batch:\r\n            _, ht, wd = i_sample.shape\r\n            if ht < min_ht:\r\n                min_ht = ht\r\n            if wd < min_wd:\r\n                min_wd = wd\r\n        if min_ht % 4 != 0:\r\n            min_ht = (min_ht // 4) * 4\r\n        if min_wd % 4 != 0:\r\n            min_wd = (min_wd // 4) * 4\r\n        return min_ht, min_wd","reactions":{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/950126968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BoltenWang-Meta","id":77950065,"node_id":"MDQ6VXNlcjc3OTUwMDY1","avatar_url":"https://avatars.githubusercontent.com/u/77950065?v=4","gravatar_id":"","url":"https://api.github.com/users/BoltenWang-Meta","html_url":"https://github.com/BoltenWang-Meta","followers_url":"https://api.github.com/users/BoltenWang-Meta/followers","following_url":"https://api.github.com/users/BoltenWang-Meta/following{/other_user}","gists_url":"https://api.github.com/users/BoltenWang-Meta/gists{/gist_id}","starred_url":"https://api.github.com/users/BoltenWang-Meta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BoltenWang-Meta/subscriptions","organizations_url":"https://api.github.com/users/BoltenWang-Meta/orgs","repos_url":"https://api.github.com/users/BoltenWang-Meta/repos","events_url":"https://api.github.com/users/BoltenWang-Meta/events{/privacy}","received_events_url":"https://api.github.com/users/BoltenWang-Meta/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/952475655","html_url":"https://github.com/gjy3035/C-3-Framework/issues/105#issuecomment-952475655","issue_url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/105","id":952475655,"node_id":"IC_kwDOCbOvls44xaAH","user":{"login":"d888999","id":61097352,"node_id":"MDQ6VXNlcjYxMDk3MzUy","avatar_url":"https://avatars.githubusercontent.com/u/61097352?v=4","gravatar_id":"","url":"https://api.github.com/users/d888999","html_url":"https://github.com/d888999","followers_url":"https://api.github.com/users/d888999/followers","following_url":"https://api.github.com/users/d888999/following{/other_user}","gists_url":"https://api.github.com/users/d888999/gists{/gist_id}","starred_url":"https://api.github.com/users/d888999/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d888999/subscriptions","organizations_url":"https://api.github.com/users/d888999/orgs","repos_url":"https://api.github.com/users/d888999/repos","events_url":"https://api.github.com/users/d888999/events{/privacy}","received_events_url":"https://api.github.com/users/d888999/received_events","type":"User","site_admin":false},"created_at":"2021-10-27T02:11:18Z","updated_at":"2021-10-27T02:12:03Z","author_association":"NONE","body":"UserWarning: Using a target size (torch.Size([1, 768, 1024])) that is different to the input size (torch.Size([1, 1, 768, 1024])). This will likely lead to incorrect results due to broadcasting. Please ensure they have the same size.\r\n  return F.mse_loss(input, target, reduction=self.reduction)\r\n/home/c404/data1/zhangjiaxing/.conda/envs/py37/lib/python3.7/site-packages/torch/nn/modules/loss.py:431: UserWarning: Using a target size (torch.Size([1, 683, 1024])) that is different to the input size (torch.Size([1, 1, 680, 1024])). This will likely lead to incorrect results due to broadcasting. Please ensure they have the same size.\r\n  return F.mse_loss(input, target, reduction=self.reduction)\r\nTraceback (most recent call last):\r\n  File \"/home/c404/data1/zhangjiaxing/Framework/C-3-Framework/train.py\", line 60, in <module>\r\n    cc_trainer.forward()\r\n  File \"/home/c404/data1/zhangjiaxing/Framework/C-3-Framework/trainer.py\", line 64, in forward\r\n    self.train()\r\n  File \"/home/c404/data1/zhangjiaxing/Framework/C-3-Framework/trainer.py\", line 91, in train\r\n    pred_map = self.net(img, gt_map)\r\n  File \"/home/c404/data1/zhangjiaxing/.conda/envs/py37/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 541, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/c404/data1/zhangjiaxing/Framework/C-3-Framework/models/CC.py\", line 44, in forward\r\n    self.loss_mse = self.build_loss(density_map, gt_map)\r\n  File \"/home/c404/data1/zhangjiaxing/Framework/C-3-Framework/models/CC.py\", line 49, in build_loss\r\n    loss_mse = self.loss_mse_fn(density_map, gt_data)\r\n  File \"/home/c404/data1/zhangjiaxing/.conda/envs/py37/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 541, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/c404/data1/zhangjiaxing/.conda/envs/py37/lib/python3.7/site-packages/torch/nn/modules/loss.py\", line 431, in forward\r\n    return F.mse_loss(input, target, reduction=self.reduction)\r\n  File \"/home/c404/data1/zhangjiaxing/.conda/envs/py37/lib/python3.7/site-packages/torch/nn/functional.py\", line 2203, in mse_loss\r\n    expanded_input, expanded_target = torch.broadcast_tensors(input, target)\r\n  File \"/home/c404/data1/zhangjiaxing/.conda/envs/py37/lib/python3.7/site-packages/torch/functional.py\", line 52, in broadcast_tensors\r\n    return torch._C._VariableFunctions.broadcast_tensors(tensors)\r\nRuntimeError: The size of tensor a (680) must match the size of tensor b (683) at non-singleton dimension 2\r\n试了试还是不行","reactions":{"url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/comments/952475655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d888999","id":61097352,"node_id":"MDQ6VXNlcjYxMDk3MzUy","avatar_url":"https://avatars.githubusercontent.com/u/61097352?v=4","gravatar_id":"","url":"https://api.github.com/users/d888999","html_url":"https://github.com/d888999","followers_url":"https://api.github.com/users/d888999/followers","following_url":"https://api.github.com/users/d888999/following{/other_user}","gists_url":"https://api.github.com/users/d888999/gists{/gist_id}","starred_url":"https://api.github.com/users/d888999/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d888999/subscriptions","organizations_url":"https://api.github.com/users/d888999/orgs","repos_url":"https://api.github.com/users/d888999/repos","events_url":"https://api.github.com/users/d888999/events{/privacy}","received_events_url":"https://api.github.com/users/d888999/received_events","type":"User","site_admin":false}},{"id":5580145622,"node_id":"CE_lADOCbOvls4yCk3ozwAAAAFMmkPW","url":"https://api.github.com/repos/gjy3035/C-3-Framework/issues/events/5580145622","actor":{"login":"nobody-cheng","id":34908468,"node_id":"MDQ6VXNlcjM0OTA4NDY4","avatar_url":"https://avatars.githubusercontent.com/u/34908468?v=4","gravatar_id":"","url":"https://api.github.com/users/nobody-cheng","html_url":"https://github.com/nobody-cheng","followers_url":"https://api.github.com/users/nobody-cheng/followers","following_url":"https://api.github.com/users/nobody-cheng/following{/other_user}","gists_url":"https://api.github.com/users/nobody-cheng/gists{/gist_id}","starred_url":"https://api.github.com/users/nobody-cheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nobody-cheng/subscriptions","organizations_url":"https://api.github.com/users/nobody-cheng/orgs","repos_url":"https://api.github.com/users/nobody-cheng/repos","events_url":"https://api.github.com/users/nobody-cheng/events{/privacy}","received_events_url":"https://api.github.com/users/nobody-cheng/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-11-08T03:16:31Z","state_reason":null,"performed_via_github_app":null}]