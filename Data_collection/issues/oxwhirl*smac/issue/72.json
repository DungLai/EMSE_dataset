{"url":"https://api.github.com/repos/oxwhirl/smac/issues/72","repository_url":"https://api.github.com/repos/oxwhirl/smac","labels_url":"https://api.github.com/repos/oxwhirl/smac/issues/72/labels{/name}","comments_url":"https://api.github.com/repos/oxwhirl/smac/issues/72/comments","events_url":"https://api.github.com/repos/oxwhirl/smac/issues/72/events","html_url":"https://github.com/oxwhirl/smac/issues/72","id":906984952,"node_id":"MDU6SXNzdWU5MDY5ODQ5NTI=","number":72,"title":"Bug in Reward function","user":{"login":"hepengli","id":51325455,"node_id":"MDQ6VXNlcjUxMzI1NDU1","avatar_url":"https://avatars.githubusercontent.com/u/51325455?v=4","gravatar_id":"","url":"https://api.github.com/users/hepengli","html_url":"https://github.com/hepengli","followers_url":"https://api.github.com/users/hepengli/followers","following_url":"https://api.github.com/users/hepengli/following{/other_user}","gists_url":"https://api.github.com/users/hepengli/gists{/gist_id}","starred_url":"https://api.github.com/users/hepengli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hepengli/subscriptions","organizations_url":"https://api.github.com/users/hepengli/orgs","repos_url":"https://api.github.com/users/hepengli/repos","events_url":"https://api.github.com/users/hepengli/events{/privacy}","received_events_url":"https://api.github.com/users/hepengli/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-05-31T02:40:50Z","updated_at":"2021-07-28T03:53:20Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I found a bug in the reward function in the file \"./env/starcraft2/starcraft2.py\", line 729. The bug is that when the enemies heal or regenerate shield, the allies will receive rewards. The location of the bug is in the function \"reward_battle(self)\", Line 729:\r\n\r\n<img width=\"633\" alt=\"image\" src=\"https://user-images.githubusercontent.com/51325455/123708272-20cd6800-d839-11eb-80da-d0ded5cef675.png\">\r\n\r\nIn Line 729, the argument \"delta_enemy\" is negative when the enemy heals or regenerates shield. However, Line 729 uses abs() to convert \"delta_enemy + delta_deaths\" to a positive reward. This means the allies are rewarded when the enemy heals.\r\n\r\nOne consequence of this problem is that the allies may only learn to hurt the enemies but never kill them so that they can receive rewards when the enemies heal afterwards. In that case, a policy can learn to increase rewards but never win the game.\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/oxwhirl/smac/issues/72/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/oxwhirl/smac/issues/72/timeline","performed_via_github_app":null,"state_reason":null}