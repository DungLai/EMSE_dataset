{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1877","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1877/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1877/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1877/events","html_url":"https://github.com/mlflow/mlflow/issues/1877","id":498123324,"node_id":"MDU6SXNzdWU0OTgxMjMzMjQ=","number":1877,"title":"[BUG] Mlflow models serve not not working on windows 8.1 ","user":{"login":"SaadAhmed96","id":30757857,"node_id":"MDQ6VXNlcjMwNzU3ODU3","avatar_url":"https://avatars.githubusercontent.com/u/30757857?v=4","gravatar_id":"","url":"https://api.github.com/users/SaadAhmed96","html_url":"https://github.com/SaadAhmed96","followers_url":"https://api.github.com/users/SaadAhmed96/followers","following_url":"https://api.github.com/users/SaadAhmed96/following{/other_user}","gists_url":"https://api.github.com/users/SaadAhmed96/gists{/gist_id}","starred_url":"https://api.github.com/users/SaadAhmed96/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SaadAhmed96/subscriptions","organizations_url":"https://api.github.com/users/SaadAhmed96/orgs","repos_url":"https://api.github.com/users/SaadAhmed96/repos","events_url":"https://api.github.com/users/SaadAhmed96/events{/privacy}","received_events_url":"https://api.github.com/users/SaadAhmed96/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-09-25T08:14:39Z","updated_at":"2019-09-30T23:53:48Z","closed_at":"2019-09-30T23:53:48Z","author_association":"NONE","active_lock_reason":null,"body":"Please fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: 64 bit Windows 8.1 \r\n- **MLflow installed from (source or binary)**: source\r\n- **MLflow version (run ``mlflow --version``)**: 1.0\r\n- **Python version**:  3.7\r\n- **npm version, if running the dev UI**: 6.9.0\r\n- **Exact command to reproduce**: (mlflow) C:\\Users\\Saad>mlflow models serve -m file:///D:/mlflow-master/mlflow-ma\r\nster/mlruns/0/c8cb103be11f4823bafab6bf86241995/artifacts/model -p 1234\r\n\r\n### Describe the problem\r\n\r\nI am trying to serve a model given in examples folder. I am following this [tutorial](https://mlflow.org/docs/latest/tutorial.html).  However, I am unable to serve the model. System info, command that produced the error and the error report are provided below.\r\n\r\n\r\n### Code to reproduce the issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nThis [tutorial ](https://mlflow.org/docs/latest/tutorial.html)can help in reproducing the problem\r\n\r\n\r\n### Other info / logs\r\n(mlflow) C:\\Users\\Saad>mlflow models serve -m file:///D:/mlflow-master/mlflow-ma\r\nster/mlruns/0/c8cb103be11f4823bafab6bf86241995/artifacts/model -p 1234\r\nd:\\anaconda\\envs\\mlflow\\lib\\site-packages\\jinja2\\utils.py:485: DeprecationWarnin\r\ng: Using or importing the ABCs from 'collections' instead of from 'collections.a\r\nbc' is deprecated, and in 3.8 it will stop working\r\n  from collections import MutableMapping\r\nd:\\anaconda\\envs\\mlflow\\lib\\site-packages\\jinja2\\runtime.py:318: DeprecationWarn\r\ning: Using or importing the ABCs from 'collections' instead of from 'collections\r\n.abc' is deprecated, and in 3.8 it will stop working\r\n  from collections import Mapping\r\n2019/09/25 12:42:42 INFO mlflow.models.cli: Selected backend for flavor 'python_\r\nfunction'\r\n2019/09/25 12:42:45 INFO mlflow.projects: === Creating conda environment mlflow-\r\n684f146d22dc8c22cc480b2dfa1335663a7b1c8f ===\r\nWarning: you have pip-installed dependencies in your environment file, but you d\r\no not list pip itself as one of your conda dependencies.  Conda may not use the\r\ncorrect pip to install your packages, and they may end up in the wrong place.  P\r\nlease add an explicit pip dependency.  I'm adding one for you, but still nagging\r\n you.\r\nCollecting package metadata (repodata.json): failed\r\n\r\n# >>>>>>>>>>>>>>>>>>>>>> ERROR REPORT <<<<<<<<<<<<<<<<<<<<<<\r\n\r\n    Traceback (most recent call last):\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 238,\r\nin _load\r\n        repodata_fn=self.repodata_fn)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 588,\r\nin fetch_repodata_remote_request\r\n        raise Response304ContentUnchanged()\r\n    conda.core.subdir_data.Response304ContentUnchanged\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\exceptions.py\", line 1062, in __\r\ncall__\r\n        return func(*args, **kwargs)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda_env\\cli\\main.py\", line 73, in do\r\n_call\r\n        exit_code = getattr(module, func_name)(args, parser)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda_env\\cli\\main_create.py\", line 10\r\n1, in execute\r\n        installer.install(prefix, pkg_specs, args, env)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda_env\\installers\\conda.py\", line 2\r\n7, in install\r\n        unlink_link_transaction = solver.solve_for_transaction(prune=getattr(arg\r\ns, 'prune', False))\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\solve.py\", line 116, in sol\r\nve_for_transaction\r\n        should_retry_solve)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\solve.py\", line 157, in sol\r\nve_for_diff\r\n        force_remove, should_retry_solve)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\solve.py\", line 261, in sol\r\nve_final_state\r\n        ssc = self._collect_all_metadata(ssc)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\common\\io.py\", line 88, in decor\r\nated\r\n        return f(*args, **kwds)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\solve.py\", line 414, in _co\r\nllect_all_metadata\r\n        index, r = self._prepare(prepared_specs)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\solve.py\", line 999, in _pr\r\nepare\r\n        self.subdirs, prepared_specs, self._repodata_fn)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\index.py\", line 214, in get\r\n_reduced_index\r\n        repodata_fn=repodata_fn)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 95, i\r\nn query_all\r\n        result = tuple(concat(executor.map(subdir_query, channel_urls)))\r\n      File \"D:\\Anaconda\\lib\\concurrent\\futures\\_base.py\", line 586, in result_it\r\nerator\r\n        yield fs.pop().result()\r\n      File \"D:\\Anaconda\\lib\\concurrent\\futures\\_base.py\", line 432, in result\r\n        return self.__get_result()\r\n      File \"D:\\Anaconda\\lib\\concurrent\\futures\\_base.py\", line 384, in __get_res\r\nult\r\n        raise self._exception\r\n      File \"D:\\Anaconda\\lib\\concurrent\\futures\\thread.py\", line 57, in run\r\n        result = self.fn(*self.args, **self.kwargs)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 88, i\r\nn <lambda>\r\n        package_ref_or_match_spec))\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 100,\r\nin query\r\n        self.load()\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 164,\r\nin load\r\n        _internal_state = self._load()\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 253,\r\nin _load\r\n        mod_etag_headers.get('_mod'))\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 301,\r\nin _read_local_repdata\r\n        _internal_state = self._process_raw_repodata_str(raw_repodata_str)\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\core\\subdir_data.py\", line 390,\r\nin _process_raw_repodata_str\r\n        conda_packages = {} if context.use_only_tar_bz2 else json_obj.get(\"packa\r\nges.conda\", {})\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda\\base\\context.py\", line 664, in u\r\nse_only_tar_bz2\r\n        import conda_package_handling.api\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda_package_handling\\api.py\", line 1\r\n2, in <module>\r\n        from .tarball import CondaTarBZ2 as _CondaTarBZ2, libarchive_enabled\r\n      File \"D:\\Anaconda\\lib\\site-packages\\conda_package_handling\\tarball.py\", li\r\nne 11, in <module>\r\n        import libarchive\r\n      File \"D:\\Anaconda\\lib\\site-packages\\libarchive\\__init__.py\", line 1, in <m\r\nodule>\r\n        from .entry import ArchiveEntry\r\n      File \"D:\\Anaconda\\lib\\site-packages\\libarchive\\entry.py\", line 6, in <modu\r\nle>\r\n        from . import ffi\r\n      File \"D:\\Anaconda\\lib\\site-packages\\libarchive\\ffi.py\", line 27, in <modul\r\ne>\r\n        libarchive = ctypes.cdll.LoadLibrary(libarchive_path)\r\n      File \"D:\\Anaconda\\lib\\ctypes\\__init__.py\", line 434, in LoadLibrary\r\n        return self._dlltype(name)\r\n      File \"D:\\Anaconda\\lib\\ctypes\\__init__.py\", line 356, in __init__\r\n        self._handle = _dlopen(self._name, mode)\r\n    TypeError: LoadLibrary() argument 1 must be str, not None\r\n\r\n`$ D:\\Anaconda\\Scripts\\conda-env-script.py create -n mlflow-684f146d22dc8c22cc48\r\n0b2dfa1335663a7b1c8f --file D:\\mlflow-master\\mlflow-master\\mlruns\\0\\c8cb103be11f\r\n4823bafab6bf86241995\\artifacts\\model\\conda.yaml`\r\n\r\n  environment variables:\r\n                 CIO_TEST=<not set>\r\n  CONDA_AUTO_UPDATE_CONDA=false\r\n        CONDA_DEFAULT_ENV=mlflow\r\n                CONDA_EXE=D:\\Anaconda\\Scripts\\conda.exe\r\n             CONDA_PREFIX=D:\\Anaconda\\envs\\mlflow\r\n           CONDA_PREFIX_1=D:\\Anaconda\r\n    CONDA_PROMPT_MODIFIER=(mlflow)\r\n         CONDA_PYTHON_EXE=D:\\Anaconda\\python.exe\r\n               CONDA_ROOT=D:\\Anaconda\r\n              CONDA_SHLVL=2\r\n         DOCKER_CERT_PATH=C:\\Users\\Saad\\.docker\\machine\\machines\\default\r\nDOCKER_TOOLBOX_INSTALL_PATH=D:\\Docker Toolbox\r\n                 HOMEPATH=\\Users\\Saad\r\n                 NO_PROXY=<set>\r\n                     PATH=D:\\Anaconda\\envs\\mlflow;D:\\Anaconda\\envs\\mlflow\\Librar\r\ny\\mingw-w64\\bin;\r\n                          D:\\Anaconda\\envs\\mlflow\\Library\\usr\\bin;D:\\Anaconda\\en\r\nvs\\mlflow\\Librar\r\n                          y\\bin;D:\\Anaconda\\envs\\mlflow\\Scripts;D:\\Anaconda\\envs\r\n\\mlflow\\bin;D:\\A\r\n                          naconda\\condabin;C:\\Program Files (x86)\\Intel\\iCLS Cli\r\nent;C:\\Program\r\n                          Files\\Intel\\iCLS Client;C:\\WINDOWS\\system32;C:\\WINDOWS\r\n;C:\\WINDOWS\\Syst\r\n                          em32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0;C\r\n:\\Program\r\n                          Files\\Intel\\Intel(R) Management Engine Components\\DAL;\r\nC:\\Program Files\r\n                          (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;\r\nC:\\Program\r\n                          Files\\Intel\\Intel(R) Management Engine Components\\IPT;\r\nC:\\Program Files\r\n                          (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;\r\nD:\\MATLAB\\bin;D:\r\n                          \\JS;D:\\Git\\cmd;C:\\Users\\Saad\\AppData\\Local\\Programs\\Py\r\nthon\\Python36\\Sc\r\n                          ripts;C:\\Users\\Saad\\AppData\\Local\\Programs\\Python\\Pyth\r\non36;C:\\Users\\Sa\r\n                          ad\\AppData\\Roaming\\npm;D:\\BioVinci;D:\\Docker\r\n                          Toolbox;D:\\Anaconda\\lib\\site-\r\n                          packages\\pywin32_system32;D:\\Anaconda\\lib\\site-\r\n                          packages\\pywin32_system32;d:\\anaconda\\envs\\mlflow\\lib\\\r\nsite-\r\n                          packages\\pywin32_system32;d:\\anaconda\\envs\\mlflow\\lib\\\r\nsite-\r\n                          packages\\numpy\\.libs;D:\\Anaconda\\lib\\site-\r\n                          packages\\pywin32_system32;D:\\Anaconda\\lib\\site-\r\n                          packages\\pywin32_system32\r\n             PSMODULEPATH=C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\Modules\\\r\n       REQUESTS_CA_BUNDLE=<not set>\r\n            SSL_CERT_FILE=<not set>\r\n    VBOX_MSI_INSTALL_PATH=C:\\Program Files\\Oracle\\VirtualBox\\\r\n\r\n     active environment : mlflow\r\n    active env location : D:\\Anaconda\\envs\\mlflow\r\n            shell level : 2\r\n       user config file : C:\\Users\\Saad\\.condarc\r\n populated config files : C:\\Users\\Saad\\.condarc\r\n          conda version : 4.7.11\r\n    conda-build version : 3.17.6\r\n         python version : 3.7.1.final.0\r\n       virtual packages :\r\n       base environment : D:\\Anaconda  (writable)\r\n           channel URLs : https://conda.anaconda.org/conda-forge/win-64\r\n                          https://conda.anaconda.org/conda-forge/noarch\r\n                          https://repo.anaconda.com/pkgs/main/win-64\r\n                          https://repo.anaconda.com/pkgs/main/noarch\r\n                          https://repo.anaconda.com/pkgs/r/win-64\r\n                          https://repo.anaconda.com/pkgs/r/noarch\r\n                          https://repo.anaconda.com/pkgs/msys2/win-64\r\n                          https://repo.anaconda.com/pkgs/msys2/noarch\r\n          package cache : D:\\Anaconda\\pkgs\r\n                          C:\\Users\\Saad\\.conda\\pkgs\r\n                          C:\\Users\\Saad\\AppData\\Local\\conda\\conda\\pkgs\r\n       envs directories : D:\\Anaconda\\envs\r\n                          C:\\Users\\Saad\\.conda\\envs\r\n                          C:\\Users\\Saad\\AppData\\Local\\conda\\conda\\envs\r\n               platform : win-64\r\n             user-agent : conda/4.7.11 requests/2.22.0 CPython/3.7.1 Windows/8.1\r\n Windows/6.3.9600\r\n          administrator : False\r\n             netrc file : None\r\n           offline mode : False\r\n\r\n\r\nAn unexpected error has occurred. Conda has prepared the above report.\r\n\r\nIf submitted, this report will be used by core maintainers to improve\r\nfuture releases of conda.\r\nWould you like conda to send this report to the core maintainers?\r\n\r\n[y/N]:\r\nTimeout reached. No report sent.\r\n\r\nTraceback (most recent call last):\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"D:\\Anaconda\\envs\\mlflow\\Scripts\\mlflow.exe\\__main__.py\", line 9, in <mod\r\nule>\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\click\\core.py\", line 764, in _\r\n_call__\r\n    return self.main(*args, **kwargs)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\click\\core.py\", line 717, in m\r\nain\r\n    rv = self.invoke(ctx)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\click\\core.py\", line 1137, in\r\ninvoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\click\\core.py\", line 1137, in\r\ninvoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\click\\core.py\", line 956, in i\r\nnvoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\click\\core.py\", line 555, in i\r\nnvoke\r\n    return callback(*args, **kwargs)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\mlflow\\models\\cli.py\", line 56\r\n, in serve\r\n    host=host)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\mlflow\\pyfunc\\backend.py\", lin\r\ne 77, in serve\r\n    command_env=command_env)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\mlflow\\pyfunc\\backend.py\", lin\r\ne 130, in _execute_in_conda_env\r\n    conda_env_name = _get_or_create_conda_env(conda_env_path, env_id=env_id)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\mlflow\\projects\\__init__.py\",\r\nline 498, in _get_or_create_conda_env\r\n    conda_env_path], stream_output=True)\r\n  File \"d:\\anaconda\\envs\\mlflow\\lib\\site-packages\\mlflow\\utils\\process.py\", line\r\n 38, in exec_cmd\r\n    raise ShellCommandException(\"Non-zero exitcode: %s\" % (exit_code))\r\nmlflow.utils.process.ShellCommandException: Non-zero exitcode: 1\r\n\r\n","closed_by":{"login":"tomasatdatabricks","id":33237569,"node_id":"MDQ6VXNlcjMzMjM3NTY5","avatar_url":"https://avatars.githubusercontent.com/u/33237569?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasatdatabricks","html_url":"https://github.com/tomasatdatabricks","followers_url":"https://api.github.com/users/tomasatdatabricks/followers","following_url":"https://api.github.com/users/tomasatdatabricks/following{/other_user}","gists_url":"https://api.github.com/users/tomasatdatabricks/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasatdatabricks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasatdatabricks/subscriptions","organizations_url":"https://api.github.com/users/tomasatdatabricks/orgs","repos_url":"https://api.github.com/users/tomasatdatabricks/repos","events_url":"https://api.github.com/users/tomasatdatabricks/events{/privacy}","received_events_url":"https://api.github.com/users/tomasatdatabricks/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1877/timeline","performed_via_github_app":null,"state_reason":"completed"}