{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2194","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2194/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2194/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2194/events","html_url":"https://github.com/mlflow/mlflow/issues/2194","id":537017045,"node_id":"MDU6SXNzdWU1MzcwMTcwNDU=","number":2194,"title":"[FR] Python - allow multi-process nested runs","user":{"login":"battlesnake","id":4949354,"node_id":"MDQ6VXNlcjQ5NDkzNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4949354?v=4","gravatar_id":"","url":"https://api.github.com/users/battlesnake","html_url":"https://github.com/battlesnake","followers_url":"https://api.github.com/users/battlesnake/followers","following_url":"https://api.github.com/users/battlesnake/following{/other_user}","gists_url":"https://api.github.com/users/battlesnake/gists{/gist_id}","starred_url":"https://api.github.com/users/battlesnake/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/battlesnake/subscriptions","organizations_url":"https://api.github.com/users/battlesnake/orgs","repos_url":"https://api.github.com/users/battlesnake/repos","events_url":"https://api.github.com/users/battlesnake/events{/privacy}","received_events_url":"https://api.github.com/users/battlesnake/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"},{"id":2022865338,"node_id":"MDU6TGFiZWwyMDIyODY1MzM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/important-longterm","name":"priority/important-longterm","color":"534cb5","default":false,"description":"Important over the long term, but may not be staffed or may need multiple releases to complete."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-12-12T14:37:14Z","updated_at":"2020-09-16T09:46:33Z","closed_at":"2020-09-16T09:46:33Z","author_association":"NONE","active_lock_reason":null,"body":"## Describe the proposal\r\n\r\nThe Python library appears not to allow specifying the run ID of the parent run, when doing nested runs.  It maintains its own internal stack of run IDs instead.\r\n\r\n\r\n### Motivation\r\n\r\nWhen doing hyperparameter training jobs, or multi-stage pipelines with some external orchestrator, this seems to prevent us from being able to nest parts of the same high-level task under it as nested jobs.  Possible short-term hacks include setting the `mlflow.parentRunId` tag explicitly in client code (which documentation advises against).\r\n\r\nThe Java API appears to already allow specifying the `parentRunId` when starting a run, so this work would seem confined to the Python library only.\r\n\r\n### Proposed Changes\r\n\r\nThe only changes I think we'd need would be to the Python library.  Some way to specify the ID of an externall-started run for it to use as the top-level parent-run.  This could be via environment-var (as already used for e.g. auth), and/or an extra method e.g. `set_parent_run_id` which just asserts that the internal job stack is empty, then pushes the given ID onto it.","closed_by":{"login":"battlesnake","id":4949354,"node_id":"MDQ6VXNlcjQ5NDkzNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4949354?v=4","gravatar_id":"","url":"https://api.github.com/users/battlesnake","html_url":"https://github.com/battlesnake","followers_url":"https://api.github.com/users/battlesnake/followers","following_url":"https://api.github.com/users/battlesnake/following{/other_user}","gists_url":"https://api.github.com/users/battlesnake/gists{/gist_id}","starred_url":"https://api.github.com/users/battlesnake/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/battlesnake/subscriptions","organizations_url":"https://api.github.com/users/battlesnake/orgs","repos_url":"https://api.github.com/users/battlesnake/repos","events_url":"https://api.github.com/users/battlesnake/events{/privacy}","received_events_url":"https://api.github.com/users/battlesnake/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2194/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2194/timeline","performed_via_github_app":null,"state_reason":"completed"}