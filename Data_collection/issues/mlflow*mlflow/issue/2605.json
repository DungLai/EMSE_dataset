{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2605","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2605/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2605/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2605/events","html_url":"https://github.com/mlflow/mlflow/issues/2605","id":584140148,"node_id":"MDU6SXNzdWU1ODQxNDAxNDg=","number":2605,"title":"[FR] Project with a Docker environment on a login-protected registry","user":{"login":"classner","id":731387,"node_id":"MDQ6VXNlcjczMTM4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/731387?v=4","gravatar_id":"","url":"https://api.github.com/users/classner","html_url":"https://github.com/classner","followers_url":"https://api.github.com/users/classner/followers","following_url":"https://api.github.com/users/classner/following{/other_user}","gists_url":"https://api.github.com/users/classner/gists{/gist_id}","starred_url":"https://api.github.com/users/classner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/classner/subscriptions","organizations_url":"https://api.github.com/users/classner/orgs","repos_url":"https://api.github.com/users/classner/repos","events_url":"https://api.github.com/users/classner/events{/privacy}","received_events_url":"https://api.github.com/users/classner/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1893057631,"node_id":"MDU6TGFiZWwxODkzMDU3NjMx","url":"https://api.github.com/repos/mlflow/mlflow/labels/Acknowledged","name":"Acknowledged","color":"f9d0c4","default":false,"description":"This issue has been read and acknowledged by the MLflow admins."},{"id":2022848510,"node_id":"MDU6TGFiZWwyMDIyODQ4NTEw","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/projects","name":"area/projects","color":"48eabc","default":false,"description":"MLproject format, project running backends"},{"id":2022851725,"node_id":"MDU6TGFiZWwyMDIyODUxNzI1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docker","name":"area/docker","color":"ede978","default":false,"description":"Docker use anywhere, such as MLprojects and MLmodels"},{"id":2022866842,"node_id":"MDU6TGFiZWwyMDIyODY2ODQy","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/awaiting-more-evidence","name":"priority/awaiting-more-evidence","color":"534cb5","default":false,"description":"Lowest priority. Possibly useful, but not yet enough support to actually get it done."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-03-19T03:37:40Z","updated_at":"2020-05-01T23:21:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi mlflow team,\r\n\r\ncurrently I do not see a way to use a Docker environment project with a login-protected docker registry.\r\n\r\n## Problem\r\n\r\nIn detail, the problem is that the Python `docker` package is used in the function `_docker_build` (https://github.com/mlflow/mlflow/blob/master/mlflow/projects/__init__.py#L754) and the Python docker client does not respect previous user logins to registries. Calling the `login` function of the client requires username and password also does not respect previous user login, and I do not see a (simple) safe way to provide the password. \r\n\r\n## Proposed Changes\r\n\r\nHowever, the docker command line client does respect user logins: the user can run `docker login [theregistry]`, the login data will be stored safely, and the user can work with the registry. I propose to remove the two calls to the Python `docker` package to calls to the shell `docker` client (as this is already done later to actually run the experiment in the docker image). This provides safe and consistent access to registries and removes the dependency to the Python docker package.\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2605/timeline","performed_via_github_app":null,"state_reason":null}