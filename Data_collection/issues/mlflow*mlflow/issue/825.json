{"url":"https://api.github.com/repos/mlflow/mlflow/issues/825","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/825/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/825/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/825/events","html_url":"https://github.com/mlflow/mlflow/issues/825","id":401480182,"node_id":"MDU6SXNzdWU0MDE0ODAxODI=","number":825,"title":"ImportError: No module named matplotlib.pyplot in examples/sklearn_elasticnet_diabetes/train_diabetes.py in mlflow docker image","user":{"login":"jimthompson5802","id":1425269,"node_id":"MDQ6VXNlcjE0MjUyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1425269?v=4","gravatar_id":"","url":"https://api.github.com/users/jimthompson5802","html_url":"https://github.com/jimthompson5802","followers_url":"https://api.github.com/users/jimthompson5802/followers","following_url":"https://api.github.com/users/jimthompson5802/following{/other_user}","gists_url":"https://api.github.com/users/jimthompson5802/gists{/gist_id}","starred_url":"https://api.github.com/users/jimthompson5802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimthompson5802/subscriptions","organizations_url":"https://api.github.com/users/jimthompson5802/orgs","repos_url":"https://api.github.com/users/jimthompson5802/repos","events_url":"https://api.github.com/users/jimthompson5802/events{/privacy}","received_events_url":"https://api.github.com/users/jimthompson5802/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-01-21T19:15:26Z","updated_at":"2019-01-28T19:18:20Z","closed_at":"2019-01-28T19:18:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**:\r\nexamples/sklearn_elasticnet_diabetes/train_diabetes.py\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOS 10.14.2\r\n- **MLflow installed from (source or binary)**: MLflow Docker image\r\n- **MLflow version (run ``mlflow --version``)**: mlflow, version 0.8.2.dev0\r\n- **Python version**: 2.7.15\r\n- **npm version (if running the dev UI):\r\n- **Exact command to reproduce**:\r\n```\r\ndocker run -it --rm mlflow /bin/bash\r\ncd examples/sklearn_elasticnet_diabetes\r\npython train_diabetes.py\r\n```\r\n\r\n### Describe the problem\r\nWhen running this example, received ImportError message indicating missing matplotlib.pyplot\r\n\r\n\r\n### Source code / logs\r\n```\r\nafc1d47c9ac2:python -u /opt/project/examples/sklearn_elasticnet_diabetes/train_diabetes.py\r\nTraceback (most recent call last):\r\n  File \"/opt/project/examples/sklearn_elasticnet_diabetes/train_diabetes.py\", line 26, in <module>\r\n    import matplotlib.pyplot as plt\r\nImportError: No module named matplotlib.pyplot\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\n### Root Cause Analysis\r\nmatplotlib package not part of the Dockerfile to build the image.  Need to add matplotlib to the package requirements file (test-requirements.txt).  \r\n\r\nInitial attempt at adding matplotlib to test-requirements.txt causes the docker image build to fail because install of dependent package (subprocess32)  fails.  Currently researching this.  See attached log file for details: [mlflow_dockerfile_build_failure.txt](https://github.com/mlflow/mlflow/files/2780626/mlflow_dockerfile_build_failure.txt)","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/825/timeline","performed_via_github_app":null,"state_reason":"completed"}