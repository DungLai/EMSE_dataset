{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2122","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2122/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2122/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2122/events","html_url":"https://github.com/mlflow/mlflow/issues/2122","id":525892171,"node_id":"MDU6SXNzdWU1MjU4OTIxNzE=","number":2122,"title":"[BUG] test_examples does not test the current mlflow version","user":{"login":"jdlesage","id":658597,"node_id":"MDQ6VXNlcjY1ODU5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/658597?v=4","gravatar_id":"","url":"https://api.github.com/users/jdlesage","html_url":"https://github.com/jdlesage","followers_url":"https://api.github.com/users/jdlesage/followers","following_url":"https://api.github.com/users/jdlesage/following{/other_user}","gists_url":"https://api.github.com/users/jdlesage/gists{/gist_id}","starred_url":"https://api.github.com/users/jdlesage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdlesage/subscriptions","organizations_url":"https://api.github.com/users/jdlesage/orgs","repos_url":"https://api.github.com/users/jdlesage/repos","events_url":"https://api.github.com/users/jdlesage/events{/privacy}","received_events_url":"https://api.github.com/users/jdlesage/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-11-20T15:51:25Z","updated_at":"2019-12-20T16:53:54Z","closed_at":"2019-12-20T16:53:54Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux\r\n- **MLflow installed from (source or binary)**: Source\r\n- **MLflow version (run ``mlflow --version``)**: master branch\r\n- **Python version**:2.7\r\n- **npm version, if running the dev UI**: N/A\r\n- **Exact command to reproduce**: Run travis python 2.7 tests (example: https://travis-ci.com/criteo-forks/mlflow/jobs/258582717)\r\n\r\n### Describe the problem\r\nThere are some tests that tests mlflow run command (MLProject). The command generates a conda env using the packages description in MLProject.\r\nThe packages (so MLFlow) are downloaded from pypi... So it will not test the current sources.\r\nBut the problem is that if you merge a commit that introduces sql migration, these tests will be broken because the new DB alembic version will not be recognized by the version ran by MLProject cli\r\n\r\n### Code to reproduce issue\r\nOn our forks, we merged the commit related to PR: https://github.com/mlflow/mlflow/pull/2110 that creates a new DB migration. If this PR is rebased on master, the tests will be red.\r\n\r\n### Fix suggestion\r\nA way to fix it is to start a tracking server using the current sources in a fixture of the tests then inject the address to the mlflow run command. In this case, they will not have anymore access to the DB with the version from pypi. Wdyt ?","closed_by":{"login":"jdlesage","id":658597,"node_id":"MDQ6VXNlcjY1ODU5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/658597?v=4","gravatar_id":"","url":"https://api.github.com/users/jdlesage","html_url":"https://github.com/jdlesage","followers_url":"https://api.github.com/users/jdlesage/followers","following_url":"https://api.github.com/users/jdlesage/following{/other_user}","gists_url":"https://api.github.com/users/jdlesage/gists{/gist_id}","starred_url":"https://api.github.com/users/jdlesage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdlesage/subscriptions","organizations_url":"https://api.github.com/users/jdlesage/orgs","repos_url":"https://api.github.com/users/jdlesage/repos","events_url":"https://api.github.com/users/jdlesage/events{/privacy}","received_events_url":"https://api.github.com/users/jdlesage/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2122/timeline","performed_via_github_app":null,"state_reason":"completed"}