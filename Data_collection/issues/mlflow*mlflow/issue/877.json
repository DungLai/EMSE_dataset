{"url":"https://api.github.com/repos/mlflow/mlflow/issues/877","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/877/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/877/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/877/events","html_url":"https://github.com/mlflow/mlflow/issues/877","id":407330104,"node_id":"MDU6SXNzdWU0MDczMzAxMDQ=","number":877,"title":"Unable to log param","user":{"login":"LeanderK","id":2179853,"node_id":"MDQ6VXNlcjIxNzk4NTM=","avatar_url":"https://avatars.githubusercontent.com/u/2179853?v=4","gravatar_id":"","url":"https://api.github.com/users/LeanderK","html_url":"https://github.com/LeanderK","followers_url":"https://api.github.com/users/LeanderK/followers","following_url":"https://api.github.com/users/LeanderK/following{/other_user}","gists_url":"https://api.github.com/users/LeanderK/gists{/gist_id}","starred_url":"https://api.github.com/users/LeanderK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeanderK/subscriptions","organizations_url":"https://api.github.com/users/LeanderK/orgs","repos_url":"https://api.github.com/users/LeanderK/repos","events_url":"https://api.github.com/users/LeanderK/events{/privacy}","received_events_url":"https://api.github.com/users/LeanderK/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-02-06T16:50:41Z","updated_at":"2019-02-08T12:34:11Z","closed_at":"2019-02-08T12:34:11Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **MLflow installed from (source or binary)**: pip\r\n- **MLflow version (run ``mlflow --version``)**: mlflow, version 0.8.2\r\n- **Python version**: Python 3.6.8 :: Anaconda, Inc.\r\n- **npm version (if running the dev UI): - \r\n- **Exact command to reproduce**: (not so easy)\r\n\r\n### Describe the problem\r\nI am unable to log a parameter. I want to log a string-representation of my pytorch-model. It's a larger string. \r\nThe code is:\r\n\r\n```python\r\n    print(model.extra_repr())\r\n    start_time = time()\r\n    import pdb; pdb.set_trace()\r\n    with mlflow.start_run():\r\n        mlflow.log_param(\"cuda\", use_cuda)\r\n        mlflow.log_param(\"architecture\", model.extra_repr())\r\n        mlflow.log_param(\"epochs\", epochs)\r\n        mlflow.log_param(\"in-class\", in_class)\r\n        mlflow.log_param(\"all-classes\", all_classes)\r\n        mlflow.log_param(\"contamination\", contamination)\r\n        mlflow.log_param(\"roc\", \"true\")\r\n        mlflow.log_param(\"batch_size\", batch_size)\r\n        mlflow.log_param(\"optimizer\", optimizer.__class__.__name__)\r\n        mlflow.log_param(\"lr\", opt_lr)\r\n        # for key, value in vars(args).items():\r\n        #    if value is not '':\r\n        #        mlflow.log_param(key, value)\r\n        train_with_roc(model, device, optimizer, epochs, writer, model_dir, train_loader, val_in_loader, val_out_loader,\r\n                       test_in_loader, test_out_loader, max_iter_val=10, max_iter_test=100, do_plot_input_samples=True, use_ddi=False)\r\n        print(\"finished training!\")\r\n    mlflow.end_run()\r\n```\r\nthe type of `mode.extra_rep()` is a string.\r\n\r\ntraceback:\r\n```python\r\nTraceback (most recent call last):\r\n  File \"models/naive-mnist-v2.py\", line 185, in <module>\r\n    print(\"finished training!\")\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/tracking/fluent.py\", line 65, in __exit__\r\n    end_run(status)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/tracking/fluent.py\", line 157, in end_run\r\n    MlflowClient().set_terminated(_active_run_stack[-1].info.run_uuid, status)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/tracking/client.py\", line 213, in set_terminated\r\n    end_time=end_time)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 293, in update_run_info\r\n    run_info = self.get_run(run_uuid).info\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 355, in get_run\r\n    params = self.get_all_params(run_uuid)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 474, in get_all_params\r\n    params.append(self._get_param_from_file(parent_path, param_file))\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 452, in _get_param_from_file\r\n    % param_name)\r\nException: Unexpected data for param 'architecture'. Param recorded more than once\r\nError in atexit._run_exitfuncs:\r\nTraceback (most recent call last):\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/tracking/fluent.py\", line 157, in end_run\r\n    MlflowClient().set_terminated(_active_run_stack[-1].info.run_uuid, status)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/tracking/client.py\", line 213, in set_terminated\r\n    end_time=end_time)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 293, in update_run_info\r\n    run_info = self.get_run(run_uuid).info\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 355, in get_run\r\n    params = self.get_all_params(run_uuid)\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 474, in get_all_params\r\n    params.append(self._get_param_from_file(parent_path, param_file))\r\n  File \"(just a normal path)/lib/python3.6/site-packages/mlflow/store/file_store.py\", line 452, in _get_param_from_file\r\n    % param_name)\r\nException: Unexpected data for param 'architecture'. Param recorded more than once\r\n```","closed_by":{"login":"LeanderK","id":2179853,"node_id":"MDQ6VXNlcjIxNzk4NTM=","avatar_url":"https://avatars.githubusercontent.com/u/2179853?v=4","gravatar_id":"","url":"https://api.github.com/users/LeanderK","html_url":"https://github.com/LeanderK","followers_url":"https://api.github.com/users/LeanderK/followers","following_url":"https://api.github.com/users/LeanderK/following{/other_user}","gists_url":"https://api.github.com/users/LeanderK/gists{/gist_id}","starred_url":"https://api.github.com/users/LeanderK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeanderK/subscriptions","organizations_url":"https://api.github.com/users/LeanderK/orgs","repos_url":"https://api.github.com/users/LeanderK/repos","events_url":"https://api.github.com/users/LeanderK/events{/privacy}","received_events_url":"https://api.github.com/users/LeanderK/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/877/timeline","performed_via_github_app":null,"state_reason":"completed"}