{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1704","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1704/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1704/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1704/events","html_url":"https://github.com/mlflow/mlflow/issues/1704","id":477868790,"node_id":"MDU6SXNzdWU0Nzc4Njg3OTA=","number":1704,"title":"Error initializing backend store when MySQL is used in 1.1.0","user":{"login":"smudiyam","id":8201580,"node_id":"MDQ6VXNlcjgyMDE1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/8201580?v=4","gravatar_id":"","url":"https://api.github.com/users/smudiyam","html_url":"https://github.com/smudiyam","followers_url":"https://api.github.com/users/smudiyam/followers","following_url":"https://api.github.com/users/smudiyam/following{/other_user}","gists_url":"https://api.github.com/users/smudiyam/gists{/gist_id}","starred_url":"https://api.github.com/users/smudiyam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smudiyam/subscriptions","organizations_url":"https://api.github.com/users/smudiyam/orgs","repos_url":"https://api.github.com/users/smudiyam/repos","events_url":"https://api.github.com/users/smudiyam/events{/privacy}","received_events_url":"https://api.github.com/users/smudiyam/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-08-07T11:24:10Z","updated_at":"2020-03-06T22:53:51Z","closed_at":"2020-03-06T22:53:50Z","author_association":"NONE","active_lock_reason":null,"body":"We are using MySQL Ver 8.0.17 as backend in mlflow 1.1.0. When we are trying to start the server with MySQL as backend, we are getting the following error\r\n\r\n2019/08/02 09:43:43 ERROR mlflow.cli: Error initializing backend store  \r\n2019/08/02 09:43:43 ERROR mlflow.cli: Detected out-of-date database schema (found version None, but expected 181f10493468). Take a backup of your database, then run 'mlflow db upgrade <database_uri>' to migrate your database to the latest schema. NOTE: schema migration may result in database downtime - please consult your database's documentation for more detail. \r\n\r\nAt this point, it just created two tables \"alembic_version\" and \"experiments\" in the database. As per error messages, we tried 'mlflow db upgrade'. Then, we are getting the following error\r\n\r\nsqlalchemy.exc.ProgrammingError: (MySQLdb._exceptions.ProgrammingError) (1146, \"Table 'mlflow.runs' doesn't exist\")  \r\n[SQL: ALTER TABLE runs ADD CONSTRAINT runs_lifecycle_stage CHECK (lifecycle_stage IN ('active', 'deleted'))]  \r\n(Background on this error at: http://sqlalche.me/e/f405)   \r\n\r\nHere, upgrade is trying to add constraint to table \"runs\" which is not even created when we started the server. So, we have created \"runs\" table manually and then ran \"upgrade\" command again. Then, it throws similar error for \"metrics\", \"tags\" and other required tables.\r\n\r\nAs a workaround, we have created all missing tables manually and ran \"upgrade\" command successfully and started the server. \r\n","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1704/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1704/timeline","performed_via_github_app":null,"state_reason":"completed"}