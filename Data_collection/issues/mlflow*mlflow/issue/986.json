{"url":"https://api.github.com/repos/mlflow/mlflow/issues/986","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/986/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/986/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/986/events","html_url":"https://github.com/mlflow/mlflow/issues/986","id":419761154,"node_id":"MDU6SXNzdWU0MTk3NjExNTQ=","number":986,"title":"R function `mlflow_log_model()` does not record artifact in expected location.","user":{"login":"jimthompson5802","id":1425269,"node_id":"MDQ6VXNlcjE0MjUyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1425269?v=4","gravatar_id":"","url":"https://api.github.com/users/jimthompson5802","html_url":"https://github.com/jimthompson5802","followers_url":"https://api.github.com/users/jimthompson5802/followers","following_url":"https://api.github.com/users/jimthompson5802/following{/other_user}","gists_url":"https://api.github.com/users/jimthompson5802/gists{/gist_id}","starred_url":"https://api.github.com/users/jimthompson5802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimthompson5802/subscriptions","organizations_url":"https://api.github.com/users/jimthompson5802/orgs","repos_url":"https://api.github.com/users/jimthompson5802/repos","events_url":"https://api.github.com/users/jimthompson5802/events{/privacy}","received_events_url":"https://api.github.com/users/jimthompson5802/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-03-12T01:42:01Z","updated_at":"2019-03-16T02:11:13Z","closed_at":"2019-03-16T02:11:13Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No.  Error occurred in the `examples/r_wine`\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Docker Container running Debian 9\r\n- **MLflow installed from (source or binary)**:  binary\r\n- **MLflow version (run ``mlflow --version``)**:  mlflow 0.8.2 and mlflow 0.8.3 dev\r\n- **Python version**: 3.7.2\r\n- **npm version (if running the dev UI): N/A\r\n- **Exact command to reproduce**: Following install instructions for `examples/r_wine` and running the `train.Rmd`.\r\n\r\n### Describe the problem\r\nWhile the call `mlflow_log_model()` completes w/o any indication of an error, the model artifact is not visible.\r\n\r\n### Root Cause Analysis\r\nFrom what I can tell, this sequence of commands\r\n```\r\ndevtools::install_github(\"mlflow/mlflow\", subdir = \"mlflow/R/mlflow\")\r\nmlflow::mlflow_install()\r\n```\r\nresults in the following situation:\r\n* R package functions installed from the GitHub master branch (0.8.3 dev)\r\n* Python package (current version) installed in conda environment `r-mlflow` is pip install 0.8.2 from pypi.org.\r\n\r\nThe above results in a mixed run-time 0.8.2 and 0.8.3 dev.\r\n\r\nResolution to the issue is to change the install commands to the following\r\n```\r\ndevtools::install_github('mlflow/mlflow/mlflow/R/mlflow@v0.8.2')\r\nmlflow::mlflow_install()\r\n```\r\nresults in the following:\r\n* R package functions installed from GitHub tag 0.8.2\r\n* Python package installed in conda environment `r-mlflow` is pip install 0.8.2 from pypi.org\r\n\r\nThis results in a consistent 0.8.2 run-time for the R environment.  With this setup the `mlflow_log_model()` function works as expected.\r\n\r\n### Proposed Long-term solution\r\nAs implemented `mlflow::install()` will always do a `pip install` for the latest version of `mlflow`.  If `mlflow::mlflow_install()` can be revised to support a version designation, this will help address the above situation.  \r\n\r\nProposed api signature `mlflow::mlflow_install(version='')`, where `version` indicates the version to install:\r\n* `version=''` current version from pypi.org \r\n* `version='X.Y.Z'` install specific version, e.g., '0.8.2' from pypi.org\r\n* `version='master'` install from GitHub `master` branch.\r\n\r\nI've started to look into this possible solution.\r\n\r\n\r\n","closed_by":{"login":"jimthompson5802","id":1425269,"node_id":"MDQ6VXNlcjE0MjUyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1425269?v=4","gravatar_id":"","url":"https://api.github.com/users/jimthompson5802","html_url":"https://github.com/jimthompson5802","followers_url":"https://api.github.com/users/jimthompson5802/followers","following_url":"https://api.github.com/users/jimthompson5802/following{/other_user}","gists_url":"https://api.github.com/users/jimthompson5802/gists{/gist_id}","starred_url":"https://api.github.com/users/jimthompson5802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimthompson5802/subscriptions","organizations_url":"https://api.github.com/users/jimthompson5802/orgs","repos_url":"https://api.github.com/users/jimthompson5802/repos","events_url":"https://api.github.com/users/jimthompson5802/events{/privacy}","received_events_url":"https://api.github.com/users/jimthompson5802/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/986/timeline","performed_via_github_app":null,"state_reason":"completed"}