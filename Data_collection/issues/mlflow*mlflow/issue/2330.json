{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2330","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2330/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2330/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2330/events","html_url":"https://github.com/mlflow/mlflow/issues/2330","id":552899880,"node_id":"MDU6SXNzdWU1NTI4OTk4ODA=","number":2330,"title":"[SETUP-BUG] Table schema in latest_schema.sql gives errors on Microsoft SQL Server","user":{"login":"arees88","id":60096624,"node_id":"MDQ6VXNlcjYwMDk2NjI0","avatar_url":"https://avatars.githubusercontent.com/u/60096624?v=4","gravatar_id":"","url":"https://api.github.com/users/arees88","html_url":"https://github.com/arees88","followers_url":"https://api.github.com/users/arees88/followers","following_url":"https://api.github.com/users/arees88/following{/other_user}","gists_url":"https://api.github.com/users/arees88/gists{/gist_id}","starred_url":"https://api.github.com/users/arees88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arees88/subscriptions","organizations_url":"https://api.github.com/users/arees88/orgs","repos_url":"https://api.github.com/users/arees88/repos","events_url":"https://api.github.com/users/arees88/events{/privacy}","received_events_url":"https://api.github.com/users/arees88/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2020-01-21T14:08:26Z","updated_at":"2020-01-29T18:09:00Z","closed_at":"2020-01-29T05:09:22Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address.\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Ubuntu 18.4 / Microsoft Windows 10 \r\n- **MLflow installed from (source or binary)**:\tsource\r\n- **MLflow version (run ``mlflow --version``)**:\t1.5.0\r\n- **Python version**:\t\t\t\t\t        Python 3.7.3\r\n- **Database version**:\t\t\t\t                Microsoft SQL Azure (RTM) - 12.0.2000.8\t\t\r\n- **Exact command to reproduce**:\r\n\r\nRun the schema from tests/resources/db/latest_schema.sql on Microsoft SQL database.\r\nFor example:\r\n\r\n•\tStart Microsoft SQL Server Management Studio\r\n•\tConnect to the database where mlflow tables should be created\r\n•\tStart SQL editor (New Query)\r\n•\tCut and paste code from latest_schema.sql (or just the code snippet below) into the SQL editor\r\n•\tExecute the SQL\r\n\r\nCREATE TABLE metrics_test (\r\n        key VARCHAR(250) NOT NULL,\r\n        value FLOAT NOT NULL,\r\n        timestamp BIGINT NOT NULL,\r\n        run_uuid VARCHAR(32) NOT NULL,\r\n        step BIGINT DEFAULT '0' NOT NULL,\r\n        is_nan BOOLEAN DEFAULT '0' NOT NULL,\r\n        CONSTRAINT metric_pk PRIMARY KEY (key, value, timestamp, run_uuid, step, is_nan),\r\n        FOREIGN KEY(run_uuid) REFERENCES runs (run_uuid)\r\n)\r\n\r\nErrors encountered are displayed below. \r\n\r\nIssue 1:  Column names:\r\n\r\nkey VARCHAR(250) NOT NULL,\r\nMsg 156, Level 15, State 1, Line 11\r\nIncorrect syntax near the keyword 'key'.\r\n\r\nFix applied:\tUse square brackets for keywords, for example:\r\n\r\n                        [key] VARCHAR(250) NOT NULL,\r\n\r\nIssue 2:  Boolean data type:\r\n\r\nis_nan BOOLEAN DEFAULT '0' NOT NULL,\r\nMsg 2715, Level 16, State 6, Line 90\r\nColumn, parameter, or variable #5: Cannot find data type BOOLEAN.\r\n\r\nFix applied:\tUse data type BIT instead of BOOLEAN, for example:\r\n\r\n                        is_nan BIT DEFAULT '0' NOT NULL,\r\n\r\nAbstract\r\n\r\nThe table schema in tests/resources/db/latest_schema.sql gives errors when Microsoft SQL database is used as the backend store.\r\nWhat database types are supported by mlflow? Is Microsoft SQL Server database supported?\r\nCan we amend the mlflow database schema so it works with Microsoft SQL database?\r\n\r\nAdditional information\r\n\r\nI have successfully installed mlflow version 0.91 in May 2019 but had to amend the table schema first as I was getting syntax errors. I am now trying to install the latest version and still have issues.\r\n\r\nOne of the issues I encountered last year was with 'lifecycle_stage' column being duplicated in two tables, experiments and runs. I can see this has now been corrected in version 1.0. Thank you.\r\n\r\nI am still encountering syntax errors when the table column use SQL reserved words i.e. ‘key’.\r\nIn addition, Microsoft SQL Server does not support the BOOLEAN type.\r\nIs Microsoft SQL database supported as the backend store in mlflow?\r\n","closed_by":{"login":"smurching","id":2358483,"node_id":"MDQ6VXNlcjIzNTg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2358483?v=4","gravatar_id":"","url":"https://api.github.com/users/smurching","html_url":"https://github.com/smurching","followers_url":"https://api.github.com/users/smurching/followers","following_url":"https://api.github.com/users/smurching/following{/other_user}","gists_url":"https://api.github.com/users/smurching/gists{/gist_id}","starred_url":"https://api.github.com/users/smurching/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smurching/subscriptions","organizations_url":"https://api.github.com/users/smurching/orgs","repos_url":"https://api.github.com/users/smurching/repos","events_url":"https://api.github.com/users/smurching/events{/privacy}","received_events_url":"https://api.github.com/users/smurching/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2330/timeline","performed_via_github_app":null,"state_reason":"completed"}