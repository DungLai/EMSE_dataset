{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5698","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/5698/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/5698/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/5698/events","html_url":"https://github.com/mlflow/mlflow/issues/5698","id":1204118218,"node_id":"I_kwDOCB5Jx85HxWLK","number":5698,"title":"urllib3.exceptions.ReadTimeoutError: AWSHTTPConnectionPool","user":{"login":"saichandrapandraju","id":41769919,"node_id":"MDQ6VXNlcjQxNzY5OTE5","avatar_url":"https://avatars.githubusercontent.com/u/41769919?v=4","gravatar_id":"","url":"https://api.github.com/users/saichandrapandraju","html_url":"https://github.com/saichandrapandraju","followers_url":"https://api.github.com/users/saichandrapandraju/followers","following_url":"https://api.github.com/users/saichandrapandraju/following{/other_user}","gists_url":"https://api.github.com/users/saichandrapandraju/gists{/gist_id}","starred_url":"https://api.github.com/users/saichandrapandraju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saichandrapandraju/subscriptions","organizations_url":"https://api.github.com/users/saichandrapandraju/orgs","repos_url":"https://api.github.com/users/saichandrapandraju/repos","events_url":"https://api.github.com/users/saichandrapandraju/events{/privacy}","received_events_url":"https://api.github.com/users/saichandrapandraju/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1893072438,"node_id":"MDU6TGFiZWwxODkzMDcyNDM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/help%20wanted","name":"help wanted","color":"c5def5","default":true,"description":"We would like help from the community to add this support"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-04-14T07:01:03Z","updated_at":"2022-04-21T07:45:13Z","closed_at":"2022-04-21T07:45:13Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nI'm using Minio server as artifact store for logging models. But I'm getting following error while uploading artifacts to Minio - \r\n\r\n```\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/connectionpool.py\", line 449, in _make_request\r\n    six.raise_from(e, None)\r\n  File \"<string>\", line 3, in raise_from\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/connectionpool.py\", line 444, in _make_request\r\n    httplib_response = conn.getresponse()\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/http/client.py\", line 1348, in getresponse\r\n    response.begin()\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/http/client.py\", line 316, in begin\r\n    version, status, reason = self._read_status()\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/http/client.py\", line 277, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/socket.py\", line 669, in readinto\r\n    return self._sock.recv_into(b)\r\nsocket.timeout: timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/httpsession.py\", line 439, in send\r\n    urllib_response = conn.urlopen(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/connectionpool.py\", line 785, in urlopen\r\n    retries = retries.increment(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/util/retry.py\", line 525, in increment\r\n    raise six.reraise(type(error), error, _stacktrace)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/packages/six.py\", line 770, in reraise\r\n    raise value\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/connectionpool.py\", line 451, in _make_request\r\n    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/urllib3/connectionpool.py\", line 340, in _raise_timeout\r\n    raise ReadTimeoutError(\r\nurllib3.exceptions.ReadTimeoutError: AWSHTTPConnectionPool(host='localhost', port=3128): Read timed out. (read timeout=60)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 109, in <module>\r\n    mlflow.log_figure(ax.figure, f\"{explain_files}/{feature_importance_plot}\")\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/tracking/fluent.py\", line 761, in log_figure\r\n    MlflowClient().log_figure(run_id, figure, artifact_file)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/tracking/client.py\", line 1162, in log_figure\r\n    raise TypeError(\"Unsupported figure object type: '{}'\".format(type(figure)))\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/contextlib.py\", line 120, in __exit__\r\n    next(self.gen)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/tracking/client.py\", line 1020, in _log_artifact_helper\r\n    self.log_artifact(run_id, tmp_path, artifact_dir)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/tracking/client.py\", line 955, in log_artifact\r\n    self._tracking_client.log_artifact(run_id, local_path, artifact_path)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/tracking/_tracking_service/client.py\", line 355, in log_artifact\r\n    artifact_repo.log_artifact(local_path, artifact_path)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/store/artifact/s3_artifact_repo.py\", line 124, in log_artifact\r\n    self._upload_file(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/mlflow/store/artifact/s3_artifact_repo.py\", line 117, in _upload_file\r\n    s3_client.upload_file(Filename=local_file, Bucket=bucket, Key=key, ExtraArgs=extra_args)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/boto3/s3/inject.py\", line 131, in upload_file\r\n    return transfer.upload_file(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/boto3/s3/transfer.py\", line 287, in upload_file\r\n    future.result()\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/s3transfer/futures.py\", line 103, in result\r\n    return self._coordinator.result()\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/s3transfer/futures.py\", line 266, in result\r\n    raise self._exception\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/s3transfer/tasks.py\", line 139, in __call__\r\n    return self._execute_main(kwargs)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/s3transfer/tasks.py\", line 162, in _execute_main\r\n    return_value = self._main(**kwargs)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/s3transfer/upload.py\", line 758, in _main\r\n    client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/client.py\", line 415, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/client.py\", line 731, in _make_api_call\r\n    http, parsed_response = self._make_request(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/client.py\", line 751, in _make_request\r\n    return self._endpoint.make_request(operation_model, request_dict)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/endpoint.py\", line 107, in make_request\r\n    return self._send_request(request_dict, operation_model)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/endpoint.py\", line 183, in _send_request\r\n    while self._needs_retry(attempts, operation_model, request_dict,\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/endpoint.py\", line 305, in _needs_retry\r\n    responses = self._event_emitter.emit(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/hooks.py\", line 358, in emit\r\n    return self._emitter.emit(aliased_event_name, **kwargs)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/hooks.py\", line 229, in emit\r\n    return self._emit(event_name, kwargs)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/hooks.py\", line 212, in _emit\r\n    response = handler(**kwargs)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/retryhandler.py\", line 194, in __call__\r\n    if self._checker(**checker_kwargs):\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/retryhandler.py\", line 267, in __call__\r\n    should_retry = self._should_retry(attempt_number, response,\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/retryhandler.py\", line 294, in _should_retry\r\n    return self._checker(attempt_number, response, caught_exception)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/retryhandler.py\", line 333, in __call__\r\n    checker_response = checker(attempt_number, response,\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/retryhandler.py\", line 233, in __call__\r\n    return self._check_caught_exception(\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/retryhandler.py\", line 376, in _check_caught_exception\r\n    raise caught_exception\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/endpoint.py\", line 249, in _do_get_response\r\n    http_response = self._send(request)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/endpoint.py\", line 321, in _send\r\n    return self.http_session.send(request)\r\n  File \"/data/codeapi/miniconda/envs/mlflow-ee9476d22fc77d7d219b7d660f6606ebe40112cb/lib/python3.8/site-packages/botocore/httpsession.py\", line 474, in send\r\n    raise ReadTimeoutError(endpoint_url=request.url, error=e)\r\nbotocore.exceptions.ReadTimeoutError: Read timeout on endpoint URL: \"http://10.156.89.15:9001/mlflow-artifacts/2644e4fddba64407ba08afd0078348ee/artifacts/model/model.pkl\"\r\n```\r\nCould anyone suggest solution for this .. ?","closed_by":{"login":"saichandrapandraju","id":41769919,"node_id":"MDQ6VXNlcjQxNzY5OTE5","avatar_url":"https://avatars.githubusercontent.com/u/41769919?v=4","gravatar_id":"","url":"https://api.github.com/users/saichandrapandraju","html_url":"https://github.com/saichandrapandraju","followers_url":"https://api.github.com/users/saichandrapandraju/followers","following_url":"https://api.github.com/users/saichandrapandraju/following{/other_user}","gists_url":"https://api.github.com/users/saichandrapandraju/gists{/gist_id}","starred_url":"https://api.github.com/users/saichandrapandraju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saichandrapandraju/subscriptions","organizations_url":"https://api.github.com/users/saichandrapandraju/orgs","repos_url":"https://api.github.com/users/saichandrapandraju/repos","events_url":"https://api.github.com/users/saichandrapandraju/events{/privacy}","received_events_url":"https://api.github.com/users/saichandrapandraju/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/5698/timeline","performed_via_github_app":null,"state_reason":"completed"}