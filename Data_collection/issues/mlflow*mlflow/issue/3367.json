{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3367","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/3367/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/3367/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/3367/events","html_url":"https://github.com/mlflow/mlflow/issues/3367","id":689315495,"node_id":"MDU6SXNzdWU2ODkzMTU0OTU=","number":3367,"title":"[BUG] Autologging metrics for object detection in Tensorflow 2.x","user":{"login":"NithyaMogane-TomTom","id":62301809,"node_id":"MDQ6VXNlcjYyMzAxODA5","avatar_url":"https://avatars.githubusercontent.com/u/62301809?v=4","gravatar_id":"","url":"https://api.github.com/users/NithyaMogane-TomTom","html_url":"https://github.com/NithyaMogane-TomTom","followers_url":"https://api.github.com/users/NithyaMogane-TomTom/followers","following_url":"https://api.github.com/users/NithyaMogane-TomTom/following{/other_user}","gists_url":"https://api.github.com/users/NithyaMogane-TomTom/gists{/gist_id}","starred_url":"https://api.github.com/users/NithyaMogane-TomTom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NithyaMogane-TomTom/subscriptions","organizations_url":"https://api.github.com/users/NithyaMogane-TomTom/orgs","repos_url":"https://api.github.com/users/NithyaMogane-TomTom/repos","events_url":"https://api.github.com/users/NithyaMogane-TomTom/events{/privacy}","received_events_url":"https://api.github.com/users/NithyaMogane-TomTom/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2022848043,"node_id":"MDU6TGFiZWwyMDIyODQ4MDQz","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/models","name":"area/models","color":"48eabc","default":false,"description":"MLmodel format, model serialization/deserialization, flavors"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"}],"state":"open","locked":false,"assignee":{"login":"apurva-koti","id":51172624,"node_id":"MDQ6VXNlcjUxMTcyNjI0","avatar_url":"https://avatars.githubusercontent.com/u/51172624?v=4","gravatar_id":"","url":"https://api.github.com/users/apurva-koti","html_url":"https://github.com/apurva-koti","followers_url":"https://api.github.com/users/apurva-koti/followers","following_url":"https://api.github.com/users/apurva-koti/following{/other_user}","gists_url":"https://api.github.com/users/apurva-koti/gists{/gist_id}","starred_url":"https://api.github.com/users/apurva-koti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apurva-koti/subscriptions","organizations_url":"https://api.github.com/users/apurva-koti/orgs","repos_url":"https://api.github.com/users/apurva-koti/repos","events_url":"https://api.github.com/users/apurva-koti/events{/privacy}","received_events_url":"https://api.github.com/users/apurva-koti/received_events","type":"User","site_admin":false},"assignees":[{"login":"apurva-koti","id":51172624,"node_id":"MDQ6VXNlcjUxMTcyNjI0","avatar_url":"https://avatars.githubusercontent.com/u/51172624?v=4","gravatar_id":"","url":"https://api.github.com/users/apurva-koti","html_url":"https://github.com/apurva-koti","followers_url":"https://api.github.com/users/apurva-koti/followers","following_url":"https://api.github.com/users/apurva-koti/following{/other_user}","gists_url":"https://api.github.com/users/apurva-koti/gists{/gist_id}","starred_url":"https://api.github.com/users/apurva-koti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apurva-koti/subscriptions","organizations_url":"https://api.github.com/users/apurva-koti/orgs","repos_url":"https://api.github.com/users/apurva-koti/repos","events_url":"https://api.github.com/users/apurva-koti/events{/privacy}","received_events_url":"https://api.github.com/users/apurva-koti/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2020-08-31T15:58:28Z","updated_at":"2022-01-11T09:10:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Linux Ubuntu 18.04\r\n- **MLflow installed from (source or binary)**: binary\r\n- **MLflow version (run ``mlflow --version``)**: 1.10.0\r\n- **Python version**: 3.7.3\r\n- **Tensorflow version**: 2.2.0\r\n- **npm version, if running the dev UI**:\r\n- **Exact command to reproduce**: mlflow.tensorflow.autolog()\r\n\r\n### Describe the problem\r\nWhat I want to do - Log metrics generated by my experiments in tensorflow object detection (using TF2.x API). \r\nWhat happens - metrics are not logged when using mlflow.tensorflow.autolog()\r\nAdditional information - A previous PR https://github.com/mlflow/mlflow/pull/2396 lists the changes required to log metrics for TF Object Detection using TF1.x API. Since, TF1.x uses estimators, changes were made in corresponding patches in tensorflow.py file. However, with TF2.x, estimators are not used anymore. Instead, `train_loop` and `evaluate_continuously` is used for launching an a train (and eval job). You can find related code [here](https://github.com/tensorflow/models/blob/master/research/object_detection/model_main_tf2.py). Using `mlflow.keras.autolog()` didn't work either. \r\n\r\nWhere do the changes need to be made to log metrics when using TF Object Detection 2.x ?\r\n\r\n### Other info / logs\r\nAn mlflow experiment is created correctly and files logged with mlflow.log_artifact() function as expected. Only the metrics are not recorded.\r\n\r\n### Willingness to contribute\r\nThe MLflow Community encourages bug fix contributions. Would you or another member of your organization be willing to contribute a fix for this bug to the MLflow code base?\r\n\r\n- [x ] Yes. I would be willing to contribute a fix for this bug with guidance from the MLflow community.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3367/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/3367/timeline","performed_via_github_app":null,"state_reason":null}