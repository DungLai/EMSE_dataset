{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2347","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2347/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2347/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2347/events","html_url":"https://github.com/mlflow/mlflow/issues/2347","id":555717549,"node_id":"MDU6SXNzdWU1NTU3MTc1NDk=","number":2347,"title":"[FR] Allow deleting child runs when parent runs are deleted","user":{"login":"smurching","id":2358483,"node_id":"MDQ6VXNlcjIzNTg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2358483?v=4","gravatar_id":"","url":"https://api.github.com/users/smurching","html_url":"https://github.com/smurching","followers_url":"https://api.github.com/users/smurching/followers","following_url":"https://api.github.com/users/smurching/following{/other_user}","gists_url":"https://api.github.com/users/smurching/gists{/gist_id}","starred_url":"https://api.github.com/users/smurching/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smurching/subscriptions","organizations_url":"https://api.github.com/users/smurching/orgs","repos_url":"https://api.github.com/users/smurching/repos","events_url":"https://api.github.com/users/smurching/events{/privacy}","received_events_url":"https://api.github.com/users/smurching/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1470945519,"node_id":"MDU6TGFiZWwxNDcwOTQ1NTE5","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/uiux","name":"area/uiux","color":"ede978","default":false,"description":"Front-end, user experience, plotting, JavaScript, JavaScript dev server"},{"id":2022863969,"node_id":"MDU6TGFiZWwyMDIyODYzOTY5","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/important-soon","name":"priority/important-soon","color":"534cb5","default":false,"description":"The issue is worked on by the community currently or will be very soon, ideally in time for the"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-01-27T17:18:20Z","updated_at":"2022-03-28T21:00:22Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"## Describe the proposal\r\nCurrently, users can delete runs from the experiment UI, which leads to a confirmation prompt like:\r\n![image](https://user-images.githubusercontent.com/2358483/73196992-6edeb900-40e5-11ea-97ed-4e79b615bacf.png)\r\n\r\nWhen deleting one or more parent runs (runs with children, as in the screenshot above), we should update this  to allow for deleting both the parents & their child runs, as this is usually the intended behavior. For example, if you run hyperparam tuning, you may generate a parent run to capture e.g. the best accuracy/model generated across all trials, and record the individual trials as child runs of the parent. If you delete the hyperparam tuning run, you likely want to delete all associated child runs (trials) as well.\r\n\r\nWe can implement child-run deletion in JS by searching for runs via a [SearchRuns API request](https://www.mlflow.org/docs/latest/rest-api.html#search-runs) with `filter=\"tags.mlflow.parentRunId = '<parent-uuid>'\"` (may need to iterate over successive pages of runs to ensure we delete all child runs). Note that this will only work for single-level nested runs - for multilevel nested runs (a less common use case), we'd need to recursively search for child runs of the children being deleted, which is likely more expensive server-side than it's worth.\r\n\r\n### Proposed Changes\r\nWe'd need to update:\r\n* [DeleteRunModal](https://github.com/mlflow/mlflow/blob/master/mlflow/server/js/src/components/modals/DeleteRunModal.js) to be able to prompt for deletion of immediate children of the parent run & child runs, if one or more parent runs is selected.\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2347/timeline","performed_via_github_app":null,"state_reason":null}