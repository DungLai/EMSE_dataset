{"url":"https://api.github.com/repos/mlflow/mlflow/issues/4035","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/4035/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/4035/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/4035/events","html_url":"https://github.com/mlflow/mlflow/issues/4035","id":796664838,"node_id":"MDU6SXNzdWU3OTY2NjQ4Mzg=","number":4035,"title":"[BUG]  Unable to create the docker image for the model.","user":{"login":"chandrakumarb","id":72084047,"node_id":"MDQ6VXNlcjcyMDg0MDQ3","avatar_url":"https://avatars.githubusercontent.com/u/72084047?v=4","gravatar_id":"","url":"https://api.github.com/users/chandrakumarb","html_url":"https://github.com/chandrakumarb","followers_url":"https://api.github.com/users/chandrakumarb/followers","following_url":"https://api.github.com/users/chandrakumarb/following{/other_user}","gists_url":"https://api.github.com/users/chandrakumarb/gists{/gist_id}","starred_url":"https://api.github.com/users/chandrakumarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chandrakumarb/subscriptions","organizations_url":"https://api.github.com/users/chandrakumarb/orgs","repos_url":"https://api.github.com/users/chandrakumarb/repos","events_url":"https://api.github.com/users/chandrakumarb/events{/privacy}","received_events_url":"https://api.github.com/users/chandrakumarb/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1041183632,"node_id":"MDU6TGFiZWwxMDQxMTgzNjMy","url":"https://api.github.com/repos/mlflow/mlflow/labels/language/r","name":"language/r","color":"349cd8","default":false,"description":"R APIs and clients"},{"id":2022847714,"node_id":"MDU6TGFiZWwyMDIyODQ3NzE0","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/model-registry","name":"area/model-registry","color":"48eabc","default":false,"description":"Model registry, model registry APIs, and the fluent client calls for model registry"},{"id":2022848043,"node_id":"MDU6TGFiZWwyMDIyODQ4MDQz","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/models","name":"area/models","color":"48eabc","default":false,"description":"MLmodel format, model serialization/deserialization, flavors"},{"id":2022851725,"node_id":"MDU6TGFiZWwyMDIyODUxNzI1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docker","name":"area/docker","color":"ede978","default":false,"description":"Docker use anywhere, such as MLprojects and MLmodels"},{"id":2022860064,"node_id":"MDU6TGFiZWwyMDIyODYwMDY0","url":"https://api.github.com/repos/mlflow/mlflow/labels/integrations/sagemaker","name":"integrations/sagemaker","color":"ffbce5","default":false,"description":"Sagemaker integrations"},{"id":2042304474,"node_id":"MDU6TGFiZWwyMDQyMzA0NDc0","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/build","name":"area/build","color":"48eabc","default":false,"description":"Build and test infrastructure for MLflow"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-01-29T07:53:53Z","updated_at":"2021-02-02T17:49:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md) for additional information about bug reports. For help with debugging your code, please refer to [Stack Overflow](https://stackoverflow.com/questions/tagged/mlflow).\r\n\r\n**Please fill in this bug report template to ensure a timely and thorough response.**\r\n\r\n### Willingness to contribute\r\nThe MLflow Community encourages bug fix contributions. Would you or another member of your organization be willing to contribute a fix for this bug to the MLflow code base?\r\n\r\n- [ ] Yes. I can contribute a fix for this bug independently.\r\n- [ ] Yes. I would be willing to contribute a fix for this bug with guidance from the MLflow community.\r\n- [x] No. I cannot contribute a bug fix at this time.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Amazon Linux 2\r\n- **MLflow installed from (source or binary)**: binary (using pip)\r\n- **MLflow version (run ``mlflow --version``)**: 1.13.1\r\n- **Python version**: 3.8\r\n- **npm version, if running the dev UI**: NA\r\n- **Exact command to reproduce**: mlflow models build-docker -m path_to_mode -n imag_name_to_be created\r\n\r\n### Describe the problem\r\n\r\nI am not able to create the docker image for the model.\r\nI think the problem is the ubuntu repository is being referred for installing and since it is amazon linux apt-get is failing. \r\n\r\n### Code to reproduce issue\r\n\r\nfrom command line:\r\nmlflow models build-docker -m path_to_mode -n imag_name_to_be created\r\n\r\n### Other info / logs\r\n\r\nMLFlow]$ mlflow models build-docker -m \"s3_path\" -n \"model_image_name\"\r\n2021/01/29 12:53:37 INFO mlflow.models.cli: Selected backend for flavor 'python_function'\r\n2021/01/29 12:53:45 INFO mlflow.models.docker_utils: Building docker image with name iris_model_image\r\n/tmp/tmplg3tgz0s/\r\n/tmp/tmplg3tgz0s/model_dir\r\n/tmp/tmplg3tgz0s/model_dir/model\r\n/tmp/tmplg3tgz0s/model_dir/model/MLmodel\r\n/tmp/tmplg3tgz0s/model_dir/model/conda.yaml\r\n/tmp/tmplg3tgz0s/model_dir/model/model.pkl\r\n/tmp/tmplg3tgz0s/Dockerfile\r\nSending build context to Docker daemon  66.56kB\r\n\r\nStep 1/17 : FROM ubuntu:18.04\r\n18.04: Pulling from library/ubuntu\r\nd519e2592276: Already exists\r\nd22d2dfcfa9c: Already exists\r\nb3afe92c540b: Already exists\r\nDigest: sha256:ea188fdc5be9b25ca048f1e882b33f1bc763fb976a8a4fea446b38ed0efcbeba\r\nStatus: Downloaded newer image for ubuntu:18.04\r\n ---> c090eaba6b94\r\nStep 2/17 : RUN apt-get -y update && apt-get install -y --no-install-recommends          wget          curl          nginx          ca-certificates          bzip2          build-essential          cmake          openjdk-8-jdk          git-core          maven     && rm -rf /var/lib/apt/lists/*\r\n ---> Running in b35b1fb03971\r\nErr:1 http://security.ubuntu.com/ubuntu bionic-security InRelease\r\n  Temporary failure resolving 'security.ubuntu.com'\r\nErr:2 http://archive.ubuntu.com/ubuntu bionic InRelease\r\n  Temporary failure resolving 'archive.ubuntu.com'\r\nErr:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease\r\n  Temporary failure resolving 'archive.ubuntu.com'\r\nErr:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease\r\n  Temporary failure resolving 'archive.ubuntu.com'\r\nReading package lists...\r\nW: Failed to fetch http://archive.ubuntu.com/ubuntu/dists/bionic/InRelease  Temporary failure resolving 'archive.ubuntu.com'\r\nW: Failed to fetch http://archive.ubuntu.com/ubuntu/dists/bionic-updates/InRelease  Temporary failure resolving 'archive.ubuntu.com'\r\nW: Failed to fetch http://archive.ubuntu.com/ubuntu/dists/bionic-backports/InRelease  Temporary failure resolving 'archive.ubuntu.com'\r\nW: Failed to fetch http://security.ubuntu.com/ubuntu/dists/bionic-security/InRelease  Temporary failure resolving 'security.ubuntu.com'\r\nW: Some index files failed to download. They have been ignored, or old ones used instead.\r\nReading package lists...\r\nBuilding dependency tree...\r\nReading state information...\r\nPackage ca-certificates is not available, but is referred to by another package.\r\nThis may mean that the package is missing, has been obsoleted, or\r\nis only available from another source\r\n\r\nE: Unable to locate package wget\r\nE: Unable to locate package curl\r\nE: Unable to locate package nginx\r\nE: Package 'ca-certificates' has no installation candidate\r\nE: Unable to locate package build-essential\r\nE: Unable to locate package cmake\r\nE: Unable to locate package openjdk-8-jdk\r\nE: Unable to locate package git-core\r\nE: Unable to locate package maven\r\nThe command '/bin/sh -c apt-get -y update && apt-get install -y --no-install-recommends          wget          curl          nginx          ca-certificates          bzip2          build-essential          cmake          openjdk-8-jdk          git-core          maven     && rm -rf /var/lib/apt/lists/*' returned a non-zero code: 100\r\n\r\n### What component(s), interfaces, languages, and integrations does this bug affect?\r\nComponents \r\n- [x] `area/build`: Build and test infrastructure for MLflow\r\n- [x] `area/model-registry`: Model Registry service, APIs, and the fluent client calls for Model Registry\r\n- [x] `area/models`: MLmodel format, model serialization/deserialization, flavors\r\n\r\nInterface \r\n- [x] `area/docker`: Docker use across MLflow's components, such as MLflow Projects and MLflow Models\r\n\r\nLanguage \r\n- [x] `language/Python`: Python APIs and clients\r\n\r\n\r\nIntegrations\r\n- [x] `integrations/sagemaker`: SageMaker integrations\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/4035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/4035/timeline","performed_via_github_app":null,"state_reason":null}