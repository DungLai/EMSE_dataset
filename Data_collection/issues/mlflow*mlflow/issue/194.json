{"url":"https://api.github.com/repos/mlflow/mlflow/issues/194","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/194/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/194/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/194/events","html_url":"https://github.com/mlflow/mlflow/issues/194","id":344175331,"node_id":"MDU6SXNzdWUzNDQxNzUzMzE=","number":194,"title":"MLModel conda env not respected in `mlflow pyfunc`","user":{"login":"0wu","id":13663916,"node_id":"MDQ6VXNlcjEzNjYzOTE2","avatar_url":"https://avatars.githubusercontent.com/u/13663916?v=4","gravatar_id":"","url":"https://api.github.com/users/0wu","html_url":"https://github.com/0wu","followers_url":"https://api.github.com/users/0wu/followers","following_url":"https://api.github.com/users/0wu/following{/other_user}","gists_url":"https://api.github.com/users/0wu/gists{/gist_id}","starred_url":"https://api.github.com/users/0wu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0wu/subscriptions","organizations_url":"https://api.github.com/users/0wu/orgs","repos_url":"https://api.github.com/users/0wu/repos","events_url":"https://api.github.com/users/0wu/events{/privacy}","received_events_url":"https://api.github.com/users/0wu/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-07-24T19:38:08Z","updated_at":"2018-08-13T22:47:33Z","closed_at":"2018-08-13T22:47:33Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Describe the problem\r\nThe MLMode provides an optional env property  to specify the conda env for model to run. However, this feature is not implemented in the `mlflow pyfunc predict` or `mlflow pyfunc serve`. \r\n\r\n- env in MLmodel\r\nhttps://github.com/databricks/mlflow/blob/da776472afb638934ed65b7f1422792da4e9c9fe/mlflow/pyfunc/__init__.py#L48\r\n\r\n### Feedback needed\r\nI would love to contribute a patch to fix the problem but I'd like to know the desired approach to handle this.\r\n\r\nMy proposed approach is \r\n-  check current conda env vs desired conda env, \r\n    - if identical, proceed to run as it is now.\r\n    - if not, new conda env is created from the provided yaml (as in MLproject).\r\n        - install mlflow in the newly created env\r\n        - rerun the CLI in new conda env using os.system('conda activate {desired_conda_env}; {sys.argv}')\r\n\r\n","closed_by":{"login":"tomasatdatabricks","id":33237569,"node_id":"MDQ6VXNlcjMzMjM3NTY5","avatar_url":"https://avatars.githubusercontent.com/u/33237569?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasatdatabricks","html_url":"https://github.com/tomasatdatabricks","followers_url":"https://api.github.com/users/tomasatdatabricks/followers","following_url":"https://api.github.com/users/tomasatdatabricks/following{/other_user}","gists_url":"https://api.github.com/users/tomasatdatabricks/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasatdatabricks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasatdatabricks/subscriptions","organizations_url":"https://api.github.com/users/tomasatdatabricks/orgs","repos_url":"https://api.github.com/users/tomasatdatabricks/repos","events_url":"https://api.github.com/users/tomasatdatabricks/events{/privacy}","received_events_url":"https://api.github.com/users/tomasatdatabricks/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/194/timeline","performed_via_github_app":null,"state_reason":"completed"}