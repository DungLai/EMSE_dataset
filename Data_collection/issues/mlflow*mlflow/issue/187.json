{"url":"https://api.github.com/repos/mlflow/mlflow/issues/187","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/187/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/187/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/187/events","html_url":"https://github.com/mlflow/mlflow/issues/187","id":343867081,"node_id":"MDU6SXNzdWUzNDM4NjcwODE=","number":187,"title":"mlflow pyfunc predict using csv input file for XGBoost not working","user":{"login":"donigian","id":830545,"node_id":"MDQ6VXNlcjgzMDU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/830545?v=4","gravatar_id":"","url":"https://api.github.com/users/donigian","html_url":"https://github.com/donigian","followers_url":"https://api.github.com/users/donigian/followers","following_url":"https://api.github.com/users/donigian/following{/other_user}","gists_url":"https://api.github.com/users/donigian/gists{/gist_id}","starred_url":"https://api.github.com/users/donigian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/donigian/subscriptions","organizations_url":"https://api.github.com/users/donigian/orgs","repos_url":"https://api.github.com/users/donigian/repos","events_url":"https://api.github.com/users/donigian/events{/privacy}","received_events_url":"https://api.github.com/users/donigian/received_events","type":"User","site_admin":false},"labels":[{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-07-24T03:06:02Z","updated_at":"2020-05-14T00:51:57Z","closed_at":"2019-11-12T22:50:07Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: Yes custom XGBoost on Ames Housing dataset \r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Mac OS X\r\n- **MLflow installed from (source or binary)**: binary\r\n- **MLflow version (run ``mlflow --version``)**: mlflow, version 0.2.1\r\n- **Python version**: Python 3.6.5 :: Anaconda, Inc.\r\n- **npm version (if running the dev UI):\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nXGBoost predict function takes as input a numpy array while mlflow predict CLI application takes as input Pandas CSV data row. Do you have a suggestion for how to save a single test instance so that `mlflow pyfunc predict` will work? \r\n\r\nFYI, subsequent runs of `mlflow pyfunc predict` result in a different order of expected columns in the output.\r\n\r\nServer CLI invoked using:\r\n\r\n`mlflow pyfunc serve -m mlruns/0/faccff5e8a8c42ae82dd1f2c68a9dfa6/artifacts/model/`\r\n\r\nTo score a single instance using CLI run:\r\n\r\n`mlflow pyfunc predict -m mlruns/0/7635c0c89f8543c9a2c45234b18a1177/artifacts/model/  -i /Users/arm/code/Deploying_ML_models_to_Production_Toolkit/instance.csv`\r\n\r\n\r\nCode Snippet:\r\n```\r\nmy_model = XGBRegressor(n_estimators=100, learning_rate=0.05)\r\nmy_model.fit(training_examples, training_targets, early_stopping_rounds=5, \r\n             eval_set=[(test_examples, test_targets)], verbose=False)\r\npredictions = my_model.predict(test_examples)\r\n```\r\n\r\n### Source code / logs\r\n ```\r\nValueError: feature_names mismatch: ['f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'f10', 'f11', 'f12', 'f13', 'f14', 'f15', 'f16', 'f17', 'f18', 'f19', 'f20', 'f21', 'f22', 'f23', 'f24', 'f25', 'f26', 'f27', 'f28', 'f29', 'f30', 'f31', 'f32', 'f33', 'f34', 'f35', 'f36'] ['Id', 'MSSubClass', 'LotFrontage', 'LotArea', 'OverallQual', 'OverallCond', 'YearBuilt', 'YearRemodAdd', 'MasVnrArea', 'BsmtFinSF1', 'BsmtFinSF2', 'BsmtUnfSF', 'TotalBsmtSF', '1stFlrSF', '2ndFlrSF', 'LowQualFinSF', 'GrLivArea', 'BsmtFullBath', 'BsmtHalfBath', 'FullBath', 'HalfBath', 'BedroomAbvGr', 'KitchenAbvGr', 'TotRmsAbvGrd', 'Fireplaces', 'GarageYrBlt', 'GarageCars', 'GarageArea', 'WoodDeckSF', 'OpenPorchSF', 'EnclosedPorch', '3SsnPorch', 'ScreenPorch', 'PoolArea', 'MiscVal', 'MoSold', 'YrSold']\r\n\r\nexpected f14, f12, f4, f34, f15, f31, f3, f6, f23, f25, f24, f35, f2, f36, f7, f13, f5, f10, f11, f19, f16, f0, f22, f18, f32, f21, f29, f26, f33, f8, f17, f30, f1, f9, f28, f27, f20 in input data\r\n\r\ntraining data did not have the following fields: MiscVal, YrSold, Fireplaces, FullBath, OverallCond, LotFrontage, HalfBath, 2ndFlrSF, LotArea, LowQualFinSF, BsmtHalfBath, GarageArea, 3SsnPorch, MoSold, YearRemodAdd, GrLivArea, WoodDeckSF, BsmtFinSF1, YearBuilt, MSSubClass, BedroomAbvGr, ScreenPorch, BsmtFinSF2, BsmtFullBath, GarageCars, BsmtUnfSF, TotRmsAbvGrd, Id, MasVnrArea, EnclosedPorch, 1stFlrSF, OpenPorchSF, PoolArea, GarageYrBlt, TotalBsmtSF, OverallQual, KitchenAbvGr\r\n```\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/187/timeline","performed_via_github_app":null,"state_reason":"completed"}