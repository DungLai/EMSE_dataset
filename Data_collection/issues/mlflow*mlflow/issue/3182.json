{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3182","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/3182/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/3182/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/3182/events","html_url":"https://github.com/mlflow/mlflow/issues/3182","id":666945675,"node_id":"MDU6SXNzdWU2NjY5NDU2NzU=","number":3182,"title":"[DOC-FIX] SFTP Documentation","user":{"login":"synchronizing","id":2829082,"node_id":"MDQ6VXNlcjI4MjkwODI=","avatar_url":"https://avatars.githubusercontent.com/u/2829082?v=4","gravatar_id":"","url":"https://api.github.com/users/synchronizing","html_url":"https://github.com/synchronizing","followers_url":"https://api.github.com/users/synchronizing/followers","following_url":"https://api.github.com/users/synchronizing/following{/other_user}","gists_url":"https://api.github.com/users/synchronizing/gists{/gist_id}","starred_url":"https://api.github.com/users/synchronizing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synchronizing/subscriptions","organizations_url":"https://api.github.com/users/synchronizing/orgs","repos_url":"https://api.github.com/users/synchronizing/repos","events_url":"https://api.github.com/users/synchronizing/events{/privacy}","received_events_url":"https://api.github.com/users/synchronizing/received_events","type":"User","site_admin":false},"labels":[{"id":978584226,"node_id":"MDU6TGFiZWw5Nzg1ODQyMjY=","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docs","name":"area/docs","color":"48eabc","default":false,"description":"Documentation issues"},{"id":1893072438,"node_id":"MDU6TGFiZWwxODkzMDcyNDM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/help%20wanted","name":"help wanted","color":"c5def5","default":true,"description":"We would like help from the community to add this support"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-07-28T10:02:38Z","updated_at":"2020-11-12T01:22:11Z","closed_at":"2020-11-12T01:22:10Z","author_association":"NONE","active_lock_reason":null,"body":"### Willingness to contribute\r\n- [x] Yes. I can contribute a documentation fix independently.\r\n- [ ] Yes. I would be willing to contribute a document fix with guidance from the MLflow community.\r\n- [ ] No. I cannot contribute a documentation fix at this time.\r\n\r\n### URL(s) with the issue:\r\n\r\n- https://www.mlflow.org/docs/latest/tracking.html#sftp-server\r\n\r\n### Description of Proposal\r\n\r\nThe `SFTP` artifact stores section of the documentation lacks proper instruction on setting up the configurations to get the client up and running. Perhaps it's lack of sleep from my end, but I still have not been able to get it all working (more on this issue after documentation pointers).\r\n\r\n#### File Structure\r\n\r\nInform the user of what files he/she would need to set-up. The current description is not helpful: \r\n\r\n> To store artifacts in an SFTP server, specify a URI of the form sftp://user@host/path/to/directory. You should configure the client to be able to log in to the SFTP server without a password over SSH **(e.g. public key, identity file in ssh_config, etc.)**.\r\n\r\nSince `pysftp` does not work out of the box with Windows regarding default paths (at least within MLFlow's implementation), the documentation should, at the very least, include information on setting up the Unix-based clients. \r\n\r\n#### Host Name\r\n\r\nMention that the host name inside the `~/.ssh/config` file requires to be the same as the `hostname` set by the `--default-artifact-root` flag. This might seem obvious at first, but when contextualizing shared networks/containerized environments things become a bit more hairy and the more detail the better.\r\n\r\nhttps://github.com/mlflow/mlflow/blob/bde9c044f7b883723b3255e3c39eeb49a3c81fc2/mlflow/store/artifact/sftp_artifact_repo.py#L40\r\n\r\n#### `known_hosts`\r\n\r\nSpecify where Specify `pysftp` looks for `known_hosts` files. Currently facing an issue on this myself. According to the `pysftp` documentation [here](https://pysftp.readthedocs.io/en/release_0.2.9/cookbook.html#pysftp-cnopts):\r\n\r\n> Host Key checking is enabled by default. It will use `~/.ssh/known_hosts` by default.\r\n\r\nAgain, might seem obvious to some, but not all (specially folks who haven't messed with SSL in a while -- ü§öüèº).\r\n\r\n----\r\n\r\n## Issue\r\n\r\nI'll use this opportunity to ask for help in this problem. I currently have the following structure inside of my `~/.ssh/` folder:\r\n\r\n```\r\n.\r\n‚îú‚îÄ‚îÄ authorized_keys\r\n‚îú‚îÄ‚îÄ config\r\n‚îî‚îÄ‚îÄ known_hosts\r\n```\r\n\r\nAll of these files are configured appropriately with the details mentioned above figured out. When trying to run `mlflow run`, the following issue is spit out by `pysftp` (as part of `mlflow run` crashing, of course):\r\n\r\n```\r\nraise HostKeysException('No Host Keys Found')\r\npysftp.exceptions.HostKeysException: No Host Keys Found\r\n```\r\n\r\nAny help would be awesome. I'll contribute back and push updated documentation on how to setup `SFTP`. üòÑ","closed_by":{"login":"synchronizing","id":2829082,"node_id":"MDQ6VXNlcjI4MjkwODI=","avatar_url":"https://avatars.githubusercontent.com/u/2829082?v=4","gravatar_id":"","url":"https://api.github.com/users/synchronizing","html_url":"https://github.com/synchronizing","followers_url":"https://api.github.com/users/synchronizing/followers","following_url":"https://api.github.com/users/synchronizing/following{/other_user}","gists_url":"https://api.github.com/users/synchronizing/gists{/gist_id}","starred_url":"https://api.github.com/users/synchronizing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synchronizing/subscriptions","organizations_url":"https://api.github.com/users/synchronizing/orgs","repos_url":"https://api.github.com/users/synchronizing/repos","events_url":"https://api.github.com/users/synchronizing/events{/privacy}","received_events_url":"https://api.github.com/users/synchronizing/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3182/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/3182/timeline","performed_via_github_app":null,"state_reason":"completed"}