{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2886","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2886/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2886/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2886/events","html_url":"https://github.com/mlflow/mlflow/issues/2886","id":626249674,"node_id":"MDU6SXNzdWU2MjYyNDk2NzQ=","number":2886,"title":"[BUG] Windows 10 - CondaHTTPError: HTTP 000 CONNECTION FAILED","user":{"login":"luiztauffer","id":24541631,"node_id":"MDQ6VXNlcjI0NTQxNjMx","avatar_url":"https://avatars.githubusercontent.com/u/24541631?v=4","gravatar_id":"","url":"https://api.github.com/users/luiztauffer","html_url":"https://github.com/luiztauffer","followers_url":"https://api.github.com/users/luiztauffer/followers","following_url":"https://api.github.com/users/luiztauffer/following{/other_user}","gists_url":"https://api.github.com/users/luiztauffer/gists{/gist_id}","starred_url":"https://api.github.com/users/luiztauffer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luiztauffer/subscriptions","organizations_url":"https://api.github.com/users/luiztauffer/orgs","repos_url":"https://api.github.com/users/luiztauffer/repos","events_url":"https://api.github.com/users/luiztauffer/events{/privacy}","received_events_url":"https://api.github.com/users/luiztauffer/received_events","type":"User","site_admin":false},"labels":[{"id":968461607,"node_id":"MDU6TGFiZWw5Njg0NjE2MDc=","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/windows","name":"area/windows","color":"ede978","default":false,"description":"Issue is unique to windows."},{"id":978584226,"node_id":"MDU6TGFiZWw5Nzg1ODQyMjY=","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docs","name":"area/docs","color":"48eabc","default":false,"description":"Documentation issues"},{"id":1893072438,"node_id":"MDU6TGFiZWwxODkzMDcyNDM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/help%20wanted","name":"help wanted","color":"c5def5","default":true,"description":"We would like help from the community to add this support"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-05-28T06:24:12Z","updated_at":"2022-06-03T00:26:13Z","closed_at":"2022-06-03T00:26:13Z","author_association":"NONE","active_lock_reason":null,"body":"### Willingness to contribute\r\n- [x] Yes. I can contribute a fix for this bug independently.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No, except for my own repo. I did not change mlflow.\r\n- **OS Platform and Distribution**: Windows 10\r\n- **MLflow installed from**: pip\r\n- **MLflow version (run ``mlflow --version``)**: 1.8.0\r\n- **Python version**: 3.6\r\n- **npm version, if running the dev UI**:\r\n- **Exact command to reproduce**: mlflow run .\r\n\r\n### Describe the problem\r\nWhen running `mlflow run .` from the root dir of my repo, I get this error traceback:\r\n\r\n```shell\r\n2020/05/28 13:06:01 INFO mlflow.projects: === Creating conda environment mlflow-a3b54c00d1403b3356472de25fb33ec1ac36c1a0 ===\r\nCollecting package metadata (repodata.json): failed\r\n\r\nCondaHTTPError: HTTP 000 CONNECTION FAILED for url <https://repo.anaconda.com/pkgs/main/win-64/repodata.json>\r\nElapsed: -\r\n\r\nAn HTTP error occurred when trying to retrieve this URL.\r\nHTTP errors are often intermittent, and a simple retry will get you on your way.\r\n\r\nIf your current network has https://www.anaconda.com blocked, please file\r\na support request with your network engineering team.\r\n\r\nSSLError(MaxRetryError('HTTPSConnectionPool(host=\\'repo.anaconda.com\\', port=443): Max retries exceeded with url: /pkgs/main/win-64/repodata.json (Caused by SSLError(\"Can\\'t connect to HTTPS URL because the SSL module is not available.\"))'))\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\Luiz\\Anaconda3\\envs\\env_chamber_detector\\Scripts\\mlflow.exe\\__main__.py\", line 7, in <module>\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\click\\core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\click\\core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\click\\core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\click\\core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\click\\core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\mlflow\\cli.py\", line 133, in run\r\n    run_id=run_id\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\mlflow\\projects\\__init__.py\", line 291, in run\r\n    synchronous=synchronous, run_id=run_id)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\mlflow\\projects\\__init__.py\", line 164, in _run\r\n    conda_env_name = _get_or_create_conda_env(project.conda_env_path)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\mlflow\\projects\\__init__.py\", line 456, in _get_or_create_conda_env\r\n    conda_env_path], stream_output=True)\r\n  File \"c:\\users\\luiz\\anaconda3\\envs\\env_chamber_detector\\lib\\site-packages\\mlflow\\utils\\process.py\", line 38, in exec_cmd\r\n    raise ShellCommandException(\"Non-zero exitcode: %s\" % (exit_code))\r\nmlflow.utils.process.ShellCommandException: Non-zero exitcode: 1\r\n```\r\n\r\nThe weird thing is that conda works perfectly fine otherwise. The same command, with the same repo version works fine on my Ubuntu machine.\r\n\r\n\r\n# Solution\r\n\r\nI installed [OpenSSL for Windows](https://wiki.openssl.org/index.php/Binaries) and this problem was solved. \r\nI thought it would be helpful to register it here.\r\n","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2886/timeline","performed_via_github_app":null,"state_reason":"completed"}