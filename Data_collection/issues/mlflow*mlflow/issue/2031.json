{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2031","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2031/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2031/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2031/events","html_url":"https://github.com/mlflow/mlflow/issues/2031","id":516213805,"node_id":"MDU6SXNzdWU1MTYyMTM4MDU=","number":2031,"title":"[BUG] null value in column 'experiment_id' violates not-null constraint","user":{"login":"1namta1","id":57264800,"node_id":"MDQ6VXNlcjU3MjY0ODAw","avatar_url":"https://avatars.githubusercontent.com/u/57264800?v=4","gravatar_id":"","url":"https://api.github.com/users/1namta1","html_url":"https://github.com/1namta1","followers_url":"https://api.github.com/users/1namta1/followers","following_url":"https://api.github.com/users/1namta1/following{/other_user}","gists_url":"https://api.github.com/users/1namta1/gists{/gist_id}","starred_url":"https://api.github.com/users/1namta1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1namta1/subscriptions","organizations_url":"https://api.github.com/users/1namta1/orgs","repos_url":"https://api.github.com/users/1namta1/repos","events_url":"https://api.github.com/users/1namta1/events{/privacy}","received_events_url":"https://api.github.com/users/1namta1/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2019-11-01T16:23:35Z","updated_at":"2020-07-01T23:14:09Z","closed_at":"2020-07-01T23:14:09Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address. For help with debugging your code, please refer to [Stack Overflow](https://stackoverflow.com/questions/tagged/mlflow).\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: RedHat 7.2\r\n- **MLflow installed from (source or binary)**: pip install\r\n- **MLflow version (run ``mlflow --version``)**: 1.3.0\r\n- **Python version**: 3.7.2\r\n- **npm version, if running the dev UI**:\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Include descriptions of the expected behavior and the actual behavior.\r\nWhen trying to create a new experiment, either using the python API or the mlflow command line, it is failing\r\n\r\nWe are using PostrgreSQL as the backend store.\r\n\r\nThe issue is with the schema for table 'experiments'.\r\n\r\nI had used this query below I found in: \r\nhttps://github.com/mlflow/mlflow/blob/ac68e6be4eb850b765e3a3ec1315655c8bb0543b/tests/resources/db/latest_schema.sql\r\n\r\nCREATE TABLE experiments (\r\n\texperiment_id INTEGER NOT NULL, \r\n\tname VARCHAR(256) NOT NULL, \r\n\tartifact_location VARCHAR(256), \r\n\tlifecycle_stage VARCHAR(32), \r\n\tCONSTRAINT experiment_pk PRIMARY KEY (experiment_id), \r\n\tUNIQUE (name), \r\n\tCONSTRAINT experiments_lifecycle_stage CHECK (lifecycle_stage IN ('active', 'deleted'))\r\n)\r\n\r\nHere 'experiment_id' column values should be auto-incremented otherwise mlflow can't create experiments for PostgreSQL DB.\r\n\r\nThe way to do it it so replace:\r\nexperiment_id INTEGER NOT NULL, \r\nwith\r\nexperiment_id SERIAL NOT NULL, \r\n\r\n### Code to reproduce issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nmlflow experiments create --experiment-name TEST TestExp --artifact-location s3://...\r\n\r\nYou can also use python API:\r\ncreate_experiment('TEST', artifact_location='s3://....')\r\n\r\n### Other info / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks,\r\nplease include the full traceback. Large logs and files should be attached.\r\n","closed_by":{"login":"ankit-db","id":52183359,"node_id":"MDQ6VXNlcjUyMTgzMzU5","avatar_url":"https://avatars.githubusercontent.com/u/52183359?v=4","gravatar_id":"","url":"https://api.github.com/users/ankit-db","html_url":"https://github.com/ankit-db","followers_url":"https://api.github.com/users/ankit-db/followers","following_url":"https://api.github.com/users/ankit-db/following{/other_user}","gists_url":"https://api.github.com/users/ankit-db/gists{/gist_id}","starred_url":"https://api.github.com/users/ankit-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankit-db/subscriptions","organizations_url":"https://api.github.com/users/ankit-db/orgs","repos_url":"https://api.github.com/users/ankit-db/repos","events_url":"https://api.github.com/users/ankit-db/events{/privacy}","received_events_url":"https://api.github.com/users/ankit-db/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2031/timeline","performed_via_github_app":null,"state_reason":"completed"}