{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1451","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1451/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1451/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1451/events","html_url":"https://github.com/mlflow/mlflow/issues/1451","id":456159980,"node_id":"MDU6SXNzdWU0NTYxNTk5ODA=","number":1451,"title":"Unable to create table 'experiments' when MySQL is chosen as backend store","user":{"login":"aranjanthakur","id":9507359,"node_id":"MDQ6VXNlcjk1MDczNTk=","avatar_url":"https://avatars.githubusercontent.com/u/9507359?v=4","gravatar_id":"","url":"https://api.github.com/users/aranjanthakur","html_url":"https://github.com/aranjanthakur","followers_url":"https://api.github.com/users/aranjanthakur/followers","following_url":"https://api.github.com/users/aranjanthakur/following{/other_user}","gists_url":"https://api.github.com/users/aranjanthakur/gists{/gist_id}","starred_url":"https://api.github.com/users/aranjanthakur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aranjanthakur/subscriptions","organizations_url":"https://api.github.com/users/aranjanthakur/orgs","repos_url":"https://api.github.com/users/aranjanthakur/repos","events_url":"https://api.github.com/users/aranjanthakur/events{/privacy}","received_events_url":"https://api.github.com/users/aranjanthakur/received_events","type":"User","site_admin":false},"labels":[{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"smurching","id":2358483,"node_id":"MDQ6VXNlcjIzNTg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2358483?v=4","gravatar_id":"","url":"https://api.github.com/users/smurching","html_url":"https://github.com/smurching","followers_url":"https://api.github.com/users/smurching/followers","following_url":"https://api.github.com/users/smurching/following{/other_user}","gists_url":"https://api.github.com/users/smurching/gists{/gist_id}","starred_url":"https://api.github.com/users/smurching/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smurching/subscriptions","organizations_url":"https://api.github.com/users/smurching/orgs","repos_url":"https://api.github.com/users/smurching/repos","events_url":"https://api.github.com/users/smurching/events{/privacy}","received_events_url":"https://api.github.com/users/smurching/received_events","type":"User","site_admin":false},"assignees":[{"login":"smurching","id":2358483,"node_id":"MDQ6VXNlcjIzNTg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2358483?v=4","gravatar_id":"","url":"https://api.github.com/users/smurching","html_url":"https://github.com/smurching","followers_url":"https://api.github.com/users/smurching/followers","following_url":"https://api.github.com/users/smurching/following{/other_user}","gists_url":"https://api.github.com/users/smurching/gists{/gist_id}","starred_url":"https://api.github.com/users/smurching/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smurching/subscriptions","organizations_url":"https://api.github.com/users/smurching/orgs","repos_url":"https://api.github.com/users/smurching/repos","events_url":"https://api.github.com/users/smurching/events{/privacy}","received_events_url":"https://api.github.com/users/smurching/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2019-06-14T09:50:01Z","updated_at":"2020-01-31T05:11:52Z","closed_at":"2019-12-16T15:10:04Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  MacOS v10.14.4\r\n- **MLflow installed from (source or binary)**: source\r\n- **MLflow version (run ``mlflow --version``)**: 1.0.0\r\n- **Python version**: 2.7.16\r\n- **npm version (if running the dev UI):\r\n- **Exact command to reproduce**: mlflow server --backend-store-uri mysql://user:pass@MySql-server:3306/DB --default-artifact-root ./mlruns --host 0.0.0.0\r\n\r\n### Describe the problem\r\nI am using MySQL as the backend store. When I try to create server using the above command, server creation fails with the error 'Specified key was too long; max key length is 767 bytes' when trying to create table 'experiments'. \r\n\r\n### Source code / logs\r\nroot@ee9ffebd6949:/# mlflow server --backend-store-uri mysql://user:pass@MySql-server:3306/DB --default-artifact-root ./mlruns --host 0.0.0.0\r\n2019/06/14 08:31:09 INFO mlflow.store.sqlalchemy_store: Creating initial MLflow database tables...\r\n2019/06/14 08:31:13 ERROR mlflow.cli: Error initializing backend store\r\n2019/06/14 08:31:13 ERROR mlflow.cli: (_mysql_exceptions.OperationalError) (1071, 'Specified key was too long; max key length is 767 bytes')\r\n[SQL: \r\nCREATE TABLE experiments (\r\n\texperiment_id INTEGER NOT NULL AUTO_INCREMENT, \r\n\tname VARCHAR(256) NOT NULL, \r\n\tartifact_location VARCHAR(256), \r\n\tlifecycle_stage VARCHAR(32), \r\n\tCONSTRAINT experiment_pk PRIMARY KEY (experiment_id), \r\n\tCONSTRAINT experiments_lifecycle_stage CHECK (lifecycle_stage IN ('active', 'deleted')), \r\n\tUNIQUE (name)\r\n)\r\n\r\n]\r\n(Background on this error at: http://sqlalche.me/e/e3q8)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/mlflow/cli.py\", line 247, in server\r\n    _get_store(backend_store_uri, default_artifact_root)\r\n  File \"/usr/local/lib/python2.7/site-packages/mlflow/server/handlers.py\", line 35, in _get_store\r\n    _store = SqlAlchemyStore(store_dir, artifact_root)\r\n  File \"/usr/local/lib/python2.7/site-packages/mlflow/store/sqlalchemy_store.py\", line 85, in __init__\r\n    SqlAlchemyStore._initialize_tables(self.engine)\r\n  File \"/usr/local/lib/python2.7/site-packages/mlflow/store/sqlalchemy_store.py\", line 101, in _initialize_tables\r\n    InitialBase.metadata.create_all(engine)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/schema.py\", line 4287, in create_all\r\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 2033, in _run_visitor\r\n    conn._run_visitor(visitorcallable, element, **kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1607, in _run_visitor\r\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/visitors.py\", line 131, in traverse_single\r\n    return meth(obj, **kw)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/ddl.py\", line 781, in visit_metadata\r\n    _is_metadata_operation=True,\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/visitors.py\", line 131, in traverse_single\r\n    return meth(obj, **kw)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/ddl.py\", line 826, in visit_table\r\n    include_foreign_key_constraints,\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 988, in execute\r\n    return meth(self, multiparams, params)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\r\n    return connection._execute_ddl(self, multiparams, params)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1050, in _execute_ddl\r\n    compiled,\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1248, in _execute_context\r\n    e, statement, parameters, cursor, context\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1466, in _handle_dbapi_exception\r\n    util.raise_from_cause(sqlalchemy_exception, exc_info)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/util/compat.py\", line 383, in raise_from_cause\r\n    reraise(type(exception), exception, tb=exc_tb, cause=cause)\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1244, in _execute_context\r\n    cursor, statement, parameters, context\r\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 550, in do_execute\r\n    cursor.execute(statement, parameters)\r\n  File \"/usr/local/lib/python2.7/site-packages/MySQLdb/cursors.py\", line 205, in execute\r\n    self.errorhandler(self, exc, value)\r\n  File \"/usr/local/lib/python2.7/site-packages/MySQLdb/connections.py\", line 36, in defaulterrorhandler\r\n    raise errorclass, errorvalue\r\nOperationalError: (_mysql_exceptions.OperationalError) (1071, 'Specified key was too long; max key length is 767 bytes')\r\n[SQL: \r\nCREATE TABLE experiments (\r\n\texperiment_id INTEGER NOT NULL AUTO_INCREMENT, \r\n\tname VARCHAR(256) NOT NULL, \r\n\tartifact_location VARCHAR(256), \r\n\tlifecycle_stage VARCHAR(32), \r\n\tCONSTRAINT experiment_pk PRIMARY KEY (experiment_id), \r\n\tCONSTRAINT experiments_lifecycle_stage CHECK (lifecycle_stage IN ('active', 'deleted')), \r\n\tUNIQUE (name)\r\n)\r\n\r\n]\r\n(Background on this error at: http://sqlalche.me/e/e3q8)\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1451/timeline","performed_via_github_app":null,"state_reason":"completed"}