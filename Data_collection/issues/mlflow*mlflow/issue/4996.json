{"url":"https://api.github.com/repos/mlflow/mlflow/issues/4996","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/4996/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/4996/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/4996/events","html_url":"https://github.com/mlflow/mlflow/issues/4996","id":1043729499,"node_id":"I_kwDOCB5Jx84-Ngxb","number":4996,"title":"[SETUP-BUG] What's the best way to run `mlflow sagemaker build-and-push-container`?","user":{"login":"zhangchi1","id":16889847,"node_id":"MDQ6VXNlcjE2ODg5ODQ3","avatar_url":"https://avatars.githubusercontent.com/u/16889847?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangchi1","html_url":"https://github.com/zhangchi1","followers_url":"https://api.github.com/users/zhangchi1/followers","following_url":"https://api.github.com/users/zhangchi1/following{/other_user}","gists_url":"https://api.github.com/users/zhangchi1/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangchi1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangchi1/subscriptions","organizations_url":"https://api.github.com/users/zhangchi1/orgs","repos_url":"https://api.github.com/users/zhangchi1/repos","events_url":"https://api.github.com/users/zhangchi1/events{/privacy}","received_events_url":"https://api.github.com/users/zhangchi1/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-11-03T15:15:34Z","updated_at":"2022-02-08T13:22:29Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"\r\n### System information\r\n- **image: python:3.8-slim**:\r\n- **MLflow installed from (source or binary)**:\r\n- **mlflow==1.20.2**:\r\n- **Python version: 3.8**:\r\n- **Exact command to reproduce**:\r\n```\r\npip3 install mlflow==1.20.2\r\nmlflow sagemaker build-and-push-container --build -c mlflow-pyfunc:1.20.2\r\n```\r\n\r\n### Describe the problem\r\nWe are trying to build and push mlflow sagemaker docker image to AWS ECR, in our CI/CD pipeline using image: python:3.8-slim. However, once we installed mlflow and run `mlflow sagemaker build-and-push-container` , we got the following error: (Check Logs section).\r\nWe are wondering if running `mlflow sagemaker build-and-push-container` require docker cmd installed? If so, does the community have any suggestion on what base image to use so that we can easily install mlflow, and docker, in order to run this cmd `mlflow sagemaker build-and-push-container`?\r\n\r\nThanks, \r\n\r\n\r\n\r\n### Other info / logs\r\n```\r\n/tmp/tmpyoqzwmvf/\r\n/tmp/tmpyoqzwmvf/Dockerfile\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/mlflow\", line 8, in <module>\r\n    sys.exit(cli())\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/mlflow/sagemaker/cli.py\", line 534, in build_and_push_container\r\n    mlflow.models.docker_utils._build_image(\r\n  File \"/usr/local/lib/python3.8/site-packages/mlflow/models/docker_utils.py\", line 127, in _build_image\r\n    proc = Popen(commands, cwd=cwd, stdout=PIPE, stderr=STDOUT, universal_newlines=True,)\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 858, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/local/lib/python3.8/subprocess.py\", line 1704, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'docker'\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/4996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/4996/timeline","performed_via_github_app":null,"state_reason":null}