{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5739","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/5739/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/5739/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/5739/events","html_url":"https://github.com/mlflow/mlflow/issues/5739","id":1210903290,"node_id":"I_kwDOCB5Jx85ILOr6","number":5739,"title":"[FR] Better support for ndarrays and tensors","user":{"login":"ntakouris","id":5436722,"node_id":"MDQ6VXNlcjU0MzY3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/5436722?v=4","gravatar_id":"","url":"https://api.github.com/users/ntakouris","html_url":"https://github.com/ntakouris","followers_url":"https://api.github.com/users/ntakouris/followers","following_url":"https://api.github.com/users/ntakouris/following{/other_user}","gists_url":"https://api.github.com/users/ntakouris/gists{/gist_id}","starred_url":"https://api.github.com/users/ntakouris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntakouris/subscriptions","organizations_url":"https://api.github.com/users/ntakouris/orgs","repos_url":"https://api.github.com/users/ntakouris/repos","events_url":"https://api.github.com/users/ntakouris/events{/privacy}","received_events_url":"https://api.github.com/users/ntakouris/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"},{"id":2237250735,"node_id":"MDU6TGFiZWwyMjM3MjUwNzM1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/server-infra","name":"area/server-infra","color":"48eabc","default":false,"description":"MLflow Tracking server backend"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-21T11:31:22Z","updated_at":"2022-04-22T17:43:32Z","closed_at":"2022-04-22T17:43:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Please fill in this feature request template to ensure a timely and thorough response.**\r\n\r\n## Willingness to contribute\r\nThe MLflow Community encourages new feature contributions. Would you or another member of your organization be willing to contribute an implementation of this feature (either as an MLflow Plugin or an enhancement to the MLflow code base)?\r\n\r\n- [ ] Yes. I can contribute this feature independently.\r\n- [  x ] Yes. I would be willing to contribute this feature with guidance from the MLflow community.\r\n- [ ] No. I cannot contribute this feature at this time.\r\n\r\n## Proposal Summary\r\n\r\nMany times, you log metrics such as loss per step (tensors with gradients) or other numpy arrays (ndarrays). It would be very useful if there was built-in support to:\r\n\r\n**For params**\r\n- Extract single (`.item()`) or multiple values from ndarrays ([tolist](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.tolist.html) ?)\r\n\r\n**For metrics**\r\n- [Detach torch tensors from the gradient graph](https://pytorch.org/docs/stable/generated/torch.Tensor.detach.html) - pytorch lightning does this too\r\n- Move tensors from gpu to cpu, convert to numpy if needed (ex. to convert to list)\r\n- Extract values from single-element tensors or ndarrays, raise if resulting value is not supported (not float?)\r\n\r\nAdding those few simple features, can make the usage much more intuitive and simpler, for deep learning engineers. Here's an example:\r\n\r\n\r\n```py\r\nanchors = np.array([[16], [32], [64], [128], [256]], dtype=np.int32)\r\nx = np.array([1.0])\r\n\r\n# in your train on batch func\r\nloss = ...\r\n```\r\n\r\n- Before\r\n```py\r\nmlflow.log_params({'anchors': anchors.tolist(), 'x': x.item(), 'loss': loss.detach().item()/.tolist()})\r\n````\r\n\r\n- After\r\n```py\r\nmlflow.log_params({'anchors': anchors, 'x': x, 'loss': loss})\r\n````\r\n\r\n### What component(s), interfaces, languages, and integrations does this feature affect?\r\nComponents\r\n- [ ] `area/artifacts`: Artifact stores and artifact logging\r\n- [ ] `area/build`: Build and test infrastructure for MLflow\r\n- [ ] `area/docs`: MLflow documentation pages\r\n- [ ] `area/examples`: Example code\r\n- [ ] `area/model-registry`: Model Registry service, APIs, and the fluent client calls for Model Registry\r\n- [ ] `area/models`: MLmodel format, model serialization/deserialization, flavors\r\n- [ ] `area/projects`: MLproject format, project running backends\r\n- [ ] `area/scoring`: MLflow Model server, model deployment tools, Spark UDFs\r\n- [ x ] `area/server-infra`: MLflow Tracking server backend\r\n- [ x ] `area/tracking`: Tracking Service, tracking client APIs, autologging\r\n\r\n","closed_by":{"login":"ntakouris","id":5436722,"node_id":"MDQ6VXNlcjU0MzY3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/5436722?v=4","gravatar_id":"","url":"https://api.github.com/users/ntakouris","html_url":"https://github.com/ntakouris","followers_url":"https://api.github.com/users/ntakouris/followers","following_url":"https://api.github.com/users/ntakouris/following{/other_user}","gists_url":"https://api.github.com/users/ntakouris/gists{/gist_id}","starred_url":"https://api.github.com/users/ntakouris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntakouris/subscriptions","organizations_url":"https://api.github.com/users/ntakouris/orgs","repos_url":"https://api.github.com/users/ntakouris/repos","events_url":"https://api.github.com/users/ntakouris/events{/privacy}","received_events_url":"https://api.github.com/users/ntakouris/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/5739/timeline","performed_via_github_app":null,"state_reason":"completed"}