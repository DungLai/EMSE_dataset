{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1661","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1661/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1661/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1661/events","html_url":"https://github.com/mlflow/mlflow/issues/1661","id":472258372,"node_id":"MDU6SXNzdWU0NzIyNTgzNzI=","number":1661,"title":"After using mlflow to deploy the model into docker, input data shows error.","user":{"login":"lyw615","id":32604809,"node_id":"MDQ6VXNlcjMyNjA0ODA5","avatar_url":"https://avatars.githubusercontent.com/u/32604809?v=4","gravatar_id":"","url":"https://api.github.com/users/lyw615","html_url":"https://github.com/lyw615","followers_url":"https://api.github.com/users/lyw615/followers","following_url":"https://api.github.com/users/lyw615/following{/other_user}","gists_url":"https://api.github.com/users/lyw615/gists{/gist_id}","starred_url":"https://api.github.com/users/lyw615/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyw615/subscriptions","organizations_url":"https://api.github.com/users/lyw615/orgs","repos_url":"https://api.github.com/users/lyw615/repos","events_url":"https://api.github.com/users/lyw615/events{/privacy}","received_events_url":"https://api.github.com/users/lyw615/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-07-24T12:35:49Z","updated_at":"2021-08-25T04:49:08Z","closed_at":"2019-07-25T07:14:27Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\nThe model  is deployed into docker which is from  mlflow/examples/sklearn_elasticnet_wine/train.py. Following are   details of docker.\r\ndocker run -p 5001:8080  \"ni\"\r\npip 19.0.3 from /miniconda/lib/python3.7/site-packages/pip (python 3.7)\r\nPython 3.7.3\r\n1.0.0\r\n[2019-07-24 11:55:06 +0000] [44] [INFO] Starting gunicorn 19.9.0\r\n[2019-07-24 11:55:06 +0000] [44] [INFO] Listening at: unix:/tmp/gunicorn.sock (44)\r\n[2019-07-24 11:55:06 +0000] [44] [INFO] Using worker: gevent\r\n[2019-07-24 11:55:06 +0000] [47] [INFO] Booting worker with pid: 47\r\n\r\n127.0.0.1 - - [24/Jul/2019:12:12:51 +0000] \"POST /invocations HTTP/1.1\" 400 1174 \"-\" \"curl/7.47.0\"\r\n\r\n### Describe the problem\r\nInside docker enter data  with  the following command :\r\n`curl http://127.0.0.1:8080/invocations -H 'Content-Type: application/json' -d '{\r\n    \"columns\": [\"a\", \"b\", \"c\"],\r\n    \"data\": [[1, 2, 3], [4, 5, 6]]\r\n}'`\r\nError report:\r\n`{\"error_code\": \"BAD_REQUEST\", \"message\": \"Encountered an unexpected error while evaluating the model. Verify that the serialized input Dataframe is compatible with the model for inference.\", \"stack_trace\": \"Traceback (most recent call last):\\n  File \\\"/miniconda/envs/custom_env/lib/python3.6/site-packages/mlflow/pyfunc/scoring_server/__init__.py\\\", line 196, in transformation\\n    raw_predictions = model.predict(data)\\n  File \\\"/miniconda/envs/custom_env/lib/python3.6/site-packages/sklearn/linear_model/base.py\\\", line 256, in predict\\n    return self._decision_function(X)\\n  File \\\"/miniconda/envs/custom_env/lib/python3.6/site-packages/sklearn/linear_model/coordinate_descent.py\\\", line 791, in _decision_function\\n    return super(ElasticNet, self)._decision_function(X)\\n  File \\\"/miniconda/envs/custom_env/lib/python3.6/site-packages/sklearn/linear_model/base.py\\\", line 241, in _decision_function\\n    dense_output=True) + self.intercept_\\n  File \\\"/miniconda/envs/custom_env/lib/python3.6/site-packages/sklearn/utils/extmath.py\\\", line 140, in safe_sparse_dot\\n    return np.dot(a, b)\\nValueError: shapes (2,3) and (11,) not aligned: 3 (dim 1) != 11 (dim 0)\\n\"}`\r\n","closed_by":{"login":"lyw615","id":32604809,"node_id":"MDQ6VXNlcjMyNjA0ODA5","avatar_url":"https://avatars.githubusercontent.com/u/32604809?v=4","gravatar_id":"","url":"https://api.github.com/users/lyw615","html_url":"https://github.com/lyw615","followers_url":"https://api.github.com/users/lyw615/followers","following_url":"https://api.github.com/users/lyw615/following{/other_user}","gists_url":"https://api.github.com/users/lyw615/gists{/gist_id}","starred_url":"https://api.github.com/users/lyw615/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyw615/subscriptions","organizations_url":"https://api.github.com/users/lyw615/orgs","repos_url":"https://api.github.com/users/lyw615/repos","events_url":"https://api.github.com/users/lyw615/events{/privacy}","received_events_url":"https://api.github.com/users/lyw615/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1661/timeline","performed_via_github_app":null,"state_reason":"completed"}