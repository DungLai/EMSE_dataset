{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5184","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/5184/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/5184/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/5184/events","html_url":"https://github.com/mlflow/mlflow/issues/5184","id":1084632761,"node_id":"I_kwDOCB5Jx85Api65","number":5184,"title":"[BUG] Metric visualization in UI becomes broken. Rectangular/Constant curve instead of real curve.","user":{"login":"mbcel","id":16177860,"node_id":"MDQ6VXNlcjE2MTc3ODYw","avatar_url":"https://avatars.githubusercontent.com/u/16177860?v=4","gravatar_id":"","url":"https://api.github.com/users/mbcel","html_url":"https://github.com/mbcel","followers_url":"https://api.github.com/users/mbcel/followers","following_url":"https://api.github.com/users/mbcel/following{/other_user}","gists_url":"https://api.github.com/users/mbcel/gists{/gist_id}","starred_url":"https://api.github.com/users/mbcel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbcel/subscriptions","organizations_url":"https://api.github.com/users/mbcel/orgs","repos_url":"https://api.github.com/users/mbcel/repos","events_url":"https://api.github.com/users/mbcel/events{/privacy}","received_events_url":"https://api.github.com/users/mbcel/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2022859639,"node_id":"MDU6TGFiZWwyMDIyODU5NjM5","url":"https://api.github.com/repos/mlflow/mlflow/labels/integrations/azure","name":"integrations/azure","color":"ffbce5","default":false,"description":"Azure and Azure ML integrations"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-20T10:43:11Z","updated_at":"2021-12-20T10:52:02Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Willingness to contribute\r\nThe MLflow Community encourages bug fix contributions. Would you or another member of your organization be willing to contribute a fix for this bug to the MLflow code base?\r\n\r\n- [ ] Yes. I can contribute a fix for this bug independently.\r\n- [ x] Yes. I would be willing to contribute a fix for this bug with guidance from the MLflow community.\r\n- [ ] No. I cannot contribute a bug fix at this time.\r\n\r\n### System information\r\n- **Have I written custom code: Yes\r\n- **OS Platform and Distribution:  Linux Ubuntu 18.04\r\n- **MLflow installed from: binary\r\n- **MLflow version: 1.22.0\r\n- **Python version: 3.8\r\n\r\n### Describe the problem\r\nThe metrics visualization of all runs in an experiment becomes broken/are just plotted as a single constant value. Instead of showing the actual metric curve just a rectangular big blue box is plotted. Before everything is logged and visualized fine and at some point the metric visualization gets broken. This is then also the case for all metric values and also for previous runs under the same experiment name that were vsualized correctly before. It looks like in the database something is messed up and only the most recent metric value is stored without the past values which results in a overall constant metric. The broken curve looks like this (same for all other metric curves in the same experiment):\r\n![grafik](https://user-images.githubusercontent.com/16177860/146753090-9a971e69-5fbe-47cf-b834-eae1be66d685.png)\r\n\r\nI still could not find out when this happens. The only thing I know is that this happens after some time after multiple experiment runs then suddenly all metrics are broken. I should also add that I mostly stopp runs with Ctrl+C and not let them properly finish. \r\n\r\nMinimal code for logging that reproduces this behaviour is: \r\n   ```\r\n mlflow.set_experiment(\"my-example-experiment\")\r\n with mlflow.start_run():\r\n        mlflow.log_param(\"a\", 1)\r\n        mlflow.log_metric(\"b\", 2, step=0)\r\n        mlflow.log_metric(\"b\", 3, step=1)\r\n```\r\n\r\nRunning this many times after some time the metric visualization of \"b\" looks rectangualr/broken instead of a line going from 2 to 3. Did anyone also experience this issue?\r\n\r\nIntegrations\r\n- [ x] `integrations/azure`: MLFlow tracking server deployed in Azure App Service where the backend store is a managed PostgreSQL database.\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/5184/timeline","performed_via_github_app":null,"state_reason":null}