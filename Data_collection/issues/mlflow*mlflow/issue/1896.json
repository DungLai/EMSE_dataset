{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1896","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1896/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1896/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1896/events","html_url":"https://github.com/mlflow/mlflow/issues/1896","id":501574832,"node_id":"MDU6SXNzdWU1MDE1NzQ4MzI=","number":1896,"title":"[FR] Stronger Nesting of Runs","user":{"login":"bscan","id":10503608,"node_id":"MDQ6VXNlcjEwNTAzNjA4","avatar_url":"https://avatars.githubusercontent.com/u/10503608?v=4","gravatar_id":"","url":"https://api.github.com/users/bscan","html_url":"https://github.com/bscan","followers_url":"https://api.github.com/users/bscan/followers","following_url":"https://api.github.com/users/bscan/following{/other_user}","gists_url":"https://api.github.com/users/bscan/gists{/gist_id}","starred_url":"https://api.github.com/users/bscan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bscan/subscriptions","organizations_url":"https://api.github.com/users/bscan/orgs","repos_url":"https://api.github.com/users/bscan/repos","events_url":"https://api.github.com/users/bscan/events{/privacy}","received_events_url":"https://api.github.com/users/bscan/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1470945519,"node_id":"MDU6TGFiZWwxNDcwOTQ1NTE5","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/uiux","name":"area/uiux","color":"ede978","default":false,"description":"Front-end, user experience, plotting, JavaScript, JavaScript dev server"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"},{"id":2022865338,"node_id":"MDU6TGFiZWwyMDIyODY1MzM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/important-longterm","name":"priority/important-longterm","color":"534cb5","default":false,"description":"Important over the long term, but may not be staffed or may need multiple releases to complete."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-10-02T15:48:21Z","updated_at":"2022-05-19T19:04:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Problem\r\nCurrently, nested runs do not always appear underneath their parent, most commonly occurring for runs with many nested runs (e.g. hyperparameter search). Until the parent run itself is loaded, the nested runs are free floating causing a number of issues by polluting the list of runs. \r\n\r\nThe two attached gifs use results from the following code which generates two parent runs that each have 100 hypothetical nested hyperparameter runs. \r\n``` \r\n# Environment: Databricks Cloud on AWS. Runtime: 5.5 LTS ML \r\nimport mlflow\r\n\r\nfor model_name in ['Algo1', 'Algo2']:\r\n  with mlflow.start_run(run_name=model_name): \r\n    for hyperparameter in range(100):\r\n      with mlflow.start_run(nested=True):\r\n        mlflow.log_param(\"hyperparameter\", hyperparameter) \r\n```\r\n\r\nTo view my two parent runs, I first need to scroll down and \"Load More\" until I get all 202 runs into the UI before the UI recognizes which ones are intended to be nested. This pollution of the run list requires the first step of a workflow to be pressing \"Load More\" until all parent runs are loaded (note also the bug where \"Load More\" disappears after the 1st push)\r\n\r\n![ViewingNested](https://user-images.githubusercontent.com/10503608/66057906-7a3f2080-e507-11e9-813e-0bbcc555fb17.gif)\r\n\r\nSimilarly, when deleting runs, the nested runs essentially get lost and detached from the parent. See the experience below for deleting the 2 parent runs and all associated hyperparameter runs. (it also requires a hard refresh of the Tracking UI to find the zombie hyperparameter runs)\r\n\r\n![DeletingRuns](https://user-images.githubusercontent.com/10503608/66058609-aa3af380-e508-11e9-82d1-5bb50502c96f.gif)\r\n\r\n### Motivation\r\nI would like nested runs to more strictly belong to the parent run. When viewing runs, comparing runs, and deleting runs, I'd like a stronger sense of ownership between the parent and the nested runs. For example, always show nested runs underneath parents, and always delete all nested runs when deleting parent runs.\r\n\r\nSimilarly, selection of all child runs is very tricky now. A common use case is to select all hyperparameter runs for the \"Compare\" tool. Currently, there is no method for selecting all runs unless a unique ID is manually added to all siblings. This is partially because the nested runs don't seem to truly belong to the parent run. \r\n\r\n### Proposed Solution\r\nI'm not clear what the changes would be on the backend, but for user-facing changes, I would like:\r\n1) Always show nested runs underneath the parent, and load all nested runs simultaneously. \r\n2) Delete all nested runs when deleting the parent. \r\n3) Allow for comparing all sibling runs by selecting the parent instead of needing to manually select all nested runs. \r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1896/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1896/timeline","performed_via_github_app":null,"state_reason":null}