{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1669","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1669/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1669/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1669/events","html_url":"https://github.com/mlflow/mlflow/issues/1669","id":473366175,"node_id":"MDU6SXNzdWU0NzMzNjYxNzU=","number":1669,"title":"[BUG]mlflow models serve does not work in windows","user":{"login":"stfj77","id":23655703,"node_id":"MDQ6VXNlcjIzNjU1NzAz","avatar_url":"https://avatars.githubusercontent.com/u/23655703?v=4","gravatar_id":"","url":"https://api.github.com/users/stfj77","html_url":"https://github.com/stfj77","followers_url":"https://api.github.com/users/stfj77/followers","following_url":"https://api.github.com/users/stfj77/following{/other_user}","gists_url":"https://api.github.com/users/stfj77/gists{/gist_id}","starred_url":"https://api.github.com/users/stfj77/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stfj77/subscriptions","organizations_url":"https://api.github.com/users/stfj77/orgs","repos_url":"https://api.github.com/users/stfj77/repos","events_url":"https://api.github.com/users/stfj77/events{/privacy}","received_events_url":"https://api.github.com/users/stfj77/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-07-26T13:44:51Z","updated_at":"2022-03-19T17:58:37Z","closed_at":"2019-08-01T17:45:17Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: have used the add_n_model and xgboost model provided in samples\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10\r\n- **MLflow installed from (source or binary)**:  pip \r\n- **MLflow version (run ``mlflow --version``)**: 1.1.0\r\n- **Python version**: 3.7\r\n- **npm version, if running the dev UI**:\r\n- **Exact command to reproduce**:  `mlflow models serve --no-conda -m 'file'<some_path>/add_n_model`\r\n\r\n### Describe the problem\r\nIt is not possible to start serving the model, as gunicorn is used also for windows in the method serve in backend.py.\r\n(In case of the tracking UI there is waitress-serve used instead if  sys.platform == 'win32').\r\n\r\nFollowing fix made it currently working for me:\r\n\r\n```python\r\nif sys.platform == 'win32':\r\n        command = 'waitress-serve --expose-tracebacks --host={0} --port={1} --ident=mlflow mlflow.pyfunc.scoring_server.wsgi:app'.format(host, port)\r\n        else:\r\n            command = (\"gunicorn --timeout 60 -b {host}:{port} -w {nworkers} \"\r\n                      \"mlflow.pyfunc.scoring_server.wsgi:app\").format(\r\n                host=host,\r\n                port=port,\r\n                nworkers=self._nworkers)\r\n```\r\n\r\n\r\n### Code to reproduce issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n### Other info / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks,\r\nplease include the full traceback. Large logs and files should be attached.\r\n","closed_by":{"login":"ankit-db","id":52183359,"node_id":"MDQ6VXNlcjUyMTgzMzU5","avatar_url":"https://avatars.githubusercontent.com/u/52183359?v=4","gravatar_id":"","url":"https://api.github.com/users/ankit-db","html_url":"https://github.com/ankit-db","followers_url":"https://api.github.com/users/ankit-db/followers","following_url":"https://api.github.com/users/ankit-db/following{/other_user}","gists_url":"https://api.github.com/users/ankit-db/gists{/gist_id}","starred_url":"https://api.github.com/users/ankit-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankit-db/subscriptions","organizations_url":"https://api.github.com/users/ankit-db/orgs","repos_url":"https://api.github.com/users/ankit-db/repos","events_url":"https://api.github.com/users/ankit-db/events{/privacy}","received_events_url":"https://api.github.com/users/ankit-db/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1669/timeline","performed_via_github_app":null,"state_reason":"completed"}