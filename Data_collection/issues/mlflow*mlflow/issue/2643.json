{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2643","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2643/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2643/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2643/events","html_url":"https://github.com/mlflow/mlflow/issues/2643","id":588948673,"node_id":"MDU6SXNzdWU1ODg5NDg2NzM=","number":2643,"title":"[BUG] mistakenly consider the\"load_model\" method  in mlflow with the \"load\" method  in tensorflow  in the file named tensorflow.py  ","user":{"login":"shuangyumo","id":32772758,"node_id":"MDQ6VXNlcjMyNzcyNzU4","avatar_url":"https://avatars.githubusercontent.com/u/32772758?v=4","gravatar_id":"","url":"https://api.github.com/users/shuangyumo","html_url":"https://github.com/shuangyumo","followers_url":"https://api.github.com/users/shuangyumo/followers","following_url":"https://api.github.com/users/shuangyumo/following{/other_user}","gists_url":"https://api.github.com/users/shuangyumo/gists{/gist_id}","starred_url":"https://api.github.com/users/shuangyumo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuangyumo/subscriptions","organizations_url":"https://api.github.com/users/shuangyumo/orgs","repos_url":"https://api.github.com/users/shuangyumo/repos","events_url":"https://api.github.com/users/shuangyumo/events{/privacy}","received_events_url":"https://api.github.com/users/shuangyumo/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-27T07:45:46Z","updated_at":"2020-04-17T22:51:54Z","closed_at":"2020-04-17T22:51:54Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address. For help with debugging your code, please refer to [Stack Overflow](https://stackoverflow.com/questions/tagged/mlflow).\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: centos7\r\n- **MLflow installed from (source or binary)**: source\r\n- **MLflow version (run ``mlflow --version``)**: 1.6.0/1.7.2\r\n- **Python version**:3.6\r\n- **npm version, if running the dev UI**:\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\ndear :\r\n   there are some problems in the https://github.com/mlflow/mlflow/blob/master/mlflow/tensorflow.py\r\n\r\n(1) first \r\n   when we use the method \"load_model\", we can find the tip example, but there is a obvious problem\r\n   '''\r\n   there is a tip :\r\n    >>> import mlflow.tensorflow\r\n    >>> import tensorflow as tf\r\n    >>> tf_graph = tf.Graph()\r\n    >>> tf_sess = tf.Session(graph=tf_graph)\r\n    >>> with tf_graph.as_default():\r\n    >>>     signature_definition = mlflow.tensorflow.load_model(model_uri=\"model_uri\",\r\n    >>>                            tf_sess=tf_sess)\r\n    >>>     input_tensors = [tf_graph.get_tensor_by_name(input_signature.name)\r\n    >>>                      for _, input_signature in signature_def.inputs.items()]\r\n    >>>     output_tensors = [tf_graph.get_tensor_by_name(output_signature.name)\r\n    >>>                       for _, output_signature in signature_def.outputs.items()]\r\n   \r\n    '''\r\n\r\n   but there no method of signature_def,\r\n\r\n   the right tip which i revised :\r\n'''\r\n    >>> import mlflow.tensorflow\r\n    >>> import tensorflow as tf\r\n    >>> tf_graph = tf.Graph()\r\n    >>> tf_sess = tf.Session(graph=tf_graph)\r\n    >>> with tf_graph.as_default():\r\n    >>>     signature_definition = mlflow.tensorflow.load_model(model_uri=\"model_uri\",\r\n    >>>                            tf_sess=tf_sess)\r\n    >>>     input_tensors = [tf_graph.get_tensor_by_name(input_signature.name)\r\n    >>>                      for _, input_signature in signature_definition.inputs.items()]\r\n    >>>     output_tensors = [tf_graph.get_tensor_by_name(output_signature.name)\r\n    >>>                       for _, output_signature in signature_definition.outputs.items()]\r\n'''\r\n\r\n(2) second \r\n    we know that the method of \"load_model\" use the method \"_load_tensorflow_saved_model\",and the the method \"_load_tensorflow_saved_model\" use\r\nthe methond of \"tensorflow.saved_model.load\"\r\n    \r\n    seriously, we feel the \"load_model\" is similar to the methond of \"tensorflow.saved_model.load\", \r\nbut the former will get \r\n         tensorflow.saved_model.load(sess = sess,tags=tf_meta_graph_tags,export_dir=tf_saved_model_dir).signatures[tf_signature_def_key]\r\n         (we can use .signature_def or .signatures in different version)\r\nthe latter will get \r\n         tensorflow.saved_model.load(sess = sess,tags=tf_meta_graph_tags,export_dir=tf_saved_model_dir)\r\n\r\nthe difference between the former and latterr is very big. And many tensorflow user will mistakenly consider the two method is similar.\r\n\r\nbesides, the problem  i  want to say, Whether it can be  revised  according to the tensorflow.saved_model.load(sess = sess,tags=tf_meta_graph_tags,export_dir=tf_saved_model_dir) or not ?\r\n\r\n\r\n\r\n\r\n\r\n### Code to reproduce issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n### Other info / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks,\r\nplease include the full traceback. Large logs and files should be attached.\r\n","closed_by":{"login":"pogil","id":595774,"node_id":"MDQ6VXNlcjU5NTc3NA==","avatar_url":"https://avatars.githubusercontent.com/u/595774?v=4","gravatar_id":"","url":"https://api.github.com/users/pogil","html_url":"https://github.com/pogil","followers_url":"https://api.github.com/users/pogil/followers","following_url":"https://api.github.com/users/pogil/following{/other_user}","gists_url":"https://api.github.com/users/pogil/gists{/gist_id}","starred_url":"https://api.github.com/users/pogil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pogil/subscriptions","organizations_url":"https://api.github.com/users/pogil/orgs","repos_url":"https://api.github.com/users/pogil/repos","events_url":"https://api.github.com/users/pogil/events{/privacy}","received_events_url":"https://api.github.com/users/pogil/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2643/timeline","performed_via_github_app":null,"state_reason":"completed"}