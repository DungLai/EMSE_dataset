{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2049","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2049/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2049/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2049/events","html_url":"https://github.com/mlflow/mlflow/issues/2049","id":518639312,"node_id":"MDU6SXNzdWU1MTg2MzkzMTI=","number":2049,"title":"[BUG] OUT-OF-SATE DB SCHEMA (PostgreDB)","user":{"login":"1namta1","id":57264800,"node_id":"MDQ6VXNlcjU3MjY0ODAw","avatar_url":"https://avatars.githubusercontent.com/u/57264800?v=4","gravatar_id":"","url":"https://api.github.com/users/1namta1","html_url":"https://github.com/1namta1","followers_url":"https://api.github.com/users/1namta1/followers","following_url":"https://api.github.com/users/1namta1/following{/other_user}","gists_url":"https://api.github.com/users/1namta1/gists{/gist_id}","starred_url":"https://api.github.com/users/1namta1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1namta1/subscriptions","organizations_url":"https://api.github.com/users/1namta1/orgs","repos_url":"https://api.github.com/users/1namta1/repos","events_url":"https://api.github.com/users/1namta1/events{/privacy}","received_events_url":"https://api.github.com/users/1namta1/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-11-06T18:04:11Z","updated_at":"2022-06-02T01:20:35Z","closed_at":"2022-06-02T01:20:35Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address. For help with debugging your code, please refer to [Stack Overflow](https://stackoverflow.com/questions/tagged/mlflow).\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Redhat 7.2\r\n- **MLflow installed from (source or binary)**: pip install\r\n- **MLflow version (run ``mlflow --version``)**: 1.3.0\r\n- **Python version**: 3.7.2\r\n- **npm version, if running the dev UI**:\r\n- **Exact command to reproduce**:\r\nmlflow db upgrade postgresql://user:pass@server/db\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Include descriptions of the expected behavior and the actual behavior.\r\nI deployed mlflow on a docker container running in Kubernetes.\r\nWe are seeing this error: \"Detected out-of-date database schema (found version 2b4d017a5e9b, but expected 89d4b8295536).\r\n\r\nThe db upgrade did not generate any errors, but it did not update the 'alembic_version' table at all.\r\nI updated manually that table since the db upgrade gave no errors:\r\nupdate alembic_version set version='89d4b8295536'\r\n\r\nBut then I am getting the same error message with the version # reversed.\r\n\"Detected out-of-date database schema (found version 89d4b8295536 , but expected 2b4d017a5e9b).\r\n\r\n### Code to reproduce issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nmlflow db upgrade postgresql://user:pass@server/db\r\n\r\n### Other info / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks,\r\nplease include the full traceback. Large logs and files should be attached.\r\n\r\nThe DB upgrade command generates no errors, only the following\r\nINFO [alembic.runtime.migration] Context impl PostgresqlImpl\r\nINFO [alembic.runtime.migration] Will assume transaction DDL.\r\n\r\n","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2049/timeline","performed_via_github_app":null,"state_reason":"completed"}