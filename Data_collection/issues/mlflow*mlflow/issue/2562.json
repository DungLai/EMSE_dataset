{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2562","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2562/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2562/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2562/events","html_url":"https://github.com/mlflow/mlflow/issues/2562","id":577377766,"node_id":"MDU6SXNzdWU1NzczNzc3NjY=","number":2562,"title":"[BUG] NameError: name 'acc' is not defined","user":{"login":"LuposX","id":36456825,"node_id":"MDQ6VXNlcjM2NDU2ODI1","avatar_url":"https://avatars.githubusercontent.com/u/36456825?v=4","gravatar_id":"","url":"https://api.github.com/users/LuposX","html_url":"https://github.com/LuposX","followers_url":"https://api.github.com/users/LuposX/followers","following_url":"https://api.github.com/users/LuposX/following{/other_user}","gists_url":"https://api.github.com/users/LuposX/gists{/gist_id}","starred_url":"https://api.github.com/users/LuposX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuposX/subscriptions","organizations_url":"https://api.github.com/users/LuposX/orgs","repos_url":"https://api.github.com/users/LuposX/repos","events_url":"https://api.github.com/users/LuposX/events{/privacy}","received_events_url":"https://api.github.com/users/LuposX/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-07T18:05:07Z","updated_at":"2020-03-07T18:06:46Z","closed_at":"2020-03-07T18:06:32Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: Used with PyTorch-lightning\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 Pro\r\n- **MLflow installed from (source or binary)**: `python-pip`\r\n- **MLflow version (run ``mlflow --version``)**: 1.7.0\r\n- **Python version**: 3.7\r\n- **npm version, if running the dev UI**: /\r\n- **Exact command to reproduce**: /\r\n\r\n### Describe the problem\r\nWhen using mlflow with pytorch-lighning to log I get the following error:` NameError: name 'acc' is not defined`\r\n\r\n### Code to reproduce issue\r\n```\r\n    net = CNN()\r\n\r\n    mf_logger = loggers.MLFlowLogger(experiment_name=\"test\")\r\n    trainer = pl.Trainer(fast_dev_run=True, logger=mf_logger)\r\n    trainer.fit(net)\r\n    trainer.test()\r\n```\r\n\r\n### Other info / logs\r\n**Stacktrace:**\r\n```\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\python.exe C:/Users/schup/PycharmProjects/Workspace/pytorch_test/GAN/CNN_lightning.py\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\directives.py:62: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  assert isinstance(args, collections.Mapping), '{} args must be a dict with argument names as keys.'.format(name)\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\typemap.py:1: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  from collections import OrderedDict, Sequence, defaultdict\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\callbacks\\gradient_accumulation_scheduler.py:43: DeprecationWarning: Epochs indexing of `scheduling` starts from \"1\" until v0.6.x, but will start from \"0\" in v0.8.0.\r\n  ' but will start from \"0\" in v0.8.0.', DeprecationWarning)\r\nValidation sanity check:   0%|          | 0/1 [00:00<?, ?it/s]D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\directives.py:62: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  assert isinstance(args, collections.Mapping), '{} args must be a dict with argument names as keys.'.format(name)\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\typemap.py:1: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  from collections import OrderedDict, Sequence, defaultdict\r\nValidation sanity check: 50it [00:05,  9.83it/s]              D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\trainer\\evaluation_loop.py:312: DeprecationWarning: validation_end was deprecated in 0.7.0 and will be removed 1.0.0. Use validation_epoch_end instead.\r\n  warnings.warn(m, DeprecationWarning)\r\nEpoch 1:   0%|          | 0/2 [00:00<?, ?it/s]D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\trainer\\training_loop.py:280: DeprecationWarning: Displayed epoch numbers in the progress bar start from \"1\" until v0.6.x, but will start from \"0\" in v0.8.0.\r\n  ' but will start from \"0\" in v0.8.0.', DeprecationWarning)\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\directives.py:62: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  assert isinstance(args, collections.Mapping), '{} args must be a dict with argument names as keys.'.format(name)\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\typemap.py:1: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  from collections import OrderedDict, Sequence, defaultdict\r\nEpoch 1: : 50it [00:06,  7.29it/s, loss=2.301]\r\nValidating:   0%|          | 0/1 [00:00<?, ?it/s]D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\directives.py:62: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  assert isinstance(args, collections.Mapping), '{} args must be a dict with argument names as keys.'.format(name)\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\typemap.py:1: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  from collections import OrderedDict, Sequence, defaultdict\r\n\r\nEpoch 1: : 100it [00:12,  7.74it/s, loss=2.301]WARNING:root:Experiment with name test not found. Creating it.\r\nEpoch 1: : 100it [00:12,  7.74it/s, loss=2.301, v_num=8616c8db9c7643f5807bf1306fec48a4]\r\nEpoch 1: : 100it [00:12,  7.73it/s, loss=2.301, v_num=8616c8db9c7643f5807bf1306fec48a4]\r\nTesting:   0%|          | 0/1 [00:00<?, ?it/s]D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\directives.py:62: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  assert isinstance(args, collections.Mapping), '{} args must be a dict with argument names as keys.'.format(name)\r\nD:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\graphql\\type\\typemap.py:1: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\r\n  from collections import OrderedDict, Sequence, defaultdict\r\nTraceback (most recent call last):\r\n  File \"C:/Users/schup/PycharmProjects/Workspace/pytorch_test/GAN/CNN_lightning.py\", line 133, in <module>\r\n    trainer.test()\r\n  File \"D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\trainer\\trainer.py\", line 870, in test\r\n    self.run_evaluation(test_mode=True)\r\n  File \"D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\trainer\\evaluation_loop.py\", line 368, in run_evaluation\r\n    eval_results = self.evaluate(self.model, dataloaders, max_batches, test_mode)\r\n  File \"D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\trainer\\evaluation_loop.py\", line 262, in evaluate\r\n    output = self.evaluation_forward(model, batch, batch_idx, dataloader_idx, test_mode)\r\n  File \"D:\\Programme\\Anaconda3\\envs\\pytorch\\lib\\site-packages\\pytorch_lightning\\trainer\\evaluation_loop.py\", line 437, in evaluation_forward\r\n    output = model.test_step(*args)\r\n  File \"C:/Users/schup/PycharmProjects/Workspace/pytorch_test/GAN/CNN_lightning.py\", line 68, in test_step\r\n    return {\"test_acc\": acc}\r\nNameError: name 'acc' is not defined\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n","closed_by":{"login":"LuposX","id":36456825,"node_id":"MDQ6VXNlcjM2NDU2ODI1","avatar_url":"https://avatars.githubusercontent.com/u/36456825?v=4","gravatar_id":"","url":"https://api.github.com/users/LuposX","html_url":"https://github.com/LuposX","followers_url":"https://api.github.com/users/LuposX/followers","following_url":"https://api.github.com/users/LuposX/following{/other_user}","gists_url":"https://api.github.com/users/LuposX/gists{/gist_id}","starred_url":"https://api.github.com/users/LuposX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuposX/subscriptions","organizations_url":"https://api.github.com/users/LuposX/orgs","repos_url":"https://api.github.com/users/LuposX/repos","events_url":"https://api.github.com/users/LuposX/events{/privacy}","received_events_url":"https://api.github.com/users/LuposX/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2562/timeline","performed_via_github_app":null,"state_reason":"completed"}