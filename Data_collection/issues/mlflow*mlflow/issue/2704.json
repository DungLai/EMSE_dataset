{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2704","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2704/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2704/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2704/events","html_url":"https://github.com/mlflow/mlflow/issues/2704","id":599949102,"node_id":"MDU6SXNzdWU1OTk5NDkxMDI=","number":2704,"title":"[FR] Support explicit AWS credentials and multiple MLFLOW connections to s3","user":{"login":"lucagiovagnoli","id":4341034,"node_id":"MDQ6VXNlcjQzNDEwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4341034?v=4","gravatar_id":"","url":"https://api.github.com/users/lucagiovagnoli","html_url":"https://github.com/lucagiovagnoli","followers_url":"https://api.github.com/users/lucagiovagnoli/followers","following_url":"https://api.github.com/users/lucagiovagnoli/following{/other_user}","gists_url":"https://api.github.com/users/lucagiovagnoli/gists{/gist_id}","starred_url":"https://api.github.com/users/lucagiovagnoli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucagiovagnoli/subscriptions","organizations_url":"https://api.github.com/users/lucagiovagnoli/orgs","repos_url":"https://api.github.com/users/lucagiovagnoli/repos","events_url":"https://api.github.com/users/lucagiovagnoli/events{/privacy}","received_events_url":"https://api.github.com/users/lucagiovagnoli/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2022845866,"node_id":"MDU6TGFiZWwyMDIyODQ1ODY2","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/artifacts","name":"area/artifacts","color":"48eabc","default":false,"description":"Artifact stores and artifact logging"},{"id":2022865338,"node_id":"MDU6TGFiZWwyMDIyODY1MzM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/important-longterm","name":"priority/important-longterm","color":"534cb5","default":false,"description":"Important over the long term, but may not be staffed or may need multiple releases to complete."},{"id":2059147368,"node_id":"MDU6TGFiZWwyMDU5MTQ3MzY4","url":"https://api.github.com/repos/mlflow/mlflow/labels/needs%20committer%20feedback","name":"needs committer feedback","color":"b60205","default":false,"description":"The issue needs feedback from a committer"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-04-15T01:04:23Z","updated_at":"2021-07-09T15:04:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Describe the proposal\r\n* Support explicit AWS credentials and multiple MLFLOW connections to s3.\r\n\r\nRIght now the credentials come from ENV variables and there's no way to tell MLFLOW to change those credentials and instantiate a new boto3 Session.\r\n\r\nThis can be implemented easily by passing explicit AWS credentials and instantiating a boto3 Session rather than getting the default client. This can be a PATCH change, and can be backward compatible.\r\n\r\n### Motivation\r\nWe have various different environments at Yelp, each with their set of AWS credentials. \r\n* We'd like to be able to instantiate MLFlow clients for different environments.\r\n* It's hard for us to set environment variables in some of our live services.\r\n\r\n### Proposed Changes\r\nSimple internal change here: https://github.com/mlflow/mlflow/blob/60c71fae70aeff9841d60f63e023f129c02dec19/mlflow/store/artifact/s3_artifact_repo.py#L29 where we could instantiate an AWS Session rather than  getting the default client after cascading AWS credentials via function args.\r\n\r\nThe default boto3 client uses a global here https://boto3.amazonaws.com/v1/documentation/api/latest/_modules/boto3.html which gets the credentials from the user's home folder of from ENV variables but we'd like to instantiate a Session passing the credentials ourselves.\r\n\r\nNOTE: the problem is similar to https://github.com/mlflow/mlflow/issues/2458 but the solution I propose is different.  I am available to make the change if it's approved","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2704/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2704/timeline","performed_via_github_app":null,"state_reason":null}