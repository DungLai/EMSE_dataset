{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1905","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1905/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1905/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1905/events","html_url":"https://github.com/mlflow/mlflow/issues/1905","id":502410740,"node_id":"MDU6SXNzdWU1MDI0MTA3NDA=","number":1905,"title":"[BUG] Fix R lint in tests and code","user":{"login":"mparkhe","id":6900999,"node_id":"MDQ6VXNlcjY5MDA5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6900999?v=4","gravatar_id":"","url":"https://api.github.com/users/mparkhe","html_url":"https://github.com/mparkhe","followers_url":"https://api.github.com/users/mparkhe/followers","following_url":"https://api.github.com/users/mparkhe/following{/other_user}","gists_url":"https://api.github.com/users/mparkhe/gists{/gist_id}","starred_url":"https://api.github.com/users/mparkhe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mparkhe/subscriptions","organizations_url":"https://api.github.com/users/mparkhe/orgs","repos_url":"https://api.github.com/users/mparkhe/repos","events_url":"https://api.github.com/users/mparkhe/events{/privacy}","received_events_url":"https://api.github.com/users/mparkhe/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mparkhe","id":6900999,"node_id":"MDQ6VXNlcjY5MDA5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6900999?v=4","gravatar_id":"","url":"https://api.github.com/users/mparkhe","html_url":"https://github.com/mparkhe","followers_url":"https://api.github.com/users/mparkhe/followers","following_url":"https://api.github.com/users/mparkhe/following{/other_user}","gists_url":"https://api.github.com/users/mparkhe/gists{/gist_id}","starred_url":"https://api.github.com/users/mparkhe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mparkhe/subscriptions","organizations_url":"https://api.github.com/users/mparkhe/orgs","repos_url":"https://api.github.com/users/mparkhe/repos","events_url":"https://api.github.com/users/mparkhe/events{/privacy}","received_events_url":"https://api.github.com/users/mparkhe/received_events","type":"User","site_admin":false},"assignees":[{"login":"mparkhe","id":6900999,"node_id":"MDQ6VXNlcjY5MDA5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6900999?v=4","gravatar_id":"","url":"https://api.github.com/users/mparkhe","html_url":"https://github.com/mparkhe","followers_url":"https://api.github.com/users/mparkhe/followers","following_url":"https://api.github.com/users/mparkhe/following{/other_user}","gists_url":"https://api.github.com/users/mparkhe/gists{/gist_id}","starred_url":"https://api.github.com/users/mparkhe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mparkhe/subscriptions","organizations_url":"https://api.github.com/users/mparkhe/orgs","repos_url":"https://api.github.com/users/mparkhe/repos","events_url":"https://api.github.com/users/mparkhe/events{/privacy}","received_events_url":"https://api.github.com/users/mparkhe/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-10-04T03:56:10Z","updated_at":"2019-12-24T05:37:27Z","closed_at":"2019-12-24T05:37:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address. For help with debugging your code, please refer to [Stack Overflow](https://stackoverflow.com/questions/tagged/mlflow).\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: -\r\n- **MLflow installed from (source or binary)**: source\r\n- **MLflow version (run ``mlflow --version``)**: `master`\r\n- **Python version**: N/A\r\n- **npm version, if running the dev UI**: N/A\r\n- **Exact command to reproduce**: run R tests \r\n```\r\ncd mldlow/R/mlflow/tests\r\nNOT_CRAN=true LINTR_COMMENT_BOT=false Rscript ../.travis.R\r\n```\r\n\r\n### Describe the problem\r\n`R` tests have been broken on OSS due to \r\n1. strict lint checker\r\n2. TF version upgrade.\r\n\r\n### Code to reproduce issue\r\nno code change required\r\n\r\n### Other info / logs\r\n\r\n```\r\n── 2. Failure: mlflow package conforms to lintr::lint_package() style (@test-sty\r\nNot lint free\r\nR/databricks-utils.R:3:1: style: Variable and function name style should be snake_case.\r\nnew_mlflow_client.mlflow_databricks <- function(tracking_uri) {\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/databricks-utils.R:17:1: style: Variable and function name style should be snake_case.\r\nDATABRICKS_CONFIG_FILE <- \"DATABRICKS_CONFIG_FILE\"\r\n^~~~~~~~~~~~~~~~~~~~~~\r\nR/databricks-utils.R:34:47: style: Remove spaces before the left parenthesis in a function call.\r\n    names(res) <- lapply(names(res), function (x) config_variable_map[[x]])\r\n                                              ^\r\nR/databricks-utils.R:53:32: style: There should be a space between right parenthesis and an opening curly brace.\r\n  if (!file.exists(config_path)){\r\n                               ^~\r\nR/databricks-utils.R:101:1: style: Variable and function name style should be snake_case.\r\nmlflow_get_run_context.mlflow_databricks_client <- function(client, experiment_id, ...) {\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/databricks-utils.R:127:1: style: Variable and function name style should be snake_case.\r\nMLFLOW_DATABRICKS_TAGS <- list(\r\n^~~~~~~~~~~~~~~~~~~~~~\r\nR/model-crate.R:3:1: style: Variable and function name style should be snake_case.\r\nmlflow_save_model.crate <- function(model, path, ...) {\r\n^~~~~~~~~~~~~~~~~~~~~~~\r\nR/model-crate.R:25:1: style: Variable and function name style should be snake_case.\r\nmlflow_load_flavor.mlflow_flavor_crate <- function(flavor, model_path) {\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/model-crate.R:30:1: style: Variable and function name style should be snake_case.\r\nmlflow_predict.crate <- function(model, data, ...) {\r\n^~~~~~~~~~~~~~~~~~~~\r\nR/model-keras.R:4:1: style: Variable and function name style should be snake_case.\r\nmlflow_save_model.keras.engine.training.Model <- function(model,\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/model-keras.R:49:1: style: Variable and function name style should be snake_case.\r\nmlflow_load_flavor.mlflow_flavor_keras <- function(flavor, model_path) {\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/model-keras.R:58:1: style: Variable and function name style should be snake_case.\r\nmlflow_predict.keras.engine.training.Model <- function(model, data, ...) {\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/model-serve.R:185:20: style: Do not place spaces around code in parentheses or square brackets.\r\n      df <- switch( content_type,\r\n                   ^\r\nR/tracking-client.R:31:35: style: Do not place spaces around code in parentheses or square brackets.\r\nnew_mlflow_host_creds <- function( host = NA, username = NA, password = NA, token = NA,\r\n                                  ^\r\nR/tracking-client.R:52:13: style: Remove spaces before the left parenthesis in a function call.\r\n      paste (\"host = \", mlflow_host_creds$host, sep = \"\")\r\n            ^\r\nR/tracking-client.R:57:13: style: Remove spaces before the left parenthesis in a function call.\r\n      paste (\"username = \", mlflow_host_creds$username, sep = \"\")\r\n            ^\r\nR/tracking-client.R:87:52: style: Remove spaces before the left parenthesis in a function call.\r\n  new_mlflow_client_impl(get_host_creds = function () {\r\n                                                   ^\r\nR/tracking-client.R:104:30: style: Do not place spaces around code in parentheses or square brackets.\r\n                    sepc = \"\" )\r\n                             ^\r\nR/tracking-client.R:112:30: style: Remove spaces before the left parenthesis in a function call.\r\n  get_host_creds <- function () {\r\n                             ^\r\nR/tracking-rest.R:34:13: style: Variable and function name style should be snake_case.\r\n    headers$Authorization <- auth_header\r\n            ^~~~~~~~~~~~~\r\nR/tracking-rest.R:36:11: style: Variable and function name style should be snake_case.\r\n  headers$`User-Agent` <- paste(\"mlflow-r-client\", utils::packageVersion(\"mlflow\"), sep = \"/\")\r\n          ^~~~~~~~~~~~\r\nR/tracking-rest.R:49:25: style: Do not place spaces around code in parentheses or square brackets.\r\nmlflow_rest <- function( ..., client, query = NULL, data = NULL, verb = \"GET\", version = \"2.0\",\r\n                        ^\r\nR/tracking-rest.R:63:11: style: Do not place spaces around code in parentheses or square brackets.\r\n      GET( api_url, query = query, mlflow_rest_timeout(), config = rest_config$config,\r\n          ^\r\nR/tracking-rest.R:66:21: style: There should be a space between right parenthesis and an opening curly brace.\r\n    POST = function(){\r\n                    ^~\r\nR/tracking-rest.R:67:12: style: Do not place spaces around code in parentheses or square brackets.\r\n      POST( api_url,\r\n           ^\r\nR/tracking-runs.R:298:1: style: Lines should not be more than 120 characters.\r\n#'   The syntax is a subset of SQL which allows only ANDing together binary operations between a param/metric/tag and a constant.\r\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nR/tracking-runs.R:613:1: style: Variable and function name style should be snake_case.\r\nMLFLOW_TAGS <- list(\r\n^~~~~~~~~~~\r\nR/tracking-utils.R:111:1: style: Variable and function name style should be snake_case.\r\nMLFLOW_SOURCE_TYPE <- list(\r\n^~~~~~~~~~~~~~~~~~\r\ntests/testthat/test_keras_model.R:6:3: style: Variable and function name style should be snake_case.\r\n  PATH <- Sys.getenv(\"PATH\", \"\") # keras package modifies PATH which breaks other tests\r\n  ^~~~\r\ntests/testthat/test-client.R:111:28: style: Do not place spaces around code in parentheses or square brackets.\r\n      mlflow:::mlflow_rest( \"runs\", \"create\", client = mock_client, verb = \"POST\"),\r\n                           ^\r\ntests/testthat/test-client.R:127:28: style: Do not place spaces around code in parentheses or square brackets.\r\n      mlflow:::mlflow_rest( \"runs\", \"create\", client = mock_client, verb = \"GET\"),\r\n                           ^\r\ntests/testthat/test-client.R:143:28: style: Do not place spaces around code in parentheses or square brackets.\r\n      mlflow:::mlflow_rest( \"runs\", \"create\", client = mock_client, verb = \"POST\"),\r\n                           ^\r\ntests/testthat/test-databricks-utils.R:8:39: style: Do not place spaces around code in parentheses or square brackets.\r\n      config <- new_databricks_config( config_source = \"env\", config_vars = config_vars)\r\n                                      ^\r\ntests/testthat/test-databricks-utils.R:141:15: style: Do not place spaces around code in parentheses or square brackets.\r\n  with_envvar( env, {\r\n              ^\r\ntests/testthat/test-run.R:17:59: style: There should be a space between right parenthesis and an opening curly brace.\r\n      with_mock(.env = \"mlflow\", mlflow_cli = function(...){\r\n                                                          ^~\r\ntests/testthat/test-run.R:27:59: style: There should be a space between right parenthesis and an opening curly brace.\r\n      with_mock(.env = \"mlflow\", mlflow_cli = function(...){\r\n                                                          ^~\r\ntests/testthat/test-run.R:37:59: style: There should be a space between right parenthesis and an opening curly brace.\r\n      with_mock(.env = \"mlflow\", mlflow_cli = function(...){\r\n                                                          ^~\r\n2019/10/04 03:23:36 INFO mlflow.store.artifact.cli: Logged artifact from local file /tmp/RtmpMrdUZZ/temp-directory/my-file to artifact_path=None\r\n```\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1905/timeline","performed_via_github_app":null,"state_reason":"completed"}