{"url":"https://api.github.com/repos/mlflow/mlflow/issues/709","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/709/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/709/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/709/events","html_url":"https://github.com/mlflow/mlflow/issues/709","id":379969457,"node_id":"MDU6SXNzdWUzNzk5Njk0NTc=","number":709,"title":"AttributeError: module 'mlflow.tensorflow' has no attribute 'log_saved_model'","user":{"login":"jimthompson5802","id":1425269,"node_id":"MDQ6VXNlcjE0MjUyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1425269?v=4","gravatar_id":"","url":"https://api.github.com/users/jimthompson5802","html_url":"https://github.com/jimthompson5802","followers_url":"https://api.github.com/users/jimthompson5802/followers","following_url":"https://api.github.com/users/jimthompson5802/following{/other_user}","gists_url":"https://api.github.com/users/jimthompson5802/gists{/gist_id}","starred_url":"https://api.github.com/users/jimthompson5802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimthompson5802/subscriptions","organizations_url":"https://api.github.com/users/jimthompson5802/orgs","repos_url":"https://api.github.com/users/jimthompson5802/repos","events_url":"https://api.github.com/users/jimthompson5802/events{/privacy}","received_events_url":"https://api.github.com/users/jimthompson5802/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-11-12T22:00:42Z","updated_at":"2018-11-14T17:44:23Z","closed_at":"2018-11-14T17:44:23Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**:  Attempting to run example in `mlflow/mlflow-apps/apps/dnn-regression`\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Running Docker Container (see Dockerfile) later in this posting on MacOS 10.14.1\r\n- **MLflow installed from (source or binary)**:  Installed from binary \r\n- **MLflow version (run ``mlflow --version``)**:  mlflow, version 0.8.0\r\n- **Python version**: Python 3.6.2 :: Anaconda, Inc.\r\n- **npm version (if running the dev UI): N/A\r\n- **Exact command to reproduce**:\r\n```\r\n# create work area\r\nmkdir my-apps\r\n\r\n# navigate to mlflow-apps root directory and save location in environment variable\r\ncd mlflow-apps/\r\nexport PROJECT_DIR=`pwd`\r\n\r\n# navigate to work area\r\ncd ../my_apps\r\n\r\n# create temporary directory\r\ntemp=\"$(mktemp -d)\"\r\n\r\n# download training data\r\nmlflow run $PROJECT_DIR -P dest-dir=$temp\r\n\r\n# perform model training\r\nmlflow run $PROJECT_DIR/apps/dnn-regression -P train=\"$temp/train_diamonds.parquet\" -P test=\"$temp/test_diamonds.parquet\" -P label-col=\"price\" -P hidden-units=\"10,10\" -P model-dir=\".\" -e main\r\n\r\n```\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in MLflow or a feature request.\r\nReceived this error message:\r\n```\r\nTraceback (most recent call last):\r\n  File \"main_dnn.py\", line 56, in <module>\r\n    args.training_data_path, args.test_data_path)\r\n  File \"/home/ds_user/my_workarea/mlflow-apps/apps/dnn-regression/train_dnn.py\", line 99, in train\r\n    tensorflow.log_saved_model(saved_model_dir=saved_estimator_path,\r\nAttributeError: module 'mlflow.tensorflow' has no attribute 'log_saved_model'\r\n```\r\nI've attempted to find the function `tensorflow.log_saved_model()` definition but unable to find the definition.  As a result, I'm unsure how to resolve the problem\r\n\r\n### Source code / logs\r\nRun-time Log\r\n```\r\nds_user@0487fbc87e20:~/my_workarea/my_apps$ mlflow run $PROJECT_DIR/apps/dnn-regression -P train=\"$temp/train_diamonds.parquet\" -P test=\"$temp/test_diamonds.parquet\" -P label-col=\"price\" -P hidden-units=\"10,10\" -P model-dir=\".\" -e main\r\n=== Created directory /tmp/tmpk8082sjc for downloading remote URIs passed to arguments of type 'path' ===\r\n=== Running command 'source activate mlflow-3aeddf0774950c8857851841ef8b38289de49425 && python main_dnn.py /home/ds_user/my_workarea/my_apps /tmp/tmp.NQAPCCKBjL/train_diamonds.parquet /tmp/tmp.NQAPCCKBjL/test_diamonds.parquet 10,10 100 128 price' in run with ID '7d503fbab6d44646944129aab772ffe9' === \r\ntrain:                 /tmp/tmp.NQAPCCKBjL/train_diamonds.parquet\r\ntest:                  /tmp/tmp.NQAPCCKBjL/test_diamonds.parquet\r\nhidden-units:          10\r\nhidden-units:          10\r\nsteps:                 100\r\nbatch_size:            128\r\nlabel-col:             price\r\nfeat-cols:             carat\r\nfeat-cols:             cut\r\nfeat-cols:             color\r\nfeat-cols:             clarity\r\nfeat-cols:             depth\r\nfeat-cols:             table\r\nfeat-cols:             x\r\nfeat-cols:             y\r\nfeat-cols:             z\r\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmpfw816x4c\r\n2018-11-12 21:30:00.148085: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\nTest RMSE: 3900.4166444112097\r\nTraining Set R2 -0.004844327292756523\r\nTest Set R2 0.03431445976217051\r\nWARNING:tensorflow:Export includes no default signature!\r\nTraceback (most recent call last):\r\n  File \"main_dnn.py\", line 56, in <module>\r\n    args.training_data_path, args.test_data_path)\r\n  File \"/home/ds_user/my_workarea/mlflow-apps/apps/dnn-regression/train_dnn.py\", line 99, in train\r\n    tensorflow.log_saved_model(saved_model_dir=saved_estimator_path,\r\nAttributeError: module 'mlflow.tensorflow' has no attribute 'log_saved_model'\r\n=== Run (ID '7d503fbab6d44646944129aab772ffe9') failed ===\r\n```\r\n### Dockerfile:\r\n```\r\nFROM continuumio/miniconda3:4.3.27\r\n\r\n#\r\n# get development tools needed for xgboost\r\n#\r\nRUN apt-get update -y && apt-get install -y build-essential     \r\n\r\n#\r\n# install requirements for MLFLOW\r\n#\r\nCOPY dev-requirements.txt /tmp/\r\nRUN /opt/conda/bin/pip install --requirement /tmp/dev-requirements.txt \\\r\n    && rm /tmp/dev-requirements.txt\r\n\r\n# specify run-time user\r\n# make uid/gid match ec2-user on AWS\r\n# on MacOS docker mask uid/gid in and out of container\r\nRUN groupadd -g 500 ds_user && \\\r\n    useradd -u 500 -g 500 ds_user && \\\r\n    mkdir -p /home/ds_user && \\\r\n    chown ds_user:ds_user /home/ds_user && \\\r\n    mkdir /my_workarea && \\\r\n    chown ds_user:ds_user /my_workarea\r\n\r\n# set user\r\nUSER ds_user\r\n```\r\n\r\n#### dev-requirements.txt file used in above COPY operation\r\n```\r\n#\r\n# based on list from mlflow-apps\r\n#\r\nprospector[with_pyroma]==0.12.7\r\npylint==1.8.2\r\nxgboost\r\npytest\r\npyarrow\r\npandas\r\nnumpy\r\nrstcheck\r\nscikit-learn\r\nmlflow\r\ntensorflow\r\n```\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks,\r\nplease include the full traceback. Large logs and files should be attached.\r\nTry to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n","closed_by":{"login":"jimthompson5802","id":1425269,"node_id":"MDQ6VXNlcjE0MjUyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1425269?v=4","gravatar_id":"","url":"https://api.github.com/users/jimthompson5802","html_url":"https://github.com/jimthompson5802","followers_url":"https://api.github.com/users/jimthompson5802/followers","following_url":"https://api.github.com/users/jimthompson5802/following{/other_user}","gists_url":"https://api.github.com/users/jimthompson5802/gists{/gist_id}","starred_url":"https://api.github.com/users/jimthompson5802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimthompson5802/subscriptions","organizations_url":"https://api.github.com/users/jimthompson5802/orgs","repos_url":"https://api.github.com/users/jimthompson5802/repos","events_url":"https://api.github.com/users/jimthompson5802/events{/privacy}","received_events_url":"https://api.github.com/users/jimthompson5802/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/709/timeline","performed_via_github_app":null,"state_reason":"completed"}