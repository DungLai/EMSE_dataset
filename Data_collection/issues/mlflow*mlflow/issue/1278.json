{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1278","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1278/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1278/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1278/events","html_url":"https://github.com/mlflow/mlflow/issues/1278","id":444670352,"node_id":"MDU6SXNzdWU0NDQ2NzAzNTI=","number":1278,"title":"`schema.json` may not be needed for MLeap flavor","user":{"login":"kevinykuo","id":5582151,"node_id":"MDQ6VXNlcjU1ODIxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/5582151?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinykuo","html_url":"https://github.com/kevinykuo","followers_url":"https://api.github.com/users/kevinykuo/followers","following_url":"https://api.github.com/users/kevinykuo/following{/other_user}","gists_url":"https://api.github.com/users/kevinykuo/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinykuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinykuo/subscriptions","organizations_url":"https://api.github.com/users/kevinykuo/orgs","repos_url":"https://api.github.com/users/kevinykuo/repos","events_url":"https://api.github.com/users/kevinykuo/events{/privacy}","received_events_url":"https://api.github.com/users/kevinykuo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"assignees":[{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2019-05-15T22:18:20Z","updated_at":"2019-09-17T22:14:55Z","closed_at":"2019-09-17T22:14:55Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Currently saving the mleap model flavor involves writing a `schema.json` file https://github.com/mlflow/mlflow/blob/4d1469e6e45db8c7e0a572c5c63e397cb56cc82b/mlflow/mleap.py#L159-L162\r\nThis is then used from Java during scoring\r\nhttps://github.com/mlflow/mlflow/blob/1e0c2bdda70d195c0eb5aa4e3c76e2d51ae98361/mlflow/java/scoring/src/main/java/org/mlflow/sagemaker/PandasSplitOrientedDataFrame.java#L86-L105\r\nHowever, since this schema is extracted from the input data frame, it can contain more columns than is needed. For example, the example at \r\nhttps://github.com/mlflow/mlflow/blob/4d1469e6e45db8c7e0a572c5c63e397cb56cc82b/mlflow/mleap.py#L41-L73\r\nwrites the following `schema.json`:\r\n```\r\n{\r\n    \"fields\": [\r\n        {\r\n            \"name\": \"id\",\r\n            \"type\": \"long\"\r\n        },\r\n        {\r\n            \"name\": \"text\",\r\n            \"type\": \"string\"\r\n        }\r\n    ]\r\n}\r\n```\r\nBut `\"id\"` in this case is superfluous.\r\n\r\nWe can consider getting rid of the `schema.json` file and instead extract the schema from the loaded transformer object\r\nhttps://github.com/combust/mleap/blob/d276c1c800277a1edcf30dda6e8559c7413b21f8/mleap-runtime/src/main/scala/ml/combust/mleap/runtime/frame/Transformer.scala#L43-L49\r\n\r\ncc @dbczumar ","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1278/timeline","performed_via_github_app":null,"state_reason":"completed"}