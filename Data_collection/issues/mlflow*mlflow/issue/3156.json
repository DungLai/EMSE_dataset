{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3156","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/3156/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/3156/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/3156/events","html_url":"https://github.com/mlflow/mlflow/issues/3156","id":663864872,"node_id":"MDU6SXNzdWU2NjM4NjQ4NzI=","number":3156,"title":"[BUG] Import error with mlflow.onnx with version 1.10.0 but not in later versions","user":{"login":"jackhart","id":46544333,"node_id":"MDQ6VXNlcjQ2NTQ0MzMz","avatar_url":"https://avatars.githubusercontent.com/u/46544333?v=4","gravatar_id":"","url":"https://api.github.com/users/jackhart","html_url":"https://github.com/jackhart","followers_url":"https://api.github.com/users/jackhart/followers","following_url":"https://api.github.com/users/jackhart/following{/other_user}","gists_url":"https://api.github.com/users/jackhart/gists{/gist_id}","starred_url":"https://api.github.com/users/jackhart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackhart/subscriptions","organizations_url":"https://api.github.com/users/jackhart/orgs","repos_url":"https://api.github.com/users/jackhart/repos","events_url":"https://api.github.com/users/jackhart/events{/privacy}","received_events_url":"https://api.github.com/users/jackhart/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2022845866,"node_id":"MDU6TGFiZWwyMDIyODQ1ODY2","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/artifacts","name":"area/artifacts","color":"48eabc","default":false,"description":"Artifact stores and artifact logging"},{"id":2022848043,"node_id":"MDU6TGFiZWwyMDIyODQ4MDQz","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/models","name":"area/models","color":"48eabc","default":false,"description":"MLmodel format, model serialization/deserialization, flavors"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-07-22T15:47:33Z","updated_at":"2020-08-06T09:35:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Willingness to contribute\r\n\r\nNo. I cannot contribute a bug fix at this time.\r\n\r\n### System information\r\n- OS Platform and Distribution: Linux Ubuntu 16.04.6\r\n- MLflow version 1.10.0\r\n- Python version: 3.7.3\r\n\r\n### Describe the problem\r\n\r\nI need the newest version of MLflow due to some dependencies between MLFlow and Databricks platform releases.  However, importing mlflow.onnx results in an ImportError.  Specifically, the error is: \r\n\r\nImportError: cannot import name 'NumpyEncoder' from 'mlflow.utils.proto_json_utils'\r\n\r\nI'm able to import mlflow.onnx with version 1.8.0 and below.\r\n\r\n### Code to reproduce issue\r\n\r\n`import mlflow.onnx`\r\n\r\n### Other info / logs\r\n\r\n---------------------------------------------------------------------------\r\nImportError                               Traceback (most recent call last)\r\n<command-18347> in <module>\r\n      1 # newer versions of mlflow run into import error\r\n----> 2 import mlflow.onnx\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/onnx.py in <module>\r\n     14 import pandas as pd\r\n     15 \r\n---> 16 from mlflow import pyfunc\r\n     17 from mlflow.models import Model\r\n     18 from mlflow.models.model import MLMODEL_FILE_NAME\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/pyfunc/__init__.py in <module>\r\n    211 from typing import Any, Union\r\n    212 import mlflow\r\n--> 213 import mlflow.pyfunc.model\r\n    214 import mlflow.pyfunc.utils\r\n    215 from mlflow.models import Model, ModelSignature, ModelInputExample\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/pyfunc/model.py in <module>\r\n     15 import mlflow.utils\r\n     16 from mlflow.exceptions import MlflowException\r\n---> 17 from mlflow.models import Model\r\n     18 from mlflow.models.model import MLMODEL_FILE_NAME\r\n     19 from mlflow.protos.databricks_pb2 import INVALID_PARAMETER_VALUE\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/models/__init__.py in <module>\r\n     20 from .flavor_backend import FlavorBackend\r\n     21 from .signature import ModelSignature, infer_signature\r\n---> 22 from .utils import ModelInputExample\r\n     23 \r\n     24 __all__ = [\"Model\", \"ModelSignature\", \"infer_signature\", \"FlavorBackend\"]\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/models/utils.py in <module>\r\n      9 from mlflow.models import Model\r\n     10 from mlflow.types.utils import TensorsNotSupportedException\r\n---> 11 from mlflow.utils.proto_json_utils import NumpyEncoder, _dataframe_from_json\r\n     12 \r\n     13 ModelInputExample = Union[pd.DataFrame, np.ndarray, dict, list]\r\n\r\nImportError: cannot import name 'NumpyEncoder' from 'mlflow.utils.proto_json_utils' (/databricks/python/lib/python3.7/site-packages/mlflow/utils/proto_json_utils.py)\r\n\r\n\r\n\r\n### What component(s), interfaces, languages, and integrations does this bug affect?\r\nComponents \r\n- [x] `area/artifacts`: Artifact stores and artifact logging\r\n- [ ] `area/build`: Build and test infrastructure for MLflow\r\n- [ ] `area/docs`: MLflow documentation pages\r\n- [ ] `area/examples`: Example code\r\n- [ ] `area/model-registry`: Model Registry service, APIs, and the fluent client calls for\r\n\r\nModel Registry\r\n- [x] `area/models`: MLmodel format, model serialization/deserialization, flavors\r\n- [ ] `area/projects`: MLproject format, project running backends\r\n- [ ] `area/scoring`: Local serving, model deployment tools, spark UDFs\r\n- [ ] `area/tracking`: Tracking Service, tracking client APIs, autologging\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/3156/timeline","performed_via_github_app":null,"state_reason":null}