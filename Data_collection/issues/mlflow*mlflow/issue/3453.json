{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3453","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/3453/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/3453/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/3453/events","html_url":"https://github.com/mlflow/mlflow/issues/3453","id":707728207,"node_id":"MDU6SXNzdWU3MDc3MjgyMDc=","number":3453,"title":"[BUG] Storing artifacts to amazon S3 storage does not work","user":{"login":"NemanjaML","id":61468206,"node_id":"MDQ6VXNlcjYxNDY4MjA2","avatar_url":"https://avatars.githubusercontent.com/u/61468206?v=4","gravatar_id":"","url":"https://api.github.com/users/NemanjaML","html_url":"https://github.com/NemanjaML","followers_url":"https://api.github.com/users/NemanjaML/followers","following_url":"https://api.github.com/users/NemanjaML/following{/other_user}","gists_url":"https://api.github.com/users/NemanjaML/gists{/gist_id}","starred_url":"https://api.github.com/users/NemanjaML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NemanjaML/subscriptions","organizations_url":"https://api.github.com/users/NemanjaML/orgs","repos_url":"https://api.github.com/users/NemanjaML/repos","events_url":"https://api.github.com/users/NemanjaML/events{/privacy}","received_events_url":"https://api.github.com/users/NemanjaML/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1988875934,"node_id":"MDU6TGFiZWwxOTg4ODc1OTM0","url":"https://api.github.com/repos/mlflow/mlflow/labels/needs%20author%20feedback","name":"needs author feedback","color":"fef2c0","default":false,"description":"Issue is waiting for the author to respond"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-09-23T22:53:29Z","updated_at":"2020-09-30T21:29:21Z","closed_at":"2020-09-30T21:29:21Z","author_association":"NONE","active_lock_reason":null,"body":"Hi everyone,\r\n\r\nDue to instructions from the official docs at the following link: https://www.mlflow.org/docs/latest/tracking.html#amazon-s3-and-s3-compatible-storage, I tried to make connection between mlflow and amazon s3 storage, for the purpose of storing the artifacts remotely.\r\n\r\nIn the official example sklearn_elasticnet_wine I added the following line:\r\n\r\n**`mlflow.set_tracking_uri('s3://os-ai-team/mlflow/sklearn')`**\r\n\r\nAnd during the execution, I got the following error:\r\n\r\n`Traceback (most recent call last):`\r\n  `File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\registry.py\", line 78, in get_store_builder`\r\n    `store_builder = self._registry[scheme]`\r\n`KeyError: 's3'`\r\n\r\n`During handling of the above exception, another exception occurred:`\r\n\r\n`Traceback (most recent call last):\r\n  File \"C:/Users/stankovic/Projects/mlflow/examples/sklearn_elasticnet_wine/train.py\", line 60, in <module>\r\n    with mlflow.start_run():\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\fluent.py\", line 159, in start_run\r\n    active_run_obj = MlflowClient().create_run(experiment_id=exp_id_for_run, tags=tags)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\client.py\", line 55, in __init__\r\n    self._tracking_client = TrackingServiceClient(final_tracking_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\_tracking_service\\client.py\", line 39, in __init__\r\n    self.store = utils._get_store(self.tracking_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\_tracking_service\\utils.py\", line 127, in _get_store\r\n    return _tracking_store_registry.get_store(store_uri, artifact_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\_tracking_service\\registry.py\", line 37, in get_store\r\n    builder = self.get_store_builder(store_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\registry.py\", line 81, in get_store_builder\r\n    unsupported_uri=store_uri, supported_uri_schemes=list(self._registry.keys())\r\nmlflow.tracking.registry.UnsupportedModelRegistryStoreURIException:  Model registry functionality is unavailable; got unsupported URI 's3://os-ai-team/mlflow/sklearn' for model registry data storage. Supported URI schemes are: ['', 'file', 'databricks', 'http', 'https', 'postgresql', 'mysql', 'sqlite', 'mssql']. See https://www.mlflow.org/docs/latest/tracking.html#storage for how to run an MLflow server against one of the supported backend storage locations.\r\nError in atexit._run_exitfuncs:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\registry.py\", line 78, in get_store_builder\r\n    store_builder = self._registry[scheme]\r\nKeyError: 's3'`\r\n\r\n`During handling of the above exception, another exception occurred:`\r\n\r\n`Traceback (most recent call last):\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tensorflow.py\", line 583, in _flush_queue\r\n    client = mlflow.tracking.MlflowClient()\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\client.py\", line 55, in __init__\r\n    self._tracking_client = TrackingServiceClient(final_tracking_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\_tracking_service\\client.py\", line 39, in __init__\r\n    self.store = utils._get_store(self.tracking_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\_tracking_service\\utils.py\", line 127, in _get_store\r\n    return _tracking_store_registry.get_store(store_uri, artifact_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\_tracking_service\\registry.py\", line 37, in get_store\r\n    builder = self.get_store_builder(store_uri)\r\n  File \"C:\\Users\\stankovic\\Projects\\mlflow\\mlflow\\tracking\\registry.py\", line 81, in get_store_builder\r\n    unsupported_uri=store_uri, supported_uri_schemes=list(self._registry.keys())\r\nmlflow.tracking.registry.UnsupportedModelRegistryStoreURIException:  Model registry functionality is unavailable; got unsupported URI 's3://os-ai-team/mlflow/sklearn' for model registry data storage. Supported URI schemes are: ['', 'file', 'databricks', 'http', 'https', 'postgresql', 'mysql', 'sqlite', 'mssql']. See https://www.mlflow.org/docs/latest/tracking.html#storage for how to run an MLflow server against one of the supported backend storage locations.`\r\n\r\n\r\n\r\nI've also tried with:\r\n\r\n**`mlflow run . --no-conda --storage-dir s3://os-ai-team/mlflow/sklearn`**\r\n\r\nbut the error was:\r\n\r\n`Traceback (most recent call last):\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\stankovic\\Anaconda3\\envs\\py37\\Scripts\\mlflow.exe\\__main__.py\", line 7, in <module>\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\click\\core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\click\\core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\click\\core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\click\\core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\click\\core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\mlflow\\cli.py\", line 187, in run\r\n    run_id=run_id,\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\mlflow\\projects\\__init__.py\", line 284, in run\r\n    synchronous=synchronous,\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\mlflow\\projects\\__init__.py\", line 107, in _run\r\n    experiment_id,\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\mlflow\\projects\\backend\\local.py\", line 95, in run\r\n    command_args += get_entry_point_command(project, entry_point, params, storage_dir)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\mlflow\\projects\\utils.py\", line 284, in get_entry_point_command\r\n    storage_dir_for_run = _get_storage_dir(storage_dir)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\site-packages\\mlflow\\projects\\utils.py\", line 64, in _get_storage_dir\r\n    os.makedirs(storage_dir)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\os.py\", line 213, in makedirs\r\n    makedirs(head, exist_ok=exist_ok)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\os.py\", line 213, in makedirs\r\n    makedirs(head, exist_ok=exist_ok)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\os.py\", line 213, in makedirs\r\n    makedirs(head, exist_ok=exist_ok)\r\n  File \"c:\\users\\stankovic\\anaconda3\\envs\\py37\\lib\\os.py\", line 223, in makedirs\r\n    mkdir(name, mode)\r\nOSError: [WinError 123] The filename, directory name, or volume label syntax is incorrect: 's3:'`\r\n\r\nIs it even possible to do?\r\n\r\nNote: I am using Windows10\r\n\r\nThanks in advance,\r\nNemanja.","closed_by":{"login":"NemanjaML","id":61468206,"node_id":"MDQ6VXNlcjYxNDY4MjA2","avatar_url":"https://avatars.githubusercontent.com/u/61468206?v=4","gravatar_id":"","url":"https://api.github.com/users/NemanjaML","html_url":"https://github.com/NemanjaML","followers_url":"https://api.github.com/users/NemanjaML/followers","following_url":"https://api.github.com/users/NemanjaML/following{/other_user}","gists_url":"https://api.github.com/users/NemanjaML/gists{/gist_id}","starred_url":"https://api.github.com/users/NemanjaML/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NemanjaML/subscriptions","organizations_url":"https://api.github.com/users/NemanjaML/orgs","repos_url":"https://api.github.com/users/NemanjaML/repos","events_url":"https://api.github.com/users/NemanjaML/events{/privacy}","received_events_url":"https://api.github.com/users/NemanjaML/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/3453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/3453/timeline","performed_via_github_app":null,"state_reason":"completed"}