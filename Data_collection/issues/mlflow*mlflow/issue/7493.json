{"url":"https://api.github.com/repos/mlflow/mlflow/issues/7493","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/7493/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/7493/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/7493/events","html_url":"https://github.com/mlflow/mlflow/issues/7493","id":1485797558,"node_id":"I_kwDOCB5Jx85Yj3i2","number":7493,"title":"Add a copy button on code blocks in the documentation","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"labels":[{"id":955449436,"node_id":"MDU6TGFiZWw5NTU0NDk0MzY=","url":"https://api.github.com/repos/mlflow/mlflow/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-12-09T02:06:02Z","updated_at":"2022-12-17T00:12:13Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"## Task\r\n\r\nAdd a copy button on code blocks in the documentation to help users quickly run example code.\r\n\r\n## What didn't work\r\n\r\nI tested [sphinx-copybutton](https://sphinx-copybutton.readthedocs.io/en/latest/index.html) with the following changes:\r\n\r\n```diff\r\ndiff --git a/docs/source/conf.py b/docs/source/conf.py\r\nindex dd99e5ec0..512667017 100644\r\n--- a/docs/source/conf.py\r\n+++ b/docs/source/conf.py\r\n@@ -41,6 +41,7 @@ extensions = [\r\n     \"sphinx.ext.napoleon\",\r\n     \"sphinx_click.ext\",\r\n     \"test_code_block\",\r\n+    \"sphinx_copybutton\",\r\n ]\r\n \r\n # Add any paths that contain templates here, relative to this directory.\r\ndiff --git a/docs/theme/mlflow/layout.html b/docs/theme/mlflow/layout.html\r\nindex 318f6d935..58ea62618 100644\r\n--- a/docs/theme/mlflow/layout.html\r\n+++ b/docs/theme/mlflow/layout.html\r\n@@ -96,6 +96,20 @@\r\n \r\n </head>\r\n \r\n+{% if not embedded %}\r\n+<script type=\"text/javascript\">\r\n+  var DOCUMENTATION_OPTIONS = {\r\n+    URL_ROOT:'{{ url_root }}',\r\n+    VERSION:'{{ release|e }}',\r\n+    COLLAPSE_INDEX:false,\r\n+    FILE_SUFFIX:'{{ '' if no_search_suffix else file_suffix }}',\r\n+    LINK_SUFFIX: '.html',\r\n+    HAS_SOURCE:  {{ has_source|lower }}\r\n+  };\r\n+</script>\r\n+\r\n+{% endif %}\r\n+\r\n {%- for scriptfile in script_files %}\r\n <script type=\"text/javascript\" src=\"{{ pathto(scriptfile, 1) }}\"></script>\r\n {%- endfor %}\r\n@@ -139,20 +153,6 @@\r\n \r\n   {% include \"versions.html\" %}\r\n \r\n-  {% if not embedded %}\r\n-  <script type=\"text/javascript\">\r\n-    var DOCUMENTATION_OPTIONS = {\r\n-      URL_ROOT:'{{ url_root }}',\r\n-      VERSION:'{{ release|e }}',\r\n-      COLLAPSE_INDEX:false,\r\n-      FILE_SUFFIX:'{{ '' if no_search_suffix else file_suffix }}',\r\n-      LINK_SUFFIX: '.html',\r\n-      HAS_SOURCE:  {{ has_source|lower }}\r\n-    };\r\n-  </script>\r\n-\r\n-  {% endif %}\r\n-\r\n   <script type=\"text/javascript\" src=\"{{ pathto('_static/js/clipboard.min.js', 1) }}\"></script>\r\n   <script type=\"text/javascript\" src=\"{{ pathto('_static/js/jquery.waypoints.min.js', 1) }}\"></script>\r\n   {%- block scripts %} {%- endblock %}\r\n```\r\n\r\nbut the button size and position don't seem correct (probably because of our custom theme). We need to adjust CSS.\r\n\r\n<img width=\"831\" alt=\"image\" src=\"https://user-images.githubusercontent.com/17039389/206605996-6f348f0c-5dd5-4a8c-84c0-e107b4894ab1.png\">\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/7493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/7493/timeline","performed_via_github_app":null,"state_reason":null}