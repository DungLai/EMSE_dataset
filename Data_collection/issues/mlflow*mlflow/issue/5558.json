{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5558","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/5558/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/5558/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/5558/events","html_url":"https://github.com/mlflow/mlflow/issues/5558","id":1186123142,"node_id":"I_kwDOCB5Jx85Gss2G","number":5558,"title":"[BUG]","user":{"login":"jajinmori1","id":80096854,"node_id":"MDQ6VXNlcjgwMDk2ODU0","avatar_url":"https://avatars.githubusercontent.com/u/80096854?v=4","gravatar_id":"","url":"https://api.github.com/users/jajinmori1","html_url":"https://github.com/jajinmori1","followers_url":"https://api.github.com/users/jajinmori1/followers","following_url":"https://api.github.com/users/jajinmori1/following{/other_user}","gists_url":"https://api.github.com/users/jajinmori1/gists{/gist_id}","starred_url":"https://api.github.com/users/jajinmori1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jajinmori1/subscriptions","organizations_url":"https://api.github.com/users/jajinmori1/orgs","repos_url":"https://api.github.com/users/jajinmori1/repos","events_url":"https://api.github.com/users/jajinmori1/events{/privacy}","received_events_url":"https://api.github.com/users/jajinmori1/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2022-03-30T08:59:41Z","updated_at":"2022-04-06T10:55:44Z","closed_at":"2022-04-06T10:55:43Z","author_association":"NONE","active_lock_reason":null,"body":"#%%\r\nimport json\r\nimport os\r\nfrom sklearn.metrics import classification_report\r\nimport time\r\nimport mlflow\r\nfrom mlflow.models.signature import infer_signature\r\nfrom urllib.parse import urlparse\r\nimport pandas as pd\r\nimport glob\r\nimport pymysql\r\nfrom lightgbm import LGBMClassifier\r\nfrom sklearn.model_selection import train_test_split\r\n\r\n\r\nmlflow.set_tracking_uri(\"###\")\r\nmlflow.get_tracking_uri()\r\n\r\n\r\nPIP_REQUIREMENTS = [f\"mlflow=={mlflow.__version__}\"]\r\nPIP_REQUIREMENTS\r\n\r\ndf = pd.read_csv(\"dataset\\master_data_CHS.csv\", encoding = 'euc-kr', index_col=0)\r\ndrop_columns = ['column1', 'APGAR5']\r\nlabel = 'column1'\r\nfeatures = df.drop(drop_columns, axis=1).columns\r\nX_train, X_test, y_train, y_test = train_test_split(df[features], df[label])\r\n\r\n\r\nMODEL_NAME = 'LGBM_001'\r\nEXPERIMENT_NAME = 'test_001'\r\nOUTPUT_DIR = f\"{MODEL_NAME}_{EXPERIMENT_NAME}_output\"\r\nMODEL_DIR = f\"model\"\r\n\r\nEXPERIMENT_ID = mlflow.create_experiment(f\"{MODEL_NAME}_{EXPERIMENT_NAME}\")\r\n\r\nwith mlflow.start_run(experiment_id=EXPERIMENT_ID) as run:\r\n  #! -------------------------------------------\r\n  print(f\"Model name: {MODEL_NAME}\")\r\n  RUN_ID = run.info.run_id\r\n  print(f\"Run id: {RUN_ID}\")\r\n  EXPERIMENT_ID = run.info.experiment_id\r\n  print(f\"Experiment id: {EXPERIMENT_ID}\")\r\n\r\n  #* -------------------------------------------\r\n  print(\"Starting training...\")\r\n  model = LGBMClassifier(random_state=0) # parmameter \r\n  model.fit(X_train, y_train)\r\n\r\n\r\n  tracking_url_type_store = urlparse(mlflow.get_tracking_uri()).scheme\r\n  if tracking_url_type_store != \"file\":\r\n    mlflow.lightgbm.log_model(model, f\"{MODEL_NAME}_{EXPERIMENT_ID}_{RUN_ID}\", registered_model_name=MODEL_NAME, pip_requirements=PIP_REQUIREMENTS)\r\n  else:\r\n    mlflow.lightgbm.log_model(model, f\"{MODEL_NAME}_{EXPERIMENT_ID}_{RUN_ID}\", pip_requirements=PIP_REQUIREMENTS)\r\n  print(\"- Finished!\")\r\n# %%\r\n\r\nI can't  see model artifacts in UI...\r\nloading continues....\r\nwhen I first complete this code I can see model artifacts in UI ,but suddenly I can't see any artifacts...","closed_by":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/5558/timeline","performed_via_github_app":null,"state_reason":"completed"}