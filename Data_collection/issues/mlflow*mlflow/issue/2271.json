{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2271","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2271/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2271/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2271/events","html_url":"https://github.com/mlflow/mlflow/issues/2271","id":546528595,"node_id":"MDU6SXNzdWU1NDY1Mjg1OTU=","number":2271,"title":"[BUG] AWS Sagemaker model deployment issue (from EC2 instance)","user":{"login":"jeanmidevacc","id":23313992,"node_id":"MDQ6VXNlcjIzMzEzOTky","avatar_url":"https://avatars.githubusercontent.com/u/23313992?v=4","gravatar_id":"","url":"https://api.github.com/users/jeanmidevacc","html_url":"https://github.com/jeanmidevacc","followers_url":"https://api.github.com/users/jeanmidevacc/followers","following_url":"https://api.github.com/users/jeanmidevacc/following{/other_user}","gists_url":"https://api.github.com/users/jeanmidevacc/gists{/gist_id}","starred_url":"https://api.github.com/users/jeanmidevacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeanmidevacc/subscriptions","organizations_url":"https://api.github.com/users/jeanmidevacc/orgs","repos_url":"https://api.github.com/users/jeanmidevacc/repos","events_url":"https://api.github.com/users/jeanmidevacc/events{/privacy}","received_events_url":"https://api.github.com/users/jeanmidevacc/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"sueann","id":4411489,"node_id":"MDQ6VXNlcjQ0MTE0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/4411489?v=4","gravatar_id":"","url":"https://api.github.com/users/sueann","html_url":"https://github.com/sueann","followers_url":"https://api.github.com/users/sueann/followers","following_url":"https://api.github.com/users/sueann/following{/other_user}","gists_url":"https://api.github.com/users/sueann/gists{/gist_id}","starred_url":"https://api.github.com/users/sueann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sueann/subscriptions","organizations_url":"https://api.github.com/users/sueann/orgs","repos_url":"https://api.github.com/users/sueann/repos","events_url":"https://api.github.com/users/sueann/events{/privacy}","received_events_url":"https://api.github.com/users/sueann/received_events","type":"User","site_admin":false},"assignees":[{"login":"sueann","id":4411489,"node_id":"MDQ6VXNlcjQ0MTE0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/4411489?v=4","gravatar_id":"","url":"https://api.github.com/users/sueann","html_url":"https://github.com/sueann","followers_url":"https://api.github.com/users/sueann/followers","following_url":"https://api.github.com/users/sueann/following{/other_user}","gists_url":"https://api.github.com/users/sueann/gists{/gist_id}","starred_url":"https://api.github.com/users/sueann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sueann/subscriptions","organizations_url":"https://api.github.com/users/sueann/orgs","repos_url":"https://api.github.com/users/sueann/repos","events_url":"https://api.github.com/users/sueann/events{/privacy}","received_events_url":"https://api.github.com/users/sueann/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-01-07T21:55:27Z","updated_at":"2020-01-14T20:45:26Z","closed_at":"2020-01-14T20:45:26Z","author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our issue policy\r\nfor information on what types of issues we address. For help with debugging your code, please refer to Stack Overflow.\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **I didn't write custom code**:\r\n- **Linux Ubuntu 16.04 (Image provided by AWS)**:\r\n- **MLflow installed from source (with a pip install)**:\r\n- **MLflow version 1.5.0**:\r\n- **Python 3.7**:\r\n\r\n### Describe the problem\r\nHello mlflow team,\r\n\r\nI am opening this bug because I am encountering an error during the deployment of a model on AWS. I currently trying to deploy a model built from your [tutorial](https://mlflow.org/docs/latest/tutorials-and-examples/tutorial.html) on an EC2 instance on AWS. I have no issue to make different runs. During the deployment of the container, it seems to run ok. I have my container in ECR but during the phase of deployment of the endpoint on sagemaker my python job in charge of the deployment \r\n\r\nThe job is failing after a few seconds and I have the error:\r\n File \"awsdeploy.py\", line 25, in <module>\r\n    image_url = image_url)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/mlflow/sagemaker/__init__.py\", line 338, in deploy\r\n    \" \\\"{error_message}\\\"\".format(error_message=operation_status.message))\r\nmlflow.exceptions.MlflowException: The deployment operation failed with the following error message: \"An unknown SageMaker failure occurred. Please see the SageMaker console logs for \r\n\r\nAnd when I am checking on cloudwatch I have no logs available.\r\n\r\nFor debug purposed, I attached the config file of the environment in the next section,\r\n\r\nI make some test on mlflow in the past with the deployment of model and I didn't have an issue (it was not an ec2 instance but on a local machine on the 1.4.0).\r\n\r\n### Code to reproduce issue\r\nThe link of the [tutoria]l(https://mlflow.org/docs/latest/tutorials-and-examples/tutorial.html)\r\n\r\nYou can find the code that I used to deploy the endpoint \r\n[awsdeploy.txt](https://github.com/mlflow/mlflow/files/4032607/awsdeploy.txt)\r\n\r\nThe command that i used for the deployment of the container\r\nmlflow sagemaker build-and-push-container -c mlflowtest_base_conda\r\n\r\nThe environment normally deployed in the container\r\n[environment_base.txt](https://github.com/mlflow/mlflow/files/4032588/environment_base.txt)\r\n\r\nThe environment associated to the model artifact\r\n[conda.txt](https://github.com/mlflow/mlflow/files/4032592/conda.txt)","closed_by":{"login":"jeanmidevacc","id":23313992,"node_id":"MDQ6VXNlcjIzMzEzOTky","avatar_url":"https://avatars.githubusercontent.com/u/23313992?v=4","gravatar_id":"","url":"https://api.github.com/users/jeanmidevacc","html_url":"https://github.com/jeanmidevacc","followers_url":"https://api.github.com/users/jeanmidevacc/followers","following_url":"https://api.github.com/users/jeanmidevacc/following{/other_user}","gists_url":"https://api.github.com/users/jeanmidevacc/gists{/gist_id}","starred_url":"https://api.github.com/users/jeanmidevacc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeanmidevacc/subscriptions","organizations_url":"https://api.github.com/users/jeanmidevacc/orgs","repos_url":"https://api.github.com/users/jeanmidevacc/repos","events_url":"https://api.github.com/users/jeanmidevacc/events{/privacy}","received_events_url":"https://api.github.com/users/jeanmidevacc/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2271/timeline","performed_via_github_app":null,"state_reason":"completed"}