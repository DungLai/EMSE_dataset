{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2621","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2621/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2621/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2621/events","html_url":"https://github.com/mlflow/mlflow/issues/2621","id":585823239,"node_id":"MDU6SXNzdWU1ODU4MjMyMzk=","number":2621,"title":"Setting HTTP proxy before building docker images using the \"mlflow models build-docker\" command","user":{"login":"saelha01","id":26911733,"node_id":"MDQ6VXNlcjI2OTExNzMz","avatar_url":"https://avatars.githubusercontent.com/u/26911733?v=4","gravatar_id":"","url":"https://api.github.com/users/saelha01","html_url":"https://github.com/saelha01","followers_url":"https://api.github.com/users/saelha01/followers","following_url":"https://api.github.com/users/saelha01/following{/other_user}","gists_url":"https://api.github.com/users/saelha01/gists{/gist_id}","starred_url":"https://api.github.com/users/saelha01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saelha01/subscriptions","organizations_url":"https://api.github.com/users/saelha01/orgs","repos_url":"https://api.github.com/users/saelha01/repos","events_url":"https://api.github.com/users/saelha01/events{/privacy}","received_events_url":"https://api.github.com/users/saelha01/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2022848043,"node_id":"MDU6TGFiZWwyMDIyODQ4MDQz","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/models","name":"area/models","color":"48eabc","default":false,"description":"MLmodel format, model serialization/deserialization, flavors"},{"id":2022851725,"node_id":"MDU6TGFiZWwyMDIyODUxNzI1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docker","name":"area/docker","color":"ede978","default":false,"description":"Docker use anywhere, such as MLprojects and MLmodels"},{"id":2022866842,"node_id":"MDU6TGFiZWwyMDIyODY2ODQy","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/awaiting-more-evidence","name":"priority/awaiting-more-evidence","color":"534cb5","default":false,"description":"Lowest priority. Possibly useful, but not yet enough support to actually get it done."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-22T22:03:36Z","updated_at":"2021-07-28T08:04:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address. For help with debugging your code, please refer to [Stack Overflow](https://stackoverflow.com/questions/tagged/mlflow).\r\n\r\nPlease fill in this template and do not delete it unless you are sure your issue is outside its scope.\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Centos \r\n- **MLflow installed from (source or binary)**: installed using pip\r\n- **MLflow version (run ``mlflow --version``)**: 1.7\r\n- **Python version**: 3\r\n- **Exact command to reproduce**: $ mlflow models build-docker -m \"runs:/ac105c61b91c418697db78bc6fe60639/model\" -n \"my-image-name\"\r\n\r\n### Describe the problem\r\nI have downloaded the example https://github.com/mlflow/mlflow. and ran successfully the \"sklearn_elasticnet_wine\" experiment using the following command\r\n$ mlflow run sklearn_elasticnet_wine -P alpha=0.5 \r\n\r\nNow when I tried to docker the model using the below command\r\n$ mlflow models build-docker -m \"runs:/ac105c61b91c418697db78bc6fe60639/model\" -n \"my-image-name\"\r\n \r\nI got the following error\r\n\r\n**W: Failed to fetch http://archive.ubuntu.com/ubuntu/dists/bionic/InRelease  Cannot initiate the connection to archive.ubuntu.                                                                        com:80 (2001:67c:1360:8001::17). - connect (101: Network is unreachable) Cannot initiate the connection to archive.ubuntu.com                                                                        :80 (2001:67c:1560:8001::14). - connect (101: Network is unreachable) Cannot initiate the connection to archive.ubuntu.com:80**    \r\n\r\nI know I am working behind a http proxy, and I have got the docker \"run\" command to work after setting up the http proxy. but the docker \"build\" command always needs me to specify the http proxy in the command line using the \"build-args\"\r\n\r\nFor me to get this working, I think I need to either modify the default docker file that Mlflow uses to build the docker image to append the http-proxy param in it, or pass the http-proxy info to mlflow.\r\n\r\nIf it is the former, would you please share the location of the default docker file, or the code that produce it for me to change. if it is the later, please let me know how to pass on the http proxy info to mlflow so it can incorporate it into the docker build command.\r\n\r\nThank\r\n\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2621/timeline","performed_via_github_app":null,"state_reason":null}