{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2419","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/2419/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/2419/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/2419/events","html_url":"https://github.com/mlflow/mlflow/issues/2419","id":563271980,"node_id":"MDU6SXNzdWU1NjMyNzE5ODA=","number":2419,"title":"[FR] Automatic step increment by default when logging metrics","user":{"login":"678098","id":2518859,"node_id":"MDQ6VXNlcjI1MTg4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/2518859?v=4","gravatar_id":"","url":"https://api.github.com/users/678098","html_url":"https://github.com/678098","followers_url":"https://api.github.com/users/678098/followers","following_url":"https://api.github.com/users/678098/following{/other_user}","gists_url":"https://api.github.com/users/678098/gists{/gist_id}","starred_url":"https://api.github.com/users/678098/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/678098/subscriptions","organizations_url":"https://api.github.com/users/678098/orgs","repos_url":"https://api.github.com/users/678098/repos","events_url":"https://api.github.com/users/678098/events{/privacy}","received_events_url":"https://api.github.com/users/678098/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"},{"id":2022866842,"node_id":"MDU6TGFiZWwyMDIyODY2ODQy","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/awaiting-more-evidence","name":"priority/awaiting-more-evidence","color":"534cb5","default":false,"description":"Lowest priority. Possibly useful, but not yet enough support to actually get it done."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-11T15:10:43Z","updated_at":"2022-06-02T02:05:08Z","closed_at":"2022-06-02T02:05:08Z","author_association":"NONE","active_lock_reason":null,"body":"In earlier versions of mlflow there was simple metrics view with autostep. Now default absolute step is 0, and step view is useless unless you manually specify step for each log_metric. It will be nice to make default behaviour more useful.\r\n\r\nDefault step view looks like this:\r\n\r\n![epoch_processing_time](https://user-images.githubusercontent.com/2518859/74248207-461b0e00-4cf8-11ea-84a3-0001597a55b4.png)\r\n\r\nAlso we are using mlflow for lazy metrics logging: we are running full experiment and sending metrics afterwards (so there will be no crashes during experiment because of network problems with mlflow). In this scenario we don't have any nice view of metrics with default step 0 or time-based views.\r\n\r\nWe had to write a wrapper to make counters work, but in our opinion better to make It once in mlflow than multiple times on client side.\r\n\r\n```\r\nclass MLFlowWrapper(StatsLogger):\r\n    def __init__(self, experiment_name, mlflow_uri):\r\n        super().__init__()\r\n        mlflow.set_tracking_uri(mlflow_uri)\r\n        mlflow.set_experiment(experiment_name)\r\n        self.counters = {}\r\n\r\n    def log_param(self, key, value):\r\n        mlflow.log_param(key, value)\r\n\r\n    def log_metric(self, key, value):\r\n        if not key in self.counters:\r\n            self.counters[key] = 0\r\n        mlflow.log_metric(key, value, step=self.counters[key])\r\n        self.counters[key] = self.counters[key] + 1\r\n\r\n    def log_artifact(self, local_path):\r\n        mlflow.log_artifact(local_path)\r\n```\r\n\r\nThank you!","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/2419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/2419/timeline","performed_via_github_app":null,"state_reason":"completed"}