{"url":"https://api.github.com/repos/mlflow/mlflow/issues/6255","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/6255/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/6255/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/6255/events","html_url":"https://github.com/mlflow/mlflow/issues/6255","id":1306394411,"node_id":"I_kwDOCB5Jx85N3f8r","number":6255,"title":"Issues with mlflow sagemaker deploy","user":{"login":"hollytb","id":36595840,"node_id":"MDQ6VXNlcjM2NTk1ODQw","avatar_url":"https://avatars.githubusercontent.com/u/36595840?v=4","gravatar_id":"","url":"https://api.github.com/users/hollytb","html_url":"https://github.com/hollytb","followers_url":"https://api.github.com/users/hollytb/followers","following_url":"https://api.github.com/users/hollytb/following{/other_user}","gists_url":"https://api.github.com/users/hollytb/gists{/gist_id}","starred_url":"https://api.github.com/users/hollytb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hollytb/subscriptions","organizations_url":"https://api.github.com/users/hollytb/orgs","repos_url":"https://api.github.com/users/hollytb/repos","events_url":"https://api.github.com/users/hollytb/events{/privacy}","received_events_url":"https://api.github.com/users/hollytb/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"assignees":[{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}],"milestone":null,"comments":13,"created_at":"2022-07-15T19:09:31Z","updated_at":"2022-07-23T01:17:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n\r\nj\r\n\r\n### Code to reproduce issue\r\n\r\nbb\r\n\r\n### Describe the problem\r\n\r\nI want to deploy a mlflow spark app to sagemaker. Is this possible? As I sucessfully push a image to ECR with\r\n\r\n`mlflow sagemaker build-and-push-container` \r\n\r\nand then when I attempt to deploy this image with \r\n\r\n'mlflow sagemaker deploy...'\r\n\r\nIt fails due to a time out when trying to create the endpoint. When I log at the in cloud watch multiple errors appear, one is for example:\r\n`py4j.protocol.Py4JJavaError: An error occurred while calling o75.load.` or \r\n\r\n`2022/07/15 13:41:44 [error] 453#453: *21 recv() failed (104: Connection reset by peer) while reading response header from upstream, client: 10.32.0.2, server: , request: \"GET /ping HTTP/1.1\", upstream: \"http://127.0.0.1:8000/ping\", host: \"model.aws.local:8080\"` or \r\n\r\n`gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3>` or \r\n`CondaValueError: prefix already exists: /miniconda/envs/custom_env`\r\n\r\nI use libraries like:\r\n\r\n```python\r\nfrom pyspark.sql import SparkSession\r\n\r\nimport pyspark.sql.types as T \r\nimport pyspark.sql.functions as F\r\nfrom pyparsing import col\r\nfrom pyspark.sql.window import Window\r\nfrom pyspark.ml.feature import Bucketizer\r\nfrom pyspark.ml.evaluation import RegressionEvaluator\r\nfrom pandas import DataFrame\r\n\r\nimport mlflow\r\nimport mlflow.spark\r\n```\r\n\r\nI use versions \r\njava - 18.0.333\r\nspark 3.1.2\r\nhadoop 3.2\r\nAnd all other necessary pip installations. Any help would be nice\r\n\r\n\r\n### Other info / logs\r\n\r\n_No response\r\n[log-events-viewer-result (1).csv](https://github.com/mlflow/mlflow/files/9125643/log-events-viewer-result.1.csv)\r\n_","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/6255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/6255/timeline","performed_via_github_app":null,"state_reason":null}