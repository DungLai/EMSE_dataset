{"url":"https://api.github.com/repos/mlflow/mlflow/issues/525","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/525/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/525/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/525/events","html_url":"https://github.com/mlflow/mlflow/issues/525","id":361915233,"node_id":"MDU6SXNzdWUzNjE5MTUyMzM=","number":525,"title":"Improve caching of conda environments","user":{"login":"smurching","id":2358483,"node_id":"MDQ6VXNlcjIzNTg0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2358483?v=4","gravatar_id":"","url":"https://api.github.com/users/smurching","html_url":"https://github.com/smurching","followers_url":"https://api.github.com/users/smurching/followers","following_url":"https://api.github.com/users/smurching/following{/other_user}","gists_url":"https://api.github.com/users/smurching/gists{/gist_id}","starred_url":"https://api.github.com/users/smurching/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smurching/subscriptions","organizations_url":"https://api.github.com/users/smurching/orgs","repos_url":"https://api.github.com/users/smurching/repos","events_url":"https://api.github.com/users/smurching/events{/privacy}","received_events_url":"https://api.github.com/users/smurching/received_events","type":"User","site_admin":false},"labels":[{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-09-19T20:29:52Z","updated_at":"2019-11-13T00:49:50Z","closed_at":"2019-11-13T00:49:50Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"Currently, MLflow caches conda environments based on the hash of a [conda environment file](https://conda.io/docs/user-guide/tasks/manage-environments.html#create-env-file-manually). This is helpful but can lead to cache staleness if versions are not explicitly specified in the yml file.\r\n\r\nIt seems ideal caching behavior would be to snapshot the actual dependencies installed within a conda env & name the env after the hash of the resulting snapshots. However there doesn't seem to be a way to get conda to resolve the versions of dependencies in an environment.yml file without actually creating an environment. It's also not currently possible to [create an environment and then rename it](https://github.com/conda/conda/issues/3097) based on the dependencies that are installed. Would love to hear thoughts on other approaches for improving our conda-environment-caching story.","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/525/timeline","performed_via_github_app":null,"state_reason":"completed"}