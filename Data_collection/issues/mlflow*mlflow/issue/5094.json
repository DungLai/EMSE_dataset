{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5094","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/5094/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/5094/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/5094/events","html_url":"https://github.com/mlflow/mlflow/issues/5094","id":1061344393,"node_id":"I_kwDOCB5Jx84_QtSJ","number":5094,"title":"[BUG]","user":{"login":"NumtraAdmin","id":58174915,"node_id":"MDQ6VXNlcjU4MTc0OTE1","avatar_url":"https://avatars.githubusercontent.com/u/58174915?v=4","gravatar_id":"","url":"https://api.github.com/users/NumtraAdmin","html_url":"https://github.com/NumtraAdmin","followers_url":"https://api.github.com/users/NumtraAdmin/followers","following_url":"https://api.github.com/users/NumtraAdmin/following{/other_user}","gists_url":"https://api.github.com/users/NumtraAdmin/gists{/gist_id}","starred_url":"https://api.github.com/users/NumtraAdmin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NumtraAdmin/subscriptions","organizations_url":"https://api.github.com/users/NumtraAdmin/orgs","repos_url":"https://api.github.com/users/NumtraAdmin/repos","events_url":"https://api.github.com/users/NumtraAdmin/events{/privacy}","received_events_url":"https://api.github.com/users/NumtraAdmin/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":2022847714,"node_id":"MDU6TGFiZWwyMDIyODQ3NzE0","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/model-registry","name":"area/model-registry","color":"48eabc","default":false,"description":"Model registry, model registry APIs, and the fluent client calls for model registry"},{"id":2022851725,"node_id":"MDU6TGFiZWwyMDIyODUxNzI1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docker","name":"area/docker","color":"ede978","default":false,"description":"Docker use anywhere, such as MLprojects and MLmodels"},{"id":2022859639,"node_id":"MDU6TGFiZWwyMDIyODU5NjM5","url":"https://api.github.com/repos/mlflow/mlflow/labels/integrations/azure","name":"integrations/azure","color":"ffbce5","default":false,"description":"Azure and Azure ML integrations"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-11-23T14:21:58Z","updated_at":"2021-12-07T20:55:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"\r\n### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Azure Distributed cluster\r\n- **MLflow installed from (source or binary)**:  source\r\n- **MLflow version (run ``mlflow --version``)**: 1.12.0\r\n- **Python version**: 3.7.3\r\n\r\n### Describe the problem\r\nI am trying to deploy Prophet Model.\r\nModel is logged as mlflow.prophet flavour.\r\nWhen I am creating image from Model Artifact this error came :\r\nWebserviceException: WebserviceException:\r\n        \"error\": {\r\n            \"message\": \"Image creation polling reached non-successful terminal state, current state: Failed\\nError response from server:\\nStatusCode: 400\\nMessage: Docker image build failed.\"\r\n        }\r\n    }\r\n\r\n### Code to reproduce issue\r\n    import azureml\r\n    import mlflow.azureml\r\n    from azureml.core import Workspace\r\n    from azureml.core.authentication import ServicePrincipalAuthentication\r\n    from azureml.core.webservice import AciWebservice, Webservice\r\n    \r\n    principal_auth = ServicePrincipalAuthentication(tenant_id, principal_id, app_secret)\r\n    workspace = Workspace.get(name=workspace_name, subscription_id=subscription_id, auth=principal_auth, resource_group=workspace_rg)\r\n    model_image, azureml_model = mlflow.azureml.build_image(model_uri='runs:/016fc3f2d5c34c8eadbeb20ad16d3/082358timeseriesforecasting', workspace=workspace)\r\n    model_image.wait_for_creation(show_output=True)\r\n\r\n### Other info / logs\r\nIn Container logs error is shown below:\r\n\r\n [0mThe command '/bin/sh -c CONDA_ROOT_DIR=$(conda info --root) && if [ -n \"$AZUREML_CONDA_ENVIRONMENT_PATH\" ]; then conda env update -p \"$AZUREML_CONDA_ENVIRONMENT_PATH\" -f '/var/azureml-app/conda.yaml'; else conda env update -n base -f '/var/azureml-app/conda.yaml'; fi && conda clean -aqy && rm -rf /root/.cache/pip && rm -rf \"$CONDA_ROOT_DIR/pkgs\" && find \"$CONDA_ROOT_DIR\" -type d -name __pycache__ -exec rm -rf {} +' returned a non-zero code: 137\r\n2021/11/23 12:21:39 Container failed during run: acb_step_0. No retries remaining.\r\nfailed to run step ID: acb_step_0: exit status 137\r\n\r\nRun ID: cj58 failed after 6m19s. Error: failed during run, err: exit status 1\r\n\r\n\r\n\r\n### What component(s), interfaces, languages, and integrations does this bug affect?\r\nComponents \r\n- [ ] `area/artifacts`: Artifact stores and artifact logging\r\n- [ ] `area/build`: Build and test infrastructure for MLflow\r\n- [ ] `area/docs`: MLflow documentation pages\r\n- [ ] `area/examples`: Example code\r\n- [x] `area/model-registry`: Model Registry service, APIs, and the fluent client calls for Model Registry\r\n- [ ] `area/models`: MLmodel format, model serialization/deserialization, flavors\r\n- [ ] `area/projects`: MLproject format, project running backends\r\n- [ ] `area/scoring`: MLflow Model server, model deployment tools, Spark UDFs\r\n- [ ] `area/server-infra`: MLflow Tracking server backend\r\n- [ ] `area/tracking`: Tracking Service, tracking client APIs, autologging\r\n\r\nInterface \r\n- [ ] `area/uiux`: Front-end, user experience, plotting, JavaScript, JavaScript dev server\r\n- [x ] `area/docker`: Docker use across MLflow's components, such as MLflow Projects and MLflow Models\r\n- [ ] `area/sqlalchemy`: Use of SQLAlchemy in the Tracking Service or Model Registry\r\n- [ ] `area/windows`: Windows support\r\n\r\nLanguage \r\nPython\r\n\r\nIntegrations\r\n- [ x] `integrations/azure`: Azure and Azure ML integrations\r\n- [ x] `integrations/databricks`: Databricks integrations\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/5094/timeline","performed_via_github_app":null,"state_reason":null}