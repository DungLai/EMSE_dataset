{"url":"https://api.github.com/repos/mlflow/mlflow/issues/6107","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/6107/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/6107/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/6107/events","html_url":"https://github.com/mlflow/mlflow/issues/6107","id":1276291460,"node_id":"I_kwDOCB5Jx85MEqmE","number":6107,"title":"[DOC-FIX] Mistake in the docs of mlflow.pytorch.autolog","user":{"login":"comojin1994","id":46745325,"node_id":"MDQ6VXNlcjQ2NzQ1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/46745325?v=4","gravatar_id":"","url":"https://api.github.com/users/comojin1994","html_url":"https://github.com/comojin1994","followers_url":"https://api.github.com/users/comojin1994/followers","following_url":"https://api.github.com/users/comojin1994/following{/other_user}","gists_url":"https://api.github.com/users/comojin1994/gists{/gist_id}","starred_url":"https://api.github.com/users/comojin1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comojin1994/subscriptions","organizations_url":"https://api.github.com/users/comojin1994/orgs","repos_url":"https://api.github.com/users/comojin1994/repos","events_url":"https://api.github.com/users/comojin1994/events{/privacy}","received_events_url":"https://api.github.com/users/comojin1994/received_events","type":"User","site_admin":false},"labels":[{"id":978584226,"node_id":"MDU6TGFiZWw5Nzg1ODQyMjY=","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/docs","name":"area/docs","color":"48eabc","default":false,"description":"Documentation issues"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-06-20T02:59:35Z","updated_at":"2022-06-22T19:02:19Z","closed_at":"2022-06-22T19:02:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Willingness to contribute\r\n\r\nYes. I can contribute a documentation fix independently.\r\n\r\n### URL(s) with the issue\r\n\r\nhttps://www.mlflow.org/docs/latest/python_api/mlflow.pytorch.html#module-mlflow.pytorch\r\n\r\n### Description of proposal (what needs changing)\r\n\r\nHi,\r\n\r\nI found the small mistake in the example of `mlflow.pytorch.autolog`.\r\n\r\nAs shown under code, it calculated the accuracy comparing the loss and y (label).\r\n\r\n```python\r\nclass MNISTModel(pl.LightningModule):\r\n    def __init__(self):\r\n        super(MNISTModel, self).__init__()\r\n        self.l1 = torch.nn.Linear(28 * 28, 10)\r\n\r\n    def forward(self, x):\r\n        return torch.relu(self.l1(x.view(x.size(0), -1)))\r\n\r\n    def training_step(self, batch, batch_nb):\r\n        x, y = batch\r\n        loss = F.cross_entropy(self(x), y)\r\n        acc = accuracy(loss, y)\r\n\r\n```\r\n\r\nHowever, it raise the under error,\r\n\r\n```\r\nIndexError: tuple index out of range\r\n```\r\n\r\nThe reason for this error is that it calculated the accuracy using the wrong values.\r\nSo, I think that it is better to fix the docs like under code.\r\n\r\n```python\r\nclass MNISTModel(pl.LightningModule):\r\n    def __init__(self):\r\n        super(MNISTModel, self).__init__()\r\n        self.l1 = torch.nn.Linear(28 * 28, 10)\r\n\r\n    def forward(self, x):\r\n        return torch.relu(self.l1(x.view(x.size(0), -1)))\r\n\r\n    def training_step(self, batch, batch_nb):\r\n        x, y = batch\r\n        logits = self(x)\r\n        loss = F.cross_entropy(logits, y)\r\n        pred = logits.argmax(dim=1)\r\n        acc = accuracy(pred, y)\r\n```\r\n\r\n\r\nIf I am right, I'm going to open PR.\r\nThanks! ","closed_by":{"login":"BenWilson2","id":39283302,"node_id":"MDQ6VXNlcjM5MjgzMzAy","avatar_url":"https://avatars.githubusercontent.com/u/39283302?v=4","gravatar_id":"","url":"https://api.github.com/users/BenWilson2","html_url":"https://github.com/BenWilson2","followers_url":"https://api.github.com/users/BenWilson2/followers","following_url":"https://api.github.com/users/BenWilson2/following{/other_user}","gists_url":"https://api.github.com/users/BenWilson2/gists{/gist_id}","starred_url":"https://api.github.com/users/BenWilson2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenWilson2/subscriptions","organizations_url":"https://api.github.com/users/BenWilson2/orgs","repos_url":"https://api.github.com/users/BenWilson2/repos","events_url":"https://api.github.com/users/BenWilson2/events{/privacy}","received_events_url":"https://api.github.com/users/BenWilson2/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/6107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/6107/timeline","performed_via_github_app":null,"state_reason":"completed"}