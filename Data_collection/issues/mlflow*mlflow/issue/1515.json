{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1515","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1515/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1515/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1515/events","html_url":"https://github.com/mlflow/mlflow/issues/1515","id":461374499,"node_id":"MDU6SXNzdWU0NjEzNzQ0OTk=","number":1515,"title":"MlFlow Java client: Failed to get mlflow version. Error: /usr/bin/python: No module named mlflow","user":{"login":"TotalForgot","id":51415043,"node_id":"MDQ6VXNlcjUxNDE1MDQz","avatar_url":"https://avatars.githubusercontent.com/u/51415043?v=4","gravatar_id":"","url":"https://api.github.com/users/TotalForgot","html_url":"https://github.com/TotalForgot","followers_url":"https://api.github.com/users/TotalForgot/followers","following_url":"https://api.github.com/users/TotalForgot/following{/other_user}","gists_url":"https://api.github.com/users/TotalForgot/gists{/gist_id}","starred_url":"https://api.github.com/users/TotalForgot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TotalForgot/subscriptions","organizations_url":"https://api.github.com/users/TotalForgot/orgs","repos_url":"https://api.github.com/users/TotalForgot/repos","events_url":"https://api.github.com/users/TotalForgot/events{/privacy}","received_events_url":"https://api.github.com/users/TotalForgot/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-06-27T07:54:59Z","updated_at":"2021-02-26T19:08:28Z","closed_at":"2019-06-27T20:32:34Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **I have just wrote a simple test on Mlflow Java-client**:\r\n- **OS Platform and Distribution**: Client side: MAC OS. Server side: CentOS 7.4\r\n- **MLflow installed from**: binary\r\n- **MLflow version**: 1.0.0\r\n- **Python version**: 2.7.10\r\n\r\n### Describe the problem\r\nWe start a Mlflow server on our CentOS 7.4 node.\r\nThen we created a simple java project to do very basic operation on the from our MAC laptop to this Mlflow server.\r\n\r\nWhen trying to logArtifact, we received an exception mentioning that mlflow is not installed in our MAC laptop. Which is correct as we did not install it.\r\n\r\n### Expectation\r\nOur expectation is that, for a java-client, all we need to do is to declare the correct mlflow java-client jar so that our Mlflow client can connect correctly to the remote Mlflow server.\r\n**So why it is required to have Mlflow installed on the client side?**\r\nPlease enlighten us.\r\nBelow is the logs and the stack trace\r\n\r\n### Source code \r\n`\r\nclass Test {\r\n\r\n    @org.junit.jupiter.api.Test\r\n    void testMlFlow() {\r\n\r\n        final MlflowClient client = new MlflowClient(\"http://remoteServer:5000\");\r\n\r\n        final String expName = \"MyExp\";\r\n\r\n        final String expId = client.createExperiment(expName);\r\n\r\n        final List<Service.Experiment> experimentList =client.listExperiments();\r\n\r\n        final Service.RunInfo info = client.createRun(Service.CreateRun.newBuilder().setExperimentId(expId).build());\r\n\r\n        client.logArtifact(info.getRunId(), new File(\"/tmp/test\"));\r\n\r\n    }\r\n}\r\n`\r\n\r\n### Log\r\n`org.mlflow.tracking.MlflowClientException: Failed to exec 'python -m mlflow.cli', needed to access artifacts within the non-Java-native artifact store at './mlruns/5/a1f44550f3194af3bf15e439862382e4/artifacts'. Please make sure mlflow is available on your local system path (e.g., from 'pip install mlflow')\r\n\tat org.mlflow.artifacts.CliBasedArtifactRepository.checkMlflowAccessible(CliBasedArtifactRepository.java:181)\r\n\tat org.mlflow.artifacts.CliBasedArtifactRepository.logArtifact(CliBasedArtifactRepository.java:66)\r\n\tat org.mlflow.artifacts.CliBasedArtifactRepository.logArtifact(CliBasedArtifactRepository.java:84)\r\n\tat org.mlflow.tracking.MlflowClient.logArtifact(MlflowClient.java:399)\r\n\tat com.exalead.onetrace.intelligent.services.Test.testMlFlow(Test.java:34)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:628)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:184)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:180)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: org.mlflow.tracking.MlflowClientException: Failed to get mlflow version. Error: /usr/bin/python: No module named mlflow\r\n\tat org.mlflow.artifacts.CliBasedArtifactRepository.forkMlflowProcess(CliBasedArtifactRepository.java:209)\r\n\tat org.mlflow.artifacts.CliBasedArtifactRepository.checkMlflowAccessible(CliBasedArtifactRepository.java:173)\r\n\t... 55 more\r\n`\r\n","closed_by":{"login":"andrewmchen","id":4492809,"node_id":"MDQ6VXNlcjQ0OTI4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4492809?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewmchen","html_url":"https://github.com/andrewmchen","followers_url":"https://api.github.com/users/andrewmchen/followers","following_url":"https://api.github.com/users/andrewmchen/following{/other_user}","gists_url":"https://api.github.com/users/andrewmchen/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewmchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewmchen/subscriptions","organizations_url":"https://api.github.com/users/andrewmchen/orgs","repos_url":"https://api.github.com/users/andrewmchen/repos","events_url":"https://api.github.com/users/andrewmchen/events{/privacy}","received_events_url":"https://api.github.com/users/andrewmchen/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1515/timeline","performed_via_github_app":null,"state_reason":"completed"}