{"url":"https://api.github.com/repos/mlflow/mlflow/issues/6709","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/6709/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/6709/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/6709/events","html_url":"https://github.com/mlflow/mlflow/issues/6709","id":1362974164,"node_id":"I_kwDOCB5Jx85RPVXU","number":6709,"title":"MlflowClient set tracking_uri not working","user":{"login":"bwallima","id":47379807,"node_id":"MDQ6VXNlcjQ3Mzc5ODA3","avatar_url":"https://avatars.githubusercontent.com/u/47379807?v=4","gravatar_id":"","url":"https://api.github.com/users/bwallima","html_url":"https://github.com/bwallima","followers_url":"https://api.github.com/users/bwallima/followers","following_url":"https://api.github.com/users/bwallima/following{/other_user}","gists_url":"https://api.github.com/users/bwallima/gists{/gist_id}","starred_url":"https://api.github.com/users/bwallima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bwallima/subscriptions","organizations_url":"https://api.github.com/users/bwallima/orgs","repos_url":"https://api.github.com/users/bwallima/repos","events_url":"https://api.github.com/users/bwallima/events{/privacy}","received_events_url":"https://api.github.com/users/bwallima/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2022-09-06T09:18:27Z","updated_at":"2022-09-06T14:48:29Z","closed_at":"2022-09-06T14:48:29Z","author_association":"NONE","active_lock_reason":null,"body":"https://github.com/mlflow/mlflow/blob/c20c664e037b895ff4bd49dda4a26604e55a9b93/mlflow/tracking/client.py#L46\r\n\r\nWhen handing over the tracking_uri and at the same time an environment variable \"MLFLOW_TRACKING_URI\" is set, the artifact is tried to be downloaded from the uri set in the environment variable \"MLFLOW_TRACKING_URI\" and not from the handed over parameter:\r\n```\r\nclient = MlflowClient(tracking_uri='new_uri')\r\nmodel_path = client.download_artifacts(run_id='bee74a92fc0e42fab432bd1994fd194f', path='full_model')\r\n```\r\nHowever when you change the environment variable in advance the new uri is used.\r\n```\r\nos.environ[\"MLFLOW_TRACKING_URI\"] = \"new_uri\"\r\nclient = MlflowClient()\r\nmodel_path = client.download_artifacts(run_id='bee74a92fc0e42fab432bd1994fd194f', path='full_model')\r\n```","closed_by":{"login":"bwallima","id":47379807,"node_id":"MDQ6VXNlcjQ3Mzc5ODA3","avatar_url":"https://avatars.githubusercontent.com/u/47379807?v=4","gravatar_id":"","url":"https://api.github.com/users/bwallima","html_url":"https://github.com/bwallima","followers_url":"https://api.github.com/users/bwallima/followers","following_url":"https://api.github.com/users/bwallima/following{/other_user}","gists_url":"https://api.github.com/users/bwallima/gists{/gist_id}","starred_url":"https://api.github.com/users/bwallima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bwallima/subscriptions","organizations_url":"https://api.github.com/users/bwallima/orgs","repos_url":"https://api.github.com/users/bwallima/repos","events_url":"https://api.github.com/users/bwallima/events{/privacy}","received_events_url":"https://api.github.com/users/bwallima/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/6709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/6709/timeline","performed_via_github_app":null,"state_reason":"completed"}