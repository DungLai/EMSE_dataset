{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1698","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/1698/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/1698/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/1698/events","html_url":"https://github.com/mlflow/mlflow/issues/1698","id":476708053,"node_id":"MDU6SXNzdWU0NzY3MDgwNTM=","number":1698,"title":"[FR] Decorate flask endpoints to add monitoring/authentication","user":{"login":"t-henri","id":51711739,"node_id":"MDQ6VXNlcjUxNzExNzM5","avatar_url":"https://avatars.githubusercontent.com/u/51711739?v=4","gravatar_id":"","url":"https://api.github.com/users/t-henri","html_url":"https://github.com/t-henri","followers_url":"https://api.github.com/users/t-henri/followers","following_url":"https://api.github.com/users/t-henri/following{/other_user}","gists_url":"https://api.github.com/users/t-henri/gists{/gist_id}","starred_url":"https://api.github.com/users/t-henri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/t-henri/subscriptions","organizations_url":"https://api.github.com/users/t-henri/orgs","repos_url":"https://api.github.com/users/t-henri/repos","events_url":"https://api.github.com/users/t-henri/events{/privacy}","received_events_url":"https://api.github.com/users/t-henri/received_events","type":"User","site_admin":false},"labels":[{"id":955449434,"node_id":"MDU6TGFiZWw5NTU0NDk0MzQ=","url":"https://api.github.com/repos/mlflow/mlflow/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":2022849295,"node_id":"MDU6TGFiZWwyMDIyODQ5Mjk1","url":"https://api.github.com/repos/mlflow/mlflow/labels/area/tracking","name":"area/tracking","color":"48eabc","default":false,"description":"Tracking service, tracking client APIs, autologging"},{"id":2022865338,"node_id":"MDU6TGFiZWwyMDIyODY1MzM4","url":"https://api.github.com/repos/mlflow/mlflow/labels/priority/important-longterm","name":"priority/important-longterm","color":"534cb5","default":false,"description":"Important over the long term, but may not be staffed or may need multiple releases to complete."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-08-05T07:50:28Z","updated_at":"2022-06-02T01:56:27Z","closed_at":"2022-06-02T01:56:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Thank you for submitting an issue. Please refer to our [issue policy](https://www.github.com/mlflow/mlflow/blob/master/ISSUE_POLICY.md)\r\nfor information on what types of issues we address.\r\n  \r\nPlease do not delete this template unless you are sure your issue is outside its scope.\r\n\r\n-------\r\n## Guidelines\r\n\r\nFeature requests typically go through the following lifecycle:\r\n\r\n1. Submit feature request with high-level description on GitHub issues (this is what you're doing now)\r\n2. Discuss feature request with a committer, who may ask for a more detailed design\r\n3. After discussion & agreement on feature request, start implementation\r\n\r\n\r\n## Describe the proposal\r\nTo be able to add extra functionalities to the MLFlow tracking server, we would like to be able to decorate flask endpoints. It could be used for many use cases like monitoring or authentication.\r\n\r\n### Motivation\r\nAt Criteo, we use MLFlow tracking server to track our experiments, and we would like to be able to monitor our server.\r\nFor this, we usually use prometheus, so we could use this for flask: https://pypi.org/project/prometheus-flask-exporter/\r\nIt could be usefull to monitor the requests response time, the errors on the server...\r\n\r\nPossible alternative:\r\nOn my side, before launching the server, I get the list of endpoints and decorate them, but then it wouldn't be reusable by others and we are probably not the only ones who want to monitor the server.\r\n\r\n\r\n### Proposed Changes\r\n1/ Add a mlflow-prometheus-exporter that decorates flask endpoint so prometheus can get metrics on server usage.\r\n2/ Add a parameter to the mlflow server command line to activate the prometheus exporter\r\n","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/1698/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/1698/timeline","performed_via_github_app":null,"state_reason":"completed"}