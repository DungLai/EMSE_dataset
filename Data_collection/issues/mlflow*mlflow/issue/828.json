{"url":"https://api.github.com/repos/mlflow/mlflow/issues/828","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/828/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/828/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/828/events","html_url":"https://github.com/mlflow/mlflow/issues/828","id":401528724,"node_id":"MDU6SXNzdWU0MDE1Mjg3MjQ=","number":828,"title":"ModuleNotFoundError: No module named 'cloudpickle' in examples/sklearn_elasticnet_wine when running in mlflow docker container","user":{"login":"jimthompson5802","id":1425269,"node_id":"MDQ6VXNlcjE0MjUyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1425269?v=4","gravatar_id":"","url":"https://api.github.com/users/jimthompson5802","html_url":"https://github.com/jimthompson5802","followers_url":"https://api.github.com/users/jimthompson5802/followers","following_url":"https://api.github.com/users/jimthompson5802/following{/other_user}","gists_url":"https://api.github.com/users/jimthompson5802/gists{/gist_id}","starred_url":"https://api.github.com/users/jimthompson5802/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimthompson5802/subscriptions","organizations_url":"https://api.github.com/users/jimthompson5802/orgs","repos_url":"https://api.github.com/users/jimthompson5802/repos","events_url":"https://api.github.com/users/jimthompson5802/events{/privacy}","received_events_url":"https://api.github.com/users/jimthompson5802/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-01-21T22:19:41Z","updated_at":"2019-02-14T20:37:36Z","closed_at":"2019-01-23T01:31:25Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: examples/sklearn_elasticnet_wine/train.py\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOS 10.14.2\r\n- **MLflow installed from (source or binary)**:  MLFlow Docker container\r\n- **MLflow version (run ``mlflow --version``)**: mlflow, version 0.8.2.dev0\r\n- **Python version**: Python 2.7.15\r\n- **npm version (if running the dev UI):\r\n- **Exact command to reproduce**:\r\n```\r\ndocker run -p 0.0.0.0:5000:5000 -v /Users/jim/Desktop/databricks_mlflow/mlflow:/opt/project mlflow:latest \r\ncd /opt/project/examples_sklearn_wine\r\nmlflow run . -P alpha=0.01\r\n```\r\n\r\n### Describe the problem\r\nmlflow run fails with ModuleNotFoundError: No module named 'cloudpickle'\r\n\r\n### Source code / logs\r\nRelevant error messages:\r\n```\r\n2019/01/21 21:58:22 INFO mlflow.projects: === Running command 'source activate mlflow-7d1a6285d6abcb17f2dab81619b40f9877a8629e && python train.py 0.01 0.1' in run with ID 'a2017165c14347a3af16a085f9ea439c' ===\r\nElasticnet model (alpha=0.010000, l1_ratio=0.100000):\r\n  RMSE: 0.7590197857656096\r\n  MAE: 0.5917620431231971\r\n  R2: 0.25590897480195673\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 66, in <module>\r\n    mlflow.sklearn.log_model(lr, \"model\")\r\n  File \"/opt/conda/envs/mlflow-7d1a6285d6abcb17f2dab81619b40f9877a8629e/lib/python3.6/site-packages/mlflow/sklearn.py\", line 187, in log_model\r\n    serialization_format=serialization_format)\r\n  File \"/opt/conda/envs/mlflow-7d1a6285d6abcb17f2dab81619b40f9877a8629e/lib/python3.6/site-packages/mlflow/models/__init__.py\", line 73, in log\r\n    flavor.save_model(path=local_path, mlflow_model=mlflow_model, **kwargs)\r\n  File \"/opt/conda/envs/mlflow-7d1a6285d6abcb17f2dab81619b40f9877a8629e/lib/python3.6/site-packages/mlflow/sklearn.py\", line 115, in save_model\r\n    serialization_format=serialization_format)\r\n  File \"/opt/conda/envs/mlflow-7d1a6285d6abcb17f2dab81619b40f9877a8629e/lib/python3.6/site-packages/mlflow/sklearn.py\", line 220, in _save_model\r\n    import cloudpickle\r\nModuleNotFoundError: No module named 'cloudpickle'\r\n2019/01/21 21:58:24 ERROR mlflow.cli: === Run (ID 'a2017165c14347a3af16a085f9ea439c') failed ===\r\n```\r\n\r\nSee attached file for full log: [examples_sklearn_elasticnet_wine_error.txt](https://github.com/mlflow/mlflow/files/2780644/examples_sklearn_elasticnet_wine_error.txt)\r\n\r\n### Root Cause Analysis:\r\nAppears `cloudpickle` package missing from conda.yaml specification.    Will create pull request to fix.","closed_by":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/828/timeline","performed_via_github_app":null,"state_reason":"completed"}