{"url":"https://api.github.com/repos/mlflow/mlflow/issues/446","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/446/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/446/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/446/events","html_url":"https://github.com/mlflow/mlflow/issues/446","id":357975498,"node_id":"MDU6SXNzdWUzNTc5NzU0OTg=","number":446,"title":"Paramiko version needs to be bumped for Python 3.7","user":{"login":"arnabbiswas1","id":4428191,"node_id":"MDQ6VXNlcjQ0MjgxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4428191?v=4","gravatar_id":"","url":"https://api.github.com/users/arnabbiswas1","html_url":"https://github.com/arnabbiswas1","followers_url":"https://api.github.com/users/arnabbiswas1/followers","following_url":"https://api.github.com/users/arnabbiswas1/following{/other_user}","gists_url":"https://api.github.com/users/arnabbiswas1/gists{/gist_id}","starred_url":"https://api.github.com/users/arnabbiswas1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arnabbiswas1/subscriptions","organizations_url":"https://api.github.com/users/arnabbiswas1/orgs","repos_url":"https://api.github.com/users/arnabbiswas1/repos","events_url":"https://api.github.com/users/arnabbiswas1/events{/privacy}","received_events_url":"https://api.github.com/users/arnabbiswas1/received_events","type":"User","site_admin":false},"labels":[{"id":955449428,"node_id":"MDU6TGFiZWw5NTU0NDk0Mjg=","url":"https://api.github.com/repos/mlflow/mlflow/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-09-07T08:46:03Z","updated_at":"2019-11-12T19:49:58Z","closed_at":"2019-11-12T19:49:58Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: RHEL 6.10\r\n- **MLflow installed from**:  pip\r\n- **MLflow version (run ``mlflow --version``)**:  0.5.2\r\n- **Python version**: 3.7\r\n- **npm version (if running the dev UI): NA\r\n- **Exact command to reproduce**: log_artifact()\r\n\r\n\r\n### Describe the problem\r\nI tried to use the SFTP option for artifact location and encountered with following issues:\r\n\r\n1. I started the MLFLow server (in Server 3) in the following way:\r\n\r\n> mlflow server --host 0.0.0.0 --port 8090 --default-artifact-root sftp://arnab@<Server_3>:2222/home/arnab/artifact_location --file-store /home/arnab/file_store_location/\r\n\r\nServer 3 is different from Server_1 (Where MLFlow Server is running) and Server 2 (Where client code is running). Also note I am using a custom SFTP port (2222) here. \r\n\r\nOn invoking log_artifact(), I got the following error message which seems to be due to a bug in paramiko with Python 3.7 (https://github.com/paramiko/paramiko/issues/1108 , https://github.com/unbit/sftpclone/issues/26, ). \r\n\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/mlflow/server/handlers.py\", line 198, in _list_artifacts\r\n        artifact_entities = _get_artifact_repo(run).list_artifacts(path)\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/mlflow/server/handlers.py\", line 249, in _get_artifact_repo\r\n        return ArtifactRepository.from_artifact_uri(run.info.artifact_uri, store)\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/mlflow/store/artifact_repo.py\", line 82, in from_artifact_uri\r\n        return SFTPArtifactRepository(artifact_uri)\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/mlflow/store/sftp_artifact_repo.py\", line 26, in __init__\r\n        import pysftp\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/pysftp/__init__.py\", line 12, in <module>\r\n        import paramiko\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/paramiko/__init__.py\", line 31, in <module>\r\n        from paramiko.transport import SecurityOptions, Transport\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/paramiko/transport.py\", line 70, in <module>\r\n        from paramiko.sftp_client import SFTPClient\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/paramiko/sftp_client.py\", line 43, in <module>\r\n        from paramiko.sftp_file import SFTPFile\r\n      File \"/home/arnab/.conda/envs/mlflow/lib/python3.7/site-packages/paramiko/sftp_file.py\", line 68\r\n        self._close(async=True)\r\n                        ^\r\n    SyntaxError: invalid syntax\r\n\r\n*Paramiko version needs to be bumped for this* (https://github.com/paramiko/paramiko/commit/0e0b2b87b547d97860ccf5962ad030df640b692f).\r\n\r\nPlease refer to the detailed discussion on google groups : [Link](https://groups.google.com/forum/#!topic/mlflow-users/vyq2eJqDU0k)\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/446/timeline","performed_via_github_app":null,"state_reason":"completed"}