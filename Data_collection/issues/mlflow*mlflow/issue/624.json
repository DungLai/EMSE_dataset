{"url":"https://api.github.com/repos/mlflow/mlflow/issues/624","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/624/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/624/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/624/events","html_url":"https://github.com/mlflow/mlflow/issues/624","id":369545841,"node_id":"MDU6SXNzdWUzNjk1NDU4NDE=","number":624,"title":"log_param fails and breaks mlflow server if value is an empty string","user":{"login":"pdrharris","id":19955577,"node_id":"MDQ6VXNlcjE5OTU1NTc3","avatar_url":"https://avatars.githubusercontent.com/u/19955577?v=4","gravatar_id":"","url":"https://api.github.com/users/pdrharris","html_url":"https://github.com/pdrharris","followers_url":"https://api.github.com/users/pdrharris/followers","following_url":"https://api.github.com/users/pdrharris/following{/other_user}","gists_url":"https://api.github.com/users/pdrharris/gists{/gist_id}","starred_url":"https://api.github.com/users/pdrharris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdrharris/subscriptions","organizations_url":"https://api.github.com/users/pdrharris/orgs","repos_url":"https://api.github.com/users/pdrharris/repos","events_url":"https://api.github.com/users/pdrharris/events{/privacy}","received_events_url":"https://api.github.com/users/pdrharris/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-10-12T13:13:13Z","updated_at":"2019-08-02T18:03:03Z","closed_at":"2019-08-02T18:03:02Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- Custom code based on stock example\r\n- Ubuntu running in docker container\r\n- installed from binary\r\n- MLflow version (run ``mlflow --version``)**: 0.7.0\r\n- Python Version 3.6.1\r\n- npm version (if running the dev UI): N/A\r\n- mlflow.log_param('Purpose', input(\"What is the purpose of this run? \"))\r\n\r\n### Describe the problem\r\nOn passing an empty string as the value field to log_param, there is no error.\r\nHowever, the next attempt to log anything throws an error (traceback below). \r\n\r\nMLFlow server then responds to any attempts to view that experiment or any runs in it with \"Oops! Something went wrong...\"\r\n\r\nThe only way to retrieve the situation is \r\n1) Delete the experiment (or possibly the run)\r\n2) Restart the MLFlow server\r\n\r\n### Source code / logs\r\nmlflow.log_param('Purpose', input(\"What is the purpose of this run? \"))\r\n<_Blank input is given, i.e. enter is pressed_>\r\nlogger.log_param('Run Title', 'Test Run Runnymede')\r\n\r\nExceptionTraceback (most recent call last)\r\n<ipython-input-8-7b381bc20b27> in <module>\r\n----> 1 logger.log_param('Run Title', 'Test Run Runnymede')\r\n      2 for index, line in enumerate([5, 1, -1]):\r\n      3     logger.log_metric('x', line, index)  # log_metric will store the whole history of these values, so that you can see, e.g. how loss decreased.\r\n      4     logger.log_metric('y', 1/line, index)\r\n\r\n<ipython-input-7-782860fca693> in log_param(self, key, value)\r\n     44 \r\n     45     def log_param(self, key, value):\r\n---> 46         mlflow.log_param(key, value)\r\n     47 \r\n     48     def log_metric(self, key, value, index):\r\n\r\n/opt/conda/envs/fabrik/lib/python3.6/site-packages/mlflow/tracking/fluent.py in log_param(key, value)\r\n    173     \"\"\"\r\n    174     run_id = _get_or_start_run().info.run_uuid\r\n--> 175     MlflowClient().log_param(run_id, key, value)\r\n    176 \r\n    177 \r\n\r\n/opt/conda/envs/fabrik/lib/python3.6/site-packages/mlflow/tracking/client.py in log_param(self, run_id, key, value)\r\n    134         _validate_param_name(key)\r\n    135         param = Param(key, str(value))\r\n--> 136         self.store.log_param(run_id, param)\r\n    137 \r\n    138     def set_tag(self, run_id, key, value):\r\n\r\n/opt/conda/envs/fabrik/lib/python3.6/site-packages/mlflow/store/file_store.py in log_param(self, run_uuid, param)\r\n    463         _validate_run_id(run_uuid)\r\n    464         _validate_param_name(param.key)\r\n--> 465         run = self.get_run(run_uuid)\r\n    466         check_run_is_active(run.info)\r\n    467         param_path = self._get_param_path(run.info.experiment_id, run_uuid, param.key)\r\n\r\n/opt/conda/envs/fabrik/lib/python3.6/site-packages/mlflow/store/file_store.py in get_run(self, run_uuid)\r\n    296         run_info = self._get_run_info(run_uuid)\r\n    297         metrics = self.get_all_metrics(run_uuid)\r\n--> 298         params = self.get_all_params(run_uuid)\r\n    299         tags = self.get_all_tags(run_uuid)\r\n    300         return Run(run_info, RunData(metrics, params, tags))\r\n\r\n/opt/conda/envs/fabrik/lib/python3.6/site-packages/mlflow/store/file_store.py in get_all_params(self, run_uuid)\r\n    401         params = []\r\n    402         for param_file in param_files:\r\n--> 403             params.append(self._get_param_from_file(parent_path, param_file))\r\n    404         return params\r\n    405 \r\n\r\n/opt/conda/envs/fabrik/lib/python3.6/site-packages/mlflow/store/file_store.py in _get_param_from_file(parent_path, param_name)\r\n    377         param_data = read_file_lines(parent_path, param_name)\r\n    378         if len(param_data) == 0:\r\n--> 379             raise Exception(\"Param '%s' is malformed. No data found.\" % param_name)\r\n    380         if len(param_data) > 1:\r\n    381             raise Exception(\"Unexpected data for param '%s'. Param recorded more than once\"\r\n\r\nException: Param 'Purpose' is malformed. No data found.","closed_by":{"login":"ankit-db","id":52183359,"node_id":"MDQ6VXNlcjUyMTgzMzU5","avatar_url":"https://avatars.githubusercontent.com/u/52183359?v=4","gravatar_id":"","url":"https://api.github.com/users/ankit-db","html_url":"https://github.com/ankit-db","followers_url":"https://api.github.com/users/ankit-db/followers","following_url":"https://api.github.com/users/ankit-db/following{/other_user}","gists_url":"https://api.github.com/users/ankit-db/gists{/gist_id}","starred_url":"https://api.github.com/users/ankit-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankit-db/subscriptions","organizations_url":"https://api.github.com/users/ankit-db/orgs","repos_url":"https://api.github.com/users/ankit-db/repos","events_url":"https://api.github.com/users/ankit-db/events{/privacy}","received_events_url":"https://api.github.com/users/ankit-db/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/624/timeline","performed_via_github_app":null,"state_reason":"completed"}