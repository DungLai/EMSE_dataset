{"url":"https://api.github.com/repos/mlflow/mlflow/issues/4075","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/4075/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/4075/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/4075/events","html_url":"https://github.com/mlflow/mlflow/issues/4075","id":803308628,"node_id":"MDU6SXNzdWU4MDMzMDg2Mjg=","number":4075,"title":"Error when using mlflow.sklearn.autolog()","user":{"login":"ngu086","id":77675066,"node_id":"MDQ6VXNlcjc3Njc1MDY2","avatar_url":"https://avatars.githubusercontent.com/u/77675066?v=4","gravatar_id":"","url":"https://api.github.com/users/ngu086","html_url":"https://github.com/ngu086","followers_url":"https://api.github.com/users/ngu086/followers","following_url":"https://api.github.com/users/ngu086/following{/other_user}","gists_url":"https://api.github.com/users/ngu086/gists{/gist_id}","starred_url":"https://api.github.com/users/ngu086/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngu086/subscriptions","organizations_url":"https://api.github.com/users/ngu086/orgs","repos_url":"https://api.github.com/users/ngu086/repos","events_url":"https://api.github.com/users/ngu086/events{/privacy}","received_events_url":"https://api.github.com/users/ngu086/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-02-08T08:06:13Z","updated_at":"2021-02-08T11:04:29Z","closed_at":"2021-02-08T11:03:30Z","author_association":"NONE","active_lock_reason":null,"body":"On Databricks Runtime 6.4 (includes Apache Spark 2.4.5, Scala 2.11)\r\n\r\nI get an error 'str' object has no attribute 'clear', when I try to use mlflow.sklearn.autolog().\r\n\r\nI tried updating the scikit-learn. But this seems to be bother yet.\r\n\r\nFollowing is the log which also mentions \"ImportError: cannot import name 'all_estimators' from 'sklearn.utils' (/databricks/python/lib/python3.7/site-packages/sklearn/utils/__init__.py)\"\r\n\r\nAttaching the complete log.\r\n\r\n---------------------------------------------------------------------------\r\nImportError                               Traceback (most recent call last)\r\n/databricks/python/lib/python3.7/site-packages/mlflow/sklearn/utils.py in _all_estimators()\r\n    729     try:\r\n--> 730         from sklearn.utils import all_estimators\r\n    731 \r\n\r\nImportError: cannot import name 'all_estimators' from 'sklearn.utils' (/databricks/python/lib/python3.7/site-packages/sklearn/utils/__init__.py)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n<command-3446996804139076> in <module>\r\n      1 # Enable autolog()\r\n      2 # mlflow.sklearn.autolog() requires mlflow 1.11.0 or above.\r\n----> 3 mlflow.sklearn.autolog()\r\n      4 \r\n      5 # With autolog() enabled, all model parameters, a model score, and the fitted model are automatically logged.\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/utils/autologging_utils.py in autolog(*args, **kwargs)\r\n    343             AUTOLOGGING_INTEGRATIONS[name] = config_to_store\r\n    344 \r\n--> 345             return _autolog(*args, **kwargs)\r\n    346 \r\n    347         wrapped_autolog = _update_wrapper_extended(autolog, _autolog)\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/sklearn/__init__.py in autolog(log_input_examples, log_model_signatures, log_models, disable, exclusive)\r\n    933                 return original(self, *args, **kwargs)\r\n    934 \r\n--> 935     _, estimators_to_patch = zip(*_all_estimators())\r\n    936     # Ensure that relevant meta estimators (e.g. GridSearchCV, Pipeline) are selected\r\n    937     # for patching if they are not already included in the output of `all_estimators()`\r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/sklearn/utils.py in _all_estimators()\r\n    732         return all_estimators()\r\n    733     except ImportError:\r\n--> 734         return _backported_all_estimators()\r\n    735 \r\n    736 \r\n\r\n/databricks/python/lib/python3.7/site-packages/mlflow/sklearn/utils.py in _backported_all_estimators(type_filter)\r\n    797     # Ignore deprecation warnings triggered at import time and from walking\r\n    798     # packages\r\n--> 799     with ignore_warnings(category=FutureWarning):\r\n    800         for _, modname, _ in pkgutil.walk_packages(path=[root], prefix=\"sklearn.\"):\r\n    801             mod_parts = modname.split(\".\")\r\n\r\n/databricks/python/lib/python3.7/site-packages/sklearn/utils/testing.py in __enter__(self)\r\n    366         self._module.filters = self._filters[:]\r\n    367         self._showwarning = self._module.showwarning\r\n--> 368         clean_warning_registry()\r\n    369         warnings.simplefilter(\"ignore\", self.category)\r\n    370 \r\n\r\n/databricks/python/lib/python3.7/site-packages/sklearn/utils/testing.py in clean_warning_registry()\r\n    799             continue\r\n    800         if hasattr(mod, reg):\r\n--> 801             getattr(mod, reg).clear()\r\n    802 \r\n    803 \r\n\r\nAttributeError: 'str' object has no attribute 'clear'\r\n","closed_by":{"login":"ngu086","id":77675066,"node_id":"MDQ6VXNlcjc3Njc1MDY2","avatar_url":"https://avatars.githubusercontent.com/u/77675066?v=4","gravatar_id":"","url":"https://api.github.com/users/ngu086","html_url":"https://github.com/ngu086","followers_url":"https://api.github.com/users/ngu086/followers","following_url":"https://api.github.com/users/ngu086/following{/other_user}","gists_url":"https://api.github.com/users/ngu086/gists{/gist_id}","starred_url":"https://api.github.com/users/ngu086/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngu086/subscriptions","organizations_url":"https://api.github.com/users/ngu086/orgs","repos_url":"https://api.github.com/users/ngu086/repos","events_url":"https://api.github.com/users/ngu086/events{/privacy}","received_events_url":"https://api.github.com/users/ngu086/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/4075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/4075/timeline","performed_via_github_app":null,"state_reason":"completed"}