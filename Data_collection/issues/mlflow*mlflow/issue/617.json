{"url":"https://api.github.com/repos/mlflow/mlflow/issues/617","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/617/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/617/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/617/events","html_url":"https://github.com/mlflow/mlflow/issues/617","id":368393461,"node_id":"MDU6SXNzdWUzNjgzOTM0NjE=","number":617,"title":"Logging artifacts fail when running MLFlow server in a docker container","user":{"login":"bertomartin","id":698354,"node_id":"MDQ6VXNlcjY5ODM1NA==","avatar_url":"https://avatars.githubusercontent.com/u/698354?v=4","gravatar_id":"","url":"https://api.github.com/users/bertomartin","html_url":"https://github.com/bertomartin","followers_url":"https://api.github.com/users/bertomartin/followers","following_url":"https://api.github.com/users/bertomartin/following{/other_user}","gists_url":"https://api.github.com/users/bertomartin/gists{/gist_id}","starred_url":"https://api.github.com/users/bertomartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertomartin/subscriptions","organizations_url":"https://api.github.com/users/bertomartin/orgs","repos_url":"https://api.github.com/users/bertomartin/repos","events_url":"https://api.github.com/users/bertomartin/events{/privacy}","received_events_url":"https://api.github.com/users/bertomartin/received_events","type":"User","site_admin":false},"labels":[{"id":1554650079,"node_id":"MDU6TGFiZWwxNTU0NjUwMDc5","url":"https://api.github.com/repos/mlflow/mlflow/labels/stale","name":"stale","color":"828282","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-10-09T20:54:22Z","updated_at":"2019-11-12T23:50:04Z","closed_at":"2019-11-12T23:50:04Z","author_association":"NONE","active_lock_reason":null,"body":"### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in MLflow)**: stock\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: mac\r\n- **MLflow installed from (source or binary)**: source\r\n- **MLflow version (run ``mlflow --version``)**: 0.7.0\r\n- **Python version**: 3.7\r\n- **npm version (if running the dev UI):N/A\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI'm trying to use a minio server to log large artfiacts locally. I've setup MLFlow Server within a docker container. It's stated in the docs here (https://www.mlflow.org/docs/latest/tracking.html#amazon-s3) that we can set this up by setting an environment variable:\r\n```bash\r\nexport MLFLOW_S3_ENDPOINT_URL=http://1.2.3.4:9000\r\n```\r\nAfter executing my \"example.py\" file, I get the errors below. I setup this environment variable both in the container and on my local machine where I'm running the mlflow client from. I browsed the source code, but it doesn't seem like any of the repositories are expecting an endpoint in this format for storing large artifacts. \r\n\r\nI basically just want to understand how to use a minio server (as the docs seem to state) as a local artifact store as it's not possible to store artifacts when you're running the mlflow server within a docker container\r\n\r\n### Source code / logs\r\n```python\r\n$ python example.py\r\nlogging artifacts to:  /opt/mlflow/artifactStore/0/cda16318c26740768ca17876aafe7a38/artifacts\r\nTraceback (most recent call last):\r\n  File \"example.py\", line 20, in <module>\r\n    log_artifact(\"output.txt\")\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/site-packages/mlflow/tracking/fluent.py\", line 212, in log_artifact\r\n    MlflowClient().log_artifact(run_id, local_path, artifact_path)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/site-packages/mlflow/tracking/client.py\", line 155, in log_artifact\r\n    artifact_repo.log_artifact(local_path, artifact_path)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/site-packages/mlflow/store/local_artifact_repo.py\", line 21, in log_artifact\r\n    mkdir(artifact_dir)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/site-packages/mlflow/utils/file_utils.py\", line 104, in mkdir\r\n    raise e\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/site-packages/mlflow/utils/file_utils.py\", line 101, in mkdir\r\n    os.makedirs(target)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/os.py\", line 210, in makedirs\r\n    makedirs(head, mode, exist_ok)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/os.py\", line 210, in makedirs\r\n    makedirs(head, mode, exist_ok)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/os.py\", line 210, in makedirs\r\n    makedirs(head, mode, exist_ok)\r\n  File \"/Users/trpfb50/anaconda/envs/py36/lib/python3.6/os.py\", line 220, in makedirs\r\n    mkdir(name, mode)\r\nPermissionError: [Errno 13] Permission denied: '/opt/mlflow'\r\n```\r\n","closed_by":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/617/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/617/timeline","performed_via_github_app":null,"state_reason":"completed"}