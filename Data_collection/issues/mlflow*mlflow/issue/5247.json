{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5247","repository_url":"https://api.github.com/repos/mlflow/mlflow","labels_url":"https://api.github.com/repos/mlflow/mlflow/issues/5247/labels{/name}","comments_url":"https://api.github.com/repos/mlflow/mlflow/issues/5247/comments","events_url":"https://api.github.com/repos/mlflow/mlflow/issues/5247/events","html_url":"https://github.com/mlflow/mlflow/issues/5247","id":1098301242,"node_id":"I_kwDOCB5Jx85Bdr86","number":5247,"title":"Unable to log a TensorFlow SavedModel","user":{"login":"luana-be","id":46906503,"node_id":"MDQ6VXNlcjQ2OTA2NTAz","avatar_url":"https://avatars.githubusercontent.com/u/46906503?v=4","gravatar_id":"","url":"https://api.github.com/users/luana-be","html_url":"https://github.com/luana-be","followers_url":"https://api.github.com/users/luana-be/followers","following_url":"https://api.github.com/users/luana-be/following{/other_user}","gists_url":"https://api.github.com/users/luana-be/gists{/gist_id}","starred_url":"https://api.github.com/users/luana-be/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luana-be/subscriptions","organizations_url":"https://api.github.com/users/luana-be/orgs","repos_url":"https://api.github.com/users/luana-be/repos","events_url":"https://api.github.com/users/luana-be/events{/privacy}","received_events_url":"https://api.github.com/users/luana-be/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-01-10T19:43:00Z","updated_at":"2022-03-08T06:34:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I'm working with MLflow version **1.22.0** and I'm trying to log a TensorFlow model which is in the SavedModel format. When I run the command:\r\n\r\n`mlflow.tensorflow.log_model(tf_saved_model_dir=export_dir, tf_meta_graph_tags=[\"serve\"], artifact_path=\"mlruns/0/0dcc80caa5be4574a92a26306e24cdb8/artifacts/model\", tf_signature_def_key=None)`\r\n\r\nI get the following error:\r\n\r\n```\r\n2022/01/10 14:37:29 INFO mlflow.tensorflow: Validating the specified TensorFlow model by attempting to load it in a new TensorFlow graph...\r\nWARNING:tensorflow:From /mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/tensorflow/__init__.py:405: load (from tensorflow.python.saved_model.loader_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nThis function will only be available through the v1 compatibility library as tf.compat.v1.saved_model.loader.load or tf.compat.v1.saved_model.load. There will be a new function for importing SavedModels in Tensorflow 2.0.\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/utils/annotations.py\", line 62, in wrapper\r\n    return func(**kwargs)\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/tensorflow/__init__.py\", line 193, in log_model\r\n    extra_pip_requirements=extra_pip_requirements,\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/models/model.py\", line 187, in log\r\n    flavor.save_model(path=local_path, mlflow_model=mlflow_model, **kwargs)\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/utils/annotations.py\", line 62, in wrapper\r\n    return func(**kwargs)\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/tensorflow/__init__.py\", line 263, in save_model\r\n    tf_signature_def_key=tf_signature_def_key,\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/tensorflow/__init__.py\", line 330, in _validate_saved_model\r\n    tf_signature_def_key=tf_signature_def_key,\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/mlflow/tensorflow/__init__.py\", line 405, in _load_tensorflow_saved_model\r\n    tags=tf_meta_graph_tags, export_dir=tf_saved_model_dir\r\n  File \"/mnt/3/shares/biobert/miniconda3/envs/biobert/lib/python3.7/site-packages/tensorflow_core/python/util/deprecation.py\", line 324, in new_func\r\n    return func(*args, **kwargs)\r\nTypeError: load() missing 1 required positional argument: 'sess'\r\n```\r\n\r\nA similar issue is occurring with the command **mlflow.tensorflow.save_model** as well. Was \"**sess**\" required in previous versions? I found some references to this parameter in the MLflow Documentation.\r\n\r\nNote that I'm able to load the model with the TensorFlow library, without passing through MLflow.\r\n\r\nThank you in advance for your help!","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/5247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mlflow/mlflow/issues/5247/timeline","performed_via_github_app":null,"state_reason":null}