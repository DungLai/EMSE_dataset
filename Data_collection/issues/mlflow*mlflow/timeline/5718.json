[{"id":6450698568,"node_id":"LE_lADOCB5Jx85H-RW_zwAAAAGAfdlI","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6450698568","actor":{"login":"adin786","id":46710015,"node_id":"MDQ6VXNlcjQ2NzEwMDE1","avatar_url":"https://avatars.githubusercontent.com/u/46710015?v=4","gravatar_id":"","url":"https://api.github.com/users/adin786","html_url":"https://github.com/adin786","followers_url":"https://api.github.com/users/adin786/followers","following_url":"https://api.github.com/users/adin786/following{/other_user}","gists_url":"https://api.github.com/users/adin786/gists{/gist_id}","starred_url":"https://api.github.com/users/adin786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adin786/subscriptions","organizations_url":"https://api.github.com/users/adin786/orgs","repos_url":"https://api.github.com/users/adin786/repos","events_url":"https://api.github.com/users/adin786/events{/privacy}","received_events_url":"https://api.github.com/users/adin786/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-18T22:20:16Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":6450699262,"node_id":"LE_lADOCB5Jx85H-RW_zwAAAAGAfdv-","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6450699262","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-18T22:20:29Z","label":{"name":"area/projects","color":"48eabc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1102745949","html_url":"https://github.com/mlflow/mlflow/issues/5718#issuecomment-1102745949","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5718","id":1102745949,"node_id":"IC_kwDOCB5Jx85BupFd","user":{"login":"WeichenXu123","id":19235986,"node_id":"MDQ6VXNlcjE5MjM1OTg2","avatar_url":"https://avatars.githubusercontent.com/u/19235986?v=4","gravatar_id":"","url":"https://api.github.com/users/WeichenXu123","html_url":"https://github.com/WeichenXu123","followers_url":"https://api.github.com/users/WeichenXu123/followers","following_url":"https://api.github.com/users/WeichenXu123/following{/other_user}","gists_url":"https://api.github.com/users/WeichenXu123/gists{/gist_id}","starred_url":"https://api.github.com/users/WeichenXu123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WeichenXu123/subscriptions","organizations_url":"https://api.github.com/users/WeichenXu123/orgs","repos_url":"https://api.github.com/users/WeichenXu123/repos","events_url":"https://api.github.com/users/WeichenXu123/events{/privacy}","received_events_url":"https://api.github.com/users/WeichenXu123/received_events","type":"User","site_admin":false},"created_at":"2022-04-19T14:46:31Z","updated_at":"2022-04-19T14:46:31Z","author_association":"COLLABORATOR","body":"I propose if without `--version` specified, automatically detect the \"main\" or \"master\" branch, if both of them exists, then it is ambiguous and raise error, but if only one of them exists, then use it.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1102745949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"WeichenXu123","id":19235986,"node_id":"MDQ6VXNlcjE5MjM1OTg2","avatar_url":"https://avatars.githubusercontent.com/u/19235986?v=4","gravatar_id":"","url":"https://api.github.com/users/WeichenXu123","html_url":"https://github.com/WeichenXu123","followers_url":"https://api.github.com/users/WeichenXu123/followers","following_url":"https://api.github.com/users/WeichenXu123/following{/other_user}","gists_url":"https://api.github.com/users/WeichenXu123/gists{/gist_id}","starred_url":"https://api.github.com/users/WeichenXu123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WeichenXu123/subscriptions","organizations_url":"https://api.github.com/users/WeichenXu123/orgs","repos_url":"https://api.github.com/users/WeichenXu123/repos","events_url":"https://api.github.com/users/WeichenXu123/events{/privacy}","received_events_url":"https://api.github.com/users/WeichenXu123/received_events","type":"User","site_admin":false}},{"id":6459050821,"node_id":"LE_lADOCB5Jx85H-RW_zwAAAAGA_UtF","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6459050821","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-04-20T00:07:30Z","label":{"name":"help wanted","color":"c5def5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1103280535","html_url":"https://github.com/mlflow/mlflow/issues/5718#issuecomment-1103280535","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5718","id":1103280535,"node_id":"IC_kwDOCB5Jx85BwrmX","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2022-04-20T00:09:55Z","updated_at":"2022-04-20T00:09:55Z","author_association":"COLLABORATOR","body":"@WeichenXu123 That proposal sounds great!\r\n\r\n@adin786 Feel free to file a pull request; we'd be happy to review it and provide guidance where necessary! Thank you in advance for your contribution!","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1103280535/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":6459062908,"node_id":"MEE_lADOCB5Jx85H-RW_zwAAAAGA_Xp8","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6459062908","actor":{"login":"WeichenXu123","id":19235986,"node_id":"MDQ6VXNlcjE5MjM1OTg2","avatar_url":"https://avatars.githubusercontent.com/u/19235986?v=4","gravatar_id":"","url":"https://api.github.com/users/WeichenXu123","html_url":"https://github.com/WeichenXu123","followers_url":"https://api.github.com/users/WeichenXu123/followers","following_url":"https://api.github.com/users/WeichenXu123/following{/other_user}","gists_url":"https://api.github.com/users/WeichenXu123/gists{/gist_id}","starred_url":"https://api.github.com/users/WeichenXu123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WeichenXu123/subscriptions","organizations_url":"https://api.github.com/users/WeichenXu123/orgs","repos_url":"https://api.github.com/users/WeichenXu123/repos","events_url":"https://api.github.com/users/WeichenXu123/events{/privacy}","received_events_url":"https://api.github.com/users/WeichenXu123/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-04-20T00:09:55Z","performed_via_github_app":null},{"id":6459062916,"node_id":"SE_lADOCB5Jx85H-RW_zwAAAAGA_XqE","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6459062916","actor":{"login":"WeichenXu123","id":19235986,"node_id":"MDQ6VXNlcjE5MjM1OTg2","avatar_url":"https://avatars.githubusercontent.com/u/19235986?v=4","gravatar_id":"","url":"https://api.github.com/users/WeichenXu123","html_url":"https://github.com/WeichenXu123","followers_url":"https://api.github.com/users/WeichenXu123/followers","following_url":"https://api.github.com/users/WeichenXu123/following{/other_user}","gists_url":"https://api.github.com/users/WeichenXu123/gists{/gist_id}","starred_url":"https://api.github.com/users/WeichenXu123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WeichenXu123/subscriptions","organizations_url":"https://api.github.com/users/WeichenXu123/orgs","repos_url":"https://api.github.com/users/WeichenXu123/repos","events_url":"https://api.github.com/users/WeichenXu123/events{/privacy}","received_events_url":"https://api.github.com/users/WeichenXu123/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-04-20T00:09:55Z","performed_via_github_app":null},{"id":6459062925,"node_id":"MEE_lADOCB5Jx85H-RW_zwAAAAGA_XqN","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6459062925","actor":{"login":"adin786","id":46710015,"node_id":"MDQ6VXNlcjQ2NzEwMDE1","avatar_url":"https://avatars.githubusercontent.com/u/46710015?v=4","gravatar_id":"","url":"https://api.github.com/users/adin786","html_url":"https://github.com/adin786","followers_url":"https://api.github.com/users/adin786/followers","following_url":"https://api.github.com/users/adin786/following{/other_user}","gists_url":"https://api.github.com/users/adin786/gists{/gist_id}","starred_url":"https://api.github.com/users/adin786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adin786/subscriptions","organizations_url":"https://api.github.com/users/adin786/orgs","repos_url":"https://api.github.com/users/adin786/repos","events_url":"https://api.github.com/users/adin786/events{/privacy}","received_events_url":"https://api.github.com/users/adin786/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-04-20T00:09:56Z","performed_via_github_app":null},{"id":6459062929,"node_id":"SE_lADOCB5Jx85H-RW_zwAAAAGA_XqR","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6459062929","actor":{"login":"adin786","id":46710015,"node_id":"MDQ6VXNlcjQ2NzEwMDE1","avatar_url":"https://avatars.githubusercontent.com/u/46710015?v=4","gravatar_id":"","url":"https://api.github.com/users/adin786","html_url":"https://github.com/adin786","followers_url":"https://api.github.com/users/adin786/followers","following_url":"https://api.github.com/users/adin786/following{/other_user}","gists_url":"https://api.github.com/users/adin786/gists{/gist_id}","starred_url":"https://api.github.com/users/adin786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adin786/subscriptions","organizations_url":"https://api.github.com/users/adin786/orgs","repos_url":"https://api.github.com/users/adin786/repos","events_url":"https://api.github.com/users/adin786/events{/privacy}","received_events_url":"https://api.github.com/users/adin786/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-04-20T00:09:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1103373381","html_url":"https://github.com/mlflow/mlflow/issues/5718#issuecomment-1103373381","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5718","id":1103373381,"node_id":"IC_kwDOCB5Jx85BxCRF","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-04-20T02:04:09Z","updated_at":"2022-05-15T03:36:16Z","author_association":"MEMBER","body":"I tested the change below and it worked:\r\n\r\n```diff\r\ndiff --git a/mlflow/projects/utils.py b/mlflow/projects/utils.py\r\nindex faf250488..f637df2b2 100644\r\n--- a/mlflow/projects/utils.py\r\n+++ b/mlflow/projects/utils.py\r\n@@ -200,8 +200,8 @@ def _fetch_git_repo(uri, version, dst_dir):\r\n             )\r\n     else:\r\n         origin.fetch(depth=GIT_FETCH_DEPTH)\r\n-        repo.create_head(\"master\", origin.refs.master)\r\n-        repo.heads.master.checkout()\r\n+        repo.create_head(\"default\", origin.refs[0])\r\n+        repo.heads.default.checkout()\r\n     repo.submodule_update(init=True, recursive=True)\r\n```\r\n\r\n## How this works\r\n\r\n1. `origin.fetch(depth=GIT_FETCH_DEPTH)` fethces the default branch. It might be \"master\", \"main\", \"foo\", \"bar\", or something else. We can just let `gitpython` determine that.\r\n2. `origin.refs[0]` refers to the default branch so set it to \"default\".\r\n3. Done.\r\n\r\nI'm not 100% confident this works so we need to carefully test it.\r\n\r\n## How can we test this?\r\n\r\nWe can test this by creating a few MLflow project repositories with different default branches (e.g. \"master\", \"main\", and \"foo\") and run `mlflow run` against them to make sure the default branch is fetched regardless of its name.\r\n","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1103373381/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1103384586","html_url":"https://github.com/mlflow/mlflow/issues/5718#issuecomment-1103384586","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5718","id":1103384586,"node_id":"IC_kwDOCB5Jx85BxFAK","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-04-20T02:14:46Z","updated_at":"2022-04-20T02:14:58Z","author_association":"MEMBER","body":"I also tested this but it didn't work:\r\n\r\n```diff\r\ndiff --git a/mlflow/projects/utils.py b/mlflow/projects/utils.py\r\nindex faf250488..8124a3366 100644\r\n--- a/mlflow/projects/utils.py\r\n+++ b/mlflow/projects/utils.py\r\n@@ -200,8 +200,6 @@ def _fetch_git_repo(uri, version, dst_dir):\r\n             )\r\n     else:\r\n         origin.fetch(depth=GIT_FETCH_DEPTH)\r\n-        repo.create_head(\"master\", origin.refs.master)\r\n-        repo.heads.master.checkout()\r\n     repo.submodule_update(init=True, recursive=True)\r\n```\r\n\r\nResult\r\n\r\n```\r\n$ mlflow run https://github.com/rcallagh/mlflow_submodule_test.git\r\n2022/04/20 11:13:53 INFO mlflow.projects.utils: === Fetching project from https://github.com/rcallagh/mlflow_submodule_test.git into /var/folders/33/kkm875tn7cxb89b8mmcykrx00000gn/T/tmps5qmo1k9 ===\r\nTraceback (most recent call last):\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/bin/mlflow\", line 33, in <module>\r\n    sys.exit(load_entry_point('mlflow', 'console_scripts', 'mlflow')())\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/click/core.py\", line 1130, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/click/core.py\", line 1055, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/click/core.py\", line 1657, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/click/core.py\", line 760, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/cli.py\", line 192, in run\r\n    run_name=run_name,\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/projects/__init__.py\", line 341, in run\r\n    run_name=run_name,\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/projects/__init__.py\", line 102, in _run\r\n    experiment_id,\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/projects/backend/local.py\", line 46, in run\r\n    work_dir = fetch_and_validate_project(project_uri, version, entry_point, params)\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/projects/utils.py\", line 130, in fetch_and_validate_project\r\n    work_dir = _fetch_project(uri=uri, version=version)\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/projects/utils.py\", line 164, in _fetch_project\r\n    _fetch_git_repo(parsed_uri, version, dst_dir)\r\n  File \"/Users/harutakakawamura/Desktop/repositories/mlflow/mlflow/projects/utils.py\", line 203, in _fetch_git_repo\r\n    repo.submodule_update(init=True, recursive=True)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/repo/base.py\", line 393, in submodule_update\r\n    return RootModule(self).update(*args, **kwargs)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/objects/submodule/root.py\", line 53, in __init__\r\n    parent_commit=repo.head.commit,\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/refs/symbolic.py\", line 197, in _get_commit\r\n    obj = self._get_object()\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/refs/symbolic.py\", line 190, in _get_object\r\n    return Object.new_from_sha(self.repo, hex_to_bin(self.dereference_recursive(self.repo, self.path)))\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/refs/symbolic.py\", line 132, in dereference_recursive\r\n    hexsha, ref_path = cls._get_ref_info(repo, ref_path)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/refs/symbolic.py\", line 181, in _get_ref_info\r\n    return cls._get_ref_info_helper(repo, ref_path)\r\n  File \"/Users/harutakakawamura/.pyenv/versions/miniconda3-4.7.12/envs/mlflow-dev-env/lib/python3.7/site-packages/git/refs/symbolic.py\", line 164, in _get_ref_info_helper\r\n    raise ValueError(\"Reference at %r does not exist\" % ref_path)\r\nValueError: Reference at 'refs/heads/master' does not exist\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1103384586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1126983938","html_url":"https://github.com/mlflow/mlflow/issues/5718#issuecomment-1126983938","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5718","id":1126983938,"node_id":"IC_kwDOCB5Jx85DLGkC","user":{"login":"jagane-infinstor","id":99518962,"node_id":"U_kgDOBe6J8g","avatar_url":"https://avatars.githubusercontent.com/u/99518962?v=4","gravatar_id":"","url":"https://api.github.com/users/jagane-infinstor","html_url":"https://github.com/jagane-infinstor","followers_url":"https://api.github.com/users/jagane-infinstor/followers","following_url":"https://api.github.com/users/jagane-infinstor/following{/other_user}","gists_url":"https://api.github.com/users/jagane-infinstor/gists{/gist_id}","starred_url":"https://api.github.com/users/jagane-infinstor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jagane-infinstor/subscriptions","organizations_url":"https://api.github.com/users/jagane-infinstor/orgs","repos_url":"https://api.github.com/users/jagane-infinstor/repos","events_url":"https://api.github.com/users/jagane-infinstor/events{/privacy}","received_events_url":"https://api.github.com/users/jagane-infinstor/received_events","type":"User","site_admin":false},"created_at":"2022-05-15T17:33:51Z","updated_at":"2022-05-15T17:33:51Z","author_association":"NONE","body":"I tried the fix mentioned above, i.e. using repo.heads.default.checkout(). It worked for me with the following cases:\r\n\r\n1. github public repo that does not require auth at https://github.com/jagane-infinstor/mlflow-example-docker.git \r\n2. AWS CodeCommit private repo that requires auth\r\n\r\nI think this is a better solution that my proposal to try and check out a branch called 'main' if the attempt to checkout a branch called 'master' fails.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1126983938/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jagane-infinstor","id":99518962,"node_id":"U_kgDOBe6J8g","avatar_url":"https://avatars.githubusercontent.com/u/99518962?v=4","gravatar_id":"","url":"https://api.github.com/users/jagane-infinstor","html_url":"https://github.com/jagane-infinstor","followers_url":"https://api.github.com/users/jagane-infinstor/followers","following_url":"https://api.github.com/users/jagane-infinstor/following{/other_user}","gists_url":"https://api.github.com/users/jagane-infinstor/gists{/gist_id}","starred_url":"https://api.github.com/users/jagane-infinstor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jagane-infinstor/subscriptions","organizations_url":"https://api.github.com/users/jagane-infinstor/orgs","repos_url":"https://api.github.com/users/jagane-infinstor/repos","events_url":"https://api.github.com/users/jagane-infinstor/events{/privacy}","received_events_url":"https://api.github.com/users/jagane-infinstor/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1128487992","html_url":"https://github.com/mlflow/mlflow/issues/5718#issuecomment-1128487992","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5718","id":1128487992,"node_id":"IC_kwDOCB5Jx85DQ1w4","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-05-17T06:59:22Z","updated_at":"2022-05-17T06:59:22Z","author_association":"MEMBER","body":"@jagane-infinstor Thanks for the comment. Can you update #5872?","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1128487992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":6621679285,"node_id":"MEE_lADOCB5Jx85H-RW_zwAAAAGKrs61","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6621679285","actor":{"login":"jagane-infinstor","id":99518962,"node_id":"U_kgDOBe6J8g","avatar_url":"https://avatars.githubusercontent.com/u/99518962?v=4","gravatar_id":"","url":"https://api.github.com/users/jagane-infinstor","html_url":"https://github.com/jagane-infinstor","followers_url":"https://api.github.com/users/jagane-infinstor/followers","following_url":"https://api.github.com/users/jagane-infinstor/following{/other_user}","gists_url":"https://api.github.com/users/jagane-infinstor/gists{/gist_id}","starred_url":"https://api.github.com/users/jagane-infinstor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jagane-infinstor/subscriptions","organizations_url":"https://api.github.com/users/jagane-infinstor/orgs","repos_url":"https://api.github.com/users/jagane-infinstor/repos","events_url":"https://api.github.com/users/jagane-infinstor/events{/privacy}","received_events_url":"https://api.github.com/users/jagane-infinstor/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-17T06:59:23Z","performed_via_github_app":null},{"id":6621679288,"node_id":"SE_lADOCB5Jx85H-RW_zwAAAAGKrs64","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6621679288","actor":{"login":"jagane-infinstor","id":99518962,"node_id":"U_kgDOBe6J8g","avatar_url":"https://avatars.githubusercontent.com/u/99518962?v=4","gravatar_id":"","url":"https://api.github.com/users/jagane-infinstor","html_url":"https://github.com/jagane-infinstor","followers_url":"https://api.github.com/users/jagane-infinstor/followers","following_url":"https://api.github.com/users/jagane-infinstor/following{/other_user}","gists_url":"https://api.github.com/users/jagane-infinstor/gists{/gist_id}","starred_url":"https://api.github.com/users/jagane-infinstor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jagane-infinstor/subscriptions","organizations_url":"https://api.github.com/users/jagane-infinstor/orgs","repos_url":"https://api.github.com/users/jagane-infinstor/repos","events_url":"https://api.github.com/users/jagane-infinstor/events{/privacy}","received_events_url":"https://api.github.com/users/jagane-infinstor/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-17T06:59:23Z","performed_via_github_app":null},{"id":6640974170,"node_id":"CE_lADOCB5Jx85H-RW_zwAAAAGL1Tla","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6640974170","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-05-19T09:41:13Z","state_reason":null,"performed_via_github_app":null}]