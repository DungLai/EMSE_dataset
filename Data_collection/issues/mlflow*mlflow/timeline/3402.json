[{"id":3745205621,"node_id":"MDEyOkxhYmVsZWRFdmVudDM3NDUyMDU2MjE=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3745205621","actor":{"login":"sephib","id":8223335,"node_id":"MDQ6VXNlcjgyMjMzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/8223335?v=4","gravatar_id":"","url":"https://api.github.com/users/sephib","html_url":"https://github.com/sephib","followers_url":"https://api.github.com/users/sephib/followers","following_url":"https://api.github.com/users/sephib/following{/other_user}","gists_url":"https://api.github.com/users/sephib/gists{/gist_id}","starred_url":"https://api.github.com/users/sephib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sephib/subscriptions","organizations_url":"https://api.github.com/users/sephib/orgs","repos_url":"https://api.github.com/users/sephib/repos","events_url":"https://api.github.com/users/sephib/events{/privacy}","received_events_url":"https://api.github.com/users/sephib/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-09-09T10:46:53Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":3745206483,"node_id":"MDEyOkxhYmVsZWRFdmVudDM3NDUyMDY0ODM=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3745206483","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-09-09T10:47:08Z","label":{"name":"area/artifacts","color":"48eabc"},"performed_via_github_app":null},{"id":3745206485,"node_id":"MDEyOkxhYmVsZWRFdmVudDM3NDUyMDY0ODU=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3745206485","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-09-09T10:47:08Z","label":{"name":"area/models","color":"48eabc"},"performed_via_github_app":null},{"id":3745206490,"node_id":"MDEyOkxhYmVsZWRFdmVudDM3NDUyMDY0OTA=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3745206490","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-09-09T10:47:08Z","label":{"name":"area/projects","color":"48eabc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/703779542","html_url":"https://github.com/mlflow/mlflow/issues/3402#issuecomment-703779542","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3402","id":703779542,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzc3OTU0Mg==","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2020-10-05T17:34:44Z","updated_at":"2020-10-05T17:35:31Z","author_association":"COLLABORATOR","body":"@sephib This issue has been addressed via https://github.com/mlflow/mlflow/pull/3387, which will be incorporated into the next release of MLflow. Prior to #3387, autologging calls overwrote function definitions / signatures, resulting in the parameter  validation failures described in this issue.\r\n\r\nI've confirmed that the following code now succeeds on the `master` branch of MLflow, while it currently fails on MLflow 1.11.0 with `ValueError: epochs is not a legal parameter`:\r\n\r\n```\r\n#\r\n# Build a KerasClassifier wrapper object.\r\n# I had trouble getting the callable class approach to work. The method approach seems to be pretty universial anyway.\r\n#\r\nimport tensorflow as tf\r\nimport tensorflow.keras\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, Dropout, Activation\r\nfrom tensorflow.keras.optimizers import SGD\r\n\r\n# Generate dummy data\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nX_train = np.random.random((1000, 3))\r\ny_train = pd.get_dummies(np.argmax(X_train[:, :3], axis=1)).values\r\nX_test = np.random.random((100, 3))\r\ny_test = pd.get_dummies(np.argmax(X_test[:, :3], axis=1)).values\r\n\r\nimport mlflow.keras\r\nmlflow.keras.autolog()\r\n\r\n\r\nfrom tensorflow.keras.wrappers.scikit_learn import KerasClassifier\r\n\r\ndef twoLayerFeedForward():\r\n    clf = Sequential()\r\n    clf.add(Dense(9, activation='relu', input_dim=3))\r\n    clf.add(Dense(9, activation='relu'))\r\n    clf.add(Dense(3, activation='softmax'))\r\n    clf.compile(loss='categorical_crossentropy', optimizer=SGD(), metrics=[\"accuracy\"])\r\n    return clf\r\n\r\n\r\n# clf = KerasClassifier(TwoLayerFeedForward(), epochs=100, batch_size=500, verbose=0)\r\nclf = KerasClassifier(twoLayerFeedForward, epochs=100, batch_size=500, verbose=0)\r\n\r\nfrom sklearn.model_selection import StratifiedKFold, cross_val_score\r\n\r\ntrans = StratifiedKFold(n_splits=10, shuffle=True, random_state=42)\r\n\r\nimport pandas as pd\r\n\r\n# Keras classifiers work with one hot encoded categorical columns (e.g. [[1 0 0], [0 1 0], ...]).\r\n# StratifiedKFold works with categorical encoded columns (e.g. [1 2 3 1 ...]).\r\n# This requires juggling the representation at shuffle time versus at runtime.\r\nscores = []\r\nfor train_idx, test_idx in trans.split(X_train, y_train.argmax(axis=1)):\r\n    X_cv, y_cv = X_train[train_idx], pd.get_dummies(y_train.argmax(axis=1)[train_idx]).values\r\n    clf.fit(X_cv, y_cv)\r\n    scores.append(clf.score(X_cv, y_cv))\r\n\r\nprint(scores)\r\n```\r\n\r\n@sephib Can you try out your workflow on `master` and let me know if you're still encountering this problem? For now, I'm going to go ahead and close this issue. Please reopen it if you find that it still occurs.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/703779542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":3841648327,"node_id":"MDExOkNsb3NlZEV2ZW50Mzg0MTY0ODMyNw==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3841648327","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-10-05T17:34:44Z","state_reason":null,"performed_via_github_app":null},{"id":3841648334,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzg0MTY0ODMzNA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3841648334","actor":{"login":"sephib","id":8223335,"node_id":"MDQ6VXNlcjgyMjMzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/8223335?v=4","gravatar_id":"","url":"https://api.github.com/users/sephib","html_url":"https://github.com/sephib","followers_url":"https://api.github.com/users/sephib/followers","following_url":"https://api.github.com/users/sephib/following{/other_user}","gists_url":"https://api.github.com/users/sephib/gists{/gist_id}","starred_url":"https://api.github.com/users/sephib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sephib/subscriptions","organizations_url":"https://api.github.com/users/sephib/orgs","repos_url":"https://api.github.com/users/sephib/repos","events_url":"https://api.github.com/users/sephib/events{/privacy}","received_events_url":"https://api.github.com/users/sephib/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-05T17:34:44Z","performed_via_github_app":null},{"id":3841648340,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4NDE2NDgzNDA=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3841648340","actor":{"login":"sephib","id":8223335,"node_id":"MDQ6VXNlcjgyMjMzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/8223335?v=4","gravatar_id":"","url":"https://api.github.com/users/sephib","html_url":"https://github.com/sephib","followers_url":"https://api.github.com/users/sephib/followers","following_url":"https://api.github.com/users/sephib/following{/other_user}","gists_url":"https://api.github.com/users/sephib/gists{/gist_id}","starred_url":"https://api.github.com/users/sephib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sephib/subscriptions","organizations_url":"https://api.github.com/users/sephib/orgs","repos_url":"https://api.github.com/users/sephib/repos","events_url":"https://api.github.com/users/sephib/events{/privacy}","received_events_url":"https://api.github.com/users/sephib/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-05T17:34:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/709238649","html_url":"https://github.com/mlflow/mlflow/issues/3402#issuecomment-709238649","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3402","id":709238649,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTIzODY0OQ==","user":{"login":"sephib","id":8223335,"node_id":"MDQ6VXNlcjgyMjMzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/8223335?v=4","gravatar_id":"","url":"https://api.github.com/users/sephib","html_url":"https://github.com/sephib","followers_url":"https://api.github.com/users/sephib/followers","following_url":"https://api.github.com/users/sephib/following{/other_user}","gists_url":"https://api.github.com/users/sephib/gists{/gist_id}","starred_url":"https://api.github.com/users/sephib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sephib/subscriptions","organizations_url":"https://api.github.com/users/sephib/orgs","repos_url":"https://api.github.com/users/sephib/repos","events_url":"https://api.github.com/users/sephib/events{/privacy}","received_events_url":"https://api.github.com/users/sephib/received_events","type":"User","site_admin":false},"created_at":"2020-10-15T11:54:24Z","updated_at":"2020-10-15T11:54:24Z","author_association":"CONTRIBUTOR","body":"Hi,\r\nI can confirm that it works and that I'm not getting any errors","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/709238649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sephib","id":8223335,"node_id":"MDQ6VXNlcjgyMjMzMzU=","avatar_url":"https://avatars.githubusercontent.com/u/8223335?v=4","gravatar_id":"","url":"https://api.github.com/users/sephib","html_url":"https://github.com/sephib","followers_url":"https://api.github.com/users/sephib/followers","following_url":"https://api.github.com/users/sephib/following{/other_user}","gists_url":"https://api.github.com/users/sephib/gists{/gist_id}","starred_url":"https://api.github.com/users/sephib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sephib/subscriptions","organizations_url":"https://api.github.com/users/sephib/orgs","repos_url":"https://api.github.com/users/sephib/repos","events_url":"https://api.github.com/users/sephib/events{/privacy}","received_events_url":"https://api.github.com/users/sephib/received_events","type":"User","site_admin":false}}]