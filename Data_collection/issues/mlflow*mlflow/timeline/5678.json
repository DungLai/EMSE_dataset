[{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1096812652","html_url":"https://github.com/mlflow/mlflow/issues/5678#issuecomment-1096812652","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5678","id":1096812652,"node_id":"IC_kwDOCB5Jx85BYAhs","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-04-12T14:35:50Z","updated_at":"2022-04-12T14:35:50Z","author_association":"MEMBER","body":"@rajesh-chawla Can you share the full stack trace?","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1096812652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":6419736413,"node_id":"MEE_lADOCB5Jx85HpCnqzwAAAAF-pWdd","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6419736413","actor":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-04-12T14:35:50Z","performed_via_github_app":null},{"id":6419736426,"node_id":"SE_lADOCB5Jx85HpCnqzwAAAAF-pWdq","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6419736426","actor":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-04-12T14:35:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1096834021","html_url":"https://github.com/mlflow/mlflow/issues/5678#issuecomment-1096834021","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5678","id":1096834021,"node_id":"IC_kwDOCB5Jx85BYFvl","user":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false},"created_at":"2022-04-12T14:52:24Z","updated_at":"2022-04-12T14:52:24Z","author_association":"NONE","body":"@harupy -- Please see the stack trace below\r\n```\r\n2022-04-12 07:50:36,853 INFO api.py:262 -- Updating deployment 'RajeshOnnxWine'. component=serve deployment=RajeshOnnxWi\r\nne\r\n(ServeController pid=17178) 2022-04-12 07:50:36,906     INFO deployment_state.py:920 -- Adding 1 replicas to dep\r\nloyment 'RajeshOnnxWine'. component=serve deployment=RajeshOnnxWine\r\n(ServeController pid=17178) 2022-04-12 07:50:37,950     ERROR deployment_state.py:284 -- Exception in deployment\r\n 'RajeshOnnxWine'\r\n(ServeController pid=17178) Traceback (most recent call last):\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/deployment_state.py\r\n\", line 278, in check_ready\r\n(ServeController pid=17178)     deployment_config, version = ray.get(ready)[0]\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/_private/client_mode_hook\r\n.py\", line 105, in wrapper\r\n(ServeController pid=17178)     return func(*args, **kwargs)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/worker.py\", line 1763, in\r\n get\r\n(ServeController pid=17178)     raise value.as_instanceof_cause()\r\n(ServeController pid=17178) ray.exceptions.RayTaskError(PermissionError): ray::RayServeWrappedReplica.reco\r\nnfigure() (pid=59118, ip=10.81.1.40, repr=<ray.serve.replica.RajeshOnnxWine object at 0x7fef987cc8b0>)\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/co\r\nncurrent/futures/_base.py\", line 432, in result\r\n(ServeController pid=17178)     return self.__get_result()\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/co\r\nncurrent/futures/_base.py\", line 388, in __get_result\r\n(ServeController pid=17178)     raise self._exception\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/replica.py\", line 1\r\n43, in reconfigure\r\n(ServeController pid=17178)     await self._initialize_replica()\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/replica.py\", line 9\r\n0, in initialize_replica\r\n(ServeController pid=17178)     await sync_to_async(_callable.__init__)(*init_args,\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow_ray_serve/__init__.py\"\r\n, line 48, in __init__\r\n(ServeController pid=17178)     self.model = mlflow.pyfunc.load_model(model_uri=model_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/pyfunc/__init__.py\", l\r\nine 691, in load_model\r\n(ServeController pid=17178)     local_path = _download_artifact_from_uri(artifact_uri=model_uri, output_path=d\r\nst_path)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/artifact_util\r\ns.py\", line 95, in _download_artifact_from_uri\r\n(ServeController pid=17178)     return get_artifact_repository(artifact_uri=root_uri).download_artifacts(\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/artifac\r\nt_repository_registry.py\", line 107, in get_artifact_repository\r\n(ServeController pid=17178)     return _artifact_repository_registry.get_artifact_repository(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/artifac\r\nt_repository_registry.py\", line 73, in get_artifact_repository\r\n(ServeController pid=17178)     return repository(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/models_\r\nartifact_repo.py\", line 35, in __init__\r\n(ServeController pid=17178)     uri = ModelsArtifactRepository.get_underlying_uri(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/models_\r\nartifact_repo.py\", line 53, in get_underlying_uri\r\n(ServeController pid=17178)     client = MlflowClient(registry_uri=databricks_profile_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/client.py\", l\r\nine 70, in __init__\r\n(ServeController pid=17178)     self._tracking_client = TrackingServiceClient(final_tracking_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/client.py\", line 48, in __init__\r\n(ServeController pid=17178)     self.store\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/client.py\", line 52, in store\r\n(ServeController pid=17178)     return utils._get_store(self.tracking_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/utils.py\", line 155, in _get_store\r\n(ServeController pid=17178)     return _tracking_store_registry.get_store(store_uri, artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/registry.py\", line 39, in get_store\r\n(ServeController pid=17178)     return self._get_store_with_resolved_uri(resolved_store_uri, artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/registry.py\", line 49, in _get_store_with_resolved_uri\r\n(ServeController pid=17178)     return builder(store_uri=resolved_store_uri, artifact_uri=artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/utils.py\", line 109, in _get_file_store\r\n(ServeController pid=17178)     return FileStore(store_uri, store_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/tracking/file_st\r\nore.py\", line 140, in __init__\r\n(ServeController pid=17178)     mkdir(self.root_directory)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/utils/file_utils.py\",\r\nline 114, in mkdir\r\n(ServeController pid=17178)     raise e\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/utils/file_utils.py\",\r\nline 111, in mkdir\r\n(ServeController pid=17178)     os.makedirs(target)\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/os\r\n.py\", line 223, in makedirs\r\n(ServeController pid=17178)     mkdir(name, mode)\r\n(ServeController pid=17178) PermissionError: [Errno 13] Permission denied: '/mlruns'\r\n(ServeController pid=17178) 2022-04-12 07:50:38,162     INFO deployment_state.py:920 -- Adding 1 replicas to dep\r\nloyment 'RajeshOnnxWine'. component=serve deployment=RajeshOnnxWine\r\n(ServeController pid=17178) 2022-04-12 07:50:39,297     ERROR deployment_state.py:284 -- Exception in deployment\r\n 'RajeshOnnxWine'\r\n(ServeController pid=17178) Traceback (most recent call last):\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/deployment_state.py\r\n\", line 278, in check_ready\r\n(ServeController pid=17178)     deployment_config, version = ray.get(ready)[0]\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/_private/client_mode_hook\r\n.py\", line 105, in wrapper\r\n(ServeController pid=17178)     return func(*args, **kwargs)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/worker.py\", line 1763, in\r\n get\r\n(ServeController pid=17178)     raise value.as_instanceof_cause()\r\n(ServeController pid=17178) ray.exceptions.RayTaskError(PermissionError): ray::RayServeWrappedReplica.reco\r\nnfigure() (pid=3410, ip=10.81.1.40, repr=<ray.serve.replica.RajeshOnnxWine object at 0x7f76ac3a98b0>)\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/co\r\nncurrent/futures/_base.py\", line 432, in result\r\n(ServeController pid=17178)     return self.__get_result()\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/co\r\nncurrent/futures/_base.py\", line 388, in __get_result\r\n(ServeController pid=17178)     raise self._exception\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/replica.py\", line 1\r\n43, in reconfigure\r\n(ServeController pid=17178)     await self._initialize_replica()\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/replica.py\", line 9\r\n0, in initialize_replica\r\n(ServeController pid=17178)     await sync_to_async(_callable.__init__)(*init_args,\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow_ray_serve/__init__.py\"\r\n, line 48, in __init__\r\n(ServeController pid=17178)     self.model = mlflow.pyfunc.load_model(model_uri=model_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/pyfunc/__init__.py\", l\r\nine 691, in load_model\r\n(ServeController pid=17178)     local_path = _download_artifact_from_uri(artifact_uri=model_uri, output_path=d\r\nst_path)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/artifact_util\r\ns.py\", line 95, in _download_artifact_from_uri\r\n(ServeController pid=17178)     return get_artifact_repository(artifact_uri=root_uri).download_artifacts(\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/artifac\r\nt_repository_registry.py\", line 107, in get_artifact_repository\r\n(ServeController pid=17178)     return _artifact_repository_registry.get_artifact_repository(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/artifac\r\nt_repository_registry.py\", line 73, in get_artifact_repository\r\n(ServeController pid=17178)     return repository(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/models_\r\nartifact_repo.py\", line 35, in __init__\r\n(ServeController pid=17178)     uri = ModelsArtifactRepository.get_underlying_uri(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/models_\r\nartifact_repo.py\", line 53, in get_underlying_uri\r\n(ServeController pid=17178)     client = MlflowClient(registry_uri=databricks_profile_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/client.py\", l\r\nine 70, in __init__\r\n(ServeController pid=17178)     self._tracking_client = TrackingServiceClient(final_tracking_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/client.py\", line 48, in __init__\r\n(ServeController pid=17178)     self.store\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/client.py\", line 52, in store\r\n(ServeController pid=17178)     return utils._get_store(self.tracking_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/utils.py\", line 155, in _get_store\r\n(ServeController pid=17178)     return _tracking_store_registry.get_store(store_uri, artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/registry.py\", line 39, in get_store\r\n(ServeController pid=17178)     return self._get_store_with_resolved_uri(resolved_store_uri, artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/registry.py\", line 49, in _get_store_with_resolved_uri\r\n(ServeController pid=17178)     return builder(store_uri=resolved_store_uri, artifact_uri=artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/utils.py\", line 109, in _get_file_store\r\n(ServeController pid=17178)     return FileStore(store_uri, store_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/tracking/file_st\r\nore.py\", line 140, in __init__\r\n(ServeController pid=17178)     mkdir(self.root_directory)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/utils/file_utils.py\",\r\nline 114, in mkdir\r\n(ServeController pid=17178)     raise e\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/utils/file_utils.py\",\r\nline 111, in mkdir\r\n(ServeController pid=17178)     os.makedirs(target)\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/os\r\n.py\", line 223, in makedirs\r\n(ServeController pid=17178)     mkdir(name, mode)\r\n(ServeController pid=17178) PermissionError: [Errno 13] Permission denied: '/mlruns'\r\n(ServeController pid=17178) 2022-04-12 07:50:39,505     INFO deployment_state.py:920 -- Adding 1 replicas to dep\r\nloyment 'RajeshOnnxWine'. component=serve deployment=RajeshOnnxWine\r\nTraceback (most recent call last):\r\n  File \"/data/venv/vmray/bin/mlflow\", line 8, in <module>\r\n    sys.exit(cli())\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/deployments/cli.py\", line 133, in create_deployment\r\n    deployment = client.create_deployment(name, model_uri, flavor, config=config_dict)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow_ray_serve/__init__.py\", line 96, in create_deployment\r\n    MLflowDeployment.options(name=name, **config).deploy(model_uri)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/api.py\", line 852, in deploy\r\n    return _get_global_client().deploy(\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/api.py\", line 96, in check\r\n    return f(self, *args, **kwargs)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/api.py\", line 268, in deploy\r\n    self._wait_for_goal(goal_id)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/api.py\", line 195, in _wait_for_goal\r\n    async_goal_exception = ray.get(ready)[0]\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/_private/client_mode_hook.py\", line 105, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/worker.py\", line 1763, in get\r\n    raise value.as_instanceof_cause()\r\nray.exceptions.RayTaskError(RuntimeError): ray::ServeController.wait_for_goal() (pid=17178, ip=10.81.1.40)\r\n  File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/utils.py\", line 241, in wrap_to_ray_error\r\n    raise exception\r\nRuntimeError: Failed to reach deployment goal. Check the serve logs for details.\r\n(ServeController pid=17178) 2022-04-12 07:50:40,640     ERROR deployment_state.py:284 -- Exception in deployment\r\n 'RajeshOnnxWine'\r\n(ServeController pid=17178) Traceback (most recent call last):\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/deployment_state.py\r\n\", line 278, in check_ready\r\n(ServeController pid=17178)     deployment_config, version = ray.get(ready)[0]\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/_private/client_mode_hook\r\n.py\", line 105, in wrapper\r\n(ServeController pid=17178)     return func(*args, **kwargs)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/worker.py\", line 1763, in\r\n get\r\n(ServeController pid=17178)     raise value.as_instanceof_cause()\r\n(ServeController pid=17178) ray.exceptions.RayTaskError(PermissionError): ray::RayServeWrappedReplica.reco\r\nnfigure() (pid=13404, ip=10.81.1.40, repr=<ray.serve.replica.RajeshOnnxWine object at 0x7f7d3c1aa8b0>)\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/co\r\nncurrent/futures/_base.py\", line 432, in result\r\n(ServeController pid=17178)     return self.__get_result()\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/co\r\nncurrent/futures/_base.py\", line 388, in __get_result\r\n(ServeController pid=17178)     raise self._exception\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/replica.py\", line 1\r\n43, in reconfigure\r\n(ServeController pid=17178)     await self._initialize_replica()\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/ray/serve/replica.py\", line 9\r\n0, in initialize_replica\r\n(ServeController pid=17178)     await sync_to_async(_callable.__init__)(*init_args,\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow_ray_serve/__init__.py\"\r\n, line 48, in __init__\r\n(ServeController pid=17178)     self.model = mlflow.pyfunc.load_model(model_uri=model_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/pyfunc/__init__.py\", l\r\nine 691, in load_model\r\n(ServeController pid=17178)     local_path = _download_artifact_from_uri(artifact_uri=model_uri, output_path=d\r\nst_path)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/artifact_util\r\ns.py\", line 95, in _download_artifact_from_uri\r\n(ServeController pid=17178)     return get_artifact_repository(artifact_uri=root_uri).download_artifacts(\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/artifac\r\nt_repository_registry.py\", line 107, in get_artifact_repository\r\n(ServeController pid=17178)     return _artifact_repository_registry.get_artifact_repository(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/artifac\r\nt_repository_registry.py\", line 73, in get_artifact_repository\r\n(ServeController pid=17178)     return repository(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/models_\r\nartifact_repo.py\", line 35, in __init__\r\n(ServeController pid=17178)     uri = ModelsArtifactRepository.get_underlying_uri(artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/artifact/models_\r\nartifact_repo.py\", line 53, in get_underlying_uri\r\n(ServeController pid=17178)     client = MlflowClient(registry_uri=databricks_profile_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/client.py\", l\r\nine 70, in __init__\r\n(ServeController pid=17178)     self._tracking_client = TrackingServiceClient(final_tracking_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/client.py\", line 48, in __init__\r\n(ServeController pid=17178)     self.store\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/client.py\", line 52, in store\r\n(ServeController pid=17178)     return utils._get_store(self.tracking_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/utils.py\", line 155, in _get_store\r\n(ServeController pid=17178)     return _tracking_store_registry.get_store(store_uri, artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/registry.py\", line 39, in get_store\r\n(ServeController pid=17178)     return self._get_store_with_resolved_uri(resolved_store_uri, artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/registry.py\", line 49, in _get_store_with_resolved_uri\r\n(ServeController pid=17178)     return builder(store_uri=resolved_store_uri, artifact_uri=artifact_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/tracking/_tracking_ser\r\nvice/utils.py\", line 109, in _get_file_store\r\n(ServeController pid=17178)     return FileStore(store_uri, store_uri)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/store/tracking/file_st\r\nore.py\", line 140, in __init__\r\n(ServeController pid=17178)     mkdir(self.root_directory)\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/utils/file_utils.py\",\r\nline 114, in mkdir\r\n(ServeController pid=17178)     raise e\r\n(ServeController pid=17178)   File \"/data/venv/vmray/lib/python3.8/site-packages/mlflow/utils/file_utils.py\",\r\nline 111, in mkdir\r\n(ServeController pid=17178)     os.makedirs(target)\r\n(ServeController pid=17178)   File \"/nix/store/wjxg0zib7n27fw605h1h1l4jjnqyzfjy-python3-3.8.8/lib/python3.8/os\r\n.py\", line 223, in makedirs\r\n(ServeController pid=17178)     mkdir(name, mode)\r\n(ServeController pid=17178) PermissionError: [Errno 13] Permission denied: '/mlruns'\r\n(ServeController pid=17178) 2022-04-12 07:50:40,643     INFO deployment_state.py:1189 -- Deployment 'RajeshOnnxW\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1096834021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false}},{"id":6419881827,"node_id":"MEE_lADOCB5Jx85HpCnqzwAAAAF-p59j","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6419881827","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-04-12T14:52:24Z","performed_via_github_app":null},{"id":6419881839,"node_id":"SE_lADOCB5Jx85HpCnqzwAAAAF-p59v","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6419881839","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-04-12T14:52:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1109096176","html_url":"https://github.com/mlflow/mlflow/issues/5678#issuecomment-1109096176","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5678","id":1109096176,"node_id":"IC_kwDOCB5Jx85CG3bw","user":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false},"created_at":"2022-04-25T22:18:18Z","updated_at":"2022-04-25T22:18:18Z","author_association":"NONE","body":"Resolved issue.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1109096176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false}},{"id":6493956990,"node_id":"CE_lADOCB5Jx85HpCnqzwAAAAGDEet-","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6493956990","actor":{"login":"rajesh-chawla","id":30417115,"node_id":"MDQ6VXNlcjMwNDE3MTE1","avatar_url":"https://avatars.githubusercontent.com/u/30417115?v=4","gravatar_id":"","url":"https://api.github.com/users/rajesh-chawla","html_url":"https://github.com/rajesh-chawla","followers_url":"https://api.github.com/users/rajesh-chawla/followers","following_url":"https://api.github.com/users/rajesh-chawla/following{/other_user}","gists_url":"https://api.github.com/users/rajesh-chawla/gists{/gist_id}","starred_url":"https://api.github.com/users/rajesh-chawla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajesh-chawla/subscriptions","organizations_url":"https://api.github.com/users/rajesh-chawla/orgs","repos_url":"https://api.github.com/users/rajesh-chawla/repos","events_url":"https://api.github.com/users/rajesh-chawla/events{/privacy}","received_events_url":"https://api.github.com/users/rajesh-chawla/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-04-25T22:18:18Z","state_reason":null,"performed_via_github_app":null}]