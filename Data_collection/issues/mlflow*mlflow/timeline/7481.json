[{"id":7988127407,"node_id":"LE_lADOCB5Jx85YetYWzwAAAAHcISav","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7988127407","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-08T11:38:51Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":7988129634,"node_id":"LE_lADOCB5Jx85YetYWzwAAAAHcIS9i","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7988129634","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-08T11:39:07Z","label":{"name":"area/artifacts","color":"48eabc"},"performed_via_github_app":null},{"id":7988129640,"node_id":"LE_lADOCB5Jx85YetYWzwAAAAHcIS9o","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7988129640","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-08T11:39:07Z","label":{"name":"area/tracking","color":"48eabc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1343955541","html_url":"https://github.com/mlflow/mlflow/issues/7481#issuecomment-1343955541","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7481","id":1343955541,"node_id":"IC_kwDOCB5Jx85QGyJV","user":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"created_at":"2022-12-09T07:34:40Z","updated_at":"2022-12-09T07:34:40Z","author_association":"NONE","body":"@harupy I saw your solutions on similar threads. I've tried those solutions, but they don't seem to work for my case. Do you have any other ideas by any chance? Would be much appreciated! :bow:","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1343955541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false}},{"id":7996165196,"node_id":"MEE_lADOCB5Jx85YetYWzwAAAAHcm8xM","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7996165196","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-09T07:34:41Z","performed_via_github_app":null},{"id":7996165204,"node_id":"SE_lADOCB5Jx85YetYWzwAAAAHcm8xU","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7996165204","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-09T07:34:41Z","performed_via_github_app":null},{"id":7997473039,"node_id":"RTE_lADOCB5Jx85YetYWzwAAAAHcr8EP","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7997473039","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-12-09T10:30:36Z","rename":{"from":"[BUG] S3 authentication fails of MLflow Tracking server with proxied artifact access","to":"[BUG] MLflow Tracking server with proxied artifact access fails with `ValueError: not enough values to unpack (expected 2, got 1)`"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1344870555","html_url":"https://github.com/mlflow/mlflow/issues/7481#issuecomment-1344870555","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7481","id":1344870555,"node_id":"IC_kwDOCB5Jx85QKRib","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2022-12-09T23:06:35Z","updated_at":"2022-12-09T23:06:35Z","author_association":"COLLABORATOR","body":"Hi @TomSteenbergen , this issue appears to that `http://127.0.0.1:9000/local-test-mlflow-tracking/mlartifacts/` is not a supported artifacts destination. You'll need to configure a non-http location for storage, such as a local filesystem path, S3 bucket, SFTP location, etc. For example, `~/local-test-mlflow-tracking/mlartifacts/` would work as an `--artifact-destination`. Please feel free to reopen this issue if the recommendation does not resolve the issue. Thank you for using MLflow!","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1344870555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":8002607308,"node_id":"CE_lADOCB5Jx85YetYWzwAAAAHc_hjM","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/8002607308","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-12-09T23:06:35Z","state_reason":null,"performed_via_github_app":null},{"id":8002607321,"node_id":"MEE_lADOCB5Jx85YetYWzwAAAAHc_hjZ","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/8002607321","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-09T23:06:35Z","performed_via_github_app":null},{"id":8002607324,"node_id":"SE_lADOCB5Jx85YetYWzwAAAAHc_hjc","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/8002607324","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-09T23:06:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1346447116","html_url":"https://github.com/mlflow/mlflow/issues/7481#issuecomment-1346447116","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7481","id":1346447116,"node_id":"IC_kwDOCB5Jx85QQScM","user":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"created_at":"2022-12-12T12:55:42Z","updated_at":"2022-12-12T13:00:50Z","author_association":"NONE","body":"Hi @dbczumar ! \r\n\r\nFirst of all, thanks for taking the time to reply! :) \r\n\r\nI'm unsure if I understood your recommendation. I'm running this on Kubernetes. I managed to reproduce the error locally using Minio as artifact storage. Switching Minio to local file storage is not a solution for my Kubernetes deployment.\r\n\r\nI tried following the instructions from the documentation (link: https://mlflow.org/docs/latest/tracking.html#amazon-s3-and-s3-compatible-storage)\r\n- I set `MLFLOW_S3_ENDPOINT_URL` environment variable to `http://127.0.0.1:9000`\r\n- I set `AWS_DEFAULT_REGION` environment variable to  `us-east-1`\r\n\r\nWhile I no longer get the `ValueError`, I do get a different error on the server side:\r\n```\r\nmlflow_server  | 2022/12/12 12:46:31 ERROR mlflow.server: Exception on /api/2.0/mlflow-artifacts/artifacts/17/e18ab0a21ce5427c8e0283bb9a51a5fa/artifacts/mlflow_test.py [PUT]\r\nmlflow_server  | Traceback (most recent call last):\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connection.py\", line 174, in _new_conn\r\nmlflow_server  |     conn = connection.create_connection(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/util/connection.py\", line 95, in create_connection\r\nmlflow_server  |     raise err\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/util/connection.py\", line 85, in create_connection\r\nmlflow_server  |     sock.connect(sa)\r\nmlflow_server  | ConnectionRefusedError: [Errno 111] Connection refused\r\nmlflow_server  | \r\nmlflow_server  | During handling of the above exception, another exception occurred:\r\nmlflow_server  | \r\nmlflow_server  | Traceback (most recent call last):\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/httpsession.py\", line 455, in send\r\nmlflow_server  |     urllib_response = conn.urlopen(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 787, in urlopen\r\nmlflow_server  |     retries = retries.increment(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/util/retry.py\", line 525, in increment\r\nmlflow_server  |     raise six.reraise(type(error), error, _stacktrace)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/packages/six.py\", line 770, in reraise\r\nmlflow_server  |     raise value\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\r\nmlflow_server  |     httplib_response = self._make_request(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 398, in _make_request\r\nmlflow_server  |     conn.request(method, url, **httplib_request_kw)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connection.py\", line 239, in request\r\nmlflow_server  |     super(HTTPConnection, self).request(method, url, body=body, headers=headers)\r\nmlflow_server  |   File \"/usr/local/lib/python3.10/http/client.py\", line 1282, in request\r\nmlflow_server  |     self._send_request(method, url, body, headers, encode_chunked)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/awsrequest.py\", line 94, in _send_request\r\nmlflow_server  |     rval = super()._send_request(\r\nmlflow_server  |   File \"/usr/local/lib/python3.10/http/client.py\", line 1328, in _send_request\r\nmlflow_server  |     self.endheaders(body, encode_chunked=encode_chunked)\r\nmlflow_server  |   File \"/usr/local/lib/python3.10/http/client.py\", line 1277, in endheaders\r\nmlflow_server  |     self._send_output(message_body, encode_chunked=encode_chunked)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/awsrequest.py\", line 123, in _send_output\r\nmlflow_server  |     self.send(msg)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/awsrequest.py\", line 218, in send\r\nmlflow_server  |     return super().send(str)\r\nmlflow_server  |   File \"/usr/local/lib/python3.10/http/client.py\", line 975, in send\r\nmlflow_server  |     self.connect()\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connection.py\", line 205, in connect\r\nmlflow_server  |     conn = self._new_conn()\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/urllib3/connection.py\", line 186, in _new_conn\r\nmlflow_server  |     raise NewConnectionError(\r\nmlflow_server  | urllib3.exceptions.NewConnectionError: <botocore.awsrequest.AWSHTTPConnection object at 0x7f3b8ebd72b0>: Failed to establish a new connection: [Errno 111] Connection refused\r\nmlflow_server  | \r\nmlflow_server  | During handling of the above exception, another exception occurred:\r\nmlflow_server  | \r\nmlflow_server  | Traceback (most recent call last):\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/flask/app.py\", line 2525, in wsgi_app\r\nmlflow_server  |     response = self.full_dispatch_request()\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/flask/app.py\", line 1822, in full_dispatch_request\r\nmlflow_server  |     rv = self.handle_user_exception(e)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/flask/app.py\", line 1820, in full_dispatch_request\r\nmlflow_server  |     rv = self.dispatch_request()\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/flask/app.py\", line 1796, in dispatch_request\r\nmlflow_server  |     return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/mlflow/server/handlers.py\", line 452, in wrapper\r\nmlflow_server  |     return func(*args, **kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/mlflow/server/handlers.py\", line 503, in wrapper\r\nmlflow_server  |     return func(*args, **kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/mlflow/server/handlers.py\", line 1497, in _upload_artifact\r\nmlflow_server  |     artifact_repo.log_artifact(tmp_path, artifact_path=head or None)\r\nmlflow_server  |   File \"/home/piic/.venv/lib/python3.10/site-packages/mlflow/store/artifact/s3_artifact_repo.py\", line 125, in log_artifact\r\nmlflow_server  |     self._upload_file(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/mlflow/store/artifact/s3_artifact_repo.py\", line 118, in _upload_file\r\nmlflow_server  |     s3_client.upload_file(Filename=local_file, Bucket=bucket, Key=key, ExtraArgs=extra_args)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/boto3/s3/inject.py\", line 143, in upload_file\r\nmlflow_server  |     return transfer.upload_file(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/boto3/s3/transfer.py\", line 288, in upload_file\r\nmlflow_server  |     future.result()\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/s3transfer/futures.py\", line 103, in result\r\nmlflow_server  |     return self._coordinator.result()\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/s3transfer/futures.py\", line 266, in result\r\nmlflow_server  |     raise self._exception\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/s3transfer/tasks.py\", line 139, in __call__\r\nmlflow_server  |     return self._execute_main(kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/s3transfer/tasks.py\", line 162, in _execute_main\r\nmlflow_server  |     return_value = self._main(**kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/s3transfer/upload.py\", line 758, in _main\r\nmlflow_server  |     client.put_object(Bucket=bucket, Key=key, Body=body, **extra_args)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/client.py\", line 530, in _api_call\r\nmlflow_server  |     return self._make_api_call(operation_name, kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/client.py\", line 943, in _make_api_call\r\nmlflow_server  |     http, parsed_response = self._make_request(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/client.py\", line 966, in _make_request\r\nmlflow_server  |     return self._endpoint.make_request(operation_model, request_dict)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/endpoint.py\", line 119, in make_request\r\nmlflow_server  |     return self._send_request(request_dict, operation_model)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/endpoint.py\", line 202, in _send_request\r\nmlflow_server  |     while self._needs_retry(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/endpoint.py\", line 354, in _needs_retry\r\nmlflow_server  |     responses = self._event_emitter.emit(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/hooks.py\", line 412, in emit\r\nmlflow_server  |     return self._emitter.emit(aliased_event_name, **kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/hooks.py\", line 256, in emit\r\nmlflow_server  |     return self._emit(event_name, kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/hooks.py\", line 239, in _emit\r\nmlflow_server  |     response = handler(**kwargs)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/retryhandler.py\", line 207, in __call__\r\nmlflow_server  |     if self._checker(**checker_kwargs):\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/retryhandler.py\", line 284, in __call__\r\nmlflow_server  |     should_retry = self._should_retry(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/retryhandler.py\", line 320, in _should_retry\r\nmlflow_server  |     return self._checker(attempt_number, response, caught_exception)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/retryhandler.py\", line 363, in __call__\r\nmlflow_server  |     checker_response = checker(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/retryhandler.py\", line 247, in __call__\r\nmlflow_server  |     return self._check_caught_exception(\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/retryhandler.py\", line 416, in _check_caught_exception\r\nmlflow_server  |     raise caught_exception\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/endpoint.py\", line 281, in _do_get_response\r\nmlflow_server  |     http_response = self._send(request)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/endpoint.py\", line 377, in _send\r\nmlflow_server  |     return self.http_session.send(request)\r\nmlflow_server  |   File \"/home/.venv/lib/python3.10/site-packages/botocore/httpsession.py\", line 484, in send\r\nmlflow_server  |     raise EndpointConnectionError(endpoint_url=request.url, error=e)\r\nmlflow_server  | botocore.exceptions.EndpointConnectionError: Could not connect to the endpoint URL: \"http://127.0.0.1:9000/local-test-mlflow-tracking/mlartifacts/17/e18ab0a21ce5427c8e0283bb9a51a5fa/artifacts/mlflow_test.py\"\r\n```\r\n\r\nOn the client side, I get the following:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<redacted>/python3.10/site-packages/mlflow/utils/rest_utils.py\", line 166, in http_request\r\n    return _get_http_response_with_retries(\r\n  File \"<redacted>/python3.10/site-packages/mlflow/utils/rest_utils.py\", line 97, in _get_http_response_with_retries\r\n    return session.request(method, url, **kwargs)\r\n  File \"<redacted>/python3.10/site-packages/requests/sessions.py\", line 587, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"<redacted>/python3.10/site-packages/requests/sessions.py\", line 701, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"<redacted>/python3.10/site-packages/requests/adapters.py\", line 556, in send\r\n    raise RetryError(e, request=request)\r\nrequests.exceptions.RetryError: HTTPConnectionPool(host='127.0.0.1', port=5001): Max retries exceeded with url: /api/2.0/mlflow-artifacts/artifacts/17/e18ab0a21ce5427c8e0283bb9a51a5fa/artifacts/mlflow_test.py (Caused by ResponseError('too many 500 error responses'))\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<redacted>/mlflow_test.py\", line 8, in <module>\r\n    mlflow.log_artifact(Path(__file__))\r\n  File \"<redacted>/python3.10/site-packages/mlflow/tracking/fluent.py\", line 778, in log_artifact\r\n    MlflowClient().log_artifact(run_id, local_path, artifact_path)\r\n  File \"<redacted>/python3.10/site-packages/mlflow/tracking/client.py\", line 1002, in log_artifact\r\n    self._tracking_client.log_artifact(run_id, local_path, artifact_path)\r\n  File \"<redacted>/python3.10/site-packages/mlflow/tracking/_tracking_service/client.py\", line 416, in log_artifact\r\n    artifact_repo.log_artifact(local_path, artifact_path)\r\n  File \"<redacted>/python3.10/site-packages/mlflow/store/artifact/http_artifact_repo.py\", line 25, in log_artifact\r\n    resp = http_request(self._host_creds, endpoint, \"PUT\", data=f)\r\n  File \"<redacted>/python3.10/site-packages/mlflow/utils/rest_utils.py\", line 184, in http_request\r\n    raise MlflowException(\"API request to %s failed with exception %s\" % (url, e))\r\nmlflow.exceptions.MlflowException: API request to http://127.0.0.1:5001/api/2.0/mlflow-artifacts/artifacts/17/e18ab0a21ce5427c8e0283bb9a51a5fa/artifacts/mlflow_test.py failed with exception HTTPConnectionPool(host='127.0.0.1', port=5001): Max retries exceeded with url: /api/2.0/mlflow-artifacts/artifacts/17/e18ab0a21ce5427c8e0283bb9a51a5fa/artifacts/mlflow_test.py (Caused by ResponseError('too many 500 error responses')\r\n```\r\n\r\nDo you see what's going wrong here? Since I am using the `MINIO_ROOT_USER`, I do not suspect this to be a permissions issue. I will update the attached snippets in the original message so you can replicate this. \r\n\r\n(Can you also reopen the issue?)","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1346447116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false}},{"id":8013929541,"node_id":"MEE_lADOCB5Jx85YetYWzwAAAAHdqtxF","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/8013929541","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-12T12:55:42Z","performed_via_github_app":null},{"id":8013929555,"node_id":"SE_lADOCB5Jx85YetYWzwAAAAHdqtxT","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/8013929555","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-12T12:55:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1351581253","html_url":"https://github.com/mlflow/mlflow/issues/7481#issuecomment-1351581253","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7481","id":1351581253,"node_id":"IC_kwDOCB5Jx85Qj35F","user":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false},"created_at":"2022-12-14T15:05:56Z","updated_at":"2022-12-14T15:05:56Z","author_association":"NONE","body":"I managed to fix the issue. So apparently, MLflow doesn't like it that I use both environment variables and flags when calling `mlflow server`. Changing the command to \r\n```\r\nmlflow server \\\r\n--serve-artifacts \\\r\n--host 0.0.0.0 \\\r\n--port 5001\r\n```\r\nand setting the `MLFLOW_BACKEND_STORE_URI` and `MLFLOW_ARTIFACTS_DESTINATION` env vars fixed it for me.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1351581253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"TomSteenbergen","id":41334387,"node_id":"MDQ6VXNlcjQxMzM0Mzg3","avatar_url":"https://avatars.githubusercontent.com/u/41334387?v=4","gravatar_id":"","url":"https://api.github.com/users/TomSteenbergen","html_url":"https://github.com/TomSteenbergen","followers_url":"https://api.github.com/users/TomSteenbergen/followers","following_url":"https://api.github.com/users/TomSteenbergen/following{/other_user}","gists_url":"https://api.github.com/users/TomSteenbergen/gists{/gist_id}","starred_url":"https://api.github.com/users/TomSteenbergen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomSteenbergen/subscriptions","organizations_url":"https://api.github.com/users/TomSteenbergen/orgs","repos_url":"https://api.github.com/users/TomSteenbergen/repos","events_url":"https://api.github.com/users/TomSteenbergen/events{/privacy}","received_events_url":"https://api.github.com/users/TomSteenbergen/received_events","type":"User","site_admin":false}}]