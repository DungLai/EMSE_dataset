[{"id":2513824774,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1MTM4MjQ3NzQ=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/2513824774","actor":{"login":"ankit-db","id":52183359,"node_id":"MDQ6VXNlcjUyMTgzMzU5","avatar_url":"https://avatars.githubusercontent.com/u/52183359?v=4","gravatar_id":"","url":"https://api.github.com/users/ankit-db","html_url":"https://github.com/ankit-db","followers_url":"https://api.github.com/users/ankit-db/followers","following_url":"https://api.github.com/users/ankit-db/following{/other_user}","gists_url":"https://api.github.com/users/ankit-db/gists{/gist_id}","starred_url":"https://api.github.com/users/ankit-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankit-db/subscriptions","organizations_url":"https://api.github.com/users/ankit-db/orgs","repos_url":"https://api.github.com/users/ankit-db/repos","events_url":"https://api.github.com/users/ankit-db/events{/privacy}","received_events_url":"https://api.github.com/users/ankit-db/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-26T22:16:09Z","label":{"name":"enhancement","color":"a2eeef"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/515620796","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-515620796","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":515620796,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYyMDc5Ng==","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T22:44:27Z","updated_at":"2019-07-26T22:44:27Z","author_association":"COLLABORATOR","body":"@Behel Are you attaching an IAM role in Account B to your Databricks cluster (https://docs.databricks.com/administration-guide/cloud-configurations/aws/iam-roles.html#iamroles)?\r\n\r\n`s3://s3-bucket/` refers to a bucket in Account B, right?","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/515620796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":2513863309,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjUxMzg2MzMwOQ==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/2513863309","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-26T22:44:27Z","performed_via_github_app":null},{"id":2513863310,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI1MTM4NjMzMTA=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/2513863310","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-26T22:44:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/515914360","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-515914360","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":515914360,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTkxNDM2MA==","user":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"created_at":"2019-07-29T09:18:31Z","updated_at":"2019-07-29T09:18:31Z","author_association":"NONE","body":"Yes, the S3 Bucket is in the account B.\r\nAccording to my Cloud Architect, I can't attach IAM Role from account B, only from account A, among other things for safety. But my account B Role can be assumed from my account A (as I did with s3a). \r\nI'll ask him if I can do this, but it may be only a workaround, not not our target architecture ","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/515914360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/558574996","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-558574996","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":558574996,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODU3NDk5Ng==","user":{"login":"mrwillihog","id":684109,"node_id":"MDQ6VXNlcjY4NDEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/684109?v=4","gravatar_id":"","url":"https://api.github.com/users/mrwillihog","html_url":"https://github.com/mrwillihog","followers_url":"https://api.github.com/users/mrwillihog/followers","following_url":"https://api.github.com/users/mrwillihog/following{/other_user}","gists_url":"https://api.github.com/users/mrwillihog/gists{/gist_id}","starred_url":"https://api.github.com/users/mrwillihog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrwillihog/subscriptions","organizations_url":"https://api.github.com/users/mrwillihog/orgs","repos_url":"https://api.github.com/users/mrwillihog/repos","events_url":"https://api.github.com/users/mrwillihog/events{/privacy}","received_events_url":"https://api.github.com/users/mrwillihog/received_events","type":"User","site_admin":false},"created_at":"2019-11-26T10:52:42Z","updated_at":"2019-11-26T10:53:39Z","author_association":"NONE","body":"I think this needs to go here:\r\n\r\nhttps://github.com/mlflow/mlflow/blob/master/mlflow/store/artifact/s3_artifact_repo.py#L26-L29\r\n\r\nPerhaps we could allow another environment variable and if it's present we assume the role? \r\n\r\nSomething like this:\r\n\r\n```python\r\ndef _get_s3_client_with_assumed_role(self, iam_role, s3_endpoint_url):\r\n    sts = boto3.client('sts')\r\n    assumed_role_object = sts_client.assume_role(\r\n        RoleArn=iam_role,\r\n        RoleSessionName=\"MLFlow\"\r\n    )\r\n    credentials = assumed_role_object['Credentials']\r\n    return s3_resource = boto3.client(\r\n        's3',\r\n        aws_access_key_id=credentials['AccessKeyId'],\r\n        aws_secret_access_key=credentials['SecretAccessKey'],\r\n        aws_session_token=credentials['SessionToken'],\r\n        endpoint_url=s3_endpoint_url\r\n    )\r\n\r\ndef _get_s3_client(self):\r\n    import boto3\r\n    s3_endpoint_url = os.environ.get('MLFLOW_S3_ENDPOINT_URL')\r\n    s3_assume_role_iam = os.environ.get('MLFLOW_S3_ASSUME_ROLE_IAM')\r\n\r\n    if s3_assume_role:\r\n        return _get_s3_client_with_assumed_role(s3_assume_role_iam, s3_endpoint_url)\r\n    else:\r\n        return boto3.client('s3', endpoint_url=s3_endpoint_url)\r\n```\r\n\r\nFollowing this guide: https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-api.html\r\n\r\nNot 100% happy with having to specify the env variable as it isn't particularly flexible.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/558574996/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mrwillihog","id":684109,"node_id":"MDQ6VXNlcjY4NDEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/684109?v=4","gravatar_id":"","url":"https://api.github.com/users/mrwillihog","html_url":"https://github.com/mrwillihog","followers_url":"https://api.github.com/users/mrwillihog/followers","following_url":"https://api.github.com/users/mrwillihog/following{/other_user}","gists_url":"https://api.github.com/users/mrwillihog/gists{/gist_id}","starred_url":"https://api.github.com/users/mrwillihog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrwillihog/subscriptions","organizations_url":"https://api.github.com/users/mrwillihog/orgs","repos_url":"https://api.github.com/users/mrwillihog/repos","events_url":"https://api.github.com/users/mrwillihog/events{/privacy}","received_events_url":"https://api.github.com/users/mrwillihog/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/591369302","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-591369302","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":591369302,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTM2OTMwMg==","user":{"login":"weldpua2008","id":5720601,"node_id":"MDQ6VXNlcjU3MjA2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/5720601?v=4","gravatar_id":"","url":"https://api.github.com/users/weldpua2008","html_url":"https://github.com/weldpua2008","followers_url":"https://api.github.com/users/weldpua2008/followers","following_url":"https://api.github.com/users/weldpua2008/following{/other_user}","gists_url":"https://api.github.com/users/weldpua2008/gists{/gist_id}","starred_url":"https://api.github.com/users/weldpua2008/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weldpua2008/subscriptions","organizations_url":"https://api.github.com/users/weldpua2008/orgs","repos_url":"https://api.github.com/users/weldpua2008/repos","events_url":"https://api.github.com/users/weldpua2008/events{/privacy}","received_events_url":"https://api.github.com/users/weldpua2008/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T11:03:31Z","updated_at":"2020-02-26T11:03:31Z","author_association":"NONE","body":"Hi @Behel \r\nI have [PR#2461](https://github.com/mlflow/mlflow/pull/2461)  which should allow MLFlow client to store artifacts from another AWS account than MLFlow server. I have even docker-compose MVP for such use-case.  \r\nThe bucket policy `aws s3api --profile sandbox get-bucket-policy --bucket mlflow-test-acl-bucket| jq -r .Policy |jq .`\r\n```\r\n{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Id\": \"Policy1582321859566\",\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1582321857124\",\r\n      \"Effect\": \"Allow\",\r\n      \"Principal\": \"*\",\r\n      \"Action\": \"s3:*\",\r\n      \"Resource\": [\r\n        \"arn:aws:s3:::mlflow-test-acl-bucket/*\",\r\n        \"arn:aws:s3:::mlflow-test-acl-bucket\"\r\n      ],\r\n      \"Condition\": {\r\n        \"ArnEquals\": {\r\n          \"aws:PrincipalArn\": \"arn:aws:iam::AWS_PROFILE_ID:user/AWS_USER\"\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/591369302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"weldpua2008","id":5720601,"node_id":"MDQ6VXNlcjU3MjA2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/5720601?v=4","gravatar_id":"","url":"https://api.github.com/users/weldpua2008","html_url":"https://github.com/weldpua2008","followers_url":"https://api.github.com/users/weldpua2008/followers","following_url":"https://api.github.com/users/weldpua2008/following{/other_user}","gists_url":"https://api.github.com/users/weldpua2008/gists{/gist_id}","starred_url":"https://api.github.com/users/weldpua2008/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weldpua2008/subscriptions","organizations_url":"https://api.github.com/users/weldpua2008/orgs","repos_url":"https://api.github.com/users/weldpua2008/repos","events_url":"https://api.github.com/users/weldpua2008/events{/privacy}","received_events_url":"https://api.github.com/users/weldpua2008/received_events","type":"User","site_admin":false}},{"id":3073198697,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA3MzE5ODY5Nw==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3073198697","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-26T11:03:32Z","performed_via_github_app":null},{"id":3073198699,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwNzMxOTg2OTk=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3073198699","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-26T11:03:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/592683307","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-592683307","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":592683307,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjY4MzMwNw==","user":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"created_at":"2020-02-28T19:17:10Z","updated_at":"2020-02-28T19:30:59Z","author_association":"CONTRIBUTOR","body":"It might be better to create a new function that takes in an S3 client and the user can initialize however they see fit.\r\n\r\n```\r\nclass S3ArtifactRepository(ArtifactRepository):\r\n    def __init__(s3_client):\r\n        self.s3_client = s3_client\r\n\r\n   def _get_s3_client():\r\n        if not self.s3_client:\r\n              generate_default_s3_client()\r\n        else:\r\n             return self.s3_client\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/592683307/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false}},{"id":3083207646,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA4MzIwNzY0Ng==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3083207646","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-28T19:17:10Z","performed_via_github_app":null},{"id":3083207650,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwODMyMDc2NTA=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3083207650","actor":{"login":"Behel","id":8793448,"node_id":"MDQ6VXNlcjg3OTM0NDg=","avatar_url":"https://avatars.githubusercontent.com/u/8793448?v=4","gravatar_id":"","url":"https://api.github.com/users/Behel","html_url":"https://github.com/Behel","followers_url":"https://api.github.com/users/Behel/followers","following_url":"https://api.github.com/users/Behel/following{/other_user}","gists_url":"https://api.github.com/users/Behel/gists{/gist_id}","starred_url":"https://api.github.com/users/Behel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Behel/subscriptions","organizations_url":"https://api.github.com/users/Behel/orgs","repos_url":"https://api.github.com/users/Behel/repos","events_url":"https://api.github.com/users/Behel/events{/privacy}","received_events_url":"https://api.github.com/users/Behel/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-28T19:17:10Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/592741183","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-592741183","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":592741183,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mjc0MTE4Mw==","user":{"login":"granturing","id":1418471,"node_id":"MDQ6VXNlcjE0MTg0NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1418471?v=4","gravatar_id":"","url":"https://api.github.com/users/granturing","html_url":"https://github.com/granturing","followers_url":"https://api.github.com/users/granturing/followers","following_url":"https://api.github.com/users/granturing/following{/other_user}","gists_url":"https://api.github.com/users/granturing/gists{/gist_id}","starred_url":"https://api.github.com/users/granturing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/granturing/subscriptions","organizations_url":"https://api.github.com/users/granturing/orgs","repos_url":"https://api.github.com/users/granturing/repos","events_url":"https://api.github.com/users/granturing/events{/privacy}","received_events_url":"https://api.github.com/users/granturing/received_events","type":"User","site_admin":false},"created_at":"2020-02-28T21:39:21Z","updated_at":"2020-02-28T21:39:21Z","author_association":"NONE","body":"I've had similar issues of wanting to customize the boto3 session. For now, until an official option is available you could override the default S3ArtifactRepository to do the cross-account assume role:\r\n\r\n```\r\nfrom mlflow.store.artifact.s3_artifact_repo import S3ArtifactRepository\r\n\r\nclass MyS3ArtifactRepository(S3ArtifactRepository):\r\n  def _get_s3_client(self):\r\n    # build client here\r\n    return client\r\n\r\nfrom mlflow.store.artifact.artifact_repository_registry import _artifact_repository_registry\r\n\r\n_artifact_repository_registry.register(\"s3\", MyS3ArtifactRepository)\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/592741183/reactions","total_count":4,"+1":2,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"granturing","id":1418471,"node_id":"MDQ6VXNlcjE0MTg0NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1418471?v=4","gravatar_id":"","url":"https://api.github.com/users/granturing","html_url":"https://github.com/granturing","followers_url":"https://api.github.com/users/granturing/followers","following_url":"https://api.github.com/users/granturing/following{/other_user}","gists_url":"https://api.github.com/users/granturing/gists{/gist_id}","starred_url":"https://api.github.com/users/granturing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/granturing/subscriptions","organizations_url":"https://api.github.com/users/granturing/orgs","repos_url":"https://api.github.com/users/granturing/repos","events_url":"https://api.github.com/users/granturing/events{/privacy}","received_events_url":"https://api.github.com/users/granturing/received_events","type":"User","site_admin":false}},{"id":3294720896,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyOTQ3MjA4OTY=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3294720896","actor":{"login":"mparkhe","id":6900999,"node_id":"MDQ6VXNlcjY5MDA5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/6900999?v=4","gravatar_id":"","url":"https://api.github.com/users/mparkhe","html_url":"https://github.com/mparkhe","followers_url":"https://api.github.com/users/mparkhe/followers","following_url":"https://api.github.com/users/mparkhe/following{/other_user}","gists_url":"https://api.github.com/users/mparkhe/gists{/gist_id}","starred_url":"https://api.github.com/users/mparkhe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mparkhe/subscriptions","organizations_url":"https://api.github.com/users/mparkhe/orgs","repos_url":"https://api.github.com/users/mparkhe/repos","events_url":"https://api.github.com/users/mparkhe/events{/privacy}","received_events_url":"https://api.github.com/users/mparkhe/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-05-01T23:12:41Z","label":{"name":"area/artifacts","color":"48eabc"},"performed_via_github_app":null},{"id":3560810927,"node_id":"MDEyOkxhYmVsZWRFdmVudDM1NjA4MTA5Mjc=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/3560810927","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-07-18T08:37:26Z","label":{"name":"priority/important-longterm","color":"534cb5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/760949243","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-760949243","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":760949243,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MDk0OTI0Mw==","user":{"login":"vaisakhpisharody","id":24930080,"node_id":"MDQ6VXNlcjI0OTMwMDgw","avatar_url":"https://avatars.githubusercontent.com/u/24930080?v=4","gravatar_id":"","url":"https://api.github.com/users/vaisakhpisharody","html_url":"https://github.com/vaisakhpisharody","followers_url":"https://api.github.com/users/vaisakhpisharody/followers","following_url":"https://api.github.com/users/vaisakhpisharody/following{/other_user}","gists_url":"https://api.github.com/users/vaisakhpisharody/gists{/gist_id}","starred_url":"https://api.github.com/users/vaisakhpisharody/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vaisakhpisharody/subscriptions","organizations_url":"https://api.github.com/users/vaisakhpisharody/orgs","repos_url":"https://api.github.com/users/vaisakhpisharody/repos","events_url":"https://api.github.com/users/vaisakhpisharody/events{/privacy}","received_events_url":"https://api.github.com/users/vaisakhpisharody/received_events","type":"User","site_admin":false},"created_at":"2021-01-15T13:43:08Z","updated_at":"2021-01-15T13:43:08Z","author_association":"NONE","body":"> I've had similar issues of wanting to customize the boto3 session. For now, until an official option is available you could override the default S3ArtifactRepository to do the cross-account assume role:\r\n> \r\n> ```\r\n> from mlflow.store.artifact.s3_artifact_repo import S3ArtifactRepository\r\n> \r\n> class MyS3ArtifactRepository(S3ArtifactRepository):\r\n>   def _get_s3_client(self):\r\n>     # build client here\r\n>     return client\r\n> \r\n> from mlflow.store.artifact.artifact_repository_registry import _artifact_repository_registry\r\n> \r\n> _artifact_repository_registry.register(\"s3\", MyS3ArtifactRepository)\r\n> ```\r\n\r\nI also came across this issue, and I just had some queries on this.\r\nThis solution would work only in cases where we add `mlflow` as a python dependency right? This won't be helpful in cases where we run `mlflow server` and we need to have the boto3 client assume roles? Please let me know in case I am missing something here.\r\n\r\nThat said, is there any way we could have something similar to [this solution](https://github.com/mlflow/mlflow/issues/1662#issuecomment-558574996), or, any reason why this solution has not been considered?\r\n\r\nI apologize if I missed out on any hints/points in between.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/760949243/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vaisakhpisharody","id":24930080,"node_id":"MDQ6VXNlcjI0OTMwMDgw","avatar_url":"https://avatars.githubusercontent.com/u/24930080?v=4","gravatar_id":"","url":"https://api.github.com/users/vaisakhpisharody","html_url":"https://github.com/vaisakhpisharody","followers_url":"https://api.github.com/users/vaisakhpisharody/followers","following_url":"https://api.github.com/users/vaisakhpisharody/following{/other_user}","gists_url":"https://api.github.com/users/vaisakhpisharody/gists{/gist_id}","starred_url":"https://api.github.com/users/vaisakhpisharody/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vaisakhpisharody/subscriptions","organizations_url":"https://api.github.com/users/vaisakhpisharody/orgs","repos_url":"https://api.github.com/users/vaisakhpisharody/repos","events_url":"https://api.github.com/users/vaisakhpisharody/events{/privacy}","received_events_url":"https://api.github.com/users/vaisakhpisharody/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/765230665","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-765230665","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":765230665,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTIzMDY2NQ==","user":{"login":"vaisakhpisharody","id":24930080,"node_id":"MDQ6VXNlcjI0OTMwMDgw","avatar_url":"https://avatars.githubusercontent.com/u/24930080?v=4","gravatar_id":"","url":"https://api.github.com/users/vaisakhpisharody","html_url":"https://github.com/vaisakhpisharody","followers_url":"https://api.github.com/users/vaisakhpisharody/followers","following_url":"https://api.github.com/users/vaisakhpisharody/following{/other_user}","gists_url":"https://api.github.com/users/vaisakhpisharody/gists{/gist_id}","starred_url":"https://api.github.com/users/vaisakhpisharody/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vaisakhpisharody/subscriptions","organizations_url":"https://api.github.com/users/vaisakhpisharody/orgs","repos_url":"https://api.github.com/users/vaisakhpisharody/repos","events_url":"https://api.github.com/users/vaisakhpisharody/events{/privacy}","received_events_url":"https://api.github.com/users/vaisakhpisharody/received_events","type":"User","site_admin":false},"created_at":"2021-01-22T08:27:36Z","updated_at":"2021-01-22T08:27:36Z","author_association":"NONE","body":"Hi @dbczumar \r\n\r\nSorry for tagging you here directly, but I wanted to know if there are any plans of getting this out in the next version?\r\nI would be happy to add a PR with [this](https://github.com/mlflow/mlflow/issues/1662#issuecomment-558574996) change if that is an acceptable solution.\r\n\r\nThe solution by @andychow-db would also work, but that can only be done when we are using `mlflow` as a python dependency and not while running the server itself, right? The solution by @mrwillihog seems to be something that would work for all the cases (we did the same thing for our internal company codebase, where we initialize the boto3 client directly)\r\n\r\nPlease let me know if I missed something here.\r\n\r\nThanks,\r\nVaisakh Pisharody","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/765230665/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vaisakhpisharody","id":24930080,"node_id":"MDQ6VXNlcjI0OTMwMDgw","avatar_url":"https://avatars.githubusercontent.com/u/24930080?v=4","gravatar_id":"","url":"https://api.github.com/users/vaisakhpisharody","html_url":"https://github.com/vaisakhpisharody","followers_url":"https://api.github.com/users/vaisakhpisharody/followers","following_url":"https://api.github.com/users/vaisakhpisharody/following{/other_user}","gists_url":"https://api.github.com/users/vaisakhpisharody/gists{/gist_id}","starred_url":"https://api.github.com/users/vaisakhpisharody/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vaisakhpisharody/subscriptions","organizations_url":"https://api.github.com/users/vaisakhpisharody/orgs","repos_url":"https://api.github.com/users/vaisakhpisharody/repos","events_url":"https://api.github.com/users/vaisakhpisharody/events{/privacy}","received_events_url":"https://api.github.com/users/vaisakhpisharody/received_events","type":"User","site_admin":false}},{"id":4237379956,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIzNzM3OTk1Ng==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4237379956","actor":{"login":"mrwillihog","id":684109,"node_id":"MDQ6VXNlcjY4NDEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/684109?v=4","gravatar_id":"","url":"https://api.github.com/users/mrwillihog","html_url":"https://github.com/mrwillihog","followers_url":"https://api.github.com/users/mrwillihog/followers","following_url":"https://api.github.com/users/mrwillihog/following{/other_user}","gists_url":"https://api.github.com/users/mrwillihog/gists{/gist_id}","starred_url":"https://api.github.com/users/mrwillihog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrwillihog/subscriptions","organizations_url":"https://api.github.com/users/mrwillihog/orgs","repos_url":"https://api.github.com/users/mrwillihog/repos","events_url":"https://api.github.com/users/mrwillihog/events{/privacy}","received_events_url":"https://api.github.com/users/mrwillihog/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-22T08:27:36Z","performed_via_github_app":null},{"id":4237379961,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMzczNzk5NjE=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4237379961","actor":{"login":"mrwillihog","id":684109,"node_id":"MDQ6VXNlcjY4NDEwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/684109?v=4","gravatar_id":"","url":"https://api.github.com/users/mrwillihog","html_url":"https://github.com/mrwillihog","followers_url":"https://api.github.com/users/mrwillihog/followers","following_url":"https://api.github.com/users/mrwillihog/following{/other_user}","gists_url":"https://api.github.com/users/mrwillihog/gists{/gist_id}","starred_url":"https://api.github.com/users/mrwillihog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrwillihog/subscriptions","organizations_url":"https://api.github.com/users/mrwillihog/orgs","repos_url":"https://api.github.com/users/mrwillihog/repos","events_url":"https://api.github.com/users/mrwillihog/events{/privacy}","received_events_url":"https://api.github.com/users/mrwillihog/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-22T08:27:36Z","performed_via_github_app":null},{"id":4237379964,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIzNzM3OTk2NA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4237379964","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-22T08:27:36Z","performed_via_github_app":null},{"id":4237379967,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMzczNzk5Njc=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4237379967","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-22T08:27:36Z","performed_via_github_app":null},{"id":4237379971,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIzNzM3OTk3MQ==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4237379971","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-22T08:27:36Z","performed_via_github_app":null},{"id":4237379975,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMzczNzk5NzU=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4237379975","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-22T08:27:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/787822009","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-787822009","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":787822009,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NzgyMjAwOQ==","user":{"login":"vladiceanu","id":19838344,"node_id":"MDQ6VXNlcjE5ODM4MzQ0","avatar_url":"https://avatars.githubusercontent.com/u/19838344?v=4","gravatar_id":"","url":"https://api.github.com/users/vladiceanu","html_url":"https://github.com/vladiceanu","followers_url":"https://api.github.com/users/vladiceanu/followers","following_url":"https://api.github.com/users/vladiceanu/following{/other_user}","gists_url":"https://api.github.com/users/vladiceanu/gists{/gist_id}","starred_url":"https://api.github.com/users/vladiceanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladiceanu/subscriptions","organizations_url":"https://api.github.com/users/vladiceanu/orgs","repos_url":"https://api.github.com/users/vladiceanu/repos","events_url":"https://api.github.com/users/vladiceanu/events{/privacy}","received_events_url":"https://api.github.com/users/vladiceanu/received_events","type":"User","site_admin":false},"created_at":"2021-03-01T10:01:04Z","updated_at":"2021-03-01T10:01:27Z","author_association":"NONE","body":"Hi folks,\r\nwe're also looking forward to IAM Role assume option and keen to help with the change to the code. \r\n\r\nIf anyone works on this already, we would love to get support for all methods of assuming IAM Roles, [plain](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sts.html#STS.Client.assume_role), [assume_role_with_saml()](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sts.html#STS.Client.assume_role_with_saml), and especially the [assume_role_with_web_identity()](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sts.html#STS.Client.assume_role_with_web_identity) ❤️  for EKS/GKE users. \r\n\r\nPlease let me know if you need any help with the implementation or testing. Cheers","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/787822009/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vladiceanu","id":19838344,"node_id":"MDQ6VXNlcjE5ODM4MzQ0","avatar_url":"https://avatars.githubusercontent.com/u/19838344?v=4","gravatar_id":"","url":"https://api.github.com/users/vladiceanu","html_url":"https://github.com/vladiceanu","followers_url":"https://api.github.com/users/vladiceanu/followers","following_url":"https://api.github.com/users/vladiceanu/following{/other_user}","gists_url":"https://api.github.com/users/vladiceanu/gists{/gist_id}","starred_url":"https://api.github.com/users/vladiceanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladiceanu/subscriptions","organizations_url":"https://api.github.com/users/vladiceanu/orgs","repos_url":"https://api.github.com/users/vladiceanu/repos","events_url":"https://api.github.com/users/vladiceanu/events{/privacy}","received_events_url":"https://api.github.com/users/vladiceanu/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/939995591","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-939995591","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":939995591,"node_id":"IC_kwDOCB5Jx844BzHH","user":{"login":"zomri","id":4208497,"node_id":"MDQ6VXNlcjQyMDg0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/4208497?v=4","gravatar_id":"","url":"https://api.github.com/users/zomri","html_url":"https://github.com/zomri","followers_url":"https://api.github.com/users/zomri/followers","following_url":"https://api.github.com/users/zomri/following{/other_user}","gists_url":"https://api.github.com/users/zomri/gists{/gist_id}","starred_url":"https://api.github.com/users/zomri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zomri/subscriptions","organizations_url":"https://api.github.com/users/zomri/orgs","repos_url":"https://api.github.com/users/zomri/repos","events_url":"https://api.github.com/users/zomri/events{/privacy}","received_events_url":"https://api.github.com/users/zomri/received_events","type":"User","site_admin":false},"created_at":"2021-10-11T12:44:08Z","updated_at":"2021-10-11T12:44:49Z","author_association":"NONE","body":"For whoever is looking for solution for this... \r\nAfter trying out solving using environment variables (to no avail), we found a rather good workaround without changing mlflow code itself - call the following function to assume role and update the default boto3 session (which mlflow uses in it's s3 client):\r\n\r\n```\r\ndef assume_role():\r\n    client = boto3.client(\"sts\")\r\n    assumed_role_object = client.assume_role(\r\n        RoleArn=<your role arn string>,\r\n        RoleSessionName=<your role session name string>,\r\n    )\r\n    credentials = assumed_role_object[\"Credentials\"]\r\n\r\n    # setting default session with aws keys - will be used internally in mlflow\r\n    boto3.setup_default_session(\r\n        aws_access_key_id=credentials[\"AccessKeyId\"],\r\n        aws_secret_access_key=credentials[\"SecretAccessKey\"],\r\n        aws_session_token=credentials[\"SessionToken\"],\r\n    )\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/939995591/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zomri","id":4208497,"node_id":"MDQ6VXNlcjQyMDg0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/4208497?v=4","gravatar_id":"","url":"https://api.github.com/users/zomri","html_url":"https://github.com/zomri","followers_url":"https://api.github.com/users/zomri/followers","following_url":"https://api.github.com/users/zomri/following{/other_user}","gists_url":"https://api.github.com/users/zomri/gists{/gist_id}","starred_url":"https://api.github.com/users/zomri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zomri/subscriptions","organizations_url":"https://api.github.com/users/zomri/orgs","repos_url":"https://api.github.com/users/zomri/repos","events_url":"https://api.github.com/users/zomri/events{/privacy}","received_events_url":"https://api.github.com/users/zomri/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1144313758","html_url":"https://github.com/mlflow/mlflow/issues/1662#issuecomment-1144313758","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/1662","id":1144313758,"node_id":"IC_kwDOCB5Jx85ENNee","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2022-06-02T01:11:58Z","updated_at":"2022-06-02T01:11:58Z","author_association":"COLLABORATOR","body":"Given that https://github.com/mlflow/mlflow/issues/1662#issuecomment-939995591 appears to be an excellent solution to this problem, I'm going to go ahead and close this issue. Please feel free to reopen it if the stated solution is insufficient.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1144313758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":6724340840,"node_id":"CE_lADOCB5Jx84cKDkPzwAAAAGQzUxo","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6724340840","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-06-02T01:11:59Z","state_reason":null,"performed_via_github_app":null}]