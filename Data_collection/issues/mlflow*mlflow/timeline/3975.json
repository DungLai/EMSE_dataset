[{"id":4200211981,"node_id":"MDEyOkxhYmVsZWRFdmVudDQyMDAyMTE5ODE=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4200211981","actor":{"login":"whiteh","id":1517580,"node_id":"MDQ6VXNlcjE1MTc1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1517580?v=4","gravatar_id":"","url":"https://api.github.com/users/whiteh","html_url":"https://github.com/whiteh","followers_url":"https://api.github.com/users/whiteh/followers","following_url":"https://api.github.com/users/whiteh/following{/other_user}","gists_url":"https://api.github.com/users/whiteh/gists{/gist_id}","starred_url":"https://api.github.com/users/whiteh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whiteh/subscriptions","organizations_url":"https://api.github.com/users/whiteh/orgs","repos_url":"https://api.github.com/users/whiteh/repos","events_url":"https://api.github.com/users/whiteh/events{/privacy}","received_events_url":"https://api.github.com/users/whiteh/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-01-13T09:25:37Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":4200213198,"node_id":"MDEyOkxhYmVsZWRFdmVudDQyMDAyMTMxOTg=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4200213198","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-01-13T09:25:55Z","label":{"name":"area/model-registry","color":"48eabc"},"performed_via_github_app":null},{"id":4200213201,"node_id":"MDEyOkxhYmVsZWRFdmVudDQyMDAyMTMyMDE=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4200213201","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-01-13T09:25:55Z","label":{"name":"area/tracking","color":"48eabc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/759537330","html_url":"https://github.com/mlflow/mlflow/issues/3975#issuecomment-759537330","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3975","id":759537330,"node_id":"MDEyOklzc3VlQ29tbWVudDc1OTUzNzMzMA==","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2021-01-13T15:50:05Z","updated_at":"2021-01-13T16:01:18Z","author_association":"MEMBER","body":"@whiteh Thanks for reporthing this. This looks like a bug to me.\r\n\r\n```python\r\n# test.py\r\n\r\nfrom unittest import mock\r\n\r\nimport mlflow\r\n\r\n\r\ndef test_create_model_version_called_with_await_creation_for():\r\n    mlflow.set_tracking_uri(\"sqlite:///mlflow.db\")\r\n    mock_target = \"mlflow.tracking.client.MlflowClient.create_model_version\"\r\n\r\n    with mock.patch(mock_target) as mock_create_model_version, mlflow.start_run() as run:\r\n        model = \"mock_model\"  # HACK: `mlflow.sklearn.log_model` accepts anything picklable\r\n        artifact_path = \"model\"\r\n        mlflow.sklearn.log_model(model, artifact_path)\r\n        model_uri = mlflow.get_artifact_uri(artifact_path)\r\n\r\n        registered_model_name = \"model\"\r\n        model_uri_in_runs_format = f\"runs:/{run.info.run_id}/{artifact_path}\"\r\n        model_uri = mlflow.get_artifact_uri(artifact_path)\r\n\r\n        mlflow.register_model(\r\n            model_uri_in_runs_format, registered_model_name, await_registration_for=100\r\n        )\r\n        # `create_model_version` should have been called with `await_creation_for=100`\r\n        mock_create_model_version.assert_called_once_with(\r\n            registered_model_name, model_uri, run.info.run_id, await_creation_for=100\r\n        )\r\n```\r\n\r\nThis gives:\r\n\r\n```\r\n>>> pytest test.py\r\n\r\n...\r\nE           AssertionError:\r\nE           Expected call: create_model_version('model', './mlruns/0/8d4c08a11ee04514a328b093ee98b816/artifacts/model', '8d4c08a11ee04514a328b093ee98b816', await_creation_for=100)\r\nE           Actual call:   create_model_version('model', './mlruns/0/8d4c08a11ee04514a328b093ee98b816/artifacts/model', '8d4c08a11ee04514a328b093ee98b816')\r\n```\r\n\r\n\r\ncc @andychow-db @sueann ","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/759537330/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":4201915314,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIwMTkxNTMxNA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4201915314","actor":{"login":"whiteh","id":1517580,"node_id":"MDQ6VXNlcjE1MTc1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1517580?v=4","gravatar_id":"","url":"https://api.github.com/users/whiteh","html_url":"https://github.com/whiteh","followers_url":"https://api.github.com/users/whiteh/followers","following_url":"https://api.github.com/users/whiteh/following{/other_user}","gists_url":"https://api.github.com/users/whiteh/gists{/gist_id}","starred_url":"https://api.github.com/users/whiteh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whiteh/subscriptions","organizations_url":"https://api.github.com/users/whiteh/orgs","repos_url":"https://api.github.com/users/whiteh/repos","events_url":"https://api.github.com/users/whiteh/events{/privacy}","received_events_url":"https://api.github.com/users/whiteh/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-13T15:50:05Z","performed_via_github_app":null},{"id":4201915319,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMDE5MTUzMTk=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4201915319","actor":{"login":"whiteh","id":1517580,"node_id":"MDQ6VXNlcjE1MTc1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1517580?v=4","gravatar_id":"","url":"https://api.github.com/users/whiteh","html_url":"https://github.com/whiteh","followers_url":"https://api.github.com/users/whiteh/followers","following_url":"https://api.github.com/users/whiteh/following{/other_user}","gists_url":"https://api.github.com/users/whiteh/gists{/gist_id}","starred_url":"https://api.github.com/users/whiteh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whiteh/subscriptions","organizations_url":"https://api.github.com/users/whiteh/orgs","repos_url":"https://api.github.com/users/whiteh/repos","events_url":"https://api.github.com/users/whiteh/events{/privacy}","received_events_url":"https://api.github.com/users/whiteh/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-13T15:50:05Z","performed_via_github_app":null},{"id":4201915326,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIwMTkxNTMyNg==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4201915326","actor":{"login":"sueann","id":4411489,"node_id":"MDQ6VXNlcjQ0MTE0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/4411489?v=4","gravatar_id":"","url":"https://api.github.com/users/sueann","html_url":"https://github.com/sueann","followers_url":"https://api.github.com/users/sueann/followers","following_url":"https://api.github.com/users/sueann/following{/other_user}","gists_url":"https://api.github.com/users/sueann/gists{/gist_id}","starred_url":"https://api.github.com/users/sueann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sueann/subscriptions","organizations_url":"https://api.github.com/users/sueann/orgs","repos_url":"https://api.github.com/users/sueann/repos","events_url":"https://api.github.com/users/sueann/events{/privacy}","received_events_url":"https://api.github.com/users/sueann/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-13T15:50:05Z","performed_via_github_app":null},{"id":4201915330,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMDE5MTUzMzA=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4201915330","actor":{"login":"sueann","id":4411489,"node_id":"MDQ6VXNlcjQ0MTE0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/4411489?v=4","gravatar_id":"","url":"https://api.github.com/users/sueann","html_url":"https://github.com/sueann","followers_url":"https://api.github.com/users/sueann/followers","following_url":"https://api.github.com/users/sueann/following{/other_user}","gists_url":"https://api.github.com/users/sueann/gists{/gist_id}","starred_url":"https://api.github.com/users/sueann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sueann/subscriptions","organizations_url":"https://api.github.com/users/sueann/orgs","repos_url":"https://api.github.com/users/sueann/repos","events_url":"https://api.github.com/users/sueann/events{/privacy}","received_events_url":"https://api.github.com/users/sueann/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-13T15:50:05Z","performed_via_github_app":null},{"id":4201915342,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIwMTkxNTM0Mg==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4201915342","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-13T15:50:05Z","performed_via_github_app":null},{"id":4201915346,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMDE5MTUzNDY=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4201915346","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-13T15:50:05Z","performed_via_github_app":null},{"id":4203755740,"node_id":"MDExOkNsb3NlZEV2ZW50NDIwMzc1NTc0MA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4203755740","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-01-13T23:57:05Z","state_reason":null,"performed_via_github_app":null},{"id":4203755884,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQyMDM3NTU4ODQ=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4203755884","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"c3835e40f4df909b8355526b5d359026287a7acf","commit_url":"https://api.github.com/repos/mlflow/mlflow/commits/c3835e40f4df909b8355526b5d359026287a7acf","created_at":"2021-01-13T23:57:10Z","performed_via_github_app":null},{"id":4568220156,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1NjgyMjAxNTY=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4568220156","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"e6dd9b24f2b386e8e129dab018fdfd204adf5266","commit_url":"https://api.github.com/repos/chauhang/mlflow/commits/e6dd9b24f2b386e8e129dab018fdfd204adf5266","created_at":"2021-04-08T11:58:32Z","performed_via_github_app":null},{"id":4849399653,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4NDkzOTk2NTM=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4849399653","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"50f10ae0ce64460594025822d986bc035de483f4","commit_url":"https://api.github.com/repos/wamartin-aml/mlflow/commits/50f10ae0ce64460594025822d986bc035de483f4","created_at":"2021-06-07T05:03:36Z","performed_via_github_app":null}]