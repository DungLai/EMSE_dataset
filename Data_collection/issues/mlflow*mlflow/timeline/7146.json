[{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1289640602","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1289640602","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1289640602,"node_id":"IC_kwDOCB5Jx85M3lqa","user":{"login":"JHibbard","id":8717652,"node_id":"MDQ6VXNlcjg3MTc2NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8717652?v=4","gravatar_id":"","url":"https://api.github.com/users/JHibbard","html_url":"https://github.com/JHibbard","followers_url":"https://api.github.com/users/JHibbard/followers","following_url":"https://api.github.com/users/JHibbard/following{/other_user}","gists_url":"https://api.github.com/users/JHibbard/gists{/gist_id}","starred_url":"https://api.github.com/users/JHibbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JHibbard/subscriptions","organizations_url":"https://api.github.com/users/JHibbard/orgs","repos_url":"https://api.github.com/users/JHibbard/repos","events_url":"https://api.github.com/users/JHibbard/events{/privacy}","received_events_url":"https://api.github.com/users/JHibbard/received_events","type":"User","site_admin":false},"created_at":"2022-10-24T21:28:52Z","updated_at":"2022-10-24T21:30:14Z","author_association":"COLLABORATOR","body":"Hi luistelmocosta,\r\n\r\nA partial solution is to use sklearn's `sklearn.preprocessing.FunctionTransformer` with the `func` argument as None, this makes `func` the identity function. The identity function will return the value passed into it unchanged, so you can think of it as a transformation for selecting those non-transformed columns you want to keep. [Documentation here](https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.FunctionTransformer.html#sklearn-preprocessing-functiontransformer).\r\n\r\n```python\r\nfrom sklearn.preprocessing import FunctionTransformer\r\n\r\n# will return a column unchanged\r\nFunctionTransformer()\r\n```\r\n\r\nI'll take a look if there's a better alternative to manually using identity functions, otherwise you may have found a good feature to add :)\r\n\r\nThank you,\r\nJim","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1289640602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JHibbard","id":8717652,"node_id":"MDQ6VXNlcjg3MTc2NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8717652?v=4","gravatar_id":"","url":"https://api.github.com/users/JHibbard","html_url":"https://github.com/JHibbard","followers_url":"https://api.github.com/users/JHibbard/followers","following_url":"https://api.github.com/users/JHibbard/following{/other_user}","gists_url":"https://api.github.com/users/JHibbard/gists{/gist_id}","starred_url":"https://api.github.com/users/JHibbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JHibbard/subscriptions","organizations_url":"https://api.github.com/users/JHibbard/orgs","repos_url":"https://api.github.com/users/JHibbard/repos","events_url":"https://api.github.com/users/JHibbard/events{/privacy}","received_events_url":"https://api.github.com/users/JHibbard/received_events","type":"User","site_admin":false}},{"id":7657845450,"node_id":"LE_lADOCB5Jx85Utwr7zwAAAAHIcXLK","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7657845450","actor":{"login":"JHibbard","id":8717652,"node_id":"MDQ6VXNlcjg3MTc2NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8717652?v=4","gravatar_id":"","url":"https://api.github.com/users/JHibbard","html_url":"https://github.com/JHibbard","followers_url":"https://api.github.com/users/JHibbard/followers","following_url":"https://api.github.com/users/JHibbard/following{/other_user}","gists_url":"https://api.github.com/users/JHibbard/gists{/gist_id}","starred_url":"https://api.github.com/users/JHibbard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JHibbard/subscriptions","organizations_url":"https://api.github.com/users/JHibbard/orgs","repos_url":"https://api.github.com/users/JHibbard/repos","events_url":"https://api.github.com/users/JHibbard/events{/privacy}","received_events_url":"https://api.github.com/users/JHibbard/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-10-24T21:30:50Z","label":{"name":"area/pipelines","color":"48eabc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1289780942","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1289780942","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1289780942,"node_id":"IC_kwDOCB5Jx85M4H7O","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-24T23:35:18Z","updated_at":"2022-10-24T23:35:57Z","author_association":"MEMBER","body":"@luistelmocosta Here's an example to keep non-transformed features with `ColumnTransformer`:\r\n\r\n```python\r\nimport sklearn\r\nfrom sklearn.feature_extraction import FeatureHasher\r\nfrom sklearn.preprocessing import MinMaxScaler\r\nfrom sklearn.compose import ColumnTransformer\r\nimport pandas as pd\r\n\r\nprint(sklearn.__version__)\r\n\r\nX = pd.DataFrame(\r\n    {\r\n        \"documents\": [\"First item\", \"second one here\", \"Is this the last?\"],\r\n        \"width\": [3, 4, 5],\r\n    }\r\n)\r\nct = ColumnTransformer([(\"num_preprocess\", MinMaxScaler(), [\"width\"])], remainder=\"passthrough\")\r\n\r\nct.fit(X)\r\nprint(ct.transform(X))\r\nprint(ct.get_feature_names_out())\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n1.1.2\r\n[[0.0 'First item']\r\n [0.5 'second one here']\r\n [1.0 'Is this the last?']]\r\n['num_preprocess__width' 'remainder__documents']\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1289780942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":7658567341,"node_id":"MEE_lADOCB5Jx85Utwr7zwAAAAHIfHat","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7658567341","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-24T23:35:18Z","performed_via_github_app":null},{"id":7658567346,"node_id":"SE_lADOCB5Jx85Utwr7zwAAAAHIfHay","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7658567346","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-24T23:35:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290297609","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1290297609","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1290297609,"node_id":"IC_kwDOCB5Jx85M6GEJ","user":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"created_at":"2022-10-25T10:01:45Z","updated_at":"2022-10-25T10:06:41Z","author_association":"NONE","body":"Thank you for your replies. The documentation says the transform step should define a `fit` and `transform` method. \r\nI included some feature engineering before the scaling transformation using a  `FunctionTransformer`. However, running the scale after that makes the pipeline step return only the scaled features. \r\n\r\n```python\r\n\"\"\"\r\nThis module defines the following routines used by the 'transform' step of the regression pipeline:\r\n- ``transformer_fn``: Defines customizable logic for transforming input data before it is passed\r\n  to the estimator during model inference.\r\n\"\"\"\r\nimport sklearn\r\nimport datetime\r\nfrom pandas import DataFrame\r\nfrom sklearn.compose import ColumnTransformer\r\nfrom sklearn.pipeline import Pipeline\r\nfrom sklearn.preprocessing import OneHotEncoder, StandardScaler, RobustScaler, MinMaxScaler, LabelEncoder, FunctionTransformer\r\nimport numpy as np\r\n\r\n#Features selected based on Boruta (from another notebook)\r\n\r\nCOLS_SELECTED = [\r\n    'store',\r\n    'promo',\r\n    'store_type',\r\n    'assortment',\r\n    'competition_distance',\r\n    'competition_open_since_month',\r\n    'competition_open_since_year',\r\n    'promo2',\r\n    'promo2_since_week',\r\n    'promo2_since_year',\r\n    'competition_time_month',\r\n    'promo_time_week',\r\n    'day_of_week_sin',\r\n    'day_of_week_cos',\r\n    'month_sin',\r\n    'month_cos',\r\n    'day_sin',\r\n    'day_cos',\r\n    'week_of_year_sin',\r\n    'week_of_year_cos']\r\n\r\n\r\ndef calculate_features(df: DataFrame):\r\n  # year week\r\n  df['year_week'] = df['date'].dt.strftime( '%Y-%W' )\r\n\r\n  # competition since\r\n  df['competition_since'] = df.apply( lambda x: datetime.datetime( year=x['competition_open_since_year'], month=x['competition_open_since_month'],day=1 ), axis=1 )\r\n  df['competition_time_month'] = ( ( df['date'] - df['competition_since'] )/30 ).apply( lambda x: x.days ).astype( int )\r\n\r\n  # promo since\r\n  df['promo_since'] = df['promo2_since_year'].astype( str ) + '-' + df['promo2_since_week'].astype( str )\r\n  df['promo_since'] = df['promo_since'].apply( lambda x: datetime.datetime.strptime( x + '-1', '%Y-%W-%w' ) - datetime.timedelta( days=7 ) )\r\n  df['promo_time_week'] = ( ( df['date'] - df['promo_since'] )/7 ).apply( lambda x: x.days ).astype( int )\r\n\r\n  # assortment\r\n  df['assortment'] = df['assortment'].apply( lambda x: 'basic' if x == 'a' else 'extra' if x == 'b' else 'extended' )\r\n\r\n  # state holiday\r\n  df['state_holiday'] = df['state_holiday'].apply( lambda x: 'public_holiday' if x == 'a' else 'easter_holiday' if x == 'b' else 'christmas' if x == 'c' else 'regular_day' )\r\n\r\n  ## Column Selection\r\n  #cols_drop = ['open', 'promo_interval', 'month_map']\r\n  #df = df.drop( cols_drop, axis=1 )\r\n\r\n  ### Encoding\r\n  le = LabelEncoder()\r\n  df['store_type'] = le.fit_transform( df['store_type'] )\r\n\r\n  # assortment - Ordinal Encoding\r\n  assortment_dict = {'basic': 1,  'extra': 2, 'extended': 3}\r\n  df['assortment'] = df['assortment'].map( assortment_dict )\r\n\r\n  ### Nature Transformation\r\n\r\n  # day of week\r\n  df['day_of_week_sin'] = df['day_of_week'].apply( lambda x: np.sin( x * ( 2. * np.pi/7 ) ) )\r\n  df['day_of_week_cos'] = df['day_of_week'].apply( lambda x: np.cos( x * ( 2. * np.pi/7 ) ) )\r\n\r\n  # month\r\n  df['month_sin'] = df['month_number'].apply( lambda x: np.sin( x * ( 2. * np.pi/12 ) ) )\r\n  df['month_cos'] = df['month_number'].apply( lambda x: np.cos( x * ( 2. * np.pi/12 ) ) )\r\n\r\n  # day \r\n  df['day_sin'] = df['day_number'].apply( lambda x: np.sin( x * ( 2. * np.pi/30 ) ) )\r\n  df['day_cos'] = df['day_number'].apply( lambda x: np.cos( x * ( 2. * np.pi/30 ) ) )\r\n\r\n  # week of year\r\n  df['week_of_year_sin'] = df['week_of_year_number'].apply( lambda x: np.sin( x * ( 2. * np.pi/52 ) ) )\r\n  df['week_of_year_cos'] = df['week_of_year_number'].apply( lambda x: np.cos( x * ( 2. * np.pi/52 ) ) )\r\n    \r\n  return df[COLS_SELECTED]\r\n\r\n\r\ndef transformer_fn():\r\n    \"\"\"\r\n    Returns an *unfitted* transformer that defines ``fit()`` and ``transform()`` methods.\r\n    The transformer's input and output signatures should be compatible with scikit-learn\r\n    transformers.\r\n    \"\"\"\r\n    \r\n    \r\n    function_transformer_params = (\r\n        {}\r\n        if sklearn.__version__.startswith(\"1.0\")\r\n        else {\"feature_names_out\": \"one-to-one\"}\r\n    )\r\n    \r\n    return Pipeline(\r\n        steps=[\r\n           (\r\n                \"calculate_features\",\r\n                FunctionTransformer(calculate_features, **function_transformer_params),\r\n            ),\r\n           (\r\n                \"encoder\",\r\n                ColumnTransformer(\r\n                    transformers=[\r\n                        (\r\n                            \"robust_scaler\",\r\n                            RobustScaler(),\r\n                            [\"competition_distance\", \"competition_time_month\"],\r\n                        ),\r\n                        (\r\n                            \"min_max_scaler\",\r\n                            MinMaxScaler(),\r\n                            [\"promo_time_week\"],\r\n                        )\r\n                    ]\r\n                ),\r\n            ),\r\n          \r\n        ]\r\n    )\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290297609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290621831","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1290621831","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1290621831,"node_id":"IC_kwDOCB5Jx85M7VOH","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-25T14:09:48Z","updated_at":"2022-10-25T14:09:48Z","author_association":"MEMBER","body":"@luistelmocosta I think it's because you don't set `remainder=\"passthrough\"` in `ColumnTransformer`.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290621831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":7663995206,"node_id":"MEE_lADOCB5Jx85Utwr7zwAAAAHIz0lG","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7663995206","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-25T14:09:49Z","performed_via_github_app":null},{"id":7663995222,"node_id":"SE_lADOCB5Jx85Utwr7zwAAAAHIz0lW","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7663995222","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-25T14:09:49Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290632910","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1290632910","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1290632910,"node_id":"IC_kwDOCB5Jx85M7X7O","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-25T14:18:01Z","updated_at":"2022-10-25T14:18:01Z","author_association":"MEMBER","body":"Example:\r\n\r\n```python\r\nimport sklearn\r\nfrom sklearn.feature_extraction import FeatureHasher\r\nfrom sklearn.preprocessing import MinMaxScaler\r\nfrom sklearn.compose import ColumnTransformer\r\nimport pandas as pd\r\n\r\nprint(sklearn.__version__)\r\n\r\nX = pd.DataFrame(\r\n    {\r\n        \"documents\": [\"First item\", \"second one here\", \"Is this the last?\"],\r\n        \"width\": [3, 4, 5],\r\n    }\r\n)\r\nct1 = ColumnTransformer([(\"num_preprocess\", MinMaxScaler(), [\"width\"])], remainder=\"passthrough\")\r\nct2 = ColumnTransformer([(\"num_preprocess\", MinMaxScaler(), [\"width\"])])\r\n\r\nprint(ct1.fit_transform(X))\r\nprint(ct2.fit_transform(X))\r\n```\r\n\r\n```\r\n[[0.0 'First item']\r\n [0.5 'second one here']\r\n [1.0 'Is this the last?']]\r\n[[0. ]\r\n [0.5]\r\n [1. ]]\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290632910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290794707","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1290794707","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1290794707,"node_id":"IC_kwDOCB5Jx85M7_bT","user":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false},"created_at":"2022-10-25T15:59:26Z","updated_at":"2022-10-25T15:59:26Z","author_association":"NONE","body":"Hello! I'm also working on this project and our problem is that we can get all the features with the remainder=\"passthrough\", however, the names of the columns in the table get changed to this:\r\n<img width=\"61\" alt=\"image\" src=\"https://user-images.githubusercontent.com/101735605/197823298-aa4edd2d-bc21-4d5f-b111-68c777e31a17.png\">\r\nHow can we keep the original column names?","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290794707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290833284","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1290833284","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1290833284,"node_id":"IC_kwDOCB5Jx85M8I2E","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-25T16:27:52Z","updated_at":"2022-10-25T16:29:55Z","author_association":"MEMBER","body":"@MariaSdSantos mlflow attempts to get the output feature names using `get_feature_names_out`. If this fails, mlflow falls back to auto-generated feature names. You can call `get_feature_names_out` on your transformer to see what went wrong.\r\n\r\nhttps://github.com/mlflow/mlflow/blob/7802f5a4b5d114dbf6a9816515a856d0d8f489a9/mlflow/pipelines/steps/transform.py#L40","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1290833284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":7665271758,"node_id":"MEE_lADOCB5Jx85Utwr7zwAAAAHI4sPO","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7665271758","actor":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-25T16:27:52Z","performed_via_github_app":null},{"id":7665271768,"node_id":"SE_lADOCB5Jx85Utwr7zwAAAAHI4sPY","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7665271768","actor":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-25T16:27:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1291260489","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1291260489","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1291260489,"node_id":"IC_kwDOCB5Jx85M9xJJ","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-25T23:54:11Z","updated_at":"2022-10-26T14:01:52Z","author_association":"MEMBER","body":"@luistelmocosta Please let us know if `remainder=\"passthrough\"` doesn't help.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1291260489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"id":7667954939,"node_id":"MEE_lADOCB5Jx85Utwr7zwAAAAHJC7T7","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7667954939","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-10-25T23:54:11Z","performed_via_github_app":null},{"id":7667954940,"node_id":"SE_lADOCB5Jx85Utwr7zwAAAAHJC7T8","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7667954940","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-10-25T23:54:11Z","performed_via_github_app":null},{"id":7673294032,"node_id":"CE_lADOCB5Jx85Utwr7zwAAAAHJXSzQ","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/7673294032","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-10-26T14:13:38Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292175437","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1292175437","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1292175437,"node_id":"IC_kwDOCB5Jx85NBQhN","user":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false},"created_at":"2022-10-26T14:52:43Z","updated_at":"2022-10-26T14:52:43Z","author_association":"NONE","body":"Hello. Thank you for your reply. `remainder=\"passthrough\"` did help but the output column names do not match the original ones. Instead, it is adding the step name as a prefix and that's why we cannot get the correct names.\r\n```\r\npipeline = Pipeline(\r\n        steps=[\r\n           (\r\n                \"calculate_features\",\r\n                FunctionTransformer(calculate_features, **function_transformer_params),\r\n            ),\r\n          (\r\n                \"encoder\",\r\n                ColumnTransformer(\r\n                    transformers=[\r\n                        (\r\n                            \"robust_scaler\",\r\n                            RobustScaler(),\r\n                            [\"competition_distance\", \"competition_time_month\"],\r\n                        ),\r\n                        (\r\n                            \"min_max_scaler\",\r\n                            MinMaxScaler(),\r\n                            [\"promo_time_week\"],\r\n                        )\r\n                    ], remainder=\"passthrough\"\r\n                ),\r\n            ),\r\n          \r\n        ]\r\n    ) \r\n```\r\n```\r\nfunction_transformer_params = (\r\n        {}\r\n        if sklearn.__version__.startswith(\"1.0\")\r\n        else {\"feature_names_out\": \"\"}\r\n    )\r\n```\r\n\r\n```\r\npipeline.fit_transform(training_data)\r\npipeline.get_feature_names_out(COLS_SELECTED)\r\n```\r\n<img width=\"291\" alt=\"image\" src=\"https://user-images.githubusercontent.com/101735605/198059629-b2dfe529-2fcd-4513-86e3-894a375b0f16.png\">\r\n\r\n\r\nThe `calculate_features ` function is the same as the above. Since there is no match, it is returning those f_* column names. Thank you","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292175437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292183817","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1292183817","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1292183817,"node_id":"IC_kwDOCB5Jx85NBSkJ","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-26T14:58:52Z","updated_at":"2022-10-26T14:58:52Z","author_association":"MEMBER","body":"Can you add `FunctionTransformer` that strips the `remainder__` prefix?","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292183817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292214178","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1292214178","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1292214178,"node_id":"IC_kwDOCB5Jx85NBZ-i","user":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false},"created_at":"2022-10-26T15:20:17Z","updated_at":"2022-10-26T15:20:17Z","author_association":"NONE","body":"Hello. We tried to add strip to the pipeline. However, we are not sure where to apply it in the pipeline, because the output of the transformers are an array and not a dataframe.\r\n```\r\ndef strip_columns(df: DataFrame):\r\n    df.columns = [x.split('__')[-1] for x in df.columns]\r\n    return df\r\n\r\npipeline = Pipeline(\r\n        steps=[\r\n           (\r\n                \"calculate_features\",\r\n                FunctionTransformer(calculate_features, **function_transformer_params),\r\n            ),\r\n          (\r\n                \"encoder\",\r\n                ColumnTransformer(\r\n                    transformers=[\r\n                        (\r\n                            \"robust_scaler\",\r\n                            RobustScaler(),\r\n                            [\"competition_distance\", \"competition_time_month\"],\r\n                        ),\r\n                        (\r\n                            \"min_max_scaler\",\r\n                            MinMaxScaler(),\r\n                            [\"promo_time_week\"],\r\n                        )\r\n                    ], remainder=\"passthrough\"\r\n                ),\r\n            ),\r\n            (\r\n                \"rename_features\",\r\n                FunctionTransformer(strip_columns, **function_transformer_params),\r\n            ),\r\n          \r\n        ]\r\n    )\r\n```\r\nThank you.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292214178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MariaSdSantos","id":101735605,"node_id":"U_kgDOBhBctQ","avatar_url":"https://avatars.githubusercontent.com/u/101735605?v=4","gravatar_id":"","url":"https://api.github.com/users/MariaSdSantos","html_url":"https://github.com/MariaSdSantos","followers_url":"https://api.github.com/users/MariaSdSantos/followers","following_url":"https://api.github.com/users/MariaSdSantos/following{/other_user}","gists_url":"https://api.github.com/users/MariaSdSantos/gists{/gist_id}","starred_url":"https://api.github.com/users/MariaSdSantos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MariaSdSantos/subscriptions","organizations_url":"https://api.github.com/users/MariaSdSantos/orgs","repos_url":"https://api.github.com/users/MariaSdSantos/repos","events_url":"https://api.github.com/users/MariaSdSantos/events{/privacy}","received_events_url":"https://api.github.com/users/MariaSdSantos/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292220974","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1292220974","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1292220974,"node_id":"IC_kwDOCB5Jx85NBbou","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2022-10-26T15:25:24Z","updated_at":"2022-10-26T15:25:24Z","author_association":"MEMBER","body":"https://github.com/scikit-learn/scikit-learn/issues might be a better place to ask this.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292220974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292335964","html_url":"https://github.com/mlflow/mlflow/issues/7146#issuecomment-1292335964","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/7146","id":1292335964,"node_id":"IC_kwDOCB5Jx85NB3tc","user":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false},"created_at":"2022-10-26T16:56:13Z","updated_at":"2022-10-26T16:56:13Z","author_association":"NONE","body":"I don't think that would solve the problem either :)\r\n\r\nWhat is happening is that we can't use a _FunctionTransformer_ to rename the columns' names because the step `transform.py` _uses the training dataset created by **split**_ which we don't have access to inside the transform script - it is an artifact of the pipeline. \r\nSince we don't have the original column names we cannot simply replace the names (what we usually do in this kind of scenario). \r\nThat's where it gets tricky, we apply the _calculate_features_ as a _FunctionTransformer_ and when we apply the transformers using `remainder=\"passthrough\"`  there isn't a match between the result and the pre-transformed columns. \r\n\r\nWe've been following [this repository](https://github.com/mlflow/mlp-regression-example/blob/master/steps/transform.py) since there isn't much documentation yet. Sadly, the only example available doesn't face this issue because the transformed features are the same as they use for the whole training process. \r\nSorry for any silly questions but we started using MLFlow Pipelines recently and we are still trying to understand how all these steps are connected and how we can customize it to our needs. \r\n\r\nThank you :)","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1292335964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luistelmocosta","id":7799750,"node_id":"MDQ6VXNlcjc3OTk3NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7799750?v=4","gravatar_id":"","url":"https://api.github.com/users/luistelmocosta","html_url":"https://github.com/luistelmocosta","followers_url":"https://api.github.com/users/luistelmocosta/followers","following_url":"https://api.github.com/users/luistelmocosta/following{/other_user}","gists_url":"https://api.github.com/users/luistelmocosta/gists{/gist_id}","starred_url":"https://api.github.com/users/luistelmocosta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luistelmocosta/subscriptions","organizations_url":"https://api.github.com/users/luistelmocosta/orgs","repos_url":"https://api.github.com/users/luistelmocosta/repos","events_url":"https://api.github.com/users/luistelmocosta/events{/privacy}","received_events_url":"https://api.github.com/users/luistelmocosta/received_events","type":"User","site_admin":false}}]