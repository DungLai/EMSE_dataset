[{"id":4289795290,"node_id":"MDEyOkxhYmVsZWRFdmVudDQyODk3OTUyOTA=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4289795290","actor":{"login":"potoo0","id":34411681,"node_id":"MDQ6VXNlcjM0NDExNjgx","avatar_url":"https://avatars.githubusercontent.com/u/34411681?v=4","gravatar_id":"","url":"https://api.github.com/users/potoo0","html_url":"https://github.com/potoo0","followers_url":"https://api.github.com/users/potoo0/followers","following_url":"https://api.github.com/users/potoo0/following{/other_user}","gists_url":"https://api.github.com/users/potoo0/gists{/gist_id}","starred_url":"https://api.github.com/users/potoo0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/potoo0/subscriptions","organizations_url":"https://api.github.com/users/potoo0/orgs","repos_url":"https://api.github.com/users/potoo0/repos","events_url":"https://api.github.com/users/potoo0/events{/privacy}","received_events_url":"https://api.github.com/users/potoo0/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-02-04T09:31:41Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/872998263","html_url":"https://github.com/mlflow/mlflow/issues/4061#issuecomment-872998263","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/4061","id":872998263,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Mjk5ODI2Mw==","user":{"login":"amnesiacandres","id":1159111,"node_id":"MDQ6VXNlcjExNTkxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1159111?v=4","gravatar_id":"","url":"https://api.github.com/users/amnesiacandres","html_url":"https://github.com/amnesiacandres","followers_url":"https://api.github.com/users/amnesiacandres/followers","following_url":"https://api.github.com/users/amnesiacandres/following{/other_user}","gists_url":"https://api.github.com/users/amnesiacandres/gists{/gist_id}","starred_url":"https://api.github.com/users/amnesiacandres/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amnesiacandres/subscriptions","organizations_url":"https://api.github.com/users/amnesiacandres/orgs","repos_url":"https://api.github.com/users/amnesiacandres/repos","events_url":"https://api.github.com/users/amnesiacandres/events{/privacy}","received_events_url":"https://api.github.com/users/amnesiacandres/received_events","type":"User","site_admin":false},"created_at":"2021-07-02T13:27:23Z","updated_at":"2021-07-02T13:27:23Z","author_association":"NONE","body":"+1 Observing same issue.\r\n\r\nFirst model is loaded and additional code is imported. Then, the second model is loaded but uses previously imported functions if the file has the same name (model_builder.py in @potoo0's code above)\r\n\r\nBest case scenario, using the incorrect function throws an error as in this bug. But is also possible that the code file from the first model contains a same named function that is compatible with the call and returns something the user did not intend to get.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/872998263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"amnesiacandres","id":1159111,"node_id":"MDQ6VXNlcjExNTkxMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1159111?v=4","gravatar_id":"","url":"https://api.github.com/users/amnesiacandres","html_url":"https://github.com/amnesiacandres","followers_url":"https://api.github.com/users/amnesiacandres/followers","following_url":"https://api.github.com/users/amnesiacandres/following{/other_user}","gists_url":"https://api.github.com/users/amnesiacandres/gists{/gist_id}","starred_url":"https://api.github.com/users/amnesiacandres/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amnesiacandres/subscriptions","organizations_url":"https://api.github.com/users/amnesiacandres/orgs","repos_url":"https://api.github.com/users/amnesiacandres/repos","events_url":"https://api.github.com/users/amnesiacandres/events{/privacy}","received_events_url":"https://api.github.com/users/amnesiacandres/received_events","type":"User","site_admin":false}},{"id":4971476453,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDk3MTQ3NjQ1Mw==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4971476453","actor":{"login":"potoo0","id":34411681,"node_id":"MDQ6VXNlcjM0NDExNjgx","avatar_url":"https://avatars.githubusercontent.com/u/34411681?v=4","gravatar_id":"","url":"https://api.github.com/users/potoo0","html_url":"https://github.com/potoo0","followers_url":"https://api.github.com/users/potoo0/followers","following_url":"https://api.github.com/users/potoo0/following{/other_user}","gists_url":"https://api.github.com/users/potoo0/gists{/gist_id}","starred_url":"https://api.github.com/users/potoo0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/potoo0/subscriptions","organizations_url":"https://api.github.com/users/potoo0/orgs","repos_url":"https://api.github.com/users/potoo0/repos","events_url":"https://api.github.com/users/potoo0/events{/privacy}","received_events_url":"https://api.github.com/users/potoo0/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-02T13:27:23Z","performed_via_github_app":null},{"id":4971476455,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ5NzE0NzY0NTU=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4971476455","actor":{"login":"potoo0","id":34411681,"node_id":"MDQ6VXNlcjM0NDExNjgx","avatar_url":"https://avatars.githubusercontent.com/u/34411681?v=4","gravatar_id":"","url":"https://api.github.com/users/potoo0","html_url":"https://github.com/potoo0","followers_url":"https://api.github.com/users/potoo0/followers","following_url":"https://api.github.com/users/potoo0/following{/other_user}","gists_url":"https://api.github.com/users/potoo0/gists{/gist_id}","starred_url":"https://api.github.com/users/potoo0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/potoo0/subscriptions","organizations_url":"https://api.github.com/users/potoo0/orgs","repos_url":"https://api.github.com/users/potoo0/repos","events_url":"https://api.github.com/users/potoo0/events{/privacy}","received_events_url":"https://api.github.com/users/potoo0/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-02T13:27:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/901098579","html_url":"https://github.com/mlflow/mlflow/issues/4061#issuecomment-901098579","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/4061","id":901098579,"node_id":"IC_kwDOCB5Jx841taxT","user":{"login":"ablanchard","id":6951980,"node_id":"MDQ6VXNlcjY5NTE5ODA=","avatar_url":"https://avatars.githubusercontent.com/u/6951980?v=4","gravatar_id":"","url":"https://api.github.com/users/ablanchard","html_url":"https://github.com/ablanchard","followers_url":"https://api.github.com/users/ablanchard/followers","following_url":"https://api.github.com/users/ablanchard/following{/other_user}","gists_url":"https://api.github.com/users/ablanchard/gists{/gist_id}","starred_url":"https://api.github.com/users/ablanchard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ablanchard/subscriptions","organizations_url":"https://api.github.com/users/ablanchard/orgs","repos_url":"https://api.github.com/users/ablanchard/repos","events_url":"https://api.github.com/users/ablanchard/events{/privacy}","received_events_url":"https://api.github.com/users/ablanchard/received_events","type":"User","site_admin":false},"created_at":"2021-08-18T13:05:22Z","updated_at":"2021-08-18T13:05:22Z","author_association":"NONE","body":"I came across the same issue. This happened with models logged along with code using the `code_path` parameter (as [documented here](https://mlflow.org/docs/latest/python_api/mlflow.pyfunc.html#mlflow.pyfunc.log_model))\r\n\r\nA workaround that can be used is to unload the python module before loading the 2nd model. This suppose to know the name of the module. For the example above, it would look like:\r\n```\r\nimport sys\r\nloadedml_1 = load_model(f\"models:/{model_1_reg_name}/{stage}\")\r\nprint(f'loadedml_1.pred: {loadedml_1.predict(x)}')\r\n\r\nsys.modules.pop(\"model_builder\", None)\r\nloadedml_2 = load_model(f\"models:/{model_2_reg_name}/{stage}\")\r\nprint(f'loadedml_2.pred: {loadedml_2.predict(x)}')\r\n```\r\nThe `sys.modules` contains all the current loaded modules ([documented here](https://docs.python.org/3/library/sys.html#sys.modules)). By removing our entry from this dict, we are making the module unavailable for the program.\r\nThe entry name is the same as the script name but more complex cases can occur like if the script linked others scripts in the code_path. Also the name of the module can collide with an already given name by another lib.\r\nThere is some edge cases to think about in order to make the fix inside mlflow.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/901098579/reactions","total_count":5,"+1":3,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ablanchard","id":6951980,"node_id":"MDQ6VXNlcjY5NTE5ODA=","avatar_url":"https://avatars.githubusercontent.com/u/6951980?v=4","gravatar_id":"","url":"https://api.github.com/users/ablanchard","html_url":"https://github.com/ablanchard","followers_url":"https://api.github.com/users/ablanchard/followers","following_url":"https://api.github.com/users/ablanchard/following{/other_user}","gists_url":"https://api.github.com/users/ablanchard/gists{/gist_id}","starred_url":"https://api.github.com/users/ablanchard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ablanchard/subscriptions","organizations_url":"https://api.github.com/users/ablanchard/orgs","repos_url":"https://api.github.com/users/ablanchard/repos","events_url":"https://api.github.com/users/ablanchard/events{/privacy}","received_events_url":"https://api.github.com/users/ablanchard/received_events","type":"User","site_admin":false}}]