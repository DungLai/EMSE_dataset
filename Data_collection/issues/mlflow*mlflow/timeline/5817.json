[{"id":6547575364,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGGRBJE","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6547575364","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-04T10:55:37Z","performed_via_github_app":null},{"id":6547575370,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGGRBJK","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6547575370","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-04T10:55:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1117576317","html_url":"https://github.com/mlflow/mlflow/issues/5817#issuecomment-1117576317","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5817","id":1117576317,"node_id":"IC_kwDOCB5Jx85CnNx9","user":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"created_at":"2022-05-04T16:47:03Z","updated_at":"2022-05-04T16:47:03Z","author_association":"CONTRIBUTOR","body":"@dbczumar  The initial version of [autolog](https://github.com/mlflow/mlflow/blob/c56d92002fc6dae387e54684b6a61f25896edc9f/mlflow/pytorch/_pytorch_autolog.py#L32) logged only the rank zero model.\r\n\r\nIn the current version, the log_model method is called for all the gpus. Is this change intentional ? Should we apply rank_zero_only tag for log_model as well?\r\n","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1117576317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false}},{"id":6550203097,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGGbCrZ","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6550203097","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-04T16:47:03Z","performed_via_github_app":null},{"id":6550203105,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGGbCrh","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6550203105","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-04T16:47:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1117578049","html_url":"https://github.com/mlflow/mlflow/issues/5817#issuecomment-1117578049","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5817","id":1117578049,"node_id":"IC_kwDOCB5Jx85CnONB","user":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"created_at":"2022-05-04T16:49:07Z","updated_at":"2022-05-04T16:49:07Z","author_association":"CONTRIBUTOR","body":"@mChowdhury-91 When running in multi gpu environment, Its generally a practice to save the model with rank zero gpu. You can use the experiment with rank 0 gpu. It contains all the information (hyper params, metrics and model)","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1117578049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false}},{"id":6550215165,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGGbFn9","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6550215165","actor":{"login":"mChowdhury-91","id":75471862,"node_id":"MDQ6VXNlcjc1NDcxODYy","avatar_url":"https://avatars.githubusercontent.com/u/75471862?v=4","gravatar_id":"","url":"https://api.github.com/users/mChowdhury-91","html_url":"https://github.com/mChowdhury-91","followers_url":"https://api.github.com/users/mChowdhury-91/followers","following_url":"https://api.github.com/users/mChowdhury-91/following{/other_user}","gists_url":"https://api.github.com/users/mChowdhury-91/gists{/gist_id}","starred_url":"https://api.github.com/users/mChowdhury-91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mChowdhury-91/subscriptions","organizations_url":"https://api.github.com/users/mChowdhury-91/orgs","repos_url":"https://api.github.com/users/mChowdhury-91/repos","events_url":"https://api.github.com/users/mChowdhury-91/events{/privacy}","received_events_url":"https://api.github.com/users/mChowdhury-91/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-04T16:49:07Z","performed_via_github_app":null},{"id":6550215173,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGGbFoF","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6550215173","actor":{"login":"mChowdhury-91","id":75471862,"node_id":"MDQ6VXNlcjc1NDcxODYy","avatar_url":"https://avatars.githubusercontent.com/u/75471862?v=4","gravatar_id":"","url":"https://api.github.com/users/mChowdhury-91","html_url":"https://github.com/mChowdhury-91","followers_url":"https://api.github.com/users/mChowdhury-91/followers","following_url":"https://api.github.com/users/mChowdhury-91/following{/other_user}","gists_url":"https://api.github.com/users/mChowdhury-91/gists{/gist_id}","starred_url":"https://api.github.com/users/mChowdhury-91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mChowdhury-91/subscriptions","organizations_url":"https://api.github.com/users/mChowdhury-91/orgs","repos_url":"https://api.github.com/users/mChowdhury-91/repos","events_url":"https://api.github.com/users/mChowdhury-91/events{/privacy}","received_events_url":"https://api.github.com/users/mChowdhury-91/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-04T16:49:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1118226938","html_url":"https://github.com/mlflow/mlflow/issues/5817#issuecomment-1118226938","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5817","id":1118226938,"node_id":"IC_kwDOCB5Jx85Cpsn6","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2022-05-05T06:48:07Z","updated_at":"2022-05-05T06:48:07Z","author_association":"COLLABORATOR","body":"@shrinath-suresh Models only appear to be logged from the driver process after training completes: https://github.com/mlflow/mlflow/blob/1539d9e467bcd865c335e800dad597517b0a9bcd/mlflow/pytorch/_pytorch_autolog.py#L387-L395. I don't see any other calls to `log_model()`. Please let me know if I'm missing something.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1118226938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":6554138829,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGGqDjN","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6554138829","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-05T06:48:07Z","performed_via_github_app":null},{"id":6554138830,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGGqDjO","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6554138830","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-05T06:48:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1119617094","html_url":"https://github.com/mlflow/mlflow/issues/5817#issuecomment-1119617094","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5817","id":1119617094,"node_id":"IC_kwDOCB5Jx85CvABG","user":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"created_at":"2022-05-06T13:22:06Z","updated_at":"2022-05-06T13:22:06Z","author_association":"CONTRIBUTOR","body":"> @shrinath-suresh Models only appear to be logged from the driver process after training completes:\r\n> \r\n> https://github.com/mlflow/mlflow/blob/1539d9e467bcd865c335e800dad597517b0a9bcd/mlflow/pytorch/_pytorch_autolog.py#L387-L395\r\n> \r\n> . I don't see any other calls to `log_model()`. Please let me know if I'm missing something.\r\n\r\nI added a print statement above log_model and compiled mlflow from source. Tested MNIST example with CPU and 2 GPUs.\r\n\r\nsearch for `Log model called with run_id` in logs\r\n\r\n[mnist_with_gpu.txt](https://github.com/mlflow/mlflow/files/8640276/mnist_with_gpu.txt)\r\n[mnist_without_gpu.txt](https://github.com/mlflow/mlflow/files/8640277/mnist_without_gpu.txt)\r\n\r\nIn case of 2 gpus, the log model is getting called twice with different run ids.I guess, the driver code is getting invoked per gpu (twice) - resulting in 2 different runs. ","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1119617094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false}},{"id":6563559732,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGHN_k0","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6563559732","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-06T13:22:06Z","performed_via_github_app":null},{"id":6563559741,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGHN_k9","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6563559741","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-06T13:22:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1120140288","html_url":"https://github.com/mlflow/mlflow/issues/5817#issuecomment-1120140288","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5817","id":1120140288,"node_id":"IC_kwDOCB5Jx85Cw_wA","user":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"created_at":"2022-05-07T05:45:40Z","updated_at":"2022-05-07T05:45:40Z","author_association":"COLLABORATOR","body":"> > @shrinath-suresh Models only appear to be logged from the driver process after training completes:\r\n> > https://github.com/mlflow/mlflow/blob/1539d9e467bcd865c335e800dad597517b0a9bcd/mlflow/pytorch/_pytorch_autolog.py#L387-L395\r\n> > \r\n> > . I don't see any other calls to `log_model()`. Please let me know if I'm missing something.\r\n> \r\n> I added a print statement above log_model and compiled mlflow from source. Tested MNIST example with CPU and 2 GPUs.\r\n> \r\n> search for `Log model called with run_id` in logs\r\n> \r\n> [mnist_with_gpu.txt](https://github.com/mlflow/mlflow/files/8640276/mnist_with_gpu.txt) [mnist_without_gpu.txt](https://github.com/mlflow/mlflow/files/8640277/mnist_without_gpu.txt)\r\n> \r\n> In case of 2 gpus, the log model is getting called twice with different run ids.I guess, the driver code is getting invoked per gpu (twice) - resulting in 2 different runs.\r\n\r\n@shrinath-suresh Thanks for trying this out! In that case, this is definitely a regression. Do you have bandwidth to explore restoring the `rank_zero_only` decorator for the model logging operation? Apologies for the oversight here!","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1120140288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false}},{"id":6567076610,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGHbaMC","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6567076610","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-07T05:45:40Z","performed_via_github_app":null},{"id":6567076611,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGHbaMD","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6567076611","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-07T05:45:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1121388102","html_url":"https://github.com/mlflow/mlflow/issues/5817#issuecomment-1121388102","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/5817","id":1121388102,"node_id":"IC_kwDOCB5Jx85C1wZG","user":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false},"created_at":"2022-05-09T17:38:46Z","updated_at":"2022-05-09T17:38:46Z","author_association":"CONTRIBUTOR","body":"@dbczumar The model logging issue is just a part of it. The root cause of the problem is - On multiple gpu environment, each gpu holds the copy of the autolog method and it results in multiple runs. \r\n\r\nFor example, `pytorch mnist_autolog_example.py --max_epochs 1 --gpus 3 --strategy ddp` creates 3 different runs. \r\n\r\nI have added three possible solutions in the PR. please review with the team and let me know your thoughts. ","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/1121388102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shrinath-suresh","id":63862647,"node_id":"MDQ6VXNlcjYzODYyNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/63862647?v=4","gravatar_id":"","url":"https://api.github.com/users/shrinath-suresh","html_url":"https://github.com/shrinath-suresh","followers_url":"https://api.github.com/users/shrinath-suresh/followers","following_url":"https://api.github.com/users/shrinath-suresh/following{/other_user}","gists_url":"https://api.github.com/users/shrinath-suresh/gists{/gist_id}","starred_url":"https://api.github.com/users/shrinath-suresh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrinath-suresh/subscriptions","organizations_url":"https://api.github.com/users/shrinath-suresh/orgs","repos_url":"https://api.github.com/users/shrinath-suresh/repos","events_url":"https://api.github.com/users/shrinath-suresh/events{/privacy}","received_events_url":"https://api.github.com/users/shrinath-suresh/received_events","type":"User","site_admin":false}},{"id":6575060369,"node_id":"MEE_lADOCB5Jx85JB0EgzwAAAAGH53WR","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6575060369","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-05-09T17:38:46Z","performed_via_github_app":null},{"id":6575060383,"node_id":"SE_lADOCB5Jx85JB0EgzwAAAAGH53Wf","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6575060383","actor":{"login":"dbczumar","id":39497902,"node_id":"MDQ6VXNlcjM5NDk3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/39497902?v=4","gravatar_id":"","url":"https://api.github.com/users/dbczumar","html_url":"https://github.com/dbczumar","followers_url":"https://api.github.com/users/dbczumar/followers","following_url":"https://api.github.com/users/dbczumar/following{/other_user}","gists_url":"https://api.github.com/users/dbczumar/gists{/gist_id}","starred_url":"https://api.github.com/users/dbczumar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbczumar/subscriptions","organizations_url":"https://api.github.com/users/dbczumar/orgs","repos_url":"https://api.github.com/users/dbczumar/repos","events_url":"https://api.github.com/users/dbczumar/events{/privacy}","received_events_url":"https://api.github.com/users/dbczumar/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-05-09T17:38:46Z","performed_via_github_app":null},{"id":6762878912,"node_id":"CE_lADOCB5Jx85JB0EgzwAAAAGTGVfA","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/6762878912","actor":{"login":"BenWilson2","id":39283302,"node_id":"MDQ6VXNlcjM5MjgzMzAy","avatar_url":"https://avatars.githubusercontent.com/u/39283302?v=4","gravatar_id":"","url":"https://api.github.com/users/BenWilson2","html_url":"https://github.com/BenWilson2","followers_url":"https://api.github.com/users/BenWilson2/followers","following_url":"https://api.github.com/users/BenWilson2/following{/other_user}","gists_url":"https://api.github.com/users/BenWilson2/gists{/gist_id}","starred_url":"https://api.github.com/users/BenWilson2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenWilson2/subscriptions","organizations_url":"https://api.github.com/users/BenWilson2/orgs","repos_url":"https://api.github.com/users/BenWilson2/repos","events_url":"https://api.github.com/users/BenWilson2/events{/privacy}","received_events_url":"https://api.github.com/users/BenWilson2/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-06-07T16:15:57Z","state_reason":null,"performed_via_github_app":null}]