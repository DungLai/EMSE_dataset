[{"id":4157900772,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxNTc5MDA3NzI=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157900772","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:09:29Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":4157900773,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxNTc5MDA3NzM=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157900773","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:09:29Z","label":{"name":"language/r","color":"349cd8"},"performed_via_github_app":null},{"id":4157900774,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxNTc5MDA3NzQ=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157900774","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:09:29Z","label":{"name":"area/models","color":"48eabc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/752693701","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-752693701","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":752693701,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MjY5MzcwMQ==","user":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"created_at":"2020-12-30T17:10:56Z","updated_at":"2020-12-30T17:10:56Z","author_association":"CONTRIBUTOR","body":"@lorenzwalthert @yitao-li Are you aware of this bug?\r\ncc: @andychow-db ","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/752693701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false}},{"id":4157903744,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1NzkwMzc0NA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157903744","actor":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:10:56Z","performed_via_github_app":null},{"id":4157903747,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTc5MDM3NDc=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157903747","actor":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:10:56Z","performed_via_github_app":null},{"id":4157903751,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1NzkwMzc1MQ==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157903751","actor":{"login":"lorenzwalthert","id":10477073,"node_id":"MDQ6VXNlcjEwNDc3MDcz","avatar_url":"https://avatars.githubusercontent.com/u/10477073?v=4","gravatar_id":"","url":"https://api.github.com/users/lorenzwalthert","html_url":"https://github.com/lorenzwalthert","followers_url":"https://api.github.com/users/lorenzwalthert/followers","following_url":"https://api.github.com/users/lorenzwalthert/following{/other_user}","gists_url":"https://api.github.com/users/lorenzwalthert/gists{/gist_id}","starred_url":"https://api.github.com/users/lorenzwalthert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorenzwalthert/subscriptions","organizations_url":"https://api.github.com/users/lorenzwalthert/orgs","repos_url":"https://api.github.com/users/lorenzwalthert/repos","events_url":"https://api.github.com/users/lorenzwalthert/events{/privacy}","received_events_url":"https://api.github.com/users/lorenzwalthert/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:10:56Z","performed_via_github_app":null},{"id":4157903752,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTc5MDM3NTI=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157903752","actor":{"login":"lorenzwalthert","id":10477073,"node_id":"MDQ6VXNlcjEwNDc3MDcz","avatar_url":"https://avatars.githubusercontent.com/u/10477073?v=4","gravatar_id":"","url":"https://api.github.com/users/lorenzwalthert","html_url":"https://github.com/lorenzwalthert","followers_url":"https://api.github.com/users/lorenzwalthert/followers","following_url":"https://api.github.com/users/lorenzwalthert/following{/other_user}","gists_url":"https://api.github.com/users/lorenzwalthert/gists{/gist_id}","starred_url":"https://api.github.com/users/lorenzwalthert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorenzwalthert/subscriptions","organizations_url":"https://api.github.com/users/lorenzwalthert/orgs","repos_url":"https://api.github.com/users/lorenzwalthert/repos","events_url":"https://api.github.com/users/lorenzwalthert/events{/privacy}","received_events_url":"https://api.github.com/users/lorenzwalthert/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:10:56Z","performed_via_github_app":null},{"id":4157903756,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1NzkwMzc1Ng==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157903756","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:10:56Z","performed_via_github_app":null},{"id":4157903759,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTc5MDM3NTk=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4157903759","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-30T17:10:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/752821585","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-752821585","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":752821585,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MjgyMTU4NQ==","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2020-12-31T02:34:39Z","updated_at":"2020-12-31T16:01:37Z","author_association":"MEMBER","body":"> mlflow_log_model(prostate_glm, \"model\"), the artifacts are saved in /tmp directory\r\n\r\nWhen logging a model, the associated artifacts (e.g. `MLmodel`, `conda.yml`) are saved in a temporary directory first, and then `log_artifacts` sends them to the artifact store.\r\n\r\n\r\n> ERROR MESSAGE: Illegal argument: dir of function: importModel: water.api.FSIOException:\r\n> FS IO Failure: accessed path : file:/tmp/tmp14wfq1jm/model.h2o/GLM_model_R_1608625817138_1 msg: File not found\r\n\r\nWhen loading a model, the associated artifacts are downloaded in a temporary directory via `download_artifact_from_uri`.\r\n\r\n```\r\n/tmp/tmp14wfq1jm/model.h2o/GLM_model_R_1608625817138_1\r\n```\r\n\r\nI think we should check what's in `/tmp/tmp14wfq1jm` (that is the path in which `download_artifact_from_uri` downloaded the artifacts).","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/752821585/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/752994288","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-752994288","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":752994288,"node_id":"MDEyOklzc3VlQ29tbWVudDc1Mjk5NDI4OA==","user":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false},"created_at":"2020-12-31T15:59:34Z","updated_at":"2020-12-31T16:09:43Z","author_association":"CONTRIBUTOR","body":"Agree with what @harupy mentioned. Also, if the model is logged with `mlflow_log_model(prostate_glm, \"model\")`, then it needs to be loaded from `/tmp/tmp14wfq1jm/model`, not `/tmp/tmp14wfq1jm`, because `model` is specified as the artifact path.\r\n\r\nAnother thing to notice is this applies to all flavors of models, not just H2O.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/752994288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false}},{"id":4159895862,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1OTg5NTg2Mg==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159895862","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-31T15:59:35Z","performed_via_github_app":null},{"id":4159895864,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTk4OTU4NjQ=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159895864","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-31T15:59:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/753001467","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-753001467","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":753001467,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzAwMTQ2Nw==","user":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"created_at":"2020-12-31T16:35:27Z","updated_at":"2020-12-31T16:45:59Z","author_association":"CONTRIBUTOR","body":"@harupy @yitao-li The problem emerges when the user registers the logged model with the MR and tries to load the model using \r\nmodel://URI. \r\ncc: @andychow-db ","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/753001467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false}},{"id":4159946057,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1OTk0NjA1Nw==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159946057","actor":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-31T16:35:27Z","performed_via_github_app":null},{"id":4159946059,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTk5NDYwNTk=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159946059","actor":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-31T16:35:27Z","performed_via_github_app":null},{"id":4159946060,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1OTk0NjA2MA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159946060","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-31T16:35:27Z","performed_via_github_app":null},{"id":4159946064,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTk5NDYwNjQ=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159946064","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-31T16:35:27Z","performed_via_github_app":null},{"id":4159959061,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE1OTk1OTA2MQ==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159959061","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-31T16:45:59Z","performed_via_github_app":null},{"id":4159959062,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNTk5NTkwNjI=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4159959062","actor":{"login":"andychow-db","id":58712524,"node_id":"MDQ6VXNlcjU4NzEyNTI0","avatar_url":"https://avatars.githubusercontent.com/u/58712524?v=4","gravatar_id":"","url":"https://api.github.com/users/andychow-db","html_url":"https://github.com/andychow-db","followers_url":"https://api.github.com/users/andychow-db/followers","following_url":"https://api.github.com/users/andychow-db/following{/other_user}","gists_url":"https://api.github.com/users/andychow-db/gists{/gist_id}","starred_url":"https://api.github.com/users/andychow-db/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andychow-db/subscriptions","organizations_url":"https://api.github.com/users/andychow-db/orgs","repos_url":"https://api.github.com/users/andychow-db/repos","events_url":"https://api.github.com/users/andychow-db/events{/privacy}","received_events_url":"https://api.github.com/users/andychow-db/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-31T16:45:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/753009235","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-753009235","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":753009235,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzAwOTIzNQ==","user":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false},"created_at":"2020-12-31T17:18:20Z","updated_at":"2021-01-02T14:58:32Z","author_association":"MEMBER","body":"```sh\r\n- tmp\r\n  - tmp14wfq1jm  # maybe this path is returned?\r\n    - model  # what `mlflow_load_model` expects `download_artifact_from_uri` to return\r\n      - mlflow.h2o\r\n        - model_binary\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/753009235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"harupy","id":17039389,"node_id":"MDQ6VXNlcjE3MDM5Mzg5","avatar_url":"https://avatars.githubusercontent.com/u/17039389?v=4","gravatar_id":"","url":"https://api.github.com/users/harupy","html_url":"https://github.com/harupy","followers_url":"https://api.github.com/users/harupy/followers","following_url":"https://api.github.com/users/harupy/following{/other_user}","gists_url":"https://api.github.com/users/harupy/gists{/gist_id}","starred_url":"https://api.github.com/users/harupy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harupy/subscriptions","organizations_url":"https://api.github.com/users/harupy/orgs","repos_url":"https://api.github.com/users/harupy/repos","events_url":"https://api.github.com/users/harupy/events{/privacy}","received_events_url":"https://api.github.com/users/harupy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/753020132","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-753020132","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":753020132,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzAyMDEzMg==","user":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false},"created_at":"2020-12-31T18:15:27Z","updated_at":"2020-12-31T18:15:27Z","author_association":"CONTRIBUTOR","body":"At the moment the R documentation of `mlflow_log_model()` does not really specify what path the function returns. Meanwhile the return value in R (a file path in string form) is not something comparable with that of `mlflow.models.Model.log()` in Python either.\r\n\r\nI think it's best to keep the existing behavior as-is.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/753020132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yitao-li","id":405346,"node_id":"MDQ6VXNlcjQwNTM0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/405346?v=4","gravatar_id":"","url":"https://api.github.com/users/yitao-li","html_url":"https://github.com/yitao-li","followers_url":"https://api.github.com/users/yitao-li/followers","following_url":"https://api.github.com/users/yitao-li/following{/other_user}","gists_url":"https://api.github.com/users/yitao-li/gists{/gist_id}","starred_url":"https://api.github.com/users/yitao-li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitao-li/subscriptions","organizations_url":"https://api.github.com/users/yitao-li/orgs","repos_url":"https://api.github.com/users/yitao-li/repos","events_url":"https://api.github.com/users/yitao-li/events{/privacy}","received_events_url":"https://api.github.com/users/yitao-li/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/762887314","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-762887314","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":762887314,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mjg4NzMxNA==","user":{"login":"lorenzwalthert","id":10477073,"node_id":"MDQ6VXNlcjEwNDc3MDcz","avatar_url":"https://avatars.githubusercontent.com/u/10477073?v=4","gravatar_id":"","url":"https://api.github.com/users/lorenzwalthert","html_url":"https://github.com/lorenzwalthert","followers_url":"https://api.github.com/users/lorenzwalthert/followers","following_url":"https://api.github.com/users/lorenzwalthert/following{/other_user}","gists_url":"https://api.github.com/users/lorenzwalthert/gists{/gist_id}","starred_url":"https://api.github.com/users/lorenzwalthert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorenzwalthert/subscriptions","organizations_url":"https://api.github.com/users/lorenzwalthert/orgs","repos_url":"https://api.github.com/users/lorenzwalthert/repos","events_url":"https://api.github.com/users/lorenzwalthert/events{/privacy}","received_events_url":"https://api.github.com/users/lorenzwalthert/received_events","type":"User","site_admin":false},"created_at":"2021-01-19T14:46:12Z","updated_at":"2021-01-21T12:17:55Z","author_association":"CONTRIBUTOR","body":"Not sure I follow completely. Just tried this in Databricks (adapted from R tests) and everything seems to work fine. Did you make sure to use `log_model(model, 'model')` to really add the model on the right place in the directory tree (and not one level above)?\r\n\r\n```r\r\nh2o::h2o.init(port = httpuv::randomPort())\r\nlibrary(h2o)\r\n\r\n\r\nidx <- withr::with_seed(3809, sample(nrow(iris)))\r\nprediction <- \"Species\"\r\npredictors <- setdiff(colnames(iris), prediction)\r\ntrain <- iris[idx[1:100], ]\r\ntest <- iris[idx[101:nrow(iris)], ]\r\nmodel <- h2o::h2o.randomForest(\r\n  x = predictors, y = prediction, training_frame = h2o::as.h2o(train)\r\n)\r\nmlflow::mlflow_start_run(experiment_id = 174)\r\nmlflow::mlflow_log_model(model, 'model')\r\n2021/01/19 14:36:09 INFO mlflow.store.artifact.cli: Logged artifact from local dir /tmp/RtmpWxzclX/model to artifact_path=model\r\nRoot URI: dbfs:/databricks/mlflow-tracking/174/4b628688f123498d94ec585ae254d367/artifacts\r\n# A tibble: 3 x 3\r\n  path                 is_dir file_size\r\n  <chr>                <lgl>      <int>\r\n1 model/MLmodel        FALSE        592\r\n2 model/conda_env.yaml FALSE         87\r\n3 model/model.h2o      TRUE          NA\r\nWarning message:\r\nIn value[[3L]](cond) :\r\n  Logging model metadata to the tracking server has failed, possibly due to older server version. The model artifacts have been logged successfully. In addition to exporting model artifacts, MLflow clients 1.7.0 and above attempt to record model metadata to the  tracking store. If logging to a mlflow server via REST, consider  upgrading the server version to MLflow 1.7.0 or above.\r\n> mlflow::mlflow_end_run()\r\n# A tibble: 1 x 12\r\n  run_uuid experiment_id status start_time          end_time            artifact_uri lifecycle_stage run_id user_id metrics\r\n  <chr>    <chr>         <chr>  <dttm>              <dttm>              <chr>        <chr>           <chr>  <lgl>   <lgl>  \r\n1 4b62868… 174           FINIS… 2021-01-19 14:35:22 2021-01-19 14:38:21 dbfs:/datab… active          4b628… NA      NA     \r\n# … with 2 more variables: params <lgl>, tags <list>\r\n\r\n# register model in UI manually\r\nmlflow::mlflow_load_model('models:/h20-test/1')\r\nModel Details:\r\n==============\r\n\r\nH2OMultinomialModel: drf\r\nModel ID:  DRF_model_R_1611066850511_1 \r\nModel Summary: \r\n  number_of_trees number_of_internal_trees model_size_in_bytes min_depth max_depth mean_depth min_leaves max_leaves mean_leaves\r\n1              50                      150               18020         1         8    3.27333          2         11     4.91333\r\n\r\n\r\nH2OMultinomialMetrics: drf\r\n** Reported on training data. **\r\n** Metrics reported on Out-Of-Bag training samples **\r\n\r\nTraining Set Metrics: \r\n=====================\r\n\r\nExtract training frame with `h2o.getFrame(\"train_sid_9016_1\")`\r\nMSE: (Extract with `h2o.mse`) 0.03480589\r\nRMSE: (Extract with `h2o.rmse`) 0.1865634\r\nLogloss: (Extract with `h2o.logloss`) 0.1107802\r\nMean Per-Class Error: 0.06302521\r\nR^2: (Extract with `h2o.r2`) 0.9515508\r\nConfusion Matrix: Extract with `h2o.confusionMatrix(<model>,train = TRUE)`)\r\n=========================================================================\r\nConfusion Matrix: Row labels: Actual class; Column labels: Predicted class\r\n           setosa versicolor virginica  Error      Rate\r\nsetosa         38          0         0 0.0000 =  0 / 38\r\nversicolor      0         26         2 0.0714 =  2 / 28\r\nvirginica       0          4        30 0.1176 =  4 / 34\r\nTotals         38         30        32 0.0600 = 6 / 100\r\n\r\nHit Ratio Table: Extract with `h2o.hit_ratio_table(<model>,train = TRUE)`\r\n=======================================================================\r\nTop-3 Hit Ratios: \r\n  k hit_ratio\r\n1 1  0.940000\r\n2 2  1.000000\r\n3 3  1.000000\r\n```\r\n\r\nShould be logged like this in the run:\r\n![image](https://user-images.githubusercontent.com/10477073/105049657-2db98480-5a6d-11eb-9e06-a2eb8f751d16.png)\r\n\r\nWhat's strange though is the message:\r\n>  Logging model metadata to the tracking server has failed, possibly due to older server version. The model artifacts have been logged successfully\r\n\r\nIsn't that contradictory? Also, I am assuming databricks is running MLflow > 1.7.0 on the tracking server... \r\n\r\nI am using mlflow 1.12.1 on the client side here.","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/762887314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lorenzwalthert","id":10477073,"node_id":"MDQ6VXNlcjEwNDc3MDcz","avatar_url":"https://avatars.githubusercontent.com/u/10477073?v=4","gravatar_id":"","url":"https://api.github.com/users/lorenzwalthert","html_url":"https://github.com/lorenzwalthert","followers_url":"https://api.github.com/users/lorenzwalthert/followers","following_url":"https://api.github.com/users/lorenzwalthert/following{/other_user}","gists_url":"https://api.github.com/users/lorenzwalthert/gists{/gist_id}","starred_url":"https://api.github.com/users/lorenzwalthert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorenzwalthert/subscriptions","organizations_url":"https://api.github.com/users/lorenzwalthert/orgs","repos_url":"https://api.github.com/users/lorenzwalthert/repos","events_url":"https://api.github.com/users/lorenzwalthert/events{/privacy}","received_events_url":"https://api.github.com/users/lorenzwalthert/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/828783756","html_url":"https://github.com/mlflow/mlflow/issues/3925#issuecomment-828783756","issue_url":"https://api.github.com/repos/mlflow/mlflow/issues/3925","id":828783756,"node_id":"MDEyOklzc3VlQ29tbWVudDgyODc4Mzc1Ng==","user":{"login":"josephd000","id":82978546,"node_id":"MDQ6VXNlcjgyOTc4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/82978546?v=4","gravatar_id":"","url":"https://api.github.com/users/josephd000","html_url":"https://github.com/josephd000","followers_url":"https://api.github.com/users/josephd000/followers","following_url":"https://api.github.com/users/josephd000/following{/other_user}","gists_url":"https://api.github.com/users/josephd000/gists{/gist_id}","starred_url":"https://api.github.com/users/josephd000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josephd000/subscriptions","organizations_url":"https://api.github.com/users/josephd000/orgs","repos_url":"https://api.github.com/users/josephd000/repos","events_url":"https://api.github.com/users/josephd000/events{/privacy}","received_events_url":"https://api.github.com/users/josephd000/received_events","type":"User","site_admin":false},"created_at":"2021-04-28T21:12:54Z","updated_at":"2021-04-28T21:12:54Z","author_association":"NONE","body":"# Reproducible error\r\n\r\nI think that the underlying issue here might be that the model is not actually logged as an artifact (while the `h2o.yaml` file, etc. is) and thus, there is nothing for @dmatrix to load. _If this in fact a separate issue, I'm happy to file it as one._\r\n\r\nOne way to reproduce this issue, borrowing @lorenzwalthert 's code, is to connect to an H2O cluster on Spark via Sparkling Water. Note, however, that the code that fails when run on Databricks is in fact able to log the model to Databricks **from a local machine with a \"databricks\" tracking URI**. All of the below makes me think it might be an H2O / Sparkling Water / Databricks bug (possibly that I haven't properly engaged more than 1 node?) rather than an mlflow bug, but not really sure.\r\n\r\nNote that @dmatrix 's \"save-and-log\" workaround above does not work for the setup below.\r\n\r\n# Config\r\n\r\nFresh Databricks Runtime 7.3ML LTS / 7.6ML, 1 driver and 1 worker, R Notebook, installed mlflow is currently 1.16.0.\r\n\r\n# Tests\r\n\r\n## This works:\r\n\r\n```\r\ninstall.packages(\"RCurl\")\r\ninstall.packages(\"h2o\", type = \"source\", repos = \"http://h2o-release.s3.amazonaws.com/h2o/rel-zermelo/5/R\")\r\n\r\ninstall.packages(\"mlflow\")\r\nmlflow::install_mlflow()\r\n\r\n##### note the line below\r\nh2o::h2o.init()\r\n\r\nidx <- withr::with_seed(3809, sample(nrow(iris)))\r\nprediction <- \"Species\"\r\npredictors <- setdiff(colnames(iris), prediction)\r\ntrain <- iris[idx[1:100], ]\r\ntest <- iris[idx[101:nrow(iris)], ]\r\nmodel <- h2o::h2o.randomForest(\r\n  x = predictors, y = prediction, training_frame = h2o::as.h2o(train)\r\n)\r\n\r\nmlflow::mlflow_create_experiment(\"/experimentdeleteme\")\r\nmlflow::mlflow_set_experiment(\"/experimentdeleteme\")\r\nmlflow::mlflow_start_run()\r\nmlflow::mlflow_log_model(model, \"modeldeleteme\")\r\nmlflow::mlflow_end_run()\r\n```\r\n\r\n### H2O cluster info\r\n\r\n```\r\nh2o::h2o.clusterInfo()\r\nR is connected to the H2O cluster: \r\n    H2O cluster uptime:         58 minutes 33 seconds \r\n    H2O cluster timezone:       Etc/UTC \r\n    H2O data parsing timezone:  UTC \r\n    H2O cluster version:        3.32.0.5 \r\n    H2O cluster version age:    1 month and 11 days  \r\n    H2O cluster name:           H2O_started_from_R_root_eas963 \r\n    H2O cluster total nodes:    1 \r\n    H2O cluster total memory:   0.72 GB \r\n    H2O cluster total cores:    3 \r\n    H2O cluster allowed cores:  3 \r\n    H2O cluster healthy:        TRUE \r\n    H2O Connection ip:          localhost \r\n    H2O Connection port:        54321 \r\n    H2O Connection proxy:       NA \r\n    H2O Internal Security:      FALSE \r\n    H2O API Extensions:         Amazon S3, XGBoost, Algos, AutoML, Core V3, TargetEncoder, Core V4 \r\n    R Version:                  R version 3.6.3 (2020-02-29) \r\n```\r\n\r\n## This fails:\r\n\r\n```\r\n# make sure you have added the Library `sparkling-water-package_2.12-3.32.0.5-1-3.0` from Maven to your cluster (https://docs.microsoft.com/en-us/azure/databricks/libraries/workspace-libraries)\r\ninstall.packages(\"RCurl\")\r\ninstall.packages(\"h2o\", type = \"source\", repos = \"http://h2o-release.s3.amazonaws.com/h2o/rel-zermelo/5/R\")\r\ninstall.packages(\"rsparkling\", type = \"source\", repos = \"http://h2o-release.s3.amazonaws.com/sparkling-water/spark-3.0/3.32.0.5-1-3.0/R\")\r\nsparklyr::spark_install(\"3.0.1\", hadoop_version = \"3.2\")\r\nSys.setenv(SPARK_HOME = \"~/spark/spark-3.0.1-bin-hadoop3.2\")\r\n\r\nlibrary(sparklyr)\r\nlibrary(rsparkling)\r\nsc <- sparklyr::spark_connect(method = \"databricks\", version = \"3.0.1\")\r\n\r\n##### note the line below\r\nh2oConf <- H2OConf()\r\nhc <- H2OContext.getOrCreate(h2oConf)\r\n\r\ninstall.packages(\"mlflow\")\r\nmlflow::install_mlflow()\r\n```\r\n\r\n### Artifacts\r\n\r\n```\r\n-- modeldeleteme/\r\n  -- model.h2o/\r\n    -- ##### MODEL MISSING!!! #####\r\n    -- h2o.yaml\r\n  -- MLmodel\r\n  -- conda_env.yaml\r\n```\r\n\r\n### H2O cluster info\r\n\r\n```\r\n##### printout from `hc <- H2OContext.getOrCreate(h2oConf)` gives a few more details than `h2o::h2o.clusterInfo()`\r\nR is connected to the H2O cluster: \r\n    H2O cluster uptime:         35 minutes 29 seconds \r\n    H2O cluster timezone:       Etc/UTC \r\n    H2O data parsing timezone:  UTC \r\n    H2O cluster version:        3.32.0.5 \r\n    H2O cluster version age:    1 month and 11 days  \r\n    H2O cluster name:           sparkling-water-root_app-20210428133035-0000 \r\n    H2O cluster total nodes:    1 \r\n    H2O cluster total memory:   2.52 GB \r\n    H2O cluster total cores:    4 \r\n    H2O cluster allowed cores:  4 \r\n    H2O cluster healthy:        TRUE \r\n    H2O Connection ip:          10.139.64.4 \r\n    H2O Connection port:        9009 \r\n    H2O Connection proxy:       NA \r\n    H2O Internal Security:      FALSE \r\n    H2O API Extensions:         XGBoost, Algos, Amazon S3, Sparkling Water REST API Extensions, AutoML, Core V3, TargetEncoder, Core V4 \r\n    R Version:                  R version 3.6.3 (2020-02-29) \r\n\r\nReference class object of class \"H2OContext\"\r\nField \"jhc\":\r\n<jobj[15]>\r\n  ai.h2o.sparkling.H2OContext\r\n  \r\nSparkling Water Context:\r\n * Sparkling Water Version: 3.32.0.5-1-3.0\r\n * H2O name: root\r\n * cluster size: 1\r\n * list of used nodes:\r\n  (executorId, host, port)\r\n  ------------------------\r\n  (0,10.139.64.5,54321)\r\n  ------------------------\r\n\r\n  Open H2O Flow in browser: Go to Spark UI > Sparkling Water tab > click Flow UI link\r\n```\r\n\r\n# Cause?\r\n\r\nI'm not quite sure where this breaks down?\r\n\r\n1. `mlflow::mlflow_log_model()` calls `model_spec <- mlflow_save_model(model, path = temp_path, model_spec = list(utc_time_created = mlflow_timestamp(), run_id = mlflow_get_active_run_id(), artifact_path = artifact_path, flavors = list()), ...)`.\r\n1. With this object, the method is `mlfow_save_model.H2OModel()`. The problem is `h2o_save_location <- h2o::h2o.saveModel(object = model, path = model_data_path, force = TRUE)`. \r\n1. `h2o::h2o.saveModel()` calls `res <- .h2o.__remoteSend(paste0(\"Models.bin/\", object@model_id), dir = path, force = force, export_cross_validation_predictions = export_cross_validation_predictions, h2oRestApiVersion = 99)`.\r\n1. `.h2o.__remoteSend()` (given that `timeout = NULL` and `autoML = FALSE`) calls `rawREST <- .h2o.doSafeREST(h2oRestApiVersion = h2oRestApiVersion, urlSuffix = page, parms = .params, method = method)`\r\n1. etc.\r\n\r\n# Local cluster with Sparkling Water can log model to remote Databricks\r\n\r\n```\r\ninstall.packages(\"RCurl\")\r\ninstall.packages(\"h2o\", type = \"source\", repos = \"http://h2o-release.s3.amazonaws.com/h2o/rel-zermelo/5/R\")\r\ninstall.packages(\"rsparkling\", type = \"source\", repos = \"http://h2o-release.s3.amazonaws.com/sparkling-water/spark-3.0/3.32.0.5-1-3.0/R\")\r\nsparklyr::spark_install(\"3.0.1\", hadoop_version = \"3.2\")\r\nSys.setenv(SPARK_HOME = \"~/spark/spark-3.0.1-bin-hadoop3.2\")\r\n\r\nlibrary(sparklyr)\r\nlibrary(rsparkling)\r\nsc <- sparklyr::spark_connect(master = \"local\", version = \"3.0.1\")\r\n\r\n##### note the line below\r\nh2oConf <- H2OConf()\r\nhc <- H2OContext.getOrCreate(h2oConf)\r\n\r\ninstall.packages(\"mlflow\")\r\nmlflow::install_mlflow()\r\n\r\nidx <- withr::with_seed(3809, sample(nrow(iris)))\r\nprediction <- \"Species\"\r\npredictors <- setdiff(colnames(iris), prediction)\r\ntrain <- iris[idx[1:100], ]\r\ntest <- iris[idx[101:nrow(iris)], ]\r\nmodel <- h2o::h2o.randomForest(\r\n  x = predictors, y = prediction, training_frame = h2o::as.h2o(train)\r\n)\r\n\r\nmlflow::mlflow_set_tracking_uri(\"databricks\")\r\n# mlflow::mlflow_create_experiment(\"/experimentdeleteme\")\r\nmlflow::mlflow_set_experiment(\"/experimentdeleteme\")\r\nmlflow::mlflow_start_run()\r\nmlflow::mlflow_log_model(model, \"modeldeleteme\")\r\nmlflow::mlflow_end_run()\r\n```\r\n\r\n### H2O cluster info\r\n\r\n```\r\nR is connected to the H2O cluster: \r\n    H2O cluster uptime:         13 seconds 613 milliseconds \r\n    H2O cluster timezone:       Etc/UTC \r\n    H2O data parsing timezone:  UTC \r\n    H2O cluster version:        3.32.0.5 \r\n    H2O cluster version age:    1 month and 12 days  \r\n    H2O cluster name:           sparkling-water-rstudio_local-1619642230317 \r\n    H2O cluster total nodes:    1 \r\n    H2O cluster total memory:   2.00 GB \r\n    H2O cluster total cores:    8 \r\n    H2O cluster allowed cores:  8 \r\n    H2O cluster healthy:        TRUE \r\n    H2O Connection ip:          localhost \r\n    H2O Connection port:        54323 \r\n    H2O Connection proxy:       NA \r\n    H2O Internal Security:      FALSE \r\n    H2O API Extensions:         XGBoost, Algos, Amazon S3, Sparkling Water REST API Extensions, AutoML, Core V3, TargetEncoder, Core V4 \r\n    R Version:                  R version 4.0.3 (2020-10-10) \r\n\r\nReference class object of class \"H2OContext\"\r\nField \"jhc\":\r\n<jobj[30]>\r\n  ai.h2o.sparkling.H2OContext\r\n  \r\nSparkling Water Context:\r\n * Sparkling Water Version: 3.32.0.5-1-3.0\r\n * H2O name: sparkling-water-rstudio_local-1619642230317\r\n * cluster size: 1\r\n * list of used nodes:\r\n  (executorId, host, port)\r\n  ------------------------\r\n  (0,172.17.0.3,54321)\r\n  ------------------------\r\n\r\n  Open H2O Flow in browser: http://localhost:54323 (CMD + click in Mac OSX)\r\n```","reactions":{"url":"https://api.github.com/repos/mlflow/mlflow/issues/comments/828783756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"josephd000","id":82978546,"node_id":"MDQ6VXNlcjgyOTc4NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/82978546?v=4","gravatar_id":"","url":"https://api.github.com/users/josephd000","html_url":"https://github.com/josephd000","followers_url":"https://api.github.com/users/josephd000/followers","following_url":"https://api.github.com/users/josephd000/following{/other_user}","gists_url":"https://api.github.com/users/josephd000/gists{/gist_id}","starred_url":"https://api.github.com/users/josephd000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josephd000/subscriptions","organizations_url":"https://api.github.com/users/josephd000/orgs","repos_url":"https://api.github.com/users/josephd000/repos","events_url":"https://api.github.com/users/josephd000/events{/privacy}","received_events_url":"https://api.github.com/users/josephd000/received_events","type":"User","site_admin":false}},{"id":4659261244,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY1OTI2MTI0NA==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4659261244","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-28T21:12:54Z","performed_via_github_app":null},{"id":4659261248,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NTkyNjEyNDg=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4659261248","actor":{"login":"dmatrix","id":1117597,"node_id":"MDQ6VXNlcjExMTc1OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1117597?v=4","gravatar_id":"","url":"https://api.github.com/users/dmatrix","html_url":"https://github.com/dmatrix","followers_url":"https://api.github.com/users/dmatrix/followers","following_url":"https://api.github.com/users/dmatrix/following{/other_user}","gists_url":"https://api.github.com/users/dmatrix/gists{/gist_id}","starred_url":"https://api.github.com/users/dmatrix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmatrix/subscriptions","organizations_url":"https://api.github.com/users/dmatrix/orgs","repos_url":"https://api.github.com/users/dmatrix/repos","events_url":"https://api.github.com/users/dmatrix/events{/privacy}","received_events_url":"https://api.github.com/users/dmatrix/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-28T21:12:54Z","performed_via_github_app":null},{"id":4659261253,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDY1OTI2MTI1Mw==","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4659261253","actor":{"login":"lorenzwalthert","id":10477073,"node_id":"MDQ6VXNlcjEwNDc3MDcz","avatar_url":"https://avatars.githubusercontent.com/u/10477073?v=4","gravatar_id":"","url":"https://api.github.com/users/lorenzwalthert","html_url":"https://github.com/lorenzwalthert","followers_url":"https://api.github.com/users/lorenzwalthert/followers","following_url":"https://api.github.com/users/lorenzwalthert/following{/other_user}","gists_url":"https://api.github.com/users/lorenzwalthert/gists{/gist_id}","starred_url":"https://api.github.com/users/lorenzwalthert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorenzwalthert/subscriptions","organizations_url":"https://api.github.com/users/lorenzwalthert/orgs","repos_url":"https://api.github.com/users/lorenzwalthert/repos","events_url":"https://api.github.com/users/lorenzwalthert/events{/privacy}","received_events_url":"https://api.github.com/users/lorenzwalthert/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-28T21:12:55Z","performed_via_github_app":null},{"id":4659261263,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ2NTkyNjEyNjM=","url":"https://api.github.com/repos/mlflow/mlflow/issues/events/4659261263","actor":{"login":"lorenzwalthert","id":10477073,"node_id":"MDQ6VXNlcjEwNDc3MDcz","avatar_url":"https://avatars.githubusercontent.com/u/10477073?v=4","gravatar_id":"","url":"https://api.github.com/users/lorenzwalthert","html_url":"https://github.com/lorenzwalthert","followers_url":"https://api.github.com/users/lorenzwalthert/followers","following_url":"https://api.github.com/users/lorenzwalthert/following{/other_user}","gists_url":"https://api.github.com/users/lorenzwalthert/gists{/gist_id}","starred_url":"https://api.github.com/users/lorenzwalthert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorenzwalthert/subscriptions","organizations_url":"https://api.github.com/users/lorenzwalthert/orgs","repos_url":"https://api.github.com/users/lorenzwalthert/repos","events_url":"https://api.github.com/users/lorenzwalthert/events{/privacy}","received_events_url":"https://api.github.com/users/lorenzwalthert/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-28T21:12:55Z","performed_via_github_app":null}]