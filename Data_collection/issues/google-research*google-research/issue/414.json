{"url":"https://api.github.com/repos/google-research/google-research/issues/414","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/414/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/414/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/414/events","html_url":"https://github.com/google-research/google-research/issues/414","id":717914132,"node_id":"MDU6SXNzdWU3MTc5MTQxMzI=","number":414,"title":"AttributeError: module 'tensorflow.keras.backend' has no attribute 'get_session'","user":{"login":"Alla-Abdella","id":19640509,"node_id":"MDQ6VXNlcjE5NjQwNTA5","avatar_url":"https://avatars.githubusercontent.com/u/19640509?v=4","gravatar_id":"","url":"https://api.github.com/users/Alla-Abdella","html_url":"https://github.com/Alla-Abdella","followers_url":"https://api.github.com/users/Alla-Abdella/followers","following_url":"https://api.github.com/users/Alla-Abdella/following{/other_user}","gists_url":"https://api.github.com/users/Alla-Abdella/gists{/gist_id}","starred_url":"https://api.github.com/users/Alla-Abdella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alla-Abdella/subscriptions","organizations_url":"https://api.github.com/users/Alla-Abdella/orgs","repos_url":"https://api.github.com/users/Alla-Abdella/repos","events_url":"https://api.github.com/users/Alla-Abdella/events{/privacy}","received_events_url":"https://api.github.com/users/Alla-Abdella/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-10-09T07:13:03Z","updated_at":"2020-12-04T02:05:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Extracting 10 samples...\r\nCached data \"valid\" updated\r\n*** Fitting TemporalFusionTransformer ***\r\nGetting batched_data\r\nUsing cached training data\r\nUsing cached validation data\r\nUsing keras standard fit\r\nTrain on 100 samples, validate on 10 samples\r\n2020-10-09 07:11:36.762729: W tensorflow/c/c_api.cc:326] Operation '{name:'TemporalFusionTransformer/lstm/while' id:3156 op device:{} def:{{{node TemporalFusionTransformer/lstm/while}} = While[T=[DT_INT32, DT_INT32, DT_INT32, DT_VARIANT, DT_FLOAT, ..., DT_VARIANT, DT_VARIANT, DT_VARIANT, DT_VARIANT, DT_VARIANT], _lower_using_switch_merge=true, _num_original_outputs=45, _read_only_resource_inputs=[8, 9, 10], body=TemporalFusionTransformer_lstm_while_body_3416[], cond=TemporalFusionTransformer_lstm_while_cond_3415[], output_shapes=[[], [], [], [], [?,5], ..., [], [], [], [], []], parallel_iterations=32](TemporalFusionTransformer/lstm/while/loop_counter, TemporalFusionTransformer/lstm/while/maximum_iterations, TemporalFusionTransformer/lstm/time, TemporalFusionTransformer/lstm/TensorArrayV2_1, TemporalFusionTransformer/layer_normalization_4/add, TemporalFusionTransformer/layer_normalization_5/add, TemporalFusionTransformer/lstm/strided_slice, TemporalFusionTransformer/lstm/TensorArrayUnstack/TensorListFromTensor, TemporalFusionTransformer/lstm/lstm_cell/kernel, TemporalFusionTransformer/lstm/lstm_cell/recurrent_kernel, TemporalFusionTransformer/lstm/lstm_cell/bias, TemporalFusionTransformer/lstm/while/EmptyTensorList, TemporalFusionTransformer/lstm/while/EmptyTensorList_1, TemporalFusionTransformer/lstm/while/EmptyTensorList_2, TemporalFusionTransformer/lstm/while/EmptyTensorList_3, TemporalFusionTransformer/lstm/while/EmptyTensorList_4, TemporalFusionTransformer/lstm/while/EmptyTensorList_5, TemporalFusionTransformer/lstm/while/EmptyTensorList_6, TemporalFusionTransformer/lstm/while/EmptyTensorList_7, TemporalFusionTransformer/lstm/while/EmptyTensorList_8, TemporalFusionTransformer/lstm/while/EmptyTensorList_9, TemporalFusionTransformer/lstm/while/EmptyTensorList_10, TemporalFusionTransformer/lstm/while/EmptyTensorList_11, TemporalFusionTransformer/lstm/while/EmptyTensorList_12, TemporalFusionTransformer/lstm/while/EmptyTensorList_13, TemporalFusionTransformer/lstm/while/EmptyTensorList_14, TemporalFusionTransformer/lstm/while/EmptyTensorList_15, TemporalFusionTransformer/lstm/while/EmptyTensorList_16, TemporalFusionTransformer/lstm/while/EmptyTensorList_17, TemporalFusionTransformer/lstm/while/EmptyTensorList_18, TemporalFusionTransformer/lstm/while/EmptyTensorList_19, TemporalFusionTransformer/lstm/while/EmptyTensorList_20, TemporalFusionTransformer/lstm/while/EmptyTensorList_21, TemporalFusionTransformer/lstm/while/EmptyTensorList_22, TemporalFusionTransformer/lstm/while/EmptyTensorList_23, TemporalFusionTransformer/lstm/while/EmptyTensorList_24, TemporalFusionTransformer/lstm/while/EmptyTensorList_25, TemporalFusionTransformer/lstm/while/EmptyTensorList_26, TemporalFusionTransformer/lstm/while/EmptyTensorList_27, TemporalFusionTransformer/lstm/while/EmptyTensorList_28, TemporalFusionTransformer/lstm/while/EmptyTensorList_29, TemporalFusionTransformer/lstm/while/EmptyTensorList_30, TemporalFusionTransformer/lstm/while/EmptyTensorList_31, TemporalFusionTransformer/lstm/while/EmptyTensorList_32, TemporalFusionTransformer/lstm/while/EmptyTensorList_33)}}' was changed by setting attribute after it was run by a session. This mutation will have no effect, and will trigger an error in the future. Either don't modify nodes after running them or create a new session.\r\n100/100 [==============================] - ETA: 0s - loss: 1.9711WARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/training_v1.py:2048: Model.state_updates (from tensorflow.python.keras.engine.training) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nThis property should not be used in TensorFlow 2.0, as updates are applied automatically.\r\n100/100 [==============================] - 3s 33ms/sample - loss: 1.9711 - val_loss: 1.5490\r\nCannot load from data/saved_models/electricity/fixed/tmp, skipping ...\r\nUsing cached validation data\r\nOptimal model found, updating\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/content/google-research/tft/script_train_fixed_params.py\", line 238, in <module>\r\n    use_testing_mode=True)  # Change to false to use original default params\r\n  File \"/content/google-research/tft/script_train_fixed_params.py\", line 136, in main\r\n    opt_manager.update_score(params, val_loss, model)\r\n  File \"/content/google-research/tft/libs/hyperparam_opt.py\", line 227, in update_score\r\n    model.save(self.hyperparam_folder)\r\n  File \"/content/google-research/tft/libs/tft_model.py\", line 1307, in save\r\n    tf.keras.backend.get_session(),\r\nAttributeError: module 'tensorflow.keras.backend' has no attribute 'get_session'","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/414/timeline","performed_via_github_app":null,"state_reason":null}