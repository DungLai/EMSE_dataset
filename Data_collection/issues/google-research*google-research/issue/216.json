{"url":"https://api.github.com/repos/google-research/google-research/issues/216","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/216/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/216/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/216/events","html_url":"https://github.com/google-research/google-research/issues/216","id":579029680,"node_id":"MDU6SXNzdWU1NzkwMjk2ODA=","number":216,"title":"Incorrect shebang lines","user":{"login":"nelfin","id":205805,"node_id":"MDQ6VXNlcjIwNTgwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/205805?v=4","gravatar_id":"","url":"https://api.github.com/users/nelfin","html_url":"https://github.com/nelfin","followers_url":"https://api.github.com/users/nelfin/followers","following_url":"https://api.github.com/users/nelfin/following{/other_user}","gists_url":"https://api.github.com/users/nelfin/gists{/gist_id}","starred_url":"https://api.github.com/users/nelfin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nelfin/subscriptions","organizations_url":"https://api.github.com/users/nelfin/orgs","repos_url":"https://api.github.com/users/nelfin/repos","events_url":"https://api.github.com/users/nelfin/events{/privacy}","received_events_url":"https://api.github.com/users/nelfin/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-03-11T06:03:23Z","updated_at":"2020-03-11T23:33:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Throughout the repo there are a variety of executable shell scripts with shebang/interpreter lines (`#!`) that are not at the start of the relevant files (usually underneath a copyright notice). These are not parsed correctly and will be ignored as the shebang is only valid as the first two bytes of the file, see [`linux/fs/binfmt_script.c:load_script`](https://github.com/torvalds/linux/blob/f35111a946548e3b34a55abbad3e9bacce6cb10f/fs/binfmt_script.c#L42) as an example implementation.\r\n\r\nIt is likely that this was not noticed due to the majority of shebang lines specifying `/bin/bash` as the interpreter: if executing the scripts under bash this would behave mostly the same. However, a few scripts specify `-e` and `-u` which will get swallowed.\r\n\r\nFiles with shebang lines in the wrong position can be found using the following invocation:\r\n```\r\nfind . -type f -executable -exec sh -c 'sed -n -e \\'2,${/#!/q1}\\' {} || echo {}' \\; | sort\r\n```\r\nwhen executed from the repository root. As of 5e864806, this lists:\r\n```\r\n./abps/run.sh\r\n./action_gap_rl/run.sh\r\n./algae_dice/run.sh\r\n./attribution/run.sh\r\n./automl_zero/run_demo.sh\r\n./automl_zero/run_integration_test_linear.sh\r\n./automl_zero/run_integration_test_nonlinear.sh\r\n./automl_zero/run_integration_tests.sh\r\n./axial/run.sh\r\n./bam/run.sh\r\n./behavior_regularized_offline_rl/brac/run_bcq.sh\r\n./behavior_regularized_offline_rl/brac/run_bc.sh\r\n./behavior_regularized_offline_rl/brac/run_collect_data.sh\r\n./behavior_regularized_offline_rl/brac/run_dual.sh\r\n./behavior_regularized_offline_rl/brac/run_primal.sh\r\n./behavior_regularized_offline_rl/brac/run_train_online.sh\r\n./behavior_regularized_offline_rl/run.sh\r\n./bitempered_loss/run.sh\r\n./cfq/run_experiment.sh\r\n./cfq/run.sh\r\n./cluster_gcn/run_ppi.sh\r\n./cluster_gcn/run_reddit.sh\r\n./cnn_quantization/run.sh\r\n./cold_posterior_bnn/run_resnet_experiment.sh\r\n./cold_posterior_bnn/run.sh\r\n./dac/run_evaluation_worker.sh\r\n./dac/run_training_worker.sh\r\n./dataset_analysis/run.sh\r\n./dble/run.sh\r\n./dense_representations_for_entity_retrieval/parse_wikinews.sh\r\n./dense_representations_for_entity_retrieval/run.sh\r\n./depth_from_video_in_the_wild/run.sh\r\n./dql_grasping/run.sh\r\n./dreg_estimators/run.sh\r\n./dual_pixels/run.sh\r\n./dvrl/run.sh\r\n./edward2_autoreparam/run.sh\r\n./eeg_modelling/viewer.sh\r\n./eim/run.sh\r\n./evanet/run.sh\r\n./experience_replay/run.sh\r\n./explaining_risk_increase/run.sh\r\n./extrapolation/run.sh\r\n./generalized_rates/run.sh\r\n./genomics_ood/run.sh\r\n./graph_compression/run.sh\r\n./graph_embedding/watch_your_step/run.sh\r\n./group_agnostic_fairness/run.sh\r\n./hmc_swindles/run.sh\r\n./hmc_swindles/scripts/fetch_datasets.sh\r\n./hyperbolic_discount/run.sh\r\n./igt_optimizer/run.sh\r\n./interpretability_benchmark/run.sh\r\n./large_margin/run.sh\r\n./learnreg/run.sh\r\n./meta_learning_without_memorization/pose_code/run.sh\r\n./meta_reward_learning/semantic_parsing/run.sh\r\n./meta_reward_learning/textworld/run.sh\r\n./moew/run.sh\r\n./moment_advice/run.sh\r\n./m_theory/run.sh\r\n./neutra/run.sh\r\n./nigt_optimizer/run.sh\r\n./nopad_inception_v3_fcn/run.sh\r\n./norml/run.sh\r\n./opt_list/run.sh\r\n./playrooms/rooms/playroom/textures/download.sh\r\n./poly_kernel_sketch/run.sh\r\n./probabilistic_vqvae/run.sh\r\n./pruning_identified_exemplars/run.sh\r\n./psycholab/run.sh\r\n./recursive_optimizer/run.sh\r\n./rl4circopt/run.sh\r\n./rllim/run.sh\r\n./robust_loss/run.sh\r\n./rouge/run.sh\r\n./sm3/run.sh\r\n./soft_sort/run.sh\r\n./solver1d/run.sh\r\n./stacked_capsule_autoencoders/eval_mnist_coupled.sh\r\n./stacked_capsule_autoencoders/eval_mnist.sh\r\n./stacked_capsule_autoencoders/run_constellation.sh\r\n./stacked_capsule_autoencoders/run_mnist.sh\r\n./stacked_capsule_autoencoders/run.sh\r\n./stacked_capsule_autoencoders/setup_virtualenv.sh\r\n./state_of_sparsity/run.sh\r\n./storm_optimizer/run.sh\r\n./sufficient_input_subsets/run.sh\r\n./tabnet/run.sh\r\n./tcc/dataset_preparation/download_pouring_data.sh\r\n./tcc/run.sh\r\n./tf_trees/run.sh\r\n./tft/run.sh\r\n./towards_gan_benchmarks/run.sh\r\n./truss_decomposition/compile.sh\r\n./truss_decomposition/run.sh\r\n./uncertainties/scripts/train_local.sh\r\n./uq_benchmark_2019/run.sh\r\n./video_structure/run.sh\r\n./wiki_split_bleu_eval/run.sh\r\n``` ","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/216/timeline","performed_via_github_app":null,"state_reason":null}