{"url":"https://api.github.com/repos/google-research/google-research/issues/997","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/997/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/997/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/997/events","html_url":"https://github.com/google-research/google-research/issues/997","id":1132029062,"node_id":"I_kwDOCQmIhc5DeWSG","number":997,"title":"[VATT] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.","user":{"login":"AlyssaYoung","id":22798240,"node_id":"MDQ6VXNlcjIyNzk4MjQw","avatar_url":"https://avatars.githubusercontent.com/u/22798240?v=4","gravatar_id":"","url":"https://api.github.com/users/AlyssaYoung","html_url":"https://github.com/AlyssaYoung","followers_url":"https://api.github.com/users/AlyssaYoung/followers","following_url":"https://api.github.com/users/AlyssaYoung/following{/other_user}","gists_url":"https://api.github.com/users/AlyssaYoung/gists{/gist_id}","starred_url":"https://api.github.com/users/AlyssaYoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlyssaYoung/subscriptions","organizations_url":"https://api.github.com/users/AlyssaYoung/orgs","repos_url":"https://api.github.com/users/AlyssaYoung/repos","events_url":"https://api.github.com/users/AlyssaYoung/events{/privacy}","received_events_url":"https://api.github.com/users/AlyssaYoung/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-02-11T08:07:11Z","updated_at":"2022-10-21T10:30:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, @hassanhub. I encountered this problem and  failed to solve it after searching for several solutions to similar(just look like similar) issues.\r\n\r\nAs you mentioned in #962, I modified the `objectives.py` for conducting a multi-gpu pre-training experiment and encountered this problem. Then I tried to inplement a single-gpu version and also encountered this problem.\r\n\r\nThe error information is as:\r\n```\r\n2022-02-11 15:07:20.266179: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.266326: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.266722: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.268130: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.268490: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 97, in <module>\r\n    app.run(main)\r\n  File \"anaconda3/envs/vatt/lib/python3.9/site-packages/absl/app.py\", line 303, in run\r\n    _run_main(main, args)\r\n  File \"anaconda3/envs/vatt/lib/python3.9/site-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"main.py\", line 93, in main\r\n    return executor.run(mode=params.mode)\r\n  File \"experiments/base.py\", line 439, in run\r\n    self.train()\r\n  File \"experiments/base.py\", line 280, in train\r\n    metrics = train_step(data_iterator, num_iterations)\r\n  File \"anaconda3/envs/vatt/lib/python3.9/site-packages/tensorflow/python/util/traceback_utils.py\", line 153, in error_handler\r\n    raise e.with_traceback(filtered_tb) from None\r\n  File \"anaconda3/envs/vatt/lib/python3.9/site-packages/tensorflow/python/eager/execute.py\", line 58, in quick_execute\r\n    tensors = pywrap_tfe.TFE_Py_Execute(ctx._handle, device_name, op_name,\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: 2 root error(s) found.\r\n  (0) INVALID_ARGUMENT:  slice index 0 of dimension 0 out of bounds.\r\n         [[{{node strided_slice_3}}]]\r\n         [[while/body/_1/while/IteratorGetNext]]\r\n         [[while/body/_1/while/model/tx_mlp_fac/backbone_stack/audio_module/wat_base/RandomShuffle/_72]]\r\n  (1) INVALID_ARGUMENT:  slice index 0 of dimension 0 out of bounds.\r\n         [[{{node strided_slice_3}}]]\r\n         [[while/body/_1/while/IteratorGetNext]]\r\n0 successful operations.\r\n0 derived errors ignored. [Op:__inference_train_step_97988]\r\n\r\nFunction call stack:\r\ntrain_step -> train_step\r\n\r\n2022-02-11 15:07:20.269632: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.269706: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.271021: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.271261: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.271735: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.274001: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.274614: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.275279: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.275625: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds.\r\n2022-02-11 15:07:20.276116: W tensorflow/core/framework/op_kernel.cc:1745] OP_REQUIRES failed at strided_slice_op.cc:108 : INVALID_ARGUMENT: slice index 0 of dimension 0 out of bounds\r\n\r\nI mainly modified the `base.py` and `objectives.py`. Since I'm not familiar with Tensorflow framework, the code base_and_objectives.tar.gz may exists a lot of  ridiculous problems. Do you have some idea about this problem?\r\n\r\nThanks.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/997/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/997/timeline","performed_via_github_app":null,"state_reason":null}