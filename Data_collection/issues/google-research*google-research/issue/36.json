{"url":"https://api.github.com/repos/google-research/google-research/issues/36","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/36/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/36/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/36/events","html_url":"https://github.com/google-research/google-research/issues/36","id":470129626,"node_id":"MDU6SXNzdWU0NzAxMjk2MjY=","number":36,"title":"problems when running bam/run_classifier.py ","user":{"login":"SanPianWang","id":52482863,"node_id":"MDQ6VXNlcjUyNDgyODYz","avatar_url":"https://avatars.githubusercontent.com/u/52482863?v=4","gravatar_id":"","url":"https://api.github.com/users/SanPianWang","html_url":"https://github.com/SanPianWang","followers_url":"https://api.github.com/users/SanPianWang/followers","following_url":"https://api.github.com/users/SanPianWang/following{/other_user}","gists_url":"https://api.github.com/users/SanPianWang/gists{/gist_id}","starred_url":"https://api.github.com/users/SanPianWang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SanPianWang/subscriptions","organizations_url":"https://api.github.com/users/SanPianWang/orgs","repos_url":"https://api.github.com/users/SanPianWang/repos","events_url":"https://api.github.com/users/SanPianWang/events{/privacy}","received_events_url":"https://api.github.com/users/SanPianWang/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-07-19T04:18:11Z","updated_at":"2020-10-22T16:10:11Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi there, a problem occured when running the bam/run_classifier.py.\r\n\r\nTensorflow seems to lock the `events.out.tfevents` file until the whole program end,  when execute the command `utils.rmkdir(config.checkpoints_dir)` at run_classfier.py line 271, `tf.gfile.DeleteRecursively` appears to can't be done and raise the error given below\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"D:/bam/run_classifier.py\", line 281, in <module>\r\n    tf.app.run()\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"D:/bam/run_classifier.py\", line 276, in main\r\n    utils.rmkdir(config.checkpoints_dir)\r\n  File \"D:\\bam\\helpers\\utils.py\", line 71, in rmkdir\r\n    rmrf(path)\r\n  File \"D:\\bam\\helpers\\utils.py\", line 60, in rmrf\r\n    tf.gfile.DeleteRecursively(path)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py\", line 563, in delete_recursively\r\n    delete_recursively_v2(dirname)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py\", line 577, in delete_recursively_v2\r\n    pywrap_tensorflow.DeleteRecursively(compat.as_bytes(path), status)\r\n  File \"C:\\Python36\\lib\\site-packages\\tensorflow\\python\\framework\\errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Failed to remove a directory: bam_dir\\models\\debug-model\\checkpoints; Directory not empty\r\n\r\n```\r\nThe enviroment currently use : tensorflow-gpu 1.13.1 windows10.\r\nHowever, when run this code on centos, the problem doesn't exist.\r\nReally hope to give me some advice\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/36/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/36/timeline","performed_via_github_app":null,"state_reason":null}