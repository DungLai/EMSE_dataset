{"url":"https://api.github.com/repos/google-research/google-research/issues/55","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/55/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/55/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/55/events","html_url":"https://github.com/google-research/google-research/issues/55","id":492974623,"node_id":"MDU6SXNzdWU0OTI5NzQ2MjM=","number":55,"title":"TCC gives different embeddings when --frames_per_batch are diff","user":{"login":"yuanzhedong","id":5069709,"node_id":"MDQ6VXNlcjUwNjk3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5069709?v=4","gravatar_id":"","url":"https://api.github.com/users/yuanzhedong","html_url":"https://github.com/yuanzhedong","followers_url":"https://api.github.com/users/yuanzhedong/followers","following_url":"https://api.github.com/users/yuanzhedong/following{/other_user}","gists_url":"https://api.github.com/users/yuanzhedong/gists{/gist_id}","starred_url":"https://api.github.com/users/yuanzhedong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuanzhedong/subscriptions","organizations_url":"https://api.github.com/users/yuanzhedong/orgs","repos_url":"https://api.github.com/users/yuanzhedong/repos","events_url":"https://api.github.com/users/yuanzhedong/events{/privacy}","received_events_url":"https://api.github.com/users/yuanzhedong/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-09-12T18:58:48Z","updated_at":"2019-09-13T02:27:57Z","closed_at":"2019-09-13T02:27:57Z","author_association":"NONE","active_lock_reason":null,"body":"Hi, I get different embeddings when I run `extracting_embeddings.py` with the same input and setups except `--frames_per_batch`. For example:\r\n\r\n--frames_per_batch == 1:\r\n\r\n```\r\n<tf.Tensor: id=10110, shape=(128,), dtype=float32, numpy=\r\narray([ 0.7134198 ,  0.73715377, -0.40302375, -0.8916309 ,  0.46344516,\r\n        1.0306991 , -0.616913  , -0.3954195 , -1.4110051 ,  0.05280016,\r\n        0.02743702, -0.47917336, -0.7063019 ,  0.00664697, -0.16832595,\r\n       -0.38978115,  0.28905347, -0.71937335,  0.39218065, -0.2223233 ,\r\n        0.24361739, -0.08869804, -0.9321748 , -0.8480654 ,  0.45671615,\r\n       -0.90358734, -1.3239552 , -0.18341677,  0.22246726, -0.84119105,\r\n        0.41529498,  0.2421515 , -0.12988764,  1.2223002 , -1.2660636 ,\r\n        0.31256717,  1.018894  ,  0.6738411 ,  0.18867303, -0.17254871,\r\n       -1.4501228 ,  1.0448513 , -1.07593   , -0.9447051 , -0.38788766,\r\n        0.20399381, -0.46668968, -0.00173404,  0.36895347,  0.49572152,\r\n        0.11630958, -0.4594518 ,  0.11987424,  1.1069762 , -0.4460541 ,\r\n       -0.5169652 ,  0.3923389 , -0.2448386 ,  0.9658608 ,  0.23109348,\r\n        0.16036353, -0.82762504, -0.20896168, -0.5168912 ,  0.07127902,\r\n        0.25286838,  0.02297238, -1.3294024 ,  0.39561197,  0.5771644 ,\r\n        1.5672271 ,  0.6967077 , -0.5723567 ,  0.3235898 ,  0.7618949 ,\r\n        0.91371095, -0.26501146,  0.10041602,  0.3094164 , -0.27465546,\r\n       -0.083619  , -0.49142212, -0.49883616,  0.08733553, -0.02642126,\r\n       -0.46290073,  0.58624184,  0.8576831 ,  0.23795792,  0.26929522,\r\n        0.40708646,  0.96988857, -1.0064505 ,  0.8797252 ,  0.6761626 ,\r\n        0.970005  , -0.05762405, -0.51743686,  1.468217  , -1.2853948 ,\r\n        0.7068154 ,  0.18635778, -0.16756667,  0.25616115, -1.3703632 ,\r\n       -0.09829516,  0.38073325, -0.5046847 ,  0.30129814, -1.6381143 ,\r\n       -0.41361213, -0.37367654, -0.00442669,  0.24185468, -0.23331967,\r\n        0.46492097, -0.874537  , -0.11011802, -0.29310864, -0.6257624 ,\r\n       -0.13382947, -1.569699  , -0.60893744, -0.9276579 , -0.27602094,\r\n       -0.10803759, -0.69294   ,  0.72386044], dtype=float32)>\r\n```\r\n\r\n--frames_per_batch == 10, and first embedding I get is:\r\n\r\n```\r\n(Pdb) p emb_feats[0]\r\n<tf.Tensor: id=10111, shape=(128,), dtype=float32, numpy=\r\narray([ 0.69585   ,  0.7938789 , -0.40682542, -0.9104449 ,  0.44788656,\r\n        1.0696075 , -0.6545431 , -0.39065826, -1.4388212 ,  0.07879334,\r\n        0.07056048, -0.4912063 , -0.6906045 ,  0.05483497, -0.1918716 ,\r\n       -0.4480733 ,  0.2745942 , -0.69838053,  0.33875132, -0.12655792,\r\n        0.20775412, -0.07518089, -0.9712121 , -0.8582906 ,  0.4940186 ,\r\n       -0.9054945 , -1.3323177 , -0.1797872 ,  0.21466169, -0.842904  ,\r\n        0.4238041 ,  0.18746372, -0.16505198,  1.2667109 , -1.3068607 ,\r\n        0.34267744,  1.0190938 ,  0.6861747 ,  0.10797802, -0.1484639 ,\r\n       -1.4422283 ,  1.0217737 , -1.0802454 , -1.0336714 , -0.3141645 ,\r\n        0.20748997, -0.5034793 , -0.01016946,  0.38425395,  0.4835653 ,\r\n        0.17350678, -0.48503914,  0.09994452,  1.171491  , -0.44424957,\r\n       -0.5473531 ,  0.31822965, -0.22695364,  0.9586529 ,  0.23552223,\r\n        0.19058312, -0.87618846, -0.2797962 , -0.4805327 ,  0.06645918,\r\n        0.21550886, -0.0261419 , -1.3357202 ,  0.36320177,  0.5580914 ,\r\n        1.5055286 ,  0.6597656 , -0.587545  ,  0.3728123 ,  0.78129125,\r\n        0.9374202 , -0.26444304,  0.07730328,  0.28997815, -0.29767683,\r\n       -0.05417863, -0.5795138 , -0.52169895,  0.17690559, -0.04242799,\r\n       -0.5164021 ,  0.563585  ,  0.86161417,  0.2007392 ,  0.1909954 ,\r\n        0.46636117,  1.003835  , -0.98218834,  0.8831477 ,  0.6481319 ,\r\n        0.9996616 , -0.04697989, -0.49288058,  1.4274698 , -1.319891  ,\r\n        0.6997739 ,  0.17412183, -0.15896532,  0.23632345, -1.3237288 ,\r\n       -0.10929373,  0.36972514, -0.5411339 ,  0.30892903, -1.6210634 ,\r\n       -0.3404241 , -0.35616207,  0.01820717,  0.22067611, -0.23308174,\r\n        0.42857918, -0.8491688 , -0.0896553 , -0.35461238, -0.635367  ,\r\n       -0.16244371, -1.6196773 , -0.5958075 , -0.9506139 , -0.3112893 ,\r\n       -0.12266631, -0.6807967 ,  0.72940886], dtype=float32)>\r\n```\r\n\r\nI thought the embeddings should be independent with `--frames_per_batch` param and should be able to get consistent results, is there something I'm missing?","closed_by":{"login":"yuanzhedong","id":5069709,"node_id":"MDQ6VXNlcjUwNjk3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5069709?v=4","gravatar_id":"","url":"https://api.github.com/users/yuanzhedong","html_url":"https://github.com/yuanzhedong","followers_url":"https://api.github.com/users/yuanzhedong/followers","following_url":"https://api.github.com/users/yuanzhedong/following{/other_user}","gists_url":"https://api.github.com/users/yuanzhedong/gists{/gist_id}","starred_url":"https://api.github.com/users/yuanzhedong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuanzhedong/subscriptions","organizations_url":"https://api.github.com/users/yuanzhedong/orgs","repos_url":"https://api.github.com/users/yuanzhedong/repos","events_url":"https://api.github.com/users/yuanzhedong/events{/privacy}","received_events_url":"https://api.github.com/users/yuanzhedong/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/55/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/55/timeline","performed_via_github_app":null,"state_reason":"completed"}