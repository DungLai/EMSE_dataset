{"url":"https://api.github.com/repos/google-research/google-research/issues/138","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/138/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/138/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/138/events","html_url":"https://github.com/google-research/google-research/issues/138","id":524000415,"node_id":"MDU6SXNzdWU1MjQwMDA0MTU=","number":138,"title":"do predict SQUAD : 'NoneType' object has no attribute 'EncodeAsPieces'","user":{"login":"nhocqn","id":26921561,"node_id":"MDQ6VXNlcjI2OTIxNTYx","avatar_url":"https://avatars.githubusercontent.com/u/26921561?v=4","gravatar_id":"","url":"https://api.github.com/users/nhocqn","html_url":"https://github.com/nhocqn","followers_url":"https://api.github.com/users/nhocqn/followers","following_url":"https://api.github.com/users/nhocqn/following{/other_user}","gists_url":"https://api.github.com/users/nhocqn/gists{/gist_id}","starred_url":"https://api.github.com/users/nhocqn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nhocqn/subscriptions","organizations_url":"https://api.github.com/users/nhocqn/orgs","repos_url":"https://api.github.com/users/nhocqn/repos","events_url":"https://api.github.com/users/nhocqn/events{/privacy}","received_events_url":"https://api.github.com/users/nhocqn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-11-17T15:20:35Z","updated_at":"2019-11-19T18:17:10Z","closed_at":"2019-11-19T18:17:10Z","author_association":"NONE","active_lock_reason":null,"body":"When inference. I got this error:\r\n\r\n> WARNING:tensorflow:From /content/google-research/albert/lamb_optimizer.py:34: The name tf.train.Optimizer is deprecated. Please use tf.compat.v1.train.Optimizer instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:1333: The name tf.app.run is deprecated. Please use tf.compat.v1.app.run instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:1165: The name tf.logging.set_verbosity is deprecated. Please use tf.compat.v1.logging.set_verbosity instead.\r\n> \r\n> W1117 16:29:12.304847 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:1165: The name tf.logging.set_verbosity is deprecated. Please use tf.compat.v1.logging.set_verbosity instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:1165: The name tf.logging.INFO is deprecated. Please use tf.compat.v1.logging.INFO instead.\r\n> \r\n> W1117 16:29:12.305077 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:1165: The name tf.logging.INFO is deprecated. Please use tf.compat.v1.logging.INFO instead.\r\n> \r\n> WARNING:tensorflow:From /content/google-research/albert/modeling.py:116: The name tf.gfile.GFile is deprecated. Please use tf.io.gfile.GFile instead.\r\n> \r\n> W1117 16:29:12.305286 140072459204480 module_wrapper.py:139] From /content/google-research/albert/modeling.py:116: The name tf.gfile.GFile is deprecated. Please use tf.io.gfile.GFile instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:1171: The name tf.gfile.MakeDirs is deprecated. Please use tf.io.gfile.makedirs instead.\r\n> \r\n> W1117 16:29:12.306269 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:1171: The name tf.gfile.MakeDirs is deprecated. Please use tf.io.gfile.makedirs instead.\r\n> \r\n> WARNING:tensorflow:Estimator's model_fn (<function model_fn_builder.<locals>.model_fn at 0x7f64ecc90488>) includes params argument, but params are not passed to Estimator.\r\n> W1117 16:29:14.673645 140072459204480 estimator.py:1994] Estimator's model_fn (<function model_fn_builder.<locals>.model_fn at 0x7f64ecc90488>) includes params argument, but params are not passed to Estimator.\r\n> INFO:tensorflow:Using config: {'_model_dir': 'gs://bilacac/albert/squad/no_shuffled_zalo_train_with_answers100000_raw.json_32bsz_3', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': 1000, '_save_checkpoints_secs': None, '_session_config': allow_soft_placement: true\r\n> cluster_def {\r\n>   job {\r\n>     name: \"worker\"\r\n>     tasks {\r\n>       key: 0\r\n>       value: \"10.34.45.178:8470\"\r\n>     }\r\n>   }\r\n> }\r\n> isolate_session_state: true\r\n> , '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': None, '_train_distribute': None, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_experimental_max_worker_delay_secs': None, '_session_creation_timeout_secs': 7200, '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f64ebb89d30>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': 'grpc://10.34.45.178:8470', '_evaluation_master': 'grpc://10.34.45.178:8470', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_tpu_config': TPUConfig(iterations_per_loop=1000, num_shards=8, num_cores_per_replica=None, per_host_input_for_training=3, tpu_job_name=None, initial_infeed_sleep_secs=None, input_partition_dims=None, eval_training_input_configuration=2, experimental_host_call_every_n_steps=1), '_cluster': <tensorflow.python.distribute.cluster_resolver.tpu_cluster_resolver.TPUClusterResolver object at 0x7f64ebb89390>}\r\n> I1117 16:29:14.674898 140072459204480 estimator.py:212] Using config: {'_model_dir': 'gs://bilacac/albert/squad/no_shuffled_zalo_train_with_answers100000_raw.json_32bsz_3', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': 1000, '_save_checkpoints_secs': None, '_session_config': allow_soft_placement: true\r\n> cluster_def {\r\n>   job {\r\n>     name: \"worker\"\r\n>     tasks {\r\n>       key: 0\r\n>       value: \"10.34.45.178:8470\"\r\n>     }\r\n>   }\r\n> }\r\n> isolate_session_state: true\r\n> , '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': None, '_train_distribute': None, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_experimental_max_worker_delay_secs': None, '_session_creation_timeout_secs': 7200, '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f64ebb89d30>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': 'grpc://10.34.45.178:8470', '_evaluation_master': 'grpc://10.34.45.178:8470', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_tpu_config': TPUConfig(iterations_per_loop=1000, num_shards=8, num_cores_per_replica=None, per_host_input_for_training=3, tpu_job_name=None, initial_infeed_sleep_secs=None, input_partition_dims=None, eval_training_input_configuration=2, experimental_host_call_every_n_steps=1), '_cluster': <tensorflow.python.distribute.cluster_resolver.tpu_cluster_resolver.TPUClusterResolver object at 0x7f64ebb89390>}\r\n> INFO:tensorflow:_TPUContext: eval_on_tpu True\r\n> I1117 16:29:14.675387 140072459204480 tpu_context.py:220] _TPUContext: eval_on_tpu True\r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:264: The name tf.gfile.Open is deprecated. Please use tf.io.gfile.GFile instead.\r\n> \r\n> W1117 16:29:14.676191 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:264: The name tf.gfile.Open is deprecated. Please use tf.io.gfile.GFile instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:1262: The name tf.gfile.Exists is deprecated. Please use tf.io.gfile.exists instead.\r\n> \r\n> W1117 16:29:14.706956 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:1262: The name tf.gfile.Exists is deprecated. Please use tf.io.gfile.exists instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:1103: The name tf.python_io.TFRecordWriter is deprecated. Please use tf.io.TFRecordWriter instead.\r\n> \r\n> W1117 16:29:14.844320 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:1103: The name tf.python_io.TFRecordWriter is deprecated. Please use tf.io.TFRecordWriter instead.\r\n> \r\n> WARNING:tensorflow:From google-research/albert/run_squad_sp.py:355: The name tf.logging.info is deprecated. Please use tf.compat.v1.logging.info instead.\r\n> \r\n> W1117 16:29:14.846428 140072459204480 module_wrapper.py:139] From google-research/albert/run_squad_sp.py:355: The name tf.logging.info is deprecated. Please use tf.compat.v1.logging.info instead.\r\n> \r\n> INFO:tensorflow:Converting 0/2678 pos 0 neg 0\r\n> I1117 16:29:14.846674 140072459204480 run_squad_sp.py:356] Converting 0/2678 pos 0 neg 0\r\n> Traceback (most recent call last):\r\n>   File \"google-research/albert/run_squad_sp.py\", line 1333, in <module>\r\n>     tf.app.run()\r\n>   File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n>     _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n>   File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n>     _run_main(main, args)\r\n>   File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n>     sys.exit(main(argv))\r\n>   File \"google-research/albert/run_squad_sp.py\", line 1284, in main\r\n>     output_fn=append_feature)\r\n>   File \"google-research/albert/run_squad_sp.py\", line 361, in convert_examples_to_features\r\n>     example.question_text, lower=FLAGS.do_lower_case))\r\n>   File \"/content/google-research/albert/tokenization.py\", line 145, in encode_ids\r\n>     pieces = encode_pieces(sp_model, text, return_unicode=False, sample=sample)\r\n>   File \"/content/google-research/albert/tokenization.py\", line 113, in encode_pieces\r\n>     pieces = sp_model.EncodeAsPieces(text)\r\n> AttributeError: 'NoneType' object has no attribute 'EncodeAsPieces'","closed_by":{"login":"nhocqn","id":26921561,"node_id":"MDQ6VXNlcjI2OTIxNTYx","avatar_url":"https://avatars.githubusercontent.com/u/26921561?v=4","gravatar_id":"","url":"https://api.github.com/users/nhocqn","html_url":"https://github.com/nhocqn","followers_url":"https://api.github.com/users/nhocqn/followers","following_url":"https://api.github.com/users/nhocqn/following{/other_user}","gists_url":"https://api.github.com/users/nhocqn/gists{/gist_id}","starred_url":"https://api.github.com/users/nhocqn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nhocqn/subscriptions","organizations_url":"https://api.github.com/users/nhocqn/orgs","repos_url":"https://api.github.com/users/nhocqn/repos","events_url":"https://api.github.com/users/nhocqn/events{/privacy}","received_events_url":"https://api.github.com/users/nhocqn/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/138/timeline","performed_via_github_app":null,"state_reason":"completed"}