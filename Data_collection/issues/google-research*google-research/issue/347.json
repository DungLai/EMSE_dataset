{"url":"https://api.github.com/repos/google-research/google-research/issues/347","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/347/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/347/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/347/events","html_url":"https://github.com/google-research/google-research/issues/347","id":674889291,"node_id":"MDU6SXNzdWU2NzQ4ODkyOTE=","number":347,"title":"RuntimeError: Error initializing searcher: ","user":{"login":"najafmurtaza","id":16462407,"node_id":"MDQ6VXNlcjE2NDYyNDA3","avatar_url":"https://avatars.githubusercontent.com/u/16462407?v=4","gravatar_id":"","url":"https://api.github.com/users/najafmurtaza","html_url":"https://github.com/najafmurtaza","followers_url":"https://api.github.com/users/najafmurtaza/followers","following_url":"https://api.github.com/users/najafmurtaza/following{/other_user}","gists_url":"https://api.github.com/users/najafmurtaza/gists{/gist_id}","starred_url":"https://api.github.com/users/najafmurtaza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/najafmurtaza/subscriptions","organizations_url":"https://api.github.com/users/najafmurtaza/orgs","repos_url":"https://api.github.com/users/najafmurtaza/repos","events_url":"https://api.github.com/users/najafmurtaza/events{/privacy}","received_events_url":"https://api.github.com/users/najafmurtaza/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-08-07T09:29:05Z","updated_at":"2022-03-14T12:51:28Z","closed_at":"2020-08-07T18:41:49Z","author_association":"NONE","active_lock_reason":null,"body":"Code:\r\n```\r\ndef f(x):\r\n       return np.random.rand(100)\r\n\r\ntrain_data['emb'] = train_data['text'].apply(f)\r\ntest_data['emb'] = test_data['text'].apply(f)\r\n\r\ndataset = np.array(train_data['emb'].tolist(), dtype=np.float32)\r\nqueries = np.array(test_data['emb'].tolist(), dtype=np.float32)\r\n```\r\n\r\nError:\r\n```\r\nnormalized_dataset = dataset / np.linalg.norm(dataset, axis=1)[:, np.newaxis]\r\n# configure ScaNN as a tree - asymmetric hash hybrid with reordering\r\n# anisotropic quantization as described in the paper; see README\r\n\r\n#  ----- At this line -----\r\n\r\nsearcher = scann.ScannBuilder(normalized_dataset, 10, \"dot_product\").tree(\r\n    num_leaves=2000, num_leaves_to_search=100, training_sample_size=250000).score_ah(\r\n    2, anisotropic_quantization_threshold=0.2).reorder(100).create_pybind()\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/dev/.local/lib/python3.6/site-packages/IPython/core/interactiveshell.py\", line 3331, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-7-c748bb36181c>\", line 6, in <module>\r\n    2, anisotropic_quantization_threshold=0.2).reorder(100).create_pybind()\r\n  File \"/home/dev/.local/lib/python3.6/site-packages/scann/scann_ops/py/scann_builder.py\", line 203, in create_pybind\r\n    self.training_threads)\r\n  File \"/home/dev/.local/lib/python3.6/site-packages/scann/scann_ops/py/scann_ops_pybind.py\", line 60, in create_searcher\r\n    scann_pybind.ScannNumpy(db, scann_config, training_threads))\r\nRuntimeError: Error initializing searcher: \r\n```","closed_by":{"login":"najafmurtaza","id":16462407,"node_id":"MDQ6VXNlcjE2NDYyNDA3","avatar_url":"https://avatars.githubusercontent.com/u/16462407?v=4","gravatar_id":"","url":"https://api.github.com/users/najafmurtaza","html_url":"https://github.com/najafmurtaza","followers_url":"https://api.github.com/users/najafmurtaza/followers","following_url":"https://api.github.com/users/najafmurtaza/following{/other_user}","gists_url":"https://api.github.com/users/najafmurtaza/gists{/gist_id}","starred_url":"https://api.github.com/users/najafmurtaza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/najafmurtaza/subscriptions","organizations_url":"https://api.github.com/users/najafmurtaza/orgs","repos_url":"https://api.github.com/users/najafmurtaza/repos","events_url":"https://api.github.com/users/najafmurtaza/events{/privacy}","received_events_url":"https://api.github.com/users/najafmurtaza/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/347/timeline","performed_via_github_app":null,"state_reason":"completed"}