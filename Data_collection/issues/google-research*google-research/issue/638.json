{"url":"https://api.github.com/repos/google-research/google-research/issues/638","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/638/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/638/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/638/events","html_url":"https://github.com/google-research/google-research/issues/638","id":833261628,"node_id":"MDU6SXNzdWU4MzMyNjE2Mjg=","number":638,"title":"FVD example ","user":{"login":"Ian-Mint","id":6959555,"node_id":"MDQ6VXNlcjY5NTk1NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6959555?v=4","gravatar_id":"","url":"https://api.github.com/users/Ian-Mint","html_url":"https://github.com/Ian-Mint","followers_url":"https://api.github.com/users/Ian-Mint/followers","following_url":"https://api.github.com/users/Ian-Mint/following{/other_user}","gists_url":"https://api.github.com/users/Ian-Mint/gists{/gist_id}","starred_url":"https://api.github.com/users/Ian-Mint/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ian-Mint/subscriptions","organizations_url":"https://api.github.com/users/Ian-Mint/orgs","repos_url":"https://api.github.com/users/Ian-Mint/repos","events_url":"https://api.github.com/users/Ian-Mint/events{/privacy}","received_events_url":"https://api.github.com/users/Ian-Mint/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-03-16T23:07:23Z","updated_at":"2021-03-16T23:32:25Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Attempting to run `frechet_video_distance/example.py` I get the error:\r\n\r\n`NotImplementedError: Cannot convert a symbolic Tensor (covariance/Size_2:0) to a numpy array. This error may indicate that you're trying to pass a Tensor to a NumPy call, which is not supported`\r\n\r\nUbuntu 20.04.2 LTS\r\ntensorflow version: 2.4.1\r\n\r\ncomplete traceback:\r\n\r\n```\r\n  File \"/home/ian/projects/frame-prediction-pytorch/fid/example.py\", line 51, in <module>\r\n    tf.app.run(main)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/absl/app.py\", line 303, in run\r\n    _run_main(main, args)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/ian/projects/frame-prediction-pytorch/fid/example.py\", line 40, in main\r\n    result = fvd.calculate_fvd(\r\n  File \"/home/ian/projects/frame-prediction-pytorch/fid/frechet_video_distance.py\", line 140, in calculate_fvd\r\n    return tfgan.eval.frechet_classifier_distance_from_activations(real_activations, generated_activations)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow_gan/python/eval/classifier_metrics.py\", line 792, in frechet_classifier_distance_from_activations\r\n    return _frechet_classifier_distance_from_activations_helper(\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow_gan/python/eval/classifier_metrics.py\", line 716, in _frechet_classifier_distance_from_activations_helper\r\n    tfp.stats.covariance(activations1),)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow_probability/python/stats/sample_stats.py\", line 438, in covariance\r\n    tf.ones([sample_ndims], tf.int32)),\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow/python/util/dispatch.py\", line 201, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow/python/ops/array_ops.py\", line 3120, in ones\r\n    output = _constant_if_small(one, shape, dtype, name)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow/python/ops/array_ops.py\", line 2804, in _constant_if_small\r\n    if np.prod(shape) < 1000:\r\n  File \"<__array_function__ internals>\", line 5, in prod\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/numpy/core/fromnumeric.py\", line 3030, in prod\r\n    return _wrapreduction(a, np.multiply, 'prod', axis, dtype, out,\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/numpy/core/fromnumeric.py\", line 87, in _wrapreduction\r\n    return ufunc.reduce(obj, axis, dtype, out, **passkwargs)\r\n  File \"/home/ian/miniconda3/envs/torch-tf/lib/python3.8/site-packages/tensorflow/python/framework/ops.py\", line 852, in __array__\r\n    raise NotImplementedError(\r\nNotImplementedError: Cannot convert a symbolic Tensor (covariance/Size_2:0) to a numpy array. This error may indicate that you're trying to pass a Tensor to a NumPy call, which is not supported\r\n```\r\n\r\nConda environment:\r\n```\r\n# Name                    Version                   Build  Channel\r\n_libgcc_mutex             0.1                 conda_forge    conda-forge\r\n_openmp_mutex             4.5                      1_llvm    conda-forge\r\n_tflow_select             2.1.0                       gpu  \r\nabsl-py                   0.12.0             pyhd8ed1ab_0    conda-forge\r\naiohttp                   3.7.4            py38h497a2fe_0    conda-forge\r\nastunparse                1.6.3              pyhd8ed1ab_0    conda-forge\r\nasync-timeout             3.0.1                   py_1000    conda-forge\r\nattrs                     20.3.0             pyhd3deb0d_0    conda-forge\r\nblas                      1.0                         mkl    conda-forge\r\nblinker                   1.4                        py_1    conda-forge\r\nbrotlipy                  0.7.0           py38h497a2fe_1001    conda-forge\r\nbzip2                     1.0.8                h7f98852_4    conda-forge\r\nc-ares                    1.17.1               h7f98852_1    conda-forge\r\nca-certificates           2021.1.19            h06a4308_1  \r\ncachetools                4.2.1              pyhd8ed1ab_0    conda-forge\r\ncairo                     1.16.0            h7979940_1007    conda-forge\r\ncertifi                   2020.12.5        py38h578d9bd_1    conda-forge\r\ncffi                      1.14.5           py38ha65f79e_0    conda-forge\r\nchardet                   4.0.0            py38h578d9bd_1    conda-forge\r\nclick                     7.1.2              pyh9f0ad1d_0    conda-forge\r\ncloudpickle               1.6.0                      py_0  \r\ncomet_ml                  3.5.0                      py38    comet_ml\r\nconfigobj                 5.0.6                      py_0    conda-forge\r\ncryptography              3.4.6            py38ha5dfef3_0    conda-forge\r\ncudatoolkit               10.1.243             h036e899_8    conda-forge\r\ncudnn                     7.6.5.32             hc0a50b0_1    conda-forge\r\ncupti                     10.1.168                      0  \r\ncycler                    0.10.0                     py_2    conda-forge\r\ndbus                      1.13.6               hfdff14a_1    conda-forge\r\ndecorator                 4.4.2              pyhd3eb1b0_0  \r\ndill                      0.3.3              pyhd3eb1b0_0  \r\ndulwich                   0.20.20          py38h497a2fe_0    conda-forge\r\neverett                   1.0.2                      py_1    comet_ml\r\nexpat                     2.2.10               h9c3ff4c_0    conda-forge\r\nffmpeg                    4.3.1                hca11adc_2    conda-forge\r\nfontconfig                2.13.1            hba837de_1004    conda-forge\r\nfreetype                  2.10.4               h0708190_1    conda-forge\r\nfuture                    0.18.2                   py38_1  \r\ngast                      0.4.0              pyh9f0ad1d_0    conda-forge\r\ngettext                   0.19.8.1          h0b5b191_1005    conda-forge\r\nglib                      2.66.7               h9c3ff4c_1    conda-forge\r\nglib-tools                2.66.7               h9c3ff4c_1    conda-forge\r\ngmp                       6.2.1                h58526e2_0    conda-forge\r\ngnutls                    3.6.13               h85f3911_1    conda-forge\r\ngoogle-auth               1.24.0             pyhd3deb0d_0    conda-forge\r\ngoogle-auth-oauthlib      0.4.1                      py_2    conda-forge\r\ngoogle-pasta              0.2.0              pyh8c360ce_0    conda-forge\r\ngoogleapis-common-protos  1.52.0           py38h06a4308_0  \r\ngraphite2                 1.3.13            h58526e2_1001    conda-forge\r\ngrpcio                    1.36.1           py38hdd6454d_0    conda-forge\r\ngst-plugins-base          1.18.4               h29181c9_0    conda-forge\r\ngstreamer                 1.18.4               h76c114f_0    conda-forge\r\nh5py                      2.10.0          nompi_py38h7442b35_105    conda-forge\r\nharfbuzz                  2.7.4                h5cf4720_0    conda-forge\r\nhdf5                      1.10.6          nompi_h7c3c948_1111    conda-forge\r\nicu                       68.1                 h58526e2_0    conda-forge\r\nidna                      2.10               pyh9f0ad1d_0    conda-forge\r\nimportlib-metadata        3.7.3            py38h578d9bd_0    conda-forge\r\njasper                    1.900.1           h07fcdf6_1006    conda-forge\r\njpeg                      9d                   h36c2ea0_0    conda-forge\r\njsonschema                3.2.0              pyhd8ed1ab_3    conda-forge\r\nkeras-preprocessing       1.1.2              pyhd8ed1ab_0    conda-forge\r\nkiwisolver                1.3.1            py38h1fd1430_1    conda-forge\r\nkrb5                      1.17.2               h926e7f8_0    conda-forge\r\nlame                      3.100             h7f98852_1001    conda-forge\r\nlcms2                     2.12                 hddcbb42_0    conda-forge\r\nld_impl_linux-64          2.35.1               hea4e1c9_2    conda-forge\r\nlibblas                   3.9.0                     8_mkl    conda-forge\r\nlibcblas                  3.9.0                     8_mkl    conda-forge\r\nlibclang                  11.1.0          default_ha53f305_0    conda-forge\r\nlibcurl                   7.75.0               hc4aaa36_0    conda-forge\r\nlibedit                   3.1.20191231         he28a2e2_2    conda-forge\r\nlibev                     4.33                 h516909a_1    conda-forge\r\nlibevent                  2.1.10               hcdb4288_3    conda-forge\r\nlibffi                    3.3                  h58526e2_2    conda-forge\r\nlibgcc-ng                 9.3.0               h2828fa1_18    conda-forge\r\nlibgfortran-ng            7.5.0               h14aa051_18    conda-forge\r\nlibgfortran4              7.5.0               h14aa051_18    conda-forge\r\nlibglib                   2.66.7               h3e27bee_1    conda-forge\r\nlibiconv                  1.16                 h516909a_0    conda-forge\r\nliblapack                 3.9.0                     8_mkl    conda-forge\r\nliblapacke                3.9.0                     8_mkl    conda-forge\r\nlibllvm11                 11.1.0               hf817b99_0    conda-forge\r\nlibnghttp2                1.43.0               h812cca2_0    conda-forge\r\nlibopencv                 4.5.1            py38h703c3c0_0    conda-forge\r\nlibpng                    1.6.37               h21135ba_2    conda-forge\r\nlibpq                     13.1                 hfd2b0eb_2    conda-forge\r\nlibprotobuf               3.15.6               h780b84a_0    conda-forge\r\nlibssh2                   1.9.0                ha56f1ee_6    conda-forge\r\nlibstdcxx-ng              9.3.0               h6de172a_18    conda-forge\r\nlibtiff                   4.2.0                hdc55705_0    conda-forge\r\nlibuuid                   2.32.1            h7f98852_1000    conda-forge\r\nlibuv                     1.41.0               h7f98852_0    conda-forge\r\nlibwebp-base              1.2.0                h7f98852_1    conda-forge\r\nlibxcb                    1.13              h7f98852_1003    conda-forge\r\nlibxkbcommon              1.0.3                he3ba5ed_0    conda-forge\r\nlibxml2                   2.9.10               h72842e0_3    conda-forge\r\nllvm-openmp               11.0.1               h4bd325d_0    conda-forge\r\nlz4-c                     1.9.3                h9c3ff4c_0    conda-forge\r\nmarkdown                  3.3.4              pyhd8ed1ab_0    conda-forge\r\nmatplotlib                3.3.4            py38h578d9bd_0    conda-forge\r\nmatplotlib-base           3.3.4            py38h0efea84_0    conda-forge\r\nmkl                       2020.4             h726a3e6_304    conda-forge\r\nmkl-service               2.3.0            py38h1e0a361_2    conda-forge\r\nmultidict                 5.1.0            py38h497a2fe_1    conda-forge\r\nmysql-common              8.0.23               ha770c72_1    conda-forge\r\nmysql-libs                8.0.23               h935591d_1    conda-forge\r\nncurses                   6.2                  h58526e2_4    conda-forge\r\nnettle                    3.6                  he412f7d_0    conda-forge\r\nninja                     1.10.2               h4bd325d_0    conda-forge\r\nnspr                      4.29                 h9c3ff4c_1    conda-forge\r\nnss                       3.62                 hb5efdd6_0    conda-forge\r\nnumpy                     1.20.1           py38h18fd61f_0    conda-forge\r\nnvidia-ml                 7.352.0                    py_0    conda-forge\r\noauthlib                  3.0.1                      py_0    conda-forge\r\nolefile                   0.46               pyh9f0ad1d_1    conda-forge\r\nopencv                    4.5.1            py38h578d9bd_0    conda-forge\r\nopenh264                  2.1.1                h780b84a_0    conda-forge\r\nopenssl                   1.1.1j               h27cfd23_0  \r\nopt_einsum                3.3.0                      py_0    conda-forge\r\npcre                      8.44                 he1b5a44_0    conda-forge\r\npillow                    8.1.2            py38ha0e1e83_0    conda-forge\r\npip                       21.0.1             pyhd8ed1ab_0    conda-forge\r\npixman                    0.40.0               h36c2ea0_0    conda-forge\r\npromise                   2.2.1                      py_0    powerai\r\nprotobuf                  3.15.6           py38h709712a_0    conda-forge\r\npsutil                    5.8.0            py38h497a2fe_1    conda-forge\r\npthread-stubs             0.4               h36c2ea0_1001    conda-forge\r\npy-opencv                 4.5.1            py38h81c977d_0    conda-forge\r\npyasn1                    0.4.8                      py_0    conda-forge\r\npyasn1-modules            0.2.7                      py_0    conda-forge\r\npycparser                 2.20               pyh9f0ad1d_2    conda-forge\r\npyjwt                     2.0.1              pyhd8ed1ab_0    conda-forge\r\npyopenssl                 20.0.1             pyhd8ed1ab_0    conda-forge\r\npyparsing                 2.4.7              pyh9f0ad1d_0    conda-forge\r\npyqt                      5.12.3           py38h578d9bd_7    conda-forge\r\npyqt-impl                 5.12.3           py38h7400c14_7    conda-forge\r\npyqt5-sip                 4.19.18          py38h709712a_7    conda-forge\r\npyqtchart                 5.12             py38h7400c14_7    conda-forge\r\npyqtwebengine             5.12.1           py38h7400c14_7    conda-forge\r\npyrsistent                0.17.3           py38h497a2fe_2    conda-forge\r\npysocks                   1.7.1            py38h578d9bd_3    conda-forge\r\npython                    3.8.8           hffdb5ce_0_cpython    conda-forge\r\npython-dateutil           2.8.1                      py_0    conda-forge\r\npython-flatbuffers        1.12               pyhd8ed1ab_0    conda-forge\r\npython_abi                3.8                      1_cp38    conda-forge\r\npytorch                   1.7.0           py3.8_cuda10.1.243_cudnn7.6.3_0    pytorch\r\nqt                        5.12.9               hda022c4_4    conda-forge\r\nreadline                  8.0                  he28a2e2_2    conda-forge\r\nrequests                  2.25.1             pyhd3deb0d_0    conda-forge\r\nrequests-oauthlib         1.3.0              pyh9f0ad1d_0    conda-forge\r\nrequests-toolbelt         0.9.1                      py_0    conda-forge\r\nrsa                       4.7.2              pyh44b312d_0    conda-forge\r\nscipy                     1.6.1            py38h91f5cce_0  \r\nsetuptools                49.6.0           py38h578d9bd_3    conda-forge\r\nsix                       1.15.0             pyh9f0ad1d_0    conda-forge\r\nsqlite                    3.34.0               h74cdb3f_0    conda-forge\r\ntensorboard               2.4.1              pyhd8ed1ab_0    conda-forge\r\ntensorboard-plugin-wit    1.8.0              pyh44b312d_0    conda-forge\r\ntensorflow                2.4.1           gpu_py38h8a7d6ce_0  \r\ntensorflow-base           2.4.1           gpu_py38h29c2da4_0  \r\ntensorflow-datasets       3.1.0                      py_0    powerai\r\ntensorflow-estimator      2.4.1              pyheb71bc4_0  \r\ntensorflow-gan            2.0.0                      py_0    powerai\r\ntensorflow-gpu            2.4.1                h30adc30_0  \r\ntensorflow-hub            0.8.0              pyh1d8a796_0    powerai\r\ntensorflow-metadata       0.21.0             pyh1d8a796_0    powerai\r\ntensorflow-probability    0.7                        py_2  \r\ntermcolor                 1.1.0                      py_2    conda-forge\r\ntk                        8.6.10               h21135ba_1    conda-forge\r\ntorchvision               0.8.1                py38_cu101    pytorch\r\ntornado                   6.1              py38h497a2fe_1    conda-forge\r\ntqdm                      4.59.0             pyhd3eb1b0_1  \r\ntyping                    3.7.4.3          py38h06a4308_0  \r\ntyping-extensions         3.7.4.3                       0    conda-forge\r\ntyping_extensions         3.7.4.3                    py_0    conda-forge\r\nurllib3                   1.26.4             pyhd8ed1ab_0    conda-forge\r\nwebsocket-client          0.57.0           py38h578d9bd_4    conda-forge\r\nwerkzeug                  1.0.1              pyh9f0ad1d_0    conda-forge\r\nwheel                     0.36.2             pyhd3deb0d_0    conda-forge\r\nwrapt                     1.12.1           py38h497a2fe_3    conda-forge\r\nwurlitzer                 1.0.3                      py_2    comet_ml\r\nx264                      1!161.3030           h7f98852_0    conda-forge\r\nxorg-kbproto              1.0.7             h7f98852_1002    conda-forge\r\nxorg-libice               1.0.10               h7f98852_0    conda-forge\r\nxorg-libsm                1.2.3             hd9c2040_1000    conda-forge\r\nxorg-libx11               1.7.0                h7f98852_0    conda-forge\r\nxorg-libxau               1.0.9                h7f98852_0    conda-forge\r\nxorg-libxdmcp             1.1.3                h7f98852_0    conda-forge\r\nxorg-libxext              1.3.4                h7f98852_1    conda-forge\r\nxorg-libxrender           0.9.10            h7f98852_1003    conda-forge\r\nxorg-renderproto          0.11.1            h7f98852_1002    conda-forge\r\nxorg-xextproto            7.3.0             h7f98852_1002    conda-forge\r\nxorg-xproto               7.0.31            h7f98852_1007    conda-forge\r\nxz                        5.2.5                h516909a_1    conda-forge\r\nyarl                      1.6.3            py38h497a2fe_1    conda-forge\r\nzipp                      3.4.1              pyhd8ed1ab_0    conda-forge\r\nzlib                      1.2.11            h516909a_1010    conda-forge\r\nzstd                      1.4.9                ha95c52a_0    conda-forge\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/638/timeline","performed_via_github_app":null,"state_reason":null}