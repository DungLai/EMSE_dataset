{"url":"https://api.github.com/repos/google-research/google-research/issues/344","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/344/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/344/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/344/events","html_url":"https://github.com/google-research/google-research/issues/344","id":673316635,"node_id":"MDU6SXNzdWU2NzMzMTY2MzU=","number":344,"title":"[scann] Attempt to include <hash_set>, which is deprecated","user":{"login":"harrydrippin","id":5152494,"node_id":"MDQ6VXNlcjUxNTI0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5152494?v=4","gravatar_id":"","url":"https://api.github.com/users/harrydrippin","html_url":"https://github.com/harrydrippin","followers_url":"https://api.github.com/users/harrydrippin/followers","following_url":"https://api.github.com/users/harrydrippin/following{/other_user}","gists_url":"https://api.github.com/users/harrydrippin/gists{/gist_id}","starred_url":"https://api.github.com/users/harrydrippin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harrydrippin/subscriptions","organizations_url":"https://api.github.com/users/harrydrippin/orgs","repos_url":"https://api.github.com/users/harrydrippin/repos","events_url":"https://api.github.com/users/harrydrippin/events{/privacy}","received_events_url":"https://api.github.com/users/harrydrippin/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-08-05T07:22:13Z","updated_at":"2020-08-05T07:22:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"## Description\r\n\r\nI executed the suggested Bazel build command and the error occurred as below:\r\n\r\n```\r\nIn file included from scann/partitioning/kmeans_tree_partitioner.cc:15:\r\nIn file included from ./scann/partitioning/kmeans_tree_partitioner.h:24:\r\nIn file included from ./scann/partitioning/kmeans_tree_like_partitioner.h:22:\r\n./scann/partitioning/partitioner_base.h:21:10: fatal error: 'hash_set' file not found\r\n#include <hash_set>\r\n         ^~~~~~~~~~\r\n1 error generated.\r\nTarget //:build_pip_pkg failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\n```\r\n\r\nAt the [reference](https://docs.microsoft.com/en-us/cpp/standard-library/hash-set-class?view=vs-2019) of this header, they said this API is obsolete and suggesting to use `<unordered_set>`.\r\n\r\nI checked two headers are all included on `memory_logging.h`:\r\n\r\n```cpp\r\n#include <hash_set>\r\n#include <type_traits>\r\n#include <unordered_map>\r\n#include <unordered_set>\r\n```\r\n\r\n## Possible Fix\r\n\r\nWe can remove `<hash_set>` and only use `<unordered_set>` if there are no concerns about breaking any dependencies. \r\n\r\nIf not, it will be highly appreciated if you can provide the solution to use both headers when compile. (e.g. Bazel options, Configuration file change)\r\n\r\n## Environment\r\n\r\nMy bazel version is `bazel 3.4.1-homebrew`, executed on macOS Catalina.\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/344/timeline","performed_via_github_app":null,"state_reason":null}