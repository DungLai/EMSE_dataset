{"url":"https://api.github.com/repos/google-research/google-research/issues/925","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/925/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/925/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/925/events","html_url":"https://github.com/google-research/google-research/issues/925","id":1088919192,"node_id":"I_kwDOCQmIhc5A55aY","number":925,"title":"[VATT] Construct and load datasets using DMVR","user":{"login":"Adam-fei","id":18185114,"node_id":"MDQ6VXNlcjE4MTg1MTE0","avatar_url":"https://avatars.githubusercontent.com/u/18185114?v=4","gravatar_id":"","url":"https://api.github.com/users/Adam-fei","html_url":"https://github.com/Adam-fei","followers_url":"https://api.github.com/users/Adam-fei/followers","following_url":"https://api.github.com/users/Adam-fei/following{/other_user}","gists_url":"https://api.github.com/users/Adam-fei/gists{/gist_id}","starred_url":"https://api.github.com/users/Adam-fei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Adam-fei/subscriptions","organizations_url":"https://api.github.com/users/Adam-fei/orgs","repos_url":"https://api.github.com/users/Adam-fei/repos","events_url":"https://api.github.com/users/Adam-fei/events{/privacy}","received_events_url":"https://api.github.com/users/Adam-fei/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2021-12-27T02:47:06Z","updated_at":"2023-01-06T11:17:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, @hassanhub. I have some problem with DMVR.\r\n\r\nI followed the [dmvr example](https://github.com/deepmind/dmvr/tree/master/examples) to generate the dataset.\r\nAnd changed the corresponding code so the code can read the correct path of data.\r\n\r\nBut when I run the vatt evaluation process, it would raise following error:\r\n\r\n> tensorflow.python.framework.errors_impl.InvalidArgumentError: 3 root error(s) found.\r\n>   (0) INVALID_ARGUMENT:  Name: <unknown>, Key: image/encoded, Index: 0.  Number of values != expected.  values size: 91 but output shape: []\r\n>          [[{{node ParseSingleSequenceExample/ParseSequenceExample/ParseSequenceExampleV2}}]]\r\n>          [[MultiDeviceIteratorGetNextFromShard]]\r\n>          [[RemoteCall]]\r\n>          [[IteratorGetNext_3]]\r\n>          [[model/video_module/vit_base/spatio_temporal_embeddings/strided_slice_5/_1]]\r\n>   (1) INVALID_ARGUMENT:  Name: <unknown>, Key: image/encoded, Index: 0.  Number of values != expected.  values size: 91 but output shape: []\r\n>          [[{{node ParseSingleSequenceExample/ParseSequenceExample/ParseSequenceExampleV2}}]]\r\n>          [[MultiDeviceIteratorGetNextFromShard]]\r\n>          [[RemoteCall]]\r\n>          [[IteratorGetNext_3]]\r\n>   (2) CANCELLED:  Function was cancelled before it was started\r\n> 0 successful operations.\r\n> 0 derived errors ignored. [Op:__inference_evaluation_step_21087]\r\n> \r\n> Function call stack:\r\n> evaluation_step -> evaluation_step -> evaluation_step\r\n\r\nI located the error at line150 in file ./vatt/data/loading.py where the object generate by command `factory.make_dataset()` cannot be read. The minimize pseudocode is as follow:\r\n\r\n```\r\ndataset =  factory.make_dataset(\r\n              shuffle=self.shuffle,\r\n              num_epochs=self.num_epochs,\r\n              batch_size=per_replica_batch_size,\r\n              padded_batch=False,\r\n              drop_remainder=True,\r\n              keep_key=False,\r\n              override_preprocess_fn=None,\r\n              )\r\niter_data = iter(dataset)\r\nnext(iter_data) // this would trigger the error\r\n```\r\n\r\n-------------------------------------------------------\r\n\r\nHere is the pipeline I used to generate the data file. I write some info in the README.txt.\r\n[dmvr_example.tar.gz](https://github.com/google-research/google-research/files/7769292/dmvr_example.tar.gz)\r\n\r\nI cannot identify whether I miss used the dmvr, or I miss code the vatt data reader.\r\n\r\nWhat should I do?\r\n\r\nThanks\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/925/timeline","performed_via_github_app":null,"state_reason":null}