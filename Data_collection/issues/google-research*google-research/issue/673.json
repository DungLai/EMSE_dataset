{"url":"https://api.github.com/repos/google-research/google-research/issues/673","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/673/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/673/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/673/events","html_url":"https://github.com/google-research/google-research/issues/673","id":858711026,"node_id":"MDU6SXNzdWU4NTg3MTEwMjY=","number":673,"title":"[Performer] What values should be passed as input when calling Attention layer?","user":{"login":"Edvard-D","id":12294778,"node_id":"MDQ6VXNlcjEyMjk0Nzc4","avatar_url":"https://avatars.githubusercontent.com/u/12294778?v=4","gravatar_id":"","url":"https://api.github.com/users/Edvard-D","html_url":"https://github.com/Edvard-D","followers_url":"https://api.github.com/users/Edvard-D/followers","following_url":"https://api.github.com/users/Edvard-D/following{/other_user}","gists_url":"https://api.github.com/users/Edvard-D/gists{/gist_id}","starred_url":"https://api.github.com/users/Edvard-D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edvard-D/subscriptions","organizations_url":"https://api.github.com/users/Edvard-D/orgs","repos_url":"https://api.github.com/users/Edvard-D/repos","events_url":"https://api.github.com/users/Edvard-D/events{/privacy}","received_events_url":"https://api.github.com/users/Edvard-D/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-04-15T09:55:16Z","updated_at":"2021-04-15T13:29:50Z","closed_at":"2021-04-15T13:27:02Z","author_association":"NONE","active_lock_reason":null,"body":"EDIT: Ignore this, I had a fundamental misunderstanding of Performer. Reading the args descriptions made me realize that the final value in the input is meant to be `attention_head_count * feature_count`.\r\n\r\nI'm trying to get the [Tensorflow implementation](https://github.com/google-research/google-research/blob/master/performer/fast_attention/tensorflow/fast_attention.py) of the [Performer](https://arxiv.org/abs/2009.14794) Transformer working and am running into some issues.\r\n\r\nI looked at the [fast_attention_test](https://github.com/google-research/google-research/blob/master/performer/fast_attention/tensorflow/fast_attention_test.py) file and saw that `test_fast_attention` provides the following as input: `x = tf.ones([1, length, hidden_size])`. I'm confused how this would translate to my specific use case. My input shape is currently (1, 240, 24). The 240 value is the number of \"time steps\" worth of data I'm passing, with 24 being the number of features each time step has. It seems like I'm supposed to include a `hidden_size` dimension in the input tensor? This value seems to be referenced in `Attention.build` line 413 when creating `attention_initializer` where it passes the last element of the input's shape to `_glorot_initializer`. How can I include the \"feature count\" dimension (value of 24 in this case)? Would the input's shape look something like (1, 240, 24, hidden_size) in my case?","closed_by":{"login":"Edvard-D","id":12294778,"node_id":"MDQ6VXNlcjEyMjk0Nzc4","avatar_url":"https://avatars.githubusercontent.com/u/12294778?v=4","gravatar_id":"","url":"https://api.github.com/users/Edvard-D","html_url":"https://github.com/Edvard-D","followers_url":"https://api.github.com/users/Edvard-D/followers","following_url":"https://api.github.com/users/Edvard-D/following{/other_user}","gists_url":"https://api.github.com/users/Edvard-D/gists{/gist_id}","starred_url":"https://api.github.com/users/Edvard-D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edvard-D/subscriptions","organizations_url":"https://api.github.com/users/Edvard-D/orgs","repos_url":"https://api.github.com/users/Edvard-D/repos","events_url":"https://api.github.com/users/Edvard-D/events{/privacy}","received_events_url":"https://api.github.com/users/Edvard-D/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/673/timeline","performed_via_github_app":null,"state_reason":"completed"}