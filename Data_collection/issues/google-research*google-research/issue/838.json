{"url":"https://api.github.com/repos/google-research/google-research/issues/838","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/838/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/838/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/838/events","html_url":"https://github.com/google-research/google-research/issues/838","id":1010551803,"node_id":"I_kwDOCQmIhc48O8v7","number":838,"title":"ColTran OOM Error even with small dataset","user":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-09-29T06:39:23Z","updated_at":"2022-03-14T08:06:30Z","closed_at":"2021-10-15T17:00:49Z","author_association":"NONE","active_lock_reason":null,"body":"I am getting the OOM error (Out Of Memory) on running the script for Coltran spatial upsampler.\r\n\r\nGetting the same error for the imagenet dataset of 100, 100, 50 and even 10 images for both modes (colorize, recolorize).\r\n\r\nThe `/configs/spatial_upsampler.py` file already has `config.batch_size = 1`, so cannot reduce further.\r\nThe first 2 steps colourizer and color_upsampler are running fine.\r\n\r\nCommand used\r\n```python\r\n%%time\r\n!rm -rf $IMG_DIR/.ipynb_checkpoints/ $STORE_DIR/stage2/.ipynb_checkpoints\r\n!python -m coltran.custom_colorize --config=coltran/configs/spatial_upsampler.py --logdir=$LOGDIR/spatial_upsampler --img_dir=$IMG_DIR --store_dir=$STORE_DIR --gen_data_dir=$STORE_DIR/stage2 --mode=$MODE\r\n```\r\n\r\nenv variables \r\n```\r\nos.environ[\"LOGDIR\"] = \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/logdir/coltran\"\r\nos.environ['IMG_DIR'] = \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/imagenet_50/RGB/train\" \r\nos.environ['STORE_DIR'] = \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/op_imgnet50_recolor_01\"\r\nos.environ['MODE'] = \"recolorize\"\r\n```\r\n\r\nI am running this on Google Colab\r\n\r\n`nvidia-smi`\r\n\r\n```\r\nWed Sep 29 06:34:34 2021       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 470.63.01    Driver Version: 460.32.03    CUDA Version: 11.2     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|                               |                      |               MIG M. |\r\n|===============================+======================+======================|\r\n|   0  Tesla K80           Off  | 00000000:00:04.0 Off |                    0 |\r\n| N/A   40C    P0    65W / 149W |      0MiB / 11441MiB |      0%      Default |\r\n|                               |                      |                  N/A |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                                  |\r\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\r\n|        ID   ID                                                   Usage      |\r\n|=============================================================================|\r\n|  No running processes found                                                 |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\nError\r\n```\r\n2021-09-29 06:33:47.409836: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:47.895533: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:47.896507: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:47.906032: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:47.906959: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:47.907786: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:53.182315: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:53.183181: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:53.184079: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:937] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2021-09-29 06:33:53.185008: W tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:39] Overriding allow_growth setting because the TF_FORCE_GPU_ALLOW_GROWTH environment variable is set. Original config value was 0.\r\n2021-09-29 06:33:53.185080: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1510] Created device /job:localhost/replica:0/task:0/device:GPU:0 with 10819 MB memory:  -> device: 0, name: Tesla K80, pci bus id: 0000:00:04.0, compute capability: 3.7\r\n2021-09-29 06:33:54.140517: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:185] None of the MLIR Optimization Passes are enabled (registered 2)\r\n2021-09-29 06:34:01.320702: I tensorflow/stream_executor/cuda/cuda_dnn.cc:369] Loaded cuDNN version 8005\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/dist-packages/tensorflow/python/training/moving_averages.py:457: Variable.initialized_value (from tensorflow.python.ops.variables) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse Variable.read_value. Variables in 2.X are initialized automatically both in eager and graph (inside tf.defun) contexts.\r\nW0929 06:34:01.986204 140536467093376 deprecation.py:345] From /usr/local/lib/python3.7/dist-packages/tensorflow/python/training/moving_averages.py:457: Variable.initialized_value (from tensorflow.python.ops.variables) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse Variable.read_value. Variables in 2.X are initialized automatically both in eager and graph (inside tf.defun) contexts.\r\nI0929 06:34:02.988495 140536467093376 train_utils.py:91] Built with exponential moving average.\r\nI0929 06:34:02.995397 140536467093376 train_utils.py:185] Restoring from /content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/logdir/coltran/spatial_upsampler.\r\nI0929 06:34:10.659995 140536467093376 custom_colorize.py:207] Producing sample after 300000 training steps.\r\nI0929 06:34:10.660418 140536467093376 custom_colorize.py:210] 10\r\n2021-09-29 06:34:24.825106: W tensorflow/core/common_runtime/bfc_allocator.cc:457] Allocator (GPU_0_bfc) ran out of memory trying to allocate 1.25GiB (rounded to 1342177280)requested by op Softmax\r\nIf the cause is memory fragmentation maybe the environment variable 'TF_GPU_ALLOCATOR=cuda_malloc_async' will improve the situation. \r\nCurrent allocation summary follows.\r\nCurrent allocation summary follows.\r\n2021-09-29 06:34:24.825193: I tensorflow/core/common_runtime/bfc_allocator.cc:1004] BFCAllocator dump for GPU_0_bfc\r\n2021-09-29 06:34:24.825235: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (256): \tTotal Chunks: 25, Chunks in use: 25. 6.2KiB allocated for chunks. 6.2KiB in use in bin. 113B client-requested in use in bin.\r\n2021-09-29 06:34:24.825262: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (512): \tTotal Chunks: 1, Chunks in use: 0. 768B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825290: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (1024): \tTotal Chunks: 3, Chunks in use: 3. 3.2KiB allocated for chunks. 3.2KiB in use in bin. 3.0KiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825318: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (2048): \tTotal Chunks: 75, Chunks in use: 74. 151.0KiB allocated for chunks. 149.0KiB in use in bin. 148.0KiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825340: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (4096): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825395: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (8192): \tTotal Chunks: 13, Chunks in use: 12. 104.0KiB allocated for chunks. 96.0KiB in use in bin. 96.0KiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825421: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (16384): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825452: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (32768): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825473: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (65536): \tTotal Chunks: 2, Chunks in use: 0. 247.0KiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825494: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (131072): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825514: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (262144): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825536: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (524288): \tTotal Chunks: 10, Chunks in use: 8. 5.50MiB allocated for chunks. 4.50MiB in use in bin. 4.00MiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825559: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (1048576): \tTotal Chunks: 77, Chunks in use: 76. 79.00MiB allocated for chunks. 78.00MiB in use in bin. 77.19MiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825581: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (2097152): \tTotal Chunks: 3, Chunks in use: 3. 7.75MiB allocated for chunks. 7.75MiB in use in bin. 7.75MiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825603: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (4194304): \tTotal Chunks: 1, Chunks in use: 0. 7.50MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825623: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (8388608): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825645: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (16777216): \tTotal Chunks: 1, Chunks in use: 0. 26.75MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825665: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (33554432): \tTotal Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825687: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (67108864): \tTotal Chunks: 1, Chunks in use: 0. 73.50MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825709: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (134217728): \tTotal Chunks: 5, Chunks in use: 0. 829.50MiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.\r\n2021-09-29 06:34:24.825730: I tensorflow/core/common_runtime/bfc_allocator.cc:1011] Bin (268435456): \tTotal Chunks: 13, Chunks in use: 9. 9.56GiB allocated for chunks. 6.56GiB in use in bin. 6.56GiB client-requested in use in bin.\r\n2021-09-29 06:34:24.825754: I tensorflow/core/common_runtime/bfc_allocator.cc:1027] Bin for 1.25GiB was 256.00MiB, Chunk State: \r\n2021-09-29 06:34:24.825782: I tensorflow/core/common_runtime/bfc_allocator.cc:1033]   Size: 384.00MiB | Requested Size: 2.0KiB | in_use: 0 | bin_num: 20, prev:   Size: 640.00MiB | Requested Size: 640.00MiB | in_use: 1 | bin_num: -1\r\n2021-09-29 06:34:24.825807: I tensorflow/core/common_runtime/bfc_allocator.cc:1033]   Size: 640.00MiB | Requested Size: 640.00MiB | in_use: 0 | bin_num: 20, next:   Size: 640.00MiB | Requested Size: 640.00MiB | in_use: 1 | bin_num: -1\r\n2021-09-29 06:34:24.825831: I tensorflow/core/common_runtime/bfc_allocator.cc:1033]   Size: 896.00MiB | Requested Size: 2.0KiB | in_use: 0 | bin_num: 20, prev:   Size: 1.25GiB | Requested Size: 1.25GiB | in_use: 1 | bin_num: -1\r\n2021-09-29 06:34:24.825855: I tensorflow/core/common_runtime/bfc_allocator.cc:1033]   Size: 1.12GiB | Requested Size: 2.0KiB | in_use: 0 | bin_num: 20, prev:   Size: 1.25GiB | Requested Size: 1.25GiB | in_use: 1 | bin_num: -1\r\n2021-09-29 06:34:24.825874: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 2097152\r\n2021-09-29 06:34:24.825896: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ae0000 of size 1280 next 1\r\n2021-09-29 06:34:24.825915: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ae0500 of size 256 next 2\r\n2021-09-29 06:34:24.825934: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ae0600 of size 256 next 3\r\n2021-09-29 06:34:24.825953: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ae0700 of size 256 next 4\r\n2021-09-29 06:34:24.825971: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ae0800 of size 256 next 5\r\n2021-09-29 06:34:24.826010: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ae0900 of size 786432 next 6\r\n2021-09-29 06:34:24.826044: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ba0900 of size 256 next 10\r\n2021-09-29 06:34:24.826092: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ba0a00 of size 786432 next 13\r\n2021-09-29 06:34:24.826110: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c60a00 of size 256 next 11\r\n2021-09-29 06:34:24.826127: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c60b00 of size 256 next 9\r\n2021-09-29 06:34:24.826160: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c60c00 of size 256 next 15\r\n2021-09-29 06:34:24.826192: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c60d00 of size 256 next 16\r\n2021-09-29 06:34:24.826211: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c60e00 of size 256 next 21\r\n2021-09-29 06:34:24.826229: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c60f00 of size 256 next 22\r\n2021-09-29 06:34:24.826262: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61000 of size 256 next 26\r\n2021-09-29 06:34:24.826294: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61100 of size 256 next 27\r\n2021-09-29 06:34:24.826318: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61200 of size 1024 next 28\r\n2021-09-29 06:34:24.826336: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61600 of size 256 next 206\r\n2021-09-29 06:34:24.826354: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 703c61700 of size 768 next 30\r\n2021-09-29 06:34:24.826383: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61a00 of size 256 next 33\r\n2021-09-29 06:34:24.826402: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61b00 of size 256 next 34\r\n2021-09-29 06:34:24.826420: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c61c00 of size 8192 next 38\r\n2021-09-29 06:34:24.826456: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c63c00 of size 256 next 39\r\n2021-09-29 06:34:24.826474: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c63d00 of size 256 next 40\r\n2021-09-29 06:34:24.826492: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c63e00 of size 256 next 48\r\n2021-09-29 06:34:24.826509: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c63f00 of size 256 next 50\r\n2021-09-29 06:34:24.826527: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c64000 of size 2048 next 47\r\n2021-09-29 06:34:24.826545: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c64800 of size 2048 next 52\r\n2021-09-29 06:34:24.826563: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c65000 of size 256 next 49\r\n2021-09-29 06:34:24.826580: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c65100 of size 256 next 46\r\n2021-09-29 06:34:24.826598: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c65200 of size 2048 next 54\r\n2021-09-29 06:34:24.826615: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c65a00 of size 2048 next 56\r\n2021-09-29 06:34:24.826639: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c66200 of size 2048 next 57\r\n2021-09-29 06:34:24.826657: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c66a00 of size 2048 next 58\r\n2021-09-29 06:34:24.826675: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c67200 of size 8192 next 44\r\n2021-09-29 06:34:24.826692: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c69200 of size 2048 next 59\r\n2021-09-29 06:34:24.826710: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c69a00 of size 2048 next 65\r\n2021-09-29 06:34:24.826728: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6a200 of size 2048 next 66\r\n2021-09-29 06:34:24.826745: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6aa00 of size 2048 next 69\r\n2021-09-29 06:34:24.826763: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6b200 of size 2048 next 71\r\n2021-09-29 06:34:24.826787: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6ba00 of size 2048 next 72\r\n2021-09-29 06:34:24.826806: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6c200 of size 8192 next 64\r\n2021-09-29 06:34:24.826823: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6e200 of size 2048 next 73\r\n2021-09-29 06:34:24.826841: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6ea00 of size 2048 next 79\r\n2021-09-29 06:34:24.826858: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6f200 of size 2048 next 80\r\n2021-09-29 06:34:24.826876: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c6fa00 of size 2048 next 82\r\n2021-09-29 06:34:24.826893: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c70200 of size 2048 next 84\r\n2021-09-29 06:34:24.826910: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c70a00 of size 2048 next 85\r\n2021-09-29 06:34:24.826928: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c71200 of size 8192 next 78\r\n2021-09-29 06:34:24.826946: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c73200 of size 2048 next 86\r\n2021-09-29 06:34:24.826964: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c73a00 of size 2048 next 92\r\n2021-09-29 06:34:24.826989: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c74200 of size 2048 next 93\r\n2021-09-29 06:34:24.827024: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c74a00 of size 2048 next 95\r\n2021-09-29 06:34:24.827041: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c75200 of size 2048 next 97\r\n2021-09-29 06:34:24.827059: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c75a00 of size 2048 next 98\r\n2021-09-29 06:34:24.827077: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c76200 of size 8192 next 91\r\n2021-09-29 06:34:24.827095: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c78200 of size 2048 next 99\r\n2021-09-29 06:34:24.827112: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c78a00 of size 2048 next 105\r\n2021-09-29 06:34:24.827130: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c79200 of size 2048 next 106\r\n2021-09-29 06:34:24.827148: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c79a00 of size 2048 next 108\r\n2021-09-29 06:34:24.827166: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 703c7a200 of size 2048 next 110\r\n2021-09-29 06:34:24.827184: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7aa00 of size 2048 next 111\r\n2021-09-29 06:34:24.827203: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 703c7b200 of size 8192 next 104\r\n2021-09-29 06:34:24.827220: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7d200 of size 2048 next 112\r\n2021-09-29 06:34:24.827239: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7da00 of size 2048 next 118\r\n2021-09-29 06:34:24.827271: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7e200 of size 2048 next 119\r\n2021-09-29 06:34:24.827307: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7ea00 of size 2048 next 121\r\n2021-09-29 06:34:24.827341: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7f200 of size 2048 next 123\r\n2021-09-29 06:34:24.827359: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c7fa00 of size 3072 next 117\r\n2021-09-29 06:34:24.827387: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c80600 of size 256 next 126\r\n2021-09-29 06:34:24.827405: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c80700 of size 256 next 12\r\n2021-09-29 06:34:24.827428: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 703c80800 of size 126208 next 208\r\n2021-09-29 06:34:24.827447: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c9f500 of size 2048 next 209\r\n2021-09-29 06:34:24.827465: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703c9fd00 of size 2048 next 211\r\n2021-09-29 06:34:24.827482: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca0500 of size 2048 next 213\r\n2021-09-29 06:34:24.827499: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca0d00 of size 2048 next 215\r\n2021-09-29 06:34:24.827517: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca1500 of size 2048 next 217\r\n2021-09-29 06:34:24.827535: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca1d00 of size 2048 next 219\r\n2021-09-29 06:34:24.827552: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca2500 of size 2048 next 221\r\n2021-09-29 06:34:24.827570: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca2d00 of size 2048 next 223\r\n2021-09-29 06:34:24.827587: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca3500 of size 2048 next 225\r\n2021-09-29 06:34:24.827604: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca3d00 of size 2048 next 227\r\n2021-09-29 06:34:24.827622: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca4500 of size 2048 next 229\r\n2021-09-29 06:34:24.827639: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca4d00 of size 2048 next 231\r\n2021-09-29 06:34:24.827656: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca5500 of size 2048 next 234\r\n2021-09-29 06:34:24.827673: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca5d00 of size 1024 next 236\r\n2021-09-29 06:34:24.827691: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca6100 of size 2048 next 238\r\n2021-09-29 06:34:24.827708: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca6900 of size 2048 next 239\r\n2021-09-29 06:34:24.827726: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca7100 of size 2048 next 240\r\n2021-09-29 06:34:24.827744: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca7900 of size 2048 next 241\r\n2021-09-29 06:34:24.827761: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca8100 of size 2048 next 242\r\n2021-09-29 06:34:24.827778: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca8900 of size 2048 next 243\r\n2021-09-29 06:34:24.827796: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca9100 of size 2048 next 244\r\n2021-09-29 06:34:24.827813: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ca9900 of size 2048 next 245\r\n2021-09-29 06:34:24.827830: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703caa100 of size 2048 next 246\r\n2021-09-29 06:34:24.827847: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703caa900 of size 2048 next 247\r\n2021-09-29 06:34:24.827864: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cab100 of size 2048 next 248\r\n2021-09-29 06:34:24.827881: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cab900 of size 2048 next 249\r\n2021-09-29 06:34:24.827898: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cac100 of size 2048 next 250\r\n2021-09-29 06:34:24.827915: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cac900 of size 2048 next 251\r\n2021-09-29 06:34:24.827934: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cad100 of size 2048 next 252\r\n2021-09-29 06:34:24.827953: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cad900 of size 2048 next 253\r\n2021-09-29 06:34:24.827971: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cae100 of size 2048 next 254\r\n2021-09-29 06:34:24.827988: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cae900 of size 2048 next 255\r\n2021-09-29 06:34:24.828011: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703caf100 of size 2048 next 256\r\n2021-09-29 06:34:24.901942: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703caf900 of size 2048 next 257\r\n2021-09-29 06:34:24.901999: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb0100 of size 2048 next 258\r\n2021-09-29 06:34:24.902042: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb0900 of size 2048 next 259\r\n2021-09-29 06:34:24.902076: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb1100 of size 2048 next 260\r\n2021-09-29 06:34:24.902096: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb1900 of size 2048 next 261\r\n2021-09-29 06:34:24.902116: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb2100 of size 8192 next 267\r\n2021-09-29 06:34:24.902137: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb4100 of size 8192 next 272\r\n2021-09-29 06:34:24.902159: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb6100 of size 8192 next 276\r\n2021-09-29 06:34:24.902181: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cb8100 of size 8192 next 281\r\n2021-09-29 06:34:24.902218: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cba100 of size 8192 next 286\r\n2021-09-29 06:34:24.902241: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cbc100 of size 8192 next 291\r\n2021-09-29 06:34:24.902264: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cbe100 of size 2048 next 293\r\n2021-09-29 06:34:24.902285: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cbe900 of size 2048 next 25\r\n2021-09-29 06:34:24.902321: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703cbf100 of size 8192 next 29\r\n2021-09-29 06:34:24.902358: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 703cc1100 of size 126720 next 18446744073709551615\r\n2021-09-29 06:34:24.902399: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 4194304\r\n2021-09-29 06:34:24.902443: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ce0000 of size 256 next 8\r\n2021-09-29 06:34:24.902466: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 703ce0100 of size 524288 next 18\r\n2021-09-29 06:34:24.902488: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703d60100 of size 524288 next 17\r\n2021-09-29 06:34:24.902509: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703de0100 of size 1048576 next 42\r\n2021-09-29 06:34:24.902532: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 703ee0100 of size 2096896 next 18446744073709551615\r\n2021-09-29 06:34:24.902553: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 67108864\r\n2021-09-29 06:34:24.902594: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 704ae0000 of size 7864320 next 204\r\n2021-09-29 06:34:24.902623: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 705260000 of size 3932160 next 203\r\n2021-09-29 06:34:24.902645: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 705620000 of size 28049408 next 182\r\n2021-09-29 06:34:24.902666: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7070e0000 of size 1048576 next 210\r\n2021-09-29 06:34:24.902687: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7071e0000 of size 1048576 next 212\r\n2021-09-29 06:34:24.902708: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7072e0000 of size 1048576 next 214\r\n2021-09-29 06:34:24.902739: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7073e0000 of size 1048576 next 216\r\n2021-09-29 06:34:24.902760: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7074e0000 of size 1048576 next 218\r\n2021-09-29 06:34:24.902782: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7075e0000 of size 1048576 next 220\r\n2021-09-29 06:34:24.902802: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7076e0000 of size 1048576 next 222\r\n2021-09-29 06:34:24.902823: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7077e0000 of size 1048576 next 224\r\n2021-09-29 06:34:24.902845: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7078e0000 of size 1048576 next 226\r\n2021-09-29 06:34:24.902868: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7079e0000 of size 1048576 next 228\r\n2021-09-29 06:34:24.902889: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 707ae0000 of size 1048576 next 230\r\n2021-09-29 06:34:24.902926: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 707be0000 of size 1048576 next 232\r\n2021-09-29 06:34:24.902964: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 707ce0000 of size 1572864 next 233\r\n2021-09-29 06:34:24.902997: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 707e60000 of size 2097152 next 235\r\n2021-09-29 06:34:24.903035: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 708060000 of size 524288 next 237\r\n2021-09-29 06:34:24.903059: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7080e0000 of size 524288 next 262\r\n2021-09-29 06:34:24.903082: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 708160000 of size 524288 next 263\r\n2021-09-29 06:34:24.903105: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7081e0000 of size 1048576 next 264\r\n2021-09-29 06:34:24.903128: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7082e0000 of size 1048576 next 265\r\n2021-09-29 06:34:24.903151: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7083e0000 of size 1048576 next 266\r\n2021-09-29 06:34:24.903174: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7084e0000 of size 1048576 next 268\r\n2021-09-29 06:34:24.903197: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7085e0000 of size 1048576 next 269\r\n2021-09-29 06:34:24.903219: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7086e0000 of size 1048576 next 270\r\n2021-09-29 06:34:24.903242: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7087e0000 of size 1048576 next 271\r\n2021-09-29 06:34:24.903280: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7088e0000 of size 1048576 next 273\r\n2021-09-29 06:34:24.903318: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7089e0000 of size 1048576 next 18446744073709551615\r\n2021-09-29 06:34:24.903341: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 134217728\r\n2021-09-29 06:34:24.903364: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 708ae0000 of size 134217728 next 18446744073709551615\r\n2021-09-29 06:34:24.903385: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 268435456\r\n2021-09-29 06:34:24.903425: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 710ae0000 of size 135266304 next 51\r\n2021-09-29 06:34:24.903450: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 718be0000 of size 1048576 next 53\r\n2021-09-29 06:34:24.903475: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 718ce0000 of size 1048576 next 55\r\n2021-09-29 06:34:24.903496: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 718de0000 of size 1048576 next 60\r\n2021-09-29 06:34:24.903519: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 718ee0000 of size 1048576 next 61\r\n2021-09-29 06:34:24.903541: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 718fe0000 of size 1048576 next 62\r\n2021-09-29 06:34:24.903578: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7190e0000 of size 1048576 next 70\r\n2021-09-29 06:34:24.903600: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7191e0000 of size 1048576 next 63\r\n2021-09-29 06:34:24.903622: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7192e0000 of size 1048576 next 68\r\n2021-09-29 06:34:24.903644: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7193e0000 of size 1048576 next 74\r\n2021-09-29 06:34:24.903665: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7194e0000 of size 1048576 next 75\r\n2021-09-29 06:34:24.903687: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7195e0000 of size 1048576 next 76\r\n2021-09-29 06:34:24.903708: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7196e0000 of size 1048576 next 83\r\n2021-09-29 06:34:24.903729: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7197e0000 of size 1048576 next 77\r\n2021-09-29 06:34:24.903752: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7198e0000 of size 524288 next 296\r\n2021-09-29 06:34:24.903773: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 719960000 of size 524288 next 81\r\n2021-09-29 06:34:24.903795: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7199e0000 of size 1048576 next 87\r\n2021-09-29 06:34:24.903816: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 719ae0000 of size 1048576 next 88\r\n2021-09-29 06:34:24.903837: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 719be0000 of size 1048576 next 89\r\n2021-09-29 06:34:24.903859: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 719ce0000 of size 1048576 next 96\r\n2021-09-29 06:34:24.903881: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 719de0000 of size 1048576 next 90\r\n2021-09-29 06:34:24.903902: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 719ee0000 of size 1048576 next 94\r\n2021-09-29 06:34:24.903925: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 719fe0000 of size 1048576 next 100\r\n2021-09-29 06:34:24.903946: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a0e0000 of size 1048576 next 101\r\n2021-09-29 06:34:24.903967: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a1e0000 of size 1048576 next 102\r\n2021-09-29 06:34:24.903989: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a2e0000 of size 1048576 next 109\r\n2021-09-29 06:34:24.904022: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a3e0000 of size 1048576 next 103\r\n2021-09-29 06:34:24.904062: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a4e0000 of size 1048576 next 107\r\n2021-09-29 06:34:24.904085: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a5e0000 of size 1048576 next 113\r\n2021-09-29 06:34:24.904107: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a6e0000 of size 1048576 next 114\r\n2021-09-29 06:34:24.904130: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a7e0000 of size 1048576 next 115\r\n2021-09-29 06:34:24.904153: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a8e0000 of size 1048576 next 122\r\n2021-09-29 06:34:24.904176: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71a9e0000 of size 1048576 next 116\r\n2021-09-29 06:34:24.904199: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71aae0000 of size 1048576 next 120\r\n2021-09-29 06:34:24.904222: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71abe0000 of size 1048576 next 274\r\n2021-09-29 06:34:24.904245: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71ace0000 of size 1048576 next 275\r\n2021-09-29 06:34:24.904267: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71ade0000 of size 1048576 next 277\r\n2021-09-29 06:34:24.904290: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71aee0000 of size 1048576 next 278\r\n2021-09-29 06:34:24.904313: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71afe0000 of size 1048576 next 279\r\n2021-09-29 06:34:24.904350: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b0e0000 of size 1048576 next 280\r\n2021-09-29 06:34:24.904387: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b1e0000 of size 1048576 next 282\r\n2021-09-29 06:34:24.904423: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b2e0000 of size 1048576 next 283\r\n2021-09-29 06:34:24.904449: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b3e0000 of size 1048576 next 284\r\n2021-09-29 06:34:24.904473: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b4e0000 of size 1048576 next 285\r\n2021-09-29 06:34:24.904494: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b5e0000 of size 1048576 next 287\r\n2021-09-29 06:34:24.904516: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b6e0000 of size 1048576 next 288\r\n2021-09-29 06:34:24.904538: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b7e0000 of size 1048576 next 289\r\n2021-09-29 06:34:24.904559: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b8e0000 of size 1048576 next 290\r\n2021-09-29 06:34:24.904581: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71b9e0000 of size 1048576 next 292\r\n2021-09-29 06:34:24.904603: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71bae0000 of size 1048576 next 294\r\n2021-09-29 06:34:24.904625: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71bbe0000 of size 1572864 next 295\r\n2021-09-29 06:34:24.904647: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71bd60000 of size 2097152 next 125\r\n2021-09-29 06:34:24.904669: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71bf60000 of size 1048576 next 37\r\n2021-09-29 06:34:24.904691: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 71c060000 of size 1048576 next 32\r\n2021-09-29 06:34:24.904712: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 71c160000 of size 77070336 next 18446744073709551615\r\n2021-09-29 06:34:24.904759: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 268435456\r\n2021-09-29 06:34:24.904795: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 720ae0000 of size 524288 next 35\r\n2021-09-29 06:34:24.904818: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 720b60000 of size 1048576 next 23\r\n2021-09-29 06:34:24.904840: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 720c60000 of size 1048576 next 124\r\n2021-09-29 06:34:24.904861: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 720d60000 of size 1048576 next 129\r\n2021-09-29 06:34:24.904882: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 720e60000 of size 264765440 next 18446744073709551615\r\n2021-09-29 06:34:24.904903: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 536870912\r\n2021-09-29 06:34:24.904925: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 730ae0000 of size 335544320 next 205\r\n2021-09-29 06:34:24.904947: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 744ae0000 of size 201326592 next 18446744073709551615\r\n2021-09-29 06:34:24.904969: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 1073741824\r\n2021-09-29 06:34:24.904991: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 750ae0000 of size 671088640 next 202\r\n2021-09-29 06:34:24.905024: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 778ae0000 of size 402653184 next 18446744073709551615\r\n2021-09-29 06:34:24.905047: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 2147483648\r\n2021-09-29 06:34:24.905069: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 7914e0000 of size 671088640 next 200\r\n2021-09-29 06:34:24.905091: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7b94e0000 of size 671088640 next 201\r\n2021-09-29 06:34:24.905112: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 7e14e0000 of size 671088640 next 198\r\n2021-09-29 06:34:24.905133: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 8094e0000 of size 134217728 next 18446744073709551615\r\n2021-09-29 06:34:24.905154: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 4294967296\r\n2021-09-29 06:34:24.905176: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 8114e0000 of size 671088640 next 197\r\n2021-09-29 06:34:24.905212: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 8394e0000 of size 671088640 next 196\r\n2021-09-29 06:34:24.905234: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 8614e0000 of size 671088640 next 195\r\n2021-09-29 06:34:24.905258: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 8894e0000 of size 1342177280 next 193\r\n2021-09-29 06:34:24.905280: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 8d94e0000 of size 939524096 next 18446744073709551615\r\n2021-09-29 06:34:24.905301: I tensorflow/core/common_runtime/bfc_allocator.cc:1040] Next region of size 2547712000\r\n2021-09-29 06:34:24.905323: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] InUse at 9114e0000 of size 1342177280 next 191\r\n2021-09-29 06:34:24.905346: I tensorflow/core/common_runtime/bfc_allocator.cc:1060] Free  at 9614e0000 of size 1205534720 next 18446744073709551615\r\n2021-09-29 06:34:24.905368: I tensorflow/core/common_runtime/bfc_allocator.cc:1065]      Summary of in-use Chunks by size: \r\n2021-09-29 06:34:24.905426: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 25 Chunks of size 256 totalling 6.2KiB\r\n2021-09-29 06:34:24.905453: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 2 Chunks of size 1024 totalling 2.0KiB\r\n2021-09-29 06:34:24.905479: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 1 Chunks of size 1280 totalling 1.2KiB\r\n2021-09-29 06:34:24.905504: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 73 Chunks of size 2048 totalling 146.0KiB\r\n2021-09-29 06:34:24.905529: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 1 Chunks of size 3072 totalling 3.0KiB\r\n2021-09-29 06:34:24.905553: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 12 Chunks of size 8192 totalling 96.0KiB\r\n2021-09-29 06:34:24.905577: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 6 Chunks of size 524288 totalling 3.00MiB\r\n2021-09-29 06:34:24.905601: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 2 Chunks of size 786432 totalling 1.50MiB\r\n2021-09-29 06:34:24.905625: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 73 Chunks of size 1048576 totalling 73.00MiB\r\n2021-09-29 06:34:24.905648: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 2 Chunks of size 1572864 totalling 3.00MiB\r\n2021-09-29 06:34:24.905671: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 1 Chunks of size 2096896 totalling 2.00MiB\r\n2021-09-29 06:34:24.905695: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 2 Chunks of size 2097152 totalling 4.00MiB\r\n2021-09-29 06:34:24.905717: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 1 Chunks of size 3932160 totalling 3.75MiB\r\n2021-09-29 06:34:24.905742: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 1 Chunks of size 335544320 totalling 320.00MiB\r\n2021-09-29 06:34:24.905766: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 6 Chunks of size 671088640 totalling 3.75GiB\r\n2021-09-29 06:34:24.905789: I tensorflow/core/common_runtime/bfc_allocator.cc:1068] 2 Chunks of size 1342177280 totalling 2.50GiB\r\n2021-09-29 06:34:24.905812: I tensorflow/core/common_runtime/bfc_allocator.cc:1072] Sum Total of in-use chunks: 6.65GiB\r\n2021-09-29 06:34:24.905834: I tensorflow/core/common_runtime/bfc_allocator.cc:1074] total_region_allocated_bytes_: 11345264640 memory_limit_: 11345264640 available bytes: 0 curr_region_allocation_bytes_: 17179869184\r\n2021-09-29 06:34:24.905892: I tensorflow/core/common_runtime/bfc_allocator.cc:1080] Stats: \r\nLimit:                     11345264640\r\nInUse:                      7141325056\r\nMaxInUse:                   8483502336\r\nNumAllocs:                        1162\r\nMaxAllocSize:               1342177280\r\nReserved:                            0\r\nPeakReserved:                        0\r\nLargestFreeBlock:                    0\r\n\r\n2021-09-29 06:34:24.905930: W tensorflow/core/common_runtime/bfc_allocator.cc:468] *__**_****_*******________********************************************_______*************__________\r\n2021-09-29 06:34:24.905992: W tensorflow/core/framework/op_kernel.cc:1692] OP_REQUIRES failed at softmax_op_gpu.cu.cc:219 : Resource exhausted: OOM when allocating tensor with shape[5,256,256,4,256] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/custom_colorize.py\", line 244, in <module>\r\n    app.run(main)\r\n  File \"/usr/local/lib/python3.7/dist-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.7/dist-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/custom_colorize.py\", line 227, in main\r\n    out = model.sample(gray_cond=gray, inputs=prev_gen, mode='argmax')\r\n  File \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/models/upsampler.py\", line 254, in sample\r\n    logits = self.upsampler(inputs, gray_cond, training=False)\r\n  File \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/models/upsampler.py\", line 245, in upsampler\r\n    context = self.encoder(channel, training=training)\r\n  File \"/usr/local/lib/python3.7/dist-packages/keras/engine/base_layer.py\", line 1037, in __call__\r\n    outputs = call_fn(inputs, *args, **kwargs)\r\n  File \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/models/layers.py\", line 669, in call\r\n    output = layer(inputs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/keras/engine/base_layer.py\", line 1037, in __call__\r\n    outputs = call_fn(inputs, *args, **kwargs)\r\n  File \"/content/drive/MyDrive/Colab_Work/HONORS/ColorTrans/coltran_pretrained/google-research/coltran/models/layers.py\", line 612, in call\r\n    weights = tf.nn.softmax(alphas)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/util/dispatch.py\", line 206, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/nn_ops.py\", line 3820, in softmax_v2\r\n    return _wrap_2d_function(logits, gen_nn_ops.softmax, axis, name)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/nn_ops.py\", line 3739, in _wrap_2d_function\r\n    return compute_op(inputs, name=name)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/gen_nn_ops.py\", line 10864, in softmax\r\n    _ops.raise_from_not_ok_status(e, name)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/framework/ops.py\", line 6941, in raise_from_not_ok_status\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[5,256,256,4,256] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc [Op:Softmax]\r\nCPU times: user 370 ms, sys: 82.2 ms, total: 453 ms\r\nWall time: 1min\r\n```\r\n\r\nPlease guide me on how to solve this.","closed_by":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/838/timeline","performed_via_github_app":null,"state_reason":"completed"}