{"url":"https://api.github.com/repos/google-research/google-research/issues/88","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/88/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/88/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/88/events","html_url":"https://github.com/google-research/google-research/issues/88","id":513644353,"node_id":"MDU6SXNzdWU1MTM2NDQzNTM=","number":88,"title":"Tcc: result cannot be same as the one in paper","user":{"login":"arxrean","id":23150472,"node_id":"MDQ6VXNlcjIzMTUwNDcy","avatar_url":"https://avatars.githubusercontent.com/u/23150472?v=4","gravatar_id":"","url":"https://api.github.com/users/arxrean","html_url":"https://github.com/arxrean","followers_url":"https://api.github.com/users/arxrean/followers","following_url":"https://api.github.com/users/arxrean/following{/other_user}","gists_url":"https://api.github.com/users/arxrean/gists{/gist_id}","starred_url":"https://api.github.com/users/arxrean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arxrean/subscriptions","organizations_url":"https://api.github.com/users/arxrean/orgs","repos_url":"https://api.github.com/users/arxrean/repos","events_url":"https://api.github.com/users/arxrean/events{/privacy}","received_events_url":"https://api.github.com/users/arxrean/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-10-29T01:41:26Z","updated_at":"2020-04-12T06:12:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I train the tcc model and evaluate 'classification'. But the result is 68.8/68.6(0.5/1.0), which is much worse than the result in paper(91.43/91.82). Is there any wrong for my training?\r\n\r\nfrom __future__ import absolute_import\r\nfrom __future__ import division\r\nfrom __future__ import print_function\r\n\r\nfrom easydict import EasyDict as edict\r\n\r\n\r\nCONFIG = edict()\r\n\r\n\r\nCONFIG.DECODER = False\r\n\r\nCONFIG.LOGDIR = '/tmp/alignment_logs/'\r\n\r\nCONFIG.DATASETS = [\r\n    # 'baseball_pitch',\r\n    # 'baseball_swing',\r\n    # 'bench_press',\r\n    # 'bowling',\r\n    # 'clean_and_jerk',\r\n    # 'golf_swing',\r\n    # 'jumping_jacks',\r\n    # 'pushups',\r\n    # 'pullups',\r\n    # 'situp',\r\n    # 'squats',\r\n    # 'tennis_forehand',\r\n    # 'tennis_serve',\r\n    'pouring',\r\n]\r\n\r\n\r\nCONFIG.PATH_TO_TFRECORDS = '/home/cxu-serve/p1/zkou2/ad/'\r\n\r\n\r\nCONFIG.TRAINING_ALGO = 'alignment'\r\n\r\nCONFIG.IMAGE_SIZE = 224  # For ResNet50\r\n\r\n\r\n\r\nCONFIG.TRAIN = edict()\r\nCONFIG.TRAIN.MAX_ITERS = 150000\r\n\r\nCONFIG.TRAIN.BATCH_SIZE = 2\r\n\r\nCONFIG.TRAIN.NUM_FRAMES = 20\r\nCONFIG.TRAIN.VISUALIZE_INTERVAL = 200\r\n\r\nCONFIG.EVAL = edict()\r\n\r\nCONFIG.EVAL.BATCH_SIZE = 2\r\n\r\nCONFIG.EVAL.NUM_FRAMES = 20\r\n\r\nCONFIG.EVAL.VAL_ITERS = 20\r\nCONFIG.EVAL.TASKS = [\r\n    # 'algo_loss',\r\n    'classification',\r\n    # 'kendalls_tau',\r\n    # 'event_completion',\r\n    # 'few_shot_classification'\r\n]\r\n\r\nCONFIG.EVAL.FRAMES_PER_BATCH = 25\r\nCONFIG.EVAL.KENDALLS_TAU_STRIDE = 5  # 2 for Pouring, 5 for PennAction\r\nCONFIG.EVAL.KENDALLS_TAU_DISTANCE = 'sqeuclidean'  # cosine, sqeuclidean\r\nCONFIG.EVAL.CLASSIFICATION_FRACTIONS = [0.1, 0.5, 1.0]\r\nCONFIG.EVAL.FEW_SHOT_NUM_LABELED = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\nCONFIG.EVAL.FEW_SHOT_NUM_EPISODES = 50\r\n\r\nCONFIG.MODEL = edict()\r\n\r\nCONFIG.MODEL.EMBEDDER_TYPE = 'conv'\r\n\r\nCONFIG.MODEL.BASE_MODEL = edict()\r\n\r\nCONFIG.MODEL.BASE_MODEL.NETWORK = 'Resnet50_pretrained'\r\n\r\nCONFIG.MODEL.BASE_MODEL.LAYER = 'conv4_block3_out'\r\n\r\nCONFIG.MODEL.TRAIN_BASE = 'only_bn'\r\nCONFIG.MODEL.TRAIN_EMBEDDING = True\r\n\r\nCONFIG.MODEL.RESNET_PRETRAINED_WEIGHTS = '/home/cxu-serve/u1/zkou2/Code/tcc/repo/resnet50v2_weights_tf_dim_ordering_tf_kernels_notop.h5'\r\n\r\n\r\nCONFIG.MODEL.VGGM = edict()\r\nCONFIG.MODEL.VGGM.USE_BN = True\r\n\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL = edict()\r\n\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.CONV_LAYERS = [\r\n    (256, 3, True),\r\n    (256, 3, True),\r\n]\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.FLATTEN_METHOD = 'max_pool'\r\n\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.FC_LAYERS = [\r\n    (256, True),\r\n    (256, True),\r\n]\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.CAPACITY_SCALAR = 2\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.EMBEDDING_SIZE = 128\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.L2_NORMALIZE = False\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.BASE_DROPOUT_RATE = 0.0\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.BASE_DROPOUT_SPATIAL = False\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.FC_DROPOUT_RATE = 0.1\r\nCONFIG.MODEL.CONV_EMBEDDER_MODEL.USE_BN = True\r\n\r\n\r\nCONFIG.MODEL.CONVGRU_EMBEDDER_MODEL = edict()\r\n\r\nCONFIG.MODEL.CONVGRU_EMBEDDER_MODEL.CONV_LAYERS = [(512, 3, True),\r\n                                                   (512, 3, True)]\r\n\r\nCONFIG.MODEL.CONVGRU_EMBEDDER_MODEL.GRU_LAYERS = [\r\n    128,\r\n]\r\nCONFIG.MODEL.CONVGRU_EMBEDDER_MODEL.DROPOUT_RATE = 0.0\r\nCONFIG.MODEL.CONVGRU_EMBEDDER_MODEL.USE_BN = True\r\n\r\nCONFIG.MODEL.L2_REG_WEIGHT = 0.00001\r\n\r\n\r\nCONFIG.ALIGNMENT = edict()\r\nCONFIG.ALIGNMENT.CYCLE_LENGTH = 2\r\nCONFIG.ALIGNMENT.LABEL_SMOOTHING = 0.1\r\nCONFIG.ALIGNMENT.SOFTMAX_TEMPERATURE = 0.1\r\n\r\nCONFIG.ALIGNMENT.LOSS_TYPE = 'classification'\r\nCONFIG.ALIGNMENT.NORMALIZE_INDICES = True\r\nCONFIG.ALIGNMENT.VARIANCE_LAMBDA = 0.001\r\nCONFIG.ALIGNMENT.FRACTION = 1.0\r\nCONFIG.ALIGNMENT.HUBER_DELTA = 0.1\r\nCONFIG.ALIGNMENT.SIMILARITY_TYPE = 'l2' \r\n\r\nCONFIG.ALIGNMENT.STOCHASTIC_MATCHING = False\r\n\r\n\r\nCONFIG.SAL = edict()\r\nCONFIG.SAL.DROPOUT_RATE = 0.0\r\n\r\nCONFIG.SAL.FC_LAYERS = [(128, True), (64, True), (2, False)]\r\nCONFIG.SAL.SHUFFLE_FRACTION = 0.75\r\n\r\nCONFIG.SAL.NUM_SAMPLES = 8\r\nCONFIG.SAL.LABEL_SMOOTHING = 0.0\r\n\r\nCONFIG.ALIGNMENT_SAL_TCN = edict()\r\n\r\nCONFIG.ALIGNMENT_SAL_TCN.ALIGNMENT_LOSS_WEIGHT = 0.33\r\nCONFIG.ALIGNMENT_SAL_TCN.SAL_LOSS_WEIGHT = 0.33\r\n\r\nCONFIG.CLASSIFICATION = edict()\r\nCONFIG.CLASSIFICATION.LABEL_SMOOTHING = 0.0\r\nCONFIG.CLASSIFICATION.DROPOUT_RATE = 0.0\r\n\r\nCONFIG.TCN = edict()\r\nCONFIG.TCN.POSITIVE_WINDOW = 5\r\nCONFIG.TCN.REG_LAMBDA = 0.002\r\n\r\nCONFIG.OPTIMIZER = edict()\r\n\r\nCONFIG.OPTIMIZER.TYPE = 'AdamOptimizer'\r\n\r\nCONFIG.OPTIMIZER.LR = edict()\r\n\r\nCONFIG.OPTIMIZER.LR.INITIAL_LR = 0.0001\r\n\r\nCONFIG.OPTIMIZER.LR.DECAY_TYPE = 'fixed'\r\nCONFIG.OPTIMIZER.LR.EXP_DECAY_RATE = 0.97\r\nCONFIG.OPTIMIZER.LR.EXP_DECAY_STEPS = 1000\r\nCONFIG.OPTIMIZER.LR.MANUAL_LR_STEP_BOUNDARIES = [5000, 10000]\r\nCONFIG.OPTIMIZER.LR.MANUAL_LR_DECAY_RATE = 0.1\r\nCONFIG.OPTIMIZER.LR.NUM_WARMUP_STEPS = 0\r\n\r\n\r\nCONFIG.DATA = edict()\r\nCONFIG.DATA.SHUFFLE_QUEUE_SIZE = 0\r\nCONFIG.DATA.NUM_PREFETCH_BATCHES = 1\r\nCONFIG.DATA.RANDOM_OFFSET = 1\r\nCONFIG.DATA.STRIDE = 16\r\nCONFIG.DATA.SAMPLING_STRATEGY = 'offset_uniform'\r\nCONFIG.DATA.NUM_STEPS = 2  \r\nCONFIG.DATA.FRAME_STRIDE = 15  \r\n\r\nCONFIG.DATA.FRAME_LABELS = True\r\nCONFIG.DATA.PER_DATASET_FRACTION = 1.0\r\nCONFIG.DATA.PER_CLASS = False\r\n\r\nCONFIG.DATA.SAMPLE_ALL_STRIDE = 1\r\n\r\nCONFIG.AUGMENTATION = edict()\r\nCONFIG.AUGMENTATION.RANDOM_FLIP = True\r\nCONFIG.AUGMENTATION.RANDOM_CROP = False\r\nCONFIG.AUGMENTATION.BRIGHTNESS = True\r\nCONFIG.AUGMENTATION.BRIGHTNESS_MAX_DELTA = 32.0 / 255\r\nCONFIG.AUGMENTATION.CONTRAST = True\r\nCONFIG.AUGMENTATION.CONTRAST_LOWER = 0.5\r\nCONFIG.AUGMENTATION.CONTRAST_UPPER = 1.5\r\nCONFIG.AUGMENTATION.HUE = False\r\nCONFIG.AUGMENTATION.HUE_MAX_DELTA = 0.2\r\nCONFIG.AUGMENTATION.SATURATION = False\r\nCONFIG.AUGMENTATION.SATURATION_LOWER = 0.5\r\nCONFIG.AUGMENTATION.SATURATION_UPPER = 1.5\r\n\r\n\r\nCONFIG.LOGGING = edict()\r\nCONFIG.LOGGING.REPORT_INTERVAL = 100\r\n\r\n\r\nCONFIG.CHECKPOINT = edict()\r\nCONFIG.CHECKPOINT.SAVE_INTERVAL = 1000","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/88/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/88/timeline","performed_via_github_app":null,"state_reason":null}