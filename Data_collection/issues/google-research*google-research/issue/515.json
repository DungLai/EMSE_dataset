{"url":"https://api.github.com/repos/google-research/google-research/issues/515","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/515/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/515/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/515/events","html_url":"https://github.com/google-research/google-research/issues/515","id":781182909,"node_id":"MDU6SXNzdWU3ODExODI5MDk=","number":515,"title":"[uflow] error when evaluating model on sintel","user":{"login":"Kewenjing1020","id":15858931,"node_id":"MDQ6VXNlcjE1ODU4OTMx","avatar_url":"https://avatars.githubusercontent.com/u/15858931?v=4","gravatar_id":"","url":"https://api.github.com/users/Kewenjing1020","html_url":"https://github.com/Kewenjing1020","followers_url":"https://api.github.com/users/Kewenjing1020/followers","following_url":"https://api.github.com/users/Kewenjing1020/following{/other_user}","gists_url":"https://api.github.com/users/Kewenjing1020/gists{/gist_id}","starred_url":"https://api.github.com/users/Kewenjing1020/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kewenjing1020/subscriptions","organizations_url":"https://api.github.com/users/Kewenjing1020/orgs","repos_url":"https://api.github.com/users/Kewenjing1020/repos","events_url":"https://api.github.com/users/Kewenjing1020/events{/privacy}","received_events_url":"https://api.github.com/users/Kewenjing1020/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-01-07T09:53:15Z","updated_at":"2021-01-15T21:08:00Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, I've used the code to train model on sintel dataset. The training is not completed and I try to do evaluation on the mediate models. I use the script: \r\n```\r\npython3 -m uflow.uflow_evaluator --eval_on=\"sintel:uflow/data_tfrecords/sintel/test/clean\" --plot_dir=uflow/plot/sinte    l --checkpoint_dir=uflow/checkpoints/sintel\r\n```\r\nthen I get the following error:\r\n```\r\nI0107 17:50:51.010394 140387742058304 uflow_evaluator.py:61] New checkpoint found: uflow/checkpoints/sintel/ckpt-526\r\n2021-01-07 17:50:51.090070: W tensorflow/core/framework/op_kernel.cc:1655] OP_REQUIRES failed at example_parsing_ops.cc:476 : Invalid argument: I\r\nnconsistent number of elements for feature flow_uv: 0 vs 1\r\n2021-01-07 17:50:51.090382: W tensorflow/core/framework/op_kernel.cc:1655] OP_REQUIRES failed at iterator_ops.cc:941 : Invalid argument: Inconsis\r\ntent number of elements for feature flow_uv: 0 vs 1\r\n         [[{{node ParseSingleSequenceExample/ParseSequenceExample/ParseSequenceExampleV2}}]]\r\n2021-01-07 17:50:51.092987: W tensorflow/core/framework/op_kernel.cc:1655] OP_REQUIRES failed at example_parsing_ops.cc:476 : Invalid argument: I\r\nnconsistent number of elements for feature flow_uv: 0 vs 1\r\nTraceback (most recent call last):\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/eager/context.py\", line 1897, in execution_mo\r\nde\r\n    yield\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/data/ops/iterator_ops.py\", line 659, in _next\r\n_internal\r\n    output_shapes=self._flat_output_shapes)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_dataset_ops.py\", line 2479, in iterat\r\nor_get_next_sync\r\n    _ops.raise_from_not_ok_status(e, name)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 6606, in raise_from_n\r\not_ok_status\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Inconsistent number of elements for feature flow_uv: 0 vs 1\r\n         [[{{node ParseSingleSequenceExample/ParseSequenceExample/ParseSequenceExampleV2}}]] [Op:IteratorGetNextSync]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/proj/xcdhdstaff1/wenjingk/SLAM/google-research-master/uflow/uflow_evaluator.py\", line 98, in <module>\r\n    app.run(main)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/proj/xcdhdstaff1/wenjingk/SLAM/google-research-master/uflow/uflow_evaluator.py\", line 92, in main\r\n    evaluate()\r\n  File \"/proj/xcdhdstaff1/wenjingk/SLAM/google-research-master/uflow/uflow_evaluator.py\", line 66, in evaluate\r\n    eval_results = evaluate_fn(uflow)\r\n  File \"/proj/xcdhdstaff1/wenjingk/SLAM/uflow/uflow_data.py\", line 277, in eval_function\r\n    width, progress_bar, plot_dir, num_plots)\r\n  File \"/proj/xcdhdstaff1/wenjingk/SLAM/uflow/data/data_utils.py\", line 222, in evaluate\r\n    for test_batch in it:\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/data/ops/iterator_ops.py\", line 630, in __nex\r\nt__\r\n    return self.next()\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/data/ops/iterator_ops.py\", line 674, in next\r\n    return self._next_internal()\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/data/ops/iterator_ops.py\", line 665, in _next\r\n_internal\r\n    return structure.from_compatible_tensor_list(self._element_spec, ret)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/contextlib.py\", line 130, in __exit__\r\n    self.gen.throw(type, value, traceback)\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/eager/context.py\", line 1900, in execution_mo\r\nde\r\n    executor_new.wait()\r\n  File \"/scratch/workspace/wenjingk/anaconda-3.6/lib/python3.7/site-packages/tensorflow_core/python/eager/executor.py\", line 67, in wait\r\n    pywrap_tensorflow.TFE_ExecutorWaitForAllPendingNodes(self._handle)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Inconsistent number of elements for feature flow_uv: 0 vs 1\r\n         [[{{node ParseSingleSequenceExample/ParseSequenceExample/ParseSequenceExampleV2}}]]\r\n\r\nIf you suspect this is an IPython 7.12.0 bug, please report it at:\r\n    https://github.com/ipython/ipython/issues\r\nor send an email to the mailing list at ipython-dev@python.org\r\n\r\nYou can print a more detailed traceback right now with \"%tb\", or use \"%debug\"\r\nto interactively debug it.\r\n\r\nExtra-detailed tracebacks for bug-reporting purposes can be enabled via:\r\n    %config Application.verbose_crash=True\r\n\r\n```\r\nI think it's strange, because when i do evaluation on Chairs, it works well.  Could you help to fix this problem?\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/515/timeline","performed_via_github_app":null,"state_reason":null}