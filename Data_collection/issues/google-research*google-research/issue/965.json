{"url":"https://api.github.com/repos/google-research/google-research/issues/965","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/965/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/965/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/965/events","html_url":"https://github.com/google-research/google-research/issues/965","id":1120247014,"node_id":"I_kwDOCQmIhc5CxZzm","number":965,"title":"tf_trees gives segmentation fault","user":{"login":"rcshubhadeep","id":5349112,"node_id":"MDQ6VXNlcjUzNDkxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5349112?v=4","gravatar_id":"","url":"https://api.github.com/users/rcshubhadeep","html_url":"https://github.com/rcshubhadeep","followers_url":"https://api.github.com/users/rcshubhadeep/followers","following_url":"https://api.github.com/users/rcshubhadeep/following{/other_user}","gists_url":"https://api.github.com/users/rcshubhadeep/gists{/gist_id}","starred_url":"https://api.github.com/users/rcshubhadeep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcshubhadeep/subscriptions","organizations_url":"https://api.github.com/users/rcshubhadeep/orgs","repos_url":"https://api.github.com/users/rcshubhadeep/repos","events_url":"https://api.github.com/users/rcshubhadeep/events{/privacy}","received_events_url":"https://api.github.com/users/rcshubhadeep/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2022-02-01T05:18:01Z","updated_at":"2022-02-25T16:24:16Z","closed_at":"2022-02-03T04:32:59Z","author_association":"NONE","active_lock_reason":null,"body":"I have been trying to use tf_trees and although the compilation goes without any warning in a amazon linux (built on top of Fedora if I understood correctly) the demo.py fails with segmentation fault. Here is the specification of the machine\r\n\r\n```\r\nNAME=\"Amazon Linux AMI\"\r\nVERSION=\"2018.03\"\r\nID=\"amzn\"\r\nID_LIKE=\"rhel fedora\"\r\nVERSION_ID=\"2018.03\"\r\nPRETTY_NAME=\"Amazon Linux AMI 2018.03\"\r\nANSI_COLOR=\"0;33\"\r\nCPE_NAME=\"cpe:/o:amazon:linux:2018.03:ga\"\r\nHOME_URL=\"http://aws.amazon.com/amazon-linux-ami/\"\r\nAmazon Linux AMI release 2018.03\r\n```\r\n\r\nI cannot compile the same on a colab (which is an ubuntu environment). \r\n\r\n```\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=18.04\r\nDISTRIB_CODENAME=bionic\r\nDISTRIB_DESCRIPTION=\"Ubuntu 18.04.5 LTS\"\r\nNAME=\"Ubuntu\"\r\nVERSION=\"18.04.5 LTS (Bionic Beaver)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 18.04.5 LTS\"\r\nVERSION_ID=\"18.04\"\r\nHOME_URL=\"https://www.ubuntu.com/\"\r\nSUPPORT_URL=\"https://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\r\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\r\nVERSION_CODENAME=bionic\r\nUBUNTU_CODENAME=bionic\r\n```\r\n\r\nwhen I try to compile it prints the following and does not produce the `.so`  file\r\n\r\n```\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/partial_tensor_shape.h:20:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/attr_value_util.h:23,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/node_def_util.h:23,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/full_type_util.h:24,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op.h:24,\r\n                 from neural_trees_ops.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_shape.h:305:22: warning: ‘tensorflow::int64’ is deprecated: Use int64_t instead. [-Wdeprecated-declarations]\r\n   gtl::InlinedVector<int64, 4> dim_sizes() const;\r\n                      ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/types.h:31:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/logging.h:20,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/errors.h:24,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/lib/core/errors.h:19,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_shape.h:23,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/partial_tensor_shape.h:20,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/attr_value_util.h:23,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/node_def_util.h:23,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/full_type_util.h:24,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op.h:24,\r\n                 from neural_trees_ops.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/integral_types.h:29:63: note: declared here\r\n [[deprecated(\"Use int64_t instead.\")]] typedef ::std::int64_t int64;\r\n                                                               ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor.h:25:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/attr_value_util.h:24,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/node_def_util.h:23,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/full_type_util.h:24,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op.h:24,\r\n                 from neural_trees_ops.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h: In member function ‘void tensorflow::internal::MaybeWith32BitIndexingImpl<Eigen::GpuDevice>::operator()(Func, Args&& ...) const’:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:176:25: error: use of ‘auto’ in lambda parameter declaration only available with -std=c++14 or -std=gnu++14\r\n     auto all = [](const auto&... bool_vals) {\r\n                         ^~~~\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:176:34: error: expansion pattern ‘const int&’ contains no argument packs\r\n     auto all = [](const auto&... bool_vals) {\r\n                                  ^~~~~~~~~\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h: In lambda function:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:177:22: error: ‘bool_vals’ was not declared in this scope\r\n       for (bool b : {bool_vals...}) {\r\n                      ^~~~~~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/notification.h:27:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/lib/core/notification.h:21,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/cancellation.h:22,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:27,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_kernels.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/notification.h:61:65: warning: ‘int64’ is deprecated [-Wdeprecated-declarations]\r\n                                              int64 timeout_in_us);\r\n                                                                 ^\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/notification.h:62:58: warning: ‘int64’ is deprecated [-Wdeprecated-declarations]\r\n   bool WaitForNotificationWithTimeout(int64 timeout_in_us) {\r\n                                                          ^\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/notification.h:81:63: warning: ‘int64’ is deprecated [-Wdeprecated-declarations]\r\n                                            int64 timeout_in_us) {\r\n                                                               ^\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor.h:24:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/device_base.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:29,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_kernels.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_shape.h:305:22: warning: ‘tensorflow::int64’ is deprecated: Use int64_t instead. [-Wdeprecated-declarations]\r\n   gtl::InlinedVector<int64, 4> dim_sizes() const;\r\n                      ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/types.h:31:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/numeric_types.h:27,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/allocator.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:26,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_kernels.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/integral_types.h:29:63: note: declared here\r\n [[deprecated(\"Use int64_t instead.\")]] typedef ::std::int64_t int64;\r\n                                                               ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor.h:25:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/device_base.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:29,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_kernels.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h: In member function ‘void tensorflow::internal::MaybeWith32BitIndexingImpl<Eigen::GpuDevice>::operator()(Func, Args&& ...) const’:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:176:25: error: use of ‘auto’ in lambda parameter declaration only available with -std=c++14 or -std=gnu++14\r\n     auto all = [](const auto&... bool_vals) {\r\n                         ^~~~\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:176:34: error: expansion pattern ‘const int&’ contains no argument packs\r\n     auto all = [](const auto&... bool_vals) {\r\n                                  ^~~~~~~~~\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h: In lambda function:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:177:22: error: ‘bool_vals’ was not declared in this scope\r\n       for (bool b : {bool_vals...}) {\r\n                      ^~~~~~~~~\r\nneural_trees_kernels.cc: In member function ‘virtual void tensorflow::NTComputeInputAndInternalParamsGradientsOp::Compute(tensorflow::OpKernelContext*)’:\r\nneural_trees_kernels.cc:141:19: warning: ‘tensorflow::int64’ is deprecated: Use int64_t instead. [-Wdeprecated-declarations]\r\n       const int64 cost = 10000 * std::log10(input_dim) * std::log2(num_leaves);\r\n                   ^~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/types.h:31:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/numeric_types.h:27,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/allocator.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:26,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_kernels.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/integral_types.h:29:63: note: declared here\r\n [[deprecated(\"Use int64_t instead.\")]] typedef ::std::int64_t int64;\r\n                                                               ^~~~~\r\nneural_trees_kernels.cc: In member function ‘virtual void tensorflow::NTComputeOutputOp::Compute(tensorflow::OpKernelContext*)’:\r\nneural_trees_kernels.cc:274:19: warning: ‘tensorflow::int64’ is deprecated: Use int64_t instead. [-Wdeprecated-declarations]\r\n       const int64 cost = 10000 * std::log10(input_dim) * std::log2(num_leaves);\r\n                   ^~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/types.h:31:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/numeric_types.h:27,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/allocator.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:26,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_kernels.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/integral_types.h:29:63: note: declared here\r\n [[deprecated(\"Use int64_t instead.\")]] typedef ::std::int64_t int64;\r\n                                                               ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/notification.h:27:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/lib/core/notification.h:21,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/cancellation.h:22,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:27,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_helpers.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/notification.h:61:65: warning: ‘int64’ is deprecated [-Wdeprecated-declarations]\r\n                                              int64 timeout_in_us);\r\n                                                                 ^\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/notification.h:62:58: warning: ‘int64’ is deprecated [-Wdeprecated-declarations]\r\n   bool WaitForNotificationWithTimeout(int64 timeout_in_us) {\r\n                                                          ^\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/notification.h:81:63: warning: ‘int64’ is deprecated [-Wdeprecated-declarations]\r\n                                            int64 timeout_in_us) {\r\n                                                               ^\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor.h:24:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/device_base.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:29,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_helpers.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_shape.h:305:22: warning: ‘tensorflow::int64’ is deprecated: Use int64_t instead. [-Wdeprecated-declarations]\r\n   gtl::InlinedVector<int64, 4> dim_sizes() const;\r\n                      ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/types.h:31:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/numeric_types.h:27,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/allocator.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:26,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_helpers.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/platform/default/integral_types.h:29:63: note: declared here\r\n [[deprecated(\"Use int64_t instead.\")]] typedef ::std::int64_t int64;\r\n                                                               ^~~~~\r\nIn file included from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor.h:25:0,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/device_base.h:26,\r\n                 from /usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:29,\r\n                 from neural_trees_helpers.h:17,\r\n                 from neural_trees_helpers.cc:15:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h: In member function ‘void tensorflow::internal::MaybeWith32BitIndexingImpl<Eigen::GpuDevice>::operator()(Func, Args&& ...) const’:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:176:25: error: use of ‘auto’ in lambda parameter declaration only available with -std=c++14 or -std=gnu++14\r\n     auto all = [](const auto&... bool_vals) {\r\n                         ^~~~\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:176:34: error: expansion pattern ‘const int&’ contains no argument packs\r\n     auto all = [](const auto&... bool_vals) {\r\n                                  ^~~~~~~~~\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h: In lambda function:\r\n/usr/local/lib/python3.7/dist-packages/tensorflow/include/tensorflow/core/framework/tensor_types.h:177:22: error: ‘bool_vals’ was not declared in this scope\r\n       for (bool b : {bool_vals...}) {\r\n                      ^~~~~~~~~\r\n```\r\n\r\nWhat can I do? I would have loved to try it, modify it, and use it in my project. \r\n\r\nPlease help","closed_by":{"login":"rcshubhadeep","id":5349112,"node_id":"MDQ6VXNlcjUzNDkxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5349112?v=4","gravatar_id":"","url":"https://api.github.com/users/rcshubhadeep","html_url":"https://github.com/rcshubhadeep","followers_url":"https://api.github.com/users/rcshubhadeep/followers","following_url":"https://api.github.com/users/rcshubhadeep/following{/other_user}","gists_url":"https://api.github.com/users/rcshubhadeep/gists{/gist_id}","starred_url":"https://api.github.com/users/rcshubhadeep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcshubhadeep/subscriptions","organizations_url":"https://api.github.com/users/rcshubhadeep/orgs","repos_url":"https://api.github.com/users/rcshubhadeep/repos","events_url":"https://api.github.com/users/rcshubhadeep/events{/privacy}","received_events_url":"https://api.github.com/users/rcshubhadeep/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/965/timeline","performed_via_github_app":null,"state_reason":"completed"}