{"url":"https://api.github.com/repos/google-research/google-research/issues/896","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/896/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/896/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/896/events","html_url":"https://github.com/google-research/google-research/issues/896","id":1054693140,"node_id":"I_kwDOCQmIhc4-3VcU","number":896,"title":"Coltran: Need help on Flow for training and evaluation on custom dataset","user":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2021-11-16T10:14:27Z","updated_at":"2022-04-07T20:37:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"- ### How long do I need to train on a custom dataset? \r\n- ### How do I know if the training is complete?\r\n- ### How to get the result/output for a custom dataset?\r\n- ### How to calculate the FID?\r\n\r\nI am using this Notebook, for training on the cityscapes dataset.\r\n[Link to Colab Notebook](https://colab.research.google.com/drive/1hG5t2djdrToWGyQdvGJ3Sf_DkDfWi5jE?usp=sharing)\r\n\r\nI trained the model on colab (till GPU resource got exhausted), got around 23 checkpoints.\r\n```\r\nI1115 14:34:04.833563 140478266419072 run.py:286] Saved checkpoint to /content/drive/MyDrive/Colab_Work/HONORS/ColTran-v2/google-research/coltran/logs/cityscapes_ckpt/model-20\r\nI1115 14:37:47.372999 140478266419072 run.py:282] Loss: 0.549 bits/dim, Speed: 0.449 steps/second\r\nI1115 14:41:29.732624 140478266419072 run.py:282] Loss: 0.507 bits/dim, Speed: 0.450 steps/second\r\nI1115 14:45:12.382166 140478266419072 run.py:282] Loss: 0.507 bits/dim, Speed: 0.449 steps/second\r\nI1115 14:48:54.532032 140478266419072 run.py:282] Loss: 0.497 bits/dim, Speed: 0.450 steps/second\r\nI1115 14:52:36.791089 140478266419072 run.py:282] Loss: 0.529 bits/dim, Speed: 0.450 steps/second\r\nI1115 14:52:40.168719 140478266419072 run.py:286] Saved checkpoint to /content/drive/MyDrive/Colab_Work/HONORS/ColTran-v2/google-research/coltran/logs/cityscapes_ckpt/model-21\r\nI1115 14:56:22.615087 140478266419072 run.py:282] Loss: 0.530 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:00:05.021047 140478266419072 run.py:282] Loss: 0.522 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:03:47.351305 140478266419072 run.py:282] Loss: 0.489 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:07:29.647610 140478266419072 run.py:282] Loss: 0.528 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:11:11.850597 140478266419072 run.py:282] Loss: 0.550 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:11:15.348102 140478266419072 run.py:286] Saved checkpoint to /content/drive/MyDrive/Colab_Work/HONORS/ColTran-v2/google-research/coltran/logs/cityscapes_ckpt/model-22\r\nI1115 15:14:58.002671 140478266419072 run.py:282] Loss: 0.542 bits/dim, Speed: 0.449 steps/second\r\nI1115 15:18:40.301140 140478266419072 run.py:282] Loss: 0.501 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:22:22.593688 140478266419072 run.py:282] Loss: 0.528 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:26:05.144472 140478266419072 run.py:282] Loss: 0.499 bits/dim, Speed: 0.449 steps/second\r\n```\r\n- How long / which step / loss value should I continue to train?\r\n- Any parameters which need to be changed? (I did change the batch size as mentioned here #838)\r\n\r\nNext, after training on a custom dataset, \r\nhow to evaluate the model or obtain the results of colorized/recolorized images?\r\n\r\nI used this cmd, but I guess it works only for imagenet dataset.\r\n\r\n```\r\npython -m coltran.run --config=coltran/configs/colorizer.py --mode=eval_valid --logdir=$LOGDIR --dataset=custom --data_dir=$EVAL_DATA_DIR \r\n```\r\n\r\nNow, I am trying to use this (see the notebook for the next 2 steps)\r\n\r\n```\r\npython -m coltran.custom_colorize --config=coltran/configs/colorizer.py --logdir=$LOGDIR --img_dir=$IMG_DIR --store_dir=$STORE_DIR --mode=$MODE\r\n```\r\n\r\nCan someone please tell me if I am following the correct commands for getting the output?\r\nA step-by-step guide would be appreciated. I am getting confused about which flow to follow.\r\n\r\n- Is there any recommended way or package to calculate the FID scores to compare the results with the paper?\r\n\r\nAlso, the paper mentions 3 different coloured outputs for one input bnw image. \r\n![image](https://user-images.githubusercontent.com/42700922/141965832-818ac5a5-ee6e-4649-9794-e85d9434a555.png)\r\nHow to get such results?\r\n\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/896/timeline","performed_via_github_app":null,"state_reason":null}