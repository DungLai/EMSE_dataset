[{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/651496571","html_url":"https://github.com/google-research/google-research/issues/312#issuecomment-651496571","issue_url":"https://api.github.com/repos/google-research/google-research/issues/312","id":651496571,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTQ5NjU3MQ==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T03:05:16Z","updated_at":"2020-06-30T03:05:16Z","author_association":"CONTRIBUTOR","body":"Thank you for evaluating kws_streaming!\r\n\r\n_\"1.When I run inference.ipynb, the error occurs.\"_\r\nThank you for reporting this issue. ipynb is outdated. The fix will be in couple of days.\r\n\r\n_\"2.How can I know the predicted label after inference?\"_\r\nPlease have a look at [check-data](https://github.com/google-research/google-research/blob/master/kws_streaming/colab/check-data.ipynb). It has an example of mapping index_to_label:\r\n{1: '_unknown_',\r\n 5: 'down',\r\n 11: 'go',\r\n 3: 'no',\r\n 7: 'right',\r\n 8: 'on',\r\n 6: 'left',\r\n 2: 'yes',\r\n 9: 'off',\r\n 4: 'up',\r\n 10: 'stop',\r\n 0: '_silence_'}\r\n\r\nunknown=1 and silence=0 always.\r\nI will update notebooks with more details and then post another comment here.\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/651496571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652016146","html_url":"https://github.com/google-research/google-research/issues/312#issuecomment-652016146","issue_url":"https://api.github.com/repos/google-research/google-research/issues/312","id":652016146,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjAxNjE0Ng==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T20:08:21Z","updated_at":"2020-06-30T20:08:21Z","author_association":"CONTRIBUTOR","body":"I have updated colabs, please run them one by one:\r\n\r\n1. [00_check_data](https://github.com/google-research/google-research/blob/master/kws_streaming/colab/00_check_data.ipynb) it shows index_to_label and will prepare data set v2\r\n\r\n2. [01_train](https://github.com/google-research/google-research/blob/master/kws_streaming/colab/01_train.ipynb) it will train a model (with small number of iterations, so accuracy will not be high) this step is optional.\r\n\r\n3. [02_inference](https://github.com/google-research/google-research/blob/master/kws_streaming/colab/02_inference.ipynb) it will run inference on pre-trained models (I added a remapping from id to word)\r\n\r\nPlease let me know if you have any questions or issues.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652016146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652161052","html_url":"https://github.com/google-research/google-research/issues/312#issuecomment-652161052","issue_url":"https://api.github.com/repos/google-research/google-research/issues/312","id":652161052,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjE2MTA1Mg==","user":{"login":"ChuHengLee","id":44760575,"node_id":"MDQ6VXNlcjQ0NzYwNTc1","avatar_url":"https://avatars.githubusercontent.com/u/44760575?v=4","gravatar_id":"","url":"https://api.github.com/users/ChuHengLee","html_url":"https://github.com/ChuHengLee","followers_url":"https://api.github.com/users/ChuHengLee/followers","following_url":"https://api.github.com/users/ChuHengLee/following{/other_user}","gists_url":"https://api.github.com/users/ChuHengLee/gists{/gist_id}","starred_url":"https://api.github.com/users/ChuHengLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChuHengLee/subscriptions","organizations_url":"https://api.github.com/users/ChuHengLee/orgs","repos_url":"https://api.github.com/users/ChuHengLee/repos","events_url":"https://api.github.com/users/ChuHengLee/events{/privacy}","received_events_url":"https://api.github.com/users/ChuHengLee/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T03:10:02Z","updated_at":"2020-07-01T05:19:47Z","author_association":"NONE","body":"Thank you for updating the files.\r\n\r\nThe issues are following:\r\n1. In 01_train, \"FLAGS.data_url\" should be set to empty string to avoid error.\r\n2. I printed \"index_to_label[stream_output_arg]\" in streaming mode with external state. And I found that \"left\" appears in the beginning of inference whatever audio files were used. Why it would not be \"unknown\"?\r\n= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =\r\nThe ouput example of infering \"/kws_streaming/data2/on/fb7c9b3b_nohash_0.wav\"\r\n![on_example](https://user-images.githubusercontent.com/44760575/86198151-87b63380-bb89-11ea-8336-a24477109766.png)\r\n= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =\r\n3. I am interested in detecting multiple keywords in streaming mode. Do you have any advice?  \r\n\r\nThanks again!","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652161052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ChuHengLee","id":44760575,"node_id":"MDQ6VXNlcjQ0NzYwNTc1","avatar_url":"https://avatars.githubusercontent.com/u/44760575?v=4","gravatar_id":"","url":"https://api.github.com/users/ChuHengLee","html_url":"https://github.com/ChuHengLee","followers_url":"https://api.github.com/users/ChuHengLee/followers","following_url":"https://api.github.com/users/ChuHengLee/following{/other_user}","gists_url":"https://api.github.com/users/ChuHengLee/gists{/gist_id}","starred_url":"https://api.github.com/users/ChuHengLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChuHengLee/subscriptions","organizations_url":"https://api.github.com/users/ChuHengLee/orgs","repos_url":"https://api.github.com/users/ChuHengLee/repos","events_url":"https://api.github.com/users/ChuHengLee/events{/privacy}","received_events_url":"https://api.github.com/users/ChuHengLee/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652237499","html_url":"https://github.com/google-research/google-research/issues/312#issuecomment-652237499","issue_url":"https://api.github.com/repos/google-research/google-research/issues/312","id":652237499,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjIzNzQ5OQ==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T07:13:07Z","updated_at":"2020-07-01T07:13:07Z","author_association":"CONTRIBUTOR","body":"1 Please update both colab and kws code, so there will be no issues with data_url in colab (setting it to empty string in colab works too).\r\n\r\n2 Speech commands data with 10 + 2 categories is a toy data set.\r\nIt has: \r\ntraining_set_size 22,246\r\ntesting_set_size 3,081\r\nvalidation_set_size 3,093\r\nTo be able to classify all other unknown sounds with better accuracy you will need to prepare more negative/\"unknown\" examples and use larger data sets.\r\nAlso [models2_30k.zip](https://storage.googleapis.com/kws_models/models2_30k.zip) which are used in [02_inference.ipynb](https://github.com/google-research/google-research/blob/master/kws_streaming/colab/02_inference.ipynb) are realy toy models with 30K parameters.\r\nThese kind of models can be good for microcontrollers with limited cpu and memory.\r\n\r\n3.1 If you do not have limitations on model size, I would suggest to look at [models2](https://storage.googleapis.com/kws_models/models2.zip) published in our [paper](https://arxiv.org/abs/2005.06720) and its quantizerd version [models2_q](https://storage.googleapis.com/kws_models/models2_q.zip). These models are well suited for mobile phones: have more parameters with better accuracy. You can also use more accurate non streaming models and run them every 50ms (for example). Some of non streaming models (with stride and pooling) can be converted to streaming mode (it just not implemented in kws, please feel free to convert them and contribute)\r\n3.2 When you run your model in streaming mode you should analyze not only predicted word, but its confidence level too\r\nIn the this collab example: [02_inference.zip](https://github.com/google-research/google-research/files/4856123/02_inference.zip), I showed both predicted word and confidence level of predicted word in streaming mode. You can see that with more data in time, confidence level grows and it has highest value in the end of the word. So in addition to checking what is the current word you should also compare its confidence level with a threshold (and check that it is a local maximum). Also detection events should be smoothed: for example trigger word detection if it was detected 5 times in the last 100ms of audio.\r\nI would also suggest to compute more metrics for example streaming false alarm and false reject per hour (in our paper we use accuracy metric only for academic purpose and comparison with other previously published work).\r\n3.3 There can be false positives on short words such as \"on\". For example \"on\" can be detected in words \"common\", \"lemon\", etc\r\n3.3 Use more data\r\n\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652237499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652714794","html_url":"https://github.com/google-research/google-research/issues/312#issuecomment-652714794","issue_url":"https://api.github.com/repos/google-research/google-research/issues/312","id":652714794,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjcxNDc5NA==","user":{"login":"ChuHengLee","id":44760575,"node_id":"MDQ6VXNlcjQ0NzYwNTc1","avatar_url":"https://avatars.githubusercontent.com/u/44760575?v=4","gravatar_id":"","url":"https://api.github.com/users/ChuHengLee","html_url":"https://github.com/ChuHengLee","followers_url":"https://api.github.com/users/ChuHengLee/followers","following_url":"https://api.github.com/users/ChuHengLee/following{/other_user}","gists_url":"https://api.github.com/users/ChuHengLee/gists{/gist_id}","starred_url":"https://api.github.com/users/ChuHengLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChuHengLee/subscriptions","organizations_url":"https://api.github.com/users/ChuHengLee/orgs","repos_url":"https://api.github.com/users/ChuHengLee/repos","events_url":"https://api.github.com/users/ChuHengLee/events{/privacy}","received_events_url":"https://api.github.com/users/ChuHengLee/received_events","type":"User","site_admin":false},"created_at":"2020-07-02T00:43:37Z","updated_at":"2020-07-02T00:43:37Z","author_association":"NONE","body":"Thank you for your advice.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/652714794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ChuHengLee","id":44760575,"node_id":"MDQ6VXNlcjQ0NzYwNTc1","avatar_url":"https://avatars.githubusercontent.com/u/44760575?v=4","gravatar_id":"","url":"https://api.github.com/users/ChuHengLee","html_url":"https://github.com/ChuHengLee","followers_url":"https://api.github.com/users/ChuHengLee/followers","following_url":"https://api.github.com/users/ChuHengLee/following{/other_user}","gists_url":"https://api.github.com/users/ChuHengLee/gists{/gist_id}","starred_url":"https://api.github.com/users/ChuHengLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChuHengLee/subscriptions","organizations_url":"https://api.github.com/users/ChuHengLee/orgs","repos_url":"https://api.github.com/users/ChuHengLee/repos","events_url":"https://api.github.com/users/ChuHengLee/events{/privacy}","received_events_url":"https://api.github.com/users/ChuHengLee/received_events","type":"User","site_admin":false}},{"id":3504788512,"node_id":"MDExOkNsb3NlZEV2ZW50MzUwNDc4ODUxMg==","url":"https://api.github.com/repos/google-research/google-research/issues/events/3504788512","actor":{"login":"ChuHengLee","id":44760575,"node_id":"MDQ6VXNlcjQ0NzYwNTc1","avatar_url":"https://avatars.githubusercontent.com/u/44760575?v=4","gravatar_id":"","url":"https://api.github.com/users/ChuHengLee","html_url":"https://github.com/ChuHengLee","followers_url":"https://api.github.com/users/ChuHengLee/followers","following_url":"https://api.github.com/users/ChuHengLee/following{/other_user}","gists_url":"https://api.github.com/users/ChuHengLee/gists{/gist_id}","starred_url":"https://api.github.com/users/ChuHengLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChuHengLee/subscriptions","organizations_url":"https://api.github.com/users/ChuHengLee/orgs","repos_url":"https://api.github.com/users/ChuHengLee/repos","events_url":"https://api.github.com/users/ChuHengLee/events{/privacy}","received_events_url":"https://api.github.com/users/ChuHengLee/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-07-02T00:43:37Z","state_reason":null,"performed_via_github_app":null}]