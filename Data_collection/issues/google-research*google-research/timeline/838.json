[{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/930699980","html_url":"https://github.com/google-research/google-research/issues/838#issuecomment-930699980","issue_url":"https://api.github.com/repos/google-research/google-research/issues/838","id":930699980,"node_id":"IC_kwDOCQmIhc43eVrM","user":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false},"created_at":"2021-09-30T02:31:06Z","updated_at":"2021-09-30T02:31:06Z","author_association":"CONTRIBUTOR","body":"I hardcoded the battch-size for the spatial upsampler here to be 5. Could you change it and see if it works? (https://github.com/google-research/google-research/blob/master/coltran/custom_colorize.py#L168)\r\n\r\nYou could also set the `--batch_size` flag instead,","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/930699980/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/944412288","html_url":"https://github.com/google-research/google-research/issues/838#issuecomment-944412288","issue_url":"https://api.github.com/repos/google-research/google-research/issues/838","id":944412288,"node_id":"IC_kwDOCQmIhc44SpaA","user":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false},"created_at":"2021-10-15T15:55:29Z","updated_at":"2021-10-15T15:55:29Z","author_association":"CONTRIBUTOR","body":"Did this fix your issue? Thanks!","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/944412288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/944454998","html_url":"https://github.com/google-research/google-research/issues/838#issuecomment-944454998","issue_url":"https://api.github.com/repos/google-research/google-research/issues/838","id":944454998,"node_id":"IC_kwDOCQmIhc44Sz1W","user":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"created_at":"2021-10-15T17:00:49Z","updated_at":"2021-10-15T17:00:49Z","author_association":"NONE","body":"Yes, I missed updating it here.\r\nThank you.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/944454998/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false}},{"id":5470988850,"node_id":"CE_lADOCQmIhc48O8v7zwAAAAFGGKoy","url":"https://api.github.com/repos/google-research/google-research/issues/events/5470988850","actor":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-10-15T17:00:49Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"created_at":"2021-11-16T10:14:27Z","updated_at":"2021-11-16T10:14:27Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/google-research/google-research/issues/896","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/896/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/896/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/896/events","html_url":"https://github.com/google-research/google-research/issues/896","id":1054693140,"node_id":"I_kwDOCQmIhc4-3VcU","number":896,"title":"Coltran: Need help on Flow for training and evaluation on custom dataset","user":{"login":"ketan-lambat","id":42700922,"node_id":"MDQ6VXNlcjQyNzAwOTIy","avatar_url":"https://avatars.githubusercontent.com/u/42700922?v=4","gravatar_id":"","url":"https://api.github.com/users/ketan-lambat","html_url":"https://github.com/ketan-lambat","followers_url":"https://api.github.com/users/ketan-lambat/followers","following_url":"https://api.github.com/users/ketan-lambat/following{/other_user}","gists_url":"https://api.github.com/users/ketan-lambat/gists{/gist_id}","starred_url":"https://api.github.com/users/ketan-lambat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketan-lambat/subscriptions","organizations_url":"https://api.github.com/users/ketan-lambat/orgs","repos_url":"https://api.github.com/users/ketan-lambat/repos","events_url":"https://api.github.com/users/ketan-lambat/events{/privacy}","received_events_url":"https://api.github.com/users/ketan-lambat/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2021-11-16T10:14:27Z","updated_at":"2022-04-07T20:37:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"repository":{"id":151619717,"node_id":"MDEwOlJlcG9zaXRvcnkxNTE2MTk3MTc=","name":"google-research","full_name":"google-research/google-research","private":false,"owner":{"login":"google-research","id":43830688,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQzODMwNjg4","avatar_url":"https://avatars.githubusercontent.com/u/43830688?v=4","gravatar_id":"","url":"https://api.github.com/users/google-research","html_url":"https://github.com/google-research","followers_url":"https://api.github.com/users/google-research/followers","following_url":"https://api.github.com/users/google-research/following{/other_user}","gists_url":"https://api.github.com/users/google-research/gists{/gist_id}","starred_url":"https://api.github.com/users/google-research/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/google-research/subscriptions","organizations_url":"https://api.github.com/users/google-research/orgs","repos_url":"https://api.github.com/users/google-research/repos","events_url":"https://api.github.com/users/google-research/events{/privacy}","received_events_url":"https://api.github.com/users/google-research/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/google-research/google-research","description":"Google Research","fork":false,"url":"https://api.github.com/repos/google-research/google-research","forks_url":"https://api.github.com/repos/google-research/google-research/forks","keys_url":"https://api.github.com/repos/google-research/google-research/keys{/key_id}","collaborators_url":"https://api.github.com/repos/google-research/google-research/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/google-research/google-research/teams","hooks_url":"https://api.github.com/repos/google-research/google-research/hooks","issue_events_url":"https://api.github.com/repos/google-research/google-research/issues/events{/number}","events_url":"https://api.github.com/repos/google-research/google-research/events","assignees_url":"https://api.github.com/repos/google-research/google-research/assignees{/user}","branches_url":"https://api.github.com/repos/google-research/google-research/branches{/branch}","tags_url":"https://api.github.com/repos/google-research/google-research/tags","blobs_url":"https://api.github.com/repos/google-research/google-research/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/google-research/google-research/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/google-research/google-research/git/refs{/sha}","trees_url":"https://api.github.com/repos/google-research/google-research/git/trees{/sha}","statuses_url":"https://api.github.com/repos/google-research/google-research/statuses/{sha}","languages_url":"https://api.github.com/repos/google-research/google-research/languages","stargazers_url":"https://api.github.com/repos/google-research/google-research/stargazers","contributors_url":"https://api.github.com/repos/google-research/google-research/contributors","subscribers_url":"https://api.github.com/repos/google-research/google-research/subscribers","subscription_url":"https://api.github.com/repos/google-research/google-research/subscription","commits_url":"https://api.github.com/repos/google-research/google-research/commits{/sha}","git_commits_url":"https://api.github.com/repos/google-research/google-research/git/commits{/sha}","comments_url":"https://api.github.com/repos/google-research/google-research/comments{/number}","issue_comment_url":"https://api.github.com/repos/google-research/google-research/issues/comments{/number}","contents_url":"https://api.github.com/repos/google-research/google-research/contents/{+path}","compare_url":"https://api.github.com/repos/google-research/google-research/compare/{base}...{head}","merges_url":"https://api.github.com/repos/google-research/google-research/merges","archive_url":"https://api.github.com/repos/google-research/google-research/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/google-research/google-research/downloads","issues_url":"https://api.github.com/repos/google-research/google-research/issues{/number}","pulls_url":"https://api.github.com/repos/google-research/google-research/pulls{/number}","milestones_url":"https://api.github.com/repos/google-research/google-research/milestones{/number}","notifications_url":"https://api.github.com/repos/google-research/google-research/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/google-research/google-research/labels{/name}","releases_url":"https://api.github.com/repos/google-research/google-research/releases{/id}","deployments_url":"https://api.github.com/repos/google-research/google-research/deployments","created_at":"2018-10-04T18:42:48Z","updated_at":"2023-01-20T00:41:48Z","pushed_at":"2023-01-19T23:45:46Z","git_url":"git://github.com/google-research/google-research.git","ssh_url":"git@github.com:google-research/google-research.git","clone_url":"https://github.com/google-research/google-research.git","svn_url":"https://github.com/google-research/google-research","homepage":"https://research.google","size":371210,"stargazers_count":26828,"watchers_count":26828,"language":"Jupyter Notebook","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":6663,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":904,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ai","machine-learning","research"],"visibility":"public","forks":6663,"open_issues":904,"watchers":26828,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"- ### How long do I need to train on a custom dataset? \r\n- ### How do I know if the training is complete?\r\n- ### How to get the result/output for a custom dataset?\r\n- ### How to calculate the FID?\r\n\r\nI am using this Notebook, for training on the cityscapes dataset.\r\n[Link to Colab Notebook](https://colab.research.google.com/drive/1hG5t2djdrToWGyQdvGJ3Sf_DkDfWi5jE?usp=sharing)\r\n\r\nI trained the model on colab (till GPU resource got exhausted), got around 23 checkpoints.\r\n```\r\nI1115 14:34:04.833563 140478266419072 run.py:286] Saved checkpoint to /content/drive/MyDrive/Colab_Work/HONORS/ColTran-v2/google-research/coltran/logs/cityscapes_ckpt/model-20\r\nI1115 14:37:47.372999 140478266419072 run.py:282] Loss: 0.549 bits/dim, Speed: 0.449 steps/second\r\nI1115 14:41:29.732624 140478266419072 run.py:282] Loss: 0.507 bits/dim, Speed: 0.450 steps/second\r\nI1115 14:45:12.382166 140478266419072 run.py:282] Loss: 0.507 bits/dim, Speed: 0.449 steps/second\r\nI1115 14:48:54.532032 140478266419072 run.py:282] Loss: 0.497 bits/dim, Speed: 0.450 steps/second\r\nI1115 14:52:36.791089 140478266419072 run.py:282] Loss: 0.529 bits/dim, Speed: 0.450 steps/second\r\nI1115 14:52:40.168719 140478266419072 run.py:286] Saved checkpoint to /content/drive/MyDrive/Colab_Work/HONORS/ColTran-v2/google-research/coltran/logs/cityscapes_ckpt/model-21\r\nI1115 14:56:22.615087 140478266419072 run.py:282] Loss: 0.530 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:00:05.021047 140478266419072 run.py:282] Loss: 0.522 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:03:47.351305 140478266419072 run.py:282] Loss: 0.489 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:07:29.647610 140478266419072 run.py:282] Loss: 0.528 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:11:11.850597 140478266419072 run.py:282] Loss: 0.550 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:11:15.348102 140478266419072 run.py:286] Saved checkpoint to /content/drive/MyDrive/Colab_Work/HONORS/ColTran-v2/google-research/coltran/logs/cityscapes_ckpt/model-22\r\nI1115 15:14:58.002671 140478266419072 run.py:282] Loss: 0.542 bits/dim, Speed: 0.449 steps/second\r\nI1115 15:18:40.301140 140478266419072 run.py:282] Loss: 0.501 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:22:22.593688 140478266419072 run.py:282] Loss: 0.528 bits/dim, Speed: 0.450 steps/second\r\nI1115 15:26:05.144472 140478266419072 run.py:282] Loss: 0.499 bits/dim, Speed: 0.449 steps/second\r\n```\r\n- How long / which step / loss value should I continue to train?\r\n- Any parameters which need to be changed? (I did change the batch size as mentioned here #838)\r\n\r\nNext, after training on a custom dataset, \r\nhow to evaluate the model or obtain the results of colorized/recolorized images?\r\n\r\nI used this cmd, but I guess it works only for imagenet dataset.\r\n\r\n```\r\npython -m coltran.run --config=coltran/configs/colorizer.py --mode=eval_valid --logdir=$LOGDIR --dataset=custom --data_dir=$EVAL_DATA_DIR \r\n```\r\n\r\nNow, I am trying to use this (see the notebook for the next 2 steps)\r\n\r\n```\r\npython -m coltran.custom_colorize --config=coltran/configs/colorizer.py --logdir=$LOGDIR --img_dir=$IMG_DIR --store_dir=$STORE_DIR --mode=$MODE\r\n```\r\n\r\nCan someone please tell me if I am following the correct commands for getting the output?\r\nA step-by-step guide would be appreciated. I am getting confused about which flow to follow.\r\n\r\n- Is there any recommended way or package to calculate the FID scores to compare the results with the paper?\r\n\r\nAlso, the paper mentions 3 different coloured outputs for one input bnw image. \r\n![image](https://user-images.githubusercontent.com/42700922/141965832-818ac5a5-ee6e-4649-9794-e85d9434a555.png)\r\nHow to get such results?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/896/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false},"created_at":"2021-11-22T18:58:03Z","updated_at":"2021-11-22T18:58:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/google-research/google-research/issues/902","repository_url":"https://api.github.com/repos/google-research/google-research","labels_url":"https://api.github.com/repos/google-research/google-research/issues/902/labels{/name}","comments_url":"https://api.github.com/repos/google-research/google-research/issues/902/comments","events_url":"https://api.github.com/repos/google-research/google-research/issues/902/events","html_url":"https://github.com/google-research/google-research/issues/902","id":1059166921,"node_id":"I_kwDOCQmIhc4_IZrJ","number":902,"title":"Notebook Error When Using Color Upsampler","user":{"login":"salqaryan","id":79908811,"node_id":"MDQ6VXNlcjc5OTA4ODEx","avatar_url":"https://avatars.githubusercontent.com/u/79908811?v=4","gravatar_id":"","url":"https://api.github.com/users/salqaryan","html_url":"https://github.com/salqaryan","followers_url":"https://api.github.com/users/salqaryan/followers","following_url":"https://api.github.com/users/salqaryan/following{/other_user}","gists_url":"https://api.github.com/users/salqaryan/gists{/gist_id}","starred_url":"https://api.github.com/users/salqaryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/salqaryan/subscriptions","organizations_url":"https://api.github.com/users/salqaryan/orgs","repos_url":"https://api.github.com/users/salqaryan/repos","events_url":"https://api.github.com/users/salqaryan/events{/privacy}","received_events_url":"https://api.github.com/users/salqaryan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-11-20T15:21:15Z","updated_at":"2021-11-29T14:17:18Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"repository":{"id":151619717,"node_id":"MDEwOlJlcG9zaXRvcnkxNTE2MTk3MTc=","name":"google-research","full_name":"google-research/google-research","private":false,"owner":{"login":"google-research","id":43830688,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQzODMwNjg4","avatar_url":"https://avatars.githubusercontent.com/u/43830688?v=4","gravatar_id":"","url":"https://api.github.com/users/google-research","html_url":"https://github.com/google-research","followers_url":"https://api.github.com/users/google-research/followers","following_url":"https://api.github.com/users/google-research/following{/other_user}","gists_url":"https://api.github.com/users/google-research/gists{/gist_id}","starred_url":"https://api.github.com/users/google-research/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/google-research/subscriptions","organizations_url":"https://api.github.com/users/google-research/orgs","repos_url":"https://api.github.com/users/google-research/repos","events_url":"https://api.github.com/users/google-research/events{/privacy}","received_events_url":"https://api.github.com/users/google-research/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/google-research/google-research","description":"Google Research","fork":false,"url":"https://api.github.com/repos/google-research/google-research","forks_url":"https://api.github.com/repos/google-research/google-research/forks","keys_url":"https://api.github.com/repos/google-research/google-research/keys{/key_id}","collaborators_url":"https://api.github.com/repos/google-research/google-research/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/google-research/google-research/teams","hooks_url":"https://api.github.com/repos/google-research/google-research/hooks","issue_events_url":"https://api.github.com/repos/google-research/google-research/issues/events{/number}","events_url":"https://api.github.com/repos/google-research/google-research/events","assignees_url":"https://api.github.com/repos/google-research/google-research/assignees{/user}","branches_url":"https://api.github.com/repos/google-research/google-research/branches{/branch}","tags_url":"https://api.github.com/repos/google-research/google-research/tags","blobs_url":"https://api.github.com/repos/google-research/google-research/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/google-research/google-research/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/google-research/google-research/git/refs{/sha}","trees_url":"https://api.github.com/repos/google-research/google-research/git/trees{/sha}","statuses_url":"https://api.github.com/repos/google-research/google-research/statuses/{sha}","languages_url":"https://api.github.com/repos/google-research/google-research/languages","stargazers_url":"https://api.github.com/repos/google-research/google-research/stargazers","contributors_url":"https://api.github.com/repos/google-research/google-research/contributors","subscribers_url":"https://api.github.com/repos/google-research/google-research/subscribers","subscription_url":"https://api.github.com/repos/google-research/google-research/subscription","commits_url":"https://api.github.com/repos/google-research/google-research/commits{/sha}","git_commits_url":"https://api.github.com/repos/google-research/google-research/git/commits{/sha}","comments_url":"https://api.github.com/repos/google-research/google-research/comments{/number}","issue_comment_url":"https://api.github.com/repos/google-research/google-research/issues/comments{/number}","contents_url":"https://api.github.com/repos/google-research/google-research/contents/{+path}","compare_url":"https://api.github.com/repos/google-research/google-research/compare/{base}...{head}","merges_url":"https://api.github.com/repos/google-research/google-research/merges","archive_url":"https://api.github.com/repos/google-research/google-research/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/google-research/google-research/downloads","issues_url":"https://api.github.com/repos/google-research/google-research/issues{/number}","pulls_url":"https://api.github.com/repos/google-research/google-research/pulls{/number}","milestones_url":"https://api.github.com/repos/google-research/google-research/milestones{/number}","notifications_url":"https://api.github.com/repos/google-research/google-research/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/google-research/google-research/labels{/name}","releases_url":"https://api.github.com/repos/google-research/google-research/releases{/id}","deployments_url":"https://api.github.com/repos/google-research/google-research/deployments","created_at":"2018-10-04T18:42:48Z","updated_at":"2023-01-20T00:41:48Z","pushed_at":"2023-01-19T23:45:46Z","git_url":"git://github.com/google-research/google-research.git","ssh_url":"git@github.com:google-research/google-research.git","clone_url":"https://github.com/google-research/google-research.git","svn_url":"https://github.com/google-research/google-research","homepage":"https://research.google","size":371210,"stargazers_count":26828,"watchers_count":26828,"language":"Jupyter Notebook","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":6663,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":904,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ai","machine-learning","research"],"visibility":"public","forks":6663,"open_issues":904,"watchers":26828,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi,\r\n\r\nMy input is a single .png format image, whenever I finish running stage1, stage2 (color upsampler) produces this error:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/content/google-research/coltran/custom_colorize.py\", line 244, in <module>\r\n    app.run(main)\r\n  File \"/usr/local/lib/python3.7/dist-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.7/dist-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/content/google-research/coltran/custom_colorize.py\", line 223, in main\r\n    out = model.sample(bit_cond=prev_gen, gray_cond=gray_64)\r\n  File \"/content/google-research/coltran/models/upsampler.py\", line 115, in sample\r\n    logits = self.upsampler(bit_cond, gray_cond, training=False)\r\n  File \"/content/google-research/coltran/models/upsampler.py\", line 101, in upsampler\r\n    channel = tf.concat((channel, gray_embed), axis=-1)\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/util/traceback_utils.py\", line 153, in error_handler\r\n    raise e.with_traceback(filtered_tb) from None\r\n  File \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/framework/ops.py\", line 7107, in raise_from_not_ok_status\r\n    raise core._status_to_exception(e) from None  # pylint: disable=protected-access\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: ConcatOp : Dimensions of inputs should match: shape[0] = [5,64,64,512] vs. shape[1] = [1,64,64,512] [Op:ConcatV2] name: concat\r\n\r\n\r\n\r\nWhat could be causing this?\r\nThank you\r\n\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google-research/google-research/issues/902/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1066153302","html_url":"https://github.com/google-research/google-research/issues/838#issuecomment-1066153302","issue_url":"https://api.github.com/repos/google-research/google-research/issues/838","id":1066153302,"node_id":"IC_kwDOCQmIhc4_jDVW","user":{"login":"haiderasad","id":55244143,"node_id":"MDQ6VXNlcjU1MjQ0MTQz","avatar_url":"https://avatars.githubusercontent.com/u/55244143?v=4","gravatar_id":"","url":"https://api.github.com/users/haiderasad","html_url":"https://github.com/haiderasad","followers_url":"https://api.github.com/users/haiderasad/followers","following_url":"https://api.github.com/users/haiderasad/following{/other_user}","gists_url":"https://api.github.com/users/haiderasad/gists{/gist_id}","starred_url":"https://api.github.com/users/haiderasad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haiderasad/subscriptions","organizations_url":"https://api.github.com/users/haiderasad/orgs","repos_url":"https://api.github.com/users/haiderasad/repos","events_url":"https://api.github.com/users/haiderasad/events{/privacy}","received_events_url":"https://api.github.com/users/haiderasad/received_events","type":"User","site_admin":false},"created_at":"2022-03-13T18:06:34Z","updated_at":"2022-03-13T18:07:08Z","author_association":"NONE","body":"hi i am having the same probelm with spatial upsampler part, it gives OOM so i have to run it on cpu by uncommenting the line 6 of custom_colorise, i get following error with gpu\r\n\r\n`OOM when allocating tensor with shape[1,256,256,4,256] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc [Op:Softmax]`\r\n\r\n`2022-03-13 23:04:55.443444: W tensorflow/core/common_runtime/bfc_allocator.cc:462] Allocator (GPU_0_bfc) ran out of memory trying to allocate 256.00MiB (rounded to 268435456)requested by op Softmax\r\n`\r\n\r\ni did try batch size 1 in custom_colorize still same error","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1066153302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"haiderasad","id":55244143,"node_id":"MDQ6VXNlcjU1MjQ0MTQz","avatar_url":"https://avatars.githubusercontent.com/u/55244143?v=4","gravatar_id":"","url":"https://api.github.com/users/haiderasad","html_url":"https://github.com/haiderasad","followers_url":"https://api.github.com/users/haiderasad/followers","following_url":"https://api.github.com/users/haiderasad/following{/other_user}","gists_url":"https://api.github.com/users/haiderasad/gists{/gist_id}","starred_url":"https://api.github.com/users/haiderasad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haiderasad/subscriptions","organizations_url":"https://api.github.com/users/haiderasad/orgs","repos_url":"https://api.github.com/users/haiderasad/repos","events_url":"https://api.github.com/users/haiderasad/events{/privacy}","received_events_url":"https://api.github.com/users/haiderasad/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1066485710","html_url":"https://github.com/google-research/google-research/issues/838#issuecomment-1066485710","issue_url":"https://api.github.com/repos/google-research/google-research/issues/838","id":1066485710,"node_id":"IC_kwDOCQmIhc4_kUfO","user":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false},"created_at":"2022-03-14T08:05:57Z","updated_at":"2022-03-14T08:06:30Z","author_association":"CONTRIBUTOR","body":"@haiderasad Can you try the hack mentioned in this blogpost? (https://habr.com/ru/company/ruvds/blog/563858/)\r\n\r\n```\r\nfrom tensorflow.keras import mixed_precision\r\nmixed_precision.set_global_policy('mixed_float16')\r\n```\r\n\r\nYou can save some memory by changing from float32 to float16.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1066485710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MechCoder","id":1867024,"node_id":"MDQ6VXNlcjE4NjcwMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1867024?v=4","gravatar_id":"","url":"https://api.github.com/users/MechCoder","html_url":"https://github.com/MechCoder","followers_url":"https://api.github.com/users/MechCoder/followers","following_url":"https://api.github.com/users/MechCoder/following{/other_user}","gists_url":"https://api.github.com/users/MechCoder/gists{/gist_id}","starred_url":"https://api.github.com/users/MechCoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MechCoder/subscriptions","organizations_url":"https://api.github.com/users/MechCoder/orgs","repos_url":"https://api.github.com/users/MechCoder/repos","events_url":"https://api.github.com/users/MechCoder/events{/privacy}","received_events_url":"https://api.github.com/users/MechCoder/received_events","type":"User","site_admin":false}},{"id":6233305950,"node_id":"MEE_lADOCQmIhc48O8v7zwAAAAFziLNe","url":"https://api.github.com/repos/google-research/google-research/issues/events/6233305950","actor":{"login":"haiderasad","id":55244143,"node_id":"MDQ6VXNlcjU1MjQ0MTQz","avatar_url":"https://avatars.githubusercontent.com/u/55244143?v=4","gravatar_id":"","url":"https://api.github.com/users/haiderasad","html_url":"https://github.com/haiderasad","followers_url":"https://api.github.com/users/haiderasad/followers","following_url":"https://api.github.com/users/haiderasad/following{/other_user}","gists_url":"https://api.github.com/users/haiderasad/gists{/gist_id}","starred_url":"https://api.github.com/users/haiderasad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haiderasad/subscriptions","organizations_url":"https://api.github.com/users/haiderasad/orgs","repos_url":"https://api.github.com/users/haiderasad/repos","events_url":"https://api.github.com/users/haiderasad/events{/privacy}","received_events_url":"https://api.github.com/users/haiderasad/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-03-14T08:05:57Z","performed_via_github_app":null},{"id":6233305956,"node_id":"SE_lADOCQmIhc48O8v7zwAAAAFziLNk","url":"https://api.github.com/repos/google-research/google-research/issues/events/6233305956","actor":{"login":"haiderasad","id":55244143,"node_id":"MDQ6VXNlcjU1MjQ0MTQz","avatar_url":"https://avatars.githubusercontent.com/u/55244143?v=4","gravatar_id":"","url":"https://api.github.com/users/haiderasad","html_url":"https://github.com/haiderasad","followers_url":"https://api.github.com/users/haiderasad/followers","following_url":"https://api.github.com/users/haiderasad/following{/other_user}","gists_url":"https://api.github.com/users/haiderasad/gists{/gist_id}","starred_url":"https://api.github.com/users/haiderasad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haiderasad/subscriptions","organizations_url":"https://api.github.com/users/haiderasad/orgs","repos_url":"https://api.github.com/users/haiderasad/repos","events_url":"https://api.github.com/users/haiderasad/events{/privacy}","received_events_url":"https://api.github.com/users/haiderasad/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-03-14T08:05:57Z","performed_via_github_app":null}]