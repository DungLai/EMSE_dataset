[{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1203403955","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1203403955","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1203403955,"node_id":"IC_kwDOCQmIhc5Hunyz","user":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false},"created_at":"2022-08-03T02:13:50Z","updated_at":"2022-08-03T20:03:29Z","author_association":"NONE","body":"I attempted to get this working with a local build of `scann`, but I am running into the same issues locally.\r\n\r\nYou can find the build steps I had to take, including downgrading `bazel` to 3.7.2 due to protobuf issues: https://github.com/toddwildey/google-research/blob/6df480615340a4f7e15a2db12ea06e56f8d68a31/scann/build.sh\r\n\r\nI also had to install this package globally on my machine, and then install it locally in my virtual environment:\r\n\r\nIn `google-research/scann`:\r\n\r\n```bash\r\npython3 setup.py install\r\n```\r\n\r\nIn my project:\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n[[ ! -d .venv ]] && python -m venv .venv\r\n\r\nUSER_PYTHON_LIB_PATH=\"$HOME/.pyenv/versions/3.8.6/lib/python3.8/site-packages\"\r\n\r\nfind \"$USER_PYTHON_LIB_PATH\" -name \"scann*\" -maxdepth 1 \\\r\n    | xargs -I{} cp -Rpf {} .venv/lib/python3.8/site-packages\r\n\r\nsource .venv/bin/activate\r\n\r\npip3 install -r requirements.txt\r\n```\r\n\r\nThe `protobuf` issues I encountered with `bazel` 5.2.0 are documented here: https://github.com/bazelbuild/bazel/issues/12887","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1203403955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1204431568","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1204431568","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1204431568,"node_id":"IC_kwDOCQmIhc5HyirQ","user":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false},"created_at":"2022-08-03T20:17:42Z","updated_at":"2022-08-03T20:17:42Z","author_association":"NONE","body":"**Please note:** This issue persists with both `pip install scann` and a local build of `scann`.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1204431568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1204573506","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1204573506","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1204573506,"node_id":"IC_kwDOCQmIhc5HzFVC","user":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false},"created_at":"2022-08-03T23:15:45Z","updated_at":"2022-08-03T23:19:17Z","author_association":"NONE","body":"It seems that version 1.2.7 is now accessible from `pip` without having to perform a local build.  Unfortunately, I'm still receiving SIGILL when running `import scann`.  When I run my python script with `gdb`:\r\n\r\n```bash\r\ngdb python3\r\n...\r\nrun src/hivemind/server.py\r\n```\r\n\r\nI get the following backtrace once the SIGILL occurs:\r\n\r\n```\r\n0x00007fff9b0ca10a in google::protobuf::FieldDescriptorProto::FieldDescriptorProto() ()\r\n--Type <RET> for more, q to quit, c to continue without paging--\r\nfrom /home/toddwildey/Projects/ontology/library/hivemind/.venv/lib/python3.8/site-packages/scann/scann_ops/cc/_scann_ops.so\r\n(gdb) bt\r\n#0  0x00007fff9b0ca10a in google::protobuf::FieldDescriptorProto::FieldDescriptorProto() ()\r\n   from /home/toddwildey/Projects/ontology/library/hivemind/.venv/lib/python3.8/site-packages/scann/scann_ops/cc/_scann_ops.so\r\n#1  0x00007fff9b0bc2fb in InitDefaultsscc_info_FieldDescriptorProto_google_2fprotobuf_2fdescriptor_2eproto() ()\r\n   from /home/toddwildey/Projects/ontology/library/hivemind/.venv/lib/python3.8/site-packages/scann/scann_ops/cc/_scann_ops.so\r\n#2  0x00007fff9b153c45 in google::protobuf::internal::(anonymous namespace)::InitSCC_DFS(google::protobuf::internal::SCCInfoBase*) [clone .llvm.10051976107214125249] ()\r\n   from /home/toddwildey/Projects/ontology/library/hivemind/.venv/lib/python3.8/site-packages/scann/scann_ops/cc/_scann_ops.so\r\n#3  0x00007fff9b153c3b in google::protobuf::internal::(anonymous namespace)::InitSCC_DFS(google::protobuf::internal::SCCInfoBase*) [clone .llvm.10051976107214125249] ()\r\n   from /home/toddwildey/Projects/ontology/library/hivemind/.venv/lib/python3.8/site-packages/scann/scann_ops/cc/_scann_ops.so\r\n```","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1204573506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1205611419","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1205611419","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1205611419,"node_id":"IC_kwDOCQmIhc5H3Cub","user":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false},"created_at":"2022-08-04T18:19:33Z","updated_at":"2022-08-04T18:19:33Z","author_association":"NONE","body":"I will have to defer to using `faiss` instead.  Would love to use `scann` at some point in the future when it's available.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1205611419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"toddwildey","id":1860496,"node_id":"MDQ6VXNlcjE4NjA0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/1860496?v=4","gravatar_id":"","url":"https://api.github.com/users/toddwildey","html_url":"https://github.com/toddwildey","followers_url":"https://api.github.com/users/toddwildey/followers","following_url":"https://api.github.com/users/toddwildey/following{/other_user}","gists_url":"https://api.github.com/users/toddwildey/gists{/gist_id}","starred_url":"https://api.github.com/users/toddwildey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toddwildey/subscriptions","organizations_url":"https://api.github.com/users/toddwildey/orgs","repos_url":"https://api.github.com/users/toddwildey/repos","events_url":"https://api.github.com/users/toddwildey/events{/privacy}","received_events_url":"https://api.github.com/users/toddwildey/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1205614091","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1205614091","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1205614091,"node_id":"IC_kwDOCQmIhc5H3DYL","user":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false},"created_at":"2022-08-04T18:22:21Z","updated_at":"2022-08-04T18:22:21Z","author_association":"CONTRIBUTOR","body":"I spun up a Ubuntu 20.04 VM and installed pip packages until I got to a superset of your `pip freeze`; mine is\r\n\r\n```\r\nabsl-py==1.2.0\r\nastunparse==1.6.3\r\nattrs==19.3.0\r\nAutomat==0.8.0\r\nblinker==1.4\r\ncachetools==5.2.0\r\ncertifi==2022.6.15\r\nchardet==3.0.4\r\ncharset-normalizer==2.1.0\r\nClick==7.0\r\ncloud-init==22.2\r\ncolorama==0.4.3\r\ncommand-not-found==0.3\r\nconfigobj==5.0.6\r\nconstantly==15.1.0\r\ncryptography==2.8\r\ndbus-python==1.2.16\r\ndistro==1.4.0\r\ndistro-info===0.23ubuntu1\r\nentrypoints==0.3\r\nflatbuffers==2.0\r\ngast==0.5.3\r\ngoogle-auth==2.9.1\r\ngoogle-auth-oauthlib==0.4.6\r\ngoogle-pasta==0.2.0\r\ngrpcio==1.47.0\r\nh5py==3.7.0\r\nhttplib2==0.14.0\r\nhyperlink==19.0.0\r\nidna==3.3\r\nimportlib-metadata==4.12.0\r\nincremental==16.10.1\r\nJinja2==2.10.1\r\njsonpatch==1.22\r\njsonpointer==2.0\r\njsonschema==3.2.0\r\nkeras==2.8.0\r\nKeras-Preprocessing==1.1.2\r\nkeyring==18.0.1\r\nlanguage-selector==0.1\r\nlaunchpadlib==1.10.13\r\nlazr.restfulclient==0.14.2\r\nlazr.uri==1.0.3\r\nlibclang==14.0.6\r\nMarkdown==3.4.1\r\nMarkupSafe==2.1.1\r\nmore-itertools==4.2.0\r\nnetifaces==0.10.4\r\nnumpy==1.23.1\r\noauthlib==3.2.0\r\nopt-einsum==3.3.0\r\npexpect==4.6.0\r\nprotobuf==3.19.4\r\npyarrow==8.0.0\r\npyasn1==0.4.8\r\npyasn1-modules==0.2.8\r\nPyGObject==3.36.0\r\nPyHamcrest==1.9.0\r\nPyJWT==1.7.1\r\npymacaroons==0.13.0\r\nPyNaCl==1.3.0\r\npyOpenSSL==19.0.0\r\npyrsistent==0.15.5\r\npyserial==3.4\r\npython-apt==2.0.0+ubuntu0.20.4.7\r\npython-debian===0.1.36ubuntu1\r\nPyYAML==5.3.1\r\nrequests==2.28.1\r\nrequests-oauthlib==1.3.1\r\nrequests-unixsocket==0.2.0\r\nrsa==4.9\r\nscann==1.2.6\r\nSecretStorage==2.3.1\r\nservice-identity==18.1.0\r\nsimplejson==3.16.0\r\nsix==1.16.0\r\nsos==4.3\r\nssh-import-id==5.10\r\nsystemd-python==234\r\ntensorboard==2.8.0\r\ntensorboard-data-server==0.6.1\r\ntensorboard-plugin-wit==1.8.1\r\ntensorflow==2.8.2\r\ntensorflow-estimator==2.8.0\r\ntensorflow-io-gcs-filesystem==0.26.0\r\ntermcolor==1.1.0\r\nTwisted==18.9.0\r\ntyping-extensions==4.3.0\r\nubuntu-advantage-tools==27.9\r\nufw==0.36\r\nunattended-upgrades==0.1\r\nurllib3==1.26.11\r\nwadllib==1.3.3\r\nWerkzeug==2.2.1\r\nwrapt==1.14.1\r\nzipp==3.8.1\r\nzope.interface==4.7.1\r\n```\r\n\r\nI wasn't able to reproduce your error, but it seems like you're experiencing something similar to [this](https://github.com/tensorflow/tensorflow/issues/24976). Best of luck with `faiss`.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1205614091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1220793163","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1220793163","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1220793163,"node_id":"IC_kwDOCQmIhc5Iw9NL","user":{"login":"Oros42","id":3344155,"node_id":"MDQ6VXNlcjMzNDQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3344155?v=4","gravatar_id":"","url":"https://api.github.com/users/Oros42","html_url":"https://github.com/Oros42","followers_url":"https://api.github.com/users/Oros42/followers","following_url":"https://api.github.com/users/Oros42/following{/other_user}","gists_url":"https://api.github.com/users/Oros42/gists{/gist_id}","starred_url":"https://api.github.com/users/Oros42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oros42/subscriptions","organizations_url":"https://api.github.com/users/Oros42/orgs","repos_url":"https://api.github.com/users/Oros42/repos","events_url":"https://api.github.com/users/Oros42/events{/privacy}","received_events_url":"https://api.github.com/users/Oros42/received_events","type":"User","site_admin":false},"created_at":"2022-08-19T15:12:50Z","updated_at":"2022-08-19T15:12:50Z","author_association":"NONE","body":"Same problem for me :-(\r\n\r\nOS : Linux Mint 21\r\nCPU : AMD FX-8320E Eight-Core Processor\r\nGPU : Geforce1080 Ti\r\nPython : 3.8.5 and 3.10.4\r\ncuda : 11-2\r\nscann : 1.2.7 and 1.2.6\r\n\r\n```\r\n$ python3\r\nPython 3.10.4 (main, Jun 29 2022, 12:14:53) [GCC 11.2.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import scann\r\nSegmentation fault (core dumped)\r\n```\r\n\r\n```\r\n$ python3\r\nPython 3.8.5 (default, Sep  4 2020, 07:30:14) \r\n[GCC 7.3.0] :: Anaconda, Inc. on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import scann\r\nInstruction non permise (core dumped)\r\n```","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1220793163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Oros42","id":3344155,"node_id":"MDQ6VXNlcjMzNDQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3344155?v=4","gravatar_id":"","url":"https://api.github.com/users/Oros42","html_url":"https://github.com/Oros42","followers_url":"https://api.github.com/users/Oros42/followers","following_url":"https://api.github.com/users/Oros42/following{/other_user}","gists_url":"https://api.github.com/users/Oros42/gists{/gist_id}","starred_url":"https://api.github.com/users/Oros42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oros42/subscriptions","organizations_url":"https://api.github.com/users/Oros42/orgs","repos_url":"https://api.github.com/users/Oros42/repos","events_url":"https://api.github.com/users/Oros42/events{/privacy}","received_events_url":"https://api.github.com/users/Oros42/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1221028656","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1221028656","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1221028656,"node_id":"IC_kwDOCQmIhc5Ix2sw","user":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false},"created_at":"2022-08-19T19:29:41Z","updated_at":"2022-08-19T19:29:41Z","author_association":"CONTRIBUTOR","body":"My hypothesis (from [here](https://github.com/tensorflow/recommenders/issues/328#issuecomment-1214314586)) is that ScaNN is using AVX2 instructions due to it being compiled with the `-mavx2` flag, and your processor doesn't support AVX2. We will look into compiling the ScaNN wheels the next release without the `-mavx2` flag so that this issue is resolved. You can try compiling ScaNN yourself without that flag in the meantime to see if that fixes the problem.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1221028656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1221251440","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1221251440","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1221251440,"node_id":"IC_kwDOCQmIhc5IytFw","user":{"login":"Oros42","id":3344155,"node_id":"MDQ6VXNlcjMzNDQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3344155?v=4","gravatar_id":"","url":"https://api.github.com/users/Oros42","html_url":"https://github.com/Oros42","followers_url":"https://api.github.com/users/Oros42/followers","following_url":"https://api.github.com/users/Oros42/following{/other_user}","gists_url":"https://api.github.com/users/Oros42/gists{/gist_id}","starred_url":"https://api.github.com/users/Oros42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oros42/subscriptions","organizations_url":"https://api.github.com/users/Oros42/orgs","repos_url":"https://api.github.com/users/Oros42/repos","events_url":"https://api.github.com/users/Oros42/events{/privacy}","received_events_url":"https://api.github.com/users/Oros42/received_events","type":"User","site_admin":false},"created_at":"2022-08-20T07:38:37Z","updated_at":"2022-08-20T07:38:37Z","author_association":"NONE","body":"Okay, yes I confirm. It's link to AVX2 support.\r\n\r\nAMD FX-8320E Eight-Core Processor didn't support AVX2 but only AVX :-(\r\n```\r\n$ cat /proc/cpuinfo |grep avx\r\n```\r\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 popcnt aes xsave **`avx`** f16c lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs xop skinit wdt lwp fma4 tce nodeid_msr tbm topoext perfctr_core perfctr_nb cpb hw_pstate ssbd ibpb vmmcall bmi1 arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1221251440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Oros42","id":3344155,"node_id":"MDQ6VXNlcjMzNDQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3344155?v=4","gravatar_id":"","url":"https://api.github.com/users/Oros42","html_url":"https://github.com/Oros42","followers_url":"https://api.github.com/users/Oros42/followers","following_url":"https://api.github.com/users/Oros42/following{/other_user}","gists_url":"https://api.github.com/users/Oros42/gists{/gist_id}","starred_url":"https://api.github.com/users/Oros42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oros42/subscriptions","organizations_url":"https://api.github.com/users/Oros42/orgs","repos_url":"https://api.github.com/users/Oros42/repos","events_url":"https://api.github.com/users/Oros42/events{/privacy}","received_events_url":"https://api.github.com/users/Oros42/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1248369998","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1248369998","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1248369998,"node_id":"IC_kwDOCQmIhc5KaJ1O","user":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false},"created_at":"2022-09-15T16:59:13Z","updated_at":"2022-09-15T16:59:13Z","author_association":"CONTRIBUTOR","body":"ScaNN 1.2.8 was just released, and it was compiled with just `-mavx` rather than `-mavx2`; hopefully that fixes your issue. Granted, I could never reproduce this issue (I tested ScaNN 1.2.7 on non-AVX2 machines and it never crashed) so I'm not sure if this will be sufficient.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1248369998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1248570280","html_url":"https://github.com/google-research/google-research/issues/1224#issuecomment-1248570280","issue_url":"https://api.github.com/repos/google-research/google-research/issues/1224","id":1248570280,"node_id":"IC_kwDOCQmIhc5Ka6uo","user":{"login":"Oros42","id":3344155,"node_id":"MDQ6VXNlcjMzNDQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3344155?v=4","gravatar_id":"","url":"https://api.github.com/users/Oros42","html_url":"https://github.com/Oros42","followers_url":"https://api.github.com/users/Oros42/followers","following_url":"https://api.github.com/users/Oros42/following{/other_user}","gists_url":"https://api.github.com/users/Oros42/gists{/gist_id}","starred_url":"https://api.github.com/users/Oros42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oros42/subscriptions","organizations_url":"https://api.github.com/users/Oros42/orgs","repos_url":"https://api.github.com/users/Oros42/repos","events_url":"https://api.github.com/users/Oros42/events{/privacy}","received_events_url":"https://api.github.com/users/Oros42/received_events","type":"User","site_admin":false},"created_at":"2022-09-15T20:17:50Z","updated_at":"2022-09-15T20:17:50Z","author_association":"NONE","body":"Yees it works ! \\o/\r\n@sammymax thank you","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/1248570280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Oros42","id":3344155,"node_id":"MDQ6VXNlcjMzNDQxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3344155?v=4","gravatar_id":"","url":"https://api.github.com/users/Oros42","html_url":"https://github.com/Oros42","followers_url":"https://api.github.com/users/Oros42/followers","following_url":"https://api.github.com/users/Oros42/following{/other_user}","gists_url":"https://api.github.com/users/Oros42/gists{/gist_id}","starred_url":"https://api.github.com/users/Oros42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Oros42/subscriptions","organizations_url":"https://api.github.com/users/Oros42/orgs","repos_url":"https://api.github.com/users/Oros42/repos","events_url":"https://api.github.com/users/Oros42/events{/privacy}","received_events_url":"https://api.github.com/users/Oros42/received_events","type":"User","site_admin":false}},{"id":7398070293,"node_id":"MEE_lADOCQmIhc5PEaRvzwAAAAG49ZgV","url":"https://api.github.com/repos/google-research/google-research/issues/events/7398070293","actor":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-09-15T20:17:50Z","performed_via_github_app":null},{"id":7398070304,"node_id":"SE_lADOCQmIhc5PEaRvzwAAAAG49Zgg","url":"https://api.github.com/repos/google-research/google-research/issues/events/7398070304","actor":{"login":"sammymax","id":6895661,"node_id":"MDQ6VXNlcjY4OTU2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/6895661?v=4","gravatar_id":"","url":"https://api.github.com/users/sammymax","html_url":"https://github.com/sammymax","followers_url":"https://api.github.com/users/sammymax/followers","following_url":"https://api.github.com/users/sammymax/following{/other_user}","gists_url":"https://api.github.com/users/sammymax/gists{/gist_id}","starred_url":"https://api.github.com/users/sammymax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammymax/subscriptions","organizations_url":"https://api.github.com/users/sammymax/orgs","repos_url":"https://api.github.com/users/sammymax/repos","events_url":"https://api.github.com/users/sammymax/events{/privacy}","received_events_url":"https://api.github.com/users/sammymax/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-09-15T20:17:50Z","performed_via_github_app":null}]