[{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/809079565","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-809079565","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":809079565,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTA3OTU2NQ==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2021-03-29T05:33:13Z","updated_at":"2021-03-29T05:33:13Z","author_association":"CONTRIBUTOR","body":"Thank you for evaluating kws_streaming lib!\r\n\r\nFor cnn model we referred two papers: [Convolutional Neural Networks for Small-footprint Keyword Spotting](http://www.isca-speech.org/archive/interspeech_2015/papers/i15_1478.pdf) and [Hello Edge: Keyword Spotting on Microcontrollers](https://arxiv.org/pdf/1711.07128.pdf), the first one as earliest cnn application and the second one is more similar to what we use in the code. So I would say that cnn model is inspired by [Convolutional Neural Networks for Small-footprint Keyword Spotting](http://www.isca-speech.org/archive/interspeech_2015/papers/i15_1478.pdf) and is based on [Hello Edge: Keyword Spotting on Microcontrollers](https://arxiv.org/pdf/1711.07128.pdf). If you need max pooling, I would suggest to try [ds_tc_resnet](https://github.com/google-research/google-research/blob/master/kws_streaming/models/ds_tc_resnet.py) option, here you can configure you model with and without max pooling.\r\n\r\nnet = stream.Stream(cell=tf.keras.layers.Flatten())(net) - streaming of flatten layer - it is not linear low-rank layer\r\n\r\nnet = tf.keras.layers.Dropout(rate=flags.dropout1)(net) is a dropout regularization.\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/809079565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/809493152","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-809493152","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":809493152,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTQ5MzE1Mg==","user":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false},"created_at":"2021-03-29T15:52:39Z","updated_at":"2021-03-29T15:52:39Z","author_association":"NONE","body":"Thank you @rybakov!\r\n\r\nHow can I make a linear low-rank layer?\r\nI understood [this article on stackExchange](https://stats.stackexchange.com/questions/365179/what-is-low-rank-linear-layer-in-neural-networks),\r\nbut I'm not sure how to implement it with Tensorflow.\r\nIf I do Flatten() and Dense(), the parameters are too many.\r\n","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/809493152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false}},{"id":4522365608,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDUyMjM2NTYwOA==","url":"https://api.github.com/repos/google-research/google-research/issues/events/4522365608","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-29T15:52:39Z","performed_via_github_app":null},{"id":4522365616,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1MjIzNjU2MTY=","url":"https://api.github.com/repos/google-research/google-research/issues/events/4522365616","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-29T15:52:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/809863039","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-809863039","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":809863039,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTg2MzAzOQ==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2021-03-30T02:45:23Z","updated_at":"2021-03-30T02:45:23Z","author_association":"CONTRIBUTOR","body":"There are two options of doing low rank matrix decomposition:\r\n1. In time and feature domains, well described in [END-TO-END STREAMING KEYWORD SPOTTING](https://arxiv.org/pdf/1812.02802.pdf) it is implemented in [svdf](https://github.com/google-research/google-research/blob/master/kws_streaming/models/svdf.py) and in [ds_tc_resnet](https://github.com/google-research/google-research/blob/master/kws_streaming/models/ds_tc_resnet.py). Here 2D matrix is decomposed into product of two low rank matrices implemented with depthwise convolution (applied in time dimension) and 1x1 convolution (applied in feature dimension).\r\n2. In feature domain only: just represent fully connected layer (e.g 100x100) as two fully connected layers (e.g 100x40 and 40x100).","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/809863039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816124562","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-816124562","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":816124562,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjEyNDU2Mg==","user":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false},"created_at":"2021-04-08T19:55:28Z","updated_at":"2021-04-08T19:58:00Z","author_association":"NONE","body":"@rybakov \r\nI think the 1st option should be match with `cnn-one-fpool3` in the [paper](https://www.isca-speech.org/archive/interspeech_2015/papers/i15_1478.pdf).\r\nI saw  [ds_tc_resnet.py](https://github.com/google-research/google-research/blob/master/kws_streaming/models/ds_tc_resnet.py) but I might not understand it enough.\r\n\r\nLet me share this image from the paper:\r\n<img width=\"414\" alt=\"Screen Shot 2021-04-08 at 12 20 15 PM\" src=\"https://user-images.githubusercontent.com/62040028/114084282-da352680-9864-11eb-9b8c-fa58ce879b2f.png\">\r\n\r\nThen I calculated the number of parameters by hand and I got the following results:\r\n\r\n*input dimension is (`batch_size`, 32, 40, 1)\r\n| layer   |      Output dim.      |  Params |\r\n|----------|:-------------:|------:|\r\n| conv       |  (`batch_size`, 1, 33, 54) | 13824 |\r\n| maxpool |   (`batch_size`, 1, 11, 54)    |- | \r\n| linear      |  (`batch_size`, 1,   1, 32) |  19008* |\r\n| dnn | (`batch_size`, 1,   1, 128) |    4096 |\r\n| dnn | (`batch_size`, 1,   1, 128) |    16384 |\r\n| softmax | (`batch_size`, 1,   1, 4) |    512 |\r\n\r\nAs you can see, the number of parameters except for the linear layer are same as those of the paper. So the calculation way should be ok basically. \r\nAnd the linear layer's output dimension looks good because the layers' params after it are correct.\r\nI was not sure how to calculate the parameters of DepthwiseConv2D so I tried to build a model for 12 labels anyway.\r\n\r\nthe part of the linear layer:\r\n```\r\n  net = tf.keras.layers.DepthwiseConv2D(\r\n          kernel_size=(1,33),\r\n          padding='VALID')(net)\r\n  net = tf.keras.layers.Conv2D(\r\n          kernel_size=1,\r\n          filters=32,\r\n          padding='VALID')(net)\r\n``` \r\nI saw [ds_tc_resnet.py](https://github.com/google-research/google-research/blob/master/kws_streaming/models/ds_tc_resnet.py) and found `kernel_size=(kernel_size, 1)` but in the case of `cnn_one_fpool3`, I guessed (1, 33) was good.\r\n\r\nand the model summary:\r\n```\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ninput_1 (InputLayer)         [(100, 16000)]            0         \r\n_________________________________________________________________\r\nspeech_features (SpeechFeatu (100, 32, 40)             0         \r\n_________________________________________________________________\r\ntf_op_layer_ExpandDims (Tens [(100, 32, 40, 1)]        0         \r\n_________________________________________________________________\r\nconv2d (Conv2D)              (100, 1, 33, 54)          13878     \r\n_________________________________________________________________\r\nmax_pooling2d (MaxPooling2D) (100, 1, 33, 54)          0         \r\n_________________________________________________________________\r\ndepthwise_conv2d (DepthwiseC (100, 1, 1, 54)           1836      \r\n_________________________________________________________________\r\nconv2d_1 (Conv2D)            (100, 1, 1, 32)           1760      \r\n_________________________________________________________________\r\ndropout (Dropout)            (100, 1, 1, 32)           0         \r\n_________________________________________________________________\r\nflatten (Flatten)            (100, 32)                 0         \r\n_________________________________________________________________\r\ndense (Dense)                (100, 128)                4224      \r\n_________________________________________________________________\r\ndense_1 (Dense)              (100, 128)                16512     \r\n_________________________________________________________________\r\nflatten_1 (Flatten)          (100, 128)                0         \r\n_________________________________________________________________\r\ndense_2 (Dense)              (100, 12)                 1548      \r\n=================================================================\r\nTotal params: 39,758\r\nTrainable params: 39,758\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\n* the last layer's output is different from the table above because this is the model for 12 labels.\r\n```\r\n\r\n`depthwise_conv2d` and `conv2d_1` should work as the linear layer but the number of parameters are far from the paper.\r\n\r\nCould you tell me if you find wrong things in my code?","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816124562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false}},{"id":4570744241,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDU3MDc0NDI0MQ==","url":"https://api.github.com/repos/google-research/google-research/issues/events/4570744241","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-04-08T19:55:28Z","performed_via_github_app":null},{"id":4570744246,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1NzA3NDQyNDY=","url":"https://api.github.com/repos/google-research/google-research/issues/events/4570744246","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-04-08T19:55:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816220949","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-816220949","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":816220949,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjIyMDk0OQ==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2021-04-08T21:27:32Z","updated_at":"2021-04-08T21:27:32Z","author_association":"CONTRIBUTOR","body":"There is no need to combine DepthwiseConv2D with the paper you are trying to reproduce.\r\nIt looks like you already get similar number parameters in your fist model version.\r\n\r\nIn case of your second version, where you add DepthwiseConv2D:\r\nyour first conv layer\r\n\"conv2d (Conv2D)              (100, 1, 33, 54)          13878\"\r\ncovers whole time span and reduces input time dim of 32 to 1\r\nSo after that there is no need to combine DepthwiseConv2D with Conv2D at all. Because they do not do any processing in time dimension:\r\n```\r\ndepthwise_conv2d (DepthwiseC (100, 1, 1, 54)           1836      \r\n_________________________________________________________________\r\nconv2d_1 (Conv2D)            (100, 1, 1, 32)           1760    \r\n```\r\nIn above you have (100, 1, 1, 54) = (batch=100, time=1, feature1=1, feature2=54)\r\n\r\nI would suggest to visualize ds_tc_resnet and see how DepthwiseConv2D and Conv2D are combined.\r\nYou will see that time dim on data processed by DepthwiseConv2D will not be equal to 1 \r\n\r\nAdditional comments about paper citation:\r\nModel [cnn](kws_streaming/model/cnn.py) is based on paper 1: \"Hello Edge: Keyword Spotting on Microcontrollers.\"  because  paper 1 bench-marked their model on public data so we can do side by side comparison. I also referred paper 2: \"Convolutional Neural Networks for Small-footprint Keyword Spotting\" as a prior art of conv model applied on key word spotting (and [cnn](kws_streaming/model/cnn.py) is inspired by that), but I did no implement it because it was not benchmarked on public data, so I could not do side by side comparison and validate its performance.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816220949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816310512","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-816310512","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":816310512,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjMxMDUxMg==","user":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false},"created_at":"2021-04-09T00:03:02Z","updated_at":"2021-04-09T00:03:29Z","author_association":"NONE","body":"Which model in the paper 1 does the default parameters of [cnn](https://github.com/google-research/google-research/issues/kws_streaming/model/cnn.py) mean?\r\nIt's not neither `cnn_trad_fpool3` (CNN-1) nor `cnn_one_fstride4` (CNN-2), right?","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816310512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816364573","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-816364573","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":816364573,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjM2NDU3Mw==","user":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false},"created_at":"2021-04-09T02:54:20Z","updated_at":"2021-04-09T02:54:20Z","author_association":"CONTRIBUTOR","body":"Yes, none of the models presented in our [paper](https://arxiv.org/pdf/2005.06720.pdf) have default parameters of [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf). In section \"4.2. Comparison with baseline\" we explicitly say \"We improved their accuracy on datasets V1 and V2, as shown on Table 1, by applying SpecAugment with hyper-parameters optimization of both neural net and speech feature extractor parameters\".\r\n\r\nIn Table 1 we labeled models from [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf) by tag V1*. Star(*) means that it is baseline accuracy reported by [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf). We compared their models with our re-implementations which have different hyperparameters. For example strided CNN (\"CNN+strd\") parameters are show in [link](https://github.com/google-research/google-research/blob/master/kws_streaming/experiments/kws_experiments_paper_12_labels.md#cnn_stride) are different with hyperparameters of (CNN-2) from [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf) implemented in [link](https://github.com/ARM-software/ML-KWS-for-MCU/blob/8151349b110f4d1c194c085fcc5b3535bdf7ce4a/models.py#L643).\r\n\r\nIf you are interested in reproducing model accuracy from [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf), I would suggest to use their [implementations](https://github.com/ARM-software/ML-KWS-for-MCU/blob/8151349b110f4d1c194c085fcc5b3535bdf7ce4a/models.py), so that all hyperparameters will be exactly the same as they are published in [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf).\r\n\r\nPlease feel free to reproduce accuracy of models from [Hello Edge paper](https://arxiv.org/pdf/1711.07128.pdf) with [kws_streaming](https://github.com/google-research/google-research/tree/master/kws_streaming), but as you already noticed you will need to change hyperparameters.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816364573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rybakov","id":6813603,"node_id":"MDQ6VXNlcjY4MTM2MDM=","avatar_url":"https://avatars.githubusercontent.com/u/6813603?v=4","gravatar_id":"","url":"https://api.github.com/users/rybakov","html_url":"https://github.com/rybakov","followers_url":"https://api.github.com/users/rybakov/followers","following_url":"https://api.github.com/users/rybakov/following{/other_user}","gists_url":"https://api.github.com/users/rybakov/gists{/gist_id}","starred_url":"https://api.github.com/users/rybakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rybakov/subscriptions","organizations_url":"https://api.github.com/users/rybakov/orgs","repos_url":"https://api.github.com/users/rybakov/repos","events_url":"https://api.github.com/users/rybakov/events{/privacy}","received_events_url":"https://api.github.com/users/rybakov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816440611","html_url":"https://github.com/google-research/google-research/issues/652#issuecomment-816440611","issue_url":"https://api.github.com/repos/google-research/google-research/issues/652","id":816440611,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjQ0MDYxMQ==","user":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false},"created_at":"2021-04-09T06:20:42Z","updated_at":"2021-04-09T06:20:42Z","author_association":"NONE","body":"Ah I haven't noticed [kws_experiments_paper_12_labels.md](https://github.com/google-research/google-research/blob/master/kws_streaming/experiments/kws_experiments_paper_12_labels.md)!\r\nThank you for this great environment and your kind responses!\r\nI'm going to reproduce your paper at first.","reactions":{"url":"https://api.github.com/repos/google-research/google-research/issues/comments/816440611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false}},{"id":4626339974,"node_id":"MDExOkNsb3NlZEV2ZW50NDYyNjMzOTk3NA==","url":"https://api.github.com/repos/google-research/google-research/issues/events/4626339974","actor":{"login":"ntyoshi","id":62040028,"node_id":"MDQ6VXNlcjYyMDQwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/62040028?v=4","gravatar_id":"","url":"https://api.github.com/users/ntyoshi","html_url":"https://github.com/ntyoshi","followers_url":"https://api.github.com/users/ntyoshi/followers","following_url":"https://api.github.com/users/ntyoshi/following{/other_user}","gists_url":"https://api.github.com/users/ntyoshi/gists{/gist_id}","starred_url":"https://api.github.com/users/ntyoshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntyoshi/subscriptions","organizations_url":"https://api.github.com/users/ntyoshi/orgs","repos_url":"https://api.github.com/users/ntyoshi/repos","events_url":"https://api.github.com/users/ntyoshi/events{/privacy}","received_events_url":"https://api.github.com/users/ntyoshi/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-04-21T17:24:55Z","state_reason":null,"performed_via_github_app":null}]