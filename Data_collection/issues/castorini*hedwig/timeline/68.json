[{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676524489","html_url":"https://github.com/castorini/hedwig/issues/68#issuecomment-676524489","issue_url":"https://api.github.com/repos/castorini/hedwig/issues/68","id":676524489,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjUyNDQ4OQ==","user":{"login":"lintool","id":313837,"node_id":"MDQ6VXNlcjMxMzgzNw==","avatar_url":"https://avatars.githubusercontent.com/u/313837?v=4","gravatar_id":"","url":"https://api.github.com/users/lintool","html_url":"https://github.com/lintool","followers_url":"https://api.github.com/users/lintool/followers","following_url":"https://api.github.com/users/lintool/following{/other_user}","gists_url":"https://api.github.com/users/lintool/gists{/gist_id}","starred_url":"https://api.github.com/users/lintool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lintool/subscriptions","organizations_url":"https://api.github.com/users/lintool/orgs","repos_url":"https://api.github.com/users/lintool/repos","events_url":"https://api.github.com/users/lintool/events{/privacy}","received_events_url":"https://api.github.com/users/lintool/received_events","type":"User","site_admin":false},"created_at":"2020-08-19T16:19:02Z","updated_at":"2020-08-19T16:19:02Z","author_association":"MEMBER","body":"The error message seems pretty informative - have you checked the length of your input samples?","reactions":{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676524489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lintool","id":313837,"node_id":"MDQ6VXNlcjMxMzgzNw==","avatar_url":"https://avatars.githubusercontent.com/u/313837?v=4","gravatar_id":"","url":"https://api.github.com/users/lintool","html_url":"https://github.com/lintool","followers_url":"https://api.github.com/users/lintool/followers","following_url":"https://api.github.com/users/lintool/following{/other_user}","gists_url":"https://api.github.com/users/lintool/gists{/gist_id}","starred_url":"https://api.github.com/users/lintool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lintool/subscriptions","organizations_url":"https://api.github.com/users/lintool/orgs","repos_url":"https://api.github.com/users/lintool/repos","events_url":"https://api.github.com/users/lintool/events{/privacy}","received_events_url":"https://api.github.com/users/lintool/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676527465","html_url":"https://github.com/castorini/hedwig/issues/68#issuecomment-676527465","issue_url":"https://api.github.com/repos/castorini/hedwig/issues/68","id":676527465,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjUyNzQ2NQ==","user":{"login":"jmandivarapu1","id":21245519,"node_id":"MDQ6VXNlcjIxMjQ1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/21245519?v=4","gravatar_id":"","url":"https://api.github.com/users/jmandivarapu1","html_url":"https://github.com/jmandivarapu1","followers_url":"https://api.github.com/users/jmandivarapu1/followers","following_url":"https://api.github.com/users/jmandivarapu1/following{/other_user}","gists_url":"https://api.github.com/users/jmandivarapu1/gists{/gist_id}","starred_url":"https://api.github.com/users/jmandivarapu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmandivarapu1/subscriptions","organizations_url":"https://api.github.com/users/jmandivarapu1/orgs","repos_url":"https://api.github.com/users/jmandivarapu1/repos","events_url":"https://api.github.com/users/jmandivarapu1/events{/privacy}","received_events_url":"https://api.github.com/users/jmandivarapu1/received_events","type":"User","site_admin":false},"created_at":"2020-08-19T16:24:45Z","updated_at":"2020-08-19T16:24:45Z","author_association":"NONE","body":"I did checked it, its of size 32,32\r\n\r\n```\r\nlength tensor([[  225,  1168,   377,     4,   274,  3939,     8,    54,   105,   268,\r\n            33,  5755, 83638],\r\n        [    8,    54,   105,    19,    44,    44, 56528,   486,   767,    50,\r\n          5304,     1,     1],\r\n        [19369, 15135, 10210,  8251, 43371,  2545,  7481, 11348, 90504,   621,\r\n         56398,     1,     1],\r\n        [72795,  4372,   100, 70551,  1544,  1034,  3004, 13160,     6,  1370,\r\n             1,     1,     1],\r\n        [19919, 53218,    80,  1002,  1115,     8,    54,   105,  3386, 19796,\r\n             1,     1,     1],\r\n        [    2, 69127,  1703,     3,  1077, 59162,    16,  1174, 50016, 88044,\r\n             1,     1,     1],\r\n        [    2,  6726, 67871,  4653, 11485,    83,  6732,    83,   633, 38001,\r\n             1,     1,     1],\r\n        [87454, 20624,  4879,  4357,   430,    80,     6,  6026,  2196,  1489,\r\n             1,     1,     1],\r\n        [36913,   277,   286, 13804,    31, 14327,     6, 36907,  4260,     1,\r\n             1,     1,     1],\r\n        [    9, 15352, 95585,  2684,    72,  5433,   486,    24, 47224,     1,\r\n             1,     1,     1],\r\n        [ 5564,   299, 10120,    58,  5164,  7374,    84,  4070, 70076,     1,\r\n             1,     1,     1],\r\n        [   14,     2,  3648,     3,   519,  3637, 36810,     1,     1,     1,\r\n             1,     1,     1],\r\n        [  519,  6904, 10666, 32768, 74735, 48988, 16957,     1,     1,     1,\r\n             1,     1,     1],\r\n        [83525, 38609,   441, 63150,   557, 50244,   856,     1,     1,     1,\r\n             1,     1,     1],\r\n        [    8,    54,   105,  6929,    74, 10401, 36925,     1,     1,     1,\r\n             1,     1,     1],\r\n        [36812,    21,  1872,   261,   121, 76565,    27,     1,     1,     1,\r\n             1,     1,     1],\r\n        [   66,  1099,   971,     6,    11,  4987,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [73323,  1517,  2818, 30047,    19, 80137,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [  111,  1034, 69019, 36800,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [94708,    20, 19813,  1470,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [46071, 58952,    76,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [37106, 75713,   232,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [   65, 83533, 36175,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [36828,   428,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [38424, 58372,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [37562,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [94372,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [36801,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [36958,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [    1,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [    1,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1],\r\n        [    1,     1,     1,     1,     1,     1,     1,     1,     1,     1,\r\n             1,     1,     1]], device='cuda:0') tensor([13, 11, 11, 10, 10, 10, 10, 10,  9,  9,  9,  7,  7,  7,  7,  7,  6,  6,\r\n         4,  4,  3,  3,  3,  2,  2,  1,  1,  1,  1,  0,  0,  0],\r\n       device='cuda:0')\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/ubuntu/new_mount_device/hedwig/models/reg_lstm/__main__.py\", line 149, in <module>\r\n    trainer.train(args.epochs)\r\n  File \"/home/ubuntu/new_mount_device/hedwig/common/trainers/classification_trainer.py\", line 93, in train\r\n    dev_acc, dev_precision, dev_recall, dev_f1, dev_loss = self.dev_evaluator.get_scores()[0]\r\n  File \"/home/ubuntu/new_mount_device/hedwig/common/evaluators/classification_evaluator.py\", line 40, in get_scores\r\n    scores = self.model(batch.text[0], lengths=batch.text[1])\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/ubuntu/new_mount_device/hedwig/models/reg_lstm/model.py\", line 74, in forward\r\n    x = torch.nn.utils.rnn.pack_padded_sequence(x, lengths, batch_first=True)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/torch/nn/utils/rnn.py\", line 244, in pack_padded_sequence\r\n    _VF._pack_padded_sequence(input, lengths, batch_first)\r\nRuntimeError: Length of all samples has to be greater than 0, but found an element in 'lengths' that is <= 0\r\n```","reactions":{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676527465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jmandivarapu1","id":21245519,"node_id":"MDQ6VXNlcjIxMjQ1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/21245519?v=4","gravatar_id":"","url":"https://api.github.com/users/jmandivarapu1","html_url":"https://github.com/jmandivarapu1","followers_url":"https://api.github.com/users/jmandivarapu1/followers","following_url":"https://api.github.com/users/jmandivarapu1/following{/other_user}","gists_url":"https://api.github.com/users/jmandivarapu1/gists{/gist_id}","starred_url":"https://api.github.com/users/jmandivarapu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmandivarapu1/subscriptions","organizations_url":"https://api.github.com/users/jmandivarapu1/orgs","repos_url":"https://api.github.com/users/jmandivarapu1/repos","events_url":"https://api.github.com/users/jmandivarapu1/events{/privacy}","received_events_url":"https://api.github.com/users/jmandivarapu1/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676529724","html_url":"https://github.com/castorini/hedwig/issues/68#issuecomment-676529724","issue_url":"https://api.github.com/repos/castorini/hedwig/issues/68","id":676529724,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjUyOTcyNA==","user":{"login":"achyudh","id":7617287,"node_id":"MDQ6VXNlcjc2MTcyODc=","avatar_url":"https://avatars.githubusercontent.com/u/7617287?v=4","gravatar_id":"","url":"https://api.github.com/users/achyudh","html_url":"https://github.com/achyudh","followers_url":"https://api.github.com/users/achyudh/followers","following_url":"https://api.github.com/users/achyudh/following{/other_user}","gists_url":"https://api.github.com/users/achyudh/gists{/gist_id}","starred_url":"https://api.github.com/users/achyudh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/achyudh/subscriptions","organizations_url":"https://api.github.com/users/achyudh/orgs","repos_url":"https://api.github.com/users/achyudh/repos","events_url":"https://api.github.com/users/achyudh/events{/privacy}","received_events_url":"https://api.github.com/users/achyudh/received_events","type":"User","site_admin":false},"created_at":"2020-08-19T16:29:19Z","updated_at":"2020-08-19T16:29:19Z","author_association":"MEMBER","body":"I see that the last three elements have values 0,  0,  0. Even though your input is of non-zero length, the length vector might not have been set properly. Could that be the issue?","reactions":{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676529724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"achyudh","id":7617287,"node_id":"MDQ6VXNlcjc2MTcyODc=","avatar_url":"https://avatars.githubusercontent.com/u/7617287?v=4","gravatar_id":"","url":"https://api.github.com/users/achyudh","html_url":"https://github.com/achyudh","followers_url":"https://api.github.com/users/achyudh/followers","following_url":"https://api.github.com/users/achyudh/following{/other_user}","gists_url":"https://api.github.com/users/achyudh/gists{/gist_id}","starred_url":"https://api.github.com/users/achyudh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/achyudh/subscriptions","organizations_url":"https://api.github.com/users/achyudh/orgs","repos_url":"https://api.github.com/users/achyudh/repos","events_url":"https://api.github.com/users/achyudh/events{/privacy}","received_events_url":"https://api.github.com/users/achyudh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676531744","html_url":"https://github.com/castorini/hedwig/issues/68#issuecomment-676531744","issue_url":"https://api.github.com/repos/castorini/hedwig/issues/68","id":676531744,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjUzMTc0NA==","user":{"login":"jmandivarapu1","id":21245519,"node_id":"MDQ6VXNlcjIxMjQ1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/21245519?v=4","gravatar_id":"","url":"https://api.github.com/users/jmandivarapu1","html_url":"https://github.com/jmandivarapu1","followers_url":"https://api.github.com/users/jmandivarapu1/followers","following_url":"https://api.github.com/users/jmandivarapu1/following{/other_user}","gists_url":"https://api.github.com/users/jmandivarapu1/gists{/gist_id}","starred_url":"https://api.github.com/users/jmandivarapu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmandivarapu1/subscriptions","organizations_url":"https://api.github.com/users/jmandivarapu1/orgs","repos_url":"https://api.github.com/users/jmandivarapu1/repos","events_url":"https://api.github.com/users/jmandivarapu1/events{/privacy}","received_events_url":"https://api.github.com/users/jmandivarapu1/received_events","type":"User","site_admin":false},"created_at":"2020-08-19T16:33:27Z","updated_at":"2020-08-19T16:33:27Z","author_association":"NONE","body":"> I see that the last three elements have values 0, 0, 0. Even though your input is of non-zero length, the length vector might not have been set properly. Could that be the issue?\r\n\r\nYeah I felt the same. But \r\nwhen I run below works fine \r\n```\r\npython -m models.bert --dataset Reuters --model bert-base-uncased --max-seq-length 256 --batch-size 16 --lr 2e-5 --epochs 30\r\n```\r\nbut when I run\r\n\r\n```\r\npython -m models.reg_lstm --dataset Reuters --mode static --batch-size 32 --lr 0.01 --epochs 30 --bidirectional --num-layers 1 --hidden-dim 512 --wdrop 0.1 --embed-droprate 0.2 --dropout 0.5 --beta-ema 0.99 --seed 3435\r\n```\r\nSo I am thinking where the error might be, because of LSTM or so?","reactions":{"url":"https://api.github.com/repos/castorini/hedwig/issues/comments/676531744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jmandivarapu1","id":21245519,"node_id":"MDQ6VXNlcjIxMjQ1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/21245519?v=4","gravatar_id":"","url":"https://api.github.com/users/jmandivarapu1","html_url":"https://github.com/jmandivarapu1","followers_url":"https://api.github.com/users/jmandivarapu1/followers","following_url":"https://api.github.com/users/jmandivarapu1/following{/other_user}","gists_url":"https://api.github.com/users/jmandivarapu1/gists{/gist_id}","starred_url":"https://api.github.com/users/jmandivarapu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmandivarapu1/subscriptions","organizations_url":"https://api.github.com/users/jmandivarapu1/orgs","repos_url":"https://api.github.com/users/jmandivarapu1/repos","events_url":"https://api.github.com/users/jmandivarapu1/events{/privacy}","received_events_url":"https://api.github.com/users/jmandivarapu1/received_events","type":"User","site_admin":false}}]