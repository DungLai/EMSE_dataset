[{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590319609","html_url":"https://github.com/BloodAxe/pytorch-toolbelt/issues/38#issuecomment-590319609","issue_url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/38","id":590319609,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDMxOTYwOQ==","user":{"login":"maksimovkonstantin","id":10925437,"node_id":"MDQ6VXNlcjEwOTI1NDM3","avatar_url":"https://avatars.githubusercontent.com/u/10925437?v=4","gravatar_id":"","url":"https://api.github.com/users/maksimovkonstantin","html_url":"https://github.com/maksimovkonstantin","followers_url":"https://api.github.com/users/maksimovkonstantin/followers","following_url":"https://api.github.com/users/maksimovkonstantin/following{/other_user}","gists_url":"https://api.github.com/users/maksimovkonstantin/gists{/gist_id}","starred_url":"https://api.github.com/users/maksimovkonstantin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maksimovkonstantin/subscriptions","organizations_url":"https://api.github.com/users/maksimovkonstantin/orgs","repos_url":"https://api.github.com/users/maksimovkonstantin/repos","events_url":"https://api.github.com/users/maksimovkonstantin/events{/privacy}","received_events_url":"https://api.github.com/users/maksimovkonstantin/received_events","type":"User","site_admin":false},"created_at":"2020-02-24T13:28:29Z","updated_at":"2020-02-24T13:28:29Z","author_association":"NONE","body":"@YanqingWu without full case description it is useless issue.","reactions":{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590319609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maksimovkonstantin","id":10925437,"node_id":"MDQ6VXNlcjEwOTI1NDM3","avatar_url":"https://avatars.githubusercontent.com/u/10925437?v=4","gravatar_id":"","url":"https://api.github.com/users/maksimovkonstantin","html_url":"https://github.com/maksimovkonstantin","followers_url":"https://api.github.com/users/maksimovkonstantin/followers","following_url":"https://api.github.com/users/maksimovkonstantin/following{/other_user}","gists_url":"https://api.github.com/users/maksimovkonstantin/gists{/gist_id}","starred_url":"https://api.github.com/users/maksimovkonstantin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maksimovkonstantin/subscriptions","organizations_url":"https://api.github.com/users/maksimovkonstantin/orgs","repos_url":"https://api.github.com/users/maksimovkonstantin/repos","events_url":"https://api.github.com/users/maksimovkonstantin/events{/privacy}","received_events_url":"https://api.github.com/users/maksimovkonstantin/received_events","type":"User","site_admin":false}},{"id":3065351698,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA2NTM1MTY5OA==","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3065351698","actor":{"login":"YanqingWu","id":49223324,"node_id":"MDQ6VXNlcjQ5MjIzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/49223324?v=4","gravatar_id":"","url":"https://api.github.com/users/YanqingWu","html_url":"https://github.com/YanqingWu","followers_url":"https://api.github.com/users/YanqingWu/followers","following_url":"https://api.github.com/users/YanqingWu/following{/other_user}","gists_url":"https://api.github.com/users/YanqingWu/gists{/gist_id}","starred_url":"https://api.github.com/users/YanqingWu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YanqingWu/subscriptions","organizations_url":"https://api.github.com/users/YanqingWu/orgs","repos_url":"https://api.github.com/users/YanqingWu/repos","events_url":"https://api.github.com/users/YanqingWu/events{/privacy}","received_events_url":"https://api.github.com/users/YanqingWu/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-24T13:28:30Z","performed_via_github_app":null},{"id":3065351702,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwNjUzNTE3MDI=","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3065351702","actor":{"login":"YanqingWu","id":49223324,"node_id":"MDQ6VXNlcjQ5MjIzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/49223324?v=4","gravatar_id":"","url":"https://api.github.com/users/YanqingWu","html_url":"https://github.com/YanqingWu","followers_url":"https://api.github.com/users/YanqingWu/followers","following_url":"https://api.github.com/users/YanqingWu/following{/other_user}","gists_url":"https://api.github.com/users/YanqingWu/gists{/gist_id}","starred_url":"https://api.github.com/users/YanqingWu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YanqingWu/subscriptions","organizations_url":"https://api.github.com/users/YanqingWu/orgs","repos_url":"https://api.github.com/users/YanqingWu/repos","events_url":"https://api.github.com/users/YanqingWu/events{/privacy}","received_events_url":"https://api.github.com/users/YanqingWu/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-24T13:28:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590319681","html_url":"https://github.com/BloodAxe/pytorch-toolbelt/issues/38#issuecomment-590319681","issue_url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/38","id":590319681,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDMxOTY4MQ==","user":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false},"created_at":"2020-02-24T13:28:40Z","updated_at":"2020-02-24T13:28:40Z","author_association":"OWNER","body":"Would you please share code to illustrate the problem you experience?\n\nпн, 24 февр. 2020 г. в 2:56 PM, Yanqing Wu <notifications@github.com>:\n\n> Loss.SoftCrossEntropyLoss() not work.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/BloodAxe/pytorch-toolbelt/issues/38?email_source=notifications&email_token=AAEB6YF63YVQHOYEGYLG2NDREO7XDA5CNFSM4K2HVJU2YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4IPXBMJA>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAEB6YDHJQKHENPKYHZ3PLTREO7XDANCNFSM4K2HVJUQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590319681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590858871","html_url":"https://github.com/BloodAxe/pytorch-toolbelt/issues/38#issuecomment-590858871","issue_url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/38","id":590858871,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDg1ODg3MQ==","user":{"login":"YanqingWu","id":49223324,"node_id":"MDQ6VXNlcjQ5MjIzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/49223324?v=4","gravatar_id":"","url":"https://api.github.com/users/YanqingWu","html_url":"https://github.com/YanqingWu","followers_url":"https://api.github.com/users/YanqingWu/followers","following_url":"https://api.github.com/users/YanqingWu/following{/other_user}","gists_url":"https://api.github.com/users/YanqingWu/gists{/gist_id}","starred_url":"https://api.github.com/users/YanqingWu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YanqingWu/subscriptions","organizations_url":"https://api.github.com/users/YanqingWu/orgs","repos_url":"https://api.github.com/users/YanqingWu/repos","events_url":"https://api.github.com/users/YanqingWu/events{/privacy}","received_events_url":"https://api.github.com/users/YanqingWu/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T13:11:10Z","updated_at":"2020-02-25T13:13:29Z","author_association":"NONE","body":"@BloodAxe @Konstantin Maksimov\r\n\r\nimport torch\r\nimport pytorch_toolbelt.losses as loss\r\nsfce = loss.SoftCrossEntropyLoss()\r\noutputs = torch.rand(10, 2).float()\r\ntargets = torch.randint(0, 2, (10, 1)).view(-1).long()\r\ntargets2 = torch.randint(0, 2, (10, 1)).long()\r\nprint('test 1: ', sfce(outputs, targets))\r\nprint('test 2: ', sfce(outputs, targets2))\r\n\r\ntwo tests I get the same error: It should not be a dimension not match or some other common problem.\r\nMay be I have the wrong torch version?\r\nprint(torch.__version__)\r\nI get : 1.3.1\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 3326, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-2-59d29e31efc1>\", line 7, in <module>\r\n    print('test 1: ', sfce(outputs, targets))\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 541, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/pytorch_toolbelt/losses/soft_ce.py\", line 15, in forward\r\n    not_ignored = label_target != self.ignore_index\r\nTypeError: ne() received an invalid combination of arguments - got (NoneType), but expected one of:\r\n * (Tensor other)\r\n      didn't match because some of the arguments have invalid types: (!NoneType!)\r\n * (Number other)\r\n      didn't match because some of the arguments have invalid types: (!NoneType!)","reactions":{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590858871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"YanqingWu","id":49223324,"node_id":"MDQ6VXNlcjQ5MjIzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/49223324?v=4","gravatar_id":"","url":"https://api.github.com/users/YanqingWu","html_url":"https://github.com/YanqingWu","followers_url":"https://api.github.com/users/YanqingWu/followers","following_url":"https://api.github.com/users/YanqingWu/following{/other_user}","gists_url":"https://api.github.com/users/YanqingWu/gists{/gist_id}","starred_url":"https://api.github.com/users/YanqingWu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YanqingWu/subscriptions","organizations_url":"https://api.github.com/users/YanqingWu/orgs","repos_url":"https://api.github.com/users/YanqingWu/repos","events_url":"https://api.github.com/users/YanqingWu/events{/privacy}","received_events_url":"https://api.github.com/users/YanqingWu/received_events","type":"User","site_admin":false}},{"id":3069381016,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA2OTM4MTAxNg==","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3069381016","actor":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-25T13:12:52Z","performed_via_github_app":null},{"id":3069381022,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwNjkzODEwMjI=","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3069381022","actor":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-25T13:12:52Z","performed_via_github_app":null},{"id":3069383303,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzA2OTM4MzMwMw==","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3069383303","actor":{"login":"konstantin","id":22084,"node_id":"MDQ6VXNlcjIyMDg0","avatar_url":"https://avatars.githubusercontent.com/u/22084?v=4","gravatar_id":"","url":"https://api.github.com/users/konstantin","html_url":"https://github.com/konstantin","followers_url":"https://api.github.com/users/konstantin/followers","following_url":"https://api.github.com/users/konstantin/following{/other_user}","gists_url":"https://api.github.com/users/konstantin/gists{/gist_id}","starred_url":"https://api.github.com/users/konstantin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konstantin/subscriptions","organizations_url":"https://api.github.com/users/konstantin/orgs","repos_url":"https://api.github.com/users/konstantin/repos","events_url":"https://api.github.com/users/konstantin/events{/privacy}","received_events_url":"https://api.github.com/users/konstantin/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-02-25T13:13:29Z","performed_via_github_app":null},{"id":3069383308,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMwNjkzODMzMDg=","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3069383308","actor":{"login":"konstantin","id":22084,"node_id":"MDQ6VXNlcjIyMDg0","avatar_url":"https://avatars.githubusercontent.com/u/22084?v=4","gravatar_id":"","url":"https://api.github.com/users/konstantin","html_url":"https://github.com/konstantin","followers_url":"https://api.github.com/users/konstantin/followers","following_url":"https://api.github.com/users/konstantin/following{/other_user}","gists_url":"https://api.github.com/users/konstantin/gists{/gist_id}","starred_url":"https://api.github.com/users/konstantin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konstantin/subscriptions","organizations_url":"https://api.github.com/users/konstantin/orgs","repos_url":"https://api.github.com/users/konstantin/repos","events_url":"https://api.github.com/users/konstantin/events{/privacy}","received_events_url":"https://api.github.com/users/konstantin/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-02-25T13:13:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590887206","html_url":"https://github.com/BloodAxe/pytorch-toolbelt/issues/38#issuecomment-590887206","issue_url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/38","id":590887206,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDg4NzIwNg==","user":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T14:15:41Z","updated_at":"2020-02-25T14:15:55Z","author_association":"OWNER","body":"Thanks for the reproduction code. As for now you can use quick workaround `loss.SoftCrossEntropyLoss(ignore_index=-100)`, Correct default value will be fixed in 0.3.1 release.","reactions":{"url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/comments/590887206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false}},{"id":3069615289,"node_id":"MDExOkNsb3NlZEV2ZW50MzA2OTYxNTI4OQ==","url":"https://api.github.com/repos/BloodAxe/pytorch-toolbelt/issues/events/3069615289","actor":{"login":"BloodAxe","id":532320,"node_id":"MDQ6VXNlcjUzMjMyMA==","avatar_url":"https://avatars.githubusercontent.com/u/532320?v=4","gravatar_id":"","url":"https://api.github.com/users/BloodAxe","html_url":"https://github.com/BloodAxe","followers_url":"https://api.github.com/users/BloodAxe/followers","following_url":"https://api.github.com/users/BloodAxe/following{/other_user}","gists_url":"https://api.github.com/users/BloodAxe/gists{/gist_id}","starred_url":"https://api.github.com/users/BloodAxe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BloodAxe/subscriptions","organizations_url":"https://api.github.com/users/BloodAxe/orgs","repos_url":"https://api.github.com/users/BloodAxe/repos","events_url":"https://api.github.com/users/BloodAxe/events{/privacy}","received_events_url":"https://api.github.com/users/BloodAxe/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-02-25T14:15:41Z","state_reason":null,"performed_via_github_app":null}]