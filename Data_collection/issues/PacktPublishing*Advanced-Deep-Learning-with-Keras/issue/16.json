{"url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16","repository_url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras","labels_url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16/labels{/name}","comments_url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16/comments","events_url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16/events","html_url":"https://github.com/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16","id":850579193,"node_id":"MDU6SXNzdWU4NTA1NzkxOTM=","number":16,"title":" Error occurred when finalizing GeneratorDataset iterator | Trying to run image segmentation on custom dataset","user":{"login":"MLHafizur","id":45520794,"node_id":"MDQ6VXNlcjQ1NTIwNzk0","avatar_url":"https://avatars.githubusercontent.com/u/45520794?v=4","gravatar_id":"","url":"https://api.github.com/users/MLHafizur","html_url":"https://github.com/MLHafizur","followers_url":"https://api.github.com/users/MLHafizur/followers","following_url":"https://api.github.com/users/MLHafizur/following{/other_user}","gists_url":"https://api.github.com/users/MLHafizur/gists{/gist_id}","starred_url":"https://api.github.com/users/MLHafizur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MLHafizur/subscriptions","organizations_url":"https://api.github.com/users/MLHafizur/orgs","repos_url":"https://api.github.com/users/MLHafizur/repos","events_url":"https://api.github.com/users/MLHafizur/events{/privacy}","received_events_url":"https://api.github.com/users/MLHafizur/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-04-05T18:51:03Z","updated_at":"2021-04-12T00:26:54Z","closed_at":"2021-04-12T00:26:54Z","author_association":"NONE","active_lock_reason":null,"body":"Hello, I am trying to train the segmentation model on my custom dataset, which has two classes 1: Copper  and 2:Belmouth. \r\nI used generate_gt_segmentation.py codes to convert JSON to .npy file. \r\nWhile running the training process on google colab tf version 2.4.1 getting following error: \r\n\r\n```\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError:  OOM when allocating tensor with shape[4,16,720,1280] and type float on /job:localhost/replica:0/task:0/device:GPU:0 by allocator GPU_0_bfc\r\n\t [[node fcn/ResNet56v2/conv2d_18/Conv2D (defined at fcn-12.3.1.py:154) ]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n [Op:__inference_train_function_16535]\r\n\r\nFunction call stack:\r\ntrain_function\r\n\r\n2021-04-05 18:46:10.106657: W tensorflow/core/kernels/data/generator_dataset_op.cc:107] Error occurred when finalizing GeneratorDataset iterator: Failed precondition: Python interpreter state is not initialized. The process may be terminated.\r\n\t [[{{node PyFunc}}]]\r\n```\r\n\r\nI also noticed that data_generator.py code give the # of class = 4, which is wrong also number of classes supposed to be 3. How may I solve the issue?","closed_by":{"login":"roatienza","id":8848769,"node_id":"MDQ6VXNlcjg4NDg3Njk=","avatar_url":"https://avatars.githubusercontent.com/u/8848769?v=4","gravatar_id":"","url":"https://api.github.com/users/roatienza","html_url":"https://github.com/roatienza","followers_url":"https://api.github.com/users/roatienza/followers","following_url":"https://api.github.com/users/roatienza/following{/other_user}","gists_url":"https://api.github.com/users/roatienza/gists{/gist_id}","starred_url":"https://api.github.com/users/roatienza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roatienza/subscriptions","organizations_url":"https://api.github.com/users/roatienza/orgs","repos_url":"https://api.github.com/users/roatienza/repos","events_url":"https://api.github.com/users/roatienza/events{/privacy}","received_events_url":"https://api.github.com/users/roatienza/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PacktPublishing/Advanced-Deep-Learning-with-Keras/issues/16/timeline","performed_via_github_app":null,"state_reason":"completed"}