{"url":"https://api.github.com/repos/marl/openl3/issues/89","repository_url":"https://api.github.com/repos/marl/openl3","labels_url":"https://api.github.com/repos/marl/openl3/issues/89/labels{/name}","comments_url":"https://api.github.com/repos/marl/openl3/issues/89/comments","events_url":"https://api.github.com/repos/marl/openl3/issues/89/events","html_url":"https://github.com/marl/openl3/issues/89","id":1235931856,"node_id":"I_kwDOCSWbMs5JqtLQ","number":89,"title":"m1 macos installation problem","user":{"login":"yy945635407","id":33059420,"node_id":"MDQ6VXNlcjMzMDU5NDIw","avatar_url":"https://avatars.githubusercontent.com/u/33059420?v=4","gravatar_id":"","url":"https://api.github.com/users/yy945635407","html_url":"https://github.com/yy945635407","followers_url":"https://api.github.com/users/yy945635407/followers","following_url":"https://api.github.com/users/yy945635407/following{/other_user}","gists_url":"https://api.github.com/users/yy945635407/gists{/gist_id}","starred_url":"https://api.github.com/users/yy945635407/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yy945635407/subscriptions","organizations_url":"https://api.github.com/users/yy945635407/orgs","repos_url":"https://api.github.com/users/yy945635407/repos","events_url":"https://api.github.com/users/yy945635407/events{/privacy}","received_events_url":"https://api.github.com/users/yy945635407/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-05-14T09:58:33Z","updated_at":"2022-09-25T11:07:48Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, I am using an m1 macbook, and when I try to install openl3, I encounter the problem when the script tries to install h5py, but I have installed h5py in my virtual environment.\r\nThe problem is as below:\r\n      building 'h5py.defs' extension\r\n      creating build/temp.macosx-11.0-arm64-3.8\r\n      creating build/temp.macosx-11.0-arm64-3.8/private\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308\r\n      creating build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py\r\n      clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include -arch arm64 -fPIC -O2 -isystem /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include -arch arm64 -DH5_USE_16_API -I./h5py -I/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/lzf -I/opt/local/include -I/usr/local/include -I/opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/numpy/core/include -I/opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/python3.8 -c /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c -o build/temp.macosx-11.0-arm64-3.8/private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.o\r\n      In file included from /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:731:\r\n      In file included from ./h5py/api_compat.h:26:\r\n      In file included from /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/numpy/core/include/numpy/arrayobject.h:4:\r\n      In file included from /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/numpy/core/include/numpy/ndarrayobject.h:12:\r\n      In file included from /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/numpy/core/include/numpy/ndarraytypes.h:1969:\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:17:2: warning: \"Using deprecated NumPy API, disable it with \"          \"#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-W#warnings]\r\n      #warning \"Using deprecated NumPy API, disable it with \" \\\r\n       ^\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:16556:56: error: too few arguments to function call, expected 3, have 2\r\n        __pyx_t_1 = H5Oget_info(__pyx_v_loc_id, __pyx_v_oinfo); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 1509, __pyx_L1_error)\r\n                    ~~~~~~~~~~~                              ^\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/H5Opublic.h:497:15: note: 'H5Oget_info3' declared here\r\n      H5_DLL herr_t H5Oget_info3(hid_t loc_id, H5O_info2_t *oinfo, unsigned fields);\r\n                    ^\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:16671:95: error: too few arguments to function call, expected 5, have 4\r\n        __pyx_t_1 = H5Oget_info_by_name(__pyx_v_loc_id, __pyx_v_name, __pyx_v_oinfo, __pyx_v_lapl_id); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 1520, __pyx_L1_error)\r\n                    ~~~~~~~~~~~~~~~~~~~                                                             ^\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/H5Opublic.h:557:15: note: 'H5Oget_info_by_name3' declared here\r\n      H5_DLL herr_t H5Oget_info_by_name3(hid_t loc_id, const char *name, H5O_info2_t *oinfo, unsigned fields,\r\n                    ^\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:16786:144: error: too few arguments to function call, expected 8, have 7\r\n        __pyx_t_1 = H5Oget_info_by_idx(__pyx_v_loc_id, __pyx_v_group_name, __pyx_v_idx_type, __pyx_v_order, __pyx_v_n, __pyx_v_oinfo, __pyx_v_lapl_id); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 1531, __pyx_L1_error)\r\n                    ~~~~~~~~~~~~~~~~~~                                                                                                               ^\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/H5Opublic.h:631:15: note: 'H5Oget_info_by_idx3' declared here\r\n      H5_DLL herr_t H5Oget_info_by_idx3(hid_t loc_id, const char *group_name, H5_index_t idx_type,\r\n                    ^\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:17821:100: error: too few arguments to function call, expected 6, have 5\r\n        __pyx_t_1 = H5Ovisit(__pyx_v_obj_id, __pyx_v_idx_type, __pyx_v_order, __pyx_v_op, __pyx_v_op_data); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 1630, __pyx_L1_error)\r\n                    ~~~~~~~~                                                                             ^\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/H5Opublic.h:1326:15: note: 'H5Ovisit3' declared here\r\n      H5_DLL herr_t H5Ovisit3(hid_t obj_id, H5_index_t idx_type, H5_iter_order_t order, H5O_iterate2_t op,\r\n                    ^\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:17936:143: error: too few arguments to function call, expected 8, have 7\r\n        __pyx_t_1 = H5Ovisit_by_name(__pyx_v_loc_id, __pyx_v_obj_name, __pyx_v_idx_type, __pyx_v_order, __pyx_v_op, __pyx_v_op_data, __pyx_v_lapl_id); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 1641, __pyx_L1_error)\r\n                    ~~~~~~~~~~~~~~~~                                                                                                                ^\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/H5Opublic.h:1492:15: note: 'H5Ovisit_by_name3' declared here\r\n      H5_DLL herr_t H5Ovisit_by_name3(hid_t loc_id, const char *obj_name, H5_index_t idx_type,\r\n                    ^\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:21846:13: warning: assigning to 'void *' from 'const void *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]\r\n        __pyx_t_1 = H5Pget_driver_info(__pyx_v_plist_id); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 2016, __pyx_L1_error)\r\n                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n      /private/var/folders/rz/zx876pv95_39jqfx9hwszfq00000gn/T/pip-install-uj6hq2xz/h5py_235d3597fd094986b308a5244243c308/h5py/defs.c:34606:68: error: too few arguments to function call, expected 4, have 3\r\n        __pyx_t_1 = H5Sencode(__pyx_v_obj_id, __pyx_v_buf, __pyx_v_nalloc); if (unlikely(PyErr_Occurred())) __PYX_ERR(0, 3303, __pyx_L1_error)\r\n                    ~~~~~~~~~                                            ^\r\n      /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/include/H5Spublic.h:373:15: note: 'H5Sencode2' declared here\r\n      H5_DLL herr_t H5Sencode2(hid_t obj_id, void *buf, size_t *nalloc, hid_t fapl);\r\n                    ^\r\n      2 warnings and 6 errors generated.\r\n      error: command '/usr/bin/clang' failed with exit code 1\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  WARNING: No metadata found in /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages\r\n  Rolling back uninstall of h5py\r\n  Moving to /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/h5py-3.6.0.dist-info/\r\n   from /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/~5py-3.6.0.dist-info\r\n  Moving to /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/h5py/\r\n   from /opt/homebrew/Caskroom/miniforge/base/envs/pytorch_env/lib/python3.8/site-packages/~5py\r\nerror: legacy-install-failure\r\n\r\n× Encountered error while trying to install package.\r\n╰─> h5py\r\n\r\nnote: This is an issue with the package mentioned above, not pip.\r\nhint: See above for output from the failure.\r\n\r\nMy python version: 3.8.13\r\n\r\nBy the way, I have tried to build from source, but this problem of h5py still exists\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/marl/openl3/issues/89/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/marl/openl3/issues/89/timeline","performed_via_github_app":null,"state_reason":null}