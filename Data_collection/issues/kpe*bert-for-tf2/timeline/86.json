[{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/784276394","html_url":"https://github.com/kpe/bert-for-tf2/issues/86#issuecomment-784276394","issue_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/86","id":784276394,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDI3NjM5NA==","user":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false},"created_at":"2021-02-23T15:18:57Z","updated_at":"2021-02-23T15:18:57Z","author_association":"OWNER","body":"I believe, by calling `build()` like this:\r\n```python\r\n   model.build((3, 128))\r\n```\r\nyou are effectively telling the `BertModelLayer` to expect a single tensor of `token_ids` (with `batch_size=3`) and use the default `segment` type `0`:\r\n\r\nhttps://github.com/kpe/bert-for-tf2/blob/55f6a6fd5d8ea14f96ee19938b7a1bf0cb26aaea/bert/model.py#L45-L54\r\n\r\n If you want to specify `segment` ids, i.e. `token_type_ids`, try passing a list of shapes, i.e. something like:\r\n\r\n```python\r\nl_input_ids           = keras.layers.Input(shape=(max_seq_len,), dtype='int32')\r\nl_token_type_ids = keras.layers.Input(shape=(max_seq_len,), dtype='int32')\r\n\r\n# provide a custom token_type/segment id as a layer input\r\noutput = l_bert([l_input_ids, l_token_type_ids])          # [batch_size, max_seq_len, hidden_size]\r\nmodel = keras.Model(inputs=[l_input_ids, l_token_type_ids], outputs=output)\r\nmodel.build(input_shape=[(None, max_seq_len), (None, max_seq_len)])\r\n```","reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/784276394/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/784362620","html_url":"https://github.com/kpe/bert-for-tf2/issues/86#issuecomment-784362620","issue_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/86","id":784362620,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDM2MjYyMA==","user":{"login":"danielesposito27","id":79523312,"node_id":"MDQ6VXNlcjc5NTIzMzEy","avatar_url":"https://avatars.githubusercontent.com/u/79523312?v=4","gravatar_id":"","url":"https://api.github.com/users/danielesposito27","html_url":"https://github.com/danielesposito27","followers_url":"https://api.github.com/users/danielesposito27/followers","following_url":"https://api.github.com/users/danielesposito27/following{/other_user}","gists_url":"https://api.github.com/users/danielesposito27/gists{/gist_id}","starred_url":"https://api.github.com/users/danielesposito27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielesposito27/subscriptions","organizations_url":"https://api.github.com/users/danielesposito27/orgs","repos_url":"https://api.github.com/users/danielesposito27/repos","events_url":"https://api.github.com/users/danielesposito27/events{/privacy}","received_events_url":"https://api.github.com/users/danielesposito27/received_events","type":"User","site_admin":false},"created_at":"2021-02-23T17:16:52Z","updated_at":"2021-02-23T17:17:28Z","author_association":"NONE","body":"Hey KPE!. Thank you for your answer, I implemented the code to accept the additional inputs. Is there a way to make it accept input_mask as a third input as well? Or should I include that in another way? it seems like the base code would only allow up to two. Thanks in advance and I apologize for asking again, any help is kindly appreciated (beginner here)! ","reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/784362620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"danielesposito27","id":79523312,"node_id":"MDQ6VXNlcjc5NTIzMzEy","avatar_url":"https://avatars.githubusercontent.com/u/79523312?v=4","gravatar_id":"","url":"https://api.github.com/users/danielesposito27","html_url":"https://github.com/danielesposito27","followers_url":"https://api.github.com/users/danielesposito27/followers","following_url":"https://api.github.com/users/danielesposito27/following{/other_user}","gists_url":"https://api.github.com/users/danielesposito27/gists{/gist_id}","starred_url":"https://api.github.com/users/danielesposito27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielesposito27/subscriptions","organizations_url":"https://api.github.com/users/danielesposito27/orgs","repos_url":"https://api.github.com/users/danielesposito27/repos","events_url":"https://api.github.com/users/danielesposito27/events{/privacy}","received_events_url":"https://api.github.com/users/danielesposito27/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/785036179","html_url":"https://github.com/kpe/bert-for-tf2/issues/86#issuecomment-785036179","issue_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/86","id":785036179,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTAzNjE3OQ==","user":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false},"created_at":"2021-02-24T12:17:24Z","updated_at":"2021-02-24T12:17:24Z","author_association":"OWNER","body":"@danielesposito27 - the mask is kind of auto generated internally (i.e. all zero token_ids get masked), and I believe, there is no way to explicitly specify it (but it should not be needed - in most cases I guess).","reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/785036179/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false}},{"id":4370630101,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM3MDYzMDEwMQ==","url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/events/4370630101","actor":{"login":"danielesposito27","id":79523312,"node_id":"MDQ6VXNlcjc5NTIzMzEy","avatar_url":"https://avatars.githubusercontent.com/u/79523312?v=4","gravatar_id":"","url":"https://api.github.com/users/danielesposito27","html_url":"https://github.com/danielesposito27","followers_url":"https://api.github.com/users/danielesposito27/followers","following_url":"https://api.github.com/users/danielesposito27/following{/other_user}","gists_url":"https://api.github.com/users/danielesposito27/gists{/gist_id}","starred_url":"https://api.github.com/users/danielesposito27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielesposito27/subscriptions","organizations_url":"https://api.github.com/users/danielesposito27/orgs","repos_url":"https://api.github.com/users/danielesposito27/repos","events_url":"https://api.github.com/users/danielesposito27/events{/privacy}","received_events_url":"https://api.github.com/users/danielesposito27/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-24T12:17:24Z","performed_via_github_app":null},{"id":4370630105,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzNzA2MzAxMDU=","url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/events/4370630105","actor":{"login":"danielesposito27","id":79523312,"node_id":"MDQ6VXNlcjc5NTIzMzEy","avatar_url":"https://avatars.githubusercontent.com/u/79523312?v=4","gravatar_id":"","url":"https://api.github.com/users/danielesposito27","html_url":"https://github.com/danielesposito27","followers_url":"https://api.github.com/users/danielesposito27/followers","following_url":"https://api.github.com/users/danielesposito27/following{/other_user}","gists_url":"https://api.github.com/users/danielesposito27/gists{/gist_id}","starred_url":"https://api.github.com/users/danielesposito27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielesposito27/subscriptions","organizations_url":"https://api.github.com/users/danielesposito27/orgs","repos_url":"https://api.github.com/users/danielesposito27/repos","events_url":"https://api.github.com/users/danielesposito27/events{/privacy}","received_events_url":"https://api.github.com/users/danielesposito27/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-24T12:17:24Z","performed_via_github_app":null},{"id":4371686832,"node_id":"MDExOkNsb3NlZEV2ZW50NDM3MTY4NjgzMg==","url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/events/4371686832","actor":{"login":"danielesposito27","id":79523312,"node_id":"MDQ6VXNlcjc5NTIzMzEy","avatar_url":"https://avatars.githubusercontent.com/u/79523312?v=4","gravatar_id":"","url":"https://api.github.com/users/danielesposito27","html_url":"https://github.com/danielesposito27","followers_url":"https://api.github.com/users/danielesposito27/followers","following_url":"https://api.github.com/users/danielesposito27/following{/other_user}","gists_url":"https://api.github.com/users/danielesposito27/gists{/gist_id}","starred_url":"https://api.github.com/users/danielesposito27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielesposito27/subscriptions","organizations_url":"https://api.github.com/users/danielesposito27/orgs","repos_url":"https://api.github.com/users/danielesposito27/repos","events_url":"https://api.github.com/users/danielesposito27/events{/privacy}","received_events_url":"https://api.github.com/users/danielesposito27/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-02-24T15:42:34Z","state_reason":null,"performed_via_github_app":null}]