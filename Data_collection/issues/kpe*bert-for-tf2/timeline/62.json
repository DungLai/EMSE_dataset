[{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/665359738","html_url":"https://github.com/kpe/bert-for-tf2/issues/62#issuecomment-665359738","issue_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62","id":665359738,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTM1OTczOA==","user":{"login":"EJHyun","id":56884260,"node_id":"MDQ6VXNlcjU2ODg0MjYw","avatar_url":"https://avatars.githubusercontent.com/u/56884260?v=4","gravatar_id":"","url":"https://api.github.com/users/EJHyun","html_url":"https://github.com/EJHyun","followers_url":"https://api.github.com/users/EJHyun/followers","following_url":"https://api.github.com/users/EJHyun/following{/other_user}","gists_url":"https://api.github.com/users/EJHyun/gists{/gist_id}","starred_url":"https://api.github.com/users/EJHyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EJHyun/subscriptions","organizations_url":"https://api.github.com/users/EJHyun/orgs","repos_url":"https://api.github.com/users/EJHyun/repos","events_url":"https://api.github.com/users/EJHyun/events{/privacy}","received_events_url":"https://api.github.com/users/EJHyun/received_events","type":"User","site_admin":false},"created_at":"2020-07-29T00:20:20Z","updated_at":"2020-07-29T00:30:26Z","author_association":"NONE","body":"> Hello,\r\n> \r\n> Thanks for this project. I am looking for the method to get the embeddings from the selected encoder layer, instead of the last one. I've noticed that `out_layer_ndx` attribute should specify the indices of the layers which output is averaged. Is my attempt in the snippet below correct? If yes, maybe it could be included in the documentation. Otherwise, is there any way to do this right?\r\n> \r\n> ```python\r\n> import tensorflow as tf\r\n> import bert\r\n> \r\n> n=6\r\n> bert_params = bert.params_from_pretrained_ckpt(modelBertDir)\r\n> bert_layer = bert.BertModelLayer.from_params(bert_params, name=\"bert\", out_layer_ndxs=[n])\r\n> model = tf.keras.Sequential([\r\n>             tf.keras.layers.Input(shape=(128,), dtype='int32', name='input_ids'),\r\n>             self.bert_layer])\r\n> \r\n> model.build(input_shape=(None, 128))\r\n> bert_layer.apply_adapter_freeze()\r\n> ```\r\nHi!\r\nThanks for the code\r\n\r\nI'm just a Novice for BERT and TF codes\r\nAnd I will be grateful if you help my issue on your code\r\n\r\nDo you mean that building bert_layer like that can make my code\r\nget embeddings from each hidden layers?\r\n\r\nThan what does \"n\" in out_layer_ndxs[n] stands for?\r\nIs it the number of hidden layers from the model?\r\n\r\nIf so,  I'm using 12 hidden layers\r\nand I understood about using out_layer_ndxs = [12]\r\n\r\nBut how can I finally see my embeddings by using out_layer_ndx ?????\r\n\r\nThank you for reading","reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/665359738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"EJHyun","id":56884260,"node_id":"MDQ6VXNlcjU2ODg0MjYw","avatar_url":"https://avatars.githubusercontent.com/u/56884260?v=4","gravatar_id":"","url":"https://api.github.com/users/EJHyun","html_url":"https://github.com/EJHyun","followers_url":"https://api.github.com/users/EJHyun/followers","following_url":"https://api.github.com/users/EJHyun/following{/other_user}","gists_url":"https://api.github.com/users/EJHyun/gists{/gist_id}","starred_url":"https://api.github.com/users/EJHyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EJHyun/subscriptions","organizations_url":"https://api.github.com/users/EJHyun/orgs","repos_url":"https://api.github.com/users/EJHyun/repos","events_url":"https://api.github.com/users/EJHyun/events{/privacy}","received_events_url":"https://api.github.com/users/EJHyun/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/665475605","html_url":"https://github.com/kpe/bert-for-tf2/issues/62#issuecomment-665475605","issue_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62","id":665475605,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTQ3NTYwNQ==","user":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false},"created_at":"2020-07-29T07:04:14Z","updated_at":"2020-07-29T07:04:14Z","author_association":"OWNER","body":"`out_layer_ndxs` is just a list of layer indexs, i.e. if it would be `[1,2,11]` the output of the `BertModelLayer` would be a tupple containing the outputs from the second, third and last layer.","reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/665475605/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/665488412","html_url":"https://github.com/kpe/bert-for-tf2/issues/62#issuecomment-665488412","issue_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62","id":665488412,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTQ4ODQxMg==","user":{"login":"EJHyun","id":56884260,"node_id":"MDQ6VXNlcjU2ODg0MjYw","avatar_url":"https://avatars.githubusercontent.com/u/56884260?v=4","gravatar_id":"","url":"https://api.github.com/users/EJHyun","html_url":"https://github.com/EJHyun","followers_url":"https://api.github.com/users/EJHyun/followers","following_url":"https://api.github.com/users/EJHyun/following{/other_user}","gists_url":"https://api.github.com/users/EJHyun/gists{/gist_id}","starred_url":"https://api.github.com/users/EJHyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EJHyun/subscriptions","organizations_url":"https://api.github.com/users/EJHyun/orgs","repos_url":"https://api.github.com/users/EJHyun/repos","events_url":"https://api.github.com/users/EJHyun/events{/privacy}","received_events_url":"https://api.github.com/users/EJHyun/received_events","type":"User","site_admin":false},"created_at":"2020-07-29T07:31:46Z","updated_at":"2020-07-29T07:31:46Z","author_association":"NONE","body":"> `out_layer_ndxs` is just a list of layer indexs, i.e. if it would be `[1,2,11]` the output of the `BertModelLayer` would be a tupple containing the outputs from the second, third and last layer.\r\n\r\nWow Thank you so much\r\nI finally can see my hidden layer's output","reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/comments/665488412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"EJHyun","id":56884260,"node_id":"MDQ6VXNlcjU2ODg0MjYw","avatar_url":"https://avatars.githubusercontent.com/u/56884260?v=4","gravatar_id":"","url":"https://api.github.com/users/EJHyun","html_url":"https://github.com/EJHyun","followers_url":"https://api.github.com/users/EJHyun/followers","following_url":"https://api.github.com/users/EJHyun/following{/other_user}","gists_url":"https://api.github.com/users/EJHyun/gists{/gist_id}","starred_url":"https://api.github.com/users/EJHyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EJHyun/subscriptions","organizations_url":"https://api.github.com/users/EJHyun/orgs","repos_url":"https://api.github.com/users/EJHyun/repos","events_url":"https://api.github.com/users/EJHyun/events{/privacy}","received_events_url":"https://api.github.com/users/EJHyun/received_events","type":"User","site_admin":false}},{"id":3725543307,"node_id":"MDExOkNsb3NlZEV2ZW50MzcyNTU0MzMwNw==","url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/events/3725543307","actor":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-09-03T16:17:46Z","state_reason":null,"performed_via_github_app":null}]