{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62","repository_url":"https://api.github.com/repos/kpe/bert-for-tf2","labels_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62/labels{/name}","comments_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62/comments","events_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62/events","html_url":"https://github.com/kpe/bert-for-tf2/issues/62","id":620249014,"node_id":"MDU6SXNzdWU2MjAyNDkwMTQ=","number":62,"title":"Accessing representation of n-th layer","user":{"login":"tomlimi","id":20024502,"node_id":"MDQ6VXNlcjIwMDI0NTAy","avatar_url":"https://avatars.githubusercontent.com/u/20024502?v=4","gravatar_id":"","url":"https://api.github.com/users/tomlimi","html_url":"https://github.com/tomlimi","followers_url":"https://api.github.com/users/tomlimi/followers","following_url":"https://api.github.com/users/tomlimi/following{/other_user}","gists_url":"https://api.github.com/users/tomlimi/gists{/gist_id}","starred_url":"https://api.github.com/users/tomlimi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomlimi/subscriptions","organizations_url":"https://api.github.com/users/tomlimi/orgs","repos_url":"https://api.github.com/users/tomlimi/repos","events_url":"https://api.github.com/users/tomlimi/events{/privacy}","received_events_url":"https://api.github.com/users/tomlimi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-05-18T14:19:32Z","updated_at":"2020-09-03T16:17:46Z","closed_at":"2020-09-03T16:17:46Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\nThanks for this project. I am looking for the method to get the embeddings from the selected encoder layer, instead of the last one. I've noticed that  `out_layer_ndx` attribute should specify the indices of the layers which output is averaged. Is my attempt in the snippet below correct? If yes, maybe it could be included in the documentation. Otherwise, is there any way to do this right?\r\n\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport bert\r\n\r\nn=6\r\nbert_params = bert.params_from_pretrained_ckpt(modelBertDir)\r\nbert_layer = bert.BertModelLayer.from_params(bert_params, name=\"bert\", out_layer_ndxs=[n])\r\nmodel = tf.keras.Sequential([\r\n            tf.keras.layers.Input(shape=(128,), dtype='int32', name='input_ids'),\r\n            self.bert_layer])\r\n\r\nmodel.build(input_shape=(None, 128))\r\nbert_layer.apply_adapter_freeze()\r\n```","closed_by":{"login":"kpe","id":2535923,"node_id":"MDQ6VXNlcjI1MzU5MjM=","avatar_url":"https://avatars.githubusercontent.com/u/2535923?v=4","gravatar_id":"","url":"https://api.github.com/users/kpe","html_url":"https://github.com/kpe","followers_url":"https://api.github.com/users/kpe/followers","following_url":"https://api.github.com/users/kpe/following{/other_user}","gists_url":"https://api.github.com/users/kpe/gists{/gist_id}","starred_url":"https://api.github.com/users/kpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpe/subscriptions","organizations_url":"https://api.github.com/users/kpe/orgs","repos_url":"https://api.github.com/users/kpe/repos","events_url":"https://api.github.com/users/kpe/events{/privacy}","received_events_url":"https://api.github.com/users/kpe/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/kpe/bert-for-tf2/issues/62/timeline","performed_via_github_app":null,"state_reason":"completed"}