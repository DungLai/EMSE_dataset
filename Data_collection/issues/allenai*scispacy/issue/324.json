{"url":"https://api.github.com/repos/allenai/scispacy/issues/324","repository_url":"https://api.github.com/repos/allenai/scispacy","labels_url":"https://api.github.com/repos/allenai/scispacy/issues/324/labels{/name}","comments_url":"https://api.github.com/repos/allenai/scispacy/issues/324/comments","events_url":"https://api.github.com/repos/allenai/scispacy/issues/324/events","html_url":"https://github.com/allenai/scispacy/issues/324","id":814559579,"node_id":"MDU6SXNzdWU4MTQ1NTk1Nzk=","number":324,"title":"MeSH linker returns UMLS concepts","user":{"login":"nsorros","id":4975761,"node_id":"MDQ6VXNlcjQ5NzU3NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4975761?v=4","gravatar_id":"","url":"https://api.github.com/users/nsorros","html_url":"https://github.com/nsorros","followers_url":"https://api.github.com/users/nsorros/followers","following_url":"https://api.github.com/users/nsorros/following{/other_user}","gists_url":"https://api.github.com/users/nsorros/gists{/gist_id}","starred_url":"https://api.github.com/users/nsorros/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsorros/subscriptions","organizations_url":"https://api.github.com/users/nsorros/orgs","repos_url":"https://api.github.com/users/nsorros/repos","events_url":"https://api.github.com/users/nsorros/events{/privacy}","received_events_url":"https://api.github.com/users/nsorros/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-02-23T15:16:39Z","updated_at":"2021-02-23T17:31:33Z","closed_at":"2021-02-23T17:31:33Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"# Details\r\n\r\nIt seems that the mesh linker in version 0.4 returns UMLS concepts instead of MeSH. I am providing you some code to reproduce the difference in behaviour between 0.2.5 and 0.4.0. Will investigate the source of the problem and update this issue.\r\n\r\n# To reproduce\r\n\r\n## Version 0.2.5\r\n\r\n### Install\r\n```\r\npip install scispacy==0.2.5\r\npip install https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.2.5/en_core_sci_sm-0.2.5.tar.gz\r\n```\r\n\r\n### Script\r\n```\r\nimport spacy\r\nimport scispacy\r\nfrom scispacy.linking import EntityLinker\r\n\r\ntext = \"Malaria is a mosquito-borne infectious disease that affects humans and other animals. Malaria causes symptoms that typically include fever, tiredness, vomiting, and headaches. In severe cases it can cause yellow skin, seizures, coma, or death\"\r\n\r\nnlp = spacy.load('en_core_sci_sm')\r\nlinker = EntityLinker(name=\"mesh\")\r\ndoc = nlp(text)\r\nprint([ent._.kb_ents for ent in doc.ents])\r\n```\r\n\r\n### Results\r\n\r\n```\r\n[[('D008288', 1.0)], [], [('D006801', 1.0)], [('D000818', 1.0), ('D002013', 0.7804350256919861), ('D000829', 0.7701025605201721), ('D000835', 0.7683348655700684), ('D006762', 0.7380481958389282)], [('D008288', 1.0)], [('D000071896', 0.8311232328414917), ('D062706', 0.7586084604263306), ('D009461', 0.7523581385612488), ('D012816', 0.7229775786399841), ('D003863', 0.720658540725708)], [('D005334', 1.0), ('D006255', 0.8281346559524536), ('D011778', 0.8099866509437561), ('D011016', 0.8098501563072205), ('D014435', 0.7505505084991455)], [], [('D014839', 1.0)], [('D006261', 0.8413779735565186), ('D014653', 0.7558636665344238)], [('D018805', 0.7512739300727844)], [], [('D004124', 0.795078694820404), ('D031567', 0.7838744521141052), ('D010128', 0.7816929817199707), ('D001853', 0.7810686230659485), ('D031804', 0.7755565047264099)], [('D012867', 1.0), ('D012880', 0.7630483508110046), ('D017592', 0.7562605738639832), ('D009506', 0.7346692085266113), ('D012882', 0.7077863812446594)], [('D012640', 1.0), ('D013036', 0.8386269211769104), ('D020938', 0.7761068940162659), ('D004828', 0.7586985230445862), ('D003294', 0.7213573455810547)], [('D003128', 1.0)], [('D003643', 1.0), ('D009026', 0.8019763231277466), ('D016923', 0.784024178981781), ('D013398', 0.7552506327629089), ('D001926', 0.7274324297904968)]]\r\n```\r\n\r\n## Version 0.4.0\r\n\r\n### Install\r\n```\r\npip install scispacy==0.4.0\r\npip install https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.4.0/en_core_sci_sm-0.4.0.tar.gz\r\n```\r\n\r\n### Script\r\n\r\n```\r\nfrom scispacy.linking import EntityLinker\r\nimport scispacy\r\nimport spacy\r\n\r\ntext = \"Malaria is a mosquito-borne infectious disease that affects humans and other animals. Malaria causes symptoms that typically include fever, tiredness, vomiting, and headaches. In severe cases it can cause yellow skin, seizures, coma, or death\"\r\n\r\nnlp = spacy.load(\"en_core_sci_sm\")\r\nnlp.add_pipe(\"scispacy_linker\", config={\"name\": \"mesh\"})\r\n\r\ndoc = nlp(text)\r\nprint([ent._.kb_ents for ent in doc.ents])\r\n```\r\n\r\n### Results\r\n\r\n```\r\n[[('C0024530', 1.0), ('C0206255', 1.0), ('C2984572', 1.0), ('C3541306', 1.0), ('C0024536', 0.9396661520004272)], [('C0521831', 1.0)], [('C0086418', 1.0), ('C1300203', 1.0), ('C0318356', 0.7484926581382751), ('C0005660', 0.7458980083465576), ('C4318409', 0.7329899072647095)], [('C0003062', 1.0), ('C3540698', 1.0), ('C4704859', 0.8424988389015198), ('C0003060', 0.8150659799575806), ('C0003044', 0.8055132627487183)], [('C0024530', 1.0), ('C0206255', 1.0), ('C2984572', 1.0), ('C3541306', 1.0), ('C0024536', 0.9396661520004272)], [('C0683368', 1.0), ('C1457887', 1.0), ('C0231221', 0.9386579990386963), ('C1706867', 0.9368797540664673)], [('C0015967', 1.0), ('C4552740', 1.0), ('C0019345', 0.7983872890472412), ('C0034362', 0.7933211922645569), ('C0872996', 0.7933211922645569)], [('C0015672', 0.9999998807907104), ('C4553152', 0.9999998807907104), ('C0041834', 0.8257054090499878), ('C1260956', 0.8257054090499878), ('C4683887', 0.8245459198951721)], [('C0042963', 1.0), ('C1963281', 1.0), ('C3898969', 1.0), ('C4084766', 1.0), ('C4084767', 1.0)], [('C0018681', 1.0), ('C0270697', 0.8570944666862488), ('C3829986', 0.8479108214378357), ('C4553197', 0.8460302352905273), ('C0033893', 0.8227493166923523)], [('C0205082', 1.0), ('C1519275', 1.0), ('C1547227', 1.0), ('C1547231', 1.0), ('C1561581', 1.0)], [('C0868928', 1.0), ('C1533148', 1.0), ('C0010656', 0.7321570515632629), ('C1706255', 0.7069801688194275), ('C1706256', 0.7069801688194275)], [('C0022346', 1.0), ('C0558148', 1.0), ('C4288970', 0.8359759449958801), ('C0221205', 0.8106981515884399), ('C2126312', 0.750730037689209)], [('C0036572', 1.0), ('C4553401', 0.915367066860199), ('C0751495', 0.8776527643203735), ('C0270844', 0.8742113709449768), ('C0270846', 0.860637366771698)], [('C0009421', 1.0), ('C0543874', 1.0), ('C3146279', 1.0), ('C0151294', 0.7237501740455627), ('C1522740', 0.7063201665878296)], [('C0011065', 0.9999999403953552), ('C1306577', 0.9999999403953552), ('C1546949', 0.9999999403953552), ('C1559081', 0.9999999403953552), ('C4722467', 0.9999999403953552)]]\r\n```\r\n","closed_by":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/allenai/scispacy/issues/324/timeline","performed_via_github_app":null,"state_reason":"completed"}