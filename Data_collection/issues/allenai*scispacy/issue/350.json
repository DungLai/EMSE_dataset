{"url":"https://api.github.com/repos/allenai/scispacy/issues/350","repository_url":"https://api.github.com/repos/allenai/scispacy","labels_url":"https://api.github.com/repos/allenai/scispacy/issues/350/labels{/name}","comments_url":"https://api.github.com/repos/allenai/scispacy/issues/350/comments","events_url":"https://api.github.com/repos/allenai/scispacy/issues/350/events","html_url":"https://github.com/allenai/scispacy/issues/350","id":872892508,"node_id":"MDU6SXNzdWU4NzI4OTI1MDg=","number":350,"title":"DeprecationWarning from `spacy_legacy`","user":{"login":"gautierdag","id":8580178,"node_id":"MDQ6VXNlcjg1ODAxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/8580178?v=4","gravatar_id":"","url":"https://api.github.com/users/gautierdag","html_url":"https://github.com/gautierdag","followers_url":"https://api.github.com/users/gautierdag/followers","following_url":"https://api.github.com/users/gautierdag/following{/other_user}","gists_url":"https://api.github.com/users/gautierdag/gists{/gist_id}","starred_url":"https://api.github.com/users/gautierdag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gautierdag/subscriptions","organizations_url":"https://api.github.com/users/gautierdag/orgs","repos_url":"https://api.github.com/users/gautierdag/repos","events_url":"https://api.github.com/users/gautierdag/events{/privacy}","received_events_url":"https://api.github.com/users/gautierdag/received_events","type":"User","site_admin":false},"labels":[{"id":1068015159,"node_id":"MDU6TGFiZWwxMDY4MDE1MTU5","url":"https://api.github.com/repos/allenai/scispacy/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2021-04-30T17:07:45Z","updated_at":"2022-04-04T19:27:52Z","closed_at":"2022-04-04T19:27:52Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there,\r\nI recently upgraded to spacy 3 and scispacy 0.4, but I am now getting a warning whenever I use the small `scispacy` model (I have not tried any other model). \r\n\r\nI am getting a `DeprecationWarning` on a fresh install in python 3.8 with the latest version of `scispacy` and `en_core_sci_sm`.\r\n\r\n### Steps to reproduce:\r\n`pip install scispacy`\r\n`pip install https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.4.0/en_core_sci_sm-0.4.0.tar.gz`\r\n\r\n```python\r\nimport spacy\r\nnlp = spacy.load(\"en_core_sci_sm\")\r\n\r\nimport warnings\r\nwarnings.filterwarnings(\"error\")\r\nnlp(\"Hello World\")\r\n```\r\n\r\nAny input to the `nlp` model triggers the same warning:\r\n\r\n\r\n```\r\n/opt/miniconda3/envs/clean/lib/python3.8/site-packages/spacy_legacy/layers/staticvectors_v1.py in forward(model, docs, is_train)\r\n     43     )\r\n     44     try:\r\n---> 45         vectors_data = model.ops.gemm(model.ops.as_contig(V[rows]), W, trans2=True)\r\n     46     except ValueError:\r\n     47         raise RuntimeError(Errors.E896)\r\n\r\nDeprecationWarning: Out of bound index found. \r\nThis was previously ignored when the indexing result contained no elements. \r\nIn the future the index error will be raised. \r\nThis error occurs either due to an empty slice, or if an array has zero elements even before indexing.\r\n(Use `warnings.simplefilter('error')` to turn this DeprecationWarning into an error and get more details on the invalid index.)\r\n```\r\n\r\nAny ideas as to how to resolve this without manually ignoring the warning?","closed_by":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/350/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/allenai/scispacy/issues/350/timeline","performed_via_github_app":null,"state_reason":"completed"}