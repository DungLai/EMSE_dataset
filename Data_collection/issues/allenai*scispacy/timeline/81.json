[{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468006143","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-468006143","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":468006143,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAwNjE0Mw==","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T19:53:47Z","updated_at":"2019-02-27T19:53:47Z","author_association":"COLLABORATOR","body":"We have been running everything on CPU (and this is very fast because spaCy is very fast). That being said, spaCy does support GPU, and if you install and use spacy based on the instructions here (https://spacy.io/usage/#gpu), spaCy should use GPU, and so scispaCy should use GPU. However, I am not sure what speedup you would expect from using GPU, but I did confirm that there is some gpu utilization if you load a scispacy model like so (after following the instructions to install spacy with gpu)\r\n```\r\nimport spacy\r\nspacy.require_gpu()\r\nnlp = spacy.load('en_core_sci_sm')\r\ndoc = nlp(\"Some text\")\r\n```","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468006143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468012115","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-468012115","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":468012115,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAxMjExNQ==","user":{"login":"articuno12","id":24311185,"node_id":"MDQ6VXNlcjI0MzExMTg1","avatar_url":"https://avatars.githubusercontent.com/u/24311185?v=4","gravatar_id":"","url":"https://api.github.com/users/articuno12","html_url":"https://github.com/articuno12","followers_url":"https://api.github.com/users/articuno12/followers","following_url":"https://api.github.com/users/articuno12/following{/other_user}","gists_url":"https://api.github.com/users/articuno12/gists{/gist_id}","starred_url":"https://api.github.com/users/articuno12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/articuno12/subscriptions","organizations_url":"https://api.github.com/users/articuno12/orgs","repos_url":"https://api.github.com/users/articuno12/repos","events_url":"https://api.github.com/users/articuno12/events{/privacy}","received_events_url":"https://api.github.com/users/articuno12/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T20:11:19Z","updated_at":"2019-02-27T20:12:06Z","author_association":"NONE","body":"using GPU works a lot faster than using spacy on CPU for multiple queries. \r\nI tried the above method, but it gives the following error.\r\n\r\n> doc.similarity(doc2)\r\n> Traceback (most recent call last):\r\n>   File \"<stdin>\", line 1, in <module>\r\n>   File \"doc.pyx\", line 322, in spacy.tokens.doc.Doc.similarity\r\n>   File \"doc.pyx\", line 386, in spacy.tokens.doc.Doc.vector_norm.__get__\r\n>   File \"doc.pyx\", line 361, in spacy.tokens.doc.Doc.vector.__get__\r\n>   File \"cupy/core/core.pyx\", line 1741, in cupy.core.core.ndarray.__array_ufunc__\r\n>   File \"cupy/core/_kernel.pyx\", line 787, in cupy.core._kernel.ufunc.__call__\r\n>   File \"cupy/core/_kernel.pyx\", line 86, in cupy.core._kernel._preprocess_args\r\n> TypeError: Unsupported type <class 'numpy.ndarray'>\r\n","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468012115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"articuno12","id":24311185,"node_id":"MDQ6VXNlcjI0MzExMTg1","avatar_url":"https://avatars.githubusercontent.com/u/24311185?v=4","gravatar_id":"","url":"https://api.github.com/users/articuno12","html_url":"https://github.com/articuno12","followers_url":"https://api.github.com/users/articuno12/followers","following_url":"https://api.github.com/users/articuno12/following{/other_user}","gists_url":"https://api.github.com/users/articuno12/gists{/gist_id}","starred_url":"https://api.github.com/users/articuno12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/articuno12/subscriptions","organizations_url":"https://api.github.com/users/articuno12/orgs","repos_url":"https://api.github.com/users/articuno12/repos","events_url":"https://api.github.com/users/articuno12/events{/privacy}","received_events_url":"https://api.github.com/users/articuno12/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468013885","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-468013885","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":468013885,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAxMzg4NQ==","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T20:16:39Z","updated_at":"2019-02-27T20:16:39Z","author_association":"COLLABORATOR","body":"Try it a new conda environment and first installing spacy with gpu with `pip install -U spacy[cuda92]` or with whatever version of cuda you have. and then installing `pip install scispacy` and `pip install <scispacy_model_link>`. Those were the steps I followed that worked for me.","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468013885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468720651","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-468720651","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":468720651,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODcyMDY1MQ==","user":{"login":"articuno12","id":24311185,"node_id":"MDQ6VXNlcjI0MzExMTg1","avatar_url":"https://avatars.githubusercontent.com/u/24311185?v=4","gravatar_id":"","url":"https://api.github.com/users/articuno12","html_url":"https://github.com/articuno12","followers_url":"https://api.github.com/users/articuno12/followers","following_url":"https://api.github.com/users/articuno12/following{/other_user}","gists_url":"https://api.github.com/users/articuno12/gists{/gist_id}","starred_url":"https://api.github.com/users/articuno12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/articuno12/subscriptions","organizations_url":"https://api.github.com/users/articuno12/orgs","repos_url":"https://api.github.com/users/articuno12/repos","events_url":"https://api.github.com/users/articuno12/events{/privacy}","received_events_url":"https://api.github.com/users/articuno12/received_events","type":"User","site_admin":false},"created_at":"2019-03-01T16:19:15Z","updated_at":"2019-03-01T16:19:15Z","author_association":"NONE","body":"Still similarity function not working.\n\nOn Thu, Feb 28, 2019, 1:46 AM Daniel King <notifications@github.com> wrote:\n\n> Try it a new conda environment and first installing spacy with gpu with pip\n> install -U spacy[cuda92] or with whatever version of cuda you have. and\n> then installing pip install scispacy and pip install <scispacy_model_link>.\n> Those were the steps I followed that worked for me.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/allenai/scispacy/issues/81#issuecomment-468013885>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AXL1kTNfW_BHcPZY4e4V_jjVoB_jTkfRks5vRueogaJpZM4bVJms>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468720651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"articuno12","id":24311185,"node_id":"MDQ6VXNlcjI0MzExMTg1","avatar_url":"https://avatars.githubusercontent.com/u/24311185?v=4","gravatar_id":"","url":"https://api.github.com/users/articuno12","html_url":"https://github.com/articuno12","followers_url":"https://api.github.com/users/articuno12/followers","following_url":"https://api.github.com/users/articuno12/following{/other_user}","gists_url":"https://api.github.com/users/articuno12/gists{/gist_id}","starred_url":"https://api.github.com/users/articuno12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/articuno12/subscriptions","organizations_url":"https://api.github.com/users/articuno12/orgs","repos_url":"https://api.github.com/users/articuno12/repos","events_url":"https://api.github.com/users/articuno12/events{/privacy}","received_events_url":"https://api.github.com/users/articuno12/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468775340","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-468775340","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":468775340,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODc3NTM0MA==","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2019-03-01T19:04:55Z","updated_at":"2019-03-01T19:04:55Z","author_association":"COLLABORATOR","body":"hmm, I was actually able to reproduce with the spacy `en_core_web_md` model. It seems that this an issue with spacy, so i've opened an issue on the spacy repo https://github.com/explosion/spaCy/issues/3348","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/468775340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/470303101","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-470303101","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":470303101,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDMwMzEwMQ==","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2019-03-06T22:28:56Z","updated_at":"2019-03-06T22:28:56Z","author_association":"COLLABORATOR","body":"PR open to fix this (https://github.com/explosion/spaCy/pull/3362), when spaCy releases 2.1 and we upgrade to that version this issue will be fixed.","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/470303101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/479976636","html_url":"https://github.com/allenai/scispacy/issues/81#issuecomment-479976636","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/81","id":479976636,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTk3NjYzNg==","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2019-04-04T16:49:06Z","updated_at":"2019-04-04T16:49:06Z","author_association":"COLLABORATOR","body":"This should be fixed in version `0.2.0` which is now up. This version of `scispacy` is compatible with version `2.1.3` of `spacy`","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/479976636/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"id":2254348040,"node_id":"MDExOkNsb3NlZEV2ZW50MjI1NDM0ODA0MA==","url":"https://api.github.com/repos/allenai/scispacy/issues/events/2254348040","actor":{"login":"DeNeutoy","id":16001974,"node_id":"MDQ6VXNlcjE2MDAxOTc0","avatar_url":"https://avatars.githubusercontent.com/u/16001974?v=4","gravatar_id":"","url":"https://api.github.com/users/DeNeutoy","html_url":"https://github.com/DeNeutoy","followers_url":"https://api.github.com/users/DeNeutoy/followers","following_url":"https://api.github.com/users/DeNeutoy/following{/other_user}","gists_url":"https://api.github.com/users/DeNeutoy/gists{/gist_id}","starred_url":"https://api.github.com/users/DeNeutoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DeNeutoy/subscriptions","organizations_url":"https://api.github.com/users/DeNeutoy/orgs","repos_url":"https://api.github.com/users/DeNeutoy/repos","events_url":"https://api.github.com/users/DeNeutoy/events{/privacy}","received_events_url":"https://api.github.com/users/DeNeutoy/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-04-04T22:19:22Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"josesho","id":12838917,"node_id":"MDQ6VXNlcjEyODM4OTE3","avatar_url":"https://avatars.githubusercontent.com/u/12838917?v=4","gravatar_id":"","url":"https://api.github.com/users/josesho","html_url":"https://github.com/josesho","followers_url":"https://api.github.com/users/josesho/followers","following_url":"https://api.github.com/users/josesho/following{/other_user}","gists_url":"https://api.github.com/users/josesho/gists{/gist_id}","starred_url":"https://api.github.com/users/josesho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josesho/subscriptions","organizations_url":"https://api.github.com/users/josesho/orgs","repos_url":"https://api.github.com/users/josesho/repos","events_url":"https://api.github.com/users/josesho/events{/privacy}","received_events_url":"https://api.github.com/users/josesho/received_events","type":"User","site_admin":false},"created_at":"2020-02-14T11:02:30Z","updated_at":"2020-02-14T11:02:30Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/allenai/scispacy/issues/195","repository_url":"https://api.github.com/repos/allenai/scispacy","labels_url":"https://api.github.com/repos/allenai/scispacy/issues/195/labels{/name}","comments_url":"https://api.github.com/repos/allenai/scispacy/issues/195/comments","events_url":"https://api.github.com/repos/allenai/scispacy/issues/195/events","html_url":"https://github.com/allenai/scispacy/issues/195","id":565255381,"node_id":"MDU6SXNzdWU1NjUyNTUzODE=","number":195,"title":"Spacy does not return vector if GPU is enabled","user":{"login":"josesho","id":12838917,"node_id":"MDQ6VXNlcjEyODM4OTE3","avatar_url":"https://avatars.githubusercontent.com/u/12838917?v=4","gravatar_id":"","url":"https://api.github.com/users/josesho","html_url":"https://github.com/josesho","followers_url":"https://api.github.com/users/josesho/followers","following_url":"https://api.github.com/users/josesho/following{/other_user}","gists_url":"https://api.github.com/users/josesho/gists{/gist_id}","starred_url":"https://api.github.com/users/josesho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josesho/subscriptions","organizations_url":"https://api.github.com/users/josesho/orgs","repos_url":"https://api.github.com/users/josesho/repos","events_url":"https://api.github.com/users/josesho/events{/privacy}","received_events_url":"https://api.github.com/users/josesho/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-02-14T11:02:29Z","updated_at":"2020-03-02T05:43:11Z","closed_at":"2020-03-02T05:43:10Z","author_association":"NONE","active_lock_reason":null,"repository":{"id":150172473,"node_id":"MDEwOlJlcG9zaXRvcnkxNTAxNzI0NzM=","name":"scispacy","full_name":"allenai/scispacy","private":false,"owner":{"login":"allenai","id":5667695,"node_id":"MDEyOk9yZ2FuaXphdGlvbjU2Njc2OTU=","avatar_url":"https://avatars.githubusercontent.com/u/5667695?v=4","gravatar_id":"","url":"https://api.github.com/users/allenai","html_url":"https://github.com/allenai","followers_url":"https://api.github.com/users/allenai/followers","following_url":"https://api.github.com/users/allenai/following{/other_user}","gists_url":"https://api.github.com/users/allenai/gists{/gist_id}","starred_url":"https://api.github.com/users/allenai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/allenai/subscriptions","organizations_url":"https://api.github.com/users/allenai/orgs","repos_url":"https://api.github.com/users/allenai/repos","events_url":"https://api.github.com/users/allenai/events{/privacy}","received_events_url":"https://api.github.com/users/allenai/received_events","type":"Organization","site_admin":false},"html_url":"https://github.com/allenai/scispacy","description":"A full spaCy pipeline and models for scientific/biomedical documents.","fork":false,"url":"https://api.github.com/repos/allenai/scispacy","forks_url":"https://api.github.com/repos/allenai/scispacy/forks","keys_url":"https://api.github.com/repos/allenai/scispacy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/allenai/scispacy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/allenai/scispacy/teams","hooks_url":"https://api.github.com/repos/allenai/scispacy/hooks","issue_events_url":"https://api.github.com/repos/allenai/scispacy/issues/events{/number}","events_url":"https://api.github.com/repos/allenai/scispacy/events","assignees_url":"https://api.github.com/repos/allenai/scispacy/assignees{/user}","branches_url":"https://api.github.com/repos/allenai/scispacy/branches{/branch}","tags_url":"https://api.github.com/repos/allenai/scispacy/tags","blobs_url":"https://api.github.com/repos/allenai/scispacy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/allenai/scispacy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/allenai/scispacy/git/refs{/sha}","trees_url":"https://api.github.com/repos/allenai/scispacy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/allenai/scispacy/statuses/{sha}","languages_url":"https://api.github.com/repos/allenai/scispacy/languages","stargazers_url":"https://api.github.com/repos/allenai/scispacy/stargazers","contributors_url":"https://api.github.com/repos/allenai/scispacy/contributors","subscribers_url":"https://api.github.com/repos/allenai/scispacy/subscribers","subscription_url":"https://api.github.com/repos/allenai/scispacy/subscription","commits_url":"https://api.github.com/repos/allenai/scispacy/commits{/sha}","git_commits_url":"https://api.github.com/repos/allenai/scispacy/git/commits{/sha}","comments_url":"https://api.github.com/repos/allenai/scispacy/comments{/number}","issue_comment_url":"https://api.github.com/repos/allenai/scispacy/issues/comments{/number}","contents_url":"https://api.github.com/repos/allenai/scispacy/contents/{+path}","compare_url":"https://api.github.com/repos/allenai/scispacy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/allenai/scispacy/merges","archive_url":"https://api.github.com/repos/allenai/scispacy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/allenai/scispacy/downloads","issues_url":"https://api.github.com/repos/allenai/scispacy/issues{/number}","pulls_url":"https://api.github.com/repos/allenai/scispacy/pulls{/number}","milestones_url":"https://api.github.com/repos/allenai/scispacy/milestones{/number}","notifications_url":"https://api.github.com/repos/allenai/scispacy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/allenai/scispacy/labels{/name}","releases_url":"https://api.github.com/repos/allenai/scispacy/releases{/id}","deployments_url":"https://api.github.com/repos/allenai/scispacy/deployments","created_at":"2018-09-24T21:45:52Z","updated_at":"2023-01-18T20:18:10Z","pushed_at":"2022-12-10T17:26:57Z","git_url":"git://github.com/allenai/scispacy.git","ssh_url":"git@github.com:allenai/scispacy.git","clone_url":"https://github.com/allenai/scispacy.git","svn_url":"https://github.com/allenai/scispacy","homepage":"https://allenai.github.io/scispacy/","size":248852,"stargazers_count":1306,"watchers_count":1306,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":180,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":31,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bioinformatics","biomedical","custom-pipes","nlp","scientific-documents","spacy"],"visibility":"public","forks":180,"open_issues":31,"watchers":1306,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm using a GPU-enabled Google Colab notebook.\r\n\r\nAfter installing the requisite libraries and models\r\n\r\n```shell\r\n!pip install spacy[cuda100]~=2.2 scispacy~=0.2.4\r\n\r\n!pip install https://s3-us-west-2.amazonaws.com/ai2-s2-scispacy/releases/v0.2.4/en_core_sci_lg-0.2.4.tar.gz\r\n```\r\n```python\r\nimport spacy\r\nspacy.prefer_gpu()\r\nnlp = spacy.load(\"en_core_sci_lg\")\r\n\r\ntext = \"\"\"\r\nMyeloid derived suppressor cells (MDSC) are immature \r\nmyeloid cells with immunosuppressive activity. \r\nThey accumulate in tumor-bearing mice and humans \r\nwith different types of cancer, including hepatocellular \r\ncarcinoma (HCC).\r\n\"\"\"\r\n\r\ndoc = nlp(text)\r\n```\r\n\r\nRunning\r\n```python\r\ndoc.ents\r\n```\r\n\r\nproduces \r\n```\r\n(Myeloid,\r\n suppressor cells,\r\n MDSC,\r\n immature,\r\n myeloid cells,\r\n immunosuppressive activity,\r\n accumulate,\r\n tumor-bearing mice,\r\n humans,\r\n cancer,\r\n hepatocellular \r\n carcinoma,\r\n HCC)\r\n```\r\n\r\nas expected, but \r\n```python\r\ndoc.vector\r\n```\r\n\r\nproduces this error:\r\n```shell\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-19-40a48203c66b> in <module>()\r\n----> 1 doc.vector\r\n\r\ndoc.pyx in __iter__()\r\n\r\ncupy/core/core.pyx in cupy.core.core.ndarray.__array_ufunc__()\r\n\r\ncupy/core/_kernel.pyx in cupy.core._kernel.ufunc.__call__()\r\n\r\ncupy/core/_kernel.pyx in cupy.core._kernel._preprocess_args()\r\n\r\nTypeError: Unsupported type <class 'numpy.ndarray'>\r\n```\r\n\r\nCommenting out \r\n```python\r\nspacy.prefer_gpu()\r\n```\r\n\r\nsolves the issue. This means that getting token vectors will not be able when the GPU is enabled?\r\n\r\nI'm not sure if this is related to #81 or [#3431](https://github.com/explosion/spaCy/issues/3431) in spaCy.","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/allenai/scispacy/issues/195/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]