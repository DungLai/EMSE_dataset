[{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1304710919","html_url":"https://github.com/allenai/scispacy/issues/455#issuecomment-1304710919","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/455","id":1304710919,"node_id":"IC_kwDOCPNzOc5NxE8H","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2022-11-06T04:11:52Z","updated_at":"2022-11-06T18:04:59Z","author_association":"COLLABORATOR","body":"Hey, sorry, the part of the readme that says to use python 3.6 is woefully out of date. I'll fix that. scispacy should work with the newer versions of python. That being said, installing nmslib has always been the hardest part of installing scispacy. I recommend you try to just install nmslib and see if you can get that to work. I was just able to install nmslib in a python 3.9 environment on an m1 Mac with `CFLAGS=\"-mavx -DWARN(a)=(a)\" pip install nmslib` (see this issue https://github.com/nmslib/nmslib/issues/476), and then install scispacy after that.","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1304710919/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1308174857","html_url":"https://github.com/allenai/scispacy/issues/455#issuecomment-1308174857","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/455","id":1308174857,"node_id":"IC_kwDOCPNzOc5N-SoJ","user":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false},"created_at":"2022-11-09T03:54:09Z","updated_at":"2022-11-09T03:54:09Z","author_association":"NONE","body":"Thanks for your reply Daniel. I tried to create a conda environment and install nmslib using the CFLAGS statement and pip install from the cmd line but got an error message about pip? One thing I did not mention before is that my OS is Ventura (macOS13) and I have lockdown mode turned on. Hasn't been an issue with other python libs but maybe there are some dependencies in scispacy that could be affected?\n\nI look forward to any updates in scispacy and will surely try again to install.\n\nBest regards, Brian\n\n________________________________\nFrom: Daniel King ***@***.***>\nSent: Sunday, November 6, 2022 12:12 AM\nTo: allenai/scispacy ***@***.***>\nCc: Brian Griner, PhD ***@***.***>; Author ***@***.***>\nSubject: Re: [allenai/scispacy] nmslib install error using a conda env on mac m1 (Issue #455)\n\n\nHey, sorry, the part of the readme that says to use python 3.6 is woefully out of date. I'll fix that. scispacy should work with the newer versions of python. That being said, installing nmslib has always been the hardest part of installing scispacy. I recommend you try to just install nmslib and see if you can get that to work. I was just able to install nmslib in a python 3.9 environment with CFLAGS=\"-mavx -DWARN(a)=(a)\" pip install nmslib (see this issue nmslib/nmslib#476<https://github.com/nmslib/nmslib/issues/476>), and then install scispacy after that.\n\n—\nReply to this email directly, view it on GitHub<https://github.com/allenai/scispacy/issues/455#issuecomment-1304710919>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AIIB7TMYF4O7YNR4KOLJELDWG4VZFANCNFSM6AAAAAARYG27ME>.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>\n","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1308174857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1309570650","html_url":"https://github.com/allenai/scispacy/issues/455#issuecomment-1309570650","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/455","id":1309570650,"node_id":"IC_kwDOCPNzOc5ODnZa","user":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false},"created_at":"2022-11-10T00:12:18Z","updated_at":"2022-11-10T00:12:18Z","author_association":"COLLABORATOR","body":"What was the error you got?","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1309570650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dakinggg","id":43149077,"node_id":"MDQ6VXNlcjQzMTQ5MDc3","avatar_url":"https://avatars.githubusercontent.com/u/43149077?v=4","gravatar_id":"","url":"https://api.github.com/users/dakinggg","html_url":"https://github.com/dakinggg","followers_url":"https://api.github.com/users/dakinggg/followers","following_url":"https://api.github.com/users/dakinggg/following{/other_user}","gists_url":"https://api.github.com/users/dakinggg/gists{/gist_id}","starred_url":"https://api.github.com/users/dakinggg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakinggg/subscriptions","organizations_url":"https://api.github.com/users/dakinggg/orgs","repos_url":"https://api.github.com/users/dakinggg/repos","events_url":"https://api.github.com/users/dakinggg/events{/privacy}","received_events_url":"https://api.github.com/users/dakinggg/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1309793146","html_url":"https://github.com/allenai/scispacy/issues/455#issuecomment-1309793146","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/455","id":1309793146,"node_id":"IC_kwDOCPNzOc5OEdt6","user":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false},"created_at":"2022-11-10T05:22:28Z","updated_at":"2022-11-10T05:22:28Z","author_association":"NONE","body":"Hi Daniel,\r\n\r\nI tried to install nmslib again in a new py 3.9 environment and it looks like it actually did install but there were issues. The entire log from the install is below.\r\n\r\nI also successfully installed scispacy from pip which is great! I included the install log for scispacy below the log for nmslib. Maybe I did something wrong before when I created the env for scispacy?\r\n\r\nI will be testing it soon and will let you know if anything else comes up.\r\n\r\nThank you for following up with me on this.\r\n\r\nCheers, Brian\r\n\r\n\r\n\r\n### create env log ###\r\n\r\n\r\n(base) ***@***.*** ~ % conda create -n scispacy python=3.9\r\n\r\nCollecting package metadata (current_repodata.json): done\r\n\r\nSolving environment: done\r\n\r\n\r\n## Package Plan ##\r\n\r\n\r\n  environment location: /Users/briang/opt/anaconda3/envs/scispacy\r\n\r\n\r\n  added / updated specs:\r\n\r\n    - python=3.9\r\n\r\n\r\n\r\nThe following NEW packages will be INSTALLED:\r\n\r\n\r\n  ca-certificates    pkgs/main/osx-arm64::ca-certificates-2022.10.11-hca03da5_0 None\r\n\r\n  certifi            pkgs/main/osx-arm64::certifi-2022.9.24-py39hca03da5_0 None\r\n\r\n  libcxx             pkgs/main/osx-arm64::libcxx-14.0.6-h848a8c0_0 None\r\n\r\n  libffi             pkgs/main/osx-arm64::libffi-3.4.2-hc377ac9_4 None\r\n\r\n  ncurses            pkgs/main/osx-arm64::ncurses-6.3-h1a28f6b_3 None\r\n\r\n  openssl            pkgs/main/osx-arm64::openssl-1.1.1s-h1a28f6b_0 None\r\n\r\n  pip                pkgs/main/osx-arm64::pip-22.2.2-py39hca03da5_0 None\r\n\r\n  python             pkgs/main/osx-arm64::python-3.9.13-hbdb9e5c_2 None\r\n\r\n  readline           pkgs/main/osx-arm64::readline-8.2-h1a28f6b_0 None\r\n\r\n  setuptools         pkgs/main/osx-arm64::setuptools-65.5.0-py39hca03da5_0 None\r\n\r\n  sqlite             pkgs/main/osx-arm64::sqlite-3.39.3-h1058600_0 None\r\n\r\n  tk                 pkgs/main/osx-arm64::tk-8.6.12-hb8d0fd4_0 None\r\n\r\n  tzdata             pkgs/main/noarch::tzdata-2022f-h04d1e81_0 None\r\n\r\n  wheel              pkgs/main/noarch::wheel-0.37.1-pyhd3eb1b0_0 None\r\n\r\n  xz                 pkgs/main/osx-arm64::xz-5.2.6-h1a28f6b_0 None\r\n\r\n  zlib               pkgs/main/osx-arm64::zlib-1.2.13-h5a0b063_0 None\r\n\r\n\r\n\r\nProceed ([y]/n)? y\r\n\r\n\r\nPreparing transaction: done\r\n\r\nVerifying transaction: done\r\n\r\nExecuting transaction: done\r\n\r\n#\r\n\r\n# To activate this environment, use\r\n\r\n#\r\n\r\n#     $ conda activate scispacy\r\n\r\n#\r\n\r\n# To deactivate an active environment, use\r\n\r\n#\r\n\r\n#     $ conda deactivate\r\n\r\n\r\nRetrieving notices: ...working... done\r\n\r\n\r\n\r\n### install nmslib  log ###\r\n\r\n\r\n(base) ***@***.*** ~ % conda activate scispacy\r\n\r\n\r\n(scispacy) ***@***.*** ~ % CFLAGS=\"-mavx -DWARN(a)=(a)\" pip install nmslib\r\n\r\nCollecting nmslib\r\n\r\n  Using cached nmslib-2.1.1.tar.gz (188 kB)\r\n\r\n  Preparing metadata (setup.py) ... done\r\n\r\nCollecting pybind11<2.6.2\r\n\r\n  Using cached pybind11-2.6.1-py2.py3-none-any.whl (188 kB)\r\n\r\nCollecting psutil\r\n\r\n  Using cached psutil-5.9.4-cp38-abi3-macosx_11_0_arm64.whl (244 kB)\r\n\r\nCollecting numpy>=1.10.0\r\n\r\n  Using cached numpy-1.23.4-cp39-cp39-macosx_11_0_arm64.whl (13.4 MB)\r\n\r\nBuilding wheels for collected packages: nmslib\r\n\r\n  Building wheel for nmslib (setup.py) ... error\r\n\r\n  error: subprocess-exited-with-error\r\n\r\n\r\n\r\n  × python setup.py bdist_wheel did not run successfully.\r\n\r\n  │ exit code: 1\r\n\r\n  ╰─> [33 lines of output]\r\n\r\n      Dependence list: ['pybind11<2.6.2', 'psutil', \"numpy>=1.10.0,<1.17 ; python_version=='2.7'\", \"numpy>=1.10.0 ; python_version>='3.5'\"]\r\n\r\n      /Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/dist.py:771: UserWarning: Usage of dash-separated 'description-file' will not be supported in future versions. Please use the underscore name 'description_file' instead\r\n\r\n        warnings.warn(\r\n\r\n      /Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/installer.py:27: SetuptoolsDeprecationWarning: setuptools.installer is deprecated. Requirements should be satisfied by a PEP 517 installer.\r\n\r\n        warnings.warn(\r\n\r\n      Traceback (most recent call last):\r\n\r\n        File \"<string>\", line 2, in <module>\r\n\r\n        File \"<pip-setuptools-caller>\", line 34, in <module>\r\n\r\n        File \"/private/var/folders/1c/1wcfh1095clg_2ppxfmm2_fc0000gn/T/pip-install-ov_6b84v/nmslib_1602d4079c614d059176fdb0892700e3/setup.py\", line 170, in <module>\r\n\r\n          setup(\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/__init__.py\", line 86, in setup\r\n\r\n          _install_setup_requires(attrs)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/__init__.py\", line 80, in _install_setup_requires\r\n\r\n          dist.fetch_build_eggs(dist.setup_requires)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/dist.py\", line 875, in fetch_build_eggs\r\n\r\n          resolved_dists = pkg_resources.working_set.resolve(\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 789, in resolve\r\n\r\n          dist = best[req.key] = env.best_match(\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 1075, in best_match\r\n\r\n          return self.obtain(req, installer)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 1087, in obtain\r\n\r\n          return installer(requirement)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/dist.py\", line 945, in fetch_build_egg\r\n\r\n          return fetch_build_egg(self, req)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/installer.py\", line 87, in fetch_build_egg\r\n\r\n          wheel.install_as_egg(dist_location)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/wheel.py\", line 110, in install_as_egg\r\n\r\n          self._install_as_egg(destination_eggdir, zf)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/wheel.py\", line 118, in _install_as_egg\r\n\r\n          self._convert_metadata(zf, destination_eggdir, dist_info, egg_info)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/wheel.py\", line 162, in _convert_metadata\r\n\r\n          os.rename(dist_info, egg_info)\r\n\r\n      OSError: [Errno 66] Directory not empty: '/private/var/folders/1c/1wcfh1095clg_2ppxfmm2_fc0000gn/T/pip-install-ov_6b84v/nmslib_1602d4079c614d059176fdb0892700e3/.eggs/numpy-1.23.4-py3.9-macosx-11.1-arm64.egg/numpy-1.23.4.dist-info' -> '/private/var/folders/1c/1wcfh1095clg_2ppxfmm2_fc0000gn/T/pip-install-ov_6b84v/nmslib_1602d4079c614d059176fdb0892700e3/.eggs/numpy-1.23.4-py3.9-macosx-11.1-arm64.egg/EGG-INFO'\r\n\r\n      [end of output]\r\n\r\n\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n\r\n  ERROR: Failed building wheel for nmslib\r\n\r\n  Running setup.py clean for nmslib\r\n\r\n  error: subprocess-exited-with-error\r\n\r\n\r\n\r\n  × python setup.py clean did not run successfully.\r\n\r\n  │ exit code: 1\r\n\r\n  ╰─> [33 lines of output]\r\n\r\n      Dependence list: ['pybind11<2.6.2', 'psutil', \"numpy>=1.10.0,<1.17 ; python_version=='2.7'\", \"numpy>=1.10.0 ; python_version>='3.5'\"]\r\n\r\n      /Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/dist.py:771: UserWarning: Usage of dash-separated 'description-file' will not be supported in future versions. Please use the underscore name 'description_file' instead\r\n\r\n        warnings.warn(\r\n\r\n      /Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/installer.py:27: SetuptoolsDeprecationWarning: setuptools.installer is deprecated. Requirements should be satisfied by a PEP 517 installer.\r\n\r\n        warnings.warn(\r\n\r\n      Traceback (most recent call last):\r\n\r\n        File \"<string>\", line 2, in <module>\r\n\r\n        File \"<pip-setuptools-caller>\", line 34, in <module>\r\n\r\n        File \"/private/var/folders/1c/1wcfh1095clg_2ppxfmm2_fc0000gn/T/pip-install-ov_6b84v/nmslib_1602d4079c614d059176fdb0892700e3/setup.py\", line 170, in <module>\r\n\r\n          setup(\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/__init__.py\", line 86, in setup\r\n\r\n          _install_setup_requires(attrs)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/__init__.py\", line 80, in _install_setup_requires\r\n\r\n          dist.fetch_build_eggs(dist.setup_requires)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/dist.py\", line 875, in fetch_build_eggs\r\n\r\n          resolved_dists = pkg_resources.working_set.resolve(\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 789, in resolve\r\n\r\n          dist = best[req.key] = env.best_match(\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 1075, in best_match\r\n\r\n          return self.obtain(req, installer)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/pkg_resources/__init__.py\", line 1087, in obtain\r\n\r\n          return installer(requirement)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/dist.py\", line 945, in fetch_build_egg\r\n\r\n          return fetch_build_egg(self, req)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/installer.py\", line 87, in fetch_build_egg\r\n\r\n          wheel.install_as_egg(dist_location)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/wheel.py\", line 110, in install_as_egg\r\n\r\n          self._install_as_egg(destination_eggdir, zf)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/wheel.py\", line 118, in _install_as_egg\r\n\r\n          self._convert_metadata(zf, destination_eggdir, dist_info, egg_info)\r\n\r\n        File \"/Users/briang/opt/anaconda3/envs/scispacy/lib/python3.9/site-packages/setuptools/wheel.py\", line 162, in _convert_metadata\r\n\r\n          os.rename(dist_info, egg_info)\r\n\r\n      OSError: [Errno 66] Directory not empty: '/private/var/folders/1c/1wcfh1095clg_2ppxfmm2_fc0000gn/T/pip-install-ov_6b84v/nmslib_1602d4079c614d059176fdb0892700e3/.eggs/numpy-1.23.4-py3.9-macosx-11.1-arm64.egg/numpy-1.23.4.dist-info' -> '/private/var/folders/1c/1wcfh1095clg_2ppxfmm2_fc0000gn/T/pip-install-ov_6b84v/nmslib_1602d4079c614d059176fdb0892700e3/.eggs/numpy-1.23.4-py3.9-macosx-11.1-arm64.egg/EGG-INFO'\r\n\r\n      [end of output]\r\n\r\n\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n\r\n  ERROR: Failed cleaning build dir for nmslib\r\n\r\nFailed to build nmslib\r\n\r\nInstalling collected packages: pybind11, psutil, numpy, nmslib\r\n\r\n  Running setup.py install for nmslib ... done\r\n\r\n  DEPRECATION: nmslib was installed using the legacy 'setup.py install' method, because a wheel could not be built for it. A possible replacement is to fix the wheel build issue reported above. Discussion can be found at https://github.com/pypa/pip/issues/8368\r\n\r\nSuccessfully installed nmslib-2.1.1 numpy-1.23.4 psutil-5.9.4 pybind11-2.6.1\r\n\r\n\r\n\r\n### install scispacy log ###\r\n\r\n\r\n(scispacy) ***@***.*** ~ % pip install scispacy\r\n\r\nCollecting scispacy\r\n\r\n  Using cached scispacy-0.5.1-py3-none-any.whl (44 kB)\r\n\r\nCollecting scikit-learn>=0.20.3\r\n\r\n  Using cached scikit_learn-1.1.3-cp39-cp39-macosx_12_0_arm64.whl (7.7 MB)\r\n\r\nCollecting joblib\r\n\r\n  Using cached joblib-1.2.0-py3-none-any.whl (297 kB)\r\n\r\nRequirement already satisfied: numpy in ./opt/anaconda3/envs/scispacy/lib/python3.9/site-packages (from scispacy) (1.23.4)\r\n\r\nRequirement already satisfied: nmslib>=1.7.3.6 in ./opt/anaconda3/envs/scispacy/lib/python3.9/site-packages (from scispacy) (2.1.1)\r\n\r\nCollecting spacy<3.5.0,>=3.4.0\r\n\r\n  Using cached spacy-3.4.2-cp39-cp39-macosx_11_0_arm64.whl (6.5 MB)\r\n\r\nCollecting pysbd\r\n\r\n  Using cached pysbd-0.3.4-py3-none-any.whl (71 kB)\r\n\r\nCollecting conllu\r\n\r\n  Using cached conllu-4.5.2-py2.py3-none-any.whl (16 kB)\r\n\r\nCollecting requests<3.0.0,>=2.0.0\r\n\r\n  Using cached requests-2.28.1-py3-none-any.whl (62 kB)\r\n\r\nRequirement already satisfied: pybind11<2.6.2 in ./opt/anaconda3/envs/scispacy/lib/python3.9/site-packages (from nmslib>=1.7.3.6->scispacy) (2.6.1)\r\n\r\nRequirement already satisfied: psutil in ./opt/anaconda3/envs/scispacy/lib/python3.9/site-packages (from nmslib>=1.7.3.6->scispacy) (5.9.4)\r\n\r\nRequirement already satisfied: certifi>=2017.4.17 in ./opt/anaconda3/envs/scispacy/lib/python3.9/site-packages (from requests<3.0.0,>=2.0.0->scispacy) (2022.9.24)\r\n\r\nCollecting urllib3<1.27,>=1.21.1\r\n\r\n  Using cached urllib3-1.26.12-py2.py3-none-any.whl (140 kB)\r\n\r\nCollecting charset-normalizer<3,>=2\r\n\r\n  Using cached charset_normalizer-2.1.1-py3-none-any.whl (39 kB)\r\n\r\nCollecting idna<4,>=2.5\r\n\r\n  Using cached idna-3.4-py3-none-any.whl (61 kB)\r\n\r\nCollecting scipy>=1.3.2\r\n\r\n  Using cached scipy-1.9.3-cp39-cp39-macosx_12_0_arm64.whl (28.6 MB)\r\n\r\nCollecting threadpoolctl>=2.0.0\r\n\r\n  Using cached threadpoolctl-3.1.0-py3-none-any.whl (14 kB)\r\n\r\nCollecting thinc<8.2.0,>=8.1.0\r\n\r\n  Using cached thinc-8.1.5-cp39-cp39-macosx_11_0_arm64.whl (694 kB)\r\n\r\nCollecting spacy-loggers<2.0.0,>=1.0.0\r\n\r\n  Using cached spacy_loggers-1.0.3-py3-none-any.whl (9.3 kB)\r\n\r\nCollecting wasabi<1.1.0,>=0.9.1\r\n\r\n  Using cached wasabi-0.10.1-py3-none-any.whl (26 kB)\r\n\r\nCollecting packaging>=20.0\r\n\r\n  Using cached packaging-21.3-py3-none-any.whl (40 kB)\r\n\r\nCollecting tqdm<5.0.0,>=4.38.0\r\n\r\n  Using cached tqdm-4.64.1-py2.py3-none-any.whl (78 kB)\r\n\r\nCollecting typer<0.5.0,>=0.3.0\r\n\r\n  Using cached typer-0.4.2-py3-none-any.whl (27 kB)\r\n\r\nCollecting murmurhash<1.1.0,>=0.28.0\r\n\r\n  Using cached murmurhash-1.0.9-cp39-cp39-macosx_11_0_arm64.whl (19 kB)\r\n\r\nCollecting jinja2\r\n\r\n  Using cached Jinja2-3.1.2-py3-none-any.whl (133 kB)\r\n\r\nRequirement already satisfied: setuptools in ./opt/anaconda3/envs/scispacy/lib/python3.9/site-packages (from spacy<3.5.0,>=3.4.0->scispacy) (65.5.0)\r\n\r\nCollecting preshed<3.1.0,>=3.0.2\r\n\r\n  Using cached preshed-3.0.8-cp39-cp39-macosx_11_0_arm64.whl (101 kB)\r\n\r\nCollecting pathy>=0.3.5\r\n\r\n  Using cached pathy-0.6.2-py3-none-any.whl (42 kB)\r\n\r\nCollecting langcodes<4.0.0,>=3.2.0\r\n\r\n  Using cached langcodes-3.3.0-py3-none-any.whl (181 kB)\r\n\r\nCollecting spacy-legacy<3.1.0,>=3.0.10\r\n\r\n  Using cached spacy_legacy-3.0.10-py2.py3-none-any.whl (21 kB)\r\n\r\nCollecting pydantic!=1.8,!=1.8.1,<1.11.0,>=1.7.4\r\n\r\n  Using cached pydantic-1.10.2-cp39-cp39-macosx_11_0_arm64.whl (2.6 MB)\r\n\r\nCollecting cymem<2.1.0,>=2.0.2\r\n\r\n  Using cached cymem-2.0.7-cp39-cp39-macosx_11_0_arm64.whl (31 kB)\r\n\r\nCollecting catalogue<2.1.0,>=2.0.6\r\n\r\n  Using cached catalogue-2.0.8-py3-none-any.whl (17 kB)\r\n\r\nCollecting srsly<3.0.0,>=2.4.3\r\n\r\n  Using cached srsly-2.4.5-cp39-cp39-macosx_11_0_arm64.whl (489 kB)\r\n\r\nCollecting pyparsing!=3.0.5,>=2.0.2\r\n\r\n  Using cached pyparsing-3.0.9-py3-none-any.whl (98 kB)\r\n\r\nCollecting smart-open<6.0.0,>=5.2.1\r\n\r\n  Using cached smart_open-5.2.1-py3-none-any.whl (58 kB)\r\n\r\nCollecting typing-extensions>=4.1.0\r\n\r\n  Using cached typing_extensions-4.4.0-py3-none-any.whl (26 kB)\r\n\r\nCollecting confection<1.0.0,>=0.0.1\r\n\r\n  Using cached confection-0.0.3-py3-none-any.whl (32 kB)\r\n\r\nCollecting blis<0.8.0,>=0.7.8\r\n\r\n  Using cached blis-0.7.9-cp39-cp39-macosx_11_0_arm64.whl (1.1 MB)\r\n\r\nCollecting click<9.0.0,>=7.1.1\r\n\r\n  Using cached click-8.1.3-py3-none-any.whl (96 kB)\r\n\r\nCollecting MarkupSafe>=2.0\r\n\r\n  Using cached MarkupSafe-2.1.1-cp39-cp39-macosx_10_9_universal2.whl (17 kB)\r\n\r\nInstalling collected packages: wasabi, cymem, urllib3, typing-extensions, tqdm, threadpoolctl, spacy-loggers, spacy-legacy, smart-open, scipy, pysbd, pyparsing, murmurhash, MarkupSafe, langcodes, joblib, idna, conllu, click, charset-normalizer, catalogue, blis, typer, srsly, scikit-learn, requests, pydantic, preshed, packaging, jinja2, pathy, confection, thinc, spacy, scispacy\r\n\r\nSuccessfully installed MarkupSafe-2.1.1 blis-0.7.9 catalogue-2.0.8 charset-normalizer-2.1.1 click-8.1.3 confection-0.0.3 conllu-4.5.2 cymem-2.0.7 idna-3.4 jinja2-3.1.2 joblib-1.2.0 langcodes-3.3.0 murmurhash-1.0.9 packaging-21.3 pathy-0.6.2 preshed-3.0.8 pydantic-1.10.2 pyparsing-3.0.9 pysbd-0.3.4 requests-2.28.1 scikit-learn-1.1.3 scipy-1.9.3 scispacy-0.5.1 smart-open-5.2.1 spacy-3.4.2 spacy-legacy-3.0.10 spacy-loggers-1.0.3 srsly-2.4.5 thinc-8.1.5 threadpoolctl-3.1.0 tqdm-4.64.1 typer-0.4.2 typing-extensions-4.4.0 urllib3-1.26.12 wasabi-0.10.1\r\n\r\n\r\n________________________________\r\nFrom: Daniel King ***@***.***>\r\nSent: Wednesday, November 9, 2022 7:12 PM\r\nTo: allenai/scispacy ***@***.***>\r\nCc: Brian Griner, PhD ***@***.***>; Author ***@***.***>\r\nSubject: Re: [allenai/scispacy] nmslib install error using a conda env on mac m1 (Issue #455)\r\n\r\n\r\nWhat was the error you got?\r\n\r\n—\r\nReply to this email directly, view it on GitHub<https://github.com/allenai/scispacy/issues/455#issuecomment-1309570650>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AIIB7TJZCTFHCICGZWG47KTWHQ4WZANCNFSM6AAAAAARYG27ME>.\r\nYou are receiving this because you authored the thread.Message ID: ***@***.***>\r\n","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1309793146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1310078248","html_url":"https://github.com/allenai/scispacy/issues/455#issuecomment-1310078248","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/455","id":1310078248,"node_id":"IC_kwDOCPNzOc5OFjUo","user":{"login":"darebfh","id":117444698,"node_id":"U_kgDOBwAQWg","avatar_url":"https://avatars.githubusercontent.com/u/117444698?v=4","gravatar_id":"","url":"https://api.github.com/users/darebfh","html_url":"https://github.com/darebfh","followers_url":"https://api.github.com/users/darebfh/followers","following_url":"https://api.github.com/users/darebfh/following{/other_user}","gists_url":"https://api.github.com/users/darebfh/gists{/gist_id}","starred_url":"https://api.github.com/users/darebfh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darebfh/subscriptions","organizations_url":"https://api.github.com/users/darebfh/orgs","repos_url":"https://api.github.com/users/darebfh/repos","events_url":"https://api.github.com/users/darebfh/events{/privacy}","received_events_url":"https://api.github.com/users/darebfh/received_events","type":"User","site_admin":false},"created_at":"2022-11-10T10:31:38Z","updated_at":"2022-11-10T10:33:08Z","author_association":"NONE","body":"Hey! I just ran into the same problem and managed to solve it as follows: \r\n```\r\n$conda create --name <env_name> python=3.8.11 # the lowest available python version in my case\r\n$conda activate <env_name>\r\n$CFLAGS=\"-mavx -DWARN(a)=(a)\" pip install nmslib\r\n$pip install scyspacy\r\n```","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1310078248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"darebfh","id":117444698,"node_id":"U_kgDOBwAQWg","avatar_url":"https://avatars.githubusercontent.com/u/117444698?v=4","gravatar_id":"","url":"https://api.github.com/users/darebfh","html_url":"https://github.com/darebfh","followers_url":"https://api.github.com/users/darebfh/followers","following_url":"https://api.github.com/users/darebfh/following{/other_user}","gists_url":"https://api.github.com/users/darebfh/gists{/gist_id}","starred_url":"https://api.github.com/users/darebfh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darebfh/subscriptions","organizations_url":"https://api.github.com/users/darebfh/orgs","repos_url":"https://api.github.com/users/darebfh/repos","events_url":"https://api.github.com/users/darebfh/events{/privacy}","received_events_url":"https://api.github.com/users/darebfh/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1311200426","html_url":"https://github.com/allenai/scispacy/issues/455#issuecomment-1311200426","issue_url":"https://api.github.com/repos/allenai/scispacy/issues/455","id":1311200426,"node_id":"IC_kwDOCPNzOc5OJ1Sq","user":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false},"created_at":"2022-11-11T03:58:26Z","updated_at":"2022-11-11T03:58:26Z","author_association":"NONE","body":"I just installed all the models and ran the examples and everything worked. Thanks for your help!","reactions":{"url":"https://api.github.com/repos/allenai/scispacy/issues/comments/1311200426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false}},{"id":7788815880,"node_id":"CE_lADOCPNzOc5VqvuezwAAAAHQP-YI","url":"https://api.github.com/repos/allenai/scispacy/issues/events/7788815880","actor":{"login":"briangriner","id":34611149,"node_id":"MDQ6VXNlcjM0NjExMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/34611149?v=4","gravatar_id":"","url":"https://api.github.com/users/briangriner","html_url":"https://github.com/briangriner","followers_url":"https://api.github.com/users/briangriner/followers","following_url":"https://api.github.com/users/briangriner/following{/other_user}","gists_url":"https://api.github.com/users/briangriner/gists{/gist_id}","starred_url":"https://api.github.com/users/briangriner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangriner/subscriptions","organizations_url":"https://api.github.com/users/briangriner/orgs","repos_url":"https://api.github.com/users/briangriner/repos","events_url":"https://api.github.com/users/briangriner/events{/privacy}","received_events_url":"https://api.github.com/users/briangriner/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-11-11T03:58:26Z","state_reason":null,"performed_via_github_app":null}]