{"url":"https://api.github.com/repos/anicolson/DeepXi/issues/19","repository_url":"https://api.github.com/repos/anicolson/DeepXi","labels_url":"https://api.github.com/repos/anicolson/DeepXi/issues/19/labels{/name}","comments_url":"https://api.github.com/repos/anicolson/DeepXi/issues/19/comments","events_url":"https://api.github.com/repos/anicolson/DeepXi/issues/19/events","html_url":"https://github.com/anicolson/DeepXi/issues/19","id":557704628,"node_id":"MDU6SXNzdWU1NTc3MDQ2Mjg=","number":19,"title":"Error during Inference","user":{"login":"betegon","id":28983162,"node_id":"MDQ6VXNlcjI4OTgzMTYy","avatar_url":"https://avatars.githubusercontent.com/u/28983162?v=4","gravatar_id":"","url":"https://api.github.com/users/betegon","html_url":"https://github.com/betegon","followers_url":"https://api.github.com/users/betegon/followers","following_url":"https://api.github.com/users/betegon/following{/other_user}","gists_url":"https://api.github.com/users/betegon/gists{/gist_id}","starred_url":"https://api.github.com/users/betegon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/betegon/subscriptions","organizations_url":"https://api.github.com/users/betegon/orgs","repos_url":"https://api.github.com/users/betegon/repos","events_url":"https://api.github.com/users/betegon/events{/privacy}","received_events_url":"https://api.github.com/users/betegon/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-01-30T19:33:50Z","updated_at":"2021-01-03T22:54:04Z","closed_at":"2020-01-31T09:02:16Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nThank you for your effort in DeepXi @anicolson .\r\n\r\nI have been able to test it for inference with the files you provide, but when I put my own file to denoise, I got the following error:\r\n```bash\r\nThe test_x list has a total of 2 entries.\r\nLoading sample statistics from pickle file...\r\nPreparing graph...\r\nInference...\r\n  0%|                                                           | 0/2 [00:01<?, ?it/s]\r\nTraceback (most recent call last):\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 1356, in _do_call\r\n    return fn(*args)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 1341, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 1429, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[89] = 89 is not in [0, 89)\r\n\t [[{{node boolean_mask/GatherV2}}]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"deepxi.py\", line 44, in <module>\r\n    if args.infer: infer(sess, net, args)\r\n  File \"lib/dev/infer.py\", line 36, in infer\r\n    net.nframes_ph: input_feat[1], net.training_ph: False}) # output of network.\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 950, in run\r\n    run_metadata_ptr)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 1173, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 1350, in _do_run\r\n    run_metadata)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/client/session.py\", line 1370, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: indices[89] = 89 is not in [0, 89)\r\n\t [[node boolean_mask/GatherV2 (defined at lib/dev/ResNet.py:88) ]]\r\n\r\nOriginal stack trace for 'boolean_mask/GatherV2':\r\n  File \"deepxi.py\", line 40, in <module>\r\n    net = deepxi_net.deepxi_net(args)\r\n  File \"lib/dev/deepxi_net.py\", line 32, in __init__\r\n    d_model=args.d_model, d_f=args.d_f, k_size=args.k_size, max_d_rate=args.max_d_rate)\r\n  File \"lib/dev/ResNet.py\", line 88, in ResNet\r\n    if boolean_mask: blocks[-1] = tf.boolean_mask(blocks[-1], tf.sequence_mask(seq_len))\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1386, in boolean_mask\r\n    return _apply_mask_1d(tensor, mask, axis)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/ops/array_ops.py\", line 1355, in _apply_mask_1d\r\n    return gather(reshaped_tensor, indices, axis=axis)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/util/dispatch.py\", line 180, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/ops/array_ops.py\", line 3475, in gather\r\n    return gen_array_ops.gather_v2(params, indices, axis, name=name)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 4097, in gather_v2\r\n    batch_dims=batch_dims, name=name)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 3616, in create_op\r\n    op_def=op_def)\r\n  File \"/home/betegon/anaconda3/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 2005, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\n```\r\n\r\nDo you know why is it happening?\r\n\r\nThis is what I did:\r\n1. Remove the file `set/test_noisy_speech/FB_FB10_07_voice-babble_5dB.wav`  and  add my own `.wav` file and call it like the old one: `FB_FB10_07_voice-babble_5dB.wav`.\r\n2. Do inference as I did before: \r\n```bash\r\npython3 deepxi.py --infer 1 --out_type y --gain mmse-lsa --ver '3f' --epoch 175 --gpu 0\r\n```\r\n\r\nAlso, why does it look like there are two files to denoise ?\r\n```bash\r\nThe test_x list has a total of 2 entries.\r\nLoading sample statistics from pickle file...\r\nPreparing graph...\r\nInference...\r\n  0%|                                                           | 0/2 [00:01<?, ?it/s]\r\n```\r\n\r\n","closed_by":{"login":"betegon","id":28983162,"node_id":"MDQ6VXNlcjI4OTgzMTYy","avatar_url":"https://avatars.githubusercontent.com/u/28983162?v=4","gravatar_id":"","url":"https://api.github.com/users/betegon","html_url":"https://github.com/betegon","followers_url":"https://api.github.com/users/betegon/followers","following_url":"https://api.github.com/users/betegon/following{/other_user}","gists_url":"https://api.github.com/users/betegon/gists{/gist_id}","starred_url":"https://api.github.com/users/betegon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/betegon/subscriptions","organizations_url":"https://api.github.com/users/betegon/orgs","repos_url":"https://api.github.com/users/betegon/repos","events_url":"https://api.github.com/users/betegon/events{/privacy}","received_events_url":"https://api.github.com/users/betegon/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/anicolson/DeepXi/issues/19/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/anicolson/DeepXi/issues/19/timeline","performed_via_github_app":null,"state_reason":"completed"}