{"url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile/issues/7","repository_url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile","labels_url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile/issues/7/labels{/name}","comments_url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile/issues/7/comments","events_url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile/issues/7/events","html_url":"https://github.com/jiangxiluning/facenet_mtcnn_to_mobile/issues/7","id":413927963,"node_id":"MDU6SXNzdWU0MTM5Mjc5NjM=","number":7,"title":"Inference - Freezing the eval model asserts for embeddings","user":{"login":"milinddeore","id":1849168,"node_id":"MDQ6VXNlcjE4NDkxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1849168?v=4","gravatar_id":"","url":"https://api.github.com/users/milinddeore","html_url":"https://github.com/milinddeore","followers_url":"https://api.github.com/users/milinddeore/followers","following_url":"https://api.github.com/users/milinddeore/following{/other_user}","gists_url":"https://api.github.com/users/milinddeore/gists{/gist_id}","starred_url":"https://api.github.com/users/milinddeore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milinddeore/subscriptions","organizations_url":"https://api.github.com/users/milinddeore/orgs","repos_url":"https://api.github.com/users/milinddeore/repos","events_url":"https://api.github.com/users/milinddeore/events{/privacy}","received_events_url":"https://api.github.com/users/milinddeore/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-02-25T04:29:26Z","updated_at":"2019-05-28T07:06:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I have successfully transformed the [model](https://drive.google.com/open?id=1EXPBSXwTaqrSC0OhUdXNmKSh9qJUQ55-) (.pb) to eval model using following command: \r\n\r\n```python3 eval_graph.py model_pc model_pc_eval```\r\n\r\nBut freezing the graph gives following error: \r\n\r\n```python3  src/freeze_graph.py model_pc_eval/  facenet.pb\r\n2019-02-25 12:22:03.793509: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\nModel directory: model_pc_eval/\r\nMetagraph file: imagenet_facenet.ckpt.meta\r\nCheckpoint file: imagenet_facenet.ckpt\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/site-packages/tensorflow/python/training/saver.py:1266: checkpoint_exists (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to check for files with this prefix.\r\nWARNING:tensorflow:From src/freeze_graph.py:90: convert_variables_to_constants (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.compat.v1.graph_util.convert_variables_to_constants\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/site-packages/tensorflow/python/framework/graph_util_impl.py:245: extract_sub_graph (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.compat.v1.graph_util.extract_sub_graph\r\nTraceback (most recent call last):\r\n  File \"src/freeze_graph.py\", line 103, in <module>\r\n    main(parse_arguments(sys.argv[1:]))\r\n  File \"src/freeze_graph.py\", line 58, in main\r\n    output_graph_def = freeze_graph_def(sess, input_graph_def, 'embeddings,label_batch')\r\n  File \"src/freeze_graph.py\", line 90, in freeze_graph_def\r\n    variable_names_whitelist=whitelist_names)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/python/util/deprecation.py\", line 324, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/python/framework/graph_util_impl.py\", line 245, in convert_variables_to_constants\r\n    inference_graph = extract_sub_graph(input_graph_def, output_node_names)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/python/util/deprecation.py\", line 324, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/python/framework/graph_util_impl.py\", line 181, in extract_sub_graph\r\n    _assert_nodes_are_present(name_to_node, dest_nodes)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/python/framework/graph_util_impl.py\", line 137, in _assert_nodes_are_present\r\n    assert d in name_to_node, \"%s is not in graph\" % d\r\nAssertionError: embeddings is not in graph```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile/issues/7/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jiangxiluning/facenet_mtcnn_to_mobile/issues/7/timeline","performed_via_github_app":null,"state_reason":null}