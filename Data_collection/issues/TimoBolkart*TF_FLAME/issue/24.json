{"url":"https://api.github.com/repos/TimoBolkart/TF_FLAME/issues/24","repository_url":"https://api.github.com/repos/TimoBolkart/TF_FLAME","labels_url":"https://api.github.com/repos/TimoBolkart/TF_FLAME/issues/24/labels{/name}","comments_url":"https://api.github.com/repos/TimoBolkart/TF_FLAME/issues/24/comments","events_url":"https://api.github.com/repos/TimoBolkart/TF_FLAME/issues/24/events","html_url":"https://github.com/TimoBolkart/TF_FLAME/issues/24","id":642574682,"node_id":"MDU6SXNzdWU2NDI1NzQ2ODI=","number":24,"title":"Understanding the loss function for the optimization of the rigid transformation","user":{"login":"D0miH","id":36657497,"node_id":"MDQ6VXNlcjM2NjU3NDk3","avatar_url":"https://avatars.githubusercontent.com/u/36657497?v=4","gravatar_id":"","url":"https://api.github.com/users/D0miH","html_url":"https://github.com/D0miH","followers_url":"https://api.github.com/users/D0miH/followers","following_url":"https://api.github.com/users/D0miH/following{/other_user}","gists_url":"https://api.github.com/users/D0miH/gists{/gist_id}","starred_url":"https://api.github.com/users/D0miH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/D0miH/subscriptions","organizations_url":"https://api.github.com/users/D0miH/orgs","repos_url":"https://api.github.com/users/D0miH/repos","events_url":"https://api.github.com/users/D0miH/events{/privacy}","received_events_url":"https://api.github.com/users/D0miH/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-06-21T14:33:18Z","updated_at":"2020-06-23T08:56:03Z","closed_at":"2020-06-23T08:56:03Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nfist of all thank you very much for your awesome work!\r\n\r\nI am currently looking through the code that fits the flame model to the 2D landmarks of a given image and I am trying to understand it. However, I am not sure what the logic behind the formula is that was used to create the loss for finding the appropriate scale, translation and rotation to align the projected flame landmarks with the target landmarks.\r\nMore specifically I am talking about [this](https://github.com/TimoBolkart/TF_FLAME/blob/dbc895c6aff703945e4e8637c8aa27698e1fb7a9/fit_2D_landmarks.py#L83) two lines:\r\n```python\r\nfactor = max(max(target_2d_lmks[:,0]) - min(target_2d_lmks[:,0]),max(target_2d_lmks[:,1]) - min(target_2d_lmks[:,1]))\r\nlmk_dist = weights['lmk']*tf.reduce_sum(tf.square(tf.subtract(lmks_proj_2d, target_2d_lmks))) / (factor ** 2)\r\n```\r\nI do understand that the factor is the maximum range of either the x- or y-coordinates of the target landmarks. But why is the result of the subtraction of the projected landmarks and the target landmarks squared, reduced and then divided by the square of the factor? Why don't calculate the average distance of the projected and the target landmarks and reduce those?","closed_by":{"login":"D0miH","id":36657497,"node_id":"MDQ6VXNlcjM2NjU3NDk3","avatar_url":"https://avatars.githubusercontent.com/u/36657497?v=4","gravatar_id":"","url":"https://api.github.com/users/D0miH","html_url":"https://github.com/D0miH","followers_url":"https://api.github.com/users/D0miH/followers","following_url":"https://api.github.com/users/D0miH/following{/other_user}","gists_url":"https://api.github.com/users/D0miH/gists{/gist_id}","starred_url":"https://api.github.com/users/D0miH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/D0miH/subscriptions","organizations_url":"https://api.github.com/users/D0miH/orgs","repos_url":"https://api.github.com/users/D0miH/repos","events_url":"https://api.github.com/users/D0miH/events{/privacy}","received_events_url":"https://api.github.com/users/D0miH/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/TimoBolkart/TF_FLAME/issues/24/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/TimoBolkart/TF_FLAME/issues/24/timeline","performed_via_github_app":null,"state_reason":"completed"}