{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/1107","repository_url":"https://api.github.com/repos/blue-oil/blueoil","labels_url":"https://api.github.com/repos/blue-oil/blueoil/issues/1107/labels{/name}","comments_url":"https://api.github.com/repos/blue-oil/blueoil/issues/1107/comments","events_url":"https://api.github.com/repos/blue-oil/blueoil/issues/1107/events","html_url":"https://github.com/blue-oil/blueoil/issues/1107","id":642636090,"node_id":"MDU6SXNzdWU2NDI2MzYwOTA=","number":1107,"title":"We should use relative comparing in testing model","user":{"login":"tk26eng","id":35796618,"node_id":"MDQ6VXNlcjM1Nzk2NjE4","avatar_url":"https://avatars.githubusercontent.com/u/35796618?v=4","gravatar_id":"","url":"https://api.github.com/users/tk26eng","html_url":"https://github.com/tk26eng","followers_url":"https://api.github.com/users/tk26eng/followers","following_url":"https://api.github.com/users/tk26eng/following{/other_user}","gists_url":"https://api.github.com/users/tk26eng/gists{/gist_id}","starred_url":"https://api.github.com/users/tk26eng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tk26eng/subscriptions","organizations_url":"https://api.github.com/users/tk26eng/orgs","repos_url":"https://api.github.com/users/tk26eng/repos","events_url":"https://api.github.com/users/tk26eng/events{/privacy}","received_events_url":"https://api.github.com/users/tk26eng/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":true,"assignee":{"login":"tk26eng","id":35796618,"node_id":"MDQ6VXNlcjM1Nzk2NjE4","avatar_url":"https://avatars.githubusercontent.com/u/35796618?v=4","gravatar_id":"","url":"https://api.github.com/users/tk26eng","html_url":"https://github.com/tk26eng","followers_url":"https://api.github.com/users/tk26eng/followers","following_url":"https://api.github.com/users/tk26eng/following{/other_user}","gists_url":"https://api.github.com/users/tk26eng/gists{/gist_id}","starred_url":"https://api.github.com/users/tk26eng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tk26eng/subscriptions","organizations_url":"https://api.github.com/users/tk26eng/orgs","repos_url":"https://api.github.com/users/tk26eng/repos","events_url":"https://api.github.com/users/tk26eng/events{/privacy}","received_events_url":"https://api.github.com/users/tk26eng/received_events","type":"User","site_admin":false},"assignees":[{"login":"tk26eng","id":35796618,"node_id":"MDQ6VXNlcjM1Nzk2NjE4","avatar_url":"https://avatars.githubusercontent.com/u/35796618?v=4","gravatar_id":"","url":"https://api.github.com/users/tk26eng","html_url":"https://github.com/tk26eng","followers_url":"https://api.github.com/users/tk26eng/followers","following_url":"https://api.github.com/users/tk26eng/following{/other_user}","gists_url":"https://api.github.com/users/tk26eng/gists{/gist_id}","starred_url":"https://api.github.com/users/tk26eng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tk26eng/subscriptions","organizations_url":"https://api.github.com/users/tk26eng/orgs","repos_url":"https://api.github.com/users/tk26eng/repos","events_url":"https://api.github.com/users/tk26eng/events{/privacy}","received_events_url":"https://api.github.com/users/tk26eng/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-06-21T20:34:09Z","updated_at":"2020-06-23T04:53:07Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"https://github.com/blue-oil/blueoil/blob/107c4fc71685159e6bfe077b263ac441d126b602/blueoil/converter/templates/include/dlk_test.h#L41-L57\r\n\r\nIn this above source, absolute error is used in comparing ground truth values and calculated values for elf binaries like `lm_x86.elf`. This comparison with absolute error works well when the values are normalized and range from 0.0 to 1.0.\r\nBut sometimes in some network, they are not normalized and range from 0 to 255 especially when output is image data. Then the absolute error of 0.00001 is too strict (small) for 32bit floating point which is valid within about 6 to 7 digit by decimal value.\r\n\r\nMaybe, absolute error of 0.00001 is OK for lm_x86.elf because it doesn't use 32bit floating point.\r\nBut other elf binaries will use SIMD operations with 32bit floating point in some functions for faster calculation. So they might occur error of validation.\r\n\r\nFor example, the ground truth is 100.0 and calculated value is 100.000005, originally the test should pass. However, the comparison will fail because 32bit floating point has accuracy of 0.0001 (6digits of 100.0).\r\n\r\nSo we should use relative error for this problem.\r\nThis change from absolute error to relative one is very easy to modify. But this part has big effect to validation of model.\r\n\r\nWhat do you think about changing absolute error to relative one ?","closed_by":null,"reactions":{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/1107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blue-oil/blueoil/issues/1107/timeline","performed_via_github_app":null,"state_reason":null}