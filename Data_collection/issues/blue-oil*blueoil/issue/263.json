{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/263","repository_url":"https://api.github.com/repos/blue-oil/blueoil","labels_url":"https://api.github.com/repos/blue-oil/blueoil/issues/263/labels{/name}","comments_url":"https://api.github.com/repos/blue-oil/blueoil/issues/263/comments","events_url":"https://api.github.com/repos/blue-oil/blueoil/issues/263/events","html_url":"https://github.com/blue-oil/blueoil/issues/263","id":442054373,"node_id":"MDU6SXNzdWU0NDIwNTQzNzM=","number":263,"title":"Data shape error when executing usb_camera_demo.py","user":{"login":"nabedev","id":26590545,"node_id":"MDQ6VXNlcjI2NTkwNTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26590545?v=4","gravatar_id":"","url":"https://api.github.com/users/nabedev","html_url":"https://github.com/nabedev","followers_url":"https://api.github.com/users/nabedev/followers","following_url":"https://api.github.com/users/nabedev/following{/other_user}","gists_url":"https://api.github.com/users/nabedev/gists{/gist_id}","starred_url":"https://api.github.com/users/nabedev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabedev/subscriptions","organizations_url":"https://api.github.com/users/nabedev/orgs","repos_url":"https://api.github.com/users/nabedev/repos","events_url":"https://api.github.com/users/nabedev/events{/privacy}","received_events_url":"https://api.github.com/users/nabedev/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-05-09T05:21:54Z","updated_at":"2019-05-13T04:59:44Z","closed_at":"2019-05-13T04:59:44Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I tried to run `usb_camera_demo.py`  in Jetson TX2 with python3 it raises following data shape error.\r\n```\r\nubuntu@ubuntu:~/gpu/python$ python3 usb_camera_demo.py -c ../models/meta.yaml -m ../models/minimal_graph_with_shape.pb\r\n2019-05-08 19:00:36.089683: W tensorflow/core/platform/profile_utils/cpu_utils.cc:98] Failed to find bogomips in /proc/cpuinfo; cannot determine CPU frequency\r\n2019-05-08 19:00:36.090686: I tensorflow/compiler/xla/service/service.cc:161] XLA service 0x439b2de0 executing computations on platform Host. Devices:\r\n2019-05-08 19:00:36.090814: I tensorflow/compiler/xla/service/service.cc:168]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-05-08 19:00:36.161812: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:965] ARM64 does not support NUMA - returning NUMA node zero\r\n2019-05-08 19:00:36.162111: I tensorflow/compiler/xla/service/service.cc:161] XLA service 0x3eca5f60 executing computations on platform CUDA. Devices:\r\n2019-05-08 19:00:36.162165: I tensorflow/compiler/xla/service/service.cc:168]   StreamExecutor device (0): NVIDIA Tegra X2, Compute Capability 6.2\r\n2019-05-08 19:00:36.162452: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties: \r\nname: NVIDIA Tegra X2 major: 6 minor: 2 memoryClockRate(GHz): 1.02\r\npciBusID: 0000:00:00.0\r\ntotalMemory: 7.68GiB freeMemory: 3.12GiB\r\n2019-05-08 19:00:36.162502: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n2019-05-08 19:00:37.254041: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-05-08 19:00:37.254265: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 \r\n2019-05-08 19:00:37.254410: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N \r\n2019-05-08 19:00:37.255722: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 2693 MB memory) -> physical GPU (device: 0, name: NVIDIA Tegra X2, pci bus id: 0000:00:00.0, compute capability: 6.2)\r\nGtk-Message: 19:00:37.490: Failed to load module \"canberra-gtk-module\"\r\nmultiprocessing.pool.RemoteTraceback: \r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 119, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"usb_camera_demo.py\", line 93, in _run_inference\r\n    result, fps, _ = run_inference(img, nn, pre_process, post_process)\r\n  File \"/home/ubuntu/gpu/python/lmnet/utils/demo.py\", line 154, in run_inference\r\n    result = nn.run(data)\r\n  File \"/home/ubuntu/gpu/python/lmnet/tensorflow_graph_runner.py\", line 62, in run\r\n    return self.sess.run(self.output_op, feed_dict={self.images_placeholder: data})\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/home/ubuntu/.local/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1128, in _run\r\n    str(subfeed_t.get_shape())))\r\nValueError: Cannot feed value of shape (160, 160, 3) for Tensor 'images_placeholder:0', which has shape '(1, 160, 160, 3)'\r\n\"\"\"\r\n```\r\n\r\n@ruimashita told me should add the following line in demo.py. \r\n\r\n```python\r\ndata = np.expand_dims(data, axis=0)\r\n```\r\n\r\nBut I'm not sure where it is correct to add this line.","closed_by":{"login":"iizukak","id":478824,"node_id":"MDQ6VXNlcjQ3ODgyNA==","avatar_url":"https://avatars.githubusercontent.com/u/478824?v=4","gravatar_id":"","url":"https://api.github.com/users/iizukak","html_url":"https://github.com/iizukak","followers_url":"https://api.github.com/users/iizukak/followers","following_url":"https://api.github.com/users/iizukak/following{/other_user}","gists_url":"https://api.github.com/users/iizukak/gists{/gist_id}","starred_url":"https://api.github.com/users/iizukak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iizukak/subscriptions","organizations_url":"https://api.github.com/users/iizukak/orgs","repos_url":"https://api.github.com/users/iizukak/repos","events_url":"https://api.github.com/users/iizukak/events{/privacy}","received_events_url":"https://api.github.com/users/iizukak/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blue-oil/blueoil/issues/263/timeline","performed_via_github_app":null,"state_reason":"completed"}