{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/523","repository_url":"https://api.github.com/repos/blue-oil/blueoil","labels_url":"https://api.github.com/repos/blue-oil/blueoil/issues/523/labels{/name}","comments_url":"https://api.github.com/repos/blue-oil/blueoil/issues/523/comments","events_url":"https://api.github.com/repos/blue-oil/blueoil/issues/523/events","html_url":"https://github.com/blue-oil/blueoil/issues/523","id":507145133,"node_id":"MDU6SXNzdWU1MDcxNDUxMzM=","number":523,"title":"If set optional classes on MscocoObjectDetection then fail to instantiate.","user":{"login":"takecore","id":2714160,"node_id":"MDQ6VXNlcjI3MTQxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/2714160?v=4","gravatar_id":"","url":"https://api.github.com/users/takecore","html_url":"https://github.com/takecore","followers_url":"https://api.github.com/users/takecore/followers","following_url":"https://api.github.com/users/takecore/following{/other_user}","gists_url":"https://api.github.com/users/takecore/gists{/gist_id}","starred_url":"https://api.github.com/users/takecore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/takecore/subscriptions","organizations_url":"https://api.github.com/users/takecore/orgs","repos_url":"https://api.github.com/users/takecore/repos","events_url":"https://api.github.com/users/takecore/events{/privacy}","received_events_url":"https://api.github.com/users/takecore/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-10-15T10:11:12Z","updated_at":"2019-10-31T01:08:43Z","closed_at":"2019-10-31T01:08:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"at version: `v0.12.0`\r\n\r\nI want to use optional classes on MscocoObjectDetection like below code.\r\n\r\nhttps://github.com/blue-oil/blueoil/blob/master/lmnet/lmnet/datasets/mscoco.py#L140\r\n\r\n```\r\nclass MscocoObjectDetection(ObjectDetectionBase):\r\n-     classes = DEFAULT_CLASSES\r\n---\r\n+     classes = [\"person\"]\r\n```\r\n\r\nSo I checked it with test like below code.\r\n\r\n```py\r\n# lmnet/tests/lmnet_tests/datasets_tests/test_mscoco.py\r\nfrom lmnet.datasets.mscoco import MscocoObjectDetection, DEFAULT_CLASSES\r\n\r\n\r\ndef test_mscoco_object_detection_optional_classes():\r\n    classes = [DEFAULT_CLASSES[0]]\r\n    MscocoObjectDetection.classes = classes\r\n    dataset = MscocoObjectDetection(subset='train')\r\n```\r\n\r\nAnd got error like below.\r\n\r\n```\r\n$ pytest tests/lmnet_tests/datasets_tests/test_mscoco.py\r\n\r\n________________________________________________________________ test_mscoco_object_detection_optional_classes ________________________________________________________________\r\n\r\n    def test_mscoco_object_detection_optional_classes():\r\n        classes = [DEFAULT_CLASSES[0]]\r\n        MscocoObjectDetection.classes = classes\r\n>       dataset = MscocoObjectDetection(subset='train')\r\n\r\ntests/lmnet_tests/datasets_tests/test_mscoco.py:25:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\nlmnet/datasets/mscoco.py:164: in __init__\r\n    self._init_files_and_annotations()\r\nlmnet/datasets/mscoco.py:249: in _init_files_and_annotations\r\n    self.files, self.annotations = self._files_and_annotations()\r\nlmnet/datasets/mscoco.py:244: in _files_and_annotations\r\n    gt_boxes_list = [self._gt_boxes_from_image_id(image_id) for image_id in image_ids]\r\nlmnet/datasets/mscoco.py:244: in <listcomp>\r\n    gt_boxes_list = [self._gt_boxes_from_image_id(image_id) for image_id in image_ids]\r\nlmnet/datasets/mscoco.py:232: in _gt_boxes_from_image_id\r\n    for annotation in annotations:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <lmnet.datasets.mscoco.MscocoObjectDetection object at 0x7f23cd31f588>, cat_id = 28\r\n\r\n    @functools.lru_cache(maxsize=None)\r\n    def coco_category_id_to_lmnet_class_id(self, cat_id):\r\n        target_class = self.coco.loadCats(cat_id)[0]['name']\r\n>       class_id = self.classes.index(target_class)\r\nE       ValueError: 'umbrella' is not in list\r\n\r\nlmnet/datasets/mscoco.py:222: ValueError\r\n```","closed_by":{"login":"iizukak","id":478824,"node_id":"MDQ6VXNlcjQ3ODgyNA==","avatar_url":"https://avatars.githubusercontent.com/u/478824?v=4","gravatar_id":"","url":"https://api.github.com/users/iizukak","html_url":"https://github.com/iizukak","followers_url":"https://api.github.com/users/iizukak/followers","following_url":"https://api.github.com/users/iizukak/following{/other_user}","gists_url":"https://api.github.com/users/iizukak/gists{/gist_id}","starred_url":"https://api.github.com/users/iizukak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iizukak/subscriptions","organizations_url":"https://api.github.com/users/iizukak/orgs","repos_url":"https://api.github.com/users/iizukak/repos","events_url":"https://api.github.com/users/iizukak/events{/privacy}","received_events_url":"https://api.github.com/users/iizukak/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blue-oil/blueoil/issues/523/timeline","performed_via_github_app":null,"state_reason":"completed"}