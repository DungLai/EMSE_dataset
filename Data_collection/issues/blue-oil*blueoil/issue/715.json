{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/715","repository_url":"https://api.github.com/repos/blue-oil/blueoil","labels_url":"https://api.github.com/repos/blue-oil/blueoil/issues/715/labels{/name}","comments_url":"https://api.github.com/repos/blue-oil/blueoil/issues/715/comments","events_url":"https://api.github.com/repos/blue-oil/blueoil/issues/715/events","html_url":"https://github.com/blue-oil/blueoil/issues/715","id":547305362,"node_id":"MDU6SXNzdWU1NDczMDUzNjI=","number":715,"title":"TF1.15.0 has AddV2, TF1.14.0 had Add - compiler throws error","user":{"login":"kalpitthakkar-lm","id":59547808,"node_id":"MDQ6VXNlcjU5NTQ3ODA4","avatar_url":"https://avatars.githubusercontent.com/u/59547808?v=4","gravatar_id":"","url":"https://api.github.com/users/kalpitthakkar-lm","html_url":"https://github.com/kalpitthakkar-lm","followers_url":"https://api.github.com/users/kalpitthakkar-lm/followers","following_url":"https://api.github.com/users/kalpitthakkar-lm/following{/other_user}","gists_url":"https://api.github.com/users/kalpitthakkar-lm/gists{/gist_id}","starred_url":"https://api.github.com/users/kalpitthakkar-lm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kalpitthakkar-lm/subscriptions","organizations_url":"https://api.github.com/users/kalpitthakkar-lm/orgs","repos_url":"https://api.github.com/users/kalpitthakkar-lm/repos","events_url":"https://api.github.com/users/kalpitthakkar-lm/events{/privacy}","received_events_url":"https://api.github.com/users/kalpitthakkar-lm/received_events","type":"User","site_admin":false},"labels":[{"id":1095590109,"node_id":"MDU6TGFiZWwxMDk1NTkwMTA5","url":"https://api.github.com/repos/blue-oil/blueoil/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-01-09T07:40:52Z","updated_at":"2020-01-10T02:36:32Z","closed_at":"2020-01-10T02:36:31Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hello!\r\nSo I have set up blueoil from a recent commit - the tensorflow version in the requirements file has been updated to 1.15.0 from 1.14.0, which was there in the past.\r\nBlueoil build completed and I started setting up CIFAR10 classification to be run using Blueoil. I chose to run the __Quantized Resnet__ model from the choices offered by the Blueoil config prompts. I was able to run the training successfully and the trained model was ready to be compiled so that I can run it on DE-10 Nano.\r\n\r\nHowever, when compiling the model for FPGA, I got the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/blueoil/dlk/python/dlk/plugins/tf.py\", line 576, in create_new_node\r\n    class_def = getattr(module, op_type)\r\nAttributeError: module 'core.operators' has no attribute 'AddV2'\r\n``` \r\n\r\nTurns out, TF1.15.0 uses 'AddV2' to label the add operation while TF1.14.0 used 'Add'.\r\nTo confirm this I ran a bunch of python commands (Egashira-san helped me with this):\r\n```\r\nimport tensorflow as tf\r\nx = tf.constant([0.])\r\ny = tf.constant([1.])\r\nz = x + y\r\ngraph = tf.get_default_graph()\r\nfor op in graph.get_operators():\r\n    print(op.name, op.type, op.op_def)\r\n```\r\n\r\nThe outputs for different versions of tensorflow are shown below:\r\n```\r\n# TF 1.15.0\r\nConst Const name: \"Const\"\r\noutput_arg {\r\n  name: \"output\"\r\n  type_attr: \"dtype\"\r\n}\r\nattr {\r\n  name: \"value\"\r\n  type: \"tensor\"\r\n}\r\nattr {\r\n  name: \"dtype\"\r\n  type: \"type\"\r\n}\r\n\r\nConst_1 Const name: \"Const\"\r\noutput_arg {\r\n  name: \"output\"\r\n  type_attr: \"dtype\"\r\n}\r\nattr {\r\n  name: \"value\"\r\n  type: \"tensor\"\r\n}\r\nattr {\r\n  name: \"dtype\"\r\n  type: \"type\"\r\n}\r\n\r\nadd AddV2 name: \"AddV2\"\r\ninput_arg {\r\n  name: \"x\"\r\n  type_attr: \"T\"\r\n}\r\ninput_arg {\r\n  name: \"y\"\r\n  type_attr: \"T\"\r\n}\r\noutput_arg {\r\n  name: \"z\"\r\n  type_attr: \"T\"\r\n}\r\nattr {\r\n  name: \"T\"\r\n  type: \"type\"\r\n  allowed_values {\r\n    list {\r\n      type: DT_BFLOAT16\r\n      type: DT_HALF\r\n      type: DT_FLOAT\r\n      type: DT_DOUBLE\r\n      type: DT_UINT8\r\n      type: DT_INT8\r\n      type: DT_INT16\r\n      type: DT_INT32\r\n      type: DT_INT64\r\n      type: DT_COMPLEX64\r\n      type: DT_COMPLEX128\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```\r\n# TF 1.14.0\r\nConst Const name: \"Const\"\r\noutput_arg {\r\n  name: \"output\"\r\n  type_attr: \"dtype\"\r\n}\r\nattr {\r\n  name: \"value\"\r\n  type: \"tensor\"\r\n}\r\nattr {\r\n  name: \"dtype\"\r\n  type: \"type\"\r\n}\r\n\r\nConst_1 Const name: \"Const\"\r\noutput_arg {\r\n  name: \"output\"\r\n  type_attr: \"dtype\"\r\n}\r\nattr {\r\n  name: \"value\"\r\n  type: \"tensor\"\r\n}\r\nattr {\r\n  name: \"dtype\"\r\n  type: \"type\"\r\n}\r\n\r\nadd Add name: \"Add\"\r\ninput_arg {\r\n  name: \"x\"\r\n  type_attr: \"T\"\r\n}\r\ninput_arg {\r\n  name: \"y\"\r\n  type_attr: \"T\"\r\n}\r\noutput_arg {\r\n  name: \"z\"\r\n  type_attr: \"T\"\r\n}\r\nattr {\r\n  name: \"T\"\r\n  type: \"type\"\r\n  allowed_values {\r\n    list {\r\n      type: DT_BFLOAT16\r\n      type: DT_HALF\r\n      type: DT_FLOAT\r\n      type: DT_DOUBLE\r\n      type: DT_UINT8\r\n      type: DT_INT8\r\n      type: DT_INT16\r\n      type: DT_INT32\r\n      type: DT_INT64\r\n      type: DT_COMPLEX64\r\n      type: DT_COMPLEX128\r\n      type: DT_STRING\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nPlease let me know what should be done to proceed.","closed_by":{"login":"kalpitthakkar-lm","id":59547808,"node_id":"MDQ6VXNlcjU5NTQ3ODA4","avatar_url":"https://avatars.githubusercontent.com/u/59547808?v=4","gravatar_id":"","url":"https://api.github.com/users/kalpitthakkar-lm","html_url":"https://github.com/kalpitthakkar-lm","followers_url":"https://api.github.com/users/kalpitthakkar-lm/followers","following_url":"https://api.github.com/users/kalpitthakkar-lm/following{/other_user}","gists_url":"https://api.github.com/users/kalpitthakkar-lm/gists{/gist_id}","starred_url":"https://api.github.com/users/kalpitthakkar-lm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kalpitthakkar-lm/subscriptions","organizations_url":"https://api.github.com/users/kalpitthakkar-lm/orgs","repos_url":"https://api.github.com/users/kalpitthakkar-lm/repos","events_url":"https://api.github.com/users/kalpitthakkar-lm/events{/privacy}","received_events_url":"https://api.github.com/users/kalpitthakkar-lm/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blue-oil/blueoil/issues/715/timeline","performed_via_github_app":null,"state_reason":"completed"}