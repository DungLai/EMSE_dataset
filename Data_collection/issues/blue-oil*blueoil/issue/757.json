{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/757","repository_url":"https://api.github.com/repos/blue-oil/blueoil","labels_url":"https://api.github.com/repos/blue-oil/blueoil/issues/757/labels{/name}","comments_url":"https://api.github.com/repos/blue-oil/blueoil/issues/757/comments","events_url":"https://api.github.com/repos/blue-oil/blueoil/issues/757/events","html_url":"https://github.com/blue-oil/blueoil/issues/757","id":554632560,"node_id":"MDU6SXNzdWU1NTQ2MzI1NjA=","number":757,"title":"Cannot make libdlk_x86_avx.a","user":{"login":"hadusam","id":12394960,"node_id":"MDQ6VXNlcjEyMzk0OTYw","avatar_url":"https://avatars.githubusercontent.com/u/12394960?v=4","gravatar_id":"","url":"https://api.github.com/users/hadusam","html_url":"https://github.com/hadusam","followers_url":"https://api.github.com/users/hadusam/followers","following_url":"https://api.github.com/users/hadusam/following{/other_user}","gists_url":"https://api.github.com/users/hadusam/gists{/gist_id}","starred_url":"https://api.github.com/users/hadusam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hadusam/subscriptions","organizations_url":"https://api.github.com/users/hadusam/orgs","repos_url":"https://api.github.com/users/hadusam/repos","events_url":"https://api.github.com/users/hadusam/events{/privacy}","received_events_url":"https://api.github.com/users/hadusam/received_events","type":"User","site_admin":false},"labels":[{"id":1095590109,"node_id":"MDU6TGFiZWwxMDk1NTkwMTA5","url":"https://api.github.com/repos/blue-oil/blueoil/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-01-24T09:39:36Z","updated_at":"2020-02-05T01:50:24Z","closed_at":"2020-02-05T01:50:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Related #755 \r\nI tried to run `make ar_x86_avx` but it failed for all models ([buildkite result](https://buildkite.com/blueoil/blueoil-test/builds/1516#_))\r\n\r\nThis is sample error log.\r\n```\r\n# make ar_x86_avx\r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv5_conv2d_kernel_1_QTZ_binary_mean_scaling_new.cpp -o src/inputs/conv5_conv2d_kernel_1_QTZ_binary_mean_scaling_new.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv1_Const_1.cpp -o src/inputs/conv1_Const_1.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/pool7_reshape_shape.cpp -o src/inputs/pool7_reshape_shape.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv3_conv2d_kernel_1_QTZ_binary_mean_scaling_new.cpp -o src/inputs/conv3_conv2d_kernel_1_QTZ_binary_mean_scaling_new.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv7_kernel.cpp -o src/inputs/conv7_kernel.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv1_BatchNorm_FusedBatchNormV3_optimized_bias.cpp -o src/inputs/conv1_BatchNorm_FusedBatchNormV3_optimized_bias.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv6_BatchNorm_FusedBatchNormV3_optimized_bias.cpp -o src/inputs/conv6_BatchNorm_FusedBatchNormV3_optimized_bias.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv6_conv2d_kernel_1_QTZ_binary_mean_scaling_new.cpp -o src/inputs/conv6_conv2d_kernel_1_QTZ_binary_mean_scaling_new.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv6_BatchNorm_FusedBatchNormV3_optimized_scale.cpp -o src/inputs/conv6_BatchNorm_FusedBatchNormV3_optimized_scale.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv1_Const.cpp -o src/inputs/conv1_Const.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv1_conv2d_kernel_1_QTZ_binary_mean_scaling_new.cpp -o src/inputs/conv1_conv2d_kernel_1_QTZ_binary_mean_scaling_new.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv1_BatchNorm_FusedBatchNormV3_optimized_scale.cpp -o src/inputs/conv1_BatchNorm_FusedBatchNormV3_optimized_scale.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv4_conv2d_kernel_1_QTZ_binary_mean_scaling_new.cpp -o src/inputs/conv4_conv2d_kernel_1_QTZ_binary_mean_scaling_new.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv2_conv2d_kernel_1_QTZ_binary_mean_scaling_new.cpp -o src/inputs/conv2_conv2d_kernel_1_QTZ_binary_mean_scaling_new.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/inputs/conv7_bias.cpp -o src/inputs/conv7_bias.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/scaling_factors.cpp -o src/scaling_factors.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/thresholds.cpp -o src/thresholds.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/average_pool.cpp -o src/func/average_pool.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/conv2d.cpp -o src/func/conv2d.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/max_pool.cpp -o src/func/max_pool.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/pad.cpp -o src/func/pad.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/matmul.cpp -o src/func/matmul.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/softmax.cpp -o src/func/softmax.o \r\ng++ -I./include -O3 -std=c++14 -fPIC -fvisibility=hidden -DUSE_AVX -pthread -g -fopenmp -c src/func/lookup.cpp -o src/func/lookup.o \r\nsrc/func/lookup.cpp: In function ‘void func_Lookup(const TensorView<float, (MemoryLayout)7>&, const TensorView<QuantizedPacked<unsigned int>, (MemoryLayout)5>&, const TensorView<QuantizedPacked<unsigned int>, (MemoryLayout)5>&, const TensorView<QuantizedPacked<unsigned int>, (MemoryLayout)14>&)’:\r\nsrc/func/lookup.cpp:43:43: warning: AVX vector return without AVX enabled changes the ABI [-Wpsabi]\r\n   const auto coeff = _mm256_set1_ps(255.0f);\r\n                                           ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1285:1: error: inlining failed in call to always_inline ‘__m256 _mm256_set1_ps(float)’: target specific option mismatch\r\n _mm256_set1_ps (float __A)\r\n ^\r\nsrc/func/lookup.cpp:43:43: error: called from here\r\n   const auto coeff = _mm256_set1_ps(255.0f);\r\n                                           ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1451:1: error: inlining failed in call to always_inline ‘__m256 _mm256_castps128_ps256(__m128)’: target specific option mismatch\r\n _mm256_castps128_ps256 (__m128 __A)\r\n ^\r\nsrc/func/lookup.cpp:45:78: error: called from here\r\n     const auto vl0 = _mm256_castps128_ps256(_mm_loadu_ps(in_ptr + 3 * i +  0));\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1451:1: error: inlining failed in call to always_inline ‘__m256 _mm256_castps128_ps256(__m128)’: target specific option mismatch\r\n _mm256_castps128_ps256 (__m128 __A)\r\n ^\r\nsrc/func/lookup.cpp:46:78: error: called from here\r\n     const auto vl1 = _mm256_castps128_ps256(_mm_loadu_ps(in_ptr + 3 * i +  4));\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1451:1: error: inlining failed in call to always_inline ‘__m256 _mm256_castps128_ps256(__m128)’: target specific option mismatch\r\n _mm256_castps128_ps256 (__m128 __A)\r\n ^\r\nsrc/func/lookup.cpp:47:78: error: called from here\r\n     const auto vl2 = _mm256_castps128_ps256(_mm_loadu_ps(in_ptr + 3 * i +  8));\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:734:1: error: inlining failed in call to always_inline ‘__m256 _mm256_insertf128_ps(__m256, __m128, int)’: target specific option mismatch\r\n _mm256_insertf128_ps (__m256 __X, __m128 __Y, const int __O)\r\n ^\r\nsrc/func/lookup.cpp:51:53: error: called from here\r\n     const auto v0 = _mm256_insertf128_ps(vl0, vh0, 1);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:734:1: error: inlining failed in call to always_inline ‘__m256 _mm256_insertf128_ps(__m256, __m128, int)’: target specific option mismatch\r\n _mm256_insertf128_ps (__m256 __X, __m128 __Y, const int __O)\r\n ^\r\nsrc/func/lookup.cpp:52:53: error: called from here\r\n     const auto v1 = _mm256_insertf128_ps(vl1, vh1, 1);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:734:1: error: inlining failed in call to always_inline ‘__m256 _mm256_insertf128_ps(__m256, __m128, int)’: target specific option mismatch\r\n _mm256_insertf128_ps (__m256 __X, __m128 __Y, const int __O)\r\n ^\r\nsrc/func/lookup.cpp:53:53: error: called from here\r\n     const auto v2 = _mm256_insertf128_ps(vl2, vh2, 1);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:54:72: error: called from here\r\n     const auto tmp0 = _mm256_shuffle_ps(v1, v2, _MM_SHUFFLE(2, 1, 3, 2));\r\n                                                                        ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:55:72: error: called from here\r\n     const auto tmp1 = _mm256_shuffle_ps(v0, v1, _MM_SHUFFLE(1, 0, 2, 1));\r\n                                                                        ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:56:71: error: called from here\r\n     const auto r = _mm256_shuffle_ps(v0, tmp0, _MM_SHUFFLE(2, 0, 3, 0));\r\n                                                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:57:73: error: called from here\r\n     const auto g = _mm256_shuffle_ps(tmp1, tmp0, _MM_SHUFFLE(3, 1, 2, 0));\r\n                                                                         ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:58:71: error: called from here\r\n     const auto b = _mm256_shuffle_ps(tmp1, v2, _MM_SHUFFLE(3, 0, 3, 1));\r\n                                                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:454:1: error: inlining failed in call to always_inline ‘__m256i _mm256_cvtps_epi32(__m256)’: target specific option mismatch\r\n _mm256_cvtps_epi32 (__m256 __A)\r\n ^\r\nsrc/func/lookup.cpp:59:63: error: called from here\r\n     const auto ri = _mm256_cvtps_epi32(_mm256_mul_ps(r, coeff));\r\n                                                               ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:306:1: error: inlining failed in call to always_inline ‘__m256 _mm256_mul_ps(__m256, __m256)’: target specific option mismatch\r\n _mm256_mul_ps (__m256 __A, __m256 __B)\r\n ^\r\nsrc/func/lookup.cpp:59:39: error: called from here\r\n     const auto ri = _mm256_cvtps_epi32(_mm256_mul_ps(r, coeff));\r\n                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:454:1: error: inlining failed in call to always_inline ‘__m256i _mm256_cvtps_epi32(__m256)’: target specific option mismatch\r\n _mm256_cvtps_epi32 (__m256 __A)\r\n ^\r\nsrc/func/lookup.cpp:60:63: error: called from here\r\n     const auto gi = _mm256_cvtps_epi32(_mm256_mul_ps(g, coeff));\r\n                                                               ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:306:1: error: inlining failed in call to always_inline ‘__m256 _mm256_mul_ps(__m256, __m256)’: target specific option mismatch\r\n _mm256_mul_ps (__m256 __A, __m256 __B)\r\n ^\r\nsrc/func/lookup.cpp:60:39: error: called from here\r\n     const auto gi = _mm256_cvtps_epi32(_mm256_mul_ps(g, coeff));\r\n                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:454:1: error: inlining failed in call to always_inline ‘__m256i _mm256_cvtps_epi32(__m256)’: target specific option mismatch\r\n _mm256_cvtps_epi32 (__m256 __A)\r\n ^\r\nsrc/func/lookup.cpp:61:63: error: called from here\r\n     const auto bi = _mm256_cvtps_epi32(_mm256_mul_ps(b, coeff));\r\n                                                               ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:306:1: error: inlining failed in call to always_inline ‘__m256 _mm256_mul_ps(__m256, __m256)’: target specific option mismatch\r\n _mm256_mul_ps (__m256 __A, __m256 __B)\r\n ^\r\nsrc/func/lookup.cpp:61:39: error: called from here\r\n     const auto bi = _mm256_cvtps_epi32(_mm256_mul_ps(b, coeff));\r\n                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:62:92: error: called from here\r\n     const auto lr = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(lsb_ptr), ri, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:63:92: error: called from here\r\n     const auto lg = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(lsb_ptr), gi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:64:92: error: called from here\r\n     const auto lb = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(lsb_ptr), bi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:65:92: error: called from here\r\n     const auto mr = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(msb_ptr), ri, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:66:92: error: called from here\r\n     const auto mg = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(msb_ptr), gi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:67:92: error: called from here\r\n     const auto mb = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(msb_ptr), bi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:68:53: error: called from here\r\n     const auto shifted_lg = _mm256_slli_epi32(lg, 10);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:69:53: error: called from here\r\n     const auto shifted_lb = _mm256_slli_epi32(lb, 20);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:71:53: error: called from here\r\n     const auto shifted_mg = _mm256_slli_epi32(mg, 10);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:72:53: error: called from here\r\n     const auto shifted_mb = _mm256_slli_epi32(mb, 20);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:899:1: error: inlining failed in call to always_inline ‘__m256i _mm256_unpacklo_epi32(__m256i, __m256i)’: target specific option mismatch\r\n _mm256_unpacklo_epi32 (__m256i __A, __m256i __B)\r\n ^\r\nsrc/func/lookup.cpp:74:48: error: called from here\r\n     const auto lo0 = _mm256_unpacklo_epi32(l, m);\r\n                                                ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:871:1: error: inlining failed in call to always_inline ‘__m256i _mm256_unpackhi_epi32(__m256i, __m256i)’: target specific option mismatch\r\n _mm256_unpackhi_epi32 (__m256i __A, __m256i __B)\r\n ^\r\nsrc/func/lookup.cpp:75:48: error: called from here\r\n     const auto hi0 = _mm256_unpackhi_epi32(l, m);\r\n                                                ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1081:1: error: inlining failed in call to always_inline ‘__m256i _mm256_permute2x128_si256(__m256i, __m256i, int)’: target specific option mismatch\r\n _mm256_permute2x128_si256 (__m256i __X, __m256i __Y, const int __M)\r\n ^\r\nsrc/func/lookup.cpp:76:62: error: called from here\r\n     const auto lo1 = _mm256_permute2x128_si256(lo0, hi0, 0x20);\r\n                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1081:1: error: inlining failed in call to always_inline ‘__m256i _mm256_permute2x128_si256(__m256i, __m256i, int)’: target specific option mismatch\r\n _mm256_permute2x128_si256 (__m256i __X, __m256i __Y, const int __M)\r\n ^\r\nsrc/func/lookup.cpp:77:62: error: called from here\r\n     const auto hi1 = _mm256_permute2x128_si256(lo0, hi0, 0x31);\r\n                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:900:1: error: inlining failed in call to always_inline ‘void _mm256_storeu_si256(__m256i*, __m256i)’: target specific option mismatch\r\n _mm256_storeu_si256 (__m256i *__P, __m256i __A)\r\n ^\r\nsrc/func/lookup.cpp:78:78: error: called from here\r\n     _mm256_storeu_si256(reinterpret_cast<__m256i*>(out_ptr + 2 * i + 0), lo1);\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:900:1: error: inlining failed in call to always_inline ‘void _mm256_storeu_si256(__m256i*, __m256i)’: target specific option mismatch\r\n _mm256_storeu_si256 (__m256i *__P, __m256i __A)\r\n ^\r\nsrc/func/lookup.cpp:79:78: error: called from here\r\n     _mm256_storeu_si256(reinterpret_cast<__m256i*>(out_ptr + 2 * i + 8), hi1);\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1285:1: error: inlining failed in call to always_inline ‘__m256 _mm256_set1_ps(float)’: target specific option mismatch\r\n _mm256_set1_ps (float __A)\r\n ^\r\nsrc/func/lookup.cpp:43:43: error: called from here\r\n   const auto coeff = _mm256_set1_ps(255.0f);\r\n                                           ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1285:1: error: inlining failed in call to always_inline ‘__m256 _mm256_set1_ps(float)’: target specific option mismatch\r\n _mm256_set1_ps (float __A)\r\n ^\r\nsrc/func/lookup.cpp:43:43: error: called from here\r\n   const auto coeff = _mm256_set1_ps(255.0f);\r\n                                           ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1451:1: error: inlining failed in call to always_inline ‘__m256 _mm256_castps128_ps256(__m128)’: target specific option mismatch\r\n _mm256_castps128_ps256 (__m128 __A)\r\n ^\r\nsrc/func/lookup.cpp:45:78: error: called from here\r\n     const auto vl0 = _mm256_castps128_ps256(_mm_loadu_ps(in_ptr + 3 * i +  0));\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1451:1: error: inlining failed in call to always_inline ‘__m256 _mm256_castps128_ps256(__m128)’: target specific option mismatch\r\n _mm256_castps128_ps256 (__m128 __A)\r\n ^\r\nsrc/func/lookup.cpp:46:78: error: called from here\r\n     const auto vl1 = _mm256_castps128_ps256(_mm_loadu_ps(in_ptr + 3 * i +  4));\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:1451:1: error: inlining failed in call to always_inline ‘__m256 _mm256_castps128_ps256(__m128)’: target specific option mismatch\r\n _mm256_castps128_ps256 (__m128 __A)\r\n ^\r\nsrc/func/lookup.cpp:47:78: error: called from here\r\n     const auto vl2 = _mm256_castps128_ps256(_mm_loadu_ps(in_ptr + 3 * i +  8));\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:734:1: error: inlining failed in call to always_inline ‘__m256 _mm256_insertf128_ps(__m256, __m128, int)’: target specific option mismatch\r\n _mm256_insertf128_ps (__m256 __X, __m128 __Y, const int __O)\r\n ^\r\nsrc/func/lookup.cpp:51:53: error: called from here\r\n     const auto v0 = _mm256_insertf128_ps(vl0, vh0, 1);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:734:1: error: inlining failed in call to always_inline ‘__m256 _mm256_insertf128_ps(__m256, __m128, int)’: target specific option mismatch\r\n _mm256_insertf128_ps (__m256 __X, __m128 __Y, const int __O)\r\n ^\r\nsrc/func/lookup.cpp:52:53: error: called from here\r\n     const auto v1 = _mm256_insertf128_ps(vl1, vh1, 1);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:734:1: error: inlining failed in call to always_inline ‘__m256 _mm256_insertf128_ps(__m256, __m128, int)’: target specific option mismatch\r\n _mm256_insertf128_ps (__m256 __X, __m128 __Y, const int __O)\r\n ^\r\nsrc/func/lookup.cpp:53:53: error: called from here\r\n     const auto v2 = _mm256_insertf128_ps(vl2, vh2, 1);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:54:72: error: called from here\r\n     const auto tmp0 = _mm256_shuffle_ps(v1, v2, _MM_SHUFFLE(2, 1, 3, 2));\r\n                                                                        ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:55:72: error: called from here\r\n     const auto tmp1 = _mm256_shuffle_ps(v0, v1, _MM_SHUFFLE(1, 0, 2, 1));\r\n                                                                        ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:56:71: error: called from here\r\n     const auto r = _mm256_shuffle_ps(v0, tmp0, _MM_SHUFFLE(2, 0, 3, 0));\r\n                                                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:57:73: error: called from here\r\n     const auto g = _mm256_shuffle_ps(tmp1, tmp0, _MM_SHUFFLE(3, 1, 2, 0));\r\n                                                                         ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:332:1: error: inlining failed in call to always_inline ‘__m256 _mm256_shuffle_ps(__m256, __m256, int)’: target specific option mismatch\r\n _mm256_shuffle_ps (__m256 __A, __m256 __B, const int __mask)\r\n ^\r\nsrc/func/lookup.cpp:58:71: error: called from here\r\n     const auto b = _mm256_shuffle_ps(tmp1, v2, _MM_SHUFFLE(3, 0, 3, 1));\r\n                                                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:454:1: error: inlining failed in call to always_inline ‘__m256i _mm256_cvtps_epi32(__m256)’: target specific option mismatch\r\n _mm256_cvtps_epi32 (__m256 __A)\r\n ^\r\nsrc/func/lookup.cpp:59:63: error: called from here\r\n     const auto ri = _mm256_cvtps_epi32(_mm256_mul_ps(r, coeff));\r\n                                                               ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:306:1: error: inlining failed in call to always_inline ‘__m256 _mm256_mul_ps(__m256, __m256)’: target specific option mismatch\r\n _mm256_mul_ps (__m256 __A, __m256 __B)\r\n ^\r\nsrc/func/lookup.cpp:59:39: error: called from here\r\n     const auto ri = _mm256_cvtps_epi32(_mm256_mul_ps(r, coeff));\r\n                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:454:1: error: inlining failed in call to always_inline ‘__m256i _mm256_cvtps_epi32(__m256)’: target specific option mismatch\r\n _mm256_cvtps_epi32 (__m256 __A)\r\n ^\r\nsrc/func/lookup.cpp:60:63: error: called from here\r\n     const auto gi = _mm256_cvtps_epi32(_mm256_mul_ps(g, coeff));\r\n                                                               ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:306:1: error: inlining failed in call to always_inline ‘__m256 _mm256_mul_ps(__m256, __m256)’: target specific option mismatch\r\n _mm256_mul_ps (__m256 __A, __m256 __B)\r\n ^\r\nsrc/func/lookup.cpp:60:39: error: called from here\r\n     const auto gi = _mm256_cvtps_epi32(_mm256_mul_ps(g, coeff));\r\n                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:454:1: error: inlining failed in call to always_inline ‘__m256i _mm256_cvtps_epi32(__m256)’: target specific option mismatch\r\n _mm256_cvtps_epi32 (__m256 __A)\r\n ^\r\nsrc/func/lookup.cpp:61:63: error: called from here\r\n     const auto bi = _mm256_cvtps_epi32(_mm256_mul_ps(b, coeff));\r\n                                                               ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:306:1: error: inlining failed in call to always_inline ‘__m256 _mm256_mul_ps(__m256, __m256)’: target specific option mismatch\r\n _mm256_mul_ps (__m256 __A, __m256 __B)\r\n ^\r\nsrc/func/lookup.cpp:61:39: error: called from here\r\n     const auto bi = _mm256_cvtps_epi32(_mm256_mul_ps(b, coeff));\r\n                                       ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:62:92: error: called from here\r\n     const auto lr = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(lsb_ptr), ri, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:63:92: error: called from here\r\n     const auto lg = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(lsb_ptr), gi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:64:92: error: called from here\r\n     const auto lb = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(lsb_ptr), bi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:65:92: error: called from here\r\n     const auto mr = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(msb_ptr), ri, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:66:92: error: called from here\r\n     const auto mg = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(msb_ptr), gi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1593:1: error: inlining failed in call to always_inline ‘__m256i _mm256_i32gather_epi32(const int*, __m256i, int)’: target specific option mismatch\r\n _mm256_i32gather_epi32 (int const *__base, __m256i __index, const int __scale)\r\n ^\r\nsrc/func/lookup.cpp:67:92: error: called from here\r\n     const auto mb = _mm256_i32gather_epi32(reinterpret_cast<const int32_t*>(msb_ptr), bi, 4);\r\n                                                                                            ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:68:53: error: called from here\r\n     const auto shifted_lg = _mm256_slli_epi32(lg, 10);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:69:53: error: called from here\r\n     const auto shifted_lb = _mm256_slli_epi32(lb, 20);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:71:53: error: called from here\r\n     const auto shifted_mg = _mm256_slli_epi32(mg, 10);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:682:1: error: inlining failed in call to always_inline ‘__m256i _mm256_slli_epi32(__m256i, int)’: target specific option mismatch\r\n _mm256_slli_epi32 (__m256i __A, int __B)\r\n ^\r\nsrc/func/lookup.cpp:72:53: error: called from here\r\n     const auto shifted_mb = _mm256_slli_epi32(mb, 20);\r\n                                                     ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:899:1: error: inlining failed in call to always_inline ‘__m256i _mm256_unpacklo_epi32(__m256i, __m256i)’: target specific option mismatch\r\n _mm256_unpacklo_epi32 (__m256i __A, __m256i __B)\r\n ^\r\nsrc/func/lookup.cpp:74:48: error: called from here\r\n     const auto lo0 = _mm256_unpacklo_epi32(l, m);\r\n                                                ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:871:1: error: inlining failed in call to always_inline ‘__m256i _mm256_unpackhi_epi32(__m256i, __m256i)’: target specific option mismatch\r\n _mm256_unpackhi_epi32 (__m256i __A, __m256i __B)\r\n ^\r\nsrc/func/lookup.cpp:75:48: error: called from here\r\n     const auto hi0 = _mm256_unpackhi_epi32(l, m);\r\n                                                ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1081:1: error: inlining failed in call to always_inline ‘__m256i _mm256_permute2x128_si256(__m256i, __m256i, int)’: target specific option mismatch\r\n _mm256_permute2x128_si256 (__m256i __X, __m256i __Y, const int __M)\r\n ^\r\nsrc/func/lookup.cpp:76:62: error: called from here\r\n     const auto lo1 = _mm256_permute2x128_si256(lo0, hi0, 0x20);\r\n                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:43:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avx2intrin.h:1081:1: error: inlining failed in call to always_inline ‘__m256i _mm256_permute2x128_si256(__m256i, __m256i, int)’: target specific option mismatch\r\n _mm256_permute2x128_si256 (__m256i __X, __m256i __Y, const int __M)\r\n ^\r\nsrc/func/lookup.cpp:77:62: error: called from here\r\n     const auto hi1 = _mm256_permute2x128_si256(lo0, hi0, 0x31);\r\n                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:900:1: error: inlining failed in call to always_inline ‘void _mm256_storeu_si256(__m256i*, __m256i)’: target specific option mismatch\r\n _mm256_storeu_si256 (__m256i *__P, __m256i __A)\r\n ^\r\nsrc/func/lookup.cpp:78:78: error: called from here\r\n     _mm256_storeu_si256(reinterpret_cast<__m256i*>(out_ptr + 2 * i + 0), lo1);\r\n                                                                              ^\r\nIn file included from /usr/lib/gcc/x86_64-linux-gnu/5/include/immintrin.h:41:0,\r\n                 from /usr/lib/gcc/x86_64-linux-gnu/5/include/x86intrin.h:46,\r\n                 from src/func/lookup.cpp:20:\r\n/usr/lib/gcc/x86_64-linux-gnu/5/include/avxintrin.h:900:1: error: inlining failed in call to always_inline ‘void _mm256_storeu_si256(__m256i*, __m256i)’: target specific option mismatch\r\n _mm256_storeu_si256 (__m256i *__P, __m256i __A)\r\n ^\r\nsrc/func/lookup.cpp:79:78: error: called from here\r\n     _mm256_storeu_si256(reinterpret_cast<__m256i*>(out_ptr + 2 * i + 8), hi1);\r\n                                                                              ^\r\nMakefile:238: recipe for target 'src/func/lookup.o' failed\r\nmake: *** [src/func/lookup.o] Error 1\r\n```","closed_by":{"login":"hadusam","id":12394960,"node_id":"MDQ6VXNlcjEyMzk0OTYw","avatar_url":"https://avatars.githubusercontent.com/u/12394960?v=4","gravatar_id":"","url":"https://api.github.com/users/hadusam","html_url":"https://github.com/hadusam","followers_url":"https://api.github.com/users/hadusam/followers","following_url":"https://api.github.com/users/hadusam/following{/other_user}","gists_url":"https://api.github.com/users/hadusam/gists{/gist_id}","starred_url":"https://api.github.com/users/hadusam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hadusam/subscriptions","organizations_url":"https://api.github.com/users/hadusam/orgs","repos_url":"https://api.github.com/users/hadusam/repos","events_url":"https://api.github.com/users/hadusam/events{/privacy}","received_events_url":"https://api.github.com/users/hadusam/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/blue-oil/blueoil/issues/757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/blue-oil/blueoil/issues/757/timeline","performed_via_github_app":null,"state_reason":"completed"}