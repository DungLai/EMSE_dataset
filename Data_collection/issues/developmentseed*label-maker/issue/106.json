{"url":"https://api.github.com/repos/developmentseed/label-maker/issues/106","repository_url":"https://api.github.com/repos/developmentseed/label-maker","labels_url":"https://api.github.com/repos/developmentseed/label-maker/issues/106/labels{/name}","comments_url":"https://api.github.com/repos/developmentseed/label-maker/issues/106/comments","events_url":"https://api.github.com/repos/developmentseed/label-maker/issues/106/events","html_url":"https://github.com/developmentseed/label-maker/issues/106","id":351892032,"node_id":"MDU6SXNzdWUzNTE4OTIwMzI=","number":106,"title":"Missing QA tiles create empty labels at country boundaries","user":{"login":"joshwapiano","id":12254579,"node_id":"MDQ6VXNlcjEyMjU0NTc5","avatar_url":"https://avatars.githubusercontent.com/u/12254579?v=4","gravatar_id":"","url":"https://api.github.com/users/joshwapiano","html_url":"https://github.com/joshwapiano","followers_url":"https://api.github.com/users/joshwapiano/followers","following_url":"https://api.github.com/users/joshwapiano/following{/other_user}","gists_url":"https://api.github.com/users/joshwapiano/gists{/gist_id}","starred_url":"https://api.github.com/users/joshwapiano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshwapiano/subscriptions","organizations_url":"https://api.github.com/users/joshwapiano/orgs","repos_url":"https://api.github.com/users/joshwapiano/repos","events_url":"https://api.github.com/users/joshwapiano/events{/privacy}","received_events_url":"https://api.github.com/users/joshwapiano/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-08-19T10:31:12Z","updated_at":"2018-09-03T20:34:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"After seeing really poor results in my ResNet50 I have manually inspected the data and labels and it appears that the background images label_maker is producing are labelled almost randomly.\r\n\r\nHere's the config that I'm using:\r\n```json\r\n{\r\n  \"country\": \"singapore\",\r\n  \"bounding_box\": [103.5917,1.132909,104.10712,1.487815],\r\n  \"zoom\": 14,\r\n  \"classes\": [{ \"name\": \"human construction\", \"filter\": [\"any\", [\"has\", \"man_made\"], [\"has\", \"military\"], [\"has\", \"building\"], [\"has\", \"aerialway\"], [\"has\", \"aeroway\"], [\"in\", \"landuse\", \"allotments\", \"brownfield\", \"cemetery\", \"commercial\", \"construction\", \"depot\", \"farmland\", \"farmyard\", \"garages\", \"greenhouse_horticulture\", \"industrial\", \"landfill\", \"military\", \"orchard\", \"plant_nursery\", \"port\", \"quarry\", \"railway\", \"recreation_ground\", \"religious\", \"residential\", \"retail\", \"village_green\", \"vineyard\"] ] } ],\r\n  \"imagery\": \"http://a.tiles.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.jpg?access_token=###(removed)\",\r\n  \"background_ratio\": 1,\r\n  \"ml_type\": \"classification\"\r\n}\r\n```\r\nEssentially what I've attempted to do in the above 'classes' is to identify tiles with any sign of human activity.\r\nAt that zoom level around 300 images are packaged in to data.npz.\r\nOnce we have the data.npz file a quick inspection of some of the imagery with the following code (I used a Jupyter Notebook) shows a high proportion of the images are labelled as not in the class above despite very clearly containing man made structures.\r\n\r\n```python\r\nimport numpy as np\r\nimport os\r\n# load data\r\nnpz = np.load('final_singa/data.npz')\r\nx_train = npz['x_train']\r\ny_train = npz['y_train']\r\nx_test = npz['x_test']\r\ny_test = npz['y_test']\r\n\r\n# check out labels for first 25 images:\r\nfor i in range(0,25):\r\n    print('row:',i)\r\n    fig = plt.subplots(nrows=1, ncols=1, figsize=(10, 10))\r\n    plt.imshow(x_train[i])\r\n    if y_train[i][0] == 1:\r\n        plt.title(str('No man made'))\r\n    else:\r\n        plt.title(str('Yes man made'))\r\n    plt.tight_layout\r\n    plt.show()\r\n    plt.pause(0.0001)\r\n```\r\n\r\nI also tried at zoom level 15 and the same issue exists.\r\nI'm wondering a few things:\r\nIs the class I'm using too complex to use label-maker for this purpose?\r\nIs the OSM tiling simply unreliable?\r\nIs there a bug in label maker?\r\nAm I using background_ratio incorrectly?\r\nAm I making a stupid mistake somewhere?\r\n\r\nAny advice greatly appreciated!\r\n\r\nThanks\r\nJosh","closed_by":null,"reactions":{"url":"https://api.github.com/repos/developmentseed/label-maker/issues/106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/developmentseed/label-maker/issues/106/timeline","performed_via_github_app":null,"state_reason":null}