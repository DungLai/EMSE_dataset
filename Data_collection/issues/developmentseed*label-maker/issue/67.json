{"url":"https://api.github.com/repos/developmentseed/label-maker/issues/67","repository_url":"https://api.github.com/repos/developmentseed/label-maker","labels_url":"https://api.github.com/repos/developmentseed/label-maker/issues/67/labels{/name}","comments_url":"https://api.github.com/repos/developmentseed/label-maker/issues/67/comments","events_url":"https://api.github.com/repos/developmentseed/label-maker/issues/67/events","html_url":"https://github.com/developmentseed/label-maker/issues/67","id":313701895,"node_id":"MDU6SXNzdWUzMTM3MDE4OTU=","number":67,"title":"About example: workthrough-tensorflow-object-detection","user":{"login":"bobleegogogo","id":33456076,"node_id":"MDQ6VXNlcjMzNDU2MDc2","avatar_url":"https://avatars.githubusercontent.com/u/33456076?v=4","gravatar_id":"","url":"https://api.github.com/users/bobleegogogo","html_url":"https://github.com/bobleegogogo","followers_url":"https://api.github.com/users/bobleegogogo/followers","following_url":"https://api.github.com/users/bobleegogogo/following{/other_user}","gists_url":"https://api.github.com/users/bobleegogogo/gists{/gist_id}","starred_url":"https://api.github.com/users/bobleegogogo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobleegogogo/subscriptions","organizations_url":"https://api.github.com/users/bobleegogogo/orgs","repos_url":"https://api.github.com/users/bobleegogogo/repos","events_url":"https://api.github.com/users/bobleegogogo/events{/privacy}","received_events_url":"https://api.github.com/users/bobleegogogo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-04-12T12:17:52Z","updated_at":"2018-04-17T12:32:35Z","closed_at":"2018-04-17T12:32:35Z","author_association":"NONE","active_lock_reason":null,"body":"Hello there,\r\n          I make this new issue because I got some question about the train and test samples split steps in this example. For the demo area of Mexico, the area of interest consist of 227 tiles in total, so if my understanding is right that, this total 227 tiles should be split into 181 training samples and 46 test samples (using 0,8 split index). But it seem the output using tf_records_generation.py from the example is not like this.\r\n           I have a look on the code for tf_records_generation.py:\r\n```\r\nfor tile in tiles:\r\n        bboxes = labels[tile].tolist()\r\n        width = 256\r\n        height = 256\r\n        if bboxes:\r\n            for bbox in bboxes:\r\n                if bbox[4] == 1:\r\n                    cl_str = \"building\"\r\n                    bbox = [max(0, min(255, x)) for x in bbox[0:4]]\r\n                    y = [\"{}.jpg\".format(tile), width, height, cl_str, bbox[0], bbox[1], bbox[2], bbox[3]]\r\n                    tf_tiles_info.append(y)\r\n\r\n    split_index = int(len(tf_tiles_info) * 0.8)\r\n    column_name = ['filename', 'width', 'height', 'class', 'xmin', 'ymin', 'xmax', 'ymax']\r\n    df = pd.DataFrame(tf_tiles_info, columns=column_name)\r\n    # shuffle the dataframe\r\n    df = df.sample(frac=1)\r\n    train_df = df[:split_index]\r\n    test_df = df[split_index:]\r\n``` \r\nsplit_index = int(len(tf_tiles_info) * 0.8), this split here is split by building features number, right ? From my point of view, we have to split the total tiles and then as well as the building features in those tiles. Otherwise, the test tiles can not be promising to be independent of the training tiles, and the results of test make no sense anymore. If I did some mistakes here or I understand wrong, please feel free to point out.\r\n\r\n\r\nBest; \r\n\r\nHao\r\n\r\n\r\n","closed_by":{"login":"Geoyi","id":14057932,"node_id":"MDQ6VXNlcjE0MDU3OTMy","avatar_url":"https://avatars.githubusercontent.com/u/14057932?v=4","gravatar_id":"","url":"https://api.github.com/users/Geoyi","html_url":"https://github.com/Geoyi","followers_url":"https://api.github.com/users/Geoyi/followers","following_url":"https://api.github.com/users/Geoyi/following{/other_user}","gists_url":"https://api.github.com/users/Geoyi/gists{/gist_id}","starred_url":"https://api.github.com/users/Geoyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Geoyi/subscriptions","organizations_url":"https://api.github.com/users/Geoyi/orgs","repos_url":"https://api.github.com/users/Geoyi/repos","events_url":"https://api.github.com/users/Geoyi/events{/privacy}","received_events_url":"https://api.github.com/users/Geoyi/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/developmentseed/label-maker/issues/67/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/developmentseed/label-maker/issues/67/timeline","performed_via_github_app":null,"state_reason":"completed"}