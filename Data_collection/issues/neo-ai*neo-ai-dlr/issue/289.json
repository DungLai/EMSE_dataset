{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/289","repository_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr","labels_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/289/labels{/name}","comments_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/289/comments","events_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/289/events","html_url":"https://github.com/neo-ai/neo-ai-dlr/issues/289","id":745305789,"node_id":"MDU6SXNzdWU3NDUzMDU3ODk=","number":289,"title":"clang 11 compilation errors - invalid application of 'sizeof' to a function type (gtest)","user":{"login":"apivovarov","id":218087,"node_id":"MDQ6VXNlcjIxODA4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/218087?v=4","gravatar_id":"","url":"https://api.github.com/users/apivovarov","html_url":"https://github.com/apivovarov","followers_url":"https://api.github.com/users/apivovarov/followers","following_url":"https://api.github.com/users/apivovarov/following{/other_user}","gists_url":"https://api.github.com/users/apivovarov/gists{/gist_id}","starred_url":"https://api.github.com/users/apivovarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apivovarov/subscriptions","organizations_url":"https://api.github.com/users/apivovarov/orgs","repos_url":"https://api.github.com/users/apivovarov/repos","events_url":"https://api.github.com/users/apivovarov/events{/privacy}","received_events_url":"https://api.github.com/users/apivovarov/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-11-18T03:55:18Z","updated_at":"2020-11-18T20:14:14Z","closed_at":"2020-11-18T20:14:06Z","author_association":"MEMBER","active_lock_reason":null,"body":"I tried to compile the project on MacOS 10.14, clang 11.0.0\r\n\r\nGot the following error:\r\n```\r\n$ make\r\n[  0%] Built target gtest\r\n[  6%] Built target gtest_main\r\n[ 12%] Built target dlr_dlsym_test\r\n[ 12%] Built target objtreelite_runtime\r\n[ 25%] Built target dmlc\r\n[ 25%] Built target treelite_runtime_static\r\n[ 37%] Built target objdlr\r\n[ 75%] Built target tvm_runtime_static\r\n[ 81%] Built target dlr\r\n[ 81%] Built target dlr_test\r\n[ 81%] Built target dlr_tvm_test\r\n[ 87%] Built target dlr_treelite_test\r\n[ 93%] Built target dlr_relayvm_test\r\n[ 93%] Built target dlr_pipeline_test\r\n[ 93%] Built target dlr_data_transform_test\r\n[ 93%] Built target dlr_pipeline_skl_xgb_test\r\n[ 93%] Building CXX object CMakeFiles/dlr_allocator_test.dir/tests/cpp/dlr_allocator_test.cc.o\r\nIn file included from /Users/root/workplace/neo-ai-dlr/tests/cpp/dlr_allocator_test.cc:3:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:63:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-param-test.h:188:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/internal/gtest-param-util.h:48:\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:157:32: error: invalid application of 'sizeof' to a function type\r\n                         sizeof(value), os);\r\n                               ^~~~~~~\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:246:56: note: in instantiation of member function\r\n      'testing::internal2::TypeWithoutFormatter<void *(unsigned long), testing::internal2::kOtherType>::PrintValue' requested here\r\n                                         kOtherType)>::PrintValue(x, &os);\r\n                                                       ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:287:7: note: in instantiation of function template specialization\r\n      'testing::internal2::operator<<<char, std::__1::char_traits<char>, void *(unsigned long)>' requested here\r\n  *os << value;\r\n      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:478:23: note: in instantiation of function template specialization\r\n      'testing_internal::DefaultPrintNonContainerTo<void *(unsigned long)>' requested here\r\n  ::testing_internal::DefaultPrintNonContainerTo(value, os);\r\n                      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:513:3: note: in instantiation of function template specialization\r\n      'testing::internal::DefaultPrintTo<void *(unsigned long)>' requested here\r\n  DefaultPrintTo(\r\n  ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:768:5: note: in instantiation of function template specialization\r\n      'testing::internal::PrintTo<void *(unsigned long)>' requested here\r\n    PrintTo(value, os);\r\n    ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:959:25: note: (skipping 4 contexts in backtrace; use\r\n      -ftemplate-backtrace-limit=0 to see all)\r\n  UniversalPrinter<T1>::Print(value, os);\r\n                        ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:389:39: note: in instantiation of member function\r\n      'testing::internal::FormatForComparison<void *(unsigned long), void *(*)(unsigned long)>::Format' requested here\r\n  return FormatForComparison<T1, T2>::Format(value);\r\n                                      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1434:20: note: in instantiation of function template specialization\r\n      'testing::internal::FormatForComparisonFailureMessage<void *(unsigned long), void *(*)(unsigned long)>' requested here\r\n                   FormatForComparisonFailureMessage(rhs, lhs),\r\n                   ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1448:10: note: in instantiation of function template specialization\r\n      'testing::internal::CmpHelperEQFailure<void *(*)(unsigned long), void *(unsigned long)>' requested here\r\n  return CmpHelperEQFailure(lhs_expression, rhs_expression, lhs, rhs);\r\n         ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1472:12: note: in instantiation of function template specialization\r\n      'testing::internal::CmpHelperEQ<void *(*)(unsigned long), void *(unsigned long)>' requested here\r\n    return CmpHelperEQ(lhs_expression, rhs_expression, lhs, rhs);\r\n           ^\r\n/Users/root/workplace/neo-ai-dlr/tests/cpp/dlr_allocator_test.cc:48:3: note: in instantiation of function template specialization\r\n      'testing::internal::EqHelper<false>::Compare<void *(*)(unsigned long), void *(unsigned long)>' requested here\r\n  EXPECT_EQ(dlr::DLRAllocatorFunctions::GetMallocFunction(), test_malloc);\r\n  ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1968:63: note: expanded from macro 'EXPECT_EQ'\r\n                      EqHelper<GTEST_IS_NULL_LITERAL_(val1)>::Compare, \\\r\n                                                              ^\r\nIn file included from /Users/root/workplace/neo-ai-dlr/tests/cpp/dlr_allocator_test.cc:3:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:63:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-param-test.h:188:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/internal/gtest-param-util.h:48:\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:157:32: error: invalid application of 'sizeof' to a function type\r\n                         sizeof(value), os);\r\n                               ^~~~~~~\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:246:56: note: in instantiation of member function\r\n      'testing::internal2::TypeWithoutFormatter<void (void *), testing::internal2::kOtherType>::PrintValue' requested here\r\n                                         kOtherType)>::PrintValue(x, &os);\r\n                                                       ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:287:7: note: in instantiation of function template specialization\r\n      'testing::internal2::operator<<<char, std::__1::char_traits<char>, void (void *)>' requested here\r\n  *os << value;\r\n      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:478:23: note: in instantiation of function template specialization\r\n      'testing_internal::DefaultPrintNonContainerTo<void (void *)>' requested here\r\n  ::testing_internal::DefaultPrintNonContainerTo(value, os);\r\n                      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:513:3: note: in instantiation of function template specialization\r\n      'testing::internal::DefaultPrintTo<void (void *)>' requested here\r\n  DefaultPrintTo(\r\n  ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:768:5: note: in instantiation of function template specialization\r\n      'testing::internal::PrintTo<void (void *)>' requested here\r\n    PrintTo(value, os);\r\n    ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:959:25: note: (skipping 4 contexts in backtrace; use\r\n      -ftemplate-backtrace-limit=0 to see all)\r\n  UniversalPrinter<T1>::Print(value, os);\r\n                        ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:389:39: note: in instantiation of member function\r\n      'testing::internal::FormatForComparison<void (void *), void (*)(void *)>::Format' requested here\r\n  return FormatForComparison<T1, T2>::Format(value);\r\n                                      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1434:20: note: in instantiation of function template specialization\r\n      'testing::internal::FormatForComparisonFailureMessage<void (void *), void (*)(void *)>' requested here\r\n                   FormatForComparisonFailureMessage(rhs, lhs),\r\n                   ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1448:10: note: in instantiation of function template specialization\r\n      'testing::internal::CmpHelperEQFailure<void (*)(void *), void (void *)>' requested here\r\n  return CmpHelperEQFailure(lhs_expression, rhs_expression, lhs, rhs);\r\n         ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1472:12: note: in instantiation of function template specialization\r\n      'testing::internal::CmpHelperEQ<void (*)(void *), void (void *)>' requested here\r\n    return CmpHelperEQ(lhs_expression, rhs_expression, lhs, rhs);\r\n           ^\r\n/Users/root/workplace/neo-ai-dlr/tests/cpp/dlr_allocator_test.cc:60:3: note: in instantiation of function template specialization\r\n      'testing::internal::EqHelper<false>::Compare<void (*)(void *), void (void *)>' requested here\r\n  EXPECT_EQ(dlr::DLRAllocatorFunctions::GetFreeFunction(), test_free);\r\n  ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1968:63: note: expanded from macro 'EXPECT_EQ'\r\n                      EqHelper<GTEST_IS_NULL_LITERAL_(val1)>::Compare, \\\r\n                                                              ^\r\nIn file included from /Users/root/workplace/neo-ai-dlr/tests/cpp/dlr_allocator_test.cc:3:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:63:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-param-test.h:188:\r\nIn file included from /Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/internal/gtest-param-util.h:48:\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:157:32: error: invalid application of 'sizeof' to a function type\r\n                         sizeof(value), os);\r\n                               ^~~~~~~\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:246:56: note: in instantiation of member function\r\n      'testing::internal2::TypeWithoutFormatter<void *(unsigned long, unsigned long), testing::internal2::kOtherType>::PrintValue' requested here\r\n                                         kOtherType)>::PrintValue(x, &os);\r\n                                                       ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:287:7: note: in instantiation of function template specialization\r\n      'testing::internal2::operator<<<char, std::__1::char_traits<char>, void *(unsigned long, unsigned long)>' requested here\r\n  *os << value;\r\n      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:478:23: note: in instantiation of function template specialization\r\n      'testing_internal::DefaultPrintNonContainerTo<void *(unsigned long, unsigned long)>' requested here\r\n  ::testing_internal::DefaultPrintNonContainerTo(value, os);\r\n                      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:513:3: note: in instantiation of function template specialization\r\n      'testing::internal::DefaultPrintTo<void *(unsigned long, unsigned long)>' requested here\r\n  DefaultPrintTo(\r\n  ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:768:5: note: in instantiation of function template specialization\r\n      'testing::internal::PrintTo<void *(unsigned long, unsigned long)>' requested here\r\n    PrintTo(value, os);\r\n    ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:959:25: note: (skipping 4 contexts in backtrace; use\r\n      -ftemplate-backtrace-limit=0 to see all)\r\n  UniversalPrinter<T1>::Print(value, os);\r\n                        ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest-printers.h:389:39: note: in instantiation of member function\r\n      'testing::internal::FormatForComparison<void *(unsigned long, unsigned long), void *(*)(unsigned long, unsigned long)>::Format' requested here\r\n  return FormatForComparison<T1, T2>::Format(value);\r\n                                      ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1434:20: note: in instantiation of function template specialization\r\n      'testing::internal::FormatForComparisonFailureMessage<void *(unsigned long, unsigned long), void *(*)(unsigned long, unsigned long)>' requested here\r\n                   FormatForComparisonFailureMessage(rhs, lhs),\r\n                   ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1448:10: note: in instantiation of function template specialization\r\n      'testing::internal::CmpHelperEQFailure<void *(*)(unsigned long, unsigned long), void *(unsigned long, unsigned long)>' requested here\r\n  return CmpHelperEQFailure(lhs_expression, rhs_expression, lhs, rhs);\r\n         ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1472:12: note: in instantiation of function template specialization\r\n      'testing::internal::CmpHelperEQ<void *(*)(unsigned long, unsigned long), void *(unsigned long, unsigned long)>' requested here\r\n    return CmpHelperEQ(lhs_expression, rhs_expression, lhs, rhs);\r\n           ^\r\n/Users/root/workplace/neo-ai-dlr/tests/cpp/dlr_allocator_test.cc:61:3: note: in instantiation of function template specialization\r\n      'testing::internal::EqHelper<false>::Compare<void *(*)(unsigned long, unsigned long), void *(unsigned long, unsigned long)>' requested here\r\n  EXPECT_EQ(dlr::DLRAllocatorFunctions::GetMemalignFunction(), test_memalign);\r\n  ^\r\n/Users/root/workplace/neo-ai-dlr/build/googletest/googletest-src/googletest/include/gtest/gtest.h:1968:63: note: expanded from macro 'EXPECT_EQ'\r\n                      EqHelper<GTEST_IS_NULL_LITERAL_(val1)>::Compare, \\\r\n                                                              ^\r\n3 errors generated.\r\nmake[2]: *** [CMakeFiles/dlr_allocator_test.dir/tests/cpp/dlr_allocator_test.cc.o] Error 1\r\nmake[1]: *** [CMakeFiles/dlr_allocator_test.dir/all] Error 2\r\nmake: *** [all] Error 2\r\nf45c8998e8eb:build root$ clang --version\r\nApple clang version 11.0.0 (clang-1100.0.33.17)\r\nTarget: x86_64-apple-darwin18.7.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```","closed_by":{"login":"apivovarov","id":218087,"node_id":"MDQ6VXNlcjIxODA4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/218087?v=4","gravatar_id":"","url":"https://api.github.com/users/apivovarov","html_url":"https://github.com/apivovarov","followers_url":"https://api.github.com/users/apivovarov/followers","following_url":"https://api.github.com/users/apivovarov/following{/other_user}","gists_url":"https://api.github.com/users/apivovarov/gists{/gist_id}","starred_url":"https://api.github.com/users/apivovarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apivovarov/subscriptions","organizations_url":"https://api.github.com/users/apivovarov/orgs","repos_url":"https://api.github.com/users/apivovarov/repos","events_url":"https://api.github.com/users/apivovarov/events{/privacy}","received_events_url":"https://api.github.com/users/apivovarov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/289/timeline","performed_via_github_app":null,"state_reason":"completed"}