{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/342","repository_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr","labels_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/342/labels{/name}","comments_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/342/comments","events_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/342/events","html_url":"https://github.com/neo-ai/neo-ai-dlr/issues/342","id":854016998,"node_id":"MDU6SXNzdWU4NTQwMTY5OTg=","number":342,"title":"\"make install\" is not supported (CMAKE_INSTALL_PREFIX)","user":{"login":"apivovarov","id":218087,"node_id":"MDQ6VXNlcjIxODA4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/218087?v=4","gravatar_id":"","url":"https://api.github.com/users/apivovarov","html_url":"https://github.com/apivovarov","followers_url":"https://api.github.com/users/apivovarov/followers","following_url":"https://api.github.com/users/apivovarov/following{/other_user}","gists_url":"https://api.github.com/users/apivovarov/gists{/gist_id}","starred_url":"https://api.github.com/users/apivovarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apivovarov/subscriptions","organizations_url":"https://api.github.com/users/apivovarov/orgs","repos_url":"https://api.github.com/users/apivovarov/repos","events_url":"https://api.github.com/users/apivovarov/events{/privacy}","received_events_url":"https://api.github.com/users/apivovarov/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-04-08T23:32:48Z","updated_at":"2021-04-21T06:53:35Z","closed_at":"2021-04-21T06:53:35Z","author_association":"MEMBER","active_lock_reason":null,"body":"Usually cmake projects allow to install target library/executable and header files to a particular folder specified in `CMAKE_INSTALL_PREFIX`.\r\n\r\nFor example:\r\n```\r\ncmake .. \\\r\n-DCMAKE_BUILD_TYPE=Release \\\r\n-DCMAKE_INSTALL_PREFIX=$HOME/aws-install \r\n\r\nmake\r\nmake install\r\n```\r\n\r\nCurrently `make install` does nothing.\r\n\r\nOnce DLR is installed other projects should be able to integrate DLR into their build process by pointing cmake to the folder where DLR and other libs/headers were installed (using `CMAKE_PREFIX_PATH`).\r\n\r\nFoo cmake project will use the following statements to use DLR:\r\n```\r\nfind_package(DLR REQUIRED)\r\n...\r\ntarget_link_libraries(foo PRIVATE DLR::DLR)\r\n```\r\nFoo project uses `CMAKE_PREFIX_PATH` to point to DLR install location\r\n```\r\ncmake .. \\\r\n-DCMAKE_PREFIX_PATH=\"$HOME/aws-install\"\r\n```\r\n\r\nWe can take `dmlc-core` as an example of correctly implemented `make install`.\r\n\r\nIt installs header files, `libdmlc.a` and `DMLCTargets.cmake` (needed for `find_package`)\r\n```\r\n$ cd neo-ai-dlr/build/3rdparty/treelite/dmlc-core\r\n$ make install\r\n[100%] Built target dmlc\r\nInstall the project...\r\n-- Install configuration: \"Release\"\r\n-- Installing: /home/alex/aws-install/include/dmlc\r\n-- Installing: /home/alex/aws-install/include/dmlc/build_config_default.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/thread_local.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/memory.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/memory_io.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/recordio.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/endian.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/thread_group.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/concurrentqueue.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/lua.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/io.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/parameter.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/serializer.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/base.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/common.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/threadediter.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/any.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/omp.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/timer.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/concurrency.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/optional.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/blockingconcurrentqueue.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/input_split_shuffle.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/data.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/registry.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/config.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/array_view.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/filesystem.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/strtonum.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/json.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/type_traits.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/logging.h\r\n-- Installing: /home/alex/aws-install/include/dmlc/build_config.h\r\n-- Installing: /home/alex/aws-install/lib/libdmlc.a\r\n-- Installing: /home/alex/aws-install/lib/cmake/dmlc/DMLCTargets.cmake\r\n-- Installing: /home/alex/aws-install/lib/cmake/dmlc/DMLCTargets-release.cmake\r\n-- Installing: /home/alex/aws-install/lib/cmake/dmlc/dmlc-config.cmake\r\n-- Installing: /home/alex/aws-install/lib/cmake/dmlc/dmlc-config-version.cmake\r\n```\r\n\r\n","closed_by":{"login":"apivovarov","id":218087,"node_id":"MDQ6VXNlcjIxODA4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/218087?v=4","gravatar_id":"","url":"https://api.github.com/users/apivovarov","html_url":"https://github.com/apivovarov","followers_url":"https://api.github.com/users/apivovarov/followers","following_url":"https://api.github.com/users/apivovarov/following{/other_user}","gists_url":"https://api.github.com/users/apivovarov/gists{/gist_id}","starred_url":"https://api.github.com/users/apivovarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apivovarov/subscriptions","organizations_url":"https://api.github.com/users/apivovarov/orgs","repos_url":"https://api.github.com/users/apivovarov/repos","events_url":"https://api.github.com/users/apivovarov/events{/privacy}","received_events_url":"https://api.github.com/users/apivovarov/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/342/timeline","performed_via_github_app":null,"state_reason":"completed"}