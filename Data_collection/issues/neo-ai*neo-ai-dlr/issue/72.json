{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/72","repository_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr","labels_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/72/labels{/name}","comments_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/72/comments","events_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/72/events","html_url":"https://github.com/neo-ai/neo-ai-dlr/issues/72","id":461174783,"node_id":"MDU6SXNzdWU0NjExNzQ3ODM=","number":72,"title":"Unable to load model on AWS P3 target","user":{"login":"markrogersjr","id":1095809,"node_id":"MDQ6VXNlcjEwOTU4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1095809?v=4","gravatar_id":"","url":"https://api.github.com/users/markrogersjr","html_url":"https://github.com/markrogersjr","followers_url":"https://api.github.com/users/markrogersjr/followers","following_url":"https://api.github.com/users/markrogersjr/following{/other_user}","gists_url":"https://api.github.com/users/markrogersjr/gists{/gist_id}","starred_url":"https://api.github.com/users/markrogersjr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markrogersjr/subscriptions","organizations_url":"https://api.github.com/users/markrogersjr/orgs","repos_url":"https://api.github.com/users/markrogersjr/repos","events_url":"https://api.github.com/users/markrogersjr/events{/privacy}","received_events_url":"https://api.github.com/users/markrogersjr/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-06-26T20:49:34Z","updated_at":"2019-06-26T20:51:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I get the following message when I try to load a model:\r\n```\r\n$ python\r\nPython 3.7.3 (default, Mar 27 2019, 22:11:17) \r\n[GCC 7.3.0] :: Anaconda, Inc. on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import dlr\r\n>>> m=dlr.DLRModel('inception_v3', dev_type='gpu')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/ubuntu/neo-ai-dlr/python/dlr/api.py\", line 66, in __init__\r\n    from .dlr_model import DLRModelImpl\r\n  File \"/home/ubuntu/neo-ai-dlr/python/dlr/dlr_model.py\", line 64, in <module>\r\n    _LIB = _load_lib()\r\n  File \"/home/ubuntu/neo-ai-dlr/python/dlr/dlr_model.py\", line 59, in _load_lib\r\n    'Error message(s): {}\\n'.format(os_error_list))\r\ndlr.dlr_model.DLRError: DLR library (libdlr.so) could not be loaded.\r\nLikely causes:\r\n  * OpenMP runtime is not installed (vcomp140.dll or libgomp-1.dll for Windows, libgomp.so for UNIX-like OSes)\r\n  * You are running 32-bit Python on a 64-bit OS\r\nError message(s): ['libcudart.so.10.0: cannot open shared object file: No such file or directory']\r\n```\r\nThe file `libdlr.so` appears to depend on multiple versions of CUDA, namely, 9.0 and 10.0:\r\n```\r\n$ ldd lib/libdlr.so \r\n\tlinux-vdso.so.1 =>  (0x00007ffd66dfb000)\r\n\tlibcudart.so.10.0 => /usr/local/cuda/lib64/libcudart.so.10.0 (0x00007f4d54db2000)\r\n\tlibcuda.so.1 => /usr/lib/x86_64-linux-gnu/libcuda.so.1 (0x00007f4d53c5b000)\r\n\tlibnvinfer.so.4 => /home/ubuntu/TensorRT-4.0.1.6/lib/libnvinfer.so.4 (0x00007f4d4df33000)\r\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f4d4dd2f000)\r\n\tlibstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f4d4d9ad000)\r\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f4d4d6a4000)\r\n\tlibgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f4d4d48e000)\r\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4d4d0c4000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f4d553a4000)\r\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f4d4cea7000)\r\n\tlibrt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f4d4cc9f000)\r\n\tlibnvidia-fatbinaryloader.so.418.40.04 => /usr/lib/x86_64-linux-gnu/libnvidia-fatbinaryloader.so.418.40.04 (0x00007f4d4ca51000)\r\n\tlibcudnn.so.7 => /usr/local/cuda/lib64/libcudnn.so.7 (0x00007f4d37c2a000)\r\n\tlibcublas.so.9.0 => not found\r\n\tlibcudart.so.9.0 => not found\r\n```\r\nSince `/usr/local/cuda` points to `/usr/local/cuda-10.0`, the latter two dependencies `libcublas.so.9.0` and `libcudart.so.9.0` cannot be detected. The only fix available is to copy these two files into `/usr/local/cuda/lib64` and run `ldconfig`.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/72/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/72/timeline","performed_via_github_app":null,"state_reason":null}