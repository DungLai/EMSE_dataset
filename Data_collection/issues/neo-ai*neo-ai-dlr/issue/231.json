{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/231","repository_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr","labels_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/231/labels{/name}","comments_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/231/comments","events_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/231/events","html_url":"https://github.com/neo-ai/neo-ai-dlr/issues/231","id":687027349,"node_id":"MDU6SXNzdWU2ODcwMjczNDk=","number":231,"title":"error running DLR with target=opencl","user":{"login":"vadim-SX","id":69468463,"node_id":"MDQ6VXNlcjY5NDY4NDYz","avatar_url":"https://avatars.githubusercontent.com/u/69468463?v=4","gravatar_id":"","url":"https://api.github.com/users/vadim-SX","html_url":"https://github.com/vadim-SX","followers_url":"https://api.github.com/users/vadim-SX/followers","following_url":"https://api.github.com/users/vadim-SX/following{/other_user}","gists_url":"https://api.github.com/users/vadim-SX/gists{/gist_id}","starred_url":"https://api.github.com/users/vadim-SX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vadim-SX/subscriptions","organizations_url":"https://api.github.com/users/vadim-SX/orgs","repos_url":"https://api.github.com/users/vadim-SX/repos","events_url":"https://api.github.com/users/vadim-SX/events{/privacy}","received_events_url":"https://api.github.com/users/vadim-SX/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-27T07:52:28Z","updated_at":"2020-11-06T23:30:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\nI compiled dlr with USE_OPENCL  = ON\r\nand when trying to run TVM model that compiled with target opencl\r\nI get the next error :\r\nTVMError: Check failed: f != nullptr: Loader of opencl(runtime.module.loadbinary_opencl) is not presented.\r\n\r\nI am running the code on laptop that have i7 cpu and nvidia GPU\r\n\r\nthe co,piltation was done with\r\n` target = 'opencl'\r\n  target_host = \"llvm\" #-device=arm_cpu\r\n\r\n  print('target:', target)\r\n  print(\"Compiling...\")\r\n\r\n  with relay.build_config(opt_level=3):\r\n    graph, lib, params = relay.build(func, target, target_host, params=params)\r\n`\r\n\r\nwhen running clinfo:\r\n`clinfo \r\nNumber of platforms                               1\r\n  Platform Name                                   NVIDIA CUDA\r\n  Platform Vendor                                 NVIDIA Corporation\r\n  Platform Version                                OpenCL 1.2 CUDA 10.2.178\r\n  Platform Profile                                FULL_PROFILE\r\n  Platform Extensions                             cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_fp64 cl_khr_byte_addressable_store cl_khr_icd cl_khr_gl_sharing cl_nv_compiler_options cl_nv_device_attribute_query cl_nv_pragma_unroll cl_nv_copy_opts cl_nv_create_buffer cl_khr_int64_base_atomics cl_khr_int64_extended_atomics\r\n  Platform Extensions function suffix             NV\r\n\r\n  Platform Name                                   NVIDIA CUDA\r\nNumber of devices                                 1\r\n  Device Name                                     GeForce RTX 2070\r\n  Device Vendor                                   NVIDIA Corporation\r\n  Device Vendor ID                                0x10de\r\n  Device Version                                  OpenCL 1.2 CUDA\r\n  Driver Version                                  440.95.01\r\n  Device OpenCL C Version                         OpenCL C 1.2 \r\n  Device Type                                     GPU\r\n  Device Topology (NV)                            PCI-E, 01:00.0\r\n  Device Profile                                  FULL_PROFILE\r\n  Device Available                                Yes\r\n  Compiler Available                              Yes\r\n  Linker Available                                Yes\r\n  Max compute units                               36\r\n  Max clock frequency                             1440MHz\r\n  Compute Capability (NV)                         7.5\r\n  Device Partition                                (core)\r\n    Max number of sub-devices                     1\r\n    Supported partition types                     None\r\n  Max work item dimensions                        3\r\n  Max work item sizes                             1024x1024x64\r\n  Max work group size                             1024\r\n  Preferred work group size multiple              32\r\n  Warp size (NV)                                  32\r\n  Preferred / native vector sizes                 \r\n    char                                                 1 / 1       \r\n    short                                                1 / 1       \r\n    int                                                  1 / 1       \r\n    long                                                 1 / 1       \r\n    half                                                 0 / 0        (n/a)\r\n    float                                                1 / 1       \r\n    double                                               1 / 1        (cl_khr_fp64)\r\n  Half-precision Floating-point support           (n/a)\r\n  Single-precision Floating-point support         (core)\r\n    Denormals                                     Yes\r\n    Infinity and NANs                             Yes\r\n    Round to nearest                              Yes\r\n    Round to zero                                 Yes\r\n    Round to infinity                             Yes\r\n    IEEE754-2008 fused multiply-add               Yes\r\n    Support is emulated in software               No\r\n    Correctly-rounded divide and sqrt operations  Yes\r\n  Double-precision Floating-point support         (cl_khr_fp64)\r\n    Denormals                                     Yes\r\n    Infinity and NANs                             Yes\r\n    Round to nearest                              Yes\r\n    Round to zero                                 Yes\r\n    Round to infinity                             Yes\r\n    IEEE754-2008 fused multiply-add               Yes\r\n    Support is emulated in software               No\r\n  Address bits                                    64, Little-Endian\r\n  Global memory size                              8370061312 (7.795GiB)\r\n  Error Correction support                        No\r\n  Max memory allocation                           2092515328 (1.949GiB)\r\n  Unified memory for Host and Device              No\r\n  Integrated memory (NV)                          No\r\n  Minimum alignment for any data type             128 bytes\r\n  Alignment of base address                       4096 bits (512 bytes)\r\n  Global Memory cache type                        Read/Write\r\n  Global Memory cache size                        1179648 (1.125MiB)\r\n  Global Memory cache line size                   128 bytes\r\n  Image support                                   Yes\r\n    Max number of samplers per kernel             32\r\n    Max size for 1D images from buffer            268435456 pixels\r\n    Max 1D or 2D image array size                 2048 images\r\n    Max 2D image size                             32768x32768 pixels\r\n    Max 3D image size                             16384x16384x16384 pixels\r\n    Max number of read image args                 256\r\n    Max number of write image args                32\r\n  Local memory type                               Local\r\n  Local memory size                               49152 (48KiB)\r\n  Registers per block (NV)                        65536\r\n  Max number of constant args                     9\r\n  Max constant buffer size                        65536 (64KiB)\r\n  Max size of kernel argument                     4352 (4.25KiB)\r\n  Queue properties                                \r\n    Out-of-order execution                        Yes\r\n    Profiling                                     Yes\r\n  Prefer user sync for interop                    No\r\n  Profiling timer resolution                      1000ns\r\n  Execution capabilities                          \r\n    Run OpenCL kernels                            Yes\r\n    Run native kernels                            No\r\n    Kernel execution timeout (NV)                 Yes\r\n  Concurrent copy and kernel execution (NV)       Yes\r\n    Number of async copy engines                  3\r\n  printf() buffer size                            1048576 (1024KiB)\r\n  Built-in kernels                                \r\n  Device Extensions                               cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_fp64 cl_khr_byte_addressable_store cl_khr_icd cl_khr_gl_sharing cl_nv_compiler_options cl_nv_device_attribute_query cl_nv_pragma_unroll cl_nv_copy_opts cl_nv_create_buffer cl_khr_int64_base_atomics cl_khr_int64_extended_atomics\r\n\r\nNULL platform behavior\r\n  clGetPlatformInfo(NULL, CL_PLATFORM_NAME, ...)  NVIDIA CUDA\r\n  clGetDeviceIDs(NULL, CL_DEVICE_TYPE_ALL, ...)   Success [NV]\r\n  clCreateContext(NULL, ...) [default]            Success [NV]\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_DEFAULT)  No platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CPU)  No devices found in platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_GPU)  No platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ACCELERATOR)  No devices found in platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CUSTOM)  Invalid device type for platform\r\n  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ALL)  No platform\r\n\r\nICD loader properties\r\n  ICD loader Name                                 OpenCL ICD Loader\r\n  ICD loader Vendor                               OCL Icd free software\r\n  ICD loader Version                              2.2.11\r\n  ICD loader Profile                              OpenCL 2.1\r\n`\r\n\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/neo-ai/neo-ai-dlr/issues/231/timeline","performed_via_github_app":null,"state_reason":null}