{"url":"https://api.github.com/repos/jasonwei20/eda_nlp/issues/23","repository_url":"https://api.github.com/repos/jasonwei20/eda_nlp","labels_url":"https://api.github.com/repos/jasonwei20/eda_nlp/issues/23/labels{/name}","comments_url":"https://api.github.com/repos/jasonwei20/eda_nlp/issues/23/comments","events_url":"https://api.github.com/repos/jasonwei20/eda_nlp/issues/23/events","html_url":"https://github.com/jasonwei20/eda_nlp/issues/23","id":596039019,"node_id":"MDU6SXNzdWU1OTYwMzkwMTk=","number":23,"title":"Performance on trec dataset drops significantly after using eda","user":{"login":"RenShuhuai-Andy","id":30052148,"node_id":"MDQ6VXNlcjMwMDUyMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/30052148?v=4","gravatar_id":"","url":"https://api.github.com/users/RenShuhuai-Andy","html_url":"https://github.com/RenShuhuai-Andy","followers_url":"https://api.github.com/users/RenShuhuai-Andy/followers","following_url":"https://api.github.com/users/RenShuhuai-Andy/following{/other_user}","gists_url":"https://api.github.com/users/RenShuhuai-Andy/gists{/gist_id}","starred_url":"https://api.github.com/users/RenShuhuai-Andy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RenShuhuai-Andy/subscriptions","organizations_url":"https://api.github.com/users/RenShuhuai-Andy/orgs","repos_url":"https://api.github.com/users/RenShuhuai-Andy/repos","events_url":"https://api.github.com/users/RenShuhuai-Andy/events{/privacy}","received_events_url":"https://api.github.com/users/RenShuhuai-Andy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-04-07T17:39:14Z","updated_at":"2020-04-10T08:31:52Z","closed_at":"2020-04-10T08:31:52Z","author_association":"NONE","active_lock_reason":null,"body":"**model**: BertForSequenceClassification\r\n**train_set size**: 120 of 5452, using `sklearn.model_selection.StratifiedShuffleSplit`  to keep classes corresponds to the original distribution of train set:\r\n```\r\ndef split(self, examples, test_size, train_size, n_splits=2, split_idx=0):\r\n    label_map = {\"ENTY\": 0, \"DESC\": 1, 'LOC': 2, 'ABBR': 3, 'NUM': 4, 'HUM': 5}\r\n    labels = [label_map[e.label] for e in examples]\r\n    kf = StratifiedShuffleSplit(n_splits=n_splits, test_size=test_size, train_size=train_size, random_state=C.get()['seed'])\r\n    kf = kf.split(list(range(len(examples))), labels)\r\n    for _ in range(split_idx + 1):  # split_idx equal to cv_fold. this loop is used to get i-th fold\r\n        train_idx, valid_idx = next(kf)\r\n    train_dev_set = np.array(examples)\r\n    return list(train_dev_set[train_idx]), list(train_dev_set[valid_idx])\r\n```\r\n**valid_set size**: 180\r\n**test_set size**: all(500)\r\n**alpha**: 0.1\r\n\r\n**augment code**:\r\n```\r\nlabels = labels.repeat(n_aug)\r\naug_texts = [eda(text, alpha_sr=alpha, alpha_ri=alpha, alpha_rs=alpha, p_rd=alpha, num_aug=n_aug - 1) for text in texts]\r\nassert len(labels)==len(aug_texts)\r\n```\r\nI have checked that the labels and augmented texts are matched correctly.\r\n\r\n**result when `n_aug=16`** (the average of three experiments) :\r\n- before augment: 0.7975\r\n- after augment: 0.7657\r\n\r\n**result when `n_aug=8`** (the average of three experiments) :\r\n- before augment: 0.813\r\n- after augment: 0.7044\r\n\r\nIt's very confusing. In my experiment, it seems that eda performs well when texts are long (such as `imdb` dataset), but has poor performce in datasets like `trec` and `sst5`. Did I make any mistakes in the experiments setting?","closed_by":{"login":"RenShuhuai-Andy","id":30052148,"node_id":"MDQ6VXNlcjMwMDUyMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/30052148?v=4","gravatar_id":"","url":"https://api.github.com/users/RenShuhuai-Andy","html_url":"https://github.com/RenShuhuai-Andy","followers_url":"https://api.github.com/users/RenShuhuai-Andy/followers","following_url":"https://api.github.com/users/RenShuhuai-Andy/following{/other_user}","gists_url":"https://api.github.com/users/RenShuhuai-Andy/gists{/gist_id}","starred_url":"https://api.github.com/users/RenShuhuai-Andy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RenShuhuai-Andy/subscriptions","organizations_url":"https://api.github.com/users/RenShuhuai-Andy/orgs","repos_url":"https://api.github.com/users/RenShuhuai-Andy/repos","events_url":"https://api.github.com/users/RenShuhuai-Andy/events{/privacy}","received_events_url":"https://api.github.com/users/RenShuhuai-Andy/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jasonwei20/eda_nlp/issues/23/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jasonwei20/eda_nlp/issues/23/timeline","performed_via_github_app":null,"state_reason":"completed"}