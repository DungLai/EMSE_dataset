{"url":"https://api.github.com/repos/beringresearch/ivis/issues/82","repository_url":"https://api.github.com/repos/beringresearch/ivis","labels_url":"https://api.github.com/repos/beringresearch/ivis/issues/82/labels{/name}","comments_url":"https://api.github.com/repos/beringresearch/ivis/issues/82/comments","events_url":"https://api.github.com/repos/beringresearch/ivis/issues/82/events","html_url":"https://github.com/beringresearch/ivis/issues/82","id":769614375,"node_id":"MDU6SXNzdWU3Njk2MTQzNzU=","number":82,"title":"Ivis produces different embeddings from a saved model across multiple tensorflow sessions","user":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false},"labels":[{"id":1022681132,"node_id":"MDU6TGFiZWwxMDIyNjgxMTMy","url":"https://api.github.com/repos/beringresearch/ivis/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-12-17T07:05:19Z","updated_at":"2020-12-17T13:12:01Z","closed_at":"2020-12-17T13:12:01Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"Running `ivis.transform` on a pre-built model across different tensorflow sessions produces different embeddings. Embeddings are consistent within a session, but once tf session is restarted and model is reloaded, embeddings change.\r\n\r\nThis was introduced in 2.0 upgrade as earlier versions of ivis behaved as expected. Additionally, this only seems to affect larger datasets. I don't see this in iris dataset, but in 500k+ row dataset it's present.\r\n\r\nThings I checked that seem to be ok:\r\n\r\n**model loading**: model weights, optimizer weights all appear to be consistent between sessions. So this isn't an issue with incorrect initialisation\r\n\r\n**toggling GPU training**: the bug seems to be present when running both CPU and GPU transformations.\r\n\r\n**data normalization**: data normalization stays consistent i.e. input data is not altered between sessions.","closed_by":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/82/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/beringresearch/ivis/issues/82/timeline","performed_via_github_app":null,"state_reason":"completed"}