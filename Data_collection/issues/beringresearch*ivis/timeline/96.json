[{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/851456193","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-851456193","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":851456193,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTQ1NjE5Mw==","user":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false},"created_at":"2021-05-31T12:25:53Z","updated_at":"2021-05-31T12:27:19Z","author_association":"COLLABORATOR","body":"Thanks very much for the example - I was able to reproduce the issue and looking into it.\r\n\r\nMeanwhile, setting `precompute=False` in the Ivis constructur seems to do the trick:\r\n\r\n```python\r\npipeline_with_ivis = pipeline.Pipeline([\r\n        (\"normalize\", preprocessing.MinMaxScaler()),\r\n        (\"project\", ivis.Ivis(precompute=False)),\r\n        (\"classify\", ensemble.RandomForestClassifier()),\r\n    ], memory=tempfile.mkdtemp())\r\n```\r\nOne thing to keep in mind is that passing the X and y pair into ivis will force it into supervised dimensionality reduction (https://bering-ivis.readthedocs.io/en/latest/supervised.html). If you want to disable the effect of supervision on ivis embeddings, you should set `supervision_weight=0` in the constructor. This is a side-effect of scikit learn pipelines that propagate (X,y) pair to fit methods of all elements of the pipeline.\r\n\r\nYou could also configure it during your grid search - would be cool to see its impacts on the downstream classifier!\r\n\r\nLet us know if this solves the issue.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/851456193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/851485734","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-851485734","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":851485734,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTQ4NTczNA==","user":{"login":"Szubie","id":13461031,"node_id":"MDQ6VXNlcjEzNDYxMDMx","avatar_url":"https://avatars.githubusercontent.com/u/13461031?v=4","gravatar_id":"","url":"https://api.github.com/users/Szubie","html_url":"https://github.com/Szubie","followers_url":"https://api.github.com/users/Szubie/followers","following_url":"https://api.github.com/users/Szubie/following{/other_user}","gists_url":"https://api.github.com/users/Szubie/gists{/gist_id}","starred_url":"https://api.github.com/users/Szubie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Szubie/subscriptions","organizations_url":"https://api.github.com/users/Szubie/orgs","repos_url":"https://api.github.com/users/Szubie/repos","events_url":"https://api.github.com/users/Szubie/events{/privacy}","received_events_url":"https://api.github.com/users/Szubie/received_events","type":"User","site_admin":false},"created_at":"2021-05-31T13:17:12Z","updated_at":"2021-05-31T13:17:12Z","author_association":"COLLABORATOR","body":"As luck would have it, I have been looking into removing the multiprocessing dependency in ivis in favor of threading recently. I've pushed a commit to master with the changes (https://github.com/beringresearch/ivis/commit/a666e75cbbacbe9a1fa0051fcb7508d67b2069d0). It seems to fix this issue when \"precompute\" is True.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/851485734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Szubie","id":13461031,"node_id":"MDQ6VXNlcjEzNDYxMDMx","avatar_url":"https://avatars.githubusercontent.com/u/13461031?v=4","gravatar_id":"","url":"https://api.github.com/users/Szubie","html_url":"https://github.com/Szubie","followers_url":"https://api.github.com/users/Szubie/followers","following_url":"https://api.github.com/users/Szubie/following{/other_user}","gists_url":"https://api.github.com/users/Szubie/gists{/gist_id}","starred_url":"https://api.github.com/users/Szubie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Szubie/subscriptions","organizations_url":"https://api.github.com/users/Szubie/orgs","repos_url":"https://api.github.com/users/Szubie/repos","events_url":"https://api.github.com/users/Szubie/events{/privacy}","received_events_url":"https://api.github.com/users/Szubie/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/851626531","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-851626531","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":851626531,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTYyNjUzMQ==","user":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false},"created_at":"2021-05-31T18:22:45Z","updated_at":"2021-05-31T18:22:45Z","author_association":"CONTRIBUTOR","body":"> Meanwhile, setting precompute=False in the Ivis constructur seems to do the trick:\r\n\r\nHmm, I confess it never occurred to me to play with this constructor parameter. I will test out your suggestion later and see how it works out on my end as a palliative measure.\r\n\r\n> One thing to keep in mind is that passing the X and y pair into ivis will force it into supervised dimensionality reduction (https://bering-ivis.readthedocs.io/en/latest/supervised.html). If you want to disable the effect of supervision on ivis embeddings, you should set `supervision_weight=0` in the constructor.\r\n\r\nI am aware of that, and for my particular use case the use of supervised DR is intentional. Still, it is nice to know that there is a way to make `Ivis` ignore the labels without affecting the API (which would affect, consequently, `Pipeline` and `GridSearchCV`).\r\n\r\n> As luck would have it, I have been looking into removing the multiprocessing dependency in ivis in favor of threading recently. I've pushed a commit to master with the changes (a666e75). It seems to fix this issue when \"precompute\" is True.\r\n\r\nNice! I will test `Ivis` with your commit later as well and see how it works out on my end.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/851626531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/852390953","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-852390953","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":852390953,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjM5MDk1Mw==","user":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false},"created_at":"2021-06-01T19:31:35Z","updated_at":"2021-06-01T19:31:35Z","author_association":"CONTRIBUTOR","body":"Just a quick update: I am still testing `ivis` on the minimal reproducible example, as well as on a pipeline I have been working on. I still managed to find some errors, but they seem to happen just when I am running `GridSearchCV` with `n_jobs=-1` inside a `docker` container. I am just ascertaining that this is a `docker` problem, and not a `ivis` one.\r\n\r\nIf it serves of anything, here is the error I have been seeing under `docker`. It seems to happen whenever I run `GridSearchCV` with `n_jobs != 1`. It runs for some time without any problems, and then this happens:\r\n\r\n```\r\nfree(): invalid pointer\r\nexception calling callback for <Future at 0x7f907840c220 state=finished raised TerminatedWorkerError>\r\nTraceback (most recent call last):\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/externals/loky/_base.py\", line 625, in _invoke_callbacks\r\n    callback(self)\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/parallel.py\", line 359, in __call__\r\n    self.parallel.dispatch_next()\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/parallel.py\", line 792, in dispatch_next\r\n    if not self.dispatch_one_batch(self._original_iterator):\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/parallel.py\", line 859, in dispatch_one_batch\r\n    self._dispatch(tasks)\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/parallel.py\", line 777, in _dispatch\r\n    job = self._backend.apply_async(batch, callback=cb)\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/_parallel_backends.py\", line 531, in apply_async\r\n    future = self._workers.submit(SafeFunction(func))\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/externals/loky/reusable_executor.py\", line 177, in submit\r\n    return super(_ReusablePoolExecutor, self).submit(\r\n  File \"/opt/venv/lib/python3.9/site-packages/joblib/externals/loky/process_executor.py\", line 1102, in submit\r\n    raise self._flags.broken\r\njoblib.externals.loky.process_executor.TerminatedWorkerError: A worker process managed by the executor was unexpectedly terminated. This could be caused by a segmentation fault while calling the function or by an excessive memory usage causing the Operating System to kill the worker.\r\nThe exit codes of the workers are {SIGABRT(-6)}\r\n```\r\n\r\nI tried to find more information on this on the web, but the only thing I was able to find that resembles this problem was [this unanswered question on StackOverflow](https://stackoverflow.com/questions/63176805/caught-signals-sigabrt-6-through-subprocess-in-docker). It seems to happen whenever the `Pipeline` includes `ivis`, and it does not seem to happen with other projectors (e.g., UMAP, PCA) on the few tests I made, which makes me wonder if `ivis` plays a part on this. If pertinent, I will produce another minimal reproducible example involving `docker` for you to try and reproduce this error on your end.\r\n\r\nAs I said, I am still running tests, so take everything I said above with a pinch of salt. And before I forget, thank you for the diligence with which you assisted me in solving this issue. I really appreciate it.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/852390953/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/852644138","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-852644138","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":852644138,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjY0NDEzOA==","user":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false},"created_at":"2021-06-02T01:38:08Z","updated_at":"2021-06-02T01:38:08Z","author_association":"CONTRIBUTOR","body":"After some testing, I have established that\r\n\r\n- `ivis.Ivis` works fine natively (i.e., without `docker`), but running the same script within `docker` tends to raise the aforementioned error; and\r\n- this behavior was not perceived in any other case, no matter how intensive and parallelized the workload was.\r\n\r\nI managed to reproduce this problem using the same code above, but using a `docker` image built from the following `Dockerfile`:\r\n\r\n```\r\n# ----------------------------------- #\r\n# BUILD IMAGE STAGE                   #\r\n# ----------------------------------- #\r\nFROM python:3.9.5-slim as build-image\r\n# ----------------------------------- #\r\n\r\n\r\n\r\n# install required binaries\r\nRUN apt-get update \\\r\n&& apt-get install --no-install-recommends -y build-essential git\r\n\r\n# create python virtual environment and upgrade pip\r\nRUN python3 -m venv /opt/venv \\\r\n&& /opt/venv/bin/python3 -m pip install --upgrade pip --no-cache-dir\r\n\r\n# use created python virtual environment\r\nENV PATH=\"/opt/venv/bin:$PATH\"\r\n\r\n# install wheel and cmake\r\nRUN pip install wheel --no-cache-dir \\\r\n&& pip install cmake --no-cache-dir\r\n\r\n# copy requirements.txt to container\r\nCOPY requirements.txt .\r\n\r\n# install required python modules\r\nRUN pip install -r requirements.txt --no-cache-dir\r\n\r\n\r\n\r\n# ---------------------------------------- #\r\n# PRODUCTION IMAGE STAGE                   #\r\n# ---------------------------------------- #\r\nFROM python:3.9.5-slim as production-image\r\n# ---------------------------------------- #\r\n\r\n\r\n\r\n# copy previously created python virtual environment over\r\nCOPY --from=build-image /opt/venv /opt/venv\r\n\r\n# use copied python virtual environment\r\nENV PATH=\"/opt/venv/bin:$PATH\"\r\n\r\n# persist files\r\nADD . .\r\n```\r\n\r\nI do not know if this is a problem within `ivis`, because it runs natively without problems. My current belief is that this is happening by some kind of OS protection (either Windows or the Linux distro within the container) that is killing some processes.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/852644138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/852897828","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-852897828","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":852897828,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mjg5NzgyOA==","user":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false},"created_at":"2021-06-02T10:07:06Z","updated_at":"2021-06-02T10:07:06Z","author_association":"COLLABORATOR","body":"Can I just clarify if you're being this issue whilst running Ivis inside Docker, or does it also throw this error when running natively on Windows?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/852897828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853134290","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-853134290","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":853134290,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzEzNDI5MA==","user":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false},"created_at":"2021-06-02T15:40:05Z","updated_at":"2021-06-02T15:40:05Z","author_association":"CONTRIBUTOR","body":"So far, it only happened inside `docker`. It runs for some seconds and gets terminated with this `SIGABRT` error being shown. \n\nRunning natively on Windows (i.e., without `docker`), no matter how heavy or long the script is, it runs without issues.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853134290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853293792","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-853293792","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":853293792,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzI5Mzc5Mg==","user":{"login":"Szubie","id":13461031,"node_id":"MDQ6VXNlcjEzNDYxMDMx","avatar_url":"https://avatars.githubusercontent.com/u/13461031?v=4","gravatar_id":"","url":"https://api.github.com/users/Szubie","html_url":"https://github.com/Szubie","followers_url":"https://api.github.com/users/Szubie/followers","following_url":"https://api.github.com/users/Szubie/following{/other_user}","gists_url":"https://api.github.com/users/Szubie/gists{/gist_id}","starred_url":"https://api.github.com/users/Szubie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Szubie/subscriptions","organizations_url":"https://api.github.com/users/Szubie/orgs","repos_url":"https://api.github.com/users/Szubie/repos","events_url":"https://api.github.com/users/Szubie/events{/privacy}","received_events_url":"https://api.github.com/users/Szubie/received_events","type":"User","site_admin":false},"created_at":"2021-06-02T18:44:50Z","updated_at":"2021-06-02T19:14:07Z","author_association":"COLLABORATOR","body":"Hi, this appears to be an issue when using n_jobs=-1 for some scikit-learn objects. \r\nFor some discussion on similar issues see this issue: https://github.com/scikit-learn-contrib/skope-rules/issues/18\r\n\r\nI changed n_jobs from -1 to -2 as suggested in that thread and it fixed the issue for me at least on the basic iris example you provided above. Not sure if the same fix will work on your machine as well, but worth a try.\r\n\r\nThis may also be useful, regarding someone running into issues when nesting multiple `n_parallel=-1` arguments within scikit-learn pipelines: https://stackoverflow.com/questions/60782660/issues-with-multiple-jobs-when-using-randomizedsearchcv (might be best to avoid).\r\n\r\n\r\nOh yeah, and make sure the Docker container has enough memory provided to it to run the task. If on Windows, the default is quite low. https://stackoverflow.com/questions/43460770/docker-windows-container-memory-limit","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853293792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Szubie","id":13461031,"node_id":"MDQ6VXNlcjEzNDYxMDMx","avatar_url":"https://avatars.githubusercontent.com/u/13461031?v=4","gravatar_id":"","url":"https://api.github.com/users/Szubie","html_url":"https://github.com/Szubie","followers_url":"https://api.github.com/users/Szubie/followers","following_url":"https://api.github.com/users/Szubie/following{/other_user}","gists_url":"https://api.github.com/users/Szubie/gists{/gist_id}","starred_url":"https://api.github.com/users/Szubie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Szubie/subscriptions","organizations_url":"https://api.github.com/users/Szubie/orgs","repos_url":"https://api.github.com/users/Szubie/repos","events_url":"https://api.github.com/users/Szubie/events{/privacy}","received_events_url":"https://api.github.com/users/Szubie/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853327916","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-853327916","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":853327916,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzMyNzkxNg==","user":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false},"created_at":"2021-06-02T19:31:46Z","updated_at":"2021-06-02T19:31:46Z","author_association":"COLLABORATOR","body":"Echo the above point around docker and RAM. I've seen a similar error in docker when container runs out of allocated RAM. GridSearchCV by default will copy data across all processes, causing a RAM explosion (https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html). Reducing `pre_dispatch` (default value is n_jobs) can help, but giving docker more RAM does the trick, at least for me.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853327916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853479318","html_url":"https://github.com/beringresearch/ivis/issues/96#issuecomment-853479318","issue_url":"https://api.github.com/repos/beringresearch/ivis/issues/96","id":853479318,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzQ3OTMxOA==","user":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false},"created_at":"2021-06-03T00:56:18Z","updated_at":"2021-06-03T00:56:18Z","author_association":"CONTRIBUTOR","body":"Hmm, it never occurred to me that this could be memory. Thank you for the clarification on this matter and for solving the issue with `GridSearchCV`, I really appreciate it. Feel free to close this issue if there is nothing else to be added.","reactions":{"url":"https://api.github.com/repos/beringresearch/ivis/issues/comments/853479318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imatheussm","id":4311541,"node_id":"MDQ6VXNlcjQzMTE1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/4311541?v=4","gravatar_id":"","url":"https://api.github.com/users/imatheussm","html_url":"https://github.com/imatheussm","followers_url":"https://api.github.com/users/imatheussm/followers","following_url":"https://api.github.com/users/imatheussm/following{/other_user}","gists_url":"https://api.github.com/users/imatheussm/gists{/gist_id}","starred_url":"https://api.github.com/users/imatheussm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imatheussm/subscriptions","organizations_url":"https://api.github.com/users/imatheussm/orgs","repos_url":"https://api.github.com/users/imatheussm/repos","events_url":"https://api.github.com/users/imatheussm/events{/privacy}","received_events_url":"https://api.github.com/users/imatheussm/received_events","type":"User","site_admin":false}},{"id":4835435942,"node_id":"MDExOkNsb3NlZEV2ZW50NDgzNTQzNTk0Mg==","url":"https://api.github.com/repos/beringresearch/ivis/issues/events/4835435942","actor":{"login":"idroz","id":12413294,"node_id":"MDQ6VXNlcjEyNDEzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/12413294?v=4","gravatar_id":"","url":"https://api.github.com/users/idroz","html_url":"https://github.com/idroz","followers_url":"https://api.github.com/users/idroz/followers","following_url":"https://api.github.com/users/idroz/following{/other_user}","gists_url":"https://api.github.com/users/idroz/gists{/gist_id}","starred_url":"https://api.github.com/users/idroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/idroz/subscriptions","organizations_url":"https://api.github.com/users/idroz/orgs","repos_url":"https://api.github.com/users/idroz/repos","events_url":"https://api.github.com/users/idroz/events{/privacy}","received_events_url":"https://api.github.com/users/idroz/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-06-03T05:50:38Z","state_reason":null,"performed_via_github_app":null}]