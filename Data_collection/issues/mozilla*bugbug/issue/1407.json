{"url":"https://api.github.com/repos/mozilla/bugbug/issues/1407","repository_url":"https://api.github.com/repos/mozilla/bugbug","labels_url":"https://api.github.com/repos/mozilla/bugbug/issues/1407/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/bugbug/issues/1407/comments","events_url":"https://api.github.com/repos/mozilla/bugbug/issues/1407/events","html_url":"https://github.com/mozilla/bugbug/issues/1407","id":582649941,"node_id":"MDU6SXNzdWU1ODI2NDk5NDE=","number":1407,"title":"Improve startup time of the HTTP service","user":{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false},"labels":[{"id":1334014691,"node_id":"MDU6TGFiZWwxMzM0MDE0Njkx","url":"https://api.github.com/repos/mozilla/bugbug/labels/http_service","name":"http_service","color":"fbca04","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-03-16T23:08:55Z","updated_at":"2020-05-05T14:15:01Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"A few salient points from a recent boot:\r\n> 2020-03-16T22:39:03.719283+00:00 app[worker.1]: 2020-03-16 22:39:03,719:INFO:bugbug_http.boot:Cloning mozilla autoland in /tmp/bugbug-hg...\r\n> 2020-03-16T22:48:12.213391+00:00 app[worker.1]: 2020-03-16 22:48:12,212:INFO:bugbug.repository:/tmp/bugbug-hg cloned\r\n> 2020-03-16T22:48:46.349848+00:00 app[worker.1]: 2020-03-16 22:48:46,349:INFO:bugbug.db:Downloading https://community-tc.services.mozilla.com/api/index/v1/task/project.relman.bugbug.data_test_label_scheduling_history.latest/artifacts/public/past_failures_label.lmdb.tar.zst to data/past_failures_label.lmdb.tar.zst\r\n> 2020-03-16T22:53:24.014113+00:00 app[worker.1]: 2020-03-16 22:53:24,013:INFO:bugbug.db:Downloading https://community-tc.services.mozilla.com/api/index/v1/task/project.relman.bugbug.data_test_group_scheduling_history.latest/artifacts/public/past_failures_group.lmdb.tar.zst to data/past_failures_group.lmdb.tar.zst\r\n> 2020-03-16T22:57:46.413116+00:00 app[worker.1]: 2020-03-16 22:57:46,412:INFO:bugbug.db:Downloading https://community-tc.services.mozilla.com/api/index/v1/task/project.relman.bugbug.data_test_group_scheduling_history.latest/artifacts/public/touched_together.lmdb.tar.zst to data/touched_together.lmdb.tar.zst\r\n> 2020-03-16T22:57:52.000413+00:00 app[worker.1]: 2020-03-16 22:57:51,999:INFO:bugbug.db:Downloading https://community-tc.services.mozilla.com/api/index/v1/task/project.relman.bugbug.data_commits.latest/artifacts/public/commits.json.zst to data/commits.json.zst\r\n> 2020-03-16T22:58:12.540850+00:00 app[worker.1]: 2020-03-16 22:58:12,540:INFO:bugbug.db:Downloading https://community-tc.services.mozilla.com/api/index/v1/task/project.relman.bugbug.data_commits.latest/artifacts/public/commit_experiences.lmdb.tar.zst to data/commit_experiences.lmdb.tar.zst\r\n> 2020-03-16T22:58:34.752856+00:00 app[worker.1]: 2020-03-16 22:58:34,752:INFO:bugbug_http.boot:Browsing all commits...\r\n> 2020-03-16T22:58:57.860614+00:00 app[worker.1]: 2020-03-16 22:58:57,860:INFO:bugbug_http.boot:Updating commits DB...\r\n> 2020-03-16T23:01:03.544914+00:00 app[worker.1]: 2020-03-16 23:01:03,544:INFO:root:Recreating the 'component' model in cache\r\n> 2020-03-16T23:01:07.701857+00:00 app[worker.1]: 2020-03-16 23:01:07,701:INFO:bugbug_http.boot:Worker boot done\r\n\r\nWe are spending 9 minutes for the clone.\r\nWe are spending 10 minutes to download and extract the DBs.\r\nWe are spending 2 minutes updating the commits DB.\r\n\r\nPossibly one or both of #1331 and #1344 might help.","closed_by":null,"reactions":{"url":"https://api.github.com/repos/mozilla/bugbug/issues/1407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/bugbug/issues/1407/timeline","performed_via_github_app":null,"state_reason":null}