{"url":"https://api.github.com/repos/mozilla/bugbug/issues/1738","repository_url":"https://api.github.com/repos/mozilla/bugbug","labels_url":"https://api.github.com/repos/mozilla/bugbug/issues/1738/labels{/name}","comments_url":"https://api.github.com/repos/mozilla/bugbug/issues/1738/comments","events_url":"https://api.github.com/repos/mozilla/bugbug/issues/1738/events","html_url":"https://github.com/mozilla/bugbug/issues/1738","id":668201817,"node_id":"MDU6SXNzdWU2NjgyMDE4MTc=","number":1738,"title":"AttributeError: 'IndexError' object has no attribute 'tb_frame' in Pulse Listener","user":{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false},"labels":[{"id":864568507,"node_id":"MDU6TGFiZWw4NjQ1Njg1MDc=","url":"https://api.github.com/repos/mozilla/bugbug/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1334014691,"node_id":"MDU6TGFiZWwxMzM0MDE0Njkx","url":"https://api.github.com/repos/mozilla/bugbug/labels/http_service","name":"http_service","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false},"assignees":[{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2020-07-29T22:11:49Z","updated_at":"2020-07-30T14:29:31Z","closed_at":"2020-07-30T14:29:31Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"```\r\nJul 29 09:37:20 bugbug app/web.1: Traceback (most recent call last): \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/bugbug_http/listener.py\", line 69, in _on_message \r\nJul 29 09:37:20 bugbug app/web.1:     user = body[\"payload\"][\"data\"][\"pushlog_pushes\"][0][\"user\"] \r\nJul 29 09:37:20 bugbug app/web.1: IndexError: list index out of range \r\nJul 29 09:37:20 bugbug app/web.1: During handling of the above exception, another exception occurred: \r\nJul 29 09:37:20 bugbug app/web.1: Traceback (most recent call last): \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/bin/bugbug-http-pulse-listener\", line 8, in <module> \r\nJul 29 09:37:20 bugbug app/web.1:     sys.exit(main()) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/bugbug_http/listener.py\", line 94, in main \r\nJul 29 09:37:20 bugbug app/web.1:     consumer.run() \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/mixins.py\", line 175, in run \r\nJul 29 09:37:20 bugbug app/web.1:     for _ in self.consume(limit=None, **kwargs): \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/mixins.py\", line 197, in consume \r\nJul 29 09:37:20 bugbug app/web.1:     conn.drain_events(timeout=safety_interval) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/connection.py\", line 324, in drain_events \r\nJul 29 09:37:20 bugbug app/web.1:     return self.transport.drain_events(self.connection, **kwargs) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/transport/pyamqp.py\", line 103, in drain_events \r\nJul 29 09:37:20 bugbug app/web.1:     return connection.drain_events(**kwargs) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/amqp/connection.py\", line 508, in drain_events \r\nJul 29 09:37:20 bugbug app/web.1:     while not self.blocking_read(timeout): \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/amqp/connection.py\", line 514, in blocking_read \r\nJul 29 09:37:20 bugbug app/web.1:     return self.on_inbound_frame(frame) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/amqp/method_framing.py\", line 79, in on_frame \r\nJul 29 09:37:20 bugbug app/web.1:     callback(channel, msg.frame_method, msg.frame_args, msg) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/amqp/connection.py\", line 520, in on_inbound_method \r\nJul 29 09:37:20 bugbug app/web.1:     return self.channels[channel_id].dispatch_method( \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/amqp/abstract_channel.py\", line 145, in dispatch_method \r\nJul 29 09:37:20 bugbug app/web.1:     listener(*args) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/amqp/channel.py\", line 1615, in _on_basic_deliver \r\nJul 29 09:37:20 bugbug app/web.1:     fun(msg) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/messaging.py\", line 624, in _receive_callback \r\nJul 29 09:37:20 bugbug app/web.1:     return on_m(message) if on_m else self.receive(decoded, message) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/messaging.py\", line 590, in receive \r\nJul 29 09:37:20 bugbug app/web.1:     [callback(body, message) for callback in callbacks] \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/kombu/messaging.py\", line 590, in <listcomp> \r\nJul 29 09:37:20 bugbug app/web.1:     [callback(body, message) for callback in callbacks] \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/site-packages/bugbug_http/listener.py\", line 82, in _on_message \r\nJul 29 09:37:20 bugbug app/web.1:     traceback.print_tb(e) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/traceback.py\", line 53, in print_tb \r\nJul 29 09:37:20 bugbug app/web.1:     print_list(extract_tb(tb, limit=limit), file=file) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/traceback.py\", line 72, in extract_tb \r\nJul 29 09:37:20 bugbug app/web.1:     return StackSummary.extract(walk_tb(tb), limit=limit) \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/traceback.py\", line 347, in extract \r\nJul 29 09:37:20 bugbug app/web.1:     for f, lineno in frame_gen: \r\nJul 29 09:37:20 bugbug app/web.1:   File \"/usr/local/lib/python3.8/traceback.py\", line 312, in walk_tb \r\nJul 29 09:37:20 bugbug app/web.1:     yield tb.tb_frame, tb.tb_lineno \r\nJul 29 09:37:20 bugbug app/web.1: AttributeError: 'IndexError' object has no attribute 'tb_frame' \r\n```\r\n\r\nThe pulse listener is killed and no longer listens for pushes.","closed_by":{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mozilla/bugbug/issues/1738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla/bugbug/issues/1738/timeline","performed_via_github_app":null,"state_reason":"completed"}