[{"url":"https://api.github.com/repos/mozilla/bugbug/issues/comments/487059750","html_url":"https://github.com/mozilla/bugbug/issues/315#issuecomment-487059750","issue_url":"https://api.github.com/repos/mozilla/bugbug/issues/315","id":487059750,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzA1OTc1MA==","user":{"login":"La0","id":101004,"node_id":"MDQ6VXNlcjEwMTAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/101004?v=4","gravatar_id":"","url":"https://api.github.com/users/La0","html_url":"https://github.com/La0","followers_url":"https://api.github.com/users/La0/followers","following_url":"https://api.github.com/users/La0/following{/other_user}","gists_url":"https://api.github.com/users/La0/gists{/gist_id}","starred_url":"https://api.github.com/users/La0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/La0/subscriptions","organizations_url":"https://api.github.com/users/La0/orgs","repos_url":"https://api.github.com/users/La0/repos","events_url":"https://api.github.com/users/La0/events{/privacy}","received_events_url":"https://api.github.com/users/La0/received_events","type":"User","site_admin":false},"created_at":"2019-04-26T13:38:06Z","updated_at":"2019-04-26T13:38:06Z","author_association":"CONTRIBUTOR","body":"Taskboot cannot use `docker-squash` for now anyway...","reactions":{"url":"https://api.github.com/repos/mozilla/bugbug/issues/comments/487059750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"La0","id":101004,"node_id":"MDQ6VXNlcjEwMTAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/101004?v=4","gravatar_id":"","url":"https://api.github.com/users/La0","html_url":"https://github.com/La0","followers_url":"https://api.github.com/users/La0/followers","following_url":"https://api.github.com/users/La0/following{/other_user}","gists_url":"https://api.github.com/users/La0/gists{/gist_id}","starred_url":"https://api.github.com/users/La0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/La0/subscriptions","organizations_url":"https://api.github.com/users/La0/orgs","repos_url":"https://api.github.com/users/La0/repos","events_url":"https://api.github.com/users/La0/events{/privacy}","received_events_url":"https://api.github.com/users/La0/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/bugbug/issues/comments/487060932","html_url":"https://github.com/mozilla/bugbug/issues/315#issuecomment-487060932","issue_url":"https://api.github.com/repos/mozilla/bugbug/issues/315","id":487060932,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzA2MDkzMg==","user":{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false},"created_at":"2019-04-26T13:41:23Z","updated_at":"2019-04-26T13:41:23Z","author_association":"COLLABORATOR","body":"We wouldn't need to squash with multistage builds","reactions":{"url":"https://api.github.com/repos/mozilla/bugbug/issues/comments/487060932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"marco-c","id":1616846,"node_id":"MDQ6VXNlcjE2MTY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1616846?v=4","gravatar_id":"","url":"https://api.github.com/users/marco-c","html_url":"https://github.com/marco-c","followers_url":"https://api.github.com/users/marco-c/followers","following_url":"https://api.github.com/users/marco-c/following{/other_user}","gists_url":"https://api.github.com/users/marco-c/gists{/gist_id}","starred_url":"https://api.github.com/users/marco-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marco-c/subscriptions","organizations_url":"https://api.github.com/users/marco-c/orgs","repos_url":"https://api.github.com/users/marco-c/repos","events_url":"https://api.github.com/users/marco-c/events{/privacy}","received_events_url":"https://api.github.com/users/marco-c/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/mozilla/bugbug/issues/comments/487060960","html_url":"https://github.com/mozilla/bugbug/issues/315#issuecomment-487060960","issue_url":"https://api.github.com/repos/mozilla/bugbug/issues/315","id":487060960,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzA2MDk2MA==","user":{"login":"La0","id":101004,"node_id":"MDQ6VXNlcjEwMTAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/101004?v=4","gravatar_id":"","url":"https://api.github.com/users/La0","html_url":"https://github.com/La0","followers_url":"https://api.github.com/users/La0/followers","following_url":"https://api.github.com/users/La0/following{/other_user}","gists_url":"https://api.github.com/users/La0/gists{/gist_id}","starred_url":"https://api.github.com/users/La0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/La0/subscriptions","organizations_url":"https://api.github.com/users/La0/orgs","repos_url":"https://api.github.com/users/La0/repos","events_url":"https://api.github.com/users/La0/events{/privacy}","received_events_url":"https://api.github.com/users/La0/received_events","type":"User","site_admin":false},"created_at":"2019-04-26T13:41:27Z","updated_at":"2019-04-26T13:41:27Z","author_association":"CONTRIBUTOR","body":"I had this version based on slim, but was not convinced by the size enhancements:\r\n\r\n```\r\n#syntax=docker/dockerfile:experimental\r\nARG PYTHON_VERSION=3.7.3-slim\r\n\r\nFROM python:${PYTHON_VERSION} as build\r\n\r\n# Install bugbug requirements as wheels\r\nWORKDIR /wheels\r\nCOPY requirements.txt /requirements.txt\r\nRUN apt-get update && \\\r\n                apt-get install -y gcc g++ && \\\r\n                pip wheel --disable-pip-version-check -r /requirements.txt && \\\r\n\r\n# Restart build from a slim image\r\nFROM python:${PYTHON_VERSION}\r\n\r\n# Import wheels\r\nCOPY --from=build /wheels /tmp/wheels\r\n\r\n# Setup bugbug with a bind RO mount\r\nRUN --mount=type=bind,target=/tmp/bugbug \\\r\n        apt-get update && \\\r\n        apt-get install libgomp1 && \\\r\n        pip install -f /tmp/wheels /tmp/bugbug && \\\r\n        rm -rf /tmp/wheels\r\n```","reactions":{"url":"https://api.github.com/repos/mozilla/bugbug/issues/comments/487060960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"La0","id":101004,"node_id":"MDQ6VXNlcjEwMTAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/101004?v=4","gravatar_id":"","url":"https://api.github.com/users/La0","html_url":"https://github.com/La0","followers_url":"https://api.github.com/users/La0/followers","following_url":"https://api.github.com/users/La0/following{/other_user}","gists_url":"https://api.github.com/users/La0/gists{/gist_id}","starred_url":"https://api.github.com/users/La0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/La0/subscriptions","organizations_url":"https://api.github.com/users/La0/orgs","repos_url":"https://api.github.com/users/La0/repos","events_url":"https://api.github.com/users/La0/events{/privacy}","received_events_url":"https://api.github.com/users/La0/received_events","type":"User","site_admin":false}}]