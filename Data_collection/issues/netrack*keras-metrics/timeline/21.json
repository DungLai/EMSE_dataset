[{"id":2020450467,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjAyMDQ1MDQ2Nw==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2020450467","actor":{"login":"michael-ziedalski","id":43689829,"node_id":"MDQ6VXNlcjQzNjg5ODI5","avatar_url":"https://avatars.githubusercontent.com/u/43689829?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-ziedalski","html_url":"https://github.com/michael-ziedalski","followers_url":"https://api.github.com/users/michael-ziedalski/followers","following_url":"https://api.github.com/users/michael-ziedalski/following{/other_user}","gists_url":"https://api.github.com/users/michael-ziedalski/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-ziedalski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-ziedalski/subscriptions","organizations_url":"https://api.github.com/users/michael-ziedalski/orgs","repos_url":"https://api.github.com/users/michael-ziedalski/repos","events_url":"https://api.github.com/users/michael-ziedalski/events{/privacy}","received_events_url":"https://api.github.com/users/michael-ziedalski/received_events","type":"User","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-12-12T03:29:45Z","rename":{"from":"`FailedPreconditionError` upon using `precision()` and `recall()` as metrics","to":"\"FailedPreconditionError\" upon using precision and recall metrics"},"performed_via_github_app":null},{"id":2021256604,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwMjEyNTY2MDQ=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2021256604","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-12T11:40:02Z","label":{"name":"kind/bug","color":"FF5252"},"performed_via_github_app":null},{"id":2021256606,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwMjEyNTY2MDY=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2021256606","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-12T11:40:02Z","label":{"name":"area/algorithms","color":"fbca04"},"performed_via_github_app":null},{"id":2040636755,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDIwNDA2MzY3NTU=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2040636755","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-12-21T11:33:07Z","milestone":{"title":"0.0.6 version"},"performed_via_github_app":null},{"id":2070007078,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MjA3MDAwNzA3OA==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2070007078","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2019-01-12T08:26:30Z","milestone":{"title":"0.0.6"},"performed_via_github_app":null},{"id":2070007079,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDIwNzAwMDcwNzk=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2070007079","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2019-01-12T08:26:30Z","milestone":{"title":"0.0.7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/457172584","html_url":"https://github.com/netrack/keras-metrics/issues/21#issuecomment-457172584","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/21","id":457172584,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzE3MjU4NA==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-01-24T12:00:58Z","updated_at":"2019-01-24T12:02:26Z","author_association":"MEMBER","body":"Hi @michael-ziedalski, thank you for the question. I can't reproduce an error with ```keras-metrics``` version ```0.0.7```, what version are you using?\r\n\r\nIn the provided code I don't see any incorrect usages of the metrics, everything is just fine.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/457172584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"id":2094273329,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA5NDI3MzMyOQ==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2094273329","actor":{"login":"michael-ziedalski","id":43689829,"node_id":"MDQ6VXNlcjQzNjg5ODI5","avatar_url":"https://avatars.githubusercontent.com/u/43689829?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-ziedalski","html_url":"https://github.com/michael-ziedalski","followers_url":"https://api.github.com/users/michael-ziedalski/followers","following_url":"https://api.github.com/users/michael-ziedalski/following{/other_user}","gists_url":"https://api.github.com/users/michael-ziedalski/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-ziedalski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-ziedalski/subscriptions","organizations_url":"https://api.github.com/users/michael-ziedalski/orgs","repos_url":"https://api.github.com/users/michael-ziedalski/repos","events_url":"https://api.github.com/users/michael-ziedalski/events{/privacy}","received_events_url":"https://api.github.com/users/michael-ziedalski/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-24T12:00:58Z","performed_via_github_app":null},{"id":2094273331,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwOTQyNzMzMzE=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2094273331","actor":{"login":"michael-ziedalski","id":43689829,"node_id":"MDQ6VXNlcjQzNjg5ODI5","avatar_url":"https://avatars.githubusercontent.com/u/43689829?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-ziedalski","html_url":"https://github.com/michael-ziedalski","followers_url":"https://api.github.com/users/michael-ziedalski/followers","following_url":"https://api.github.com/users/michael-ziedalski/following{/other_user}","gists_url":"https://api.github.com/users/michael-ziedalski/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-ziedalski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-ziedalski/subscriptions","organizations_url":"https://api.github.com/users/michael-ziedalski/orgs","repos_url":"https://api.github.com/users/michael-ziedalski/repos","events_url":"https://api.github.com/users/michael-ziedalski/events{/privacy}","received_events_url":"https://api.github.com/users/michael-ziedalski/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-24T12:00:58Z","performed_via_github_app":null},{"id":2094273548,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwOTQyNzM1NDg=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2094273548","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-01-24T12:01:06Z","label":{"name":"status/cannot-reproduce","color":"fef2c0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/460448741","html_url":"https://github.com/netrack/keras-metrics/issues/21#issuecomment-460448741","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/21","id":460448741,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDQ0ODc0MQ==","user":{"login":"proever","id":9210760,"node_id":"MDQ6VXNlcjkyMTA3NjA=","avatar_url":"https://avatars.githubusercontent.com/u/9210760?v=4","gravatar_id":"","url":"https://api.github.com/users/proever","html_url":"https://github.com/proever","followers_url":"https://api.github.com/users/proever/followers","following_url":"https://api.github.com/users/proever/following{/other_user}","gists_url":"https://api.github.com/users/proever/gists{/gist_id}","starred_url":"https://api.github.com/users/proever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/proever/subscriptions","organizations_url":"https://api.github.com/users/proever/orgs","repos_url":"https://api.github.com/users/proever/repos","events_url":"https://api.github.com/users/proever/events{/privacy}","received_events_url":"https://api.github.com/users/proever/received_events","type":"User","site_admin":false},"created_at":"2019-02-04T23:03:34Z","updated_at":"2019-02-04T23:03:34Z","author_association":"NONE","body":"Just wanted to say that I'm running into the same error on `0.0.7` with Keras `2.2.4` and tensorflow `1.12.0`. I was able to reproduce it with the code in the initial issue, commenting out the inline sections. The exact error is:\r\n```\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value Variable_1 [[{{node Variable_1/read}} = Identity[T=DT_INT32, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](Variable_1)]]\r\n```\r\n\r\nI've attached a [requirements.txt](https://github.com/netrack/keras-metrics/files/2830118/requirements.txt). I was running Python `3.6.7` in a clean virtualenv.\r\n\r\nHere's the code:\r\n\r\n```\r\nimport matplotlib\r\nimport matplotlib.pyplot as plt\r\n\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nimport sklearn as sk\r\n\r\nimport keras_metrics as km\r\n\r\nimport seaborn as sns\r\nsns.set_style(\"darkgrid\")\r\n\r\n## Spiral data generation\r\ndef twospirals(n_points, noise=.5):\r\n    \"\"\"\r\n     Returns the two spirals dataset.\r\n    \"\"\"\r\n    n = np.sqrt(np.random.rand(n_points,1)) * 780 * (2*np.pi)/360\r\n    d1x = -np.cos(n)*n + np.random.rand(n_points,1) * noise\r\n    d1y = np.sin(n)*n + np.random.rand(n_points,1) * noise\r\n    return (np.vstack((np.hstack((d1x,d1y)),np.hstack((-d1x,-d1y)))),\r\n            np.hstack((np.zeros(n_points),np.ones(n_points))))\r\n\r\nx, y = twospirals(1000)\r\n\r\nmodel = keras.Sequential([\r\n    keras.layers.Flatten(input_shape=(2,)),\r\n    keras.layers.Dense(3, activation='sigmoid'),\r\n    keras.layers.Dense(3, activation='sigmoid'),\r\n    keras.layers.Dense(1, activation=keras.activations.sigmoid)\r\n])\r\n\r\n## Choosing my optimizer algorithm and loss function\r\ngrad_opt = tf.train.GradientDescentOptimizer(learning_rate=.003)\r\nmse = keras.losses.mean_squared_error\r\n\r\nmodel.compile(optimizer=grad_opt,\r\n              loss=mse,\r\n              metrics=[km.recall(), km.precision()])\r\n\r\nmodel.fit(x=x, y=y, epochs=300)\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/460448741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"proever","id":9210760,"node_id":"MDQ6VXNlcjkyMTA3NjA=","avatar_url":"https://avatars.githubusercontent.com/u/9210760?v=4","gravatar_id":"","url":"https://api.github.com/users/proever","html_url":"https://github.com/proever","followers_url":"https://api.github.com/users/proever/followers","following_url":"https://api.github.com/users/proever/following{/other_user}","gists_url":"https://api.github.com/users/proever/gists{/gist_id}","starred_url":"https://api.github.com/users/proever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/proever/subscriptions","organizations_url":"https://api.github.com/users/proever/orgs","repos_url":"https://api.github.com/users/proever/repos","events_url":"https://api.github.com/users/proever/events{/privacy}","received_events_url":"https://api.github.com/users/proever/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/460982503","html_url":"https://github.com/netrack/keras-metrics/issues/21#issuecomment-460982503","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/21","id":460982503,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDk4MjUwMw==","user":{"login":"aronhoff","id":922684,"node_id":"MDQ6VXNlcjkyMjY4NA==","avatar_url":"https://avatars.githubusercontent.com/u/922684?v=4","gravatar_id":"","url":"https://api.github.com/users/aronhoff","html_url":"https://github.com/aronhoff","followers_url":"https://api.github.com/users/aronhoff/followers","following_url":"https://api.github.com/users/aronhoff/following{/other_user}","gists_url":"https://api.github.com/users/aronhoff/gists{/gist_id}","starred_url":"https://api.github.com/users/aronhoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aronhoff/subscriptions","organizations_url":"https://api.github.com/users/aronhoff/orgs","repos_url":"https://api.github.com/users/aronhoff/repos","events_url":"https://api.github.com/users/aronhoff/events{/privacy}","received_events_url":"https://api.github.com/users/aronhoff/received_events","type":"User","site_admin":false},"created_at":"2019-02-06T10:59:01Z","updated_at":"2019-02-06T10:59:20Z","author_association":"CONTRIBUTOR","body":"I had the same issue. The problem is that you are using the TensorFlow version of Keras (`from tensorflow import keras`), while the library uses the standalone version (`import keras`). They are incompatible on several points (internal type checks fail for example). Importing both versions in my own code and setting the same `tf.Session` as their session was not sufficient.\r\n\r\nI need to use the TensorFlow version, so I got past the error by tricking `keras-metrics` into importing that:\r\n```python\r\nfrom tensorflow.python import keras\r\nimport sys\r\nsys.modules['keras'] = keras\r\nsys.modules['keras.backend'] = keras.backend\r\nimport keras_metrics\r\n```\r\n\r\nStill, all of the metrics are 0.0 when I run them, the variables are possibly not updated for some reason.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/460982503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aronhoff","id":922684,"node_id":"MDQ6VXNlcjkyMjY4NA==","avatar_url":"https://avatars.githubusercontent.com/u/922684?v=4","gravatar_id":"","url":"https://api.github.com/users/aronhoff","html_url":"https://github.com/aronhoff","followers_url":"https://api.github.com/users/aronhoff/followers","following_url":"https://api.github.com/users/aronhoff/following{/other_user}","gists_url":"https://api.github.com/users/aronhoff/gists{/gist_id}","starred_url":"https://api.github.com/users/aronhoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aronhoff/subscriptions","organizations_url":"https://api.github.com/users/aronhoff/orgs","repos_url":"https://api.github.com/users/aronhoff/repos","events_url":"https://api.github.com/users/aronhoff/events{/privacy}","received_events_url":"https://api.github.com/users/aronhoff/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/461001700","html_url":"https://github.com/netrack/keras-metrics/issues/21#issuecomment-461001700","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/21","id":461001700,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTAwMTcwMA==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-02-06T12:10:57Z","updated_at":"2019-02-06T12:13:45Z","author_association":"MEMBER","body":"Ah, you are all using ```keras``` package from ```tensorflow```, I didn't notice that initially.\r\nSo basically, the fix is to wrap the ```fit``` call with session that initializes global variables like this:\r\n```py\r\nwith tf.Session() as s:\r\n   s.run(tf.global_variables_initializer())\r\n   model.fit(x=x, y=y, epochs=300)\r\n```","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/461001700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/461002875","html_url":"https://github.com/netrack/keras-metrics/issues/21#issuecomment-461002875","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/21","id":461002875,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTAwMjg3NQ==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-02-06T12:15:38Z","updated_at":"2019-02-06T12:15:38Z","author_association":"MEMBER","body":"And I get non-zero metrics in the result:\r\n```txt\r\n...\r\nEpoch 297/300\r\n2000/2000 [==============================] - 0s 29us/sample - loss: 0.2461 - recall: 0.5432 - precision: 0.6111\r\nEpoch 298/300\r\n2000/2000 [==============================] - 0s 31us/sample - loss: 0.2461 - recall: 0.5369 - precision: 0.6035\r\nEpoch 299/300\r\n2000/2000 [==============================] - 0s 29us/sample - loss: 0.2461 - recall: 0.5329 - precision: 0.6066\r\nEpoch 300/300\r\n```","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/461002875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/461376587","html_url":"https://github.com/netrack/keras-metrics/issues/21#issuecomment-461376587","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/21","id":461376587,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTM3NjU4Nw==","user":{"login":"aronhoff","id":922684,"node_id":"MDQ6VXNlcjkyMjY4NA==","avatar_url":"https://avatars.githubusercontent.com/u/922684?v=4","gravatar_id":"","url":"https://api.github.com/users/aronhoff","html_url":"https://github.com/aronhoff","followers_url":"https://api.github.com/users/aronhoff/followers","following_url":"https://api.github.com/users/aronhoff/following{/other_user}","gists_url":"https://api.github.com/users/aronhoff/gists{/gist_id}","starred_url":"https://api.github.com/users/aronhoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aronhoff/subscriptions","organizations_url":"https://api.github.com/users/aronhoff/orgs","repos_url":"https://api.github.com/users/aronhoff/repos","events_url":"https://api.github.com/users/aronhoff/events{/privacy}","received_events_url":"https://api.github.com/users/aronhoff/received_events","type":"User","site_admin":false},"created_at":"2019-02-07T11:06:03Z","updated_at":"2019-02-07T11:06:03Z","author_association":"CONTRIBUTOR","body":"That works for me too. I realised that it gave me 0.0 because my label tensor was sparse (as opposed to one-hot)","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/461376587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aronhoff","id":922684,"node_id":"MDQ6VXNlcjkyMjY4NA==","avatar_url":"https://avatars.githubusercontent.com/u/922684?v=4","gravatar_id":"","url":"https://api.github.com/users/aronhoff","html_url":"https://github.com/aronhoff","followers_url":"https://api.github.com/users/aronhoff/followers","following_url":"https://api.github.com/users/aronhoff/following{/other_user}","gists_url":"https://api.github.com/users/aronhoff/gists{/gist_id}","starred_url":"https://api.github.com/users/aronhoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aronhoff/subscriptions","organizations_url":"https://api.github.com/users/aronhoff/orgs","repos_url":"https://api.github.com/users/aronhoff/repos","events_url":"https://api.github.com/users/aronhoff/events{/privacy}","received_events_url":"https://api.github.com/users/aronhoff/received_events","type":"User","site_admin":false}},{"id":2161305441,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MjE2MTMwNTQ0MQ==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2161305441","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2019-02-25T10:29:56Z","milestone":{"title":"0.0.8"},"performed_via_github_app":null}]