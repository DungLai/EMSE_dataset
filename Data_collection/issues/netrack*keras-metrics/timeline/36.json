[{"id":2219590447,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyMTk1OTA0NDc=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2219590447","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-03-21T12:46:33Z","label":{"name":"kind/bug","color":"FF5252"},"performed_via_github_app":null},{"id":2219590452,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyMTk1OTA0NTI=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2219590452","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-03-21T12:46:33Z","label":{"name":"area/metrics","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475214999","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-475214999","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":475214999,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIxNDk5OQ==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T12:47:03Z","updated_at":"2019-03-21T12:47:03Z","author_association":"MEMBER","body":"Hi @HawkinsZhao, I'll appreciate if you'll assist me with this issue.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475214999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"id":2219591487,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIxOTU5MTQ4Nw==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2219591487","actor":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-21T12:47:03Z","performed_via_github_app":null},{"id":2219591489,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMTk1OTE0ODk=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2219591489","actor":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-21T12:47:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475215426","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-475215426","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":475215426,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIxNTQyNg==","user":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T12:48:33Z","updated_at":"2019-03-21T12:48:33Z","author_association":"CONTRIBUTOR","body":"OK, I will take a look.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475215426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475233840","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-475233840","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":475233840,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIzMzg0MA==","user":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T13:44:30Z","updated_at":"2019-03-21T13:45:10Z","author_association":"CONTRIBUTOR","body":"Hi @ybubnov. I did a quick test with your code. I really can't figure out where goes wrong. But I found something interesting.\r\n\r\nIf you use a single callback like:\r\n```python\r\nclass KMCallback(Callback):\r\n    def on_epoch_end(self, epochs, logs=None):\r\n        x = numpy.array([[0], [0], [0]])\r\n        y = numpy.array([0, 1, 1])\r\n        AR = model.evaluate(x, y, verbose=0)[1:]\r\n        print(AR)\r\n```\r\n\r\nYou will get the right average recall value of each epoch. However, the training log shows both incorrect loss and metric. This is not only happening on `average recall`  but also on others, even the built-in Keras metric. Besides, you could also get the correct value with `batch_size=1`. Do you think this could be a bug of Keras itself?\r\n\r\nCheck out my code and logs:\r\n\r\n```python\r\nimport numpy\r\nimport keras\r\n\r\nimport keras_metrics as km\r\nfrom keras.callbacks import Callback\r\n\r\n\r\nclass KMCallback(Callback):\r\n    def on_epoch_end(self, epochs, logs=None):\r\n        x = numpy.array([[0], [0], [0]])\r\n        y = numpy.array([0, 1, 1])\r\n        AR = model.evaluate(x, y, verbose=0)[1:]\r\n        print('Average Recall: ', AR)\r\n\r\n\r\ny_pred = [[0], [1], [1]]\r\n\r\nmodel = keras.models.Sequential()\r\nmodel.add(keras.layers.Lambda(lambda x: x+y_pred))\r\nmodel.compile(optimizer=\"sgd\", loss=\"binary_crossentropy\",\r\n              metrics=[\r\n                  'accuracy',\r\n                  km.true_positive(),\r\n                  km.binary_average_recall(classes=1)\r\n                ])\r\n\r\nx = numpy.array([[0], [0], [0]])\r\ny = numpy.array([0, 1, 1])\r\n\r\nmodel.fit(x, y, epochs=10, batch_size=3, callbacks=[KMCallback()])\r\n```\r\n\r\n```\r\nUsing TensorFlow backend.\r\nTensor(\"metrics/average_recall/Cast:0\", shape=(?,), dtype=float64) Tensor(\"metrics/average_recall/Cast_1:0\", shape=(3,), dtype=float64)\r\n2019-03-21 21:41:47.659756: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX\r\n2019-03-21 21:41:47.660136: I tensorflow/core/common_runtime/process_util.cc:69] Creating new thread pool with default inter op setting: 8. Tune using inter_op_parallelism_threads for best performance.\r\nEpoch 1/10\r\n3/3 [==============================] - 0s 54ms/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 2/10\r\n3/3 [==============================] - 0s 456us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 3/10\r\n3/3 [==============================] - 0s 372us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 4/10\r\n3/3 [==============================] - 0s 422us/step - loss: 1.1281e-07 - acc: 1.0000 - true_positive: 2.0000 - average_recall: 1.0000\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 5/10\r\n3/3 [==============================] - 0s 546us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 6/10\r\n3/3 [==============================] - 0s 439us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 7/10\r\n3/3 [==============================] - 0s 395us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 8/10\r\n3/3 [==============================] - 0s 405us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 9/10\r\n3/3 [==============================] - 0s 409us/step - loss: 10.6868 - acc: 0.3333 - true_positive: 1.0000 - average_recall: 0.0000e+00\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\nEpoch 10/10\r\n3/3 [==============================] - 0s 396us/step - loss: 1.1281e-07 - acc: 1.0000 - true_positive: 2.0000 - average_recall: 1.0000\r\nAverage Recall:  [1.0, 2, 0.9999999000000099]\r\n```","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475233840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false}},{"id":2219749991,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIxOTc0OTk5MQ==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2219749991","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-21T13:44:31Z","performed_via_github_app":null},{"id":2219749993,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMTk3NDk5OTM=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2219749993","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-21T13:44:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475382674","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-475382674","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":475382674,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTM4MjY3NA==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T20:06:34Z","updated_at":"2019-03-21T20:06:34Z","author_association":"MEMBER","body":"Yes, these numbers can't be trusted, but anyways, the resulting loss and metrics has correct values.\r\nWhat I could understand, that current implementation of average recall can't handle a model with a single class: ```classes=1```. The question is: should it handle that?\r\n\r\nMy answer that with single class, average recall should be equal to the \"regular\" recall, which is not true currently.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475382674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475501131","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-475501131","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":475501131,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUwMTEzMQ==","user":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false},"created_at":"2019-03-22T05:42:57Z","updated_at":"2019-03-22T05:42:57Z","author_association":"CONTRIBUTOR","body":"Thanks for the clarification.\r\n> What I could understand, that current implementation of average recall can't handle a model with a single class: classes=1. The question is: should it handle that?\r\n\r\nI don't think `classes=1` make sense. A classification problem will give at least two classes. Literally, there is no such situation like `classes=1`. \r\n\r\nThe current average recall implementation firstly calculates recall for each class, then average them. It behaves like the sklearn `recall_score` with `average='macro'`. \r\n\r\nAnyway, if you are thinking about making `keras-metric` API simpler, maybe we can add an argument to the \"regular\" recall function called `average`. If it equals `True`, we route the calculation to my code, while it equals `False`, we use \"regular\" calculation for a target label.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475501131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"YiqinZhao","id":11468820,"node_id":"MDQ6VXNlcjExNDY4ODIw","avatar_url":"https://avatars.githubusercontent.com/u/11468820?v=4","gravatar_id":"","url":"https://api.github.com/users/YiqinZhao","html_url":"https://github.com/YiqinZhao","followers_url":"https://api.github.com/users/YiqinZhao/followers","following_url":"https://api.github.com/users/YiqinZhao/following{/other_user}","gists_url":"https://api.github.com/users/YiqinZhao/gists{/gist_id}","starred_url":"https://api.github.com/users/YiqinZhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YiqinZhao/subscriptions","organizations_url":"https://api.github.com/users/YiqinZhao/orgs","repos_url":"https://api.github.com/users/YiqinZhao/repos","events_url":"https://api.github.com/users/YiqinZhao/events{/privacy}","received_events_url":"https://api.github.com/users/YiqinZhao/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475535668","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-475535668","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":475535668,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUzNTY2OA==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-03-22T08:37:38Z","updated_at":"2019-03-22T08:37:38Z","author_association":"MEMBER","body":"My suggestion is to add a validation on metric creation that throws an exception when the incorrect number of classes are specified.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/475535668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/479930367","html_url":"https://github.com/netrack/keras-metrics/issues/36#issuecomment-479930367","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/36","id":479930367,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTkzMDM2Nw==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-04-04T14:52:08Z","updated_at":"2019-04-04T14:52:08Z","author_association":"MEMBER","body":"Fixed in #38 ","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/479930367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"id":2253203902,"node_id":"MDExOkNsb3NlZEV2ZW50MjI1MzIwMzkwMg==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2253203902","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-04-04T14:52:08Z","state_reason":null,"performed_via_github_app":null}]