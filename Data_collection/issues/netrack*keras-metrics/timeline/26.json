[{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/456057337","html_url":"https://github.com/netrack/keras-metrics/issues/26#issuecomment-456057337","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/26","id":456057337,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjA1NzMzNw==","user":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"created_at":"2019-01-21T12:27:06Z","updated_at":"2019-01-21T12:27:18Z","author_association":"MEMBER","body":"Hi @NumesSanguis, thank you for posting the issue.\r\n\r\nCould you, please, post a model configuration or at least the last layer (example of output data), so I could understand why this fix is necessary? Thank you in advance.","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/456057337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false}},{"id":2086266563,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA4NjI2NjU2Mw==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2086266563","actor":{"login":"NumesSanguis","id":8008618,"node_id":"MDQ6VXNlcjgwMDg2MTg=","avatar_url":"https://avatars.githubusercontent.com/u/8008618?v=4","gravatar_id":"","url":"https://api.github.com/users/NumesSanguis","html_url":"https://github.com/NumesSanguis","followers_url":"https://api.github.com/users/NumesSanguis/followers","following_url":"https://api.github.com/users/NumesSanguis/following{/other_user}","gists_url":"https://api.github.com/users/NumesSanguis/gists{/gist_id}","starred_url":"https://api.github.com/users/NumesSanguis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NumesSanguis/subscriptions","organizations_url":"https://api.github.com/users/NumesSanguis/orgs","repos_url":"https://api.github.com/users/NumesSanguis/repos","events_url":"https://api.github.com/users/NumesSanguis/events{/privacy}","received_events_url":"https://api.github.com/users/NumesSanguis/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-21T12:27:06Z","performed_via_github_app":null},{"id":2086266564,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwODYyNjY1NjQ=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2086266564","actor":{"login":"NumesSanguis","id":8008618,"node_id":"MDQ6VXNlcjgwMDg2MTg=","avatar_url":"https://avatars.githubusercontent.com/u/8008618?v=4","gravatar_id":"","url":"https://api.github.com/users/NumesSanguis","html_url":"https://github.com/NumesSanguis","followers_url":"https://api.github.com/users/NumesSanguis/followers","following_url":"https://api.github.com/users/NumesSanguis/following{/other_user}","gists_url":"https://api.github.com/users/NumesSanguis/gists{/gist_id}","starred_url":"https://api.github.com/users/NumesSanguis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NumesSanguis/subscriptions","organizations_url":"https://api.github.com/users/NumesSanguis/orgs","repos_url":"https://api.github.com/users/NumesSanguis/repos","events_url":"https://api.github.com/users/NumesSanguis/events{/privacy}","received_events_url":"https://api.github.com/users/NumesSanguis/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-21T12:27:06Z","performed_via_github_app":null},{"id":2086267728,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwODYyNjc3Mjg=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2086267728","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-01-21T12:27:38Z","label":{"name":"kind/bug","color":"FF5252"},"performed_via_github_app":null},{"id":2086267731,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwODYyNjc3MzE=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2086267731","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-01-21T12:27:38Z","label":{"name":"area/metrics","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/464009365","html_url":"https://github.com/netrack/keras-metrics/issues/26#issuecomment-464009365","issue_url":"https://api.github.com/repos/netrack/keras-metrics/issues/26","id":464009365,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDAwOTM2NQ==","user":{"login":"Luux","id":15156652,"node_id":"MDQ6VXNlcjE1MTU2NjUy","avatar_url":"https://avatars.githubusercontent.com/u/15156652?v=4","gravatar_id":"","url":"https://api.github.com/users/Luux","html_url":"https://github.com/Luux","followers_url":"https://api.github.com/users/Luux/followers","following_url":"https://api.github.com/users/Luux/following{/other_user}","gists_url":"https://api.github.com/users/Luux/gists{/gist_id}","starred_url":"https://api.github.com/users/Luux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Luux/subscriptions","organizations_url":"https://api.github.com/users/Luux/orgs","repos_url":"https://api.github.com/users/Luux/repos","events_url":"https://api.github.com/users/Luux/events{/privacy}","received_events_url":"https://api.github.com/users/Luux/received_events","type":"User","site_admin":false},"created_at":"2019-02-15T11:24:05Z","updated_at":"2019-02-21T09:53:36Z","author_association":"NONE","body":"@ybubnov I can confirm this issue. I tried with\r\n`f1 = keras_metrics.f1_score(label=1)`\r\n`self.model.compile(optimizer=\"Adam\", loss='binary_crossentropy', metrics=[f1])`\r\nand got the same error. My last layer currently is\r\n`output_layer = keras.layers.Dense(self.n_classes, activation=\"softmax\")(dense2)`\r\n\r\nThe labels are 1-hot-encoded and have 12 classes, so the values have to be in the form \r\n`np.array([0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0.])`","reactions":{"url":"https://api.github.com/repos/netrack/keras-metrics/issues/comments/464009365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Luux","id":15156652,"node_id":"MDQ6VXNlcjE1MTU2NjUy","avatar_url":"https://avatars.githubusercontent.com/u/15156652?v=4","gravatar_id":"","url":"https://api.github.com/users/Luux","html_url":"https://github.com/Luux","followers_url":"https://api.github.com/users/Luux/followers","following_url":"https://api.github.com/users/Luux/following{/other_user}","gists_url":"https://api.github.com/users/Luux/gists{/gist_id}","starred_url":"https://api.github.com/users/Luux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Luux/subscriptions","organizations_url":"https://api.github.com/users/Luux/orgs","repos_url":"https://api.github.com/users/Luux/repos","events_url":"https://api.github.com/users/Luux/events{/privacy}","received_events_url":"https://api.github.com/users/Luux/received_events","type":"User","site_admin":false}},{"id":2154439759,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE1NDQzOTc1OQ==","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2154439759","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-21T09:53:36Z","performed_via_github_app":null},{"id":2154439761,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxNTQ0Mzk3NjE=","url":"https://api.github.com/repos/netrack/keras-metrics/issues/events/2154439761","actor":{"login":"ybubnov","id":1778407,"node_id":"MDQ6VXNlcjE3Nzg0MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1778407?v=4","gravatar_id":"","url":"https://api.github.com/users/ybubnov","html_url":"https://github.com/ybubnov","followers_url":"https://api.github.com/users/ybubnov/followers","following_url":"https://api.github.com/users/ybubnov/following{/other_user}","gists_url":"https://api.github.com/users/ybubnov/gists{/gist_id}","starred_url":"https://api.github.com/users/ybubnov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ybubnov/subscriptions","organizations_url":"https://api.github.com/users/ybubnov/orgs","repos_url":"https://api.github.com/users/ybubnov/repos","events_url":"https://api.github.com/users/ybubnov/events{/privacy}","received_events_url":"https://api.github.com/users/ybubnov/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-21T09:53:36Z","performed_via_github_app":null}]