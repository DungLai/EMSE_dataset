{"url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench/issues/37","repository_url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench","labels_url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench/issues/37/labels{/name}","comments_url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench/issues/37/comments","events_url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench/issues/37/events","html_url":"https://github.com/XiaoMi/mobile-ai-bench/issues/37","id":576642638,"node_id":"MDU6SXNzdWU1NzY2NDI2Mzg=","number":37,"title":"Error: Build did NOT complete successfully","user":{"login":"labsurde","id":2621400,"node_id":"MDQ6VXNlcjI2MjE0MDA=","avatar_url":"https://avatars.githubusercontent.com/u/2621400?v=4","gravatar_id":"","url":"https://api.github.com/users/labsurde","html_url":"https://github.com/labsurde","followers_url":"https://api.github.com/users/labsurde/followers","following_url":"https://api.github.com/users/labsurde/following{/other_user}","gists_url":"https://api.github.com/users/labsurde/gists{/gist_id}","starred_url":"https://api.github.com/users/labsurde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/labsurde/subscriptions","organizations_url":"https://api.github.com/users/labsurde/orgs","repos_url":"https://api.github.com/users/labsurde/repos","events_url":"https://api.github.com/users/labsurde/events{/privacy}","received_events_url":"https://api.github.com/users/labsurde/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-06T01:45:23Z","updated_at":"2020-03-06T10:42:28Z","closed_at":"2020-03-06T10:42:28Z","author_association":"NONE","active_lock_reason":null,"body":"Hi.\r\n\r\nI am experiencing this error. Could you please help?\r\n\r\n- Environment:\r\n    - Ubuntu 18.04\r\n    - Pixel 2, Andorid 8.1 (Tried with Pixel 4, Android 10 and got the same error)\r\n\r\n- I made some source change \r\n    - `benchmark.meta`\r\n        - cannot access `https://cnbj1.fds.api.xiaomi.com` so I put one `benchmarks{ ... }` with accessible URL and remove other than this one.\r\n\r\n          ```\r\n           benchmarks {\r\n           executor: TFLITE\r\n           models {\r\n             model_name: InceptionV3\r\n             model_path: \"http://some url/TF_IV3_03.toco.tflite\"\r\n             model_checksum: \"d2da062e325a54b512c3816714454deb\" <-- result of md5sum\r\n             devices: CPU\r\n             devices: GPU\r\n             input_names: \"input\"\r\n             }\r\n           }\r\n         ```\r\n\r\n    - `config.yml`\r\n        - cannot access `https://cnbj1.fds.api.xiaomi.com` so I uploaded tensorflow into accessible URL\r\n        - but didn't change URL of `imagenet_less.zip` yet because I don't know where I can get this `imagenet_less.zip` file\r\n    - \r\n\r\nError screen\r\n```\r\n$ bash tools/benchmark.sh --benchmark_option=Performance --executor=TFLITE --target_abis=arm64-v8a\r\nStarting local Bazel server and connecting to it...\r\n........\r\nINFO: Analysed target //aibench/python:benchmark (18 packages loaded).\r\nINFO: Found 1 target...\r\nTarget //aibench/python:benchmark up-to-date:\r\n  bazel-bin/aibench/python/benchmark\r\nINFO: Elapsed time: 2.222s, Critical Path: 0.04s\r\nINFO: 0 processes.\r\nINFO: Build completed successfully, 1 total action\r\nFind qualcomm adb device:711KPCA0776611\r\nNo Arm linux device yaml file\r\nPrepare to run models on arm64-v8a\r\nPush output/benchmark.pb to /data/local/tmp/aibench\r\nPush output/model.pb to /data/local/tmp/aibench\r\nPush output/TF_IV3_03.toco.tflite to /data/local/tmp/aibench\r\nlibhexagon_nn_skel.so does not exists, QualcommAdbDevice Skip DSP.\r\n* Build //aibench/benchmark:model_benchmark for TFLITE with ABI arm64-v8a\r\nWARNING: The following configs were expanded more than once: [cross_compile]. For repeatable flags, repeats are counted twice and may lead to unexpected behavior.\r\nERROR: build interrupted\r\nINFO: Elapsed time: 56.532s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (8 packages loaded)\r\nTraceback (most recent call last):\r\n  File \"/home/eric/src/mobile-ai-bench/bazel-bin/aibench/python/benchmark.runfiles/aibench/aibench/python/benchmark.py\", line 354, in <module>\r\n    main(unused_args=[sys.argv[0]] + unparsed)\r\n  File \"/home/eric/src/mobile-ai-bench/bazel-bin/aibench/python/benchmark.runfiles/aibench/aibench/python/benchmark.py\", line 343, in main\r\n    benchmark_option, benchmark_list, result_files,)\r\n  File \"/home/eric/src/mobile-ai-bench/bazel-bin/aibench/python/benchmark.runfiles/aibench/aibench/python/benchmark.py\", line 261, in run_on_device\r\n    avail_device_types)\r\n  File \"/home/eric/src/mobile-ai-bench/aibench/python/bench_engine.py\", line 117, in bazel_build\r\n    *bazel_args)\r\n  File \"/home/eric/.local/lib/python2.7/site-packages/sh.py\", line 1413, in __call__\r\n    raise exc\r\nsh.ErrorReturnCode_8: \r\n\r\n  RAN: /home/eric/src/mobile-ai-bench/bazel build //aibench/benchmark:model_benchmark --config android --cpu=arm64-v8a --action_env=ANDROID_NDK_HOME=/home/eric/dev/android-ndk-r16b/ --define tflite=true\r\n\r\n  STDOUT:\r\n\r\n\r\n  STDERR:\r\n\r\n```\r\n\r\nThe line that throws an exception is in `sh.py`:\r\n```\r\n        if call_args[\"fg\"]:\r\n            if call_args[\"env\"] is None:\r\n                launch = lambda: os.spawnv(os.P_WAIT, cmd[0], cmd)\r\n            else:\r\n                launch = lambda: os.spawnve(os.P_WAIT, cmd[0], cmd, call_args[\"env\"])\r\n\r\n            exit_code = launch()\r\n            exc_class = get_exc_exit_code_would_raise(exit_code,\r\n                    call_args[\"ok_code\"], call_args[\"piped\"])\r\n            if exc_class:\r\n                if IS_PY3:\r\n                    ran = \" \".join([arg.decode(DEFAULT_ENCODING, \"ignore\") for arg in cmd])\r\n                else:\r\n                    ran = \" \".join(cmd)\r\n                exc = exc_class(ran, b\"\", b\"\", call_args[\"truncate_exc\"])\r\n                raise exc    --------------------------> exception\r\n            return None\r\n```\r\n\r\nCould you please help to solve this issue?\r\n\r\nand.. one more question is... could you let me know where I can get or how I can create `imagenet_less.zip`?\r\n\r\nThanks a lot!\r\n","closed_by":{"login":"labsurde","id":2621400,"node_id":"MDQ6VXNlcjI2MjE0MDA=","avatar_url":"https://avatars.githubusercontent.com/u/2621400?v=4","gravatar_id":"","url":"https://api.github.com/users/labsurde","html_url":"https://github.com/labsurde","followers_url":"https://api.github.com/users/labsurde/followers","following_url":"https://api.github.com/users/labsurde/following{/other_user}","gists_url":"https://api.github.com/users/labsurde/gists{/gist_id}","starred_url":"https://api.github.com/users/labsurde/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/labsurde/subscriptions","organizations_url":"https://api.github.com/users/labsurde/orgs","repos_url":"https://api.github.com/users/labsurde/repos","events_url":"https://api.github.com/users/labsurde/events{/privacy}","received_events_url":"https://api.github.com/users/labsurde/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench/issues/37/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/XiaoMi/mobile-ai-bench/issues/37/timeline","performed_via_github_app":null,"state_reason":"completed"}