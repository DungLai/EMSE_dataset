[{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/681137521","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-681137521","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":681137521,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTEzNzUyMQ==","user":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false},"created_at":"2020-08-26T21:38:21Z","updated_at":"2020-08-26T21:38:21Z","author_association":"OWNER","body":"Hi :)\r\n\r\nThanks for your kind message\r\n\r\nI don't currently have plans to support the entities roles and groups in the near future, as there are other things of higher priority on my todo list and I don't have as much time to work on this as I used to.\r\nI quite agree that the parser code is quite hard to understand, I plan to improve it when I have more time.\r\n\r\nI hope this isn't too much of an issue for you.\r\nFeel free to implement it, I'd be happy to answer any questions you have about my code if you decide to do this :)\r\n\r\nI'll take a look at your yaml adapter on your repo as well.\r\n\r\nHave a good day!","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/681137521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false}},{"id":3696713359,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2OTY3MTMzNTk=","url":"https://api.github.com/repos/SimGus/Chatette/issues/events/3696713359","actor":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-26T21:38:42Z","label":{"name":"improvement","color":"4DD0E1"},"performed_via_github_app":null},{"id":3696713360,"node_id":"MDEyOkxhYmVsZWRFdmVudDM2OTY3MTMzNjA=","url":"https://api.github.com/repos/SimGus/Chatette/issues/events/3696713360","actor":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-08-26T21:38:42Z","label":{"name":"question","color":"AB47BC"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/681196254","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-681196254","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":681196254,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTE5NjI1NA==","user":{"login":"tomgun132","id":13296565,"node_id":"MDQ6VXNlcjEzMjk2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/13296565?v=4","gravatar_id":"","url":"https://api.github.com/users/tomgun132","html_url":"https://github.com/tomgun132","followers_url":"https://api.github.com/users/tomgun132/followers","following_url":"https://api.github.com/users/tomgun132/following{/other_user}","gists_url":"https://api.github.com/users/tomgun132/gists{/gist_id}","starred_url":"https://api.github.com/users/tomgun132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomgun132/subscriptions","organizations_url":"https://api.github.com/users/tomgun132/orgs","repos_url":"https://api.github.com/users/tomgun132/repos","events_url":"https://api.github.com/users/tomgun132/events{/privacy}","received_events_url":"https://api.github.com/users/tomgun132/received_events","type":"User","site_admin":false},"created_at":"2020-08-27T00:43:37Z","updated_at":"2020-08-27T00:44:17Z","author_association":"NONE","body":"Hi, thank you for your reply.\r\n\r\nIf I have time, I will take a look into it. Can you give me suggestion on what kind of symbol that can be used for entities roles and groups? Also, which part of the code that I should start looking into if I want to add this functionality?\r\n\r\nCheers!","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/681196254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tomgun132","id":13296565,"node_id":"MDQ6VXNlcjEzMjk2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/13296565?v=4","gravatar_id":"","url":"https://api.github.com/users/tomgun132","html_url":"https://github.com/tomgun132","followers_url":"https://api.github.com/users/tomgun132/followers","following_url":"https://api.github.com/users/tomgun132/following{/other_user}","gists_url":"https://api.github.com/users/tomgun132/gists{/gist_id}","starred_url":"https://api.github.com/users/tomgun132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomgun132/subscriptions","organizations_url":"https://api.github.com/users/tomgun132/orgs","repos_url":"https://api.github.com/users/tomgun132/repos","events_url":"https://api.github.com/users/tomgun132/events{/privacy}","received_events_url":"https://api.github.com/users/tomgun132/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/687418786","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-687418786","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":687418786,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzQxODc4Ng==","user":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false},"created_at":"2020-09-04T22:07:19Z","updated_at":"2020-09-04T22:23:48Z","author_association":"OWNER","body":"Hi!\r\n\r\nSorry about the late answer, I've been extremely busy for the past few days.\r\n\r\nAs entity roles and groups are related to entities, I'd say we could put the information about roles and groups within parentheses placed after the entity (e.g. `@[entity](HERE)`). Obviously, that's just a suggestion, if you have a better idea, propose away :)\r\n\r\nNote that we can always change symbols before we merge changes.\r\n\r\nTo implement this kind of feature, you'll need to do 3 things:\r\n- Add parsing abilities for this new syntax. This is done by implementing (and calling) a parsing rule. I'd suggest starting by looking at the parser which opens the file(s), calls the different parsing rules and create the abstract syntax tree.\r\n- Store this information so that the output files can be correctly created. From what I can see, it would make sense to store the information about roles and groups in the `SlotDefinition` class.\r\n- Adapt all adapters to be able to use (or discard) this new information and create the different output files.\r\n\r\nThis is quite a big task that requires a quite deep understanding of the current code, so feel free to ask for help if you try this out!\r\n\r\nSorry again for the late answer.\r\nThanks for your enthusiasm!","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/687418786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/793496298","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-793496298","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":793496298,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzQ5NjI5OA==","user":{"login":"tomgun132","id":13296565,"node_id":"MDQ6VXNlcjEzMjk2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/13296565?v=4","gravatar_id":"","url":"https://api.github.com/users/tomgun132","html_url":"https://github.com/tomgun132","followers_url":"https://api.github.com/users/tomgun132/followers","following_url":"https://api.github.com/users/tomgun132/following{/other_user}","gists_url":"https://api.github.com/users/tomgun132/gists{/gist_id}","starred_url":"https://api.github.com/users/tomgun132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomgun132/subscriptions","organizations_url":"https://api.github.com/users/tomgun132/orgs","repos_url":"https://api.github.com/users/tomgun132/repos","events_url":"https://api.github.com/users/tomgun132/events{/privacy}","received_events_url":"https://api.github.com/users/tomgun132/received_events","type":"User","site_admin":false},"created_at":"2021-03-09T07:46:31Z","updated_at":"2021-03-09T09:33:06Z","author_association":"NONE","body":"Hi, I've been busy so I just started looking into this improvement recently.  I think I've found on a way on how to do it, but I need advice on adding the entity roles/groups to the `Rule` class. Before that I want to comment on something on what you said:\r\n\r\n> As entity roles and groups are related to entities, I'd say we could put the information about roles and groups within parentheses placed after the entity (e.g. @[entity](HERE)). Obviously, that's just a suggestion, if you have a better idea, propose away :)\r\n> Store this information so that the output files can be correctly created. From what I can see, it would make sense to store the information about roles and groups in the SlotDefinition class.\r\n\r\nI think the entity role and group cannot be stored inside `SlotDefinition` class since it should be defined inside the intent's sentence pattern. For example, based on what [Rasa's documentation about role and group](https://rasa.com/docs/rasa/nlu-training-data) `\"- I want to fly from [Berlin]{\"entity\": \"city\", \"role\": \"departure\"} to [San Francisco]{\"entity\": \"city\", \"role\": \"destination\"}.\"`, both entities are `city`, but has different role based on the position so I don't think we can define role in `SlotDefinition`.\r\n\r\nBased on above, I'm thinking of adding role/group pattern inside intent's sentence pattern, for example:\r\n```\r\n%[askFlight]\r\n        I want to fly from @[place](\"role\": \"departure\") to @[place](\"role\": \"destination\")\r\n```\r\nAs you can see, there can be an annotation pattern right after entity reference pattern. I've added this to the rule in my repository [right here](https://github.com/tomgun132/Chatette/commit/02e72f55c8f4fb36a7287dc73e934c7e797046b5#). As a result of adding it outside the entity reference, I will need to change something [around here](https://github.com/SimGus/Chatette/blob/master/chatette/parsing/parser.py#L382) to separate the `slot_ref` identifier from `alias_ref` and `intent_ref` and [add a function to detect whether there is an annotation after entity reference](https://github.com/tomgun132/Chatette/commit/95bdfa4bd4260aa6cba8c66f7c57dfa720c45def). There are some things that I'm still not sure about:\r\n- For the pattern, which one is better, the pattern I wrote above or to make the annotation inside entity ref, e.g. `@[place(\"role\": \"departure)]`?\r\n- Should the rule raise `ValueError` if there is a syntax error in matching annotation pattern?\r\n- I think the role/group information should be put inside `UnitReference` class and it should generate a `SlotUnit` class with the role/group information. However, I'm still looking for a way on where to do these processes. Do you have any advice on this? What I have in mind is to create a new `SlotReference` class that inherit from `UnitReference`, then override `_generate_random_strategy` and `_generate_all_strategy` functions.\r\n- as for implementing to other adapter, I'm not sure if markdown should be supported since Rasa has said that they [have deprecated markdown format](https://rasa.com/docs/rasa/training-data-format). But implementing adapter is quite easy compared to adding new pattern rules so I can do that. Let me know your thought on this.\r\n\r\nHope to hear something from you soon!\r\nCheers!","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/793496298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tomgun132","id":13296565,"node_id":"MDQ6VXNlcjEzMjk2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/13296565?v=4","gravatar_id":"","url":"https://api.github.com/users/tomgun132","html_url":"https://github.com/tomgun132","followers_url":"https://api.github.com/users/tomgun132/followers","following_url":"https://api.github.com/users/tomgun132/following{/other_user}","gists_url":"https://api.github.com/users/tomgun132/gists{/gist_id}","starred_url":"https://api.github.com/users/tomgun132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomgun132/subscriptions","organizations_url":"https://api.github.com/users/tomgun132/orgs","repos_url":"https://api.github.com/users/tomgun132/repos","events_url":"https://api.github.com/users/tomgun132/events{/privacy}","received_events_url":"https://api.github.com/users/tomgun132/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/800654231","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-800654231","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":800654231,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDY1NDIzMQ==","user":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false},"created_at":"2021-03-16T22:26:05Z","updated_at":"2021-03-16T22:26:05Z","author_association":"OWNER","body":"Hello,\r\n\r\nSorry for the late answer. I'm glad you are interested in implementing this!\r\n\r\nAbout the fact that roles and groups cannot be stored in `SlotDefinition` directly, you are right, I didn't think this through. It does make more sense to store this in the related intent definition.\r\n\r\nWe could even add a way to declare which values for roles and groups are expected for a given intent (e.g. the role `destination` makes sense for intent `bookFlight` but not intent `greet`). However, I would say it's not necessary in a first implementation: all roles/groups could be accepted for any slot inside any intent for now. Therefore I'm not sure it's even useful to have anything stored in the intent definition at all.\r\n\r\nAbout where you want to make changes (and the code you already wrote), I think you are on the right track. Be careful when modifying the parser though, it is a central and complicated part of the system and is easy to get wrong: just be sure that the unit tests are still working after you made your changes.\r\n\r\nFor the pattern, I'd go for `@[slot](\"role\": \"xyz\")` rather than `@[slot(\"role\": \"xyz\")]` as this is already what was done for intent annotations. That way, the annotation syntax is similar, making it easier for the user to remember. Plus, it might allow us to reuse more of the existing annotation code that way.\r\n\r\nFor the error to be raised when there is a syntax error, I'd say a `SyntaxError` is the best solution here. It is what I did for other cases like those ([see here for example](https://github.com/SimGus/Chatette/blob/fa01980b0e068e11a3453bcea2759435aeb098e3/chatette/parsing/parser.py#L125)).\r\n\r\nIt definitely sounds good to me to make a new subclass of `UnitReference` to store role/group information. Putting it directly in `UnitReference` wouldn't make much sense and would make code more complicated.\r\n`SlotReference` sounds like a very good name for it. It should indeed override both methods `_generate_random_strategy` and `_generate_all_strategy`. From what I can see, none of the other methods need to be overridden.\r\n\r\nAbout Rasa's markdown format, I actually didn't know it was deprecated (I didn't check in a few months). I'd prefer to continue supporting it until it actually gets removed from Rasa's codebase entirely, so I think this should be implemented for the relevant adapter as well. That being said, I'm not sure Rasa itself supports roles/groups in the markdown format (I can't find anything about this in their documentation). If it turns out they don't, then of course we don't need to modify this adapter.\r\n\r\nThat means the adapters that should be changed are:\r\n- the rasa (json) adapter\r\n- the jsonl adapter\r\n- the rasa markdown adapter (only if this feature is supported by Rasa)\r\n\r\nI hope this clears it up for you and you are still enthusiastic about implementing this.\r\nFeel free to ask any more question you would have!","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/800654231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/807986845","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-807986845","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":807986845,"node_id":"MDEyOklzc3VlQ29tbWVudDgwNzk4Njg0NQ==","user":{"login":"tomgun132","id":13296565,"node_id":"MDQ6VXNlcjEzMjk2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/13296565?v=4","gravatar_id":"","url":"https://api.github.com/users/tomgun132","html_url":"https://github.com/tomgun132","followers_url":"https://api.github.com/users/tomgun132/followers","following_url":"https://api.github.com/users/tomgun132/following{/other_user}","gists_url":"https://api.github.com/users/tomgun132/gists{/gist_id}","starred_url":"https://api.github.com/users/tomgun132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomgun132/subscriptions","organizations_url":"https://api.github.com/users/tomgun132/orgs","repos_url":"https://api.github.com/users/tomgun132/repos","events_url":"https://api.github.com/users/tomgun132/events{/privacy}","received_events_url":"https://api.github.com/users/tomgun132/received_events","type":"User","site_admin":false},"created_at":"2021-03-26T06:59:12Z","updated_at":"2021-03-26T06:59:12Z","author_association":"NONE","body":"Hello,\r\n\r\nI think I have almost finished the implementations of adding role/group to Chatette. As you said, I'm going with the pattern `@[slot](\"role\": \"xyz\")` because of the same reason you mentioned. However, for adding error to be raised, I think this is a bit tricky because I made the [logic in this part](https://github.com/tomgun132/Chatette/blob/rasa_role_group/chatette/parsing/lexing/rule_unit_ref.py#L84) to add role/group annotation if the pattern matches with `RuleAnnotation` class, otherwise it will be added as a normal word token. Therefore, if the annotation pattern is wrong or incomplete, `Parser` will add it as a `Word` rule. I think it's better to add a warning instead of a `SyntaxError` in the `rule_unit_ref.py`. What do you think about this?\r\n\r\nI've also created a new subclass of `UnitReference` called `SlotRoleGroupReference` since Slot reference without role/group will still be handled by `UnitReference` after all. To call this new subclass, I [added a new logic inside the `Parser` class to separate the `TerminalType.slot_ref_end` from other unit reference type](https://github.com/tomgun132/Chatette/blob/rasa_role_group/chatette/parsing/parser.py#L406). If slot end token detected, it will then check whether there is an annotation or not after the slot. If there is an annotation, then the role/group annotation will be added to current builder, which's supposed to be `UnitRefBuilder`. I edited the function `create_concrete` inside `UnitRefBuilder` to [return the newly created subclass `SlotRoleGroupReference` if it has the role/group annotation inside the class](https://github.com/tomgun132/Chatette/blob/rasa_role_group/chatette/parsing/__init__.py#L112). \r\n\r\nAs for the Adapter, rasa (json) and jsonl adapter are automatically implemented after[ I added role and/or group into `as_dict` function in the `Entity` unit class](https://github.com/tomgun132/Chatette/blob/rasa_role_group/chatette/units/__init__.py#L157). As for markdown and also the new yaml format adapter, you can see it here:\r\n- markdown adapter: https://github.com/tomgun132/Chatette/blob/rasa_role_group/chatette/adapters/rasa_md.py#L78\r\n- yaml adapter: https://github.com/tomgun132/Chatette/blob/rasa_role_group/chatette/adapters/rasa_yml.py#L70\r\n\r\nIf you notice, I also added the inline entity value (as requested [here](https://github.com/SimGus/Chatette/issues/46)) for entities with synonyms for both markdown and yaml. The `rasa_role_group` branch in the forked repository has passed the current unit tests. However, I think I should add new test for this implementation.\r\n\r\nThere are few things that I still need to do:\r\n- complete the yaml adapter by implementing `_get_base_to_extend` and `check_base_file_contents` functions\r\n- added `ruamel.yaml` to the requirements when installing. This is my first time doing this, so do I just need to add the new dependency to `setup.py`?\r\n- add new unit tests for this implementation(?)\r\n\r\nIf you have any more suggestions, please tell me.\r\n\r\nCheers!\r\n","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/807986845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tomgun132","id":13296565,"node_id":"MDQ6VXNlcjEzMjk2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/13296565?v=4","gravatar_id":"","url":"https://api.github.com/users/tomgun132","html_url":"https://github.com/tomgun132","followers_url":"https://api.github.com/users/tomgun132/followers","following_url":"https://api.github.com/users/tomgun132/following{/other_user}","gists_url":"https://api.github.com/users/tomgun132/gists{/gist_id}","starred_url":"https://api.github.com/users/tomgun132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomgun132/subscriptions","organizations_url":"https://api.github.com/users/tomgun132/orgs","repos_url":"https://api.github.com/users/tomgun132/repos","events_url":"https://api.github.com/users/tomgun132/events{/privacy}","received_events_url":"https://api.github.com/users/tomgun132/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/810538804","html_url":"https://github.com/SimGus/Chatette/issues/48#issuecomment-810538804","issue_url":"https://api.github.com/repos/SimGus/Chatette/issues/48","id":810538804,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDUzODgwNA==","user":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false},"created_at":"2021-03-30T19:59:36Z","updated_at":"2021-03-30T19:59:36Z","author_association":"OWNER","body":"Hey!\r\n\r\nProps to you for implementing most of this so fast!\r\n\r\nAbout the fact that you can't raise an error if the annotation syntax is not correct, you are actually right.\r\nI would have suggested not saying anything in that case to avoid cluttering the output, but it makes sense to write a warning since it will be useful to the user in a majority of cases.\r\n\r\nThat being said, I don't see how we can easily detect that what is after a slot is an incorrect annotation. For instance, I assume those examples should raise a warning:\r\n```chatette\r\n@[slot]('problem': 'not closed'\r\n@[slot]\"problem': 'not opened')\r\n@[slot](incorrect annotation contents)\r\n```\r\nbut this shouldn't\r\n```chatette\r\n@[slot]some word\r\n```\r\nDid you have something in mind to avoid raising a warning for every slot that doesn't have an annotation?\r\n\r\nAs I said above, if it turns out it's hard to detect that the user mistyped an annotation, it seems acceptable to me to not print any warning whatsoever.\r\n\r\nThe way you made the changes to the parser is exactly how I would have done it :)\r\nAbout the adapters, it looks very good, but if I can make one remark: chatette is still supporting older versions of python (notably version 2.7 and 3.4 -- I think I'll drop support for both of them soon, but I first need to deprecate them for a few versions). For that reason, we cannot use f-strings in the code yet (even though I'd really like to). It's usually not too hard to replace them with `str.format()`.\r\n\r\nThanks for adding support for inline entities at the same time. If you think adding a few tests can help catching errors quickly, feel free to do it. I'm not aiming at 100% coverage, just enough coverage to catch big mistakes when refactoring.\r\nBtw, thanks for making the yaml adapter as well :)\r\n\r\nIf you can, it would be nice to add a unit test that checks the parser is correctly parsing annotations for slots. Maybe a few tests for the new `SlotRoleGroupReference` could be valuable as well.\r\n\r\nFor the new dependency, you will need to add it in `setup.py` (this allows pip to install the dependencies automatically) and in `requirements/common.txt` (this allows to manually install the dependencies, for instance when setting up a venv). After that, everything should be working.\r\n\r\nWhen you are done with the implementation, can you please open a pull request so I can review it more in depth and merge it?\r\n\r\nCheers!","reactions":{"url":"https://api.github.com/repos/SimGus/Chatette/issues/comments/810538804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SimGus","id":20604236,"node_id":"MDQ6VXNlcjIwNjA0MjM2","avatar_url":"https://avatars.githubusercontent.com/u/20604236?v=4","gravatar_id":"","url":"https://api.github.com/users/SimGus","html_url":"https://github.com/SimGus","followers_url":"https://api.github.com/users/SimGus/followers","following_url":"https://api.github.com/users/SimGus/following{/other_user}","gists_url":"https://api.github.com/users/SimGus/gists{/gist_id}","starred_url":"https://api.github.com/users/SimGus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimGus/subscriptions","organizations_url":"https://api.github.com/users/SimGus/orgs","repos_url":"https://api.github.com/users/SimGus/repos","events_url":"https://api.github.com/users/SimGus/events{/privacy}","received_events_url":"https://api.github.com/users/SimGus/received_events","type":"User","site_admin":false}}]