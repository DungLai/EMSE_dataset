{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/471","repository_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab","labels_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/471/labels{/name}","comments_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/471/comments","events_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/471/events","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/471","id":750495836,"node_id":"MDU6SXNzdWU3NTA0OTU4MzY=","number":471,"title":"Trouble adding vertical barriers to CUSUM output","user":{"login":"vjtrost88","id":19673777,"node_id":"MDQ6VXNlcjE5NjczNzc3","avatar_url":"https://avatars.githubusercontent.com/u/19673777?v=4","gravatar_id":"","url":"https://api.github.com/users/vjtrost88","html_url":"https://github.com/vjtrost88","followers_url":"https://api.github.com/users/vjtrost88/followers","following_url":"https://api.github.com/users/vjtrost88/following{/other_user}","gists_url":"https://api.github.com/users/vjtrost88/gists{/gist_id}","starred_url":"https://api.github.com/users/vjtrost88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vjtrost88/subscriptions","organizations_url":"https://api.github.com/users/vjtrost88/orgs","repos_url":"https://api.github.com/users/vjtrost88/repos","events_url":"https://api.github.com/users/vjtrost88/events{/privacy}","received_events_url":"https://api.github.com/users/vjtrost88/received_events","type":"User","site_admin":false},"labels":[{"id":1232033405,"node_id":"MDU6TGFiZWwxMjMyMDMzNDA1","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/labels/question","name":"question","color":"d876e3","default":true,"description":"Further information is requested"},{"id":1232033406,"node_id":"MDU6TGFiZWwxMjMyMDMzNDA2","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"This will not be worked on"}],"state":"closed","locked":false,"assignee":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"assignees":[{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-11-25T06:01:44Z","updated_at":"2021-01-20T23:24:26Z","closed_at":"2021-01-20T23:24:26Z","author_association":"NONE","active_lock_reason":null,"body":"**Python version:** 3.7.6\r\n**mlfinlab version:** 0.15.0\r\n\r\nI'm working through the Chapter 3 exercises in AFML on p 55, specifically problem 3.1. \r\n\r\nInstead of the E-mini S&P 500 futures, I'm using a XBT futures dataset. I had no problem forming dollar bars with this tick data so I'm confident that's not the issue here.\r\n\r\nPart (a) says to apply a CUSUM filter where the threshold is the std dev of daily returns. Things started to get weird here...\r\n\r\nI didn't specify the `time_stamps` param which defaults to true, and it seems to be appending the index of my events to the beginning of unix time. **(possible bug number 1 at chunk 8)**\r\n\r\n-----------\r\n\r\n<img width=\"869\" alt=\"image\" src=\"https://user-images.githubusercontent.com/19673777/100189122-a5c65c80-2eb9-11eb-881c-2449641effa0.png\">\r\n\r\n\r\n-----------\r\n\r\nI thought \"no big deal, I can set `time_stamps=False` and use the indices to subset the correct `date_time`s. It made sense to me that the goal here was to get the timestamps where the events are, correct me if I'm missing something. This worked:\r\n\r\n-----------\r\n<img width=\"852\" alt=\"image\" src=\"https://user-images.githubusercontent.com/19673777/100188901-38b2c700-2eb9-11eb-9d68-9c04e5f2fc66.png\">\r\n\r\n-----------\r\n\r\nPart (b) of the question says to use Snippet 3.4 on a pandas series `t1`, where `numDays=1`. I knew `mlfinlab` had that snippet implemented as the `add_vertical_barrier` function, so I read the dosctring and tried to use it. I noticed my events were closer together than 1 day, so I adjusted accordingly. Here was my output **(possible bug number 2)**:\r\n\r\n-----------\r\n\r\n<img width=\"1284\" alt=\"image\" src=\"https://user-images.githubusercontent.com/19673777/100188237-cc839380-2eb7-11eb-9954-03446ef70e21.png\">\r\n\r\n-----------\r\n\r\nI need timestamps of vertical barriers to go on and use them in the `get_events` function if I'm understanding things correctly. However, I'm stumped by this \"invalid type promotion\" error. Please let me know if I've gone wrong somewhere in the usage. Apologies for the verbosity as well, but I've been thoroughly enjoying learning/implementing thus far. \r\n\r\nThanks for all the hard work and thanks for the help in advance.","closed_by":{"login":"vjtrost88","id":19673777,"node_id":"MDQ6VXNlcjE5NjczNzc3","avatar_url":"https://avatars.githubusercontent.com/u/19673777?v=4","gravatar_id":"","url":"https://api.github.com/users/vjtrost88","html_url":"https://github.com/vjtrost88","followers_url":"https://api.github.com/users/vjtrost88/followers","following_url":"https://api.github.com/users/vjtrost88/following{/other_user}","gists_url":"https://api.github.com/users/vjtrost88/gists{/gist_id}","starred_url":"https://api.github.com/users/vjtrost88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vjtrost88/subscriptions","organizations_url":"https://api.github.com/users/vjtrost88/orgs","repos_url":"https://api.github.com/users/vjtrost88/repos","events_url":"https://api.github.com/users/vjtrost88/events{/privacy}","received_events_url":"https://api.github.com/users/vjtrost88/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/471/timeline","performed_via_github_app":null,"state_reason":"completed"}