{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/173","repository_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab","labels_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/173/labels{/name}","comments_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/173/comments","events_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/173/events","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/173","id":554998312,"node_id":"MDU6SXNzdWU1NTQ5OTgzMTI=","number":173,"title":"Incorrect date and close price at Time Bars","user":{"login":"ro99","id":2497240,"node_id":"MDQ6VXNlcjI0OTcyNDA=","avatar_url":"https://avatars.githubusercontent.com/u/2497240?v=4","gravatar_id":"","url":"https://api.github.com/users/ro99","html_url":"https://github.com/ro99","followers_url":"https://api.github.com/users/ro99/followers","following_url":"https://api.github.com/users/ro99/following{/other_user}","gists_url":"https://api.github.com/users/ro99/gists{/gist_id}","starred_url":"https://api.github.com/users/ro99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ro99/subscriptions","organizations_url":"https://api.github.com/users/ro99/orgs","repos_url":"https://api.github.com/users/ro99/repos","events_url":"https://api.github.com/users/ro99/events{/privacy}","received_events_url":"https://api.github.com/users/ro99/received_events","type":"User","site_admin":false},"labels":[{"id":1232033387,"node_id":"MDU6TGFiZWwxMjMyMDMzMzg3","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"artem-matiash","id":29844433,"node_id":"MDQ6VXNlcjI5ODQ0NDMz","avatar_url":"https://avatars.githubusercontent.com/u/29844433?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-matiash","html_url":"https://github.com/artem-matiash","followers_url":"https://api.github.com/users/artem-matiash/followers","following_url":"https://api.github.com/users/artem-matiash/following{/other_user}","gists_url":"https://api.github.com/users/artem-matiash/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-matiash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-matiash/subscriptions","organizations_url":"https://api.github.com/users/artem-matiash/orgs","repos_url":"https://api.github.com/users/artem-matiash/repos","events_url":"https://api.github.com/users/artem-matiash/events{/privacy}","received_events_url":"https://api.github.com/users/artem-matiash/received_events","type":"User","site_admin":false},"assignees":[{"login":"artem-matiash","id":29844433,"node_id":"MDQ6VXNlcjI5ODQ0NDMz","avatar_url":"https://avatars.githubusercontent.com/u/29844433?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-matiash","html_url":"https://github.com/artem-matiash","followers_url":"https://api.github.com/users/artem-matiash/followers","following_url":"https://api.github.com/users/artem-matiash/following{/other_user}","gists_url":"https://api.github.com/users/artem-matiash/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-matiash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-matiash/subscriptions","organizations_url":"https://api.github.com/users/artem-matiash/orgs","repos_url":"https://api.github.com/users/artem-matiash/repos","events_url":"https://api.github.com/users/artem-matiash/events{/privacy}","received_events_url":"https://api.github.com/users/artem-matiash/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-01-24T23:15:16Z","updated_at":"2020-02-03T12:23:02Z","closed_at":"2020-02-03T12:22:37Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nWhile generating time bars we observe that the Bar Generation condition is reached at an unexpected time i.e. during the first entry of the next date, while it is expected that it should reach in the last entry of current date.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. put a breakpoint on line 65 of time_data_structures.py.\r\n2. call get_time_bars.\r\n3. observe the TimeStamp from **row** entry.\r\n\r\n**Expected behavior**\r\nAt the moment that the Bar Generation criteria is reached it is expected that the current row would contain information from last line of current date (since close_price = price and date_time = self.timestamp). But the row at this time contains the information from the first line of the next date.\r\n\r\n**Screenshots**\r\nThe consolidated information (open, low and high) is from 2019-09-10 but the date that is send to _create_bars is from date 2019-09-11 and (close) price 13.63 (instead of 13.52).\r\n\r\n<img width=\"1613\" alt=\"example\" src=\"https://user-images.githubusercontent.com/2497240/73110617-df1eec00-3ee5-11ea-8b78-84f5f363b280.png\">\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: macOS 10.15\r\n\r\n**Additional context**\r\nI have compared the values with know OHLC sources, and observed that the calculated close price does not match, and the date is shifted+1.\r\n\r\n","closed_by":{"login":"artem-matiash","id":29844433,"node_id":"MDQ6VXNlcjI5ODQ0NDMz","avatar_url":"https://avatars.githubusercontent.com/u/29844433?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-matiash","html_url":"https://github.com/artem-matiash","followers_url":"https://api.github.com/users/artem-matiash/followers","following_url":"https://api.github.com/users/artem-matiash/following{/other_user}","gists_url":"https://api.github.com/users/artem-matiash/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-matiash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-matiash/subscriptions","organizations_url":"https://api.github.com/users/artem-matiash/orgs","repos_url":"https://api.github.com/users/artem-matiash/repos","events_url":"https://api.github.com/users/artem-matiash/events{/privacy}","received_events_url":"https://api.github.com/users/artem-matiash/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/173/timeline","performed_via_github_app":null,"state_reason":"completed"}