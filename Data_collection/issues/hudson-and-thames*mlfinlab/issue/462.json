{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/462","repository_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab","labels_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/462/labels{/name}","comments_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/462/comments","events_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/462/events","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/462","id":714545194,"node_id":"MDU6SXNzdWU3MTQ1NDUxOTQ=","number":462,"title":"Error in pairs trading example","user":{"login":"andrewcztrack","id":65228188,"node_id":"MDQ6VXNlcjY1MjI4MTg4","avatar_url":"https://avatars.githubusercontent.com/u/65228188?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewcztrack","html_url":"https://github.com/andrewcztrack","followers_url":"https://api.github.com/users/andrewcztrack/followers","following_url":"https://api.github.com/users/andrewcztrack/following{/other_user}","gists_url":"https://api.github.com/users/andrewcztrack/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewcztrack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewcztrack/subscriptions","organizations_url":"https://api.github.com/users/andrewcztrack/orgs","repos_url":"https://api.github.com/users/andrewcztrack/repos","events_url":"https://api.github.com/users/andrewcztrack/events{/privacy}","received_events_url":"https://api.github.com/users/andrewcztrack/received_events","type":"User","site_admin":false},"labels":[{"id":1232033387,"node_id":"MDU6TGFiZWwxMjMyMDMzMzg3","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"assignees":[{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-10-05T06:14:28Z","updated_at":"2020-10-06T10:16:03Z","closed_at":"2020-10-06T10:16:02Z","author_association":"NONE","active_lock_reason":null,"body":"Hi all!,\r\n\r\nI am trying the below example and getting the below error-\r\n\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nimport yfinance as yf\r\nfrom mlfinlab.optimal_mean_reversion import OrnsteinUhlenbeck\r\n\r\n\r\n# Import data from Yahoo finance\r\ndata1 =  yf.download(\"GLD GDX\", start=\"2015-08-25\", end=\"2016-12-09\")\r\ndata2 =  yf.download(\"GLD GDX\", start=\"2016-12-10\", end=\"2017-03-09\")\r\n\r\n# Create training dataset as an array of two asset prices\r\ndata_train = np.array(data1[\"Adj Close\"])\r\n\r\n# Create an out-of-sample dataset\r\ndata_oos = np.array(data2[\"Adj Close\"])\r\n\r\n# Create the class object\r\nexample = OrnsteinUhlenbeck()\r\n\r\n# Fit the model to the training data and allocate data frequency,\r\n# transaction costs, discount rates and stop-loss level\r\nexample.fit(data_train, data_frequency=\"D\", discount_rate=[0.05, 0.05],\r\n            transaction_cost=[0.02, 0.02], stop_loss=0.5)\r\n\r\n# The parameters can be also allocated in an alternative way\r\nexample.fit(data_train, data_frequency=\"D\", discount_rate=0.5,\r\n            transaction_cost=0.2, stop_loss=0.5)\r\n\r\n# You can also use the pd.DataFrame as an input data\r\nexample.fit(data_train, data_frequency=\"D\", discount_rate=[0.05, 0.05],\r\n            transaction_cost=[0.02, 0.02], stop_loss=0.5)\r\n\r\n# In this case you can also specify the training interval you would like to use\r\nexample.fit(data_train, data_frequency=\"D\", discount_rate=[0.05, 0.05],\r\n            start=\"2015-10-25\", end=\"2016-11-09\",\r\n            transaction_cost=[0.02, 0.02], stop_loss=0.5)\r\n\r\n# Stop-loss level, transaction costs and discount rates\r\n# can be changed along the way\r\nexample.L = 0.5\r\n\r\n# Check the model fit\r\nexample.check_fit()\r\n\r\n# Calculate the optimal liquidation level\r\nb = example.optimal_entry_level()\r\n\r\n# Calculate the optimal entry level\r\nd = example.optimal_entry_level()\r\n\r\n# Calculate the optimal liquidation level accounting for stop-loss\r\nb_L = example.optimal_liquidation_level_stop_loss()\r\n\r\n# Calculate the optimal entry interval accounting for stop-loss\r\nd_L = example.optimal_entry_interval_stop_loss()\r\n\r\n# Showcase the data for both variations of the problem on the out of sample data\r\nexample.plot_levels(data_oos, stop_loss=True)\r\n\r\n# Call the description function to see all the model's parameters and optimal levels\r\nexample.description()\r\n\r\n# Retrain the model\r\n# By changing the training interval\r\nexample.fit_to_assets(start=\"2015-08-25\", end=\"2016-12-09\")\r\n# By changing the input data\r\nexample.fit_to_assets(data=data_oos)\r\n# By using the simulated OU process\r\nexample.fit_to_portfolio(ou_model_simulation(400))\r\n\r\n\r\n[*********************100%***********************]  2 of 2 completed\r\n[*********************100%***********************]  2 of 2 completed\r\n---------------------------------------------------------------------------\r\nException                                 Traceback (most recent call last)\r\n<ipython-input-5-11aac0f89ad5> in <module>\r\n     54 \r\n     55 # Calculate the optimal entry interval accounting for stop-loss\r\n---> 56 d_L = example.optimal_entry_interval_stop_loss()\r\n     57 \r\n     58 # Showcase the data for both variations of the problem on the out of sample data\r\n\r\n~/miniconda3/envs/test/lib/python3.7/site-packages/mlfinlab/optimal_mean_reversion/ou_model.py in optimal_entry_interval_stop_loss(self)\r\n    843         # Checking for the necessary condition\r\n    844         if not self._parameter_check():\r\n--> 845             raise Exception(\"Please adjust your stop-loss level\")\r\n    846 \r\n    847         # If the entry level wasn't calculated before, set it\r\n\r\nException: Please adjust your stop-loss level\r\n\r\n```\r\n","closed_by":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/462/timeline","performed_via_github_app":null,"state_reason":"completed"}