{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/446","repository_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab","labels_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/446/labels{/name}","comments_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/446/comments","events_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/446/events","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/446","id":675571074,"node_id":"MDU6SXNzdWU2NzU1NzEwNzQ=","number":446,"title":"cannot run HierarchicalRiskParity","user":{"login":"rconnor0001","id":67652360,"node_id":"MDQ6VXNlcjY3NjUyMzYw","avatar_url":"https://avatars.githubusercontent.com/u/67652360?v=4","gravatar_id":"","url":"https://api.github.com/users/rconnor0001","html_url":"https://github.com/rconnor0001","followers_url":"https://api.github.com/users/rconnor0001/followers","following_url":"https://api.github.com/users/rconnor0001/following{/other_user}","gists_url":"https://api.github.com/users/rconnor0001/gists{/gist_id}","starred_url":"https://api.github.com/users/rconnor0001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rconnor0001/subscriptions","organizations_url":"https://api.github.com/users/rconnor0001/orgs","repos_url":"https://api.github.com/users/rconnor0001/repos","events_url":"https://api.github.com/users/rconnor0001/events{/privacy}","received_events_url":"https://api.github.com/users/rconnor0001/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"aditya1702","id":15054664,"node_id":"MDQ6VXNlcjE1MDU0NjY0","avatar_url":"https://avatars.githubusercontent.com/u/15054664?v=4","gravatar_id":"","url":"https://api.github.com/users/aditya1702","html_url":"https://github.com/aditya1702","followers_url":"https://api.github.com/users/aditya1702/followers","following_url":"https://api.github.com/users/aditya1702/following{/other_user}","gists_url":"https://api.github.com/users/aditya1702/gists{/gist_id}","starred_url":"https://api.github.com/users/aditya1702/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aditya1702/subscriptions","organizations_url":"https://api.github.com/users/aditya1702/orgs","repos_url":"https://api.github.com/users/aditya1702/repos","events_url":"https://api.github.com/users/aditya1702/events{/privacy}","received_events_url":"https://api.github.com/users/aditya1702/received_events","type":"User","site_admin":false},"assignees":[{"login":"aditya1702","id":15054664,"node_id":"MDQ6VXNlcjE1MDU0NjY0","avatar_url":"https://avatars.githubusercontent.com/u/15054664?v=4","gravatar_id":"","url":"https://api.github.com/users/aditya1702","html_url":"https://github.com/aditya1702","followers_url":"https://api.github.com/users/aditya1702/followers","following_url":"https://api.github.com/users/aditya1702/following{/other_user}","gists_url":"https://api.github.com/users/aditya1702/gists{/gist_id}","starred_url":"https://api.github.com/users/aditya1702/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aditya1702/subscriptions","organizations_url":"https://api.github.com/users/aditya1702/orgs","repos_url":"https://api.github.com/users/aditya1702/repos","events_url":"https://api.github.com/users/aditya1702/events{/privacy}","received_events_url":"https://api.github.com/users/aditya1702/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2020-08-08T18:50:08Z","updated_at":"2020-08-09T13:53:44Z","closed_at":"2020-08-09T13:53:44Z","author_association":"NONE","active_lock_reason":null,"body":"the code is from url: https://hudsonthames.org/portfolio-optimisation-with-mlfinlab-hierarchical-risk-parity/\r\n\r\n```\r\nimport pandas as pd\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib.patches as mpatches\r\nfrom mlfinlab.portfolio_optimization import HierarchicalRiskParity\r\n\r\nprices = pd.read_csv(r'W:\\user\\stats\\Machine Learning\\ML Code tests\\assetalloc1.csv', \r\n                         parse_dates=True, \r\n                         index_col='Dates')\r\n\r\nprice = prices.sort_values(by='Dates')\r\n\r\n# constructing HRP portfolio - Single Linkage\r\n\r\nhrp = HierarchicalRiskParity()\r\n\r\nhrp.allocate(asset_names=prices.columns,\r\n             asset_prices=prices,\r\n             linkage='single')\r\n```\r\n\r\nThe received error is:\r\n\r\n```\r\nruncell(0, 'W:/User/stats/Machine Learning/ML Code tests/hudson and thames optimization model test.py')\r\nTraceback (most recent call last):\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\array_ops.py\", line 149, in na_arithmetic_op\r\n    result = expressions.evaluate(op, str_rep, left, right)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\computation\\expressions.py\", line 208, in evaluate\r\n    return _evaluate(op, op_str, a, b)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\computation\\expressions.py\", line 121, in _evaluate_numexpr\r\n    result = _evaluate_standard(op, op_str, a, b)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\computation\\expressions.py\", line 70, in _evaluate_standard\r\n    return op(a, b)\r\n\r\nTypeError: unsupported operand type(s) for /: 'str' and 'float'\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"W:\\User\\stats\\Machine Learning\\ML Code tests\\hudson and thames optimization model test.py\", line 26, in <module>\r\n    linkage='single')\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\mlfinlab\\portfolio_optimization\\hrp.py\", line 72, in allocate\r\n    asset_returns = self.returns_estimator.calculate_returns(asset_prices=asset_prices)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\mlfinlab\\portfolio_optimization\\returns_estimators.py\", line 68, in calculate_returns\r\n    asset_returns = asset_prices.pct_change()\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\generic.py\", line 10086, in pct_change\r\n    rs = data.div(data.shift(periods=periods, freq=freq, axis=axis, **kwargs)) - 1\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\__init__.py\", line 767, in f\r\n    new_data = left._combine_frame(right, pass_op, fill_value)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\frame.py\", line 5300, in _combine_frame\r\n    new_data = ops.dispatch_to_series(self, other, _arith_op)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\__init__.py\", line 419, in dispatch_to_series\r\n    new_data = expressions.evaluate(column_op, str_rep, left, right)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\computation\\expressions.py\", line 208, in evaluate\r\n    return _evaluate(op, op_str, a, b)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\computation\\expressions.py\", line 121, in _evaluate_numexpr\r\n    result = _evaluate_standard(op, op_str, a, b)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\computation\\expressions.py\", line 70, in _evaluate_standard\r\n    return op(a, b)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\__init__.py\", line 388, in column_op\r\n    return {i: func(a.iloc[:, i], b.iloc[:, i]) for i in range(len(a.columns))}\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\__init__.py\", line 388, in <dictcomp>\r\n    return {i: func(a.iloc[:, i], b.iloc[:, i]) for i in range(len(a.columns))}\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\common.py\", line 64, in new_method\r\n    return method(self, other)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\__init__.py\", line 503, in wrapper\r\n    result = arithmetic_op(lvalues, rvalues, op, str_rep)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\array_ops.py\", line 197, in arithmetic_op\r\n    res_values = na_arithmetic_op(lvalues, rvalues, op, str_rep)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\array_ops.py\", line 151, in na_arithmetic_op\r\n    result = masked_arith_op(left, right, op)\r\n\r\n  File \"C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\site-packages\\pandas\\core\\ops\\array_ops.py\", line 94, in masked_arith_op\r\n    result[mask] = op(xrav[mask], yrav[mask])\r\n\r\nTypeError: unsupported operand type(s) for /: 'str' and 'str'\r\n\r\n```\r\n\r\nThis is odd because the code was running fine until Friday evening. \r\n\r\nYour tools are much appreciated... thanks in advance for any help!","closed_by":{"login":"rconnor0001","id":67652360,"node_id":"MDQ6VXNlcjY3NjUyMzYw","avatar_url":"https://avatars.githubusercontent.com/u/67652360?v=4","gravatar_id":"","url":"https://api.github.com/users/rconnor0001","html_url":"https://github.com/rconnor0001","followers_url":"https://api.github.com/users/rconnor0001/followers","following_url":"https://api.github.com/users/rconnor0001/following{/other_user}","gists_url":"https://api.github.com/users/rconnor0001/gists{/gist_id}","starred_url":"https://api.github.com/users/rconnor0001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rconnor0001/subscriptions","organizations_url":"https://api.github.com/users/rconnor0001/orgs","repos_url":"https://api.github.com/users/rconnor0001/repos","events_url":"https://api.github.com/users/rconnor0001/events{/privacy}","received_events_url":"https://api.github.com/users/rconnor0001/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/446/timeline","performed_via_github_app":null,"state_reason":"completed"}