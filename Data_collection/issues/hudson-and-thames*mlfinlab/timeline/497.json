[{"id":4859617799,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQ0ODU5NjE3Nzk5","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/events/4859617799","actor":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2021-06-08T16:17:42Z","assignee":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"performed_via_github_app":null},{"id":4859618324,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4NTk2MTgzMjQ=","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/events/4859618324","actor":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-06-08T16:17:48Z","label":{"name":"question","color":"d876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/comments/856911491","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/497#issuecomment-856911491","issue_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/497","id":856911491,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjkxMTQ5MQ==","user":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"created_at":"2021-06-08T16:21:23Z","updated_at":"2021-06-08T16:21:23Z","author_association":"MEMBER","body":"Hi @cl7805,\r\n\r\nThank you for reaching out. Could you please describe to which MlFinLab module/function are you referring?\r\n\r\nOr is the question only related to the \"Advances in Financial Machine Learning\" book?","reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/comments/856911491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false}},{"id":4859641380,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDg1OTY0MTM4MA==","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/events/4859641380","actor":{"login":"cl7805","id":70287691,"node_id":"MDQ6VXNlcjcwMjg3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/70287691?v=4","gravatar_id":"","url":"https://api.github.com/users/cl7805","html_url":"https://github.com/cl7805","followers_url":"https://api.github.com/users/cl7805/followers","following_url":"https://api.github.com/users/cl7805/following{/other_user}","gists_url":"https://api.github.com/users/cl7805/gists{/gist_id}","starred_url":"https://api.github.com/users/cl7805/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cl7805/subscriptions","organizations_url":"https://api.github.com/users/cl7805/orgs","repos_url":"https://api.github.com/users/cl7805/repos","events_url":"https://api.github.com/users/cl7805/events{/privacy}","received_events_url":"https://api.github.com/users/cl7805/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-06-08T16:21:24Z","performed_via_github_app":null},{"id":4859641383,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ4NTk2NDEzODM=","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/events/4859641383","actor":{"login":"cl7805","id":70287691,"node_id":"MDQ6VXNlcjcwMjg3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/70287691?v=4","gravatar_id":"","url":"https://api.github.com/users/cl7805","html_url":"https://github.com/cl7805","followers_url":"https://api.github.com/users/cl7805/followers","following_url":"https://api.github.com/users/cl7805/following{/other_user}","gists_url":"https://api.github.com/users/cl7805/gists{/gist_id}","starred_url":"https://api.github.com/users/cl7805/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cl7805/subscriptions","organizations_url":"https://api.github.com/users/cl7805/orgs","repos_url":"https://api.github.com/users/cl7805/repos","events_url":"https://api.github.com/users/cl7805/events{/privacy}","received_events_url":"https://api.github.com/users/cl7805/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-06-08T16:21:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/comments/867013744","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/497#issuecomment-867013744","issue_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/497","id":867013744,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzAxMzc0NA==","user":{"login":"cl7805","id":70287691,"node_id":"MDQ6VXNlcjcwMjg3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/70287691?v=4","gravatar_id":"","url":"https://api.github.com/users/cl7805","html_url":"https://github.com/cl7805","followers_url":"https://api.github.com/users/cl7805/followers","following_url":"https://api.github.com/users/cl7805/following{/other_user}","gists_url":"https://api.github.com/users/cl7805/gists{/gist_id}","starred_url":"https://api.github.com/users/cl7805/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cl7805/subscriptions","organizations_url":"https://api.github.com/users/cl7805/orgs","repos_url":"https://api.github.com/users/cl7805/repos","events_url":"https://api.github.com/users/cl7805/events{/privacy}","received_events_url":"https://api.github.com/users/cl7805/received_events","type":"User","site_admin":false},"created_at":"2021-06-23T17:10:07Z","updated_at":"2021-06-23T17:10:07Z","author_association":"NONE","body":"https://towardsdatascience.com/financial-machine-learning-part-1-labels-7eeed050f32e","reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/comments/867013744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cl7805","id":70287691,"node_id":"MDQ6VXNlcjcwMjg3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/70287691?v=4","gravatar_id":"","url":"https://api.github.com/users/cl7805","html_url":"https://github.com/cl7805","followers_url":"https://api.github.com/users/cl7805/followers","following_url":"https://api.github.com/users/cl7805/following{/other_user}","gists_url":"https://api.github.com/users/cl7805/gists{/gist_id}","starred_url":"https://api.github.com/users/cl7805/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cl7805/subscriptions","organizations_url":"https://api.github.com/users/cl7805/orgs","repos_url":"https://api.github.com/users/cl7805/repos","events_url":"https://api.github.com/users/cl7805/events{/privacy}","received_events_url":"https://api.github.com/users/cl7805/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/comments/867017216","html_url":"https://github.com/hudson-and-thames/mlfinlab/issues/497#issuecomment-867017216","issue_url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/497","id":867017216,"node_id":"MDEyOklzc3VlQ29tbWVudDg2NzAxNzIxNg==","user":{"login":"cl7805","id":70287691,"node_id":"MDQ6VXNlcjcwMjg3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/70287691?v=4","gravatar_id":"","url":"https://api.github.com/users/cl7805","html_url":"https://github.com/cl7805","followers_url":"https://api.github.com/users/cl7805/followers","following_url":"https://api.github.com/users/cl7805/following{/other_user}","gists_url":"https://api.github.com/users/cl7805/gists{/gist_id}","starred_url":"https://api.github.com/users/cl7805/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cl7805/subscriptions","organizations_url":"https://api.github.com/users/cl7805/orgs","repos_url":"https://api.github.com/users/cl7805/repos","events_url":"https://api.github.com/users/cl7805/events{/privacy}","received_events_url":"https://api.github.com/users/cl7805/received_events","type":"User","site_admin":false},"created_at":"2021-06-23T17:15:39Z","updated_at":"2021-06-23T17:15:39Z","author_association":"NONE","body":"def get_horizons(prices, delta=pd.Timedelta(days=1)):\r\n    t1 = prices.index.searchsorted(prices.index + delta)\r\n    t1 = t1[t1 < prices.shape[0]]\r\n    t1 = prices.index[t1]\r\n    t1 = pd.Series(t1, index=prices.index[:t1.shape[0]])\r\n    return t1\r\n\r\ndata_ohlc = data\r\ndata_ohlc = \\\r\ndata_ohlc.assign(threshold=get_vol(data_ohlc.Close)).dropna()\r\nt1=get_horizons(data_ohlc)\r\ndata_ohlc = data_ohlc.assign(t1=get_horizons(data_ohlc)).dropna()\r\nevents = data_ohlc[['t1', 'threshold']]  \r\nevents = events.assign(side=pd.Series(1, events.index)) # long only <---where the problem is highlighted\r\ntouches = get_touches(data_ohlc.Close, events, [1,1])\r\ntouches = get_labels(touches)\r\ndata_ohlc = data_ohlc.assign(label=touches.label)\r\n\r\n---------------------------------------------------------------------------\r\n\r\nKeyError                                  Traceback (most recent call last)\r\n\r\n/usr/local/lib/python3.7/dist-packages/pandas/core/indexes/base.py in get_loc(self, key, method, tolerance)\r\n   2897             try:\r\n-> 2898                 return self._engine.get_loc(casted_key)\r\n   2899             except KeyError as err:\r\n\r\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\r\n\r\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\r\n\r\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()\r\n\r\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.PyObjectHashTable.get_item()\r\n\r\nKeyError: Timestamp('2018-04-18 00:00:00')\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nKeyError                                  Traceback (most recent call last)\r\n\r\n3 frames\r\n\r\n/usr/local/lib/python3.7/dist-packages/pandas/core/indexes/base.py in get_loc(self, key, method, tolerance)\r\n   2898                 return self._engine.get_loc(casted_key)\r\n   2899             except KeyError as err:\r\n-> 2900                 raise KeyError(key) from err\r\n   2901 \r\n   2902         if tolerance is not None:\r\n\r\nKeyError: Timestamp('2018-04-18 00:00:00')","reactions":{"url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/comments/867017216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cl7805","id":70287691,"node_id":"MDQ6VXNlcjcwMjg3Njkx","avatar_url":"https://avatars.githubusercontent.com/u/70287691?v=4","gravatar_id":"","url":"https://api.github.com/users/cl7805","html_url":"https://github.com/cl7805","followers_url":"https://api.github.com/users/cl7805/followers","following_url":"https://api.github.com/users/cl7805/following{/other_user}","gists_url":"https://api.github.com/users/cl7805/gists{/gist_id}","starred_url":"https://api.github.com/users/cl7805/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cl7805/subscriptions","organizations_url":"https://api.github.com/users/cl7805/orgs","repos_url":"https://api.github.com/users/cl7805/repos","events_url":"https://api.github.com/users/cl7805/events{/privacy}","received_events_url":"https://api.github.com/users/cl7805/received_events","type":"User","site_admin":false}},{"id":7367281222,"node_id":"UNE_lADOCipPJs411mXtzwAAAAG3H8pG","url":"https://api.github.com/repos/hudson-and-thames/mlfinlab/issues/events/7367281222","actor":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2022-09-12T12:56:23Z","assignee":{"login":"PanPip","id":16906989,"node_id":"MDQ6VXNlcjE2OTA2OTg5","avatar_url":"https://avatars.githubusercontent.com/u/16906989?v=4","gravatar_id":"","url":"https://api.github.com/users/PanPip","html_url":"https://github.com/PanPip","followers_url":"https://api.github.com/users/PanPip/followers","following_url":"https://api.github.com/users/PanPip/following{/other_user}","gists_url":"https://api.github.com/users/PanPip/gists{/gist_id}","starred_url":"https://api.github.com/users/PanPip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PanPip/subscriptions","organizations_url":"https://api.github.com/users/PanPip/orgs","repos_url":"https://api.github.com/users/PanPip/repos","events_url":"https://api.github.com/users/PanPip/events{/privacy}","received_events_url":"https://api.github.com/users/PanPip/received_events","type":"User","site_admin":false},"performed_via_github_app":null}]