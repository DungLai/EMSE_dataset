{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/52","repository_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion","labels_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/52/labels{/name}","comments_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/52/comments","events_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/52/events","html_url":"https://github.com/fangchangma/self-supervised-depth-completion/issues/52","id":883523675,"node_id":"MDU6SXNzdWU4ODM1MjM2NzU=","number":52,"title":"Running Error in train mode sparse+photo","user":{"login":"hongshenggeng","id":35525333,"node_id":"MDQ6VXNlcjM1NTI1MzMz","avatar_url":"https://avatars.githubusercontent.com/u/35525333?v=4","gravatar_id":"","url":"https://api.github.com/users/hongshenggeng","html_url":"https://github.com/hongshenggeng","followers_url":"https://api.github.com/users/hongshenggeng/followers","following_url":"https://api.github.com/users/hongshenggeng/following{/other_user}","gists_url":"https://api.github.com/users/hongshenggeng/gists{/gist_id}","starred_url":"https://api.github.com/users/hongshenggeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hongshenggeng/subscriptions","organizations_url":"https://api.github.com/users/hongshenggeng/orgs","repos_url":"https://api.github.com/users/hongshenggeng/repos","events_url":"https://api.github.com/users/hongshenggeng/events{/privacy}","received_events_url":"https://api.github.com/users/hongshenggeng/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-05-10T06:43:34Z","updated_at":"2021-07-08T11:39:46Z","closed_at":"2021-05-14T03:13:07Z","author_association":"NONE","active_lock_reason":null,"body":"Hiï¼Œ Fangchang Ma:\r\n      After downloading the dataSet required and put them at the tree structure showed in readme, I try to run the demo using command \"python main.py --train-mode sparse+photo -b 6\". It meets error as follow:\r\n\r\n'''\r\n=> output: ../results/mode=sparse+photo.w1=0.1.w2=0.1.input=gd.resnet34.criterion=l2.lr=1e-05.bs=6.wd=0.pretrained=False.jitter=0.1.time=2021-05-10@12-35\r\nTrain Epoch: 0 [9290/14317]     lr=1e-05 t_Data=0.009(0.008) t_GPU=0.395(0.402)\r\n        RMSE=3337.93(10104.38) MAE=1233.75(5881.38) iRMSE=11.95(inf) iMAE=5.93(inf)\r\n        silog=11.96(nan) squared_rel=0.02(0.24) Delta1=0.954(0.600) REL=0.066(0.333)\r\n        Lg10=0.029(nan) Photometric=39.012(56.714)\r\n\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 362, in <module>\r\n    main()\r\n  File \"main.py\", line 349, in main\r\n    epoch)  # train for one epoch\r\n  File \"main.py\", line 171, in iterate\r\n    for i, batch_data in enumerate(loader):\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 435, in __next__\r\n    data = self._next_data()\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 1065, in _next_data\r\n    return self._process_data(data)\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 1111, in _process_data\r\n    data.reraise()\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/_utils.py\", line 428, in reraise\r\n    raise self.exc_type(msg)\r\nTypeError: Caught TypeError in DataLoader worker process 2.\r\nOriginal Traceback (most recent call last):\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/utils/data/_utils/worker.py\", line 198, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/home/hsg/data/software/anaconda/envs/hsg/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/home/hsg/data/proj/SSDC/self-supervised-depth-completion/dataloaders/kitti_loader.py\", line 306, in __getitem__\r\n    rgb, sparse, target, rgb_near = self.__getraw__(index)\r\n  File \"/home/hsg/data/proj/SSDC/self-supervised-depth-completion/dataloaders/kitti_loader.py\", line 300, in __getraw__\r\n    self.paths['gt'][index] is not None else None\r\n  File \"/home/hsg/data/proj/SSDC/self-supervised-depth-completion/dataloaders/kitti_loader.py\", line 156, in depth_read\r\n    depth_png = np.array(img_file, dtype=int)\r\nTypeError: int() argument must be a string, a bytes-like object or a number, not 'PngImageFile'\r\n'''\r\n\r\nCould anyone help me to solve the problem?\r\nOr provide some suggestion?\r\n\r\nThanks!","closed_by":{"login":"hongshenggeng","id":35525333,"node_id":"MDQ6VXNlcjM1NTI1MzMz","avatar_url":"https://avatars.githubusercontent.com/u/35525333?v=4","gravatar_id":"","url":"https://api.github.com/users/hongshenggeng","html_url":"https://github.com/hongshenggeng","followers_url":"https://api.github.com/users/hongshenggeng/followers","following_url":"https://api.github.com/users/hongshenggeng/following{/other_user}","gists_url":"https://api.github.com/users/hongshenggeng/gists{/gist_id}","starred_url":"https://api.github.com/users/hongshenggeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hongshenggeng/subscriptions","organizations_url":"https://api.github.com/users/hongshenggeng/orgs","repos_url":"https://api.github.com/users/hongshenggeng/repos","events_url":"https://api.github.com/users/hongshenggeng/events{/privacy}","received_events_url":"https://api.github.com/users/hongshenggeng/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/52/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/52/timeline","performed_via_github_app":null,"state_reason":"completed"}