[{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/530019521","html_url":"https://github.com/fangchangma/self-supervised-depth-completion/issues/30#issuecomment-530019521","issue_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/30","id":530019521,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDAxOTUyMQ==","user":{"login":"fangchangma","id":17073991,"node_id":"MDQ6VXNlcjE3MDczOTkx","avatar_url":"https://avatars.githubusercontent.com/u/17073991?v=4","gravatar_id":"","url":"https://api.github.com/users/fangchangma","html_url":"https://github.com/fangchangma","followers_url":"https://api.github.com/users/fangchangma/followers","following_url":"https://api.github.com/users/fangchangma/following{/other_user}","gists_url":"https://api.github.com/users/fangchangma/gists{/gist_id}","starred_url":"https://api.github.com/users/fangchangma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fangchangma/subscriptions","organizations_url":"https://api.github.com/users/fangchangma/orgs","repos_url":"https://api.github.com/users/fangchangma/repos","events_url":"https://api.github.com/users/fangchangma/events{/privacy}","received_events_url":"https://api.github.com/users/fangchangma/received_events","type":"User","site_admin":false},"created_at":"2019-09-10T16:36:05Z","updated_at":"2019-09-10T16:36:05Z","author_association":"OWNER","body":"Hey Chris,\r\n\r\nThanks for point this out -- the comment was outdated, and we are indeed doing bottom crop (same as the KITTI dataset).","reactions":{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/530019521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fangchangma","id":17073991,"node_id":"MDQ6VXNlcjE3MDczOTkx","avatar_url":"https://avatars.githubusercontent.com/u/17073991?v=4","gravatar_id":"","url":"https://api.github.com/users/fangchangma","html_url":"https://github.com/fangchangma","followers_url":"https://api.github.com/users/fangchangma/followers","following_url":"https://api.github.com/users/fangchangma/following{/other_user}","gists_url":"https://api.github.com/users/fangchangma/gists{/gist_id}","starred_url":"https://api.github.com/users/fangchangma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fangchangma/subscriptions","organizations_url":"https://api.github.com/users/fangchangma/orgs","repos_url":"https://api.github.com/users/fangchangma/repos","events_url":"https://api.github.com/users/fangchangma/events{/privacy}","received_events_url":"https://api.github.com/users/fangchangma/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/530032451","html_url":"https://github.com/fangchangma/self-supervised-depth-completion/issues/30#issuecomment-530032451","issue_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/30","id":530032451,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDAzMjQ1MQ==","user":{"login":"christian-lanius","id":1444164,"node_id":"MDQ6VXNlcjE0NDQxNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1444164?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-lanius","html_url":"https://github.com/christian-lanius","followers_url":"https://api.github.com/users/christian-lanius/followers","following_url":"https://api.github.com/users/christian-lanius/following{/other_user}","gists_url":"https://api.github.com/users/christian-lanius/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-lanius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-lanius/subscriptions","organizations_url":"https://api.github.com/users/christian-lanius/orgs","repos_url":"https://api.github.com/users/christian-lanius/repos","events_url":"https://api.github.com/users/christian-lanius/events{/privacy}","received_events_url":"https://api.github.com/users/christian-lanius/received_events","type":"User","site_admin":false},"created_at":"2019-09-10T17:09:12Z","updated_at":"2019-09-10T17:09:12Z","author_association":"NONE","body":"So does this mean that the adaptation of the intrinsics should be changed to:\r\n```\r\nK[0,2] = K[0,2] - 26 # from width = 1242 to 1216, with a 13-pixel cut on both sides\r\nK[1,2] = K[1,2] - 23 # from width = 375 to 352, with a 11.5-pixel cut on both sides\r\n```\r\nI crop my image to owidth, oheight, and then scale it by a factor imScale. Thus I changed the code in the kitti_loader as such (with my own intrinsics):\r\n```\r\n    orig_x, orig_y = 2208, 1242\r\n    K = np.zeros((3,3))\r\n    fx, fy, cx, cy = 1399.87, 1399.87, 1056.62, 597.53\r\n    K[0,0] = fx\r\n    K[0,2] = cx - (orig_x - owidth)/2\r\n    K[1,1] = fy\r\n    K[1,2] = cy - (orig_y - oheight)/2\r\n    K = scale*K\r\n    \r\n    K[2,2] = 1\r\n    return K\r\n```\r\nand in main.py@L82 to:\r\n```\r\nkitti_intrinsics = Intrinsics(int(owidth*imScale), int(oheight*imScale), fu, fv, cu, cv).cuda()\r\n```\r\nAre there any other locations in the code where the intrinsics are used? I did not find any, but I am experiencing similar problems to #19 ","reactions":{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/530032451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"christian-lanius","id":1444164,"node_id":"MDQ6VXNlcjE0NDQxNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1444164?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-lanius","html_url":"https://github.com/christian-lanius","followers_url":"https://api.github.com/users/christian-lanius/followers","following_url":"https://api.github.com/users/christian-lanius/following{/other_user}","gists_url":"https://api.github.com/users/christian-lanius/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-lanius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-lanius/subscriptions","organizations_url":"https://api.github.com/users/christian-lanius/orgs","repos_url":"https://api.github.com/users/christian-lanius/repos","events_url":"https://api.github.com/users/christian-lanius/events{/privacy}","received_events_url":"https://api.github.com/users/christian-lanius/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/537743141","html_url":"https://github.com/fangchangma/self-supervised-depth-completion/issues/30#issuecomment-537743141","issue_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/30","id":537743141,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzc0MzE0MQ==","user":{"login":"fangchangma","id":17073991,"node_id":"MDQ6VXNlcjE3MDczOTkx","avatar_url":"https://avatars.githubusercontent.com/u/17073991?v=4","gravatar_id":"","url":"https://api.github.com/users/fangchangma","html_url":"https://github.com/fangchangma","followers_url":"https://api.github.com/users/fangchangma/followers","following_url":"https://api.github.com/users/fangchangma/following{/other_user}","gists_url":"https://api.github.com/users/fangchangma/gists{/gist_id}","starred_url":"https://api.github.com/users/fangchangma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fangchangma/subscriptions","organizations_url":"https://api.github.com/users/fangchangma/orgs","repos_url":"https://api.github.com/users/fangchangma/repos","events_url":"https://api.github.com/users/fangchangma/events{/privacy}","received_events_url":"https://api.github.com/users/fangchangma/received_events","type":"User","site_admin":false},"created_at":"2019-10-03T01:06:09Z","updated_at":"2019-10-03T01:06:09Z","author_association":"OWNER","body":"> Are there any other locations in the code where the intrinsics are used?\r\n\r\nThere is an Intrinsics class in inverse_warp.py that performs similarly to your code. https://github.com/fangchangma/self-supervised-depth-completion/blob/898aa91f569adb1165fee82d4318025fae78546a/inverse_warp.py#L5\r\n\r\nIf you use VLP-32 as input, it is not surprising that the pretrained model does not work (since it was trained on HDL-64 lidars). Some finetuning on your own dataset might be necessary.","reactions":{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/537743141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fangchangma","id":17073991,"node_id":"MDQ6VXNlcjE3MDczOTkx","avatar_url":"https://avatars.githubusercontent.com/u/17073991?v=4","gravatar_id":"","url":"https://api.github.com/users/fangchangma","html_url":"https://github.com/fangchangma","followers_url":"https://api.github.com/users/fangchangma/followers","following_url":"https://api.github.com/users/fangchangma/following{/other_user}","gists_url":"https://api.github.com/users/fangchangma/gists{/gist_id}","starred_url":"https://api.github.com/users/fangchangma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fangchangma/subscriptions","organizations_url":"https://api.github.com/users/fangchangma/orgs","repos_url":"https://api.github.com/users/fangchangma/repos","events_url":"https://api.github.com/users/fangchangma/events{/privacy}","received_events_url":"https://api.github.com/users/fangchangma/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/548244585","html_url":"https://github.com/fangchangma/self-supervised-depth-completion/issues/30#issuecomment-548244585","issue_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/30","id":548244585,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODI0NDU4NQ==","user":{"login":"windyrobin","id":42018,"node_id":"MDQ6VXNlcjQyMDE4","avatar_url":"https://avatars.githubusercontent.com/u/42018?v=4","gravatar_id":"","url":"https://api.github.com/users/windyrobin","html_url":"https://github.com/windyrobin","followers_url":"https://api.github.com/users/windyrobin/followers","following_url":"https://api.github.com/users/windyrobin/following{/other_user}","gists_url":"https://api.github.com/users/windyrobin/gists{/gist_id}","starred_url":"https://api.github.com/users/windyrobin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windyrobin/subscriptions","organizations_url":"https://api.github.com/users/windyrobin/orgs","repos_url":"https://api.github.com/users/windyrobin/repos","events_url":"https://api.github.com/users/windyrobin/events{/privacy}","received_events_url":"https://api.github.com/users/windyrobin/received_events","type":"User","site_admin":false},"created_at":"2019-10-31T07:17:12Z","updated_at":"2019-10-31T07:17:12Z","author_association":"NONE","body":"```\r\n # note: we will take the center crop of the images during augmentation\r\n    # that changes the optical centers, but not focal lengths\r\n    K[0, 2] = K[\r\n        0,\r\n        2] - 13  # from width = 1242 to 1216, with a 13-pixel cut on both sides\r\n    K[1, 2] = K[\r\n        1,\r\n        2] - 11.5  # from width = 375 to 352, with a 11.5-pixel cut on both sides\r\n```\r\nso  the code should be changed ? ","reactions":{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/548244585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"windyrobin","id":42018,"node_id":"MDQ6VXNlcjQyMDE4","avatar_url":"https://avatars.githubusercontent.com/u/42018?v=4","gravatar_id":"","url":"https://api.github.com/users/windyrobin","html_url":"https://github.com/windyrobin","followers_url":"https://api.github.com/users/windyrobin/followers","following_url":"https://api.github.com/users/windyrobin/following{/other_user}","gists_url":"https://api.github.com/users/windyrobin/gists{/gist_id}","starred_url":"https://api.github.com/users/windyrobin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windyrobin/subscriptions","organizations_url":"https://api.github.com/users/windyrobin/orgs","repos_url":"https://api.github.com/users/windyrobin/repos","events_url":"https://api.github.com/users/windyrobin/events{/privacy}","received_events_url":"https://api.github.com/users/windyrobin/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/609326596","html_url":"https://github.com/fangchangma/self-supervised-depth-completion/issues/30#issuecomment-609326596","issue_url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/30","id":609326596,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTMyNjU5Ng==","user":{"login":"longyangqi","id":13297107,"node_id":"MDQ6VXNlcjEzMjk3MTA3","avatar_url":"https://avatars.githubusercontent.com/u/13297107?v=4","gravatar_id":"","url":"https://api.github.com/users/longyangqi","html_url":"https://github.com/longyangqi","followers_url":"https://api.github.com/users/longyangqi/followers","following_url":"https://api.github.com/users/longyangqi/following{/other_user}","gists_url":"https://api.github.com/users/longyangqi/gists{/gist_id}","starred_url":"https://api.github.com/users/longyangqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/longyangqi/subscriptions","organizations_url":"https://api.github.com/users/longyangqi/orgs","repos_url":"https://api.github.com/users/longyangqi/repos","events_url":"https://api.github.com/users/longyangqi/events{/privacy}","received_events_url":"https://api.github.com/users/longyangqi/received_events","type":"User","site_admin":false},"created_at":"2020-04-05T04:31:39Z","updated_at":"2020-04-11T02:23:51Z","author_association":"NONE","body":"When doing BottomCrop， I think it should be:\r\n```\r\nK[0, 2] = K[0, 2] - 13\r\nK[1, 2] = K[1, 2] - 23\r\n```\r\nI don't know if it is correct.\r\nThanks！","reactions":{"url":"https://api.github.com/repos/fangchangma/self-supervised-depth-completion/issues/comments/609326596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"longyangqi","id":13297107,"node_id":"MDQ6VXNlcjEzMjk3MTA3","avatar_url":"https://avatars.githubusercontent.com/u/13297107?v=4","gravatar_id":"","url":"https://api.github.com/users/longyangqi","html_url":"https://github.com/longyangqi","followers_url":"https://api.github.com/users/longyangqi/followers","following_url":"https://api.github.com/users/longyangqi/following{/other_user}","gists_url":"https://api.github.com/users/longyangqi/gists{/gist_id}","starred_url":"https://api.github.com/users/longyangqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/longyangqi/subscriptions","organizations_url":"https://api.github.com/users/longyangqi/orgs","repos_url":"https://api.github.com/users/longyangqi/repos","events_url":"https://api.github.com/users/longyangqi/events{/privacy}","received_events_url":"https://api.github.com/users/longyangqi/received_events","type":"User","site_admin":false}}]