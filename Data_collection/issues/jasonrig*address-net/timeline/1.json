[{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/502928352","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-502928352","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":502928352,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjkyODM1Mg==","user":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"created_at":"2019-06-18T03:11:54Z","updated_at":"2019-06-18T03:11:54Z","author_association":"OWNER","body":"Hi @intotecho,\r\n\r\nYour feedback is very much appreciated! I've tried to address why I think what you're observing is occurring, but at this point I can't offer a definite resolution.\r\n\r\n1) The model was trained using a couple of GPUs, and while CPU-only usage is fine, I think a micro cloud instance may be a little too much on the light side when it comes to available CPU cores (indeed, Google's micro cloud shell is powered by a g1-small instance, which is only 0.5 vCPUs).\r\n\r\n2) Regarding the new numbers 16 and 48, this is a side-effect of the way in which the per-character classes are recomposed into a string. It would appear that the first and third character (1 and 6), and second and fifth character (4 and 8) are being classified differently and therefore grouped together when the final output is produced. Remember that at the core of the model is a per-character classification and the address entities are delineated simply by grouping the characters on the assumption that they're always contiguous within the address. The street number / flat numbers in the example addresses look a little odd to me (I don't think I've ever seen a street/flat number of zero, and probably neither has the RNN model).\r\n\r\n3) As for \"The Esplanade\" being incorrectly classified, I suppose that it just a shortcoming of the model training.\r\n\r\nIf you would like to tweak the parameters / training data to improve the model, a good start would be to read through the pointers given in [this comment](https://medium.com/@houssemeddine.dridi/hi-jason-4ff6c2b49220) I have left on medium.com. This is probably beyond the scope of the problem you're trying to solve though! All-in-all, unless the data is collected in a structured format to begin with, there will always be some loss of fidelity when trying to restructure it in a probabilistic way.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/502928352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false}},{"id":2419436628,"node_id":"MDExOkNsb3NlZEV2ZW50MjQxOTQzNjYyOA==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2419436628","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-06-18T03:11:54Z","state_reason":null,"performed_via_github_app":null},{"id":2419436631,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQxOTQzNjYzMQ==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2419436631","actor":{"login":"intotecho","id":659672,"node_id":"MDQ6VXNlcjY1OTY3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/659672?v=4","gravatar_id":"","url":"https://api.github.com/users/intotecho","html_url":"https://github.com/intotecho","followers_url":"https://api.github.com/users/intotecho/followers","following_url":"https://api.github.com/users/intotecho/following{/other_user}","gists_url":"https://api.github.com/users/intotecho/gists{/gist_id}","starred_url":"https://api.github.com/users/intotecho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intotecho/subscriptions","organizations_url":"https://api.github.com/users/intotecho/orgs","repos_url":"https://api.github.com/users/intotecho/repos","events_url":"https://api.github.com/users/intotecho/events{/privacy}","received_events_url":"https://api.github.com/users/intotecho/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-06-18T03:11:55Z","performed_via_github_app":null},{"id":2419436633,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0MTk0MzY2MzM=","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2419436633","actor":{"login":"intotecho","id":659672,"node_id":"MDQ6VXNlcjY1OTY3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/659672?v=4","gravatar_id":"","url":"https://api.github.com/users/intotecho","html_url":"https://github.com/intotecho","followers_url":"https://api.github.com/users/intotecho/followers","following_url":"https://api.github.com/users/intotecho/following{/other_user}","gists_url":"https://api.github.com/users/intotecho/gists{/gist_id}","starred_url":"https://api.github.com/users/intotecho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intotecho/subscriptions","organizations_url":"https://api.github.com/users/intotecho/orgs","repos_url":"https://api.github.com/users/intotecho/repos","events_url":"https://api.github.com/users/intotecho/events{/privacy}","received_events_url":"https://api.github.com/users/intotecho/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-06-18T03:11:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/502974188","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-502974188","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":502974188,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjk3NDE4OA==","user":{"login":"intotecho","id":659672,"node_id":"MDQ6VXNlcjY1OTY3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/659672?v=4","gravatar_id":"","url":"https://api.github.com/users/intotecho","html_url":"https://github.com/intotecho","followers_url":"https://api.github.com/users/intotecho/followers","following_url":"https://api.github.com/users/intotecho/following{/other_user}","gists_url":"https://api.github.com/users/intotecho/gists{/gist_id}","starred_url":"https://api.github.com/users/intotecho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intotecho/subscriptions","organizations_url":"https://api.github.com/users/intotecho/orgs","repos_url":"https://api.github.com/users/intotecho/repos","events_url":"https://api.github.com/users/intotecho/events{/privacy}","received_events_url":"https://api.github.com/users/intotecho/received_events","type":"User","site_admin":false},"created_at":"2019-06-18T06:59:26Z","updated_at":"2019-06-18T06:59:26Z","author_association":"NONE","body":"Hi Jason, \r\n\r\nThanks for the response, and for publishing the RNN and article.\r\n\r\nI didn't think the CPU would change the predictions - just make it slower.\r\n\r\nI was getting a WARNING issued for each prediction.\r\n`WARNING:tensorflow:Estimator's model_fn (<function model_fn at 0x7fded56bc1e0>) includes params argument, but params are not passed to Estimator.\r\n`\r\nI suppressed this by adding params={} in \r\n\r\n`address_net_estimator = tf.estimator.Estimator(model_fn=model_fn,\r\n                                                   model_dir=model_dir,\r\n                                                   params={})\r\n`\r\nThis makes it run faster.\r\n\r\nI noticed that the types of mistakes people make in addresses is not just typos but semantics. \r\nI have a lot of addresses in my dataset that put in the wrong suburb (like Burnley or  Cremorne for Richmond) or spell the street wrong, or swap the unit and the building number. Or the wrong post code.\r\nThe RNN was not designed to fix these, but decomposing the address into components makes it easier for me to fix these issues.\r\n\r\nRegards, Chris\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/502974188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"intotecho","id":659672,"node_id":"MDQ6VXNlcjY1OTY3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/659672?v=4","gravatar_id":"","url":"https://api.github.com/users/intotecho","html_url":"https://github.com/intotecho","followers_url":"https://api.github.com/users/intotecho/followers","following_url":"https://api.github.com/users/intotecho/following{/other_user}","gists_url":"https://api.github.com/users/intotecho/gists{/gist_id}","starred_url":"https://api.github.com/users/intotecho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intotecho/subscriptions","organizations_url":"https://api.github.com/users/intotecho/orgs","repos_url":"https://api.github.com/users/intotecho/repos","events_url":"https://api.github.com/users/intotecho/events{/privacy}","received_events_url":"https://api.github.com/users/intotecho/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/503110018","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-503110018","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":503110018,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzExMDAxOA==","user":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"created_at":"2019-06-18T12:51:59Z","updated_at":"2019-06-18T12:51:59Z","author_association":"OWNER","body":"The feedback is very much appreciated.\r\nYour observation that passing an empty dict to the estimator makes it run faster is curious. I would have thought it have negligible-to-no impact on run time. Out of curiosity, if you have any timing data comparing with/without `params`, I'd be interested to see exactly how substantial the difference is. No problem if this isn't readily available.\r\n\r\nIf you do end up making any changes that improve the output or utility of the tool, you are most welcome to submit any contributions to the codebase.","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/503110018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/503364203","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-503364203","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":503364203,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzM2NDIwMw==","user":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"created_at":"2019-06-19T00:54:22Z","updated_at":"2019-06-19T00:55:07Z","author_association":"NONE","body":"Firstly, thanks @jasonrig for sharing this project. I was looking for something just like this.\r\n\r\nI agree with @intotecho that semantic errors are a source of address mistakes. GNAF does have `address_aliases` but not sure that would help. This is very much the realm of the proprietary (paid) address lookup and auto-complete (auto-correct) service providers.\r\n\r\nI too am getting the same warning `WARNING:tensorflow:Estimator's model_fn (<function model_fn at 0x7f663d394268>) includes params argument, but params are not passed to Estimator.` and note the slowness.\r\n\r\nI will try the empty `params` as suggested by @intotecho and give you some metrics by end of the week. FYI I am using property addresses from real estate sales listings (ads) with a small sample size for the moment (<200).\r\n","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/503364203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false}},{"id":2422617829,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQyMjYxNzgyOQ==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2422617829","actor":{"login":"intotecho","id":659672,"node_id":"MDQ6VXNlcjY1OTY3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/659672?v=4","gravatar_id":"","url":"https://api.github.com/users/intotecho","html_url":"https://github.com/intotecho","followers_url":"https://api.github.com/users/intotecho/followers","following_url":"https://api.github.com/users/intotecho/following{/other_user}","gists_url":"https://api.github.com/users/intotecho/gists{/gist_id}","starred_url":"https://api.github.com/users/intotecho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intotecho/subscriptions","organizations_url":"https://api.github.com/users/intotecho/orgs","repos_url":"https://api.github.com/users/intotecho/repos","events_url":"https://api.github.com/users/intotecho/events{/privacy}","received_events_url":"https://api.github.com/users/intotecho/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-06-19T00:54:22Z","performed_via_github_app":null},{"id":2422617830,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0MjI2MTc4MzA=","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2422617830","actor":{"login":"intotecho","id":659672,"node_id":"MDQ6VXNlcjY1OTY3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/659672?v=4","gravatar_id":"","url":"https://api.github.com/users/intotecho","html_url":"https://github.com/intotecho","followers_url":"https://api.github.com/users/intotecho/followers","following_url":"https://api.github.com/users/intotecho/following{/other_user}","gists_url":"https://api.github.com/users/intotecho/gists{/gist_id}","starred_url":"https://api.github.com/users/intotecho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intotecho/subscriptions","organizations_url":"https://api.github.com/users/intotecho/orgs","repos_url":"https://api.github.com/users/intotecho/repos","events_url":"https://api.github.com/users/intotecho/events{/privacy}","received_events_url":"https://api.github.com/users/intotecho/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-06-19T00:54:22Z","performed_via_github_app":null},{"id":2422617832,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQyMjYxNzgzMg==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2422617832","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-06-19T00:54:22Z","performed_via_github_app":null},{"id":2422617833,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0MjI2MTc4MzM=","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2422617833","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-06-19T00:54:22Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/504719414","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-504719414","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":504719414,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDcxOTQxNA==","user":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"created_at":"2019-06-23T04:43:16Z","updated_at":"2019-06-23T04:43:16Z","author_association":"NONE","body":"Timings with and without params as below using my small sample size of 231.\r\n\r\n**With params={}**\r\nNumber of address predictions: 231, Total time: 313.95927800000004, Average time: **1.3591310735930737**\r\n\r\n**Without params={}**\r\nNumber of address predictions: 231, Total time: 322.9566079999999, Average time: **1.3980805541125536**","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/504719414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/505365238","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-505365238","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":505365238,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTM2NTIzOA==","user":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"created_at":"2019-06-25T09:29:44Z","updated_at":"2019-06-25T09:29:44Z","author_association":"OWNER","body":"Thanks for the details, @SmileSydney! Why this slow-down without `params` occurs is surprising. I'll update the code at some point in the future to include the blank dictionary since this appears to have an effect. I'll raise a separate issue to track it, and in the meantime I'd be happy to merge a PR if anyone else cares to address the issue in a more timely manner.\r\n\r\nSlowness of the RNN in general is probably just the nature of the beast, so to speak. Since this project was developed more as a curiosity over anything else, I didn't check performance on CPU-only deployments since it ran well enough on my GPU. If you are using this code in a production environment where the current performance you're observing is problematic, I would suggest taking a look at the [predict_input_fn](https://github.com/jasonrig/address-net/blob/master/addressnet/dataset.py#L486), specifically [line 499](https://github.com/jasonrig/address-net/blob/master/addressnet/dataset.py#L499) where I'd hastily fixed the batch size for inference to 1. The batch size really should be a function parameter that is configurable according to hardware/memory limitations. This may significantly speed up inference times.","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/505365238/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false}},{"id":2436894933,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQzNjg5NDkzMw==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2436894933","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-06-25T09:29:44Z","performed_via_github_app":null},{"id":2436894934,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0MzY4OTQ5MzQ=","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2436894934","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-06-25T09:29:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/507835735","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-507835735","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":507835735,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzgzNTczNQ==","user":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"created_at":"2019-07-02T20:38:54Z","updated_at":"2019-07-02T20:38:54Z","author_association":"NONE","body":"@jasonrig Thanks for the batch size tip. I will give this a try. What range of values should I start experimenting with?\r\n\r\nPer doco, `batch_size`: A tf.int64 scalar tf.Tensor, representing the number of consecutive elements of this dataset to combine in a single batch.","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/507835735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false}},{"id":2455603226,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ1NTYwMzIyNg==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2455603226","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-02T20:38:54Z","performed_via_github_app":null},{"id":2455603227,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0NTU2MDMyMjc=","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2455603227","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-02T20:38:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/508000869","html_url":"https://github.com/jasonrig/address-net/issues/1#issuecomment-508000869","issue_url":"https://api.github.com/repos/jasonrig/address-net/issues/1","id":508000869,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODAwMDg2OQ==","user":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false},"created_at":"2019-07-03T08:45:19Z","updated_at":"2019-07-03T08:45:19Z","author_association":"OWNER","body":"@SmileSydney I'm not really able to give an overly informed comment on this except to say that it should be <= the number of items in your dataset but not so big that it exhausts the memory of your device (GPU or CPU memory, depending on your system configuration). In general, I would say that during inference, increasing the batch size increases the opportunity for tensorflow to exploit data parallelism (particularly on GPU) and hence improve overall performance*. In the case of low-resourced VMs such as the g1-small instance on GCP, it's probably going to be a challenge to get much of a speedup since you'd already be asking a lot of 0.5 CPUs!\r\n\r\n* it can be a different story during training as batch size can affect convergence rates, overfitting, etc.","reactions":{"url":"https://api.github.com/repos/jasonrig/address-net/issues/comments/508000869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jasonrig","id":6635497,"node_id":"MDQ6VXNlcjY2MzU0OTc=","avatar_url":"https://avatars.githubusercontent.com/u/6635497?v=4","gravatar_id":"","url":"https://api.github.com/users/jasonrig","html_url":"https://github.com/jasonrig","followers_url":"https://api.github.com/users/jasonrig/followers","following_url":"https://api.github.com/users/jasonrig/following{/other_user}","gists_url":"https://api.github.com/users/jasonrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jasonrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasonrig/subscriptions","organizations_url":"https://api.github.com/users/jasonrig/orgs","repos_url":"https://api.github.com/users/jasonrig/repos","events_url":"https://api.github.com/users/jasonrig/events{/privacy}","received_events_url":"https://api.github.com/users/jasonrig/received_events","type":"User","site_admin":false}},{"id":2456798515,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ1Njc5ODUxNQ==","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2456798515","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-03T08:45:19Z","performed_via_github_app":null},{"id":2456798517,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0NTY3OTg1MTc=","url":"https://api.github.com/repos/jasonrig/address-net/issues/events/2456798517","actor":{"login":"SmileSydney","id":26997048,"node_id":"MDQ6VXNlcjI2OTk3MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26997048?v=4","gravatar_id":"","url":"https://api.github.com/users/SmileSydney","html_url":"https://github.com/SmileSydney","followers_url":"https://api.github.com/users/SmileSydney/followers","following_url":"https://api.github.com/users/SmileSydney/following{/other_user}","gists_url":"https://api.github.com/users/SmileSydney/gists{/gist_id}","starred_url":"https://api.github.com/users/SmileSydney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SmileSydney/subscriptions","organizations_url":"https://api.github.com/users/SmileSydney/orgs","repos_url":"https://api.github.com/users/SmileSydney/repos","events_url":"https://api.github.com/users/SmileSydney/events{/privacy}","received_events_url":"https://api.github.com/users/SmileSydney/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-03T08:45:19Z","performed_via_github_app":null}]