[{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/384692640","html_url":"https://github.com/RobotLocomotion/pytorch-dense-correspondence/issues/92#issuecomment-384692640","issue_url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/92","id":384692640,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDY5MjY0MA==","user":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false},"created_at":"2018-04-26T15:51:58Z","updated_at":"2018-04-26T17:54:23Z","author_association":"COLLABORATOR","body":"Hm, I think this makes sense... if it computes the test loss without\r\nclearing the train loss.\r\n\r\nGPU memory usage sometimes spikes above 6GB, and if we double that, that\r\nwould OOM a Titan XP.\r\n\r\nOn Thu, Apr 26, 2018 at 11:48 AM, Lucas Manuelli <notifications@github.com>\r\nwrote:\r\n\r\n> Error happened at iteration 9000 of 10000. Is the test thing just a red\r\n> herring or are our batch sizes too big somehow?\r\n>\r\n> ---------------------------------------------------------------------------\r\n> RuntimeError                              Traceback (most recent call last)\r\n> <ipython-input-3-f8bf2b034dd8> in <module>()\r\n>      10     train._config[\"dense_correspondence_network\"][\"descriptor_dimension\"] = d\r\n>      11     train._config[\"training\"][\"num_iterations\"] = num_iterations\r\n> ---> 12     train.run()\r\n>      13     print \"finished training descriptor of dimension %d\" %(d)\r\n>\r\n> /home/manuelli/code/dense_correspondence/training/training.pyc in run(self, loss_current_iteration, use_pretrained)\r\n>     423                     logging.info(\"Computing test loss\")\r\n>     424                     test_loss, test_match_loss, test_non_match_loss = DCE.compute_loss_on_dataset(dcn,\r\n> --> 425                                                                                                   self._data_loader_test, self._config['loss_function'], num_iterations=self._config['training']['test_loss_num_iterations'])\r\n>     426\r\n>     427                     update_visdom_test_loss_plots(test_loss, test_match_loss, test_non_match_loss)\r\n>\r\n> /home/manuelli/code/dense_correspondence/evaluation/evaluation.pyc in compute_loss_on_dataset(dcn, data_loader, loss_config, num_iterations)\r\n>    1494                                                         matches_b,\r\n>    1495                                                         non_matches_a,\r\n> -> 1496                                                         non_matches_b)\r\n>    1497\r\n>    1498\r\n>\r\n> /home/manuelli/code/dense_correspondence/loss_functions/pixelwise_contrastive_loss.pyc in get_loss(self, image_a_pred, image_b_pred, matches_a, matches_b, non_matches_a, non_matches_b, M_descriptor, M_pixel, non_match_loss_weight, use_l2_pixel_loss)\r\n>     102                                                        non_matches_a, non_matches_b,\r\n>     103                                                        M_descriptor=M_descriptor,\r\n> --> 104                                                        M_pixel=M_pixel)\r\n>     105         else:\r\n>     106             # version with no l2 pixel term\r\n>\r\n> /home/manuelli/code/dense_correspondence/loss_functions/pixelwise_contrastive_loss.pyc in non_match_loss_with_l2_pixel_norm(self, image_a_pred, image_b_pred, matches_b, non_matches_a, non_matches_b, M_descriptor, M_pixel)\r\n>     215         num_non_matches = non_matches_a.size()[0]\r\n>     216\r\n> --> 217         non_match_descriptor_loss, num_hard_negatives, _, _ = PCL.non_match_descriptor_loss(image_a_pred, image_b_pred, non_matches_a, non_matches_b, M=M_descriptor)\r\n>     218\r\n>     219         non_match_pixel_l2_loss, _, _ = self.l2_pixel_loss(matches_b, non_matches_b, M_pixel=M_pixel)\r\n>\r\n> /home/manuelli/code/dense_correspondence/loss_functions/pixelwise_contrastive_loss.pyc in non_match_descriptor_loss(image_a_pred, image_b_pred, non_matches_a, non_matches_b, M)\r\n>     161         \"\"\"\r\n>     162\r\n> --> 163         non_matches_a_descriptors = torch.index_select(image_a_pred, 1, non_matches_a).squeeze()\r\n>     164         non_matches_b_descriptors = torch.index_select(image_b_pred, 1, non_matches_b).squeeze()\r\n>     165\r\n>\r\n> RuntimeError: cuda runtime error (2) : out of memory at /pytorch/torch/lib/THC/generic/THCStorage.cu:5\r\n>\r\n> â€”\r\n> You are receiving this because you are subscribed to this thread.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/peteflorence/pytorch-dense-correspondence/issues/92>,\r\n> or mute the thread\r\n> <https://github.com/notifications/unsubscribe-auth/AFYQqMOIMEyi9C7-Ldqp4z0tkCDlj1sPks5tsexNgaJpZM4TlhU1>\r\n> .\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/384692640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/385005229","html_url":"https://github.com/RobotLocomotion/pytorch-dense-correspondence/issues/92#issuecomment-385005229","issue_url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/92","id":385005229,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTAwNTIyOQ==","user":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false},"created_at":"2018-04-27T15:28:10Z","updated_at":"2018-04-27T15:28:10Z","author_association":"COLLABORATOR","body":"This was resolved by adding `del`s before computing test losses","reactions":{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/385005229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false}},{"id":1599035408,"node_id":"MDExOkNsb3NlZEV2ZW50MTU5OTAzNTQwOA==","url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/events/1599035408","actor":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-04-27T15:28:10Z","state_reason":null,"performed_via_github_app":null}]