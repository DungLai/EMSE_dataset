[{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/435694224","html_url":"https://github.com/RobotLocomotion/pytorch-dense-correspondence/issues/178#issuecomment-435694224","issue_url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/178","id":435694224,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTY5NDIyNA==","user":{"login":"manuelli","id":5898488,"node_id":"MDQ6VXNlcjU4OTg0ODg=","avatar_url":"https://avatars.githubusercontent.com/u/5898488?v=4","gravatar_id":"","url":"https://api.github.com/users/manuelli","html_url":"https://github.com/manuelli","followers_url":"https://api.github.com/users/manuelli/followers","following_url":"https://api.github.com/users/manuelli/following{/other_user}","gists_url":"https://api.github.com/users/manuelli/gists{/gist_id}","starred_url":"https://api.github.com/users/manuelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuelli/subscriptions","organizations_url":"https://api.github.com/users/manuelli/orgs","repos_url":"https://api.github.com/users/manuelli/repos","events_url":"https://api.github.com/users/manuelli/events{/privacy}","received_events_url":"https://api.github.com/users/manuelli/received_events","type":"User","site_admin":false},"created_at":"2018-11-04T18:34:48Z","updated_at":"2018-11-04T18:34:48Z","author_association":"COLLABORATOR","body":"Our tutorial only supports the docker workflow, and going forwards we envision that that will remain the case. We chose docker to avoid the numerous issues that arise from people having different setups on their individual machines. That being said I totally understand your reasons for not using docker, but just understand it will be a bit more of a challenge to get things up and running, and we aren't planning to support this now or in the future.\r\n\r\nThe nice thing about docker is that even if you don't want to run inside a docker container, the fact that there is a docker container for our code makes it very easy to track down all the dependencies, just look through the [dockerfile](https://github.com/RobotLocomotion/pytorch-dense-correspondence/blob/master/docker/pytorch-dense-correspondence.dockerfile). \r\n\r\nThe other thing that is likely to trip you up has to do with paths. You just need to ensure that your `PYTHONPATH` and `PATH` are correctly set. Have a look at the [entrypoint](https://github.com/RobotLocomotion/pytorch-dense-correspondence/blob/master/docker/entrypoint.sh) and environment setup [file](https://github.com/RobotLocomotion/pytorch-dense-correspondence/blob/master/config/setup_environment.sh)\r\n\r\nGood luck!","reactions":{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/435694224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"manuelli","id":5898488,"node_id":"MDQ6VXNlcjU4OTg0ODg=","avatar_url":"https://avatars.githubusercontent.com/u/5898488?v=4","gravatar_id":"","url":"https://api.github.com/users/manuelli","html_url":"https://github.com/manuelli","followers_url":"https://api.github.com/users/manuelli/followers","following_url":"https://api.github.com/users/manuelli/following{/other_user}","gists_url":"https://api.github.com/users/manuelli/gists{/gist_id}","starred_url":"https://api.github.com/users/manuelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuelli/subscriptions","organizations_url":"https://api.github.com/users/manuelli/orgs","repos_url":"https://api.github.com/users/manuelli/repos","events_url":"https://api.github.com/users/manuelli/events{/privacy}","received_events_url":"https://api.github.com/users/manuelli/received_events","type":"User","site_admin":false}},{"id":1944951963,"node_id":"MDExOkNsb3NlZEV2ZW50MTk0NDk1MTk2Mw==","url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/events/1944951963","actor":{"login":"manuelli","id":5898488,"node_id":"MDQ6VXNlcjU4OTg0ODg=","avatar_url":"https://avatars.githubusercontent.com/u/5898488?v=4","gravatar_id":"","url":"https://api.github.com/users/manuelli","html_url":"https://github.com/manuelli","followers_url":"https://api.github.com/users/manuelli/followers","following_url":"https://api.github.com/users/manuelli/following{/other_user}","gists_url":"https://api.github.com/users/manuelli/gists{/gist_id}","starred_url":"https://api.github.com/users/manuelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuelli/subscriptions","organizations_url":"https://api.github.com/users/manuelli/orgs","repos_url":"https://api.github.com/users/manuelli/repos","events_url":"https://api.github.com/users/manuelli/events{/privacy}","received_events_url":"https://api.github.com/users/manuelli/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-11-04T18:34:49Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/435871627","html_url":"https://github.com/RobotLocomotion/pytorch-dense-correspondence/issues/178#issuecomment-435871627","issue_url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/178","id":435871627,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTg3MTYyNw==","user":{"login":"noorvir","id":18352209,"node_id":"MDQ6VXNlcjE4MzUyMjA5","avatar_url":"https://avatars.githubusercontent.com/u/18352209?v=4","gravatar_id":"","url":"https://api.github.com/users/noorvir","html_url":"https://github.com/noorvir","followers_url":"https://api.github.com/users/noorvir/followers","following_url":"https://api.github.com/users/noorvir/following{/other_user}","gists_url":"https://api.github.com/users/noorvir/gists{/gist_id}","starred_url":"https://api.github.com/users/noorvir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noorvir/subscriptions","organizations_url":"https://api.github.com/users/noorvir/orgs","repos_url":"https://api.github.com/users/noorvir/repos","events_url":"https://api.github.com/users/noorvir/events{/privacy}","received_events_url":"https://api.github.com/users/noorvir/received_events","type":"User","site_admin":false},"created_at":"2018-11-05T13:22:50Z","updated_at":"2018-11-05T13:22:50Z","author_association":"NONE","body":"Regarding nvidia-docker not passing nvidia-smi test: try providing the cuda version. So for example:\r\n\r\n`nvidia-docker run --rm nvidia/cuda:9.1-base nvidia-smi`. \r\n\r\nFor me, running the latest `nvidia/cuda` image returns the following error:\r\n\r\n`docker: Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \"exec: \\\"nvidia-smi\\\": executable file not found in $PATH\": unknown.`\r\n\r\nI'm guessing this an issue with the latest nvidia/cuda image which does not contain nvidia-smi.","reactions":{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/435871627/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"noorvir","id":18352209,"node_id":"MDQ6VXNlcjE4MzUyMjA5","avatar_url":"https://avatars.githubusercontent.com/u/18352209?v=4","gravatar_id":"","url":"https://api.github.com/users/noorvir","html_url":"https://github.com/noorvir","followers_url":"https://api.github.com/users/noorvir/followers","following_url":"https://api.github.com/users/noorvir/following{/other_user}","gists_url":"https://api.github.com/users/noorvir/gists{/gist_id}","starred_url":"https://api.github.com/users/noorvir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noorvir/subscriptions","organizations_url":"https://api.github.com/users/noorvir/orgs","repos_url":"https://api.github.com/users/noorvir/repos","events_url":"https://api.github.com/users/noorvir/events{/privacy}","received_events_url":"https://api.github.com/users/noorvir/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/435880437","html_url":"https://github.com/RobotLocomotion/pytorch-dense-correspondence/issues/178#issuecomment-435880437","issue_url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/178","id":435880437,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTg4MDQzNw==","user":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false},"created_at":"2018-11-05T13:50:37Z","updated_at":"2018-11-05T13:50:37Z","author_association":"COLLABORATOR","body":"Thank you @noorvir-a for your helpful note! Very helpful, this wasnâ€™t on our radar.","reactions":{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/435880437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peteflorence","id":5640360,"node_id":"MDQ6VXNlcjU2NDAzNjA=","avatar_url":"https://avatars.githubusercontent.com/u/5640360?v=4","gravatar_id":"","url":"https://api.github.com/users/peteflorence","html_url":"https://github.com/peteflorence","followers_url":"https://api.github.com/users/peteflorence/followers","following_url":"https://api.github.com/users/peteflorence/following{/other_user}","gists_url":"https://api.github.com/users/peteflorence/gists{/gist_id}","starred_url":"https://api.github.com/users/peteflorence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peteflorence/subscriptions","organizations_url":"https://api.github.com/users/peteflorence/orgs","repos_url":"https://api.github.com/users/peteflorence/repos","events_url":"https://api.github.com/users/peteflorence/events{/privacy}","received_events_url":"https://api.github.com/users/peteflorence/received_events","type":"User","site_admin":false}},{"id":1946256937,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk0NjI1NjkzNw==","url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/events/1946256937","actor":{"login":"noorvir","id":18352209,"node_id":"MDQ6VXNlcjE4MzUyMjA5","avatar_url":"https://avatars.githubusercontent.com/u/18352209?v=4","gravatar_id":"","url":"https://api.github.com/users/noorvir","html_url":"https://github.com/noorvir","followers_url":"https://api.github.com/users/noorvir/followers","following_url":"https://api.github.com/users/noorvir/following{/other_user}","gists_url":"https://api.github.com/users/noorvir/gists{/gist_id}","starred_url":"https://api.github.com/users/noorvir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noorvir/subscriptions","organizations_url":"https://api.github.com/users/noorvir/orgs","repos_url":"https://api.github.com/users/noorvir/repos","events_url":"https://api.github.com/users/noorvir/events{/privacy}","received_events_url":"https://api.github.com/users/noorvir/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-05T13:50:37Z","performed_via_github_app":null},{"id":1946256938,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5NDYyNTY5Mzg=","url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/events/1946256938","actor":{"login":"noorvir","id":18352209,"node_id":"MDQ6VXNlcjE4MzUyMjA5","avatar_url":"https://avatars.githubusercontent.com/u/18352209?v=4","gravatar_id":"","url":"https://api.github.com/users/noorvir","html_url":"https://github.com/noorvir","followers_url":"https://api.github.com/users/noorvir/followers","following_url":"https://api.github.com/users/noorvir/following{/other_user}","gists_url":"https://api.github.com/users/noorvir/gists{/gist_id}","starred_url":"https://api.github.com/users/noorvir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noorvir/subscriptions","organizations_url":"https://api.github.com/users/noorvir/orgs","repos_url":"https://api.github.com/users/noorvir/repos","events_url":"https://api.github.com/users/noorvir/events{/privacy}","received_events_url":"https://api.github.com/users/noorvir/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-05T13:50:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/436232533","html_url":"https://github.com/RobotLocomotion/pytorch-dense-correspondence/issues/178#issuecomment-436232533","issue_url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/178","id":436232533,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjIzMjUzMw==","user":{"login":"mmaslennikov","id":17181470,"node_id":"MDQ6VXNlcjE3MTgxNDcw","avatar_url":"https://avatars.githubusercontent.com/u/17181470?v=4","gravatar_id":"","url":"https://api.github.com/users/mmaslennikov","html_url":"https://github.com/mmaslennikov","followers_url":"https://api.github.com/users/mmaslennikov/followers","following_url":"https://api.github.com/users/mmaslennikov/following{/other_user}","gists_url":"https://api.github.com/users/mmaslennikov/gists{/gist_id}","starred_url":"https://api.github.com/users/mmaslennikov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmaslennikov/subscriptions","organizations_url":"https://api.github.com/users/mmaslennikov/orgs","repos_url":"https://api.github.com/users/mmaslennikov/repos","events_url":"https://api.github.com/users/mmaslennikov/events{/privacy}","received_events_url":"https://api.github.com/users/mmaslennikov/received_events","type":"User","site_admin":false},"created_at":"2018-11-06T12:15:51Z","updated_at":"2018-11-06T12:30:45Z","author_association":"NONE","body":"Many thanks for your kind and detailed reply, even despite it is outside of the supported docker-based version. I tried to explore more and was able to lunch training, it takes ~20 minutes on 1080 GTX for the caterpillar object. \r\n\r\nI overcame the following obstacles:\r\n(1) I am not clear with the \"fully_conv\" setting. I had to switch if off by specifying fully_conv=False during resnet initialization in https://github.com/warmspringwinds/pytorch-segmentation-detection/blob/d6e7e8242ba72b7e53cee6703348de2d5ccc81e5/pytorch_segmentation_detection/models/resnet_dilated.py#L244. Otherwise, I got the error \r\n```\r\nRuntimeError: Error(s) in loading state_dict for ResNet:\r\nsize mismatch for fc.weight: copying a param of torch.Size([1000, 512, 1, 1]) from checkpoint, where the shape is torch.Size([1000, 512]) in current model.\r\n```\r\nThe reason for the error is the line https://github.com/warmspringwinds/vision/blob/5e0a760fc847d55a4c1699410a14003452fa4581/torchvision/models/resnet.py#L153\r\n```\r\nself.fc = nn.Conv2d(512 * block.expansion, num_classes, 1) \r\n```\r\nwhich is called in /pytorch-segmentation-detection/vision/torchvision/models/resnet.py. The call produces an object with the mismatching self.fc.weight.shape==[1000,512], which is causing the error.\r\n\r\nIt looks like \"fully_conv\" was added later into /pytorch-segmentation-detection/vision/torchvision/models/resnet.py, since\r\nhttps://github.com/pytorch/vision/blob/v0.2.1/torchvision/models/resnet.py does not have it\r\n(I tried different versions of this file, not only 0.2.1)\r\n\r\n(How important is fully_conv? Any other ideas for fixing it?)\r\n\r\n(2) Switched off the tensor restructuring\r\n\r\nhttps://github.com/warmspringwinds/vision/blob/5e0a760fc847d55a4c1699410a14003452fa4581/torchvision/models/resnet.py#L212\r\nhttps://github.com/warmspringwinds/vision/blob/5e0a760fc847d55a4c1699410a14003452fa4581/torchvision/models/resnet.py#L213\r\n\r\n```\r\nif not self.fully_conv:\r\n    x = x.view(x.size(0), -1)\r\n```\r\n\r\n(3) Fixed /dense_correspondence/correspondence_tools/correspondence_augmentation.py\r\nhttps://github.com/RobotLocomotion/pytorch-dense-correspondence/blob/c3b068adca006b828248fdf16b00aa7603d462e2/dense_correspondence/correspondence_tools/correspondence_augmentation.py#L68\r\nimage.height -> images[0].height\r\nhttps://github.com/RobotLocomotion/pytorch-dense-correspondence/blob/c3b068adca006b828248fdf16b00aa7603d462e2/dense_correspondence/correspondence_tools/correspondence_augmentation.py#L82\r\nimage.width -> images[0].width\r\n\r\nRegarding cuda (off-topic): I tried and got the following response\r\n```\r\nsteve@gx501:~$ nvidia-docker run --rm nvidia/cuda:9.1-base nvidia-smi\r\ndocker: Error response from daemon: Unknown runtime specified nvidia.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/RobotLocomotion/pytorch-dense-correspondence/issues/comments/436232533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mmaslennikov","id":17181470,"node_id":"MDQ6VXNlcjE3MTgxNDcw","avatar_url":"https://avatars.githubusercontent.com/u/17181470?v=4","gravatar_id":"","url":"https://api.github.com/users/mmaslennikov","html_url":"https://github.com/mmaslennikov","followers_url":"https://api.github.com/users/mmaslennikov/followers","following_url":"https://api.github.com/users/mmaslennikov/following{/other_user}","gists_url":"https://api.github.com/users/mmaslennikov/gists{/gist_id}","starred_url":"https://api.github.com/users/mmaslennikov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmaslennikov/subscriptions","organizations_url":"https://api.github.com/users/mmaslennikov/orgs","repos_url":"https://api.github.com/users/mmaslennikov/repos","events_url":"https://api.github.com/users/mmaslennikov/events{/privacy}","received_events_url":"https://api.github.com/users/mmaslennikov/received_events","type":"User","site_admin":false}}]