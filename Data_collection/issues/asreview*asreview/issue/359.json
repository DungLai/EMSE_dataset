{"url":"https://api.github.com/repos/asreview/asreview/issues/359","repository_url":"https://api.github.com/repos/asreview/asreview","labels_url":"https://api.github.com/repos/asreview/asreview/issues/359/labels{/name}","comments_url":"https://api.github.com/repos/asreview/asreview/issues/359/comments","events_url":"https://api.github.com/repos/asreview/asreview/issues/359/events","html_url":"https://github.com/asreview/asreview/issues/359","id":714628656,"node_id":"MDU6SXNzdWU3MTQ2Mjg2NTY=","number":359,"title":"Non-informative error in simulation mode on partly labeled dataset","user":{"login":"J535D165","id":12981139,"node_id":"MDQ6VXNlcjEyOTgxMTM5","avatar_url":"https://avatars.githubusercontent.com/u/12981139?v=4","gravatar_id":"","url":"https://api.github.com/users/J535D165","html_url":"https://github.com/J535D165","followers_url":"https://api.github.com/users/J535D165/followers","following_url":"https://api.github.com/users/J535D165/following{/other_user}","gists_url":"https://api.github.com/users/J535D165/gists{/gist_id}","starred_url":"https://api.github.com/users/J535D165/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/J535D165/subscriptions","organizations_url":"https://api.github.com/users/J535D165/orgs","repos_url":"https://api.github.com/users/J535D165/repos","events_url":"https://api.github.com/users/J535D165/events{/privacy}","received_events_url":"https://api.github.com/users/J535D165/received_events","type":"User","site_admin":false},"labels":[{"id":1186392107,"node_id":"MDU6TGFiZWwxMTg2MzkyMTA3","url":"https://api.github.com/repos/asreview/asreview/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1186392110,"node_id":"MDU6TGFiZWwxMTg2MzkyMTEw","url":"https://api.github.com/repos/asreview/asreview/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"},{"id":1186392114,"node_id":"MDU6TGFiZWwxMTg2MzkyMTE0","url":"https://api.github.com/repos/asreview/asreview/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-10-05T08:21:08Z","updated_at":"2020-10-06T14:49:56Z","closed_at":"2020-10-06T14:49:56Z","author_association":"MEMBER","active_lock_reason":null,"body":"In the simulation mode, the error being raised on a partly labeled (as well as unlabelled?) dataset is not informative and of the wrong error type. \r\n\r\n```\r\njonathans-mbp:simulation_fails_on_partly_labeled jonathan$ asreview simulate ace_10.csv -s bug.h5\r\n\r\n            _____ _____            _\r\n     /\\    / ____|  __ \\          (_)\r\n    /  \\  | (___ | |__) |_____   ___  _____      __\r\n   / /\\ \\  \\___ \\|  _  // _ \\ \\ / / |/ _ \\ \\ /\\ / /\r\n  / ____ \\ ____) | | \\ \\  __/\\ V /| |  __/\\ V  V /\r\n /_/    \\_\\_____/|_|  \\_\\___| \\_/ |_|\\___| \\_/\\_/\r\n\r\n---------------------------------------------------------------------------------\r\n|                                                                                |\r\n|  Welcome to the ASReview Automated Systematic Review software.                 |\r\n|  In this mode the computer will simulate how well the ASReview software        |\r\n|  could have accelerate the systematic review of your dataset.                  |\r\n|  You can sit back and relax while the computer runs this simulation.           |\r\n|                                                                                |\r\n|  GitHub page:        https://github.com/asreview/asreview                      |\r\n|  Questions/remarks:  asreview@uu.nl                                            |\r\n|                                                                                |\r\n---------------------------------------------------------------------------------\r\n\r\nWARNING:root:Simulating partial review, ignoring unlabeled papers (n=3.\r\nTraceback (most recent call last):\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/bin/asreview\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/__main__.py\", line 40, in main\r\n    entry.load()().execute(sys.argv[2:])\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/entry_points/simulate.py\", line 34, in execute\r\n    review_simulate(path, **args_dict)\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/review/factory.py\", line 239, in review_simulate\r\n    review(dataset, *args, mode='simulate', **kwargs)\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/review/factory.py\", line 222, in review\r\n    reviewer = get_reviewer(*args, mode=mode, model=model, **kwargs)\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/review/factory.py\", line 197, in get_reviewer\r\n    **kwargs)\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/review/simulate.py\", line 47, in __init__\r\n    as_data = as_data.slice(labeled_idx)\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/asreview/data.py\", line 179, in slice\r\n    return ASReviewData(self.df[idx], data_name=\"sliced\")\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/pandas/core/frame.py\", line 2806, in __getitem__\r\n    indexer = self.loc._get_listlike_indexer(key, axis=1, raise_missing=True)[1]\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/pandas/core/indexing.py\", line 1553, in _get_listlike_indexer\r\n    keyarr, indexer, o._get_axis_number(axis), raise_missing=raise_missing\r\n  File \"/Users/jonathan/.pyenv/versions/anaconda3-2018.12/lib/python3.7/site-packages/pandas/core/indexing.py\", line 1640, in _validate_read_indexer\r\n    raise KeyError(f\"None of [{key}] are in the [{axis_name}]\")\r\nKeyError: \"None of [Int64Index([0, 1, 2, 3, 4, 5, 6], dtype='int64')] are in the [columns]\"\r\n```\r\n\r\nI think the API should raise an informative `ValueError`.  The CLI should print the error without traceback. ","closed_by":{"login":"J535D165","id":12981139,"node_id":"MDQ6VXNlcjEyOTgxMTM5","avatar_url":"https://avatars.githubusercontent.com/u/12981139?v=4","gravatar_id":"","url":"https://api.github.com/users/J535D165","html_url":"https://github.com/J535D165","followers_url":"https://api.github.com/users/J535D165/followers","following_url":"https://api.github.com/users/J535D165/following{/other_user}","gists_url":"https://api.github.com/users/J535D165/gists{/gist_id}","starred_url":"https://api.github.com/users/J535D165/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/J535D165/subscriptions","organizations_url":"https://api.github.com/users/J535D165/orgs","repos_url":"https://api.github.com/users/J535D165/repos","events_url":"https://api.github.com/users/J535D165/events{/privacy}","received_events_url":"https://api.github.com/users/J535D165/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/asreview/asreview/issues/359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/asreview/asreview/issues/359/timeline","performed_via_github_app":null,"state_reason":"completed"}