{"url":"https://api.github.com/repos/asreview/asreview/issues/982","repository_url":"https://api.github.com/repos/asreview/asreview","labels_url":"https://api.github.com/repos/asreview/asreview/issues/982/labels{/name}","comments_url":"https://api.github.com/repos/asreview/asreview/issues/982/comments","events_url":"https://api.github.com/repos/asreview/asreview/issues/982/events","html_url":"https://github.com/asreview/asreview/issues/982","id":1138999235,"node_id":"I_kwDOCdPKjs5D47_D","number":982,"title":"Negative WSS@95 value generated using uncertainty query strategy (in simulation mode) ","user":{"login":"brittdev","id":60607063,"node_id":"MDQ6VXNlcjYwNjA3MDYz","avatar_url":"https://avatars.githubusercontent.com/u/60607063?v=4","gravatar_id":"","url":"https://api.github.com/users/brittdev","html_url":"https://github.com/brittdev","followers_url":"https://api.github.com/users/brittdev/followers","following_url":"https://api.github.com/users/brittdev/following{/other_user}","gists_url":"https://api.github.com/users/brittdev/gists{/gist_id}","starred_url":"https://api.github.com/users/brittdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brittdev/subscriptions","organizations_url":"https://api.github.com/users/brittdev/orgs","repos_url":"https://api.github.com/users/brittdev/repos","events_url":"https://api.github.com/users/brittdev/events{/privacy}","received_events_url":"https://api.github.com/users/brittdev/received_events","type":"User","site_admin":false},"labels":[{"id":2830409307,"node_id":"MDU6TGFiZWwyODMwNDA5MzA3","url":"https://api.github.com/repos/asreview/asreview/labels/Discussion","name":"Discussion","color":"c5def5","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-02-15T17:30:31Z","updated_at":"2022-02-24T15:43:00Z","closed_at":"2022-02-24T15:43:00Z","author_association":"NONE","active_lock_reason":null,"body":"Apologies if this belongs in Discussion rather than Issues but I feel like this might be a bug since I don't understand why it's not working. \r\n\r\n**Describe the bug**\r\nWhen generating the statistics for the NB + TFIDF model combination using uncertainty as the query strategy, simulation mode showed a negative value for WSS@95. (Yes, I still use simulation mode) \r\n \r\n**To Reproduce**\r\nThe command that I used to generate the result files was: \r\n`asreview simulate-batch [my_dataset].csv --state_file [my_dataset]_nbtfidf_uncertainty.h5 --seed 1 --init_seed 1 -m nb -e tfidf -q uncertainty --n_run 10`\r\n\r\n**Screenshots**\r\nCouldn't fit it in a screenshot, so here is my output:\r\n\r\n-----------  general  -----------\r\nNumber of runs            : 10\r\nNumber of papers          : 178\r\nNumber of included papers : 75\r\nNumber of excluded papers : 103\r\nNumber of unlabeled papers: 0\r\nNumber of queries         : 177\r\n\r\n-----------  settings  -----------\r\ndata_name         : Robot_longlist\r\nmodel             : nb\r\nquery_strategy    : uncertainty\r\nbalance_strategy  : double\r\nfeature_extraction: tfidf\r\nn_instances       : 1\r\nn_prior_included  : 1\r\nn_prior_excluded  : 1\r\nmode              : simulate\r\nmodel_param       : {'alpha': 3.822}\r\nquery_param       : {}\r\nfeature_param     : {'ngram_max': 1, 'stop_words': 'english', 'split_ta': 0, 'use_keywords': 0}\r\nbalance_param     : {'a': 2.155, 'alpha': 0.94, 'b': 0.789, 'beta': 1.0}\r\n\r\n-----------    ATD    -----------\r\n 0.68\r\n\r\nTime to discovery:\r\n\r\n    row   : value\r\n    162   : 28.8\r\n    58    : 45.7\r\n    111   : 46.0\r\n    27    : 51.5\r\n    117   : 58.666666666666664\r\n    42    : 59.0\r\n    153   : 64.8\r\n    101   : 65.1\r\n    65    : 70.0\r\n    163   : 72.77777777777777\r\n    7     : 80.3\r\n    164   : 80.5\r\n    138   : 81.9\r\n    21    : 83.1\r\n    144   : 87.6\r\n    15    : 89.0\r\n    169   : 89.5\r\n    70    : 90.8\r\n    41    : 95.55555555555556\r\n    73    : 97.5\r\n    93    : 101.9\r\n    157   : 104.1\r\n    82    : 106.5\r\n    161   : 106.9\r\n    114   : 109.5\r\n    50    : 109.8\r\n    35    : 110.5\r\n    48    : 113.8\r\n    98    : 115.8\r\n    131   : 116.3\r\n    119   : 116.6\r\n    39    : 117.2\r\n    167   : 119.9\r\n    149   : 120.5\r\n    19    : 122.4\r\n    61    : 123.11111111111111\r\n    106   : 124.7\r\n    176   : 125.3\r\n    26    : 126.1\r\n    75    : 127.7\r\n    165   : 127.8\r\n    71    : 131.44444444444446\r\n    103   : 135.6\r\n    43    : 136.3\r\n    1     : 136.5\r\n    128   : 137.44444444444446\r\n    23    : 138.22222222222223\r\n    172   : 138.9\r\n    44    : 140.4\r\n    53    : 141.5\r\n    150   : 143.5\r\n    171   : 145.5\r\n    129   : 146.6\r\n    38    : 146.8\r\n    14    : 148.5\r\n    102   : 148.6\r\n    59    : 151.33333333333334\r\n    54    : 152.4\r\n    133   : 152.4\r\n    136   : 152.44444444444446\r\n    37    : 153.8\r\n    132   : 155.2\r\n    80    : 157.0\r\n    57    : 159.3\r\n    16    : 159.72727272727272\r\n    135   : 160.3\r\n    126   : 163.8\r\n    28    : 163.9\r\n    141   : 167.1\r\n    160   : 167.5\r\n    3     : 169.5\r\n    33    : 171.66666666666666\r\n    121   : 172.6\r\n    47    : 174.1\r\n    12    : 177.3684210526316\r\n\r\n\r\n-----------  WSS/RRF  -----------\r\nWSS@95 : -2.35 %\r\nWSS@100: 0.00  %\r\nRRF@5  : 3.38  %\r\nRRF@10 : 4.05  %\r\n\r\n**Version information**\r\n - OS: Windows 10 \r\n - ASReview version 0.19\r\n\r\n**Additional context**\r\nOther datasets also returned negative WSS@95 values using the uncertainty query strategy. For one dataset that I tried, the random query strategy also returned a negative WSS@95 value for the NB+TFIDF model combination. \r\n\r\nDo these query strategies not work well together with the NB+TFIDF model combination? I haven't tried it yet for other model combinations. Or is this an issue with simulation mode perhaps? Or also possible, is there a typo in my prompt? \r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/asreview/asreview/issues/982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/asreview/asreview/issues/982/timeline","performed_via_github_app":null,"state_reason":"completed"}