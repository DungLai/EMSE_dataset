[{"url":"https://api.github.com/repos/pyro-ppl/funsor/issues/comments/792373369","html_url":"https://github.com/pyro-ppl/funsor/issues/486#issuecomment-792373369","issue_url":"https://api.github.com/repos/pyro-ppl/funsor/issues/486","id":792373369,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjM3MzM2OQ==","user":{"login":"eb8680","id":2032320,"node_id":"MDQ6VXNlcjIwMzIzMjA=","avatar_url":"https://avatars.githubusercontent.com/u/2032320?v=4","gravatar_id":"","url":"https://api.github.com/users/eb8680","html_url":"https://github.com/eb8680","followers_url":"https://api.github.com/users/eb8680/followers","following_url":"https://api.github.com/users/eb8680/following{/other_user}","gists_url":"https://api.github.com/users/eb8680/gists{/gist_id}","starred_url":"https://api.github.com/users/eb8680/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eb8680/subscriptions","organizations_url":"https://api.github.com/users/eb8680/orgs","repos_url":"https://api.github.com/users/eb8680/repos","events_url":"https://api.github.com/users/eb8680/events{/privacy}","received_events_url":"https://api.github.com/users/eb8680/received_events","type":"User","site_admin":false},"created_at":"2021-03-07T23:22:29Z","updated_at":"2021-03-07T23:22:29Z","author_association":"MEMBER","body":"As discussed on Friday, you can already achieve something like this with `funsor.terms.Lambda`:\r\n```py\r\nops.mean(Lambda(\"b\", Lambda(\"a\", x)), dims=(0, 1))\r\n```\r\nClearly this pattern could be generalized into something like `Apply`.\r\n\r\nI'm not sure this is a programming model we should be encouraging, though - using `Lambda` and black-box ops to bind variables prevents Funsor from introspecting or transforming computations like `mean` or `variance` that contain meaningful linear structure and ties otherwise abstract mathematical definitions to design and naming decisions specific to tensor operations. \r\n\r\nInstead, we should prefer defining new computations with `make_funsor` and more basic Funsor primitives like `Reduce`, `Binary` and `Subs` wherever possible.","reactions":{"url":"https://api.github.com/repos/pyro-ppl/funsor/issues/comments/792373369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eb8680","id":2032320,"node_id":"MDQ6VXNlcjIwMzIzMjA=","avatar_url":"https://avatars.githubusercontent.com/u/2032320?v=4","gravatar_id":"","url":"https://api.github.com/users/eb8680","html_url":"https://github.com/eb8680","followers_url":"https://api.github.com/users/eb8680/followers","following_url":"https://api.github.com/users/eb8680/following{/other_user}","gists_url":"https://api.github.com/users/eb8680/gists{/gist_id}","starred_url":"https://api.github.com/users/eb8680/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eb8680/subscriptions","organizations_url":"https://api.github.com/users/eb8680/orgs","repos_url":"https://api.github.com/users/eb8680/repos","events_url":"https://api.github.com/users/eb8680/events{/privacy}","received_events_url":"https://api.github.com/users/eb8680/received_events","type":"User","site_admin":false}},{"id":4418624947,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0MTg2MjQ5NDc=","url":"https://api.github.com/repos/pyro-ppl/funsor/issues/events/4418624947","actor":{"login":"eb8680","id":2032320,"node_id":"MDQ6VXNlcjIwMzIzMjA=","avatar_url":"https://avatars.githubusercontent.com/u/2032320?v=4","gravatar_id":"","url":"https://api.github.com/users/eb8680","html_url":"https://github.com/eb8680","followers_url":"https://api.github.com/users/eb8680/followers","following_url":"https://api.github.com/users/eb8680/following{/other_user}","gists_url":"https://api.github.com/users/eb8680/gists{/gist_id}","starred_url":"https://api.github.com/users/eb8680/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eb8680/subscriptions","organizations_url":"https://api.github.com/users/eb8680/orgs","repos_url":"https://api.github.com/users/eb8680/repos","events_url":"https://api.github.com/users/eb8680/events{/privacy}","received_events_url":"https://api.github.com/users/eb8680/received_events","type":"User","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-07T23:23:21Z","label":{"name":"discussion","color":"fef2c0"},"performed_via_github_app":null}]