{"url":"https://api.github.com/repos/pyro-ppl/funsor/issues/412","repository_url":"https://api.github.com/repos/pyro-ppl/funsor","labels_url":"https://api.github.com/repos/pyro-ppl/funsor/issues/412/labels{/name}","comments_url":"https://api.github.com/repos/pyro-ppl/funsor/issues/412/comments","events_url":"https://api.github.com/repos/pyro-ppl/funsor/issues/412/events","html_url":"https://github.com/pyro-ppl/funsor/issues/412","id":772552449,"node_id":"MDU6SXNzdWU3NzI1NTI0NDk=","number":412,"title":"Implement distribution shape helpers to avoid need for dummy tensors","user":{"login":"fritzo","id":648532,"node_id":"MDQ6VXNlcjY0ODUzMg==","avatar_url":"https://avatars.githubusercontent.com/u/648532?v=4","gravatar_id":"","url":"https://api.github.com/users/fritzo","html_url":"https://github.com/fritzo","followers_url":"https://api.github.com/users/fritzo/followers","following_url":"https://api.github.com/users/fritzo/following{/other_user}","gists_url":"https://api.github.com/users/fritzo/gists{/gist_id}","starred_url":"https://api.github.com/users/fritzo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fritzo/subscriptions","organizations_url":"https://api.github.com/users/fritzo/orgs","repos_url":"https://api.github.com/users/fritzo/repos","events_url":"https://api.github.com/users/fritzo/events{/privacy}","received_events_url":"https://api.github.com/users/fritzo/received_events","type":"User","site_admin":false},"labels":[{"id":1245797346,"node_id":"MDU6TGFiZWwxMjQ1Nzk3MzQ2","url":"https://api.github.com/repos/pyro-ppl/funsor/labels/refactor","name":"refactor","color":"ff9900","default":false,"description":""},{"id":2601863659,"node_id":"MDU6TGFiZWwyNjAxODYzNjU5","url":"https://api.github.com/repos/pyro-ppl/funsor/labels/upstream","name":"upstream","color":"0000aa","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pyro-ppl/funsor/milestones/3","html_url":"https://github.com/pyro-ppl/funsor/milestone/3","labels_url":"https://api.github.com/repos/pyro-ppl/funsor/milestones/3/labels","id":6235535,"node_id":"MDk6TWlsZXN0b25lNjIzNTUzNQ==","number":3,"title":"1.0 engineering / hardening","description":"Engineering and hardening before Funsor 1.0 release needed for Pyro 2.0 release.","creator":{"login":"fritzo","id":648532,"node_id":"MDQ6VXNlcjY0ODUzMg==","avatar_url":"https://avatars.githubusercontent.com/u/648532?v=4","gravatar_id":"","url":"https://api.github.com/users/fritzo","html_url":"https://github.com/fritzo","followers_url":"https://api.github.com/users/fritzo/followers","following_url":"https://api.github.com/users/fritzo/following{/other_user}","gists_url":"https://api.github.com/users/fritzo/gists{/gist_id}","starred_url":"https://api.github.com/users/fritzo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fritzo/subscriptions","organizations_url":"https://api.github.com/users/fritzo/orgs","repos_url":"https://api.github.com/users/fritzo/repos","events_url":"https://api.github.com/users/fritzo/events{/privacy}","received_events_url":"https://api.github.com/users/fritzo/received_events","type":"User","site_admin":false},"open_issues":3,"closed_issues":1,"state":"open","created_at":"2020-12-22T00:34:04Z","updated_at":"2021-02-23T15:31:29Z","due_on":null,"closed_at":null},"comments":2,"created_at":"2020-12-22T00:31:40Z","updated_at":"2021-02-23T15:32:28Z","closed_at":"2021-02-23T15:31:28Z","author_association":"MEMBER","active_lock_reason":null,"body":"As mentioned in https://github.com/pyro-ppl/funsor/pull/402#discussion_r542716992 we should add distribution methods upstream to perform all needed shape operations.\r\n\r\nCurrently Funsor's distribution shaping logic uses the pattern of creating fake distributions with dummy tensors to determine distribution event shape and batch shape. As a goal for Funsor use in Pyro 2.0, we should eliminate the need to ever instantiate a dummy tensor, and should eliminate the tensor shape caches.\r\n\r\n## Tasks\r\n- [x] #420 decide on shape helper interface\r\n- [x] #420 refactor Funsor to use the new methods instead of fake distributions\r\n- [x] https://github.com/pyro-ppl/pyro/pull/2739 add to Pyro / PyTorch distributions\r\n- [x] https://github.com/pyro-ppl/numpyro/pull/901 add to NumPyro / JAX / TFP distributions","closed_by":{"login":"fritzo","id":648532,"node_id":"MDQ6VXNlcjY0ODUzMg==","avatar_url":"https://avatars.githubusercontent.com/u/648532?v=4","gravatar_id":"","url":"https://api.github.com/users/fritzo","html_url":"https://github.com/fritzo","followers_url":"https://api.github.com/users/fritzo/followers","following_url":"https://api.github.com/users/fritzo/following{/other_user}","gists_url":"https://api.github.com/users/fritzo/gists{/gist_id}","starred_url":"https://api.github.com/users/fritzo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fritzo/subscriptions","organizations_url":"https://api.github.com/users/fritzo/orgs","repos_url":"https://api.github.com/users/fritzo/repos","events_url":"https://api.github.com/users/fritzo/events{/privacy}","received_events_url":"https://api.github.com/users/fritzo/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pyro-ppl/funsor/issues/412/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pyro-ppl/funsor/issues/412/timeline","performed_via_github_app":null,"state_reason":"completed"}