{"url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting/issues/15","repository_url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting","labels_url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting/issues/15/labels{/name}","comments_url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting/issues/15/comments","events_url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting/issues/15/events","html_url":"https://github.com/huochaitiantang/pytorch-deep-image-matting/issues/15","id":458016292,"node_id":"MDU6SXNzdWU0NTgwMTYyOTI=","number":15,"title":"Problem in modifying the code to multi GPU process","user":{"login":"hellozgm","id":9148863,"node_id":"MDQ6VXNlcjkxNDg4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9148863?v=4","gravatar_id":"","url":"https://api.github.com/users/hellozgm","html_url":"https://github.com/hellozgm","followers_url":"https://api.github.com/users/hellozgm/followers","following_url":"https://api.github.com/users/hellozgm/following{/other_user}","gists_url":"https://api.github.com/users/hellozgm/gists{/gist_id}","starred_url":"https://api.github.com/users/hellozgm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hellozgm/subscriptions","organizations_url":"https://api.github.com/users/hellozgm/orgs","repos_url":"https://api.github.com/users/hellozgm/repos","events_url":"https://api.github.com/users/hellozgm/events{/privacy}","received_events_url":"https://api.github.com/users/hellozgm/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-06-19T13:32:06Z","updated_at":"2019-08-14T02:24:34Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi, thank for your awesome work. I want to modify the code to fit the multi GPU process, and I modify your main code below:\r\n```\r\n    if args.cuda:\r\n        device = torch.device(\"cuda:0\" if torch.cuda.is_available() else \"cpu\")\r\n        model = nn.DataParallel(model)\r\n        model.to(device)\r\n```\r\n\r\nBut, I got error:\r\n```\r\n Traceback (most recent call last):\r\n  File \"core/train.py\", line 361, in <module>\r\n    main()\r\n  File \"core/train.py\", line 353, in main\r\n    train(args, model, optimizer, train_loader, epoch)\r\n  File \"core/train.py\", line 200, in train\r\n    pred_mattes, pred_alpha = model(input_img)\r\n  File \"/home/chaofan/lib/anaconda2/envs/python36/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 477, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/chaofan/lib/anaconda2/envs/python36/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 124, in forward\r\n    return self.gather(outputs, self.output_device)\r\n  File \"/home/chaofan/lib/anaconda2/envs/python36/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 136, in gather\r\n    return gather(outputs, output_device, dim=self.dim)\r\n  File \"/home/chaofan/lib/anaconda2/envs/python36/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 67, in gather\r\n    return gather_map(outputs)\r\n  File \"/home/chaofan/lib/anaconda2/envs/python36/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 62, in gather_map\r\n    return type(out)(map(gather_map, zip(*outputs)))\r\n  File \"/home/chaofan/lib/anaconda2/envs/python36/lib/python3.6/site-packages/torch/nn/parallel/scatter_gather.py\", line 62, in gather_map\r\n    return type(out)(map(gather_map, zip(*outputs)))\r\nTypeError: zip argument #1 must support iteration\r\n\r\n```\r\nI have no idea about this problem, do you have some suggestions? Thank you!","closed_by":null,"reactions":{"url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting/issues/15/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/huochaitiantang/pytorch-deep-image-matting/issues/15/timeline","performed_via_github_app":null,"state_reason":null}