{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/38","repository_url":"https://api.github.com/repos/xvjiarui/GCNet","labels_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/38/labels{/name}","comments_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/38/comments","events_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/38/events","html_url":"https://github.com/xvjiarui/GCNet/issues/38","id":623419704,"node_id":"MDU6SXNzdWU2MjM0MTk3MDQ=","number":38,"title":"AP, AR=-1 while evaluation at the end of each epoch","user":{"login":"kbiyani33","id":54775827,"node_id":"MDQ6VXNlcjU0Nzc1ODI3","avatar_url":"https://avatars.githubusercontent.com/u/54775827?v=4","gravatar_id":"","url":"https://api.github.com/users/kbiyani33","html_url":"https://github.com/kbiyani33","followers_url":"https://api.github.com/users/kbiyani33/followers","following_url":"https://api.github.com/users/kbiyani33/following{/other_user}","gists_url":"https://api.github.com/users/kbiyani33/gists{/gist_id}","starred_url":"https://api.github.com/users/kbiyani33/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbiyani33/subscriptions","organizations_url":"https://api.github.com/users/kbiyani33/orgs","repos_url":"https://api.github.com/users/kbiyani33/repos","events_url":"https://api.github.com/users/kbiyani33/events{/privacy}","received_events_url":"https://api.github.com/users/kbiyani33/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-05-22T18:52:16Z","updated_at":"2020-05-29T10:48:35Z","closed_at":"2020-05-29T10:48:35Z","author_association":"NONE","active_lock_reason":null,"body":"Hello, I was trying to run gcnet form the MMDetection repository. I wished to train GCNet on my custom dataset in which each image is 800x800 and all the annotations are in proper COCO format. But however, my annotations are for for boxes alone and nothing else.\r\nI gave the respective paths and then ran the following command:\r\n\r\n./dist_train.sh ../configs/gcnet/mask_rcnn_r101_fpn_r4_gcb_c3-c5_1x_coco.py 2\r\n\r\nWhen I ran this, I had the training begun. Here's a small part of my log file when I was trying to reproduce the error:\r\n\r\n\r\n'''\r\n\r\nloading annotations into memory...\r\nloading annotations into memory...\r\nDone (t=0.78s)\r\ncreating index...\r\nindex created!\r\nDone (t=0.78s)\r\ncreating index...\r\nindex created!\r\nloading annotations into memory...\r\nDone (t=0.00s)\r\ncreating index...\r\nindex created!\r\n2020-05-23 03:17:35,421 - mmdet - INFO - Start running, host: user@c6e7e60caee9, work_dir: /mnt/user\r\n[2.log](https://github.com/xvjiarui/GCNet/files/4669853/2.log)\r\n/mmdetection/tools/work_dirs/mask_rcnn_r101_fpn_r4_gcb_c3-c5_1x_coco\r\n2020-05-23 03:17:35,421 - mmdet - INFO - workflow: [('train', 1)], max: 12 epochs\r\nloading annotations into memory...\r\nDone (t=0.00s)\r\ncreating index...\r\nindex created!\r\n2020-05-23 03:18:11,654 - mmdet - INFO - Epoch [1][50/1730]     lr: 0.00198, eta: 4:09:57, time: 0.724, data_time: 0.267, memory: 4932, loss_rpn_cls: 0.5057, loss_rpn_bbox: 0.2989, loss_cls: 1.0971, acc:\r\n85.3574, loss_bbox: 0.0454, loss_mask: 0.4885, loss: 2.4356\r\n2020-05-23 03:18:39,866 - mmdet - INFO - Epoch [1][100/1730]    lr: 0.00398, eta: 3:41:52, time: 0.565, data_time: 0.101, memory: 4932, loss_rpn_cls: 0.2872, loss_rpn_bbox: 0.2404, loss_cls: 0.4054, acc:\r\n93.0947, loss_bbox: 0.1764, loss_mask: 0.3700, loss: 1.4794\r\n2020-05-23 03:19:08,571 - mmdet - INFO - Epoch [1][150/1730]    lr: 0.00597, eta: 3:33:17, time: 0.574, data_time: 0.101, memory: 5062, loss_rpn_cls: 0.1821, loss_rpn_bbox: 0.2431, loss_cls: 0.4640, acc:\r\n90.5537, loss_bbox: 0.2871, loss_mask: 0.3372, loss: 1.5135\r\n2020-05-23 03:19:37,701 - mmdet - INFO - Epoch [1][200/1730]    lr: 0.00797, eta: 3:29:28, time: 0.582, data_time: 0.104, memory: 5271, loss_rpn_cls: 0.1201, loss_rpn_bbox: 0.2288, loss_cls: 0.4637, acc:\r\n87.8535, loss_bbox: 0.3915, loss_mask: 0.3074, loss: 1.5114\r\n2020-05-23 03:20:07,551 - mmdet - INFO - Epoch [1][250/1730]    lr: 0.00997, eta: 3:27:59, time: 0.597, data_time: 0.105, memory: 5422, loss_rpn_cls: 0.1004, loss_rpn_bbox: 0.2055, loss_cls: 0.3916, acc:\r\n87.1963, loss_bbox: 0.5066, loss_mask: 0.2894, loss: 1.4935\r\n2020-05-23 03:20:37,901 - mmdet - INFO - Epoch [1][300/1730]    lr: 0.01197, eta: 3:27:24, time: 0.607, data_time: 0.107, memory: 5422, loss_rpn_cls: 0.0506, loss_rpn_bbox: 0.1710, loss_cls: 0.3173, acc:\r\n88.8096, loss_bbox: 0.5628, loss_mask: 0.2750, loss: 1.3767\r\n2020-05-23 03:21:08,620 - mmdet - INFO - Epoch [1][350/1730]    lr: 0.01397, eta: 3:27:11, time: 0.614, data_time: 0.108, memory: 5422, loss_rpn_cls: 0.0498, loss_rpn_bbox: 0.1539, loss_cls: 0.2873, acc:\r\n89.3711, loss_bbox: 0.5508, loss_mask: 0.2680, loss: 1.3098\r\n2020-05-23 03:21:39,345 - mmdet - INFO - Epoch [1][400/1730]    lr: 0.01596, eta: 3:26:55, time: 0.615, data_time: 0.104, memory: 5422, loss_rpn_cls: 0.0801, loss_rpn_bbox: 0.1680, loss_cls: 0.2922, acc:\r\n89.8096, loss_bbox: 0.5162, loss_mask: 0.2573, loss: 1.3137\r\n2020-05-23 03:22:10,246 - mmdet - INFO - Epoch [1][450/1730]    lr: 0.01796, eta: 3:26:43, time: 0.618, data_time: 0.107, memory: 5422, loss_rpn_cls: 0.0481, loss_rpn_bbox: 0.1469, loss_cls: 0.2658, acc:\r\n90.3389, loss_bbox: 0.5173, loss_mask: 0.2487, loss: 1.2268\r\n2020-05-23 03:22:41,038 - mmdet - INFO - Epoch [1][500/1730]    lr: 0.01996, eta: 3:26:23, time: 0.616, data_time: 0.106, memory: 5422, loss_rpn_cls: 0.0358, loss_rpn_bbox: 0.1340, loss_cls: 0.2562, acc:\r\n90.1816, loss_bbox: 0.5243, loss_mask: 0.2481, loss: 1.1984\r\n2020-05-23 03:23:11,924 - mmdet - INFO - Epoch [1][550/1730]    lr: 0.02000, eta: 3:26:04, time: 0.618, data_time: 0.107, memory: 5422, loss_rpn_cls: 0.0413, loss_rpn_bbox: 0.1406, loss_cls: 0.2616, acc:\r\n90.0938, loss_bbox: 0.5202, loss_mask: 0.2372, loss: 1.2007\r\n2020-05-23 03:23:42,898 - mmdet - INFO - Epoch [1][600/1730]    lr: 0.02000, eta: 3:25:46, time: 0.619, data_time: 0.109, memory: 5422, loss_rpn_cls: 0.0717, loss_rpn_bbox: 0.1463, loss_cls: 0.2397, acc:\r\n90.8945, loss_bbox: 0.4870, loss_mask: 0.2516, loss: 1.1963\r\n2020-05-23 03:24:14,103 - mmdet - INFO - Epoch [1][650/1730]    lr: 0.02000, eta: 3:25:34, time: 0.624, data_time: 0.108, memory: 5422, loss_rpn_cls: 0.0434, loss_rpn_bbox: 0.1369, loss_cls: 0.2699, acc:\r\n89.6836, loss_bbox: 0.5065, loss_mask: 0.2456, loss: 1.2023\r\n\r\n'''\r\nThe above log file is when I was trying to reproduce the error. But when I got the error originally, I got the AP=AR=-1 for all values after first epoch.\r\nIf you observe the bbox loss is not really changing also the learning rate has quickly come upto 0.02. \r\nCan someone please explain to me what's the issue here ??\r\nI am training on two GPU's. Also I wish to include validation at the end of each epoch as well. \r\n\r\n\r\n\r\nENVIRONMENT:\r\nPython 3.6.9\r\nCUDA 10.1\r\nUsing vent with ubuntu 18.04.\r\nThanks!!","closed_by":{"login":"kbiyani33","id":54775827,"node_id":"MDQ6VXNlcjU0Nzc1ODI3","avatar_url":"https://avatars.githubusercontent.com/u/54775827?v=4","gravatar_id":"","url":"https://api.github.com/users/kbiyani33","html_url":"https://github.com/kbiyani33","followers_url":"https://api.github.com/users/kbiyani33/followers","following_url":"https://api.github.com/users/kbiyani33/following{/other_user}","gists_url":"https://api.github.com/users/kbiyani33/gists{/gist_id}","starred_url":"https://api.github.com/users/kbiyani33/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbiyani33/subscriptions","organizations_url":"https://api.github.com/users/kbiyani33/orgs","repos_url":"https://api.github.com/users/kbiyani33/repos","events_url":"https://api.github.com/users/kbiyani33/events{/privacy}","received_events_url":"https://api.github.com/users/kbiyani33/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/38/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/38/timeline","performed_via_github_app":null,"state_reason":"completed"}