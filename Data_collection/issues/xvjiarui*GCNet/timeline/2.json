[{"id":2305816447,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwNTgxNjQ0Nw==","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2305816447","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-29T06:41:24Z","performed_via_github_app":null},{"id":2305816449,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDU4MTY0NDk=","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2305816449","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-29T06:41:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487488215","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-487488215","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":487488215,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzQ4ODIxNQ==","user":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T08:17:39Z","updated_at":"2019-04-29T08:17:39Z","author_association":"NONE","body":"i use `torch.nn.utilsã€‚clip_grad_norm_` to clip the gradients, so that it can solve the `NaN` problem.","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487488215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false}},{"id":2305989013,"node_id":"MDExOkNsb3NlZEV2ZW50MjMwNTk4OTAxMw==","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2305989013","actor":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-04-29T08:17:40Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487501732","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-487501732","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":487501732,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzUwMTczMg==","user":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T08:44:12Z","updated_at":"2019-04-29T08:44:12Z","author_association":"OWNER","body":"The setting looks good to me. I suggest you first run maskrcnn without GC with 16 images on 8 gpus. \r\nI don't think GC would cause gradient explosion. ","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487501732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487505697","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-487505697","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":487505697,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzUwNTY5Nw==","user":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T08:58:41Z","updated_at":"2019-04-29T08:58:41Z","author_association":"NONE","body":"yes, i run maskrcnn with/without GC but using sync bn.  if i don't use clip_grads, both of them will encounter the NaN. now i solve it by clipping gradients.\r\nthanks","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487505697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487805821","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-487805821","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":487805821,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzgwNTgyMQ==","user":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T02:38:47Z","updated_at":"2019-04-30T02:38:47Z","author_association":"NONE","body":"hi @xvjiarui \r\nsorry to bother u again.\r\nwhen i finish training and start to test the final model. the performance is close to zero. how to deal with the sync bn when test?","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487805821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false}},{"id":2308346997,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwODM0Njk5Nw==","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2308346997","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-30T02:38:48Z","performed_via_github_app":null},{"id":2308346998,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDgzNDY5OTg=","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2308346998","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-30T02:38:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487823335","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-487823335","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":487823335,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzgyMzMzNQ==","user":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T05:15:40Z","updated_at":"2019-04-30T05:16:47Z","author_association":"OWNER","body":"> hi @xvjiarui\r\n> sorry to bother u again.\r\n> when i finish training and start to test the final model. the performance is close to zero. how to deal with the sync bn when test?\r\n\r\nThe Sync BN is  all fixed during the test just as BN. How does your loss look like? I suspect that may due to the `clip_grad_norm`. \r\nI also suggest you check your code. I don't think baseline of [maskrcnn-benchmark](https://github.com/facebookresearch/maskrcnn-benchmark) would encounter gradient explosion even with Sync BN. ","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487823335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false}},{"id":2308480384,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjMwODQ4MDM4NA==","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2308480384","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-30T05:16:47Z","performed_via_github_app":null},{"id":2308480385,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIzMDg0ODAzODU=","url":"https://api.github.com/repos/xvjiarui/GCNet/issues/events/2308480385","actor":{"login":"xvjiarui","id":18479688,"node_id":"MDQ6VXNlcjE4NDc5Njg4","avatar_url":"https://avatars.githubusercontent.com/u/18479688?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjiarui","html_url":"https://github.com/xvjiarui","followers_url":"https://api.github.com/users/xvjiarui/followers","following_url":"https://api.github.com/users/xvjiarui/following{/other_user}","gists_url":"https://api.github.com/users/xvjiarui/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjiarui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjiarui/subscriptions","organizations_url":"https://api.github.com/users/xvjiarui/orgs","repos_url":"https://api.github.com/users/xvjiarui/repos","events_url":"https://api.github.com/users/xvjiarui/events{/privacy}","received_events_url":"https://api.github.com/users/xvjiarui/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-30T05:16:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487873171","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-487873171","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":487873171,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Nzg3MzE3MQ==","user":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T09:07:26Z","updated_at":"2019-04-30T09:13:24Z","author_association":"NONE","body":"hi \r\ni use sync bn from apex, [like this](https://github.com/facebookresearch/maskrcnn-benchmark/blob/master/maskrcnn_benchmark/modeling/backbone/resnet.py#L401):\r\n```\r\nclass BottleneckWithAPSyncBN(Bottleneck):\r\n    def __init__(\r\n        self,\r\n        in_channels,\r\n        bottleneck_channels,\r\n        out_channels,\r\n        num_groups=1,\r\n        stride_in_1x1=True,\r\n        stride=1,\r\n        dilation=1,\r\n        configs={},\r\n    ):\r\n        super(BottleneckWithAPSyncBN, self).__init__(\r\n            in_channels=in_channels,\r\n            bottleneck_channels=bottleneck_channels,\r\n            out_channels=out_channels,\r\n            num_groups=num_groups,\r\n            stride_in_1x1=stride_in_1x1,\r\n            stride=stride,\r\n            dilation=dilation,\r\n            norm_func=ap.SyncBatchNorm,\r\n            configs=configs\r\n        )\r\n```\r\nand use clip_grad after [losses.backward()](https://github.com/facebookresearch/maskrcnn-benchmark/blob/master/maskrcnn_benchmark/engine/trainer.py#L80)  as below where max_norm is set to 35 and norm_type is set to 2:\r\n```\r\nfrom torch.nn.utils import clip_grad_norm_ as clip_grad_norm\r\nclip_grad_norm(model.parameters(), max_norm, norm_type=norm_type)\r\n```\r\nafter training using these configs, the mAP on cocoval-2017 is 0.0. the log as below:\r\n```\r\n2019-04-29 16:15:49,151 maskrcnn_benchmark.trainer INFO: eta: 1 day, 3:45:33  iter: 20  loss: 3.1540 (5.0863)  loss_box_reg: 0.0448 (0.0604)  loss_classifier: 0.9114 (1.8578)  loss_mask: 0.8628 (2.3964)  loss_objectness: 0.3248 (0.4229)  loss_rpn_box_reg: 0.2593 (0.3488)  ftime: 0.2230 (0.5223)  backbone_ftime: 0.0715 (0.3736)  roi_heads_ftime: 0.0337 (0.0381)  rpn_ftime: 0.1085 (0.1106)  time: 0.6449 (1.1106)  data: 0.0086 (0.1168)  lr: 0.007173  max mem: 4027\r\n2019-04-29 16:16:02,300 maskrcnn_benchmark.trainer INFO: eta: 22:05:28  iter: 40  loss: 1.7453 (3.4724)  loss_box_reg: 0.1120 (0.0850)  loss_classifier: 0.5803 (1.2815)  loss_mask: 0.6930 (1.5453)  loss_objectness: 0.2294 (0.3306)  loss_rpn_box_reg: 0.1077 (0.2299)  ftime: 0.2254 (0.3735)  backbone_ftime: 0.0676 (0.2215)  roi_heads_ftime: 0.0475 (0.0427)  rpn_ftime: 0.1078 (0.1093)  time: 0.6584 (0.8840)  data: 0.0102 (0.0640)  lr: 0.007707  max mem: 4027\r\n2019-04-29 16:16:15,600 maskrcnn_benchmark.trainer INFO: eta: 20:15:43  iter: 60  loss: 1.8415 (2.9447)  loss_box_reg: 0.1149 (0.0985)  loss_classifier: 0.5927 (1.0666)  loss_mask: 0.6890 (1.2598)  loss_objectness: 0.2689 (0.3151)  loss_rpn_box_reg: 0.1651 (0.2048)  ftime: 0.2295 (0.3256)  backbone_ftime: 0.0709 (0.1714)  roi_heads_ftime: 0.0507 (0.0455)  rpn_ftime: 0.1077 (0.1087)  time: 0.6604 (0.8110)  data: 0.0131 (0.0475)  lr: 0.008240  max mem: 4027\r\n2019-04-29 16:16:28,584 maskrcnn_benchmark.trainer INFO: eta: 19:14:49  iter: 80  loss: 1.6740 (2.6838)  loss_box_reg: 0.1086 (0.1015)  loss_classifier: 0.4860 (0.9273)  loss_mask: 0.6849 (1.1166)  loss_objectness: 0.2614 (0.3094)  loss_rpn_box_reg: 0.1261 (0.2290)  ftime: 0.2221 (0.3000)  backbone_ftime: 0.0684 (0.1458)  roi_heads_ftime: 0.0497 (0.0461)  rpn_ftime: 0.1057 (0.1081)  time: 0.6513 (0.7706)  data: 0.0099 (0.0383)  lr: 0.008773  max mem: 4027\r\n2019-04-29 16:16:41,528 maskrcnn_benchmark.trainer INFO: eta: 18:37:35  iter: 100  loss: 1.8355 (2.5213)  loss_box_reg: 0.1045 (0.1035)  loss_classifier: 0.5610 (0.8732)  loss_mask: 0.6875 (1.0307)  loss_objectness: 0.2637 (0.3028)  loss_rpn_box_reg: 0.1414 (0.2110)  ftime: 0.2239 (0.2848)  backbone_ftime: 0.0703 (0.1307)  roi_heads_ftime: 0.0474 (0.0465)  rpn_ftime: 0.1052 (0.1076)  time: 0.6486 (0.7459)  data: 0.0103 (0.0331)  lr: 0.009307  max mem: 4027\r\n2019-04-29 16:16:54,769 maskrcnn_benchmark.trainer INFO: eta: 18:16:24  iter: 120  loss: 2.8539 (2.8987)  loss_box_reg: 0.1312 (0.1103)  loss_classifier: 1.3366 (1.2354)  loss_mask: 0.6863 (0.9734)  loss_objectness: 0.3254 (0.3663)  loss_rpn_box_reg: 0.1463 (0.2133)  ftime: 0.2244 (0.2749)  backbone_ftime: 0.0674 (0.1202)  roi_heads_ftime: 0.0494 (0.0469)  rpn_ftime: 0.1083 (0.1077)  time: 0.6607 (0.7319)  data: 0.0112 (0.0296)  lr: 0.009840  max mem: 4092\r\n2019-04-29 16:17:07,720 maskrcnn_benchmark.trainer INFO: eta: 17:58:07  iter: 140  loss: 2.9404 (3.3908)  loss_box_reg: 0.1603 (0.1218)  loss_classifier: 1.6348 (1.7406)  loss_mask: 0.6878 (0.9326)  loss_objectness: 0.5641 (0.3878)  loss_rpn_box_reg: 0.1102 (0.2080)  ftime: 0.2173 (0.2669)  backbone_ftime: 0.0646 (0.1123)  roi_heads_ftime: 0.0448 (0.0468)  rpn_ftime: 0.1075 (0.1078)  time: 0.6432 (0.7199)  data: 0.0113 (0.0271)  lr: 0.010373  max mem: 4092\r\n\r\n......\r\n\r\n2019-04-30 07:18:47,434 maskrcnn_benchmark.trainer INFO: eta: 0:01:24  iter: 89860  loss: 0.9836 (1.3513)  loss_box_reg: 0.0075 (0.0120)  loss_classifier: 0.2176 (0.4399)  loss_mask: 0.3144 (0.3686)  loss_objectness: 0.3680 (0.4110)  loss_rpn_box_reg: 0.1062 (0.1197)  ftime: 0.1991 (0.2021)  backbone_ftime: 0.0668 (0.0694)  roi_heads_ftime: 0.0225 (0.0238)  rpn_ftime: 0.1078 (0.1089)  time: 0.5898 (0.6032)  data: 0.0129 (0.0131)  lr: 0.000200  max mem: 4250\r\n2019-04-30 07:18:59,354 maskrcnn_benchmark.trainer INFO: eta: 0:01:12  iter: 89880  loss: 1.1297 (1.3512)  loss_box_reg: 0.0080 (0.0120)  loss_classifier: 0.2681 (0.4399)  loss_mask: 0.3165 (0.3686)  loss_objectness: 0.4145 (0.4110)  loss_rpn_box_reg: 0.1112 (0.1197)  ftime: 0.1974 (0.2021)  backbone_ftime: 0.0662 (0.0694)  roi_heads_ftime: 0.0242 (0.0238)  rpn_ftime: 0.1069 (0.1089)  time: 0.5999 (0.6032)  data: 0.0144 (0.0131)  lr: 0.000200  max mem: 4250\r\n2019-04-30 07:19:11,233 maskrcnn_benchmark.trainer INFO: eta: 0:01:00  iter: 89900  loss: 1.0263 (1.3512)  loss_box_reg: 0.0039 (0.0120)  loss_classifier: 0.2237 (0.4398)  loss_mask: 0.3114 (0.3686)  loss_objectness: 0.3918 (0.4110)  loss_rpn_box_reg: 0.1096 (0.1197)  ftime: 0.1980 (0.2021)  backbone_ftime: 0.0665 (0.0694)  roi_heads_ftime: 0.0231 (0.0238)  rpn_ftime: 0.1074 (0.1089)  time: 0.5881 (0.6032)  data: 0.0113 (0.0131)  lr: 0.000200  max mem: 4250\r\n2019-04-30 07:19:22,989 maskrcnn_benchmark.trainer INFO: eta: 0:00:48  iter: 89920  loss: 1.0952 (1.3511)  loss_box_reg: 0.0034 (0.0120)  loss_classifier: 0.2197 (0.4398)  loss_mask: 0.3247 (0.3686)  loss_objectness: 0.4153 (0.4110)  loss_rpn_box_reg: 0.1111 (0.1197)  ftime: 0.1954 (0.2021)  backbone_ftime: 0.0658 (0.0694)  roi_heads_ftime: 0.0231 (0.0238)  rpn_ftime: 0.1062 (0.1089)  time: 0.5863 (0.6032)  data: 0.0108 (0.0131)  lr: 0.000200  max mem: 4250\r\n2019-04-30 07:19:34,826 maskrcnn_benchmark.trainer INFO: eta: 0:00:36  iter: 89940  loss: 1.0778 (1.3511)  loss_box_reg: 0.0088 (0.0120)  loss_classifier: 0.2394 (0.4397)  loss_mask: 0.3099 (0.3686)  loss_objectness: 0.4080 (0.4110)  loss_rpn_box_reg: 0.1153 (0.1197)  ftime: 0.1986 (0.2021)  backbone_ftime: 0.0659 (0.0694)  roi_heads_ftime: 0.0233 (0.0238)  rpn_ftime: 0.1074 (0.1089)  time: 0.5890 (0.6032)  data: 0.0108 (0.0131)  lr: 0.000200  max mem: 4250  \r\n2019-04-30 07:19:46,781 maskrcnn_benchmark.trainer INFO: eta: 0:00:24  iter: 89960  loss: 0.9723 (1.3510)  loss_box_reg: 0.0067 (0.0120)  loss_classifier: 0.2280 (0.4397)  loss_mask: 0.3218 (0.3686)  loss_objectness: 0.3552 (0.4110)  loss_rpn_box_reg: 0.0949 (0.1197)  ftime: 0.1975 (0.2021)  backbone_ftime: 0.0671 (0.0694)  roi_heads_ftime: 0.0231 (0.0238)  rpn_ftime: 0.1086 (0.1089)  time: 0.5903 (0.6032)  data: 0.0137 (0.0131)  lr: 0.000200  max mem: 4250  \r\n2019-04-30 07:19:58,708 maskrcnn_benchmark.trainer INFO: eta: 0:00:12  iter: 89980  loss: 1.1414 (1.3509)  loss_box_reg: 0.0117 (0.0120)  loss_classifier: 0.2371 (0.4396)  loss_mask: 0.3259 (0.3686)  loss_objectness: 0.4193 (0.4110)  loss_rpn_box_reg: 0.1314 (0.1197)  ftime: 0.1980 (0.2021)  backbone_ftime: 0.0681 (0.0694)  roi_heads_ftime: 0.0236 (0.0238)  rpn_ftime: 0.1060 (0.1089)  time: 0.5894 (0.6032)  data: 0.0100 (0.0131)  lr: 0.000200  max mem: 4250 \r\n```\r\n\r\nif i don't use the clip_grad, it encounters the NaN problem.","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/487873171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zimenglan-sysu-512","id":13795888,"node_id":"MDQ6VXNlcjEzNzk1ODg4","avatar_url":"https://avatars.githubusercontent.com/u/13795888?v=4","gravatar_id":"","url":"https://api.github.com/users/zimenglan-sysu-512","html_url":"https://github.com/zimenglan-sysu-512","followers_url":"https://api.github.com/users/zimenglan-sysu-512/followers","following_url":"https://api.github.com/users/zimenglan-sysu-512/following{/other_user}","gists_url":"https://api.github.com/users/zimenglan-sysu-512/gists{/gist_id}","starred_url":"https://api.github.com/users/zimenglan-sysu-512/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimenglan-sysu-512/subscriptions","organizations_url":"https://api.github.com/users/zimenglan-sysu-512/orgs","repos_url":"https://api.github.com/users/zimenglan-sysu-512/repos","events_url":"https://api.github.com/users/zimenglan-sysu-512/events{/privacy}","received_events_url":"https://api.github.com/users/zimenglan-sysu-512/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/491772597","html_url":"https://github.com/xvjiarui/GCNet/issues/2#issuecomment-491772597","issue_url":"https://api.github.com/repos/xvjiarui/GCNet/issues/2","id":491772597,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTc3MjU5Nw==","user":{"login":"Iamal1","id":26734206,"node_id":"MDQ6VXNlcjI2NzM0MjA2","avatar_url":"https://avatars.githubusercontent.com/u/26734206?v=4","gravatar_id":"","url":"https://api.github.com/users/Iamal1","html_url":"https://github.com/Iamal1","followers_url":"https://api.github.com/users/Iamal1/followers","following_url":"https://api.github.com/users/Iamal1/following{/other_user}","gists_url":"https://api.github.com/users/Iamal1/gists{/gist_id}","starred_url":"https://api.github.com/users/Iamal1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Iamal1/subscriptions","organizations_url":"https://api.github.com/users/Iamal1/orgs","repos_url":"https://api.github.com/users/Iamal1/repos","events_url":"https://api.github.com/users/Iamal1/events{/privacy}","received_events_url":"https://api.github.com/users/Iamal1/received_events","type":"User","site_admin":false},"created_at":"2019-05-13T10:45:29Z","updated_at":"2019-05-13T10:45:29Z","author_association":"NONE","body":"Hi, my experiment could not run with pytorch syncbn or just BatchNorm, do you remove the broadcast_buffer in the DDP. I want to check there the problem is, thank you!","reactions":{"url":"https://api.github.com/repos/xvjiarui/GCNet/issues/comments/491772597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Iamal1","id":26734206,"node_id":"MDQ6VXNlcjI2NzM0MjA2","avatar_url":"https://avatars.githubusercontent.com/u/26734206?v=4","gravatar_id":"","url":"https://api.github.com/users/Iamal1","html_url":"https://github.com/Iamal1","followers_url":"https://api.github.com/users/Iamal1/followers","following_url":"https://api.github.com/users/Iamal1/following{/other_user}","gists_url":"https://api.github.com/users/Iamal1/gists{/gist_id}","starred_url":"https://api.github.com/users/Iamal1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Iamal1/subscriptions","organizations_url":"https://api.github.com/users/Iamal1/orgs","repos_url":"https://api.github.com/users/Iamal1/repos","events_url":"https://api.github.com/users/Iamal1/events{/privacy}","received_events_url":"https://api.github.com/users/Iamal1/received_events","type":"User","site_admin":false}}]