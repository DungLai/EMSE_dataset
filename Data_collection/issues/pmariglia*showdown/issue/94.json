{"url":"https://api.github.com/repos/pmariglia/showdown/issues/94","repository_url":"https://api.github.com/repos/pmariglia/showdown","labels_url":"https://api.github.com/repos/pmariglia/showdown/issues/94/labels{/name}","comments_url":"https://api.github.com/repos/pmariglia/showdown/issues/94/comments","events_url":"https://api.github.com/repos/pmariglia/showdown/issues/94/events","html_url":"https://github.com/pmariglia/showdown/issues/94","id":1084236446,"node_id":"I_kwDOCpNhO85AoCKe","number":94,"title":"Several abilities are not properly handled","user":{"login":"mingu600","id":16931003,"node_id":"MDQ6VXNlcjE2OTMxMDAz","avatar_url":"https://avatars.githubusercontent.com/u/16931003?v=4","gravatar_id":"","url":"https://api.github.com/users/mingu600","html_url":"https://github.com/mingu600","followers_url":"https://api.github.com/users/mingu600/followers","following_url":"https://api.github.com/users/mingu600/following{/other_user}","gists_url":"https://api.github.com/users/mingu600/gists{/gist_id}","starred_url":"https://api.github.com/users/mingu600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mingu600/subscriptions","organizations_url":"https://api.github.com/users/mingu600/orgs","repos_url":"https://api.github.com/users/mingu600/repos","events_url":"https://api.github.com/users/mingu600/events{/privacy}","received_events_url":"https://api.github.com/users/mingu600/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-12-20T00:32:03Z","updated_at":"2021-12-20T18:38:49Z","closed_at":"2021-12-20T18:38:49Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I believe that the engine is not properly handling several abilities, such as Defiant, Competitive, and Weak Armor. In modify_attack_against.py, we seem to trigger if the attacking move has any kinds of boosts, and then additionally boosts the attacker. For example, if my Slowbro uses Calm Mind against Defiant Bisharp, the function sees that Calm Mind gives boosts to the attacker, and then gives Slowbro +2 in attack. This is incorrect in numerous ways; Defiant should only work on negative boosts to the defending Pokemon, and then the defending Pokemon with Defiant should be the one to get an attack boost. Competitive is also similarly handled wrong. Just from checking, it seems that Weak Armor is also programmed in a similar way.\r\n\r\nAlso, should Clear Body/White Smoke/other negative boost resistant abilities be handled in this file as well? I haven't confirmed, but it seems like these abilities aren't being handled anywhere, except for the one case of Intimidate on switch-in.","closed_by":{"login":"mingu600","id":16931003,"node_id":"MDQ6VXNlcjE2OTMxMDAz","avatar_url":"https://avatars.githubusercontent.com/u/16931003?v=4","gravatar_id":"","url":"https://api.github.com/users/mingu600","html_url":"https://github.com/mingu600","followers_url":"https://api.github.com/users/mingu600/followers","following_url":"https://api.github.com/users/mingu600/following{/other_user}","gists_url":"https://api.github.com/users/mingu600/gists{/gist_id}","starred_url":"https://api.github.com/users/mingu600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mingu600/subscriptions","organizations_url":"https://api.github.com/users/mingu600/orgs","repos_url":"https://api.github.com/users/mingu600/repos","events_url":"https://api.github.com/users/mingu600/events{/privacy}","received_events_url":"https://api.github.com/users/mingu600/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pmariglia/showdown/issues/94/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pmariglia/showdown/issues/94/timeline","performed_via_github_app":null,"state_reason":"completed"}