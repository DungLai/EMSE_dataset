{"url":"https://api.github.com/repos/quark0/darts/issues/37","repository_url":"https://api.github.com/repos/quark0/darts","labels_url":"https://api.github.com/repos/quark0/darts/issues/37/labels{/name}","comments_url":"https://api.github.com/repos/quark0/darts/issues/37/comments","events_url":"https://api.github.com/repos/quark0/darts/issues/37/events","html_url":"https://github.com/quark0/darts/issues/37","id":354315522,"node_id":"MDU6SXNzdWUzNTQzMTU1MjI=","number":37,"title":"train_search on multi-gpus","user":{"login":"JaminFong","id":32559548,"node_id":"MDQ6VXNlcjMyNTU5NTQ4","avatar_url":"https://avatars.githubusercontent.com/u/32559548?v=4","gravatar_id":"","url":"https://api.github.com/users/JaminFong","html_url":"https://github.com/JaminFong","followers_url":"https://api.github.com/users/JaminFong/followers","following_url":"https://api.github.com/users/JaminFong/following{/other_user}","gists_url":"https://api.github.com/users/JaminFong/gists{/gist_id}","starred_url":"https://api.github.com/users/JaminFong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JaminFong/subscriptions","organizations_url":"https://api.github.com/users/JaminFong/orgs","repos_url":"https://api.github.com/users/JaminFong/repos","events_url":"https://api.github.com/users/JaminFong/events{/privacy}","received_events_url":"https://api.github.com/users/JaminFong/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2018-08-27T13:19:18Z","updated_at":"2019-12-26T10:55:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello, quark!\r\n   Thx for your great work. When I tried to run your train_search job with multi-gpus, the Variable of alphas_normal and alphas_reduce causes errors.\r\n   The errors are shown as following:\r\n\r\n`  File \"/mnt/data-3/data/jiemin.fang/anaconda3/envs/pytorch4/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 477, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/mnt/data-3/data/jiemin.fang/darts-maml/cnn/model_search.py\", line 111, in forward\r\n    s0, s1 = s1, cell(s0, s1, weights)\r\n  File \"/mnt/data-3/data/jiemin.fang/anaconda3/envs/pytorch4/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 477, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/mnt/data-3/data/jiemin.fang/darts-maml/cnn/model_search.py\", line 54, in forward\r\n    s = sum(self._ops[offset+j](h, weights[offset+j]) for j, h in enumerate(states))\r\n  File \"/mnt/data-3/data/jiemin.fang/darts-maml/cnn/model_search.py\", line 54, in <genexpr>\r\n    s = sum(self._ops[offset+j](h, weights[offset+j]) for j, h in enumerate(states))\r\n  File \"/mnt/data-3/data/jiemin.fang/anaconda3/envs/pytorch4/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 477, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/mnt/data-3/data/jiemin.fang/darts-maml/cnn/model_search.py\", line 22, in forward\r\n    return sum(w * op(x) for w, op in zip(weights, self._ops))\r\n  File \"/mnt/data-3/data/jiemin.fang/darts-maml/cnn/model_search.py\", line 22, in <genexpr>\r\n    return sum(w * op(x) for w, op in zip(weights, self._ops))\r\nRuntimeError: arguments are located on different GPUs at /opt/conda/conda-bld/pytorch_1532581333611/work/aten/src/THC/generated/../generic/THCTensorMathPointwise.cu:314\r\n`\r\n   For debugging the code, I tried to remove 'w' which is from alphas_normal or alphas_reduce in \r\n`    return sum(w * op(x) for w, op in zip(weights, self._ops))\r\n`\r\n   Both 0.3 and 0.4 version of PyTorch have been tried, but the problem got no improvement.\r\n   Could you please tell me how I can deal with the multi-gpu training work? And have you ever met any similar problem like this?\r\n   Best and waiting for your reply!","closed_by":{"login":"quark0","id":4343626,"node_id":"MDQ6VXNlcjQzNDM2MjY=","avatar_url":"https://avatars.githubusercontent.com/u/4343626?v=4","gravatar_id":"","url":"https://api.github.com/users/quark0","html_url":"https://github.com/quark0","followers_url":"https://api.github.com/users/quark0/followers","following_url":"https://api.github.com/users/quark0/following{/other_user}","gists_url":"https://api.github.com/users/quark0/gists{/gist_id}","starred_url":"https://api.github.com/users/quark0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quark0/subscriptions","organizations_url":"https://api.github.com/users/quark0/orgs","repos_url":"https://api.github.com/users/quark0/repos","events_url":"https://api.github.com/users/quark0/events{/privacy}","received_events_url":"https://api.github.com/users/quark0/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quark0/darts/issues/37/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quark0/darts/issues/37/timeline","performed_via_github_app":null,"state_reason":null}