{"url":"https://api.github.com/repos/sipeed/MaixPy_scripts/issues/70","repository_url":"https://api.github.com/repos/sipeed/MaixPy_scripts","labels_url":"https://api.github.com/repos/sipeed/MaixPy_scripts/issues/70/labels{/name}","comments_url":"https://api.github.com/repos/sipeed/MaixPy_scripts/issues/70/comments","events_url":"https://api.github.com/repos/sipeed/MaixPy_scripts/issues/70/events","html_url":"https://github.com/sipeed/MaixPy_scripts/issues/70","id":688321587,"node_id":"MDU6SXNzdWU2ODgzMjE1ODc=","number":70,"title":"Maix bit freezes, when i use a second kpu.run_yolo2 model","user":{"login":"staberas","id":2744235,"node_id":"MDQ6VXNlcjI3NDQyMzU=","avatar_url":"https://avatars.githubusercontent.com/u/2744235?v=4","gravatar_id":"","url":"https://api.github.com/users/staberas","html_url":"https://github.com/staberas","followers_url":"https://api.github.com/users/staberas/followers","following_url":"https://api.github.com/users/staberas/following{/other_user}","gists_url":"https://api.github.com/users/staberas/gists{/gist_id}","starred_url":"https://api.github.com/users/staberas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/staberas/subscriptions","organizations_url":"https://api.github.com/users/staberas/orgs","repos_url":"https://api.github.com/users/staberas/repos","events_url":"https://api.github.com/users/staberas/events{/privacy}","received_events_url":"https://api.github.com/users/staberas/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-08-28T19:52:14Z","updated_at":"2020-08-29T16:18:33Z","closed_at":"2020-08-29T16:17:59Z","author_association":"NONE","active_lock_reason":null,"body":"I written a really long code , that combines the yolov2_20class.py & demo_face_recognition.py .\r\nWhen i call the yolov2 function , i deinit the taskFE model (its the largest one) and init and run the 20class model.  After i get the results i then deinit the yolov2 model and reload the taskFE model . Problem is that after that it freezes (after it detects something with the regular facedetection model) and never recovers. Am i missing something that i should do after i deinit ?? \r\n\r\n```python\r\ndef seeotheritems():  #7second delay\r\n    global taskfe\r\n    global a\r\n    global task\r\n    global yolonum\r\n    global anchor\r\n    classes = ['aeroplane', 'bicycle', 'bird', 'boat', 'bottle', 'bus', 'car', 'cat', 'chair', 'cow', 'diningtable', 'dog', 'horse', 'motorbike', 'person', 'pottedplant', 'sheep', 'sofa', 'train', 'tvmonitor']\r\n    anchored = (1.08, 1.19, 3.42, 4.41, 6.63, 11.38, 9.42, 5.11, 16.62, 10.52)\r\n    a = kpu.deinit(taskfe)\r\n    tasktw = kpu.load(\"/sd/model/20class.kmodel\")\r\n    uart_B.write(\" loaded 20 \")\r\n    a = kpu.init_yolo2(tasktw, 0.5, 0.3, 5, anchored)\r\n    imgother = sensor.snapshot()\r\n    a = imgother.pix_to_ai()\r\n    detectcode = kpu.run_yolo2(tasktw, imgother)\r\n    if detectcode:\r\n        for i in detectcode:\r\n            imgother = imgother.draw_rectangle(i.rect())\r\n            for i in detectcode:\r\n                imgother = imgother.draw_string(i.x(), i.y(), str(classes[i.classid()]), color=(255,250,250))\r\n                imgother = imgother.draw_string(i.x(), i.y()+12, '%f1.3'%i.value(), color=(255,250,250))\r\n                imgother.save(\"/sd/yoloimages/\"+str(yolonum)+\".jpg\", quality=70)\r\n                utime.sleep_ms(5)\r\n                del(imgother)\r\n                yolonum+=1\r\n                uart_B.write(\" |Yolo|> \"+ str(classes[i.classid()]) +\" <||\")\r\n    a = kpu.deinit(tasktw)\r\n    #del(detectcode)\r\n    gc.collect()\r\n    uart_B.write(\" killed \")\r\n    taskfe = kpu.load(\"/sd/model/FE.smodel\")\r\n    a = kpu.init_yolo2(task, 0.5, 0.3, 5, anchor)\r\n    uart_B.write(\" reloaded model \")\r\n```","closed_by":{"login":"staberas","id":2744235,"node_id":"MDQ6VXNlcjI3NDQyMzU=","avatar_url":"https://avatars.githubusercontent.com/u/2744235?v=4","gravatar_id":"","url":"https://api.github.com/users/staberas","html_url":"https://github.com/staberas","followers_url":"https://api.github.com/users/staberas/followers","following_url":"https://api.github.com/users/staberas/following{/other_user}","gists_url":"https://api.github.com/users/staberas/gists{/gist_id}","starred_url":"https://api.github.com/users/staberas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/staberas/subscriptions","organizations_url":"https://api.github.com/users/staberas/orgs","repos_url":"https://api.github.com/users/staberas/repos","events_url":"https://api.github.com/users/staberas/events{/privacy}","received_events_url":"https://api.github.com/users/staberas/received_events","type":"User","site_admin":false},"reactions":{"url":"https://api.github.com/repos/sipeed/MaixPy_scripts/issues/70/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/sipeed/MaixPy_scripts/issues/70/timeline","performed_via_github_app":null,"state_reason":"completed"}