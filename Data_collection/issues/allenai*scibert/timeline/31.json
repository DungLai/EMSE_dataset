[{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480550660","html_url":"https://github.com/allenai/scibert/issues/31#issuecomment-480550660","issue_url":"https://api.github.com/repos/allenai/scibert/issues/31","id":480550660,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDU1MDY2MA==","user":{"login":"haowenke","id":44043660,"node_id":"MDQ6VXNlcjQ0MDQzNjYw","avatar_url":"https://avatars.githubusercontent.com/u/44043660?v=4","gravatar_id":"","url":"https://api.github.com/users/haowenke","html_url":"https://github.com/haowenke","followers_url":"https://api.github.com/users/haowenke/followers","following_url":"https://api.github.com/users/haowenke/following{/other_user}","gists_url":"https://api.github.com/users/haowenke/gists{/gist_id}","starred_url":"https://api.github.com/users/haowenke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haowenke/subscriptions","organizations_url":"https://api.github.com/users/haowenke/orgs","repos_url":"https://api.github.com/users/haowenke/repos","events_url":"https://api.github.com/users/haowenke/events{/privacy}","received_events_url":"https://api.github.com/users/haowenke/received_events","type":"User","site_admin":false},"created_at":"2019-04-07T01:23:34Z","updated_at":"2019-04-07T01:23:34Z","author_association":"NONE","body":"It seems that the code works fine on parsing and text classification while same errror occurs (KeyError: 'text') in ner and pico task.","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480550660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"haowenke","id":44043660,"node_id":"MDQ6VXNlcjQ0MDQzNjYw","avatar_url":"https://avatars.githubusercontent.com/u/44043660?v=4","gravatar_id":"","url":"https://api.github.com/users/haowenke","html_url":"https://github.com/haowenke","followers_url":"https://api.github.com/users/haowenke/followers","following_url":"https://api.github.com/users/haowenke/following{/other_user}","gists_url":"https://api.github.com/users/haowenke/gists{/gist_id}","starred_url":"https://api.github.com/users/haowenke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haowenke/subscriptions","organizations_url":"https://api.github.com/users/haowenke/orgs","repos_url":"https://api.github.com/users/haowenke/repos","events_url":"https://api.github.com/users/haowenke/events{/privacy}","received_events_url":"https://api.github.com/users/haowenke/received_events","type":"User","site_admin":false}},{"id":2260095231,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIyNjAwOTUyMzE=","url":"https://api.github.com/repos/allenai/scibert/issues/events/2260095231","actor":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false},"event":"referenced","commit_id":"64bb606f4ca2e54a6019a017957f09895b7dcb14","commit_url":"https://api.github.com/repos/allenai/scibert/commits/64bb606f4ca2e54a6019a017957f09895b7dcb14","created_at":"2019-04-08T15:27:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480880777","html_url":"https://github.com/allenai/scibert/issues/31#issuecomment-480880777","issue_url":"https://api.github.com/repos/allenai/scibert/issues/31","id":480880777,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDg4MDc3Nw==","user":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false},"created_at":"2019-04-08T15:28:42Z","updated_at":"2019-04-08T15:28:42Z","author_association":"COLLABORATOR","body":"Just pushed a fix. Please let us know if you have other issues. Thanks","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480880777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480964229","html_url":"https://github.com/allenai/scibert/issues/31#issuecomment-480964229","issue_url":"https://api.github.com/repos/allenai/scibert/issues/31","id":480964229,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDk2NDIyOQ==","user":{"login":"purn3ndu","id":6643473,"node_id":"MDQ6VXNlcjY2NDM0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6643473?v=4","gravatar_id":"","url":"https://api.github.com/users/purn3ndu","html_url":"https://github.com/purn3ndu","followers_url":"https://api.github.com/users/purn3ndu/followers","following_url":"https://api.github.com/users/purn3ndu/following{/other_user}","gists_url":"https://api.github.com/users/purn3ndu/gists{/gist_id}","starred_url":"https://api.github.com/users/purn3ndu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purn3ndu/subscriptions","organizations_url":"https://api.github.com/users/purn3ndu/orgs","repos_url":"https://api.github.com/users/purn3ndu/repos","events_url":"https://api.github.com/users/purn3ndu/events{/privacy}","received_events_url":"https://api.github.com/users/purn3ndu/received_events","type":"User","site_admin":false},"created_at":"2019-04-08T19:04:32Z","updated_at":"2019-04-08T19:04:56Z","author_association":"NONE","body":"Thanks, @ibeltagy. Was stuck at the same problem. The fix solved it. Although I ran into another issue. \r\n\r\n\r\n```\r\n2019-04-08 18:49:05,620 - INFO - allennlp.training.trainer - Beginning training.\r\n2019-04-08 18:49:05,620 - INFO - allennlp.training.trainer - Epoch 0/74\r\n2019-04-08 18:49:05,620 - INFO - allennlp.training.trainer - Peak CPU memory usage MB: 3521.184\r\n2019-04-08 18:49:05,781 - INFO - allennlp.training.trainer - GPU 0 memory usage MB: 2018\r\n2019-04-08 18:49:05,781 - INFO - allennlp.training.trainer - GPU 1 memory usage MB: 1\r\n2019-04-08 18:49:05,781 - INFO - allennlp.training.trainer - GPU 2 memory usage MB: 1\r\n2019-04-08 18:49:05,781 - INFO - allennlp.training.trainer - GPU 3 memory usage MB: 1\r\n2019-04-08 18:49:05,785 - INFO - allennlp.training.trainer - Training\r\n  0%|          | 0/62 [00:00<?, ?it/s]Traceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/opt/conda/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/run.py\", line 21, in <module>\r\n    run()\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/run.py\", line 18, in run\r\n    main(prog=\"allennlp\")\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/commands/__init__.py\", line 101, in main\r\n    args.func(args)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/commands/train.py\", line 103, in train_model_from_args\r\n    args.force)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/commands/train.py\", line 136, in train_model_from_file\r\n    return train_model(params, serialization_dir, file_friendly_logging, recover, force)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/commands/train.py\", line 204, in train_model\r\n    metrics = trainer.train()\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/training/trainer.py\", line 480, in train\r\n    train_metrics = self._train_epoch(epoch)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/training/trainer.py\", line 322, in _train_epoch\r\n    loss = self.batch_loss(batch_group, for_training=True)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/training/trainer.py\", line 263, in batch_loss\r\n    output_dict = self.model(**batch)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 494, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/models/crf_tagger.py\", line 182, in forward\r\n    embedded_text_input = self.text_field_embedder(tokens)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 494, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/modules/text_field_embedders/basic_text_field_embedder.py\", line 110, in forward\r\n    token_vectors = embedder(*tensors)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 494, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/allennlp/modules/token_embedders/bert_token_embedder.py\", line 91, in forward\r\n    attention_mask=util.combine_initial_dims(input_mask))\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 494, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 711, in forward\r\n    embedding_output = self.embeddings(input_ids, token_type_ids)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 494, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/pytorch_pretrained_bert/modeling.py\", line 262, in forward\r\n    embeddings = self.LayerNorm(embeddings)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 494, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/apex/normalization/fused_layer_norm.py\", line 149, in forward\r\n    input, self.weight, self.bias)\r\n  File \"/opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/apex/normalization/fused_layer_norm.py\", line 21, in forward\r\n    input_, self.normalized_shape, weight_, bias_, self.eps)\r\nRuntimeError: Undefined backend is not a valid device type (backendToDeviceType at /opt/conda/lib/python3.6/site-packages/torch/include/c10/core/Backend.h:141)\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string const&) + 0x45 (0x7f446433c505 in /opt/conda/lib/python3.6/site-packages/torch/lib/libc10.so)\r\nframe #1: <unknown function> + 0x983b (0x7f44171a183b in /opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/fused_layer_norm_cuda.cpython-36m-x86_64-linux-gnu.so)\r\nframe #2: layer_norm_affine(at::Tensor, c10::ArrayRef<long>, at::Tensor, at::Tensor, double) + 0x58 (0x7f44171a43e8 in /opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/fused_layer_norm_cuda.cpython-36m-x86_64-linux-gnu.so)\r\nframe #3: <unknown function> + 0x19583 (0x7f44171b1583 in /opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/fused_layer_norm_cuda.cpython-36m-x86_64-linux-gnu.so)\r\nframe #4: <unknown function> + 0x1969e (0x7f44171b169e in /opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/fused_layer_norm_cuda.cpython-36m-x86_64-linux-gnu.so)\r\nframe #5: <unknown function> + 0x168f2 (0x7f44171ae8f2 in /opt/conda/lib/python3.6/site-packages/apex-0.1-py3.6-linux-x86_64.egg/fused_layer_norm_cuda.cpython-36m-x86_64-linux-gnu.so)\r\n<omitting python frames>\r\nframe #13: THPFunction_do_forward(THPFunction*, _object*) + 0x189 (0x7f448e54d129 in /opt/conda/lib/python3.6/site-packages/torch/lib/libtorch_python.so)\r\n\r\n```\r\n\r\nAny idea on how to fix this?","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480964229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"purn3ndu","id":6643473,"node_id":"MDQ6VXNlcjY2NDM0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6643473?v=4","gravatar_id":"","url":"https://api.github.com/users/purn3ndu","html_url":"https://github.com/purn3ndu","followers_url":"https://api.github.com/users/purn3ndu/followers","following_url":"https://api.github.com/users/purn3ndu/following{/other_user}","gists_url":"https://api.github.com/users/purn3ndu/gists{/gist_id}","starred_url":"https://api.github.com/users/purn3ndu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purn3ndu/subscriptions","organizations_url":"https://api.github.com/users/purn3ndu/orgs","repos_url":"https://api.github.com/users/purn3ndu/repos","events_url":"https://api.github.com/users/purn3ndu/events{/privacy}","received_events_url":"https://api.github.com/users/purn3ndu/received_events","type":"User","site_admin":false}},{"id":2260702604,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjI2MDcwMjYwNA==","url":"https://api.github.com/repos/allenai/scibert/issues/events/2260702604","actor":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-04-08T19:04:32Z","performed_via_github_app":null},{"id":2260702605,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyNjA3MDI2MDU=","url":"https://api.github.com/repos/allenai/scibert/issues/events/2260702605","actor":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-04-08T19:04:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480974882","html_url":"https://github.com/allenai/scibert/issues/31#issuecomment-480974882","issue_url":"https://api.github.com/repos/allenai/scibert/issues/31","id":480974882,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDk3NDg4Mg==","user":{"login":"purn3ndu","id":6643473,"node_id":"MDQ6VXNlcjY2NDM0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6643473?v=4","gravatar_id":"","url":"https://api.github.com/users/purn3ndu","html_url":"https://github.com/purn3ndu","followers_url":"https://api.github.com/users/purn3ndu/followers","following_url":"https://api.github.com/users/purn3ndu/following{/other_user}","gists_url":"https://api.github.com/users/purn3ndu/gists{/gist_id}","starred_url":"https://api.github.com/users/purn3ndu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purn3ndu/subscriptions","organizations_url":"https://api.github.com/users/purn3ndu/orgs","repos_url":"https://api.github.com/users/purn3ndu/repos","events_url":"https://api.github.com/users/purn3ndu/events{/privacy}","received_events_url":"https://api.github.com/users/purn3ndu/received_events","type":"User","site_admin":false},"created_at":"2019-04-08T19:31:58Z","updated_at":"2019-04-08T19:31:58Z","author_association":"NONE","body":"Nevermind, the fix [mentioned here](https://github.com/NVIDIA/apex/issues/161#issuecomment-466611317) fixed it. :) Thanks again.","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/480974882/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"purn3ndu","id":6643473,"node_id":"MDQ6VXNlcjY2NDM0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6643473?v=4","gravatar_id":"","url":"https://api.github.com/users/purn3ndu","html_url":"https://github.com/purn3ndu","followers_url":"https://api.github.com/users/purn3ndu/followers","following_url":"https://api.github.com/users/purn3ndu/following{/other_user}","gists_url":"https://api.github.com/users/purn3ndu/gists{/gist_id}","starred_url":"https://api.github.com/users/purn3ndu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purn3ndu/subscriptions","organizations_url":"https://api.github.com/users/purn3ndu/orgs","repos_url":"https://api.github.com/users/purn3ndu/repos","events_url":"https://api.github.com/users/purn3ndu/events{/privacy}","received_events_url":"https://api.github.com/users/purn3ndu/received_events","type":"User","site_admin":false}},{"id":2260982240,"node_id":"MDExOkNsb3NlZEV2ZW50MjI2MDk4MjI0MA==","url":"https://api.github.com/repos/allenai/scibert/issues/events/2260982240","actor":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-04-08T20:56:51Z","state_reason":null,"performed_via_github_app":null}]