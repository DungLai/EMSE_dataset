[{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/663676681","html_url":"https://github.com/allenai/scibert/issues/98#issuecomment-663676681","issue_url":"https://api.github.com/repos/allenai/scibert/issues/98","id":663676681,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzY3NjY4MQ==","user":{"login":"Sachit1137","id":55988870,"node_id":"MDQ6VXNlcjU1OTg4ODcw","avatar_url":"https://avatars.githubusercontent.com/u/55988870?v=4","gravatar_id":"","url":"https://api.github.com/users/Sachit1137","html_url":"https://github.com/Sachit1137","followers_url":"https://api.github.com/users/Sachit1137/followers","following_url":"https://api.github.com/users/Sachit1137/following{/other_user}","gists_url":"https://api.github.com/users/Sachit1137/gists{/gist_id}","starred_url":"https://api.github.com/users/Sachit1137/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sachit1137/subscriptions","organizations_url":"https://api.github.com/users/Sachit1137/orgs","repos_url":"https://api.github.com/users/Sachit1137/repos","events_url":"https://api.github.com/users/Sachit1137/events{/privacy}","received_events_url":"https://api.github.com/users/Sachit1137/received_events","type":"User","site_admin":false},"created_at":"2020-07-24T18:35:53Z","updated_at":"2020-07-24T18:35:53Z","author_association":"NONE","body":"Can someone help me figure this out?","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/663676681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Sachit1137","id":55988870,"node_id":"MDQ6VXNlcjU1OTg4ODcw","avatar_url":"https://avatars.githubusercontent.com/u/55988870?v=4","gravatar_id":"","url":"https://api.github.com/users/Sachit1137","html_url":"https://github.com/Sachit1137","followers_url":"https://api.github.com/users/Sachit1137/followers","following_url":"https://api.github.com/users/Sachit1137/following{/other_user}","gists_url":"https://api.github.com/users/Sachit1137/gists{/gist_id}","starred_url":"https://api.github.com/users/Sachit1137/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sachit1137/subscriptions","organizations_url":"https://api.github.com/users/Sachit1137/orgs","repos_url":"https://api.github.com/users/Sachit1137/repos","events_url":"https://api.github.com/users/Sachit1137/events{/privacy}","received_events_url":"https://api.github.com/users/Sachit1137/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/663759050","html_url":"https://github.com/allenai/scibert/issues/98#issuecomment-663759050","issue_url":"https://api.github.com/repos/allenai/scibert/issues/98","id":663759050,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mzc1OTA1MA==","user":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false},"created_at":"2020-07-24T22:29:14Z","updated_at":"2020-07-24T22:29:14Z","author_association":"COLLABORATOR","body":"The code is a bit difficult to read without formatting, but the obvious issues are that you need to use `AutoModelForTokenClassification` and it is weird to do `encode(tokenize(tokenizer.decode(tokenizer.encode(string)))`. I think the easiest solution is to follow the huggingface NER pytorch-lightning example [here](https://github.com/huggingface/transformers/blob/master/examples/token-classification/run_pl.sh).","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/663759050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ibeltagy","id":2287797,"node_id":"MDQ6VXNlcjIyODc3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/2287797?v=4","gravatar_id":"","url":"https://api.github.com/users/ibeltagy","html_url":"https://github.com/ibeltagy","followers_url":"https://api.github.com/users/ibeltagy/followers","following_url":"https://api.github.com/users/ibeltagy/following{/other_user}","gists_url":"https://api.github.com/users/ibeltagy/gists{/gist_id}","starred_url":"https://api.github.com/users/ibeltagy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibeltagy/subscriptions","organizations_url":"https://api.github.com/users/ibeltagy/orgs","repos_url":"https://api.github.com/users/ibeltagy/repos","events_url":"https://api.github.com/users/ibeltagy/events{/privacy}","received_events_url":"https://api.github.com/users/ibeltagy/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/663762797","html_url":"https://github.com/allenai/scibert/issues/98#issuecomment-663762797","issue_url":"https://api.github.com/repos/allenai/scibert/issues/98","id":663762797,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mzc2Mjc5Nw==","user":{"login":"stefan-it","id":20651387,"node_id":"MDQ6VXNlcjIwNjUxMzg3","avatar_url":"https://avatars.githubusercontent.com/u/20651387?v=4","gravatar_id":"","url":"https://api.github.com/users/stefan-it","html_url":"https://github.com/stefan-it","followers_url":"https://api.github.com/users/stefan-it/followers","following_url":"https://api.github.com/users/stefan-it/following{/other_user}","gists_url":"https://api.github.com/users/stefan-it/gists{/gist_id}","starred_url":"https://api.github.com/users/stefan-it/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefan-it/subscriptions","organizations_url":"https://api.github.com/users/stefan-it/orgs","repos_url":"https://api.github.com/users/stefan-it/repos","events_url":"https://api.github.com/users/stefan-it/events{/privacy}","received_events_url":"https://api.github.com/users/stefan-it/received_events","type":"User","site_admin":false},"created_at":"2020-07-24T22:46:23Z","updated_at":"2020-07-24T22:46:35Z","author_association":"NONE","body":"@Sachit1137 just use the fine-tuning example for token-classification from Transformers:\r\n\r\nhttps://github.com/huggingface/transformers/tree/master/examples/token-classification\r\n\r\nThere are two examples given which you just need to adapt for your dataset.\r\n\r\nLater, you can just use the Transformers Pipelines feature to make predictions, see [this example](https://huggingface.co/transformers/usage.html#named-entity-recognition).\r\n\r\nIf you need help with the token classification example, just ping me :)","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/663762797/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null,"event":"commented","actor":{"login":"stefan-it","id":20651387,"node_id":"MDQ6VXNlcjIwNjUxMzg3","avatar_url":"https://avatars.githubusercontent.com/u/20651387?v=4","gravatar_id":"","url":"https://api.github.com/users/stefan-it","html_url":"https://github.com/stefan-it","followers_url":"https://api.github.com/users/stefan-it/followers","following_url":"https://api.github.com/users/stefan-it/following{/other_user}","gists_url":"https://api.github.com/users/stefan-it/gists{/gist_id}","starred_url":"https://api.github.com/users/stefan-it/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stefan-it/subscriptions","organizations_url":"https://api.github.com/users/stefan-it/orgs","repos_url":"https://api.github.com/users/stefan-it/repos","events_url":"https://api.github.com/users/stefan-it/events{/privacy}","received_events_url":"https://api.github.com/users/stefan-it/received_events","type":"User","site_admin":false}},{"id":3585683078,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzU4NTY4MzA3OA==","url":"https://api.github.com/repos/allenai/scibert/issues/events/3585683078","actor":{"login":"Sachit1137","id":55988870,"node_id":"MDQ6VXNlcjU1OTg4ODcw","avatar_url":"https://avatars.githubusercontent.com/u/55988870?v=4","gravatar_id":"","url":"https://api.github.com/users/Sachit1137","html_url":"https://github.com/Sachit1137","followers_url":"https://api.github.com/users/Sachit1137/followers","following_url":"https://api.github.com/users/Sachit1137/following{/other_user}","gists_url":"https://api.github.com/users/Sachit1137/gists{/gist_id}","starred_url":"https://api.github.com/users/Sachit1137/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sachit1137/subscriptions","organizations_url":"https://api.github.com/users/Sachit1137/orgs","repos_url":"https://api.github.com/users/Sachit1137/repos","events_url":"https://api.github.com/users/Sachit1137/events{/privacy}","received_events_url":"https://api.github.com/users/Sachit1137/received_events","type":"User","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-07-24T22:46:23Z","performed_via_github_app":null},{"id":3585683080,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM1ODU2ODMwODA=","url":"https://api.github.com/repos/allenai/scibert/issues/events/3585683080","actor":{"login":"Sachit1137","id":55988870,"node_id":"MDQ6VXNlcjU1OTg4ODcw","avatar_url":"https://avatars.githubusercontent.com/u/55988870?v=4","gravatar_id":"","url":"https://api.github.com/users/Sachit1137","html_url":"https://github.com/Sachit1137","followers_url":"https://api.github.com/users/Sachit1137/followers","following_url":"https://api.github.com/users/Sachit1137/following{/other_user}","gists_url":"https://api.github.com/users/Sachit1137/gists{/gist_id}","starred_url":"https://api.github.com/users/Sachit1137/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sachit1137/subscriptions","organizations_url":"https://api.github.com/users/Sachit1137/orgs","repos_url":"https://api.github.com/users/Sachit1137/repos","events_url":"https://api.github.com/users/Sachit1137/events{/privacy}","received_events_url":"https://api.github.com/users/Sachit1137/received_events","type":"User","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-07-24T22:46:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/810275484","html_url":"https://github.com/allenai/scibert/issues/98#issuecomment-810275484","issue_url":"https://api.github.com/repos/allenai/scibert/issues/98","id":810275484,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDI3NTQ4NA==","user":{"login":"zcyzhuangzhou","id":26005197,"node_id":"MDQ6VXNlcjI2MDA1MTk3","avatar_url":"https://avatars.githubusercontent.com/u/26005197?v=4","gravatar_id":"","url":"https://api.github.com/users/zcyzhuangzhou","html_url":"https://github.com/zcyzhuangzhou","followers_url":"https://api.github.com/users/zcyzhuangzhou/followers","following_url":"https://api.github.com/users/zcyzhuangzhou/following{/other_user}","gists_url":"https://api.github.com/users/zcyzhuangzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/zcyzhuangzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcyzhuangzhou/subscriptions","organizations_url":"https://api.github.com/users/zcyzhuangzhou/orgs","repos_url":"https://api.github.com/users/zcyzhuangzhou/repos","events_url":"https://api.github.com/users/zcyzhuangzhou/events{/privacy}","received_events_url":"https://api.github.com/users/zcyzhuangzhou/received_events","type":"User","site_admin":false},"created_at":"2021-03-30T13:57:32Z","updated_at":"2021-03-30T13:57:32Z","author_association":"NONE","body":"> I tried with the code below:\r\n> \r\n> ```\r\n> from transformers import AutoTokenizer, AutoModel,AutoModelForTokenClassification\r\n> import torch\r\n> \r\n> #I am getting the label list from labels.txt file present in the Pytorch Huggingface model(scibert-scivocab-uncased)\r\n> def read_label_list():\r\n>     f = open('labels.txt','r')\r\n>     label_list = []\r\n>     for line in f:\r\n>         label_list.append(line)\r\n>     return label_list\r\n> \r\n> tokenizer = AutoTokenizer.from_pretrained('allenai/scibert_scivocab_uncased')\r\n> model = AutoModel.from_pretrained('allenai/scibert_scivocab_uncased')\r\n> \r\n> sequence = 'Effectiveness of current drug treatments for hospitalized patients with SARS-CoV-2 infection (COVID-19 patients) in routine clinical practice|Risk factors or modifiers of pharmacological effect such as demographic characteristics, comorbidity or underlying pathology, concomitant medication.'\r\n> \r\n> label_list = read_label_list()\r\n> tokens = tokenizer.tokenize(tokenizer.decode(tokenizer.encode(sequence)))\r\n> inputs = tokenizer.encode(sequence, return_tensors=\"pt\")\r\n> outputs = model(inputs)[0]\r\n> predictions = torch.argmax(outputs, dim = 2)\r\n> \r\n> for token, prediction in zip(tokens,predictions[0].numpy()):\r\n>     print((token, label_list[prediction]))\r\n> ```\r\n> \r\n> I am getting the following output which is not making sense:\r\n> ('[CLS]', '##.49\\n')\r\n> ('effectiveness', '##.49\\n')\r\n> ('of', '##.49\\n')\r\n> ('current', '##.49\\n')\r\n> ('drug', '##.49\\n')\r\n> ('treatments', '##.49\\n')\r\n> ('for', '##.49\\n')\r\n> ('hospitalized', '##.49\\n')\r\n> ('patients', '##.49\\n')\r\n> ('with', '##.49\\n')\r\n> ('sar', '##.49\\n')\r\n> ('##s', '##.49\\n')\r\n> ('-', '##.49\\n')\r\n> ('cov', '##.49\\n')\r\n> ('-', '##.49\\n')\r\n> ('2', '##.49\\n')\r\n> ('infection', '##.49\\n')\r\n> ('(', '##.49\\n')\r\n> ('cov', '##.49\\n')\r\n> ('##id', '##.49\\n')\r\n> ('-', '##.49\\n')\r\n> ('19', '##.49\\n')\r\n> ('patients', '##.49\\n')\r\n> (')', '##.49\\n')\r\n> ('in', '##.49\\n')\r\n> ('routine', '##.49\\n')\r\n> ('clinical', '##.49\\n')\r\n> ('practice', '##.49\\n')\r\n> ('|', '##.49\\n')\r\n> ('risk', '##.49\\n')\r\n> ('factors', '##.49\\n')\r\n> ('or', '##.49\\n')\r\n> ('modi', '##.49\\n')\r\n> ('##fi', '##.49\\n')\r\n> ('##ers', '##.49\\n')\r\n> ('of', '##.49\\n')\r\n> ('pharmacological', '##.49\\n')\r\n> ('effect', '##.49\\n')\r\n> ('such', '##.49\\n')\r\n> ('as', '##.49\\n')\r\n> ('demographic', '##.49\\n')\r\n> ('characteristics', '##.49\\n')\r\n> (',', '##.49\\n')\r\n> ('comorbidity', '##.49\\n')\r\n> ('or', '##.49\\n')\r\n> ('underlying', '##.49\\n')\r\n> ('pathology', '##.49\\n')\r\n> (',', '##.49\\n')\r\n> ('concomitant', '##.49\\n')\r\n> ('medication', '##.49\\n')\r\n> ('.', '##1-4\\n')\r\n> ('[SEP]', '##.49\\n')\r\n\r\nHello, why is there no label.txt in the model file I downloaded? I want to fine-tune my data, but I don’t know the format of the scibert data and all labels.","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/810275484/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zcyzhuangzhou","id":26005197,"node_id":"MDQ6VXNlcjI2MDA1MTk3","avatar_url":"https://avatars.githubusercontent.com/u/26005197?v=4","gravatar_id":"","url":"https://api.github.com/users/zcyzhuangzhou","html_url":"https://github.com/zcyzhuangzhou","followers_url":"https://api.github.com/users/zcyzhuangzhou/followers","following_url":"https://api.github.com/users/zcyzhuangzhou/following{/other_user}","gists_url":"https://api.github.com/users/zcyzhuangzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/zcyzhuangzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcyzhuangzhou/subscriptions","organizations_url":"https://api.github.com/users/zcyzhuangzhou/orgs","repos_url":"https://api.github.com/users/zcyzhuangzhou/repos","events_url":"https://api.github.com/users/zcyzhuangzhou/events{/privacy}","received_events_url":"https://api.github.com/users/zcyzhuangzhou/received_events","type":"User","site_admin":false}},{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/1138271619","html_url":"https://github.com/allenai/scibert/issues/98#issuecomment-1138271619","issue_url":"https://api.github.com/repos/allenai/scibert/issues/98","id":1138271619,"node_id":"IC_kwDOCgmL1M5D2KWD","user":{"login":"jaynibandh","id":32011509,"node_id":"MDQ6VXNlcjMyMDExNTA5","avatar_url":"https://avatars.githubusercontent.com/u/32011509?v=4","gravatar_id":"","url":"https://api.github.com/users/jaynibandh","html_url":"https://github.com/jaynibandh","followers_url":"https://api.github.com/users/jaynibandh/followers","following_url":"https://api.github.com/users/jaynibandh/following{/other_user}","gists_url":"https://api.github.com/users/jaynibandh/gists{/gist_id}","starred_url":"https://api.github.com/users/jaynibandh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaynibandh/subscriptions","organizations_url":"https://api.github.com/users/jaynibandh/orgs","repos_url":"https://api.github.com/users/jaynibandh/repos","events_url":"https://api.github.com/users/jaynibandh/events{/privacy}","received_events_url":"https://api.github.com/users/jaynibandh/received_events","type":"User","site_admin":false},"created_at":"2022-05-26T08:00:44Z","updated_at":"2022-05-26T08:00:44Z","author_association":"NONE","body":"No such file or directory: 'labels.txt' same as [zcyzhuangzhou] encountered. What is the format or any example file to go through?\r\n","reactions":{"url":"https://api.github.com/repos/allenai/scibert/issues/comments/1138271619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jaynibandh","id":32011509,"node_id":"MDQ6VXNlcjMyMDExNTA5","avatar_url":"https://avatars.githubusercontent.com/u/32011509?v=4","gravatar_id":"","url":"https://api.github.com/users/jaynibandh","html_url":"https://github.com/jaynibandh","followers_url":"https://api.github.com/users/jaynibandh/followers","following_url":"https://api.github.com/users/jaynibandh/following{/other_user}","gists_url":"https://api.github.com/users/jaynibandh/gists{/gist_id}","starred_url":"https://api.github.com/users/jaynibandh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaynibandh/subscriptions","organizations_url":"https://api.github.com/users/jaynibandh/orgs","repos_url":"https://api.github.com/users/jaynibandh/repos","events_url":"https://api.github.com/users/jaynibandh/events{/privacy}","received_events_url":"https://api.github.com/users/jaynibandh/received_events","type":"User","site_admin":false}}]